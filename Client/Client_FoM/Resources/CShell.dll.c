/* This file was generated by the Hex-Rays decompiler version 9.2.0.250908.
   Copyright (c) 2007-2021 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <math.h>
#include <defs.h>

#include <stdarg.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

char *__cdecl String_Duplicate(const char *a1);
void __thiscall CommandEntry_SetName(int this, const char *a2);
int __cdecl String_CompareCallback(int (__thiscall ***a1)(_DWORD), int (__thiscall ***a2)(_DWORD));
int *__thiscall CallbackHandler_Invoke(int *this, int a2);
_DWORD *__thiscall DwordArray_Ctor(_DWORD *this);
_DWORD *__thiscall DwordArray_Ctor2(_DWORD *this);
int __thiscall DwordArray_GetCount(void *this);
_DWORD *__thiscall DwordArray_Ctor3(_DWORD *this);
int __thiscall Array_GetCount(void *this);
int __thiscall Array_GetElementAt(unsigned int *this, unsigned int a2);
_DWORD *__thiscall DwordArray_Ctor4(_DWORD *this);
int __thiscall DwordArray_GetCount2(void *this);
int __thiscall DwordArray_GetAt(unsigned int *this, unsigned int a2);
int __thiscall DwordArray_BinarySearch(_DWORD *this, int a2, int (__cdecl *a3)(int, _DWORD));
void __thiscall Array_DoubleCapacity(void *this);
void __thiscall Array_DoubleCapacity2(void *this);
int __cdecl StringCompare_ForSort(const char *a1, int a2);
int __cdecl StringCompare_BothEntries(int a1, int a2);
_DWORD *__thiscall CommandEntry_Ctor(_DWORD *this, const char *a2, int a3);
int *__thiscall SortedArray_SetSortMode(int *this, int *a2);
int __thiscall CommandTable_FindByName(_DWORD *this, int a2, int (__cdecl *a3)(int, _DWORD));
unsigned int __thiscall DwordArray_InsertAt(unsigned int *this, int a2, unsigned int a3);
unsigned int __thiscall DwordArray_InsertAt2(unsigned int *this, int a2, unsigned int a3);
void __thiscall CommandTable_InsertSorted(unsigned int *this, int a2, int (__cdecl *a3)(int, _DWORD));
void __thiscall SortedArray_InsertBinarySearch(unsigned int *this, int a2, int (__cdecl *a3)(int, _DWORD));
int __thiscall LinkedList_AddHead(_DWORD *this, int a2);
int __thiscall LinkedList_Remove(int *this);
void __thiscall CommandQueue_ProcessCommand(int a1, int *a3);
int __thiscall LinkedList_Remove_Thunk(int *this);
_DWORD *__thiscall CommandMgr_Init(_DWORD *this);
void __thiscall CommandMgr_Clear(char *this);
void __cdecl CommandQueue_HandleResult(int a1, int a2);
void __cdecl CommandQueue_HandleComplete(int a1);
void __cdecl CommandQueue_HandleCancel(int a1);
void __thiscall CommandQueue_RegisterHandler(_DWORD *this, int *a2, const char *a3, int a4);
void CommandMgr_EnsureAlloc();
_DWORD *__thiscall StringArray_Ctor(_DWORD *this);
void __cdecl CommandMgr_QueueCommand(void *a1);
_DWORD *__thiscall CommandHandler_Ctor(_DWORD *this, int a2, int a3);
void __cdecl SetMasterDatabase(int a1);
int CommandMgr_GetActiveHandler();
__int16 *__cdecl EquipSlotTable_Find(__int16 a1);
int __thiscall ItemTemplateById_Get(_DWORD *this, unsigned __int16 a2);
void __thiscall Vec3_Set(float *this, float a2, float a3, float a4);
const char *__cdecl Character_BuildSkinPaths(char *a1, _WORD *a2);
char *__cdecl Character_ReadSkinList(char *a1, int a2);
char *__cdecl Character_ReadRenderStyleList(char *a1, int a2);
int __cdecl Character_ApplyEquipToModel(_WORD *a1, int a2);
_BYTE *__thiscall CharacterState_Init(char *this);
void __thiscall CharacterState_FreeBuffers(int this);
int __thiscall CharacterState_Reset(int this);
int __cdecl Rand_InRangeOrNeg1(int a1);
int __cdecl Rand_InRange(int a1, int a2);
double __cdecl Rand_FloatInRange(float a1, float a2);
double __cdecl Float_ToDouble(float a1);
unsigned int __cdecl Color565_ToRGB(unsigned int a1, float *a2);
float *__cdecl Quaternion_Multiply(float *a1, float *a2, float *a3);
float *__thiscall Vec4_Copy(float *this, float *a2);
float *__thiscall Quaternion_FromAxisAngle(float *this, float *a2, float a3);
float *__thiscall Vec4_Copy2(float *this, float *a2);
float *__thiscall Quat_RotateAroundAxis(float *this, float *a2, float a3);
float *__thiscall Vector3_Set(float *this, float a2, float a3, float a4);
double __cdecl EaseFunc_SmoothStep(float a1);
void __cdecl ScreenFade_SelectTransition(float a1);
float *__thiscall Quat_GetForwardVector(float *this, float *a2);
int __cdecl sub_657065C0(__packed *lpData, Packet_7B_List hKey); // idb
// LSTATUS __usercall Registry_SetUsernameValue@<eax>(HKEY a1@<eax>);
LSTATUS __cdecl Registry_WriteFoMKey(__packed *lpData);
// char __usercall Registry_LoadPlayerSettings@<al>(__packed *lpData@<ecx>, int a2@<ebx>, int a3@<edi>);
double __thiscall Msg_ReadFloat(void *this);
int __thiscall Msg_ReadVector3f(void *this, int a2);
void __thiscall BitStream_ReadStruct92(int this, int *a2);
void __thiscall BitStream_ReadStruct116(int this, int *a2);
// void __userpurge PacketData_ReadPlayerStruct(int a1@<ecx>, int a2@<edi>, int *a3);
void *__thiscall SharedMem_Map_Init(void *this);
HANDLE SharedMem_Release();
int __stdcall SharedMem_GetDwordByIndex(unsigned int a1);
void SharedMem_Lock();
LONG SharedMem_Unlock();
__int16 __stdcall SharedMem_ReadU16_std(unsigned int a1);
int __thiscall SharedMem_ReadDword_this(void *this, unsigned int a2);
bool __stdcall SharedMem_ReadBool_std(unsigned int a1);
double __stdcall SharedMem_ReadFloat_std(unsigned int a1);
int __stdcall SharedMem_ReadDword_std(unsigned int a1);
void __thiscall SharedMem_GetPtr(void *this, unsigned int a2);
char *__thiscall SharedMem_Memset(void *this, unsigned int a2, char a3, WorldLoginReturnAddrPacked Size);
void __thiscall SharedMem_ReadBlock(void *this, int a2, void *a3, WorldLoginReturnAddrPacked Size);
LONG __thiscall Ui_ReadFieldTextById(void *this, int a2, char *Destination, size_t Count);
unsigned int __stdcall SharedMem_ReadBlock_std(int a1, void *a2, WorldLoginReturnAddrPacked Size);
LONG __thiscall SharedMem_ReadVec3(void *this, unsigned int a2, float *a3);
LONG __stdcall SharedMem_WriteU16_std(unsigned int a1, unsigned __int16 a2);
LONG __thiscall SharedMem_WriteDword_this(void *this, unsigned int a2, int a3);
LONG __stdcall SharedMem_WriteU8_std(unsigned int a1, unsigned __int8 a2);
LONG __stdcall SharedMem_WriteFloat(unsigned int a1, float a2);
LONG __stdcall SharedMem_WriteDword_std(unsigned int a1, int a2);
void __thiscall SharedMem_WriteBlock(void *this, int a2, void *Src, WorldLoginReturnAddrPacked Size);
void __stdcall SharedMem_WriteString_std(int a1, char *Source);
void __stdcall SharedMem_WriteBlock_std(int a1, void *Src, WorldLoginReturnAddrPacked Size);
LONG __stdcall SharedMem_WriteVec3(unsigned int __saved_registers, float *__return_address);
LONG __stdcall SharedMem_WriteVec4(unsigned int __saved_registers, float *__return_address);
int *__cdecl SoundDefTable_GetEntry(unsigned int a1);
unsigned int __cdecl MsgId_ValidateHighByte(unsigned int a1);
unsigned int __cdecl LTClient_GetObjectType(int a1, int a2);
int __cdecl LTClient_GetObjectTypeExtended(int a1);
unsigned int __cdecl SoundDef_GetActiveSoundId(int a1);
BOOL __cdecl File_Exists(const CHAR *lpFileName);
HWND Win32_GetActiveWindow();
std::exception *__thiscall FoMException_Ctor(std::exception *this, int a2);
int __cdecl sub_657098C0(char *Source); // idb
int __cdecl sub_657099A0(char *Source); // idb
int __stdcall String_Compare(int a1, int a2);
int __stdcall Array_IterateWithCallback(int a1, int a2, int a3, int (__thiscall *a4)(int));
void __cdecl __noreturn Vector64_ThrowLengthError(int a1, int a2);
void *__cdecl Vector36_Allocate(unsigned int a1);
int __thiscall PacketData_InitFields(_BYTE *this);
int __thiscall Packet_Unknown0_Dtor(_DWORD *this);
char __thiscall BitStream_ReadDouble(_DWORD *this, void *a2);
char *__thiscall BitStream_WriteU64(char *this, char a2, int a3);
void __thiscall StringPair_Dtor(char *this);
int __thiscall StringPair_CopyCtor(int this, int a2, int a3);
int *__thiscall RBTree_LowerBound(int **this, int a2);
int *__thiscall StringTree_FindLowerBound(int **this, int a2);
int *__thiscall RBTreeIter_Increment(int **this);
_DWORD *__thiscall RBTree50_RotateLeft(_DWORD *this, int a2);
int __thiscall RBTree50_RotateRight(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall RBTree78_RotateLeft(_DWORD *this, int a2);
int __thiscall RBTree78_RotateRight(_DWORD *this, _DWORD *a2);
int __thiscall RBTreeIter_Decrement77(int **this);
int __thiscall RBTreeIter_Decrement49(int **this);
int *__thiscall RBTreeIter_Increment49(int **this);
int __thiscall StringPair64_CopyCtor(int this, int a2);
int __cdecl Array36_CopyRange(int a1, int a2, int a3);
int __thiscall PacketData_InitFieldsExt(int this);
char __thiscall VariableSizedPacket::Read(_DWORD *this, int a2);
char __thiscall Packet_WriteHeader(int this);
void __thiscall Packet_Id107_Init(struct Packet_Id107 *this);
int __thiscall BitStream_Write2048(char *this, int a2);
int __thiscall VariableSizedPacket::DecodeString(char *this, int a2);
char *__thiscall Read_u32(char *this, char a2);
char *__thiscall Read_u16(char *this, char a2);
bool __thiscall RakNet::BitStream::ReadCompressed_T_uint(unsigned int *this, char *a2);
bool __thiscall RakNet::BitStream::ReadCompressed_T_ushort(unsigned int *this, char *a2);
char *__thiscall BitStream_WriteIntCompressed(char *this, char a2);
bool __thiscall Read_u32c_alt(unsigned int *this, char *a2);
_DWORD *__thiscall Packet_Id107_Vtbl0(_DWORD *this, char a2);
char *__cdecl BitStream_WriteIntCompressed2(char *__return_address, int a2);
char *__cdecl BitStream_WriteU16C(char *a1, unsigned __int16 a2);
char *__thiscall BitStream_WriteUInt16Compressed(char *this, unsigned __int16 a2);
int SendPacket_SubId107_1();
_DWORD *__cdecl String_TransformRange(_DWORD *a1, int a2, char *a3, int a4, char *a5, int a6, _BYTE *a7, int (__cdecl *a8)(_DWORD));
char __thiscall Vector36_Reserve(_DWORD *this, unsigned int a2);
int __cdecl StringMap_InsertWrapper(int a1, int a2, int a3);
char *__thiscall Playerfile_BlockC0_WriteEntry(_BYTE *this, char *a2);
bool __thiscall Playerfile_read_blockC0_entry(char *this, unsigned int *a2);
char *__thiscall Playerfile_BlockC0_WriteFull(int *this, char *a2);
bool __thiscall Playerfile_read_blockC0(char *this, unsigned int *a2);
char __thiscall Packet_ID_107_Read(struct Packet_Id107 *this, int payload);
char __thiscall Packet_ID_107_Write(int this);
_DWORD *__thiscall FileReader_Seek(HMODULE *this, int a2);
_DWORD *__stdcall RBTreeNode52_Create(int a1, int a2, int a3, int a4, char a5);
_DWORD *__stdcall RBTreeNode_Create(int a1, int a2, int a3, int a4, char a5);
_DWORD *__cdecl PacketData_WrapCreate(_DWORD *a1, int a2, char *a3, int a4, char *a5, int a6, _BYTE *a7, int (__cdecl *a8)(_DWORD));
int __cdecl Array36_CopyConstruct(int a1, int a2, int a3);
_DWORD *__stdcall Process_GetModuleName(int a1);
int *__thiscall RBTree_InsertAndRebalance(int **this, int *a2, char a3, int *a4, int a5);
int *__thiscall RBTree_InsertNode(int **this, int *a2, char a3, int *a4, int a5);
void __stdcall TreeNode_DeleteChildrenRecursive(void **a1);
void __stdcall TreeNode_DeleteChildrenRecursive2(void **a1);
int __thiscall RBTree_FindOrInsert(int **this, int a2, int *a3);
int __thiscall StringMap_InsertOrFind(int **this, int a2, int *a3);
int __thiscall StringMap_EmplaceWrapper(void *this, int a2, int a3, int a4);
int *__thiscall StringMap_InsertHinted(int **this, int *a2, int *a3, int *a4);
int *__thiscall StringTree_InsertHint(int **this, int *a2, int *a3, int *a4);
void __stdcall StringVector_DestroyRange(char *a1, char *a2);
_DWORD *__thiscall StringVector_Erase(char **this, _DWORD *a2, int a3, int a4);
int *__thiscall StringTree_FindOrInsert(int **this, int a2);
int *__thiscall DirectoryTree_FindEntry(int **this, int a2);
int __thiscall DirectoryTree_ProcessEntries(int **this);
int __thiscall VectorOf36_Assign(int this, unsigned int a2);
int __cdecl DirectoryEntry_CopyRange(int a1, int a2, int a3);
void __cdecl DirectoryEntry_FreeRange(char *a1, char *a2);
void __thiscall ResourceMgr_InitializeFilePaths(int **this);
char __cdecl Array_FindValue(int a1, _DWORD *a2);
float *__thiscall Quat_GetUpVector(float *this, float *a2);
float *__thiscall CharacterInfo_Ctor(float *this, char a2);
float *__thiscall Quaternion_ToForwardVector(float *this, float *a2);
float *__thiscall Matrix4x4_BuildFromVectors(float *this, float *a2, float *a3, float *a4);
void __thiscall Matrix_ToQuaternion(float *this, float *a2);
void __thiscall Vec3_ScaleToLength(float *this, float a2);
float *__thiscall Transform_ApplyRotation(float *this, float *a2, float *a3);
int __cdecl EquipSlot_CheckAndSetValid(_DWORD *a1, int a2);
int __cdecl EquipSlots_GetSlotWrapper(_DWORD *a1, int a2);
float *__thiscall Quaternion_SetZero(float *this);
float *__stdcall Display_GetAspectRatio(float *a1, float *a2);
float *__thiscall ObjectTransform_Init(float *this);
int __thiscall PlayerMovement_Reset(int this);
int __thiscall CameraDistance_BuildCommand(char *this, float a2);
double __thiscall CameraDistance_GetCVar(_DWORD *this);
int __thiscall sub_65714C10(_DWORD); // weak
// bool __usercall Object_TryCreate@<al>(int *this@<ecx>, double a2@<st0>);
void __thiscall CameraDistance_ApplyDeltaScaled(float *this);
char __thiscall Object_InitializeIfNeeded(int *this);
// BOOL __usercall PlayerMovement_Update@<eax>(int *this@<ecx>, double a2@<st0>);
int __thiscall EquipSlots_ClearAllActive(_DWORD *this, int a2, int a3);
int __thiscall EquipSlots_GetItemId(_DWORD *this, int a2);
int __thiscall EquipSlots_FindSlotByType(_DWORD *this, int a2, char a3, int a4);
_DWORD *__thiscall AttachmentSlot_SetDword(_DWORD *this, int a2, int a3);
char *__thiscall EquipSlots_SetSlotInfo(_DWORD *this, int a2, int a3, char *Source);
char *__thiscall AttachmentSlot_SetLabel(_DWORD *this, int a2, int a3, char *Source);
int __thiscall AttachmentSlot_SetAnglesDegrees(_DWORD *this, int a2, float a3, float a4, int a5);
int __thiscall AttachmentSlot_SetField512(_DWORD *this, int a2, int a3);
int __thiscall AttachmentSlot_SetField516(_DWORD *this, int a2, int a3);
int __thiscall EquipSlots_GetSlot(_DWORD *this, int a2);
int __thiscall IndexArray_GetElement(_DWORD *this, int a2);
int __thiscall AttachmentArray_FindFreeSlot(_DWORD *this);
int SafeVsnprintf(char *Buffer, WorldLoginReturnAddrPacked BufferCount, char *Format, ...);
void __cdecl Operator_Delete1(void *a1);
void __cdecl Operator_Delete2(void *a1);
void __cdecl Operator_Delete3(void *a1);
BOOL Player_IsInGameMode2();
int __thiscall ConsoleVar_Init(int *this, int a2, const char *a3, const char *a4, float a5);
int __stdcall sub_657159F0(float); // idb
// void __userpurge CameraMgr_GetCameraMode(int a1@<ecx>, double st6_0@<st1>, float a3);
float *__thiscall ObjectState_Init(float *this);
int CameraMgr_InitConsoleVars();
char *__thiscall ObjectState_CopyFrom(char *this, int a2);
void __thiscall ObjectList_UnlinkItem(_DWORD *this, int a2, _DWORD *a3);
bool __cdecl Object_CheckValidEntity(int a1);
int __thiscall AttachmentSlot_SetPosition(_DWORD *this, int a2, float *a3);
int __thiscall AttachmentSlot_SetRotation(_DWORD *this, int a2, float *a3);
float *__thiscall AttachmentSlot_SetScale(_DWORD *this, int a2, float *a3);
int __thiscall AttachmentSlot_SetAnimation(_DWORD *this, int a2, _DWORD *a3, int a4);
int __thiscall AttachmentSlot_SetColor(_DWORD *this, int a2, float *a3);
int __thiscall AttachmentSlot_SetColorRGB(_DWORD *this, int a2, float *a3);
float *__thiscall Matrix_FromEulerAngles(float *this, float a2, float a3, float a4);
float *AttachmentData_Allocate();
float *ObjectState_Alloc();
// void __usercall Object_UpdateTransformLarge(float *a1@<eax>, float *a2@<esi>);
int __thiscall AttachmentData_CopyFrom(int this, int a2);
void __thiscall AttachmentModifier_ProcessList(_DWORD *this, int a2);
// double __userpurge Camera_UpdatePositionConstraints@<st0>(int a1@<ecx>, int a2@<edi>, double a3@<st0>, double st6_0@<st1>, double a5@<st2>, int a4);
void *__thiscall Camera_UpdateRotationFromModel(_DWORD *this, void *a2);
int __thiscall AttachmentSlot_CreateFromParams(_DWORD *this, int a2);
float *__thiscall AnimQueue_AddAnimation(_DWORD *this, int a2, int a3);
// float *__userpurge Camera_LookAtTarget@<eax>(int a1@<ecx>, int a2@<edi>, int a3);
int __thiscall sub_65717F80(_DWORD); // weak
// void __usercall CameraMgr_UpdateCamera(_DWORD *this@<ecx>, double a2@<st2>, double a3@<st1>, double a4@<st0>);
void *Allocate20_1();
void *Allocate20_2();
void __thiscall Console_ExecVarFloat(const char **this, float a2);
bool __cdecl CameraVars_Init(int a1);
int ThirdPerson_InitConsoleVars();
int __cdecl ThirdPerson_Update(int a1, int a2);
// double __usercall CameraMgr_InterpolateValues@<st0>(double a1@<st0>, double st5_0@<st2>, int a2, int a3);
int __cdecl Camera_GetCurrentFOV(int a1, float *a2);
int __cdecl Camera_ProcessEffects(int a1, float a2);
void __cdecl ModelAnim_PlaySequence(int a1, float a2, int a3);
float *__cdecl Zoom_GetMagnification(int a1);
void *Alloc16Bytes();
// void __usercall EquipSlot_SetupOrUpdateAnimation(double a1@<st0>, int __return_address, int a3);
void __cdecl CameraShake_Add(int a1, float a2, float a3, float a4);
int __cdecl CEF_ClearCommandLineStrings(int a1);
int __cdecl CEF_ClearProxySettingsStrings(int a1);
_DWORD *__thiscall CEF_BrowserClient_Ctor(_DWORD *this, int a2);
LONG __thiscall CEF_InterlockedAddRef(_DWORD *this);
_DWORD *__thiscall CEF_LifeSpanHandler_Ctor(_DWORD *this, int a2);
LONG __thiscall CEF_Handler_AddRef(volatile LONG *this);
bool __thiscall String_Helper1(int this, int a2);
int __thiscall sub_6571D9A0(_DWORD); // weak
_DWORD *__thiscall CEF_Request_Ctor(_DWORD *this, int a2);
char __thiscall DLL_Init(int *this);
void __thiscall FXProps_Reset(float *this);
void __thiscall nullsub_2(void *); // idb
HMODULE __thiscall DLL_UnloadLibrary(int this);
int __thiscall FXKeyArray_FindByName(_DWORD *this, char *String1);
int __thiscall FXKeyArray_FindIndexByName(_DWORD *this, char *String1);
int (__cdecl *__thiscall FXCallback_Invoke(int (__cdecl **this)(int), int a2))(int);
int (__cdecl *__thiscall Callback_Invoke4(int (__cdecl **this)(int), int a2))(int);
int (__cdecl *__thiscall Callback_Invoke3(int (__cdecl **this)(int), int a2))(int);
int (__cdecl *__thiscall Callback_InvokeWithArgs(int (__cdecl **this)(int, int), int a2, int a3))(int, int);
void *__cdecl ClientFX_AllocGroupArray(int a1);
_DWORD *__cdecl FXKeyArray_Alloc(unsigned int a1);
float *Getter_Field1();
void __cdecl Getter_Field2(void *a1);
int __thiscall FXKey_ParseIntValue(char *this);
// char __usercall FXProps_ParseFromKeys@<al>(char *String1@<ecx>, int a2@<eax>, int a3@<edi>);
char __thiscall DLL_LoadAndInitialize(int this);
int __thiscall FXLinkedList_FindByName(_DWORD *this, char *String2);
void __cdecl FXKeyArray_Free(char *a1);
char __thiscall Camera_ResetState(_DWORD *this, int a2);
int __cdecl FXFile_ParseLine(int a1, char *Format, int a3, int a4, int a5, int a6, int a7); // idb
int __cdecl FXFile_ParseLineString(int a1, char *Format, int a3, int a4, int a5, int a6, int a7); // idb
int __cdecl FXFile_ParseLineInt(int a1, char *Format, int a3, int a4, int a5, int a6, int a7); // idb
int __cdecl FXFile_ParseLineFloat(int a1, char *Format, int a3, int a4, int a5, int a6, int a7); // idb
int __cdecl Camera_UpdateZoom(int a1, char *Format, int a3, int a4, int a5, int a6, int a7); // idb
int __cdecl FXFile_ParseLineFloat2(int a1, char *Format, int a3, int a4, int a5, int a6, int a7); // idb
void *__cdecl Camera_GetZoomTarget(int a1);
_DWORD *__thiscall BufferState_Clear(_DWORD *this);
char __stdcall FXKey_ParseByType(int a1, int a2, int a3);
char __thiscall FXData_Load(void (__cdecl **this)(_DWORD), int a2, int a3, float a4, int a5, char *a6, unsigned int a7);
char __thiscall KeyFrameArray_Parse(char *this, int a2, int a3, int a4, int a5, unsigned int a6);
char __thiscall List_ReadItems(char *a1, int a3, int a4, _DWORD *a5);
char __thiscall ClientFX_ParseGroups(char *this, int a2, int a3);
char __thiscall ClientFX_LoadAllFXFiles(char *this, int a2);
_DWORD *ClientFXMgr_GetInstance();
double __cdecl Timer_GetDeltaSeconds(int a1, _DWORD *a2);
int __thiscall FXInstance_ClearParent(int *this);
char __thiscall ClientFX_GetFlag108(_BYTE *this);
void __thiscall FXInstance_Enable(_DWORD *this);
void __thiscall KeyFrame_ResetIfDirty(int **this);
char __thiscall ClientFXMgr_SetRenderMode(_DWORD *this, int a2, int a3);
// void __thiscall Concurrency::details::ContextBase::SetExecutingCollection(#167 *__hidden this, struct Concurrency::details::_TaskCollectionBase *); idb
int GetGlobal_65A5AA38();
int FX_GetNextInstanceId();
void __thiscall ClientFXMgr_GetElapsedTime(int this);
char __thiscall FXDetailLevel_IsEnabled(_DWORD *this, unsigned int a2);
void __thiscall LinkedList_FreeAll(_DWORD *this);
void __thiscall LinkedList_RemoveAndDelete(_DWORD *this, int *a2);
void __thiscall LinkedList_RemoveNode(_DWORD *this, int *a2);
_DWORD *__thiscall LinkedList_MergeList(_DWORD *this, _DWORD *a2);
int __thiscall List_GetHead(void *this);
int __thiscall List_GetTail(_DWORD *this);
BOOL __thiscall FXHandle_IsInvalid(_DWORD *this);
BOOL __thiscall List_IsEmpty(_DWORD *this);
BOOL __thiscall Bitmask_HasBit(_DWORD *this, char a2);
_DWORD *__thiscall BitMask32_ClearBit(_DWORD *this, char a2);
int __thiscall GetField1(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
int __thiscall GetSlotIndexFromAddr(void *this, unsigned int a2);
int __thiscall sub_65720DD0(void *this, int a2);
int __thiscall sub_65720DF0(int *this);
int __thiscall sub_65720E20(int *this);
int __thiscall GetField2(_DWORD *this);
int __thiscall LinkedList_Unlink(_DWORD *this);
int __thiscall sub_65720E70(_DWORD, _DWORD); // weak
int __thiscall LinkedList_InsertAfter(_DWORD *this, int a2);
_DWORD *__thiscall Pair_Init(_DWORD *this, int a2, int a3);
int __thiscall FXInstance_WriteUInt8(_DWORD *this, unsigned __int8 a2);
int __thiscall FXInstance_WriteUInt32(_DWORD *this, int a2);
int __thiscall FXInstance_Release(int *this);
char __thiscall FXLinkedList_ContainsId(_DWORD *this, int a2);
void __thiscall FXInstance_Destroy(_DWORD *this, int *a2);
int *__thiscall FXInstanceList_DestroyAll(int **this);
_DWORD *__thiscall KeyFrameData_Copy(_DWORD *this, _DWORD *a2);
void __stdcall FX_UpdateWithTiming(_DWORD *__saved_registers, int __return_address);
void __stdcall FX_HandlePause(int a1, int *a2);
int __thiscall sub_65721420(_DWORD, _DWORD); // weak
char __stdcall ClientFX_Pause(_BYTE *a1);
char __stdcall ClientFX_Resume(_BYTE *a1);
double __thiscall Vector3_DistanceSquared(float *this, float *a2);
char __thiscall FXLinkedList_InsertNode(_DWORD *this, int a2, int a3, int a4);
char __thiscall LinkedList_Append(_DWORD *this, int a2);
_DWORD *__thiscall FXList_FindByType(int *this, _DWORD *a2, unsigned int a3);
int __thiscall FXList_RemoveItem(int *this, _DWORD *a2);
BOOL __thiscall FXList_GetSlotIndex(unsigned int *this);
int __thiscall FXBitmask_Allocate(int *this, int a2);
int sub_65721950(void); // weak
float *__thiscall sub_657219D0(float *this, char *Source, int a3, float *a4, float *a5);
int __thiscall FXInstance_ReleaseAndClear(int *this);
int *__thiscall FXInstance_Clone(_DWORD *this, int *a2);
int __thiscall FXInstance_Init(int this);
void __thiscall FXMgr_Update(int **this);
int __thiscall sub_65721D00(_DWORD); // weak
int __thiscall FXKey_CreateEffect(int this, char *String1, int a3, int a4, int a5);
char __thiscall ClientFX_UpdateKeyframe(float *this, float *a2, int a3);
void __thiscall ClientFX_UpdateInstance(void *this, int a2, float a3, float a4);
char __thiscall FXGroup_CreateInstance(int *this, int a2, int a3);
_DWORD *__thiscall sub_65722350(_DWORD *this);
_DWORD *__thiscall LTObject_Create(_DWORD *this);
void __thiscall ClientFXMgr_RemoveFXInstance(int *this, int **a2, char a3);
int *__thiscall FXGroup_GetOrCreateInstance(int **this, int a2, int a3);
float *__thiscall ClientFX_CreateInstance(_BYTE *a1, char *String2, int a4, char a5);
int __thiscall sub_65722820(_DWORD); // weak
char __thiscall FX_CreateAndLink(_BYTE *this, int *a2, char *String2, int a4, char a5);
char __cdecl FX_LoadString(_DWORD *a1, unsigned __int8 a2, _BYTE *a3);
int (__cdecl *__thiscall ClientFXMgr_ForEachInstance(void *this))(int, int);
// char __userpurge ClientFXMgr_UpdateAll@<al>(int this@<ecx>, double st7_0@<st0>, int a2);
char __thiscall ClientFXMgr_RenderAll(_DWORD *this, int a2);
int __thiscall sub_65722BD0(_DWORD, _DWORD); // weak
float *__thiscall Msg2_Default_Handler(int this, int a2, int *a3);
int __cdecl RBTree_FindMin(int a1);
_DWORD *__cdecl RBTree_FindMax(_DWORD *a1);
int __thiscall RBTree22_RotateRight(_DWORD *this, _DWORD *a2);
void __cdecl __noreturn ThrowLengthError_Vector7(int a1, int a2);
void __cdecl __noreturn ThrowLengthError_Vector8(int a1, int a2);
void __cdecl __noreturn ThrowLengthError_Vector9(int a1, int a2);
void __cdecl __noreturn ThrowLengthError_Vector10(int a1, int a2);
void __cdecl __noreturn ThrowLengthError_Vector11(int a1, int a2);
int *__thiscall RBTreeIter_Advance(int **this);
int __thiscall RBTreeIter22_Decrement(int **this);
void *__cdecl Vector4_Allocate2(unsigned int a1);
void *__cdecl Vector4_Allocate3(unsigned int a1);
void *__cdecl Vector4_Allocate4(unsigned int a1);
void *__cdecl Vector4_Allocate5(unsigned int a1);
void *__cdecl Vector4_Allocate6(unsigned int a1);
BOOL __thiscall BitMask32_IsEmpty(_DWORD *this);
BOOL __thiscall Vector_IsEmpty1(_DWORD *this);
BOOL __thiscall BitMask32_TestBit(_DWORD *this, char a2);
int __thiscall BitMask32_GetValue1(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
BOOL __thiscall BitMask32_IsEmpty2(_DWORD *this);
BOOL __thiscall Vector_IsEmpty2(_DWORD *this);
BOOL __thiscall BitMask32_TestBit2(_DWORD *this, char a2);
int __thiscall BitMask32_GetValue2(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
BOOL __thiscall BitMask32_IsEmpty3(_DWORD *this);
BOOL __thiscall Vector_IsEmpty3(_DWORD *this);
BOOL __thiscall BitMask32_TestBit3(_DWORD *this, char a2);
int __thiscall BitMask32_GetValue3(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
BOOL __thiscall BitMask32_IsEmpty4(_DWORD *this);
BOOL __thiscall Vector_IsEmpty4(_DWORD *this);
BOOL __thiscall BitMask32_TestBit4(_DWORD *this, char a2);
int __thiscall BitMask32_GetValue4(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
int __thiscall Array728_GetAtIndex(void *this, int a2);
int __thiscall Bitmask_GetHighestBit1(int *this);
int __thiscall Bitmask_GetLowestBit1(int *this);
int __thiscall LinkedList_Unlink2(_DWORD *this);
int __thiscall LinkedList_InsertBefore1(_DWORD *this, int a2);
int __thiscall Array120_GetAtIndex1(void *this, int a2);
int __thiscall Bitmask_GetHighestBit2(int *this);
int __thiscall Bitmask_GetLowestBit2(int *this);
int __thiscall LinkedList_Unlink3(_DWORD *this);
int __thiscall LinkedList_InsertBefore2(_DWORD *this, int a2);
int __thiscall Array112_GetAtIndex(void *this, int a2);
int __thiscall Bitmask_GetHighestBit3(int *this);
int __thiscall Bitmask_GetLowestBit3(int *this);
int __thiscall LinkedList_Unlink4(_DWORD *this);
int __thiscall LinkedList_InsertBefore3(_DWORD *this, int a2);
int __thiscall Array120_GetAtIndex2(void *this, int a2);
int __thiscall Bitmask_GetHighestBit4(int *this);
int __thiscall Bitmask_GetLowestBit4(int *this);
int __thiscall LinkedList_Unlink5(_DWORD *this);
int __thiscall LinkedList_InsertBefore4(_DWORD *this, int a2);
void __cdecl __noreturn ThrowLengthError_Vector12(int a1, int a2);
void *__cdecl Vector8_AllocateChecked(unsigned int a1);
_DWORD *__thiscall RBTree22_RotateLeft(_DWORD *this, int a2);
_DWORD *__cdecl Array_FillValue1(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl Array_FillValue2(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl Array_FillValue3(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl Array_FillValue4(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl Array_FillValue5(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __thiscall EntityPool1_AllocSlot(int *this, int a2);
int __thiscall EntityPool2_AllocSlot(int *this, int a2);
int __thiscall EntityPool3_AllocSlot(int *this, int a2);
int __thiscall EntityPool4_AllocSlot(int *this, int a2);
_DWORD *Allocate23308();
_DWORD *Allocate3852();
_DWORD *Allocate3596();
_DWORD *Allocate3852_2();
_DWORD *__cdecl Pair8_FillValue(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl Pair8_CopyConstruct(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__stdcall FXCreateParams_Alloc(int a1, int a2, int a3, _DWORD *a4, char a5);
int __cdecl Array4_MoveBackward1(void *Source, int a2, int a3); // idb
int __cdecl Array4_MoveBackward2(void *Source, int a2, int a3); // idb
int __cdecl Array4_MoveBackward3(void *Source, int a2, int a3); // idb
int __cdecl Array4_MoveBackward4(void *Source, int a2, int a3); // idb
int __cdecl Array4_MoveBackward5(void *Source, int a2, int a3); // idb
_DWORD *__thiscall EntityList1_AllocNode(int *this);
_DWORD *__thiscall EntityList2_AllocNode(int *this);
_DWORD *__thiscall EntityList3_AllocNode(int *this);
_DWORD *__thiscall EntityList4_AllocNode(int *this);
_DWORD *__cdecl Pair8_CopyBackward(int a1, int a2, _DWORD *a3);
void __cdecl Array_FillWithValue(_DWORD *a1, int a2, _DWORD *a3);
int __thiscall EntityArray_FindById(int **this, int a2);
int __thiscall Msg2_75_Sub0_FindById(int **this, int a2);
int __thiscall Msg2_75_Sub4_FindById(int **this, int a2);
int __thiscall Msg2_75_Sub1_FindById(int **this, int a2);
int __thiscall Msg2_75_Sub3_FindById(int **this, int a2);
int __thiscall MsgId_76_Handler(int **this, int a2);
int __thiscall MsgId_84_Handler(int **this, int a2);
char __thiscall MsgId_9D_Handler(int **this, int a2);
int __thiscall MsgId_8C_Handler(int **this, int a2);
int __thiscall MsgId_9A_Handler(int **this, int a2);
int __thiscall MsgId_83_Handler(int **this, int a2);
_DWORD *__thiscall RBTree22_EraseAndRebalance(_DWORD *this, _DWORD *a2, int a3);
int **__thiscall IntMap_LowerBound(int **this, int **a2, _DWORD *a3);
int *__thiscall RBTree22_InsertAndRebalance(int **this, int *a2, char a3, int *a4, _DWORD *a5);
int *__thiscall CharacterPool_AllocPlayer(int *this, int a2, int a3);
int *__thiscall WeaponPool_AllocWeapon(int *this, int a2, int a3);
int *__thiscall NPCPool_AllocNPC(int *this, int a2, int a3);
int *__thiscall EntityPool4_AllocEntity(int *this, int a2, int a3);
int __thiscall RBTree22_FindOrInsert(int **this, int a2, int *a3);
char *__stdcall Array4_MoveForward1(void *Source, int a2, char *Destination);
char *__stdcall Array4_MoveForward2(void *Source, int a2, char *Destination);
char *__stdcall Array4_MoveForward3(void *Source, int a2, char *Destination);
char *__stdcall Array4_MoveForward4(void *Source, int a2, char *Destination);
char *__stdcall Array4_MoveForward5(void *Source, int a2, char *Destination);
_DWORD *__stdcall Pair8_FillN(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__stdcall Array4_FillN1(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__stdcall Array4_FillN2(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__stdcall Array4_FillN3(_DWORD *a1, int a2, _DWORD *a3);
int *__thiscall RBTree22_InsertHinted(int **this, int *a2, int *a3, int *a4);
_DWORD *__stdcall Array4_FillN4(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__stdcall Array4_FillN5(_DWORD *a1, int a2, _DWORD *a3);
void __thiscall Vector1_InsertRange(int this, char *Source, unsigned int a3, unsigned int a4);
void __thiscall Vector2_InsertRange(int this, char *Source, unsigned int a3, unsigned int a4);
void __thiscall Vector3_InsertRange(int this, char *Source, unsigned int a3, unsigned int a4);
void __thiscall Vector4_InsertRange(int this, char *Source, unsigned int a3, unsigned int a4);
void __thiscall Vector5_InsertRange(int this, char *Source, unsigned int a3, unsigned int a4);
_DWORD *__stdcall Pair8_CopyConstructWrapper(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __thiscall sub_6572A580(_DWORD); // weak
int *__thiscall IntMap_GetOrInsert(int **this, int *a2);
void __thiscall PairVector_InsertRange(int this, char *a2, unsigned int a3, int *a4);
int __thiscall sub_6572AAF0(_DWORD); // weak
int *__thiscall Msg2_75_Sub2_SetValue(int **this, int a2, int a3);
void __thiscall Vector1_PushBack(int **this, int *a2);
void __thiscall Vector2_PushBack(int **this, int *a2);
void __thiscall Vector3_PushBack(int **this, int *a2);
void __thiscall Vector4_PushBack(int **this, int *a2);
void __thiscall Vector5_PushBack(int **this, int *a2);
int *__thiscall Msg2_75_Sub0_Create(int **this, int *a2, int a3);
int __thiscall Msg2_75_Sub4_Create(int **this, int *a2, int a3, int a4, int a5);
int __thiscall Msg2_75_Sub1_Create(int **this, int *a2, int a3, int a4, int a5);
int __thiscall Msg2_75_Sub3_Create(int **this, int *a2, int a3, int a4);
int __thiscall sub_6572B090(_DWORD, _DWORD); // weak
int __cdecl LTClient_SendMessage(int a1, int a2);
double __cdecl LTClient_GetFloat(int a1, float a2);
const char *__cdecl LTClient_RunCommand(const char *a1, int a2);
void __thiscall Plane_InitFromPoints(float *this, float *__return_address, float *a3, float *a4);
int __thiscall Plane_RayIntersect(float *this, float *__saved_registers, float *__return_address, int *a4, float *a5);
int __cdecl Terrain_WorldToGridCoords(float a1, float a2, _DWORD *a3, _DWORD *a4);
float *__thiscall FogSettings_Ctor(float *this);
BOOL *__thiscall COM_Initialize(BOOL *this);
int __thiscall Sound_Speak(_DWORD *this, const CHAR *lpMultiByteStr);
int __thiscall Sound_GetVolume(_DWORD *this);
_DWORD *__thiscall SoundInstance_Ctor(_DWORD *this, int a2, int a3, int a4);
int __thiscall SoundInstance_Play(int *this, int a2);
int __thiscall sub_6572F480(_DWORD, _DWORD); // weak
HRESULT __thiscall Sound_CreateDevice(int this, int, int, int, int);
int __thiscall Sound_LoadFile(int *this, int **a2, const CHAR *lpMultiByteStr, int a4, int a5);
int __cdecl String_AnsiToWide(WCHAR *lpWideCharStr, const CHAR *lpMultiByteStr, int cchWideChar);
int __cdecl String_MultiByteToWide(WCHAR *lpWideCharStr, const CHAR *lpMultiByteStr, int cchWideChar);
int __cdecl WideChar_ToMultiByte_Wrapper(WCHAR *lpWideCharStr, const CHAR *lpMultiByteStr, unsigned int a3);
int __thiscall j_SharedMem_Release(_DWORD); // weak
char *__thiscall BitStream_WriteBit(char *this, char a2);
int __thiscall ItemStructA_Init(char *this);
int __cdecl RBTree18_GetMax(int a1);
_DWORD *__cdecl RBTree18_GetMin(_DWORD *a1);
int __thiscall RBTree_RotateLeft(_DWORD *this, _DWORD *a2);
int *__thiscall RBTreeIter18_Increment(int **this);
void __cdecl __noreturn ThrowLengthError_Vector(int a1, int a2);
char *__thiscall BitStream_WriteBool(char *this, char a2);
void *__cdecl Vector44_Allocate(unsigned int a1);
char *__thiscall ItemStructA_InitAlt(char *this);
char *__thiscall CharacterSlots6_Init(char *this);
char *__thiscall CharacterSlots12_Init(char *this);
_BYTE *__thiscall CharacterSlots3_Init(_BYTE *this);
_DWORD *__thiscall RBTree_RotateRight(_DWORD *this, int a2);
char *__thiscall BitStream_Write_u32c(char *this, int a2);
int __thiscall sub_65731B10(_DWORD); // weak
char __thiscall Packet_ID_STORAGE_write(int this);
_DWORD *__thiscall RBTree_EraseNode2(_DWORD *this, _DWORD *a2, int a3);
void __stdcall RBTree_DeleteSubtree(void **a1);
char __thiscall ItemVector_Init(_DWORD *this, unsigned int a2);
int **__thiscall RBTree_EraseRange(int ***this, int **a2, int *a3, int *a4);
int __thiscall sub_65732180(_DWORD); // weak
void __thiscall ItemMapContainer_Clear(int ***this);
int __thiscall sub_65732320(_DWORD, _DWORD); // weak
void __cdecl ItemVector_DestroyRange(int a1, int a2);
void __stdcall ItemVector_DestroyRange_Wrapper(int a1, int a2);
int __thiscall sub_65732490(_DWORD); // weak
int __thiscall sub_657324B0(_DWORD); // weak
void __thiscall ItemListData_FreeVectors(int *this);
int __thiscall ItemListPacket_Dtor(int *this);
_DWORD *__thiscall ItemListData_Init(_DWORD *this);
char *__thiscall Packet_Storage_Ctor(char *this);
char __thiscall BitStream_ReadBit_Out(unsigned int *this, bool *a2);
char __thiscall VariableSizedPacket::ReadBit(unsigned int *this, bool *a2);
char __thiscall Packet_ID_STORAGE_read(int this, int a2);
int SendPacket_Storage_Open();
int __thiscall SendPacket_Storage_Request(_BYTE *this);
bool __cdecl Item_ValidateSlotForType(__int16 a1, unsigned __int8 a2);
int StatGroup5_GetValue();
int __thiscall NPCCharacter_Ctor(int this);
_WORD *__thiscall WordArray_FindById(_DWORD *this, __int16 a2);
float *__thiscall FloatObject_Ctor(float *this);
int __thiscall sub_65733190(_DWORD); // weak
float *__thiscall PlayerState_Init(float *this);
void __thiscall ServerCharacter_Dtor(char *this);
int __stdcall PlayerStats_GetStatValue(unsigned __int8 a1);
_DWORD *__thiscall CameraTransform_Ctor(_DWORD *this);
void __thiscall HandleFlashlightToggle(int *this);
LONG __thiscall SharedMem_ModifyU16_0x9D(char *this, char a2);
LONG __stdcall SharedMem_ModifyU16_0xA8(char a1);
int __thiscall CVar_GetBoolDefault(_DWORD *this, int a2, unsigned __int8 a3);
BOOL __thiscall SharedMem_IsValidWorldId(void *this);
void __thiscall MsgId_85_Handler(float *this, float a2);
int __thiscall CGameClientShell_Dtor(CGameClientShell *this);
const char *__stdcall LTClient_SetFarZ(int a1);
const char *__thiscall ConsoleVar_SetFromObject(void *this, const char *a2, char *String1);
const char *__thiscall Fog_RegisterAllCVars(void *this);
void Fog_JumpOutHandler();
int __stdcall Input_ProcessMouseSensitivity(float a1); // idb
_DWORD *__thiscall CAPIHolder_ILTClient_Ctor(_DWORD *this, int a2, _DWORD *a3, int a4);
char *__thiscall EquipSlots_GetArmor(char *this, unsigned __int8 a2);
int __thiscall EquipSlots_GetWeapon(void *this, unsigned __int8 a2);
char *__thiscall EquipSlots_GetAccessory(char *this, unsigned __int8 a2);
int __thiscall EquipSlots_GetByIndex(_DWORD *this, unsigned __int16 a2);
char *__thiscall Packet_ID_B2_Ctor(char *this);
bool __thiscall SharedMem_EquipSlotMask_HasSlot(void *this, char a2);
BOOL IsPlayerAlive();
BOOL IsGameActive();
void __cdecl __noreturn ThrowLengthError_Vector2(int a1, int a2);
void __cdecl __noreturn VectorTooLong_ThrowException(int a1, int a2);
void *__cdecl Vector4_Allocate(unsigned int a1);
void *__cdecl SafeArrayAlloc(unsigned int a1);
float *__thiscall MsgId_70_ReadVecOrStruct(void *this, float *a2);
BOOL SoundDriver_Init();
int __thiscall CGameClientShell_RenderFrame(int this);
char __thiscall CGameClientShell_OnMessage2(int **this, int a2, int *a3);
int __stdcall IClientShell_vtbl_0x14(int a1);
int __thiscall CGameClientShell_OnDisconnect(_DWORD *this);
void __thiscall MsgId_8E_Handler(_DWORD *this, unsigned __int16 a2, char a3);
int __thiscall MotionBlur_Apply(_BYTE *this, float a2, int Value, char Valuea);
int __thiscall CameraEffects_Reset(float *this);
bool StatGroup_CheckLevelThreshold();
bool __thiscall Read_u8c(unsigned int *this, char *a2);
char *__thiscall Packet_WriteInt8(char *this, char a2);
char *__cdecl Vector_MoveElements(void *Source, int a2, char *Destination);
int __stdcall SharedMem_ReadWorldPosition(int *a1);
CGameClientShell *__thiscall CGameClientShell_Ctor(CGameClientShell *this);
void __thiscall CGameClientShell_OnMessage(int **this, float Float);
void __thiscall HandleQuickbarItemUse(_DWORD *this, unsigned __int8 a2);
char __thiscall Packet_ID_B2_read(int this, int a2);
char __thiscall Vector_Reserve(_DWORD *this, unsigned int a2);
int __thiscall sub_657399C0(_DWORD); // weak
void __cdecl Cmd_Admin(int a1, const char **a2);
// void __usercall ClientGame_Update(float this@<ecx>, double a2@<st2>, double a3@<st1>);
void __thiscall Vector_FreeBuffer(int this);
void __thiscall Vector_Clear(_DWORD *this);
int __thiscall sub_6573B700(_DWORD); // weak
// int __usercall Music_Initialize@<eax>(double a1@<st0>);
int __thiscall nullsub_3(_DWORD); // weak
void __thiscall Chat_LoadSettings(_DWORD *this, _DWORD *a2);
double __thiscall CVar_GetMusicVolume(_DWORD *this);
double __thiscall CVar_GetSoundVolume(_DWORD *this);
int __thiscall Music_ApplyVolume(_DWORD *this);
int __thiscall Sound_ApplyVolume(_DWORD *this);
// int __usercall AudioMgr_Initialize@<eax>(_DWORD *a1@<ecx>, double a2@<st0>);
int __stdcall sub_65744A80(_DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_65745270(_DWORD, _DWORD, _DWORD); // weak
int __thiscall CShell_Sub_45870(_DWORD *this, unsigned int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, int a16, int a17, int a18, int a19, int a20, int a21, int a22, int a23);
int __thiscall CShell_Sub_45A50(_DWORD *this, unsigned int a2);
// int __thiscall unknown_libname_129(_DWORD); weak
int __thiscall sub_65745F30(_DWORD); // weak
int __thiscall CWindow_SetOffset(_DWORD *this, int a2, int a3);
char __thiscall CWindow_SetVisibleFlag(_BYTE *this, char a2);
_DWORD *__thiscall CWindow_HitTestChild(_DWORD *this, int a2, int a3);
int __thiscall CWindow_HandleCommand(_BYTE *this, int a2, int a3, int a4);
int __thiscall CWindow_OnMouseDown(int this, int a2, int a3);
int __thiscall CWindowInventory_OnLButtonDown(int this, int a2, int a3);
int __thiscall CWindowInventory_OnLButtonUp(_DWORD *this, int a2, int a3);
int __thiscall CWindowInventory_SelectedItem_CallVfn3C(_DWORD **this, int a2, int a3);
int __thiscall CWindowInventory_SelectedItem_CallVfn48(_DWORD **this, int a2, int a3);
unsigned int __thiscall CWindowInventory_ResetSelection(_DWORD *this, int a2);
int __thiscall CWindowInventory_ClearHover(_DWORD *this);
void __thiscall CWindowInventory_SetDragItem(_DWORD *this, int a2);
int __thiscall CWindowInventory_OnKeyDown(_DWORD *this, int a2, int a3);
int __thiscall CWindowInventory_OnChar(_DWORD *this, int a2);
char __thiscall WindowLayer_AddWidget(_DWORD *this, _DWORD *a2, int a3, int a4);
char __thiscall WindowLayer_AddWidgetLayer2(_DWORD *this, _DWORD *a2, int a3, int a4);
char __thiscall WindowMgr_RegisterChild(_DWORD *this, int a2, int a3);
char __thiscall WindowMgr_CreateGroup(unsigned int *this, void *a2);
char __thiscall WindowMgr_SelectGroup(int *this, int a2);
char __thiscall WindowMgr_ContainsWindow(int *this, int a2);
int __cdecl VTable_CallDtor(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int UiWidget_AllocNew();
int __cdecl VTable_CallDtor2(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int __cdecl VTable_CallDtor3(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int __cdecl VTable_CallDtor4(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int __cdecl IUnknown_Release1(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int __cdecl VTable_CallDtor5(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int __cdecl IUnknown_Release2(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int __cdecl VTable_CallDtor6(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int __cdecl VTable_CallDtor7(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int __cdecl VTable_CallDtor8(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int __cdecl VTable_CallDtor9(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int __cdecl VTable_CallDtor10(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int __cdecl VTable_CallDtor11(int (__thiscall ***a1)(_DWORD, int));
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int __cdecl VTable_CallDtor12(int (__thiscall ***a1)(_DWORD, int));
char *__thiscall WindowGroup_CopyEntry(char *this, int a2, char *Source);
_DWORD *__thiscall sub_65747EB0(_DWORD *this);
int __stdcall Null_Return0(int a1);
int Null_Return0_v2();
int __thiscall CWindow_UpdateChildren(char *this, int a2);
_DWORD *__thiscall WindowBar_UpdateLayout(int this);
int (__thiscall ***__thiscall UiWidget_Create(void *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13))(_DWORD, int);
int __thiscall sub_657486D0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int (__thiscall ***__stdcall UiWidget_CreateSimple(int a1, int a2, int a3, void *a4, void *a5, int a6))(_DWORD, int);
int (__thiscall ***__stdcall UiWidget_CreateFromData(int a1, int a2, int a3, int a4))(_DWORD, int);
int (__thiscall ***__thiscall UiWidget_CreateWithCallback(void *this, int a2, int a3, int a4))(_DWORD, int);
int __stdcall sub_657487E0(int, float); // idb
char *__stdcall UiWidget_CreateWithParams(const void *a1, float a2, int a3, char a4, char a5, _BYTE *a6);
int __stdcall sub_657488D0(int, int, float); // idb
_DWORD *__thiscall UiWidget_CreateFull(_DWORD *this, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13, int a14, int a15, char a16);
_DWORD *__thiscall UiWidget_CreateWithInput(_DWORD *this, int a2, int a3, int a4, int a5, int a6);
int *__thiscall UiWidget_CreateExtended(_DWORD *this, int a2, int *a3, int a4, int a5, int *a6, unsigned int a7);
int *__thiscall UiWidget_CreateAlt(_DWORD *this, int a2, int *a3, int a4, int a5, int a6, int a7);
int __thiscall sub_65748BD0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__thiscall UiWidget_CreateBase(_DWORD *this, unsigned int a2, int a3, int a4, int a5, int a6);
_DWORD *__thiscall UiWidget_CreateMin(_DWORD *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall UiWidget_CreateComplex(_DWORD *this, void *a2, void *a3, int a4, int a5, int a6, int a7, int a8, char a9, int a10, int a11, int a12);
_DWORD *__thiscall UiWidget_CreateWithStyle(_DWORD *this, int a2, int a3, int a4, int a5);
_DWORD *__thiscall UiWidget_CreateScrollbar(_DWORD *this, int a2, int a3, int a4, int a5, float a6, char a7);
_DWORD *__thiscall UiWidget_CreateSlider(_DWORD *this, int a2, int a3, int a4, float a5, char a6);
char *__thiscall UiWidget_CreateContainer(_DWORD *this, int a2, int a3, int a4, int a5, int a6, const void *a7, char a8, int a9, int a10, int a11);
int __thiscall sub_65749290(int, int, int, int, int, int, int, int, char, void *, char); // idb
void UiWidget_Thunk();
int __thiscall sub_657493B0(_DWORD); // weak
_DWORD *__thiscall CWindow_UpdateChildPositions(int this);
int __thiscall CWindowInventory_OnMouseMove(_DWORD *this, int a2, int a3);
void __thiscall GroupWindow_Dtor(void **this);
int __thiscall GroupWindow_Initialize(int this);
_DWORD *__thiscall GroupWindow_UpdatePosition(_DWORD *this, int a2, int a3, int a4);
_DWORD *__thiscall GroupWindow_SetBackgroundImage(int this, int a2, int a3, int a4);
_DWORD *__thiscall CWindow_CenterOnScreen(_DWORD *this);
_DWORD *__thiscall CWindow_ClampToScreen(int *this);
void *__thiscall UiTextStyle_Ctor(void *this);
_DWORD *__thiscall WindowMgr_Ctor(_DWORD *this, int a2, int a3);
int __thiscall WindowMgr_DrawAll(_DWORD *this, int a2);
_DWORD *__thiscall WindowMgr_FindWidgetAtPos(_DWORD *this, int a2, int a3);
int sub_6574C460(void); // weak
char __thiscall WidgetArray1000_Add(_DWORD *this, _DWORD *a2, int a3, int a4);
char __thiscall WidgetArray500_Add(_DWORD *this, _DWORD *a2, int a3, int a4);
char __thiscall WindowMgr_ContainsWidget(int *this, int a2);
_DWORD *__thiscall WindowMgr_UpdateChildLayout(_DWORD *this);
void __thiscall Widget_Thunk(void *this);
_DWORD *__thiscall PlayerModels_Ctor(_DWORD *this);
void __cdecl Operator_Delete_CB80(void *a1);
void __thiscall PlayerModels_ClearAll(_DWORD *this);
void __thiscall PlayerModels_RemoveAt(_DWORD *this, unsigned int a2);
void __thiscall MsgId_7E_Handler(unsigned int *this, int a2);
int __thiscall j_PlayerModels_ClearAll(_DWORD); // weak
void __stdcall CharTooltip_CreateBorder(_DWORD *a1);
void __stdcall CharTooltip_CreateHealthBar(int a1);
void __thiscall PlayerMarkers_Render(_DWORD *this, int a2);
// void __usercall ThirdPerson_UpdateCamera(int this@<ecx>, int a2@<edi>);
void __thiscall Crosshair_TryUpdate(int this);
void __stdcall Recoil_ApplyStatGroup2(float a1);
int __thiscall Weapon_GetActiveSlotCount(char *this);
BOOL __thiscall PlayerStats_IsCharacterCreation(void *this);
int __thiscall sub_6574DD40(_DWORD); // weak
int __thiscall CrosshairMgr_Init(_DWORD *this);
void __stdcall Item_ApplyConsumable(unsigned __int16 a1);
char __thiscall Handcuff_UpdateProgress(int this);
int __thiscall UIAssetArray_GetWithAlpha(int this, int __saved_registers);
void __thiscall Movement_UpdateFatigue(float *this, int a2);
void __thiscall CrosshairMgr_OnMessage(int *this, int *__saved_registers);
void __thiscall HUD_RenderCrosshair(int *this);
int __thiscall RenderState_SetDefaults(_DWORD *this);
float *__cdecl Texture_CalcUVCoords(float *a1, int a2, float a3, float a4, float a5, float a6);
float *__thiscall FloatArray_SetZero(float *this);
int __thiscall CrosshairMgr_LoadTextures(float *this);
float *__thiscall CrosshairMgr_Ctor(float *this);
// void __usercall HUD_UpdateHealthBars(int *a1@<ecx>, int a2@<edi>, int a3@<esi>);
int __thiscall Sprite_SetDefaults1(_DWORD *this);
int __thiscall PlayerStats_DrawAll(_DWORD *this);
char __thiscall PlayerStats_ResetXP(int this);
void __cdecl __noreturn Vector60_ThrowLengthError2(int a1, int a2);
void *__cdecl Vector60_AllocateChecked(unsigned int a1);
int __thiscall Scanner_LoadTextures(float *this);
float *__thiscall Scanner_Init(float *this);
char *__thiscall StringArray36_WriteToBitStream(_DWORD *this, char *a2);
char *__thiscall BytePairArray_WriteToBitStream(_DWORD *this, char *a2);
char *__thiscall CharacterData_WriteToBitStream(char *this, unsigned int *bs);
char *__thiscall CharArray_WriteToStream(_DWORD *this, char *a2);
int __thiscall ItemData_WriteToBitStream(unsigned __int16 *this, char *a2);
char *__thiscall ItemArray_WriteToStream(char **this, char *a2);
char __thiscall Packet_ID_B0_write(int this);
int __thiscall sub_65751A90(_DWORD, _DWORD); // weak
char **__thiscall ItemArray_MoveRange(char **this, char **a2, char *a3, char *a4);
void __thiscall CharSlot_FreeBuffers(int this);
int __thiscall sub_65752020(_DWORD, _DWORD, _DWORD); // weak
int __thiscall CharSlots_DestroyAll(int *this);
char *__thiscall Packet_ID_B0_Ctor(char *this);
void __cdecl __noreturn Vector36_ThrowLengthError(int a1, int a2);
void __cdecl __noreturn Vector2_ThrowLengthError(int a1, int a2);
void *__cdecl Vector36_AllocateChecked(unsigned int a1);
void *__cdecl Vector2_AllocateChecked(unsigned int a1);
char *__cdecl Array36_CopyElements(char *a1, char *a2, char *a3);
_WORD *__cdecl Array2_CopyForward(_WORD *a1, _WORD *a2, _WORD *a3);
char *__cdecl Array36_FillWithValue(char *a1, char *a2, const void *a3);
char *__cdecl Array60_FillWithValue(char *a1, char *a2, const void *a3);
char *__cdecl Array36_CopyForward(char *a1, char *a2, char *a3);
_WORD *__cdecl Array2_CopyForwardChecked(_WORD *a1, _WORD *a2, _WORD *a3);
char *__cdecl Array60_CopyForward(char *a1, char *a2, char *a3);
int __thiscall Packet_ID_AF_read_structA(char *this, unsigned int *a2);
int __thiscall ItemStructAWithName_read(char *this, unsigned int *a2);
_DWORD *__thiscall StringMap_GetBeginIter(_DWORD *this, _DWORD *a2);
char __thiscall Array36_AllocateN(_DWORD *this, unsigned int a2);
char __thiscall Vector2_InitWithCapacity(_DWORD *this, unsigned int a2);
_DWORD *__stdcall StringMapNode_Alloc(int a1, int a2, int a3, _DWORD *a4, char a5);
_DWORD *StringMapNode_AllocEmpty();
void *__thiscall StringMap_CopySubtree(_DWORD *this, int *a2, int a3);
char *__cdecl Array36_CopyBackward(char *a1, char *a2, char *a3);
char *__cdecl Array60_CopyBackward(char *a1, char *a2, char *a3);
// char *__usercall Array36_FillN@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
int __cdecl sub_65753580(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
// char *__usercall ArrayCopy60Bytes@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
int *__thiscall StringMap_CopyTree(int ***this, int a2);
char *__thiscall Vector36_UninitializedCopy(void *this, char *a2, char *a3, char *a4);
_WORD *__thiscall Vector60_UninitializedCopy(void *this, _WORD *a2, _WORD *a3, _WORD *a4);
char *__stdcall Array36_FillAndGetEnd(char *a1, int a2, char *a3);
char *__stdcall Array60_CopyToOffset(char *a1, int a2, char *a3);
int ***__thiscall StringMap_CopyFrom(int ***this, int a2);
char *__stdcall Array36_CopyForwardWrapper(char *a1, char *a2, char *a3);
int ***__thiscall ItemData_Copy(int ***this, char *a2);
char **__thiscall ItemData_MoveRange(char **this, char **a2, char *a3, char *a4);
int __thiscall Vector36_InsertN(int this, char *a2, unsigned int a3, char *a4);
char *__stdcall Array60_CopyForwardWrapper(char *a1, char *a2, char *a3);
int ***__cdecl ItemDataArray_Copy(char *a1, char *a2, int ***a3);
_DWORD *__thiscall Vector36_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4);
int __thiscall sub_65754290(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall Vector60_InsertN(int this, char *a2, unsigned int a3, char *a4);
int __thiscall Vector2_CopyFrom(int this, int a2);
int ***__cdecl ItemDataArray_CopyWrapper(char *a1, char *a2, int ***a3);
int ***__thiscall ItemData_CopyCtor(int ***this, const void *a2);
char **__thiscall PlayerData_Reset(char *this);
int __thiscall ItemVector_Assign(int this, unsigned int a2);
char *__thiscall ItemVector36_PushBack(char **this, char *a2);
_DWORD *__thiscall ItemVector60_Insert(_DWORD *this, _DWORD *a2, char *a3, char *a4);
int __cdecl sub_65754C40(_DWORD, _DWORD); // weak
unsigned __int8 __thiscall Read_Map_U32_String(char **this, unsigned int *a2);
char *__thiscall ItemDataArray_PushBack(char **this, char *a2);
int ***__cdecl ItemArray44_CopyRange(char *a1, char *a2, int ***a3);
unsigned __int8 __thiscall Read_Vector_RankPermission(_DWORD *this, unsigned int *a2);
bool __thiscall Models::Apartment::Read(char *this, unsigned int *bs);
char *__thiscall Packet_ID_B0_read_listB(char *this, unsigned int *a2);
int ***__thiscall ItemDataArray_InsertAt(void *this, char *a2, char *a3, int ***a4);
void __thiscall ItemDataArray_Clear(int *this);
int *__thiscall ItemDataArray_Assign(int *this, int a2);
int __thiscall CharacterData_Reset(int this);
_DWORD *__thiscall ItemDataSmall_CopyFrom(_DWORD *this, int a2);
char *__thiscall PlayerData_Assign(char *this, int a2);
int __thiscall Packet_ID_B0_dtor(int *this);
void __thiscall CrosshairMgr_Update(CrosshairMgr *this, int a2);
// int __usercall CrosshairView_Render@<eax>(int **a1@<ecx>, double a2@<st0>);
int __thiscall sub_65756A30(_DWORD, _DWORD); // weak
void __thiscall Packet_ID_AF_B0_read_listA(void *this, unsigned int *a2);
char __thiscall Packet_ID_B0_read(int this, int a2);
int __thiscall Sprite_SetDefaults2(_DWORD *this);
int __thiscall NPCStats_DrawAll(_DWORD *this);
char __thiscall NPCStats_ResetXP(int this);
int __thiscall Scanner_LoadTextures2(float *this);
float *__thiscall Scanner_Init2(float *this);
char __thiscall Arrest_UpdateProgress(int this);
// int __usercall CrosshairView_RenderAlt@<eax>(float *this@<ecx>, double a2@<st0>);
int __thiscall RenderState_SetDefaults2(_DWORD *this);
int __thiscall HUD_RefreshAndRender(_DWORD *this);
int __thiscall HUD_LoadJumpLockTexture(float *this);
int __thiscall HUD_RenderScannerPulse(float *this);
float *__thiscall HUDElement_Ctor(float *this);
int __thiscall ScopeHUD_Init(float *this);
float *__thiscall SoundTransform_Init(float *this);
void __thiscall HUD_ResetAndUpdateWindowMgr(_DWORD *this);
void __thiscall SoundFade_Update(int this);
void __thiscall HUD_UpdateCountdownTimer(int this);
int __thiscall nullsub_6(_DWORD, _DWORD); // weak
BOOL __stdcall GameState_IsNotOne(int a1);
int __thiscall GameState_OnExitMode(_DWORD *this, int a2);
int __thiscall GameState_OnExitModeSimple(_DWORD *this, int a2);
int __thiscall Cursor_SetVisible(_DWORD *this, int a2);
void __thiscall ScreenFade_Render(int this);
void __stdcall SoundMgr_PlaySoundIfValid(unsigned int a1);
BOOL __thiscall Cursor_ClipToWindow(_DWORD *this, char a2);
BOOL Cursor_CenterInWindow();
void __stdcall Render_DrawRotatedLine(float a1, float a2, float a3, float a4, float a5, int a6, int a7, char a8);
bool __thiscall TimeCoords_Validate(int this);
char __stdcall EncVarMgr_WriteIndexSeven(char Src);
int __thiscall CursorMgr_LoadCursors(_DWORD *this);
void __thiscall HUD_HideAndReset(void *this);
int __thiscall HUD_Update(int this);
int __thiscall CameraMode_EnterMode(_DWORD *this, int a2);
int __thiscall CameraMode_ExitMode(_DWORD *this, int a2);
int __thiscall GameMode_HideCursor(_DWORD *this, int a2);
int __thiscall GameMode_CanTransition(_DWORD *this, int a2, int a3);
int __thiscall sub_6575A2B0(_DWORD); // weak
int __thiscall sub_6575A310(_DWORD); // weak
int __thiscall IconAtlas_GetHandleByIndex(_DWORD *this, int __saved_registers);
int __thiscall GameMode_TrySetMode(int *this, int a2);
int __thiscall GameMode_SetModeThree(int *this, unsigned int a2);
int __thiscall GameMode_SetModeFour(int *this, unsigned int a2);
_DWORD *RBTreeNode_Alloc();
int __thiscall GameInput_HandleKeyPress(int this, int a2);
int __stdcall WorldLogin_LoadWorldFromPath(char *worldPath, int worldDisplayName); // idb
int **__thiscall sub_6575AF60(int **this, int **a2, _DWORD *a3);
int __thiscall sub_6575B010(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6575B3C0(_DWORD, _DWORD, _DWORD); // weak
_DWORD *__thiscall sub_6575B800(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int *__thiscall sub_6575B990(int **this, unsigned int *a2);
void __thiscall GameInput_HandleMouseClick(int **this, int *__return_address, char a3, int *a4, unsigned int a5, unsigned int a6);
float *__thiscall GameInputMgr_Ctor(float *this);
int __thiscall ScreenInfo_GetDimensions(_DWORD *this);
void __thiscall GameInputMgr_GetInstance(float *this, int __return_address);
int __thiscall sub_6575C980(_DWORD, _DWORD); // weak
int __thiscall sub_6575C9E0(_DWORD, _DWORD); // weak
int __thiscall sub_6575CAE0(void *this);
int __thiscall Resource_Release(int *this, int a2, int a3);
int __stdcall Array_IndexedRead(int a1, int a2, int a3);
void __thiscall GameInputMgr_UpdateMode(int this, int __return_address);
void __thiscall GameInputMgr_ProcessInput(int this, int __return_address);
int __stdcall sub_6575CDF0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
unsigned int __thiscall GameInputMgr_HandleWindowMsg(unsigned int *this, unsigned int a2, _DWORD *a3, int a4);
int **__thiscall RBTree18_LowerBound(int **this, int **a2, _DWORD *a3);
int *__thiscall sub_6575D3C0(int **this, int *a2, char a3, int *a4, int a5);
unsigned int __thiscall CInterfaceMgr_AddTexture(unsigned int *this, unsigned int a2, _DWORD *a3);
int __thiscall RBTree18_InsertOrFind(int **this, int a2, _DWORD *a3);
unsigned int __thiscall TextInput_GetCursorX(int this, int __return_address);
unsigned int __thiscall TextInput_GetCursorY(int this, int __return_address);
unsigned int __thiscall CInterfaceResMgr_AddTexture(unsigned int *this, int __return_address);
int __thiscall CInterfaceResMgr_Init(int this);
int __thiscall TextInput_InsertChar(int **this, int *a2);
int __thiscall sub_6575EE50(_DWORD); // weak
int __thiscall TextInput_GetLength(_DWORD *this);
void __cdecl __noreturn sub_6575F580(int a1, int a2);
void *__cdecl sub_6575F720(unsigned int a1);
char __thiscall ItemStructA_CompareVariantBytes(_BYTE *this, int a2);
int __thiscall TextInput_SetText(_DWORD *this, int a2);
_DWORD *__cdecl sub_6575FF60(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __thiscall sub_6575FF80(int *this, int a2, int a3);
int __stdcall sub_6575FFB0(int a1, int a2, int a3);
int __thiscall sub_6575FFD0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65760000(_DWORD, _DWORD, _DWORD, _DWORD); // weak
bool __thiscall ItemStructA_Equals(_WORD *this, int a2);
int __thiscall Inventory_FindItemByType(int *this, int a2);
char __thiscall Inventory_ContainsItem(int *this, int a2);
_DWORD *ListNode_AllocNew();
int __thiscall sub_65760D90(_DWORD *this, int a2, int a3, int a4);
int __cdecl sub_65760E10(void *Source, int a2, int a3); // idb
unsigned int __thiscall DynArray_InsertAt(unsigned int *this, unsigned int a2, _DWORD *a3, int a4);
unsigned int __thiscall sub_65760F40(unsigned int *this, unsigned int a2, _DWORD *a3, int a4);
char __thiscall ListNode_GetData(int this, _DWORD *a2);
unsigned int __thiscall List_InsertAtOffset(unsigned int *this, unsigned int a1, _DWORD *a2);
unsigned int __thiscall IndexedArray_Add(unsigned int *this, unsigned int a1, _DWORD *a2);
BOOL __thiscall IndexedArray_HasIndex(_DWORD *this, int a1);
_DWORD *__thiscall IndexedArrayMgr_Ctor(_DWORD *this);
char *__stdcall sub_65761FB0(void *Source, int a2, char *Destination);
void __thiscall LinkedList_AddNode(unsigned int *this, _DWORD *a2, int a3, int a4, int a5);
BOOL __thiscall ObjectManager_ClearAll(_DWORD *this);
int __thiscall ItemList_AddWithSlider(unsigned int *this, int a2);
_DWORD *__stdcall sub_65762260(_DWORD *a1, int a2, _DWORD *a3);
void __thiscall sub_65762290(int this, char *Source, unsigned int a3, int a4);
int __cdecl sub_65762510(void *Source, int, int, char); // idb
int __cdecl sub_65762600(void *Source, int, int, char); // idb
void __thiscall sub_65762810(_DWORD *this);
void __thiscall TreeMap_ClearAll(void ***this);
void __thiscall TreeMap_Destroy(int this);
void __thiscall Inventory_ProcessItemSlots(int this, __int16 *a2, int a3, char a4);
void __thiscall InventoryUI_SetColumnCount(int this, int a2);
BOOL __thiscall ItemSlot_GetItemId(unsigned __int16 *this);
_BYTE *__thiscall ItemSlot_GetQuantity(_BYTE *this, _DWORD *a2, _BYTE *a3);
int __thiscall ItemSlot_SetValues(int **this);
int __thiscall UiItemSlot_SetItemAndTooltip(int this, char a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12, int a13);
int *__thiscall sub_657647D0(int **this, int *a2, char a3, int *a4, _DWORD *a5);
_DWORD *__thiscall ItemStructA_Clear(char *this);
int __thiscall ItemsAddedEntry_InsertVariantId(int **this, int a2, _DWORD *a3);
bool __thiscall sub_65764AD0(int this, const void *a2);
bool __thiscall ItemStructA_UpdateFrom(int **this, unsigned __int16 *a2);
int __thiscall sub_65764D80(int this, int a2, int a3, int a4, int Buffer, const void *a6, char a7, int a8, int a9, int a10);
void __thiscall UiItemSlot_SetItem(int this, unsigned __int16 *a2);
int __thiscall sub_65765A40(int this, _DWORD *a2);
void __thiscall ItemsAddedEntry_Init(char *this);
char *__thiscall UiObject_Ctor(char *this);
int __thiscall sub_65765F80(_DWORD); // weak
int __thiscall LoadingScreen_Initialize(int *this);
int __thiscall LoadingScreen_Draw(int this);
void __thiscall FadeEffect_Update(int this);
int __thiscall LoadingScreen_Render(void *this);
char __thiscall FadeEffect_SetActive(float *this, char a2);
int __thiscall sub_65766580(int *this, const char *a2);
int __thiscall FadeEffect_Show(float *this, const char *a2);
int __thiscall UiWidget_SetParams(_DWORD *this, int a2, int a3, int a4, int a5);
int __thiscall UiWidget_StartFadeAnimation(float *this, float a2);
void __thiscall UiList_SetSelectionText(int this, int a2, char a3);
int __thiscall WeaponMgr_HandleInput(int this, int a2, unsigned int __saved_registers, int __return_address, int a5);
int sub_657692D0(void); // weak
void __thiscall UiWidget_SetVTable(_DWORD *this);
int __cdecl sub_657693B0(int a1);
int __thiscall UiItemSlot_FreeTooltipHString(int *this);
int __thiscall UiItemSlot_SetTooltipHString(int *this, int a2);
int __thiscall UiWidget_SetState(_DWORD *this, int a2);
void __cdecl __noreturn sub_65769730(int a1, int a2);
void *__cdecl sub_65769850(unsigned int a1);
int __thiscall sub_65769C90(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65769CC0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_65769F40(_DWORD); // weak
int __thiscall sub_65769FC0(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_6576A040(int *this, int a2, int a3, int a4);
int __thiscall sub_6576A2F0(_DWORD, _DWORD); // weak
BOOL __thiscall sub_6576A310(_DWORD *this, int a2);
BOOL __thiscall UiWidget_IsVisible(int *this, int a1);
int __thiscall sub_6576B5F0(_DWORD, _DWORD, _DWORD); // weak
BOOL __thiscall UiList_ClearEntries(int *this);
int __thiscall sub_6576BD50(_DWORD *this);
int __thiscall TextureManager_ClearAll(_DWORD *this);
_DWORD *__thiscall sub_6576C080(_DWORD *this);
void __thiscall PtrVector_FreeAll(_DWORD *this);
void __thiscall PtrVector_FreeAll_thunk(_DWORD *this);
float *__thiscall sub_6576C6E0(float *this);
int __thiscall Scrollbar_Initialize(int this, int a2, int a3, float a4);
float *__thiscall sub_6576CC20(float *this);
int __thiscall Scrollbar_InitFromTable(int this, int a2, float a3);
void __thiscall Scrollbar_AddCallbackEntry(_DWORD *this, int a2, int a3, int a4);
int __cdecl sub_6576D0F0(_DWORD *a1, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_6576D1D0(_DWORD *this);
int __thiscall sub_6576D820(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6576D8F0(_DWORD, _DWORD, _DWORD); // weak
int __fastcall sub_6576D9C0(_DWORD *a1);
int *__thiscall UiSlider_Create(int *this, int a2, int a3);
int __thiscall TextInput_Initialize(int *this, int a2, int a3, int *a4, int *a5, unsigned int a6);
int __cdecl sub_6576E280(_DWORD, _DWORD, _DWORD, _DWORD); // weak
char *sub_6576E330(char *Source, char *a2, ...);
int __cdecl sub_6576E400(_DWORD, _DWORD, _DWORD, _DWORD); // weak
char *sub_6576E4B0(char *Source, char *a2, ...);
int __cdecl sub_6576E580(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_6576E600(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int **__cdecl sub_6576E8F0(int **a1, int *a2, int *a3, int a4);
int **__cdecl sub_6576EAE0(int **a1, int *a2, int *a3, int a4);
int __cdecl sub_6576ECD0(int a1, int a2, int a3);
int __cdecl sub_6576ED10(int a1, int a2, int a3);
int __cdecl sub_6576EE90(_DWORD *a1, int a2, int a3);
int __cdecl sub_6576EEE0(_DWORD *a1, int a2, int a3);
int __cdecl IntroSort_Ascending(char *Source, char *a2, int a3, int a4);
int __cdecl IntroSort_Descending(char *Source, char *a2, int a3, int a4);
void __thiscall ItemList_Sort(char *this, int a2, int a3);
// unsigned int __usercall CInterfaceMgr_Init@<eax>(int a1@<ecx>, double a2@<st0>, double a3@<st1>, double a4@<st2>);
int __thiscall sub_657710A0(_DWORD); // weak
int __thiscall sub_65771150(_DWORD); // weak
unsigned __int8 __thiscall TextWidget_UpdatePosition(int this, float a2, float a3);
int __thiscall TextWidget_Initialize(int this, void *a2, void *a3, int a4, int a5, int a6, int a7, char a8, int a9, int a10, int a11);
float *__thiscall Slider_Ctor(float *this);
int __thiscall Slider_ClampValue(_DWORD *this, int a2);
int __thiscall Slider_SetTickCount(int *this, int a2);
int __thiscall Slider_ResetToMin(int *this);
int __thiscall UiWidget_InitWithSound(int *this, int __saved_registers, int __return_address, int a4, int a5);
_DWORD *__thiscall ProgressBar_Ctor(_DWORD *this);
unsigned int __thiscall ImageWidget_Initialize(_DWORD *this, unsigned int a2, int a3, int a4);
int __thiscall Slider_SetValue(int *this, int a2);
int __thiscall RangeBar_SetMinMax(int *this, int a2, int a3);
int __thiscall Checkbox_Initialize(_DWORD *this, int __saved_registers, int __return_address);
void __thiscall TextLabel_CreateFont(_DWORD *this, int a2, char a3);
int __thiscall ComboBox_Initialize(_DWORD *this, int a2, unsigned int __saved_registers, int __return_address);
int __thiscall TextBuffer_GetNextChar(_DWORD *this);
_DWORD *__thiscall ListWidget_CopyState(_DWORD *this, const void *a2);
int __thiscall Widget_StartAnimation(float *this, float a2);
int __thiscall UiWidget_SetVisible(_DWORD *this, int a2);
int __thiscall TextWidget_UpdateCursor(_DWORD *this);
void __thiscall UiText_SetValueIfChanged(int this, char *a2, int a3, char *Source);
float *__thiscall TextInput_Ctor(float *this);
int __thiscall ListBox_Reset(_DWORD *this);
int *__thiscall Slider_CreateNew(int *this, int a2, int a3);
int __thiscall sub_65779FE0(int *this, int a2, int a3);
int __stdcall sub_6577A010(int a1, int a2, int a3);
int __thiscall sub_6577A0D0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6577A170(_DWORD, _DWORD, _DWORD); // weak
int __thiscall ListBox_Initialize(int *this, int a2, void *a3, int *a4, int a5, int a6);
int __thiscall DynBuffer_Resize(int *this, int a2, int a3, int a4);
unsigned int __thiscall DynBuffer_InsertAt(unsigned int *this, unsigned int a2, _DWORD *a3, int a4);
char *sub_6577A9E0(char *Source, char *a2, ...);
char *sub_6577AAB0(char *Source, char *a2, ...);
unsigned int __thiscall WidgetList_InsertAt(unsigned int *this, unsigned int a1, _DWORD *a2);
BOOL __thiscall WidgetList_RemoveAt(int *this, int a1);
int __cdecl sub_6577AEF0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_6577AFA0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_6577B050(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_6577B0D0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int **__cdecl sub_6577B6B0(int **a1, int *a2, int *a3, int a4);
int **__cdecl sub_6577B880(int **a1, int *a2, int *a3, int a4);
int __cdecl sub_6577BA50(int a1, int a2, int a3);
int __cdecl sub_6577BA90(int a1, int a2, int a3);
BOOL __thiscall ListBox_ClearItems(int *this);
int __thiscall ListBox_AddItem(unsigned int *this, int a2);
int __thiscall ChatWindow_AddLine(unsigned int *this, _DWORD *a2);
int __cdecl sub_6577BF10(_DWORD *a1, int a2, int a3);
int __cdecl sub_6577BF60(_DWORD *a1, int a2, int a3);
int __cdecl IntroSort2_Ascending(char *Source, char *a2, int a3, int a4);
int __cdecl IntroSort2_Descending(char *Source, char *a2, int a3, int a4);
void __thiscall ChatWindow_SortMessages(int *this);
int __thiscall ListBox_RefreshDisplay(int *this);
int __thiscall Button_Initialize(_DWORD *this, int a2, int a3, int a4, void *a5, void *a6, int a7);
int __thiscall sub_6577C990(int *this, int a2, int a3);
int __stdcall sub_6577C9C0(int a1, int a2, int a3);
unsigned int __thiscall DynBuffer2_InsertAt(unsigned int *this, unsigned int a2, _DWORD *a3, int a4);
unsigned int __thiscall WidgetArray_InsertAt(unsigned int *this, unsigned int a1, _DWORD *a2);
int __cdecl Button_AddCallbacks(int a1, int a2);
int __thiscall Icon_CreateNew(_DWORD *this, int a2, int a3, int a4, int a5);
int __cdecl IconBar_AddIcons(int a1, int a2);
float *__thiscall Icon_Ctor(float *this);
int __thiscall Icon_SetParams(_DWORD *this, int a2, int a3, int a4);
int __thiscall UiWidget_ResetState(_DWORD *this);
int __thiscall sub_6577E610(int *this, int a2, int a3);
int __stdcall sub_6577E640(int a1, int a2, int a3);
int __thiscall DynBuffer3_Resize(int *this, int a2, int a3, int a4);
unsigned int __thiscall DynBuffer3_InsertAt(unsigned int *this, unsigned int a2, _DWORD *a3, int a4);
unsigned int __thiscall ItemList_InsertAt(unsigned int *this, unsigned int a1, _DWORD *a2);
BOOL __thiscall ItemList_RemoveAt(int *this, int a1);
int __thiscall ItemList_ClearAll(int *this);
int __thiscall ItemList_AddItem(unsigned int *this, int a2);
int __thiscall sub_657817A0(int *this);
int __thiscall sub_65781B70(_DWORD, _DWORD); // weak
int __stdcall sub_65781C60(_DWORD, _DWORD, _DWORD); // weak
_DWORD *__cdecl Array24_Copy(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __cdecl sub_657825D0(_DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_65782740(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_WORD *__thiscall UiProgressBar_Ctor(_WORD *this);
int __cdecl sub_657829C0(_DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_65782D20(_DWORD, _DWORD); // weak
int __thiscall sub_65782D60(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__thiscall Vector_Resize(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int __thiscall sub_65782EE0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
void __thiscall sub_65782FA0(int this, int a2, unsigned int a3, int a4);
int __thiscall sub_65783520(_DWORD); // weak
_DWORD *__thiscall StatusList_Resize(int *this);
int __thiscall Vector24_ResizeWithDefault(int *this, unsigned int a2, int a3, int a4, int a5, int a6, int a7, int a8);
unsigned int __thiscall StatusBar_UpdateDisplay(int *this, int __return_address);
void __cdecl SharedMem2BD3_WriteString(char *a1);
void __stdcall SharedMem2BD0_ReadBlock12(void *a1);
void __stdcall SharedMem2BD0_WriteBlock12(void *Src);
void __thiscall CharacterData_Dtor(_DWORD *this);
float *__thiscall CharacterModel_Ctor(float *this);
_DWORD *__cdecl Array_FillValue(_DWORD *a1, _DWORD *a2, _DWORD *a3);
float *__thiscall CharacterModel2_Ctor(float *this);
char *__thiscall CharacterPanel_Ctor(char *this);
int __cdecl Array_MoveRange(void *Source, int a2, int a3); // idb
char *__stdcall Vector_MoveRange(void *Source, int a2, char *Destination);
_DWORD *__stdcall Array_FillN(_DWORD *a1, int a2, _DWORD *a3);
void __thiscall Vector_InsertN(int this, char *Source, unsigned int a3, unsigned int a4);
void __thiscall Vector_PushBackPtr(char **this, _DWORD *a2);
void __thiscall IntVector_PushN(int **this, int a2, int a3);
int __thiscall LoginPanel_SetMode(int this, char a2);
void __thiscall LoginUI_SetMessageText(float *this, int a2, char *Source, int a4, char a5, int a6);
int __thiscall Login_SetTokenMode(int *this, char a2, char *a3);
char __thiscall Steam_RequestAuthTicket(_BYTE *this, _DWORD *a2, char a3);
char *__thiscall Packet_WriteBits(char *this, char *a2, unsigned int a3);
Packet_ID_LOGIN_TOKEN_CHECK *__thiscall Packet_ID_LOGIN_TOKEN_CHECK_Ctor(Packet_ID_LOGIN_TOKEN_CHECK *this);
int __thiscall CharacterData_ParseFromString(float *this, int a2, int a3, int a4);
void __thiscall CharacterData_BuildUI(_BYTE *this);
int __thiscall Steam_RequestEncryptedTicket(int this);
char *__thiscall VariableSizedPacket_WriteString(char *this, unsigned int a2, int a3);
char __thiscall VariableSizedPacket_ReadString(_DWORD *this, void *a2, unsigned __int8 a3);
bool __thiscall Packet_ID_LOGIN_TOKEN_CHECK_Read(Packet_ID_LOGIN_TOKEN_CHECK *this, int packet);
char __thiscall Packet_ID_LOGIN_TOKEN_CHECK_Write(Packet_ID_LOGIN_TOKEN_CHECK *this);
_DWORD *__thiscall Packet_ID_LOGIN_TOKEN_CHECK_ScalarDeletingDtor(_DWORD *this, char a2);
float *__thiscall CharacterView_Ctor(float *this);
void __thiscall LoadingScreen_UpdateProgress(int this, int a2);
void __thiscall Camera_UpdateTransform(_DWORD *this);
void *__thiscall Camera_GetOrientation(float *this);
int __thiscall LoginUI_Update_SendLoginTokenCheck(char *this, int a2);
int __thiscall sub_6578BA00(_DWORD); // weak
int __thiscall Widget_Detach(int *this);
int __thiscall sub_6578BB10(_DWORD *this, _BYTE *a2);
int __thiscall UiWidget_GetSlot(_DWORD *this, unsigned int a2);
char *__thiscall Panel_CreateByType(_DWORD *this, char *a2);
int __thiscall Panel_SetActiveWidget(_DWORD *this, _DWORD *a2, int a3);
int __thiscall Panel_InitAll(_DWORD *this);
int __thiscall Widget_HandleSlotEvent(_DWORD *this, unsigned int a2);
_DWORD *__thiscall StatusPanel_Ctor(_DWORD *this);
void __thiscall MarketNagScreen_Show(int this);
LONG __thiscall SharedMem_WriteDword_0x77(void *this, int a2);
LONG __thiscall SharedMem_WriteDword_0x78(void *this, int a2);
LONG __thiscall SharedMem_WriteWorldId_0x1EEC1(void *this, unsigned __int8 a2);
LONG __thiscall SharedMem_WriteWorldLoginState_0x1EEC0(void *this, unsigned __int8 a2);
// int __userpurge WorldSelect_ApplyApartmentInfo@<eax>(int a1@<ecx>, double a2@<st0>, float a3, unsigned __int8 a4, int a5);
int __thiscall CharacterEntry_Create(char *this, const void *a2, float a3, int a4, char a5, char a6, _BYTE *a7);
_DWORD *__thiscall InputBindings_FindActionSlot(_DWORD *this, int a2);
_DWORD *__thiscall InputDevice_FindByHandle(_DWORD *this, int a1);
int __thiscall InputConfig_SaveMouse(int this);
int __thiscall InputConfig_ToggleRunLock(int *this);
int InputConfig_RegisterActions();
int __stdcall sub_6578D440(int a1, const char *a2);
double __thiscall sub_6578D4E0(_DWORD *this);
int __thiscall PlayerData_Ctor(int this);
int __thiscall InputConfig_LoadBindings(char *this);
// int __usercall InputConfig_LoadMouseSettings@<eax>(int a1@<ecx>, double a2@<st0>);
int sub_6578DB30();
char *Input_LoadKeyNames();
int __thiscall InputConfig_ApplyBindings(_DWORD *this);
// int __usercall InputMgr_Initialize@<eax>(char *this@<ecx>, double a2@<st0>);
// int __usercall ShutdownUI_CheckState@<eax>(char *this@<ecx>, double a2@<st0>);
int __thiscall sub_6578E2D0(_DWORD); // weak
int __thiscall ShutdownUI_LoadTextures(_DWORD *this);
int __thiscall sub_6578E810(_DWORD); // weak
void __thiscall sub_6578EA50(int *this);
char __thiscall CharSlot_SetActiveIndex(_BYTE *this, char a2);
char *__thiscall CharSlots_FindByIdAndSetActive(_WORD *this, __int16 a2);
int __thiscall CharSelectUI_DisplayCharacter(int this, int a2, char *a3, int *a4);
BOOL __thiscall LoginUI_GetUsernamePtr(_WORD *this, __int16 a2);
char *__thiscall LoginUI_SetFieldText(char *this);
int __thiscall List_IncSizeChecked(_DWORD *this, unsigned int a2);
int __thiscall CWindowStatusBar_UpdateStats(int this);
char __thiscall Packet_ID_MOVE_ITEMS_write(int this);
char __thiscall Packet_ID_UNLOAD_WEAPON_read(int this, int a2);
char __thiscall Packet_ID_UNLOAD_WEAPON_write(int this);
_DWORD *LoginUI_GetPasswordPtr();
void __thiscall LoginUI_SetPassword(int this);
_DWORD *__stdcall ListNode_Create3(int a1, int a2, _DWORD *a3);
int __thiscall LoginUI_ClearFields(int *this, _DWORD *a2);
void __thiscall LoginPacket_InitPasswordPtr(_DWORD *this);
void __thiscall j_LoginUI_SetPassword(void *); // idb
char *__thiscall Packet_ID_MOVE_ITEMS_ctor(char *this);
char __thiscall Packet_ID_MOVE_ITEMS_read(int this, int a2);
int __thiscall LoginPacket_Dtor(_DWORD *this);
int __thiscall sub_657929D0(_DWORD); // weak
void __thiscall sub_65792AC0(int *this);
char __thiscall UILayout_GetSlotPosition(_DWORD *this, unsigned __int8 a2, _DWORD *a3, _DWORD *a4);
int __thiscall DynArray_Init(_DWORD *this, int a2);
int __thiscall sub_65793960(_DWORD); // weak
void __cdecl __noreturn ThrowLengthError_Vector3(int a1, int a2);
void __cdecl __noreturn ThrowLengthError_Vector4(int a1, int a2);
void __cdecl __noreturn sub_657940A0(int a1, int a2);
void __cdecl __noreturn Vector_ThrowLengthError(int a1, int a2);
void __cdecl __noreturn Vector_ThrowLengthError2(int a1, int a2);
void __cdecl __noreturn Vector_ThrowLengthError3(int a1, int a2);
void __cdecl __noreturn sub_65794350(int a1, int a2);
void __cdecl __noreturn sub_65794400(int a1, int a2);
void __cdecl __noreturn sub_657944B0(int a1, int a2);
void __cdecl __noreturn sub_65794550(int a1, int a2);
void __cdecl __noreturn sub_657946B0(int a1, int a2);
void __cdecl __noreturn sub_65794750(int a1, int a2);
void __cdecl __noreturn sub_65794890(int a1, int a2);
void __cdecl __noreturn ThrowLengthError_Vector5(int a1, int a2);
void __cdecl __noreturn ThrowLengthError_Vector6(int a1, int a2);
void *__cdecl sub_65794E50(unsigned int a1);
void *__cdecl Vector8_Allocate(unsigned int a1);
void *__cdecl Vector68_Allocate(unsigned int a1);
void *__cdecl sub_65794F70(unsigned int a1);
void *__cdecl SafeNewArray_CheckOverflow(unsigned int a1);
void *__cdecl sub_65795030(unsigned int a1);
void *__cdecl sub_65795090(unsigned int a1);
void *__cdecl sub_657950F0(unsigned int a1);
void *__cdecl sub_65795150(unsigned int a1);
void *__cdecl sub_657951B0(unsigned int a1);
void *__cdecl sub_65795270(unsigned int a1);
void *__cdecl sub_657952D0(unsigned int a1);
int __stdcall sub_65795330(_DWORD, _DWORD, _DWORD); // weak
void *__cdecl sub_65795390(unsigned int a1);
void *__cdecl Vector88_Allocate(unsigned int a1);
void *__cdecl Vector8_Allocate2(unsigned int a1);
int __thiscall sub_65795C90(_DWORD); // weak
_DWORD *__cdecl sub_65795DD0(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __thiscall sub_65795F10(_DWORD); // weak
char *__cdecl sub_65796AD0(char *a1, char *a2, char *a3);
char *__cdecl sub_65796B10(char *a1, char *a2, char *a3);
_DWORD *__cdecl sub_65796B70(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __cdecl sub_65796BD0(_DWORD, _DWORD, _DWORD); // weak
_DWORD *__cdecl Pair_CopyRange(_DWORD *a1, _DWORD *a2, _DWORD *a3);
char *__cdecl sub_65796DC0(char *a1, char *a2, char *a3);
_DWORD *__cdecl Pair_CopyRange2(_DWORD *a1, _DWORD *a2, _DWORD *a3);
char *__cdecl sub_65796E40(char *a1, char *a2, char *a3);
int __cdecl sub_65796E80(void *Source, int a2, int a3); // idb
char __thiscall sub_65797080(_DWORD *this, unsigned int a2);
char __thiscall Vector68_Reserve(_DWORD *this, unsigned int a2);
char __thiscall sub_657975C0(_DWORD *this, unsigned int a2);
char __thiscall Vector52_Reserve(_DWORD *this, unsigned int a2);
char *__stdcall Array_MoveToDestination(void *Source, int a2, char *Destination);
char *__cdecl Array320_Copy(char *a1, char *a2, char *a3);
_DWORD *__stdcall Pair_CopyRangeWrapper(_DWORD *a1, _DWORD *a2, _DWORD *a3);
char *__thiscall Vector_InitWithData(void *this, char *a2, char *a3, char *a4);
BOOL __thiscall Widget_InitAndProcess(_DWORD *this, int a2, int a3);
char *__stdcall Array_MoveElements(void *Source, int a2, char *Destination);
int __thiscall DwordVector_CopyFrom(int this, int a2);
int __thiscall sub_65798300(_DWORD); // weak
int __thiscall sub_65798340(_DWORD); // weak
_DWORD *__thiscall Vector52_CopyCtor(_DWORD *this, int a2);
char *__thiscall Vector4_UninitializedCopyWrap(void *this, char *a2, char *a3, char *a4);
_DWORD *__stdcall Array4_FillN(_DWORD *a1, int a2, _DWORD *a3);
void __thiscall Vector_InsertRange(int this, char *Source, unsigned int a3, unsigned int a4);
int __thiscall sub_65798960(_DWORD); // weak
int __stdcall sub_65798A40(_DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_65798B20(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65798BB0(_DWORD); // weak
char **__thiscall Array52_Erase(char **this, char **a2, char *a3, char *a4);
int __thiscall SkillData88_CopyFrom(int this, int a2);
int __thiscall sub_65798E70(_DWORD); // weak
void __thiscall VectorPair_FreeBuffers(int this);
void __thiscall sub_657990B0(_DWORD *this);
int __thiscall Vector8_Assign(int this, int a2);
int __thiscall Vector52_Assign(int this, unsigned int a2);
void __thiscall PacketBlockState_Reset(_BYTE *this);
int __thiscall sub_657996A0(_DWORD); // weak
int __thiscall sub_65799870(_DWORD); // weak
int __thiscall sub_65799930(_DWORD, _DWORD); // weak
int __thiscall PlayerData_CopyFrom(int this, unsigned int a2);
int __thiscall sub_65799AA0(_DWORD, _DWORD); // weak
_DWORD *__thiscall PacketBlockHeader_Ctor(_DWORD *this, int a2, int a3, int a4, int a5);
char __thiscall DwordVector_PushBack(int **this, int a2);
void __thiscall UiList_AddEntry(int **this, void *a2, int a3, int a4, int a5);
int __thiscall PacketBlock_ResetArrays(int this);
int __thiscall sub_6579A170(_DWORD); // weak
int __thiscall VectorData_CopyFrom(int this, int a2);
_BYTE *__cdecl Array68_CopyForward(_BYTE *a1, _BYTE *a2, _BYTE *a3);
int __thiscall sub_6579A530(_DWORD, _DWORD); // weak
int __cdecl sub_6579A5B0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_BYTE *__cdecl PacketArray88_FilterDefault(_BYTE *a1, _BYTE *a2, _BYTE *a3);
void __cdecl PacketArray88_DestroyRange(int a1, int a2);
void __cdecl Array24_FreeVectors(int a1, int a2);
int __thiscall sub_6579AF90(_DWORD, _DWORD); // weak
int __thiscall sub_6579AFE0(_DWORD, _DWORD); // weak
void __cdecl Array88_FreeVectors(int a1, int a2);
void __cdecl PacketArray68_DestroyRange(int a1, int a2);
int __cdecl sub_6579B190(_DWORD, _DWORD); // weak
int __thiscall sub_6579B1B0(_DWORD); // weak
void __thiscall PacketArray88_Clear(int *this);
int __cdecl sub_6579B2E0(_DWORD, _DWORD); // weak
int *__thiscall PacketArray88_EraseRange(int *this, int *a2, int a3, unsigned int a4);
void __stdcall PacketArray68_DestroyWrapper(int a1, int a2);
void __thiscall PacketArray88_Dtor(int *this);
void __thiscall PacketArray68_Dtor_v1(int *this);
int __thiscall sub_6579B640(_DWORD); // weak
void __thiscall PacketArray68_Dtor_v2(int *this);
void __thiscall PacketArray68_Clear(int *this);
void __thiscall PacketArray68_Compact(int *this);
int __thiscall sub_6579B930(_DWORD, _DWORD); // weak
void __thiscall PacketData_ClearAll(int this);
int __thiscall sub_6579BD20(_DWORD); // weak
void __cdecl Array20_FreePackets(int a1, int a2);
void __thiscall PacketArrayAlt_Dtor_v1(int *this);
void __thiscall PacketArrayAlt_Dtor_v2(int *this);
int __thiscall CharSelectPacket_Dtor(char *this);
char *__thiscall Packet_ID_FACTION_ctor(char *this);
char *__cdecl sub_6579D7C0(char *a1, char *a2, char *a3);
char *__cdecl sub_6579D830(char *a1, char *a2, char *a3);
int __cdecl sub_6579D8A0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_6579D8E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_6579D920(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_6579D9D0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__cdecl Pair_FillValue(_DWORD *a1, _DWORD *a2, _DWORD *a3);
char *__cdecl Array192_Fill(char *a1, char *a2, const void *a3);
char *__cdecl Array40_Fill(char *a1, char *a2, const void *a3);
char *__cdecl Array444_Fill(char *a1, char *a2, const void *a3);
char *__cdecl Array60_Fill(char *a1, char *a2, const void *a3);
char *__cdecl Array176_Fill(char *a1, char *a2, const void *a3);
char *__cdecl Array220_Fill(char *a1, char *a2, const void *a3);
char *__cdecl Array372_Fill(char *a1, char *a2, const void *a3);
char *__cdecl Array72_Fill(char *a1, char *a2, const void *a3);
char *__cdecl Array320_Fill(char *a1, char *a2, const void *a3);
_DWORD *__cdecl Pair_FillValue2(_DWORD *a1, _DWORD *a2, _DWORD *a3);
// char *__usercall Array220_FillValue@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
_DWORD *__cdecl Array8_CopyForwardChecked(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl Pair_CopyRange3(_DWORD *a1, _DWORD *a2, _DWORD *a3);
char *__cdecl Array192_Copy(char *a1, char *a2, char *a3);
char *__cdecl Array40_Copy(char *a1, char *a2, char *a3);
char *__cdecl Array444_Copy(char *a1, char *a2, char *a3);
char *__cdecl Array60_Copy(char *a1, char *a2, char *a3);
char *__cdecl Array176_Copy(char *a1, char *a2, char *a3);
char *__cdecl Array220_Copy(char *a1, char *a2, char *a3);
char *__cdecl Array372_Copy(char *a1, char *a2, char *a3);
char *__cdecl Array72_Copy(char *a1, char *a2, char *a3);
char *__thiscall ByteAndInt_WriteToBitStream(_DWORD *this, char *a2);
char *__thiscall PlayerData_WriteToBitStream(_DWORD *this, char *a2);
char *__thiscall CharacterList_WriteToBitStream(_DWORD *this, char *a2);
int __thiscall CharacterEntry_WriteToBitStream(_BYTE *this, char *a2);
int __thiscall Packet_ID_FACTION_read_block_10A0(char *this, unsigned int *a2);
char *__thiscall PlayerList_WriteToBitStream(_DWORD *this, char *a2);
int __thiscall NetworkState_WriteToBitStream(_BYTE *this, char *a2);
int __thiscall Packet_ID_FACTION_read_block_0E08(char *this, unsigned int *a2);
int __thiscall ChatMessage_WriteToBitStream(_BYTE *this, char *a2);
char *__thiscall Array40_WriteToBitStream(_DWORD *this, char *a2);
char *__thiscall Playerfile_BlockA_WriteFull(int *this, char *a2);
char __thiscall Packet_ID_FACTION_read_block_0E3C_entry(char *this, unsigned int *a2);
char *__thiscall ItemArray_WriteToBitStream(_DWORD *this, char *a2);
int __thiscall Playerfile_BlockB_WriteFull(int *this, char *a2);
int __thiscall Packet_ID_FACTION_read_block_0D78_entry(char *this, unsigned int *a2);
char *__thiscall Array60_WriteToBitStream(_DWORD *this, char *a2);
int __thiscall Playerfile_BlockC_WriteFull(char **this, char *a2);
char *__thiscall Array176_WriteToBitStream(_DWORD *this, char *a2);
int __thiscall Playerfile_BlockD_WriteFull(int this, char *a2);
int __thiscall Packet_ID_FACTION_read_block_107C_entry(char *this, unsigned int *a2);
char *__thiscall Array220_WriteToBitStream(unsigned __int16 *this, char *a2);
char *__thiscall PlayerBlock_WriteToBitStream(unsigned __int16 *this, char *a2);
bool __thiscall Packet_ID_FACTION_read_block_11A4(char *this, unsigned int *a2);
char *__thiscall CharacterInfo_WriteToBitStream(_BYTE *this, char *a2);
bool __thiscall Packet_ID_FACTION_read_block_1170(char *this, unsigned int *a2);
char *__thiscall Array372_WriteToBitStream(_DWORD *this, char *a2);
char *__thiscall SkillArray_WriteToBitStream(int *this, char *a2);
char __thiscall Packet_ID_FACTION_read_block_1340(char *this, unsigned int *a2);
void __thiscall FactionData_WriteToBitStream(int *this, char *a2);
char *__thiscall Playerfile_BlockE_WriteFull(int *this, char *a2);
bool __thiscall Packet_ID_FACTION_read_block_0FD4_entry(char *this, unsigned int *a2);
char *__thiscall Array440_WriteToBitStream(_DWORD *this, char *a2);
void __thiscall Packet_ID_FACTION_read_block_1738(char *this, unsigned int *a2);
void __thiscall Playerfile_BlockF_WriteFull(_DWORD *this, char *a2);
void __thiscall Packet_ID_FACTION_read_block_1784_entry(char *this, unsigned int *a2);
void __thiscall Playerfile_BlockG_WriteFull(_DWORD *this, char *a2);
void __thiscall InventorySlot_WriteToBitStream(unsigned __int16 *this, char *a2);
char *__thiscall Playerfile_BlockH_WriteFull(int *this, char *a2);
bool __thiscall Packet_ID_PLAYERFILE_read_structA(char *this, unsigned int *a2);
char *__thiscall Array320_WriteToBitStream(_DWORD *this, char *a2);
char *__thiscall Playerfile_BlockI_WriteFull(_DWORD *this, char *a2);
char *__thiscall Array88_WriteToBitStream(_DWORD *this, char *a2);
char *__thiscall PlayerData_WriteToStream(char **this, char *a2);
void __thiscall Packet_ID_A9_WriteList(_DWORD *this, char *a2);
void __thiscall Playerfile_BlockJ_WriteFull(_DWORD *this, char *a2);
void __thiscall Array20_WriteToBitStream(_DWORD *this, char *a2);
char *__thiscall IntPair_WriteToBitStream(char **this, char *a2);
char *__thiscall Playerfile_BlockK_WriteFull(_DWORD *this, char *a2);
char *__thiscall Array24_WriteToBitStream(_DWORD *this, char *a2);
char __thiscall GamePacket_WriteAllFields(int this);
_DWORD *__cdecl Pair8_CopyRangeReverse(int a1, int a2, _DWORD *a3);
char *__cdecl Vector40_InitWrapper(char *a1, char *a2, char *a3);
char *__cdecl Array40_CopyReverse(char *a1, char *a2, char *a3);
char *__cdecl Vector60_InitWrapper(char *a1, char *a2, char *a3);
char *__cdecl Array60_CopyReverse(char *a1, char *a2, char *a3);
int __cdecl sub_657A20E0(int a1, int a2, int a3);
int __cdecl sub_657A2110(int a1, int a2, int a3);
int __cdecl sub_657A2140(int a1, int a2, int a3);
char *__cdecl sub_657A21A0(char *a1, char *a2, char *a3);
int __cdecl sub_657A21D0(int a1, int a2, int a3);
_DWORD *__cdecl Pair8_CopyRangeReverse2(int a1, int a2, _DWORD *a3);
void __cdecl Pair8Array_FillCopy(_DWORD *a1, int a2, _DWORD *a3);
// char *__usercall Array192_FillValue@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
// char *__usercall Array40_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
// char *__usercall Array444_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
// char *__usercall Array60_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
// char *__usercall Array176_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
// char *__usercall Array372_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
// char *__usercall Array72_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
void __cdecl Pair8Array_FillCopy_Alt(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__cdecl Array4_CopyForwardChecked(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __cdecl sub_657A2580(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
char *__stdcall sub_657A27A0(char *a1, int a2, char *a3);
// char *__usercall Array320_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
_DWORD *__stdcall Pair8Array_FillAndGetEnd(_DWORD *a1, int a2, _DWORD *a3);
char *__stdcall sub_657A2DA0(char *a1, int a2, char *a3);
char *__stdcall sub_657A2DE0(char *a1, int a2, char *a3);
char *__stdcall sub_657A2E20(char *a1, int a2, char *a3);
char *__stdcall sub_657A2E60(char *a1, int a2, char *a3);
char *__stdcall sub_657A2EA0(char *a1, int a2, char *a3);
char *__stdcall sub_657A2EE0(char *a1, int a2, char *a3);
char *__stdcall sub_657A2F60(char *a1, int a2, char *a3);
_DWORD *__stdcall Pair8Array_FillAndGetEnd_Alt(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__thiscall Pair8Vector_CopyCtor(_DWORD *this, int a2);
_DWORD *__thiscall Pair8Vector_CopyMoveHelper(void *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
char *__stdcall sub_657A33E0(char *a1, int a2, char *a3);
void __thiscall Pair8Vector_InsertRange(int this, char *a2, unsigned int a3, int *a4);
_DWORD *__thiscall Vector4_CopyCtor(_DWORD *this, int a2);
_DWORD *__thiscall Vector8_CopyCtor(_DWORD *this, int a2);
_DWORD *__thiscall sub_657A3800(_DWORD *this, int a2);
_DWORD *__thiscall Pair8Vector_CopyMoveHelper_Alt(void *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
char *__stdcall sub_657A38E0(char *a1, char *a2, char *a3);
char *__stdcall sub_657A3910(char *a1, char *a2, char *a3);
char *__stdcall sub_657A3940(char *a1, char *a2, char *a3);
char *__stdcall sub_657A3970(char *a1, char *a2, char *a3);
char *__stdcall sub_657A39A0(char *a1, char *a2, char *a3);
char *__stdcall sub_657A39D0(char *a1, char *a2, char *a3);
char *__stdcall sub_657A3A00(char *a1, char *a2, char *a3);
char *__stdcall sub_657A3A60(char *a1, char *a2, char *a3);
char *__stdcall sub_657A3A90(char *a1, char *a2, char *a3);
void __thiscall Pair8Vector_InsertRange_Alt(int this, char *a2, unsigned int a3, int *a4);
int __thiscall Vector192_InsertN(int this, char *a2, unsigned int a3, char *a4);
int __thiscall Vector40_InsertN(int this, char *a2, unsigned int a3, char *a4);
int __thiscall Vector444_InsertN(int this, char *a2, unsigned int a3, char *a4);
int __thiscall Vector60_InsertRange(int this, char *a2, unsigned int a3, char *a4);
char *__thiscall Vector176_InsertRange(int this, char *a2, unsigned int a3, char *a4);
char *__thiscall sub_657A4AB0(int this, char *a2, unsigned int a3, char *a4);
char *__thiscall sub_657A4D50(int this, char *a2, unsigned int a3, char *a4);
int __thiscall Vector72_InsertRange(int this, char *a2, unsigned int a3, char *a4);
char *__thiscall Vector320_InsertRange(int this, char *a2, unsigned int a3, char *a4);
_BYTE *__thiscall Array68Item_CopyCtor(_BYTE *this, _BYTE *a2);
char **__thiscall GameDataArray_Reset(int this);
_DWORD *__thiscall Vector192_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4);
_DWORD *__thiscall Vector40_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4);
_DWORD *__thiscall Vector444_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4);
_DWORD *__thiscall Vector60_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4);
_DWORD *__thiscall Vector176_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4);
_DWORD *__thiscall Vector220_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4);
_DWORD *__thiscall Vector372_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4);
_DWORD *__thiscall Vector72_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4);
_DWORD *__thiscall Vector320_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4);
int __thiscall sub_657A6130(_DWORD, _DWORD); // weak
_DWORD *__cdecl ChatEntry_Copy(_DWORD *a1, int a2);
_DWORD *__thiscall GameDataArray_Ctor(_DWORD *this);
char __thiscall Packet_ID_FACTION_read_listC_entry(char *this, unsigned int *a2);
int __stdcall sub_657A64C0(_DWORD); // weak
char *__thiscall Vector192_PushBack(char **this, char *a2);
char *__thiscall Vector40_PushBack(char **this, char *a2);
char *__thiscall Vector444_PushBack(char **this, char *a2);
char *__thiscall Vector60_PushBack(char **this, char *a2);
char *__thiscall Vector176_PushBack(char **this, char *a2);
char *__thiscall Vector220_PushBack(char **this, char *a2);
char *__thiscall Vector372_PushBack(char **this, char *a2);
int __thiscall sub_657A6930(_DWORD, _DWORD); // weak
char *__thiscall Vector72_PushBack(char **this, char *a2);
char *__thiscall Vector320_PushBack(char **this, char *a2);
int __thiscall sub_657A6AE0(_DWORD, _DWORD); // weak
int __cdecl sub_657A6B70(_DWORD, _DWORD, _DWORD); // weak
int __cdecl Array88_CopyConstructRange(int a1, int a2, int a3);
char __thiscall Packet_ID_A9_read_structB(char *this, unsigned int *a2);
unsigned __int8 __thiscall Packet_ID_FACTION_read_block_1090(char **this, unsigned int *a2);
unsigned __int8 __thiscall Packet_ID_FACTION_read_blockA_list_4E8(char **this, unsigned int *a2);
int __thiscall Packet_ID_FACTION_read_block_0E3C(char **this, unsigned int *a2);
char *__thiscall Packet_ID_FACTION_read_block_0D78(char **this, unsigned int *a2);
unsigned __int8 __thiscall Packet_ID_FACTION_read_block_0E2C(char **this, unsigned int *a2);
unsigned __int8 __thiscall Packet_ID_FACTION_read_block_107C(char *this, unsigned int *a2);
int __thiscall Packet_ID_FACTION_read_block_1160(char **this, unsigned int *a2);
void __thiscall Packet_ID_FACTION_read_blockA(char *this, unsigned int *a2);
int __thiscall Packet_ID_FACTION_read_block_0FD4(void *this, unsigned int *a2);
char *__thiscall Packet_ID_FACTION_read_block_1784(char *this, unsigned int *a2);
char *__thiscall Packet_ID_FACTION_read_block_0D50(char **this, unsigned int *a2);
void __thiscall Packet_ID_A5_read_struct2(char *this, unsigned int *a2);
int __cdecl sub_657A7C90(_DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_657A7CC0(_DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_657A7CF0(_DWORD, _DWORD, _DWORD); // weak
int __cdecl Array88_CopyConstructN(int a1, int a2, int a3);
int __cdecl sub_657A7DD0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_BYTE *__cdecl Array68_CopyRange(_BYTE *a1, _BYTE *a2, _BYTE *a3);
int __cdecl sub_657A8060(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_BYTE *__cdecl Array68_CopyConstructN(_BYTE *a1, int a2, _BYTE *a3);
_DWORD *__cdecl Array88_CopyForwardSafe(_DWORD *a1, int a2, int a3);
int __cdecl sub_657A82F0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_657A8430(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__thiscall Vector88_CopyCtor(_DWORD *this, int a2);
int __cdecl sub_657A85F0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_657A8620(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_657A86E0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_657A8720(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_657A8760(int *this, int a2, unsigned int a3, int a4);
_DWORD *__thiscall Vector88_Insert(int *this, _DWORD *a2, int a3, int a4);
int __thiscall sub_657A8E60(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_657A8E90(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__thiscall Vector88_PushBack(int *this, int a2);
int __thiscall sub_657A8FA0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_657A9010(int *this, _BYTE *a2, unsigned int a3, _BYTE *a4);
int __thiscall sub_657A9350(int *this, int a2, unsigned int a3, int a4);
int *__thiscall Packet_ID_FACTION_listB_entry_init(int *this);
void __thiscall Packet_ID_FACTION_read_listB_entry(char *this, unsigned int *a2);
int __thiscall Packet_ID_FACTION_listC_insert(_DWORD *this, int a2);
_DWORD *__thiscall Vector68_Insert(int *this, _DWORD *a2, _BYTE *a3, _BYTE *a4);
_DWORD *__thiscall Vector88_InsertAlt(int *this, _DWORD *a2, int a3, int a4);
void __thiscall Packet_ID_FACTION_read_listC(_DWORD *this, unsigned int *a2);
_BYTE *__thiscall Vector68_PushBack(int *this, _BYTE *a2);
_DWORD *__thiscall Vector88_PushBack2(int *this, int a2);
int __cdecl sub_657A9BF0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
void __thiscall Packet_ID_FACTION_read_listA(char *this, unsigned int *a2);
void __thiscall Packet_ID_FACTION_read_block_17BC(int *this, unsigned int *a2);
int __thiscall sub_657AA3E0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall Packet_ID_FACTION_listB_insert(_DWORD *this, int a2);
void __cdecl SendPacket_Faction(int a1, int a2);
int __stdcall WorldMap_ShowTooltip(int a1, unsigned int a2);
void __thiscall Packet_ID_FACTION_read_listB(_DWORD *this, unsigned int *a2);
int __thiscall sub_657AACE0(_DWORD, _DWORD); // weak
// char __userpurge Packet_ID_FACTION_read@<al>(char *a1@<ecx>, int a2@<esi>, int a3);
char *__thiscall Packet_ID_152_Ctor(char *this);
bool __thiscall Read_u64c(unsigned int *this, char *a2);
int __thiscall sub_657AB6C0(_DWORD); // weak
char __thiscall Packet_ID_A6_read(int this, int a2);
int __thiscall sub_657ABBA0(_DWORD, _DWORD); // weak
LONG __stdcall SharedMem_SetCraftingFlag(unsigned __int8 a1);
void __thiscall CraftingUI_HandleItemUpdate(unsigned __int16 *this, _WORD *a2);
char *__thiscall Packet_ID_146_Ctor(char *this);
char __thiscall Packet_ID_BACKPACK_CONTENTS_read(int this, int a2);
int __thiscall Packet_ID_146_Dtor(int *this);
int __thiscall sub_657AC7E0(_DWORD); // weak
void __thiscall CraftingMgr_UpdateRecipe(int this, int a2);
int __thiscall CraftingMgr_NotifyUpdate(void *this);
char *__thiscall Packet_ID_151_Ctor(char *this);
int __thiscall sub_657AD2A0(_DWORD); // weak
char __thiscall Packet_ID_FRIENDS_read(int this, int a2);
void __thiscall RewardUI_DisplayItems(int *this, int a2);
char *__thiscall BuffSlots_FindByTypeId(_DWORD *this, int a2);
void __cdecl __noreturn Vector8_ThrowLengthError(int a1, int a2);
void *__cdecl SafeNew8Array_CheckOverflow(unsigned int a1);
int __thiscall ItemStatList_GetByIndex(_DWORD *this, unsigned int a2);
int __thiscall ItemStatList_FindById(_DWORD *this, char a2);
char __thiscall Buff_ReduceDurationPercent(int this, unsigned __int16 a2);
char __thiscall BuffSlots_UpdateFromSource(_DWORD *this, int a2, int a3);
char __thiscall BuffSlots_RemoveAndClear(_DWORD *this, int a2, char *a3);
int __thiscall sub_657AE350(_DWORD); // weak
void __thiscall DynamicArray_Free(int this);
double __cdecl Float_Ceil(float a1);
int __thiscall sub_657B20E0(_DWORD); // weak
int __thiscall sub_657B3550(_DWORD, _DWORD); // weak
int __thiscall sub_657B3E70(_DWORD); // weak
int __thiscall sub_657B4000(_DWORD, _DWORD); // weak
int __thiscall sub_657B4430(_DWORD, _DWORD); // weak
int __thiscall sub_657B49A0(_DWORD); // weak
unsigned int __thiscall Packet_ID_B1_read_entryC(char *this, unsigned int *a2);
bool __thiscall Packet_ID_B1_read_entryB(char *this, unsigned int *a2);
int __thiscall sub_657B5760(_DWORD, _DWORD); // weak
char __thiscall Packet_ID_B1_read_entryA_list(void *this, unsigned int *a2);
int __thiscall Packet_ID_B1_read_entryA(void *, int); // idb
int __thiscall sub_657B5990(_DWORD, _DWORD); // weak
char __thiscall Packet_ID_B1_read_listB(void *this, unsigned int *a2);
int __thiscall sub_657B6120(_DWORD, _DWORD); // weak
int __thiscall sub_657B65D0(_DWORD); // weak
int __thiscall sub_657B6FD0(_DWORD, _DWORD, _DWORD); // weak
void __thiscall Packet_ID_B1_read_listA(char *this, unsigned int *a2);
char __thiscall Packet_ID_B1_read(int this, int a2);
int __thiscall sub_657B7E40(_DWORD); // weak
int __thiscall sub_657BAC40(_DWORD); // weak
int __thiscall ClientObject_SpawnEffect(_DWORD *this);
int __thiscall sub_657BC3A0(_DWORD); // weak
void __thiscall Equipment_ValidateAndDisplay(char *this);
const void *__thiscall PlayerInfo_LoadFromLTClient(int this);
int __thiscall sub_657BE410(int *this, int a2, int a3);
int __stdcall sub_657BE440(int a1, int a2, int a3);
int __stdcall sub_657BE620(_DWORD); // weak
int __thiscall Animation_SetFrame(int *this, int a2, int a3, int a4);
BOOL __thiscall ItemList_RemoveAt2(int *this, int a1);
int __thiscall sub_657C01C0(_DWORD); // weak
LONG __stdcall SharedMem_SetFlag_0x94(unsigned __int8 a1);
int __thiscall sub_657C08A0(_DWORD); // weak
char __stdcall sub_657C12B0(char *FileName, char *Buffer, _BYTE *Buffera, _BYTE *a4, _BYTE *a5);
char __stdcall SaveFileWithStrings(char *FileName, void *Buffer, WorldLoginReturnAddrPacked ElementCount, const char *a4, const char *a5);
int __thiscall sub_657C1730(_DWORD); // weak
int __stdcall sub_657C1760(char *Source); // idb
char __thiscall sub_657C18F0(_BYTE *this, int a2);
int __thiscall Mailbox_LoadInbox(unsigned int *this);
int __thiscall sub_657C26C0(_DWORD); // weak
int __thiscall sub_657C5070(_DWORD); // weak
int __thiscall QuestState_Initialize(_BYTE *this);
void __cdecl __noreturn Vector_ThrowLengthError_v2(int a1, int a2);
void __cdecl __noreturn Vector_ThrowLengthError_v3(int a1, int a2);
void __cdecl __noreturn Vector_ThrowLengthError_v4(int a1, int a2);
void *__cdecl SafeNew36Array_CheckOverflow(unsigned int a1);
void *__cdecl Vector44_AllocateChecked(unsigned int a1);
void *__cdecl Vector8_AllocateChecked2(unsigned int a1);
int __cdecl sub_657C63A0(_DWORD, _DWORD, _DWORD); // weak
char *__thiscall sub_657C6430(unsigned __int16 *this, char *a2);
int __thiscall sub_657C6650(_DWORD, _DWORD); // weak
char *__thiscall sub_657C67A0(int this, char *a2);
int __thiscall sub_657C6810(_DWORD, _DWORD); // weak
char *__thiscall sub_657C68F0(_DWORD *this, char *a2);
int __thiscall sub_657C69C0(_DWORD, _DWORD); // weak
int __thiscall sub_657C6A40(char *this, int a2);
char *__thiscall sub_657C6A70(char *this, char *a2);
char *__thiscall sub_657C6B20(char *this, char *a2);
char __thiscall Packet_ID_AC_write(int this);
int __thiscall sub_657C70A0(_DWORD, _DWORD); // weak
_DWORD *__thiscall Array12_EraseAndShift(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int __thiscall sub_657C7970(_DWORD); // weak
void __thiscall sub_657C79C0(void **this);
int __thiscall Packet_ID_AC_dtor(char *this);
int __thiscall sub_657C7B70(_DWORD); // weak
void __thiscall sub_657C7D60(void *); // idb
char *__thiscall Packet_ID_MARKET_ctor(char *this);
char *__cdecl Array36_FillWithValue2(char *a1, char *a2, const void *a3);
char *__cdecl sub_657C85C0(char *a1, char *a2, const void *a3);
char *__cdecl sub_657C8720(char *a1, char *a2, char *a3);
char *__cdecl sub_657C8760(char *a1, char *a2, char *a3);
unsigned int __thiscall Packet_ID_MARKET_read_structB(char *this, unsigned int *a2);
bool __thiscall ItemStructAPlus_u32_u16_u32_read(char *this, unsigned int *a2);
bool __thiscall Packet_ID_MARKET_read_structC(char *this, unsigned int *a2);
unsigned int __thiscall Packet_ID_MARKET_read_structC2(char *this, unsigned int *a2);
char *__cdecl sub_657C8B10(char *a1, char *a2, char *a3);
char *__cdecl sub_657C8B40(char *a1, char *a2, char *a3);
// char *__usercall sub_657C8BA0@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
// char *__usercall sub_657C8BD0@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
int __cdecl sub_657C8C00(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
char *__stdcall sub_657C8DE0(char *a1, int a2, char *a3);
char *__stdcall sub_657C8E20(char *a1, int a2, char *a3);
char *__stdcall sub_657C8F30(char *a1, char *a2, char *a3);
char *__stdcall sub_657C8F60(char *a1, char *a2, char *a3);
int __thiscall Vector36_InsertRange(int this, char *a2, unsigned int a3, char *a4);
char *__thiscall Vector44_InsertRange(int this, char *a2, unsigned int a3, char *a4);
_DWORD *__thiscall sub_657C96F0(_DWORD *this, _DWORD *a2, char *a3, char *a4);
_DWORD *__thiscall sub_657C9760(_DWORD *this, _DWORD *a2, char *a3, char *a4);
int __thiscall sub_657C97C0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
char *__thiscall sub_657C9850(char **this, char *a2);
char *__thiscall sub_657C98E0(char **this, char *a2);
int __thiscall sub_657C9970(_DWORD *this, int a2);
char *__thiscall Packet_ID_MARKET_read_listC(char *this, unsigned int *a2);
unsigned __int8 __thiscall Packet_ID_MARKET_read_listB(char **this, unsigned int *a2);
unsigned int __thiscall Packet_ID_MARKET_read_block(_DWORD *this, unsigned int *a2);
unsigned int __thiscall Packet_ID_MARKET_read_block6(_DWORD *this, unsigned int *a2);
char __thiscall Packet_ID_MARKET_read(int this, int a2);
int __thiscall sub_657CA680(_DWORD); // weak
LONG __thiscall sub_657CC060(int this, char *Destination, WorldLoginReturnAddrPacked Count);
void __thiscall sub_657CC080(int this);
void __thiscall sub_657CC0F0(int *this);
int __thiscall sub_657CC120(_DWORD, _DWORD); // weak
int __thiscall sub_657CC2A0(_DWORD, _DWORD); // weak
int __stdcall sub_657CC330(char *Source, int); // idb
void __thiscall sub_657CC400(_DWORD *this);
int __thiscall sub_657CC6F0(int this);
int __thiscall sub_657CC7B0(_DWORD, _DWORD); // weak
int __thiscall Packet_ID_P2P_CtorWrapper(void *this);
// int __usercall Packet_ID_PLAYER2PLAYER_ctor@<eax>(int a1@<ecx>, int a2@<ebp>);
char __thiscall Packet_ID_PLAYER2PLAYER_read(int this, int a2);
char __thiscall Packet_ID_PLAYER2PLAYER_write(int this);
int __thiscall sub_657CCB70(_DWORD); // weak
int __thiscall sub_657CD1D0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall TradeUI_CopyTradeData(int this, int a2);
int __thiscall CharacterWindow_OnClose(int *this, char a2, char a3);
int __thiscall sub_657CE040(_DWORD, _DWORD); // weak
int __thiscall sub_657CE140(_DWORD, _DWORD); // weak
int __thiscall sub_657CE260(_DWORD, _DWORD); // weak
int __thiscall sub_657CE3D0(_DWORD, _DWORD); // weak
int __stdcall sub_657CEBE0(_DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_657CEC60(_DWORD, _DWORD, _DWORD); // weak
int __stdcall sub_657CEE40(int a1, int a2);
BOOL __stdcall sub_657CEE60(int a1);
int __thiscall ListWindow_PopulateFromDataSource(int *this, int a2, int a3);
int __thiscall sub_657CF730(_DWORD); // weak
int __thiscall ListWindow_PopulateFromDataSource_Alt(int *this, int a2, int a3);
int __thiscall sub_657CFE90(_DWORD); // weak
int __thiscall sub_657D0800(_DWORD); // weak
int __thiscall sub_657D0930(_DWORD); // weak
int __thiscall DialogUI_SetupConfirm(int this, char *Source, int a3, int a4, int a5);
int __stdcall sub_657D1480(char *Source, int, int, int, int, float); // idb
int __thiscall DialogUI_SetupWithOptions(int this, float a2, char *Source, char *a4, int a5, int a6);
int __thiscall sub_657D26D0(_DWORD); // weak
int __thiscall sub_657D3B10(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_657D3B90(_DWORD); // weak
char *__thiscall Bitmask24_WriteToStream(char *this, char *a2);
char *__thiscall UInt16Array6_WriteCompressed(unsigned __int16 *this, char *a2);
char *__thiscall Playerfile_Write(char *this, char *a2);
char __thiscall Packet_ID_DEPLOY_ITEM_write(int this);
int __thiscall sub_657D4310(_DWORD); // weak
int __thiscall Packet_ID_DEPLOY_ITEM_ctor(_DWORD); // weak
_DWORD *__thiscall Read_6x4BitFlags(bool *this, _DWORD *a2);
char __thiscall Read_u16c_x6(char *this, unsigned int *a2);
char __thiscall Packet_ID_A5_read_struct1(char *this, unsigned int *a2);
void **__thiscall Packet_ID_DEPLOY_ITEM_dtor(void **this, char a2);
char __thiscall Packet_ID_DEPLOY_ITEM_read(int this, int a2);
void __thiscall DialogUI_ClearText(int *this);
int __thiscall WindowMgr_SelectAndNotify_44(int *this);
int __thiscall sub_657D5C90(_DWORD, _DWORD); // weak
char __thiscall sub_657D5CF0(char *this, _BYTE *a2);
char __thiscall sub_657D5D60(_BYTE *this, char a2);
void __stdcall SharedMem_WritePlayerBlock(void *Src);
int __thiscall sub_657D7190(_DWORD *this, char a2);
bool __thiscall GuildMgr_CheckPermission(_DWORD *this, int a2, int a3);
char __thiscall SkillArray_HasSkillOfType(_DWORD *this, int a2);
_DWORD *__cdecl DwordArray_CopyRange(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __thiscall sub_657D9D20(int this);
void __thiscall GuildMemberList_Refresh(_DWORD *this);
int __thiscall CharacterPreview_ApplyData(_DWORD **this, int *a2);
void __thiscall GuildMemberList_RefreshWithActions(int *this);
// void __usercall sub_657DEEA0(int a1@<ecx>, int a2@<esi>);
int __thiscall sub_657DF560(int this);
void __thiscall sub_657DFB30(_DWORD *this);
char **__thiscall Vector372_EraseOne(char **this, char **a2, char *a3);
_DWORD *__thiscall sub_657DFFE0(char **this, _DWORD *a2, char *a3);
void __thiscall GuildMgr_ToggleRankFlag(_BYTE *this, int a2, char a3);
void __thiscall GuildNotes_SetMemberNote(char *this, char a2, char *Source);
void __thiscall GuildMgr_RemoveMemberByIndex(char *this, char a2);
void __thiscall GuildMgr_TransferBankPoints(char *this, unsigned int a2, char a3, char a4);
void __thiscall GuildMgr_AddMemberBankPoints(char *this, char a2, int a3);
_DWORD *__thiscall sub_657E0460(char **this, _DWORD *a2, char *a3);
int __thiscall GuildUI_ClearSelectedMember(_DWORD *this);
int __thiscall PlayerList_FindAndSelect(char **this, int a2);
char __thiscall Vector320_FindAndRemoveById(char **this, int a2);
void __thiscall CharWindow_RefreshList(char *this);
void __thiscall CharWindow_SelectPlayer(char **this, int a2);
_BYTE *__thiscall Widget_ForwardInputEvent(void *this, _BYTE *a2, _BYTE *a3, _BYTE *a4);
int *__thiscall Vector68_Assign(int *this, int *a2);
int __thiscall sub_657E8DC0(_DWORD); // weak
int __thiscall sub_657E9880(_DWORD, _DWORD); // weak
void __thiscall ItemWindow_OnConfirm(_DWORD *this);
int __thiscall sub_657EE7E0(_DWORD); // weak
char __thiscall TradeWindow_SetState(int this, int a2, char a3, char a4, char a5);
int __thiscall sub_657EF530(_DWORD); // weak
int __thiscall Widget_SendMessage5(void *this);
int __thiscall sub_657EFE50(_DWORD); // weak
void __thiscall FriendListUI_PopulateList(int *this, int a2);
void __thiscall ChatInput_SetNameAndFocus(int this, char *Source, int a3);
void __thiscall FriendListUI_ClearAll(int *this);
int __thiscall ChatInput_ClearAndReset(void *this);
int __thiscall sub_657F0DE0(_DWORD); // weak
int __thiscall sub_657F0F00(_DWORD); // weak
int __thiscall sub_657F11B0(_DWORD, _DWORD); // weak
int __thiscall sub_657F1250(_DWORD); // weak
int __thiscall sub_657F12E0(_DWORD); // weak
int __thiscall sub_657F2710(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_657F2910(_DWORD, _DWORD); // weak
int __thiscall sub_657F29B0(_DWORD); // weak
int __thiscall sub_657F2C50(_DWORD); // weak
int __thiscall MsgId_88_WindowClose(_BYTE *this, char a2);
int __thiscall sub_657F42B0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
void __thiscall sub_657F46B0(int *this, int a2);
_DWORD *__cdecl sub_657F4CD0(_DWORD *a1, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int __thiscall sub_657F4F40(_DWORD); // weak
void __thiscall HintSystem_TriggerHint(void *this, int a2);
void __thiscall WindowMgr_HandleWindowSwitch(void *this, int a1);
int __thiscall sub_657F57B0(_DWORD); // weak
int __stdcall sub_657F5B10(int, char *); // idb
__time64_t __thiscall UiTimer_SetTextAndDelay(_QWORD *this, char *a2);
int __thiscall sub_657F6560(_DWORD); // weak
int __thiscall sub_657F66C0(_DWORD, _DWORD); // weak
int __thiscall sub_657F7A10(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_657F7C40(_DWORD); // weak
int __thiscall MsgId_86_WindowClose(void *this);
int __thiscall PopupUI_ShowMessage(int this, int a2, char *a3);
void __cdecl __noreturn Vector76_ThrowLengthError(int a1, int a2);
void __cdecl __noreturn sub_657F89C0(int a1, int a2);
int __cdecl RBTree_FindLeftmost(int a1);
_DWORD *__cdecl RBTree_FindRightmost(_DWORD *a1);
void *__cdecl SafeNew76Array_CheckOverflow(unsigned int a1);
void *__cdecl sub_657F8BD0(unsigned int a1);
int __thiscall sub_657F8E90(_DWORD); // weak
_DWORD *__thiscall RBTree_RotateLeft2(_DWORD *this, int a2);
int __thiscall RBTree_RotateRight2(_DWORD *this, _DWORD *a2);
int *__thiscall RBTree_Iterator_Increment(int **this);
int __cdecl sub_657F9760(_DWORD, _DWORD, _DWORD); // weak
char *__cdecl Array76_CopyRange(char *a1, char *a2, char *a3);
int __thiscall sub_657F9EE0(_DWORD, _DWORD); // weak
_DWORD *__stdcall sub_657F9FB0(int a1, int a2, int a3, _DWORD *a4, char a5);
_DWORD *RBTreeNode48_Alloc();
int __thiscall sub_657FA480(_DWORD, _DWORD, _DWORD, _DWORD); // weak
void __stdcall RBTree_DeleteNodes_Recursive(void **a1);
_DWORD *__thiscall RBTree_Erase(_DWORD *this, _DWORD *a2, int a3);
int __stdcall sub_657FB270(_DWORD, _DWORD); // weak
int **__thiscall RBTree_ClearRange(int ***this, int **a2, int *a3, int *a4);
int __thiscall sub_657FB7E0(_DWORD); // weak
char **__thiscall Vector76_MoveElements(char **this, char **a2, char *a3, char *a4);
int __thiscall sub_657FB870(_DWORD); // weak
int *__thiscall sub_657FB8A0(int ***this, int a2);
int __thiscall sub_657FBA50(int this, unsigned int a2);
int __thiscall StringMap_Clear(int this);
_DWORD *__thiscall CharacterSlot_ResetFields(_BYTE *this);
int __thiscall StringMap_Clear2(int this);
void __thiscall CharacterSlot_FreeAll(int this);
_DWORD *__thiscall StringMap_Init(_DWORD *this);
int __thiscall CharacterSlot_Init(int this);
char *__thiscall CharacterData_CopyFrom(char *this, int a2);
char *__cdecl CharSlotVector_CopyRange(int a1, int a2, char *a3);
void __stdcall sub_657FC130(int a1, int a2);
char **__thiscall CharSlotVector_EraseAndDestroy(int *this, char **a2, char *a3, char *a4);
int __thiscall sub_657FC1D0(_DWORD); // weak
char **__thiscall CharSlotEntry_InitDefaults(_BYTE *this);
char *__thiscall CharSlotVector_Init(char *this);
int __thiscall SkillSlot_InitDefaults(int this);
int __thiscall ItemSlotEntry_Init(_DWORD *this);
int __thiscall RBTreeIter_Decrement(int **this);
int __thiscall EquipSlotEntry_Init(int this);
char *__cdecl Array76_FillCopy(char *a1, char *a2, const void *a3);
int __cdecl sub_657FCA40(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall Packet_ID_B5_read_entry2_subA(char *this, unsigned int *a2);
char *__cdecl Array76_CopyBackward(char *a1, char *a2, char *a3);
// char *__usercall Vector76_FillN@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
int *__thiscall RBTree_InsertAndBalance(int **this, int *a2, char a3, int *a4, _DWORD *a5);
int __thiscall RBTree_InsertUnique(int **this, int a2, int *a3);
int *__thiscall RBTree_InsertHint(int **this, int *a2, int *a3, int *a4);
char *__stdcall Vector76_FillNWrapper(char *a1, int a2, char *a3);
int *__thiscall Packet_ID_B5_entry2_map_get_or_insert(int **this, unsigned int *a2);
_DWORD *__thiscall sub_657FD270(_DWORD *this, int a2);
char *__stdcall Array76_CopyRangeWrapper(char *a1, char *a2, char *a3);
char __thiscall Packet_ID_B5_read_entry2_map(int **this, unsigned int *a2);
char *__thiscall Vector76_InsertAt(int this, char *a2, unsigned int a3, char *a4);
int __thiscall sub_657FD680(int this, int a2);
_DWORD *__thiscall Vector76_InsertSingle(_DWORD *this, _DWORD *a2, char *a3, char *a4);
char *__thiscall Vector76_PushBack(char **this, char *a2);
int __cdecl sub_657FD840(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
char *__thiscall Packet_ID_B5_read_entry2(char *this, unsigned int *a2);
_DWORD *__thiscall CharacterData2324_CopyCtor(_DWORD *this, int a2);
char *__cdecl sub_657FDCB0(char *a1, char *a2, int a3);
int __cdecl sub_657FDCE0(int a1, int a2, int a3);
_DWORD *__cdecl sub_657FDD30(int a1, int a2, _DWORD *a3);
_DWORD *__cdecl CharSlot2324_InitRange(_DWORD *a1, int a2, int a3);
_DWORD *__stdcall sub_657FDF20(_DWORD *a1, int a2, int a3);
_DWORD *__stdcall sub_657FDF90(int a1, int a2, _DWORD *a3);
void __thiscall Vector2324_InsertRange(int *this, char *a2, unsigned int a3, int a4);
_DWORD *__thiscall Vector2324_InsertSingle(int *this, _DWORD *a2, char *a3, int a4);
_DWORD *__thiscall Vector2324_PushBack(int *this, int a2);
void __thiscall Packet_ID_B5_read_entry_list(int *this, unsigned int *a2);
void __thiscall Packet_ID_B5_read_entry(char *this, unsigned int *a2);
LONG __thiscall LoginWindow_GetCharNameField(int this, char *Destination, WorldLoginReturnAddrPacked Count);
void __thiscall TradeWindow_ClearItemSlot(int this);
int __thiscall sub_657FFE50(_DWORD); // weak
int sub_657FFF80(void); // weak
_DWORD *__thiscall CWindowInventory_PositionRelative(_DWORD *this);
int __thiscall VTable_CallMethod16(void *this);
int __stdcall AlwaysReturnOne(int a1);
int __thiscall Widget_CallMethod108(_DWORD *this, int a2);
void *__thiscall CWindowInventory_dtor(void *this, char a2);
int __thiscall sub_658002E0(_DWORD); // weak
unsigned __int8 __thiscall PlayerStatsUi_UpdateStatText(_DWORD *this);
_DWORD *LinkedListNode_Alloc56();
void __thiscall LinkedList_DestroyAll(int this);
_DWORD *__thiscall LinkedList_Init(_DWORD *this);
int __thiscall sub_658008D0(_DWORD); // weak
int __thiscall CWindowInventory_OnCommand(_DWORD *this, int a2, int a3, int a4);
int __thiscall CWindowInventory_OnOpen(int this, int a2);
int __thiscall CWindowInventory_InitUI(int this);
int __thiscall sub_658046B0(_DWORD); // weak
void __thiscall StatWindow_SetPercentValue(int *this, int a2, unsigned int __saved_registers, int __return_address);
int __thiscall sub_65804F50(_DWORD); // weak
int __thiscall sub_65805480(_DWORD); // weak
_DWORD *__thiscall LoginField_ApplyString(int *this, int a2, int a3);
_WORD *__thiscall SystemAddress_Copy(_WORD *this, int a2);
void __cdecl __noreturn Vector60_ThrowLengthError(int a1, int a2);
void *__cdecl SafeNew60Array_CheckOverflow(unsigned int a1);
char __thiscall Vector60_Reserve(_DWORD *this, unsigned int a2);
int __thiscall sub_65805F40(_DWORD); // weak
_BYTE *__cdecl sub_65806050(_BYTE *a1, _BYTE *a2, _BYTE *a3);
void __cdecl Vector60_DestroyRange(int a1, int a2);
_BYTE *__cdecl Vector60_FilterDefault(_BYTE *a1, _BYTE *a2, _BYTE *a3);
void __stdcall Vector60_DestroyWrapper(int a1, int a2);
void __thiscall Vector60_Compact(int *this);
int __thiscall Packet_ID_7B_Dtor(_DWORD *this);
int __thiscall Packet_ID_7B_Sub6List_Init(_DWORD); // weak
char *__thiscall Packet_ID_WORLD_SELECT_Ctor(char *this);
char __thiscall Packet_ID_WORLD_SELECT_Read(int this, int payload);
_DWORD *__thiscall sub_65806F70(_DWORD *this);
int __cdecl sub_65807040(_DWORD); // weak
int __thiscall WindowMgr_CloseAllInputFocused(_BYTE **this);
int __thiscall WindowMgr_SetFocusWindow(_DWORD *this, _DWORD *a2, int a3);
int __thiscall CWindowMgr_GetWindowById(_DWORD *this, unsigned int a2);
int __thiscall sub_65807710(int *this);
int __thiscall sub_658079C0(_DWORD **this);
int __thiscall CWindowMgr_GetCachedWindowById(_DWORD *this, int a2);
void __thiscall sub_65807A00(_DWORD *this, unsigned int a2);
int __thiscall sub_65808BA0(_DWORD *this);
int __thiscall sub_65808BD0(_DWORD *this);
int __thiscall sub_65808CF0(_DWORD *this);
int __thiscall sub_65808D40(_DWORD *this);
int __thiscall sub_65808D60(_DWORD, _DWORD); // weak
int __thiscall sub_65808D90(_DWORD *this);
void __thiscall sub_65808DC0(int *this);
int __thiscall sub_65808F10(_DWORD *this);
int __thiscall LoginField_QueueUpdate(int **this, int a2, int a3, int a4, int a5);
int __thiscall sub_65809040(_DWORD *this);
int __thiscall sub_65809060(int *this, char *Source, int a3, int a4, int a5, int a6, float a7);
int __thiscall TooltipMgr_ShowItemTooltip(int *this, float a2, char *Source, char *a4, int a5, int a6);
int __thiscall sub_658092A0(unsigned __int16 *this);
BOOL __thiscall sub_658092D0(unsigned __int16 *this);
bool __thiscall sub_65809300(unsigned __int16 *this);
char __thiscall SetByte29(_BYTE *this, char a2);
int __thiscall Item_GetAmmoItemIdOrTemplate(unsigned __int16 *this);
double __thiscall Item_GetDurabilityPercent(unsigned __int16 *this);
int __thiscall EquipSlotsWindow_ClearAll(_DWORD *this);
int GetWindow35();
int __thiscall EquipSlotsWindow_RefreshSlots(_BYTE **this);
_BYTE *__thiscall sub_65809C00(_DWORD *this, unsigned int a2);
int __thiscall sub_65809C80(int *this, int a2);
int __thiscall sub_65809DE0(int *this, int a2, _DWORD *a3, int a4, int a5, int a6);
int __thiscall sub_6580A0B0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6580A1B0(int *this, int a2, _DWORD *a3);
int __thiscall TooltipMgr_ShowTextTooltip(int *this, char *Source, int a3, int a4, int a5, char a6);
BOOL __thiscall sub_6580A460(int this, int a2);
BOOL __thiscall sub_6580A4D0(int this, int a2);
char *__thiscall Packet_Unknown0_Ctor(char *this);
char *__thiscall sub_6580A6A0(char *this);
int sub_6580A970(void); // weak
int __thiscall WindowMgr_ShowWindowById(int *this, unsigned int a2);
_BYTE *__thiscall InventoryWindow_ShowPopup(int *this, char *a2);
BOOL __thiscall InventoryWindow_HandleItemByType(void *this, unsigned __int16 *a2);
char __thiscall Packet_ID_MERGE_ITEMS_read(int this, int a2);
char __thiscall Packet_ID_ItemSwap_Write(int this);
char __thiscall Packet_ID_SPLIT_CONTAINER_read(int this, int a2);
char __thiscall Packet_ID_ItemSplit_Write(int this);
int __thiscall sub_6580AEC0(int *this);
void __cdecl InventoryMgr_SendSplitRequest(int a1, int a2);
void __stdcall InventoryUI_HandleDropItem(_DWORD *a1);
void __cdecl sub_6580B260(int a1, int a2);
void __cdecl sub_6580B3C0(int a1, int a2);
void __thiscall sub_6580B500(int *this, int a2);
void __stdcall sub_6580B6B0(int a1);
void __stdcall sub_6580B980(int a1, int *a2);
int __stdcall BuildItemTooltip(unsigned __int16 *a1);
unsigned __int8 __thiscall MineralScanner_UpdateTextPosition(int *this);
int __thiscall sub_6580EA40(_DWORD); // weak
void __thiscall CWindowMineralScanner_Dtor(void **this);
_DWORD *__thiscall CWindowMineralScanner_PositionRelative(_DWORD *this);
int __thiscall CWindowMineralScanner_OnUpdate(char *this, int a2);
void __cdecl __noreturn Vector8_ThrowLengthError_v2(int a1, int a2);
void *__cdecl SafeNew8Array_CheckOverflow_v2(unsigned int a1);
void **__thiscall CWindowMineralScanner_dtor(void **this, char a2);
int __cdecl sub_6580EE30(_DWORD, _DWORD); // weak
int __thiscall CWindowMineralScanner_InitUI(_DWORD *this);
char *__thiscall ItemSlotPair_WriteCompressed(unsigned __int16 *this, char *a2);
char *__thiscall ItemSlotArray_WriteToStream(_DWORD *this, char *a2);
char __thiscall Packet_ID_MINING_write(int this);
int __thiscall Packet_ID_MINING_free(void **this);
char __thiscall CraftingWindow_PopulateItemList(void (__fastcall ***this)(char **));
char *__thiscall Packet_ID_MINING_Ctor(char *this);
_DWORD *__cdecl Array8_FillRange(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl Array8_CopyRange(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl Array8_CopyBackward(int a1, int a2, _DWORD *a3);
void __cdecl Vector8_FillN(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__stdcall Vector8_FillNWrapper(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__stdcall Array8_CopyRangeWrapper(_DWORD *a1, _DWORD *a2, _DWORD *a3);
void __thiscall Vector8_InsertAt(int this, char *a2, unsigned int a3, int *a4);
int __thiscall CWindowMineralScanner_OnCommand(int *this, int a2, int a3, int a4);
char __thiscall Packet_ID_MINING_read_list(char **this, unsigned int *a2);
char __thiscall Packet_ID_MINING_read(int this, int a2);
int __thiscall sub_65810350(_DWORD); // weak
int __stdcall sub_65810E60(int, int, unsigned int Value, int, int); // idb
int __cdecl sub_65811B10(_DWORD, _DWORD); // weak
char *__cdecl Array224_CopyRange(char *a1, char *a2, char *a3);
// char *__usercall Array224_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
void __thiscall SoundDefPool_FreeAll(int this);
void __thiscall sub_658153D0(int this, unsigned int a2);
char **__thiscall sub_65815540(char **this, char **a2, char *a3, char *a4);
int __thiscall sub_65815590(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__thiscall sub_65815870(_DWORD *this);
void __thiscall QuestEntry_FreeBuffers(int this);
void __thiscall QuestPool_AllocEntry224(_DWORD *this, const void *a2);
_DWORD *__thiscall sub_65815C30(_DWORD *this, _DWORD *a2, int a3, int a4);
void __thiscall sub_65815EF0(int this);
char **__thiscall QuestEntry_Reset(_DWORD *this);
char *__thiscall Vector224_PushBack(char **this, char *a2);
char *__thiscall sub_65816310(void *this);
int __thiscall QuestEntry_Init(int this);
int __thiscall sub_658166D0(_DWORD); // weak
char **__thiscall QuestEntry_Clear(char **this);
int __stdcall sub_65816930(_DWORD); // weak
int __thiscall sub_65816B30(_DWORD, _DWORD); // weak
int __thiscall sub_658179A0(_DWORD); // weak
int __thiscall sub_65817BB0(_DWORD); // weak
int __thiscall QuestVector_FindById(_DWORD *this, int a2);
bool __thiscall Packet_ID_A9_read_structC(char *this, unsigned int *a2);
int __thiscall Packet_ID_A9_read_structC2(char *this, unsigned int *a2);
bool __thiscall Packet_ID_A9_read_structC3(char *this, unsigned int *a2);
// char *__usercall sub_65818460@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
int __thiscall sub_658187B0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__thiscall sub_65818A60(_DWORD *this, _DWORD *a2, int a3, int a4);
void __thiscall Packet_ID_A9_read_structD_sub_B8(char *this, unsigned int *a2);
char *__thiscall Vector96_PushBack(char **this, char *a2);
int __thiscall sub_65818C70(_DWORD, _DWORD); // weak
unsigned __int8 __thiscall Packet_ID_A9_read_structD_sub_F8(char *this, unsigned int *a2);
char __thiscall Packet_ID_A9_read_structD_sub_10C(char **this, unsigned int *a2);
void __thiscall Packet_ID_A9_read_structD(bool *this, unsigned int *a2);
bool __thiscall Packet_ID_A9_read_structA(char *this, unsigned int *a2);
int __thiscall sub_658194C0(_DWORD, _DWORD); // weak
int __cdecl sub_658195E0(int a1, int a2, int a3);
int __cdecl sub_65819A00(int a1, int a2, int a3);
int __thiscall sub_65819BE0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__thiscall sub_65819F70(_DWORD *this, _DWORD *a2, int a3, int a4);
_DWORD *__thiscall Vector236_PushBack(int *this, int a2);
int __thiscall sub_6581A0A0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
void __thiscall Packet_ID_A9_read_structA_list(int *this, unsigned int *a2);
_DWORD *__thiscall sub_6581A6B0(_DWORD *this, _DWORD *a2, int a3, int a4);
_DWORD *__thiscall Vector284_PushBack(int *this, int a2);
void __thiscall Packet_ID_A9_read_structD_list(char *this, unsigned int *a2);
char __thiscall Packet_ID_A9_read(int this, int a2);
void __thiscall CraftWindow_OnClickConfirm(_DWORD *this);
int __thiscall CraftWindow_OnClickCancel(_BYTE *this);
char __thiscall sub_6581B390(_DWORD *this, int a2);
int __thiscall sub_6581B980(_DWORD); // weak
void __thiscall sub_6581BC90(int this);
int __thiscall sub_6581BF80(_DWORD); // weak
int __thiscall sub_6581C030(_DWORD); // weak
int __thiscall sub_6581C1B0(_DWORD); // weak
int __thiscall sub_6581C2A0(_DWORD); // weak
int __stdcall sub_6581DE00(int, char *Source); // idb
void __thiscall sub_6581DFB0(int this, _DWORD *a2, int a3, int a4, int a5);
int __thiscall sub_6581E550(_DWORD, _DWORD, _DWORD); // weak
void __thiscall CraftWindow_StartCrafting(int this);
void __thiscall CraftWindow_BeginProduction(int this);
void __thiscall CraftWindow_OnRecipeSelect(int this, int a2);
int __thiscall sub_6581EC00(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6581F170(_DWORD); // weak
int __thiscall sub_65820610(_DWORD, _DWORD); // weak
int __thiscall sub_65820DD0(_DWORD); // weak
char __thiscall SetByte6408(_BYTE *this, char a2);
int __thiscall sub_65821870(_DWORD); // weak
LONG sub_65822890();
LONG __thiscall SharedMem_WriteWorldInst_0x1EEC2(void *this, unsigned __int8 a2);
void __thiscall sub_65822FF0(int this);
int *__thiscall Sub6Entry_Reset(_DWORD *this);
int __thiscall Sub6Entry_Init(int this);
int __thiscall sub_65823250(_DWORD); // weak
int __thiscall sub_658239A0(_DWORD); // weak
int __stdcall sub_658243B0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65825700(_DWORD, _DWORD); // weak
int __thiscall sub_658258A0(_DWORD); // weak
int __thiscall sub_65825A10(_DWORD, _DWORD); // weak
int __cdecl sub_65825A30(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_65825AC0(_DWORD, _DWORD); // weak
int __thiscall sub_65825BE0(_DWORD); // weak
char __thiscall Packet_ID_B5_read_extra_list_entry(char *this, unsigned int *a2);
char __thiscall Packet_ID_B5_read_extra_list(char **this, unsigned int *a2);
int __thiscall sub_65826390(_DWORD, _DWORD); // weak
char *__thiscall sub_65826460(char *this, int a2);
int __thiscall sub_658265B0(_DWORD, _DWORD); // weak
int __cdecl sub_65826750(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_65826800(_DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_65826830(_DWORD, _DWORD, _DWORD); // weak
char *__cdecl sub_65826860(char *a1, int a2, int a3);
int __thiscall sub_658269A0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65826A10(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65826A40(int this, int a2, unsigned int a3, int a4);
int __thiscall sub_65826D80(_DWORD); // weak
_DWORD *__thiscall sub_65826E60(_DWORD *this, _DWORD *a2, int a3, int a4);
char *__thiscall sub_65827250(char **this, int a2);
void __thiscall Packet_ID_B5_read_list(char **this, unsigned int *a2);
char __thiscall Packet_ID_B5_read(int this, int a2);
void __thiscall sub_65827530(int this, int a2, char *Source);
void __cdecl __noreturn sub_65827880(int a1, int a2);
void *__cdecl sub_65827940(unsigned int a1);
int sub_65827DA0(void); // weak
_WORD *__cdecl sub_65827ED0(_WORD *a1, _WORD *a2, _WORD *a3);
_DWORD *__thiscall sub_65827FD0(_DWORD *this, _DWORD *a2, unsigned int *a3);
char __thiscall sub_65828060(_BYTE *this, char a2);
int __cdecl MoveMemory_Words(void *Source, int a2, int a3); // idb
void __cdecl sub_65828B70(int *a1, int *a2, _DWORD *a3);
int __stdcall CopyMemory_Words(void *Source, int a2, void *Destination); // idb
int __thiscall sub_65828CB0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65828DA0(_DWORD, _DWORD); // weak
int __thiscall sub_658291C0(_DWORD, _DWORD); // weak
int __thiscall ProductionWindow_RefreshList(_DWORD *this);
void __thiscall sub_65829CA0(int this);
_WORD *__stdcall FillWordArray(_WORD *a1, int a2, _WORD *a3);
void __thiscall WordVector_InsertAt(_DWORD *this, char *Source, unsigned int a3, unsigned int a4);
void __thiscall StringMap_Insert(int **this, int a2, int a3);
void __thiscall ProductionWindow_AddToQueue(int **this, int a2, int a3);
_DWORD *__thiscall WordVector_InsertSingle(_DWORD *this, _DWORD *a2, char *Source, unsigned int a4);
unsigned int *__thiscall WordRBTree_Erase(int ***this, unsigned int *a2);
void __thiscall WordVector_PushBack(char **this, _WORD *a2);
unsigned int *__thiscall WordRBTree_EraseByValue(int ***this, unsigned int a2);
int __thiscall sub_6582A2E0(char *this);
void __thiscall sub_6582C170(int this);
void __thiscall ProductionWindow_PopulateTypeList(_DWORD *this);
unsigned __int8 __thiscall ProductionWindow_PopulateResourceList(int this);
unsigned __int8 __thiscall ProductionWindow_PopulateSortList(int this);
unsigned __int8 __thiscall ProductionWindow_PopulateCategoryList(int this);
void __thiscall ProductionWindow_PopulateItemList(int this);
void __thiscall ProductionWindow_PopulateClassList(int this);
void __thiscall ProductionWindow_PopulateAlienList(int this);
int __thiscall ProductionWindow_OnQueueAdd(char **this, int a2, char *a3);
void __thiscall ProductionWindow_RefreshSubList(int this);
void __thiscall sub_6582DDF0(int this);
char __thiscall sub_6582DF90(int this, char a2);
int __thiscall sub_6582E790(_DWORD, _DWORD); // weak
int __thiscall sub_6582EB10(_DWORD); // weak
// int __userpurge sub_6582F451@<eax>(int a1@<ecx>, _BYTE *a2@<ebx>, char a3@<dil>, int a4, int a5, int a6);
void __thiscall sub_65831390(unsigned int **this, _DWORD *a2);
int sub_65831890(void); // weak
int __thiscall sub_658318A0(int this, int a2);
char __thiscall sub_65831940(_BYTE *this, char a2);
int __thiscall sub_65831950(_DWORD *this, int a2);
int __thiscall sub_65831960(int this);
void *__thiscall sub_65831A90(void *this, char a2);
unsigned __int8 __thiscall sub_65831F00(int this);
void __thiscall sub_65831FA0(int this);
void __thiscall sub_65832C20(int *this, int a2, int a3);
void __thiscall BroadcastUI_ShowLevelMessage(float **this, int a2, unsigned __int8 a3);
int __cdecl sub_65833120(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall ItemDropUI_ShowNotification(int this, int a2, float a3);
void __thiscall CharacterSlotEntry_Init(_BYTE *this);
int __thiscall sub_65834450(_DWORD); // weak
int __thiscall sub_65834550(_DWORD, _DWORD); // weak
int __thiscall sub_65834600(_DWORD, _DWORD); // weak
char *sub_65834DA0();
char *sub_65834DB0();
const char *__stdcall sub_65834DC0(int a1);
void __thiscall UIDataSource_GetFormattedString(_DWORD *this, int a2, int a3);
int __thiscall Array12_GetElementAt(_DWORD *this, int a2);
int __thiscall Array12Handle_Release(int *this, int a2, int a3);
int __stdcall Array12_AllocElement(int a1, int a2, int a3);
char __thiscall GuildData_GetMemberInfo(int this, unsigned int a2, int a3);
unsigned __int8 __thiscall OptionsUI_SaveGameSettings(int this);
int __thiscall Array12Handle_SetIndex(int *this, int a2, int a3, int a4);
int __thiscall Array12_InsertAt(unsigned int *this, unsigned int a2, _DWORD *a3, int a4);
int __thiscall sub_65837E80(_DWORD); // weak
BOOL __thiscall sub_6583B460(int this, char a2, int a3, char a4);
_DWORD *__thiscall CharTransferUI_PopulatePlanetList(int this);
int __thiscall CharTransferUI_PopulateSlotList(int this);
_DWORD *__thiscall CharTransferUI_UpdateDisplay(int this, const void *a2, char *a3);
char *__thiscall Packet_ID_PLAYERFILE_ctor(char *this);
int __thiscall sub_6583C2D0(_DWORD); // weak
char __thiscall Packet_ID_PLAYERFILE_read(int this, int a2);
int __thiscall sub_6583C7A0(_DWORD); // weak
errno_t __thiscall Packet_ID_MAIL_entry_fill(_BYTE *this, int a2, char a3, int a4, char *Source, char *a6, char *a7);
int __stdcall sub_6583CB80(_DWORD, _DWORD, _DWORD); // weak
char __thiscall Packet_ID_MAIL_entry_list_contains(_DWORD *this, int a2);
int __cdecl sub_6583D020(_DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_6583D0B0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall Packet_ID_MAIL_write_entry(_BYTE *this, char *a2);
char *__thiscall Packet_ID_MAIL_write_entries(_DWORD *this, char *a2);
char *__thiscall Packet_ID_MAIL_write_idlist(_DWORD *this, char *a2);
char __thiscall Packet_ID_MAIL_write(int this);
int __cdecl sub_6583D3E0(_DWORD, _DWORD, _DWORD); // weak
// char *__usercall Array2120_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
int __thiscall sub_6583D590(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6583D630(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6583D6A0(void **this);
int __thiscall sub_6583D700(int this, int a2, unsigned int a3, const void *a4);
char *__thiscall sub_6583D9A0(char *this);
int __thiscall Packet_ID_MAIL_read_entry(char *this, unsigned int *a2);
_DWORD *__thiscall Vector2120_InsertAndGetPtr(_DWORD *this, _DWORD *a2, int a3, const void *a4);
unsigned __int8 __thiscall Read_Vector_U32_Compressed(int **this, unsigned int *a2);
char *__thiscall Packet_ID_MAIL_entry_list_insert(char **this, void *a2);
char __thiscall Packet_ID_MAIL_entry_list_insert_unique(char **this, int *a2);
unsigned __int8 __thiscall Packet_ID_MAIL_read_entries(char **this, unsigned int *a2);
char __thiscall Packet_ID_MAIL_read(int this, int a2);
int __thiscall CWindowSendMail_OnCommand(_DWORD *this, int a2, int a3, int a4);
int __thiscall sub_6583E2F0(_DWORD); // weak
char __cdecl sub_6583E6D0(int a1, char __saved_registers, int __return_address);
void __cdecl __noreturn sub_6583E940(int a1, int a2);
void *__cdecl SafeNew20Array_CheckOverflow(unsigned int a1);
_DWORD *__cdecl Array20_CopyRange(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __thiscall sub_6583EBD0(_DWORD); // weak
_DWORD *__thiscall TeamUI_UpdatePlayerList(int **this);
void __thiscall TeamUI_ShowTeamMessage(int **this, int a2, unsigned __int8 a3);
_DWORD *__cdecl sub_6583F9A0(_DWORD *a1, _DWORD *a2, _DWORD *a3);
void __thiscall TeamUI_UpdateMemberInfo(int *this, int a2);
char __thiscall sub_658400F0(_DWORD *this, unsigned int a2);
_DWORD *__cdecl CopyArray20(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__stdcall sub_65840350(_DWORD *a1, _DWORD *a2, _DWORD *a3);
void __thiscall TeamUI_HandlePacketUpdate(int **this);
_DWORD *__thiscall TeamUI_RefreshMemberList(int **this);
int __thiscall SkillWindow_Refresh(int *this);
_DWORD *__thiscall SkillWindow_HandleInput(int **a1, unsigned __int16 a3, int a4);
int __thiscall TeamUI_HandleMemberAction(int this, int a2);
char *__thiscall Packet_ID_SKILLS_ctor(char *this);
char __thiscall Packet_ID_SKILLS_read(int this, int a2);
int __thiscall SkillWindow_Dtor(void **this);
int __thiscall SkillEntry_CopyFrom(int this, int a2);
_DWORD *__thiscall SkillWindow_LoadSkill(int this, int a2);
void __thiscall sub_65841FD0(int this);
int __thiscall sub_65842540(_DWORD, _DWORD); // weak
int __thiscall sub_65842750(int this);
int __cdecl sub_65843970(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_658439A0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_658439D0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65843A40(_DWORD); // weak
int __thiscall sub_65843B50(_DWORD); // weak
int __thiscall sub_65843D10(_DWORD); // weak
int __thiscall sub_65844660(int this, unsigned int a2);
void __thiscall TeamUI_ShowInviteDialog(unsigned int *this, unsigned int a2);
void __thiscall TeamUI_ProcessInviteResponse(int this, unsigned int a2);
char __thiscall Packet_ID_AF_read(int this, int a2);
int __stdcall sub_65845450(_DWORD, _DWORD, _DWORD); // weak
int __thiscall ShopWindow_SetTimer(int this, int a2);
int __cdecl sub_65845970(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65847170(_DWORD); // weak
int __thiscall sub_65847320(_DWORD, _DWORD); // weak
int __thiscall sub_65847750(_DWORD); // weak
int __thiscall sub_65847800(_DWORD); // weak
_DWORD *__thiscall Read_6BitFlags(bool *this, _DWORD *a2);
int __cdecl sub_65847C10(_DWORD, _DWORD, _DWORD); // weak
void __thiscall Packet_ID_B6_read_structA(char *this, unsigned int *a2);
_DWORD *__thiscall Packet_ID_B6_read_structB(char *this, unsigned int *a2);
int __cdecl sub_65847E10(_DWORD, _DWORD, _DWORD); // weak
// char *__usercall sub_65847E40@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
int __thiscall sub_65847F20(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65848040(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_658480F0(int this, int a2, unsigned int a3, const void *a4);
_DWORD *__thiscall sub_65848440(_DWORD *this, _DWORD *a2, int a3, const void *a4);
char __thiscall Packet_ID_B6_read_structD_entry(char *this, unsigned int *a2);
char *__thiscall Vector36_PushBack(char **this, void *a2);
int __cdecl sub_658486E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
char *__thiscall Packet_ID_B6_read_structC(char *this, unsigned int *a2);
int __thiscall sub_65848D00(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall Packet_ID_B6_structD_list_insert(_DWORD *this, int a2);
void __thiscall Packet_ID_B6_read_structD(_DWORD *this, unsigned int *a2);
char __thiscall Packet_ID_B6_read(int this, int a2);
int __thiscall LockWindow_SetPinDigits(int this, int a2, _BYTE *a3);
int __thiscall sub_658493F0(_DWORD); // weak
int __thiscall LockWindow_ShowMessage(int *this, int a2);
int __thiscall sub_6584A330(_DWORD, _DWORD); // weak
char __thiscall sub_6584A5E0(_DWORD *this, _DWORD *a2);
int __thiscall sub_6584A6E0(_DWORD); // weak
void __thiscall LockWindow_TryUnlock(int *this);
int __thiscall sub_6584B750(_DWORD); // weak
char __thiscall Packet_ID_CHEMICAL_LAB_read(int this, int a2);
int __thiscall sub_6584B8F0(_DWORD); // weak
char __thiscall LockWindow_ProcessInput(char *this, unsigned __int8 a2, __int16 a3, int *a4);
int __thiscall sub_6584CDA0(int this);
int __thiscall sub_6584CE90(int this);
void __thiscall sub_6584D340(int this);
void __thiscall sub_6584DC10(int this);
int __thiscall sub_6584DDE0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
char **__thiscall sub_6584DE10(char **this, char **a2, char *a3, char *a4);
int __thiscall sub_6584DE60(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6584E170(int this, unsigned int a2);
int __thiscall sub_6584E2D0(char *this);
void __thiscall sub_6584E5E0(int this);
char *__thiscall Array96_CopyFrom6Elements(char *this, int a2);
int __thiscall sub_6584E7E0(_DWORD); // weak
int __thiscall sub_6584FC80(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65850140(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall ProductionUI_UpdateDisplay(int this, char a2);
int __thiscall sub_65851F40(_DWORD); // weak
int __thiscall sub_65853D70(_DWORD); // weak
int __thiscall sub_65854B70(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__cdecl CopyArray8(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __thiscall sub_65856320(_DWORD); // weak
int __thiscall sub_65856FF0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_658580A0(_DWORD); // weak
int __thiscall sub_65858AF0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall EquipWindow_ConfirmAction(_BYTE *this);
LONG __thiscall EquipWindow_SetSlotMode(char *this, unsigned int a2);
int __cdecl ItemId_GetMaxStack(unsigned __int16 a1);
char *__thiscall EquipSlot_FindById(_DWORD *this, int a2);
char __thiscall EquipSlot_CopyFromObject(_DWORD *this, int a1, char *a2);
char __thiscall EquipSlot_GetById(_DWORD *this, int a2, char *a3);
int __thiscall sub_65858DD0(_DWORD); // weak
void __thiscall EquipWindow_RefreshStats(int *this);
void __thiscall ItemTooltipUI_BuildContent(_DWORD *this);
int __thiscall CWindowTerminalMedical_Update(int this, int a2);
int __thiscall CWindowTerminalMedical_OnCommand(_DWORD *this, int a2, int a3, int a4);
_DWORD *__thiscall sub_6585B9E0(int this);
int (__thiscall ***__thiscall sub_6585BC50(int this))(_DWORD, int);
errno_t __thiscall MailUI_CopyFromInputFields(int this);
int __thiscall sub_6585C0B0(_DWORD); // weak
void __thiscall MailUI_PopulateFromMailData(int this, char *a2, int a3, int a4, int a5, int a6, int a7, char a8, int a9, int a10, int a11, int a12, char *a13);
char *__thiscall sub_6585D1F0(char **this, char *a2);
char *__thiscall GuildInvitePacket_WriteToStream(char **this, char *a2);
char __thiscall GuildPacket_WriteBody(int this);
char **__thiscall Array32_PartitionRange(char **this, char **a2, char *a3, char *a4);
int __thiscall sub_6585D9D0(_DWORD, _DWORD); // weak
int __thiscall sub_6585DD30(_DWORD); // weak
char *__thiscall Packet_ID_A5_ctor(char *this);
int __cdecl sub_6585E1A0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6585E2D0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
char __thiscall Packet_ID_A5_read_struct3(char *this, unsigned int *a2);
char __thiscall Packet_ID_A5_read(int this, int a2);
int __thiscall TerminalWindow_ClearVectors(char *this);
int __thiscall sub_6585EE30(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6585F160(_DWORD); // weak
void __thiscall CWindowTerminalPrisonMineralCollector_Dtor(void **this);
int __thiscall CWindowTerminalPrisonMineralCollector_InitUI(_DWORD *this);
int __thiscall sub_6585F4D0(_DWORD); // weak
void **__thiscall CWindowTerminalPrisonMineralCollector_dtor(void **this, char a2);
int __thiscall CWindowTerminalPrisonMineralCollector_OnCommand(_DWORD *this, int a2, int a3, int a4);
int __thiscall CWindowTerminalProduction_UpdateTabs(_DWORD *this);
int __thiscall sub_6585F910(_DWORD *this);
void __cdecl __noreturn sub_65860070(int a1, int a2);
void *__cdecl sub_65860120(unsigned int a1);
int __thiscall sub_65860220(_DWORD, _DWORD); // weak
double __thiscall sub_658602B0(int this);
int __stdcall sub_65860500(_DWORD, _DWORD, _DWORD); // weak
int __thiscall ProductionReq_AccumulateCosts(_DWORD *this, unsigned __int16 a2, int a3, int a4, int a5);
_DWORD *__thiscall sub_658608D0(_DWORD *this, _DWORD *a2, unsigned int *a3);
char *__thiscall Packet_WriteU32_Compressed(char *this, int a2);
void __thiscall CWindowTerminalProduction_UpdateSelection(int this);
unsigned int __thiscall CWindowTerminalProduction_CalcMaxCraftCount(int this);
int __thiscall sub_65861390(_DWORD, _DWORD); // weak
char __thiscall sub_65861620(_DWORD *this, unsigned int a2);
void __thiscall ProductionEntry_Write(char *this, char *a2);
void __thiscall ProductionEntryList_Write(_DWORD *this, char *a2);
char __thiscall Packet_ID_PRODUCTION_write(int this);
void __cdecl sub_65861980(int *a1, int *a2, _DWORD *a3);
int __thiscall CWindowTerminalProduction_OnUpdate(int this, int a2);
int __thiscall CWindowTerminalProduction_ResetUI(int *this);
unsigned int *__thiscall sub_658622F0(int ***this, unsigned int *a2);
int __thiscall sub_658627F0(int this, unsigned int a2);
int __stdcall sub_65862850(_DWORD, _DWORD, _DWORD); // weak
int __thiscall Packet_ID_PRODUCTION_cleanup(_DWORD *this);
void __thiscall CWindowTerminalProduction_DtorInternal(void **this);
int __thiscall sub_65862D70(_DWORD); // weak
void **__thiscall CWindowTerminalProduction_dtor(void **this, char a2);
void __thiscall CWindowTerminalProduction_PopulateItemList(_DWORD *this);
char *__thiscall Packet_ID_PRODUCTION_ctor(char *this);
_DWORD *__thiscall sub_65863510(_DWORD *this);
int __cdecl sub_658635A0(_DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_65863620(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_658636D0(_DWORD, _DWORD, _DWORD); // weak
// char *__usercall sub_65863700@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
int __thiscall sub_658637C0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65863830(_DWORD, _DWORD, _DWORD, _DWORD); // weak
unsigned int __thiscall sub_65863860(int this, int a2, unsigned int a3, const void *a4);
_DWORD *__thiscall Packet_ID_PRODUCTION_dtor(_DWORD *this, char a2);
int __thiscall CWindowTerminalProduction_InitUI(unsigned int *this);
_DWORD *__thiscall Packet_ID_PRODUCTION_read_entries(char **this, unsigned int *a2);
char __thiscall Packet_ID_PRODUCTION_read(int this, int a2);
void __thiscall sub_65864B30(int this);
void __thiscall HandlePacket_ID_6B_SubId44_InventoryUiRefresh(char *invState);
int __thiscall CWindowTerminalProduction_OnCommand(char *this, int a2, int a3, int a4);
int __thiscall sub_65866B50(_DWORD); // weak
int __cdecl RoundFloatToInt(float a1); // idb
char __cdecl Item_CalcRepairCosts(int __return_address, _DWORD *a2, int *a3);
int __thiscall sub_658677F0(_DWORD); // weak
int __thiscall sub_658678B0(_DWORD); // weak
char __thiscall Packet_ID_REPAIR_ITEM_read(int this, int a2);
int __thiscall sub_65867A70(_DWORD); // weak
int __thiscall sub_65867AC0(_DWORD, _DWORD, _DWORD); // weak
void __cdecl sub_65867B20(int a1);
int __thiscall ItemTransferUI_HandleAction(int this, int a2, int a3, int a4);
int __thiscall ItemTransferUI_CreateWidgets(_DWORD *this);
char __thiscall ItemTransferUI_UpdateItemInfo(unsigned int *this, char *a2, int a3);
int __thiscall sub_65868680(_DWORD); // weak
int __thiscall sub_65868770(_DWORD, _DWORD); // weak
void __thiscall ProductionWindow_RefreshInputSlots(_DWORD *this);
void __thiscall ProductionWindow_ClearAndRefresh(int *this);
void __thiscall sub_65869160(int this);
unsigned __int8 __thiscall ProductionWindow_HandleActionEvent(int this, unsigned __int8 a2);
char **__thiscall sub_6586A530(char **this, char **a2, char *a3, char *a4);
int __thiscall MarketWindow_SendSearchRequest(int this);
int __thiscall sub_6586B710(_DWORD, _DWORD); // weak
int __thiscall sub_6586BBB0(_DWORD); // weak
void __thiscall MarketWindow_RequestItemDetails(int this);
int __thiscall sub_65870630(int this);
int __thiscall sub_65870720(int this);
int __thiscall sub_65870A00(_DWORD); // weak
void __thiscall sub_65870A20(int this);
void __thiscall sub_65871150(int this);
int __thiscall sub_65871250(_DWORD); // weak
void __thiscall sub_65871770(int this);
int __thiscall sub_65872A80(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65872F30(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall TerminalShopUI_UpdateDisplay(int this, char a2);
int __thiscall sub_658748C0(_DWORD); // weak
char __thiscall sub_65875140(char *this, char a2, char a3);
double __thiscall ResourceArray_CountById(_DWORD *this, int a2);
int __thiscall ResourceArray_Clear(_DWORD *this, char a2);
int __thiscall MineralScanner_HandleScanResult(int **this);
void __thiscall MineralScanner_UpdateDisplay(_DWORD *this);
void __thiscall MineralScanner_ProcessScanData(int this);
_DWORD *__thiscall Sub6Entry_Copy(_DWORD *this, int a2);
_DWORD *__cdecl sub_65876CA0(int a1, int a2, _DWORD *a3);
_DWORD *__thiscall MineralScanner_GetScanRadius(void *this, int a2, int a3, _DWORD *a4);
int __thiscall Sub6EntryList_Assign(int this, int a2);
int __thiscall sub_65876FC0(_DWORD); // weak
void __thiscall WorldSelect_HandleSubId6Payload(unsigned int this, _DWORD *a2);
int __thiscall sub_65878E30(_DWORD); // weak
int __thiscall sub_65879040(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65879DF0(_DWORD); // weak
int __thiscall sub_65879FD0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6587B070(_DWORD, _DWORD); // weak
int __thiscall sub_6587B300(_DWORD); // weak
int __thiscall sub_6587B4B0(_DWORD); // weak
int __thiscall QuestUI_PopulateObjectiveList(int this, int a2, _DWORD *a3);
int __thiscall sub_6587BE90(_DWORD); // weak
int __thiscall sub_6587CB40(_DWORD); // weak
int __thiscall sub_6587D520(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6587D5D0(_DWORD); // weak
int __thiscall QuestData_CopyObjectiveRange(_DWORD *this);
int __thiscall sub_6587EA60(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6587F160(_DWORD); // weak
LONG __thiscall SetTargetId(int this, unsigned __int16 a2);
LONG __thiscall ClearTargetId(int this);
_DWORD *__cdecl sub_658804C0(_DWORD *a1);
int __cdecl sub_65880570(int a1);
char *__thiscall Packet_0xA4_Ctor(char *this);
int *__thiscall sub_658808E0(int *this);
int *__thiscall StringMap_FindLowerBound(int **this, int a2);
_DWORD *__thiscall sub_658809D0(_DWORD *this, int a2);
int __thiscall sub_65880A30(_DWORD *this, _DWORD *a2);
int __thiscall sub_65880A90(void *this);
unsigned int __thiscall FriendList_AddEntry(int this, char *Source, char a3, const char *a4, char a5, const char *a6, const char *a7, char a8, int a9, char a10, char a11);
int __stdcall sub_65880FF0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
char __thiscall Packet_ID_NAME_CHANGE_read(_DWORD *this, int a2);
char __thiscall ChatPacket_WriteBody(int this);
char __thiscall Packet_ID_USE_ITEM_read(int this, int a2);
char __thiscall Packet_0xA4_Write(int this);
int __cdecl SendFriendRequest(int a1, char *Source); // idb
int __cdecl SendFriendInvite(int a1, char *Source); // idb
char __thiscall HandleItemUseRequest(void *this, int *a2);
int __thiscall HandlePacket_ID_7D_WriteSharedMem_0x2BD0(char *shell, int payload);
int *__thiscall StringMap_FindOrEnd(int **this, int *a2, int a3);
int *__thiscall sub_65881BE0(int **this, int *a2, char a3, int *a4, int a5);
_DWORD *__thiscall RBTree_EraseNode(_DWORD *this, _DWORD *a2, int a3);
void __stdcall StringRBTree_DeleteNodes(void **a1);
int __thiscall sub_65882190(int **this, int a2, int *a3);
int *__thiscall sub_65882320(int **this, int *a2, int *a3, int *a4);
int **__thiscall StringRBTree_EraseRange(int ***this, int **a2, int *a3, int *a4);
int *__thiscall StringMap_GetOrInsert(int **this, int a2);
int __thiscall ItemTemplate_GetIconHandle(int **this, unsigned __int16 __return_address);
int __thiscall StringRBTree_Clear(int this);
HANDLE __thiscall CInventoryClient_Clear(char *this);
char *__thiscall CInventoryClient_dtor(char *this, char a2);
int __stdcall HandlePacket_ID_FRIENDS(int a1);
int __cdecl sub_658839F0(_DWORD); // weak
int __cdecl sub_65883AD0(_DWORD); // weak
int __thiscall sub_65883E50(_DWORD); // weak
int __stdcall sub_65883F70(_DWORD); // weak
int __stdcall sub_65883FD0(_DWORD); // weak
int __thiscall sub_65884050(_DWORD); // weak
void __stdcall sub_65884250(void **a1);
_DWORD *ListNode_Alloc24();
void __thiscall LinkedList_Clear(int this);
int __thiscall List_CheckSize(_DWORD *this, unsigned int a2);
_DWORD *__thiscall sub_658843E0(_DWORD *this, _DWORD *a2, int a3);
_DWORD *ScaleNode_Alloc32();
int **__thiscall IntRBTree_FindUpperBound(int **this, int **a2, _DWORD *a3);
int **__thiscall sub_658848D0(int ***this, int **a2, int *a3, int *a4);
int __thiscall sub_658849C0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__stdcall ScaleNode_AllocWithData(int a1, int a2, _DWORD *a3);
int __thiscall sub_65884D80(_DWORD, _DWORD, _DWORD); // weak
_DWORD *__thiscall sub_65884F00(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int __thiscall ScaleRBTree_Clear(int this);
int __thiscall ScaleMgr_Clear(int this);
int *__thiscall IntRBTree_GetOrInsert(int **this, unsigned int *a2);
_DWORD *__thiscall RBTree_Init(_DWORD *this);
char __thiscall ScaleMgr_ApplyScale(int **this, int a2, float *a3);
char __thiscall MsgId_6A_Handler(int **this, int a2);
void __thiscall ScaleMgr_UpdateAll(float ***this);
int __thiscall sub_658854D0(_DWORD); // weak
float *__thiscall sub_65885860(float *this);
_DWORD *__thiscall PlayerFactory_Ctor(_DWORD *this);
_DWORD *__thiscall ObjectFactory_Ctor(_DWORD *this);
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int Create_CGameClientShell();
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int Create_CPlayerMgr();
float *Create_CClientSoundMgr();
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int Create_CInterfaceMgr();
int sub_65886660();
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int sub_65886740(void); weak
int sub_658867B0();
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int sub_65886890(void); weak
int sub_65886900();
int sub_65886970();
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int sub_65886A50(void); weak
int sub_65886AC0();
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int sub_65886BA0(void); weak
int sub_65886C10();
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int sub_65886CF0(void); weak
int sub_65886D60();
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int sub_65886E40(void); weak
int sub_65886EB0();
int sub_65886F20();
int sub_65886F90();
// void __cdecl Concurrency::details::SchedulerBase::CheckStaticConstruction(); idb
// int sub_65887070(void); weak
int sub_658870E0();
int __cdecl sub_65887150(int (__thiscall ***a1)(_DWORD, int));
int __cdecl sub_65887170(int (__thiscall ***a1)(_DWORD, int));
int __cdecl sub_65887190(int (__thiscall ***a1)(_DWORD, int));
int __cdecl sub_658871B0(int (__thiscall ***a1)(_DWORD, int));
int __cdecl sub_658871D0(int (__thiscall ***a1)(_DWORD, int));
int __cdecl sub_658871F0(int (__thiscall ***a1)(_DWORD, int));
// int __usercall CShell_InitManagers@<eax>(double a1@<st1>, double a2@<st0>, double a3@<st2>);
void __cdecl sub_65887B30(void *a1);
void __cdecl sub_65887B50(void *a1);
void __cdecl sub_65887B70(void *a1);
void __cdecl sub_65887B90(void *a1);
void __cdecl sub_65887BB0(void *a1);
void __cdecl sub_65887BD0(void *a1);
void __cdecl sub_65887BF0(void *a1);
void __cdecl sub_65887C10(void *a1);
void __cdecl sub_65887C30(void *a1);
void __cdecl sub_65887C50(void *a1);
void __cdecl sub_65887C70(void *a1);
void __cdecl sub_65887C90(void *a1);
void __cdecl sub_65887CB0(void *a1);
void __cdecl sub_65887CD0(void *a1);
void __cdecl sub_65887CF0(void *a1);
void __cdecl sub_65887D10(void *a1);
void __cdecl sub_65887D30(void *a1);
void __cdecl sub_65887D50(void *a1);
void __cdecl sub_65887D70(void *a1);
void __cdecl sub_65887D90(void *a1);
void __cdecl sub_65887DB0(void *a1);
void __cdecl sub_65887DD0(void *a1);
void __cdecl sub_65887DF0(void *a1);
void __cdecl sub_65887E10(void *a1);
void *Create_CharacterDataMgr();
void __cdecl sub_65887F30(void *a1);
void __cdecl sub_65887F50(void *a1);
void __cdecl Delete_WeaponArrays(void *a1);
BOOL CShell_CreateGlobalObjects();
void CShell_DestroyGlobalObjects();
int __thiscall sub_65889210(_DWORD); // weak
int __thiscall sub_65889AF0(_DWORD); // weak
int __thiscall sub_65889D20(_DWORD); // weak
int __stdcall Music_SetVolume(float a1);
int __thiscall sub_65889E10(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall nullsub_8(_DWORD); // weak
int __thiscall nullsub_9(_DWORD); // weak
int __thiscall nullsub_10(_DWORD); // weak
void __thiscall sub_65889FE0(_DWORD *this, unsigned int);
// int __usercall sub_6588A1C0@<eax>(_DWORD *a1@<ecx>, double a2@<st0>);
void __thiscall Music_CheckPlayState(_DWORD *this);
int __thiscall PlayerCharacter_Ctor(int this);
char __thiscall Mail_SaveToFile(int this, int a2, void *a3, WorldLoginReturnAddrPacked ElementCount, const char *a5, const char *a6);
int __thiscall sub_6588ACC0(_DWORD); // weak
void __stdcall SharedMem_WriteUsername(char *Source);
void __stdcall SharedMem_WritePassword(char *Source);
int sub_6588B1B0(int a1, char *Format, ...);
void __thiscall sub_6588B280(_BYTE *this);
BOOL __thiscall SharedMem_CheckFlag(void *this, int a2);
LONG __thiscall SharedMem_SetFlag(void *this, int a2);
LONG __thiscall SharedMem_ClearFlag(void *this, int a2);
int sub_6588B360();
char __thiscall EquipSlotArray_SetSlot26to28(char *this, char a2, const void *a3);
char __thiscall EquipSlotArray_GetSlot26to28(char *this, unsigned __int8 a2, int a3, char *a4);
unsigned __int8 __thiscall EquipSlotArray_FindFreeSlot26(_DWORD *this);
char __thiscall EquipSlotArray_SetSlot5to16(char *this, unsigned __int8 a2, const void *a3);
char __thiscall EquipSlotArray_GetSlot5to16(char *this, unsigned __int8 a2, int a3, char *a4);
char __thiscall EquipSlotArray_RemoveSlot5to16(char *this, unsigned __int8 a2, int a3, char *a4);
char __thiscall EquipSlotArray_ClearSlot5to16(char *this, unsigned __int8 a2, char *a3);
char __thiscall EquipSlotArray_SetSlot1to3(char *this, unsigned __int8 a2, const void *a3);
char __thiscall EquipSlotArray_SwapSlot1to3(char *this, unsigned __int8 a2, unsigned __int8 a3);
char __thiscall EquipSlotArray_GetSlot1to3(char *this, unsigned __int8 a2, int a3, char *a4);
char __thiscall EquipSlotArray_RemoveSlot1to3(char *this, unsigned __int8 a2, int a3, char *a4);
char __thiscall EquipSlotArray_FindAndRemove1to3(_DWORD *this, int a2, char *a3);
char *__thiscall EquipSlotArray_FindById1to3(_DWORD *this, int a2);
char __thiscall QuickSlot_SetItem(char *this, unsigned __int8 a2, __int16 a3);
char __thiscall QuickSlot_Swap(_WORD *this, unsigned __int8 a2, unsigned __int8 a3);
errno_t __thiscall PlayerInfo_SetName(char *this, char *Source);
errno_t __thiscall PlayerInfo_SetGuildName(char *this, char *Source);
errno_t __thiscall PlayerInfo_SetDescription(char *this, char *Source);
Packet_ID_WORLD_LOGIN_RETURN *__thiscall Packet_ID_WORLD_LOGIN_RETURN_Ctor(Packet_ID_WORLD_LOGIN_RETURN *this);
char __stdcall WriteStatGroup5(char Src);
char __stdcall WriteStatGroup6(char Src);
LONG __thiscall SharedMem_WritePlayerEntity(void *this, int a2);
LONG __thiscall WorldLoginReturn_ScheduleRetry(float *this, float nextRetryAtTime);
int __thiscall sub_6588C850(_DWORD, _DWORD); // weak
int __thiscall sub_6588C870(_DWORD, _DWORD); // weak
int __thiscall sub_6588C8E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
void __thiscall ItemSlotUI_Clear(int *this);
void __thiscall ItemSlotUI_GetAndClear(int *this, _WORD *a2);
int __thiscall Network_Initialize(int a1);
void __thiscall Network_HandleDisconnect(_BYTE *this, int a2, int a3, char a4);
int __thiscall Network_HandleRakNetMessage(_BYTE *this, char a2, int a3);
int __thiscall Network_CheckTimeoutCounter(_DWORD *this, int a2);
int __stdcall HandlePacket_Timestamp(int a1);
int __thiscall sub_6588D230(_DWORD); // weak
char __thiscall EquipSlot_UpdateDurability(_DWORD *this, int a2, int a3);
char __thiscall EquipSlot_RemoveAndCopy(_DWORD *this, int a2, char *a3);
char __thiscall EquipSlotArray_UpdateDurability(_DWORD *this, int a2, int a3);
char __thiscall EquipSlotArray_GetItemCopy(_DWORD *this, int a2, char *a3);
_DWORD *__thiscall Packet_ID_LOGIN_REQUEST_RETURN_ScalarDeletingDtor(_DWORD *this, char a2);
int __thiscall Mail_InitUserFolder(char *this, const char *a2);
int __stdcall LTClient_SendPacket_BuildIfNeeded(_DWORD *a1, int a2, int a3, int a4, int a5);
// int __usercall HandlePacket_ID_LOGIN_TOKEN_CHECK@<eax>(int a1@<edx>, int a2);
char __thiscall Packet_ID_LOGIN_REQUEST_RETURN_Read(int this, int a2);
char __thiscall Packet_ID_WORLD_LOGIN_RETURN_Read(Packet_ID_WORLD_LOGIN_RETURN *this, int payload);
char __thiscall Packet_ID_ITEMS_REMOVED_read(int this, int a2);
char __thiscall Packet_ID_ITEM_REMOVED_read(int this, int a2);
char __thiscall Packet_ID_ITEMS_ADDED_read(int this, int a2);
_DWORD *__stdcall ItemChangeEntry_Create(int a1, int a2, const void *a3);
int __thiscall ItemChangeList_IncrementSize(_DWORD *this, unsigned int a2);
int __stdcall HandlePacket_ID_LOGIN_REQUEST_RETURN(int a1);
int __stdcall HandlePacket_ID_WORLD_LOGIN_RETURN_73(int __return_address);
int __stdcall HandlePacket_ID_ITEM_REMOVED(int a1);
int __stdcall HandlePacket_NAME_CHANGE(int a1);
int __stdcall HandlePacket_ID_UNLOAD_WEAPON(int a1);
int __stdcall HandlePacket_ID_MERGE_ITEMS(int a1);
int __stdcall HandlePacket_SPLIT_CONTAINER(int a1);
int __stdcall HandlePacket_ID_USE_ITEM(int a1);
int __cdecl sub_6588F3A0(int, int); // weak
int __stdcall HandlePacket_ID_A6(int a1);
int __stdcall HandlePacket_REPAIR_ITEM(int a1);
int __stdcall HandlePacket_ID_RECYCLE_ITEM(int a1);
int __stdcall HandlePacket_ID_B2(int a1);
int __cdecl sub_658903F0(int, int); // weak
int **__thiscall sub_658905A0(int **this, int **a2, _DWORD *a3);
int __stdcall sub_65890750(_DWORD); // weak
bool __thiscall sub_658907A0(_DWORD *this, int a2, _DWORD *a3);
char *__thiscall sub_65890890(char *this);
char __thiscall Packet_ID_ITEMS_CHANGED_read(_DWORD *this, int a2);
char **__thiscall sub_65890B10(char **this, char **a2, char *a3, char *a4);
int __stdcall HandlePacket_ID_ITEMS_CHANGED(int a1);
int __thiscall sub_65890D70(char *this, int a2);
// int __userpurge sub_65891970@<eax>(int a1@<ebp>, int a2);
int __stdcall HandlePacket_ID_A8(int a1);
char *__thiscall sub_65892AB0(char *this);
int __stdcall HandlePacket_ID_ITEMS_REMOVED(int a1);
void __thiscall DynamicArray_FreeBuffer(int this);
int __stdcall HandlePacket_ID_SKILLS(int a1);
char **__thiscall PathVector_Init(char **this);
int (__thiscall ***__thiscall MailUI_AddFriendEntry(char *this, const void *a2))(_DWORD, int);
bool __thiscall Packet_ID_LOGIN_RETURN_Read(Packet_ID_LOGIN_RETURN *this, int packet);
int __thiscall sub_65893740(_BYTE *this, int a2);
int __stdcall HandlePacket_ID_PRODUCTION(int a1);
int __stdcall HandlePacket_ID_MARKET(int a1);
int __stdcall HandlePacket_MINING(int a1);
int __stdcall HandlePacket_ID_AC(int a1);
int __cdecl sub_65896160(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__thiscall sub_65896270(_DWORD *this, int a2);
Packet_ID_LOGIN_RETURN *__thiscall Packet_ID_LOGIN_RETURN_Ctor(Packet_ID_LOGIN_RETURN *this);
char __thiscall Packet_ID_LOGIN_RETURN_Write(Packet_ID_LOGIN_RETURN *this);
int __thiscall Packet_ID_LOGIN_RETURN_Dtor(void **this);
char *__thiscall Packet_ID_VENDOR_Ctor(char *this);
int __thiscall Packet_ID_VENDOR_Dtor(int *this);
// int __userpurge HandlePacket_ID_LOGIN_RETURN@<eax>(double a1@<st0>, int packet);
int __stdcall HandlePacket_ID_BACKPACK_CONTENTS(int a1);
int __stdcall HandlePacket_ID_ITEMS_ADDED(int a1);
int *__thiscall sub_658974B0(int *this, int a2);
int __stdcall HandlePacket_ID_A5(int a1);
char *__thiscall GuildMemberData_CopyFrom(char *this, int a2);
void **__thiscall Packet_ID_LOGIN_RETURN_ScalarDeletingDtor(void **this, char a2);
int *__thiscall Packet_ID_VENDOR_Dtor_Delete(int *this, char a2);
int __thiscall sub_65897D20(_DWORD); // weak
int __thiscall HandlePacket_STORAGE(int this, int a2);
int __stdcall HandlePacket_ID_B6(int a1);
int __thiscall TradeData_CopyFrom(int this, int a2);
int __cdecl sub_65898740(int, int); // weak
int __stdcall HandlePacket_ID_PLAYER2PLAYER(int a1);
int __stdcall HandlePacket_ID_B1(int a1);
int __stdcall HandlePacket_ID_PLAYERFILE(int a1);
int __stdcall HandlePacket_ID_A9(int a1);
int __stdcall HandlePacket_ID_WORLD_SELECT_7B(int a1);
int __stdcall HandlePacket_ID_FACTION(int a1);
int __stdcall HandlePacket_ID_AF(int a1);
int __stdcall HandlePacket_ID_B0(int a1);
int __stdcall HandlePacket_ID_B5(int a1);
// int __userpurge ClientShell_OnMessage_DispatchPacketId@<eax>(char *shell@<ecx>, double a2@<st0>, char pktId, int payload);
void __thiscall Quaternion_Slerp(float *this, float *a2, float *a3, float a4);
void __thiscall sub_6589AD30(int this);
int __thiscall sub_6589B340(_DWORD, _DWORD); // weak
int __thiscall sub_6589B810(_DWORD, _DWORD, _DWORD); // weak
_DWORD *sub_6589BAD0();
int __stdcall sub_6589BB80(void *); // idb
int **__thiscall sub_6589C3E0(int ***this, int **a2, int *a3, int *a4);
int __cdecl sub_6589C4B0(int, int); // weak
int __thiscall sub_6589C6F0(int *this);
DWORD __thiscall sub_6589C770(DWORD *this);
int __thiscall sub_6589C820(_DWORD, _DWORD); // weak
int __thiscall AnimTree_ClearAll(int this);
int __thiscall sub_6589C9B0(int this);
float *__thiscall CharacterAnimState_Init(float *this);
int __thiscall CharacterAnimState_SetModel(int this, int __return_address);
int __thiscall sub_6589CDD0(int this);
int __thiscall sub_6589CE80(_DWORD); // weak
int sub_6589D040(void); // weak
float *__thiscall sub_6589D200(float *this);
LONG __thiscall SharedMem_WriteTargetEntity(int this, int a2);
_DWORD *__cdecl sub_6589DDC0(_DWORD *a1);
int __cdecl sub_6589DE50(int a1);
int __thiscall AnimTreeIter_Increment(int **this);
bool __thiscall SkillSlot_IsMaxLevel(int this);
int __cdecl Math_RoundFloat(float a1); // idb
char __thiscall ItemSlots_HasFireableTypeAllowlist(_WORD *this);
BOOL __thiscall ByteArray4_Compare(_BYTE *this, _BYTE *a2);
int __thiscall CharacterStats_Init(_DWORD *this);
char *__thiscall Packet_ID_WEAPONFIRE_ctor(char *this);
char __stdcall EncVarMgr_WriteStatGroup2(char a1);
char __stdcall EncVarMgr_WriteStatGroup3(char a1);
char __stdcall EncVarMgr_WriteStatGroup4(char a1);
unsigned __int8 __thiscall PlayerInput_UpdateAimVectors(_DWORD *this);
LONG __thiscall MsgId_70_Handler(_DWORD *this, float *a2);
char __thiscall PlayerInput_UpdatePitchFromMouse(float *this);
int __thiscall PlayerObject_UpdatePosition(_DWORD *this);
int __thiscall nullsub_11(_DWORD); // weak
const char *__stdcall SoundDef_GetFootstepPath(char *Buffer, int a2, int a3, int a4, _BYTE *a5);
bool __thiscall WeaponSlot_MatchesAmmoType(_WORD *this, _WORD *a2);
int *__thiscall WeaponTree_Iter_Increment(int **this);
_DWORD *__thiscall WeaponRBTree_FindRange(_DWORD *this, _DWORD *a2, unsigned int *a3);
_DWORD *__thiscall sub_6589F150(_DWORD *this, int a2);
int __thiscall sub_6589F1B0(_DWORD *this, _DWORD *a2);
char *__thiscall FlagByte4_WriteToStream(_BYTE *this, char *a2);
int __thiscall WeaponFireEntry_Init(int this);
bool __thiscall WeaponFireEntry_Equals(int this, int a2);
bool __thiscall Packet_ID_UPDATE_read(_DWORD *this, int a2);
int __thiscall PlayerMovementData_Init(float *this);
int __thiscall EntityQuery_GetSortedByDistance(_DWORD *this, int a2);
_DWORD *__cdecl sub_6589F6F0(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __thiscall PlayerObjectMgr_OnMessage(float *this, int __return_address);
char __thiscall Vehicle_ScanNearbyObjects(float *this);
void __thiscall HumanDetection_ScanForHuman(int *this, int a2, int a3, int a4, int a5, int a6);
void __stdcall sub_6589FCF0(void **a1);
_DWORD *__thiscall sub_6589FD30(_DWORD *this, _DWORD *a2, int a3);
_DWORD *__stdcall sub_658A0050(int a1, int a2, int a3, _DWORD *a4, char a5);
char *__thiscall WeaponFireEntry_type2_write(int this, char *a2);
char *__thiscall WeaponFireEntry_type3_write(int this, char *a2);
int __thiscall WeaponFireEntry_type4_write(int this, char *a2);
char __thiscall Packet_ID_UPDATE_write(char *this);
char __thiscall Packet_ID_WEAPONFIRE_read(int this, int a2);
char __thiscall Packet_ID_WEAPONFIRE_write(int this);
int __cdecl sub_658A0710(unsigned int a1, int a2, float *a3, float *a4);
_DWORD *__cdecl sub_658A0890(int a1, int a2, _DWORD *a3);
void __cdecl DwordArray_Fill(_DWORD *a1, int a2, _DWORD *a3);
int __thiscall SendPacket_WEAPONFIRE(_DWORD *this);
unsigned int __stdcall SendPacket_ID_0x71_UseItem(int a1, int a2);
void __thiscall MsgId_83_LocalPlayerGate(float *this);
int __stdcall SendPacket_ID_0x7B_Sit(int a1);
int **__thiscall IntRBTree_EraseRange(int ***this, int **a2, int *a3, int *a4);
int *__thiscall sub_658A10E0(int **this, int *a2, char a3, int *a4, _DWORD *a5);
void __cdecl IntRBTree_CountRange(int *a1, int *a2, _DWORD *a3);
char *__thiscall WeaponFireEntry_type1_write(int this, char *a2);
char *__thiscall WeaponFireEntry_write(char *this, char *a2);
int __thiscall sub_658A1690(int **this, int a2, int *a3);
_DWORD *__stdcall sub_658A1780(_DWORD *a1, int a2, _DWORD *a3);
unsigned int *__thiscall IntRBTree_EraseByKey(int ***this, unsigned int *a2);
int *__thiscall IntRBTree_InsertHint(int **this, int *a2, int *a3, int *a4);
_DWORD *__stdcall sub_658A1A20(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __thiscall sub_658A1A90(_DWORD); // weak
unsigned int *__thiscall MsgId_77_NoPayload(int ***this, unsigned int a2);
int *__thiscall IntRBTree_FindOrInsert(int **this, int *a2);
void __thiscall DwordVector_InsertN(int this, _DWORD *a2, unsigned int a3, unsigned int *a4);
int *__thiscall MsgId_77_WithPayload(int **this, int a2, int *a3);
char __thiscall FactionPerks_ActivatePerk(char **this, int a2, char a3);
void __thiscall sub_658A2130(_DWORD *this, unsigned int *a2);
int __thiscall WeaponFireEntry_pick_list_entry(_DWORD *this);
void __thiscall FactionPerks_AddPerkCount(char *this, int a2);
int __thiscall WeaponFireEntry_build_from_state(_DWORD *this, int a2);
char __thiscall SendPacket_UPDATE(_DWORD *this, int a2, int a3);
void __thiscall PlayerController_EnterVehicle(int this, char a2);
void __thiscall PlayerInput_UpdateAndSend(int this);
void __cdecl SendPacket_ID_FACTION_WithData(int a1);
int __thiscall Packet_Id107_DispatchSubId(void *this, int payload);
_BYTE *__thiscall PlayerStats_ResetAll(_BYTE *this);
int __thiscall sub_658A9D00(_DWORD); // weak
void __thiscall PlayerStats_SetStatValue(void *this, unsigned __int8 a2, unsigned int a3);
int __thiscall PlayerStats_Init(void *this);
int __thiscall sub_658ACBD0(_DWORD *this, int a2);
_DWORD *__thiscall sub_658ACC00(_DWORD *this, int a2);
int __thiscall sub_658ACCB0(_DWORD); // weak
int __thiscall sub_658ACCC0(_DWORD); // weak
int __thiscall sub_658ACCE0(_DWORD); // weak
int __thiscall sub_658ACD10(_DWORD, _DWORD); // weak
int __thiscall sub_658ACFD0(_DWORD *this, int a2);
int __stdcall sub_658AD960(_DWORD, _DWORD); // weak
int __thiscall sub_658AD9B0(_DWORD, _DWORD); // weak
int __thiscall sub_658ADA00(_DWORD); // weak
_DWORD *sub_658ADBD0();
_DWORD *__thiscall sub_658AE1C0(_DWORD *this);
_DWORD *__thiscall sub_658AE300(_DWORD *this);
int __thiscall sub_658AE420(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_658AFDB0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_658AFE30(_DWORD); // weak
_DWORD *__thiscall sub_658AFF70(_DWORD *this, int a2);
float *__thiscall sub_658B03A0(float *this);
void __cdecl sub_658B0490(void *a1);
int __thiscall sub_658B0590(_DWORD); // weak
void __thiscall sub_658B0730(_DWORD *this, int a2, char a3);
int sub_658B0840(void); // weak
_DWORD *__thiscall sub_658B0AD0(_DWORD *this);
void __thiscall sub_658B0C40(char *this);
void __thiscall sub_658B0C90(_DWORD *this);
float *__thiscall ServerMenuMgr_Ctor(float *this);
void __thiscall ServerMenuMgr_Dtor(char *this);
int __cdecl sub_658B1610(_DWORD); // weak
int __stdcall sub_658B16B0(_DWORD); // weak
int __cdecl sub_658B1730(_DWORD); // weak
int __thiscall sub_658B18A0(_DWORD); // weak
int __stdcall sub_658B1990(_DWORD); // weak
_DWORD *RBTreeNode_Alloc48();
_DWORD *__thiscall sub_658B20B0(_DWORD *this, _DWORD *a2, int a3);
void __stdcall sub_658B2370(void **a1);
int **__thiscall sub_658B2670(int ***this, int **a2, int *a3, int *a4);
int __thiscall AESContext_ClearTree(int this);
_DWORD *__thiscall AESContext_Ctor(_DWORD *this);
int __thiscall nullsub_12(_DWORD); // weak
// void __userpurge MsgId_6C_ResourceHandler(_BYTE *a1@<ecx>, int a2@<edi>, int a3);
_DWORD *RBTreeNode_Alloc12();
int __thiscall sub_658B4CA0(_DWORD); // weak
float *__thiscall sub_658B5910(float *this);
float *__thiscall WeaponSlotBase_Ctor(float *this);
int __thiscall nullsub_13(_DWORD, _DWORD); // weak
int __stdcall sub_658B5FD0(unsigned __int8 a1);
int __stdcall sub_658B5FF0(unsigned __int8 a1);
// _DWORD __thiscall Concurrency::details::TaskStack::TaskStack(#178 *__hidden this); idb
int __cdecl sub_658B6320(int (__thiscall ***a1)(_DWORD, int));
int __cdecl sub_658B6340(int (__thiscall ***a1)(_DWORD, int));
int __thiscall sub_658B6360(void *this);
int __thiscall sub_658B6370(_DWORD *this);
BOOL __thiscall sub_658B6380(_DWORD *this);
BOOL __thiscall sub_658B6390(_DWORD *this);
BOOL __thiscall sub_658B63A0(_DWORD *this, char a2);
_DWORD *__thiscall sub_658B63C0(_DWORD *this, char a2);
int __thiscall sub_658B63E0(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
int __thiscall sub_658B6400(void *this);
int __thiscall sub_658B6410(_DWORD *this);
BOOL __thiscall sub_658B6420(_DWORD *this);
BOOL __thiscall sub_658B6430(_DWORD *this);
BOOL __thiscall sub_658B6440(_DWORD *this, char a2);
_DWORD *__thiscall sub_658B6460(_DWORD *this, char a2);
int __thiscall sub_658B6480(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
int __thiscall sub_658B64A0(void *this);
int __thiscall sub_658B64B0(_DWORD *this);
BOOL __thiscall sub_658B64C0(_DWORD *this);
BOOL __thiscall sub_658B64D0(_DWORD *this);
BOOL __thiscall sub_658B64E0(_DWORD *this, char a2);
_DWORD *__thiscall sub_658B6500(_DWORD *this, char a2);
int __thiscall sub_658B6520(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
int __thiscall sub_658B6540(void *this);
int __thiscall sub_658B6550(_DWORD *this);
BOOL __thiscall sub_658B6560(_DWORD *this);
BOOL __thiscall sub_658B6570(_DWORD *this);
BOOL __thiscall sub_658B6580(_DWORD *this, char a2);
_DWORD *__thiscall sub_658B65A0(_DWORD *this, char a2);
int __thiscall sub_658B65C0(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
int __thiscall sub_658B65E0(void *this);
int __thiscall sub_658B65F0(_DWORD *this);
BOOL __thiscall sub_658B6600(_DWORD *this);
BOOL __thiscall sub_658B6610(_DWORD *this);
BOOL __thiscall sub_658B6620(_DWORD *this, char a2);
_DWORD *__thiscall sub_658B6640(_DWORD *this, char a2);
int __thiscall sub_658B6660(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
int __thiscall sub_658B6680(void *this);
int __thiscall sub_658B6690(_DWORD *this);
BOOL __thiscall sub_658B66A0(_DWORD *this);
BOOL __thiscall sub_658B66B0(_DWORD *this);
BOOL __thiscall SoundPool1_HasBit(_DWORD *this, char a2);
_DWORD *__thiscall sub_658B66E0(_DWORD *this, char a2);
int __thiscall SoundPool1_GetNext(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
int __thiscall sub_658B6720(void *this);
int __thiscall sub_658B6730(_DWORD *this);
BOOL __thiscall SoundPool1_IsEmpty(_DWORD *this);
BOOL __thiscall sub_658B6750(_DWORD *this);
BOOL __thiscall SoundPool2_HasBit(_DWORD *this, char a2);
_DWORD *__thiscall sub_658B6780(_DWORD *this, char a2);
int __thiscall SoundPool2_GetNext(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
int __thiscall sub_658B67C0(void *this);
int __thiscall sub_658B67D0(_DWORD *this);
BOOL __thiscall SoundPool2_IsEmpty(_DWORD *this);
BOOL __thiscall sub_658B67F0(_DWORD *this);
BOOL __thiscall SoundPool3_HasBit(_DWORD *this, char a2);
_DWORD *__thiscall sub_658B6820(_DWORD *this, char a2);
int __thiscall SoundPool3_GetNext(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
int __thiscall sub_658B6860(void *this);
int __thiscall sub_658B6870(_DWORD *this);
BOOL __thiscall SoundPool3_IsEmpty(_DWORD *this);
BOOL __thiscall sub_658B6890(_DWORD *this);
BOOL __thiscall SoundPool4_HasBit(_DWORD *this, char a2);
_DWORD *__thiscall sub_658B68C0(_DWORD *this, char a2);
int __thiscall SoundPool4_GetNext(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
int __thiscall sub_658B6900(void *this);
int __thiscall sub_658B6910(_DWORD *this);
BOOL __thiscall SoundPool4_IsEmpty(_DWORD *this);
BOOL __thiscall sub_658B6930(_DWORD *this);
BOOL __thiscall SoundPool5_HasBit(_DWORD *this, char a2);
_DWORD *__thiscall sub_658B6960(_DWORD *this, char a2);
int __thiscall SoundPool5_GetNext(_DWORD *this);
// int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD); weak
int __thiscall sub_658B69A0(void *this, unsigned int a2);
int __thiscall sub_658B69F0(void *this, int a2);
int __thiscall sub_658B6A10(int *this);
int __thiscall sub_658B6A40(int *this);
int __thiscall sub_658B6A60(_DWORD *this);
int __thiscall sub_658B6A70(_DWORD *this);
int __thiscall sub_658B6A90(_DWORD *this, int a2);
int __thiscall sub_658B6AD0(_DWORD *this, int a2);
_DWORD *__thiscall sub_658B6B10(_DWORD *this, int a2, int a3);
int __thiscall sub_658B6B30(void *this, unsigned int a2);
int __thiscall sub_658B6B80(void *this, int a2);
int __thiscall sub_658B6BA0(int *this);
int __thiscall sub_658B6BD0(int *this);
int __thiscall sub_658B6BF0(_DWORD *this);
int __thiscall sub_658B6C00(_DWORD *this);
int __thiscall sub_658B6C20(_DWORD *this, int a2);
int __thiscall sub_658B6C60(_DWORD *this, int a2);
_DWORD *__thiscall sub_658B6CA0(_DWORD *this, int a2, int a3);
int __thiscall sub_658B6CC0(void *this, unsigned int a2);
int __thiscall sub_658B6D10(void *this, int a2);
int __thiscall sub_658B6D30(int *this);
int __thiscall sub_658B6D60(int *this);
int __thiscall sub_658B6D80(_DWORD *this);
int __thiscall sub_658B6D90(_DWORD *this);
int __thiscall sub_658B6DB0(_DWORD *this, int a2);
int __thiscall sub_658B6DF0(_DWORD *this, int a2);
_DWORD *__thiscall sub_658B6E30(_DWORD *this, int a2, int a3);
int __thiscall sub_658B6E50(void *this, unsigned int a2);
int __thiscall sub_658B6EA0(void *this, int a2);
int __thiscall sub_658B6EC0(int *this);
int __thiscall sub_658B6EF0(int *this);
int __thiscall sub_658B6F10(_DWORD *this);
int __thiscall sub_658B6F20(_DWORD *this);
int __thiscall sub_658B6F40(_DWORD *this, int a2);
int __thiscall sub_658B6F80(_DWORD *this, int a2);
_DWORD *__thiscall sub_658B6FC0(_DWORD *this, int a2, int a3);
int __thiscall sub_658B6FE0(void *this, unsigned int a2);
int __thiscall sub_658B7030(void *this, int a2);
int __thiscall sub_658B7050(int *this);
int __thiscall sub_658B7080(int *this);
int __thiscall sub_658B70A0(_DWORD *this);
int __thiscall sub_658B70B0(_DWORD *this);
int __thiscall sub_658B70D0(_DWORD *this, int a2);
int __thiscall sub_658B7110(_DWORD *this, int a2);
_DWORD *__thiscall sub_658B7150(_DWORD *this, int a2, int a3);
int __thiscall sub_658B7170(void *this, unsigned int a2);
int __thiscall sub_658B71C0(void *this, int a2);
int __thiscall sub_658B71E0(int *this);
int __thiscall sub_658B7210(int *this);
int __thiscall sub_658B7230(_DWORD *this);
int __thiscall sub_658B7240(_DWORD *this);
int __thiscall sub_658B7260(_DWORD *this, int a2);
int __thiscall sub_658B72A0(_DWORD *this, int a2);
_DWORD *__thiscall sub_658B72E0(_DWORD *this, int a2, int a3);
int __thiscall sub_658B7300(void *this, unsigned int a2);
int __thiscall sub_658B7350(void *this, int a2);
int __thiscall sub_658B7370(int *this);
int __thiscall sub_658B73A0(int *this);
int __thiscall sub_658B73C0(_DWORD *this);
int __thiscall sub_658B73D0(_DWORD *this);
int __thiscall sub_658B73F0(_DWORD *this, int a2);
int __thiscall sub_658B7430(_DWORD *this, int a2);
_DWORD *__thiscall sub_658B7470(_DWORD *this, int a2, int a3);
int __thiscall sub_658B7490(void *this, unsigned int a2);
int __thiscall sub_658B74D0(void *this, int a2);
int __thiscall sub_658B74F0(int *this);
int __thiscall sub_658B7520(int *this);
int __thiscall sub_658B7540(_DWORD *this);
int __thiscall sub_658B7550(_DWORD *this);
int __thiscall FXNode3_InsertBefore(_DWORD *this, int a2);
int __thiscall sub_658B75B0(_DWORD *this, int a2);
_DWORD *__thiscall sub_658B75F0(_DWORD *this, int a2, int a3);
int __thiscall sub_658B7610(void *this, unsigned int a2);
int __thiscall FXPool4_GetSlotOffset(void *this, int a2);
int __thiscall FXPool4_FindHighestBit(int *this);
int __thiscall FXPool4_FindFirstZeroBit(int *this);
int __thiscall sub_658B76D0(_DWORD *this);
int __thiscall FXNode4_Unlink(_DWORD *this);
int __thiscall FXNode4_InsertBefore(_DWORD *this, int a2);
int __thiscall sub_658B7740(_DWORD *this, int a2);
_DWORD *__thiscall sub_658B7780(_DWORD *this, int a2, int a3);
int __thiscall sub_658B77A0(void *this, unsigned int a2);
int __thiscall FXPool5_GetSlotOffset(void *this, int a2);
int __thiscall FXPool5_FindHighestBit(int *this);
int __thiscall FXPool5_FindFirstZeroBit(int *this);
int __thiscall sub_658B7850(_DWORD *this);
int __thiscall FXNode5_Unlink(_DWORD *this);
int __thiscall FXNode5_InsertBefore(_DWORD *this, int a2);
int __thiscall sub_658B78C0(_DWORD *this, int a2);
_DWORD *__thiscall sub_658B7900(_DWORD *this, int a2, int a3);
void *__cdecl ArrayAlloc_DwordArray(int a1);
void *__cdecl ArrayAlloc_DwordArray2(int a1);
char *__thiscall WeaponInstance_Ctor(char *this);
void __thiscall WeaponInstance_Dtor(_DWORD *this);
float *__thiscall WeaponRecoilData_Ctor(float *this);
bool __stdcall SoundPool_CheckTypeValid(int a1, unsigned __int8 a2);
void __thiscall SoundPool_UpdateAllTimers(int *this);
void __thiscall SoundPool_ReleaseAll(_DWORD *this);
int __thiscall MsgId6B_LookupHandler(char *this, unsigned __int8 a2, int a3);
void __thiscall MsgId_6B_Handler(char *this, int a2);
void __thiscall FXArray_Delete(void **this);
_DWORD *__thiscall FXPool1_FindFX(int *this, _DWORD *a2, unsigned int a3);
int __thiscall FXPool1_MoveToFreeList(int *this, _DWORD *a2);
BOOL __thiscall FXPool1_HasSlot(unsigned int *this);
int __thiscall FXPool1_AllocSlot(int *this, int a2);
_DWORD *__thiscall FXPool2_FindFX(int *this, _DWORD *a2, unsigned int a3);
int __thiscall FXPool2_MoveToFreeList(int *this, _DWORD *a2);
BOOL __thiscall FXPool2_HasSlot(unsigned int *this);
int __thiscall FXPool2_AllocSlot(int *this, int a2);
_DWORD *__thiscall FXPool3_FindFX(int *this, _DWORD *a2, unsigned int a3);
int __thiscall FXPool3_MoveToFreeList(int *this, _DWORD *a2);
BOOL __thiscall FXPool3_HasSlot(unsigned int *this);
int __thiscall FXPool3_AllocSlot(int *this, int a2);
_DWORD *__thiscall FXPool4_FindFX(int *this, _DWORD *a2, unsigned int a3);
int __thiscall FXPool4_MoveToFreeList(int *this, _DWORD *a2);
BOOL __thiscall FXPool4_HasSlot(unsigned int *this);
int __thiscall FXPool4_AllocSlot(int *this, int a2);
_DWORD *__thiscall FXPool5_FindFX(int *this, _DWORD *a2, unsigned int a3);
int __thiscall FXPool5_MoveToFreeList(int *this, _DWORD *a2);
BOOL __thiscall FXPool5_HasSlot(unsigned int *this);
int __thiscall FXPool5_AllocSlot(int *this, int a2);
_DWORD *__thiscall SoundPool1_FindFX(_DWORD *this, _DWORD *a2, unsigned int a3);
int __thiscall SoundPool1_MoveToFreeList(int *this, _DWORD *a2);
BOOL __thiscall SoundPool1_ValidateSlot(_DWORD *this);
int __thiscall SoundPool1_AllocSlot(int *this, int a2);
_DWORD *__thiscall SoundPool2_FindFX(_DWORD *this, _DWORD *a2, unsigned int a3);
int __thiscall SoundPool2_MoveToFreeList(int *this, _DWORD *a2);
BOOL __thiscall SoundPool2_ValidateSlot(_DWORD *this);
int __thiscall SoundPool2_AllocSlot(int *this, int a2);
_DWORD *__thiscall SoundPool3_FindFX(_DWORD *this, _DWORD *a2, unsigned int a3);
int __thiscall SoundPool3_MoveToFreeList(int *this, _DWORD *a2);
BOOL __thiscall SoundPool3_ValidateSlot(_DWORD *this);
int __thiscall SoundPool3_AllocSlot(int *this, int a2);
_DWORD *__thiscall SoundPool4_FindFX(_DWORD *this, _DWORD *a2, unsigned int a3);
int __thiscall SoundPool4_MoveToFreeList(int *this, _DWORD *a2);
BOOL __thiscall SoundPool4_ValidateSlot(_DWORD *this);
int __thiscall SoundPool4_AllocSlot(int *this, int a2);
_DWORD *__thiscall SoundPool5_FindFX(_DWORD *this, _DWORD *a2, unsigned int a3);
int __thiscall SoundPool5_MoveToFreeList(int *this, _DWORD *a2);
BOOL __thiscall SoundPool5_ValidateSlot(_DWORD *this);
int __thiscall SoundPool5_AllocSlot(int *this, int a2);
_DWORD *SoundPool_AllocSoundNode_XL();
_DWORD *SoundPool_AllocSoundNode_Large();
_DWORD *SoundPool_AllocSoundNode_Medium();
_DWORD *SoundPool_AllocSoundNode_Small();
_DWORD *SoundPool_AllocSoundNode_Tiny();
_DWORD *FXPool_AllocFXNode_Large();
_DWORD *FXPool_AllocFXNode_Medium();
_DWORD *FXPool_AllocFXNode_Small();
_DWORD *FXPool_AllocFXNode_Tiny();
_DWORD *FXPool_AllocFXNode_Mini();
int __thiscall SoundPool_Initialize(void *this, unsigned int a2);
_DWORD *__thiscall WeaponBaseState_Ctor(_DWORD *this);
_DWORD *__thiscall WeaponMeleeState_Ctor(_DWORD *this);
_DWORD *__thiscall WeaponRangedState_Ctor(_DWORD *this);
float *__thiscall ParticleFX_Ctor(float *this);
float *__thiscall LightInstance_Ctor(float *this);
float *__thiscall LightFX_Ctor(float *this);
char *__thiscall FXBase_Ctor(char *this);
int __thiscall WeaponSlot_ValidateAllSlots(char *this);
void __thiscall WeaponMgr_ShutdownAndReset(int *this);
int __thiscall WeaponMgr_ClearAllSlots(_DWORD *this);
void __thiscall FXPool1_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3);
void __thiscall FXPool2_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3);
void __thiscall FXPool3_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3);
void __thiscall FXPool4_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3);
void __thiscall FXPool5_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3);
void __thiscall FXPool6_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3);
void __thiscall FXPool7_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3);
void __thiscall FXPool8_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3);
void __thiscall FXPool9_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3);
void __thiscall FXPool10_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3);
_DWORD *__thiscall FXList1_AllocNode(int *this);
_DWORD *__thiscall FXList2_AllocNode(int *this);
_DWORD *__thiscall FXList3_AllocNode(int *this);
_DWORD *__thiscall FXList4_AllocNode(int *this);
_DWORD *__thiscall FXList5_AllocNode(int *this);
_DWORD *__thiscall SoundList1_AllocNode(int *this);
_DWORD *__thiscall SoundList2_AllocNode(int *this);
_DWORD *__thiscall SoundList3_AllocNode(int *this);
_DWORD *__thiscall SoundList4_AllocNode(int *this);
_DWORD *__thiscall SoundList5_AllocNode(int *this);
float *__thiscall SkyFX_Ctor(float *this);
void __cdecl FXMgr_ReturnToPool(int (__thiscall ***a1)(_DWORD, int));
int *__thiscall FXPool_AllocLargeFX(int *this, int a2, int a3);
int *__thiscall FXPool_AllocMediumFX(int *this, int a2, int a3);
int *__thiscall FXPool_AllocSmallFX(int *this, int a2, int a3);
int *__thiscall FXPool_AllocBaseFX(int *this, int a2, int a3);
int *__thiscall FXPool_AllocServerMenuFX(int *this, int a2, int a3);
int *__thiscall WeaponPool_GetOrCreateType6(int *this, int a2, int a3);
int *__thiscall WeaponPool_GetOrCreateType7(int *this, int a2, int a3);
int *__thiscall WeaponPool_GetOrCreateType8(int *this, int a2, int a3);
int *__thiscall WeaponPool_GetOrCreateType9(int *this, int a2, int a3);
int *__thiscall WeaponPool_GetOrCreateType10(int *this, int a2, int a3);
int *__thiscall WeaponFactory_CreateByType(void *this, unsigned __int8 a2, int a3, int a4, int a5);
void __thiscall Msg2_PreDispatch(void *this, int a2, int *a3);
int __thiscall ShaderMgr_QueryShaderVersion(void *this);
int __stdcall ShaderMgr_LoadShader(int a1, int a2, int a3, int a4, int a5);
int __stdcall ShaderMgr_LoadShaderFallback(int a1, int a2, int a3, int a4, int a5, int a6);
int __thiscall ScreenEffect_GetSaturation(int *this, float a2);
char __thiscall ScreenEffect_SetEnabled(int this);
int __thiscall Concurrency::details::StructuredWorkStealingQueue<Concurrency::details::_UnrealizedChore,Concurrency::details::_CriticalNonReentrantLock>::Reinitialize(_DWORD); // weak
int __thiscall ShaderMgr_InitializeShaders(int *this);
int __thiscall sub_658BD990(_DWORD); // weak
int __thiscall nullsub_17(_DWORD); // weak
void SoundMgr_QueuePlaySound();
int __stdcall SoundDef_SelectRandomSound(unsigned int __return_address);
int *__stdcall SoundDef_GetValidEntry(unsigned int a1);
void __thiscall SoundMgr_PlaySoundByIndex(void *this, unsigned int __saved_registers);
void __thiscall SoundMgr_PlaySoundAtObject(void *this, int a2, char *Source, float a4, int a5);
void __stdcall SoundDef_PlayWithParams(int __saved_registers, int __return_address);
void __stdcall SoundMgr_PlaySoundAtPosition(float *a1, char *Source, float a3, int a4, char a5);
void __thiscall SoundMgr_PlaySoundBySoundDef(void *this, int a2, unsigned int a3);
unsigned int __thiscall FXPool_InsertOrReplace(unsigned int *this, int a2);
int __thiscall FXPool_FindAndRelease(_DWORD *this, int a2);
void __cdecl ArrayDelete_Wrapper1(void *a1);
void __cdecl ArrayDelete_Wrapper2(void *a1);
void __thiscall WeaponArray_FreeAll(void **this);
char TimeMgr_ResetSystemTime();
char AntiCheat_CheckVMware();
LONG __thiscall PlayerStats_SetTargetAndRefresh(void *this, int a2, char a3);
Packet_ID_WORLD_LOGIN *__thiscall Packet_ID_WORLD_LOGIN_Ctor(Packet_ID_WORLD_LOGIN *this);
char __stdcall StatGroup_SetStatGroup8(char a1);
int __thiscall GameState_ShowTravelMessage(void *this);
// LONG __usercall PlayerController_OnDeath@<eax>(_BYTE *this@<ecx>, double a2@<st1>);
char __thiscall PlayerController_OnRespawn(int *this);
void __thiscall WorldLogin_LoadApartmentWorld(void *this);
char Login_SendRequest_Throttled();
void __thiscall AntiCheat_PeriodicCheck(float *this);
char __thiscall Packet_ID_WORLD_LOGIN_Read(Packet_ID_WORLD_LOGIN *this, int payload);
char __thiscall Packet_ID_WORLD_LOGIN_Write(Packet_ID_WORLD_LOGIN *this);
int __stdcall LoginUI_ShowMessage(int a1);
int SendPacket_ID_0x6F_RequestRespawn();
bool __thiscall WorldLogin_StateTick(float *this);
int __thiscall WorldLoginReturn_HandleAddress(void *this, unsigned __int8 worldAddrFlag, unsigned int worldAddrIp, unsigned __int16 worldAddrPort);
int __thiscall WorldLogin_StateMachineTick(float *this);
// void __usercall Login_OnSubmit(int a1@<eax>, void (__cdecl *a2)(int, void *)@<edx>, int a3@<ebp>, _BYTE *a4@<esi>);
int __thiscall TravelMgr_HandleAction(float *this, int a2);
_BYTE *__thiscall GameState_Ctor(_BYTE *this);
int __thiscall sub_658C1810(_DWORD); // weak
int __thiscall TravelMgrClient_OnMessage(float *this, int a2);
LONG __thiscall NetworkMgr_AddPacketToQueue(char *this, int a2);
int SendPacket_ID_0xA5_Unknown();
int __thiscall j_SharedMem_Release_0(_DWORD); // weak
unsigned int __thiscall SharedMem_UpdateTargetSlot(void *this, int a2);
bool __thiscall Inventory_CheckSlotAvailable(void *this, char a2, unsigned __int8 a3);
float *__thiscall Transform_CopyQuatAndPos(float *this, float *a2, float *a3);
void __cdecl SendPacket_ID_0x90_Position(int a1, int a2);
int __thiscall MsgId_8F_Handler(float *this, float a2, float a3, float a4, float a5, float a6, float a7, float a8);
int __thiscall nullsub_19(_DWORD); // weak
float *__thiscall CameraState_SetFOV(int this, float *a2);
BOOL __thiscall CameraState_IsActive(_DWORD *this);
int __thiscall sub_658C2570(_DWORD); // weak
void __thiscall CameraState_UpdateLerp(float *this);
float *__thiscall CameraState_SetRotation(int this, float *a2);
float *__thiscall CameraParams_Init(float *this);
float *__thiscall CameraParams_Reset(float *this);
float *__thiscall EncVarSlot_SetVec4(int this, float *a2);
int __thiscall StatSlot_EncodeAndCopy(int this, _DWORD *a2);
int __thiscall EncVarSlot_SetStructE8(int this, const void *a2);
int __thiscall StatBlob_WriteEncoded(int this, const void *a2);
bool __thiscall EncVarSlot_ValidateCopies(_DWORD *this);
WorldLoginReturnAddrPacked *__thiscall StatGroup_Init(WorldLoginReturnAddrPacked *this, size_t a2, size_t a3, size_t a4);
BOOL __thiscall StatGroup_ValidateCopies(unsigned int *this);
char __thiscall EncVarMgr_SetInt(_DWORD *this, unsigned __int8 a2, int a3);
char __thiscall EncVarMgr_SetFloat(_DWORD *this, char a2, float a3);
unsigned __int8 __thiscall EncVarMgr_SetVec4(_DWORD *this, unsigned __int8 a2, float *a3);
unsigned __int8 __thiscall StatContainer_GetSlotValue(_DWORD *this, unsigned __int8 a2, _DWORD *a3);
unsigned __int8 __thiscall EncVarSlotArray_SetByIndex(_DWORD *this, unsigned __int8 a2, const void *a3);
unsigned __int8 __thiscall StatGroup_WriteGroup(_DWORD *this, unsigned __int8 a2, const void *a3);
int __thiscall EncVarMgr_GetInt(_DWORD *this, unsigned __int8 a2);
double __thiscall EncVarMgr_GetFloat(_DWORD *this, unsigned __int8 a2);
_BYTE *__thiscall StatContainer_GetDecodedBlob(_DWORD *this, unsigned __int8 a2);
_BYTE *__thiscall EncVarMgr_GetStructE8(_DWORD *this, unsigned __int8 a2);
_BYTE *__thiscall StatGroup_GetPtr(_DWORD *this, unsigned __int8 a2);
int __thiscall StatGroup_Read(_DWORD *this, char a2, _BYTE *a3);
char __thiscall EncVarMgr_ValidateOrBumpCounter(_DWORD *this, char a2, int a3);
void *__thiscall EncVarSlot_InitByType(void *this, void *a2);
BOOL __thiscall StatGroup_Write(WorldLoginReturnAddrPacked *this, void *Src);
char __thiscall StatGroup_WriteByIndex(unsigned int **this, char a2, void *Src);
char __thiscall StatGroupMgr_InitGroups(_DWORD *this);
_DWORD *__thiscall EncVarMgr_Ctor(_DWORD *this);
float *__thiscall BeamFX_Ctor(float *this);
LONG __stdcall SharedMem_WriteU8_0xA6(unsigned __int8 a1);
int __thiscall j_SharedMem_Release_1(_DWORD); // weak
void __thiscall WeaponZoom_Reset(int this);
void __thiscall WeaponZoom_Reset_Thunk(int this);
LONG __thiscall WeaponFire_SetState(void *this, int a2);
void __thiscall WeaponZoom_Update(int this);
char __thiscall WeaponZoom_ResetIfActive(int this);
bool __stdcall Vec3_IsWithinBounds_511(float *a1);
BOOL WeaponZoom_IsActive();
char *__thiscall Packet_ID_RELOAD_ctor(char *this);
void __thiscall WeaponFire_SetNextFireTimePlus20(float *this);
int __thiscall sub_658C4D30(_DWORD); // weak
int __thiscall WeaponFire_ResetStateAndAim(int this);
LONG __thiscall WeaponFire_QueueState(int *this, int a2, int a3);
LONG __thiscall WeaponFire_PlayEquipSfxAndQueueState4(void *this);
LONG __thiscall Weapon_StopFire(int *this);
float *__stdcall WeaponFire_GetAimVectors(float *a1, float *a2);
int __thiscall sub_658C5080(_DWORD); // weak
int __thiscall WeaponFire_SetCurrentWeaponId(void *this, unsigned __int16 a2);
LONG __thiscall WeaponFire_SetCurrentWeaponIdAndFlag(void *this, unsigned __int16 a2);
bool __thiscall WeaponFire_IsDistanceSqBelowThreshold(void *this, float a2, float a3, float a4);
char __thiscall Packet_ID_RELOAD_write(int this);
int __thiscall WeaponFire_ClearCurrentWeapon(void *this);
char __thiscall WeaponFire_TryReload(_DWORD *this);
char __thiscall WeaponFire_SwitchWeapon(_WORD *this, unsigned __int16 a2);
int __thiscall WeaponFire_Holster(_WORD *this);
void *__thiscall WeaponFire_GetMuzzleFlashPos(void *this, float *a2);
void __thiscall SendPacket_ID_0x66_WeaponFire(int this);
__int16 __thiscall Item_GetWeaponFireDelayStat(_WORD *this, __int16 a2, _DWORD *a3);
int Player_GetCurrentWeaponFireDelayStat();
unsigned int __thiscall WeaponFire_UseAmmoItem(_DWORD *this);
int __thiscall WeaponFire_TryFire(int this, char a2);
int __thiscall WeaponFire_Update(int this);
int __thiscall WeaponFire_HandleState(unsigned __int16 *this, int a2, int a3);
void __thiscall WeaponFire_UpdateTick(int this, int a2, int a3, _DWORD *a4, int a5);
int __thiscall sub_658C7260(_DWORD); // weak
// int __thiscall unknown_libname_528(_DWORD); weak
int __stdcall sub_658C8070(_DWORD); // weak
int __stdcall sub_658C8150(void *Src); // idb
int sub_658C8290();
int __stdcall sub_658C82A0(char *Format, int); // idb
int __cdecl sub_658C8710(int a1, char *Format, int a3); // idb
int __stdcall sub_658C8900(void *Src); // idb
// void __thiscall Concurrency::details::UMSThreadProxy::~UMSThreadProxy(#179 *__hidden this); idb
// char *__thiscall BitStream_InitFromBuffer(char *this, void *Src, size_t Size, char);
int __thiscall BitStream_FreeOwnedBuffer(int this);
int __thiscall sub_658C8EC0(_DWORD); // weak
// int __thiscall unknown_libname_529(_DWORD); weak
char *__thiscall BitStream_WriteBit0(char *this);
char *__thiscall BitStream_WriteBit1(char *this);
bool __thiscall RakNet::BitStream::ReadBit(_DWORD *this);
char *__thiscall BitStream_WriteBits(char *this, char *a2, unsigned int a3, char a4);
char *__thiscall BitStream_WriteBitsCompressed(char *this, char *a2, unsigned int a3, char a4);
char __thiscall BitStream_ReadBits(_DWORD *this, void *a2, unsigned int a3, char a4);
bool __thiscall RakNet::BitStream::ReadCompressed(unsigned int *this, char *a2, unsigned int a3, char a4);
void __thiscall sub_658C9BD0(char *this, int);
int __thiscall sub_658C9F40(_DWORD, _DWORD); // weak
unsigned int __cdecl ByteSwapCopy(int a1, int a2, unsigned int a3);
BOOL __cdecl Net_IsBigEndian();
char sub_658CA150();
// int __thiscall unknown_libname_533(_DWORD); weak
int __thiscall sub_658CA230(_DWORD); // weak
unsigned __int64 Packet_GetHeaderTokenU64();
__int64 sub_658CA290(void); // weak
bool __thiscall SystemAddress_Equals_CS(SystemAddress6 *this, SystemAddress6 *other);
_WORD *__thiscall SystemAddress_SetUnassigned(_WORD *this);
int __stdcall sub_658CB2F0(char *Str); // idb
int __thiscall sub_658CCAA0(_DWORD); // weak
int __thiscall StringCompressor_GenerateTreeFromStrings(void *this, int a2, unsigned int a3, char a4);
char *__thiscall StringCompressor_EncodeString(void *this, char *Str, int a3, char *a4, char a5);
char __thiscall StringCompressor_DecodeString(void *this, _BYTE *a2, signed int a3, unsigned int *a4, char a5);
char __thiscall StringCompressor_DecodeString_ToStdString(void *this, int a2, WorldLoginReturnAddrPacked Size, unsigned int *a4, char a5);
int __thiscall sub_658CE860(_DWORD, _DWORD); // weak
int __thiscall sub_658CE8F0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_658CE9B0(_DWORD, _DWORD); // weak
int __cdecl sub_658CEB10(_DWORD, _DWORD); // weak
int __cdecl sub_658CEBA0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall HuffmanEncodingTree_FreeMemory(_DWORD *this);
int __thiscall HuffmanEncodingTree_GenerateFromFrequencyTable(_DWORD *this, int a2);
char *__thiscall HuffmanEncodingTree_EncodeArray(char **this, int a2, unsigned int a3, char *a4);
unsigned int __thiscall HuffmanEncodingTree_DecodeArray(int *this, _DWORD *a2, unsigned int a3, unsigned int a4, int a5);
int __thiscall sub_658E0B40(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_658E0BE0(_DWORD); // weak
int __thiscall sub_658E0C00(_DWORD); // weak
int __thiscall sub_658E0C40(_DWORD); // weak
int __thiscall sub_658E0C70(_DWORD, _DWORD); // weak
int __thiscall sub_658E0DD0(_DWORD); // weak
int __thiscall sub_658E0E30(_DWORD); // weak
int __cdecl sub_658E0E70(_DWORD, _DWORD, _DWORD); // weak
// int __thiscall unknown_libname_554(_DWORD); weak
int __thiscall sub_658E11F0(_DWORD); // weak
int __thiscall sub_658E1220(_DWORD); // weak
int __thiscall sub_658E1270(_DWORD); // weak
int __cdecl sub_658E1320(_DWORD, _DWORD); // weak
// int __stdcall EnumProcessModules(_DWORD, _DWORD, _DWORD, _DWORD); weak
void (__thiscall ***__cdecl CEF_CreateHandler(int a1))(_DWORD);
bool __cdecl CEF_Initialize(int a1, int a2, int a3, int a4);
void (__thiscall ***__cdecl CEF_CreateBrowserSettings(int a1))(_DWORD);
int __cdecl CEF_PrepareRequestContext(int a1);
LONG __thiscall COMRef_AddRef(_DWORD *this);
LONG __thiscall COMRef_Release(_DWORD *this);
LONG __thiscall COMRef_AddRef2(_DWORD *this);
_DWORD *__thiscall sub_658FFFF0(_DWORD *this, int a2, int a3);
int *__cdecl CEF_CreateBrowserRef(int *a1, int a2);
int *__cdecl CEF_CreateBrowserSync(int *a1, int a2, int a3, int a4, int a5, int a6);
int __stdcall sub_65900D00(int a1);
int __stdcall sub_65900D20(int a1);
int __stdcall sub_65900D40(int a1);
int __cdecl sub_65900DD0(_DWORD, _DWORD); // weak
LONG __thiscall CEF_AddRefAndIncrement(int this);
int sub_65900F50(void); // weak
int sub_65901000(void); // weak
int sub_659010B0(void); // weak
int __thiscall sub_659014C0(_DWORD, _DWORD, _DWORD); // weak
LONG __thiscall CEF_COMAddRef1(_DWORD *this);
LONG __thiscall CEF_COMRelease1(_DWORD *this);
LONG __thiscall CEF_COMAddRef2(_DWORD *this);
int __stdcall sub_659017E0(int a1);
int __stdcall sub_659018C0(int a1);
int __stdcall sub_659019A0(int a1);
int __cdecl sub_65901AB0(_DWORD, _DWORD); // weak
int __cdecl sub_65901B90(_DWORD, _DWORD); // weak
int __stdcall sub_65901DF0(int a1, int a2, _BYTE *a3);
int __stdcall sub_65901EF0(int a1, _DWORD *a2);
_DWORD *__thiscall CEF_App_Ctor(_DWORD *this, int a2);
LONG __thiscall sub_659021F0(int this);
LONG __thiscall CEF_Handler1_AddRef(int this);
LONG __thiscall CEF_Handler2_AddRef(int this);
LONG __thiscall CEF_COM1_AddRef(_DWORD *this);
LONG __thiscall CEF_COM1_Release(_DWORD *this);
LONG __thiscall CEF_COM2_AddRef(_DWORD *this);
LONG __thiscall CEF_COM2_Release(_DWORD *this);
LONG __thiscall CEF_Handler3_AddRef(int this);
LONG __thiscall CEF_Handler4_AddRef(int this);
LONG __thiscall CEF_COM3_AddRef(_DWORD *this);
LONG __thiscall CEF_Handler5_AddRef(int this);
LONG __thiscall CEF_COM4_AddRef(_DWORD *this);
LONG __thiscall CEF_Handler6_AddRef(int this);
int __stdcall sub_65906B90(int a1);
int __stdcall sub_65906BB0(int a1);
int __stdcall sub_65906BD0(int a1);
int __cdecl sub_65906CE0(_DWORD, _DWORD); // weak
LONG __thiscall CEF_Handler7_AddRef(int this);
int sub_65906E60(void); // weak
int sub_65906F10(void); // weak
int sub_65906FC0(void); // weak
int sub_65907070(void); // weak
int sub_65907120(void); // weak
int sub_659071D0(void); // weak
int sub_65907280(void); // weak
int sub_65907330(void); // weak
int sub_659073E0(void); // weak
int sub_65907490(void); // weak
int sub_65907540(void); // weak
int sub_659075F0(void); // weak
int sub_659076A0(void); // weak
LONG __thiscall CEF_COM5_AddRef(_DWORD *this);
int __stdcall sub_65907A70(int a1);
int __stdcall sub_65907B50(int a1);
int __stdcall sub_65907C30(int a1);
int __stdcall sub_65907D10(int a1);
int __stdcall sub_65907DF0(int a1);
int __stdcall sub_65907ED0(int a1);
int __stdcall sub_65907FB0(int a1);
int __stdcall sub_65908090(int a1);
int __stdcall sub_65908170(int a1);
int __stdcall sub_65908250(int a1);
int __stdcall sub_65908330(int a1);
int __stdcall sub_65908410(int a1);
int __stdcall sub_659084F0(int a1);
int __cdecl sub_659085D0(_DWORD, _DWORD); // weak
int __stdcall sub_65908770(int a1, _DWORD *a2, int a3, int *a4);
_DWORD *__thiscall CEF_Client_Ctor(_DWORD *this, int a2);
LONG __thiscall CEF_Handler8_AddRef(int this);
LONG __thiscall CEF_COM6_AddRef(_DWORD *this);
LONG __thiscall CEF_COM6_Release(_DWORD *this);
LONG __thiscall CEF_Handler9_AddRef(int this);
LONG __thiscall CEF_COM7_AddRef(_DWORD *this);
LONG __thiscall sub_6590EDA0(int this);
LONG __thiscall sub_6590F510(_DWORD *this);
LONG __thiscall sub_6590F520(_DWORD *this);
LONG __thiscall sub_6590F530(_DWORD *this);
LONG __thiscall sub_6590F540(_DWORD *this);
LONG __thiscall sub_6590F550(_DWORD *this);
LONG __thiscall sub_6590F560(_DWORD *this);
LONG __thiscall sub_6590F570(_DWORD *this);
LONG __thiscall sub_6590F580(_DWORD *this);
LONG __thiscall sub_65910C40(int this);
bool __thiscall sub_65910F00(_DWORD *this);
LONG __thiscall sub_65911D20(int this);
LONG __thiscall sub_659121F0(_DWORD *this);
LONG __thiscall sub_65912200(_DWORD *this);
bool __thiscall sub_65912DE0(_DWORD *this);
bool __thiscall sub_65913890(_DWORD *this);
LONG __thiscall sub_65913DD0(_DWORD *this);
bool __thiscall sub_65914750(_DWORD *this);
LONG __thiscall sub_65914E10(int this);
LONG __thiscall sub_65916970(int this);
LONG __thiscall sub_65916D60(_DWORD *this);
LONG __thiscall sub_65916D70(_DWORD *this);
LONG __thiscall sub_65916D80(_DWORD *this);
LONG __thiscall sub_65916D90(_DWORD *this);
LONG __thiscall sub_65917930(int this);
LONG __thiscall sub_65917B70(_DWORD *this);
LONG __thiscall sub_659181E0(int this);
LONG __thiscall sub_65918CE0(int this);
LONG __thiscall sub_65919290(_DWORD *this);
LONG __thiscall sub_659192A0(_DWORD *this);
LONG __thiscall sub_659192B0(_DWORD *this);
LONG __thiscall sub_659192C0(_DWORD *this);
LONG __thiscall sub_659192D0(_DWORD *this);
LONG __thiscall sub_659192E0(_DWORD *this);
LONG __thiscall sub_6591A0A0(int this);
LONG __thiscall sub_6591A2E0(_DWORD *this);
LONG __thiscall sub_6591A8D0(int this);
LONG __thiscall sub_6591AE60(int this);
LONG __thiscall sub_6591B0A0(_DWORD *this);
LONG __thiscall sub_6591B890(int this);
LONG __thiscall sub_6591BAD0(_DWORD *this);
LONG __thiscall sub_6591C430(int this);
LONG __thiscall sub_6591CB20(int this);
LONG __thiscall sub_6591D4B0(int this);
LONG __thiscall sub_6591DEC0(int this);
LONG __thiscall sub_6591F9D0(int this);
LONG __thiscall sub_6591FFA0(_DWORD *this);
LONG __thiscall sub_6591FFB0(_DWORD *this);
LONG __thiscall sub_6591FFC0(_DWORD *this);
LONG __thiscall sub_6591FFD0(_DWORD *this);
bool __thiscall sub_65921470(_DWORD *this);
LONG __thiscall sub_65921880(int this);
bool __thiscall sub_65921AE0(_DWORD *this);
LONG __thiscall sub_65922570(_DWORD *this);
LONG __thiscall sub_65922580(_DWORD *this);
LONG __thiscall sub_65922590(_DWORD *this);
LONG __thiscall sub_659225A0(_DWORD *this);
int __thiscall sub_65923070(_DWORD *this);
LONG __thiscall sub_659236E0(_DWORD *this);
LONG __thiscall sub_65924820(_DWORD *this);
bool __thiscall sub_65925270(_DWORD *this);
LONG __thiscall sub_65925580(_DWORD *this);
int __thiscall sub_659258F0(int *this);
bool __thiscall sub_65925930(_DWORD *this);
LONG __thiscall sub_65925F60(int this);
LONG __thiscall sub_659262B0(int this);
bool __thiscall sub_65926480(_DWORD *this);
LONG __thiscall sub_65926E40(_DWORD *this);
LONG __thiscall sub_65928180(int this);
int __thiscall sub_65928500(_DWORD *this);
bool __thiscall sub_65928BD0(_DWORD *this);
bool __thiscall sub_65929A30(_DWORD *this);
int __thiscall sub_6592A0A0(int *this);
bool __thiscall sub_6592A0C0(_DWORD *this);
bool __thiscall sub_6592A890(_DWORD *this);
bool __thiscall sub_6592A9C0(_DWORD *this);
LONG __thiscall sub_6592B5F0(int this);
LONG __thiscall sub_6592B830(_DWORD *this);
int __thiscall sub_6592BC40(_DWORD *this);
bool __thiscall sub_6592C770(_DWORD *this);
bool __thiscall sub_6592CA80(_DWORD *this);
// int __cdecl cef_string_utf16_clear(_DWORD); weak
// int __cdecl cef_string_utf8_to_utf16(_DWORD, _DWORD, _DWORD); weak
// int __cdecl cef_string_ascii_to_utf16(_DWORD, _DWORD, _DWORD); weak
int __thiscall sub_6592D3C0(_DWORD, _DWORD); // weak
int __thiscall sub_6592D440(_BYTE *this, float a2);
int sub_6592DED0(void); // weak
int __thiscall sub_6592E5D0(int this, float *a2, float *a3);
int __thiscall sub_659302E0(_DWORD); // weak
int __thiscall sub_65930630(_DWORD); // weak
char __thiscall sub_65930760(char *Destination, int Source, int a3);
int __thiscall sub_65931980(_DWORD); // weak
int __stdcall ItemTemplate_GetMaxDurability(unsigned __int16 a1);
bool __stdcall EquipSlotMask_HasSlot(char a1, unsigned __int16 a2);
_WORD *__stdcall sub_65932400(char a1, char a2, _WORD *a3);
char __stdcall sub_65932430(unsigned __int16 a1);
int __thiscall sub_65932450(_DWORD, _DWORD); // weak
double __stdcall Item_GetQualityScale(unsigned __int16 a1, unsigned __int8 a2);
char __stdcall sub_65932540(int a1, int a2, int a3, int a4, int a5);
int __stdcall sub_65932750(unsigned __int16 a1);
char __stdcall sub_65932BA0(int a1);
int __stdcall sub_65932C30(int a1);
int __thiscall sub_65932E80(_DWORD *this, __int16 a2);
char __thiscall ItemTemplate_IsFireableTypeAllowlist(_DWORD *this, unsigned __int16 a2);
__int16 __thiscall ItemTemplate_GetAmmoItemId(_DWORD *this, unsigned __int16 a2);
int __thiscall ItemTemplate_GetType(_DWORD *this, unsigned __int16 a2);
int __thiscall ItemTemplate_GetEquipSlot(_DWORD *this, unsigned __int16 a2);
char __thiscall sub_65933150(_DWORD *this, unsigned __int16 a2);
bool __thiscall sub_659331C0(_DWORD *this, unsigned __int16 a2, char a3);
bool __stdcall sub_65933200(__int16 a1, unsigned __int8 a2, unsigned __int8 a3);
bool __thiscall sub_65933270(_DWORD *this, unsigned __int16 a2, int a3);
bool __thiscall ItemTemplate_IsNotFireableTypeAllowlist(_DWORD *this, unsigned __int16 a2);
char __stdcall sub_65933310(unsigned __int16 a1, unsigned __int16 a2, unsigned __int16 a3, unsigned __int8 a4);
bool __stdcall sub_65933490(unsigned __int16 a1);
unsigned __int16 __thiscall sub_65933530(_DWORD *this, unsigned __int16 a2, unsigned __int8 a3, unsigned __int16 a4, char a5, __int16 a6);
bool __thiscall sub_65933880(_DWORD *this, unsigned __int16 a2);
char __thiscall sub_659338C0(_DWORD *this, unsigned __int16 a2);
char __thiscall sub_65933B90(_DWORD *this, unsigned __int16 a2, unsigned __int8 a3, char a4, _BYTE *a5);
unsigned __int16 __thiscall sub_65933DC0(_DWORD *this, unsigned __int16 a2, char a3, int a4, char a5, char a6, unsigned __int8 a7);
char __thiscall sub_65933EC0(_DWORD *this, unsigned __int16 a2);
char *__cdecl sub_65933F80(char *a1, char *a2, const void *a3);
char *__cdecl sub_65934000(char *a1, char *a2, char *a3);
_DWORD *__cdecl sub_65934070(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl sub_659340F0(_DWORD *a1, _DWORD *a2, _DWORD *a3);
bool __thiscall ItemTemplate_IsType3or4(_DWORD *this, unsigned __int16 a2);
bool __thiscall sub_65934160(_DWORD *this, unsigned __int16 a2);
bool __thiscall sub_659341A0(_DWORD *this, unsigned __int16 a2);
int __thiscall sub_659341E0(_DWORD, _DWORD); // weak
bool __thiscall sub_65934270(_DWORD *this, unsigned __int16 a2);
bool __thiscall sub_659342B0(_DWORD *this, unsigned __int16 a2);
bool __thiscall sub_659342F0(_DWORD *this, unsigned __int16 a2);
bool __thiscall sub_65934330(_DWORD *this, unsigned __int16 a2);
bool __stdcall sub_65934370(unsigned __int16 a1);
int __thiscall ItemTemplate_GetSubType(_DWORD *this, unsigned __int16 a2);
bool __thiscall ItemTemplate_CanUse(_DWORD *this, unsigned __int16 a2, unsigned __int8 a3, unsigned int a4, unsigned __int8 a5, char a6, char a7);
char __thiscall ItemTemplate_IsRangedOrAmmoType(_DWORD *this, unsigned __int16 a2);
bool __thiscall sub_65934520(_DWORD *this, int a2, int a3);
bool __thiscall sub_65934580(_DWORD *this, int a2);
bool __thiscall sub_65934600(_DWORD *this, unsigned __int16 a2);
char *__cdecl sub_659346B0(char *a1, char *a2, char *a3);
// char *__usercall sub_659346E0@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
_DWORD *__cdecl sub_65934760(int a1, int a2, _DWORD *a3);
void __cdecl sub_65934790(_DWORD *a1, int a2, _DWORD *a3);
bool __stdcall sub_659347F0(unsigned __int16 a1);
bool __thiscall ItemId_IsUsable(_DWORD *this, unsigned __int16 a2);
char *__stdcall sub_65934970(char *a1, int a2, char *a3);
_DWORD *__stdcall sub_659349E0(_DWORD *a1, int a2, _DWORD *a3);
char *__stdcall sub_65934A50(char *a1, char *a2, char *a3);
_DWORD *__stdcall sub_65934A80(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __thiscall sub_65934AB0(char **this, int a2, unsigned int a3, void *a4);
void __thiscall sub_65934D20(int this, char *a2, unsigned int a3, int *a4);
_DWORD *__thiscall sub_65934F50(char **this, _DWORD *a2, int a3, void *a4);
int __thiscall sub_65935010(_DWORD *this, _DWORD *a2, char a3, int a4, char a5);
char *__thiscall sub_65938680(char **this, char *a2);
void __thiscall sub_65938710(char **this, int *a2);
__int16 __thiscall sub_65938820(int *this, int a2);
__int16 __thiscall sub_659388F0(int *this, int a2);
__int16 __thiscall sub_659389C0(int *this, int a2);
char __thiscall sub_65938FC0(_DWORD *this, unsigned __int16 a2, char **a3);
char *__thiscall sub_65939640(char **this, char a2, int a3);
char __stdcall Item_AddArmorBaseStats(unsigned __int16 a1, char **a2);
const char *__cdecl sub_6593A000(char a1);
// int __thiscall unknown_libname_648(_DWORD); weak
int __thiscall sub_6593A2D0(_DWORD *this, char *a2, unsigned int a3, unsigned int *a4);
unsigned int __thiscall sub_6593A400(void **this);
int __thiscall sub_6593A4C0(int this);
int __thiscall sub_6593A4E0(int this, int a2, char a3, char a4, int a5);
int __thiscall sub_6593A550(_BYTE *this, int a2);
int __thiscall sub_6593A620(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6593A7A0(_DWORD *this, int a2);
int __thiscall sub_6593A7F0(HMODULE *this);
int __thiscall sub_6593A9E0(_DWORD *this, _DWORD *a2, _DWORD *a3, int a4);
int __thiscall sub_6593AA90(_DWORD *this, _DWORD *a2, int a3);
int __thiscall sub_6593B120(_DWORD, _DWORD); // weak
int __thiscall sub_6593B690(_DWORD, _DWORD); // weak
int __thiscall sub_6593BD90(_DWORD, _DWORD); // weak
_DWORD *__thiscall sub_6593BE20(_DWORD *this, int a2, int a3);
void __thiscall sub_6593C190(int this, unsigned int *bs);
void __thiscall Packet_ID_STORAGE_read_structA(char *this, unsigned int *bs);
unsigned int __thiscall sub_6593C420(char *this, _DWORD *a2, _DWORD *a3);
void __thiscall sub_6593C560(_DWORD *this, int a2, int ****a3, _DWORD *a4, _DWORD *a5, int a6);
int sub_6593C900(void); // weak
int __stdcall sub_6593C960(int, int, float, __int16, int); // idb
char __thiscall ItemList_HasFireableTypeAllowlist(_DWORD *this);
void __thiscall ItemsAddedEntry_Write(ItemsAddedEntry *this, unsigned int *bs);
int __thiscall ItemsAddedPayload_GetUsedCount(unsigned __int16 *this);
__int16 __thiscall ItemsAddedPayload_GetVariantCountByItemType(_WORD *this, char a2);
__int16 __thiscall ItemsAddedPayload_GetVariantCountByTemplateId(_WORD *this, __int16 a2);
unsigned int __thiscall ItemsAddedPayload_GetRemainingCapacity(unsigned __int16 *this);
int __thiscall ItemsAddedPayload_FindEntryByItemStructA(_DWORD *this, int a2);
void __thiscall ItemsAddedPayload_Write(ItemsAddedPayload *this, unsigned int *bs);
int __thiscall sub_6593D460(_DWORD *this, unsigned int a2);
char *__thiscall U16AndU32List_Write(int this, char *a2);
char __thiscall ItemList_FindEntryById_CopyEntry(_WORD *this, __int16 a2, _DWORD *a3);
char __thiscall Read_u32c_list_u16count(int *this, unsigned int *a2);
int __thiscall sub_6593D9A0(_WORD *this, __int16 a2, _DWORD *a3);
int *__thiscall sub_6593DB30(int ***this, int *a2, int *a3);
int *__thiscall List_CopyEntriesLimited(int **this, _DWORD *a2, int *a3);
char __thiscall ItemsAddedPayload_FindEntryByVariantId(_WORD *this, int a2, _DWORD *a3);
char __thiscall ItemsAddedPayload_InsertEntriesForVariantIdSet(_WORD *this, int a2, _DWORD *a3);
int __stdcall sub_6593E000(_DWORD); // weak
int __thiscall sub_6593E080(_DWORD, _DWORD); // weak
int *__thiscall sub_6593E110(_WORD *this, int *a2);
int *__thiscall sub_6593E160(_WORD *this, _DWORD *a2);
char __thiscall ItemsAddedEntry_Read(ItemsAddedEntry *this, unsigned int *bs);
char __thiscall sub_6593E450(int **this, int **a2, int *a3);
_DWORD *__stdcall sub_6593E860(int a1, int a2, int a3);
void __cdecl sub_6593E900(int ***a1, int a2, char *a3);
char __thiscall ItemStatList_AddOrAccumulate2(char **this, int *a2);
unsigned int __thiscall ItemStatList_AddFromList2(char **this, int a2);
void __thiscall ItemList_AccumulateStat39Lists(_DWORD *this, char **a2, _DWORD *a3);
int __thiscall sub_6593ED50(_WORD *this, _DWORD *a2);
void __thiscall sub_6593EE50(_DWORD *this);
char __thiscall sub_6593F010(_DWORD *this, int a2, _DWORD *a3);
char __thiscall sub_6593F120(_DWORD *this, int a2);
int __thiscall sub_6593F3A0(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_6593F5E0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
char __thiscall sub_6593F8B0(_DWORD *this, int a2, int a3, _DWORD *a4, _WORD *a5);
_DWORD *__thiscall sub_6593FAC0(_DWORD *this, _DWORD *a2, int a3, int a4);
void __thiscall ItemsAddedEntryVec_Push(int ****this, char *a2);
bool __thiscall sub_6593FBB0(int ****this, unsigned __int16 *a2);
char __thiscall sub_6593FC80(int this, int a2, int *a3);
char __thiscall sub_6593FD50(int ****this, _WORD *a2);
char __thiscall sub_6593FE50(int ****this, int a2);
void __thiscall sub_6593FE90(int ****this, _WORD *a2, int a3);
char __thiscall sub_6593FFE0(int ****this, _DWORD *a2, int a3, char *a4);
char __thiscall sub_65940180(int ****this, _DWORD *a2, int a3, int a4, _BYTE *a5);
char __thiscall sub_659403B0(int ****this, int *a2);
void __thiscall ItemList_Read(ItemsAddedPayload *this, unsigned int *bs);
int __thiscall sub_659407D0(_DWORD *this, int a2, int a3);
int __thiscall sub_65940BE0(_DWORD, _DWORD, _DWORD); // weak
void *__thiscall sub_65941410(void *this, int Value);
void *__thiscall String_FromU32(void *this, unsigned int Value);
void *__thiscall String_FromU16(void *this, unsigned __int16 a2);
void *__thiscall String_FromU8(void *this, unsigned __int8 a2);
void *__thiscall sub_65941650(void *this, unsigned int *a2);
void *__thiscall sub_659417B0(void *this, float a2);
int __thiscall sub_65941900(_DWORD, _DWORD); // weak
void *__thiscall String_AssignFromPtr(void *this, int a2);
int __cdecl sub_65942630(int, int Value); // idb
int __cdecl sub_659442A0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __cdecl sub_659445A0(int a1, int a2, int a3);
int __thiscall sub_65945010(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65945080(int this);
int __thiscall sub_65945170(_DWORD *this, int a2);
int FormatString(int a1, int a2, ...);
int FormatString_Args(int a1, int a2, ...);
int sub_65946220(int a1, int a2, ...);
void __thiscall BitStream_WriteU32_Compressed_thunk(int *this, char *a2);
void sub_65946F10();
// int __thiscall unknown_libname_664(_DWORD); weak
int __stdcall sub_65946FD0(_DWORD); // weak
int __thiscall sub_65947090(int *this, int a2, char a3, char a4, char a5, char a6, char a7);
unsigned int __thiscall sub_659470E0(unsigned int *this, int a2);
int __thiscall sub_65947180(_DWORD *this, int a2);
char __thiscall sub_65947520(unsigned int *this, unsigned int *a2, unsigned int a3);
int __stdcall sub_65947680(_DWORD); // weak
int __thiscall sub_65947720(int *this, int a2);
int __thiscall sub_65947820(int *this, int a2);
int __cdecl RandInRange_Int(int a1, int a2);
bool __cdecl sub_65947AC0(float a1);
int __cdecl sub_65947CD0(float a1); // idb
int __cdecl sub_65947DB0(char *Buffer, int); // idb
int __cdecl FormatDuration_MinSec(char *Buffer, unsigned int a2);
int __cdecl sub_65947EB0(char *Buffer, unsigned int a2);
int __cdecl sub_65947F70(char *Buffer, unsigned int a2);
char __cdecl sub_65948020(const char *a1);
char __cdecl sub_659480D0(char *Buffer, unsigned int a2);
int __cdecl sub_65948350(char *Buffer, _DWORD *a2);
int __cdecl sub_65948390(char *Buffer, _DWORD *a2);
int __cdecl sub_659483E0(char *Buffer, char *Buffera);
int __cdecl sub_65948440(int *a1, _BYTE *a2, _BYTE *a3);
int __cdecl sub_65948510(int *a1);
int sub_65948530();
int __cdecl sub_65948560(int *a1);
int __thiscall sub_65948590(_BYTE *this);
void __thiscall ItemStatEntry_UndoPct13(int this);
void __thiscall ItemStatEntry_UndoPct14(int this);
unsigned int __thiscall ItemStatEntry_GetValue_NoPct(int this);
int __stdcall ItemStatModifierTable_CountByGroup(int a1);
char *__thiscall ItemStatModifierTable_GetBaseValueWithListPct(unsigned __int8 *this, int a2, int a3, char **a4, unsigned __int8 *a5, unsigned __int8 *a6);
int __stdcall ItemTemplate_GetType_ById(unsigned __int16 a1, int a2);
int __thiscall ModifierEntry_CountFromPtrs(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall ModifierEntry_AdvancePtr(_DWORD *this, int a2);
_DWORD *__cdecl ModifierEntry_FillRange(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl ModifierEntry_MoveBackward(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __thiscall ItemStatEntry_ScaleByFloatCeil(int *this, float a2);
char __thiscall sub_65948AC0(_BYTE *this, char a2);
_BYTE *__thiscall sub_65948AF0(_BYTE *this);
unsigned __int8 __thiscall ItemStatEntry_ApplyPct13(int this, unsigned __int8 *a2);
unsigned __int8 __thiscall ItemStatEntry_ApplyPct14(int this, unsigned __int8 *a2);
int __thiscall ItemStatModifier_FindById(_DWORD *this, int a2);
bool __thiscall ItemStatModifier_HasMinLevel(_DWORD *this, int a2, unsigned __int8 a3);
bool __thiscall ItemStatModifier_MeetsRequiredLevel(_DWORD *this, int a2);
int __thiscall ItemStatModifier_CountByGroup(_DWORD *this, int a2);
char __thiscall ItemStatModifier_HasLevelAbove(_DWORD *this, unsigned int a2);
int __thiscall sub_65948DD0(_DWORD *this);
unsigned int __thiscall ItemStatModifier_GetMaxLevel(_DWORD *this);
unsigned int __thiscall SkillList_DecrementPendingLevels(_DWORD *this);
unsigned int __thiscall ItemStatList_SetPct13All(int this, unsigned __int8 *a2);
unsigned int __thiscall ItemStatList_ClearPct13All(int this);
unsigned int __thiscall ItemStatList_ClearPct14All(int this);
int __thiscall ItemStatModifier_CalcAggregateValue(_DWORD *this);
char __thiscall ItemStatModifier_DecrementLevel(_DWORD *this, int a2);
char __thiscall ItemStatModifier_IncrementLevel(_DWORD *this, int a2);
char __thiscall ItemStatModifier_ResetLevelAndReindex(int this, int a2);
char *__thiscall ItemStatEntry_ApplyModifier(_DWORD *this, int __return_address, int *a3, int a4);
void __thiscall ItemStatModifier_ProcessValue(_DWORD *this, unsigned __int8 __return_address, int *a3);
void __thiscall ItemStatModifier_ProcessValue_ByItemTemplate(_DWORD *this, unsigned __int16 a2, int *a3);
unsigned __int16 *__thiscall ItemStatModifier_AdjustAmmoItemId(_DWORD *this, unsigned __int16 *a2);
bool __thiscall ItemStatModifier_MeetsReqFromDisplayName(_DWORD *this, int a2);
bool __thiscall ItemStatModifier_MeetsReqFromTemplateTable(_DWORD *this, unsigned __int16 a2);
char __thiscall ItemStatModifier_MeetsPrereqs(_DWORD *this, int a2);
_DWORD *__thiscall ModifierEntry_AdvancePtr2(_DWORD *this, int a2);
_DWORD *__cdecl ModifierEntry_FillRange2(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl ModifierEntry_MoveBackward2(_DWORD *a1, _DWORD *a2, _DWORD *a3);
unsigned __int8 __thiscall ItemStatEntry_RecalcValue(unsigned __int8 *this);
char *__thiscall ItemStatEntry_WriteToBitStream(_BYTE *this, char *a2);
bool __thiscall ItemStatEntry_ReadFromBitStream(char *this, unsigned int *a2);
char __thiscall ItemStatEntry_UpdateProgress(int this, unsigned int a2, unsigned int *a3);
char __thiscall ItemStatEntry_ConsumeProgress(int this, unsigned int *a2);
char *__thiscall ItemStatList_WriteToBitStream(int this, char *a2);
int __thiscall SkillList_UpdateProgress(int this, unsigned int *a2);
void __thiscall ItemStatModifier_ProcessValue_Indirect(_DWORD *this, unsigned __int8 a2, _DWORD *a3);
bool __thiscall ItemStatModifier_MeetsReqFromItemId(_DWORD *this, int a2);
unsigned int __thiscall SkillList_RecalcPctBucketsAndApply(int this, int a2);
_DWORD *__thiscall ModifierEntry_AdvancePtr3(_DWORD *this, _DWORD *a2, int a3);
_DWORD *__cdecl ModifierEntry_MoveBackward3(_DWORD *a1, _DWORD *a2, _DWORD *a3);
void __cdecl ModifierEntry_FillN(_DWORD *a1, int a2, _DWORD *a3);
void __cdecl ModifierEntry_FillN2(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__stdcall ModifierEntry_FillN_ReturnEnd(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__cdecl ModifierEntry_CopyRange(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__thiscall ModifierEntry_EraseAt(_DWORD *this, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl ModifierEntry_CopyRange2(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__thiscall ModifierEntry_CopyRange3(void *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
_DWORD *__thiscall SkillList_ResetState(int this);
void __thiscall SkillList_InsertRange(int this, char *a2, unsigned int a3, int *a4);
_DWORD *__thiscall SkillList_Init(_DWORD *this);
char *__thiscall SkillList_RemoveInvalidAndRefund(int this);
int __thiscall SkillList_ConsumePointsAndLevel(int this, unsigned int *a2, _DWORD *a3);
_DWORD *__thiscall SkillList_InsertAt(_DWORD *this, _DWORD *a2, char *a3, int *a4);
void __thiscall Packet_ID_SKILLS_read_list_insert(char **this, int *a2);
void __thiscall Packet_ID_SKILLS_read_list(char *this, unsigned int *a2);
int __thiscall SkillList_GetOrAddEntry(int this, int a2);
char __thiscall SkillList_AddEntryIfMissing(int this, int *a2);
char __thiscall SkillList_MergeFromList(int this, int a2);
char __thiscall SkillList_QueueLevelIncrease(_DWORD *this, int a2);
char __cdecl ItemVariant_ComputeScalePair(unsigned __int8 a1, float a2, unsigned __int8 a3, float a4, float *a5, float *a6);
int __thiscall SkillEntry_ApplyPctToByte12(_BYTE *this, int __return_address);
__int16 __thiscall ItemStatEntry_ScaleField3(_WORD *this, float a2);
char *__cdecl sub_6594BB70(char *a1, char *a2, char *a3);
_BYTE *__cdecl sub_6594BC20(_BYTE *a1, _BYTE *a2, _BYTE *a3);
int __cdecl sub_6594BD70(void *Source, int a2, int a3); // idb
char *__stdcall sub_6594BE20(char *a1, char *a2, char *a3);
char **__thiscall sub_6594C1A0(char **this, char **a2, char *a3, char *a4);
int __stdcall sub_6594C290(_BYTE *Source, _BYTE *a2, void *Destination);
_BYTE *__stdcall sub_6594C3E0(_BYTE *a1, int a2, _BYTE *a3);
unsigned int __thiscall ByteVector_Insert(char **this, char *Source, unsigned int a3, _BYTE *a4);
char **__thiscall VariantList_Assign(char **this, unsigned int a2);
void __thiscall sub_6594C6F0(int *this, int *a2);
char __cdecl ItemVariantList_CopyByItemId(unsigned __int16 a1, char **a2);
void sub_6594C840();
char __cdecl ItemTemplate_CopyVariantByIndex(unsigned __int16 a1, unsigned __int8 a2, char *a3);
char __cdecl ProductionRecipe_BuildFromVariant(_WORD *a1, __int64 a2);
char __cdecl Item_FormatStatValue(float a1, int a2, char *Buffer, char *a4);
void __cdecl __noreturn StdVector_ThrowLengthError(int a1, int a2);
void *__cdecl StdVector_Alloc8(unsigned int a1);
char __cdecl Item_FormatStatLine(unsigned __int8 a1, int a2, int a3, char *Buffer, char *a5, unsigned __int16 a6);
_DWORD *__cdecl StatEntry_FillRange(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl StatEntry_CopyRange(_DWORD *a1, _DWORD *a2, _DWORD *a3);
_DWORD *__cdecl StatEntry_MoveBackward(int a1, int a2, _DWORD *a3);
void __cdecl StatEntry_FillN(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__stdcall StatEntry_FillN_ReturnEnd(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__stdcall StatEntry_CopyRange2(_DWORD *a1, _DWORD *a2, _DWORD *a3);
void __thiscall ItemStatList_InsertEntries(int this, char *a2, unsigned int a3, int *a4);
void __thiscall ItemStatList_PushEntry(char **this, int *a2);
void ItemBaseStatTable_Init();
void __cdecl ItemBaseStatList_Copy(unsigned __int16 a1, char **a2);
char *__thiscall ItemStatList_AddOrAccumulate(char **this, int a2);
char *__cdecl Item_AppendBaseStatsFromTable(char *a1, char **a2);
void __cdecl Item_CollectStatsForTooltip(int __return_address, _DWORD *a2, char **a3);
char __cdecl Item_AppendBaseStatsByType(char *a1, char **a2);
void __cdecl Item_CollectResistanceAmpStats(char **__saved_registers, int __return_address, _DWORD *a3, unsigned __int8 a4);
void __cdecl Item_CollectStatById(int __return_address, _DWORD *a2, char **a3, char a4);
void __cdecl Item_CollectStatList(int a1, _DWORD *a2, char **a3);
_DWORD *__thiscall Log_Init(_DWORD *this);
bool __thiscall Log_Open(_DWORD *this, int a2);
void __thiscall Log_Write(FILE **this, const char *a2, int a3, char a4);
void __cdecl sub_6594F6B0(int a1);
void __cdecl Log_WriteErrorIfEnabled(int a1);
int __cdecl sub_6594F930(_DWORD); // weak
const char *__cdecl Color_GetARGBHexByCode(char a1);
char *__cdecl sub_6594F990(unsigned __int16 a1);
int __stdcall sub_65950030(_DWORD); // weak
bool __stdcall sub_659500C0(int a1, char a2);
char *__thiscall sub_65950D30(int *this, char *a2);
int __stdcall sub_65950EF0(int a1, _DWORD *a2);
int __thiscall sub_65950F20(_DWORD); // weak
int __thiscall sub_65950F80(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65950FE0(_DWORD, _DWORD); // weak
char *__thiscall sub_659510B0(int *this, char *a2);
unsigned __int8 __thiscall Packet_ID_FACTION_read_blockA_struct_4C0(char *this, unsigned int *a2);
int __thiscall sub_65951F90(_DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_659527E0(_DWORD, _DWORD); // weak
char __thiscall sub_659528D0(_DWORD *this, int a2, _BYTE *a3);
char __thiscall sub_659529B0(_DWORD *this, char a2, int a3, _BYTE *a4);
unsigned int __thiscall sub_65952A40(_DWORD *this, char a2, char a3);
char __thiscall Packet_ID_FACTION_read_block_1318(char *this, unsigned int *a2);
bool __thiscall ItemStructA_IsValid(unsigned __int16 *this);
char __thiscall ItemVariant_ApplyStatDelta(unsigned __int16 *this, float a2, float a3, int *a4);
char __thiscall Item_ApplyQualityAndVariantToStat(int this, char *a2);
char *__thiscall ItemStructA_write(unsigned __int16 *this, char *a2);
bool __thiscall ItemStructA_Read(char *this, unsigned int *a2);
char *__thiscall ItemStructAPlus_u32_write(unsigned __int16 *this, char *a2);
bool __thiscall ItemEntryWithId_Read(char *this, unsigned int *a2);
const char *__cdecl sub_65955B50(unsigned int a1);
char __cdecl sub_65955B80(char a1);
bool __cdecl IsValue2Or30_NotEqual(char a1, char a2);
double __cdecl ScaleFactor_ByTypeAndMode(char a1, char a2);
char __cdecl SkillType_UsesMultiplier(char a1);
bool __cdecl TypeHashMatchesTable(char a1, int a2);
unsigned int __cdecl PackVec3_ToPacked1000(float a1, float a2, float a3, int a4);
char __cdecl Type14_ValidateIdRange(int a1, char a2, unsigned int a3);
double __thiscall Vec3s_GetX_A(__int16 *this);
double __thiscall Vec3s_GetY_A(__int16 *this);
double __thiscall Vec3s_GetZ_A(__int16 *this);
double __thiscall Vec3s_GetX_B(__int16 *this);
double __thiscall Vec3s_GetY_B(__int16 *this);
double __thiscall Vec3s_GetZ_B(__int16 *this);
int __cdecl RoundFloatToInt2(float a1); // idb
char __cdecl Production_IsValidTypeCombo(char a1, char a2, unsigned __int8 a3);
unsigned int __cdecl PackVec3i16_ToPacked1000(float a1, int a2);
char __cdecl sub_659565D0(char a1, char a2, unsigned __int8 a3);
int __cdecl sub_65956720(char a1, float a2, int a3, _DWORD *a4);
char __cdecl sub_65956800(char a1, char a2, unsigned __int8 a3, int a4);
char __thiscall MarkupTokenizer_NextNonWhitespace(int this);
int __thiscall MarkupTokenizer_NextToken(_BYTE *this);
char __thiscall BitfieldBlock_0x30_HasExtra(_WORD *this);
char *__thiscall Write_BitfieldBlock_0x30(char *this, char *a2);
char __thiscall Read_BitfieldBlock_0x30(char *this, _DWORD *a2);
char __thiscall U16Array20_Equals(unsigned __int16 *this, int a2);
int __thiscall sub_659579A0(_WORD *this);
int __thiscall Production_GetRequirementValue(int this, int a2, unsigned __int8 a3);
char __thiscall Production_ApplySkillModifiers(int this, int a2, char **a3);
double __thiscall Production_GetSkillMultiplier(int this);
_DWORD *__cdecl sub_6595A690(_DWORD *a1, _DWORD *a2, _DWORD *a3);
int __thiscall sub_6595A870(_DWORD, _DWORD); // weak
_DWORD *__cdecl sub_6595A960(int a1, int a2, _DWORD *a3);
void __cdecl U32Pair_FillN(_DWORD *a1, int a2, _DWORD *a3);
char *__thiscall sub_6595A9C0(_DWORD *this, char *a2);
_DWORD *__stdcall sub_6595ABD0(_DWORD *a1, int a2, _DWORD *a3);
_DWORD *__stdcall sub_6595AE10(_DWORD *a1, _DWORD *a2, _DWORD *a3);
void __thiscall U32PairList_InsertRange(int this, char *a2, unsigned int a3, int *a4);
char __thiscall Packet_ID_MARKET_read_listE(char **this, unsigned int *a2);
char __thiscall MarketFilter_MatchesItem(unsigned __int8 *this, char a2, unsigned __int16 *a3, _DWORD *a4);
int __thiscall sub_6595BDC0(_DWORD, _DWORD); // weak
void __cdecl sub_6595BF00(int a1, int a2, int a3);
char *__thiscall sub_6595BF30(_DWORD *this, char *a2);
int __stdcall sub_6595C400(int, void *, int); // idb
_DWORD *__thiscall sub_6595C6C0(_DWORD *this, _DWORD *a2, int a3, int a4);
void __thiscall MarketListD_Insert(int *this, int a2);
void __thiscall Packet_ID_MARKET_read_listD(int *this, unsigned int *a2);
int __thiscall sub_6595FEA0(_DWORD, _DWORD); // weak
bool __thiscall ItemStructAPlus_u32_u32_u32_read(char *this, unsigned int *a2);
// char *__usercall sub_65960100@<eax>(char *result@<eax>, char *a2, int a3, const void *a4);
char *__thiscall sub_659601C0(_DWORD *this, char *a2);
int __thiscall sub_65965E20(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__thiscall sub_65966880(_DWORD *this, _DWORD *a2, int a3, int a4);
char *__thiscall sub_65967630(char **this, char *a2);
unsigned __int8 __thiscall Packet_ID_MARKET_read_listA(char **this, unsigned int *a2);
char __cdecl ProductionCalcA(int a1, int a2);
double __cdecl sub_6596AEC0(char a1, __int16 a2);
char __cdecl ProductionCalcB(unsigned __int8 a1, int a2);
char *__thiscall Write_QuantVec3_And9(char *this, char *a2);
char __thiscall Read_QuantVec3_9bit(int this, _DWORD *a2);
_WORD *__thiscall SkillDef_InitDefaults(_WORD *this);
char __cdecl SkillDefTable_CopyEntry(unsigned __int16 a1, char *a2);
_DWORD *__cdecl Sub6Entry_InitArray(_DWORD *a1, int a2, int a3);
int __thiscall sub_6596EEE0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
_DWORD *__thiscall sub_6596F1E0(_DWORD *this, _DWORD *a2, int a3, int a4);
_DWORD *__thiscall Sub6EntryList_Push(_DWORD *this, int a2);
void __thiscall Packet_ID_7B_ReadSubId6List(char *this, unsigned int *bs);
char *__cdecl ItemStatModifierTable_GetEntry(int a1);
int __cdecl ItemStatModifierTable_GetLevelValue(int a1, unsigned __int8 a2);
int __cdecl ItemStatModifier_GetValue(char a1, char a2);
__int16 *__cdecl ItemId_GetDisplayName(unsigned __int16 a1);
__int16 *__cdecl ItemStatReqTable_FindEntry(unsigned __int16 a1);
char __cdecl Item_CollectStatModifiers(unsigned __int16 a1, _DWORD *a2);
int EntryTable_GetCount45();
char **__cdecl EntryTable_GetByTypeIndex(unsigned __int16 a1, unsigned __int8 a2);
const char *__cdecl Personality_GetName(char a1);
int __thiscall U16Entry12_FindById(_DWORD *this, __int16 a2);
double __thiscall sub_65970420(_DWORD, _DWORD, _DWORD); // weak
int __thiscall U16Entry12_SetValueById(_DWORD *this, __int16 a2, unsigned __int8 a3, unsigned __int16 a4);
unsigned int __thiscall U16Entry12_SetValueForItemType(_DWORD *this, char a2, unsigned __int8 a3, unsigned __int16 a4);
int __thiscall U16Entry12_SetValueForAllItems(_DWORD *this, unsigned __int8 a2, unsigned __int16 a3);
unsigned int __thiscall U16Entry12_ApplyToGroup(char *this, unsigned __int8 a2, int a3, int a4, int a5, int a6);
char *__cdecl PersonalityTable_GetEntry(unsigned __int8 a1);
char *__cdecl PersonalityTable_GetVariantEntry(unsigned __int8 a1, unsigned __int8 a2);
double __cdecl Personality_GetWeight(char a1);
_DWORD *__thiscall sub_65970A10(_DWORD *this);
unsigned int __stdcall sub_65970A80(_DWORD *a1);
void *__thiscall Thread_StartWithPriority(void *ArgList, int nPriority);
char Timer_InitHighRes();
int __thiscall sub_65970DE0(_DWORD *this);
_DWORD *__thiscall sub_65971200(_DWORD *this);
int __cdecl sub_65971590(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65971DD0(_DWORD, _DWORD, _DWORD, _DWORD); // weak
int __thiscall sub_65971EA0(_DWORD *this, int a2);
void __cdecl sub_65971FC0(const char *a1, _DWORD *a2);
int __thiscall sub_65972370(_DWORD *this);
// _DWORD __thiscall Concurrency::details::TaskStack::TaskStack(#178 *__hidden this); idb
char *__thiscall Write_QuantVec3(int this, char *a2);
int __stdcall Read_QuantVec3(_DWORD); // weak
int __cdecl StatBlob_Decode(_BYTE *a1, unsigned int a2);
int __cdecl StatBlob_Encode(_BYTE *a1, unsigned int a2);
int __cdecl sub_65972850(_DWORD, _DWORD, _DWORD); // weak
void __thiscall Init_BitstreamTables(_DWORD *this);
bool __thiscall Packet_ID_STORAGE_structA_read_blockB_3(char *this, unsigned int *a2);
char *__thiscall sub_659755C0(unsigned __int16 *this, char *a2);
void __thiscall sub_65975600(char *this, _DWORD *a2);
unsigned __int8 __thiscall sub_659756D0(_BYTE *this, _DWORD *a2);
bool __thiscall Packet_ID_STORAGE_structA_read_blockA_12(char *this, unsigned int *a2);
char *__thiscall sub_659757F0(unsigned __int16 *this, char *a2);
void __thiscall sub_65975830(char *this, _DWORD *a2);
unsigned __int8 __thiscall sub_65975900(_BYTE *this, _DWORD *a2);
bool __thiscall Packet_ID_STORAGE_structA_read_blockC_6(char *this, unsigned int *a2);
char *__thiscall sub_65975A20(unsigned __int16 *this, char *a2);
void __thiscall sub_65975A60(char *this, _DWORD *a2);
unsigned __int8 __thiscall sub_65975B30(_BYTE *this, _DWORD *a2);
char *__thiscall BitStream_WriteU32_Compressed(int *this, char *a2);
// void *__cdecl operator new[](unsigned int); idb
// void __cdecl operator delete(void *); idb
// void __cdecl operator delete[](void *); idb
// void *__cdecl operator new(unsigned int); idb
// int __cdecl atexit(void (__cdecl *)());
// void *__cdecl memset(void *, int Val, size_t Size);
// void *__cdecl memcpy(void *, const void *Src, size_t Size);
// void __stdcall __noreturn CxxThrowException(void *pExceptionObject, _ThrowInfo *pThrowInfo);
// void __stdcall `eh vector destructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *)); weak
// void __stdcall `eh vector constructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *), void (__thiscall *)(void *)); weak
// double __cdecl floor(double X);
// size_t __cdecl strlen(const char *Str);
int Init_ILTClient_APIHolder();
int Ensure_BitstreamTables_Init();
void sub_659A6C40();
void __cdecl sub_659A6C90(); // idb
void __cdecl sub_659A6D40(); // idb
void __cdecl nullsub_828(); // idb
// int __thiscall std::string::operator+=(_DWORD, _DWORD); weak
// int __thiscall std::string::data(_DWORD); weak
// int __thiscall std::string::find(_DWORD, _DWORD, _DWORD); weak
// int __thiscall std::string::insert(_DWORD, _DWORD, _DWORD); weak
// int std::string::empty(void); weak
// int __thiscall std::string::size(_DWORD); weak
// int __thiscall std::string::find_first_of(_DWORD, _DWORD, _DWORD); weak
// int __thiscall std::string::substr(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __thiscall std::string::erase(_DWORD, _DWORD, _DWORD); weak
// int __thiscall std::string::clear(_DWORD); weak
// int __thiscall std::string::operator+=(_DWORD, _DWORD); weak
// int __cdecl std::operator+<char>(_DWORD, _DWORD, _DWORD); weak
// int __thiscall std::string::operator+=(_DWORD, _DWORD); weak
// int __thiscall std::string::operator=(_DWORD, _DWORD); weak
// int __thiscall std::string::begin(_DWORD, _DWORD); weak
// int __thiscall std::string::end(_DWORD, _DWORD); weak
// int __cdecl std::operator<<char>(_DWORD, _DWORD); weak
// int __thiscall std::string::operator=(_DWORD, _DWORD); weak
// int __thiscall std::string::string(_DWORD, _DWORD); weak
// int __thiscall std::string::c_str(_DWORD); weak
// int __thiscall std::string::string(_DWORD, _DWORD); weak
// _DWORD __thiscall std::exception::exception(std::exception *__hidden this); weak
// _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *); weak
// int __cdecl alcOpenDevice(_DWORD); weak
// int __cdecl alcCaptureOpenDevice(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __cdecl alcCreateContext(_DWORD, _DWORD); weak
// int __cdecl alcGetError(_DWORD); weak
// int __cdecl alDistanceModel(_DWORD); weak
// int __cdecl alIsExtensionPresent(_DWORD); weak
// int __cdecl alGetProcAddress(_DWORD); weak
// int __cdecl alcMakeContextCurrent(_DWORD); weak
// int alGetError(void); weak
// int __cdecl alListenerfv(_DWORD, _DWORD); weak
// int __cdecl alcGetString(_DWORD, _DWORD); weak
// int __cdecl alListenerf(_DWORD, _DWORD); weak
// int __cdecl cef_browser_host_create_browser_sync(_DWORD, _DWORD); weak
// int __cdecl cef_initialize(_DWORD, _DWORD, _DWORD); weak
// int __cdecl cef_api_hash(_DWORD); weak
// int __cdecl cef_string_utf16_clear(_DWORD); weak
// int __cdecl SteamAPI_UnregisterCallResult(_DWORD, _DWORD, _DWORD); weak
// int __cdecl SteamAPI_RegisterCallResult(_DWORD, _DWORD, _DWORD); weak
// int SteamUser(void); weak

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN sub_65781A10; // weak
_UNKNOWN sub_657947E0; // weak
_UNKNOWN sub_658116E0; // weak
_UNKNOWN sub_658242C0; // weak
_UNKNOWN sub_6583CA80; // weak
_UNKNOWN sub_658452D0; // weak
_UNKNOWN sub_65860420; // weak
_UNKNOWN sub_659431D0; // weak
_UNKNOWN loc_65957090; // weak
// extern LSTATUS (__stdcall *RegCloseKey)(HKEY hKey);
// extern LSTATUS (__stdcall *RegQueryValueExA)(HKEY hKey, LPCSTR lpValueName, LPDWORD lpReserved, LPDWORD lpType, LPBYTE lpData, LPDWORD lpcbData);
// extern LSTATUS (__stdcall *RegSetValueExA)(HKEY hKey, LPCSTR lpValueName, DWORD Reserved, DWORD dwType, const BYTE *lpData, DWORD cbData);
// extern LSTATUS (__stdcall *RegCreateKeyExA)(HKEY hKey, LPCSTR lpSubKey, DWORD Reserved, LPSTR lpClass, DWORD dwOptions, REGSAM samDesired, const LPSECURITY_ATTRIBUTES lpSecurityAttributes, PHKEY phkResult, LPDWORD lpdwDisposition);
// extern UINT (__stdcall *GetWindowsDirectoryA)(LPSTR lpBuffer, UINT uSize);
// extern UINT (__stdcall *GetSystemDirectoryA)(LPSTR lpBuffer, UINT uSize);
// extern DWORD (__stdcall *ResumeThread)(HANDLE hThread);
// extern BOOL (__stdcall *SetThreadPriority)(HANDLE hThread, int nPriority);
// extern void (__stdcall *GetSystemTime)(LPSYSTEMTIME lpSystemTime);
// extern void (__stdcall *GetSystemTimeAsFileTime)(LPFILETIME lpSystemTimeAsFileTime);
// extern int (__stdcall *MultiByteToWideChar)(UINT CodePage, DWORD dwFlags, LPCCH lpMultiByteStr, int cbMultiByte, LPWSTR lpWideCharStr, int cchWideChar);
// extern BOOL (__stdcall *QueryPerformanceFrequency)(LARGE_INTEGER *lpFrequency);
// extern DWORD (__stdcall *FormatMessageA)(DWORD dwFlags, LPCVOID lpSource, DWORD dwMessageId, DWORD dwLanguageId, LPSTR lpBuffer, DWORD nSize, va_list *Arguments);
// extern HMODULE (__stdcall *LoadLibraryA)(LPCSTR lpLibFileName);
// extern DWORD (__stdcall *GetTempPathA)(DWORD nBufferLength, LPSTR lpBuffer);
// extern UINT (__stdcall *GetTempFileNameA)(LPCSTR lpPathName, LPCSTR lpPrefixString, UINT uUnique, LPSTR lpTempFileName);
// extern FARPROC (__stdcall *GetProcAddress)(HMODULE hModule, LPCSTR lpProcName);
// extern BOOL (__stdcall *FreeLibrary)(HMODULE hLibModule);
// extern HMODULE (__stdcall *GetModuleHandleA)(LPCSTR lpModuleName);
// extern BOOL (__stdcall *DeleteFileA)(LPCSTR lpFileName);
// extern LONG (__stdcall *InterlockedDecrement)(volatile LONG *lpAddend);
// extern LONG (__stdcall *InterlockedIncrement)(volatile LONG *lpAddend);
// extern HANDLE (__stdcall *GetCurrentProcess)();
// extern DWORD (__stdcall *GetModuleFileNameA)(HMODULE hModule, LPSTR lpFilename, DWORD nSize);
// extern DWORD (__stdcall *GetTickCount)();
// extern HFILE (__stdcall *OpenFile)(LPCSTR lpFileName, LPOFSTRUCT lpReOpenBuff, UINT uStyle);
// extern LONG (__stdcall *InterlockedExchange)(volatile LONG *Target, LONG Value);
// extern void (__stdcall *Sleep)(DWORD dwMilliseconds);
// extern BOOL (__stdcall *UnmapViewOfFile)(LPCVOID lpBaseAddress);
// extern BOOL (__stdcall *CloseHandle)(HANDLE hObject);
// extern HANDLE (__stdcall *CreateFileMappingA)(HANDLE hFile, LPSECURITY_ATTRIBUTES lpFileMappingAttributes, DWORD flProtect, DWORD dwMaximumSizeHigh, DWORD dwMaximumSizeLow, LPCSTR lpName);
// extern DWORD (__stdcall *GetLastError)();
// extern LPVOID (__stdcall *MapViewOfFile)(HANDLE hFileMappingObject, DWORD dwDesiredAccess, DWORD dwFileOffsetHigh, DWORD dwFileOffsetLow, SIZE_T dwNumberOfBytesToMap);
// extern _UNKNOWN std::string::npos; weak
// extern void (__thiscall *const std::string::~string)(void *); idb
// extern void (__thiscall *const std::string::string)(void *); idb
// extern void (__cdecl *_endthreadex)(unsigned int ReturnCode);
// extern errno_t (__cdecl *_gmtime64_s)(struct tm *Tm, const __time64_t *Time);
// extern int (*sprintf_s)(char *const Buffer, const size_t BufferCount, const char *const Format, ...);
// extern errno_t (__cdecl *_i64toa_s)(__int64 Value, char *Buffer, size_t BufferCount, int Radix);
// extern errno_t (__cdecl *_ultoa_s)(unsigned int Value, char *Buffer, size_t BufferCount, int Radix);
// extern errno_t (__cdecl *_itoa_s)(int Value, char *Buffer, size_t BufferCount, int Radix);
// extern int (__cdecl *vsprintf)(char *const Buffer, const char *const Format, va_list ArgList);
// extern errno_t (__cdecl *memmove_s)(void *const Destination, const rsize_t DestinationSize, const void *const Source, const rsize_t SourceSize);
// extern void (__cdecl *_splitpath)(const char *FullPath, char *Drive, char *Dir, char *Filename, char *Ext);
// extern int (*sscanf)(const char *const Buffer, const char *const Format, ...);
// extern int (__cdecl *atoi)(const char *String);
// extern int (__cdecl *_vsnprintf)(char *const Buffer, const size_t BufferCount, const char *const Format, va_list ArgList);
// extern int (__cdecl *toupper)(int C);
// extern char *(__cdecl *strchr)(const char *Str, int Val);
// extern intptr_t (__cdecl *_findfirst64i32)(const char *FileName, struct _finddata64i32_t *FindData);
// extern int (__cdecl *_findnext64i32)(intptr_t FindHandle, struct _finddata64i32_t *FindData);
// extern int (__cdecl *_findclose)(intptr_t FindHandle);
// extern char *(__cdecl *strtok)(char *String, const char *Delimiter);
// extern FILE *(__cdecl *fopen)(const char *FileName, const char *Mode);
// extern size_t (__cdecl *fwrite)(const void *Buffer, size_t ElementSize, size_t ElementCount, FILE *Stream);
// extern int (__cdecl *fclose)(FILE *Stream);
// extern __time64_t (__cdecl *_time64)(__time64_t *Time);
// extern struct tm *(__cdecl *_localtime64)(const __time64_t *Time);
// extern uintptr_t (__cdecl *_beginthreadex)(void *Security, unsigned int StackSize, _beginthreadex_proc_type StartAddress, void *ArgList, unsigned int InitFlag, unsigned int *ThrdAddr);
// extern int (*printf)(const char *const Format, ...);
// extern int (__cdecl *isspace)(int C);
// extern char *(__cdecl *strstr)(const char *Str, const char *SubStr);
// extern size_t (__cdecl *fread)(void *Buffer, size_t ElementSize, size_t ElementCount, FILE *Stream);
// extern int (__cdecl *ferror)(FILE *Stream);
// extern size_t (__cdecl *strftime)(char *Buffer, size_t SizeInBytes, const char *Format, const struct tm *Tm);
// extern double (__cdecl *ceil)(double X);
// extern errno_t (__cdecl *_strlwr_s)(char *String, size_t Size);
// extern int (__cdecl *isalnum)(int C);
// extern char *(__cdecl *_strupr)(char *String);
// extern int (*fprintf)(FILE *const Stream, const char *const Format, ...);
// extern int (__cdecl *fflush)(FILE *Stream);
// extern void (__cdecl *srand)(unsigned int Seed);
// extern char *(__cdecl *strncpy)(char *Destination, const char *Source, size_t Count);
// extern errno_t (__cdecl *strncpy_s)(char *Destination, rsize_t SizeInBytes, const char *Source, rsize_t MaxCount);
// extern int (*sprintf)(char *const Buffer, const char *const Format, ...);
// extern int (__cdecl *rand)();
// extern int (__cdecl *_stricmp)(const char *String1, const char *String2);
// extern char *(__cdecl *_getcwd)(char *DstBuf, int SizeInBytes);
// extern BOOL (__stdcall *SetCursorPos)(int X, int Y);
// extern BOOL (__stdcall *GetWindowInfo)(HWND hwnd, PWINDOWINFO pwi);
// extern BOOL (__stdcall *ClipCursor)(const RECT *lpRect);
// extern int (__stdcall *LoadStringA)(HINSTANCE hInstance, UINT uID, LPSTR lpBuffer, int cchBufferMax);
// extern int (*wsprintfA)(LPSTR, LPCSTR, ...);
// extern HWND (__stdcall *GetFocus)();
// extern HWND (__stdcall *GetForegroundWindow)();
// extern DWORD (__stdcall *timeGetTime)();
// extern MMRESULT (__stdcall *timeEndPeriod)(UINT uPeriod);
// extern MMRESULT (__stdcall *timeBeginPeriod)(UINT uPeriod);
// extern HRESULT (__stdcall *CoCreateInstance)(const IID *const rclsid, LPUNKNOWN pUnkOuter, DWORD dwClsContext, const IID *const riid, LPVOID *ppv);
// extern HRESULT (__stdcall *CoInitialize)(LPVOID pvReserved);
const char byte_659A8B98[4] = { '\0', '\0', '\0', '\0' }; // idb
void *off_659A8BA0 = &sub_65702A60; // weak
void *off_659A8BA8 = &sub_65703510; // weak
void *off_659A8BD4 = &sub_65703640; // weak
__int16 word_659A8BE4[] = { 2 }; // weak
int dword_659B32D0[] = { 0 }; // weak
void *off_659BFD10 = &sub_657093C0; // weak
void *off_659BFD1C = &sub_657095C0; // weak
void *off_659BFD28 = &sub_65709660; // weak
void *off_659BFD34 = &sub_657096E0; // weak
const char Delimiter[] = { '\\', '\0' }; // idb
_UNKNOWN *vtbl_Packet_Unknown0 = &sub_6570BA30; // weak
int (__thiscall *vtbl_Packet_Id107)(void *, char) = &Packet_Id107_Vtbl0; // weak
const char dword_659BFDB4[] = { '<', 'u', 'n', 'k' }; // idb
void *off_659BFEB4 = &sub_65711FD0; // weak
void *off_659C0330 = &purecall; // weak
void *off_659C0344 = &purecall; // weak
void *off_659C0358 = &sub_6571BB30; // weak
void *off_659C039C = &purecall; // weak
void *off_659C03B0 = &sub_6571B7E0; // weak
void *off_659C03D0 = &purecall; // weak
void *off_659C03E4 = &sub_6571B900; // weak
void *off_659C0404 = &purecall; // weak
void *off_659C0418 = &sub_6571BA20; // weak
void *off_659C0448 = &purecall; // weak
void *off_659C045C = &sub_6571B620; // weak
void *off_659C0474 = &purecall; // weak
void *off_659C0488 = &sub_6571B580; // weak
void *off_659C04A8 = &purecall; // weak
void *off_659C04BC = &nullsub_22; // weak
void *off_659C04D4 = &CEF_InterlockedAddRef; // weak
void *off_659C04E8 = &sub_6571C300; // weak
void *off_659C04F8 = &sub_6571E560; // weak
void *off_659C0520 = &sub_6571C1A0; // weak
void *off_659C0538 = &sub_6571E150; // weak
void *off_659C0550 = &sub_6571C060; // weak
_UNKNOWN unk_659C0588; // weak
_UNKNOWN unk_659C0590; // weak
_UNKNOWN unk_659C0598; // weak
_UNKNOWN unk_659C05A0; // weak
_UNKNOWN unk_659C05A8; // weak
void *off_659C05BC = &CEF_Handler_AddRef; // weak
void *off_659C05D0 = &nullsub_22; // weak
void *off_659C05E0 = &sub_6571B580; // weak
_UNKNOWN unk_659C05F4; // weak
_UNKNOWN unk_659C05FC; // weak
void *off_659C0630 = &sub_6571D200; // weak
void *off_659C0638 = &sub_6571D230; // weak
void *off_659C0640 = &sub_6571D270; // weak
void *off_659C0648 = &sub_6571D2B0; // weak
void *off_659C0668 = &sub_6571E0E0; // weak
void *off_659C0670 = &sub_6571E110; // weak
void *off_659C0678 = &sub_6571E060; // weak
const char word_659C0B00[] = { '#', 'U' }; // idb
const char word_659C0B1C[] = { '#', 'D' }; // idb
const char word_659C0C8C[] = { ' ', '\0' }; // idb
void *off_659C0D14 = &sub_6572CB70; // weak
void *off_659C0D34 = &sub_6572CCD0; // weak
void *off_659C0D90 = &sub_6572FF70; // weak
void *off_659C0E80 = &sub_65732A20; // weak
void *off_659C0E90 = &sub_65732DC0; // weak
void *off_659C0EBC = &sub_657331A0; // weak
void *off_659C0EC4 = &sub_657339D0; // weak
void *off_659C0ED4 = &sub_65733B10; // weak
void *off_659C0FFC = &sub_65733AE0; // weak
void *off_659C10B8 = &sub_657359F0; // weak
_UNKNOWN *CGameClientShell_vftable = &sub_65736D20; // weak
void *off_659C13A8 = &sub_657367C0; // weak
void *off_659C13BC = &sub_657386C0; // weak
void *off_659C2124 = &sub_6574AAA0; // weak
_UNKNOWN unk_659C2198; // weak
_UNKNOWN unk_659C25C0; // weak
_UNKNOWN unk_659C37D8; // weak
_UNKNOWN unk_659C37DC; // weak
_UNKNOWN unk_659C37E0; // weak
void *off_659C3940 = &sub_65756620; // weak
void *off_659C3BD8 = &sub_6575C470; // weak
_UNKNOWN unk_659C45C8; // weak
void *off_659C45D4 = &sub_65765F40; // weak
_UNKNOWN unk_659C481C; // weak
void *off_659C4884 = &sub_657692F0; // weak
void *off_659C48C4 = &sub_6576A5A0; // weak
void *off_659C48F8 = &sub_6576AB30; // weak
void *off_659C492C = &sub_6576B130; // weak
void *off_659C4994 = &sub_6576B130; // weak
void *off_659C49CC = &sub_6576C330; // weak
void *off_659C4ADC = &sub_6576C740; // weak
int dword_659C4B60[] = { 0 }; // weak
void *off_659C577C = &sub_6576CCC0; // weak
__int16 word_659C6184 = 37; // weak
void *off_659C619C = &sub_65772B20; // weak
void *off_659C6224 = &sub_657732C0; // weak
void *off_659C6854 = &sub_65779330; // weak
void *off_659C6C24 = &sub_6577E2B0; // weak
void *off_659C6F10 = &sub_65781F00; // weak
void *off_659C8884 = &sub_65785E00; // weak
void *off_659C8894 = &sub_657867F0; // weak
void *off_659C88EC = &sub_65786820; // weak
int (__thiscall *vtbl_Packet_ID_LOGIN_TOKEN_CHECK)(void *, char) = &Packet_ID_LOGIN_TOKEN_CHECK_ScalarDeletingDtor; // weak
void *off_659C8AB8 = &sub_6578A810; // weak
void *off_659C8ACC = &sub_6578B6A0; // weak
void *off_659C8C6C = &sub_6578C330; // weak
_UNKNOWN *Packet_ID_UNLOAD_WEAPON_vtbl = &Packet_ID_UNLOAD_WEAPON_dtor; // weak
void *off_659C9024 = &sub_65791320; // weak
void *off_659C91D8 = &sub_6576AB30; // weak
void *off_659C920C = &sub_657AA450; // weak
void *off_659C9290 = &sub_657AB990; // weak
void *off_659C92A0 = &sub_657ACC90; // weak
void *off_659C9328 = &sub_657AD740; // weak
void *off_659C9F68 = &sub_657C9820; // weak
_UNKNOWN *Packet_ID_PLAYER2PLAYER_vftable = &sub_657CCB40; // weak
void *off_659CB498 = &sub_658066B0; // weak
void *off_659CB74C = &sub_6580A800; // weak
void *off_659CB764 = &sub_6580A670; // weak
void *off_659CB774 = &sub_6580A770; // weak
int (__thiscall *CWindowMineralScanner_vtbl)(void *, char) = &CWindowMineralScanner_dtor; // weak
_UNKNOWN *Packet_ID_MINING_vtbl = &Packet_ID_MINING_dtor; // weak
void *off_659CC60C = &sub_65831A90; // weak
void *off_659CCC50 = &sub_6583C290; // weak
void *off_659CCCD8 = &sub_6583DAC0; // weak
void *off_659CCEE8 = &sub_65841D40; // weak
void *off_659CD568 = &sub_6585EBB0; // weak
int (__thiscall *CWindowTerminalPrisonMineralCollector_vtbl)(void *, char) = &CWindowTerminalPrisonMineralCollector_dtor; // weak
int (__thiscall *CWindowTerminalProduction_vtbl)(void *, char) = &CWindowTerminalProduction_dtor; // weak
int (__thiscall *Packet_ID_PRODUCTION_vtbl)(void *, char) = &Packet_ID_PRODUCTION_dtor; // weak
void *off_659CD798 = &sub_65866B20; // weak
void *off_659CD820 = &sub_65867880; // weak
void *off_659CDE70 = &sub_65880BC0; // weak
void *off_659CDE80 = &sub_65880BF0; // weak
void *off_659CDE90 = &sub_65880C20; // weak
const char byte_659CDE9C[4] = { '\0', '\0', '\0', '\0' }; // idb
int (__thiscall *CInventoryClient_vtbl)(void *, char) = &CInventoryClient_dtor; // weak
void *off_659CDFBC = &sub_65885DF0; // weak
void *off_659CE000 = &sub_65887AD0; // weak
void *off_659CE010 = &sub_65887B00; // weak
char *off_659CE500 = "Login.sgt"; // weak
float flt_659CE504[] = { 210.0 }; // weak
float flt_659CE508[] = { 215.0 }; // weak
double dbl_659CE690 = -6000.0; // weak
void *off_659CE768 = &sub_6588AA80; // weak
int (__thiscall *vtbl_Packet_ID_LOGIN_REQUEST_RETURN)(void *, char) = &Packet_ID_LOGIN_REQUEST_RETURN_ScalarDeletingDtor; // weak
_UNKNOWN *vtbl_Packet_ID_WORLD_LOGIN_RETURN = &sub_6588D590; // weak
void *off_659CE88C = &sub_6588D5C0; // weak
void *off_659CEB10 = &sub_65892BE0; // weak
void *off_659CEB58 = &sub_65892BA0; // weak
int (__thiscall *vtbl_Packet_ID_LOGIN_RETURN)(void *, char) = &Packet_ID_LOGIN_RETURN_ScalarDeletingDtor; // weak
void *off_659CEC2C = &Packet_ID_VENDOR_Dtor_Delete; // weak
void *off_659CECB0 = &sub_6589CE00; // weak
void *off_659CED44 = &sub_6589D310; // weak
_UNKNOWN *Packet_ID_UPDATE_vtbl = &Packet_ID_UPDATE_dtor; // weak
_UNKNOWN *Packet_ID_WEAPONFIRE_vtbl = &Packet_ID_WEAPONFIRE_dtor; // weak
void *off_659CEECC = &sub_658B0700; // weak
void *off_659CEF08 = &sub_658B1050; // weak
void *off_659CF1F0 = &sub_658B5EE0; // weak
void *off_659CF228 = &sub_658B5F90; // weak
void *off_659CF268 = &sub_658B9740; // weak
void *off_659CF278 = &sub_658B9B10; // weak
void *off_659CF288 = &sub_658B9350; // weak
void *off_659CF298 = &sub_658B93F0; // weak
void *off_659CF2B4 = &sub_658B9490; // weak
void *off_659CF2C8 = &sub_658B9620; // weak
void *off_659CF300 = &sub_658BA9C0; // weak
void *off_659CF338 = &sub_658B9AE0; // weak
void *off_659CF370 = &sub_658BAA00; // weak
void *off_659CF3A8 = &sub_658BA990; // weak
void *off_659D03D4 = &sub_658C0450; // weak
_UNKNOWN *vtbl_Packet_ID_WORLD_LOGIN = &Packet_ID_WORLD_LOGIN_Dtor; // weak
_UNKNOWN loc_659D045C; // weak
void *off_659D05C8 = &sub_658C3E20; // weak
void *off_659D05F4 = &sub_658C4810; // weak
void *off_659D063C = &sub_658C50B0; // weak
_UNKNOWN unk_659D6E1C; // weak
_UNKNOWN stru_659D6E2C; // weak
_UNKNOWN riid; // weak
_UNKNOWN unk_659D6EAC; // weak
_UNKNOWN unk_659D6FAC; // weak
_UNKNOWN unk_659D704C; // weak
_UNKNOWN unk_659D71FC; // weak
const IID rclsid = { 3534497938u, 45979u, 4561u, { 135u, 4u, 0u, 96u, 8u, 147u, 177u, 189u } }; // idb
int dword_659D72CC = -760469374; // weak
_UNKNOWN stru_659D72DC; // weak
_UNKNOWN unk_659D7ACC; // weak
_UNKNOWN *off_659D9028 = &purecall; // weak
_UNKNOWN *off_659D9038 = &purecall; // weak
int (*off_659D90B8[2])() = { &COMRef_AddRef2, &COMRef_Release }; // weak
_UNKNOWN *off_659D90C8 = &purecall; // weak
int (*off_659D9148[2])() = { &COMRef_AddRef2, &COMRef_Release }; // weak
_UNKNOWN *off_659D9158 = &sub_6590A490; // weak
_UNKNOWN unk_659D91AC; // weak
int (*off_659D937C)() = &CEF_AddRefAndIncrement; // weak
int (*off_659D9A7C)() = &CEF_Handler7_AddRef; // weak
_UNKNOWN unk_659DB39C; // weak
_UNKNOWN unk_659DC228; // weak
char *off_659DC820[2] = { "m_Face1_1", "Face1" }; // weak
char *off_659DC824 = "Face1"; // weak
__int16 word_659DC828[] = { 1 }; // weak
char *off_659DC970[2] = { "f_Face1_1", "Face1" }; // weak
char *off_659DC974 = "Face1"; // weak
__int16 word_659DC978[] = { 1 }; // weak
char *off_659DCAC0[2] = { "m_Hair1_1", "Hair1" }; // weak
char *off_659DCAC4 = "Hair1"; // weak
char *off_659DCBE0[2] = { "f_Hair1_1", "Hair1" }; // weak
char *off_659DCBE4 = "Hair1"; // weak
_UNKNOWN unk_659DD0F8; // weak
_UNKNOWN unk_659E0BA0; // weak
int g_StatScaleTable[] = { 1000 }; // weak
_UNKNOWN unk_659E0E90; // weak
void *off_659E1C68 = &sub_6594F900; // weak
_UNKNOWN unk_659E1D18; // weak
_UNKNOWN unk_659E2168; // weak
int dword_659E216C[] = { 0 }; // weak
int dword_659E2170[] = { 0 }; // weak
char (*g_ApartmentWorldTable[2])[4] = { &byte_659A8B98, &byte_659A8B98 }; // weak
char (*off_659E217C)[4] = &byte_659A8B98; // weak
char byte_659E2954[] = { '\0' }; // weak
int dword_659E2958[] = { 0 }; // weak
int dword_659E295C[] = { 0 }; // weak
int dword_659E2960[] = { 0 }; // weak
int dword_659E2964[] = { 0 }; // weak
int dword_659E2970[] = { 0 }; // weak
char (*g_WorldTable[3])[4] = { &byte_659A8B98, &byte_659A8B98, &byte_659A8B98 }; // weak
char (*off_659E2984[2])[4] = { &byte_659A8B98, &byte_659A8B98 }; // weak
char (*off_659E2988)[4] = &byte_659A8B98; // weak
_UNKNOWN unk_659E30D4; // weak
_UNKNOWN unk_659E3500; // weak
_UNKNOWN unk_659E4250; // weak
__int16 word_659E8908[] = { 0 }; // weak
char byte_659E890A[] = { '\0' }; // weak
char byte_659E890B[157] =
{
  '\x16',
  '8',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\xD8',
  '\x03',
  '\0',
  '\0',
  'M',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\xDB',
  '\x03',
  '\0',
  '\0',
  'N',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\xDC',
  '\x03',
  '\0',
  '\0',
  ':',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\xDA',
  '\x03',
  '\0',
  '\0',
  '\x14',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\xE1',
  '\x03',
  '\0',
  '\0',
  'q',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  'k',
  '\0',
  '\0',
  '\0',
  '9',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  'i',
  '\0',
  '\0',
  '\0',
  '\x13',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  'l',
  '\0',
  '\0',
  '\0',
  'l',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\a',
  '\x12',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x06',
  '\0',
  '\x16',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x14',
  '\0',
  '\x17',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x16',
  '\0',
  'p',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0'
}; // weak
__int16 word_659E89A8[] = { 990 }; // weak
char byte_659E89AA[] = { '\0' }; // weak
char byte_659E89AB[327] =
{
  '\0',
  'n',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\xDD',
  '\x03',
  '\0',
  '\0',
  'o',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\t',
  'S',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\v',
  'T',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\n',
  'U',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\f',
  'V',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\r',
  'W',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x0E',
  'X',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x10',
  'Y',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x13',
  'Z',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x11',
  '[',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x12',
  '\\',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x14',
  ']',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x15',
  '^',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '%',
  '_',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x03',
  '`',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x04',
  'b',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x05',
  'a',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x06',
  'c',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x01',
  'h',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x02',
  'i',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x14',
  '\0',
  'k',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x15',
  '\0',
  'm',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x16',
  '\0',
  'm',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x06',
  '\0',
  'j',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\t',
  '\0',
  'G',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\b',
  '\0',
  'H',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\xD8',
  '\x03'
}; // weak
_UNKNOWN g_ItemStatModifierTable; // weak
char *off_659E9E88[2] = { "a01-01", "Idle" }; // weak
int dword_659E9E90[] = { 0 }; // weak
char aFunnySarcastic[18] = "Funny / Sarcastic"; // weak
char aT[3] = "`T"; // weak
void *off_659EA8A4 = &sub_65970AB0; // weak
_UNKNOWN unk_659FE000; // weak
_UNKNOWN unk_659FE090; // weak
_UNKNOWN unk_659FE120; // weak
_UNKNOWN unk_659FE1B0; // weak
_UNKNOWN unk_659FE240; // weak
_UNKNOWN unk_659FE2D0; // weak
_UNKNOWN unk_659FE360; // weak
_UNKNOWN unk_659FE3F0; // weak
_UNKNOWN unk_659FE480; // weak
_UNKNOWN unk_659FE510; // weak
_UNKNOWN unk_659FE5A0; // weak
_UNKNOWN unk_659FE630; // weak
_UNKNOWN unk_659FE6C0; // weak
_UNKNOWN unk_659FE750; // weak
_UNKNOWN unk_659FE7E0; // weak
_UNKNOWN unk_659FE870; // weak
_UNKNOWN unk_659FE900; // weak
_UNKNOWN unk_659FE990; // weak
_UNKNOWN unk_659FEA20; // weak
_UNKNOWN unk_659FEAB0; // weak
_UNKNOWN unk_659FEB40; // weak
_UNKNOWN unk_659FEBD0; // weak
_UNKNOWN unk_659FEC60; // weak
_UNKNOWN unk_659FECF0; // weak
_UNKNOWN unk_659FED80; // weak
_UNKNOWN unk_659FEE10; // weak
_UNKNOWN unk_659FEEA0; // weak
_UNKNOWN unk_659FEF30; // weak
_UNKNOWN unk_659FEFC0; // weak
_UNKNOWN unk_659FF050; // weak
_UNKNOWN unk_659FF0E0; // weak
_UNKNOWN unk_659FF170; // weak
_UNKNOWN unk_659FF200; // weak
_UNKNOWN unk_659FF290; // weak
_UNKNOWN unk_659FF320; // weak
_UNKNOWN unk_659FF3B0; // weak
_UNKNOWN unk_659FF440; // weak
_UNKNOWN unk_659FF4D0; // weak
_UNKNOWN unk_659FF560; // weak
_UNKNOWN unk_659FF5F0; // weak
_UNKNOWN unk_659FF680; // weak
_UNKNOWN unk_659FF710; // weak
_UNKNOWN unk_659FF7A0; // weak
_UNKNOWN unk_659FF830; // weak
_UNKNOWN unk_659FF8C0; // weak
_UNKNOWN unk_659FF950; // weak
_UNKNOWN unk_659FF9E0; // weak
_UNKNOWN unk_659FFA70; // weak
_UNKNOWN unk_659FFB00; // weak
_UNKNOWN unk_659FFB90; // weak
_UNKNOWN unk_659FFC20; // weak
_UNKNOWN unk_659FFCB0; // weak
_UNKNOWN unk_659FFD40; // weak
_UNKNOWN unk_659FFDD0; // weak
_UNKNOWN unk_659FFE60; // weak
_UNKNOWN unk_659FFEF0; // weak
_UNKNOWN unk_659FFF80; // weak
_UNKNOWN unk_65A00010; // weak
_UNKNOWN unk_65A000A0; // weak
_UNKNOWN unk_65A00130; // weak
_UNKNOWN unk_65A001C0; // weak
_UNKNOWN unk_65A00250; // weak
_UNKNOWN unk_65A002E0; // weak
_UNKNOWN unk_65A00370; // weak
_UNKNOWN unk_65A00400; // weak
_UNKNOWN unk_65A00490; // weak
_UNKNOWN unk_65A00520; // weak
_UNKNOWN unk_65A005B0; // weak
_UNKNOWN unk_65A00640; // weak
_UNKNOWN unk_65A006D0; // weak
_UNKNOWN unk_65A00760; // weak
_UNKNOWN unk_65A007F0; // weak
_UNKNOWN unk_65A00880; // weak
_UNKNOWN unk_65A00910; // weak
_UNKNOWN unk_65A009A0; // weak
_UNKNOWN unk_65A00A30; // weak
_UNKNOWN unk_65A00AC0; // weak
_UNKNOWN unk_65A00B50; // weak
_UNKNOWN unk_65A00BE0; // weak
_UNKNOWN unk_65A00C70; // weak
_UNKNOWN unk_65A00D00; // weak
_UNKNOWN unk_65A00D90; // weak
_UNKNOWN unk_65A00E20; // weak
_UNKNOWN unk_65A00EB0; // weak
_UNKNOWN unk_65A00F40; // weak
_UNKNOWN unk_65A00FD0; // weak
_UNKNOWN unk_65A01060; // weak
_UNKNOWN unk_65A010F0; // weak
_UNKNOWN unk_65A01180; // weak
_UNKNOWN unk_65A01210; // weak
_UNKNOWN unk_65A012A0; // weak
_UNKNOWN unk_65A01330; // weak
_UNKNOWN unk_65A013C0; // weak
_UNKNOWN unk_65A01450; // weak
_UNKNOWN unk_65A014E0; // weak
_UNKNOWN unk_65A01570; // weak
_UNKNOWN unk_65A01600; // weak
_UNKNOWN unk_65A01690; // weak
_UNKNOWN unk_65A01720; // weak
_UNKNOWN unk_65A017B0; // weak
_UNKNOWN unk_65A01840; // weak
_UNKNOWN unk_65A018D0; // weak
_UNKNOWN unk_65A01960; // weak
_UNKNOWN unk_65A019F0; // weak
_UNKNOWN unk_65A01A80; // weak
_UNKNOWN unk_65A01B10; // weak
_UNKNOWN unk_65A01BA0; // weak
_UNKNOWN unk_65A01C30; // weak
_UNKNOWN unk_65A01CC0; // weak
_UNKNOWN unk_65A01D50; // weak
_UNKNOWN unk_65A01DE0; // weak
_UNKNOWN unk_65A01E70; // weak
_UNKNOWN unk_65A01F00; // weak
_UNKNOWN unk_65A01F90; // weak
_UNKNOWN unk_65A02020; // weak
_UNKNOWN unk_65A020B0; // weak
_UNKNOWN unk_65A02140; // weak
_UNKNOWN unk_65A021D0; // weak
_UNKNOWN unk_65A02260; // weak
_UNKNOWN unk_65A022F0; // weak
_UNKNOWN unk_65A02380; // weak
_UNKNOWN unk_65A02410; // weak
_UNKNOWN unk_65A024A0; // weak
_UNKNOWN unk_65A02530; // weak
_UNKNOWN unk_65A025C0; // weak
_UNKNOWN unk_65A02650; // weak
_UNKNOWN unk_65A026E0; // weak
_UNKNOWN unk_65A02770; // weak
_UNKNOWN unk_65A02800; // weak
_UNKNOWN unk_65A02890; // weak
_UNKNOWN unk_65A02920; // weak
_UNKNOWN unk_65A029B0; // weak
_UNKNOWN unk_65A02A40; // weak
_UNKNOWN unk_65A02AD0; // weak
_UNKNOWN unk_65A02B60; // weak
_UNKNOWN unk_65A02BF0; // weak
_UNKNOWN unk_65A02C80; // weak
_UNKNOWN unk_65A02D10; // weak
_UNKNOWN unk_65A02DA0; // weak
_UNKNOWN unk_65A02E30; // weak
_UNKNOWN unk_65A02EC0; // weak
_UNKNOWN unk_65A02F50; // weak
_UNKNOWN unk_65A02FE0; // weak
_UNKNOWN unk_65A03070; // weak
_UNKNOWN unk_65A03100; // weak
_UNKNOWN unk_65A03190; // weak
_UNKNOWN unk_65A03220; // weak
_UNKNOWN unk_65A032B0; // weak
_UNKNOWN unk_65A03340; // weak
_UNKNOWN unk_65A033D0; // weak
_UNKNOWN unk_65A03460; // weak
_UNKNOWN unk_65A034F0; // weak
_UNKNOWN unk_65A03580; // weak
_UNKNOWN unk_65A03610; // weak
_UNKNOWN unk_65A036A0; // weak
_UNKNOWN unk_65A03730; // weak
_UNKNOWN unk_65A037C0; // weak
_UNKNOWN unk_65A03850; // weak
_UNKNOWN unk_65A038E0; // weak
_UNKNOWN unk_65A03970; // weak
_UNKNOWN unk_65A03A00; // weak
_UNKNOWN unk_65A03A90; // weak
_UNKNOWN unk_65A03B20; // weak
_UNKNOWN unk_65A03BB0; // weak
_UNKNOWN unk_65A03C40; // weak
_UNKNOWN unk_65A03CD0; // weak
_UNKNOWN unk_65A03D60; // weak
_UNKNOWN unk_65A03DF0; // weak
_UNKNOWN unk_65A03E80; // weak
_UNKNOWN unk_65A03F10; // weak
_UNKNOWN unk_65A03FA0; // weak
_UNKNOWN unk_65A04030; // weak
_UNKNOWN unk_65A040C0; // weak
_UNKNOWN unk_65A04150; // weak
_UNKNOWN unk_65A041E0; // weak
_UNKNOWN unk_65A04270; // weak
_UNKNOWN unk_65A04300; // weak
_UNKNOWN unk_65A04390; // weak
_UNKNOWN unk_65A04420; // weak
_UNKNOWN unk_65A044B0; // weak
_UNKNOWN unk_65A04540; // weak
_UNKNOWN unk_65A045D0; // weak
_UNKNOWN unk_65A04660; // weak
_UNKNOWN unk_65A046F0; // weak
_UNKNOWN unk_65A04780; // weak
_UNKNOWN unk_65A04810; // weak
_UNKNOWN unk_65A048A0; // weak
_UNKNOWN unk_65A04930; // weak
_UNKNOWN unk_65A049C0; // weak
_UNKNOWN unk_65A04A50; // weak
_UNKNOWN unk_65A04AE0; // weak
_UNKNOWN unk_65A04B70; // weak
_UNKNOWN unk_65A04C00; // weak
_UNKNOWN unk_65A04C90; // weak
_UNKNOWN unk_65A04D20; // weak
_UNKNOWN unk_65A04DB0; // weak
_UNKNOWN unk_65A04E40; // weak
_UNKNOWN unk_65A04ED0; // weak
_UNKNOWN unk_65A04F60; // weak
_UNKNOWN unk_65A04FF0; // weak
_UNKNOWN unk_65A05080; // weak
_UNKNOWN unk_65A05110; // weak
_UNKNOWN unk_65A051A0; // weak
_UNKNOWN unk_65A05230; // weak
_UNKNOWN unk_65A052C0; // weak
_UNKNOWN unk_65A05350; // weak
_UNKNOWN unk_65A053E0; // weak
_UNKNOWN unk_65A05470; // weak
_UNKNOWN unk_65A05500; // weak
_UNKNOWN unk_65A05590; // weak
_UNKNOWN unk_65A05620; // weak
_UNKNOWN unk_65A056B0; // weak
_UNKNOWN unk_65A05740; // weak
_UNKNOWN unk_65A057D0; // weak
_UNKNOWN unk_65A05860; // weak
_UNKNOWN unk_65A058F0; // weak
_UNKNOWN unk_65A05980; // weak
_UNKNOWN unk_65A05A10; // weak
_UNKNOWN unk_65A05AA0; // weak
_UNKNOWN unk_65A05B30; // weak
_UNKNOWN unk_65A05BC0; // weak
_UNKNOWN unk_65A05C50; // weak
_UNKNOWN unk_65A05CE0; // weak
_UNKNOWN unk_65A05D70; // weak
_UNKNOWN unk_65A05E00; // weak
_UNKNOWN unk_65A05E90; // weak
_UNKNOWN unk_65A05F20; // weak
_UNKNOWN unk_65A05FB0; // weak
_UNKNOWN unk_65A06040; // weak
_UNKNOWN unk_65A060D0; // weak
_UNKNOWN unk_65A06160; // weak
_UNKNOWN unk_65A061F0; // weak
_UNKNOWN unk_65A06280; // weak
_UNKNOWN unk_65A06310; // weak
_UNKNOWN unk_65A063A0; // weak
_UNKNOWN unk_65A06430; // weak
_UNKNOWN unk_65A064C0; // weak
_UNKNOWN unk_65A06550; // weak
_UNKNOWN unk_65A065E0; // weak
_UNKNOWN unk_65A06670; // weak
_UNKNOWN unk_65A06700; // weak
_UNKNOWN unk_65A06790; // weak
_UNKNOWN unk_65A06820; // weak
_UNKNOWN unk_65A068B0; // weak
_UNKNOWN unk_65A06940; // weak
_UNKNOWN unk_65A069D0; // weak
_UNKNOWN unk_65A06A60; // weak
_UNKNOWN unk_65A06AF0; // weak
_UNKNOWN unk_65A06B80; // weak
_UNKNOWN unk_65A06C10; // weak
_UNKNOWN unk_65A06CA0; // weak
_UNKNOWN unk_65A06D30; // weak
_UNKNOWN unk_65A06DC0; // weak
_UNKNOWN unk_65A06E50; // weak
_UNKNOWN unk_65A06EE0; // weak
_UNKNOWN unk_65A06F70; // weak
_UNKNOWN unk_65A07000; // weak
_UNKNOWN unk_65A07090; // weak
_UNKNOWN unk_65A07120; // weak
_UNKNOWN unk_65A071B0; // weak
_UNKNOWN unk_65A07240; // weak
_UNKNOWN unk_65A072D0; // weak
_UNKNOWN unk_65A07360; // weak
_UNKNOWN unk_65A073F0; // weak
_UNKNOWN unk_65A07480; // weak
_UNKNOWN unk_65A07510; // weak
_UNKNOWN unk_65A075A0; // weak
_UNKNOWN unk_65A07630; // weak
_UNKNOWN unk_65A076C0; // weak
_UNKNOWN unk_65A07750; // weak
_UNKNOWN unk_65A077E0; // weak
_UNKNOWN unk_65A07870; // weak
_UNKNOWN unk_65A07900; // weak
_UNKNOWN unk_65A07990; // weak
_UNKNOWN unk_65A07A20; // weak
_UNKNOWN unk_65A07AB0; // weak
_UNKNOWN unk_65A07B40; // weak
_UNKNOWN unk_65A07BD0; // weak
_UNKNOWN unk_65A07C60; // weak
_UNKNOWN unk_65A07CF0; // weak
_UNKNOWN unk_65A07D80; // weak
_UNKNOWN unk_65A07E10; // weak
_UNKNOWN unk_65A07EA0; // weak
_UNKNOWN unk_65A07F30; // weak
_UNKNOWN unk_65A07FC0; // weak
_UNKNOWN unk_65A08050; // weak
_UNKNOWN unk_65A080E0; // weak
_UNKNOWN unk_65A08170; // weak
_UNKNOWN unk_65A08200; // weak
_UNKNOWN unk_65A08290; // weak
_UNKNOWN unk_65A08320; // weak
_UNKNOWN unk_65A083B0; // weak
_UNKNOWN unk_65A08440; // weak
_UNKNOWN unk_65A084D0; // weak
_UNKNOWN unk_65A08560; // weak
_UNKNOWN unk_65A085F0; // weak
_UNKNOWN unk_65A08680; // weak
_UNKNOWN unk_65A08710; // weak
_UNKNOWN unk_65A087A0; // weak
_UNKNOWN unk_65A08830; // weak
_UNKNOWN unk_65A088C0; // weak
_UNKNOWN unk_65A08950; // weak
_UNKNOWN unk_65A089E0; // weak
_UNKNOWN unk_65A08A70; // weak
_UNKNOWN unk_65A08B00; // weak
_UNKNOWN unk_65A08B90; // weak
_UNKNOWN unk_65A08C20; // weak
_UNKNOWN unk_65A08CB0; // weak
_UNKNOWN unk_65A08D40; // weak
_UNKNOWN unk_65A08DD0; // weak
_UNKNOWN unk_65A08E60; // weak
_UNKNOWN unk_65A08EF0; // weak
_UNKNOWN unk_65A08F80; // weak
_UNKNOWN unk_65A09010; // weak
_UNKNOWN unk_65A090A0; // weak
_UNKNOWN unk_65A09130; // weak
_UNKNOWN unk_65A091C0; // weak
_UNKNOWN unk_65A09250; // weak
_UNKNOWN unk_65A092E0; // weak
_UNKNOWN unk_65A09370; // weak
_UNKNOWN unk_65A09400; // weak
_UNKNOWN unk_65A09490; // weak
_UNKNOWN unk_65A09520; // weak
_UNKNOWN unk_65A095B0; // weak
_UNKNOWN unk_65A09640; // weak
_UNKNOWN unk_65A096D0; // weak
_UNKNOWN unk_65A09760; // weak
_UNKNOWN unk_65A097F0; // weak
_UNKNOWN unk_65A09880; // weak
_UNKNOWN unk_65A09910; // weak
_UNKNOWN unk_65A099A0; // weak
_UNKNOWN unk_65A09A30; // weak
_UNKNOWN unk_65A09AC0; // weak
_UNKNOWN unk_65A09B50; // weak
_UNKNOWN unk_65A09BE0; // weak
_UNKNOWN unk_65A09C70; // weak
_UNKNOWN unk_65A09D00; // weak
_UNKNOWN unk_65A09D90; // weak
_UNKNOWN unk_65A09E20; // weak
_UNKNOWN unk_65A09EB0; // weak
_UNKNOWN unk_65A09F40; // weak
_UNKNOWN unk_65A09FD0; // weak
_UNKNOWN unk_65A0A060; // weak
_UNKNOWN unk_65A0A0F0; // weak
_UNKNOWN unk_65A0A180; // weak
_UNKNOWN unk_65A0A210; // weak
_UNKNOWN unk_65A0A2A0; // weak
_UNKNOWN unk_65A0A330; // weak
_UNKNOWN unk_65A0A3C0; // weak
_UNKNOWN unk_65A0A450; // weak
_UNKNOWN unk_65A0A4E0; // weak
_UNKNOWN unk_65A0A570; // weak
_UNKNOWN unk_65A0A600; // weak
_UNKNOWN unk_65A0A690; // weak
_UNKNOWN unk_65A0A720; // weak
_UNKNOWN unk_65A0A7B0; // weak
_UNKNOWN unk_65A0A840; // weak
_UNKNOWN unk_65A0A8D0; // weak
_UNKNOWN unk_65A0A960; // weak
_UNKNOWN unk_65A0A9F0; // weak
_UNKNOWN unk_65A0AA80; // weak
_UNKNOWN unk_65A0AB10; // weak
_UNKNOWN unk_65A0ABA0; // weak
_UNKNOWN unk_65A0AC30; // weak
_UNKNOWN unk_65A0ACC0; // weak
_UNKNOWN unk_65A0AD50; // weak
_UNKNOWN unk_65A0ADE0; // weak
_UNKNOWN unk_65A0AE70; // weak
_UNKNOWN unk_65A0AF00; // weak
_UNKNOWN unk_65A0AF90; // weak
_UNKNOWN unk_65A0B020; // weak
_UNKNOWN unk_65A0B0B0; // weak
_UNKNOWN unk_65A0B140; // weak
_UNKNOWN unk_65A0B1D0; // weak
_UNKNOWN unk_65A0B260; // weak
_UNKNOWN unk_65A0B2F0; // weak
_UNKNOWN unk_65A0B380; // weak
_UNKNOWN unk_65A0B410; // weak
_UNKNOWN unk_65A0B4A0; // weak
_UNKNOWN unk_65A0B530; // weak
_UNKNOWN unk_65A0B5C0; // weak
_UNKNOWN unk_65A0B650; // weak
_UNKNOWN unk_65A0B6E0; // weak
_UNKNOWN unk_65A0B770; // weak
_UNKNOWN unk_65A0B800; // weak
_UNKNOWN unk_65A0B890; // weak
_UNKNOWN unk_65A0B920; // weak
_UNKNOWN unk_65A0B9B0; // weak
_UNKNOWN unk_65A0BA40; // weak
_UNKNOWN unk_65A0BAD0; // weak
_UNKNOWN unk_65A0BB60; // weak
_UNKNOWN unk_65A0BBF0; // weak
_UNKNOWN unk_65A0BC80; // weak
_UNKNOWN unk_65A0BD10; // weak
_UNKNOWN unk_65A0BDA0; // weak
_UNKNOWN unk_65A0BE30; // weak
_UNKNOWN unk_65A0BEC0; // weak
_UNKNOWN unk_65A0BF50; // weak
_UNKNOWN unk_65A0BFE0; // weak
_UNKNOWN unk_65A0C070; // weak
_UNKNOWN unk_65A0C100; // weak
_UNKNOWN unk_65A0C190; // weak
_UNKNOWN unk_65A0C220; // weak
_UNKNOWN unk_65A0C2B0; // weak
_UNKNOWN unk_65A0C340; // weak
_UNKNOWN unk_65A0C3D0; // weak
_UNKNOWN unk_65A0C460; // weak
_UNKNOWN unk_65A0C4F0; // weak
_UNKNOWN unk_65A0C580; // weak
_UNKNOWN unk_65A0C610; // weak
_UNKNOWN unk_65A0C6A0; // weak
_UNKNOWN unk_65A0C730; // weak
_UNKNOWN unk_65A0C7C0; // weak
_UNKNOWN unk_65A0C850; // weak
_UNKNOWN unk_65A0C8E0; // weak
_UNKNOWN unk_65A0C970; // weak
_UNKNOWN unk_65A0CA00; // weak
_UNKNOWN unk_65A0CA90; // weak
_UNKNOWN unk_65A0CB20; // weak
_UNKNOWN unk_65A0CBB0; // weak
_UNKNOWN unk_65A0CC40; // weak
_UNKNOWN unk_65A0CCD0; // weak
_UNKNOWN unk_65A0CD60; // weak
_UNKNOWN unk_65A0CDF0; // weak
_UNKNOWN unk_65A0CE80; // weak
_UNKNOWN unk_65A0CF10; // weak
_UNKNOWN unk_65A0CFA0; // weak
_UNKNOWN unk_65A0D030; // weak
_UNKNOWN unk_65A0D0C0; // weak
_UNKNOWN unk_65A0D150; // weak
_UNKNOWN unk_65A0D1E0; // weak
_UNKNOWN unk_65A0D270; // weak
_UNKNOWN unk_65A0D300; // weak
_UNKNOWN unk_65A0D390; // weak
_UNKNOWN unk_65A0D420; // weak
_UNKNOWN unk_65A0D4B0; // weak
_UNKNOWN unk_65A0D540; // weak
_UNKNOWN unk_65A0D5D0; // weak
_UNKNOWN unk_65A0D660; // weak
_UNKNOWN unk_65A0D6F0; // weak
_UNKNOWN unk_65A0D780; // weak
_UNKNOWN unk_65A0D810; // weak
_UNKNOWN unk_65A0D8A0; // weak
_UNKNOWN unk_65A0D930; // weak
_UNKNOWN unk_65A0D9C0; // weak
_UNKNOWN unk_65A0DA50; // weak
_UNKNOWN unk_65A0DAE0; // weak
_UNKNOWN unk_65A0DB70; // weak
_UNKNOWN unk_65A0DC00; // weak
_UNKNOWN unk_65A0DC90; // weak
_UNKNOWN unk_65A0DD20; // weak
_UNKNOWN unk_65A0DDB0; // weak
_UNKNOWN unk_65A0DE40; // weak
_UNKNOWN unk_65A0DED0; // weak
_UNKNOWN unk_65A0DF60; // weak
_UNKNOWN unk_65A0DFF0; // weak
_UNKNOWN unk_65A0E080; // weak
_UNKNOWN unk_65A0E110; // weak
_UNKNOWN unk_65A0E1A0; // weak
_UNKNOWN unk_65A0E230; // weak
_UNKNOWN unk_65A0E2C0; // weak
_UNKNOWN unk_65A0E350; // weak
_UNKNOWN unk_65A0E3E0; // weak
_UNKNOWN unk_65A0E470; // weak
_UNKNOWN unk_65A0E500; // weak
_UNKNOWN unk_65A0E590; // weak
_UNKNOWN unk_65A0E620; // weak
_UNKNOWN unk_65A0E6B0; // weak
_UNKNOWN unk_65A0E740; // weak
_UNKNOWN unk_65A0E7D0; // weak
_UNKNOWN unk_65A0E860; // weak
_UNKNOWN unk_65A0E8F0; // weak
_UNKNOWN unk_65A0E980; // weak
_UNKNOWN unk_65A0EA10; // weak
_UNKNOWN unk_65A0EAA0; // weak
_UNKNOWN unk_65A0EB30; // weak
_UNKNOWN unk_65A0EBC0; // weak
_UNKNOWN unk_65A0EC50; // weak
_UNKNOWN unk_65A0ECE0; // weak
_UNKNOWN unk_65A0ED70; // weak
_UNKNOWN unk_65A0EE00; // weak
_UNKNOWN unk_65A0EE90; // weak
_UNKNOWN unk_65A0EF20; // weak
_UNKNOWN unk_65A0EFB0; // weak
_UNKNOWN unk_65A0F040; // weak
_UNKNOWN unk_65A0F0D0; // weak
_UNKNOWN unk_65A0F160; // weak
_UNKNOWN unk_65A0F1F0; // weak
_UNKNOWN unk_65A0F280; // weak
_UNKNOWN unk_65A0F310; // weak
_UNKNOWN unk_65A0F3A0; // weak
_UNKNOWN unk_65A0F430; // weak
_UNKNOWN unk_65A0F4C0; // weak
_UNKNOWN unk_65A0F550; // weak
_UNKNOWN unk_65A0F5E0; // weak
_UNKNOWN unk_65A0F670; // weak
_UNKNOWN unk_65A0F700; // weak
_UNKNOWN unk_65A0F790; // weak
_UNKNOWN unk_65A0F820; // weak
_UNKNOWN unk_65A0F8B0; // weak
_UNKNOWN unk_65A0F940; // weak
_UNKNOWN unk_65A0F9D0; // weak
_UNKNOWN unk_65A0FA60; // weak
_UNKNOWN unk_65A0FAF0; // weak
_UNKNOWN unk_65A0FB80; // weak
_UNKNOWN unk_65A0FC10; // weak
_UNKNOWN unk_65A0FCA0; // weak
_UNKNOWN unk_65A0FD30; // weak
_UNKNOWN unk_65A0FDC0; // weak
_UNKNOWN unk_65A0FE50; // weak
_UNKNOWN unk_65A0FEE0; // weak
_UNKNOWN unk_65A0FF70; // weak
_UNKNOWN unk_65A10000; // weak
_UNKNOWN unk_65A10090; // weak
_UNKNOWN unk_65A10120; // weak
_UNKNOWN unk_65A101B0; // weak
_UNKNOWN unk_65A10240; // weak
_UNKNOWN unk_65A102D0; // weak
_UNKNOWN unk_65A10360; // weak
_UNKNOWN unk_65A103F0; // weak
_UNKNOWN unk_65A10480; // weak
_UNKNOWN unk_65A10510; // weak
_UNKNOWN unk_65A105A0; // weak
_UNKNOWN unk_65A10630; // weak
_UNKNOWN unk_65A106C0; // weak
_UNKNOWN unk_65A10750; // weak
_UNKNOWN unk_65A107E0; // weak
_UNKNOWN unk_65A10870; // weak
_UNKNOWN unk_65A10900; // weak
_UNKNOWN unk_65A10990; // weak
_UNKNOWN unk_65A10A20; // weak
_UNKNOWN unk_65A10AB0; // weak
_UNKNOWN unk_65A10B40; // weak
_UNKNOWN unk_65A10BD0; // weak
_UNKNOWN unk_65A10C60; // weak
_UNKNOWN unk_65A10CF0; // weak
_UNKNOWN unk_65A10D80; // weak
_UNKNOWN unk_65A10E10; // weak
_UNKNOWN unk_65A10EA0; // weak
_UNKNOWN unk_65A10F30; // weak
_UNKNOWN unk_65A10FC0; // weak
_UNKNOWN unk_65A11050; // weak
_UNKNOWN unk_65A110E0; // weak
_UNKNOWN unk_65A11170; // weak
_UNKNOWN unk_65A11200; // weak
_UNKNOWN unk_65A11290; // weak
_UNKNOWN unk_65A11320; // weak
_UNKNOWN unk_65A113B0; // weak
_UNKNOWN unk_65A11440; // weak
_UNKNOWN unk_65A114D0; // weak
_UNKNOWN unk_65A11560; // weak
_UNKNOWN unk_65A115F0; // weak
_UNKNOWN unk_65A11680; // weak
_UNKNOWN unk_65A11710; // weak
_UNKNOWN unk_65A117A0; // weak
_UNKNOWN unk_65A11830; // weak
_UNKNOWN unk_65A118C0; // weak
_UNKNOWN unk_65A11950; // weak
_UNKNOWN unk_65A119E0; // weak
_UNKNOWN unk_65A11A70; // weak
_UNKNOWN unk_65A11B00; // weak
_UNKNOWN unk_65A11B90; // weak
_UNKNOWN unk_65A11C20; // weak
_UNKNOWN unk_65A11CB0; // weak
_UNKNOWN unk_65A11D40; // weak
_UNKNOWN unk_65A11DD0; // weak
_UNKNOWN unk_65A11E60; // weak
_UNKNOWN unk_65A11EF0; // weak
_UNKNOWN unk_65A11F80; // weak
_UNKNOWN unk_65A12010; // weak
_UNKNOWN unk_65A120A0; // weak
_UNKNOWN unk_65A12130; // weak
_UNKNOWN unk_65A121C0; // weak
_UNKNOWN unk_65A12250; // weak
_UNKNOWN unk_65A122E0; // weak
_UNKNOWN unk_65A12370; // weak
_UNKNOWN unk_65A12400; // weak
_UNKNOWN unk_65A12490; // weak
_UNKNOWN unk_65A12520; // weak
_UNKNOWN unk_65A125B0; // weak
_UNKNOWN unk_65A12640; // weak
_UNKNOWN unk_65A126D0; // weak
_UNKNOWN unk_65A12760; // weak
_UNKNOWN unk_65A127F0; // weak
_UNKNOWN unk_65A12880; // weak
_UNKNOWN unk_65A12910; // weak
_UNKNOWN unk_65A129A0; // weak
_UNKNOWN unk_65A12A30; // weak
_UNKNOWN unk_65A12AC0; // weak
_UNKNOWN unk_65A12B50; // weak
_UNKNOWN unk_65A12BE0; // weak
_UNKNOWN unk_65A12C70; // weak
_UNKNOWN unk_65A12D00; // weak
_UNKNOWN unk_65A12D90; // weak
_UNKNOWN unk_65A12E20; // weak
_UNKNOWN unk_65A12EB0; // weak
_UNKNOWN unk_65A12F40; // weak
_UNKNOWN unk_65A12FD0; // weak
_UNKNOWN unk_65A13060; // weak
_UNKNOWN unk_65A130F0; // weak
_UNKNOWN unk_65A13180; // weak
_UNKNOWN unk_65A13210; // weak
_UNKNOWN unk_65A132A0; // weak
_UNKNOWN unk_65A13330; // weak
_UNKNOWN unk_65A133C0; // weak
_UNKNOWN unk_65A13450; // weak
_UNKNOWN unk_65A134E0; // weak
_UNKNOWN unk_65A13570; // weak
_UNKNOWN unk_65A13600; // weak
_UNKNOWN unk_65A13690; // weak
_UNKNOWN unk_65A13720; // weak
_UNKNOWN unk_65A137B0; // weak
_UNKNOWN unk_65A13840; // weak
_UNKNOWN unk_65A138D0; // weak
_UNKNOWN unk_65A13960; // weak
_UNKNOWN unk_65A139F0; // weak
_UNKNOWN unk_65A13A80; // weak
_UNKNOWN unk_65A13B10; // weak
_UNKNOWN unk_65A13BA0; // weak
_UNKNOWN unk_65A13C30; // weak
_UNKNOWN unk_65A13CC0; // weak
_UNKNOWN unk_65A13D50; // weak
_UNKNOWN unk_65A13DE0; // weak
_UNKNOWN unk_65A13E70; // weak
_UNKNOWN unk_65A13F00; // weak
_UNKNOWN unk_65A13F90; // weak
_UNKNOWN unk_65A14020; // weak
_UNKNOWN unk_65A140B0; // weak
_UNKNOWN unk_65A14140; // weak
_UNKNOWN unk_65A141D0; // weak
_UNKNOWN unk_65A14260; // weak
_UNKNOWN unk_65A142F0; // weak
_UNKNOWN unk_65A14380; // weak
_UNKNOWN unk_65A14410; // weak
_UNKNOWN unk_65A144A0; // weak
_UNKNOWN unk_65A14530; // weak
_UNKNOWN unk_65A145C0; // weak
_UNKNOWN unk_65A14650; // weak
_UNKNOWN unk_65A146E0; // weak
_UNKNOWN unk_65A14770; // weak
_UNKNOWN unk_65A14800; // weak
_UNKNOWN unk_65A14890; // weak
_UNKNOWN unk_65A14920; // weak
_UNKNOWN unk_65A149B0; // weak
_UNKNOWN unk_65A14A40; // weak
_UNKNOWN unk_65A14AD0; // weak
_UNKNOWN unk_65A14B60; // weak
_UNKNOWN unk_65A14BF0; // weak
_UNKNOWN unk_65A14C80; // weak
_UNKNOWN unk_65A14D10; // weak
_UNKNOWN unk_65A14DA0; // weak
_UNKNOWN unk_65A14E30; // weak
_UNKNOWN unk_65A14EC0; // weak
_UNKNOWN unk_65A14F50; // weak
_UNKNOWN unk_65A14FE0; // weak
_UNKNOWN unk_65A15070; // weak
_UNKNOWN unk_65A15100; // weak
_UNKNOWN unk_65A15190; // weak
_UNKNOWN unk_65A15220; // weak
_UNKNOWN unk_65A152B0; // weak
_UNKNOWN unk_65A15340; // weak
_UNKNOWN unk_65A153D0; // weak
_UNKNOWN unk_65A15460; // weak
_UNKNOWN unk_65A154F0; // weak
_UNKNOWN unk_65A15580; // weak
_UNKNOWN unk_65A15610; // weak
_UNKNOWN unk_65A156A0; // weak
_UNKNOWN unk_65A15730; // weak
_UNKNOWN unk_65A157C0; // weak
_UNKNOWN unk_65A15850; // weak
_UNKNOWN unk_65A158E0; // weak
_UNKNOWN unk_65A15970; // weak
_UNKNOWN unk_65A15A00; // weak
_UNKNOWN unk_65A15A90; // weak
_UNKNOWN unk_65A15B20; // weak
_UNKNOWN unk_65A15BB0; // weak
_UNKNOWN unk_65A15C40; // weak
_UNKNOWN unk_65A15CD0; // weak
_UNKNOWN unk_65A15D60; // weak
_UNKNOWN unk_65A15DF0; // weak
_UNKNOWN unk_65A15E80; // weak
_UNKNOWN unk_65A15F10; // weak
_UNKNOWN unk_65A15FA0; // weak
_UNKNOWN unk_65A16030; // weak
_UNKNOWN unk_65A160C0; // weak
_UNKNOWN unk_65A16150; // weak
_UNKNOWN unk_65A161E0; // weak
_UNKNOWN unk_65A16270; // weak
_UNKNOWN unk_65A16300; // weak
_UNKNOWN unk_65A16390; // weak
_UNKNOWN unk_65A16420; // weak
_UNKNOWN unk_65A164B0; // weak
_UNKNOWN unk_65A16540; // weak
_UNKNOWN unk_65A165D0; // weak
_UNKNOWN unk_65A16660; // weak
_UNKNOWN unk_65A166F0; // weak
_UNKNOWN unk_65A16780; // weak
_UNKNOWN unk_65A16810; // weak
_UNKNOWN unk_65A168A0; // weak
_UNKNOWN unk_65A16930; // weak
_UNKNOWN unk_65A169C0; // weak
_UNKNOWN unk_65A16A50; // weak
_UNKNOWN unk_65A16AE0; // weak
_UNKNOWN unk_65A16B70; // weak
_UNKNOWN unk_65A16C00; // weak
_UNKNOWN unk_65A16C90; // weak
_UNKNOWN unk_65A16D20; // weak
_UNKNOWN unk_65A16DB0; // weak
_UNKNOWN unk_65A16E40; // weak
_UNKNOWN unk_65A16ED0; // weak
_UNKNOWN unk_65A16F60; // weak
_UNKNOWN unk_65A16FF0; // weak
_UNKNOWN unk_65A17080; // weak
_UNKNOWN unk_65A17110; // weak
_UNKNOWN unk_65A171A0; // weak
_UNKNOWN unk_65A17230; // weak
_UNKNOWN unk_65A172C0; // weak
_UNKNOWN unk_65A17350; // weak
_UNKNOWN unk_65A173E0; // weak
_UNKNOWN unk_65A17470; // weak
_UNKNOWN unk_65A17500; // weak
_UNKNOWN unk_65A17590; // weak
_UNKNOWN unk_65A17620; // weak
_UNKNOWN unk_65A176B0; // weak
_UNKNOWN unk_65A17740; // weak
_UNKNOWN unk_65A177D0; // weak
_UNKNOWN unk_65A17860; // weak
_UNKNOWN unk_65A178F0; // weak
_UNKNOWN unk_65A17980; // weak
_UNKNOWN unk_65A17A10; // weak
_UNKNOWN unk_65A17AA0; // weak
_UNKNOWN unk_65A17B30; // weak
_UNKNOWN unk_65A17BC0; // weak
_UNKNOWN unk_65A17C50; // weak
_UNKNOWN unk_65A17CE0; // weak
_UNKNOWN unk_65A17D70; // weak
_UNKNOWN unk_65A17E00; // weak
_UNKNOWN unk_65A17E90; // weak
_UNKNOWN unk_65A17F20; // weak
_UNKNOWN unk_65A17FB0; // weak
_UNKNOWN unk_65A18040; // weak
_UNKNOWN unk_65A180D0; // weak
_UNKNOWN unk_65A18160; // weak
_UNKNOWN unk_65A181F0; // weak
_UNKNOWN unk_65A18280; // weak
_UNKNOWN unk_65A18310; // weak
_UNKNOWN unk_65A183A0; // weak
_UNKNOWN unk_65A18430; // weak
_UNKNOWN unk_65A184C0; // weak
_UNKNOWN unk_65A18550; // weak
_UNKNOWN unk_65A185E0; // weak
_UNKNOWN unk_65A18670; // weak
_UNKNOWN unk_65A18700; // weak
_UNKNOWN unk_65A18790; // weak
_UNKNOWN unk_65A18820; // weak
_UNKNOWN unk_65A188B0; // weak
_UNKNOWN unk_65A18940; // weak
_UNKNOWN unk_65A189D0; // weak
_UNKNOWN unk_65A18A60; // weak
_UNKNOWN unk_65A18AF0; // weak
_UNKNOWN unk_65A18B80; // weak
_UNKNOWN unk_65A18C10; // weak
_UNKNOWN unk_65A18CA0; // weak
_UNKNOWN unk_65A18D30; // weak
_UNKNOWN unk_65A18DC0; // weak
_UNKNOWN unk_65A18E50; // weak
_UNKNOWN unk_65A18EE0; // weak
_UNKNOWN unk_65A18F70; // weak
_UNKNOWN unk_65A19000; // weak
_UNKNOWN unk_65A19090; // weak
_UNKNOWN unk_65A19120; // weak
_UNKNOWN unk_65A191B0; // weak
_UNKNOWN unk_65A19240; // weak
_UNKNOWN unk_65A192D0; // weak
_UNKNOWN unk_65A19360; // weak
_UNKNOWN unk_65A193F0; // weak
_UNKNOWN unk_65A19480; // weak
_UNKNOWN unk_65A19510; // weak
_UNKNOWN unk_65A195A0; // weak
_UNKNOWN unk_65A19630; // weak
_UNKNOWN unk_65A196C0; // weak
_UNKNOWN unk_65A19750; // weak
_UNKNOWN unk_65A197E0; // weak
_UNKNOWN unk_65A19870; // weak
_UNKNOWN unk_65A19900; // weak
_UNKNOWN unk_65A19990; // weak
_UNKNOWN unk_65A19A20; // weak
_UNKNOWN unk_65A19AB0; // weak
_UNKNOWN unk_65A19B40; // weak
_UNKNOWN unk_65A19BD0; // weak
_UNKNOWN unk_65A19C60; // weak
_UNKNOWN unk_65A19CF0; // weak
_UNKNOWN unk_65A19D80; // weak
_UNKNOWN unk_65A19E10; // weak
_UNKNOWN unk_65A19EA0; // weak
_UNKNOWN unk_65A19F30; // weak
_UNKNOWN unk_65A19FC0; // weak
_UNKNOWN unk_65A1A050; // weak
_UNKNOWN unk_65A1A0E0; // weak
_UNKNOWN unk_65A1A170; // weak
_UNKNOWN unk_65A1A200; // weak
_UNKNOWN unk_65A1A290; // weak
_UNKNOWN unk_65A1A320; // weak
_UNKNOWN unk_65A1A3B0; // weak
_UNKNOWN unk_65A1A440; // weak
_UNKNOWN unk_65A1A4D0; // weak
_UNKNOWN unk_65A1A560; // weak
_UNKNOWN unk_65A1A5F0; // weak
_UNKNOWN unk_65A1A680; // weak
_UNKNOWN unk_65A1A710; // weak
_UNKNOWN unk_65A1A7A0; // weak
_UNKNOWN unk_65A1A830; // weak
_UNKNOWN unk_65A1A8C0; // weak
_UNKNOWN unk_65A1A950; // weak
_UNKNOWN unk_65A1A9E0; // weak
_UNKNOWN unk_65A1AA70; // weak
_UNKNOWN unk_65A1AB00; // weak
_UNKNOWN unk_65A1AB90; // weak
_UNKNOWN unk_65A1AC20; // weak
_UNKNOWN unk_65A1ACB0; // weak
_UNKNOWN unk_65A1AD40; // weak
_UNKNOWN unk_65A1ADD0; // weak
_UNKNOWN unk_65A1AE60; // weak
_UNKNOWN unk_65A1AEF0; // weak
_UNKNOWN unk_65A1AF80; // weak
_UNKNOWN unk_65A1B010; // weak
_UNKNOWN unk_65A1B0A0; // weak
_UNKNOWN unk_65A1B130; // weak
_UNKNOWN unk_65A1B1C0; // weak
_UNKNOWN unk_65A1B250; // weak
_UNKNOWN unk_65A1B2E0; // weak
_UNKNOWN unk_65A1B370; // weak
_UNKNOWN unk_65A1B400; // weak
_UNKNOWN unk_65A1B490; // weak
_UNKNOWN unk_65A1B520; // weak
_UNKNOWN unk_65A1B5B0; // weak
_UNKNOWN unk_65A1B640; // weak
_UNKNOWN unk_65A1B6D0; // weak
_UNKNOWN unk_65A1B760; // weak
_UNKNOWN unk_65A1B7F0; // weak
_UNKNOWN unk_65A1B880; // weak
_UNKNOWN unk_65A1B910; // weak
_UNKNOWN unk_65A1B9A0; // weak
_UNKNOWN unk_65A1BA30; // weak
_UNKNOWN unk_65A1BAC0; // weak
_UNKNOWN unk_65A1BB50; // weak
_UNKNOWN unk_65A1BBE0; // weak
_UNKNOWN unk_65A1BC70; // weak
_UNKNOWN unk_65A1BD00; // weak
_UNKNOWN unk_65A1BD90; // weak
_UNKNOWN unk_65A1BE20; // weak
_UNKNOWN unk_65A1BEB0; // weak
_UNKNOWN unk_65A1BF40; // weak
_UNKNOWN unk_65A1BFD0; // weak
_UNKNOWN unk_65A1C060; // weak
_UNKNOWN unk_65A1C0F0; // weak
_UNKNOWN unk_65A1C180; // weak
_UNKNOWN unk_65A1C210; // weak
_UNKNOWN unk_65A1C2A0; // weak
_UNKNOWN unk_65A1C330; // weak
_UNKNOWN unk_65A1C3C0; // weak
_UNKNOWN unk_65A1C450; // weak
_UNKNOWN unk_65A1C4E0; // weak
_UNKNOWN unk_65A1C570; // weak
_UNKNOWN unk_65A1C600; // weak
_UNKNOWN unk_65A1C690; // weak
_UNKNOWN unk_65A1C720; // weak
_UNKNOWN unk_65A1C7B0; // weak
_UNKNOWN unk_65A1C840; // weak
_UNKNOWN unk_65A1C8D0; // weak
_UNKNOWN unk_65A1C960; // weak
_UNKNOWN unk_65A1C9F0; // weak
_UNKNOWN unk_65A1CA80; // weak
_UNKNOWN unk_65A1CB10; // weak
_UNKNOWN unk_65A1CBA0; // weak
_UNKNOWN unk_65A1CC30; // weak
_UNKNOWN unk_65A1CCC0; // weak
_UNKNOWN unk_65A1CD50; // weak
_UNKNOWN unk_65A1CDE0; // weak
_UNKNOWN unk_65A1CE70; // weak
_UNKNOWN unk_65A1CF00; // weak
_UNKNOWN unk_65A1CF90; // weak
_UNKNOWN unk_65A1D020; // weak
_UNKNOWN unk_65A1D0B0; // weak
_UNKNOWN unk_65A1D140; // weak
_UNKNOWN unk_65A1D1D0; // weak
_UNKNOWN unk_65A1D260; // weak
_UNKNOWN unk_65A1D2F0; // weak
_UNKNOWN unk_65A1D380; // weak
_UNKNOWN unk_65A1D410; // weak
_UNKNOWN unk_65A1D4A0; // weak
_UNKNOWN unk_65A1D530; // weak
_UNKNOWN unk_65A1D5C0; // weak
_UNKNOWN unk_65A1D650; // weak
_UNKNOWN unk_65A1D6E0; // weak
_UNKNOWN unk_65A1D770; // weak
_UNKNOWN unk_65A1D800; // weak
_UNKNOWN unk_65A1D890; // weak
_UNKNOWN unk_65A1D920; // weak
_UNKNOWN unk_65A1D9B0; // weak
_UNKNOWN unk_65A1DA40; // weak
_UNKNOWN unk_65A1DAD0; // weak
_UNKNOWN unk_65A1DB60; // weak
_UNKNOWN unk_65A1DBF0; // weak
_UNKNOWN unk_65A1DC80; // weak
_UNKNOWN unk_65A1DD10; // weak
_UNKNOWN unk_65A1DDA0; // weak
_UNKNOWN unk_65A1DE30; // weak
_UNKNOWN unk_65A1DEC0; // weak
_UNKNOWN unk_65A1DF50; // weak
_UNKNOWN unk_65A1DFE0; // weak
_UNKNOWN unk_65A1E070; // weak
_UNKNOWN unk_65A1E100; // weak
_UNKNOWN unk_65A1E190; // weak
_UNKNOWN unk_65A1E220; // weak
_UNKNOWN unk_65A1E2B0; // weak
_UNKNOWN unk_65A1E340; // weak
_UNKNOWN unk_65A1E3D0; // weak
_UNKNOWN unk_65A1E460; // weak
_UNKNOWN unk_65A1E4F0; // weak
_UNKNOWN unk_65A1E580; // weak
_UNKNOWN unk_65A1E610; // weak
_UNKNOWN unk_65A1E6A0; // weak
_UNKNOWN unk_65A1E730; // weak
_UNKNOWN unk_65A1E7C0; // weak
_UNKNOWN unk_65A1E850; // weak
_UNKNOWN unk_65A1E8E0; // weak
_UNKNOWN unk_65A1E970; // weak
_UNKNOWN unk_65A1EA00; // weak
_UNKNOWN unk_65A1EA90; // weak
_UNKNOWN unk_65A1EB20; // weak
_UNKNOWN unk_65A1EBB0; // weak
_UNKNOWN unk_65A1EC40; // weak
_UNKNOWN unk_65A1ECD0; // weak
_UNKNOWN unk_65A1ED60; // weak
_UNKNOWN unk_65A1EDF0; // weak
_UNKNOWN unk_65A1EE80; // weak
_UNKNOWN unk_65A1EF10; // weak
_UNKNOWN unk_65A1EFA0; // weak
_UNKNOWN unk_65A1F030; // weak
_UNKNOWN unk_65A1F0C0; // weak
_UNKNOWN unk_65A1F150; // weak
_UNKNOWN unk_65A1F1E0; // weak
_UNKNOWN unk_65A1F270; // weak
_UNKNOWN unk_65A1F300; // weak
_UNKNOWN unk_65A1F390; // weak
_UNKNOWN unk_65A1F420; // weak
_UNKNOWN unk_65A1F4B0; // weak
_UNKNOWN unk_65A1F540; // weak
_UNKNOWN unk_65A1F5D0; // weak
_UNKNOWN unk_65A1F660; // weak
_UNKNOWN unk_65A1F6F0; // weak
_UNKNOWN unk_65A1F780; // weak
_UNKNOWN unk_65A1F810; // weak
_UNKNOWN unk_65A1F8A0; // weak
_UNKNOWN unk_65A1F930; // weak
_UNKNOWN unk_65A1F9C0; // weak
_UNKNOWN unk_65A1FA50; // weak
_UNKNOWN unk_65A1FAE0; // weak
_UNKNOWN unk_65A1FB70; // weak
_UNKNOWN unk_65A1FC00; // weak
_UNKNOWN unk_65A1FC90; // weak
_UNKNOWN unk_65A1FD20; // weak
_UNKNOWN unk_65A1FDB0; // weak
_UNKNOWN unk_65A1FE40; // weak
_UNKNOWN unk_65A1FED0; // weak
_UNKNOWN unk_65A1FF60; // weak
_UNKNOWN unk_65A1FFF0; // weak
_UNKNOWN unk_65A20080; // weak
_UNKNOWN unk_65A20110; // weak
_UNKNOWN unk_65A201A0; // weak
_UNKNOWN unk_65A20230; // weak
_UNKNOWN unk_65A202C0; // weak
_UNKNOWN unk_65A20350; // weak
_UNKNOWN unk_65A203E0; // weak
_UNKNOWN unk_65A20470; // weak
_UNKNOWN unk_65A20500; // weak
_UNKNOWN unk_65A20590; // weak
_UNKNOWN unk_65A20620; // weak
_UNKNOWN unk_65A206B0; // weak
_UNKNOWN unk_65A20740; // weak
_UNKNOWN unk_65A207D0; // weak
_UNKNOWN unk_65A20860; // weak
_UNKNOWN unk_65A208F0; // weak
_UNKNOWN unk_65A20980; // weak
_UNKNOWN unk_65A20A10; // weak
_UNKNOWN unk_65A20AA0; // weak
_UNKNOWN unk_65A20B30; // weak
_UNKNOWN unk_65A20BC0; // weak
_UNKNOWN unk_65A20C50; // weak
_UNKNOWN unk_65A20CE0; // weak
_UNKNOWN unk_65A20D70; // weak
_UNKNOWN unk_65A20E00; // weak
_UNKNOWN unk_65A20E90; // weak
_UNKNOWN unk_65A20F20; // weak
_UNKNOWN unk_65A20FB0; // weak
_UNKNOWN unk_65A21040; // weak
_UNKNOWN unk_65A210D0; // weak
_UNKNOWN unk_65A21160; // weak
_UNKNOWN unk_65A211F0; // weak
_UNKNOWN unk_65A21280; // weak
_UNKNOWN unk_65A21310; // weak
_UNKNOWN unk_65A213A0; // weak
_UNKNOWN unk_65A21430; // weak
_UNKNOWN unk_65A214C0; // weak
_UNKNOWN unk_65A21550; // weak
_UNKNOWN unk_65A215E0; // weak
_UNKNOWN unk_65A21670; // weak
_UNKNOWN unk_65A21700; // weak
_UNKNOWN unk_65A21790; // weak
_UNKNOWN unk_65A21820; // weak
_UNKNOWN unk_65A218B0; // weak
_UNKNOWN unk_65A21940; // weak
_UNKNOWN unk_65A219D0; // weak
_UNKNOWN unk_65A21A60; // weak
_UNKNOWN unk_65A21AF0; // weak
_UNKNOWN unk_65A21B80; // weak
_UNKNOWN unk_65A21C10; // weak
_UNKNOWN unk_65A21CA0; // weak
_UNKNOWN unk_65A21D30; // weak
_UNKNOWN unk_65A21DC0; // weak
_UNKNOWN unk_65A21E50; // weak
_UNKNOWN unk_65A21EE0; // weak
_UNKNOWN unk_65A21F70; // weak
_UNKNOWN unk_65A22000; // weak
_UNKNOWN unk_65A22090; // weak
_UNKNOWN unk_65A22120; // weak
_UNKNOWN unk_65A221B0; // weak
_UNKNOWN unk_65A22240; // weak
_UNKNOWN unk_65A222D0; // weak
_UNKNOWN unk_65A22360; // weak
_UNKNOWN unk_65A223F0; // weak
_UNKNOWN unk_65A22480; // weak
_UNKNOWN unk_65A22510; // weak
_UNKNOWN unk_65A225A0; // weak
_UNKNOWN unk_65A22630; // weak
_UNKNOWN unk_65A226C0; // weak
_UNKNOWN unk_65A22750; // weak
_UNKNOWN unk_65A227E0; // weak
_UNKNOWN unk_65A22870; // weak
_UNKNOWN unk_65A22900; // weak
_UNKNOWN unk_65A22990; // weak
_UNKNOWN unk_65A22A20; // weak
_UNKNOWN unk_65A22AB0; // weak
_UNKNOWN unk_65A22B40; // weak
_UNKNOWN unk_65A22BD0; // weak
_UNKNOWN unk_65A22C60; // weak
_UNKNOWN unk_65A22CF0; // weak
_UNKNOWN unk_65A22D80; // weak
_UNKNOWN unk_65A22E10; // weak
_UNKNOWN unk_65A22EA0; // weak
_UNKNOWN unk_65A22F30; // weak
_UNKNOWN unk_65A22FC0; // weak
_UNKNOWN unk_65A23050; // weak
_UNKNOWN unk_65A230E0; // weak
_UNKNOWN unk_65A23170; // weak
_UNKNOWN unk_65A23200; // weak
_UNKNOWN unk_65A23290; // weak
_UNKNOWN unk_65A23320; // weak
_UNKNOWN unk_65A233B0; // weak
_UNKNOWN unk_65A23440; // weak
_UNKNOWN unk_65A234D0; // weak
_UNKNOWN unk_65A23560; // weak
_UNKNOWN unk_65A235F0; // weak
_UNKNOWN unk_65A23680; // weak
_UNKNOWN unk_65A23710; // weak
_UNKNOWN unk_65A237A0; // weak
_UNKNOWN unk_65A23830; // weak
_UNKNOWN unk_65A238C0; // weak
_UNKNOWN unk_65A23950; // weak
_UNKNOWN unk_65A239E0; // weak
_UNKNOWN unk_65A23A70; // weak
_UNKNOWN unk_65A23B00; // weak
_UNKNOWN unk_65A23B90; // weak
_UNKNOWN unk_65A23C20; // weak
const _ThrowInfo _TI2_AVbad_alloc_std__ = { 0u, &sub_657093B0, NULL, &_CTA2_AVbad_alloc_std__ }; // idb
const ItemsAddedEntryVec _TI3_AVlength_error_std__ = { 0u, &sub_65709640, NULL, &_CTA3_AVlength_error_std__ }; // idb
const ItemsAddedEntryVec _TI3_AVout_of_range_std__ = { 0u, &sub_657096C0, NULL, &_CTA3_AVout_of_range_std__ }; // idb
const ItemsAddedEntryVec _TI1H = { 0u, NULL, NULL, &_CTA1H }; // idb
HANDLE hObject = (HANDLE)0xFFFFFFFF; // idb
LONG Target = 0; // idb
int dword_65A5115C = 0; // weak
_UNKNOWN unk_65A51198; // weak
char byte_65A51DCC[1036] =
{
  '\x01',
  '\x01',
  '\x01',
  '\0',
  '\0',
  '\x01',
  '\0',
  '\x01',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\x01',
  '\x01',
  '\x01',
  '\x01',
  '\0',
  '\x01',
  '\0',
  '\x01',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '_',
  '_',
  's',
  'e',
  'a',
  'r',
  'c',
  'h',
  '_',
  'm',
  'a',
  'r',
  'k',
  'e',
  'r',
  '_',
  'h',
  'o',
  'l',
  'd',
  'e',
  'r',
  '_',
  '_',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\xCE',
  '\xFA',
  '\xCE',
  '\xFA',
  'I',
  'L',
  'T',
  'C',
  'o',
  'm',
  'm',
  'o',
  'n',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  'C',
  'l',
  'i',
  'e',
  'n',
  't',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\x04',
  '\0',
  '\0',
  '\0',
  '_',
  '_',
  's',
  'e',
  'a',
  'r',
  'c',
  'h',
  '_',
  'm',
  'a',
  'r',
  'k',
  'e',
  'r',
  '_',
  'h',
  'o',
  'l',
  'd',
  'e',
  'r',
  '_',
  '_',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\xCE',
  '\xFA',
  '\xCE',
  '\xFA',
  'I',
  'L',
  'T',
  'P',
  'h',
  'y',
  's',
  'i',
  'c',
  's',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  'C',
  'l',
  'i',
  'e',
  'n',
  't',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '_',
  '_',
  's',
  'e',
  'a',
  'r',
  'c',
  'h',
  '_',
  'm',
  'a',
  'r',
  'k',
  'e',
  'r',
  '_',
  'h',
  'o',
  'l',
  'd',
  'e',
  'r',
  '_',
  '_',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\xCE',
  '\xFA',
  '\xCE',
  '\xFA',
  'I',
  'L',
  'T',
  'N',
  'e',
  't',
  'w',
  'o',
  'r',
  'k',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  'D',
  'e',
  'f',
  'a',
  'u',
  'l',
  't',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '_',
  '_',
  's',
  'e',
  'a',
  'r',
  'c',
  'h',
  '_',
  'm',
  'a',
  'r',
  'k',
  'e',
  'r',
  '_',
  'h',
  'o',
  'l',
  'd',
  'e',
  'r',
  '_',
  '_',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\xCE',
  '\xFA',
  '\xCE',
  '\xFA',
  'I',
  'L',
  'T',
  'M',
  'o',
  'd',
  'e',
  'l',
  'C',
  'l',
  'i',
  'e',
  'n',
  't',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  'D',
  'e',
  'f',
  'a',
  'u',
  'l',
  't',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '_',
  '_',
  's',
  'e',
  'a',
  'r',
  'c',
  'h',
  '_',
  'm',
  'a',
  'r',
  'k',
  'e',
  'r',
  '_',
  'h',
  'o',
  'l',
  'd',
  'e',
  'r',
  '_',
  '_',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\xCE',
  '\xFA',
  '\xCE',
  '\xFA',
  'I',
  'L',
  'T',
  'T',
  'e',
  'x',
  'I',
  'n',
  't',
  'e',
  'r',
  'f',
  'a',
  'c',
  'e',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  'D',
  'e',
  'f',
  'a',
  'u',
  'l',
  't',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '_',
  '_',
  's',
  'e',
  'a',
  'r',
  'c',
  'h',
  '_',
  'm',
  'a',
  'r',
  'k',
  'e',
  'r',
  '_',
  'h',
  'o',
  'l',
  'd',
  'e',
  'r',
  '_',
  '_',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\xCE',
  '\xFA',
  '\xCE',
  '\xFA',
  'I',
  'L',
  'T',
  'R',
  'e',
  'n',
  'd',
  'e',
  'r',
  'M',
  'g',
  'r',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  'D',
  'e',
  'f',
  'a',
  'u',
  'l',
  't',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0'
}; // weak
int dword_65A522C4 = 1; // weak
int dword_65A522C8[] = { 1501 }; // weak
char *off_65A522D8 = "W"; // weak
_UNKNOWN unk_65A522E4; // weak
int dword_65A52844 = 99; // weak
int dword_65A52848[6] = { 1500, 0, 0, 0, 0, 0 }; // weak
int dword_65A52864 = 0; // weak
_UNKNOWN unk_65A52F70; // weak
_UNKNOWN unk_65A52F78; // weak
char byte_65A533E0 = '\x01'; // weak
_UNKNOWN unk_65A53420; // weak
char aDt[3] = "DT"; // weak
int dword_65A53FE0[] = { 1 }; // weak
int dword_65A53FE8 = 1; // weak
int dword_65A53FF0 = 1; // weak
int dword_65A53FF8 = 1; // weak
BYTE Data = 0u; // idb
BYTE dword_65A55604 = 0u; // idb
int dword_65A556A4 = 1000; // weak
int dword_65A55AA8[12] = { 10, 500, 500, 500, 300, 200, 100, 50, 200, 100, 255, 0 }; // weak
_UNKNOWN unk_65A55C38; // weak
_UNKNOWN unk_65A55C90; // weak
_UNKNOWN unk_65A55CE8; // weak
_UNKNOWN unk_65A55DD0; // weak
_UNKNOWN unk_65A55E08; // weak
void *off_65A560A4 = &off_659D0714; // weak
int (__cdecl *off_65A560C0)(_DWORD, _DWORD, _DWORD) = &sub_658CAFC0; // weak
int (__cdecl *off_65A560C8)(void *Block) = &sub_658CB000; // weak
void *dword_65A5A5D0 = NULL; // idb
int dword_65A5A5D4 = 0; // weak
int dword_65A5A6E4; // weak
int dword_65A5A6E8; // weak
LPCVOID lpBaseAddress; // idb
DWORD dwMaximumSizeHigh; // idb
int dword_65A5A704; // weak
void *dword_65A5A708; // idb
char byte_65A5A790; // weak
char byte_65A5A7E0; // weak
void *dword_65A5A7E8; // idb
int dword_65A5A7F0; // weak
int dword_65A5A7F4; // weak
int dword_65A5A7FC; // weak
int dword_65A5A800; // weak
int dword_65A5A808[3]; // weak
int dword_65A5A814[3]; // weak
int dword_65A5A820[3]; // weak
int dword_65A5A82C[3]; // weak
int dword_65A5A838[3]; // weak
int dword_65A5A844[3]; // weak
int dword_65A5A850; // weak
int dword_65A5A854; // weak
int dword_65A5A85C; // weak
int dword_65A5A860; // weak
int dword_65A5A868[3]; // weak
int dword_65A5A874; // weak
int dword_65A5A878; // weak
int dword_65A5A880[3]; // weak
int dword_65A5A88C; // weak
int dword_65A5A890; // weak
int dword_65A5A898[3]; // weak
int dword_65A5A8A4[3]; // weak
int dword_65A5A8B0; // weak
int dword_65A5A8B4; // weak
int dword_65A5A8BC; // weak
int dword_65A5A8C0; // weak
int dword_65A5A8C8; // weak
int dword_65A5A8CC; // weak
int dword_65A5A8D4; // weak
int dword_65A5A8D8; // weak
int dword_65A5A8E0; // weak
int dword_65A5A8E4; // weak
int dword_65A5A8EC; // weak
ItemsAddedEntry TempFileName; // idb
_DWORD dword_65A5AA00[12]; // weak
int dword_65A5AA30; // weak
int dword_65A5AA34; // weak
int dword_65A5AA38; // weak
void *dword_65A5AA3C; // idb
int dword_65A5AA40; // weak
int dword_65A5AA44; // weak
int dword_65A5AA48; // weak
int g_LTClient; // weak
int dword_65A5AA50; // weak
int dword_65A5AA54; // weak
int dword_65A5AAB8[4]; // weak
int dword_65A5AAC8[4]; // weak
int dword_65A5AAD8[4]; // weak
int dword_65A5AAE8[4]; // weak
int g_pILTClient; // idb
_DWORD dword_65A5C16C[4]; // weak
char byte_65A5C4A8[108]; // weak
_UNKNOWN unk_65A5C580; // weak
_UNKNOWN unk_65A5C5EC; // weak
_UNKNOWN unk_65A5C6C4; // weak
_UNKNOWN unk_65A5C730; // weak
_UNKNOWN unk_65A5C808; // weak
_UNKNOWN unk_65A5C874; // weak
_UNKNOWN unk_65A5C9B8; // weak
_UNKNOWN unk_65A5CD84; // weak
_UNKNOWN unk_65A5CE5C; // weak
_UNKNOWN unk_65A5CEC8; // weak
_UNKNOWN unk_65A5CF34; // weak
_UNKNOWN unk_65A5CFA0; // weak
_UNKNOWN unk_65A5D00C; // weak
_UNKNOWN unk_65A5D0E4; // weak
_UNKNOWN unk_65A5D294; // weak
_UNKNOWN unk_65A5D36C; // weak
_UNKNOWN unk_65A5D738; // weak
_UNKNOWN unk_65A5D8E8; // weak
_UNKNOWN unk_65A5D9C0; // weak
_UNKNOWN unk_65A5DA98; // weak
_UNKNOWN unk_65A5DB04; // weak
_UNKNOWN unk_65A5E158; // weak
_UNKNOWN unk_65A5E590; // weak
char byte_65A5E598[15]; // idb
char byte_65A5E5A7; // weak
float flt_65A5E5FC; // weak
int dword_65A5E600; // weak
float flt_65A5E604; // weak
int dword_65A5E608; // weak
char byte_65A5E60C; // weak
int dword_65A5E610; // weak
int dword_65A6062C; // weak
int dword_65A60644; // weak
int dword_65ABC3A0; // weak
char aDeccameradist[14]; // weak
char aKeyboard_0[9]; // weak
char byte_65ABC610[31]; // idb
char byte_65ABC62F; // weak
char byte_65ABC630[31]; // idb
char byte_65ABC64F; // weak
int dword_65ABC650; // weak
char byte_65ABC654; // weak
char byte_65ABC675; // weak
char byte_65ABC676; // weak
int dword_65ABC9BC; // weak
__int16 word_65ABC9C0; // weak
_UNKNOWN unk_65ABDC60; // weak
char byte_65ABDE60[31]; // idb
char byte_65ABDE80[31]; // idb
int dword_65ABF6E8; // weak
CGameClientShell *g_pGameClientShell;
int dword_65ABF6F4; // weak
void *dword_65ABF6F8; // idb
void *dword_65ABF6FC; // idb
void *dword_65ABF700; // idb
void *dword_65ABF704; // idb
int dword_65ABF708; // weak
int dword_65ABF70C; // weak
__packed *g_pPlayerStats; // idb
void *dword_65ABF714; // idb
void *dword_65ABF718; // idb
void *dword_65ABF71C; // idb
void *dword_65ABF720; // idb
void *dword_65ABF724; // idb
void *dword_65ABF728; // idb
#167 *dword_65ABF72C; // idb
void *dword_65ABF730; // idb
void *dword_65ABF734; // idb
void *dword_65ABF738; // idb
void *dword_65ABF73C; // idb
void *dword_65ABF740; // idb
void *dword_65ABF744; // idb
int dword_65ABF748; // weak
void *dword_65ABF74C; // idb
void *dword_65ABF750; // idb
void *dword_65ABF754; // idb
#177 *dword_65ABF758; // idb
void *dword_65ABF75C; // idb
void *dword_65ABF760; // idb
void *dword_65ABF764; // idb
char *dword_65ABF768; // idb
int g_pEncVarMgr; // weak
void *dword_65ABF770; // idb
int dword_65ABF774; // weak
int dword_65ABF778; // weak
int dword_65ABF77C; // weak
int dword_65ABF780; // weak
int dword_65ABF790[]; // weak
int dword_65ABF794; // weak
int dword_65ABF798; // weak
int dword_65ABF79C; // weak
int dword_65ABF7A0; // weak
int dword_65ABF7A4; // weak
int dword_65ABF7A8; // weak
int dword_65ABF7AC; // weak
int dword_65ABF7B0; // weak
int dword_65ABF7B4; // weak
int dword_65ABF7B8; // weak
int dword_65ABF7BC; // weak
int dword_65ABF7C0; // weak
int dword_65ABF7C4; // weak
int dword_65ABF7C8; // weak
int dword_65ABF7CC; // weak
int dword_65ABF7D0; // weak
int dword_65ABF7D4; // weak
int dword_65ABF7D8; // weak
int dword_65ABF7DC; // weak
int dword_65ABF7E0; // weak
int dword_65ABF7E4; // weak
int dword_65ABF7E8; // weak
int dword_65ABF7EC; // weak
int dword_65ABF7F0; // weak
int dword_65ABF7F4; // weak
int dword_65ABF7F8[]; // weak
_UNKNOWN unk_65ABF7FC; // weak
int dword_65ABF800[]; // weak
int dword_65ABF808; // weak
char byte_65ABF80C; // weak
int dword_65ABF810; // weak
_UNKNOWN unk_65ABF814; // weak
int dword_65ABF830; // weak
int dword_65ABF834; // weak
int dword_65ABF83C; // weak
int dword_65ABF840; // weak
int dword_65ABF848; // weak
int dword_65ABF854; // weak
int dword_65ABF860; // weak
int dword_65ABF86C; // weak
int dword_65ABF870; // weak
int dword_65ABF874; // weak
int dword_65ABF878[4]; // weak
_DWORD dword_65ABF9B4[5]; // weak
int dword_65AC02E4[4]; // weak
int dword_65AC02F4[4]; // weak
int dword_65AC0304[4]; // weak
int dword_65AC0314[4]; // weak
int dword_65AC0324[4]; // weak
int dword_65AC0334[4]; // weak
int dword_65AC0344[4]; // weak
int dword_65AC0354[4]; // weak
int dword_65AC0364[4]; // weak
int dword_65AC0374[4]; // weak
int dword_65AC0384; // weak
int dword_65AC0388; // weak
int dword_65AC038C; // weak
int dword_65AC0390; // weak
SystemAddress6 g_SystemAddress_Unassigned2; // idb
int dword_65AC0DF0; // weak
int dword_65AC0DF4; // weak
_UNKNOWN g_SystemAddress_Unassigned; // weak
int g_ItemTemplateById[]; // weak
_UNKNOWN unk_65AC3FAC; // weak
int dword_65AC9770; // weak
int dword_65AC9774; // weak
char byte_65ACAC50; // weak
_DWORD dword_65ACAC58[12038]; // weak
char byte_65AD7270; // weak
_UNKNOWN unk_65AD7278; // weak
int g_ItemBaseStatListBeginById[]; // weak
int g_ItemBaseStatListEndById[415]; // weak
int g_ResistanceAmpStatListBegin; // weak
int g_ResistanceAmpStatListEnd; // weak
int dword_65AE2E90; // weak
LARGE_INTEGER *lpFrequency; // idb


//----- (657012D0) --------------------------------------------------------
char *__cdecl String_Duplicate(const char *a1)
{
  char *result; // eax

  if ( !a1 )
    return 0;
  result = (char *)operator new[](strlen(a1) + 1);
  strcpy(result, a1);
  return result;
}

//----- (65701310) --------------------------------------------------------
void __thiscall CommandEntry_SetName(int this, const char *a2)
{
  if ( a2 && *(_BYTE *)(this + 12) != 1 )
  {
    *(_BYTE *)(this + 12) = 1;
    if ( *(_DWORD *)(this + 16) )
    {
      operator delete[](*(void **)(this + 16));
      *(_DWORD *)(this + 16) = 0;
    }
    *(_DWORD *)(this + 16) = String_Duplicate(a2);
  }
}

//----- (657013B0) --------------------------------------------------------
int __cdecl String_CompareCallback(int (__thiscall ***a1)(_DWORD), int (__thiscall ***a2)(_DWORD))
{
  const char *v2; // esi
  int v3; // eax

  v2 = (const char *)(**a2)(a2);
  v3 = strcmp((const char *)(**a1)(a1), v2);
  if ( v3 >= 0 )
    return (v3 != 0) + 1;
  else
    return 0;
}

//----- (65701410) --------------------------------------------------------
int *__thiscall CallbackHandler_Invoke(int *this, int a2)
{
  int *result; // eax

  result = this;
  if ( a2 )
  {
    result = (int *)*(this + 5);
    if ( result )
      return (int *)(*(int (__stdcall **)(int *))(*(_DWORD *)a2 + 8))(result);
  }
  return result;
}

//----- (657014E0) --------------------------------------------------------
_DWORD *__thiscall DwordArray_Ctor(_DWORD *this)
{
  *(this + 1) = 1;
  *this = 0;
  *(this + 2) = operator new[](4u);
  return this;
}

//----- (657015C0) --------------------------------------------------------
_DWORD *__thiscall DwordArray_Ctor2(_DWORD *this)
{
  *(this + 1) = 1;
  *this = 0;
  *(this + 2) = operator new[](4u);
  return this;
}

//----- (65701620) --------------------------------------------------------
int __thiscall DwordArray_GetCount(void *this)
{
  return *(_DWORD *)this;
}

//----- (657016C0) --------------------------------------------------------
_DWORD *__thiscall DwordArray_Ctor3(_DWORD *this)
{
  *(this + 1) = 1;
  *this = 0;
  *(this + 2) = operator new[](4u);
  return this;
}

//----- (65701720) --------------------------------------------------------
int __thiscall Array_GetCount(void *this)
{
  return *(_DWORD *)this;
}

//----- (657017B0) --------------------------------------------------------
int __thiscall Array_GetElementAt(unsigned int *this, unsigned int a2)
{
  if ( a2 < *this )
    return *(_DWORD *)(*(this + 2) + 4 * a2);
  else
    return 0;
}

//----- (657017D0) --------------------------------------------------------
_DWORD *__thiscall DwordArray_Ctor4(_DWORD *this)
{
  *(this + 1) = 1;
  *this = 0;
  *(this + 2) = operator new[](4u);
  return this;
}

//----- (65701830) --------------------------------------------------------
int __thiscall DwordArray_GetCount2(void *this)
{
  return *(_DWORD *)this;
}

//----- (657018D0) --------------------------------------------------------
int __thiscall DwordArray_GetAt(unsigned int *this, unsigned int a2)
{
  if ( a2 < *this )
    return *(_DWORD *)(*(this + 2) + 4 * a2);
  else
    return 0;
}

//----- (657018F0) --------------------------------------------------------
int __thiscall DwordArray_BinarySearch(_DWORD *this, int a2, int (__cdecl *a3)(int, _DWORD))
{
  int v3; // edi
  int v4; // ebx
  int v5; // esi
  int v6; // eax

  v3 = *this - 1;
  v4 = 0;
  if ( v3 > 5 )
  {
    do
    {
      v5 = (v3 + v4) / 2;
      v6 = a3(a2, *(_DWORD *)(*(this + 2) + 4 * v5));
      if ( v6 )
      {
        if ( v6 == 2 )
        {
          v4 = v5 + 1;
        }
        else if ( v6 == 1 )
        {
          return (v3 + v4) / 2;
        }
      }
      else
      {
        v3 = v5 - 1;
      }
    }
    while ( v3 - v4 > 5 );
  }
  if ( v4 > v3 )
    return -1;
  while ( a3(a2, *(_DWORD *)(*(this + 2) + 4 * v4)) != 1 )
  {
    if ( ++v4 > v3 )
      return -1;
  }
  return v4;
}

//----- (65701AF0) --------------------------------------------------------
void __thiscall Array_DoubleCapacity(void *this)
{
  int v2; // eax
  _DWORD *v3; // edi
  int i; // eax

  v2 = 2 * *((_DWORD *)this + 1);
  *((_DWORD *)this + 1) = v2;
  v3 = operator new[](8 * v2);
  for ( i = 0; i < *(_DWORD *)this; ++i )
    v3[i] = *(_DWORD *)(*((_DWORD *)this + 2) + 4 * i);
  if ( *((_DWORD *)this + 2) )
  {
    operator delete[](*((void **)this + 2));
    *((_DWORD *)this + 2) = 0;
  }
  *((_DWORD *)this + 2) = v3;
}

//----- (65701B50) --------------------------------------------------------
void __thiscall Array_DoubleCapacity2(void *this)
{
  int v2; // eax
  _DWORD *v3; // edi
  int i; // eax

  v2 = 2 * *((_DWORD *)this + 1);
  *((_DWORD *)this + 1) = v2;
  v3 = operator new[](8 * v2);
  for ( i = 0; i < *(_DWORD *)this; ++i )
    v3[i] = *(_DWORD *)(*((_DWORD *)this + 2) + 4 * i);
  if ( *((_DWORD *)this + 2) )
  {
    operator delete[](*((void **)this + 2));
    *((_DWORD *)this + 2) = 0;
  }
  *((_DWORD *)this + 2) = v3;
}

//----- (65701CF0) --------------------------------------------------------
int __cdecl StringCompare_ForSort(const char *a1, int a2)
{
  int v2; // eax

  v2 = strcmp(a1, *(const char **)(a2 + 4));
  if ( v2 >= 0 )
    return (v2 != 0) + 1;
  else
    return 0;
}

//----- (65701D40) --------------------------------------------------------
int __cdecl StringCompare_BothEntries(int a1, int a2)
{
  int v2; // eax

  v2 = strcmp(*(const char **)(a1 + 4), *(const char **)(a2 + 4));
  if ( v2 >= 0 )
    return (v2 != 0) + 1;
  else
    return 0;
}

//----- (65701D90) --------------------------------------------------------
_DWORD *__thiscall CommandEntry_Ctor(_DWORD *this, const char *a2, int a3)
{
  _DWORD *v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax

  *this = &off_659A8BA0;
  *(this + 1) = String_Duplicate(a2);
  *(this + 2) = a3;
  *(this + 5) = 0;
  v4 = operator new(0xCu);
  if ( v4 )
    v5 = DwordArray_Ctor2(v4);
  else
    v5 = 0;
  *(this + 3) = v5;
  v6 = operator new(0xCu);
  if ( v6 )
    v7 = DwordArray_Ctor3(v6);
  else
    v7 = 0;
  *(this + 4) = v7;
  v8 = operator new(0xCu);
  if ( v8 )
    v9 = DwordArray_Ctor4(v8);
  else
    v9 = 0;
  *(this + 6) = v9;
  return this;
}
// 659A8BA0: using guessed type void *off_659A8BA0;

//----- (65701FE0) --------------------------------------------------------
int *__thiscall SortedArray_SetSortMode(int *this, int *a2)
{
  int *result; // eax
  void *v4; // ecx
  signed int i; // edi

  result = a2;
  if ( a2 )
  {
    if ( a2 != (int *)*(this + 5) )
    {
      v4 = (void *)*(this + 4);
      *(this + 5) = (int)a2;
      result = (int *)Array_GetCount(v4);
      for ( i = (signed int)result - 1; i >= 0; --i )
      {
        result = (int *)Array_GetElementAt((unsigned int *)*(this + 4), i);
        if ( result )
          result = CallbackHandler_Invoke(this, (int)result);
      }
    }
  }
  return result;
}

//----- (657021B0) --------------------------------------------------------
int __thiscall CommandTable_FindByName(_DWORD *this, int a2, int (__cdecl *a3)(int, _DWORD))
{
  int v5; // eax

  if ( a3 && (v5 = DwordArray_BinarySearch(this, a2, a3), v5 >= 0) )
    return *(_DWORD *)(*(this + 2) + 4 * v5);
  else
    return 0;
}

//----- (65702270) --------------------------------------------------------
unsigned int __thiscall DwordArray_InsertAt(unsigned int *this, int a2, unsigned int a3)
{
  unsigned int result; // eax
  signed int i; // eax
  int v6; // ecx
  int v7; // edx
  int v8; // ecx

  result = *this;
  if ( a3 <= *this && a2 )
  {
    if ( result >= *(this + 1) )
      Array_DoubleCapacity(this);
    for ( i = *this - 1; i >= (int)a3; *(_DWORD *)(v8 + 4) = v7 )
    {
      v6 = *(this + 2);
      v7 = *(_DWORD *)(v6 + 4 * i);
      v8 = v6 + 4 * i--;
    }
    result = *(this + 2);
    *(_DWORD *)(result + 4 * a3) = a2;
    ++*this;
  }
  return result;
}

//----- (657022C0) --------------------------------------------------------
unsigned int __thiscall DwordArray_InsertAt2(unsigned int *this, int a2, unsigned int a3)
{
  unsigned int result; // eax
  signed int i; // eax
  int v6; // ecx
  int v7; // edx
  int v8; // ecx

  result = *this;
  if ( a3 <= *this && a2 )
  {
    if ( result >= *(this + 1) )
      Array_DoubleCapacity2(this);
    for ( i = *this - 1; i >= (int)a3; *(_DWORD *)(v8 + 4) = v7 )
    {
      v6 = *(this + 2);
      v7 = *(_DWORD *)(v6 + 4 * i);
      v8 = v6 + 4 * i--;
    }
    result = *(this + 2);
    *(_DWORD *)(result + 4 * a3) = a2;
    ++*this;
  }
  return result;
}

//----- (65702620) --------------------------------------------------------
void __thiscall CommandTable_InsertSorted(unsigned int *this, int a2, int (__cdecl *a3)(int, _DWORD))
{
  unsigned int *v3; // esi
  int v4; // edi
  unsigned int v5; // ebx
  int v6; // esi
  int v7; // eax

  v3 = this;
  if ( a2 && a3 )
  {
    v4 = *this - 1;
    v5 = 0;
    if ( v4 <= -1 )
    {
LABEL_11:
      DwordArray_InsertAt(v3, a2, v5);
    }
    else
    {
      while ( 1 )
      {
        if ( a3(a2, *(_DWORD *)(v3[2] + 4 * v4)) == 2 )
        {
          DwordArray_InsertAt(v3, a2, v4 + 1);
          return;
        }
        --v4;
        if ( !a3(a2, *(_DWORD *)(v3[2] + 4 * v5)) )
          break;
        ++v5;
        v6 = (int)(v4 + v5) / 2;
        v7 = a3(a2, *(_DWORD *)(*(this + 2) + 4 * v6));
        if ( v7 )
        {
          if ( v7 == 2 )
            v5 = v6 + 1;
        }
        else
        {
          v4 = v6 - 1;
        }
        v3 = this;
        if ( v4 <= (int)(v5 - 1) )
          goto LABEL_11;
      }
      DwordArray_InsertAt(v3, a2, v5);
    }
  }
}

//----- (65702700) --------------------------------------------------------
void __thiscall SortedArray_InsertBinarySearch(unsigned int *this, int a2, int (__cdecl *a3)(int, _DWORD))
{
  unsigned int *v3; // esi
  int v4; // edi
  unsigned int v5; // ebx
  int v6; // esi
  int v7; // eax

  v3 = this;
  if ( a2 && a3 )
  {
    v4 = *this - 1;
    v5 = 0;
    if ( v4 <= -1 )
    {
LABEL_11:
      DwordArray_InsertAt2(v3, a2, v5);
    }
    else
    {
      while ( 1 )
      {
        if ( a3(a2, *(_DWORD *)(v3[2] + 4 * v4)) == 2 )
        {
          DwordArray_InsertAt2(v3, a2, v4 + 1);
          return;
        }
        --v4;
        if ( !a3(a2, *(_DWORD *)(v3[2] + 4 * v5)) )
          break;
        ++v5;
        v6 = (int)(v4 + v5) / 2;
        v7 = a3(a2, *(_DWORD *)(*(this + 2) + 4 * v6));
        if ( v7 )
        {
          if ( v7 == 2 )
            v5 = v6 + 1;
        }
        else
        {
          v4 = v6 - 1;
        }
        v3 = this;
        if ( v4 <= (int)(v5 - 1) )
          goto LABEL_11;
      }
      DwordArray_InsertAt2(v3, a2, v5);
    }
  }
}

//----- (657027E0) --------------------------------------------------------
int __thiscall LinkedList_AddHead(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx
  int v4; // edx

  result = a2;
  *this = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
    {
      *(this + 2) = v3;
      v4 = *(_DWORD *)(*(_DWORD *)(a2 + 4) + 4);
      *(this + 1) = v4;
      *(_DWORD *)(v4 + 8) = this;
      result = *(_DWORD *)(a2 + 4);
      *(_DWORD *)(result + 4) = this;
    }
    else
    {
      *(_DWORD *)(a2 + 4) = this;
      *(this + 2) = this;
      *(this + 1) = this;
    }
  }
  return result;
}

//----- (65702820) --------------------------------------------------------
int __thiscall LinkedList_Remove(int *this)
{
  int result; // eax
  int *v2; // edx

  result = *this;
  if ( *this )
  {
    v2 = (int *)*(this + 2);
    *this = 0;
    if ( v2 == this )
    {
      *(_DWORD *)(result + 4) = 0;
    }
    else
    {
      if ( *(int **)(result + 4) == this )
        *(_DWORD *)(result + 4) = v2;
      *(_DWORD *)(*(this + 2) + 4) = *(this + 1);
      result = *(this + 1);
      *(_DWORD *)(result + 8) = *(this + 2);
    }
  }
  return result;
}

//----- (65702A90) --------------------------------------------------------
void __thiscall CommandQueue_ProcessCommand(int a1, int *a3)
{
  void *v4; // edi
  int Count2; // eax
  void (__thiscall ***v6)(_DWORD, int *, int); // eax

  if ( a3 )
  {
    if ( !DwordArray_GetCount(*(void **)(a1 + 12)) )
      SortedArray_SetSortMode((int *)a1, a3);
    SortedArray_InsertBinarySearch(
      *(unsigned int **)(a1 + 12),
      (int)a3,
      (int (__cdecl *)(int, _DWORD))String_CompareCallback);
    v4 = *(void **)(a1 + 24);
    if ( DwordArray_GetCount2(v4) )
    {
      Count2 = DwordArray_GetCount2(v4);
      v6 = (void (__thiscall ***)(_DWORD, int *, int))DwordArray_GetAt((unsigned int *)v4, Count2 - 1);
      (**v6)(v6, a3, a1);
    }
    else
    {
      SortedArray_SetSortMode((int *)a1, a3);
    }
  }
}

//----- (65702B90) --------------------------------------------------------
_DWORD *__thiscall CommandMgr_Init(_DWORD *this)
{
  *this = 0;
  *(this + 3) = 0;
  *(this + 6) = 0;
  return this;
}

//----- (65702BA0) --------------------------------------------------------
void __thiscall CommandMgr_Clear(char *this)
{
  LinkedList_Remove_Thunk((int *)this + 6);
  LinkedList_Remove_Thunk((int *)this + 3);
  LinkedList_Remove_Thunk((int *)this);
}

//----- (65702BC0) --------------------------------------------------------
void __cdecl CommandQueue_HandleResult(int a1, int a2)
{
  int v2; // ecx
  _DWORD *v3; // esi

  if ( a1 )
  {
    if ( dword_65A5A5D0 )
    {
      v2 = *((_DWORD *)dword_65A5A5D0 + 6);
      if ( v2 )
      {
        (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v2 + 28))(v2, a1, a2);
        if ( (*(unsigned __int8 (__thiscall **)(_DWORD))(**((_DWORD **)dword_65A5A5D0 + 6) + 36))(*((_DWORD *)dword_65A5A5D0
                                                                                                  + 6)) )
        {
          (*(void (__thiscall **)(_DWORD))(**((_DWORD **)dword_65A5A5D0 + 6) + 4))(*((_DWORD *)dword_65A5A5D0 + 6));
          v3 = (char *)dword_65A5A5D0 + 24;
          LinkedList_Remove((int *)dword_65A5A5D0 + 6);
          LinkedList_AddHead(v3, 0);
        }
      }
    }
  }
}

//----- (65702C30) --------------------------------------------------------
void __cdecl CommandQueue_HandleComplete(int a1)
{
  int v1; // ecx
  _DWORD *v2; // esi

  if ( a1 )
  {
    if ( dword_65A5A5D0 )
    {
      v1 = *((_DWORD *)dword_65A5A5D0 + 6);
      if ( v1 )
      {
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v1 + 24))(v1, a1);
        if ( (*(unsigned __int8 (__thiscall **)(_DWORD))(**((_DWORD **)dword_65A5A5D0 + 6) + 36))(*((_DWORD *)dword_65A5A5D0
                                                                                                  + 6)) )
        {
          (*(void (__thiscall **)(_DWORD))(**((_DWORD **)dword_65A5A5D0 + 6) + 4))(*((_DWORD *)dword_65A5A5D0 + 6));
          v2 = (char *)dword_65A5A5D0 + 24;
          LinkedList_Remove((int *)dword_65A5A5D0 + 6);
          LinkedList_AddHead(v2, 0);
        }
      }
    }
  }
}

//----- (65702CA0) --------------------------------------------------------
void __cdecl CommandQueue_HandleCancel(int a1)
{
  int v1; // ecx
  _DWORD *v2; // esi

  if ( a1 )
  {
    if ( dword_65A5A5D0 )
    {
      v1 = *((_DWORD *)dword_65A5A5D0 + 6);
      if ( v1 )
      {
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v1 + 20))(v1, a1);
        if ( (*(unsigned __int8 (__thiscall **)(_DWORD))(**((_DWORD **)dword_65A5A5D0 + 6) + 36))(*((_DWORD *)dword_65A5A5D0
                                                                                                  + 6)) )
        {
          (*(void (__thiscall **)(_DWORD))(**((_DWORD **)dword_65A5A5D0 + 6) + 4))(*((_DWORD *)dword_65A5A5D0 + 6));
          v2 = (char *)dword_65A5A5D0 + 24;
          LinkedList_Remove((int *)dword_65A5A5D0 + 6);
          LinkedList_AddHead(v2, 0);
        }
      }
    }
  }
}

//----- (65702D10) --------------------------------------------------------
void __thiscall CommandQueue_RegisterHandler(_DWORD *this, int *a2, const char *a3, int a4)
{
  int v5; // esi
  _DWORD *v6; // eax
  _DWORD *v7; // eax

  if ( a2 )
  {
    v5 = CommandTable_FindByName((_DWORD *)*(this + 2), (int)a3, (int (__cdecl *)(int, _DWORD))StringCompare_ForSort);
    if ( !v5 )
    {
      v6 = operator new(0x1Cu);
      if ( v6 )
        v7 = CommandEntry_Ctor(v6, a3, a4);
      else
        v7 = 0;
      v5 = (int)v7;
      CommandTable_InsertSorted((unsigned int *)*(this + 2), (int)v7, StringCompare_BothEntries);
    }
    if ( *(_DWORD *)(v5 + 8) == a4 )
      CommandQueue_ProcessCommand(v5, a2);
    else
      CommandEntry_SetName((int)this, a3);
  }
}

//----- (65702E70) --------------------------------------------------------
void CommandMgr_EnsureAlloc()
{
  _DWORD *v0; // eax

  ++dword_65A5A5D4;
  if ( !dword_65A5A5D0 )
  {
    v0 = operator new(0x24u);
    if ( v0 )
    {
      *v0 = 0;
      v0[3] = 0;
      v0[6] = 0;
      dword_65A5A5D0 = v0;
    }
    else
    {
      dword_65A5A5D0 = 0;
    }
  }
}
// 65A5A5D4: using guessed type int dword_65A5A5D4;

//----- (65702EB0) --------------------------------------------------------
_DWORD *__thiscall StringArray_Ctor(_DWORD *this)
{
  _DWORD *v2; // eax
  _DWORD *v3; // eax

  *this = &off_659A8BA8;
  *(this + 1) = 0;
  *((_BYTE *)this + 12) = 0;
  *(this + 4) = 0;
  v2 = operator new(0xCu);
  if ( v2 )
    v3 = DwordArray_Ctor(v2);
  else
    v3 = 0;
  *(this + 2) = v3;
  return this;
}
// 659A8BA8: using guessed type void *off_659A8BA8;

//----- (65703040) --------------------------------------------------------
void __cdecl CommandMgr_QueueCommand(void *a1)
{
  _DWORD *v1; // esi
  _DWORD *v2; // eax
  _DWORD *v3; // esi
  int *v4; // edi

  if ( a1 && dword_65A5A5D0 )
  {
    v1 = (char *)dword_65A5A5D0 + 24;
    if ( !*((_DWORD *)dword_65A5A5D0 + 6) )
    {
      v2 = operator new(0x14u);
      if ( v2 )
        v3 = StringArray_Ctor(v2);
      else
        v3 = 0;
      v4 = (int *)dword_65A5A5D0;
      LinkedList_Remove((int *)dword_65A5A5D0);
      LinkedList_AddHead(v4, (int)v3);
      v1 = v4 + 6;
      LinkedList_Remove(v4 + 6);
      LinkedList_AddHead(v4 + 6, *v4);
    }
    (*(void (__thiscall **)(_DWORD, void *))(*(_DWORD *)*v1 + 12))(*v1, a1);
  }
}

//----- (657032A0) --------------------------------------------------------
_DWORD *__thiscall CommandHandler_Ctor(_DWORD *this, int a2, int a3)
{
  *this = &off_659A8BD4;
  CommandMgr_EnsureAlloc();
  *(this + 1) = a2;
  *(this + 2) = a3;
  return this;
}
// 659A8BD4: using guessed type void *off_659A8BD4;

//----- (657032D0) --------------------------------------------------------
void __cdecl SetMasterDatabase(int a1)
{
  _DWORD *v1; // esi
  _DWORD *v2; // eax

  if ( a1 )
  {
    v1 = dword_65A5A5D0;
    if ( !dword_65A5A5D0 )
    {
      v2 = operator new(0x24u);
      if ( v2 )
      {
        *v2 = 0;
        v2[3] = 0;
        v2[6] = 0;
      }
      else
      {
        v2 = 0;
      }
      v1 = v2;
      dword_65A5A5D0 = v2;
    }
    if ( a1 != *v1 && !v1[3] )
    {
      LinkedList_Remove(v1 + 3);
      LinkedList_AddHead(v1 + 3, a1);
      if ( *v1 )
      {
        (**(void (__thiscall ***)(_DWORD, _DWORD))v1[3])(v1[3], *v1);
        (*(void (__thiscall **)(_DWORD))(**(_DWORD **)dword_65A5A5D0 + 4))(*(_DWORD *)dword_65A5A5D0);
        v1 = dword_65A5A5D0;
        LinkedList_Remove((int *)dword_65A5A5D0);
        LinkedList_AddHead(v1, 0);
      }
      LinkedList_Remove(v1 + 6);
      LinkedList_AddHead(v1 + 6, v1[3]);
    }
  }
}

//----- (65703380) --------------------------------------------------------
int CommandMgr_GetActiveHandler()
{
  int *v0; // esi
  _DWORD *v1; // edi
  int *v2; // eax
  int result; // eax
  _DWORD *v4; // eax

  v0 = (int *)dword_65A5A5D0;
  v1 = 0;
  if ( !dword_65A5A5D0 )
  {
    v2 = (int *)operator new(0x24u);
    if ( v2 )
    {
      *v2 = 0;
      v2[3] = 0;
      v2[6] = 0;
    }
    else
    {
      v2 = 0;
    }
    v0 = v2;
    dword_65A5A5D0 = v2;
  }
  result = v0[3];
  if ( !result )
  {
    if ( !v0[6] )
    {
      v4 = operator new(0x14u);
      if ( v4 )
        v1 = StringArray_Ctor(v4);
      v0 = (int *)dword_65A5A5D0;
      LinkedList_Remove((int *)dword_65A5A5D0);
      LinkedList_AddHead(v0, (int)v1);
      LinkedList_Remove(v0 + 6);
      LinkedList_AddHead(v0 + 6, *v0);
    }
    return *v0;
  }
  return result;
}

//----- (657045F0) --------------------------------------------------------
__int16 *__cdecl EquipSlotTable_Find(__int16 a1)
{
  int v1; // ecx
  unsigned int v2; // eax

  v1 = 0;
  v2 = 0;
  while ( word_659A8BE4[v2] != a1 )
  {
    v2 += 6;
    ++v1;
    if ( v2 >= 12 )
      return 0;
  }
  return &word_659A8BE4[6 * v1];
}
// 659A8BE4: using guessed type __int16 word_659A8BE4[];

//----- (657046F0) --------------------------------------------------------
int __thiscall ItemTemplateById_Get(_DWORD *this, unsigned __int16 a2)
{
  if ( (unsigned __int16)(a2 - 1) > 0xBBFu )
    return 0;
  else
    return *(this + a2);
}

//----- (65704830) --------------------------------------------------------
void __thiscall Vec3_Set(float *this, float a2, float a3, float a4)
{
  *this = a2;
  *(this + 1) = a3;
  *(this + 2) = a4;
}

//----- (65704850) --------------------------------------------------------
const char *__cdecl Character_BuildSkinPaths(char *a1, _WORD *a2)
{
  const char *v2; // eax
  unsigned __int16 v3; // si
  int v4; // edi
  const char *v5; // eax
  const char *v6; // eax
  bool v7; // zf
  const char *v8; // eax
  const char *v9; // eax
  unsigned __int16 v10; // si
  int v11; // eax
  const char *v12; // eax
  const char *v13; // ecx
  const char *v14; // eax
  unsigned __int16 v15; // si
  int v16; // edi
  const char *v17; // eax
  const char *v18; // edi
  const char *v19; // eax
  const char *v20; // eax
  unsigned int v21; // eax
  const char *v22; // eax
  unsigned int v23; // eax
  const char *v24; // eax
  unsigned __int16 v25; // si
  int v26; // eax
  const char *v27; // eax
  void (__cdecl *v28)(char *, const char *, size_t); // edi
  unsigned __int16 v29; // si
  int v30; // eax
  const char *v31; // eax
  unsigned __int16 v32; // si
  int v33; // eax
  const char *v34; // eax
  unsigned __int16 v35; // si
  int v36; // eax
  const char *v37; // eax
  unsigned __int16 v38; // si
  int v39; // eax
  const char *v40; // eax
  unsigned __int16 v41; // si
  int v42; // eax
  const char *v43; // eax
  unsigned __int16 v44; // si
  const char *result; // eax
  int v46; // [esp+Ch] [ebp-8h]
  char v47; // [esp+10h] [ebp-4h]

  v47 = *a2 == 1;
  v46 = 0;
  if ( (unsigned __int16)a2[1] < 2u )
    v46 = (unsigned __int16)a2[1];
  v2 = sub_6593A000(v47);
  if ( a1 != (char *)-76 )
  {
    if ( !v2 )
      v2 = byte_659A8B98;
    strncpy(a1 + 76, v2, 0x7Fu);
    a1[203] = 0;
  }
  v3 = a2[8];
  if ( !sub_65934270(g_ItemTemplateById, v3) )
  {
    v3 = 797;
    if ( !v47 )
      v3 = 611;
  }
  if ( (unsigned __int16)(v3 - 1) > 0xBBFu )
    v4 = 0;
  else
    v4 = g_ItemTemplateById[v3];
  v5 = *(const char **)(v4 + 20);
  if ( a1 != (char *)-4556 )
  {
    if ( !v5 )
      v5 = byte_659A8B98;
    strncpy(a1 + 4556, v5, 0x7Fu);
    a1[4683] = 0;
  }
  v6 = *(const char **)(v4 + 28);
  if ( v47 )
  {
    v7 = strcmp(v6, "Torso2") == 0;
    v8 = "Black";
    if ( v7 )
    {
      if ( v46 != 1 )
        v8 = "White";
      sprintf(a1 + 4172, "Skins/Characters/General/f_AVG_Torso2_%s.dtx", v8);
    }
    else
    {
      if ( v46 != 1 )
        v8 = "White";
      sprintf(a1 + 4172, "Skins/Characters/General/f_AVG_Torso1_%s.dtx", v8);
    }
  }
  else if ( !strcmp(v6, "Torso1") )
  {
    v9 = "Black";
    if ( v46 != 1 )
      v9 = "White";
    sprintf(a1 + 4172, "Skins/Characters/General/m_AVG_Torso1_%s.dtx", v9);
  }
  v10 = a2[19];
  if ( sub_65934160(g_ItemTemplateById, v10) && (unsigned __int16)(v10 - 1) <= 0xBBFu )
    v11 = g_ItemTemplateById[v10];
  else
    v11 = 0;
  if ( v11 )
  {
    v12 = *(const char **)(v11 + 20);
    if ( a1 != (char *)-4428 )
    {
      if ( !v12 )
        v12 = byte_659A8B98;
      strncpy(a1 + 4428, v12, 0x7Fu);
      a1[4555] = 0;
    }
  }
  else
  {
    v13 = "Black";
    if ( v46 != 1 )
      v13 = "White";
    v14 = "f";
    if ( !v47 )
      v14 = "m";
    sprintf(a1 + 4428, "Skins/Characters/General/%s_Hands1_%s.dtx", v14, v13);
  }
  v15 = a2[9];
  if ( !sub_659342B0(g_ItemTemplateById, v15) )
  {
    v15 = 907;
    if ( !v47 )
      v15 = 760;
  }
  if ( (unsigned __int16)(v15 - 1) > 0xBBFu )
    v16 = 0;
  else
    v16 = g_ItemTemplateById[v15];
  v17 = *(const char **)(v16 + 20);
  if ( a1 != (char *)-4684 )
  {
    if ( !v17 )
      v17 = byte_659A8B98;
    strncpy(a1 + 4684, v17, 0x7Fu);
    a1[4811] = 0;
  }
  if ( v47 )
  {
    v18 = *(const char **)(v16 + 28);
    if ( !strcmp(v18, "Legs3") )
    {
      v19 = "Black";
      if ( v46 != 1 )
        v19 = "White";
      sprintf(a1 + 4300, "Skins/Characters/General/f_AVG_Legs3_%s.dtx", v19);
    }
    else if ( !strcmp(v18, "Legs1") )
    {
      v20 = "Black";
      if ( v46 != 1 )
        v20 = "White";
      sprintf(a1 + 4300, "Skins/Characters/General/f_AVG_Legs1_%s.dtx", v20);
    }
  }
  v21 = (unsigned __int16)a2[2];
  if ( v21 >= 0x1C )
    v21 = 0;
  if ( v47 )
    v22 = off_659DC970[3 * v21];
  else
    v22 = off_659DC820[3 * v21];
  sprintf(a1 + 4812, "Skins/Characters/Head/%s.dtx", v22);
  v23 = (unsigned __int16)a2[3];
  if ( v23 >= 0x17 )
    v23 = 0;
  if ( v47 )
    v24 = off_659DCBE0[3 * v23];
  else
    v24 = off_659DCAC0[3 * v23];
  sprintf(a1 + 4940, "Skins/Characters/Head/%s.dtx", v24);
  v25 = a2[10];
  if ( !sub_659342F0(g_ItemTemplateById, v25) )
  {
    v25 = 510;
    if ( !v47 )
      v25 = 500;
  }
  if ( (unsigned __int16)(v25 - 1) > 0xBBFu )
    v26 = 0;
  else
    v26 = g_ItemTemplateById[v25];
  v27 = *(const char **)(v26 + 20);
  if ( a1 == (char *)-5068 )
  {
    v28 = (void (__cdecl *)(char *, const char *, size_t))strncpy;
  }
  else
  {
    if ( !v27 )
      v27 = byte_659A8B98;
    v28 = (void (__cdecl *)(char *, const char *, size_t))strncpy;
    strncpy(a1 + 5068, v27, 0x7Fu);
    a1[5195] = 0;
  }
  v29 = a2[11];
  if ( sub_65934160(g_ItemTemplateById, v29) && (unsigned __int16)(v29 - 1) <= 0xBBFu )
    v30 = g_ItemTemplateById[v29];
  else
    v30 = 0;
  if ( v30 )
  {
    v31 = *(const char **)(v30 + 20);
    if ( a1 != (char *)-5196 )
    {
      if ( !v31 )
        v31 = byte_659A8B98;
      v28(a1 + 5196, v31, 0x7Fu);
      a1[5323] = 0;
    }
  }
  v32 = a2[13];
  if ( sub_659341A0(g_ItemTemplateById, v32) && (unsigned __int16)(v32 - 1) <= 0xBBFu )
    v33 = g_ItemTemplateById[v32];
  else
    v33 = 0;
  if ( v33 )
  {
    v34 = *(const char **)(v33 + 20);
    if ( a1 != (char *)-5324 )
    {
      if ( !v34 )
        v34 = byte_659A8B98;
      v28(a1 + 5324, v34, 0x7Fu);
      a1[5451] = 0;
    }
  }
  v35 = a2[14];
  if ( sub_65934160(g_ItemTemplateById, v35) && (unsigned __int16)(v35 - 1) <= 0xBBFu )
    v36 = g_ItemTemplateById[v35];
  else
    v36 = 0;
  if ( v36 )
  {
    v37 = *(const char **)(v36 + 20);
    if ( a1 != (char *)-5452 )
    {
      if ( !v37 )
        v37 = byte_659A8B98;
      v28(a1 + 5452, v37, 0x7Fu);
      a1[5579] = 0;
    }
  }
  v38 = a2[15];
  if ( sub_65934160(g_ItemTemplateById, v38) && (unsigned __int16)(v38 - 1) <= 0xBBFu )
    v39 = g_ItemTemplateById[v38];
  else
    v39 = 0;
  if ( v39 )
  {
    v40 = *(const char **)(v39 + 20);
    if ( a1 != (char *)-5580 )
    {
      if ( !v40 )
        v40 = byte_659A8B98;
      v28(a1 + 5580, v40, 0x7Fu);
      a1[5707] = 0;
    }
  }
  v41 = a2[16];
  if ( sub_65934160(g_ItemTemplateById, v41) && (unsigned __int16)(v41 - 1) <= 0xBBFu )
    v42 = g_ItemTemplateById[v41];
  else
    v42 = 0;
  if ( v42 )
  {
    v43 = *(const char **)(v42 + 20);
    if ( a1 != (char *)-5708 )
    {
      if ( !v43 )
        v43 = byte_659A8B98;
      v28(a1 + 5708, v43, 0x7Fu);
      a1[5835] = 0;
    }
  }
  v44 = a2[18];
  if ( sub_65934160(g_ItemTemplateById, v44) && (unsigned __int16)(v44 - 1) <= 0xBBFu )
    result = (const char *)g_ItemTemplateById[v44];
  else
    result = 0;
  if ( result )
  {
    result = (const char *)*((_DWORD *)result + 5);
    if ( a1 != (char *)-5836 )
    {
      if ( !result )
        result = byte_659A8B98;
      result = ((char *(__cdecl *)(char *, const char *, size_t))v28)(a1 + 5836, result, 0x7Fu);
      a1[5963] = 0;
    }
  }
  if ( a1 != (char *)-8268 )
  {
    result = ((char *(__cdecl *)(char *, const char *, size_t))v28)(a1 + 8268, "RS/default.ltb", 0x7Fu);
    a1[8395] = 0;
  }
  if ( a1 != (char *)-8396 )
  {
    result = ((char *(__cdecl *)(char *, const char *, size_t))v28)(a1 + 8396, "RS/twotexture.ltb", 0x7Fu);
    a1[8523] = 0;
  }
  if ( a1 != (char *)-8524 )
  {
    result = ((char *(__cdecl *)(char *, const char *, size_t))v28)(a1 + 8524, "RS/Translucent2.ltb", 0x7Fu);
    a1[8651] = 0;
  }
  return result;
}
// 659DC820: using guessed type char *off_659DC820[2];
// 659DC970: using guessed type char *off_659DC970[2];
// 659DCAC0: using guessed type char *off_659DCAC0[2];
// 659DCBE0: using guessed type char *off_659DCBE0[2];
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65704F10) --------------------------------------------------------
char *__cdecl Character_ReadSkinList(char *a1, int a2)
{
  char *result; // eax
  int v3; // esi
  unsigned int v4; // edi
  char *v5; // esi
  char *Source[1346]; // [esp+8h] [ebp-150Ch] BYREF

  result = a1;
  v3 = a2;
  if ( a1 )
  {
    Source[65] = a1;
    v4 = 0;
    result = (char *)(*(int (__thiscall **)(int, char **))(*(_DWORD *)dword_65A5A6E8 + 20))(dword_65A5A6E8, Source);
    if ( !result )
    {
      v5 = (char *)(a2 + 4172);
      do
      {
        if ( (int)Source[64] > 0 )
        {
          result = Source[0];
          if ( v5 )
          {
            if ( !Source[0] )
              result = (char *)byte_659A8B98;
            result = strncpy(v5, result, 0x7Fu);
            v5[127] = 0;
          }
          ++v4;
          v5 += 128;
        }
        if ( v4 >= 0x20 )
          break;
        result = (char *)(*(int (__thiscall **)(int, char **))(*(_DWORD *)dword_65A5A6E8 + 20))(dword_65A5A6E8, Source);
      }
      while ( !result );
      v3 = a2;
    }
    *(_BYTE *)(v3 + 4299) = 0;
  }
  return result;
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;

//----- (65704FE0) --------------------------------------------------------
char *__cdecl Character_ReadRenderStyleList(char *a1, int a2)
{
  char *result; // eax
  int v3; // esi
  unsigned int v4; // edi
  char *v5; // esi
  char *Source[1346]; // [esp+8h] [ebp-150Ch] BYREF

  result = a1;
  v3 = a2;
  if ( a1 )
  {
    Source[65] = a1;
    v4 = 0;
    result = (char *)(*(int (__thiscall **)(int, char **))(*(_DWORD *)dword_65A5A6E8 + 20))(dword_65A5A6E8, Source);
    if ( !result )
    {
      v5 = (char *)(a2 + 8268);
      do
      {
        if ( (int)Source[64] > 0 )
        {
          result = Source[0];
          if ( v5 )
          {
            if ( !Source[0] )
              result = (char *)byte_659A8B98;
            result = strncpy(v5, result, 0x7Fu);
            v5[127] = 0;
          }
          ++v4;
          v5 += 128;
        }
        if ( v4 >= 8 )
          break;
        result = (char *)(*(int (__thiscall **)(int, char **))(*(_DWORD *)dword_65A5A6E8 + 20))(dword_65A5A6E8, Source);
      }
      while ( !result );
      v3 = a2;
    }
    *(_BYTE *)(v3 + 8395) = 0;
  }
  return result;
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;

//----- (657050B0) --------------------------------------------------------
int __cdecl Character_ApplyEquipToModel(_WORD *a1, int a2)
{
  int v2; // edi
  unsigned __int16 v3; // si
  bool v4; // bl
  int v5; // eax
  unsigned __int16 v6; // si
  int v7; // eax
  unsigned __int16 v8; // si
  int v9; // eax
  unsigned __int16 v10; // si
  int v11; // eax
  const char *v12; // eax
  unsigned int v13; // eax
  char *v14; // eax
  unsigned __int16 v15; // si
  int v16; // eax
  char *v17; // eax
  unsigned int v18; // eax
  _WORD *v19; // ebx
  unsigned __int16 v20; // si
  int v21; // eax
  unsigned __int16 v22; // si
  int v23; // eax
  unsigned __int16 v24; // si
  int v25; // eax
  unsigned __int16 v26; // si
  int v27; // eax
  unsigned __int16 v28; // si
  int result; // eax
  int v30; // [esp+Ch] [ebp-4h] BYREF

  v2 = a2;
  (*(void (__thiscall **)(int, int))(*(_DWORD *)dword_65A5AA48 + 48))(dword_65A5AA48, a2);
  v3 = a1[8];
  v4 = *a1 == 1;
  if ( !sub_65934270(g_ItemTemplateById, v3) )
  {
    v3 = 797;
    if ( !v4 )
      v3 = 611;
  }
  if ( (unsigned __int16)(v3 - 1) > 0xBBFu )
    v5 = 0;
  else
    v5 = g_ItemTemplateById[v3];
  if ( !(*(int (__thiscall **)(int, int, _DWORD, int *))(*(_DWORD *)dword_65A5AA48 + 36))(
          dword_65A5AA48,
          v2,
          *(_DWORD *)(v5 + 28),
          &v30) )
    (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)dword_65A5AA48 + 44))(dword_65A5AA48, v2, v30, 0);
  v6 = a1[9];
  if ( !sub_659342B0(g_ItemTemplateById, v6) )
  {
    v6 = 907;
    if ( !v4 )
      v6 = 760;
  }
  if ( (unsigned __int16)(v6 - 1) > 0xBBFu )
    v7 = 0;
  else
    v7 = g_ItemTemplateById[v6];
  if ( !(*(int (__thiscall **)(int, int, _DWORD, int *))(*(_DWORD *)dword_65A5AA48 + 36))(
          dword_65A5AA48,
          v2,
          *(_DWORD *)(v7 + 28),
          &v30) )
    (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)dword_65A5AA48 + 44))(dword_65A5AA48, v2, v30, 0);
  v8 = a1[10];
  if ( !sub_659342F0(g_ItemTemplateById, v8) )
  {
    v8 = 510;
    if ( !v4 )
      v8 = 500;
  }
  if ( (unsigned __int16)(v8 - 1) > 0xBBFu )
    v9 = 0;
  else
    v9 = g_ItemTemplateById[v8];
  if ( !(*(int (__thiscall **)(int, int, _DWORD, int *))(*(_DWORD *)dword_65A5AA48 + 36))(
          dword_65A5AA48,
          v2,
          *(_DWORD *)(v9 + 28),
          &v30) )
    (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)dword_65A5AA48 + 44))(dword_65A5AA48, v2, v30, 0);
  v10 = a1[19];
  if ( sub_65934160(g_ItemTemplateById, v10) && (unsigned __int16)(v10 - 1) <= 0xBBFu )
    v11 = g_ItemTemplateById[v10];
  else
    v11 = 0;
  if ( v11 )
    v12 = *(const char **)(v11 + 28);
  else
    v12 = "Hands1";
  if ( !(*(int (__thiscall **)(int, int, const char *, int *))(*(_DWORD *)dword_65A5AA48 + 36))(
          dword_65A5AA48,
          v2,
          v12,
          &v30) )
    (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)dword_65A5AA48 + 44))(dword_65A5AA48, v2, v30, 0);
  v13 = (unsigned __int16)a1[2];
  if ( v13 >= 0x1C )
    v13 = 0;
  if ( v4 )
    v14 = (&off_659DC974)[3 * v13];
  else
    v14 = (&off_659DC824)[3 * v13];
  if ( !(*(int (__thiscall **)(int, int, char *, int *))(*(_DWORD *)dword_65A5AA48 + 36))(dword_65A5AA48, v2, v14, &v30) )
    (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)dword_65A5AA48 + 44))(dword_65A5AA48, v2, v30, 0);
  v15 = a1[11];
  if ( sub_65934160(g_ItemTemplateById, v15) && (unsigned __int16)(v15 - 1) <= 0xBBFu )
    v16 = g_ItemTemplateById[v15];
  else
    v16 = 0;
  if ( v16 )
  {
    v17 = *(char **)(v16 + 28);
  }
  else
  {
    v18 = (unsigned __int16)a1[3];
    if ( v18 >= 0x17 )
      v18 = 0;
    if ( v4 )
      v17 = (&off_659DCBE4)[3 * v18];
    else
      v17 = (&off_659DCAC4)[3 * v18];
  }
  if ( !(*(int (__thiscall **)(int, int, char *, int *))(*(_DWORD *)dword_65A5AA48 + 36))(dword_65A5AA48, v2, v17, &v30) )
    (*(void (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)dword_65A5AA48 + 44))(dword_65A5AA48, v2, v30, 0);
  v19 = a1;
  v20 = a1[13];
  if ( sub_659341A0(g_ItemTemplateById, v20) && (unsigned __int16)(v20 - 1) <= 0xBBFu )
    v21 = g_ItemTemplateById[v20];
  else
    v21 = 0;
  if ( v21
    && !(*(int (__thiscall **)(int, int, _DWORD, _WORD **))(*(_DWORD *)dword_65A5AA48 + 36))(
          dword_65A5AA48,
          v2,
          *(_DWORD *)(v21 + 28),
          &a1) )
  {
    (*(void (__thiscall **)(int, int, _WORD *, _DWORD))(*(_DWORD *)dword_65A5AA48 + 44))(dword_65A5AA48, v2, a1, 0);
  }
  v22 = v19[14];
  if ( sub_65934160(g_ItemTemplateById, v22) && (unsigned __int16)(v22 - 1) <= 0xBBFu )
    v23 = g_ItemTemplateById[v22];
  else
    v23 = 0;
  if ( v23
    && !(*(int (__thiscall **)(int, int, _DWORD, _WORD **))(*(_DWORD *)dword_65A5AA48 + 36))(
          dword_65A5AA48,
          v2,
          *(_DWORD *)(v23 + 28),
          &a1) )
  {
    (*(void (__thiscall **)(int, int, _WORD *, _DWORD))(*(_DWORD *)dword_65A5AA48 + 44))(dword_65A5AA48, v2, a1, 0);
  }
  v24 = v19[15];
  if ( sub_65934160(g_ItemTemplateById, v24) && (unsigned __int16)(v24 - 1) <= 0xBBFu )
    v25 = g_ItemTemplateById[v24];
  else
    v25 = 0;
  if ( v25
    && !(*(int (__thiscall **)(int, int, _DWORD, _WORD **))(*(_DWORD *)dword_65A5AA48 + 36))(
          dword_65A5AA48,
          v2,
          *(_DWORD *)(v25 + 28),
          &a1) )
  {
    (*(void (__thiscall **)(int, int, _WORD *, _DWORD))(*(_DWORD *)dword_65A5AA48 + 44))(dword_65A5AA48, v2, a1, 0);
  }
  v26 = v19[16];
  if ( sub_65934160(g_ItemTemplateById, v26) && (unsigned __int16)(v26 - 1) <= 0xBBFu )
    v27 = g_ItemTemplateById[v26];
  else
    v27 = 0;
  if ( v27
    && !(*(int (__thiscall **)(int, int, _DWORD, _WORD **))(*(_DWORD *)dword_65A5AA48 + 36))(
          dword_65A5AA48,
          v2,
          *(_DWORD *)(v27 + 28),
          &a1) )
  {
    (*(void (__thiscall **)(int, int, _WORD *, _DWORD))(*(_DWORD *)dword_65A5AA48 + 44))(dword_65A5AA48, v2, a1, 0);
  }
  v28 = v19[18];
  if ( sub_65934160(g_ItemTemplateById, v28) && (unsigned __int16)(v28 - 1) <= 0xBBFu )
    result = g_ItemTemplateById[v28];
  else
    result = 0;
  if ( result )
  {
    result = (*(int (__thiscall **)(int, int, _DWORD, _WORD **))(*(_DWORD *)dword_65A5AA48 + 36))(
               dword_65A5AA48,
               v2,
               *(_DWORD *)(result + 28),
               &a1);
    if ( !result )
      return (*(int (__thiscall **)(int, int, _WORD *, _DWORD))(*(_DWORD *)dword_65A5AA48 + 44))(
               dword_65A5AA48,
               v2,
               a1,
               0);
  }
  return result;
}
// 659DC824: using guessed type char *off_659DC824;
// 659DC974: using guessed type char *off_659DC974;
// 659DCAC4: using guessed type char *off_659DCAC4;
// 659DCBE4: using guessed type char *off_659DCBE4;
// 65A5AA48: using guessed type int dword_65A5AA48;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65705590) --------------------------------------------------------
_BYTE *__thiscall CharacterState_Init(char *this)
{
  char *v1; // eax
  int v2; // edx
  char *v3; // eax
  int v4; // edx
  _BYTE *result; // eax
  int v6; // edx

  *(_WORD *)this = 0;
  *((_WORD *)this + 1) = 0;
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *(this + 12) = 0;
  *((float *)this + 4) = 0.0;
  *((float *)this + 5) = 0.0;
  v1 = this + 4172;
  *((float *)this + 6) = 0.0;
  v2 = 32;
  *((float *)this + 7) = 0.0;
  *((float *)this + 8) = 0.0;
  *((float *)this + 9) = 0.0;
  *((float *)this + 10) = 1.0;
  *((float *)this + 11) = 1.0;
  *((float *)this + 12) = 1.0;
  *((float *)this + 16) = 1.0;
  *((float *)this + 13) = 0.0;
  *((float *)this + 14) = 0.0;
  *((float *)this + 15) = 0.0;
  *((_DWORD *)this + 17) = 0;
  *((_DWORD *)this + 18) = 0;
  *(this + 76) = 0;
  do
  {
    *v1 = 0;
    v1 += 128;
    --v2;
  }
  while ( v2 );
  v3 = this + 8268;
  v4 = 8;
  do
  {
    *v3 = 0;
    v3 += 128;
    --v4;
  }
  while ( v4 );
  result = this + 204;
  v6 = 31;
  do
  {
    *result = 0;
    result += 128;
    --v6;
  }
  while ( v6 );
  *(this + 9292) = 0;
  *((float *)this + 2355) = 0.0;
  *((_DWORD *)this + 2356) = 0;
  return result;
}

//----- (65705630) --------------------------------------------------------
void __thiscall CharacterState_FreeBuffers(int this)
{
  void *v2; // [esp-8h] [ebp-10h]

  operator delete[](*(void **)(this + 9432));
  v2 = *(void **)(this + 9436);
  *(_DWORD *)(this + 9432) = 0;
  operator delete[](v2);
  *(_DWORD *)(this + 9436) = 0;
  *(_DWORD *)(this + 9424) = 0;
  *(_DWORD *)(this + 9428) = 0;
}

//----- (65705670) --------------------------------------------------------
int __thiscall CharacterState_Reset(int this)
{
  *(float *)(this + 52) = 0.0;
  *(float *)(this + 56) = 0.0;
  *(float *)(this + 60) = 0.0;
  *(float *)(this + 64) = 1.0;
  *(_DWORD *)(this + 9424) = 0;
  *(_DWORD *)(this + 9428) = 0;
  *(_DWORD *)(this + 9432) = 0;
  *(_DWORD *)(this + 9436) = 0;
  CharacterState_Init((char *)this);
  return this;
}

//----- (657057A0) --------------------------------------------------------
int __cdecl Rand_InRangeOrNeg1(int a1)
{
  int v1; // eax

  v1 = rand();
  if ( a1 == -1 )
    return v1 % 2 - 1;
  else
    return v1 % (a1 + 1);
}

//----- (657057D0) --------------------------------------------------------
int __cdecl Rand_InRange(int a1, int a2)
{
  int v2; // eax

  v2 = rand();
  if ( a2 - a1 != -1 )
    return a1 + v2 % (a2 - a1 + 1);
  if ( (v2 & 1) != 0 )
    return a1;
  return a2;
}

//----- (65705810) --------------------------------------------------------
double __cdecl Rand_FloatInRange(float a1, float a2)
{
  float v3; // [esp+0h] [ebp-4h]

  v3 = (double)rand() / 32767.0;
  return (float)(a1 + (a2 - a1) * v3);
}

//----- (657058C0) --------------------------------------------------------
double __cdecl Float_ToDouble(float a1)
{
  return a1;
}

//----- (65705970) --------------------------------------------------------
unsigned int __cdecl Color565_ToRGB(unsigned int a1, float *a2)
{
  unsigned int result; // eax

  *a2 = (float)((a1 >> 8) & 0xF8);
  result = 8 * (a1 & 0x1F);
  a2[1] = (float)((a1 >> 3) & 0xFC);
  a2[2] = (float)(int)result;
  return result;
}

//----- (65705D10) --------------------------------------------------------
float *__cdecl Quaternion_Multiply(float *a1, float *a2, float *a3)
{
  *a1 = *a2 * a3[3] + *a3 * a2[3] + a2[1] * a3[2] - a2[2] * a3[1];
  a1[1] = a3[1] * a2[3] - a3[2] * *a2 + a2[1] * a3[3] + a2[2] * *a3;
  a1[2] = a3[2] * a2[3] + a3[1] * *a2 - a2[1] * *a3 + a2[2] * a3[3];
  a1[3] = a2[3] * a3[3] - *a2 * *a3 - a3[1] * a2[1] - a2[2] * a3[2];
  return a3;
}

//----- (65705DA0) --------------------------------------------------------
float *__thiscall Vec4_Copy(float *this, float *a2)
{
  *this = *a2;
  *(this + 1) = a2[1];
  *(this + 2) = a2[2];
  *(this + 3) = a2[3];
  return this;
}

//----- (65705DD0) --------------------------------------------------------
float *__thiscall Quaternion_FromAxisAngle(float *this, float *a2, float a3)
{
  float v4; // [esp+0h] [ebp-4h]
  float v5; // [esp+10h] [ebp+Ch]
  float v6; // [esp+10h] [ebp+Ch]

  v5 = a3 * 0.5;
  v4 = sin(v5);
  *this = *a2 * v4;
  *(this + 1) = a2[1] * v4;
  *(this + 2) = v4 * a2[2];
  v6 = cos(v5);
  *(this + 3) = v6;
  return this;
}

//----- (65705E30) --------------------------------------------------------
float *__thiscall Vec4_Copy2(float *this, float *a2)
{
  *this = *a2;
  *(this + 1) = a2[1];
  *(this + 2) = a2[2];
  *(this + 3) = a2[3];
  return this;
}

//----- (65705E90) --------------------------------------------------------
float *__thiscall Quat_RotateAroundAxis(float *this, float *a2, float a3)
{
  float *result; // eax
  float v5[4]; // [esp+0h] [ebp-24h] BYREF
  float v6; // [esp+10h] [ebp-14h] BYREF
  float v7; // [esp+14h] [ebp-10h]
  float v8; // [esp+18h] [ebp-Ch]
  float v9; // [esp+1Ch] [ebp-8h]
  float v10; // [esp+20h] [ebp-4h]
  float v11; // [esp+30h] [ebp+Ch]
  float v12; // [esp+30h] [ebp+Ch]

  v11 = a3 * 0.5;
  v10 = sin(v11);
  v5[0] = *a2 * v10;
  v5[1] = a2[1] * v10;
  v5[2] = v10 * a2[2];
  v12 = cos(v11);
  v5[3] = v12;
  v6 = 0.0;
  v7 = 0.0;
  v8 = 0.0;
  v9 = 1.0;
  result = Quaternion_Multiply(&v6, v5, this);
  *this = v6;
  *(this + 1) = v7;
  *(this + 2) = v8;
  *(this + 3) = v9;
  return result;
}

//----- (65705F30) --------------------------------------------------------
float *__thiscall Vector3_Set(float *this, float a2, float a3, float a4)
{
  *this = a2;
  *(this + 1) = a3;
  *(this + 2) = a4;
  return this;
}

//----- (65706000) --------------------------------------------------------
double __cdecl EaseFunc_SmoothStep(float a1)
{
  float v2; // [esp+8h] [ebp+8h]
  float v3; // [esp+8h] [ebp+8h]

  v2 = a1 * 3.141592741012573 + 1.570796370506287;
  v3 = sin(v2);
  return (float)((1.0 - v3) * 0.5);
}

//----- (65706070) --------------------------------------------------------
void __cdecl ScreenFade_SelectTransition(float a1)
{
  if ( a1 >= 0.5 )
    Float_ToDouble(a1);
  else
    EaseFunc_SmoothStep(a1);
}

//----- (657062F0) --------------------------------------------------------
float *__thiscall Quat_GetForwardVector(float *this, float *a2)
{
  *a2 = (*(this + 2) * *this + *(this + 3) * *(this + 1)) * 2.0;
  a2[1] = (*(this + 2) * *(this + 1) - *this * *(this + 3)) * 2.0;
  a2[2] = 1.0 - 2.0 * (*(this + 1) * *(this + 1) + *this * *this);
  return a2;
}

//----- (657065C0) --------------------------------------------------------
#error "657065D7: positive sp value has been found (funcsize=10)"

//----- (657065D9) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
LSTATUS __usercall Registry_SetUsernameValue@<eax>(HKEY a1@<eax>)
{
  DWORD v2; // [esp-14h] [ebp-14h]
  DWORD v3; // [esp-10h] [ebp-10h]
  const BYTE *v4; // [esp-Ch] [ebp-Ch]
  DWORD v5; // [esp-8h] [ebp-8h]

  return RegSetValueExA(a1, "username", v2, v3, v4, v5);
}
// 657065E6: positive sp value 14 has been found
// 657065DF: variable 'v2' is possibly undefined
// 657065DF: variable 'v3' is possibly undefined
// 657065DF: variable 'v4' is possibly undefined
// 657065DF: variable 'v5' is possibly undefined

//----- (657065F0) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
LSTATUS __cdecl Registry_WriteFoMKey(__packed *lpData)
{
  Packet_7B_List _FFFFFFFC; // [esp-4h] [ebp-Ch] OVERLAPPED BYREF

  RegCreateKeyExA(
    HKEY_CURRENT_USER,
    "Software\\Duplex Systems\\Face of Mankind\\1.0",
    0,
    0,
    0,
    0xF003Fu,
    0,
    (PHKEY)&_FFFFFFFC.end,
    (LPDWORD)&_FFFFFFFC.begin);
  *(_DWORD *)&_FFFFFFFC.unk0 = *(_DWORD *)&_FFFFFFFC.end;
  sub_657065C0(lpData, _FFFFFFFC);
  return RegCloseKey(*(HKEY *)&_FFFFFFFC.end);
}
// 657065F0: variables would overlap: ^20.13 and stkvar "__saved_registers" ^2C.4(special frame member)

//----- (65706640) --------------------------------------------------------
char __usercall Registry_LoadPlayerSettings@<al>(__packed *lpData@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  Packet_7B_List v5; // [esp-Ch] [ebp-20h]
  DWORD dwDisposition; // [esp+4h] [ebp-10h] BYREF
  DWORD Type; // [esp+8h] [ebp-Ch] BYREF
  DWORD cbData; // [esp+Ch] [ebp-8h] BYREF
  HKEY phkResult; // [esp+10h] [ebp-4h] BYREF

  phkResult = 0;
  if ( RegCreateKeyExA(
         HKEY_CURRENT_USER,
         "Software\\Duplex Systems\\Face of Mankind\\1.0",
         0,
         0,
         0,
         0xF003Fu,
         0,
         &phkResult,
         &dwDisposition) )
  {
    return 0;
  }
  *(_DWORD *)&v5.end = a2;
  cbData = 20;
  if ( RegQueryValueExA(phkResult, "username", 0, &Type, (LPBYTE)lpData, &cbData) )
    strncpy_s((char *)lpData, 0x14u, byte_659A8B98, 0xFFFFFFFF);
  if ( !_getcwd((char *)lpData + 56, 1024) )
    return 0;
  *(_DWORD *)&v5.begin = a3;
  cbData = 4;
  if ( RegQueryValueExA(phkResult, "LocalPort", 0, &Type, (LPBYTE)lpData + 1080, &cbData) )
    *((_DWORD *)lpData + 270) = 59851;
  *(_DWORD *)&v5.unk0 = phkResult;
  *((_BYTE *)lpData + 1084) = 1;
  sub_657065C0(lpData, v5);
  RegCloseKey(phkResult);
  return 1;
}
// 65706640: could not find valid save-restore pair for ebx
// 65706640: could not find valid save-restore pair for edi
// 65706713: variable 'v5' is possibly undefined

//----- (65706840) --------------------------------------------------------
double __thiscall Msg_ReadFloat(void *this)
{
  return COERCE_FLOAT((*(int (__thiscall **)(void *, int))(*(_DWORD *)this + 60))(this, 32));
}

//----- (65706AD0) --------------------------------------------------------
int __thiscall Msg_ReadVector3f(void *this, int a2)
{
  (*(void (__thiscall **)(void *, int, int))(*(_DWORD *)this + 68))(this, a2, 96);
  return a2;
}

//----- (65706E40) --------------------------------------------------------
void __thiscall BitStream_ReadStruct92(int this, int *a2)
{
  int v3; // eax
  void (__thiscall *v4)(int *, float *, int); // edx
  int v5; // eax
  int (__thiscall *v6)(int *, int); // edx
  int (__thiscall *v7)(int *, int); // edx
  int v8; // eax
  int v9; // eax
  int (__thiscall *v10)(int *, int); // edx
  float v11; // [esp+8h] [ebp-Ch] BYREF
  float v12; // [esp+Ch] [ebp-8h]
  float v13; // [esp+10h] [ebp-4h]

  if ( a2 )
  {
    *(_DWORD *)(this + 4) = (*(int (__thiscall **)(int *))(*a2 + 100))(a2);
    (*(void (__thiscall **)(int *, float *, int))(*a2 + 68))(a2, &v11, 96);
    v3 = *a2;
    *(float *)(this + 8) = v11;
    v4 = *(void (__thiscall **)(int *, float *, int))(v3 + 68);
    *(float *)(this + 12) = v12;
    *(float *)(this + 16) = v13;
    v4(a2, &v11, 96);
    v5 = *a2;
    *(float *)(this + 20) = v11;
    v6 = *(int (__thiscall **)(int *, int))(v5 + 60);
    *(float *)(this + 24) = v12;
    *(float *)(this + 28) = v13;
    *(_BYTE *)(this + 32) = v6(a2, 8);
    *(_DWORD *)(this + 36) = (*(unsigned __int8 (__thiscall **)(int *, int))(*a2 + 60))(a2, 8);
    (*(void (__thiscall **)(int *, float *, int))(*a2 + 68))(a2, &v11, 96);
    v7 = *(int (__thiscall **)(int *, int))(*a2 + 60);
    *(float *)(this + 40) = v11;
    *(float *)(this + 44) = v12;
    *(float *)(this + 48) = v13;
    *(float *)(this + 52) = COERCE_FLOAT(v7(a2, 32));
    (*(void (__thiscall **)(int *, float *, int))(*a2 + 68))(a2, &v11, 96);
    v8 = *a2;
    *(float *)(this + 56) = v11;
    *(float *)(this + 60) = v12;
    *(float *)(this + 64) = v13;
    (*(void (__thiscall **)(int *, float *, int))(v8 + 68))(a2, &v11, 96);
    v9 = *a2;
    *(float *)(this + 68) = v11;
    v10 = *(int (__thiscall **)(int *, int))(v9 + 60);
    *(float *)(this + 72) = v12;
    *(float *)(this + 76) = v13;
    *(float *)(this + 80) = COERCE_FLOAT(v10(a2, 32));
    *(float *)(this + 84) = COERCE_FLOAT((*(int (__thiscall **)(int *, int))(*a2 + 60))(a2, 32));
    *(float *)(this + 88) = COERCE_FLOAT((*(int (__thiscall **)(int *, int))(*a2 + 60))(a2, 32));
  }
}

//----- (65707020) --------------------------------------------------------
void __thiscall BitStream_ReadStruct116(int this, int *a2)
{
  if ( a2 )
  {
    BitStream_ReadStruct92(this, a2);
    *(_DWORD *)(this + 92) = (*(int (__thiscall **)(int *, int))(*a2 + 60))(a2, 32);
    *(float *)(this + 96) = COERCE_FLOAT((*(int (__thiscall **)(int *, int))(*a2 + 60))(a2, 32));
    *(float *)(this + 100) = COERCE_FLOAT((*(int (__thiscall **)(int *, int))(*a2 + 60))(a2, 32));
    *(float *)(this + 104) = COERCE_FLOAT((*(int (__thiscall **)(int *, int))(*a2 + 60))(a2, 32));
    *(float *)(this + 108) = COERCE_FLOAT((*(int (__thiscall **)(int *, int))(*a2 + 60))(a2, 32));
    *(float *)(this + 112) = COERCE_FLOAT((*(int (__thiscall **)(int *, int))(*a2 + 60))(a2, 32));
  }
}

//----- (657070E0) --------------------------------------------------------
void __userpurge PacketData_ReadPlayerStruct(int a1@<ecx>, int a2@<edi>, int *a3)
{
  unsigned int i; // edi

  if ( a3 )
  {
    BitStream_ReadStruct92(a1, a3);
    *(_BYTE *)(a1 + 92) = (*(int (__thiscall **)(int *, int, int))(*a3 + 60))(a3, 8, a2);
    for ( i = 0; i < 0xC; ++i )
      *(_BYTE *)(a1 + i + 93) = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 8);
    *(_DWORD *)(a1 + 108) = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
  }
}
// 657070E0: could not find valid save-restore pair for edi

//----- (65707720) --------------------------------------------------------
void *__thiscall SharedMem_Map_Init(void *this)
{
  bool v3; // bl
  void *v4; // eax
  struct _SECURITY_ATTRIBUTES FileMappingAttributes; // [esp+4h] [ebp-Ch] BYREF

  if ( !dwMaximumSizeHigh++ )
  {
    FileMappingAttributes.lpSecurityDescriptor = 0;
    FileMappingAttributes.bInheritHandle = 0;
    FileMappingAttributes.nLength = 12;
    hObject = CreateFileMappingA((HANDLE)0xFFFFFFFF, &FileMappingAttributes, 4u, 0, 0x7BCA4u, "WhatAreULookingAt?");
    if ( hObject )
    {
      v3 = GetLastError() != 183;
      v4 = MapViewOfFile(hObject, 2u, 0, 0, 0);
      lpBaseAddress = v4;
      if ( v4 )
      {
        if ( v3 )
          memset(v4, 0, 0x1EF29u);
      }
    }
  }
  return this;
}

//----- (657077C0) --------------------------------------------------------
HANDLE SharedMem_Release()
{
  HANDLE result; // eax

  if ( !--dwMaximumSizeHigh )
  {
    if ( lpBaseAddress )
    {
      UnmapViewOfFile(lpBaseAddress);
      lpBaseAddress = 0;
    }
    result = hObject;
    if ( hObject )
    {
      result = (HANDLE)CloseHandle(hObject);
      hObject = 0;
    }
  }
  return result;
}

//----- (65707800) --------------------------------------------------------
int __stdcall SharedMem_GetDwordByIndex(unsigned int a1)
{
  if ( a1 < 0x1EF29 )
    return *((_DWORD *)lpBaseAddress + a1);
  else
    return 0;
}

//----- (65707900) --------------------------------------------------------
void SharedMem_Lock()
{
  JUMPOUT(0x65707850);
}
// 65707905: control flows out of bounds to 65707850

//----- (65707910) --------------------------------------------------------
LONG SharedMem_Unlock()
{
  LONG result; // eax

  if ( !--dword_65A5115C )
    return InterlockedExchange(&Target, 0);
  return result;
}
// 65A5115C: using guessed type int dword_65A5115C;

//----- (65707970) --------------------------------------------------------
__int16 __stdcall SharedMem_ReadU16_std(unsigned int a1)
{
  __int16 v2; // di

  if ( a1 >= 0x1EF29 )
    return 0;
  SharedMem_Lock();
  v2 = *((_WORD *)lpBaseAddress + 2 * a1);
  SharedMem_Unlock();
  return v2;
}

//----- (657079B0) --------------------------------------------------------
int __thiscall SharedMem_ReadDword_this(void *this, unsigned int a2)
{
  int v3; // edi

  if ( a2 >= 0x1EF29 )
    return 0;
  SharedMem_Lock();
  v3 = *((_DWORD *)lpBaseAddress + a2);
  SharedMem_Unlock();
  return v3;
}

//----- (65707E90) --------------------------------------------------------
bool __stdcall SharedMem_ReadBool_std(unsigned int a1)
{
  bool v2; // bl

  if ( a1 >= 0x1EF29 )
    return 0;
  SharedMem_Lock();
  v2 = *((_DWORD *)lpBaseAddress + a1) != 0;
  SharedMem_Unlock();
  return v2;
}

//----- (65707ED0) --------------------------------------------------------
double __stdcall SharedMem_ReadFloat_std(unsigned int a1)
{
  float v2; // [esp+10h] [ebp+8h]

  if ( a1 >= 0x1EF29 )
    return 0.0;
  SharedMem_Lock();
  v2 = *((float *)lpBaseAddress + a1);
  SharedMem_Unlock();
  return v2;
}

//----- (65707F60) --------------------------------------------------------
int __stdcall SharedMem_ReadDword_std(unsigned int a1)
{
  int v2; // edi

  if ( a1 >= 0x1EF29 )
    return 0;
  SharedMem_Lock();
  v2 = *((_DWORD *)lpBaseAddress + a1);
  SharedMem_Unlock();
  return v2;
}

//----- (65707FA0) --------------------------------------------------------
void __thiscall SharedMem_GetPtr(void *this, unsigned int a2)
{
  JUMPOUT(0x65707FA1);
}
// 65707FA0: control flows out of bounds to 65707FA1

//----- (65707FE0) --------------------------------------------------------
char *__thiscall SharedMem_Memset(void *this, unsigned int a2, char a3, WorldLoginReturnAddrPacked Size)
{
  char *v5; // esi

  if ( a2 >= 0x1EF29 )
    return 0;
  SharedMem_Lock();
  v5 = (char *)lpBaseAddress + 4 * a2;
  memset(v5, (unsigned __int8)a3, Size.flag_pad_ip0);
  SharedMem_Unlock();
  return v5;
}

//----- (65708030) --------------------------------------------------------
void __thiscall SharedMem_ReadBlock(void *this, int a2, void *a3, WorldLoginReturnAddrPacked Size)
{
  JUMPOUT(0x65708031);
}
// 65708030: control flows out of bounds to 65708031

//----- (65708110) --------------------------------------------------------
LONG __thiscall Ui_ReadFieldTextById(void *this, int a2, char *Destination, size_t Count)
{
  const char *v4; // ebx
  double v5; // st7
  LONG result; // eax
  unsigned __int16 v7; // [esp+1Ah] [ebp-2h]

  v4 = (char *)lpBaseAddress + 4 * a2;
  if ( (double)((strlen(v4) >> 2) - (strlen(v4) >> 2)) < 0.5 )
    v5 = (double)(strlen(v4) >> 2);
  else
    v5 = (double)(strlen(v4) >> 2) + 1.0;
  result = v7 | 0xC00;
  if ( a2 + (unsigned int)(__int64)v5 < 0x1EF29 )
  {
    if ( Destination )
    {
      SharedMem_Lock();
      strncpy(Destination, v4, Count);
      Destination[Count - 1] = 0;
      return SharedMem_Unlock();
    }
  }
  return result;
}
// 657081B6: variable 'v7' is possibly undefined

//----- (65708210) --------------------------------------------------------
unsigned int __stdcall SharedMem_ReadBlock_std(int a1, void *a2, WorldLoginReturnAddrPacked Size)
{
  unsigned int result; // eax

  result = a1 + (Size.flag_pad_ip0 >> 2);
  if ( result < 0x1EF29 )
  {
    if ( a2 )
    {
      SharedMem_Lock();
      memcpy(a2, (char *)lpBaseAddress + 4 * a1, Size.flag_pad_ip0);
      return SharedMem_Unlock();
    }
  }
  return result;
}

//----- (65708260) --------------------------------------------------------
LONG __thiscall SharedMem_ReadVec3(void *this, unsigned int a2, float *a3)
{
  LONG result; // eax

  result = a2 + 3;
  if ( a2 + 3 < 0x1EF29 )
  {
    SharedMem_Lock();
    *a3 = SharedMem_ReadFloat_std(a2);
    a3[1] = SharedMem_ReadFloat_std(a2 + 1);
    a3[2] = SharedMem_ReadFloat_std(a2 + 2);
    return SharedMem_Unlock();
  }
  return result;
}

//----- (65708360) --------------------------------------------------------
LONG __stdcall SharedMem_WriteU16_std(unsigned int a1, unsigned __int16 a2)
{
  LONG result; // eax

  if ( a1 < 0x1EF29 )
  {
    SharedMem_Lock();
    *((_DWORD *)lpBaseAddress + a1) = a2;
    return SharedMem_Unlock();
  }
  return result;
}

//----- (657083A0) --------------------------------------------------------
LONG __thiscall SharedMem_WriteDword_this(void *this, unsigned int a2, int a3)
{
  LONG result; // eax

  if ( a2 < 0x1EF29 )
  {
    SharedMem_Lock();
    *((_DWORD *)lpBaseAddress + a2) = a3;
    return SharedMem_Unlock();
  }
  return result;
}

//----- (65708840) --------------------------------------------------------
LONG __stdcall SharedMem_WriteU8_std(unsigned int a1, unsigned __int8 a2)
{
  LONG result; // eax

  if ( a1 < 0x1EF29 )
  {
    SharedMem_Lock();
    *((_DWORD *)lpBaseAddress + a1) = a2;
    return SharedMem_Unlock();
  }
  return result;
}

//----- (65708880) --------------------------------------------------------
LONG __stdcall SharedMem_WriteFloat(unsigned int a1, float a2)
{
  LONG result; // eax

  if ( a1 < 0x1EF29 )
  {
    SharedMem_Lock();
    *((float *)lpBaseAddress + a1) = a2;
    return SharedMem_Unlock();
  }
  return result;
}

//----- (657088F0) --------------------------------------------------------
LONG __stdcall SharedMem_WriteDword_std(unsigned int a1, int a2)
{
  LONG result; // eax

  if ( a1 < 0x1EF29 )
  {
    SharedMem_Lock();
    *((_DWORD *)lpBaseAddress + a1) = a2;
    return SharedMem_Unlock();
  }
  return result;
}

//----- (65708920) --------------------------------------------------------
void __thiscall SharedMem_WriteBlock(void *this, int a2, void *Src, WorldLoginReturnAddrPacked Size)
{
  JUMPOUT(0x65708921);
}
// 65708920: control flows out of bounds to 65708921

//----- (65708A00) --------------------------------------------------------
void __stdcall SharedMem_WriteString_std(int a1, char *Source)
{
  JUMPOUT(0x65708A01);
}
// 65708A00: control flows out of bounds to 65708A01

//----- (65708A70) --------------------------------------------------------
void __stdcall SharedMem_WriteBlock_std(int a1, void *Src, WorldLoginReturnAddrPacked Size)
{
  JUMPOUT(0x65708A71);
}
// 65708A70: control flows out of bounds to 65708A71

//----- (65708AC0) --------------------------------------------------------
LONG __stdcall SharedMem_WriteVec3(unsigned int __saved_registers, float *__return_address)
{
  LONG result; // eax

  result = __saved_registers + 3;
  if ( __saved_registers + 3 < 0x1EF29 )
  {
    SharedMem_Lock();
    SharedMem_WriteFloat(__saved_registers, *__return_address);
    SharedMem_WriteFloat(__saved_registers + 1, __return_address[1]);
    SharedMem_WriteFloat(__saved_registers + 2, __return_address[2]);
    return SharedMem_Unlock();
  }
  return result;
}

//----- (65708B20) --------------------------------------------------------
LONG __stdcall SharedMem_WriteVec4(unsigned int __saved_registers, float *__return_address)
{
  LONG result; // eax

  result = __saved_registers + 4;
  if ( __saved_registers + 4 < 0x1EF29 )
  {
    SharedMem_Lock();
    SharedMem_WriteFloat(__saved_registers, *__return_address);
    SharedMem_WriteFloat(__saved_registers + 1, __return_address[1]);
    SharedMem_WriteFloat(__saved_registers + 2, __return_address[2]);
    SharedMem_WriteFloat(__saved_registers + 3, __return_address[3]);
    return SharedMem_Unlock();
  }
  return result;
}

//----- (65708C10) --------------------------------------------------------
int *__cdecl SoundDefTable_GetEntry(unsigned int a1)
{
  if ( a1 > 0x18A )
    return dword_659B32D0;
  else
    return &dword_659B32D0[32 * a1];
}
// 659B32D0: using guessed type int dword_659B32D0[];

//----- (65708CC0) --------------------------------------------------------
unsigned int __cdecl MsgId_ValidateHighByte(unsigned int a1)
{
  unsigned int result; // eax

  result = HIBYTE(a1);
  if ( HIBYTE(a1) >= 0x16u )
    return 0;
  return result;
}

//----- (65708E50) --------------------------------------------------------
unsigned int __cdecl LTClient_GetObjectType(int a1, int a2)
{
  int v2; // eax
  unsigned int result; // eax
  unsigned int v4; // [esp+4h] [ebp-4h] BYREF

  if ( a2 == -1 && a1 == -1 )
    return 0;
  v2 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 4))(g_pILTClient);
  (*(void (__thiscall **)(int, int, int, unsigned int *))(*(_DWORD *)v2 + 48))(v2, a1, a2, &v4);
  result = v4;
  if ( v4 >= 0x16 )
    return 0;
  return result;
}

//----- (65708EA0) --------------------------------------------------------
int __cdecl LTClient_GetObjectTypeExtended(int a1)
{
  int v1; // esi
  int v3; // edi
  int v4; // eax
  int v5; // eax
  unsigned int v6; // eax
  unsigned int v7; // [esp+4h] [ebp-4h] BYREF

  v1 = a1;
  if ( !a1 )
    return 0;
  v3 = 0;
  v4 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 4))(g_pILTClient);
  (*(void (__thiscall **)(int, int, int, unsigned int *))(*(_DWORD *)v4 + 76))(v4, v1, 2, &v7);
  v5 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 8))(g_pILTClient);
  if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)v5 + 4))(v5, v1) != 87 )
    return v3;
  v6 = v7;
  if ( (v7 & 0x80u) != 0 )
    return MsgId_ValidateHighByte(v6);
  if ( !(*(unsigned __int8 (__thiscall **)(int, int, int *))(*(_DWORD *)g_pILTClient + 32))(g_pILTClient, v1, &a1) )
  {
    v6 = v7;
    return MsgId_ValidateHighByte(v6);
  }
  if ( (_WORD)a1 == 1 )
    return 6;
  return v3;
}

//----- (65708F40) --------------------------------------------------------
unsigned int __cdecl SoundDef_GetActiveSoundId(int a1)
{
  int v1; // esi
  unsigned int result; // eax
  int v3; // edi
  int v4; // eax

  v1 = a1;
  result = 0;
  if ( *(_DWORD *)(a1 + 36) == -1 && *(_DWORD *)(a1 + 32) == -1
    || (result = LTClient_GetObjectType(*(_DWORD *)(a1 + 32), *(_DWORD *)(a1 + 36))) == 0 )
  {
    v3 = *(_DWORD *)(v1 + 28);
    if ( v3 )
    {
      v4 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 8))(g_pILTClient);
      if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)v4 + 4))(v4, v3) != 86 )
      {
        (*(void (__thiscall **)(int, int, int *))(*(_DWORD *)dword_65A5A6E8 + 4))(dword_65A5A6E8, v3, &a1);
        if ( a1 != 2 )
          return LTClient_GetObjectTypeExtended(*(_DWORD *)(v1 + 28));
      }
      result = *(_DWORD *)(v1 + 40);
      if ( result >= 0x16 || !result )
        return LTClient_GetObjectTypeExtended(*(_DWORD *)(v1 + 28));
    }
  }
  return result;
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;

//----- (65709120) --------------------------------------------------------
BOOL __cdecl File_Exists(const CHAR *lpFileName)
{
  struct _OFSTRUCT ReOpenBuff; // [esp+0h] [ebp-8Ch] BYREF

  return OpenFile(lpFileName, &ReOpenBuff, 0x4000u) != -1;
}

//----- (65709210) --------------------------------------------------------
HWND Win32_GetActiveWindow()
{
  HWND result; // eax

  result = GetFocus();
  if ( !result )
    return GetForegroundWindow();
  return result;
}

//----- (65709530) --------------------------------------------------------
std::exception *__thiscall FoMException_Ctor(std::exception *this, int a2)
{
  std::exception::exception(this);
  *(_DWORD *)this = &off_659BFD1C;
  std::string::string((char *)this + 12, a2);
  return this;
}
// 659A82A8: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A8410: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this);
// 659BFD1C: using guessed type void *off_659BFD1C;

//----- (6570AF70) --------------------------------------------------------
int __stdcall String_Compare(int a1, int a2)
{
  return std::operator<<char>(a1, a2);
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);

//----- (6570B3E0) --------------------------------------------------------
int __stdcall Array_IterateWithCallback(int a1, int a2, int a3, int (__thiscall *a4)(int))
{
  int i; // edi
  int result; // eax

  for ( i = a3 - 1; i >= 0; --i )
  {
    result = a4(a1);
    a1 += a2;
  }
  return result;
}

//----- (6570B690) --------------------------------------------------------
void __cdecl __noreturn Vector64_ThrowLengthError(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (6570B730) --------------------------------------------------------
void *__cdecl Vector36_Allocate(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x24 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(36 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (6570B8B0) --------------------------------------------------------
int __thiscall PacketData_InitFields(_BYTE *this)
{
  *(_DWORD *)this = 0;
  *(this + 6) = 0;
  *(this + 7) = 0;
  *(this + 8) = 0;
  *(this + 9) = 0;
  *(this + 12) = 0;
  *(this + 13) = 0;
  *(this + 14) = 0;
  *((_WORD *)this + 2) = 0;
  *((_WORD *)this + 8) = 0;
  *((_WORD *)this + 5) = 0;
  *(this + 18) = 0;
  *(this + 19) = 0;
  *(this + 20) = 0;
  *(this + 21) = 0;
  *((_WORD *)this + 11) = 0;
  *(this + 24) = 0;
  *(this + 25) = 0;
  *(this + 26) = 0;
  *((_WORD *)this + 14) = 0;
  *(this + 30) = 0;
  *(this + 31) = 0;
  *(this + 32) = 0;
  *(this + 33) = 0;
  *((_WORD *)this + 17) = 0;
  *(this + 36) = 0;
  *(this + 37) = 0;
  *(this + 38) = 0;
  *((_WORD *)this + 20) = 0;
  *(this + 42) = 0;
  *(this + 43) = 0;
  *(this + 44) = 0;
  *(this + 45) = 0;
  *((_WORD *)this + 23) = 0;
  *(this + 48) = 0;
  *(this + 49) = 0;
  *(this + 50) = 0;
  *((_WORD *)this + 26) = 0;
  *(this + 54) = 0;
  *(this + 55) = 0;
  *(this + 56) = 0;
  *(this + 57) = 0;
  *((_WORD *)this + 29) = 0;
  *(this + 60) = 0;
  *(this + 61) = 0;
  *(this + 62) = 0;
  *((_WORD *)this + 32) = 0;
  *(this + 66) = 0;
  *(this + 67) = 0;
  *(this + 68) = 0;
  *(this + 69) = 0;
  *((_WORD *)this + 35) = 0;
  *(this + 72) = 0;
  *(this + 73) = 0;
  *(this + 74) = 0;
  *((_WORD *)this + 38) = 0;
  *(this + 78) = 0;
  *(this + 79) = 0;
  *(this + 80) = 0;
  *(this + 81) = 0;
  *((_WORD *)this + 41) = 0;
  *(this + 84) = 0;
  *(this + 85) = 0;
  *(this + 86) = 0;
  *((_WORD *)this + 44) = 0;
  *(this + 90) = 0;
  *(this + 91) = 0;
  *(this + 92) = 0;
  *(this + 93) = 0;
  *((_WORD *)this + 47) = 0;
  *(this + 96) = 0;
  *(this + 97) = 0;
  *(this + 98) = 0;
  *((_WORD *)this + 50) = 0;
  *(this + 102) = 0;
  *(this + 103) = 0;
  *(this + 104) = 0;
  *(this + 105) = 0;
  *((_WORD *)this + 53) = 0;
  *(this + 108) = 0;
  *(this + 109) = 0;
  *(this + 110) = 0;
  *((_WORD *)this + 56) = 0;
  *(this + 114) = 0;
  *(this + 115) = 0;
  *(this + 116) = 0;
  *(this + 117) = 0;
  *((_WORD *)this + 59) = 0;
  *(this + 120) = 0;
  *(this + 121) = 0;
  *(this + 122) = 0;
  return 0;
}

//----- (6570BA60) --------------------------------------------------------
int __thiscall Packet_Unknown0_Dtor(_DWORD *this)
{
  *this = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 3));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (6570BAB0) --------------------------------------------------------
char __thiscall BitStream_ReadDouble(_DWORD *this, void *a2)
{
  _BYTE v4[8]; // [esp+8h] [ebp-Ch] BYREF

  if ( !Net_IsBigEndian() )
    return BitStream_ReadBits(this, a2, 0x40u, 1);
  if ( !BitStream_ReadBits(this, v4, 0x40u, 1) )
    return 0;
  ByteSwapCopy((int)v4, (int)a2, 8u);
  return 1;
}

//----- (6570BB60) --------------------------------------------------------
char *__thiscall BitStream_WriteU64(char *this, char a2, int a3)
{
  char v5[8]; // [esp+4h] [ebp-Ch] BYREF

  if ( !Net_IsBigEndian() )
    return BitStream_WriteBits(this, &a2, 0x40u, 1);
  ByteSwapCopy((int)&a2, (int)v5, 8u);
  return BitStream_WriteBits(this, v5, 0x40u, 1);
}

//----- (6570BBF0) --------------------------------------------------------
void __thiscall StringPair_Dtor(char *this)
{
  std::string::~string(this + 28);
  std::string::~string(this);
}

//----- (6570BD20) --------------------------------------------------------
int __thiscall StringPair_CopyCtor(int this, int a2, int a3)
{
  std::string::string(this, a2);
  std::string::string(this + 28, a3);
  *(_BYTE *)(this + 56) = *(_BYTE *)(a3 + 28);
  *(_BYTE *)(this + 57) = *(_BYTE *)(a3 + 29);
  *(_DWORD *)(this + 60) = *(_DWORD *)(a3 + 32);
  return this;
}
// 659A82A8: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (6570BE10) --------------------------------------------------------
int *__thiscall RBTree_LowerBound(int **this, int a2)
{
  int *result; // eax
  int v3; // esi
  int *v4; // edi

  result = *(this + 1);
  v3 = result[1];
  v4 = result;
  if ( !*(_BYTE *)(v3 + 49) )
  {
    do
    {
      if ( (unsigned __int8)std::operator<<char>(v3 + 12, a2) )
      {
        v3 = *(_DWORD *)(v3 + 8);
      }
      else
      {
        v4 = (int *)v3;
        v3 = *(_DWORD *)v3;
      }
    }
    while ( !*(_BYTE *)(v3 + 49) );
    return v4;
  }
  return result;
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);

//----- (6570BEA0) --------------------------------------------------------
int *__thiscall StringTree_FindLowerBound(int **this, int a2)
{
  int *result; // eax
  int v3; // esi
  int *v4; // edi

  result = *(this + 1);
  v3 = result[1];
  v4 = result;
  if ( !*(_BYTE *)(v3 + 77) )
  {
    do
    {
      if ( (unsigned __int8)std::operator<<char>(v3 + 12, a2) )
      {
        v3 = *(_DWORD *)(v3 + 8);
      }
      else
      {
        v4 = (int *)v3;
        v3 = *(_DWORD *)v3;
      }
    }
    while ( !*(_BYTE *)(v3 + 77) );
    return v4;
  }
  return result;
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);

//----- (6570BF00) --------------------------------------------------------
int *__thiscall RBTreeIter_Increment(int **this)
{
  int *result; // eax
  int *v2; // edx

  result = *this;
  if ( !*((_BYTE *)*this + 77) )
  {
    v2 = (int *)result[2];
    if ( *((_BYTE *)v2 + 77) )
    {
      for ( result = (int *)result[1]; !*((_BYTE *)result + 77); result = (int *)result[1] )
      {
        if ( *this != (int *)result[2] )
          break;
        *this = result;
      }
      *this = result;
    }
    else
    {
      result = (int *)*v2;
      if ( !*(_BYTE *)(*v2 + 77) )
      {
        do
        {
          v2 = result;
          result = (int *)*result;
        }
        while ( !*((_BYTE *)result + 77) );
      }
      *this = v2;
    }
  }
  return result;
}

//----- (6570BFA0) --------------------------------------------------------
_DWORD *__thiscall RBTree50_RotateLeft(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  _DWORD *v4; // ecx

  result = *(_DWORD **)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *result;
  if ( !*(_BYTE *)(*result + 49) )
    *(_DWORD *)(*result + 4) = a2;
  result[1] = *(_DWORD *)(a2 + 4);
  v3 = *(this + 1);
  if ( a2 == *(_DWORD *)(v3 + 4) )
  {
    *(_DWORD *)(v3 + 4) = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  else
  {
    v4 = *(_DWORD **)(a2 + 4);
    if ( a2 == *v4 )
      *v4 = result;
    else
      v4[2] = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  return result;
}

//----- (6570C000) --------------------------------------------------------
int __thiscall RBTree50_RotateRight(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // esi
  int v4; // ecx
  _DWORD *v5; // ecx

  result = *a2;
  *a2 = *(_DWORD *)(*a2 + 8);
  v3 = *(_DWORD *)(result + 8);
  if ( !*(_BYTE *)(v3 + 49) )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(result + 4) = a2[1];
  v4 = *(this + 1);
  if ( a2 == *(_DWORD **)(v4 + 4) )
  {
    *(_DWORD *)(v4 + 4) = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  else
  {
    v5 = (_DWORD *)a2[1];
    if ( a2 == (_DWORD *)v5[2] )
      v5[2] = result;
    else
      *v5 = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  return result;
}

//----- (6570C080) --------------------------------------------------------
_DWORD *__thiscall RBTree78_RotateLeft(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  _DWORD *v4; // ecx

  result = *(_DWORD **)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *result;
  if ( !*(_BYTE *)(*result + 77) )
    *(_DWORD *)(*result + 4) = a2;
  result[1] = *(_DWORD *)(a2 + 4);
  v3 = *(this + 1);
  if ( a2 == *(_DWORD *)(v3 + 4) )
  {
    *(_DWORD *)(v3 + 4) = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  else
  {
    v4 = *(_DWORD **)(a2 + 4);
    if ( a2 == *v4 )
      *v4 = result;
    else
      v4[2] = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  return result;
}

//----- (6570C0E0) --------------------------------------------------------
int __thiscall RBTree78_RotateRight(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // esi
  int v4; // ecx
  _DWORD *v5; // ecx

  result = *a2;
  *a2 = *(_DWORD *)(*a2 + 8);
  v3 = *(_DWORD *)(result + 8);
  if ( !*(_BYTE *)(v3 + 77) )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(result + 4) = a2[1];
  v4 = *(this + 1);
  if ( a2 == *(_DWORD **)(v4 + 4) )
  {
    *(_DWORD *)(v4 + 4) = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  else
  {
    v5 = (_DWORD *)a2[1];
    if ( a2 == (_DWORD *)v5[2] )
      v5[2] = result;
    else
      *v5 = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  return result;
}

//----- (6570C140) --------------------------------------------------------
int __thiscall RBTreeIter_Decrement77(int **this)
{
  int *v1; // eax
  int result; // eax
  int v3; // edx

  v1 = *this;
  if ( *((_BYTE *)*this + 77) )
  {
    result = v1[2];
    *this = (int *)result;
  }
  else
  {
    v3 = *v1;
    if ( *(_BYTE *)(*v1 + 77) )
    {
      for ( result = v1[1]; !*(_BYTE *)(result + 77); result = *(_DWORD *)(result + 4) )
      {
        if ( *this != *(int **)result )
          break;
        *this = (int *)result;
      }
      if ( !*((_BYTE *)*this + 77) )
        *this = (int *)result;
    }
    else
    {
      for ( result = *(_DWORD *)(v3 + 8); !*(_BYTE *)(result + 77); result = *(_DWORD *)(result + 8) )
        v3 = result;
      *this = (int *)v3;
    }
  }
  return result;
}

//----- (6570C1A0) --------------------------------------------------------
int __thiscall RBTreeIter_Decrement49(int **this)
{
  int *v1; // eax
  int result; // eax
  int v3; // edx

  v1 = *this;
  if ( *((_BYTE *)*this + 49) )
  {
    result = v1[2];
    *this = (int *)result;
  }
  else
  {
    v3 = *v1;
    if ( *(_BYTE *)(*v1 + 49) )
    {
      for ( result = v1[1]; !*(_BYTE *)(result + 49); result = *(_DWORD *)(result + 4) )
      {
        if ( *this != *(int **)result )
          break;
        *this = (int *)result;
      }
      if ( !*((_BYTE *)*this + 49) )
        *this = (int *)result;
    }
    else
    {
      for ( result = *(_DWORD *)(v3 + 8); !*(_BYTE *)(result + 49); result = *(_DWORD *)(result + 8) )
        v3 = result;
      *this = (int *)v3;
    }
  }
  return result;
}

//----- (6570C200) --------------------------------------------------------
int *__thiscall RBTreeIter_Increment49(int **this)
{
  int *result; // eax
  int *v2; // edx

  result = *this;
  if ( !*((_BYTE *)*this + 49) )
  {
    v2 = (int *)result[2];
    if ( *((_BYTE *)v2 + 49) )
    {
      for ( result = (int *)result[1]; !*((_BYTE *)result + 49); result = (int *)result[1] )
      {
        if ( *this != (int *)result[2] )
          break;
        *this = result;
      }
      *this = result;
    }
    else
    {
      result = (int *)*v2;
      if ( !*(_BYTE *)(*v2 + 49) )
      {
        do
        {
          v2 = result;
          result = (int *)*result;
        }
        while ( !*((_BYTE *)result + 49) );
      }
      *this = v2;
    }
  }
  return result;
}

//----- (6570C300) --------------------------------------------------------
int __thiscall StringPair64_CopyCtor(int this, int a2)
{
  std::string::string(this, a2);
  std::string::string(this + 28, a2 + 28);
  *(_BYTE *)(this + 56) = *(_BYTE *)(a2 + 56);
  *(_BYTE *)(this + 57) = *(_BYTE *)(a2 + 57);
  *(_DWORD *)(this + 60) = *(_DWORD *)(a2 + 60);
  return this;
}
// 659A82A8: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (6570C460) --------------------------------------------------------
int __cdecl Array36_CopyRange(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // edi

  v3 = a1;
  if ( a1 == a2 )
    return a3;
  v4 = a3;
  do
  {
    std::string::operator=(v4, v3);
    *(_WORD *)(v4 + 28) = *(_WORD *)(v3 + 28);
    *(_DWORD *)(v4 + 32) = *(_DWORD *)(v3 + 32);
    v3 += 36;
    v4 += 36;
  }
  while ( v3 != a2 );
  return v4;
}
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (6570C580) --------------------------------------------------------
int __thiscall PacketData_InitFieldsExt(int this)
{
  *(_WORD *)(this + 4) = 0;
  *(_BYTE *)(this + 6) = 0;
  *(_BYTE *)(this + 7) = 0;
  *(_BYTE *)(this + 8) = 0;
  *(_BYTE *)(this + 9) = 0;
  *(_WORD *)(this + 10) = 0;
  *(_BYTE *)(this + 12) = 0;
  *(_BYTE *)(this + 13) = 0;
  *(_BYTE *)(this + 14) = 0;
  *(_WORD *)(this + 16) = 0;
  *(_BYTE *)(this + 18) = 0;
  *(_BYTE *)(this + 19) = 0;
  *(_BYTE *)(this + 20) = 0;
  *(_BYTE *)(this + 21) = 0;
  *(_WORD *)(this + 22) = 0;
  *(_BYTE *)(this + 24) = 0;
  *(_BYTE *)(this + 25) = 0;
  *(_BYTE *)(this + 26) = 0;
  *(_WORD *)(this + 28) = 0;
  *(_BYTE *)(this + 30) = 0;
  *(_BYTE *)(this + 31) = 0;
  *(_BYTE *)(this + 32) = 0;
  *(_BYTE *)(this + 33) = 0;
  *(_WORD *)(this + 34) = 0;
  *(_BYTE *)(this + 36) = 0;
  *(_BYTE *)(this + 37) = 0;
  *(_BYTE *)(this + 38) = 0;
  *(_WORD *)(this + 40) = 0;
  *(_BYTE *)(this + 42) = 0;
  *(_BYTE *)(this + 43) = 0;
  *(_BYTE *)(this + 44) = 0;
  *(_BYTE *)(this + 45) = 0;
  *(_WORD *)(this + 46) = 0;
  *(_BYTE *)(this + 48) = 0;
  *(_BYTE *)(this + 49) = 0;
  *(_BYTE *)(this + 50) = 0;
  *(_WORD *)(this + 52) = 0;
  *(_BYTE *)(this + 54) = 0;
  *(_BYTE *)(this + 55) = 0;
  *(_BYTE *)(this + 56) = 0;
  *(_BYTE *)(this + 57) = 0;
  *(_WORD *)(this + 58) = 0;
  *(_BYTE *)(this + 60) = 0;
  *(_BYTE *)(this + 61) = 0;
  *(_BYTE *)(this + 62) = 0;
  *(_WORD *)(this + 64) = 0;
  *(_BYTE *)(this + 66) = 0;
  *(_BYTE *)(this + 67) = 0;
  *(_BYTE *)(this + 68) = 0;
  *(_BYTE *)(this + 69) = 0;
  *(_WORD *)(this + 70) = 0;
  *(_BYTE *)(this + 72) = 0;
  *(_BYTE *)(this + 73) = 0;
  *(_BYTE *)(this + 74) = 0;
  *(_WORD *)(this + 76) = 0;
  *(_BYTE *)(this + 78) = 0;
  *(_BYTE *)(this + 79) = 0;
  *(_BYTE *)(this + 80) = 0;
  *(_BYTE *)(this + 81) = 0;
  *(_WORD *)(this + 82) = 0;
  *(_BYTE *)(this + 84) = 0;
  *(_BYTE *)(this + 85) = 0;
  *(_BYTE *)(this + 86) = 0;
  *(_WORD *)(this + 88) = 0;
  *(_BYTE *)(this + 90) = 0;
  *(_BYTE *)(this + 91) = 0;
  *(_BYTE *)(this + 92) = 0;
  *(_BYTE *)(this + 93) = 0;
  *(_WORD *)(this + 94) = 0;
  *(_BYTE *)(this + 96) = 0;
  *(_BYTE *)(this + 97) = 0;
  *(_BYTE *)(this + 98) = 0;
  *(_WORD *)(this + 100) = 0;
  *(_BYTE *)(this + 102) = 0;
  *(_BYTE *)(this + 103) = 0;
  *(_WORD *)(this + 106) = 0;
  *(_WORD *)(this + 118) = 0;
  *(_BYTE *)(this + 104) = 0;
  *(_BYTE *)(this + 105) = 0;
  *(_BYTE *)(this + 108) = 0;
  *(_BYTE *)(this + 109) = 0;
  *(_BYTE *)(this + 110) = 0;
  *(_WORD *)(this + 112) = 0;
  *(_BYTE *)(this + 114) = 0;
  *(_BYTE *)(this + 115) = 0;
  *(_BYTE *)(this + 116) = 0;
  *(_BYTE *)(this + 117) = 0;
  *(_BYTE *)(this + 120) = 0;
  *(_BYTE *)(this + 121) = 0;
  *(_BYTE *)(this + 122) = 0;
  PacketData_InitFields((_BYTE *)this);
  return this;
}

//----- (6570C6C0) --------------------------------------------------------
char __thiscall VariableSizedPacket::Read(_DWORD *this, int a2)
{
  _BYTE *v4; // esi
  char v5[1044]; // [esp+4h] [ebp-414h] BYREF

  if ( !a2 )
    return 0;
  qmemcpy(this + 3, BitStream_InitFromBuffer(v5, *(void **)(a2 + 44), *(_DWORD *)(a2 + 36), 0), 0x414u);
  BitStream_FreeOwnedBuffer((int)v5);
  v4 = this + 2;
  BitStream_ReadBits(this + 3, this + 2, 8u, 1);
  if ( *((_BYTE *)this + 8) == 25 )
  {
    BitStream_ReadDouble(this + 3, this + 264);
    BitStream_ReadBits(this + 3, this + 266, 8u, 1);
  }
  else
  {
    *((_BYTE *)this + 1064) = *v4;
    *v4 = 0;
    *(this + 264) = 0;
    *(this + 265) = 0;
  }
  return 1;
}

//----- (6570C770) --------------------------------------------------------
char __thiscall Packet_WriteHeader(int this)
{
  char *v2; // edi
  unsigned __int64 HeaderTokenU64; // rax
  char v5[4]; // [esp+8h] [ebp-4h] BYREF

  v2 = (char *)(this + 12);
  unknown_libname_529(this + 12);
  if ( *(_BYTE *)(this + 8) == 25 )
  {
    v5[0] = 25;
    BitStream_WriteBits(v2, v5, 8u, 1);
    HeaderTokenU64 = Packet_GetHeaderTokenU64();
    *(_QWORD *)(this + 1056) = HeaderTokenU64;
    BitStream_WriteU64(v2, HeaderTokenU64, SHIDWORD(HeaderTokenU64));
  }
  v5[0] = *(_BYTE *)(this + 1064);
  BitStream_WriteBits(v2, v5, 8u, 1);
  return 1;
}
// 658C92B0: using guessed type int __thiscall unknown_libname_529(_DWORD);

//----- (6570C7E0) --------------------------------------------------------
void __thiscall Packet_Id107_Init(struct Packet_Id107 *this)
{
  *(_DWORD *)this->_pad0 = &vtbl_Packet_Unknown0;
  this->_pad0[8] = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)&this->_pad0[12]);
  *(_DWORD *)&this->_pad0[1056] = 0;
  *(_DWORD *)&this->_pad0[1060] = 0;
  this->_pad0[1064] = 107;
  *(_DWORD *)this->_pad0 = &vtbl_Packet_Id107;
  PacketData_InitFieldsExt((int)&this->strA[2]);
  this->subId = 0;
  *(unsigned int *)((char *)&this->optB + 2) = 0;
  *(unsigned int *)((char *)&this->optA + 2) = 0;
  *(unsigned int *)((char *)&this->optC + 2) = 0;
  *(unsigned int *)((char *)&this->optD + 2) = 0;
  this->strA[126] = 0;
  this->strB[126] = 0;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659BFDA8: using guessed type int (__thiscall *vtbl_Packet_Id107)(void *, char);

//----- (6570C870) --------------------------------------------------------
int __thiscall BitStream_Write2048(char *this, int a2)
{
  return (*(int (__thiscall **)(int, int, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, a2, 2048, this + 12);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6570C8A0) --------------------------------------------------------
int __thiscall VariableSizedPacket::DecodeString(char *this, int a2)
{
  return (*(int (__thiscall **)(int, int, int, char *))(*(_DWORD *)g_LTClient + 56))(g_LTClient, a2, 2048, this + 12);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6570C8D0) --------------------------------------------------------
char *__thiscall Read_u32(char *this, char a2)
{
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(this, &a2, 0x20u, 1);
  ByteSwapCopy((int)&a2, (int)v4, 4u);
  return BitStream_WriteBitsCompressed(this, v4, 0x20u, 1);
}

//----- (6570C920) --------------------------------------------------------
char *__thiscall Read_u16(char *this, char a2)
{
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(this, &a2, 0x10u, 1);
  ByteSwapCopy((int)&a2, (int)v4, 2u);
  return BitStream_WriteBitsCompressed(this, v4, 0x10u, 1);
}

//----- (6570C990) --------------------------------------------------------
bool __thiscall RakNet::BitStream::ReadCompressed_T_uint(unsigned int *this, char *a2)
{
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  if ( !Net_IsBigEndian() )
    return RakNet::BitStream::ReadCompressed(this, a2, 0x20u, 1);
  if ( !RakNet::BitStream::ReadCompressed(this, v4, 0x20u, 1) )
    return 0;
  ByteSwapCopy((int)v4, (int)a2, 4u);
  return 1;
}

//----- (6570C9F0) --------------------------------------------------------
bool __thiscall RakNet::BitStream::ReadCompressed_T_ushort(unsigned int *this, char *a2)
{
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  if ( !Net_IsBigEndian() )
    return RakNet::BitStream::ReadCompressed(this, a2, 0x10u, 1);
  if ( !RakNet::BitStream::ReadCompressed(this, v4, 0x10u, 1) )
    return 0;
  ByteSwapCopy((int)v4, (int)a2, 2u);
  return 1;
}

//----- (6570CA70) --------------------------------------------------------
char *__thiscall BitStream_WriteIntCompressed(char *this, char a2)
{
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(this, &a2, 0x20u, 1);
  ByteSwapCopy((int)&a2, (int)v4, 4u);
  return BitStream_WriteBitsCompressed(this, v4, 0x20u, 1);
}

//----- (6570CAC0) --------------------------------------------------------
bool __thiscall Read_u32c_alt(unsigned int *this, char *a2)
{
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  if ( !Net_IsBigEndian() )
    return RakNet::BitStream::ReadCompressed(this, a2, 0x20u, 1);
  if ( !RakNet::BitStream::ReadCompressed(this, v4, 0x20u, 1) )
    return 0;
  ByteSwapCopy((int)v4, (int)a2, 4u);
  return 1;
}

//----- (6570CB60) --------------------------------------------------------
_DWORD *__thiscall Packet_Id107_Vtbl0(_DWORD *this, char a2)
{
  *this = &vtbl_Packet_Unknown0;
  BitStream_FreeOwnedBuffer((int)(this + 3));
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (6570CBA0) --------------------------------------------------------
char *__cdecl BitStream_WriteIntCompressed2(char *__return_address, int a2)
{
  char v3[4]; // [esp+0h] [ebp-4h] BYREF

  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(__return_address, (char *)&a2, 0x20u, 1);
  ByteSwapCopy((int)&a2, (int)v3, 4u);
  return BitStream_WriteBitsCompressed(__return_address, v3, 0x20u, 1);
}

//----- (6570CBF0) --------------------------------------------------------
char *__cdecl BitStream_WriteU16C(char *a1, unsigned __int16 a2)
{
  int v3; // [esp+0h] [ebp-4h] BYREF

  v3 = a2;
  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(a1, (char *)&v3, 0x10u, 1);
  ByteSwapCopy((int)&v3, (int)&a2, 2u);
  return BitStream_WriteBitsCompressed(a1, (char *)&a2, 0x10u, 1);
}

//----- (6570CD70) --------------------------------------------------------
char *__thiscall BitStream_WriteUInt16Compressed(char *this, unsigned __int16 a2)
{
  char *v2; // esi
  int v4; // [esp+4h] [ebp-4h] BYREF

  v4 = a2;
  v2 = this + 12;
  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(v2, (char *)&v4, 0x10u, 1);
  ByteSwapCopy((int)&v4, (int)&a2, 2u);
  return BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x10u, 1);
}

//----- (6570D0F0) --------------------------------------------------------
int SendPacket_SubId107_1()
{
  struct Packet_Id107 v1; // [esp+4h] [ebp-5D0h] BYREF
  int v2; // [esp+5D0h] [ebp-4h]

  Packet_Id107_Init(&v1);
  v2 = 0;
  v1.subId = 1;
  *(unsigned int *)((char *)&v1.optA + 2) = 14;
  *(unsigned int *)((char *)&v1.optC + 2) = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
  LTClient_SendPacket_BuildIfNeeded(&v1, 2, 1, 3, 0);
  v2 = -1;
  *(_DWORD *)v1._pad0 = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)&v1._pad0[12]);
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (6570D520) --------------------------------------------------------
_DWORD *__cdecl String_TransformRange(
        _DWORD *a1,
        int a2,
        char *a3,
        int a4,
        char *a5,
        int a6,
        _BYTE *a7,
        int (__cdecl *a8)(_DWORD))
{
  char *v8; // eax

  v8 = a3;
  while ( v8 != a5 )
  {
    *a7 = a8(*v8);
    v8 = a3 + 1;
    ++a7;
    ++a3;
  }
  *a1 = a6;
  a1[1] = a7;
  return a1;
}

//----- (6570D570) --------------------------------------------------------
char __thiscall Vector36_Reserve(_DWORD *this, unsigned int a2)
{
  char *v4; // eax
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( !a2 )
    return 0;
  if ( a2 > 0x71C71C7 )
    Vector64_ThrowLengthError(v5, v6);
  v4 = (char *)Vector36_Allocate(a2);
  *(this + 1) = v4;
  *(this + 2) = v4;
  *(this + 3) = &v4[36 * a2];
  return 1;
}
// 6570D599: variable 'v5' is possibly undefined
// 6570D599: variable 'v6' is possibly undefined

//----- (6570D5F0) --------------------------------------------------------
int __cdecl StringMap_InsertWrapper(int a1, int a2, int a3)
{
  return Array36_CopyRange(a1, a2, a3);
}

//----- (6570D650) --------------------------------------------------------
char *__thiscall Playerfile_BlockC0_WriteEntry(_BYTE *this, char *a2)
{
  char *v4; // esi

  if ( !*(this + 5) || !*(this + 4) )
    return BitStream_WriteBit0(a2);
  v4 = a2;
  BitStream_WriteBit1(a2);
  BitStream_WriteU16C(v4, *(_WORD *)this);
  LOBYTE(a2) = *(this + 2);
  BitStream_WriteBitsCompressed(v4, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *(this + 3);
  BitStream_WriteBitsCompressed(v4, (char *)&a2, 8u, 1);
  BitStream_WriteBits(v4, this + 4, 7u, 1);
  BitStream_WriteBits(v4, this + 5, 7u, 1);
  BitStream_WriteBits(v4, this + 6, 9u, 1);
  LOBYTE(a2) = *(this + 8);
  BitStream_WriteBitsCompressed(v4, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *(this + 9);
  BitStream_WriteBitsCompressed(v4, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *(this + 10);
  return BitStream_WriteBitsCompressed(v4, (char *)&a2, 8u, 1);
}

//----- (6570D730) --------------------------------------------------------
bool __thiscall Playerfile_read_blockC0_entry(char *this, unsigned int *a2)
{
  if ( RakNet::BitStream::ReadBit(a2) )
  {
    RakNet::BitStream::ReadCompressed_T_ushort(a2, this);
    RakNet::BitStream::ReadCompressed(a2, this + 2, 8u, 1);
    RakNet::BitStream::ReadCompressed(a2, this + 3, 8u, 1);
    BitStream_ReadBits(a2, this + 4, 7u, 1);
    BitStream_ReadBits(a2, this + 5, 7u, 1);
    BitStream_ReadBits(a2, this + 6, 9u, 1);
    RakNet::BitStream::ReadCompressed(a2, this + 8, 8u, 1);
    RakNet::BitStream::ReadCompressed(a2, this + 9, 8u, 1);
    return RakNet::BitStream::ReadCompressed(a2, this + 10, 8u, 1);
  }
  else
  {
    *(_WORD *)this = 0;
    *(this + 2) = 0;
    *(this + 3) = 0;
    *(this + 4) = 0;
    *(this + 5) = 0;
    *((_WORD *)this + 3) = 0;
    *(this + 8) = 0;
    *(this + 9) = 0;
    *(this + 10) = 0;
    return 0;
  }
}

//----- (6570D800) --------------------------------------------------------
char *__thiscall Playerfile_BlockC0_WriteFull(int *this, char *a2)
{
  int *v3; // esi
  int v4; // edi
  char *result; // eax
  char *v6; // [esp-Ch] [ebp-20h]
  _BYTE v7[4]; // [esp+Ch] [ebp-8h] BYREF
  int v8; // [esp+10h] [ebp-4h] BYREF

  v8 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v8, (int)v7, 4u);
    v6 = v7;
  }
  else
  {
    v6 = (char *)&v8;
  }
  BitStream_WriteBitsCompressed(a2, v6, 0x20u, 1);
  v3 = this + 1;
  v4 = 10;
  do
  {
    result = Playerfile_BlockC0_WriteEntry(v3, a2);
    v3 += 3;
    --v4;
  }
  while ( v4 );
  return result;
}

//----- (6570D870) --------------------------------------------------------
bool __thiscall Playerfile_read_blockC0(char *this, unsigned int *a2)
{
  char *v3; // esi
  int v4; // edi
  bool result; // al

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  v3 = this + 4;
  v4 = 10;
  do
  {
    result = Playerfile_read_blockC0_entry(v3, a2);
    v3 += 12;
    --v4;
  }
  while ( v4 );
  return result;
}

//----- (6570D8B0) --------------------------------------------------------
char __thiscall Packet_ID_107_Read(struct Packet_Id107 *this, int payload)
{
  char result; // al

  result = VariableSizedPacket::Read(this, payload);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)&this->_pad0[12], (char *)&this->subId);
    if ( RakNet::BitStream::ReadBit(&this->_pad0[12]) )
      Read_u32c_alt((unsigned int *)&this->_pad0[12], (char *)&this->optA + 2);
    else
      *(unsigned int *)((char *)&this->optA + 2) = 0;
    if ( RakNet::BitStream::ReadBit(&this->_pad0[12]) )
      Read_u32c_alt((unsigned int *)&this->_pad0[12], (char *)&this->optB + 2);
    else
      *(unsigned int *)((char *)&this->optB + 2) = 0;
    if ( RakNet::BitStream::ReadBit(&this->_pad0[12]) )
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)&this->_pad0[12], (char *)&this->optC + 2);
    else
      *(unsigned int *)((char *)&this->optC + 2) = 0;
    if ( RakNet::BitStream::ReadBit(&this->_pad0[12]) )
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)&this->_pad0[12], (char *)&this->optD + 2);
    else
      *(unsigned int *)((char *)&this->optD + 2) = 0;
    if ( (*(unsigned __int8 (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 56))(
           g_LTClient,
           &this->strA[126],
           2048,
           &this->_pad0[12])
      && (*(unsigned __int8 (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 56))(
           g_LTClient,
           &this->strB[126],
           2048,
           &this->_pad0[12]) )
    {
      if ( this->subId == 325 )
        Playerfile_read_blockC0(&this->strA[2], (unsigned int *)&this->_pad0[12]);
      return 1;
    }
    else
    {
      return 0;
    }
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6570D9D0) --------------------------------------------------------
char __thiscall Packet_ID_107_Write(int this)
{
  char result; // al
  int v3; // ebx
  char *v4; // ecx
  int v5; // ebx
  char *v6; // ecx
  int v7; // ebx
  char *v8; // ecx
  int v9; // ebx
  char *v10; // ecx

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1072));
    v3 = *(_DWORD *)(this + 1076);
    v4 = (char *)(this + 12);
    if ( v3 <= 0 )
    {
      BitStream_WriteBit0(v4);
    }
    else
    {
      BitStream_WriteBit1(v4);
      BitStream_WriteIntCompressed((char *)(this + 12), v3);
    }
    v5 = *(_DWORD *)(this + 1080);
    v6 = (char *)(this + 12);
    if ( v5 <= 0 )
    {
      BitStream_WriteBit0(v6);
    }
    else
    {
      BitStream_WriteBit1(v6);
      BitStream_WriteIntCompressed((char *)(this + 12), v5);
    }
    v7 = *(_DWORD *)(this + 1084);
    v8 = (char *)(this + 12);
    if ( v7 )
    {
      BitStream_WriteBit1(v8);
      Read_u32((char *)(this + 12), v7);
    }
    else
    {
      BitStream_WriteBit0(v8);
    }
    v9 = *(_DWORD *)(this + 1088);
    v10 = (char *)(this + 12);
    if ( v9 )
    {
      BitStream_WriteBit1(v10);
      Read_u32((char *)(this + 12), v9);
    }
    else
    {
      BitStream_WriteBit0(v10);
    }
    (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 1216, 2048, this + 12);
    (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 1344, 2048, this + 12);
    if ( *(_WORD *)(this + 1072) == 325 )
      Playerfile_BlockC0_WriteFull((int *)(this + 1092), (char *)(this + 12));
    return 1;
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6570DAD0) --------------------------------------------------------
_DWORD *__thiscall FileReader_Seek(HMODULE *this, int a2)
{
  char *v3; // edi

  v3 = (char *)(this + 13);
  if ( sub_6593A7F0(this + 13) == -1 )
    SendPacket_SubId107_1();
  return sub_6593BE20(v3, a2, (int)(this + 7));
}

//----- (6570DC70) --------------------------------------------------------
_DWORD *__stdcall RBTreeNode52_Create(int a1, int a2, int a3, int a4, char a5)
{
  _DWORD *v5; // esi
  _DWORD v7[10]; // [esp+0h] [ebp-28h] BYREF

  v7[6] = v7;
  v5 = operator new(0x34u);
  v7[5] = v5;
  v7[9] = 1;
  v7[4] = v5;
  if ( v5 )
  {
    v5[1] = a2;
    *v5 = a1;
    v5[2] = a3;
    std::string::string(v5 + 3, a4);
    v5[10] = *(_DWORD *)(a4 + 28);
    v5[11] = *(_DWORD *)(a4 + 32);
    *((_BYTE *)v5 + 48) = a5;
    *((_BYTE *)v5 + 49) = 0;
  }
  return v5;
}
// 659A82A8: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (6570DD30) --------------------------------------------------------
_DWORD *__stdcall RBTreeNode_Create(int a1, int a2, int a3, int a4, char a5)
{
  _DWORD *v5; // eax
  _DWORD *v6; // esi
  _DWORD v8[10]; // [esp+0h] [ebp-28h] BYREF

  v8[6] = v8;
  v5 = operator new(0x50u);
  v6 = v5;
  v8[5] = v5;
  v8[9] = 1;
  v8[4] = v5;
  if ( v5 )
  {
    *v5 = a1;
    v5[1] = a2;
    v5[2] = a3;
    StringPair64_CopyCtor((int)(v5 + 3), a4);
    *((_BYTE *)v6 + 76) = a5;
    *((_BYTE *)v6 + 77) = 0;
  }
  return v6;
}

//----- (6570DDE0) --------------------------------------------------------
_DWORD *__cdecl PacketData_WrapCreate(
        _DWORD *a1,
        int a2,
        char *a3,
        int a4,
        char *a5,
        int a6,
        _BYTE *a7,
        int (__cdecl *a8)(_DWORD))
{
  String_TransformRange(a1, a2, a3, a4, a5, a6, a7, a8);
  return a1;
}

//----- (6570DE50) --------------------------------------------------------
int __cdecl Array36_CopyConstruct(int a1, int a2, int a3)
{
  int v3; // esi
  _DWORD v6[7]; // [esp+0h] [ebp-28h] BYREF
  int v7; // [esp+24h] [ebp-4h]

  v6[6] = v6;
  v3 = a3;
  v6[5] = a3;
  v7 = 0;
  while ( a1 != a2 )
  {
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
    {
      std::string::string(v3, a1);
      *(_WORD *)(v3 + 28) = *(_WORD *)(a1 + 28);
      *(_DWORD *)(v3 + 32) = *(_DWORD *)(a1 + 32);
    }
    v3 += 36;
    LOBYTE(v7) = 0;
    a1 += 36;
  }
  return v3;
}
// 659A82A8: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (6570DF00) --------------------------------------------------------
_DWORD *__stdcall Process_GetModuleName(int a1)
{
  _DWORD *result; // eax
  _DWORD *v2; // esi
  char *i; // eax
  int v4; // esi
  int v5; // edi
  int v6; // eax
  HMODULE hModule[1024]; // [esp+4h] [ebp-2028h] BYREF
  _BYTE v8[8]; // [esp+1004h] [ebp-1028h] BYREF
  _BYTE v9[8]; // [esp+100Ch] [ebp-1020h] BYREF
  _DWORD v10[2]; // [esp+1014h] [ebp-1018h] BYREF
  _BYTE v11[8]; // [esp+101Ch] [ebp-1010h] BYREF
  int v12; // [esp+1024h] [ebp-1008h] BYREF
  _DWORD Filename[1024]; // [esp+1028h] [ebp-1004h] BYREF

  strcpy((char *)Filename, "<unknown>");
  memset((char *)&Filename[2] + 2, 0, 0xFF6u);
  result = GetCurrentProcess();
  if ( result )
  {
    result = (_DWORD *)EnumProcessModules(result, hModule, 4096, &v12);
    if ( result )
    {
      GetModuleFileNameA(hModule[0], (LPSTR)Filename, 0x1000u);
      v2 = Filename;
      for ( i = strchr((const char *)Filename, 92); i; i = strchr(i + 1, 92) )
      {
        if ( !*i )
          break;
        v2 = i + 1;
      }
      std::string::operator=(a1, v2);
      v4 = std::string::begin(a1, v8);
      v5 = std::string::end(a1, v9);
      v6 = std::string::begin(a1, v11);
      return PacketData_WrapCreate(
               v10,
               *(_DWORD *)v6,
               *(char **)(v6 + 4),
               *(_DWORD *)v5,
               *(char **)(v5 + 4),
               *(_DWORD *)v4,
               *(_BYTE **)(v4 + 4),
               toupper);
    }
  }
  return result;
}
// 658FD87C: using guessed type int __stdcall EnumProcessModules(_DWORD, _DWORD, _DWORD, _DWORD);
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A8290: using guessed type int __thiscall std::string::begin(_DWORD, _DWORD);
// 659A8294: using guessed type int __thiscall std::string::end(_DWORD, _DWORD);

//----- (6570E080) --------------------------------------------------------
int *__thiscall RBTree_InsertAndRebalance(int **this, int *a2, char a3, int *a4, int a5)
{
  _DWORD *v6; // ecx
  int *v7; // eax
  int **v8; // eax
  int v9; // eax
  int *v10; // eax
  int v11; // esi
  int v12; // ecx
  int *v13; // edx
  int v14; // edx
  int v15; // edx
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-50h] BYREF
  _BYTE v18[28]; // [esp+38h] [ebp-28h] BYREF
  int v19; // [esp+5Ch] [ebp-4h]
  _DWORD *v20; // [esp+74h] [ebp+14h]

  if ( (unsigned int)*(this + 2) >= 0x71C71C6 )
  {
    std::string::string(v18, "map/set<T> too long");
    v19 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v18);
    pExceptionObject[0] = &off_659BFD28;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
  }
  v6 = RBTreeNode52_Create((int)*(this + 1), (int)a4, (int)*(this + 1), a5, 0);
  v7 = *(this + 1);
  *(this + 2) = (int *)((char *)*(this + 2) + 1);
  v20 = v6;
  if ( a4 == v7 )
  {
    v7[1] = (int)v6;
    **(this + 1) = (int)v6;
    (*(this + 1))[2] = (int)v6;
  }
  else if ( a3 )
  {
    *a4 = (int)v6;
    v8 = (int **)*(this + 1);
    if ( a4 == *v8 )
      *v8 = v6;
  }
  else
  {
    a4[2] = (int)v6;
    v9 = (int)*(this + 1);
    if ( a4 == *(int **)(v9 + 8) )
      *(_DWORD *)(v9 + 8) = v6;
  }
  v10 = v6 + 1;
  v11 = (int)v6;
  if ( !*(_BYTE *)(v6[1] + 48) )
  {
    do
    {
      v12 = *v10;
      v13 = *(int **)(*v10 + 4);
      if ( *v10 == *v13 )
      {
        v14 = v13[2];
        if ( *(_BYTE *)(v14 + 48) )
        {
          if ( v11 == *(_DWORD *)(v12 + 8) )
          {
            v11 = *v10;
            RBTree50_RotateLeft(this, *v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 48) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 48) = 0;
          RBTree50_RotateRight(this, *(_DWORD **)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 48) = 1;
          *(_BYTE *)(v14 + 48) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 48) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      else
      {
        v15 = *v13;
        if ( *(_BYTE *)(v15 + 48) )
        {
          if ( v11 == *(_DWORD *)v12 )
          {
            v11 = *v10;
            RBTree50_RotateRight(this, (_DWORD *)*v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 48) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 48) = 0;
          RBTree50_RotateLeft(this, *(_DWORD *)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 48) = 1;
          *(_BYTE *)(v15 + 48) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 48) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      v10 = (int *)(v11 + 4);
    }
    while ( !*(_BYTE *)(*(_DWORD *)(v11 + 4) + 48) );
    v6 = v20;
  }
  *(_BYTE *)((*(this + 1))[1] + 48) = 1;
  *a2 = (int)v6;
  return a2;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (6570E260) --------------------------------------------------------
int *__thiscall RBTree_InsertNode(int **this, int *a2, char a3, int *a4, int a5)
{
  _DWORD *v6; // ecx
  int *v7; // eax
  int **v8; // eax
  int v9; // eax
  int *v10; // eax
  int v11; // esi
  int v12; // ecx
  int *v13; // edx
  int v14; // edx
  int v15; // edx
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-50h] BYREF
  _BYTE v18[28]; // [esp+38h] [ebp-28h] BYREF
  int v19; // [esp+5Ch] [ebp-4h]
  _DWORD *v20; // [esp+74h] [ebp+14h]

  if ( (unsigned int)*(this + 2) >= 0x3FFFFFE )
  {
    std::string::string(v18, "map/set<T> too long");
    v19 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v18);
    pExceptionObject[0] = &off_659BFD28;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
  }
  v6 = RBTreeNode_Create((int)*(this + 1), (int)a4, (int)*(this + 1), a5, 0);
  v7 = *(this + 1);
  *(this + 2) = (int *)((char *)*(this + 2) + 1);
  v20 = v6;
  if ( a4 == v7 )
  {
    v7[1] = (int)v6;
    **(this + 1) = (int)v6;
    (*(this + 1))[2] = (int)v6;
  }
  else if ( a3 )
  {
    *a4 = (int)v6;
    v8 = (int **)*(this + 1);
    if ( a4 == *v8 )
      *v8 = v6;
  }
  else
  {
    a4[2] = (int)v6;
    v9 = (int)*(this + 1);
    if ( a4 == *(int **)(v9 + 8) )
      *(_DWORD *)(v9 + 8) = v6;
  }
  v10 = v6 + 1;
  v11 = (int)v6;
  if ( !*(_BYTE *)(v6[1] + 76) )
  {
    do
    {
      v12 = *v10;
      v13 = *(int **)(*v10 + 4);
      if ( *v10 == *v13 )
      {
        v14 = v13[2];
        if ( *(_BYTE *)(v14 + 76) )
        {
          if ( v11 == *(_DWORD *)(v12 + 8) )
          {
            v11 = *v10;
            RBTree78_RotateLeft(this, *v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 76) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 76) = 0;
          RBTree78_RotateRight(this, *(_DWORD **)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 76) = 1;
          *(_BYTE *)(v14 + 76) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 76) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      else
      {
        v15 = *v13;
        if ( *(_BYTE *)(v15 + 76) )
        {
          if ( v11 == *(_DWORD *)v12 )
          {
            v11 = *v10;
            RBTree78_RotateRight(this, (_DWORD *)*v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 76) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 76) = 0;
          RBTree78_RotateLeft(this, *(_DWORD *)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 76) = 1;
          *(_BYTE *)(v15 + 76) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 76) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      v10 = (int *)(v11 + 4);
    }
    while ( !*(_BYTE *)(*(_DWORD *)(v11 + 4) + 76) );
    v6 = v20;
  }
  *(_BYTE *)((*(this + 1))[1] + 76) = 1;
  *a2 = (int)v6;
  return a2;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (6570EA70) --------------------------------------------------------
void __stdcall TreeNode_DeleteChildrenRecursive(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; !*((_BYTE *)i + 49); v1 = i )
  {
    TreeNode_DeleteChildrenRecursive((void **)i[2]);
    i = (void **)*i;
    std::string::~string(v1 + 3);
    operator delete(v1);
  }
}

//----- (6570EAF0) --------------------------------------------------------
void __stdcall TreeNode_DeleteChildrenRecursive2(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; !*((_BYTE *)i + 77); v1 = i )
  {
    TreeNode_DeleteChildrenRecursive2((void **)i[2]);
    i = (void **)*i;
    std::string::~string(v1 + 10);
    std::string::~string(v1 + 3);
    operator delete(v1);
  }
}

//----- (6570EB80) --------------------------------------------------------
int __thiscall RBTree_FindOrInsert(int **this, int a2, int *a3)
{
  int *v3; // ebx
  int *v4; // edi
  int v5; // esi
  char v6; // al
  int *v7; // esi
  int **v9; // [esp+Ch] [ebp-8h]
  char v10; // [esp+10h] [ebp-4h]

  v3 = a3;
  v4 = *(this + 1);
  v5 = v4[1];
  v6 = 1;
  v9 = this;
  v10 = 1;
  if ( !*(_BYTE *)(v5 + 49) )
  {
    do
    {
      v4 = (int *)v5;
      v6 = std::operator<<char>(v3, v5 + 12);
      v10 = v6;
      if ( v6 )
        v5 = *(_DWORD *)v5;
      else
        v5 = *(_DWORD *)(v5 + 8);
    }
    while ( !*(_BYTE *)(v5 + 49) );
    this = v9;
  }
  v7 = v4;
  a3 = v4;
  if ( v6 )
  {
    if ( v4 == (int *)**(this + 1) )
    {
      *(_DWORD *)a2 = *RBTree_InsertAndRebalance(this, (int *)&a3, 1, v4, (int)v3);
      *(_BYTE *)(a2 + 4) = 1;
      return a2;
    }
    RBTreeIter_Decrement49(&a3);
    v7 = a3;
  }
  if ( (unsigned __int8)std::operator<<char>(v7 + 3, v3) )
  {
    *(_DWORD *)a2 = *RBTree_InsertAndRebalance(v9, (int *)&a3, v10, v4, (int)v3);
    *(_BYTE *)(a2 + 4) = 1;
  }
  else
  {
    *(_DWORD *)a2 = v7;
    *(_BYTE *)(a2 + 4) = 0;
  }
  return a2;
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);

//----- (6570EC50) --------------------------------------------------------
int __thiscall StringMap_InsertOrFind(int **this, int a2, int *a3)
{
  int *v3; // ebx
  int *v4; // edi
  int v5; // esi
  char v6; // al
  int *v7; // esi
  int **v9; // [esp+Ch] [ebp-8h]
  char v10; // [esp+10h] [ebp-4h]

  v3 = a3;
  v4 = *(this + 1);
  v5 = v4[1];
  v6 = 1;
  v9 = this;
  v10 = 1;
  if ( !*(_BYTE *)(v5 + 77) )
  {
    do
    {
      v4 = (int *)v5;
      v6 = std::operator<<char>(v3, v5 + 12);
      v10 = v6;
      if ( v6 )
        v5 = *(_DWORD *)v5;
      else
        v5 = *(_DWORD *)(v5 + 8);
    }
    while ( !*(_BYTE *)(v5 + 77) );
    this = v9;
  }
  v7 = v4;
  a3 = v4;
  if ( v6 )
  {
    if ( v4 == (int *)**(this + 1) )
    {
      *(_DWORD *)a2 = *RBTree_InsertNode(this, (int *)&a3, 1, v4, (int)v3);
      *(_BYTE *)(a2 + 4) = 1;
      return a2;
    }
    RBTreeIter_Decrement77(&a3);
    v7 = a3;
  }
  if ( (unsigned __int8)std::operator<<char>(v7 + 3, v3) )
  {
    *(_DWORD *)a2 = *RBTree_InsertNode(v9, (int *)&a3, v10, v4, (int)v3);
    *(_BYTE *)(a2 + 4) = 1;
  }
  else
  {
    *(_DWORD *)a2 = v7;
    *(_BYTE *)(a2 + 4) = 0;
  }
  return a2;
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);

//----- (6570ED20) --------------------------------------------------------
int __thiscall StringMap_EmplaceWrapper(void *this, int a2, int a3, int a4)
{
  return Array36_CopyConstruct(a2, a3, a4);
}

//----- (6570EDE0) --------------------------------------------------------
int *__thiscall StringMap_InsertHinted(int **this, int *a2, int *a3, int *a4)
{
  int *v6; // eax
  int *v7; // edi
  int *v8; // ebx
  int *v9; // edi
  int **v10; // ecx
  int *v11; // eax
  int v12; // ecx
  int v13; // [esp-8h] [ebp-18h]
  char v14[8]; // [esp+8h] [ebp-8h] BYREF

  if ( !*(this + 2) )
  {
    RBTree_InsertAndRebalance(this, a2, 1, *(this + 1), (int)a4);
    return a2;
  }
  v6 = *(this + 1);
  v7 = a4;
  if ( a3 == (int *)*v6 )
  {
    if ( (unsigned __int8)std::operator<<char>(a4, a3 + 3) )
    {
      RBTree_InsertAndRebalance(this, a2, 1, a3, (int)v7);
      return a2;
    }
    goto LABEL_20;
  }
  if ( a3 == v6 )
  {
    if ( (unsigned __int8)std::operator<<char>(v6[2] + 12, a4) )
    {
      RBTree_InsertAndRebalance(this, a2, 0, (int *)(*(this + 1))[2], (int)v7);
      return a2;
    }
    goto LABEL_20;
  }
  if ( (unsigned __int8)std::operator<<char>(a4, a3 + 3) )
  {
    a4 = a3;
    RBTreeIter_Decrement49(&a4);
    v8 = a4;
    if ( (unsigned __int8)String_Compare((int)(a4 + 3), (int)v7) )
    {
      v13 = (int)v7;
      v9 = a2;
      v10 = this;
      if ( !*(_BYTE *)(v8[2] + 49) )
      {
        RBTree_InsertAndRebalance(this, a2, 1, a3, v13);
        return a2;
      }
      goto LABEL_18;
    }
  }
  if ( (unsigned __int8)std::operator<<char>(a3 + 3, v7) )
  {
    v8 = a3;
    a4 = a3;
    RBTreeIter_Increment49(&a4);
    v11 = a4;
    if ( a4 == *(this + 1) )
      goto LABEL_17;
    if ( (unsigned __int8)String_Compare((int)v7, (int)(a4 + 3)) )
    {
      v8 = a3;
      v11 = a4;
LABEL_17:
      v13 = (int)v7;
      v9 = a2;
      v10 = this;
      if ( !*(_BYTE *)(v8[2] + 49) )
      {
        RBTree_InsertAndRebalance(this, a2, 1, v11, v13);
        return a2;
      }
LABEL_18:
      RBTree_InsertAndRebalance(v10, v9, 0, v8, v13);
      return v9;
    }
  }
LABEL_20:
  v12 = *(_DWORD *)RBTree_FindOrInsert(this, (int)v14, v7);
  *a2 = v12;
  return a2;
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);

//----- (6570EF90) --------------------------------------------------------
int *__thiscall StringTree_InsertHint(int **this, int *a2, int *a3, int *a4)
{
  int *v6; // eax
  int *v7; // edi
  int *v8; // ebx
  int *v9; // edi
  int **v10; // ecx
  int *v11; // eax
  int v12; // ecx
  int v13; // [esp-8h] [ebp-18h]
  char v14[8]; // [esp+8h] [ebp-8h] BYREF

  if ( !*(this + 2) )
  {
    RBTree_InsertNode(this, a2, 1, *(this + 1), (int)a4);
    return a2;
  }
  v6 = *(this + 1);
  v7 = a4;
  if ( a3 == (int *)*v6 )
  {
    if ( (unsigned __int8)std::operator<<char>(a4, a3 + 3) )
    {
      RBTree_InsertNode(this, a2, 1, a3, (int)v7);
      return a2;
    }
    goto LABEL_20;
  }
  if ( a3 == v6 )
  {
    if ( (unsigned __int8)std::operator<<char>(v6[2] + 12, a4) )
    {
      RBTree_InsertNode(this, a2, 0, (int *)(*(this + 1))[2], (int)v7);
      return a2;
    }
    goto LABEL_20;
  }
  if ( (unsigned __int8)std::operator<<char>(a4, a3 + 3) )
  {
    a4 = a3;
    RBTreeIter_Decrement77(&a4);
    v8 = a4;
    if ( (unsigned __int8)String_Compare((int)(a4 + 3), (int)v7) )
    {
      v13 = (int)v7;
      v9 = a2;
      v10 = this;
      if ( !*(_BYTE *)(v8[2] + 77) )
      {
        RBTree_InsertNode(this, a2, 1, a3, v13);
        return a2;
      }
      goto LABEL_18;
    }
  }
  if ( (unsigned __int8)std::operator<<char>(a3 + 3, v7) )
  {
    v8 = a3;
    a4 = a3;
    RBTreeIter_Increment(&a4);
    v11 = a4;
    if ( a4 == *(this + 1) )
      goto LABEL_17;
    if ( (unsigned __int8)String_Compare((int)v7, (int)(a4 + 3)) )
    {
      v8 = a3;
      v11 = a4;
LABEL_17:
      v13 = (int)v7;
      v9 = a2;
      v10 = this;
      if ( !*(_BYTE *)(v8[2] + 77) )
      {
        RBTree_InsertNode(this, a2, 1, v11, v13);
        return a2;
      }
LABEL_18:
      RBTree_InsertNode(v10, v9, 0, v8, v13);
      return v9;
    }
  }
LABEL_20:
  v12 = *(_DWORD *)StringMap_InsertOrFind(this, (int)v14, v7);
  *a2 = v12;
  return a2;
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);

//----- (6570F2B0) --------------------------------------------------------
void __stdcall StringVector_DestroyRange(char *a1, char *a2)
{
  char *i; // esi

  for ( i = a1; i != a2; i += 36 )
    std::string::~string(i);
}

//----- (6570F2E0) --------------------------------------------------------
_DWORD *__thiscall StringVector_Erase(char **this, _DWORD *a2, int a3, int a4)
{
  _DWORD *result; // eax
  int v6; // eax
  char *v7; // ebx
  char *v8; // edi
  char *i; // esi

  result = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v6 = Array36_CopyRange(a4, (int)*(this + 2), a3);
    v7 = *(this + 2);
    v8 = (char *)v6;
    for ( i = (char *)v6; i != v7; i += 36 )
      std::string::~string(i);
    *(this + 2) = v8;
    return a2;
  }
  return result;
}

//----- (6570F390) --------------------------------------------------------
int *__thiscall StringTree_FindOrInsert(int **this, int a2)
{
  int v3; // ebx
  int *v4; // edi
  int v5; // esi
  int v7[9]; // [esp+10h] [ebp-30h] BYREF
  int v8; // [esp+3Ch] [ebp-4h]

  v3 = a2;
  v4 = RBTree_LowerBound(this, a2);
  if ( v4 != *(this + 1) && !(unsigned __int8)std::operator<<char>(v3, v4 + 3) )
    return v4 + 10;
  std::string::string(v7, a2);
  v7[7] = 0;
  v7[8] = 0;
  v8 = 0;
  v5 = *StringMap_InsertHinted(this, &a2, v4, v7);
  v8 = -1;
  std::string::~string(v7);
  return (int *)(v5 + 40);
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);
// 659A82A8: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (6570F450) --------------------------------------------------------
int *__thiscall DirectoryTree_FindEntry(int **this, int a2)
{
  int v3; // ebx
  int *LowerBound; // edi
  int v5; // eax
  int *v6; // eax
  int v7; // esi
  char v9[64]; // [esp+10h] [ebp-70h] BYREF
  _BYTE v10[36]; // [esp+50h] [ebp-30h] BYREF
  int v11; // [esp+7Ch] [ebp-4h]

  v3 = a2;
  LowerBound = StringTree_FindLowerBound(this, a2);
  if ( LowerBound != *(this + 1) && !(unsigned __int8)std::operator<<char>(v3, LowerBound + 3) )
    return LowerBound + 10;
  v5 = sub_6593A4C0((int)v10);
  v11 = 0;
  v6 = (int *)StringPair_CopyCtor((int)v9, v3, v5);
  LOBYTE(v11) = 1;
  v7 = *StringTree_InsertHint(this, &a2, LowerBound, v6);
  LOBYTE(v11) = 0;
  StringPair_Dtor(v9);
  v11 = -1;
  std::string::~string(v10);
  return (int *)(v7 + 40);
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);

//----- (6570F5D0) --------------------------------------------------------
int __thiscall DirectoryTree_ProcessEntries(int **this)
{
  int **v1; // ebx
  int *v2; // eax
  int *v3; // esi
  int v5; // eax
  _DWORD *v6; // ebx
  unsigned int v7; // ecx
  unsigned int v8; // ebx
  int *v9; // eax
  int v10; // ecx
  int **v11; // eax
  int *j; // eax
  int *i; // eax
  int *v14; // [esp-4h] [ebp-78h]
  _BYTE v15[32]; // [esp+10h] [ebp-64h] BYREF
  int v16; // [esp+30h] [ebp-44h]
  int v17; // [esp+34h] [ebp-40h] BYREF
  unsigned int v18; // [esp+38h] [ebp-3Ch] BYREF
  unsigned int v19; // [esp+3Ch] [ebp-38h] BYREF
  char *v20; // [esp+40h] [ebp-34h] BYREF
  int **v21; // [esp+44h] [ebp-30h]
  _BYTE v22[20]; // [esp+48h] [ebp-2Ch] BYREF
  int v23; // [esp+5Ch] [ebp-18h]
  int v24; // [esp+70h] [ebp-4h]

  v1 = this;
  v2 = *(this + 11);
  v3 = (int *)*v2;
  v21 = this;
  if ( v3 == v2 )
    return 0;
  while ( 1 )
  {
    v20 = 0;
    v18 = 0;
    v19 = 0;
    std::string::string(v22);
    v24 = 0;
    sub_6593A550((_BYTE *)v3 + 40, (int)v22);
    v14 = v3 + 3;
    if ( v23 )
    {
      v5 = std::operator+<char>(v15, Delimiter, v14);
      LOBYTE(v24) = 1;
      std::string::operator+=(v22, v5);
      LOBYTE(v24) = 0;
      std::string::~string(v15);
    }
    else
    {
      std::string::operator=(v22, v14);
    }
    v6 = v1 + 13;
    if ( sub_6593A7A0(v6, (int)v22) == -1 )
      goto LABEL_13;
    v17 = 0;
    if ( sub_6593A9E0(v6, &v20, &v18, 0) == -1 || sub_6593AA90(v6, &v17, 0) == -1 )
      break;
    v7 = v3[18];
    if ( v18 < v7 )
      v7 = v18;
    v20 += v7;
    sub_6593A2D0(v21 + 17, v20, v18 - v7, &v19);
    v8 = v19;
    v16 = v17;
    v9 = StringTree_FindOrInsert(v21, (int)(v3 + 3));
    v10 = v16;
    *v9 = v8;
    v9[1] = v10;
LABEL_13:
    v24 = -1;
    std::string::~string(v22);
    if ( !*((_BYTE *)v3 + 77) )
    {
      v11 = (int **)v3[2];
      if ( *((_BYTE *)v11 + 77) )
      {
        for ( i = (int *)v3[1]; !*((_BYTE *)i + 77); i = (int *)i[1] )
        {
          if ( v3 != (int *)i[2] )
            break;
          v3 = i;
        }
        v3 = i;
      }
      else
      {
        v3 = (int *)v3[2];
        for ( j = *v11; !*((_BYTE *)j + 77); j = (int *)*j )
          v3 = j;
      }
    }
    if ( v3 == v21[11] )
      return 0;
    v1 = v21;
  }
  v24 = -1;
  std::string::~string(v22);
  return -1;
}
// 659A8284: using guessed type int __cdecl std::operator+<char>(_DWORD, _DWORD, _DWORD);
// 659A8288: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (6570F820) --------------------------------------------------------
int __thiscall VectorOf36_Assign(int this, unsigned int a2)
{
  unsigned int v2; // edi
  char *v5; // ebx
  unsigned int v6; // ecx
  char *inserted; // eax
  unsigned int v8; // eax
  int v9; // [esp-10h] [ebp-18h]
  int v10; // [esp-8h] [ebp-10h]

  v2 = a2;
  if ( this != a2 )
  {
    a2 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 36;
    if ( !a2 )
    {
      StringVector_Erase((char **)this, &a2, *(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
      return this;
    }
    v5 = *(char **)(this + 4);
    v6 = (*(_DWORD *)(this + 8) - (int)v5) / 36;
    if ( a2 <= v6 )
    {
      inserted = (char *)StringMap_InsertWrapper(*(_DWORD *)(v2 + 4), *(_DWORD *)(v2 + 8), *(_DWORD *)(this + 4));
      StringVector_DestroyRange(inserted, *(char **)(this + 8));
      *(_DWORD *)(this + 8) = *(_DWORD *)(this + 4) + 36 * ((*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 36);
      return this;
    }
    if ( v5 )
      v8 = (*(_DWORD *)(this + 12) - (int)v5) / 36;
    else
      v8 = 0;
    if ( a2 <= v8 )
    {
      v10 = *(_DWORD *)(this + 4);
      v9 = *(_DWORD *)(v2 + 4);
      a2 = v9 + 36 * v6;
      StringMap_InsertWrapper(v9, a2, v10);
      *(_DWORD *)(this + 8) = StringMap_EmplaceWrapper((void *)this, a2, *(_DWORD *)(v2 + 8), *(_DWORD *)(this + 8));
      return this;
    }
    if ( v5 )
    {
      StringVector_DestroyRange(v5, *(char **)(this + 8));
      operator delete(*(void **)(this + 4));
    }
    if ( Vector36_Reserve((_DWORD *)this, (*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 36) )
      *(_DWORD *)(this + 8) = StringMap_EmplaceWrapper(
                                (void *)this,
                                *(_DWORD *)(v2 + 4),
                                *(_DWORD *)(v2 + 8),
                                *(_DWORD *)(this + 4));
  }
  return this;
}

//----- (6570FB30) --------------------------------------------------------
int __cdecl DirectoryEntry_CopyRange(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // edi

  v3 = a1;
  if ( a1 == a2 )
    return a3;
  v4 = a3;
  do
  {
    std::string::operator=(v4, v3);
    VectorOf36_Assign(v4 + 28, v3 + 28);
    v3 += 44;
    v4 += 44;
  }
  while ( v3 != a2 );
  return v4;
}
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (6570FBC0) --------------------------------------------------------
void __cdecl DirectoryEntry_FreeRange(char *a1, char *a2)
{
  char *i; // esi
  char *v3; // edi
  char *j; // ebx

  for ( i = a1; i != a2; i += 44 )
  {
    v3 = (char *)*((_DWORD *)i + 8);
    if ( v3 )
    {
      for ( j = (char *)*((_DWORD *)i + 9); v3 != j; v3 += 36 )
        std::string::~string(v3);
      operator delete(*((void **)i + 8));
    }
    *((_DWORD *)i + 8) = 0;
    *((_DWORD *)i + 9) = 0;
    *((_DWORD *)i + 10) = 0;
    std::string::~string(i);
  }
}

//----- (65710380) --------------------------------------------------------
void __thiscall ResourceMgr_InitializeFilePaths(int **this)
{
  _DWORD *v2; // eax
  int v3; // eax
  int *v4; // ecx
  int v5; // eax
  int *v6; // ecx
  int v7; // eax
  int *v8; // ecx
  int v9; // eax
  int *v10; // ecx
  int v11; // eax
  int *v12; // ecx
  int v13; // eax
  int *v14; // ecx
  int v15; // eax
  int *v16; // ecx
  int v17; // eax
  int *v18; // ecx
  int v19; // eax
  int *v20; // ecx
  int v21; // eax
  int *v22; // ecx
  int v23; // eax
  int *v24; // ecx
  int v25; // eax
  int *v26; // ecx
  int v27; // eax
  int *v28; // ecx
  int v29; // eax
  int *v30; // ecx
  int *v31; // esi
  int v32; // eax
  int v33; // eax
  int *v34; // ecx
  int v35; // eax
  int *v36; // ecx
  int v37; // eax
  int *v38; // ecx
  int v39; // eax
  int *v40; // ecx
  int v41; // eax
  int *v42; // ecx
  int v43; // eax
  int *v44; // ecx
  int v45; // eax
  int *v46; // ecx
  int v47; // eax
  int *v48; // ecx
  int *v49; // esi
  int v50; // eax
  int v51; // eax
  int v52; // ecx
  char *v53; // eax
  char *v54; // ecx
  _DWORD *v55; // eax
  _BYTE v56[28]; // [esp+10h] [ebp-140h] BYREF
  _BYTE v57[28]; // [esp+2Ch] [ebp-124h] BYREF
  _BYTE v58[28]; // [esp+48h] [ebp-108h] BYREF
  _BYTE v59[28]; // [esp+64h] [ebp-ECh] BYREF
  _BYTE v60[28]; // [esp+80h] [ebp-D0h] BYREF
  _BYTE v61[28]; // [esp+9Ch] [ebp-B4h] BYREF
  _BYTE v62[36]; // [esp+B8h] [ebp-98h] BYREF
  _BYTE v63[8]; // [esp+DCh] [ebp-74h] BYREF
  _BYTE v64[28]; // [esp+E4h] [ebp-6Ch] BYREF
  _BYTE v65[28]; // [esp+100h] [ebp-50h] BYREF
  int *Entry; // [esp+11Ch] [ebp-34h]
  int v67; // [esp+120h] [ebp-30h]
  _BYTE v68[28]; // [esp+124h] [ebp-2Ch] BYREF
  int v69; // [esp+14Ch] [ebp-4h]

  std::string::string(v68);
  v69 = 0;
  Process_GetModuleName((int)v68);
  TreeNode_DeleteChildrenRecursive2((void **)(*(this + 8))[1]);
  (*(this + 8))[1] = (int)*(this + 8);
  v2 = *(this + 8);
  *(this + 9) = 0;
  *v2 = v2;
  (*(this + 8))[2] = (int)*(this + 8);
  v67 = sub_6593A4C0((int)v63);
  LOBYTE(v69) = 1;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v68);
  std::string::operator=(Entry, v67);
  v3 = v67;
  v4 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v4 + 29) = *(_BYTE *)(v3 + 29);
  v4[8] = *(_DWORD *)(v3 + 32);
  LOBYTE(v69) = 0;
  std::string::~string(v63);
  std::string::string(v64, "Resources");
  LOBYTE(v69) = 2;
  std::string::string(v65, "CSHELL.DLL");
  LOBYTE(v69) = 3;
  v67 = sub_6593A4E0((int)v62, (int)v64, 0, 0, 0);
  LOBYTE(v69) = 4;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v65);
  std::string::operator=(Entry, v67);
  v5 = v67;
  v6 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v6 + 29) = *(_BYTE *)(v5 + 29);
  v6[8] = *(_DWORD *)(v5 + 32);
  LOBYTE(v69) = 3;
  std::string::~string(v62);
  LOBYTE(v69) = 2;
  std::string::~string(v65);
  LOBYTE(v69) = 0;
  std::string::~string(v64);
  std::string::string(v65, "Resources");
  LOBYTE(v69) = 5;
  std::string::string(v64, "CRES.DLL");
  LOBYTE(v69) = 6;
  v67 = sub_6593A4E0((int)v62, (int)v65, 0, 0, 0);
  LOBYTE(v69) = 7;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(Entry, v67);
  v7 = v67;
  v8 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v8 + 29) = *(_BYTE *)(v7 + 29);
  v8[8] = *(_DWORD *)(v7 + 32);
  LOBYTE(v69) = 6;
  std::string::~string(v62);
  LOBYTE(v69) = 5;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v65, "Resources");
  LOBYTE(v69) = 8;
  std::string::string(v64, "OBJECT.LTO");
  LOBYTE(v69) = 9;
  v67 = sub_6593A4E0((int)v62, (int)v65, 0, 0, 0);
  LOBYTE(v69) = 10;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(Entry, v67);
  v9 = v67;
  v10 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v10 + 29) = *(_BYTE *)(v9 + 29);
  v10[8] = *(_DWORD *)(v9 + 32);
  LOBYTE(v69) = 9;
  std::string::~string(v62);
  LOBYTE(v69) = 8;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v65, byte_659A8B98);
  LOBYTE(v69) = 11;
  std::string::string(v64, "WINMM.DLL");
  LOBYTE(v69) = 12;
  v67 = sub_6593A4E0((int)v62, (int)v65, 1, 0, 4096);
  LOBYTE(v69) = 13;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(Entry, v67);
  v11 = v67;
  v12 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v12 + 29) = *(_BYTE *)(v11 + 29);
  v12[8] = *(_DWORD *)(v11 + 32);
  LOBYTE(v69) = 12;
  std::string::~string(v62);
  LOBYTE(v69) = 11;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v65, byte_659A8B98);
  LOBYTE(v69) = 14;
  std::string::string(v64, "DBGHELP.DLL");
  LOBYTE(v69) = 15;
  v67 = sub_6593A4E0((int)v62, (int)v65, 1, 0, 4096);
  LOBYTE(v69) = 16;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(Entry, v67);
  v13 = v67;
  v14 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v14 + 29) = *(_BYTE *)(v13 + 29);
  v14[8] = *(_DWORD *)(v13 + 32);
  LOBYTE(v69) = 15;
  std::string::~string(v62);
  LOBYTE(v69) = 14;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v65, byte_659A8B98);
  LOBYTE(v69) = 17;
  std::string::string(v64, "KERNEL32.DLL");
  LOBYTE(v69) = 18;
  v67 = sub_6593A4E0((int)v62, (int)v65, 1, 0, 4096);
  LOBYTE(v69) = 19;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(Entry, v67);
  v15 = v67;
  v16 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v16 + 29) = *(_BYTE *)(v15 + 29);
  v16[8] = *(_DWORD *)(v15 + 32);
  LOBYTE(v69) = 18;
  std::string::~string(v62);
  LOBYTE(v69) = 17;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v65, byte_659A8B98);
  LOBYTE(v69) = 20;
  std::string::string(v64, "GDI32.DLL");
  LOBYTE(v69) = 21;
  v67 = sub_6593A4E0((int)v62, (int)v65, 1, 0, 4096);
  LOBYTE(v69) = 22;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(Entry, v67);
  v17 = v67;
  v18 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v18 + 29) = *(_BYTE *)(v17 + 29);
  v18[8] = *(_DWORD *)(v17 + 32);
  LOBYTE(v69) = 21;
  std::string::~string(v62);
  LOBYTE(v69) = 20;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v65, byte_659A8B98);
  LOBYTE(v69) = 23;
  std::string::string(v64, "ADVAPI32.DLL");
  LOBYTE(v69) = 24;
  v67 = sub_6593A4E0((int)v62, (int)v65, 1, 0, 4096);
  LOBYTE(v69) = 25;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(Entry, v67);
  v19 = v67;
  v20 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v20 + 29) = *(_BYTE *)(v19 + 29);
  v20[8] = *(_DWORD *)(v19 + 32);
  LOBYTE(v69) = 24;
  std::string::~string(v62);
  LOBYTE(v69) = 23;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v65, byte_659A8B98);
  LOBYTE(v69) = 26;
  std::string::string(v64, "OLE32.DLL");
  LOBYTE(v69) = 27;
  v67 = sub_6593A4E0((int)v62, (int)v65, 1, 0, 4096);
  LOBYTE(v69) = 28;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(Entry, v67);
  v21 = v67;
  v22 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v22 + 29) = *(_BYTE *)(v21 + 29);
  v22[8] = *(_DWORD *)(v21 + 32);
  LOBYTE(v69) = 27;
  std::string::~string(v62);
  LOBYTE(v69) = 26;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v64, "DTYPEPWR.DLL");
  LOBYTE(v69) = 29;
  v67 = sub_6593A4C0((int)v62);
  LOBYTE(v69) = 30;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(Entry, v67);
  v23 = v67;
  v24 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v24 + 29) = *(_BYTE *)(v23 + 29);
  v24[8] = *(_DWORD *)(v23 + 32);
  LOBYTE(v69) = 29;
  std::string::~string(v62);
  LOBYTE(v69) = 0;
  std::string::~string(v64);
  std::string::string(v65, byte_659A8B98);
  LOBYTE(v69) = 31;
  std::string::string(v64, "MSVCP90D.DLL");
  LOBYTE(v69) = 32;
  v67 = sub_6593A4E0((int)v62, (int)v65, 0, 0, 4096);
  LOBYTE(v69) = 33;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(Entry, v67);
  v25 = v67;
  v26 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v26 + 29) = *(_BYTE *)(v25 + 29);
  v26[8] = *(_DWORD *)(v25 + 32);
  LOBYTE(v69) = 32;
  std::string::~string(v62);
  LOBYTE(v69) = 31;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v65, byte_659A8B98);
  LOBYTE(v69) = 34;
  std::string::string(v64, "MSVCR90D.DLL");
  LOBYTE(v69) = 35;
  v67 = sub_6593A4E0((int)v62, (int)v65, 0, 0, 4096);
  LOBYTE(v69) = 36;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(Entry, v67);
  v27 = v67;
  v28 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v28 + 29) = *(_BYTE *)(v27 + 29);
  v28[8] = *(_DWORD *)(v27 + 32);
  LOBYTE(v69) = 35;
  std::string::~string(v62);
  LOBYTE(v69) = 34;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v65, byte_659A8B98);
  LOBYTE(v69) = 37;
  std::string::string(v64, "MSVCP90.DLL");
  LOBYTE(v69) = 38;
  v67 = sub_6593A4E0((int)v62, (int)v65, 0, 0, 4096);
  LOBYTE(v69) = 39;
  Entry = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(Entry, v67);
  v29 = v67;
  v30 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v30 + 29) = *(_BYTE *)(v29 + 29);
  v30[8] = *(_DWORD *)(v29 + 32);
  LOBYTE(v69) = 38;
  std::string::~string(v62);
  LOBYTE(v69) = 37;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v65, byte_659A8B98);
  LOBYTE(v69) = 40;
  std::string::string(v64, "MSVCR90.DLL");
  LOBYTE(v69) = 41;
  v67 = sub_6593A4E0((int)v62, (int)v65, 0, 0, 4096);
  LOBYTE(v69) = 42;
  v31 = DirectoryTree_FindEntry(this + 7, (int)v64);
  std::string::operator=(v31, v67);
  v32 = v67;
  *((_BYTE *)v31 + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v31 + 29) = *(_BYTE *)(v32 + 29);
  v31[8] = *(_DWORD *)(v32 + 32);
  LOBYTE(v69) = 41;
  std::string::~string(v62);
  LOBYTE(v69) = 40;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  v67 = sub_6593A4C0((int)v62);
  LOBYTE(v69) = 43;
  Entry = DirectoryTree_FindEntry(this + 10, (int)v68);
  std::string::operator=(Entry, v67);
  v33 = v67;
  v34 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v34 + 29) = *(_BYTE *)(v33 + 29);
  v34[8] = *(_DWORD *)(v33 + 32);
  LOBYTE(v69) = 0;
  std::string::~string(v62);
  std::string::string(v65, "Resources");
  LOBYTE(v69) = 44;
  std::string::string(v64, "CSHELL.DLL");
  LOBYTE(v69) = 45;
  v67 = sub_6593A4E0((int)v62, (int)v65, 0, 0, 0);
  LOBYTE(v69) = 46;
  Entry = DirectoryTree_FindEntry(this + 10, (int)v64);
  std::string::operator=(Entry, v67);
  v35 = v67;
  v36 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v36 + 29) = *(_BYTE *)(v35 + 29);
  v36[8] = *(_DWORD *)(v35 + 32);
  LOBYTE(v69) = 45;
  std::string::~string(v62);
  LOBYTE(v69) = 44;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v65, "Resources");
  LOBYTE(v69) = 47;
  std::string::string(v64, "CRES.DLL");
  LOBYTE(v69) = 48;
  v67 = sub_6593A4E0((int)v62, (int)v65, 0, 0, 0);
  LOBYTE(v69) = 49;
  Entry = DirectoryTree_FindEntry(this + 10, (int)v64);
  std::string::operator=(Entry, v67);
  v37 = v67;
  v38 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v38 + 29) = *(_BYTE *)(v37 + 29);
  v38[8] = *(_DWORD *)(v37 + 32);
  LOBYTE(v69) = 48;
  std::string::~string(v62);
  LOBYTE(v69) = 47;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v65);
  std::string::string(v57, "Resources");
  LOBYTE(v69) = 50;
  std::string::string(v64, "OBJECT.LTO");
  LOBYTE(v69) = 51;
  v67 = sub_6593A4E0((int)v62, (int)v57, 0, 0, 0);
  LOBYTE(v69) = 52;
  Entry = DirectoryTree_FindEntry(this + 10, (int)v64);
  std::string::operator=(Entry, v67);
  v39 = v67;
  v40 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v40 + 29) = *(_BYTE *)(v39 + 29);
  v40[8] = *(_DWORD *)(v39 + 32);
  LOBYTE(v69) = 51;
  std::string::~string(v62);
  LOBYTE(v69) = 50;
  std::string::~string(v64);
  LOBYTE(v69) = 0;
  std::string::~string(v57);
  std::string::string(v59, "DTYPEPWR.DLL");
  LOBYTE(v69) = 53;
  v67 = sub_6593A4C0((int)v62);
  LOBYTE(v69) = 54;
  Entry = DirectoryTree_FindEntry(this + 10, (int)v59);
  std::string::operator=(Entry, v67);
  v41 = v67;
  v42 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v42 + 29) = *(_BYTE *)(v41 + 29);
  v42[8] = *(_DWORD *)(v41 + 32);
  LOBYTE(v69) = 53;
  std::string::~string(v62);
  LOBYTE(v69) = 0;
  std::string::~string(v59);
  std::string::string(v61, byte_659A8B98);
  LOBYTE(v69) = 55;
  std::string::string(v59, "MSVCP90D.DLL");
  LOBYTE(v69) = 56;
  v67 = sub_6593A4E0((int)v62, (int)v61, 0, 0, 4096);
  LOBYTE(v69) = 57;
  Entry = DirectoryTree_FindEntry(this + 10, (int)v59);
  std::string::operator=(Entry, v67);
  v43 = v67;
  v44 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v44 + 29) = *(_BYTE *)(v43 + 29);
  v44[8] = *(_DWORD *)(v43 + 32);
  LOBYTE(v69) = 56;
  std::string::~string(v62);
  LOBYTE(v69) = 55;
  std::string::~string(v59);
  LOBYTE(v69) = 0;
  std::string::~string(v61);
  std::string::string(v60, byte_659A8B98);
  LOBYTE(v69) = 58;
  std::string::string(v61, "MSVCR90D.DLL");
  LOBYTE(v69) = 59;
  v67 = sub_6593A4E0((int)v62, (int)v60, 0, 0, 4096);
  LOBYTE(v69) = 60;
  Entry = DirectoryTree_FindEntry(this + 10, (int)v61);
  std::string::operator=(Entry, v67);
  v45 = v67;
  v46 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v46 + 29) = *(_BYTE *)(v45 + 29);
  v46[8] = *(_DWORD *)(v45 + 32);
  LOBYTE(v69) = 59;
  std::string::~string(v62);
  LOBYTE(v69) = 58;
  std::string::~string(v61);
  LOBYTE(v69) = 0;
  std::string::~string(v60);
  std::string::string(v58, byte_659A8B98);
  LOBYTE(v69) = 61;
  std::string::string(v60, "MSVCP90.DLL");
  LOBYTE(v69) = 62;
  v67 = sub_6593A4E0((int)v62, (int)v58, 0, 0, 4096);
  LOBYTE(v69) = 63;
  Entry = DirectoryTree_FindEntry(this + 10, (int)v60);
  std::string::operator=(Entry, v67);
  v47 = v67;
  v48 = Entry;
  *((_BYTE *)Entry + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v48 + 29) = *(_BYTE *)(v47 + 29);
  v48[8] = *(_DWORD *)(v47 + 32);
  LOBYTE(v69) = 62;
  std::string::~string(v62);
  LOBYTE(v69) = 61;
  std::string::~string(v60);
  LOBYTE(v69) = 0;
  std::string::~string(v58);
  std::string::string(v56, byte_659A8B98);
  LOBYTE(v69) = 64;
  std::string::string(v58, "MSVCR90.DLL");
  LOBYTE(v69) = 65;
  v67 = sub_6593A4E0((int)v62, (int)v56, 0, 0, 4096);
  LOBYTE(v69) = 66;
  v49 = DirectoryTree_FindEntry(this + 10, (int)v58);
  std::string::operator=(v49, v67);
  v50 = v67;
  *((_BYTE *)v49 + 28) = *(_BYTE *)(v67 + 28);
  *((_BYTE *)v49 + 29) = *(_BYTE *)(v50 + 29);
  v49[8] = *(_DWORD *)(v50 + 32);
  LOBYTE(v69) = 65;
  std::string::~string(v62);
  LOBYTE(v69) = 64;
  std::string::~string(v58);
  LOBYTE(v69) = 0;
  std::string::~string(v56);
  v51 = (int)*(this + 5);
  v52 = (int)*(this + 4);
  if ( v52 != v51 )
  {
    LOBYTE(Entry) = 0;
    v53 = (char *)DirectoryEntry_CopyRange(v51, v51, v52);
    v54 = (char *)*(this + 5);
    Entry = (int *)v53;
    DirectoryEntry_FreeRange(v53, v54);
    *(this + 5) = Entry;
  }
  TreeNode_DeleteChildrenRecursive((void **)(*(this + 1))[1]);
  (*(this + 1))[1] = (int)*(this + 1);
  v55 = *(this + 1);
  *(this + 2) = 0;
  *v55 = v55;
  (*(this + 1))[2] = (int)*(this + 1);
  FileReader_Seek((HMODULE *)this, (int)(this + 3));
  DirectoryTree_ProcessEntries(this);
  byte_65A5E60C = 1;
  v69 = -1;
  std::string::~string(v68);
}
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 65A5E60C: using guessed type char byte_65A5E60C;

//----- (657117D0) --------------------------------------------------------
char __cdecl Array_FindValue(int a1, _DWORD *a2)
{
  _DWORD *v2; // ecx

  v2 = a2;
  if ( a2 )
  {
    while ( *v2 )
    {
      if ( a1 == *v2 )
        return 0;
      if ( !++v2 )
        return 1;
    }
  }
  return 1;
}

//----- (65711A50) --------------------------------------------------------
float *__thiscall Quat_GetUpVector(float *this, float *a2)
{
  *a2 = (*this * *(this + 1) - *(this + 3) * *(this + 2)) * 2.0;
  a2[1] = 1.0 - (*(this + 2) * *(this + 2) + *this * *this) * 2.0;
  a2[2] = 2.0 * (*this * *(this + 3) + *(this + 2) * *(this + 1));
  return a2;
}

//----- (65712040) --------------------------------------------------------
float *__thiscall CharacterInfo_Ctor(float *this, char a2)
{
  int v3; // edi

  *(this + 5) = 0.0;
  *(_DWORD *)this = &off_659BFEB4;
  *(this + 2) = 0.0;
  *(this + 3) = 0.0;
  *((_WORD *)this + 8) = 0;
  *((_BYTE *)this + 18) = 1;
  std::string::string(this + 6, "Human");
  *((_BYTE *)this + 52) = 1;
  *((double *)this + 10) = 0.0;
  *((double *)this + 9) = 0.0;
  *(this + 16) = 0.0;
  *(this + 17) = 0.0;
  *(this + 14) = 0.0;
  *(this + 15) = 0.0;
  *(this + 24) = 0.0;
  *(this + 25) = 0.0;
  *(this + 26) = 0.0;
  *((_WORD *)this + 44) = 0;
  *((_BYTE *)this + 90) = 0;
  v3 = *((_DWORD *)this + 24);
  if ( v3 != *((_DWORD *)this + 25) )
    *((_DWORD *)this + 25) = v3;
  *((_BYTE *)this + 108) = a2;
  return this;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFEB4: using guessed type void *off_659BFEB4;

//----- (65712870) --------------------------------------------------------
float *__thiscall Quaternion_ToForwardVector(float *this, float *a2)
{
  *a2 = 1.0 - (*(this + 2) * *(this + 2) + *(this + 1) * *(this + 1)) * 2.0;
  a2[1] = (*(this + 1) * *this + *(this + 3) * *(this + 2)) * 2.0;
  a2[2] = 2.0 * (*this * *(this + 2) - *(this + 1) * *(this + 3));
  return a2;
}

//----- (65713430) --------------------------------------------------------
float *__thiscall Matrix4x4_BuildFromVectors(float *this, float *a2, float *a3, float *a4)
{
  float *result; // eax
  float v7; // [esp+0h] [ebp-14h]
  float v8; // [esp+4h] [ebp-10h]
  float v9; // [esp+8h] [ebp-Ch]
  float v10; // [esp+Ch] [ebp-8h]
  float v11; // [esp+10h] [ebp-4h]
  float v12; // [esp+1Ch] [ebp+8h]
  float v13; // [esp+20h] [ebp+Ch]
  float v14; // [esp+24h] [ebp+10h]

  result = a3;
  v13 = *a3;
  v14 = *a4;
  v12 = a2[1];
  v11 = result[1];
  v10 = a4[1];
  v9 = a2[2];
  v8 = result[2];
  v7 = a4[2];
  *this = *a2;
  *(this + 1) = v13;
  *(this + 2) = v14;
  *(this + 3) = 0.0;
  *(this + 4) = v12;
  *(this + 5) = v11;
  *(this + 6) = v10;
  *(this + 7) = 0.0;
  *(this + 8) = v9;
  *(this + 9) = v8;
  *(this + 10) = v7;
  *(this + 11) = 0.0;
  *(this + 12) = 0.0;
  *(this + 13) = 0.0;
  *(this + 14) = 0.0;
  *(this + 15) = 1.0;
  return result;
}

//----- (657134D0) --------------------------------------------------------
void __thiscall Matrix_ToQuaternion(float *this, float *a2)
{
  int v3; // ecx
  int v4; // ebx
  int v5; // edi
  int v7; // [esp+Ch] [ebp-4h]
  float v8; // [esp+18h] [ebp+8h]
  float v9; // [esp+18h] [ebp+8h]
  float v10; // [esp+18h] [ebp+8h]
  float v11; // [esp+18h] [ebp+8h]
  float v12; // [esp+18h] [ebp+8h]
  float v13; // [esp+18h] [ebp+8h]
  float v14; // [esp+18h] [ebp+8h]

  v8 = *a2 + a2[5] + a2[10];
  if ( v8 >= -0.9990000128746033 )
  {
    v12 = v8 + 1.0;
    v13 = sqrt(v12);
    *(this + 3) = v13 * 0.5;
    v14 = 0.5 / v13;
    *this = (a2[9] - a2[6]) * v14;
    *(this + 1) = (a2[2] - a2[8]) * v14;
    *(this + 2) = v14 * (a2[4] - a2[1]);
  }
  else
  {
    v3 = 0;
    v7 = 0;
    if ( *a2 < (double)a2[5] )
    {
      v7 = 1;
      v3 = 1;
    }
    v4 = 2;
    if ( a2[5 * v3] < (double)a2[10] )
    {
      v7 = 2;
      v3 = 2;
    }
    if ( v3 )
    {
      if ( v3 == 1 )
      {
        v5 = 2;
        v4 = 0;
      }
      else
      {
        v5 = 0;
        v4 = 1;
      }
    }
    else
    {
      v5 = 1;
    }
    v9 = a2[5 * v3] - (a2[5 * v4] + a2[5 * v5]) + 1.0;
    v10 = sqrt(v9);
    *(this + v7) = v10 * 0.5;
    v11 = 0.5 / v10;
    *(this + 3) = (a2[4 * v4 + v5] - a2[4 * v5 + v4]) * v11;
    *(this + v5) = (a2[4 * v5 + v7] + a2[4 * v7 + v5]) * v11;
    *(this + v4) = v11 * (a2[4 * v4 + v7] + a2[4 * v7 + v4]);
  }
}
// 6571354A: conditional instruction was optimized away because ecx.4==2

//----- (65713750) --------------------------------------------------------
void __thiscall Vec3_ScaleToLength(float *this, float a2)
{
  float v2; // [esp+4h] [ebp-4h]
  float v3; // [esp+4h] [ebp-4h]
  float v4; // [esp+10h] [ebp+8h]

  v2 = *(this + 1) * *(this + 1) + *this * *this + *(this + 2) * *(this + 2);
  v3 = sqrt(v2);
  if ( v3 != 0.0 )
  {
    v4 = a2 / v3;
    *this = *this * v4;
    *(this + 1) = v4 * *(this + 1);
    *(this + 2) = v4 * *(this + 2);
  }
}

//----- (65714130) --------------------------------------------------------
float *__thiscall Transform_ApplyRotation(float *this, float *a2, float *a3)
{
  float v3; // edx
  double v4; // st7
  double v6; // st6
  float v7; // ecx
  double v8; // st7
  double v9; // st6
  float v11[16]; // [esp+8h] [ebp-58h] BYREF
  float v12; // [esp+48h] [ebp-18h] BYREF
  float v13; // [esp+4Ch] [ebp-14h]
  float v14; // [esp+50h] [ebp-10h]
  float v15; // [esp+54h] [ebp-Ch] BYREF
  float v16; // [esp+58h] [ebp-8h]
  float v17; // [esp+5Ch] [ebp-4h]
  float v18; // [esp+6Ch] [ebp+Ch]
  float v19; // [esp+6Ch] [ebp+Ch]
  float v20; // [esp+6Ch] [ebp+Ch]
  float v21; // [esp+6Ch] [ebp+Ch]

  v3 = a3[1];
  v4 = v3 * a2[1];
  v6 = *a2 * *a3;
  v12 = *a3;
  v7 = a3[2];
  v8 = v4 + v6;
  v13 = v3;
  v9 = a3[2];
  v14 = v7;
  v18 = v8 + v9 * a2[2];
  if ( v18 > 0.8999999761581421 || v18 < -0.8999999761581421 )
  {
    v12 = a2[1];
    v13 = a2[2];
    v14 = *a2;
  }
  v15 = a2[2] * v13 - a2[1] * v14;
  v16 = v14 * *a2 - a2[2] * v12;
  v17 = v12 * a2[1] - v13 * *a2;
  v19 = v15 * v15 + v16 * v16 + v17 * v17;
  v20 = sqrt(v19);
  v21 = 1.0 / v20;
  v15 = v21 * v15;
  v16 = v21 * v16;
  v17 = v21 * v17;
  v12 = a2[1] * v17 - a2[2] * v16;
  v13 = a2[2] * v15 - v17 * *a2;
  v14 = v16 * *a2 - v15 * a2[1];
  Matrix4x4_BuildFromVectors(v11, &v15, &v12, a2);
  Matrix_ToQuaternion(this, v11);
  return this;
}

//----- (657149A0) --------------------------------------------------------
int __cdecl EquipSlot_CheckAndSetValid(_DWORD *a1, int a2)
{
  int Slot; // eax

  Slot = EquipSlots_GetSlot(a1, a2);
  if ( Slot && !*(_DWORD *)(Slot + 508) )
    return 0;
  *(_DWORD *)dword_65ABF71C = 0;
  *(_DWORD *)(dword_65ABF6F4 + 12) = 1;
  return 1;
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (657149E0) --------------------------------------------------------
int __cdecl EquipSlots_GetSlotWrapper(_DWORD *a1, int a2)
{
  return EquipSlots_GetSlot(a1, a2);
}

//----- (65714A00) --------------------------------------------------------
float *__thiscall Quaternion_SetZero(float *this)
{
  *(this + 3) = 0.0;
  *this = 0.0;
  *(this + 1) = 0.0;
  *(this + 2) = 0.0;
  return this;
}

//----- (65714A40) --------------------------------------------------------
float *__stdcall Display_GetAspectRatio(float *a1, float *a2)
{
  *a2 = 33.0;
  *a1 = (double)*(int *)&Data * 33.0 / (double)*(int *)&dword_65A55604;
  return a2;
}

//----- (65714A90) --------------------------------------------------------
float *__thiscall ObjectTransform_Init(float *this)
{
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 1.0;
  *(this + 50) = 0.0;
  *(this + 51) = 0.0;
  *(this + 52) = 0.0;
  *(this + 53) = 0.0;
  memset(this, 0, 0xF0u);
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 1.0;
  *(this + 57) = 1.0;
  *(this + 58) = 1.0;
  *(this + 59) = 1.0;
  return this;
}

//----- (65714B00) --------------------------------------------------------
int __thiscall PlayerMovement_Reset(int this)
{
  ObjectTransform_Init((float *)this);
  *(float *)(this + 264) = 0.0;
  *(float *)(this + 268) = 0.0;
  *(_BYTE *)(this + 240) = 0;
  *(_DWORD *)(this + 244) = 0;
  *(float *)(this + 272) = 0.0;
  *(_BYTE *)(this + 248) = 0;
  *(_DWORD *)(this + 252) = 0;
  *(_DWORD *)(this + 256) = 0;
  *(_DWORD *)(this + 260) = 0;
  return this;
}

//----- (65714B80) --------------------------------------------------------
int __thiscall CameraDistance_BuildCommand(char *this, float a2)
{
  char *v2; // esi

  v2 = this + 292;
  sprintf(this + 292, "+%s %f", "CameraDistance", a2);
  return (*(int (__cdecl **)(char *))(g_pILTClient + 520))(v2);
}

//----- (65714BC0) --------------------------------------------------------
double __thiscall CameraDistance_GetCVar(_DWORD *this)
{
  int v2; // eax

  v2 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("CameraDistance");
  *(this + 72) = v2;
  if ( !v2 )
    return (float)150.0;
  return (float)((double (__thiscall *)(int, int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v2);
}

//----- (65714C20) --------------------------------------------------------
bool __usercall Object_TryCreate@<al>(int *this@<ecx>, double a2@<st0>)
{
  int v4; // eax
  int v5; // ecx
  float v6[60]; // [esp+4h] [ebp-214h] BYREF
  char v7; // [esp+F4h] [ebp-124h]
  int v8; // [esp+F8h] [ebp-120h]
  char v9; // [esp+FCh] [ebp-11Ch]
  int v10; // [esp+100h] [ebp-118h]
  int v11; // [esp+104h] [ebp-114h]
  int v12; // [esp+108h] [ebp-110h]
  float v13; // [esp+10Ch] [ebp-10Ch]
  float v14; // [esp+110h] [ebp-108h]
  float v15; // [esp+114h] [ebp-104h]
  float v16[47]; // [esp+118h] [ebp-100h] BYREF
  float v17; // [esp+1D4h] [ebp-44h] BYREF
  float v18; // [esp+1D8h] [ebp-40h] BYREF
  char v19; // [esp+1DCh] [ebp-3Ch]
  unsigned int v20; // [esp+208h] [ebp-10h]
  int (__cdecl *v21)(_DWORD *, int); // [esp+20Ch] [ebp-Ch]
  int (__cdecl *v22)(_DWORD *, int); // [esp+210h] [ebp-8h]

  if ( IndexArray_GetElement(dword_65ABF6FC, *(this + 1)) )
    return 1;
  ObjectTransform_Init(v16);
  v20 = 15;
  v21 = 0;
  v22 = 0;
  Display_GetAspectRatio(&v17, &v18);
  v19 = 1;
  v20 = v20 & 0xFFFFF5F5 | 0xA02;
  v21 = EquipSlot_CheckAndSetValid;
  v22 = EquipSlots_GetSlotWrapper;
  v4 = AttachmentSlot_CreateFromParams(dword_65ABF6FC, (int)v16);
  *(this + 1) = v4;
  EquipSlots_ClearAllActive(dword_65ABF6FC, v4, 1);
  EquipSlot_SetupOrUpdateAnimation(a2, *(this + 1), 0);
  ObjectTransform_Init(v6);
  v5 = *(this + 1);
  v13 = 0.0;
  v14 = 0.0;
  v15 = 0.0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v7 = 101;
  v8 = 16;
  *(this + 2) = (int)AnimQueue_AddAnimation(dword_65ABF6FC, v5, (int)v6);
  ThirdPerson_InitConsoleVars();
  Zoom_GetMagnification(*(this + 1));
  return IndexArray_GetElement(dword_65ABF6FC, *(this + 1)) != 0;
}

//----- (65714D70) --------------------------------------------------------
void __thiscall CameraDistance_ApplyDeltaScaled(float *this)
{
  bool v2; // bl
  char *v3; // esi
  float v4; // [esp+14h] [ebp-8h]
  float v5; // [esp+14h] [ebp-8h]
  float v6; // [esp+14h] [ebp-8h]
  float CVar; // [esp+18h] [ebp-4h]
  float v8; // [esp+18h] [ebp-4h]

  if ( 0.0 != *(this + 3) )
  {
    v2 = *(this + 3) < 0.0;
    CVar = CameraDistance_GetCVar(dword_65ABF714);
    v4 = (CVar - 60.0) * 150.0 / 240.0 + 60.0;
    v5 = v4 * g_pGameClientShell->recoilScale;
    if ( v2 )
      v5 = v5 * -1.0;
    v8 = CVar + v5;
    if ( v8 >= 60.0 )
    {
      if ( v8 > 300.0 )
        v8 = 300.0;
    }
    else
    {
      v8 = 60.0;
    }
    v3 = (char *)dword_65ABF714 + 292;
    sprintf((char *const)dword_65ABF714 + 292, "+%s %f", "CameraDistance", v8);
    (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v3);
    v6 = *(this + 3) - v5;
    *(this + 3) = v6;
    if ( v2 )
    {
      if ( v6 < 0.0 )
        return;
      goto LABEL_10;
    }
    if ( v6 <= 0.0 )
LABEL_10:
      *(this + 3) = 0.0;
  }
}

//----- (65714EA0) --------------------------------------------------------
char __thiscall Object_InitializeIfNeeded(int *this)
{
  int v3; // eax
  int v4; // ecx
  void (__cdecl *v5)(int, _DWORD, _DWORD); // eax
  bool v6; // bl
  float v7; // [esp+18h] [ebp-24F8h] BYREF
  float v8; // [esp+1Ch] [ebp-24F4h] BYREF
  float v9[2358]; // [esp+20h] [ebp-24F0h] BYREF
  void *v10; // [esp+24F8h] [ebp-18h]
  void *v11; // [esp+24FCh] [ebp-14h]
  int v12; // [esp+250Ch] [ebp-4h]

  if ( *this )
    return 1;
  v9[13] = 0.0;
  v9[2356] = 0.0;
  v9[14] = 0.0;
  v9[2357] = 0.0;
  v9[15] = 0.0;
  v10 = 0;
  v11 = 0;
  v9[16] = 1.0;
  CharacterState_Init((char *)v9);
  v12 = 0;
  CharacterState_Init((char *)v9);
  LOWORD(v9[0]) = 5;
  v3 = (*(int (__cdecl **)(float *))(g_pILTClient + 540))(v9);
  *this = v3;
  (*(void (__cdecl **)(int, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(g_pILTClient + 596))(
    v3,
    0,
    0,
    0,
    *(_DWORD *)&Data,
    *(_DWORD *)&dword_65A55604);
  Display_GetAspectRatio(&v8, &v7);
  v4 = *this;
  v5 = *(void (__cdecl **)(int, _DWORD, _DWORD))(g_pILTClient + 588);
  v7 = v7 * 0.01745329238474369;
  v8 = 0.01745329238474369 * v8;
  v5(v4, LODWORD(v8), LODWORD(v7));
  v6 = *this != 0;
  operator delete[](v10);
  v10 = 0;
  operator delete[](v11);
  return v6;
}

//----- (65715000) --------------------------------------------------------
BOOL __usercall PlayerMovement_Update@<eax>(int *this@<ecx>, double a2@<st0>)
{
  return Object_InitializeIfNeeded(this) && Object_TryCreate(this, a2);
}

//----- (65715100) --------------------------------------------------------
int __thiscall EquipSlots_ClearAllActive(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v4; // edx
  int v5; // edx
  int v6; // edx
  int v7; // edx
  int v8; // edx
  int v9; // edx
  int v10; // edx
  int v11; // edx
  int v12; // edx

  result = 0;
  if ( *(this + a2) )
  {
    if ( !*(this + 10) )
    {
      if ( *this )
        *(_DWORD *)(*this + 508) = 0;
      v4 = *(this + 1);
      if ( v4 )
        *(_DWORD *)(v4 + 508) = 0;
      v5 = *(this + 2);
      if ( v5 )
        *(_DWORD *)(v5 + 508) = 0;
      v6 = *(this + 3);
      if ( v6 )
        *(_DWORD *)(v6 + 508) = 0;
      v7 = *(this + 4);
      if ( v7 )
        *(_DWORD *)(v7 + 508) = 0;
      v8 = *(this + 5);
      if ( v8 )
        *(_DWORD *)(v8 + 508) = 0;
      v9 = *(this + 6);
      if ( v9 )
        *(_DWORD *)(v9 + 508) = 0;
      v10 = *(this + 7);
      if ( v10 )
        *(_DWORD *)(v10 + 508) = 0;
      v11 = *(this + 8);
      if ( v11 )
        *(_DWORD *)(v11 + 508) = 0;
      v12 = *(this + 9);
      if ( v12 )
        *(_DWORD *)(v12 + 508) = 0;
    }
    result = *(this + a2);
    *(_DWORD *)(result + 508) = a3;
  }
  return result;
}

//----- (657151B0) --------------------------------------------------------
int __thiscall EquipSlots_GetItemId(_DWORD *this, int a2)
{
  int v2; // eax

  v2 = *(this + a2);
  if ( v2 )
    return *(_DWORD *)(v2 + 508);
  else
    return 0;
}

//----- (65715380) --------------------------------------------------------
int __thiscall EquipSlots_FindSlotByType(_DWORD *this, int a2, char a3, int a4)
{
  int result; // eax
  int v5; // eax

  result = a4;
  if ( a4 )
    goto LABEL_10;
  v5 = *(this + a2);
  if ( !v5 )
    return 0;
  result = *(_DWORD *)(v5 + 504);
  if ( result )
  {
LABEL_10:
    do
    {
      if ( *(_BYTE *)(result + 244) == a3 )
        break;
      result = *(_DWORD *)(result + 284);
    }
    while ( result );
  }
  return result;
}

//----- (657153C0) --------------------------------------------------------
_DWORD *__thiscall AttachmentSlot_SetDword(_DWORD *this, int a2, int a3)
{
  _DWORD *result; // eax

  result = (_DWORD *)*(this + a2);
  if ( result )
    *result = a3;
  return result;
}

//----- (657153E0) --------------------------------------------------------
char *__thiscall EquipSlots_SetSlotInfo(_DWORD *this, int a2, int a3, char *Source)
{
  char *result; // eax

  result = (char *)*(this + a2);
  if ( result )
  {
    *((_DWORD *)result + 12) = a3;
    result = Source;
    if ( Source )
      return strncpy((char *)(*(this + a2) + 52), Source, 0x40u);
  }
  return result;
}

//----- (65715420) --------------------------------------------------------
char *__thiscall AttachmentSlot_SetLabel(_DWORD *this, int a2, int a3, char *Source)
{
  char *result; // eax

  result = (char *)*(this + a2);
  if ( result )
  {
    *((_DWORD *)result + 29) = a3;
    result = Source;
    if ( Source )
      return strncpy((char *)(*(this + a2) + 120), Source, 0x40u);
  }
  return result;
}

//----- (65715460) --------------------------------------------------------
int __thiscall AttachmentSlot_SetAnglesDegrees(_DWORD *this, int a2, float a3, float a4, int a5)
{
  int result; // eax

  result = *(this + a2);
  if ( result && *(_DWORD *)(result + 4) )
  {
    if ( a5 )
    {
      a3 = a3 * 0.01745329238474369;
      a4 = 0.01745329238474369 * a4;
    }
    *(float *)(result + 196) = a3;
    *(float *)(*(this + a2) + 200) = a4;
    return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD))(g_pILTClient + 588))(
             *(_DWORD *)(*(this + a2) + 4),
             LODWORD(a3),
             LODWORD(a4));
  }
  return result;
}

//----- (657154D0) --------------------------------------------------------
int __thiscall AttachmentSlot_SetField512(_DWORD *this, int a2, int a3)
{
  int result; // eax

  result = *(this + a2);
  if ( result )
  {
    if ( *(_DWORD *)(result + 4) )
      *(_DWORD *)(result + 512) = a3;
  }
  return result;
}

//----- (657154F0) --------------------------------------------------------
int __thiscall AttachmentSlot_SetField516(_DWORD *this, int a2, int a3)
{
  int result; // eax

  result = *(this + a2);
  if ( result )
  {
    if ( *(_DWORD *)(result + 4) )
      *(_DWORD *)(result + 516) = a3;
  }
  return result;
}

//----- (65715510) --------------------------------------------------------
int __thiscall EquipSlots_GetSlot(_DWORD *this, int a2)
{
  return *(this + a2);
}

//----- (65715540) --------------------------------------------------------
int __thiscall IndexArray_GetElement(_DWORD *this, int a2)
{
  int v2; // eax
  int result; // eax

  v2 = *(this + a2);
  if ( !v2 )
    return 0;
  result = *(_DWORD *)(v2 + 4);
  if ( !result )
    return 0;
  return result;
}

//----- (65715740) --------------------------------------------------------
int __thiscall AttachmentArray_FindFreeSlot(_DWORD *this)
{
  int result; // eax

  result = 0;
  while ( *(this + result) )
  {
    if ( ++result >= 10 )
      return -1;
  }
  return result;
}

//----- (657157E0) --------------------------------------------------------
int SafeVsnprintf(char *Buffer, WorldLoginReturnAddrPacked BufferCount, char *Format, ...)
{
  int result; // eax
  va_list ArgList; // [esp+18h] [ebp+14h] BYREF

  va_start(ArgList, Format);
  if ( BufferCount.flag_pad_ip0 )
  {
    result = _vsnprintf(Buffer, BufferCount.flag_pad_ip0, Format, ArgList);
    Buffer[BufferCount.flag_pad_ip0 - 1] = 0;
  }
  return result;
}

//----- (65715820) --------------------------------------------------------
void __cdecl Operator_Delete1(void *a1)
{
  operator delete(a1);
}

//----- (65715830) --------------------------------------------------------
void __cdecl Operator_Delete2(void *a1)
{
  operator delete(a1);
}

//----- (65715840) --------------------------------------------------------
void __cdecl Operator_Delete3(void *a1)
{
  operator delete(a1);
}

//----- (657158D0) --------------------------------------------------------
BOOL Player_IsInGameMode2()
{
  return SharedMem_ReadDword_this(g_pPlayerStats, 0x1CEC2u) == 2;
}

//----- (65715910) --------------------------------------------------------
int __thiscall ConsoleVar_Init(int *this, int a2, const char *a3, const char *a4, float a5)
{
  int v6; // eax
  int result; // eax
  const char *v8; // [esp+Ch] [ebp-188h]
  char v9[4]; // [esp+10h] [ebp-184h] BYREF
  char v10[8]; // [esp+110h] [ebp-84h] BYREF

  v8 = a4;
  *(this + 2) = (int)a3;
  if ( !a4 )
  {
    SafeVsnprintf(v10, (WorldLoginReturnAddrPacked)128, "%5f", a5);
    v8 = v10;
  }
  v6 = (*(int (__cdecl **)(const char *))(a2 + 248))(a3);
  *this = v6;
  if ( v6
    || (SafeVsnprintf(v9, (WorldLoginReturnAddrPacked)256, "\"%s\" \"%s\"", a3, v8),
        (*(void (__cdecl **)(char *))(a2 + 520))(v9),
        result = (*(int (__cdecl **)(const char *))(a2 + 248))(a3),
        (*this = result) != 0) )
  {
    *(this + 1) = a2;
    return 1;
  }
  return result;
}

//----- (65715AE0) --------------------------------------------------------
void __userpurge CameraMgr_GetCameraMode(int a1@<ecx>, double st6_0@<st1>, float a3)
{
  int v5; // eax
  float v6; // [esp+14h] [ebp+8h]

  if ( LOBYTE(a3) )
  {
    v5 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("CameraMode");
    *(_DWORD *)(a1 + 288) = v5;
    if ( v5 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v5);
    else
      st6_0 = 0.0;
    v6 = st6_0;
    *(_DWORD *)(a1 + 284) = (__int64)v6;
  }
}

//----- (65715B60) --------------------------------------------------------
float *__thiscall ObjectState_Init(float *this)
{
  *(this + 19) = 0.0;
  *(this + 20) = 0.0;
  *(this + 21) = 0.0;
  *(this + 22) = 1.0;
  *this = 0.0;
  *(this + 1) = 0.0;
  *(this + 2) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *(this + 11) = 0.0;
  *(this + 12) = 0.0;
  *(this + 13) = Rand_FloatInRange(0.0, 1.0);
  *(this + 14) = 0.0;
  *(this + 15) = 100.0;
  *(this + 16) = 0.0;
  *(this + 17) = 0.0;
  *(this + 18) = 0.0;
  *(this + 19) = 0.0;
  *(this + 20) = 0.0;
  *(this + 21) = 0.0;
  *(this + 22) = 1.0;
  return this;
}

//----- (65715BE0) --------------------------------------------------------
int CameraMgr_InitConsoleVars()
{
  ConsoleVar_Init(&dword_65A5A7F0, g_pILTClient, "CameraMgrPosInterpTime", 0, 1.0);
  ConsoleVar_Init(&dword_65A5A7FC, g_pILTClient, "CameraMgrPosInterpOffset", 0, 0.0099999998);
  ConsoleVar_Init(dword_65A5A808, g_pILTClient, "CameraMgrRotInterpScale", 0, 5.0);
  ConsoleVar_Init(dword_65A5A814, g_pILTClient, "CameraMgrRotInterpSmoothScale", 0, 7.5);
  return 1;
}
// 65A5A7F0: using guessed type int dword_65A5A7F0;
// 65A5A7FC: using guessed type int dword_65A5A7FC;
// 65A5A808: using guessed type int dword_65A5A808[3];
// 65A5A814: using guessed type int dword_65A5A814[3];

//----- (65715C70) --------------------------------------------------------
char *__thiscall ObjectState_CopyFrom(char *this, int a2)
{
  char *result; // eax
  char *v3; // esi
  int v4; // edi
  int v5; // edx
  char *v6; // esi
  int v7; // edx

  result = this;
  *(float *)this = *(float *)a2;
  *((float *)this + 1) = *(float *)(a2 + 4);
  v3 = this + 44;
  *((float *)this + 2) = *(float *)(a2 + 8);
  v4 = a2 - (_DWORD)this;
  *((float *)this + 3) = *(float *)(a2 + 12);
  *((float *)this + 4) = *(float *)(a2 + 16);
  *((float *)this + 5) = *(float *)(a2 + 20);
  *((float *)this + 6) = *(float *)(a2 + 24);
  *((float *)this + 7) = *(float *)(a2 + 28);
  *((float *)this + 8) = *(float *)(a2 + 32);
  *((float *)this + 9) = *(float *)(a2 + 36);
  *((_DWORD *)this + 10) = *(_DWORD *)(a2 + 40);
  v5 = 64;
  do
  {
    *v3 = v3[v4];
    ++v3;
    --v5;
  }
  while ( v5 );
  *((_DWORD *)this + 27) = *(_DWORD *)(a2 + 108);
  v6 = this + 112;
  v7 = 64;
  do
  {
    *v6 = v6[v4];
    ++v6;
    --v7;
  }
  while ( v7 );
  *((float *)this + 44) = *(float *)(a2 + 176);
  *((float *)this + 45) = *(float *)(a2 + 180);
  *((float *)this + 46) = *(float *)(a2 + 184);
  *((float *)this + 47) = *(float *)(a2 + 188);
  *((float *)this + 48) = *(float *)(a2 + 192);
  *(this + 196) = *(_BYTE *)(a2 + 196);
  *((_DWORD *)this + 50) = *(_DWORD *)(a2 + 200);
  *((_DWORD *)this + 51) = *(_DWORD *)(a2 + 204);
  *((_DWORD *)this + 52) = *(_DWORD *)(a2 + 208);
  *((_DWORD *)this + 53) = *(_DWORD *)(a2 + 212);
  *((float *)this + 54) = *(float *)(a2 + 216);
  *((float *)this + 55) = *(float *)(a2 + 220);
  *((float *)this + 56) = *(float *)(a2 + 224);
  *((float *)this + 57) = *(float *)(a2 + 228);
  *((float *)this + 58) = *(float *)(a2 + 232);
  *((float *)this + 59) = *(float *)(a2 + 236);
  return result;
}

//----- (65715DC0) --------------------------------------------------------
void __thiscall ObjectList_UnlinkItem(_DWORD *this, int a2, _DWORD *a3)
{
  int v3; // eax
  int v4; // eax
  int v5; // eax
  void *v6; // eax

  if ( a3 )
  {
    v3 = *(this + a2);
    if ( a3 == *(_DWORD **)(v3 + 504) )
      *(_DWORD *)(v3 + 504) = a3[71];
    v4 = a3[70];
    if ( v4 )
      *(_DWORD *)(v4 + 284) = a3[71];
    v5 = a3[71];
    if ( v5 )
      *(_DWORD *)(v5 + 280) = a3[70];
    v6 = (void *)a3[66];
    a3[71] = 0;
    a3[70] = 0;
    if ( v6 )
      Operator_Delete2(v6);
    Operator_Delete3(a3);
  }
}

//----- (65715E80) --------------------------------------------------------
bool __cdecl Object_CheckValidEntity(int a1)
{
  int v1; // esi

  v1 = a1;
  if ( !a1 )
    return 0;
  if ( a1 == *(_DWORD *)dword_65ABF704 )
    return 0;
  a1 = 0;
  (*(void (__thiscall **)(int, int, int, int *))(*(_DWORD *)dword_65A5A6E8 + 76))(dword_65A5A6E8, v1, 2, &a1);
  if ( (a1 & 0x98) != 0 )
    return 0;
  a1 = 0;
  (*(void (__thiscall **)(int, int, _DWORD, int *))(*(_DWORD *)dword_65A5A6E8 + 76))(dword_65A5A6E8, v1, 0, &a1);
  return (a1 & 0x2000) != 0;
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;

//----- (65715EE0) --------------------------------------------------------
int __thiscall AttachmentSlot_SetPosition(_DWORD *this, int a2, float *a3)
{
  int result; // eax
  float *v4; // eax

  result = *(this + a2);
  if ( result )
  {
    if ( *(_DWORD *)(result + 4) )
    {
      v4 = (float *)(result + 8);
      *v4 = *a3;
      v4[1] = a3[1];
      v4[2] = a3[2];
      return (*(int (__thiscall **)(int, _DWORD, float *, int))(*(_DWORD *)g_pILTClient + 188))(
               g_pILTClient,
               *(_DWORD *)(*(this + a2) + 4),
               a3,
               1);
    }
  }
  return result;
}

//----- (65715F30) --------------------------------------------------------
int __thiscall AttachmentSlot_SetRotation(_DWORD *this, int a2, float *a3)
{
  int result; // eax
  float *v4; // eax

  result = *(this + a2);
  if ( result )
  {
    if ( *(_DWORD *)(result + 4) )
    {
      v4 = (float *)(result + 32);
      *v4 = *a3;
      v4[1] = a3[1];
      v4[2] = a3[2];
      v4[3] = a3[3];
      return (*(int (__cdecl **)(_DWORD, float *))(g_pILTClient + 552))(*(_DWORD *)(*(this + a2) + 4), a3);
    }
  }
  return result;
}

//----- (65715F80) --------------------------------------------------------
float *__thiscall AttachmentSlot_SetScale(_DWORD *this, int a2, float *a3)
{
  float *result; // eax

  result = (float *)*(this + a2);
  if ( result )
  {
    result[46] = *a3;
    result[47] = a3[1];
    result[48] = a3[2];
  }
  return result;
}

//----- (65715FB0) --------------------------------------------------------
int __thiscall AttachmentSlot_SetAnimation(_DWORD *this, int a2, _DWORD *a3, int a4)
{
  int result; // eax
  int v5; // ebx
  int v6; // eax
  int v7; // edi
  _DWORD *v8; // eax

  result = *(this + a2);
  if ( result && *(_DWORD *)(result + 4) )
  {
    v5 = a4;
    *(_BYTE *)(result + 204) = a4;
    v6 = *(this + a2);
    if ( (_BYTE)a4 )
    {
      v7 = *(_DWORD *)&dword_65A55604;
      v8 = (_DWORD *)(v6 + 208);
      v8[2] = *(_DWORD *)&Data;
      v5 = a4;
      *v8 = 0;
      v8[1] = 0;
    }
    else
    {
      v8 = (_DWORD *)(v6 + 208);
      *v8 = *a3;
      v8[1] = a3[1];
      v8[2] = a3[2];
      v7 = a3[3];
    }
    v8[3] = v7;
    return (*(int (__cdecl **)(_DWORD, int, _DWORD, _DWORD, _DWORD, _DWORD))(g_pILTClient + 596))(
             *(_DWORD *)(*(this + a2) + 4),
             v5,
             *a3,
             a3[1],
             a3[2],
             a3[3]);
  }
  return result;
}

//----- (65716060) --------------------------------------------------------
int __thiscall AttachmentSlot_SetColor(_DWORD *this, int a2, float *a3)
{
  int result; // eax
  float *v4; // eax

  result = *(this + a2);
  if ( result )
  {
    if ( *(_DWORD *)(result + 4) )
    {
      v4 = (float *)(result + 224);
      *v4 = *a3;
      v4[1] = a3[1];
      v4[2] = a3[2];
      return (*(int (__cdecl **)(_DWORD, float *))(g_pILTClient + 604))(*(_DWORD *)(*(this + a2) + 4), a3);
    }
  }
  return result;
}

//----- (657160B0) --------------------------------------------------------
int __thiscall AttachmentSlot_SetColorRGB(_DWORD *this, int a2, float *a3)
{
  int result; // eax

  result = *(this + a2);
  if ( result )
  {
    if ( *(_DWORD *)(result + 4) )
    {
      *(float *)(result + 236) = *a3;
      *(float *)(result + 240) = a3[1];
      *(float *)(result + 244) = a3[2];
    }
  }
  return result;
}

//----- (65716300) --------------------------------------------------------
float *__thiscall Matrix_FromEulerAngles(float *this, float a2, float a3, float a4)
{
  double v5; // st6
  float v7[16]; // [esp+0h] [ebp-5Ch] BYREF
  double v8; // [esp+40h] [ebp-1Ch]
  float v9; // [esp+48h] [ebp-14h]
  double v10; // [esp+4Ch] [ebp-10h]
  float v11; // [esp+54h] [ebp-8h]
  float v12; // [esp+58h] [ebp-4h]
  float v13; // [esp+64h] [ebp+8h]
  float v14; // [esp+64h] [ebp+8h]
  float v15; // [esp+68h] [ebp+Ch]
  float v16; // [esp+68h] [ebp+Ch]
  float v17; // [esp+68h] [ebp+Ch]

  v12 = cos(a3);
  v11 = v12;
  v15 = sin(a3);
  *((float *)&v10 + 1) = v15;
  v16 = cos(a2);
  v9 = v16;
  v17 = sin(a2);
  v13 = cos(a4);
  v12 = v13;
  v14 = sin(a4);
  v8 = v14 * v17;
  v7[0] = v8 * *((float *)&v10 + 1) + v12 * v11;
  v5 = *((float *)&v10 + 1);
  v10 = v17 * v12;
  v7[1] = v10 * v5 - v14 * v11;
  v7[2] = v9 * v5;
  v7[3] = 0.0;
  v7[4] = v14 * v9;
  v7[5] = v12 * v9;
  v7[6] = -v17;
  v7[7] = 0.0;
  v7[8] = v11 * v8 - v12 * v5;
  v7[9] = v5 * v14 + v11 * v10;
  v7[10] = v9 * v11;
  v7[11] = 0.0;
  v7[14] = 0.0;
  v7[13] = 0.0;
  v7[12] = 0.0;
  v7[15] = 1.0;
  Matrix_ToQuaternion(this, v7);
  return this;
}

//----- (65716440) --------------------------------------------------------
float *AttachmentData_Allocate()
{
  float *v0; // esi
  float *v2; // eax

  v2 = (float *)operator new(0x208u);
  if ( !v2 )
    return 0;
  v0 = v2;
  ObjectTransform_Init(v2 + 2);
  ObjectTransform_Init(v0 + 62);
  v0[122] = 0.0;
  v0[123] = 0.0;
  v0[124] = 0.0;
  v0[125] = 0.0;
  v0[1] = 0.0;
  v0[126] = 0.0;
  v0[127] = 0.0;
  v0[128] = 0.0;
  v0[129] = 0.0;
  *(_DWORD *)v0 = 5;
  return v0;
}

//----- (65716460) --------------------------------------------------------
float *ObjectState_Alloc()
{
  float *v0; // edi
  float *v1; // esi
  float *v3; // eax

  v3 = (float *)operator new(0x120u);
  if ( !v3 )
    return 0;
  v0 = v3;
  v1 = v3 + 1;
  ObjectTransform_Init(v3 + 1);
  v1[66] = 0.0;
  v1[67] = 0.0;
  *((_BYTE *)v1 + 240) = 0;
  v1[61] = 0.0;
  v1[68] = 0.0;
  *((_BYTE *)v1 + 248) = 0;
  v1[63] = 0.0;
  v1[64] = 0.0;
  v1[65] = 0.0;
  *v0 = 0.0;
  v0[70] = 0.0;
  v0[71] = 0.0;
  return v0;
}

//----- (65716490) --------------------------------------------------------
void __usercall Object_UpdateTransformLarge(float *a1@<eax>, float *a2@<esi>)
{
  float v2; // ecx
  double v3; // st7
  float v4; // edx
  double v5; // st6
  char v6; // bl
  double v7; // st4
  double v8; // st3
  double v9; // rt2
  double v10; // rt0
  double v11; // st3
  double v12; // st2
  double v13; // st3
  double v14; // st7
  double v15; // st7
  double v16; // st6
  float v17; // [esp+8h] [ebp-B8h] BYREF
  float v18; // [esp+Ch] [ebp-B4h]
  float v19; // [esp+10h] [ebp-B0h]
  float v20; // [esp+14h] [ebp-ACh]
  float v21; // [esp+18h] [ebp-A8h]
  float v22; // [esp+1Ch] [ebp-A4h]
  float v23; // [esp+20h] [ebp-A0h]
  float v24; // [esp+24h] [ebp-9Ch]
  float v25; // [esp+28h] [ebp-98h]
  int v26; // [esp+2Ch] [ebp-94h]
  bool (__cdecl *v27)(int); // [esp+30h] [ebp-90h]
  float v28; // [esp+34h] [ebp-8Ch]
  int v29; // [esp+38h] [ebp-88h]
  int v30; // [esp+3Ch] [ebp-84h]
  int v31; // [esp+40h] [ebp-80h]
  float v32; // [esp+44h] [ebp-7Ch] BYREF
  float v33; // [esp+48h] [ebp-78h]
  float v34; // [esp+4Ch] [ebp-74h]
  float v35; // [esp+50h] [ebp-70h]
  float v36; // [esp+54h] [ebp-6Ch]
  float v37; // [esp+58h] [ebp-68h]
  float v38; // [esp+5Ch] [ebp-64h]
  float v39; // [esp+60h] [ebp-60h]
  float v40; // [esp+64h] [ebp-5Ch]
  float v41; // [esp+68h] [ebp-58h]
  int v42; // [esp+6Ch] [ebp-54h]
  int v43; // [esp+70h] [ebp-50h]
  int v44; // [esp+74h] [ebp-4Ch]
  float v45; // [esp+78h] [ebp-48h] BYREF
  float v46; // [esp+7Ch] [ebp-44h]
  float v47; // [esp+80h] [ebp-40h]
  float v48; // [esp+84h] [ebp-3Ch] BYREF
  float v49; // [esp+88h] [ebp-38h]
  float v50; // [esp+8Ch] [ebp-34h]
  float v51; // [esp+90h] [ebp-30h]
  float v52; // [esp+94h] [ebp-2Ch]
  float v53; // [esp+98h] [ebp-28h]
  float v54; // [esp+9Ch] [ebp-24h]
  float v55; // [esp+A0h] [ebp-20h]
  float v56; // [esp+A4h] [ebp-1Ch]
  float v57; // [esp+A8h] [ebp-18h]
  double v58; // [esp+ACh] [ebp-14h]
  float v59; // [esp+B4h] [ebp-Ch]
  double v60; // [esp+B8h] [ebp-8h]

  v2 = a2[1];
  v3 = *a1 * a1[1];
  v4 = a2[2];
  v5 = a1[3] * a1[2];
  v6 = 0;
  v54 = (v3 - v5) * 2.0;
  v7 = a1[2] * a1[2];
  v8 = *a1 * *a1;
  v55 = 1.0 - (v8 + v7) * 2.0;
  v58 = a1[2] * a1[1];
  v60 = *a1 * a1[3];
  v56 = (v60 + v58) * 2.0;
  v9 = a1[1] * a1[1];
  v45 = 1.0 - (v7 + v9) * 2.0;
  v10 = v8;
  v46 = (v3 + v5) * 2.0;
  v11 = *a1 * a1[2];
  v12 = a1[3] * a1[1];
  v59 = *a2;
  v29 = 0;
  v28 = 0.0;
  v31 = 0;
  v30 = 0;
  v47 = (v11 - v12) * 2.0;
  v51 = (v11 + v12) * 2.0;
  v13 = v58 - v60;
  v60 = COERCE_DOUBLE(__PAIR64__(LODWORD(v4), LODWORD(v2)));
  v52 = v13 * 2.0;
  v53 = 1.0 - (v10 + v9) * 2.0;
  v23 = 0.0;
  v24 = 0.0;
  v25 = 0.0;
  v32 = 0.0;
  v33 = 0.0;
  v34 = 0.0;
  v35 = 0.0;
  v36 = 0.0;
  v39 = 0.0;
  v37 = 0.0;
  v42 = 0;
  v38 = 0.0;
  v41 = NAN;
  v40 = NAN;
  v43 = -1;
  v57 = v54 * 10.0;
  v26 = 7;
  v27 = CameraVars_Init;
  *(float *)&v58 = v55 * 10.0;
  *((float *)&v58 + 1) = 10.0 * v56;
  v48 = v57 + v59;
  v49 = v2 + *(float *)&v58;
  v50 = v4 + *((float *)&v58 + 1);
  v17 = v59;
  v18 = v2;
  v19 = v4;
  v20 = v48;
  v21 = v49;
  v22 = v50;
  if ( (*(unsigned __int8 (__cdecl **)(float *, float *))(g_pILTClient + 100))(&v17, &v32) )
  {
    v57 = v32 - v59;
    *(float *)&v58 = v33 - *(float *)&v60;
    *((float *)&v58 + 1) = v34 - *((float *)&v60 + 1);
    *((float *)&v58 + 1) = v57 * v57 + *(float *)&v58 * *(float *)&v58 + *((float *)&v58 + 1) * *((float *)&v58 + 1);
    *((float *)&v58 + 1) = sqrt(*((float *)&v58 + 1));
    v6 = 1;
    v14 = 10.0;
    *((float *)&v58 + 1) = 10.0 - *((float *)&v58 + 1);
    *((float *)&v58 + 1) = -*((float *)&v58 + 1);
    v57 = *((float *)&v58 + 1) * v54;
    *(float *)&v58 = v55 * *((float *)&v58 + 1);
    *((float *)&v58 + 1) = *((float *)&v58 + 1) * v56;
    v59 = v57 + v59;
    *(float *)&v60 = *(float *)&v58 + *(float *)&v60;
    *((float *)&v60 + 1) = *((float *)&v58 + 1) + *((float *)&v60 + 1);
  }
  else
  {
    v57 = v54 * -10.0;
    *(float *)&v58 = v55 * -10.0;
    *((float *)&v58 + 1) = -10.0 * v56;
    v48 = v57 + v59;
    v49 = *(float *)&v58 + *(float *)&v60;
    v50 = *((float *)&v58 + 1) + *((float *)&v60 + 1);
    v17 = v59;
    v18 = *(float *)&v60;
    v19 = *((float *)&v60 + 1);
    v20 = v48;
    v21 = v49;
    v22 = v50;
    if ( (*(unsigned __int8 (__cdecl **)(float *, float *))(g_pILTClient + 100))(&v17, &v32) )
    {
      v57 = v32 - v59;
      *(float *)&v58 = v33 - *(float *)&v60;
      *((float *)&v58 + 1) = v34 - *((float *)&v60 + 1);
      *((float *)&v58 + 1) = v57 * v57 + *(float *)&v58 * *(float *)&v58 + *((float *)&v58 + 1) * *((float *)&v58 + 1);
      *((float *)&v58 + 1) = sqrt(*((float *)&v58 + 1));
      v6 = 1;
      v14 = 10.0;
      *((float *)&v58 + 1) = 10.0 - *((float *)&v58 + 1);
      v57 = v54 * *((float *)&v58 + 1);
      *(float *)&v58 = v55 * *((float *)&v58 + 1);
      *((float *)&v58 + 1) = *((float *)&v58 + 1) * v56;
      v59 = v57 + v59;
      *(float *)&v60 = *(float *)&v58 + *(float *)&v60;
      *((float *)&v60 + 1) = *((float *)&v58 + 1) + *((float *)&v60 + 1);
    }
    else
    {
      v14 = 10.0;
    }
  }
  v54 = v51 * v14;
  v55 = v52 * v14;
  v56 = v14 * v53;
  v48 = v54 + v59;
  v49 = v55 + *(float *)&v60;
  v50 = v56 + *((float *)&v60 + 1);
  v17 = v59;
  v18 = *(float *)&v60;
  v19 = *((float *)&v60 + 1);
  v20 = v48;
  v21 = v49;
  v22 = v50;
  if ( (*(unsigned __int8 (__cdecl **)(float *, float *))(g_pILTClient + 100))(&v17, &v32) )
  {
    v54 = v32 - v59;
    v55 = v33 - *(float *)&v60;
    v56 = v34 - *((float *)&v60 + 1);
    *((float *)&v58 + 1) = v54 * v54 + v55 * v55 + v56 * v56;
    *((float *)&v58 + 1) = sqrt(*((float *)&v58 + 1));
    v6 = 1;
    v15 = 10.0;
    *((float *)&v58 + 1) = 10.0 - *((float *)&v58 + 1);
    *((float *)&v58 + 1) = -*((float *)&v58 + 1);
    v54 = *((float *)&v58 + 1) * v51;
    v55 = v52 * *((float *)&v58 + 1);
    v56 = *((float *)&v58 + 1) * v53;
    v59 = v54 + v59;
    *(float *)&v60 = v55 + *(float *)&v60;
    *((float *)&v60 + 1) = v56 + *((float *)&v60 + 1);
  }
  else
  {
    v54 = v51 * -10.0;
    v55 = v52 * -10.0;
    v56 = -10.0 * v53;
    v48 = v54 + v59;
    v49 = v55 + *(float *)&v60;
    v50 = v56 + *((float *)&v60 + 1);
    v17 = v59;
    v18 = *(float *)&v60;
    v19 = *((float *)&v60 + 1);
    v20 = v48;
    v21 = v49;
    v22 = v50;
    if ( (*(unsigned __int8 (__cdecl **)(float *, float *))(g_pILTClient + 100))(&v17, &v32) )
    {
      v54 = v32 - v59;
      v55 = v33 - *(float *)&v60;
      v56 = v34 - *((float *)&v60 + 1);
      *((float *)&v58 + 1) = v54 * v54 + v55 * v55 + v56 * v56;
      *((float *)&v58 + 1) = sqrt(*((float *)&v58 + 1));
      v15 = 10.0;
      *((float *)&v58 + 1) = 10.0 - *((float *)&v58 + 1);
      if ( *((float *)&v58 + 1) <= 1.0 )
      {
        v16 = *((float *)&v58 + 1);
      }
      else
      {
        *((float *)&v58 + 1) = 1.0;
        v16 = (float)1.0;
      }
      v6 = 1;
      v54 = v51 * v16;
      v55 = v52 * v16;
      v56 = v16 * v53;
      v59 = v54 + v59;
      *(float *)&v60 = v55 + *(float *)&v60;
      *((float *)&v60 + 1) = v56 + *((float *)&v60 + 1);
    }
    else
    {
      v15 = 10.0;
    }
  }
  v51 = v45 * v15;
  HIBYTE(v44) = 0;
  v52 = v46 * v15;
  v53 = v15 * v47;
  v48 = v51 + v59;
  v49 = v52 + *(float *)&v60;
  v50 = v53 + *((float *)&v60 + 1);
  v17 = v59;
  v18 = *(float *)&v60;
  v19 = *((float *)&v60 + 1);
  v20 = v48;
  v21 = v49;
  v22 = v50;
  if ( (*(unsigned __int8 (__cdecl **)(float *, float *))(g_pILTClient + 100))(&v17, &v32) )
  {
    v54 = v32;
    v55 = v33;
    v56 = v34;
    v51 = v32 - v59;
    v52 = v33 - *(float *)&v60;
    v53 = v34 - *((float *)&v60 + 1);
    *((float *)&v58 + 1) = v51 * v51 + v52 * v52 + v53 * v53;
    *((float *)&v58 + 1) = sqrt(*((float *)&v58 + 1));
    v6 = 1;
    HIBYTE(v44) = 1;
    *((float *)&v58 + 1) = 10.0 - *((float *)&v58 + 1);
    *((float *)&v58 + 1) = -*((float *)&v58 + 1);
    v51 = *((float *)&v58 + 1) * v45;
    v52 = v46 * *((float *)&v58 + 1);
    v53 = *((float *)&v58 + 1) * v47;
    v59 = v51 + v59;
    *(float *)&v60 = v52 + *(float *)&v60;
    *((float *)&v60 + 1) = v53 + *((float *)&v60 + 1);
  }
  v51 = v45 * -10.0;
  v52 = v46 * -10.0;
  v53 = -10.0 * v47;
  v48 = v51 + v59;
  v49 = v52 + *(float *)&v60;
  v50 = v53 + *((float *)&v60 + 1);
  v17 = v59;
  v18 = *(float *)&v60;
  v19 = *((float *)&v60 + 1);
  v20 = v48;
  v21 = v49;
  v22 = v50;
  if ( (*(unsigned __int8 (__cdecl **)(float *, float *))(g_pILTClient + 100))(&v17, &v32) )
  {
    if ( HIBYTE(v44) )
    {
      v45 = v54 - v32;
      v46 = v55 - v33;
      v47 = v56 - v34;
      v48 = v45;
      v49 = v46;
      v50 = v47;
      *((float *)&v58 + 1) = v45 * v45 + v46 * v46 + v47 * v47;
      *((float *)&v58 + 1) = sqrt(*((float *)&v58 + 1));
      *((float *)&v58 + 1) = *((float *)&v58 + 1) * 0.5;
      Vec3_ScaleToLength(&v48, *((float *)&v58 + 1));
      v45 = v32 + v48;
      v46 = v49 + v33;
      v47 = v50 + v34;
      v59 = v45;
      *(float *)&v60 = v46;
      *((float *)&v60 + 1) = v47;
    }
    else
    {
      v51 = v32 - v59;
      v52 = v33 - *(float *)&v60;
      v53 = v34 - *((float *)&v60 + 1);
      *((float *)&v58 + 1) = v51 * v51 + v52 * v52 + v53 * v53;
      *((float *)&v58 + 1) = sqrt(*((float *)&v58 + 1));
      *((float *)&v58 + 1) = 10.0 - *((float *)&v58 + 1);
      v51 = v45 * *((float *)&v58 + 1);
      v52 = v46 * *((float *)&v58 + 1);
      v53 = *((float *)&v58 + 1) * v47;
      v48 = v51;
      v49 = v52;
      v50 = v53;
      v59 = v51 + v59;
      *(float *)&v60 = v52 + *(float *)&v60;
      *((float *)&v60 + 1) = v53 + *((float *)&v60 + 1);
    }
  }
  else if ( !v6 )
  {
    goto LABEL_23;
  }
  v17 = *a2;
  v18 = a2[1];
  v19 = a2[2];
  v20 = v59;
  v21 = *(float *)&v60;
  v22 = *((float *)&v60 + 1);
  if ( (*(unsigned __int8 (__cdecl **)(float *, float *))(g_pILTClient + 100))(&v17, &v32) )
  {
    (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 152))(
      g_pILTClient,
      *(_DWORD *)dword_65ABF704,
      &v45);
    v46 = v46 + 40.0;
    v51 = v45 - v32;
    v52 = v46 - v33;
    v53 = v47 - v34;
    v48 = v51;
    v49 = v52;
    v50 = v53;
    Vec3_ScaleToLength(&v48, 10.0);
    v45 = v32 + v48;
    v46 = v49 + v33;
    v47 = v50 + v34;
    v59 = v45;
    *(float *)&v60 = v46;
    *((float *)&v60 + 1) = v47;
  }
LABEL_23:
  *a2 = v59;
  *(double *)(a2 + 1) = v60;
}

//----- (657171B0) --------------------------------------------------------
int __thiscall AttachmentData_CopyFrom(int this, int a2)
{
  ObjectState_CopyFrom((char *)this, a2);
  *(_BYTE *)(this + 240) = *(_BYTE *)(a2 + 240);
  *(_DWORD *)(this + 244) = *(_DWORD *)(a2 + 244);
  *(_BYTE *)(this + 248) = *(_BYTE *)(a2 + 248);
  *(_DWORD *)(this + 252) = *(_DWORD *)(a2 + 252);
  *(_DWORD *)(this + 256) = *(_DWORD *)(a2 + 256);
  *(_DWORD *)(this + 260) = *(_DWORD *)(a2 + 260);
  *(float *)(this + 264) = *(float *)(a2 + 264);
  *(float *)(this + 268) = *(float *)(a2 + 268);
  *(float *)(this + 272) = *(float *)(a2 + 272);
  return this;
}

//----- (65717240) --------------------------------------------------------
void __thiscall AttachmentModifier_ProcessList(_DWORD *this, int a2)
{
  int v2; // esi
  int v3; // ebx
  bool v4; // zf
  int v5; // edi
  _DWORD *v6; // eax
  int (__cdecl *v7)(int, int); // eax
  float v8; // [esp+4h] [ebp-50h]
  float v9; // [esp+8h] [ebp-4Ch]
  float v10[4]; // [esp+18h] [ebp-3Ch] BYREF
  float v11; // [esp+28h] [ebp-2Ch] BYREF
  float v12; // [esp+2Ch] [ebp-28h]
  float v13; // [esp+30h] [ebp-24h]
  float v14; // [esp+34h] [ebp-20h]
  float v15; // [esp+38h] [ebp-1Ch] BYREF
  float v16; // [esp+3Ch] [ebp-18h]
  float v17; // [esp+40h] [ebp-14h]
  float v18; // [esp+44h] [ebp-10h]
  float v19; // [esp+48h] [ebp-Ch]
  float v20; // [esp+4Ch] [ebp-8h]
  _DWORD *v21; // [esp+50h] [ebp-4h]

  v2 = a2;
  v3 = *(this + a2);
  v4 = *(_DWORD *)(v3 + 504) == 0;
  v21 = this;
  if ( !v4 )
  {
    v5 = *(_DWORD *)(v3 + 504);
    v20 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
    while ( v5 )
    {
      if ( (0.0 == *(float *)(v5 + 268) || *(float *)v5 + *(float *)(v5 + 268) >= v20)
        && ((v7 = *(int (__cdecl **)(int, int))(v5 + 260)) == 0 || v7(v2, v5)) )
      {
        if ( (*(_BYTE *)(v5 + 248) & 8) != 0 )
        {
          *(float *)(v3 + 248) = *(float *)(v5 + 4) + *(float *)(v3 + 248);
          *(float *)(v3 + 252) = *(float *)(v5 + 8) + *(float *)(v3 + 252);
          *(float *)(v3 + 256) = *(float *)(v5 + 12) + *(float *)(v3 + 256);
        }
        if ( (*(_BYTE *)(v5 + 248) & 0x10) != 0 )
        {
          v19 = *(float *)(v5 + 24) * 0.01745329238474369;
          v9 = v19;
          v19 = *(float *)(v5 + 20) * 0.01745329238474369;
          v8 = v19;
          v19 = 0.01745329238474369 * *(float *)(v5 + 16);
          Matrix_FromEulerAngles(v10, v19, v8, v9);
          v15 = 0.0;
          v16 = 0.0;
          v17 = 0.0;
          v18 = 1.0;
          Quaternion_Multiply(&v15, (float *)(v3 + 272), v10);
          *(float *)(v3 + 272) = v15;
          *(float *)(v3 + 276) = v16;
          *(float *)(v3 + 280) = v17;
          *(float *)(v3 + 284) = v18;
        }
        if ( (*(_BYTE *)(v5 + 248) & 0x20) != 0 )
        {
          v11 = 0.0;
          v12 = 0.0;
          v13 = 0.0;
          v14 = 1.0;
          Quaternion_Multiply(&v11, (float *)(v3 + 272), (float *)(v5 + 28));
          *(float *)(v3 + 272) = v11;
          *(float *)(v3 + 276) = v12;
          *(float *)(v3 + 280) = v13;
          *(float *)(v3 + 284) = v14;
        }
        if ( (*(_DWORD *)(v5 + 248) & 0x100) != 0 )
          *(float *)(v3 + 436) = *(float *)(v5 + 192) + *(float *)(v3 + 436);
        if ( (*(_DWORD *)(v5 + 248) & 0x200) != 0 )
          *(float *)(v3 + 440) = *(float *)(v5 + 196) + *(float *)(v3 + 440);
        if ( (*(_DWORD *)(v5 + 248) & 0x400) != 0 )
        {
          *(_BYTE *)(v3 + 444) = 0;
          *(_DWORD *)(v3 + 448) += *(_DWORD *)(v5 + 204);
          *(_DWORD *)(v3 + 452) += *(_DWORD *)(v5 + 208);
          *(_DWORD *)(v3 + 456) += *(_DWORD *)(v5 + 212);
          *(_DWORD *)(v3 + 460) += *(_DWORD *)(v5 + 216);
        }
        if ( (*(_DWORD *)(v5 + 248) & 0x800) != 0 )
        {
          if ( *(float *)(v5 + 220) > (double)*(float *)(v3 + 464) )
            *(float *)(v3 + 464) = *(float *)(v5 + 220);
          if ( *(float *)(v5 + 224) > (double)*(float *)(v3 + 468) )
            *(float *)(v3 + 468) = *(float *)(v5 + 224);
          if ( *(float *)(v5 + 228) > (double)*(float *)(v3 + 472) )
            *(float *)(v3 + 472) = *(float *)(v5 + 228);
        }
        if ( (*(_DWORD *)(v5 + 248) & 0x1000) != 0 )
        {
          if ( *(float *)(v5 + 232) < (double)*(float *)(v3 + 476) )
            *(float *)(v3 + 476) = *(float *)(v5 + 232);
          if ( *(float *)(v5 + 236) < (double)*(float *)(v3 + 480) )
            *(float *)(v3 + 480) = *(float *)(v5 + 236);
          if ( *(float *)(v5 + 240) < (double)*(float *)(v3 + 484) )
            *(float *)(v3 + 484) = *(float *)(v5 + 240);
        }
        if ( (*(_DWORD *)(v5 + 248) & 0x2000) != 0 )
          Object_UpdateTransformLarge((float *)(v3 + 272), (float *)(v3 + 248));
        v5 = *(_DWORD *)(v5 + 284);
        v2 = a2;
      }
      else
      {
        v6 = (_DWORD *)v5;
        v5 = *(_DWORD *)(v5 + 284);
        ObjectList_UnlinkItem(v21, v2, v6);
      }
    }
  }
}

//----- (65717570) --------------------------------------------------------
double __userpurge Camera_UpdatePositionConstraints@<st0>(
        int a1@<ecx>,
        int a2@<edi>,
        double a3@<st0>,
        double st6_0@<st1>,
        double a5@<st2>,
        int a4)
{
  int v6; // esi
  int v7; // eax
  int *v8; // edi
  int v9; // eax
  int v10; // ecx
  float *v11; // eax
  float *UpVector; // eax
  float *ForwardVector; // eax
  bool v14; // zf
  double v15; // st5
  double v16; // st4
  double v17; // st3
  double v18; // st3
  int v19; // ecx
  double v20; // st2
  double v21; // st2
  double v22; // st5
  double v23; // st2
  double v24; // rt0
  double v25; // st2
  double v26; // st3
  double v27; // rt1
  double v28; // st2
  double v29; // rtt
  double v30; // st3
  double v31; // st4
  float v32[2]; // [esp+4h] [ebp-80h] BYREF
  float v33; // [esp+Ch] [ebp-78h]
  float v34; // [esp+10h] [ebp-74h]
  float v35; // [esp+14h] [ebp-70h]
  float v36; // [esp+18h] [ebp-6Ch]
  float v37; // [esp+1Ch] [ebp-68h]
  float v38; // [esp+2Ch] [ebp-58h] BYREF
  float v39; // [esp+30h] [ebp-54h]
  float v40; // [esp+34h] [ebp-50h]
  float v41; // [esp+38h] [ebp-4Ch]
  float v42; // [esp+3Ch] [ebp-48h]
  float v43; // [esp+40h] [ebp-44h]
  float v44; // [esp+44h] [ebp-40h]
  float v45; // [esp+48h] [ebp-3Ch]
  float v46; // [esp+4Ch] [ebp-38h]
  float v47; // [esp+50h] [ebp-34h]
  float v48; // [esp+54h] [ebp-30h]
  float v49; // [esp+58h] [ebp-2Ch]
  float v50; // [esp+5Ch] [ebp-28h]
  float v51; // [esp+60h] [ebp-24h]
  float v52; // [esp+64h] [ebp-20h]
  float v53; // [esp+68h] [ebp-1Ch]
  float v54; // [esp+6Ch] [ebp-18h]
  float v55; // [esp+70h] [ebp-14h]
  int v56; // [esp+74h] [ebp-10h] BYREF
  float v57; // [esp+78h] [ebp-Ch]
  float v58; // [esp+7Ch] [ebp-8h]
  float v59; // [esp+80h] [ebp-4h]
  float v60; // [esp+8Ch] [ebp+8h]
  float v61; // [esp+8Ch] [ebp+8h]
  float v62; // [esp+8Ch] [ebp+8h]
  float v63; // [esp+8Ch] [ebp+8h]
  float v64; // [esp+8Ch] [ebp+8h]
  float v65; // [esp+8Ch] [ebp+8h]
  float v66; // [esp+8Ch] [ebp+8h]
  float v67; // [esp+8Ch] [ebp+8h]
  float v68; // [esp+8Ch] [ebp+8h]

  v6 = *(_DWORD *)(a1 + 4 * a4);
  if ( *(_DWORD *)(v6 + 48) )
  {
    v7 = (*(int (__usercall **)@<eax>(int@<ecx>, int, double@<st0>, double@<st1>))(*(_DWORD *)g_pILTClient + 16))(
           g_pILTClient,
           a2,
           a3,
           st6_0);
    v8 = (int *)v7;
    if ( (*(_BYTE *)v6 & 2) != 0
      && *(_BYTE *)(v6 + 52)
      && !(*(int (__thiscall **)(int, _DWORD, int, int *))(*(_DWORD *)v7 + 20))(v7, *(_DWORD *)(v6 + 48), v6 + 52, &v56) )
    {
      v9 = *v8;
      v34 = 0.0;
      v35 = 0.0;
      v36 = 0.0;
      a3 = 1.0;
      v10 = *(_DWORD *)(v6 + 48);
      v37 = 1.0;
      (*(void (__thiscall **)(int *, int, int, float *))(v9 + 28))(v8, v10, v56, v32);
      v53 = v32[0];
      v54 = v32[1];
      a5 = v33;
      v55 = v33;
    }
    else
    {
      (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, *(_DWORD *)(v6 + 48));
    }
    if ( (*(_DWORD *)v6 & 0x700) == 0 )
      goto LABEL_47;
    if ( dword_65A5A800 && dword_65A5A7FC )
      (*(void (__stdcall **)(int))(*(_DWORD *)dword_65A5A800 + 92))(dword_65A5A7FC);
    else
      a5 = 0.0;
    v59 = a5;
    (*(void (__usercall **)(int@<ecx>, double@<st0>))(*(_DWORD *)g_pILTClient + 100))(g_pILTClient, a3);
    v58 = a3;
    v50 = v53 - *(float *)(v6 + 8);
    v51 = v54 - *(float *)(v6 + 12);
    v52 = v55 - *(float *)(v6 + 16);
    v11 = Quaternion_ToForwardVector((float *)(v6 + 32), &v38);
    v47 = *v11;
    v48 = v11[1];
    v49 = v11[2];
    UpVector = Quat_GetUpVector((float *)(v6 + 32), &v38);
    v44 = *UpVector;
    v45 = UpVector[1];
    a3 = UpVector[2];
    v46 = UpVector[2];
    ForwardVector = Quat_GetForwardVector((float *)(v6 + 32), &v38);
    v14 = (*(_DWORD *)v6 & 0x100) == 0;
    v41 = *ForwardVector;
    v42 = ForwardVector[1];
    v43 = ForwardVector[2];
    v15 = v59;
    v16 = v58;
    if ( !v14 )
    {
      v60 = v48 * v51 + v50 * v47 + v49 * v52;
      v17 = v60;
      if ( v60 >= v15 || -v15 >= v17 )
      {
        v19 = dword_65A5A7F4;
        if ( dword_65A5A7F4 && dword_65A5A7F0 )
        {
          (*(void (__stdcall **)(int))(*(_DWORD *)dword_65A5A7F4 + 92))(dword_65A5A7F0);
          v57 = v16;
          v19 = dword_65A5A7F4;
          v16 = v58;
          v17 = v60;
          v15 = v59;
        }
        else
        {
          v57 = 0.0;
        }
        v63 = (v16 - *(float *)(v6 + 488)) / v57;
        if ( v63 > 1.0 )
          v63 = 1.0;
        v38 = v47 * v17;
        v39 = v48 * v17;
        v23 = v17 * v49;
        v18 = 1.0;
        v40 = v23;
        v64 = 1.0 - v63;
        v47 = v38 * v64;
        v48 = v39 * v64;
        v49 = v64 * v40;
        v53 = v53 - v47;
        v54 = v54 - v48;
        v55 = v55 - v49;
LABEL_17:
        if ( (*(_DWORD *)v6 & 0x200) != 0 )
        {
          v61 = v45 * v51 + v44 * v50 + v46 * v52;
          v20 = v61;
          if ( v61 >= v15 || -v15 >= v20 )
          {
            if ( v19 && dword_65A5A7F0 )
            {
              (*(void (__thiscall **)(int, int))(*(_DWORD *)v19 + 92))(v19, dword_65A5A7F0);
              v19 = dword_65A5A7F4;
              v57 = v16;
              v15 = v59;
              v16 = v58;
              v20 = v61;
              v18 = 1.0;
            }
            else
            {
              v57 = 0.0;
            }
            v65 = (v16 - *(float *)(v6 + 492)) / v57;
            v24 = v20;
            v25 = v18;
            v26 = v24;
            if ( v25 < v65 )
              v65 = v25;
            v38 = v44 * v26;
            v39 = v45 * v26;
            v27 = v25;
            v28 = v26 * v46;
            v18 = v27;
            v40 = v28;
            v66 = 1.0 - v65;
            v44 = v38 * v66;
            v45 = v39 * v66;
            v46 = v66 * v40;
            v53 = v53 - v44;
            v54 = v54 - v45;
            v55 = v55 - v46;
          }
          else
          {
            *(float *)(v6 + 492) = v16;
            v19 = dword_65A5A7F4;
          }
        }
        if ( (*(_DWORD *)v6 & 0x400) == 0 )
          goto LABEL_47;
        v62 = v42 * v51 + v41 * v50 + v43 * v52;
        if ( v62 >= v15 )
        {
          v22 = v62;
        }
        else
        {
          v21 = v15;
          v22 = v62;
          if ( -v21 < v62 )
          {
            *(float *)(v6 + 496) = v16;
LABEL_47:
            *(float *)(v6 + 8) = v53;
            *(float *)(v6 + 12) = v54;
            *(float *)(v6 + 16) = v55;
            return a3;
          }
        }
        if ( v19 && dword_65A5A7F0 )
        {
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v19 + 92))(v19, dword_65A5A7F0);
          v57 = v16;
          v22 = v62;
          v16 = v58;
          v18 = 1.0;
        }
        else
        {
          v57 = 0.0;
        }
        v29 = v18;
        v30 = (v16 - *(float *)(v6 + 496)) / v57;
        v31 = v29;
        v67 = v30;
        if ( v29 < v67 )
          v67 = v31;
        v38 = v41 * v22;
        v39 = v42 * v22;
        v40 = v22 * v43;
        v68 = 1.0 - v67;
        v41 = v38 * v68;
        v42 = v39 * v68;
        v43 = v68 * v40;
        v53 = v53 - v41;
        v54 = v54 - v42;
        v55 = v55 - v43;
        goto LABEL_47;
      }
      *(float *)(v6 + 488) = v58;
    }
    v18 = 1.0;
    v19 = dword_65A5A7F4;
    goto LABEL_17;
  }
  return a3;
}
// 65A5A7F0: using guessed type int dword_65A5A7F0;
// 65A5A7F4: using guessed type int dword_65A5A7F4;
// 65A5A7FC: using guessed type int dword_65A5A7FC;
// 65A5A800: using guessed type int dword_65A5A800;

//----- (65717A20) --------------------------------------------------------
void *__thiscall Camera_UpdateRotationFromModel(_DWORD *this, void *a2)
{
  void *result; // eax
  int v3; // esi
  int v4; // eax
  int v5; // edi
  double v6; // st7
  int v7; // ecx
  int v8; // edx
  void (__thiscall *v9)(int, int, const char *, void **); // edx
  _BYTE v10[12]; // [esp+4h] [ebp-48h] BYREF
  float v11; // [esp+10h] [ebp-3Ch]
  float v12; // [esp+14h] [ebp-38h]
  float v13; // [esp+18h] [ebp-34h]
  float v14; // [esp+1Ch] [ebp-30h]
  float v15; // [esp+2Ch] [ebp-20h]
  float v16; // [esp+30h] [ebp-1Ch]
  float v17; // [esp+34h] [ebp-18h]
  float v18; // [esp+38h] [ebp-14h]
  float v19; // [esp+3Ch] [ebp-10h] BYREF
  float v20; // [esp+40h] [ebp-Ch]
  float v21; // [esp+44h] [ebp-8h]
  float v22; // [esp+48h] [ebp-4h]

  result = a2;
  v3 = *(this + (_DWORD)a2);
  if ( *(_DWORD *)(v3 + 48) )
  {
    v4 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 16))(g_pILTClient);
    v19 = 0.0;
    v20 = 0.0;
    v21 = 0.0;
    v5 = v4;
    v22 = 1.0;
    if ( SharedMem_ReadDword_this(g_pPlayerStats, 0x1CEC2u) == 2 || *((_BYTE *)dword_65ABF704 + 888) == 1 )
    {
      v7 = *(_DWORD *)(v3 + 48);
      v8 = *(_DWORD *)v5;
      v11 = 0.0;
      v9 = *(void (__thiscall **)(int, int, const char *, void **))(v8 + 20);
      v12 = 0.0;
      v13 = 0.0;
      v14 = 1.0;
      v9(v5, v7, "Glasses", &a2);
    }
    else
    {
      if ( (*(_BYTE *)v3 & 8) == 0
        || !*(_BYTE *)(v3 + 52)
        || (*(int (__thiscall **)(int, _DWORD, int, void **))(*(_DWORD *)v5 + 20))(
             v5,
             *(_DWORD *)(v3 + 48),
             v3 + 52,
             &a2) )
      {
        if ( !CameraState_IsActive(dword_65ABF724) )
        {
          result = (void *)(*(int (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 148))(
                             g_pILTClient,
                             *(_DWORD *)(v3 + 48),
                             &v19);
LABEL_14:
          *(float *)(v3 + 32) = v19;
          *(float *)(v3 + 36) = v20;
          *(float *)(v3 + 40) = v21;
          *(float *)(v3 + 44) = v22;
          return result;
        }
        result = dword_65ABF724;
        v15 = *((float *)dword_65ABF724 + 1);
        v16 = *((float *)dword_65ABF724 + 2);
        v17 = *((float *)dword_65ABF724 + 3);
        v18 = *((float *)dword_65ABF724 + 4);
        v19 = v15;
        v20 = v16;
        v21 = v17;
        v6 = v18;
LABEL_13:
        v22 = v6;
        goto LABEL_14;
      }
      v11 = 0.0;
      v12 = 0.0;
      v13 = 0.0;
      v14 = 1.0;
    }
    result = (void *)(*(int (__thiscall **)(int, _DWORD, void *, _BYTE *, int))(*(_DWORD *)v5 + 28))(
                       v5,
                       *(_DWORD *)(v3 + 48),
                       a2,
                       v10,
                       1);
    v19 = v11;
    v20 = v12;
    v21 = v13;
    v6 = v14;
    goto LABEL_13;
  }
  return result;
}

//----- (65717BB0) --------------------------------------------------------
int __thiscall AttachmentSlot_CreateFromParams(_DWORD *this, int a2)
{
  int FreeSlot; // edi
  float *v4; // eax
  char v6[52]; // [esp+1Ch] [ebp-24F0h] BYREF
  float v7; // [esp+50h] [ebp-24BCh]
  float v8; // [esp+54h] [ebp-24B8h]
  float v9; // [esp+58h] [ebp-24B4h]
  float v10; // [esp+5Ch] [ebp-24B0h]
  int v11; // [esp+24ECh] [ebp-20h]
  int v12; // [esp+24F0h] [ebp-1Ch]
  int v13; // [esp+24F4h] [ebp-18h]
  int v14; // [esp+24F8h] [ebp-14h]
  int v15; // [esp+2508h] [ebp-4h]

  FreeSlot = AttachmentArray_FindFreeSlot(this);
  v4 = AttachmentData_Allocate();
  *(this + FreeSlot) = v4;
  if ( !v4 )
    return -1;
  v11 = 0;
  v7 = 0.0;
  v12 = 0;
  v8 = 0.0;
  v13 = 0;
  v9 = 0.0;
  v14 = 0;
  v10 = 1.0;
  CharacterState_Init(v6);
  v15 = 0;
  CharacterState_Init(v6);
  *(_WORD *)v6 = 5;
  *(_DWORD *)(*(this + FreeSlot) + 4) = (*(int (__cdecl **)(char *))(g_pILTClient + 540))(v6);
  if ( !*(_DWORD *)(*(this + FreeSlot) + 4) )
  {
    Operator_Delete1((void *)*(this + FreeSlot));
    *(this + FreeSlot) = 0;
    CharacterState_FreeBuffers((int)v6);
    return -1;
  }
  AttachmentSlot_SetDword(this, FreeSlot, *(_DWORD *)(a2 + 240));
  AttachmentSlot_SetPosition(this, FreeSlot, (float *)a2);
  AttachmentSlot_SetRotation(this, FreeSlot, (float *)(a2 + 24));
  EquipSlots_SetSlotInfo(this, FreeSlot, *(_DWORD *)(a2 + 40), (char *)(a2 + 44));
  AttachmentSlot_SetLabel(this, FreeSlot, *(_DWORD *)(a2 + 108), (char *)(a2 + 112));
  AttachmentSlot_SetScale(this, FreeSlot, (float *)(a2 + 176));
  AttachmentSlot_SetAnglesDegrees(this, FreeSlot, *(float *)(a2 + 188), *(float *)(a2 + 192), 1);
  AttachmentSlot_SetAnimation(this, FreeSlot, (_DWORD *)(a2 + 200), *(unsigned __int8 *)(a2 + 196));
  AttachmentSlot_SetColor(this, FreeSlot, (float *)(a2 + 216));
  AttachmentSlot_SetColorRGB(this, FreeSlot, (float *)(a2 + 228));
  AttachmentSlot_SetField512(this, FreeSlot, *(_DWORD *)(a2 + 244));
  AttachmentSlot_SetField516(this, FreeSlot, *(_DWORD *)(a2 + 248));
  CharacterState_FreeBuffers((int)v6);
  return FreeSlot;
}

//----- (65717D90) --------------------------------------------------------
float *__thiscall AnimQueue_AddAnimation(_DWORD *this, int a2, int a3)
{
  int v3; // esi
  float *v4; // edi

  v3 = *(_DWORD *)(*(this + a2) + 504);
  if ( v3 )
  {
    while ( *(_DWORD *)(v3 + 284) )
      v3 = *(_DWORD *)(v3 + 284);
  }
  v4 = ObjectState_Alloc();
  if ( v4 )
  {
    *v4 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
    AttachmentData_CopyFrom((int)(v4 + 1), a3);
    v4[70] = 0.0;
    v4[71] = 0.0;
  }
  if ( v3 )
  {
    *((_DWORD *)v4 + 70) = v3;
    *(_DWORD *)(v3 + 284) = v4;
  }
  else
  {
    *(_DWORD *)(*(this + a2) + 504) = v4;
  }
  return v4;
}

//----- (65717E30) --------------------------------------------------------
float *__userpurge Camera_LookAtTarget@<eax>(int a1@<ecx>, int a2@<edi>, int a3)
{
  int v3; // esi
  int v4; // eax
  int *v5; // edi
  int v6; // eax
  int v7; // ecx
  float *result; // eax
  float v9[10]; // [esp+4h] [ebp-5Ch] BYREF
  float v10[4]; // [esp+2Ch] [ebp-34h] BYREF
  float v11[3]; // [esp+3Ch] [ebp-24h] BYREF
  float v12[3]; // [esp+48h] [ebp-18h] BYREF
  float v13; // [esp+54h] [ebp-Ch]
  float v14; // [esp+58h] [ebp-8h]
  float v15; // [esp+5Ch] [ebp-4h]

  v3 = *(_DWORD *)(a1 + 4 * a3);
  if ( (*(_BYTE *)v3 & 0x40) != 0 )
  {
    v13 = *(float *)(v3 + 184);
    v14 = *(float *)(v3 + 188);
    v15 = *(float *)(v3 + 192);
  }
  else
  {
    v4 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 16))(g_pILTClient, a2);
    v5 = (int *)v4;
    if ( (*(_BYTE *)v3 & 0x20) != 0
      && *(_BYTE *)(v3 + 120)
      && !(*(int (__thiscall **)(int, _DWORD, int, int *))(*(_DWORD *)v4 + 20))(
            v4,
            *(_DWORD *)(v3 + 116),
            v3 + 120,
            &a3) )
    {
      v6 = *v5;
      v9[3] = 0.0;
      v9[4] = 0.0;
      v9[5] = 0.0;
      v7 = *(_DWORD *)(v3 + 116);
      v9[6] = 1.0;
      (*(void (__thiscall **)(int *, int, int, float *))(v6 + 28))(v5, v7, a3, v9);
      v13 = v9[0];
      v14 = v9[1];
      v15 = v9[2];
    }
    else
    {
      (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, *(_DWORD *)(v3 + 116));
    }
  }
  v11[0] = v13 - *(float *)(v3 + 8);
  v11[1] = v14 - *(float *)(v3 + 12);
  v11[2] = v15 - *(float *)(v3 + 16);
  v12[0] = (*(float *)(v3 + 32) * *(float *)(v3 + 36) - *(float *)(v3 + 44) * *(float *)(v3 + 40)) * 2.0;
  v12[1] = 1.0 - (*(float *)(v3 + 40) * *(float *)(v3 + 40) + *(float *)(v3 + 32) * *(float *)(v3 + 32)) * 2.0;
  v12[2] = 2.0 * (*(float *)(v3 + 32) * *(float *)(v3 + 44) + *(float *)(v3 + 40) * *(float *)(v3 + 36));
  result = Transform_ApplyRotation(v10, v11, v12);
  *(float *)(v3 + 32) = *result;
  *(float *)(v3 + 36) = result[1];
  *(float *)(v3 + 40) = result[2];
  *(float *)(v3 + 44) = result[3];
  return result;
}

//----- (65717F90) --------------------------------------------------------
void __usercall CameraMgr_UpdateCamera(_DWORD *this@<ecx>, double a2@<st2>, double a3@<st1>, double a4@<st0>)
{
  _DWORD *v4; // edi
  int v5; // esi
  int v6; // ebx
  int v7; // esi
  double v8; // rt2
  int v9; // eax
  int v10; // eax
  double v11; // st7
  float *ForwardVector; // eax
  float v13; // ecx
  float v14; // edx
  char v15[12]; // [esp+14h] [ebp-160h] BYREF
  float v16[10]; // [esp+20h] [ebp-154h] BYREF
  double v17; // [esp+48h] [ebp-12Ch]
  float v18[15]; // [esp+50h] [ebp-124h] BYREF
  float v19[4]; // [esp+8Ch] [ebp-E8h] BYREF
  int v20[3]; // [esp+9Ch] [ebp-D8h] BYREF
  float v21[3]; // [esp+A8h] [ebp-CCh] BYREF
  float v22; // [esp+B4h] [ebp-C0h] BYREF
  float v23; // [esp+B8h] [ebp-BCh]
  float v24; // [esp+BCh] [ebp-B8h]
  int v25; // [esp+C0h] [ebp-B4h]
  float v26; // [esp+C4h] [ebp-B0h]
  float v27; // [esp+C8h] [ebp-ACh]
  float v28; // [esp+CCh] [ebp-A8h]
  int v29; // [esp+D0h] [ebp-A4h]
  int v30; // [esp+D4h] [ebp-A0h]
  float v31; // [esp+D8h] [ebp-9Ch]
  float v32; // [esp+DCh] [ebp-98h]
  float v33; // [esp+E0h] [ebp-94h]
  float v34; // [esp+E4h] [ebp-90h]
  int v35; // [esp+E8h] [ebp-8Ch]
  int v36; // [esp+ECh] [ebp-88h]
  float v37; // [esp+F0h] [ebp-84h]
  float v38; // [esp+F4h] [ebp-80h]
  float v39; // [esp+F8h] [ebp-7Ch]
  int v40; // [esp+FCh] [ebp-78h] BYREF
  float v41; // [esp+100h] [ebp-74h]
  float v42; // [esp+104h] [ebp-70h]
  float v43; // [esp+108h] [ebp-6Ch]
  float v44; // [esp+10Ch] [ebp-68h]
  float v45; // [esp+110h] [ebp-64h]
  float v46; // [esp+114h] [ebp-60h]
  float v47; // [esp+118h] [ebp-5Ch]
  float v48; // [esp+11Ch] [ebp-58h]
  float v49; // [esp+120h] [ebp-54h]
  float v50; // [esp+124h] [ebp-50h] BYREF
  float v51; // [esp+128h] [ebp-4Ch]
  float v52; // [esp+12Ch] [ebp-48h]
  float v53; // [esp+130h] [ebp-44h] BYREF
  float v54; // [esp+134h] [ebp-40h]
  float v55; // [esp+138h] [ebp-3Ch]
  float v56; // [esp+13Ch] [ebp-38h]
  _DWORD *v57; // [esp+140h] [ebp-34h]
  float v58; // [esp+144h] [ebp-30h] BYREF
  float v59; // [esp+148h] [ebp-2Ch]
  float v60; // [esp+14Ch] [ebp-28h]
  int v61; // [esp+150h] [ebp-24h]
  double v62; // [esp+154h] [ebp-20h]
  float v63; // [esp+15Ch] [ebp-18h] BYREF
  float v64; // [esp+160h] [ebp-14h]
  float v65; // [esp+164h] [ebp-10h]
  float v66; // [esp+168h] [ebp-Ch]
  float v67; // [esp+16Ch] [ebp-8h]
  float v68; // [esp+170h] [ebp-4h]

  v4 = this;
  v5 = 0;
  v57 = this;
  v61 = 0;
  do
  {
    v6 = v4[v5];
    if ( v6 && *(_DWORD *)(v6 + 4) )
    {
      if ( (*(_BYTE *)v6 & 1) != 0 )
        Camera_UpdatePositionConstraints((int)v4, (int)v4, a4, a3, a2, v5);
      if ( (*(_BYTE *)v6 & 4) != 0 )
        Camera_UpdateRotationFromModel(v4, (void *)v5);
      if ( (*(_BYTE *)v6 & 0x50) != 0 )
        Camera_LookAtTarget((int)v4, (int)v4, v5);
      if ( v5 != *((_DWORD *)dword_65ABF700 + 1) )
        goto LABEL_24;
      v7 = *(_DWORD *)dword_65ABF704;
      if ( !*(_DWORD *)dword_65ABF704 )
        return;
      v53 = 0.0;
      v54 = 0.0;
      v55 = 0.0;
      v56 = 1.0;
      (*(void (__thiscall **)(int, int, float *))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, v7, &v63);
      v64 = v64 + 40.0;
      (*(void (__thiscall **)(int, int, float *))(*(_DWORD *)g_pILTClient + 148))(g_pILTClient, v7, &v53);
      v34 = (v54 * v53 - v56 * v55) * 2.0;
      v8 = v53 * v53;
      *(float *)&v35 = 1.0 - (v55 * v55 + v8) * 2.0;
      v62 = v55 * v54;
      v17 = v56 * v53;
      *(float *)&v36 = (v17 + v62) * 2.0;
      *(float *)v20 = v34;
      v20[1] = v35;
      v20[2] = v36;
      v47 = (v53 * v55 + v56 * v54) * 2.0;
      v48 = (v62 - v17) * 2.0;
      a2 = v54 * v54;
      a3 = 1.0;
      v49 = 1.0 - 2.0 * (v8 + a2);
      v58 = v47;
      v59 = v48;
      v60 = v49;
      Vec3_ScaleToLength(&v58, 1.0);
      v66 = v63;
      v68 = v65;
      v9 = *((_DWORD *)dword_65ABF714 + 71);
      v67 = v64;
      if ( !v9 )
      {
        Quat_RotateAroundAxis(&v53, (float *)v20, -0.80110621);
        ForwardVector = Quat_GetForwardVector(&v53, (float *)v15);
        v58 = *ForwardVector;
        v59 = ForwardVector[1];
        v60 = ForwardVector[2];
        Vec3_ScaleToLength(&v58, 1.0);
        *((float *)&v62 + 1) = fabs(-0.8500000238418579);
        *((float *)&v62 + 1) = 1.0 - *((float *)&v62 + 1);
        *((float *)&v62 + 1) = 40.0 - *((float *)&v62 + 1) * 50.0;
        v44 = *((float *)&v62 + 1) * v58;
        a3 = v59 * *((float *)&v62 + 1);
        v45 = a3;
        v46 = *((float *)&v62 + 1) * v60;
        v41 = v63 + v44;
        v42 = v45 + v64;
        v43 = v65 + v46;
        v66 = v41;
        v67 = v42;
        v11 = v43;
        goto LABEL_20;
      }
      v10 = v9 - 1;
      if ( v10 )
      {
        if ( v10 == 1 )
        {
          v66 = v63;
          v67 = v64;
          v11 = v65;
LABEL_20:
          v68 = v11;
        }
      }
      else if ( !(*(int (__thiscall **)(int, _DWORD, const char *, int *))(*(_DWORD *)dword_65A5AA48 + 20))(
                   dword_65A5AA48,
                   *(_DWORD *)(v6 + 48),
                   "Camera",
                   &v40) )
      {
        v16[3] = 0.0;
        v16[4] = 0.0;
        v16[5] = 0.0;
        v16[6] = 1.0;
        if ( !(*(int (__thiscall **)(int, _DWORD, int, float *, int))(*(_DWORD *)dword_65A5AA48 + 28))(
                dword_65A5AA48,
                *(_DWORD *)(v6 + 48),
                v40,
                v16,
                1) )
        {
          v66 = v16[0];
          v67 = v16[1];
          v11 = v16[2];
          goto LABEL_20;
        }
      }
      v22 = 0.0;
      v23 = 0.0;
      v31 = NAN;
      v24 = 0.0;
      v30 = -1;
      *(float *)&v25 = 0.0;
      v33 = NAN;
      v26 = 0.0;
      v27 = 0.0;
      v28 = 0.0;
      v18[6] = 0.0;
      v29 = 0;
      v18[7] = 0.0;
      v32 = 0.0;
      v18[8] = 0.0;
      memset(&v18[11], 0, 16);
      v18[0] = v63;
      v18[1] = v64;
      LODWORD(v18[9]) = 7;
      LODWORD(v18[10]) = Object_CheckValidEntity;
      v18[2] = v65;
      v18[3] = v66;
      v18[4] = v67;
      v18[5] = v68;
      if ( (*(unsigned __int8 (__cdecl **)(float *, float *))(g_pILTClient + 100))(v18, &v22) )
      {
        v50 = v63 - v22;
        v51 = v64 - v23;
        v52 = v65 - v24;
        Vec3_ScaleToLength(&v50, 5.0);
        v37 = v50 + v22;
        v38 = v51 + v23;
        v39 = v52 + v24;
        v66 = v37;
        v67 = v38;
        v68 = v39;
      }
      *(float *)(v6 + 8) = v66;
      *(float *)(v6 + 12) = v67;
      *(float *)(v6 + 16) = v68;
      qmemcpy((void *)(v6 + 248), (const void *)(v6 + 8), 0xF0u);
      AttachmentModifier_ProcessList(v57, v61);
LABEL_24:
      (*(void (__thiscall **)(int, _DWORD, int, int))(*(_DWORD *)g_pILTClient + 188))(
        g_pILTClient,
        *(_DWORD *)(v6 + 4),
        v6 + 248,
        1);
      (*(void (__cdecl **)(_DWORD, int))(g_pILTClient + 552))(*(_DWORD *)(v6 + 4), v6 + 272);
      (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD))(g_pILTClient + 588))(
        *(_DWORD *)(v6 + 4),
        *(float *)(v6 + 436),
        *(float *)(v6 + 440));
      (*(void (__cdecl **)(_DWORD, int))(g_pILTClient + 604))(*(_DWORD *)(v6 + 4), v6 + 464);
      (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(g_pILTClient + 596))(
        *(_DWORD *)(v6 + 4),
        *(unsigned __int8 *)(v6 + 444),
        *(_DWORD *)(v6 + 448),
        *(_DWORD *)(v6 + 452),
        *(_DWORD *)(v6 + 456),
        *(_DWORD *)(v6 + 460));
      v13 = *(float *)(v6 + 252);
      v14 = *(float *)(v6 + 256);
      v21[0] = *(float *)(v6 + 248);
      v21[1] = v13;
      v21[2] = v14;
      SharedMem_WriteVec3(0x3037u, v21);
      v19[0] = *(float *)(v6 + 272);
      v19[1] = *(float *)(v6 + 276);
      v19[2] = *(float *)(v6 + 280);
      a4 = *(float *)(v6 + 284);
      v19[3] = *(float *)(v6 + 284);
      SharedMem_WriteVec4(0x303Au, v19);
      v4 = v57;
      v5 = v61;
    }
    v61 = ++v5;
  }
  while ( v5 < 10 );
}
// 65717FCD: inconsistent fpu stack
// 65A5AA48: using guessed type int dword_65A5AA48;

//----- (65718770) --------------------------------------------------------
void *Allocate20_1()
{
  return operator new(0x14u);
}

//----- (65718780) --------------------------------------------------------
void *Allocate20_2()
{
  return operator new(0x14u);
}

//----- (657187A0) --------------------------------------------------------
void __thiscall Console_ExecVarFloat(const char **this, float a2)
{
  const char *v3; // eax
  double v4; // [esp+0h] [ebp-108h] BYREF

  if ( *(this + 1) )
  {
    v3 = *(this + 2);
    if ( v3 )
    {
      SafeVsnprintf((char *)&v4 + 4, (WorldLoginReturnAddrPacked)256, "%s %f", v3, a2);
      (*((void (__cdecl **)(char *))*(this + 1) + 130))((char *)&v4 + 4);
    }
  }
}

//----- (65718810) --------------------------------------------------------
bool __cdecl CameraVars_Init(int a1)
{
  int v1; // eax

  v1 = a1;
  if ( !a1 || a1 == *(_DWORD *)dword_65ABF704 )
    return 0;
  a1 = 0;
  (*(void (__thiscall **)(int, int, int, int *))(*(_DWORD *)dword_65A5A6E8 + 76))(dword_65A5A6E8, v1, 2, &a1);
  return (a1 & 0x98) == 0;
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;

//----- (65718850) --------------------------------------------------------
int ThirdPerson_InitConsoleVars()
{
  ConsoleVar_Init(dword_65A5A820, g_pILTClient, "3rdPersonRamp", 0, 1.0);
  ConsoleVar_Init(dword_65A5A82C, g_pILTClient, "3rdPersonFOVX", 0, 75.0);
  ConsoleVar_Init(dword_65A5A838, g_pILTClient, "3rdPersonFOVY", 0, 60.0);
  ConsoleVar_Init(dword_65A5A844, g_pILTClient, "3rdPersonFade", 0, 4.0);
  ConsoleVar_Init(&dword_65A5A850, g_pILTClient, "3rdPersonAxis", 0, 0.0);
  ConsoleVar_Init(&dword_65A5A85C, g_pILTClient, "3rdPersonCycl", 0, 0.0);
  ConsoleVar_Init(dword_65A5A868, g_pILTClient, "3rdPersonMult", 0, 50.0);
  ConsoleVar_Init(&dword_65A5A874, g_pILTClient, "3rdPersonSpin", 0, 15.0);
  ConsoleVar_Init(dword_65A5A880, g_pILTClient, "3rdPersonKeys", 0, 45.0);
  ConsoleVar_Init(&dword_65A5A88C, g_pILTClient, "ZoomRamp", 0, 0.25);
  ConsoleVar_Init(dword_65A5A898, g_pILTClient, "ZoomLODMag", 0, 8.0);
  ConsoleVar_Init(dword_65A5A8A4, g_pILTClient, "ZoomLODScale", 0, -3.0);
  ConsoleVar_Init(&dword_65A5A8B0, g_pILTClient, "ZoomSensMag", 0, 8.0);
  ConsoleVar_Init(&dword_65A5A8BC, g_pILTClient, "ZoomSensScale", 0, 0.2);
  ConsoleVar_Init(&dword_65A5A8C8, g_pILTClient, "ShakeMaxAmount", 0, 10.0);
  ConsoleVar_Init(&dword_65A5A8D4, g_pILTClient, "ShakeDecayAmount", 0, 10.0);
  ConsoleVar_Init(&dword_65A5A8E0, g_pILTClient, "WashRestoreTime", 0, 1.0);
  return ConsoleVar_Init(&dword_65A5A8EC, g_pILTClient, "MaxWash", 0, 0.75);
}
// 65A5A820: using guessed type int dword_65A5A820[3];
// 65A5A82C: using guessed type int dword_65A5A82C[3];
// 65A5A838: using guessed type int dword_65A5A838[3];
// 65A5A844: using guessed type int dword_65A5A844[3];
// 65A5A850: using guessed type int dword_65A5A850;
// 65A5A85C: using guessed type int dword_65A5A85C;
// 65A5A868: using guessed type int dword_65A5A868[3];
// 65A5A874: using guessed type int dword_65A5A874;
// 65A5A880: using guessed type int dword_65A5A880[3];
// 65A5A88C: using guessed type int dword_65A5A88C;
// 65A5A898: using guessed type int dword_65A5A898[3];
// 65A5A8A4: using guessed type int dword_65A5A8A4[3];
// 65A5A8B0: using guessed type int dword_65A5A8B0;
// 65A5A8BC: using guessed type int dword_65A5A8BC;
// 65A5A8C8: using guessed type int dword_65A5A8C8;
// 65A5A8D4: using guessed type int dword_65A5A8D4;
// 65A5A8E0: using guessed type int dword_65A5A8E0;
// 65A5A8EC: using guessed type int dword_65A5A8EC;

//----- (65718AA0) --------------------------------------------------------
int __cdecl ThirdPerson_Update(int a1, int a2)
{
  int Slot; // eax
  int v4; // esi
  int v5; // edi
  double v6; // st7
  double v7; // st7
  double v8; // st7
  float v9; // [esp+14h] [ebp-8Ch]
  float v10; // [esp+14h] [ebp-8Ch]
  float v11; // [esp+14h] [ebp-8Ch]
  float v12; // [esp+14h] [ebp-8Ch]
  float v13; // [esp+14h] [ebp-8Ch]
  float v14; // [esp+18h] [ebp-88h]
  float v15; // [esp+18h] [ebp-88h]
  float v16; // [esp+18h] [ebp-88h]
  float v17; // [esp+18h] [ebp-88h]
  float v18; // [esp+18h] [ebp-88h]
  float v19; // [esp+18h] [ebp-88h]
  float v20; // [esp+18h] [ebp-88h]
  float v21; // [esp+18h] [ebp-88h]
  float v22; // [esp+18h] [ebp-88h]
  float v23; // [esp+18h] [ebp-88h]
  float v24; // [esp+18h] [ebp-88h]
  float v25; // [esp+18h] [ebp-88h]
  char v26[16]; // [esp+1Ch] [ebp-84h] BYREF

  if ( !a2 )
    return 1;
  Slot = EquipSlots_GetSlot(dword_65ABF6FC, a1);
  v4 = *(_DWORD *)(a2 + 264);
  v5 = Slot;
  v6 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  v14 = v6;
  if ( dword_65A5A890 && dword_65A5A88C )
    (*(void (__stdcall **)(int))(*(_DWORD *)dword_65A5A890 + 92))(dword_65A5A88C);
  else
    v6 = 0.0;
  v9 = v6;
  v10 = (v14 - *(float *)a2) / v9;
  if ( v10 > 1.0 )
    v10 = 1.0;
  v15 = (*(float *)(v4 + 12) - *(float *)(v4 + 4)) * v10 + *(float *)(v4 + 4);
  *(float *)(v4 + 8) = v15;
  if ( v15 < 1.0 )
    *(float *)(v4 + 8) = 1.0;
  if ( *(float *)(v4 + 12) > 1.0 || *(float *)(v4 + 8) > 1.0 )
  {
    v16 = *(float *)(v5 + 196) * 0.5;
    v17 = tan(v16);
    v11 = 1.0 / v17;
    v18 = *(float *)(v5 + 200) * 0.5;
    v19 = tan(v18);
    v7 = v11;
    v20 = v19 * v11;
    v12 = v20 / *(float *)(v4 + 8) / v11;
    v21 = 1.0 / *(float *)(v4 + 8) / v7;
    v22 = atan(v21);
    *(float *)(a2 + 192) = v22 + v22 - *(float *)(v5 + 196);
    v23 = atan(v12);
    *(float *)(a2 + 196) = v23 + v23 - *(float *)(v5 + 200);
    v8 = *(float *)(v4 + 8);
    sprintf(v26, "ModelZoomScale %f", v8);
    (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v26);
    if ( *(_DWORD *)(v4 + 16) )
      (*(void (__cdecl **)(const char *))(g_pILTClient + 520))("LMFullBright 1");
    if ( dword_65A5A8C0 && dword_65A5A8BC )
      (*(void (__stdcall **)(int))(*(_DWORD *)dword_65A5A8C0 + 92))(dword_65A5A8BC);
    else
      v8 = 0.0;
    v13 = v8;
    if ( dword_65A5A8B4 && dword_65A5A8B0 )
      (*(void (__stdcall **)(int))(*(_DWORD *)dword_65A5A8B4 + 92))(dword_65A5A8B0);
    else
      v8 = 0.0;
    v24 = v8;
    v25 = v13 / (*(float *)(v4 + 8) / v24);
    Input_ProcessMouseSensitivity(v25);
    return 1;
  }
  else
  {
    (*(void (__cdecl **)(const char *))(g_pILTClient + 520))("LMFullBright 0");
    (*(void (__cdecl **)(const char *))(g_pILTClient + 520))("ModelZoomScale 1.0");
    Input_ProcessMouseSensitivity(1.0);
    *(_BYTE *)v4 = 0;
    return 0;
  }
}
// 65A5A88C: using guessed type int dword_65A5A88C;
// 65A5A890: using guessed type int dword_65A5A890;
// 65A5A8B0: using guessed type int dword_65A5A8B0;
// 65A5A8B4: using guessed type int dword_65A5A8B4;
// 65A5A8BC: using guessed type int dword_65A5A8BC;
// 65A5A8C0: using guessed type int dword_65A5A8C0;

//----- (65718D90) --------------------------------------------------------
double __usercall CameraMgr_InterpolateValues@<st0>(double a1@<st0>, double st5_0@<st2>, int a2, int a3)
{
  float *v6; // esi
  double v7; // st5
  double v8; // st4
  double v9; // st3
  double v10; // st5
  float v11; // [esp+Ch] [ebp-Ch]
  float v12; // [esp+10h] [ebp-8h]
  float v13; // [esp+14h] [ebp-4h]
  float v14; // [esp+24h] [ebp+Ch]
  float v15; // [esp+24h] [ebp+Ch]
  float v16; // [esp+24h] [ebp+Ch]
  float v17; // [esp+24h] [ebp+Ch]
  float v18; // [esp+24h] [ebp+Ch]
  float v19; // [esp+24h] [ebp+Ch]
  float v20; // [esp+24h] [ebp+Ch]
  float v21; // [esp+24h] [ebp+Ch]
  float v22; // [esp+24h] [ebp+Ch]
  float v23; // [esp+24h] [ebp+Ch]
  float v24; // [esp+24h] [ebp+Ch]

  if ( a3 )
  {
    EquipSlots_GetSlot(dword_65ABF6FC, a2);
    v6 = *(float **)(a3 + 264);
    if ( dword_65A5A8D8 && dword_65A5A8D4 )
      (*(void (__stdcall **)(int))(*(_DWORD *)dword_65A5A8D8 + 92))(dword_65A5A8D4);
    else
      a1 = 0.0;
    v14 = a1;
    (*(void (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 104))(g_pILTClient);
    v15 = st5_0 * v14;
    v7 = v15;
    v16 = v6[1] - v15;
    v8 = v16;
    v6[1] = v16;
    v17 = v6[2] - v7;
    v6[2] = v17;
    v9 = v6[3] - v7;
    v10 = v17;
    v18 = v9;
    v6[3] = v18;
    if ( v8 < 0.0 )
      v6[1] = 0.0;
    if ( v10 < 0.0 )
      v6[2] = 0.0;
    if ( v18 < 0.0 )
      v6[3] = 0.0;
    if ( v6[1] > 0.0 || v6[2] > 0.0 || v6[3] > 0.0 )
    {
      (*(void (__usercall **)(int@<ecx>, double@<st0>))(*(_DWORD *)g_pILTClient + 100))(g_pILTClient, a1);
      v19 = a1 * 32.0;
      v20 = sin(v19);
      v13 = v20 * v6[1] * 3.0;
      v21 = ((double (*)(void))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))() * 32.0;
      v22 = cos(v21);
      a1 = v6[2] * v22 * 3.0;
      v12 = a1;
      (*(void (**)(void))(*(_DWORD *)g_pILTClient + 100))();
      v23 = 0.0 * 32.0;
      v24 = cos(v23);
      v11 = v6[3] * v24 * 3.0;
      *(float *)(a3 + 4) = v13;
      *(float *)(a3 + 8) = v12;
      *(float *)(a3 + 12) = v11;
    }
  }
  return a1;
}
// 65A5A8D4: using guessed type int dword_65A5A8D4;
// 65A5A8D8: using guessed type int dword_65A5A8D8;

//----- (65719110) --------------------------------------------------------
int __cdecl Camera_GetCurrentFOV(int a1, float *a2)
{
  double v3; // st7
  float v5; // [esp+4h] [ebp-10h]
  float v6; // [esp+4h] [ebp-10h]
  float v7; // [esp+10h] [ebp-4h]
  float v8; // [esp+20h] [ebp+Ch]

  if ( a2 )
  {
    EquipSlots_GetSlot(dword_65ABF6FC, a1);
    v7 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 104))(g_pILTClient);
    v3 = 0.0;
    v5 = a2[55];
    if ( dword_65A5A8E4 && dword_65A5A8E0 )
    {
      v8 = ((double (__stdcall *)(int))*(_DWORD *)(*(_DWORD *)dword_65A5A8E4 + 92))(dword_65A5A8E0);
      v3 = 0.0;
    }
    else
    {
      v8 = 0.0;
    }
    v6 = v5 - v7 / v8;
    if ( v6 < v3 )
      v6 = v3;
    a2[55] = v6;
    a2[56] = v6;
    a2[57] = v6;
  }
  return 1;
}
// 65A5A8E0: using guessed type int dword_65A5A8E0;
// 65A5A8E4: using guessed type int dword_65A5A8E4;

//----- (657192E0) --------------------------------------------------------
int __cdecl Camera_ProcessEffects(int a1, float a2)
{
  int Slot; // edi
  double CVar; // st7
  int v4; // eax
  float v5; // edx
  float v6; // eax
  int i; // eax
  double v8; // st7
  int v9; // eax
  float v10; // edx
  float v11; // eax
  int j; // eax
  double v13; // st7
  int v14; // eax
  double v15; // st6
  double v16; // st5
  double v17; // rt1
  double v18; // st5
  double v19; // st6
  int v20; // ecx
  int v21; // eax
  float v23; // [esp+4h] [ebp-C8h]
  float v24; // [esp+4h] [ebp-C8h]
  float v25; // [esp+8h] [ebp-C4h]
  float v26; // [esp+8h] [ebp-C4h]
  float v27; // [esp+8h] [ebp-C4h]
  float v28; // [esp+18h] [ebp-B4h] BYREF
  float v29; // [esp+1Ch] [ebp-B0h]
  float v30; // [esp+20h] [ebp-ACh]
  float v31; // [esp+24h] [ebp-A8h]
  float v32; // [esp+28h] [ebp-A4h]
  float v33; // [esp+2Ch] [ebp-A0h]
  float v34; // [esp+30h] [ebp-9Ch]
  float v35; // [esp+34h] [ebp-98h]
  float v36; // [esp+38h] [ebp-94h]
  float v37; // [esp+3Ch] [ebp-90h]
  float v38; // [esp+40h] [ebp-8Ch]
  float v39; // [esp+44h] [ebp-88h]
  float v40; // [esp+48h] [ebp-84h] BYREF
  float v41; // [esp+4Ch] [ebp-80h]
  float v42; // [esp+50h] [ebp-7Ch]
  float v43; // [esp+54h] [ebp-78h]
  float v44; // [esp+58h] [ebp-74h]
  float v45; // [esp+5Ch] [ebp-70h]
  float v46; // [esp+60h] [ebp-6Ch]
  float v47; // [esp+64h] [ebp-68h]
  float v48; // [esp+68h] [ebp-64h]
  int v49; // [esp+6Ch] [ebp-60h]
  bool (__cdecl *v50)(int); // [esp+70h] [ebp-5Ch]
  float v51; // [esp+74h] [ebp-58h]
  float v52; // [esp+78h] [ebp-54h]
  float v53; // [esp+7Ch] [ebp-50h]
  int v54; // [esp+80h] [ebp-4Ch]
  float v55[4]; // [esp+84h] [ebp-48h] BYREF
  int v56; // [esp+94h] [ebp-38h]
  float v57; // [esp+98h] [ebp-34h]
  float v58; // [esp+9Ch] [ebp-30h]
  float v59; // [esp+A0h] [ebp-2Ch]
  float v60; // [esp+A4h] [ebp-28h] BYREF
  float v61; // [esp+A8h] [ebp-24h] BYREF
  float v62; // [esp+ACh] [ebp-20h]
  float v63; // [esp+B0h] [ebp-1Ch]
  float v64; // [esp+B4h] [ebp-18h] BYREF
  float v65; // [esp+B8h] [ebp-14h] BYREF
  float v66; // [esp+BCh] [ebp-10h]
  float v67; // [esp+C0h] [ebp-Ch]
  float v68; // [esp+C4h] [ebp-8h]
  float v69; // [esp+C8h] [ebp-4h]

  if ( !EquipSlots_GetItemId(dword_65ABF6FC, a1) || a2 == 0.0 )
    return 1;
  Slot = EquipSlots_GetSlot(dword_65ABF6FC, a1);
  v56 = *(_DWORD *)(LODWORD(a2) + 264);
  (*(void (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  CVar = CameraDistance_GetCVar(dword_65ABF714);
  v4 = v56;
  *(float *)(v56 + 4) = CVar;
  if ( *((_DWORD *)dword_65ABF714 + 71) )
  {
    CVar = 0.0;
    *(float *)(v4 + 4) = 0.0;
  }
  v5 = *(float *)(Slot + 8);
  v6 = *(float *)(Slot + 12);
  v59 = *(float *)(Slot + 16);
  v57 = v5;
  v58 = v6;
  for ( i = EquipSlots_FindSlotByType(dword_65ABF6FC, a1, 100, 0);
        i;
        i = EquipSlots_FindSlotByType(dword_65ABF6FC, a1, 100, v9) )
  {
    v57 = *(float *)(i + 4) + v57;
    v58 = *(float *)(i + 8) + v58;
    v8 = *(float *)(i + 12);
    v9 = *(_DWORD *)(i + 284);
    CVar = v8 + v59;
    v59 = CVar;
    if ( !v9 )
      break;
  }
  v10 = *(float *)(Slot + 20);
  v11 = *(float *)(Slot + 24);
  v63 = *(float *)(Slot + 28);
  v61 = v10;
  v62 = v11;
  for ( j = EquipSlots_FindSlotByType(dword_65ABF6FC, a1, 101, 0);
        j;
        j = EquipSlots_FindSlotByType(dword_65ABF6FC, a1, 101, v14) )
  {
    v61 = v61 + *(float *)(j + 16);
    v62 = *(float *)(j + 20) + v62;
    v13 = *(float *)(j + 24);
    v14 = *(_DWORD *)(j + 284);
    CVar = v13 + v63;
    v63 = CVar;
    if ( !v14 )
      break;
  }
  if ( !*(_DWORD *)(v56 + 8) )
    goto LABEL_31;
  if ( dword_65A5A860 && dword_65A5A85C )
    (*(void (__stdcall **)(int))(*(_DWORD *)dword_65A5A860 + 92))(dword_65A5A85C);
  else
    CVar = 0.0;
  v68 = CVar;
  if ( dword_65A5A878 && dword_65A5A874 )
    (*(void (__stdcall **)(int))(*(_DWORD *)dword_65A5A878 + 92))(dword_65A5A874);
  else
    CVar = 0.0;
  v69 = CVar;
  v68 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 104))(g_pILTClient) * v69 + v68;
  v15 = v68;
  if ( v68 < 360.0 )
  {
    CVar = v68;
  }
  else
  {
    v16 = 360.0;
    while ( 1 )
    {
      v17 = v16;
      v18 = v15 - v16;
      v19 = v17;
      v68 = v18;
      if ( v68 < 360.0 )
        break;
      v16 = v19;
      v15 = v68;
    }
    CVar = v68;
  }
  v25 = CVar;
  Console_ExecVarFloat((const char **)&dword_65A5A85C, v25);
  if ( *(_DWORD *)(v56 + 8) )
  {
    v20 = dword_65A5A860;
    if ( !dword_65A5A860 )
    {
LABEL_33:
      CVar = 0.0;
      goto LABEL_34;
    }
    v21 = dword_65A5A85C;
  }
  else
  {
LABEL_31:
    v20 = dword_65A5A854;
    if ( !dword_65A5A854 )
      goto LABEL_33;
    v21 = dword_65A5A850;
  }
  if ( !v21 )
    goto LABEL_33;
  (*(void (__thiscall **)(int, int))(*(_DWORD *)v20 + 92))(v20, v21);
LABEL_34:
  v68 = CVar;
  v69 = v63 * 0.01745329238474369;
  v26 = v69;
  v69 = (v68 + v62) * 0.01745329238474369;
  v23 = v69;
  v69 = 0.01745329238474369 * v61;
  Matrix_FromEulerAngles(v55, v69, v23, v26);
  v69 = -v63 * 0.01745329238474369;
  v27 = v69;
  v69 = -v62 * 0.01745329238474369;
  v24 = v69;
  v69 = 0.01745329238474369 * -v61;
  Matrix_FromEulerAngles(&v60, v69, v24, v27);
  v64 = 0.0;
  v65 = 0.0;
  v66 = 0.0;
  v67 = 1.0;
  Quaternion_Multiply(&v64, &v60, v55);
  *(float *)(LODWORD(a2) + 28) = v64;
  *(float *)(LODWORD(a2) + 32) = v65;
  *(float *)(LODWORD(a2) + 36) = v66;
  *(float *)(LODWORD(a2) + 40) = v67;
  v64 = 0.0;
  v65 = 0.0;
  v66 = 0.0;
  v67 = 1.0;
  Quaternion_Multiply(&v64, (float *)(Slot + 32), v55);
  v55[0] = v64;
  v55[1] = v65;
  v55[2] = v66;
  v55[3] = v67;
  Quat_GetForwardVector(v55, &v65);
  v69 = -*(float *)(v56 + 4);
  v37 = NAN;
  v36 = NAN;
  v39 = NAN;
  v35 = 0.0;
  v38 = 0.0;
  v61 = v65 * v69;
  v52 = 0.0;
  v51 = 0.0;
  v54 = 0;
  v53 = 0.0;
  v49 = 7;
  v62 = v66 * v69;
  v50 = CameraVars_Init;
  v63 = v69 * v67;
  v65 = v61 + v57;
  v66 = v62 + v58;
  v67 = v63 + v59;
  v28 = 0.0;
  v29 = 0.0;
  v30 = 0.0;
  v31 = 0.0;
  v32 = 0.0;
  v33 = 0.0;
  v34 = 0.0;
  v46 = 0.0;
  v47 = 0.0;
  v48 = 0.0;
  v40 = v57;
  v41 = v58;
  v42 = v59;
  v43 = v65;
  v44 = v66;
  v45 = v67;
  if ( (*(unsigned __int8 (__cdecl **)(float *, float *))(g_pILTClient + 100))(&v40, &v28) )
  {
    v61 = v57 - v28;
    v62 = v58 - v29;
    v63 = v59 - v30;
    Vec3_ScaleToLength(&v61, 1.0);
    v65 = v28 - v40;
    v66 = v29 - v41;
    v67 = v30 - v42;
    v57 = v65 + v61;
    v58 = v66 + v62;
    v59 = v67 + v63;
    *(float *)(LODWORD(a2) + 4) = v57;
    *(float *)(LODWORD(a2) + 8) = v58;
    *(float *)(LODWORD(a2) + 12) = v59;
    return 1;
  }
  v65 = v43 - v40;
  v66 = v44 - v41;
  v67 = v45 - v42;
  *(float *)(LODWORD(a2) + 4) = v65;
  *(float *)(LODWORD(a2) + 8) = v66;
  *(float *)(LODWORD(a2) + 12) = v67;
  return 1;
}
// 65A5A850: using guessed type int dword_65A5A850;
// 65A5A854: using guessed type int dword_65A5A854;
// 65A5A85C: using guessed type int dword_65A5A85C;
// 65A5A860: using guessed type int dword_65A5A860;
// 65A5A874: using guessed type int dword_65A5A874;
// 65A5A878: using guessed type int dword_65A5A878;

//----- (65719A90) --------------------------------------------------------
void __cdecl ModelAnim_PlaySequence(int a1, float a2, int a3)
{
  int SlotByType; // eax
  float *v4; // esi
  int v5; // ecx
  double v6; // st7
  _BYTE v7[244]; // [esp+8h] [ebp-118h] BYREF
  int v8; // [esp+FCh] [ebp-24h]
  int (__cdecl *v9)(int, int); // [esp+108h] [ebp-18h]
  float *v10; // [esp+10Ch] [ebp-14h]

  SlotByType = EquipSlots_FindSlotByType(dword_65ABF6FC, a1, 104, 0);
  if ( SlotByType )
  {
    v5 = *(_DWORD *)(SlotByType + 264);
    if ( v5 )
    {
      if ( a2 >= 1.0 )
        v6 = a2;
      else
        v6 = (float)1.0;
      if ( v6 != *(float *)(v5 + 12) )
      {
        *(float *)(v5 + 4) = *(float *)(v5 + 8);
        *(_DWORD *)(v5 + 16) = a3;
        *(float *)(v5 + 12) = v6;
        *(float *)SlotByType = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
      }
    }
  }
  else if ( a2 > 1.0 )
  {
    v4 = (float *)Allocate20_2();
    v4[1] = 1.0;
    v4[2] = 1.0;
    v4[3] = a2;
    *(_BYTE *)v4 = 1;
    *((_DWORD *)v4 + 4) = a3;
    PlayerMovement_Reset((int)v7);
    v7[240] = 104;
    v8 = 768;
    v9 = ThirdPerson_Update;
    v10 = v4;
    AnimQueue_AddAnimation(dword_65ABF6FC, a1, (int)v7);
  }
}

//----- (65719C50) --------------------------------------------------------
float *__cdecl Zoom_GetMagnification(int a1)
{
  float v2[60]; // [esp+0h] [ebp-118h] BYREF
  char v3; // [esp+F0h] [ebp-28h]
  int v4; // [esp+F4h] [ebp-24h]
  char v5; // [esp+F8h] [ebp-20h]
  int v6; // [esp+FCh] [ebp-1Ch]
  int (__cdecl *v7)(int, float *); // [esp+100h] [ebp-18h]
  int v8; // [esp+104h] [ebp-14h]
  float v9; // [esp+108h] [ebp-10h]
  float v10; // [esp+10Ch] [ebp-Ch]
  float v11; // [esp+110h] [ebp-8h]

  ObjectTransform_Init(v2);
  v9 = 0.0;
  v10 = 0.0;
  v5 = 0;
  v11 = 0.0;
  v6 = 0;
  v8 = 0;
  v3 = 106;
  v4 = 2048;
  v7 = Camera_GetCurrentFOV;
  return AnimQueue_AddAnimation(dword_65ABF6FC, a1, (int)v2);
}

//----- (65719CD0) --------------------------------------------------------
void *Alloc16Bytes()
{
  return operator new(0x10u);
}

//----- (65719CE0) --------------------------------------------------------
void __usercall EquipSlot_SetupOrUpdateAnimation(double a1@<st0>, int __return_address, int a3)
{
  int SlotByType; // eax
  float *v4; // esi
  int v5; // eax
  float v6; // [esp+Ch] [ebp-11Ch]
  float v7[60]; // [esp+10h] [ebp-118h] BYREF
  char v8; // [esp+100h] [ebp-28h]
  int v9; // [esp+104h] [ebp-24h]
  int v10; // [esp+108h] [ebp-20h]
  int v11; // [esp+10Ch] [ebp-1Ch]
  int (__cdecl *v12)(int, float); // [esp+110h] [ebp-18h]
  float *v13; // [esp+114h] [ebp-14h]
  float v14; // [esp+118h] [ebp-10h]
  float v15; // [esp+11Ch] [ebp-Ch]
  float v16; // [esp+120h] [ebp-8h]

  SlotByType = EquipSlots_FindSlotByType(dword_65ABF6FC, __return_address, 102, 0);
  if ( SlotByType )
  {
    v5 = *(_DWORD *)(SlotByType + 264);
    if ( v5 && *(_DWORD *)(v5 + 8) != a3 )
    {
      *(_DWORD *)(v5 + 8) = a3;
      if ( dword_65A5A854 && dword_65A5A850 )
        (*(void (__stdcall **)(int))(*(_DWORD *)dword_65A5A854 + 92))(dword_65A5A850);
      else
        a1 = 0.0;
      v6 = a1;
      Console_ExecVarFloat((const char **)&dword_65A5A85C, v6);
    }
  }
  else
  {
    v4 = (float *)Allocate20_1();
    v4[1] = 150.0;
    *(_BYTE *)v4 = 1;
    *((_DWORD *)v4 + 2) = a3;
    v4[3] = 0.0;
    v4[4] = 0.0;
    ObjectTransform_Init(v7);
    v14 = 0.0;
    v15 = 0.0;
    v16 = 0.0;
    LOBYTE(v10) = 0;
    v11 = 0;
    v8 = 102;
    v9 = 9000;
    v12 = Camera_ProcessEffects;
    v13 = v4;
    AnimQueue_AddAnimation(dword_65ABF6FC, __return_address, (int)v7);
  }
}
// 65A5A850: using guessed type int dword_65A5A850;
// 65A5A854: using guessed type int dword_65A5A854;
// 65A5A85C: using guessed type int dword_65A5A85C;

//----- (6571A010) --------------------------------------------------------
void __cdecl CameraShake_Add(int a1, float a2, float a3, float a4)
{
  int SlotByType; // eax
  float *v7; // esi
  double v8; // st7
  double v9; // st7
  int v10; // esi
  double v11; // st7
  double v12; // st7
  float v13; // [esp+4h] [ebp-128h]
  float v14; // [esp+8h] [ebp-124h]
  float v15; // [esp+Ch] [ebp-120h]
  float v16; // [esp+10h] [ebp-11Ch]
  float v17; // [esp+10h] [ebp-11Ch]
  _BYTE v18[244]; // [esp+14h] [ebp-118h] BYREF
  int v19; // [esp+108h] [ebp-24h]
  double (__usercall *v20)@<st0>(double@<st0>, double@<st2>, int, int); // [esp+114h] [ebp-18h]
  float *v21; // [esp+118h] [ebp-14h]

  if ( EquipSlots_GetItemId(dword_65ABF6FC, a1) )
  {
    SlotByType = EquipSlots_FindSlotByType(dword_65ABF6FC, a1, 105, 0);
    if ( SlotByType )
    {
      v10 = *(_DWORD *)(SlotByType + 264);
      if ( v10 )
      {
        *(float *)SlotByType = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
        *(_BYTE *)v10 = 1;
        v13 = a2 * 0.5;
        v14 = a3 * 0.5;
        v15 = 0.5 * a4;
        *(float *)(v10 + 4) = *(float *)(v10 + 4) + v13;
        *(float *)(v10 + 8) = *(float *)(v10 + 8) + v14;
        v11 = *(float *)(v10 + 12) + v15;
        *(float *)(v10 + 12) = v11;
        if ( dword_65A5A8CC && dword_65A5A8C8 )
          (*(void (__stdcall **)(int))(*(_DWORD *)dword_65A5A8CC + 92))(dword_65A5A8C8);
        else
          v11 = 0.0;
        v17 = v11;
        v12 = v17;
        if ( v17 < (double)*(float *)(v10 + 4) )
          *(float *)(v10 + 4) = v17;
        if ( *(float *)(v10 + 8) > v12 )
          *(float *)(v10 + 8) = v17;
        if ( *(float *)(v10 + 12) > v12 )
          *(float *)(v10 + 12) = v17;
      }
    }
    else
    {
      v7 = (float *)Alloc16Bytes();
      *(_BYTE *)v7 = 1;
      v7[1] = a2;
      v7[2] = a3;
      v8 = a4;
      v7[3] = a4;
      if ( dword_65A5A8CC && dword_65A5A8C8 )
        (*(void (__stdcall **)(int))(*(_DWORD *)dword_65A5A8CC + 92))(dword_65A5A8C8);
      else
        v8 = 0.0;
      v16 = v8;
      v9 = v16;
      if ( v16 < (double)v7[1] )
        v7[1] = v16;
      if ( v7[2] > v9 )
        v7[2] = v16;
      if ( v7[3] > v9 )
        v7[3] = v16;
      PlayerMovement_Reset((int)v18);
      v18[240] = 105;
      v19 = 8;
      v20 = CameraMgr_InterpolateValues;
      v21 = v7;
      AnimQueue_AddAnimation(dword_65ABF6FC, a1, (int)v18);
    }
  }
}
// 65A5A8C8: using guessed type int dword_65A5A8C8;
// 65A5A8CC: using guessed type int dword_65A5A8CC;

//----- (6571A3C0) --------------------------------------------------------
int __cdecl CEF_ClearCommandLineStrings(int a1)
{
  cef_string_utf16_clear(a1 + 12);
  cef_string_utf16_clear(a1 + 32);
  cef_string_utf16_clear(a1 + 48);
  cef_string_utf16_clear(a1 + 60);
  cef_string_utf16_clear(a1 + 72);
  cef_string_utf16_clear(a1 + 84);
  cef_string_utf16_clear(a1 + 104);
  cef_string_utf16_clear(a1 + 116);
  return cef_string_utf16_clear(a1 + 128);
}
// 6592CED8: using guessed type int __cdecl cef_string_utf16_clear(_DWORD);

//----- (6571B400) --------------------------------------------------------
int __cdecl CEF_ClearProxySettingsStrings(int a1)
{
  cef_string_utf16_clear(a1 + 4);
  cef_string_utf16_clear(a1 + 16);
  cef_string_utf16_clear(a1 + 28);
  cef_string_utf16_clear(a1 + 40);
  cef_string_utf16_clear(a1 + 52);
  cef_string_utf16_clear(a1 + 64);
  return cef_string_utf16_clear(a1 + 92);
}
// 6592CED8: using guessed type int __cdecl cef_string_utf16_clear(_DWORD);

//----- (6571BDD0) --------------------------------------------------------
_DWORD *__thiscall CEF_BrowserClient_Ctor(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  int v4; // ecx
  int v5; // ecx
  int v6; // ecx
  int v7; // ecx
  int v8; // ecx

  result = this;
  if ( a2 )
  {
    *(this + 1) = &unk_659C05A8;
    *(this + 3) = &unk_659C05A0;
    *(this + 5) = &unk_659C0598;
    *(this + 7) = &unk_659C0590;
    *(this + 9) = &unk_659C0588;
    *(this + 12) = &off_659C0330;
  }
  v3 = *(this + 1);
  *result = &off_659C0358;
  *(_DWORD *)((char *)result + *(_DWORD *)(v3 + 4) + 4) = &off_659C0344;
  v4 = result[3];
  result[2] = &off_659C03B0;
  *(_DWORD *)((char *)result + *(_DWORD *)(v4 + 4) + 12) = &off_659C039C;
  v5 = result[5];
  result[4] = &off_659C03E4;
  *(_DWORD *)((char *)result + *(_DWORD *)(v5 + 4) + 20) = &off_659C03D0;
  v6 = result[7];
  result[6] = &off_659C0418;
  *(_DWORD *)((char *)result + *(_DWORD *)(v6 + 4) + 28) = &off_659C0404;
  v7 = result[9];
  result[8] = &off_659C045C;
  *(_DWORD *)((char *)result + *(_DWORD *)(v7 + 4) + 36) = &off_659C0448;
  v8 = result[1];
  *result = &off_659C0550;
  result[2] = &off_659C0538;
  result[4] = &off_659C0520;
  result[6] = &off_659C04F8;
  result[8] = &off_659C04E8;
  *(_DWORD *)((char *)result + *(_DWORD *)(v8 + 4) + 4) = &off_659C04D4;
  *(_DWORD *)((char *)result + *(_DWORD *)(result[1] + 4)) = *(_DWORD *)(result[1] + 4) - 44;
  result[10] = 0;
  return result;
}
// 659C0330: using guessed type void *off_659C0330;
// 659C0344: using guessed type void *off_659C0344;
// 659C0358: using guessed type void *off_659C0358;
// 659C039C: using guessed type void *off_659C039C;
// 659C03B0: using guessed type void *off_659C03B0;
// 659C03D0: using guessed type void *off_659C03D0;
// 659C03E4: using guessed type void *off_659C03E4;
// 659C0404: using guessed type void *off_659C0404;
// 659C0418: using guessed type void *off_659C0418;
// 659C0448: using guessed type void *off_659C0448;
// 659C045C: using guessed type void *off_659C045C;
// 659C04D4: using guessed type void *off_659C04D4;
// 659C04E8: using guessed type void *off_659C04E8;
// 659C04F8: using guessed type void *off_659C04F8;
// 659C0520: using guessed type void *off_659C0520;
// 659C0538: using guessed type void *off_659C0538;
// 659C0550: using guessed type void *off_659C0550;

//----- (6571BF90) --------------------------------------------------------
LONG __thiscall CEF_InterlockedAddRef(_DWORD *this)
{
  return InterlockedIncrement((_DWORD *)((char *)this - *(this - 1) - 8));
}

//----- (6571C400) --------------------------------------------------------
_DWORD *__thiscall CEF_LifeSpanHandler_Ctor(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // edx
  int v4; // edx
  int v5; // edx

  result = this;
  if ( a2 )
  {
    *(this + 1) = &unk_659C05FC;
    *(this + 3) = &unk_659C05F4;
    *(this + 5) = &off_659C0330;
  }
  v3 = *(this + 1);
  *this = &off_659C0488;
  *(_DWORD *)((char *)this + *(_DWORD *)(v3 + 4) + 4) = &off_659C0474;
  v4 = *(this + 3);
  *(this + 2) = &off_659C04BC;
  *(_DWORD *)((char *)this + *(_DWORD *)(v4 + 4) + 12) = &off_659C04A8;
  v5 = *(this + 1);
  *this = &off_659C05E0;
  *(this + 2) = &off_659C05D0;
  *(_DWORD *)((char *)this + *(_DWORD *)(v5 + 4) + 4) = &off_659C05BC;
  *(this + 4) = 0;
  return result;
}
// 659C0330: using guessed type void *off_659C0330;
// 659C0474: using guessed type void *off_659C0474;
// 659C0488: using guessed type void *off_659C0488;
// 659C04A8: using guessed type void *off_659C04A8;
// 659C04BC: using guessed type void *off_659C04BC;
// 659C05BC: using guessed type void *off_659C05BC;
// 659C05D0: using guessed type void *off_659C05D0;
// 659C05E0: using guessed type void *off_659C05E0;

//----- (6571C480) --------------------------------------------------------
LONG __thiscall CEF_Handler_AddRef(volatile LONG *this)
{
  return InterlockedIncrement(this - 1);
}

//----- (6571D3B0) --------------------------------------------------------
bool __thiscall String_Helper1(int this, int a2)
{
  int v3; // esi
  _DWORD *v5; // eax
  int v6; // eax
  int v7; // [esp-8h] [ebp-10h]
  int v8; // [esp-4h] [ebp-Ch]

  if ( *(_DWORD *)(a2 + 20) )
  {
    if ( !*(_DWORD *)(this + 4) )
    {
      v5 = operator new(0xCu);
      *(_DWORD *)(this + 4) = v5;
      *v5 = 0;
      v5[1] = 0;
      v5[2] = 0;
      *(_BYTE *)(this + 8) = 1;
    }
    v8 = *(_DWORD *)(this + 4);
    v7 = *(_DWORD *)(a2 + 20);
    v6 = std::string::c_str(a2);
    return cef_string_utf8_to_utf16(v6, v7, v8) != 0;
  }
  else
  {
    v3 = *(_DWORD *)(this + 4);
    if ( v3 )
      cef_string_utf16_clear(v3);
    return 1;
  }
}
// 6592CED8: using guessed type int __cdecl cef_string_utf16_clear(_DWORD);
// 6592CEEA: using guessed type int __cdecl cef_string_utf8_to_utf16(_DWORD, _DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (6571DFA0) --------------------------------------------------------
_DWORD *__thiscall CEF_Request_Ctor(_DWORD *this, int a2)
{
  int v3; // eax
  _BYTE v5[28]; // [esp+8h] [ebp-28h] BYREF
  int v6; // [esp+2Ch] [ebp-4h]

  *this = &off_659C0678;
  *(this + 1) = 0;
  *((_BYTE *)this + 8) = 0;
  if ( a2 )
  {
    v3 = std::string::string(v5, a2);
    v6 = 0;
    String_Helper1((int)this, v3);
    v6 = -1;
    std::string::~string(v5);
  }
  return this;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659C0678: using guessed type void *off_659C0678;

//----- (6571E240) --------------------------------------------------------
char __thiscall DLL_Init(int *this)
{
  _DWORD *v2; // eax
  void ***v3; // eax
  int (__thiscall *v4)(int); // eax
  int v5; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  int v8; // esi
  char *v9; // ecx
  int v11; // [esp-10h] [ebp-204h] BYREF
  void ***v12; // [esp-Ch] [ebp-200h]
  void ***v13; // [esp-8h] [ebp-1FCh] BYREF
  size_t v14; // [esp-4h] [ebp-1F8h] BYREF
  void **v15; // [esp+10h] [ebp-1E4h] BYREF
  _DWORD v16[47]; // [esp+14h] [ebp-1E0h] BYREF
  int v17; // [esp+D0h] [ebp-124h]
  void **v18; // [esp+D4h] [ebp-120h] BYREF
  _DWORD v19[41]; // [esp+D8h] [ebp-11Ch] BYREF
  int v20; // [esp+17Ch] [ebp-78h]
  _DWORD v21[15]; // [esp+180h] [ebp-74h] BYREF
  int v22; // [esp+1BCh] [ebp-38h]
  int *v23; // [esp+1C0h] [ebp-34h]
  size_t *v24; // [esp+1C4h] [ebp-30h]
  _DWORD v25[3]; // [esp+1C8h] [ebp-2Ch] BYREF
  void **v26; // [esp+1D4h] [ebp-20h] BYREF
  void *v27; // [esp+1D8h] [ebp-1Ch]
  char v28; // [esp+1DCh] [ebp-18h]
  void ****v29; // [esp+1E0h] [ebp-14h] BYREF
  bool v30; // [esp+1E7h] [ebp-Dh]
  int v31; // [esp+1F0h] [ebp-4h]

  v18 = &off_659C0640;
  memset(v19, 0, sizeof(v19));
  v20 = 0;
  v19[0] = 164;
  v31 = 0;
  v19[2] = 1;
  v19[6] = 0;
  v19[7] = 1;
  cef_string_ascii_to_utf16(
    "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/33.0.1750.117 Safari/537.36 fom-multicom/1.0",
    strlen(
      "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/33.0.1750.117 Safari/537.36 fom-multicom/1.0"),
    &v19[12]);
  v19[24] = 99;
  v25[1] = 0;
  v25[2] = 0;
  v25[0] = &off_659C0668;
  LOBYTE(v31) = 1;
  v2 = operator new(0x18u);
  if ( v2 )
    v3 = (void ***)CEF_LifeSpanHandler_Ctor(v2, 1);
  else
    v3 = 0;
  v14 = 0;
  *(this + 1) = (int)v3;
  v29 = &v13;
  v13 = v3;
  if ( v3 )
    (**(void (__thiscall ***)(int, void ***, size_t))((char *)v3 + (_DWORD)v3[1][1] + 4))(
      (int)v3 + (_DWORD)v3[1][1] + 4,
      v13,
      v14);
  CEF_Initialize((int)v25, (int)&v18, (int)v13, v14);
  memset(&v21[1], 0, 0x38u);
  v22 = 0;
  v21[0] = &off_659C0670;
  v4 = *(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 84);
  LOBYTE(v31) = 2;
  v5 = v4(g_LTClient);
  v21[12] = 1;
  v21[10] = v5;
  v21[13] = 1;
  v6 = operator new(0x34u);
  if ( v6 )
    v7 = CEF_BrowserClient_Ctor(v6, 1);
  else
    v7 = 0;
  *(this + 2) = (int)v7;
  *(this + 5) = *(_DWORD *)&Data - 300;
  v14 = 188;
  v13 = 0;
  v12 = (void ***)v16;
  *(this + 6) = *(_DWORD *)&dword_65A55604 - 300;
  v15 = &off_659C0648;
  memset(v12, (int)v13, v14);
  v17 = 0;
  v16[0] = 188;
  LOBYTE(v31) = 3;
  CEF_Request_Ctor(&v26, (int)"http://wiki.fomportal.com");
  v24 = &v14;
  v14 = 0;
  v8 = *(this + 2);
  v13 = &v15;
  v12 = &v26;
  LOBYTE(v31) = 5;
  v23 = &v11;
  v11 = v8;
  if ( v8 )
    (**(void (__thiscall ***)(int, int, void ***, void ***, size_t))(*(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + v8 + 4))(
      *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4) + v8 + 4,
      v11,
      v12,
      v13,
      v14);
  LOBYTE(v31) = 4;
  v30 = *CEF_CreateBrowserSync((int *)&v29, (int)v21, v11, (int)v12, (int)v13, v14) == 0;
  if ( v29 )
  {
    v9 = (char *)v29 + (_DWORD)v29[1][1] + 4;
    (*(void (__thiscall **)(char *))(*(_DWORD *)v9 + 4))(v9);
  }
  v26 = &off_659C0678;
  if ( v27 && v28 )
  {
    cef_string_utf16_clear(v27);
    operator delete(v27);
  }
  v15 = &off_659C0648;
  if ( v30 )
  {
    if ( !v17 )
      CEF_ClearProxySettingsStrings((int)v16);
    v21[0] = &off_659C0638;
    if ( !v22 )
      cef_string_utf16_clear(&v21[2]);
    v25[0] = &off_659C0630;
    v18 = &off_659C0640;
    if ( !v20 )
      CEF_ClearCommandLineStrings((int)v19);
    return 0;
  }
  else
  {
    if ( !v17 )
      CEF_ClearProxySettingsStrings((int)v16);
    v21[0] = &off_659C0638;
    if ( !v22 )
      cef_string_utf16_clear(&v21[2]);
    v25[0] = &off_659C0630;
    v18 = &off_659C0640;
    if ( !v20 )
      CEF_ClearCommandLineStrings((int)v19);
    return 1;
  }
}
// 6592CED8: using guessed type int __cdecl cef_string_utf16_clear(_DWORD);
// 6592CEF0: using guessed type int __cdecl cef_string_ascii_to_utf16(_DWORD, _DWORD, _DWORD);
// 659C0630: using guessed type void *off_659C0630;
// 659C0638: using guessed type void *off_659C0638;
// 659C0640: using guessed type void *off_659C0640;
// 659C0648: using guessed type void *off_659C0648;
// 659C0668: using guessed type void *off_659C0668;
// 659C0670: using guessed type void *off_659C0670;
// 659C0678: using guessed type void *off_659C0678;
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6571E660) --------------------------------------------------------
void __thiscall FXProps_Reset(float *this)
{
  *(this + 16) = 0.0;
  *(this + 19) = 0.0;
  *((_BYTE *)this + 68) = 0;
  *((_BYTE *)this + 69) = 1;
  *(this + 18) = 0.0;
  *((_BYTE *)this + 80) = 0;
  *((_BYTE *)this + 81) = 0;
}

//----- (6571E6B0) --------------------------------------------------------
HMODULE __thiscall DLL_UnloadLibrary(int this)
{
  HMODULE result; // eax

  result = *(HMODULE *)this;
  if ( *(_DWORD *)this )
  {
    FreeLibrary(*(HMODULE *)this);
    result = (HMODULE)strlen((const char *)&TempFileName);
    if ( result )
    {
      result = GetModuleHandleA((LPCSTR)&TempFileName);
      if ( !result )
      {
        result = (HMODULE)DeleteFileA((LPCSTR)&TempFileName);
        LOBYTE(TempFileName.item.templateId) = 0;
      }
    }
    *(_DWORD *)this = 0;
    *(_DWORD *)(this + 12) = 0;
    *(_DWORD *)(this + 16) = 0;
    *(_DWORD *)(this + 20) = 0;
    *(_DWORD *)(this + 24) = 0;
  }
  return result;
}

//----- (6571E710) --------------------------------------------------------
int __thiscall FXKeyArray_FindByName(_DWORD *this, char *String1)
{
  int v3; // edi
  int i; // ebx

  v3 = 0;
  if ( !*(this + 8) )
    return 0;
  for ( i = 0; _stricmp(String1, (const char *)(i + *(this + 7))); i += 144 )
  {
    if ( (unsigned int)++v3 >= *(this + 8) )
      return 0;
  }
  return *(this + 7) + 144 * v3;
}

//----- (6571E760) --------------------------------------------------------
int __thiscall FXKeyArray_FindIndexByName(_DWORD *this, char *String1)
{
  int v3; // ebx
  int i; // edi

  v3 = 0;
  if ( !*(this + 8) )
    return -1;
  for ( i = 0; _stricmp(String1, (const char *)(i + *(this + 7))); i += 144 )
  {
    if ( (unsigned int)++v3 >= *(this + 8) )
      return -1;
  }
  return v3;
}

//----- (6571E7B0) --------------------------------------------------------
int (__cdecl *__thiscall FXCallback_Invoke(int (__cdecl **this)(int), int a2))(int)
{
  int (__cdecl *result)(int); // eax

  result = *(this + 5);
  if ( result )
    return (int (__cdecl *)(int))result(a2);
  return result;
}

//----- (6571E7D0) --------------------------------------------------------
int (__cdecl *__thiscall Callback_Invoke4(int (__cdecl **this)(int), int a2))(int)
{
  int (__cdecl *result)(int); // eax

  result = *(this + 4);
  if ( result )
    return (int (__cdecl *)(int))result(a2);
  return result;
}

//----- (6571E7F0) --------------------------------------------------------
int (__cdecl *__thiscall Callback_Invoke3(int (__cdecl **this)(int), int a2))(int)
{
  int (__cdecl *result)(int); // eax

  result = *(this + 3);
  if ( result )
    return (int (__cdecl *)(int))result(a2);
  return result;
}

//----- (6571E810) --------------------------------------------------------
int (__cdecl *__thiscall Callback_InvokeWithArgs(int (__cdecl **this)(int, int), int a2, int a3))(int, int)
{
  int (__cdecl *result)(int, int); // eax

  result = *(this + 6);
  if ( result )
    return (int (__cdecl *)(int, int))result(a2, a3);
  return result;
}

//----- (6571E8B0) --------------------------------------------------------
void *__cdecl ClientFX_AllocGroupArray(int a1)
{
  return operator new[](144 * a1);
}

//----- (6571E920) --------------------------------------------------------
_DWORD *__cdecl FXKeyArray_Alloc(unsigned int a1)
{
  unsigned int v1; // ecx
  unsigned int *v2; // eax
  _DWORD *v3; // esi

  v1 = (84 * (unsigned __int64)a1) >> 32 != 0 ? -1 : 84 * a1;
  v2 = (unsigned int *)operator new[](__CFADD__(v1, 4) ? -1 : v1 + 4);
  if ( !v2 )
    return 0;
  v3 = v2 + 1;
  *v2 = a1;
  `eh vector constructor iterator'(v2 + 1, 0x54u, a1, (void (__thiscall *)(void *))FXProps_Reset, nullsub_2);
  return v3;
}
// 65985BAD: using guessed type void __stdcall `eh vector constructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *), void (__thiscall *)(void *));

//----- (6571E9C0) --------------------------------------------------------
float *Getter_Field1()
{
  float *result; // eax

  result = (float *)operator new(0x8Cu);
  if ( !result )
    return 0;
  result[33] = 0.0;
  result[32] = 0.0;
  result[34] = 0.0;
  *(_BYTE *)result = 0;
  return result;
}

//----- (6571E9F0) --------------------------------------------------------
void __cdecl Getter_Field2(void *a1)
{
  operator delete[](a1);
}

//----- (6571EAE0) --------------------------------------------------------
int __thiscall FXKey_ParseIntValue(char *this)
{
  char *v1; // eax

  v1 = strtok(this + 132, ",");
  return atoi(v1);
}

//----- (6571EB00) --------------------------------------------------------
char __usercall FXProps_ParseFromKeys@<al>(char *String1@<ecx>, int a2@<eax>, int a3@<edi>)
{
  char *v4; // eax
  char *v5; // eax
  char *v6; // eax
  char *v7; // eax
  int v9; // [esp+0h] [ebp-4h]

  if ( a2 )
  {
    v9 = a2;
    do
    {
      if ( !_stricmp(String1, "DisableAtDist") )
      {
        v4 = strtok(String1 + 132, ",");
        a2 = atoi(v4);
        *(_BYTE *)(a3 + 81) = a2 != 0;
      }
      else
      {
        a2 = _stricmp(String1, "MaxStartOffset");
        if ( a2 )
        {
          if ( !_stricmp(String1, "RandomizeStartOffset") )
          {
            v5 = strtok(String1 + 132, ",");
            LOBYTE(a2) = atoi(v5) != 0;
            *(_BYTE *)(a3 + 68) = a2;
          }
          else
          {
            a2 = _stricmp(String1, "StartOffsetInterval");
            if ( a2 )
            {
              if ( !_stricmp(String1, "SmoothShutDown") )
              {
                v6 = strtok(String1 + 132, ",");
                a2 = atoi(v6);
                *(_BYTE *)(a3 + 69) = a2 != 0;
              }
              else if ( !_stricmp(String1, "DetailLevel") )
              {
                v7 = strtok(String1 + 132, ",");
                a2 = atoi(v7);
                *(_DWORD *)(a3 + 72) = a2;
              }
              else
              {
                a2 = _stricmp(String1, "IsGore");
                if ( !a2 )
                {
                  a2 = FXKey_ParseIntValue(String1);
                  *(_BYTE *)(a3 + 80) = a2 != 0;
                }
              }
            }
            else
            {
              *(float *)(a3 + 76) = *((float *)String1 + 33);
            }
          }
        }
        else
        {
          *(float *)(a3 + 64) = *((float *)String1 + 33);
        }
      }
      String1 += 260;
      --v9;
    }
    while ( v9 );
  }
  return a2;
}

//----- (6571EC70) --------------------------------------------------------
char __thiscall DLL_LoadAndInitialize(int this)
{
  HMODULE LibraryA; // eax
  FARPROC ProcAddress; // edi
  int ActiveHandler; // eax
  FARPROC v6; // edi
  FARPROC v7; // eax
  FARPROC v8; // edx
  FARPROC v9; // ecx
  FARPROC v10; // edx
  int v11; // eax
  void *v12; // eax
  int (__stdcall *v13)(); // eax
  int (__stdcall *v14)(); // edx
  _BYTE v15[144]; // [esp+4h] [ebp-244h] BYREF
  _BYTE v16[144]; // [esp+94h] [ebp-1B4h] BYREF
  FARPROC v17; // [esp+124h] [ebp-124h]
  FARPROC v18; // [esp+128h] [ebp-120h]
  int (*v19)(void); // [esp+12Ch] [ebp-11Ch]
  FARPROC v20; // [esp+130h] [ebp-118h]
  FARPROC v21; // [esp+134h] [ebp-114h]
  FARPROC v22; // [esp+138h] [ebp-110h]
  CHAR LibFileName[264]; // [esp+13Ch] [ebp-10Ch] BYREF

  DLL_UnloadLibrary(this);
  SafeVsnprintf(LibFileName, (WorldLoginReturnAddrPacked)261, "Game\\%s", "ClientFX.fxd");
  if ( File_Exists(LibFileName) )
  {
    LibraryA = LoadLibraryA(LibFileName);
  }
  else
  {
    if ( !strlen((const char *)&TempFileName) )
    {
      if ( GetTempPathA(0x105u, LibFileName) > 0x105 )
        return 0;
      GetTempFileNameA(LibFileName, "cfx", 0, (LPSTR)&TempFileName);
      if ( (*(int (__thiscall **)(int, const char *, ItemsAddedEntry *))(*(_DWORD *)g_pILTClient + 48))(
             g_pILTClient,
             "ClientFX.fxd",
             &TempFileName) )
      {
        return 0;
      }
    }
    LibraryA = LoadLibraryA((LPCSTR)&TempFileName);
  }
  *(_DWORD *)this = LibraryA;
  if ( !LibraryA )
    return 0;
  ProcAddress = GetProcAddress(*(HMODULE *)this, "SetMasterDatabase");
  if ( ProcAddress )
  {
    ActiveHandler = CommandMgr_GetActiveHandler();
    ((void (__cdecl *)(int))ProcAddress)(ActiveHandler);
  }
  v19 = GetProcAddress(*(HMODULE *)this, "fxGetNum");
  if ( !v19 )
    return 0;
  v20 = GetProcAddress(*(HMODULE *)this, "fxGetRef");
  if ( !v20 )
    return 0;
  v21 = GetProcAddress(*(HMODULE *)this, "fxSetPlayer");
  if ( !v21 )
    return 0;
  v22 = GetProcAddress(*(HMODULE *)this, "fxSetAppFocus");
  if ( !v22 )
    return 0;
  v18 = GetProcAddress(*(HMODULE *)this, "fxDelete");
  if ( !v18 )
    return 0;
  v17 = GetProcAddress(*(HMODULE *)this, "fxSetCreateFunction");
  if ( !v17 )
    return 0;
  v6 = GetProcAddress(*(HMODULE *)this, "fxCreatePropList");
  if ( !v6 )
    return 0;
  v7 = GetProcAddress(*(HMODULE *)this, "fxFreePropList");
  if ( !v7 )
    return 0;
  v8 = v22;
  *(_DWORD *)(this + 12) = v21;
  v9 = v18;
  *(_DWORD *)(this + 16) = v8;
  v10 = v17;
  *(_DWORD *)(this + 20) = v9;
  *(_DWORD *)(this + 24) = v10;
  *(_DWORD *)(this + 4) = v6;
  *(_DWORD *)(this + 8) = v7;
  v11 = v19();
  *(_DWORD *)(this + 32) = v11;
  v12 = ClientFX_AllocGroupArray(v11);
  *(_DWORD *)(this + 28) = v12;
  if ( v12 )
  {
    v22 = 0;
    if ( *(_DWORD *)(this + 32) )
    {
      v21 = 0;
      do
      {
        qmemcpy(v16, (const void *)((int (__cdecl *)(_BYTE *, FARPROC))v20)(v15, v22), sizeof(v16));
        v13 = (FARPROC)((char *)v22 + 1);
        v14 = (FARPROC)((char *)v21 + 144);
        qmemcpy((char *)v21 + *(_DWORD *)(this + 28), v16, 0x90u);
        v22 = v13;
        v21 = v14;
      }
      while ( (unsigned int)v13 < *(_DWORD *)(this + 32) );
    }
    return 1;
  }
  else
  {
    *(_DWORD *)(this + 32) = 0;
    return 1;
  }
}

//----- (6571EF00) --------------------------------------------------------
int __thiscall FXLinkedList_FindByName(_DWORD *this, char *String2)
{
  int v3; // esi

  if ( !*String2 )
    return 0;
  v3 = *(this + 9);
  if ( !v3 )
    return 0;
  while ( _stricmp(*(const char **)(v3 + 8), String2) )
  {
    v3 = *(_DWORD *)(v3 + 4);
    if ( !v3 )
      return 0;
  }
  return *(_DWORD *)(v3 + 8);
}

//----- (6571EF70) --------------------------------------------------------
void __cdecl FXKeyArray_Free(char *a1)
{
  if ( a1 )
  {
    `eh vector destructor iterator'(a1, 0x54u, *((_DWORD *)a1 - 1), nullsub_2);
    operator delete[](a1 - 4);
  }
}
// 65985B4A: using guessed type void __stdcall `eh vector destructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *));

//----- (6571EFA0) --------------------------------------------------------
char __thiscall Camera_ResetState(_DWORD *this, int a2)
{
  _DWORD *v3; // eax
  int v5; // edx
  _DWORD *v6; // eax

  if ( *(this + 1) )
  {
    v6 = operator new(0xCu);
    if ( !v6 )
      return 0;
    *v6 = 0;
    v6[1] = 0;
    *(_DWORD *)(*(this + 1) + 4) = v6;
    *v6 = *(this + 1);
    v6[2] = a2;
    *(this + 1) = v6;
  }
  else
  {
    v3 = operator new(0xCu);
    if ( v3 )
    {
      *v3 = 0;
      v3[1] = 0;
    }
    else
    {
      v3 = 0;
    }
    *(this + 1) = v3;
    if ( !v3 )
      return 0;
    v3[2] = a2;
    if ( !*this )
    {
      v5 = *(this + 1);
      ++*(this + 2);
      *this = v5;
      return 1;
    }
  }
  ++*(this + 2);
  return 1;
}

//----- (6571F030) --------------------------------------------------------
int __cdecl FXFile_ParseLine(int a1, char *Format, int a3, int a4, int a5, int a6, int a7)
{
  int v8; // eax
  int result; // eax
  unsigned int v10; // [esp+Ch] [ebp-85Ch] BYREF
  int v11; // [esp+10h] [ebp-858h]
  int v12; // [esp+14h] [ebp-854h]
  int v13; // [esp+18h] [ebp-850h]
  int v14; // [esp+1Ch] [ebp-84Ch]
  int v15; // [esp+20h] [ebp-848h] BYREF
  char String[2048]; // [esp+24h] [ebp-844h] BYREF
  char v17; // [esp+824h] [ebp-44h] BYREF
  _BYTE v18[63]; // [esp+825h] [ebp-43h] BYREF

  v11 = a5;
  v13 = a4;
  v14 = a6;
  v12 = a7;
  v17 = 0;
  memset(v18, 0, sizeof(v18));
  memset(String, 0, sizeof(String));
  (*(void (__thiscall **)(int, int *))(*(_DWORD *)a1 + 24))(a1, &v15);
  (*(void (__thiscall **)(int, unsigned int *))(*(_DWORD *)a1 + 28))(a1, &v10);
  if ( v15 + 2048 <= v10 )
    v8 = 2048;
  else
    v8 = v10 - v15;
  if ( (*(int (__thiscall **)(int, char *, int))(*(_DWORD *)a1 + 8))(a1, String, v8) )
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "A line in the *.fxf file is too long!!");
  strtok(String, "\n");
  sscanf(String, Format, &v17, a3, v13, v11, v14, v12);
  result = (*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)a1 + 20))(a1, v15 + strlen(String));
  if ( result )
    return (*(int (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
             g_pILTClient,
             "Couldn't set the file ptr position for *.fxf file");
  return result;
}

//----- (6571F1A0) --------------------------------------------------------
int __cdecl FXFile_ParseLineString(int a1, char *Format, int a3, int a4, int a5, int a6, int a7)
{
  int v8; // eax
  int result; // eax
  unsigned int v10; // [esp+Ch] [ebp-85Ch] BYREF
  int v11; // [esp+10h] [ebp-858h]
  int v12; // [esp+14h] [ebp-854h]
  int v13; // [esp+18h] [ebp-850h]
  int v14; // [esp+1Ch] [ebp-84Ch]
  int v15; // [esp+20h] [ebp-848h] BYREF
  char String[2048]; // [esp+24h] [ebp-844h] BYREF
  char v17; // [esp+824h] [ebp-44h] BYREF
  _BYTE v18[63]; // [esp+825h] [ebp-43h] BYREF

  v11 = a5;
  v13 = a4;
  v14 = a6;
  v12 = a7;
  v17 = 0;
  memset(v18, 0, sizeof(v18));
  memset(String, 0, sizeof(String));
  (*(void (__thiscall **)(int, int *))(*(_DWORD *)a1 + 24))(a1, &v15);
  (*(void (__thiscall **)(int, unsigned int *))(*(_DWORD *)a1 + 28))(a1, &v10);
  if ( v15 + 2048 <= v10 )
    v8 = 2048;
  else
    v8 = v10 - v15;
  if ( (*(int (__thiscall **)(int, char *, int))(*(_DWORD *)a1 + 8))(a1, String, v8) )
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "A line in the *.fxf file is too long!!");
  strtok(String, "\n");
  sscanf(String, Format, &v17, a3, v13, v11, v14, v12);
  result = (*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)a1 + 20))(a1, v15 + strlen(String));
  if ( result )
    return (*(int (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
             g_pILTClient,
             "Couldn't set the file ptr position for *.fxf file");
  return result;
}

//----- (6571F310) --------------------------------------------------------
int __cdecl FXFile_ParseLineInt(int a1, char *Format, int a3, int a4, int a5, int a6, int a7)
{
  int v8; // eax
  int result; // eax
  unsigned int v10; // [esp+Ch] [ebp-85Ch] BYREF
  int v11; // [esp+10h] [ebp-858h]
  int v12; // [esp+14h] [ebp-854h]
  int v13; // [esp+18h] [ebp-850h]
  int v14; // [esp+1Ch] [ebp-84Ch]
  int v15; // [esp+20h] [ebp-848h] BYREF
  char String[2048]; // [esp+24h] [ebp-844h] BYREF
  char v17; // [esp+824h] [ebp-44h] BYREF
  _BYTE v18[63]; // [esp+825h] [ebp-43h] BYREF

  v11 = a5;
  v13 = a4;
  v14 = a6;
  v12 = a7;
  v17 = 0;
  memset(v18, 0, sizeof(v18));
  memset(String, 0, sizeof(String));
  (*(void (__thiscall **)(int, int *))(*(_DWORD *)a1 + 24))(a1, &v15);
  (*(void (__thiscall **)(int, unsigned int *))(*(_DWORD *)a1 + 28))(a1, &v10);
  if ( v15 + 2048 <= v10 )
    v8 = 2048;
  else
    v8 = v10 - v15;
  if ( (*(int (__thiscall **)(int, char *, int))(*(_DWORD *)a1 + 8))(a1, String, v8) )
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "A line in the *.fxf file is too long!!");
  strtok(String, "\n");
  sscanf(String, Format, &v17, a3, v13, v11, v14, v12);
  result = (*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)a1 + 20))(a1, v15 + strlen(String));
  if ( result )
    return (*(int (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
             g_pILTClient,
             "Couldn't set the file ptr position for *.fxf file");
  return result;
}

//----- (6571F480) --------------------------------------------------------
int __cdecl FXFile_ParseLineFloat(int a1, char *Format, int a3, int a4, int a5, int a6, int a7)
{
  int v8; // eax
  int result; // eax
  unsigned int v10; // [esp+Ch] [ebp-85Ch] BYREF
  int v11; // [esp+10h] [ebp-858h]
  int v12; // [esp+14h] [ebp-854h]
  int v13; // [esp+18h] [ebp-850h]
  int v14; // [esp+1Ch] [ebp-84Ch]
  int v15; // [esp+20h] [ebp-848h] BYREF
  char String[2048]; // [esp+24h] [ebp-844h] BYREF
  char v17; // [esp+824h] [ebp-44h] BYREF
  _BYTE v18[63]; // [esp+825h] [ebp-43h] BYREF

  v11 = a5;
  v13 = a4;
  v14 = a6;
  v12 = a7;
  v17 = 0;
  memset(v18, 0, sizeof(v18));
  memset(String, 0, sizeof(String));
  (*(void (__thiscall **)(int, int *))(*(_DWORD *)a1 + 24))(a1, &v15);
  (*(void (__thiscall **)(int, unsigned int *))(*(_DWORD *)a1 + 28))(a1, &v10);
  if ( v15 + 2048 <= v10 )
    v8 = 2048;
  else
    v8 = v10 - v15;
  if ( (*(int (__thiscall **)(int, char *, int))(*(_DWORD *)a1 + 8))(a1, String, v8) )
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "A line in the *.fxf file is too long!!");
  strtok(String, "\n");
  sscanf(String, Format, &v17, a3, v13, v11, v14, v12);
  result = (*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)a1 + 20))(a1, v15 + strlen(String));
  if ( result )
    return (*(int (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
             g_pILTClient,
             "Couldn't set the file ptr position for *.fxf file");
  return result;
}

//----- (6571F5F0) --------------------------------------------------------
int __cdecl Camera_UpdateZoom(int a1, char *Format, int a3, int a4, int a5, int a6, int a7)
{
  int v8; // eax
  int result; // eax
  unsigned int v10; // [esp+Ch] [ebp-85Ch] BYREF
  int v11; // [esp+10h] [ebp-858h]
  int v12; // [esp+14h] [ebp-854h]
  int v13; // [esp+18h] [ebp-850h]
  int v14; // [esp+1Ch] [ebp-84Ch]
  int v15; // [esp+20h] [ebp-848h] BYREF
  char String[2048]; // [esp+24h] [ebp-844h] BYREF
  char v17; // [esp+824h] [ebp-44h] BYREF
  _BYTE v18[63]; // [esp+825h] [ebp-43h] BYREF

  v11 = a5;
  v13 = a4;
  v14 = a6;
  v12 = a7;
  v17 = 0;
  memset(v18, 0, sizeof(v18));
  memset(String, 0, sizeof(String));
  (*(void (__thiscall **)(int, int *))(*(_DWORD *)a1 + 24))(a1, &v15);
  (*(void (__thiscall **)(int, unsigned int *))(*(_DWORD *)a1 + 28))(a1, &v10);
  if ( v15 + 2048 <= v10 )
    v8 = 2048;
  else
    v8 = v10 - v15;
  if ( (*(int (__thiscall **)(int, char *, int))(*(_DWORD *)a1 + 8))(a1, String, v8) )
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "A line in the *.fxf file is too long!!");
  strtok(String, "\n");
  sscanf(String, Format, &v17, a3, v13, v11, v14, v12);
  result = (*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)a1 + 20))(a1, v15 + strlen(String));
  if ( result )
    return (*(int (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
             g_pILTClient,
             "Couldn't set the file ptr position for *.fxf file");
  return result;
}

//----- (6571F760) --------------------------------------------------------
int __cdecl FXFile_ParseLineFloat2(int a1, char *Format, int a3, int a4, int a5, int a6, int a7)
{
  int v8; // eax
  int result; // eax
  unsigned int v10; // [esp+Ch] [ebp-85Ch] BYREF
  int v11; // [esp+10h] [ebp-858h]
  int v12; // [esp+14h] [ebp-854h]
  int v13; // [esp+18h] [ebp-850h]
  int v14; // [esp+1Ch] [ebp-84Ch]
  int v15; // [esp+20h] [ebp-848h] BYREF
  char String[2048]; // [esp+24h] [ebp-844h] BYREF
  char v17; // [esp+824h] [ebp-44h] BYREF
  _BYTE v18[63]; // [esp+825h] [ebp-43h] BYREF

  v11 = a5;
  v13 = a4;
  v14 = a6;
  v12 = a7;
  v17 = 0;
  memset(v18, 0, sizeof(v18));
  memset(String, 0, sizeof(String));
  (*(void (__thiscall **)(int, int *))(*(_DWORD *)a1 + 24))(a1, &v15);
  (*(void (__thiscall **)(int, unsigned int *))(*(_DWORD *)a1 + 28))(a1, &v10);
  if ( v15 + 2048 <= v10 )
    v8 = 2048;
  else
    v8 = v10 - v15;
  if ( (*(int (__thiscall **)(int, char *, int))(*(_DWORD *)a1 + 8))(a1, String, v8) )
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "A line in the *.fxf file is too long!!");
  strtok(String, "\n");
  sscanf(String, Format, &v17, a3, v13, v11, v14, v12);
  result = (*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)a1 + 20))(a1, v15 + strlen(String));
  if ( result )
    return (*(int (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
             g_pILTClient,
             "Couldn't set the file ptr position for *.fxf file");
  return result;
}

//----- (6571F8D0) --------------------------------------------------------
void *__cdecl Camera_GetZoomTarget(int a1)
{
  void *v1; // esi

  v1 = operator new[](260 * a1);
  if ( !v1 )
    return 0;
  if ( a1 - 1 >= 0 )
    memset(v1, 0, 260 * a1);
  return v1;
}

//----- (6571F950) --------------------------------------------------------
_DWORD *__thiscall BufferState_Clear(_DWORD *this)
{
  *(this + 9) = 0;
  *(this + 10) = 0;
  *(this + 11) = 0;
  *(this + 8) = 0;
  *(this + 7) = 0;
  *this = 0;
  *(this + 3) = 0;
  *(this + 4) = 0;
  *(this + 5) = 0;
  *(this + 6) = 0;
  return this;
}

//----- (6571F980) --------------------------------------------------------
char __stdcall FXKey_ParseByType(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // edi
  char result; // al
  int v6; // esi
  int v7; // edi
  int v8; // [esp+14h] [ebp-8h] BYREF
  int v9; // [esp+18h] [ebp-4h] BYREF

  if ( (_BYTE)a1 )
  {
    v3 = a3;
    v4 = a2;
    FXFile_ParseLine(a2, "%s %s", a3, 0, 0, 0, 0);
    FXFile_ParseLineString(v4, "%s %i", v3 + 128, 0, 0, 0, 0);
    switch ( *(_DWORD *)(v3 + 128) )
    {
      case 0:
      case 3:
      case 7:
        FXFile_ParseLine(v4, "%s %s", v3 + 132, 0, 0, 0, 0);
        result = 1;
        break;
      case 1:
        FXFile_ParseLineInt(v4, "%s %i", v3 + 132, 0, 0, 0, 0);
        result = 1;
        break;
      case 2:
        FXFile_ParseLineFloat(v4, "%s %f", v3 + 132, 0, 0, 0, 0);
        result = 1;
        break;
      case 4:
        FXFile_ParseLineFloat(v4, "%s %f %f %f", v3 + 132, v3 + 136, v3 + 140, 0, 0);
        result = 1;
        break;
      case 5:
        FXFile_ParseLineFloat(v4, "%s %f %f %f %f", v3 + 132, v3 + 136, v3 + 140, v3 + 144, 0);
        result = 1;
        break;
      case 6:
        FXFile_ParseLineFloat(v4, "%s %f %f %f %f %f", v3 + 132, (int)&v8, (int)&v9, (int)&a3, (int)&a1);
        a2 = HIWORD(a1) | 0xC00;
        *(_DWORD *)(v3 + 136) = (__int64)(255.0 * *(float *)&v8)
                              | (((unsigned int)(__int64)(*(float *)&v9 * 255.0)
                                | (((unsigned int)(__int64)(*(float *)&a3 * 255.0)
                                  | ((unsigned int)(__int64)(*(float *)&a1 * 255.0) << 8)) << 8)) << 8);
        result = 1;
        break;
      default:
        return 1;
    }
  }
  else
  {
    v6 = a2;
    (*(void (__thiscall **)(int, char *, int))(*(_DWORD *)a2 + 8))(a2, (char *)&a1 + 3, 1);
    v7 = a3;
    (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)v6 + 8))(v6, a3, HIBYTE(a1));
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v6 + 8))(v6, v7 + 128, 4);
    switch ( *(_DWORD *)(v7 + 128) )
    {
      case 0:
      case 3:
      case 7:
        (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v6 + 8))(v6, v7 + 132, 128);
        break;
      case 1:
      case 2:
        (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v6 + 8))(v6, v7 + 132, 4);
        break;
      case 4:
        (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v6 + 8))(v6, v7 + 132, 12);
        break;
      case 5:
        (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v6 + 8))(v6, v7 + 132, 16);
        break;
      case 6:
        (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v6 + 8))(v6, v7 + 132, 8);
        break;
      default:
        return 1;
    }
    return 1;
  }
  return result;
}

//----- (6571FC40) --------------------------------------------------------
char __thiscall FXData_Load(void (__cdecl **this)(_DWORD), int a2, int a3, float a4, int a5, char *a6, unsigned int a7)
{
  char *v8; // eax
  int v9; // ecx
  unsigned int v10; // ebx
  _DWORD *v11; // esi
  int IndexByName; // eax
  int v13; // ecx
  double v14; // st5
  double v15; // st6
  double v16; // st7
  double v17; // st5
  double v18; // st7
  double v19; // st6
  void (__stdcall *v20)(_DWORD, int); // edx
  char *v21; // esi
  int v23; // [esp+4h] [ebp-D8h]
  int v24; // [esp+14h] [ebp-C8h] BYREF
  char *v25; // [esp+18h] [ebp-C4h]
  int v26; // [esp+1Ch] [ebp-C0h] BYREF
  int v27; // [esp+20h] [ebp-BCh] BYREF
  int v28; // [esp+24h] [ebp-B8h] BYREF
  _DWORD *v29; // [esp+28h] [ebp-B4h]
  float v30; // [esp+2Ch] [ebp-B0h]
  int v31; // [esp+30h] [ebp-ACh] BYREF
  int v32; // [esp+34h] [ebp-A8h] BYREF
  char v33[32]; // [esp+38h] [ebp-A4h] BYREF
  char v34[20]; // [esp+58h] [ebp-84h] BYREF

  v29 = this;
  v25 = a6;
  if ( (_BYTE)a2 )
    FXFile_ParseLine(a3, "%s %s", (int)v34, 0, 0, 0, 0);
  else
    (*(void (__thiscall **)(int, char *, int))(*(_DWORD *)a3 + 8))(a3, v34, 128);
  v8 = strtok(v34, ";");
  *(_DWORD *)a5 = FXKeyArray_FindByName(this, v8);
  if ( (_BYTE)a2 )
  {
    Camera_UpdateZoom(a3, "%s %lu", a5 + 8, 0, 0, 0, 0);
    FXFile_ParseLineFloat2(a3, "%s %i", (int)&v31, 0, 0, 0, 0);
    Camera_UpdateZoom(a3, "%s %lu", (int)&v32, 0, 0, 0, 0);
    v33[0] = 0;
    FXFile_ParseLine(a3, "%s %s", (int)v33, 0, 0, 0, 0);
  }
  else
  {
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)a3 + 8))(a3, a5 + 8, 4);
    (*(void (__thiscall **)(int, int *, int))(*(_DWORD *)a3 + 8))(a3, &v31, 40);
  }
  v9 = v32;
  *(_BYTE *)(a5 + 20) = v31;
  *(_DWORD *)(a5 + 24) = v9;
  strcpy((char *)(a5 + 28), v33);
  if ( *(_BYTE *)(a5 + 20) && *(_DWORD *)(a5 + 24) == *(_DWORD *)(a5 + 8) )
    *(_BYTE *)(a5 + 20) = 0;
  if ( (_BYTE)a2 )
  {
    FXFile_ParseLineFloat(a3, "%s %f", a5 + 12, 0, 0, 0, 0);
    FXFile_ParseLineFloat(a3, "%s %f", a5 + 16, 0, 0, 0, 0);
  }
  else
  {
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)a3 + 8))(a3, a5 + 12, 4);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)a3 + 8))(a3, a5 + 16, 4);
  }
  v28 = 0;
  if ( (_BYTE)a2 )
  {
    Camera_UpdateZoom(a3, "%s %lu", (int)&v28, 0, 0, 0, 0);
    Camera_UpdateZoom(a3, "%s %lu", (int)&v26, 0, 0, 0, 0);
    FXFile_ParseLineFloat(a3, "%s %f", (int)&v24, 0, 0, 0, 0);
    FXFile_ParseLineFloat(a3, "%s %f", (int)&v24, 0, 0, 0, 0);
    Camera_UpdateZoom(a3, "%s %lu", (int)&v27, 0, 0, 0, 0);
  }
  else
  {
    (*(void (__thiscall **)(int, int *, int))(*(_DWORD *)a3 + 8))(a3, &v28, 4);
    (*(void (__thiscall **)(int, int *, int))(*(_DWORD *)a3 + 8))(a3, &v26, 4);
    (*(void (__thiscall **)(int, int *, int))(*(_DWORD *)a3 + 8))(a3, &v26, 4);
    (*(void (__thiscall **)(int, int *, int))(*(_DWORD *)a3 + 8))(a3, &v26, 4);
    (*(void (__thiscall **)(int, int *, int))(*(_DWORD *)a3 + 8))(a3, &v27, 4);
  }
  v10 = 0;
  if ( v27 )
  {
    v30 = *(float *)&v25;
    do
    {
      if ( v10 >= a7 )
        break;
      FXKey_ParseByType(a2, a3, SLODWORD(v30));
      LODWORD(v30) += 260;
      ++v10;
    }
    while ( v10 < v27 );
  }
  v11 = v29;
  IndexByName = FXKeyArray_FindIndexByName(v29, *(char **)a5);
  if ( IndexByName < 0 )
    return 0;
  v13 = ((int (__cdecl *)(int))v11[1])(IndexByName);
  *(_DWORD *)(a5 + 4) = v13;
  if ( !v13 )
    return 0;
  v30 = *(float *)(a5 + 12);
  v14 = a4;
  if ( v30 >= 0.0 )
  {
    if ( v14 >= v30 )
      v14 = v30;
    v30 = v14;
    v15 = 0.0;
    v16 = a4;
  }
  else
  {
    v15 = 0.0;
    v16 = a4;
    v30 = 0.0;
  }
  v17 = v30;
  *(float *)(a5 + 12) = v30;
  v30 = *(float *)(a5 + 16);
  if ( v30 >= v15 )
  {
    if ( v30 <= v16 )
      v16 = v30;
    v15 = v16;
    v18 = v17;
  }
  else
  {
    v18 = v17;
  }
  v30 = v15;
  v19 = v30;
  v23 = v28;
  *(float *)(a5 + 16) = v30;
  v20 = *(void (__stdcall **)(_DWORD, int))(*(_DWORD *)v13 + 4);
  v30 = v19 - v18;
  v20(LODWORD(v30), v23);
  v21 = v25;
  if ( !(*(unsigned __int8 (__thiscall **)(_DWORD, char *, unsigned int))(**(_DWORD **)(a5 + 4) + 8))(
          *(_DWORD *)(a5 + 4),
          v25,
          v10) )
  {
    ((void (__cdecl *)(_DWORD))v29[2])(*(_DWORD *)(a5 + 4));
    *(_DWORD *)(a5 + 4) = 0;
    return 0;
  }
  FXProps_ParseFromKeys(v21, v10, a5);
  return 1;
}

//----- (65720070) --------------------------------------------------------
char __thiscall KeyFrameArray_Parse(char *this, int a2, int a3, int a4, int a5, unsigned int a6)
{
  unsigned int v6; // edi
  _DWORD *v7; // eax
  void *v9; // ecx
  void (__cdecl **v10)(_DWORD); // edi
  unsigned int v11; // eax
  int v12; // esi
  _DWORD *v13; // edx
  _DWORD *v14; // esi
  int v15; // eax
  char *v16; // [esp+Ch] [ebp-80h]
  void *v17; // [esp+Ch] [ebp-80h]
  int v18; // [esp+1Ch] [ebp-70h] BYREF
  int v19; // [esp+20h] [ebp-6Ch]
  void (__cdecl **v20)(_DWORD); // [esp+24h] [ebp-68h]
  void *v21; // [esp+28h] [ebp-64h] BYREF
  int v22; // [esp+2Ch] [ebp-60h]
  char v23; // [esp+33h] [ebp-59h]
  int v24[21]; // [esp+34h] [ebp-58h] BYREF

  v20 = (void (__cdecl **)(_DWORD))this;
  v16 = *(char **)(a4 + 132);
  v19 = a5;
  FXKeyArray_Free(v16);
  v6 = 0;
  *(float *)(a4 + 128) = 0.0;
  *(_DWORD *)(a4 + 132) = 0;
  *(_DWORD *)(a4 + 136) = 0;
  *(_BYTE *)a4 = 0;
  v21 = 0;
  v18 = 0;
  if ( (_BYTE)a2 )
  {
    FXFile_ParseLine(a3, "%s %s", a4, 0, 0, 0, 0);
    Camera_UpdateZoom(a3, "%s %lu", (int)&v21, 0, 0, 0, 0);
    Camera_UpdateZoom(a3, "%s %lu", (int)&v18, 0, 0, 0, 0);
  }
  else
  {
    (*(void (__thiscall **)(int, void **, int))(*(_DWORD *)a3 + 8))(a3, &v21, 4);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)a3 + 8))(a3, a4, 128);
    (*(void (__thiscall **)(int, int *, int))(*(_DWORD *)a3 + 8))(a3, &v18, 4);
  }
  v17 = v21;
  *(float *)(a4 + 128) = (double)(unsigned int)v18 / 1000.0;
  v7 = FXKeyArray_Alloc((unsigned int)v17);
  *(_DWORD *)(a4 + 132) = v7;
  if ( !v7 )
    return 0;
  v9 = v21;
  *(_DWORD *)(a4 + 136) = v21;
  if ( v9 )
  {
    v22 = 0;
    do
    {
      FXData_Load(v20, a2, a3, *(float *)(a4 + 128), v22 + *(_DWORD *)(a4 + 132), (char *)v19, a6);
      v9 = v21;
      v22 += 84;
      ++v6;
    }
    while ( v6 < (unsigned int)v21 );
  }
  v19 = 0;
  if ( v9 )
  {
    do
    {
      v23 = 1;
      if ( !v9 )
        break;
      v10 = 0;
      v11 = 1;
      v20 = 0;
      v22 = 1;
      do
      {
        v12 = *(_DWORD *)(a4 + 132);
        v13 = (void (__cdecl **)(_DWORD))((char *)v10 + v12);
        if ( *((_BYTE *)v10 + v12 + 20) && v11 < (unsigned int)v9 )
        {
          v14 = (void (__cdecl **)(_DWORD))((char *)v10 + v12 + 92);
          while ( *v14 != v13[6] )
          {
            ++v11;
            v14 += 21;
            if ( v11 >= (unsigned int)v9 )
              goto LABEL_19;
          }
          v15 = 84 * v11;
          qmemcpy(v24, v13, sizeof(v24));
          qmemcpy(v13, (const void *)(v15 + *(_DWORD *)(a4 + 132)), 0x54u);
          qmemcpy((void *)(v15 + *(_DWORD *)(a4 + 132)), v24, 0x54u);
          v9 = v21;
          v23 = 0;
LABEL_19:
          v11 = v22;
        }
        ++v11;
        v10 = v20 + 21;
        v22 = v11;
        v20 += 21;
      }
      while ( v11 - 1 < (unsigned int)v9 );
      if ( v23 )
        break;
      ++v19;
    }
    while ( v19 < (unsigned int)v9 );
  }
  return 1;
}

//----- (657202A0) --------------------------------------------------------
char __thiscall List_ReadItems(char *a1, int a3, int a4, _DWORD *a5)
{
  void *ZoomTarget; // edi
  int v7; // ebx
  float *v8; // esi
  int v10; // [esp+4h] [ebp-4h] BYREF

  if ( (_BYTE)a3 )
    Camera_UpdateZoom(a4, "%s %lu", (int)&v10, 0, 0, 0, 0);
  else
    (*(void (__thiscall **)(int, int *, int))(*(_DWORD *)a4 + 8))(a4, &v10, 4);
  ZoomTarget = Camera_GetZoomTarget(512);
  if ( !ZoomTarget )
    return 0;
  v7 = 0;
  if ( v10 )
  {
    while ( 1 )
    {
      v8 = Getter_Field1();
      if ( !KeyFrameArray_Parse(a1, a3, a4, (int)v8, (int)ZoomTarget, 0x200u) )
        break;
      Camera_ResetState(a5, (int)v8);
      if ( ++v7 >= (unsigned int)v10 )
        goto LABEL_9;
    }
    Getter_Field2(ZoomTarget);
    return 0;
  }
  else
  {
LABEL_9:
    Getter_Field2(ZoomTarget);
    return 1;
  }
}

//----- (65720360) --------------------------------------------------------
char __thiscall ClientFX_ParseGroups(char *this, int a2, int a3)
{
  int v5; // ebx
  int i; // esi
  int v7; // ebx
  unsigned int v8; // eax
  int v9; // edi
  unsigned int v10; // ebx
  int v11; // eax
  int v12; // ecx
  double v13; // st6
  int v14; // ecx
  int v15; // eax
  int v16; // ecx
  double v17; // st6
  int v18; // ecx
  int v19; // eax
  int v20; // ecx
  int v21; // edx
  double v22; // st6
  int v23; // ecx
  int v24; // eax
  int v25; // ecx
  double v26; // st6
  int v27; // ecx
  int v28; // edx
  unsigned int v29; // ebx
  int v30; // eax
  int v31; // ecx
  double v32; // st6
  int v33; // ecx
  int v34; // [esp+8h] [ebp-54h]
  int v35; // [esp+Ch] [ebp-50h]
  float v36; // [esp+Ch] [ebp-50h]
  int v37; // [esp+10h] [ebp-4Ch] BYREF
  int v38; // [esp+14h] [ebp-48h]
  char String1[64]; // [esp+18h] [ebp-44h] BYREF

  (*(void (__thiscall **)(int, int, int *))(*(_DWORD *)a2 + 44))(a2, a3, &v37);
  if ( !v37 )
    return 0;
  memset(String1, 0, sizeof(String1));
  v5 = *((_DWORD *)this + 10);
  (*(void (__thiscall **)(int, char *, int))(*(_DWORD *)v37 + 8))(v37, String1, 7);
  (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v37 + 20))(v37, 0);
  LOBYTE(v38) = _stricmp(String1, "Groups:") == 0;
  List_ReadItems(this, v38, v37, (_DWORD *)this + 9);
  (*(void (__thiscall **)(int))(*(_DWORD *)v37 + 4))(v37);
  v37 = 0;
  if ( !v5 )
    v5 = *((_DWORD *)this + 9);
  for ( i = v5; i; i = *(_DWORD *)(i + 4) )
  {
    v7 = *(_DWORD *)(*(_DWORD *)(i + 8) + 136);
    v8 = 0;
    v35 = v7;
    if ( v7 >= 4 )
    {
      v9 = 0;
      v10 = ((unsigned int)(v7 - 4) >> 2) + 1;
      v34 = 4 * v10;
      do
      {
        v11 = *(_DWORD *)(i + 8);
        v12 = *(_DWORD *)(v11 + 132);
        v13 = *(float *)(v12 + v9 + 16);
        v14 = v9 + v12;
        *(float *)&v38 = v13 - *(float *)(v14 + 12);
        *(_BYTE *)(v14 + 60) = *(float *)(v11 + 128) - 0.009999999776482582 <= *(float *)&v38;
        v15 = *(_DWORD *)(i + 8);
        v16 = *(_DWORD *)(v15 + 132);
        v17 = *(float *)(v16 + v9 + 100);
        v18 = v16 + v9 + 84;
        *(float *)&v38 = v17 - *(float *)(v18 + 12);
        *(_BYTE *)(v18 + 60) = *(float *)(v15 + 128) - 0.009999999776482582 <= *(float *)&v38;
        v19 = *(_DWORD *)(i + 8);
        v20 = *(_DWORD *)(v19 + 132);
        v21 = v9 + 252;
        v22 = *(float *)(v20 + v9 + 252 - 68);
        v23 = v20 + v9 + 252 - 84;
        *(float *)&v38 = v22 - *(float *)(v23 + 12);
        *(_BYTE *)(v23 + 60) = *(float *)(v19 + 128) - 0.009999999776482582 <= *(float *)&v38;
        v24 = *(_DWORD *)(i + 8);
        v25 = *(_DWORD *)(v24 + 132);
        v26 = *(float *)(v25 + v21 + 16);
        v27 = v21 + v25;
        *(float *)&v38 = v26 - *(float *)(v27 + 12);
        *(_BYTE *)(v27 + 60) = *(float *)(v24 + 128) - 0.009999999776482582 <= *(float *)&v38;
        v9 += 336;
        --v10;
      }
      while ( v10 );
      v8 = v34;
      v7 = v35;
    }
    if ( v8 < v7 )
    {
      v28 = 84 * v8;
      v29 = v7 - v8;
      do
      {
        v30 = *(_DWORD *)(i + 8);
        v31 = *(_DWORD *)(v30 + 132);
        v32 = *(float *)(v31 + v28 + 16);
        v33 = v28 + v31;
        v36 = v32 - *(float *)(v33 + 12);
        *(_BYTE *)(v33 + 60) = *(float *)(v30 + 128) - 0.009999999776482582 <= v36;
        v28 += 84;
        --v29;
      }
      while ( v29 );
    }
  }
  return 1;
}

//----- (657205E0) --------------------------------------------------------
char __thiscall ClientFX_LoadAllFXFiles(char *this, int a2)
{
  int v3; // eax
  int v4; // esi
  char Drive[4]; // [esp+4h] [ebp-314h] BYREF
  int v6; // [esp+8h] [ebp-310h]
  char *v7; // [esp+Ch] [ebp-30Ch]
  int v8; // [esp+10h] [ebp-308h]
  char Filename[256]; // [esp+14h] [ebp-304h] BYREF
  char Dir[256]; // [esp+114h] [ebp-204h] BYREF
  char Ext[256]; // [esp+214h] [ebp-104h] BYREF

  v7 = this;
  v6 = a2;
  if ( !DLL_LoadAndInitialize((int)this) )
    return 0;
  v3 = (*(int (__cdecl **)(const char *))(a2 + 8))("ClientFX");
  v8 = v3;
  if ( !v3 )
    return 0;
  v4 = v3;
  while ( *(_DWORD *)v4 != 1 )
  {
LABEL_9:
    v4 = *(_DWORD *)(v4 + 12);
    if ( !v4 )
    {
      (*(void (__cdecl **)(int))(g_pILTClient + 12))(v3);
      return 1;
    }
  }
  _splitpath(*(const char **)(v4 + 8), Drive, Dir, Filename, Ext);
  if ( _stricmp(".fxf", Ext) || ClientFX_ParseGroups(v7, v6, *(_DWORD *)(v4 + 8)) )
  {
    v3 = v8;
    goto LABEL_9;
  }
  return 0;
}

//----- (657208B0) --------------------------------------------------------
_DWORD *ClientFXMgr_GetInstance()
{
  if ( (dword_65A5AA30 & 1) == 0 )
  {
    dword_65A5AA30 |= 1u;
    BufferState_Clear(dword_65A5AA00);
    atexit(sub_659A6C90);
  }
  return dword_65A5AA00;
}
// 65A5AA00: using guessed type _DWORD dword_65A5AA00[12];
// 65A5AA30: using guessed type int dword_65A5AA30;

//----- (657208E0) --------------------------------------------------------
double __cdecl Timer_GetDeltaSeconds(int a1, _DWORD *a2)
{
  DWORD v2; // eax
  unsigned int v3; // edx

  v2 = GetTickCount() - a1;
  v3 = v2 - *a2;
  *a2 = v2;
  return (float)((double)v3 / 1000.0);
}

//----- (65720920) --------------------------------------------------------
int __thiscall FXInstance_ClearParent(int *this)
{
  int result; // eax

  result = *this;
  if ( *this && *(int **)(result + 120) == this )
    *(_DWORD *)(result + 120) = 0;
  *this = 0;
  return result;
}

//----- (65720940) --------------------------------------------------------
char __thiscall ClientFX_GetFlag108(_BYTE *this)
{
  return *(this + 108);
}

//----- (65720960) --------------------------------------------------------
void __thiscall FXInstance_Enable(_DWORD *this)
{
  *(this + 28) = 1;
}

//----- (65720970) --------------------------------------------------------
void __thiscall KeyFrame_ResetIfDirty(int **this)
{
  int *v1; // ecx

  v1 = *(this + 30);
  if ( v1 )
    FXInstance_ClearParent(v1);
}

//----- (65720980) --------------------------------------------------------
char __thiscall ClientFXMgr_SetRenderMode(_DWORD *this, int a2, int a3)
{
  *(this + 2) = a2;
  dword_65A5AA38 = a2;
  return 1;
}
// 65A5AA38: using guessed type int dword_65A5AA38;

//----- (657209B0) --------------------------------------------------------
int GetGlobal_65A5AA38()
{
  return dword_65A5AA38;
}
// 65A5AA38: using guessed type int dword_65A5AA38;

//----- (657209D0) --------------------------------------------------------
int FX_GetNextInstanceId()
{
  return dword_65A5AA34++;
}
// 65A5AA34: using guessed type int dword_65A5AA34;

//----- (657209E0) --------------------------------------------------------
void __thiscall ClientFXMgr_GetElapsedTime(int this)
{
  if ( *(_BYTE *)(this + 36) )
    Timer_GetDeltaSeconds(*(_DWORD *)(this + 44), (_DWORD *)(this + 40));
  else
    (*(void (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 104))(g_pILTClient);
}

//----- (65720A10) --------------------------------------------------------
char __thiscall FXDetailLevel_IsEnabled(_DWORD *this, unsigned int a2)
{
  if ( a2 < 7 )
    return byte_65A51DCC[3 * a2 + *this];
  else
    return 1;
}

//----- (65720A80) --------------------------------------------------------
void __thiscall LinkedList_FreeAll(_DWORD *this)
{
  _DWORD *v2; // esi
  void *v3; // eax

  v2 = (_DWORD *)*this;
  if ( *this )
  {
    do
    {
      v3 = v2;
      if ( v2 )
        v2 = (_DWORD *)v2[1];
      operator delete(v3);
    }
    while ( v2 );
    *this = 0;
    *(this + 1) = 0;
  }
  *(this + 2) = 0;
}

//----- (65720AC0) --------------------------------------------------------
void __thiscall LinkedList_RemoveAndDelete(_DWORD *this, int *a2)
{
  int v2; // eax
  _DWORD *v4; // ecx

  v2 = *a2;
  v4 = (_DWORD *)a2[1];
  if ( *a2 )
  {
    if ( v4 )
    {
      *(_DWORD *)(v2 + 4) = v4;
      *v4 = v2;
    }
    else
    {
      *(_DWORD *)(v2 + 4) = 0;
      *(this + 1) = v2;
    }
  }
  else if ( v4 )
  {
    *v4 = 0;
    *this = v4;
  }
  else
  {
    *(this + 1) = 0;
    *this = 0;
  }
  operator delete(a2);
  --*(this + 2);
}

//----- (65720BA0) --------------------------------------------------------
void __thiscall LinkedList_RemoveNode(_DWORD *this, int *a2)
{
  int v2; // eax
  _DWORD *v4; // ecx

  v2 = *a2;
  v4 = (_DWORD *)a2[1];
  if ( *a2 )
  {
    if ( v4 )
    {
      *(_DWORD *)(v2 + 4) = v4;
      *v4 = v2;
    }
    else
    {
      *(_DWORD *)(v2 + 4) = 0;
      *(this + 1) = v2;
    }
  }
  else if ( v4 )
  {
    *v4 = 0;
    *this = v4;
  }
  else
  {
    *(this + 1) = 0;
    *this = 0;
  }
  operator delete(a2);
  --*(this + 2);
}

//----- (65720C30) --------------------------------------------------------
_DWORD *__thiscall LinkedList_MergeList(_DWORD *this, _DWORD *a2)
{
  _DWORD *result; // eax
  int v3; // edx

  result = a2;
  if ( a2[2] )
  {
    v3 = *(this + 1);
    if ( v3 )
    {
      *(_DWORD *)(v3 + 4) = *a2;
      *(_DWORD *)*a2 = *(this + 1);
    }
    else
    {
      *this = *a2;
    }
    *(this + 1) = a2[1];
    *(this + 2) += a2[2];
    a2[2] = 0;
    *a2 = 0;
    a2[1] = 0;
  }
  return result;
}

//----- (65720CE0) --------------------------------------------------------
int __thiscall List_GetHead(void *this)
{
  return *(_DWORD *)this;
}

//----- (65720CF0) --------------------------------------------------------
int __thiscall List_GetTail(_DWORD *this)
{
  return *(this + 1);
}

//----- (65720D00) --------------------------------------------------------
BOOL __thiscall FXHandle_IsInvalid(_DWORD *this)
{
  return *this == -1;
}

//----- (65720D10) --------------------------------------------------------
BOOL __thiscall List_IsEmpty(_DWORD *this)
{
  return *this == 0;
}

//----- (65720D20) --------------------------------------------------------
BOOL __thiscall Bitmask_HasBit(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (65720D40) --------------------------------------------------------
_DWORD *__thiscall BitMask32_ClearBit(_DWORD *this, char a2)
{
  *this &= ~(1 << a2);
  return this;
}

//----- (65720D60) --------------------------------------------------------
int __thiscall GetField1(_DWORD *this)
{
  return *(this + 1);
}

//----- (65720D80) --------------------------------------------------------
int __thiscall GetSlotIndexFromAddr(void *this, unsigned int a2)
{
  if ( a2 < (unsigned int)this + 12 || a2 >= (unsigned int)this + 3980 )
    return 32;
  else
    return ((int)(a2 - (_DWORD)this - 12) >> 2) / 31;
}

//----- (65720DD0) --------------------------------------------------------
int __thiscall sub_65720DD0(void *this, int a2)
{
  return (int)this + 124 * a2 + 12;
}

//----- (65720DF0) --------------------------------------------------------
int __thiscall sub_65720DF0(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (65720E20) --------------------------------------------------------
int __thiscall sub_65720E20(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (65720E40) --------------------------------------------------------
int __thiscall GetField2(_DWORD *this)
{
  return *(this + 2);
}

//----- (65720E50) --------------------------------------------------------
int __thiscall LinkedList_Unlink(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (65720EB0) --------------------------------------------------------
int __thiscall LinkedList_InsertAfter(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( v3 )
      *(_DWORD *)(v3 + 4) = this;
    *(this + 1) = a2;
    *(this + 2) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(a2 + 8) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (65720EF0) --------------------------------------------------------
_DWORD *__thiscall Pair_Init(_DWORD *this, int a2, int a3)
{
  *this = a2;
  *(this + 1) = a3;
  return this;
}

//----- (657210B0) --------------------------------------------------------
int __thiscall FXInstance_WriteUInt8(_DWORD *this, unsigned __int8 a2)
{
  return (*(int (__thiscall **)(_DWORD, _DWORD, int))(*(_DWORD *)*this + 36))(*this, a2, 8);
}

//----- (657210D0) --------------------------------------------------------
int __thiscall FXInstance_WriteUInt32(_DWORD *this, int a2)
{
  return (*(int (__thiscall **)(_DWORD, int, int))(*(_DWORD *)*this + 36))(*this, a2, 32);
}

//----- (65721130) --------------------------------------------------------
int __thiscall FXInstance_Release(int *this)
{
  int v1; // ecx
  int result; // eax

  v1 = *this;
  if ( v1 )
    return (*(int (__thiscall **)(int))(*(_DWORD *)v1 + 8))(v1);
  return result;
}

//----- (65721150) --------------------------------------------------------
char __thiscall FXLinkedList_ContainsId(_DWORD *this, int a2)
{
  int v2; // eax

  v2 = *(this + 1);
  if ( !v2 )
    return 0;
  while ( *(_DWORD *)(v2 + 12) != a2 )
  {
    v2 = *(_DWORD *)(v2 + 4);
    if ( !v2 )
      return 0;
  }
  return 1;
}

//----- (65721190) --------------------------------------------------------
void __thiscall FXInstance_Destroy(_DWORD *this, int *a2)
{
  int *v2; // ebx
  _DWORD *v4; // esi
  int v5; // eax
  int v6; // ecx
  int (__cdecl **Instance)(int); // eax

  v2 = a2;
  if ( a2 )
  {
    v4 = (_DWORD *)a2[3];
    if ( v4 )
    {
      v5 = *(this + 1);
      if ( v5 )
      {
        do
        {
          v6 = *(_DWORD *)(v5 + 12);
          if ( v6 )
          {
            if ( *(_DWORD *)(v6 + 16) == v4[3] )
              *(_DWORD *)(v6 + 16) = 0;
          }
          v5 = *(_DWORD *)(v5 + 4);
        }
        while ( v5 );
        v2 = a2;
      }
      (*(void (__thiscall **)(_DWORD *))(*v4 + 8))(v4);
      Instance = (int (__cdecl **)(int))ClientFXMgr_GetInstance();
      FXCallback_Invoke(Instance, (int)v4);
    }
    LinkedList_RemoveAndDelete(this + 1, v2);
  }
}

//----- (65721200) --------------------------------------------------------
int *__thiscall FXInstanceList_DestroyAll(int **this)
{
  int *result; // eax
  int *v3; // esi

  result = *(this + 1);
  if ( result )
  {
    do
    {
      v3 = (int *)result[1];
      FXInstance_Destroy(this, result);
      result = v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (65721230) --------------------------------------------------------
_DWORD *__thiscall KeyFrameData_Copy(_DWORD *this, _DWORD *a2)
{
  qmemcpy(this, a2, 0x44u);
  qmemcpy(this + 17, a2 + 17, 0x25u);
  *(this + 27) = a2[27];
  *(this + 28) = a2[28];
  *(this + 29) = a2[29];
  *(this + 30) = a2[30];
  *(this + 31) = a2[31];
  *(this + 32) = a2[32];
  return this;
}

//----- (657212D0) --------------------------------------------------------
void __stdcall FX_UpdateWithTiming(_DWORD *__saved_registers, int __return_address)
{
  double v2; // st7
  double v3; // st7
  double v4; // st6
  double v5; // st7
  double v6; // st7
  float v7; // [esp+4h] [ebp-20h]
  double v8; // [esp+14h] [ebp-10h]
  float v9; // [esp+1Ch] [ebp-8h]
  float v10; // [esp+20h] [ebp-4h]
  float v11; // [esp+30h] [ebp+Ch]
  float v12; // [esp+30h] [ebp+Ch]

  v2 = *(float *)(__return_address + 64);
  if ( *(_BYTE *)(__return_address + 68) )
    v2 = Rand_FloatInRange(0.0, *(float *)(__return_address + 64));
  v10 = v2;
  v3 = v10;
  if ( v10 >= 0.0099999998 )
  {
    v11 = *(float *)(__return_address + 76);
    v4 = v11;
    if ( v11 < 0.001 )
    {
      v11 = v10;
      v4 = v10;
    }
    v9 = 0.0;
    if ( v3 >= v4 + 0.0 )
    {
      v5 = v4;
      v8 = v4 + 0.0;
      do
      {
        v7 = v5;
        (*(void (__thiscall **)(_DWORD *, _DWORD))(*__saved_registers + 16))(__saved_registers, LODWORD(v7));
        __saved_registers[7] &= ~1u;
        v9 = v8;
        v5 = v11;
        v8 = v9 + v11;
      }
      while ( v8 <= v10 );
      v3 = v10;
    }
    v6 = v3 - v9;
    if ( v6 > 0.009999999776482582 )
    {
      v12 = v6;
      (*(void (__thiscall **)(_DWORD *, _DWORD))(*__saved_registers + 16))(__saved_registers, LODWORD(v12));
      __saved_registers[7] &= ~1u;
    }
  }
}

//----- (657213D0) --------------------------------------------------------
void __stdcall FX_HandlePause(int a1, int *a2)
{
  int v2; // esi
  int v3; // eax

  v2 = a2[3];
  if ( !*(_BYTE *)(a1 + 76) || *(_BYTE *)(a1 + 78) )
  {
    FXInstance_Destroy((_DWORD *)a1, a2);
  }
  else
  {
    v3 = (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(v2 + 4) + 4))(*(_DWORD *)(v2 + 4));
    (*(void (__thiscall **)(int, _DWORD, _DWORD, _DWORD, int))(*(_DWORD *)v3 + 84))(v3, *(_DWORD *)(v2 + 12), 0, 0, 1);
    *(_DWORD *)(v2 + 28) &= 0xFFFFFFF8;
  }
}

//----- (65721450) --------------------------------------------------------
char __stdcall ClientFX_Pause(_BYTE *a1)
{
  char result; // al
  int v2; // ecx
  int v3; // esi
  int v4; // edi
  int v5; // eax

  result = ClientFX_GetFlag108(a1);
  if ( !result )
  {
    v3 = *(_DWORD *)(v2 + 4);
    for ( *(_BYTE *)(v2 + 108) = 1; v3; v3 = *(_DWORD *)(v3 + 4) )
    {
      *(_DWORD *)(*(_DWORD *)(v3 + 12) + 28) |= 8u;
      result = (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(v3 + 12) + 24))(*(_DWORD *)(v3 + 12));
      if ( !result )
      {
        v4 = *(_DWORD *)(v3 + 12);
        v5 = (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(v4 + 4) + 4))(*(_DWORD *)(v4 + 4));
        result = (*(int (__thiscall **)(int, _DWORD, _DWORD, _DWORD, int))(*(_DWORD *)v5 + 84))(
                   v5,
                   *(_DWORD *)(v4 + 12),
                   0,
                   0,
                   1);
      }
    }
  }
  return result;
}
// 65721460: variable 'v2' is possibly undefined

//----- (657214C0) --------------------------------------------------------
char __stdcall ClientFX_Resume(_BYTE *a1)
{
  int v1; // eax
  int v2; // ecx
  int v3; // esi
  int v4; // edi
  int v5; // eax

  LOBYTE(v1) = ClientFX_GetFlag108(a1);
  if ( (_BYTE)v1 )
  {
    v3 = *(_DWORD *)(v2 + 4);
    for ( *(_BYTE *)(v2 + 108) = 0; v3; v3 = *(_DWORD *)(v3 + 4) )
    {
      *(_DWORD *)(*(_DWORD *)(v3 + 12) + 28) &= ~8u;
      v1 = *(_DWORD *)(v3 + 12);
      if ( (*(_DWORD *)(v1 + 28) & 2) != 0 )
      {
        v4 = *(_DWORD *)(v3 + 12);
        v5 = (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(v1 + 4) + 4))(*(_DWORD *)(v1 + 4));
        LOBYTE(v1) = (*(int (__thiscall **)(int, _DWORD, _DWORD, int, int))(*(_DWORD *)v5 + 84))(
                       v5,
                       *(_DWORD *)(v4 + 12),
                       0,
                       1,
                       1);
      }
    }
  }
  return v1;
}
// 657214D0: variable 'v2' is possibly undefined

//----- (65721630) --------------------------------------------------------
double __thiscall Vector3_DistanceSquared(float *this, float *a2)
{
  float v3; // [esp+0h] [ebp-Ch]
  float v4; // [esp+4h] [ebp-8h]
  float v5; // [esp+8h] [ebp-4h]

  v3 = *this - *a2;
  v4 = *(this + 1) - a2[1];
  v5 = *(this + 2) - a2[2];
  return (float)(v3 * v3 + v4 * v4 + v5 * v5);
}

//----- (657216B0) --------------------------------------------------------
char __thiscall FXLinkedList_InsertNode(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v5; // eax
  _DWORD *v7; // edx
  _DWORD *v8; // eax

  if ( *this )
  {
    v8 = operator new(0x14u);
    if ( !v8 )
      return 0;
    *v8 = 0;
    v8[1] = 0;
    *(_DWORD *)*this = v8;
    v8[1] = *this;
    v8[2] = a2;
    v8[3] = a3;
    v8[4] = a4;
    *this = v8;
  }
  else
  {
    v5 = operator new(0x14u);
    if ( v5 )
    {
      *v5 = 0;
      v5[1] = 0;
    }
    else
    {
      v5 = 0;
    }
    *this = v5;
    if ( !v5 )
      return 0;
    v5[2] = a2;
    v5[3] = a3;
    v5[4] = a4;
    if ( !*(this + 1) )
    {
      v7 = (_DWORD *)*this;
      ++*(this + 2);
      *(this + 1) = v7;
      return 1;
    }
  }
  ++*(this + 2);
  return 1;
}

//----- (65721760) --------------------------------------------------------
char __thiscall LinkedList_Append(_DWORD *this, int a2)
{
  _DWORD *v3; // eax
  int v5; // edx
  _DWORD *v6; // eax

  if ( *(this + 1) )
  {
    v6 = operator new(0xCu);
    if ( !v6 )
      return 0;
    *v6 = 0;
    v6[1] = 0;
    *(_DWORD *)(*(this + 1) + 4) = v6;
    *v6 = *(this + 1);
    v6[2] = a2;
    *(this + 1) = v6;
  }
  else
  {
    v3 = operator new(0xCu);
    if ( v3 )
    {
      *v3 = 0;
      v3[1] = 0;
    }
    else
    {
      v3 = 0;
    }
    *(this + 1) = v3;
    if ( !v3 )
      return 0;
    v3[2] = a2;
    if ( !*this )
    {
      v5 = *(this + 1);
      ++*(this + 2);
      *this = v5;
      return 1;
    }
  }
  ++*(this + 2);
  return 1;
}

//----- (65721810) --------------------------------------------------------
_DWORD *__thiscall FXList_FindByType(int *this, _DWORD *a2, unsigned int a3)
{
  _DWORD *Field1; // esi
  unsigned int SlotIndexFromAddr; // edi

  Field1 = (_DWORD *)*this;
  SlotIndexFromAddr = 0;
  if ( *this )
  {
    do
    {
      SlotIndexFromAddr = GetSlotIndexFromAddr(Field1, a3);
      if ( SlotIndexFromAddr < 0x20 )
        break;
      Field1 = (_DWORD *)GetField1(Field1);
    }
    while ( Field1 );
  }
  Pair_Init(a2, (int)Field1, SlotIndexFromAddr);
  return a2;
}

//----- (65721860) --------------------------------------------------------
int __thiscall FXList_RemoveItem(int *this, _DWORD *a2)
{
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx
  int result; // eax

  v3 = (_DWORD *)*this;
  if ( a2 == v3 )
    *this = GetField1(v3);
  v4 = (_DWORD *)*(this + 1);
  if ( a2 == v4 )
    *(this + 1) = GetField2(v4);
  LinkedList_Unlink(a2);
  result = LinkedList_InsertAfter(a2, *(this + 2));
  *(this + 2) = (int)a2;
  return result;
}

//----- (657218B0) --------------------------------------------------------
BOOL __thiscall FXList_GetSlotIndex(unsigned int *this)
{
  _DWORD *v2; // ecx
  BOOL result; // eax
  unsigned int v4; // eax

  v2 = (_DWORD *)*this;
  result = v2 && (v4 = *(this + 1), v4 < 0x20) && Bitmask_HasBit(v2, v4);
  return result;
}

//----- (657218D0) --------------------------------------------------------
int __thiscall FXBitmask_Allocate(int *this, int a2)
{
  int v3; // eax

  v3 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( Bitmask_HasBit(this, 31) || GetField1(this) )
        return 0;
      if ( List_IsEmpty(this) )
        v3 = 0;
      else
        v3 = sub_65720DF0(this) + 1;
    }
  }
  else
  {
    if ( FXHandle_IsInvalid(this) )
      return 0;
    v3 = sub_65720E20(this);
  }
  *this |= 1 << v3;
  return sub_65720DD0(this, v3);
}

//----- (657219D0) --------------------------------------------------------
float *__thiscall sub_657219D0(float *this, char *Source, int a3, float *a4, float *a5)
{
  const char *v6; // eax

  *(this + 12) = 0.0;
  *(this + 13) = 0.0;
  *(this + 14) = 0.0;
  *(this + 15) = 1.0;
  memset(this, 0, 0x84u);
  v6 = Source;
  if ( this )
  {
    if ( !Source )
      v6 = byte_659A8B98;
    strncpy((char *)this, v6, 0x1Fu);
    *((_BYTE *)this + 31) = 0;
  }
  *((_DWORD *)this + 8) = a3;
  *(this + 9) = *a4;
  *(this + 10) = a4[1];
  *(this + 11) = a4[2];
  *(this + 12) = *a5;
  *(this + 13) = a5[1];
  *(this + 14) = a5[2];
  *(this + 15) = a5[3];
  return this;
}

//----- (65721AA0) --------------------------------------------------------
int __thiscall FXInstance_ReleaseAndClear(int *this)
{
  int v2; // ecx
  int result; // eax

  v2 = *this;
  if ( v2 )
    result = (*(int (__thiscall **)(int))(*(_DWORD *)v2 + 8))(v2);
  *this = 0;
  return result;
}

//----- (65721AC0) --------------------------------------------------------
int *__thiscall FXInstance_Clone(_DWORD *this, int *a2)
{
  int v2; // eax

  v2 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)*this + 28))(*this);
  *a2 = v2;
  if ( v2 )
    (*(void (__thiscall **)(int))(*(_DWORD *)v2 + 4))(v2);
  return a2;
}

//----- (65721B30) --------------------------------------------------------
int __thiscall FXInstance_Init(int this)
{
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  *(float *)(this + 16) = 0.0;
  *(float *)(this + 20) = 0.0;
  *(float *)(this + 24) = 0.0;
  *(float *)(this + 28) = 0.0;
  *(float *)(this + 32) = 0.0;
  *(float *)(this + 36) = 0.0;
  *(float *)(this + 40) = 0.0;
  *(float *)(this + 44) = 0.0;
  *(float *)(this + 48) = 0.0;
  *(float *)(this + 52) = 1.0;
  *(_DWORD *)(this + 56) = -1;
  *(_DWORD *)(this + 60) = 0;
  *(_DWORD *)(this + 64) = 0;
  *(_DWORD *)(this + 68) = 0;
  *(_DWORD *)(this + 72) = 0;
  *(_BYTE *)(this + 76) = 0;
  *(_BYTE *)(this + 77) = 1;
  *(_BYTE *)(this + 78) = 0;
  *(_BYTE *)(this + 79) = 0;
  *(float *)(this + 80) = 0.0;
  *(float *)(this + 84) = 0.0;
  *(float *)(this + 88) = 0.0;
  *(float *)(this + 92) = 0.0;
  *(float *)(this + 96) = 0.0;
  *(float *)(this + 100) = 0.0;
  *(_DWORD *)(this + 104) = 0;
  *(_BYTE *)(this + 108) = 0;
  *(_DWORD *)(this + 112) = 0;
  *(_DWORD *)(this + 116) = 0;
  *(_DWORD *)(this + 120) = 0;
  return this;
}

//----- (65721BB0) --------------------------------------------------------
void __thiscall FXMgr_Update(int **this)
{
  int Global_65A5AA38; // eax
  int v3; // edx

  KeyFrame_ResetIfDirty(this);
  FXInstanceList_DestroyAll(this);
  if ( *(this + 26) )
  {
    Global_65A5AA38 = GetGlobal_65A5AA38();
    (*(void (__thiscall **)(int, int))(*(_DWORD *)Global_65A5AA38 + 112))(Global_65A5AA38, v3);
  }
  LinkedList_FreeAll(this + 1);
}
// 65721C01: variable 'v3' is possibly undefined

//----- (65721D90) --------------------------------------------------------
int __thiscall FXKey_CreateEffect(int this, char *String1, int a3, int a4, int a5)
{
  int v6; // edi
  _DWORD *Instance; // eax
  int v8; // eax
  int result; // eax
  int (__cdecl **v10)(int); // eax
  float String2[16]; // [esp+14h] [ebp-88h] BYREF
  int v12; // [esp+54h] [ebp-48h]
  float v13; // [esp+8Ch] [ebp-10h]
  float v14; // [esp+90h] [ebp-Ch]
  float v15; // [esp+94h] [ebp-8h]

  v6 = 0;
  Instance = ClientFXMgr_GetInstance();
  v8 = FXKeyArray_FindByName(Instance, String1);
  if ( !v8 )
    return v6;
  result = (*(int (**)(void))(v8 + 132))();
  v6 = result;
  if ( !result )
    return result;
  *(_DWORD *)a3 = FX_GetNextInstanceId();
  if ( (*(unsigned __int8 (__thiscall **)(int, _DWORD, char *, int, int))(*(_DWORD *)v6 + 4))(
         v6,
         *(_DWORD *)(this + 8),
         dword_65ABF768,
         a3,
         a4) )
  {
    return v6;
  }
  if ( *(_BYTE *)(a3 + 84) )
  {
    sub_657219D0(String2, (char *)(a3 + 84), *(_DWORD *)(a3 + 4), (float *)(a3 + 16), (float *)(a3 + 28));
    v13 = *(float *)(a3 + 60);
    v14 = *(float *)(a3 + 64);
    v15 = *(float *)(a3 + 68);
    v12 = a5;
    ClientFX_CreateInstance((_BYTE *)this, a3, (char *)String2, 1, 0);
  }
  (*(void (__thiscall **)(int))(*(_DWORD *)v6 + 8))(v6);
  v10 = (int (__cdecl **)(int))ClientFXMgr_GetInstance();
  FXCallback_Invoke(v10, v6);
  return 0;
}

//----- (65721EA0) --------------------------------------------------------
char __thiscall ClientFX_UpdateKeyframe(float *this, float *a2, int a3)
{
  int v3; // esi
  int v4; // eax
  int v6; // eax

  v3 = a3;
  v4 = *(_DWORD *)(a3 + 60);
  if ( !v4
    || (a3 = 0,
        (*(void (__thiscall **)(int, int, int, int *))(*(_DWORD *)dword_65A5A6E8 + 76))(dword_65A5A6E8, v4, 2, &a3),
        (a3 & 0x4000) == 0) )
  {
    if ( !*(_DWORD *)(v3 + 112) )
      goto LABEL_10;
  }
  if ( *(_DWORD *)(v3 + 12) && !*(_DWORD *)(v3 + 116) && *(this + 1) < Vector3_DistanceSquared((float *)(v3 + 28), a2) )
  {
    v6 = *(_DWORD *)(v3 + 4);
    if ( v6 )
    {
      while ( *(_BYTE *)(*(_DWORD *)(v6 + 16) + 81) )
      {
        v6 = *(_DWORD *)(v6 + 4);
        if ( !v6 )
          goto LABEL_10;
      }
      goto LABEL_11;
    }
LABEL_10:
    ClientFX_Pause((_BYTE *)v3);
    return ClientFX_GetFlag108((_BYTE *)v3);
  }
LABEL_11:
  ClientFX_Resume((_BYTE *)v3);
  return ClientFX_GetFlag108((_BYTE *)v3);
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;

//----- (65721F50) --------------------------------------------------------
void __thiscall ClientFX_UpdateInstance(void *this, int a2, float a3, float a4)
{
  int *v4; // eax
  int v5; // esi
  int v6; // edi
  int v7; // ecx
  int v8; // eax
  int v9; // eax
  double v10; // st7
  unsigned int v11; // ecx
  double v12; // st7
  char v13; // bl
  float v14; // [esp+14h] [ebp-14h]
  float v15; // [esp+14h] [ebp-14h]
  float v16; // [esp+14h] [ebp-14h]
  float v17; // [esp+14h] [ebp-14h]
  float v18; // [esp+14h] [ebp-14h]
  int *v19; // [esp+18h] [ebp-10h]
  int *v20; // [esp+1Ch] [ebp-Ch]
  float v21; // [esp+20h] [ebp-8h]
  float v22; // [esp+20h] [ebp-8h]
  float v23; // [esp+20h] [ebp-8h]
  char v24; // [esp+26h] [ebp-2h]
  char v25; // [esp+27h] [ebp-1h]

  v4 = *(int **)(a2 + 4);
  v24 = *(_BYTE *)(a2 + 76);
  v20 = v4;
  if ( v4 )
  {
    while ( 1 )
    {
      v5 = v4[3];
      v21 = a3;
      v6 = v4[4];
      v7 = *(_DWORD *)(v5 + 28);
      v19 = (int *)v4[1];
      if ( (v7 & 2) == 0 )
      {
        v14 = *(float *)(v6 + 12);
        if ( *(_BYTE *)(v6 + 60) || v14 >= (double)a3 && a4 >= (double)v14 )
        {
          *(float *)(v5 + 36) = 0.0;
          *(_DWORD *)(v5 + 28) = v7 & 0xFFFFFFF8 | 3;
          v8 = (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(v5 + 4) + 4))(*(_DWORD *)(v5 + 4));
          (*(void (__thiscall **)(int, _DWORD, _DWORD, int, int))(*(_DWORD *)v8 + 84))(
            v8,
            *(_DWORD *)(v5 + 12),
            0,
            1,
            1);
          FX_UpdateWithTiming((_DWORD *)v5, v6);
          v21 = v14;
        }
      }
      v9 = *(_DWORD *)(v5 + 28);
      if ( (v9 & 2) == 0 )
        goto LABEL_38;
      if ( (v9 & 4) == 0 )
        goto LABEL_16;
      v15 = *(float *)(v6 + 12);
      if ( !*(_BYTE *)(a2 + 76) || *(_BYTE *)(a2 + 78) )
        goto LABEL_16;
      v10 = v15;
      if ( v21 <= (double)v15 && a4 >= v10 )
        break;
      v12 = v21;
LABEL_18:
      if ( (*(_DWORD *)(v5 + 28) & 4) == 0 )
      {
        v23 = a4;
        if ( *(float *)(v6 + 16) > (double)a4 || *(float *)(v6 + 16) < v12 )
        {
          v13 = 0;
        }
        else
        {
          v13 = 1;
          v23 = *(float *)(v6 + 16);
        }
        v16 = v23 - v12;
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 16))(v5, LODWORD(v16));
        *(_DWORD *)(v5 + 28) &= ~1u;
        if ( v13 )
        {
          if ( *(_BYTE *)(v6 + 60) && v24 )
          {
            if ( *(float *)(v6 + 64) < 0.001 )
            {
              *(float *)(v5 + 36) = 0.0;
            }
            else
            {
              v17 = fmod(*(float *)(v5 + 36), *(float *)(*(_DWORD *)(v5 + 112) + 8));
              *(float *)(v5 + 36) = v17;
            }
          }
          else
          {
            *(_DWORD *)(v5 + 28) |= 4u;
          }
        }
        v12 = v23;
      }
      if ( (*(_DWORD *)(v5 + 28) & 4) != 0 )
      {
        v18 = a4 - v12;
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 16))(v5, LODWORD(v18));
        if ( !*(_BYTE *)(v6 + 69) || (v25 = 1, !*(_BYTE *)(a2 + 77)) )
          v25 = 0;
        if ( (*(unsigned __int8 (__thiscall **)(int))(*(_DWORD *)v5 + 32))(v5) || !v25 )
        {
          FX_HandlePause(a2, v20);
          v20 = v19;
          goto LABEL_39;
        }
      }
LABEL_38:
      v20 = v19;
LABEL_39:
      if ( !v19 )
        return;
      v4 = v20;
    }
    v22 = v10 - v21;
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 16))(v5, LODWORD(v22));
    v11 = *(_DWORD *)(v5 + 28) & 0xFFFFFFFB;
    *(float *)(v5 + 36) = 0.0;
    *(_DWORD *)(v5 + 28) = v11 | 3;
    FX_UpdateWithTiming((_DWORD *)v5, v6);
    v21 = v15;
LABEL_16:
    v12 = v21;
    goto LABEL_18;
  }
}

//----- (657221B0) --------------------------------------------------------
char __thiscall FXGroup_CreateInstance(int *this, int a2, int a3)
{
  int v4; // eax
  int v5; // ecx
  int v6; // edx
  double v7; // st7
  int v8; // eax
  int v9; // edi
  int v10; // ecx
  bool v11; // zf
  double v12; // st7
  double v13; // st7
  _DWORD *v14; // eax
  int v15; // edx
  int Effect; // eax
  int v17; // edi
  int v18; // eax
  int v21[29]; // [esp+10h] [ebp-78h] BYREF

  if ( !a2 || !a3 )
    return 0;
  memset(v21, 0, sizeof(v21));
  v21[4] = *(int *)(a2 + 28);
  v4 = *(_DWORD *)(a2 + 64);
  v5 = *(_DWORD *)(a2 + 56);
  v21[5] = *(int *)(a2 + 32);
  v6 = *(_DWORD *)(a2 + 72);
  v7 = *(float *)(a2 + 36);
  v21[2] = v4;
  *(float *)&v21[6] = v7;
  v8 = *(this + 13);
  v9 = *(_DWORD *)(a2 + 60);
  v21[7] = *(int *)(a2 + 40);
  v21[0] = v5;
  v10 = *(_DWORD *)(a2 + 68);
  v21[8] = *(int *)(a2 + 44);
  v21[19] = v6;
  LOBYTE(v6) = *(_BYTE *)(a2 + 79);
  v21[9] = *(int *)(a2 + 48);
  v11 = *(_BYTE *)(a3 + 20) == 0;
  v21[10] = *(int *)(a2 + 52);
  v21[3] = v10;
  v12 = *(float *)(a2 + 80);
  LOBYTE(v21[11]) = v6;
  *(float *)&v21[12] = v12;
  v21[20] = v8;
  v13 = *(float *)(a2 + 84);
  v21[18] = v9;
  *(float *)&v21[13] = v13;
  v21[14] = *(int *)(a2 + 88);
  v21[15] = *(int *)(a2 + 92);
  v21[16] = *(int *)(a2 + 96);
  v21[17] = *(int *)(a2 + 100);
  if ( !v11 )
  {
    v14 = *(_DWORD **)(a2 + 4);
    if ( v14 )
    {
      while ( v14[2] != *(_DWORD *)(a3 + 24) )
      {
        v14 = (_DWORD *)v14[1];
        if ( !v14 )
          goto LABEL_10;
      }
      if ( FXLinkedList_ContainsId((_DWORD *)a2, v14[3]) )
        v21[18] = *(_DWORD *)(v15 + 12);
    }
  }
LABEL_10:
  Effect = FXKey_CreateEffect((int)this, *(char **)a3, (int)v21, *(_DWORD *)(a3 + 4), v9);
  v17 = Effect;
  if ( !Effect )
    return 0;
  v18 = (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(Effect + 4) + 4))(*(_DWORD *)(Effect + 4));
  (*(void (__thiscall **)(int, _DWORD, _DWORD, _DWORD, int))(*(_DWORD *)v18 + 84))(v18, *(_DWORD *)(v17 + 12), 0, 0, 1);
  *(_DWORD *)(v17 + 28) &= 0xFFFFFFF0;
  FXLinkedList_InsertNode((_DWORD *)(a2 + 4), *(_DWORD *)(a3 + 8), v17, a3);
  return 1;
}
// 65722293: variable 'v15' is possibly undefined

//----- (65722350) --------------------------------------------------------
_DWORD *__thiscall sub_65722350(_DWORD *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = GetField1(v2);
    LinkedList_Unlink(v3);
  }
  else
  {
    v3 = (_DWORD *)sub_65721950();
  }
  sub_65720E70(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = v3;
  result = v3;
  if ( v4 )
    *this = v3;
  return result;
}
// 65720E70: using guessed type int __thiscall sub_65720E70(_DWORD, _DWORD);
// 65721950: using guessed type int sub_65721950(void);

//----- (657223C0) --------------------------------------------------------
_DWORD *__thiscall LTObject_Create(_DWORD *this)
{
  *this = 0;
  if ( (*(int (__thiscall **)(int, _DWORD *))(*(_DWORD *)dword_65A5A6E8 + 36))(dword_65A5A6E8, this) )
    *this = 0;
  else
    (*(void (__thiscall **)(_DWORD))(*(_DWORD *)*this + 4))(*this);
  return this;
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;

//----- (65722400) --------------------------------------------------------
void __thiscall ClientFXMgr_RemoveFXInstance(int *this, int **a2, char a3)
{
  _DWORD *Head; // edi
  char Tail; // al
  unsigned int v6[2]; // [esp+8h] [ebp-8h] BYREF

  if ( a2 )
  {
    FXList_FindByType(this, v6, (unsigned int)a2);
    if ( FXList_GetSlotIndex(v6) )
    {
      if ( a3 )
        FXMgr_Update(a2);
      Head = (_DWORD *)List_GetHead(v6);
      Tail = List_GetTail(v6);
      BitMask32_ClearBit(Head, Tail);
      --*(this + 3);
      if ( List_IsEmpty(Head) )
        FXList_RemoveItem(this, Head);
    }
  }
}

//----- (65722520) --------------------------------------------------------
int *__thiscall FXGroup_GetOrCreateInstance(int **this, int a2, int a3)
{
  int *Field1; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  int v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (Field1 = *(this + 1)) == 0 || Bitmask_HasBit(Field1, 31) )
    {
LABEL_10:
      result = sub_65722350(this);
      Field1 = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    Field1 = *this;
    if ( !*this )
      goto LABEL_10;
    while ( FXHandle_IsInvalid(Field1) )
    {
      Field1 = (int *)GetField1(Field1);
      if ( !Field1 )
        goto LABEL_10;
    }
  }
  if ( !Field1 )
    goto LABEL_10;
LABEL_11:
  v6 = FXBitmask_Allocate(Field1, a2);
  v7 = v6;
  if ( v6 )
    *(this + 3) = (int *)((char *)*(this + 3) + 1);
  v8 = std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(124, this, v6);
  if ( v8 )
    FXInstance_Init(v8);
  return (int *)v7;
}
// 65720D70: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (657225F0) --------------------------------------------------------
float *__thiscall ClientFX_CreateInstance(_BYTE *a1, char *String2, int a4, char a5)
{
  _DWORD *Instance; // eax
  float *result; // eax
  float *v7; // ebx
  float *v8; // esi
  unsigned int v9; // ecx
  _BYTE *v10; // ecx
  double v11; // st7
  double v12; // st6
  int v13; // eax
  _BYTE *v14; // edi
  int v15; // edx
  float v16; // [esp+0h] [ebp-18h]
  float v17; // [esp+4h] [ebp-14h]
  char *v19; // [esp+20h] [ebp+8h]
  int v20; // [esp+28h] [ebp+10h]

  ClientFXMgr_ForEachInstance(a1);
  Instance = ClientFXMgr_GetInstance();
  result = (float *)FXLinkedList_FindByName(Instance, String2);
  v7 = result;
  if ( !result )
    return result;
  result = (float *)FXGroup_GetOrCreateInstance((int **)dword_65A5AA3C, 0, 1);
  v8 = result;
  if ( !result )
    return result;
  *(_DWORD *)result = v7;
  *((_DWORD *)result + 14) = FX_GetNextInstanceId();
  v8[15] = *((float *)String2 + 16);
  *((_BYTE *)v8 + 76) = String2[32] & 1;
  *((_BYTE *)v8 + 77) = (*((_DWORD *)String2 + 8) & 2) == 0;
  *((_DWORD *)v8 + 16) |= 16 * (*((_DWORD *)String2 + 8) & 4);
  v9 = *((_DWORD *)String2 + 8);
  *((_BYTE *)v8 + 78) = 0;
  *((_DWORD *)v8 + 29) = (v9 >> 2) & 1;
  v8[18] = *((float *)String2 + 25);
  *((_BYTE *)v8 + 79) = String2[104];
  v8[20] = *((float *)String2 + 27);
  v8[21] = *((float *)String2 + 28);
  v8[22] = *((float *)String2 + 29);
  v8[23] = *((float *)String2 + 30);
  v8[24] = *((float *)String2 + 31);
  v8[25] = *((float *)String2 + 32);
  v8[30] = 0.0;
  v8[5] = v7[32];
  if ( a5 )
    v10 = a1 + 24;
  else
    v10 = a1 + 12;
  LinkedList_Append(v10, (int)v8);
  v11 = 0.0;
  if ( *((_DWORD *)v8 + 29) )
  {
    v8[7] = 0.0;
    v8[8] = 0.0;
    v8[9] = 0.0;
    v8[10] = 0.0;
    v8[11] = 0.0;
    v8[12] = 0.0;
    v12 = 1.0;
LABEL_11:
    v8[13] = v12;
    goto LABEL_12;
  }
  v13 = *((_DWORD *)String2 + 16);
  if ( !v13 )
  {
    v8[7] = *((float *)String2 + 9);
    v8[8] = *((float *)String2 + 10);
    v8[9] = *((float *)String2 + 11);
    v8[10] = *((float *)String2 + 12);
    v8[11] = *((float *)String2 + 13);
    v8[12] = *((float *)String2 + 14);
    v12 = *((float *)String2 + 15);
    goto LABEL_11;
  }
  (*(void (__thiscall **)(int, int, float *))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, v13, v8 + 7);
  (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 148))(
    g_pILTClient,
    *((_DWORD *)String2 + 16),
    v8 + 10);
  v11 = 0.0;
LABEL_12:
  v8[4] = v11;
  v19 = 0;
  if ( *((_DWORD *)v7 + 34) )
  {
    v20 = 0;
    do
    {
      v14 = a1;
      if ( FXDetailLevel_IsEnabled(a1, *(_DWORD *)(v20 + *((_DWORD *)v7 + 33) + 72))
        && (a1[49] || !*(_BYTE *)(v15 + 80)) )
      {
        FXGroup_CreateInstance((int *)a1, (int)v8, v15);
        v11 = 0.0;
      }
      v20 += 84;
      ++v19;
    }
    while ( (unsigned int)v19 < *((_DWORD *)v7 + 34) );
  }
  else
  {
    v14 = a1;
  }
  if ( a4 )
  {
    FXInstance_Enable(v8);
    v17 = v11;
    v16 = v11;
    ClientFX_UpdateInstance(v14, (int)v8, v16, v17);
  }
  return v8;
}
// 65722796: variable 'v15' is possibly undefined

//----- (657228A0) --------------------------------------------------------
char __thiscall FX_CreateAndLink(_BYTE *this, int *a2, char *String2, int a4, char a5)
{
  _BYTE *v5; // edx
  float *Instance; // eax

  v5 = this;
  if ( a2 )
    FXInstance_ClearParent(a2);
  Instance = ClientFX_CreateInstance(v5, (int)a2, String2, a4, a5);
  if ( !Instance )
    return 0;
  if ( a2 )
  {
    *a2 = (int)Instance;
    *((_DWORD *)Instance + 30) = a2;
  }
  return 1;
}
// 657228C2: variable 'v5' is possibly undefined

//----- (657228F0) --------------------------------------------------------
char __cdecl FX_LoadString(_DWORD *a1, unsigned __int8 a2, _BYTE *a3)
{
  char String2[132]; // [esp+4h] [ebp-88h] BYREF

  if ( !a3 )
    return 0;
  KeyFrameData_Copy(String2, a1);
  return FX_CreateAndLink(a3, 0, String2, a2, 1);
}

//----- (65722960) --------------------------------------------------------
int (__cdecl *__thiscall ClientFXMgr_ForEachInstance(void *this))(int, int)
{
  int (__cdecl **Instance)(int, int); // eax

  Instance = (int (__cdecl **)(int, int))ClientFXMgr_GetInstance();
  return Callback_InvokeWithArgs(Instance, (int)FX_LoadString, (int)this);
}

//----- (65722980) --------------------------------------------------------
char __userpurge ClientFXMgr_UpdateAll@<al>(int this@<ecx>, double st7_0@<st0>, int a2)
{
  int v5; // eax
  int (__cdecl **Instance)(int); // eax
  int (__cdecl **v7)(int); // eax
  _DWORD *v8; // eax
  int v9; // esi
  void *v10; // ebx
  int i; // esi
  char v12; // bl
  double j; // st7
  bool v14; // zf
  int v15; // [esp+8h] [ebp-2Ch]
  float v16[3]; // [esp+14h] [ebp-20h] BYREF
  void *v17; // [esp+20h] [ebp-14h]
  float v18; // [esp+24h] [ebp-10h]
  float v19; // [esp+28h] [ebp-Ch]
  float v20; // [esp+2Ch] [ebp-8h]
  void *v21; // [esp+30h] [ebp-4h]
  float v22; // [esp+3Ch] [ebp+8h]

  if ( !*(_DWORD *)(this + 52) )
    return 0;
  ClientFXMgr_GetElapsedTime(this);
  v19 = st7_0;
  LinkedList_MergeList((_DWORD *)(this + 12), (_DWORD *)(this + 24));
  v5 = (*(int (__cdecl **)(const char *))(*(_DWORD *)(this + 8) + 248))("UpdateClientFX");
  if ( (!v5
     || ((double (__thiscall *)(_DWORD, int))*(_DWORD *)(**(_DWORD **)(this + 8) + 92))(*(_DWORD *)(this + 8), v5) != 0.0)
    && !*(_BYTE *)(this + 48) )
  {
    ClientFXMgr_ForEachInstance((void *)this);
    (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 152))(
      g_pILTClient,
      *(_DWORD *)(this + 52),
      v16);
    Instance = (int (__cdecl **)(int))ClientFXMgr_GetInstance();
    Callback_Invoke4(Instance, a2 != 0);
    v15 = *(_DWORD *)dword_65ABF704;
    v7 = (int (__cdecl **)(int))ClientFXMgr_GetInstance();
    Callback_Invoke3(v7, v15);
    v8 = *(_DWORD **)(this + 12);
    v21 = v8;
    if ( v8 )
    {
      while ( 1 )
      {
        v9 = v8[2];
        v10 = (void *)v8[1];
        v17 = v10;
        if ( ClientFX_UpdateKeyframe((float *)this, v16, v9) )
        {
          for ( i = *(_DWORD *)(v9 + 4); i; i = *(_DWORD *)(i + 4) )
            (*(void (__stdcall **)(float))(**(_DWORD **)(i + 12) + 20))(COERCE_FLOAT(LODWORD(v19)));
          v21 = v10;
        }
        else
        {
          v12 = 0;
          v20 = *(float *)(v9 + 16);
          for ( j = v20 + v19; ; j = v22 - *(float *)(v9 + 20) )
          {
            v22 = j;
            v18 = *(float *)(v9 + 20);
            if ( *(float *)(v9 + 20) > (double)v22 )
            {
              v18 = j;
              v12 = 1;
            }
            ClientFX_UpdateInstance((void *)this, v9, v20, v18);
            if ( v12 )
              break;
            v20 = 0.0;
          }
          v14 = *(_DWORD *)(v9 + 12) == 0;
          *(float *)(v9 + 16) = v22;
          if ( v14 )
          {
            ClientFXMgr_RemoveFXInstance((int *)dword_65A5AA3C, (int **)v9, 1);
            LinkedList_RemoveNode((_DWORD *)(this + 12), (int *)v21);
          }
          v21 = v17;
          v10 = v17;
        }
        if ( !v10 )
          break;
        v8 = v21;
      }
    }
  }
  return 1;
}

//----- (65722B30) --------------------------------------------------------
char __thiscall ClientFXMgr_RenderAll(_DWORD *this, int a2)
{
  int (__cdecl **Instance)(int); // eax
  int (__cdecl **v5)(int); // eax
  int v6; // eax
  int v7; // edi
  int v8; // edx
  int v9; // esi
  int v10; // edx
  int v11; // [esp-4h] [ebp-8h]
  int v12; // [esp+Ch] [ebp+8h]

  if ( !*(this + 13) )
    return 0;
  ClientFXMgr_ForEachInstance(this);
  Instance = (int (__cdecl **)(int))ClientFXMgr_GetInstance();
  Callback_Invoke4(Instance, a2 != 0);
  v11 = *(_DWORD *)dword_65ABF704;
  v5 = (int (__cdecl **)(int))ClientFXMgr_GetInstance();
  Callback_Invoke3(v5, v11);
  v6 = *(this + 3);
  while ( v6 )
  {
    v7 = *(_DWORD *)(v6 + 8);
    v8 = *(_DWORD *)(v7 + 4);
    v6 = *(_DWORD *)(v6 + 4);
    v12 = v6;
    if ( v8 )
    {
      do
      {
        v9 = *(_DWORD *)(v8 + 4);
        if ( !ClientFX_GetFlag108((_BYTE *)v7) )
        {
          *(_DWORD *)(*(_DWORD *)(v10 + 12) + 20) = *(this + 13);
          (*(void (__thiscall **)(_DWORD))(**(_DWORD **)(v10 + 12) + 28))(*(_DWORD *)(v10 + 12));
        }
        v8 = v9;
      }
      while ( v9 );
      v6 = v12;
    }
  }
  return 1;
}
// 65722B9E: variable 'v10' is possibly undefined

//----- (65722E30) --------------------------------------------------------
float *__thiscall Msg2_Default_Handler(int this, int a2, int *a3)
{
  int v3; // eax
  unsigned __int8 (__thiscall *v4)(int *, int); // edx
  int v5; // edi
  float *result; // eax
  char v8; // al
  float *v9; // eax
  int v10; // eax
  int *v11; // eax
  int (__thiscall *v12)(int *, _BYTE *); // edx
  int v13; // eax
  int (__thiscall *v14)(int *); // edx
  char v15; // al
  float *v16; // eax
  float *v17; // edi
  void (__thiscall *v18)(int, int, int); // eax
  int v19; // eax
  int (__thiscall *v20)(int, int, _DWORD); // eax
  int v21; // ecx
  int v22; // eax
  int v23; // eax
  void (__thiscall *v24)(_DWORD, int, int); // eax
  int v25; // eax
  int (__thiscall *v26)(int, int, _DWORD); // eax
  int v27; // [esp-8h] [ebp-228h]
  int v28; // [esp-8h] [ebp-228h]
  _BYTE v29[16]; // [esp+10h] [ebp-210h] BYREF
  _BYTE v30[12]; // [esp+20h] [ebp-200h] BYREF
  _BYTE v31[12]; // [esp+2Ch] [ebp-1F4h] BYREF
  _BYTE v32[12]; // [esp+38h] [ebp-1E8h] BYREF
  int v33[3]; // [esp+44h] [ebp-1DCh] BYREF
  int v34; // [esp+50h] [ebp-1D0h] BYREF
  int v35; // [esp+54h] [ebp-1CCh] BYREF
  int v36; // [esp+58h] [ebp-1C8h] BYREF
  int v37; // [esp+5Ch] [ebp-1C4h] BYREF
  float v38; // [esp+60h] [ebp-1C0h]
  float v39; // [esp+64h] [ebp-1BCh]
  float v40; // [esp+68h] [ebp-1B8h]
  int v41; // [esp+6Ch] [ebp-1B4h]
  float v42; // [esp+70h] [ebp-1B0h]
  float v43; // [esp+74h] [ebp-1ACh]
  float v44; // [esp+78h] [ebp-1A8h]
  int v45; // [esp+7Ch] [ebp-1A4h] BYREF
  _BYTE v46[5]; // [esp+83h] [ebp-19Dh] BYREF
  bool v47; // [esp+8Ah] [ebp-196h]
  unsigned __int8 v48; // [esp+8Bh] [ebp-195h]
  float String2[16]; // [esp+8Ch] [ebp-194h] BYREF
  int v50; // [esp+CCh] [ebp-154h]
  int v51; // [esp+F0h] [ebp-130h]
  bool v52; // [esp+F4h] [ebp-12Ch]
  float v53; // [esp+F8h] [ebp-128h]
  float v54; // [esp+FCh] [ebp-124h]
  float v55; // [esp+100h] [ebp-120h]
  char Source[256]; // [esp+110h] [ebp-110h] BYREF
  int v57; // [esp+21Ch] [ebp-4h]

  v3 = *a3;
  *(float *)&v37 = 0.0;
  v4 = *(unsigned __int8 (__thiscall **)(int *, int))(v3 + 60);
  v38 = 0.0;
  v5 = a2;
  v39 = 0.0;
  v40 = 1.0;
  v46[4] = 0;
  v48 = 1;
  v42 = 0.0;
  v43 = 0.0;
  v44 = 0.0;
  *(_DWORD *)v46 = v4(a3, 8);
  result = (float *)(v46[0] - 100);
  switch ( v46[0] )
  {
    case 0x64:
      if ( a2 )
      {
        (*(void (__thiscall **)(int *, char *, int))(*a3 + 76))(a3, Source, 256);
        v41 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
        v8 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 8);
        v47 = v8 != 0;
        if ( v8 )
        {
          *(_DWORD *)&v46[1] = (*(int (__thiscall **)(int *))(*a3 + 100))(a3);
          v9 = (float *)(*(int (__thiscall **)(int *, _BYTE *))(*a3 + 88))(a3, v32);
          v42 = *v9;
          v43 = v9[1];
          v44 = v9[2];
        }
        (*(void (__thiscall **)(_DWORD, int, int *))(**(_DWORD **)(this + 8) + 152))(*(_DWORD *)(this + 8), a2, v33);
        (*(void (__thiscall **)(_DWORD, int, int *))(**(_DWORD **)(this + 8) + 148))(*(_DWORD *)(this + 8), a2, &v37);
        v10 = (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(this + 8) + 4))(*(_DWORD *)(this + 8));
        (*(void (__thiscall **)(int, int, int, int *))(*(_DWORD *)v10 + 76))(v10, a2, 2, &v35);
        if ( (v35 & 0x4000) == 0 )
          v48 = 0;
        goto LABEL_9;
      }
      break;
    case 0x65:
    case 0x93:
      (*(void (__thiscall **)(int *, char *, int))(*a3 + 76))(a3, Source, 256);
      v41 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
      v11 = (int *)(*(int (__thiscall **)(int *, _BYTE *))(*a3 + 88))(a3, v30);
      v33[0] = *v11;
      v33[1] = v11[1];
      v12 = *(int (__thiscall **)(int *, _BYTE *))(*a3 + 92);
      v33[2] = v11[2];
      v13 = v12(a3, v29);
      v37 = *(int *)v13;
      v38 = *(float *)(v13 + 4);
      v39 = *(float *)(v13 + 8);
      v14 = *(int (__thiscall **)(int *))(*a3 + 100);
      v40 = *(float *)(v13 + 12);
      v5 = v14(a3);
      v15 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 8);
      v47 = v15 != 0;
      if ( v15 )
      {
        *(_DWORD *)&v46[1] = (*(int (__thiscall **)(int *))(*a3 + 100))(a3);
        v16 = (float *)(*(int (__thiscall **)(int *, _BYTE *))(*a3 + 88))(a3, v31);
        v42 = *v16;
        v43 = v16[1];
        v44 = v16[2];
      }
LABEL_9:
      sub_657219D0(String2, Source, v41, (float *)v33, (float *)&v37);
      v53 = v42;
      v54 = v43;
      v52 = v47;
      v55 = v44;
      v50 = v5;
      v51 = *(_DWORD *)&v46[1];
      result = ClientFX_CreateInstance((_BYTE *)this, (char *)String2, v48, 0);
      v17 = result;
      if ( result && v46[0] == 0x93 )
      {
        LTObject_Create(&v45);
        v18 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v45 + 36);
        v57 = 2;
        v18(v45, 147, 8);
        v19 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
        (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v45 + 36))(v45, v19, 32);
        (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)v45 + 36))(v45, *((_DWORD *)v17 + 14), 32);
        v27 = *FXInstance_Clone(&v45, &v34);
        v20 = *(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 324);
        LOBYTE(v57) = 3;
        result = (float *)v20(g_pILTClient, v27, 0);
        LOBYTE(v57) = 2;
        if ( v34 )
          result = (float *)(*(int (__thiscall **)(int))(*(_DWORD *)v34 + 8))(v34);
        v21 = v45;
        goto LABEL_20;
      }
      break;
    case 0x94:
      v22 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
      v23 = sub_65721420(this, v22);
      if ( v23 )
        sub_65722BD0(this, v23);
      result = (float *)(*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 1);
      if ( result )
      {
        LTObject_Create(&v46[1]);
        v24 = *(void (__thiscall **)(_DWORD, int, int))(**(_DWORD **)&v46[1] + 36);
        v57 = 0;
        v24(*(_DWORD *)&v46[1], 147, 8);
        v25 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
        (*(void (__thiscall **)(_DWORD, int, int))(**(_DWORD **)&v46[1] + 36))(*(_DWORD *)&v46[1], v25, 32);
        (*(void (__thiscall **)(_DWORD, _DWORD, int))(**(_DWORD **)&v46[1] + 36))(*(_DWORD *)&v46[1], 0, 32);
        v28 = *FXInstance_Clone(&v46[1], &v36);
        v26 = *(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 324);
        LOBYTE(v57) = 1;
        result = (float *)v26(g_pILTClient, v28, 0);
        LOBYTE(v57) = 0;
        if ( v36 )
          result = (float *)(*(int (__thiscall **)(int))(*(_DWORD *)v36 + 8))(v36);
        v21 = *(_DWORD *)&v46[1];
LABEL_20:
        v57 = -1;
        if ( v21 )
          result = (float *)(*(int (__thiscall **)(int))(*(_DWORD *)v21 + 8))(v21);
      }
      break;
    default:
      return result;
  }
  return result;
}
// 65721420: using guessed type int __thiscall sub_65721420(_DWORD, _DWORD);
// 65722BD0: using guessed type int __thiscall sub_65722BD0(_DWORD, _DWORD);

//----- (65723CB0) --------------------------------------------------------
int __cdecl RBTree_FindMin(int a1)
{
  int result; // eax
  int i; // ecx

  result = a1;
  for ( i = *(_DWORD *)(a1 + 8); !*(_BYTE *)(i + 21); i = *(_DWORD *)(i + 8) )
    result = i;
  return result;
}

//----- (65723CD0) --------------------------------------------------------
_DWORD *__cdecl RBTree_FindMax(_DWORD *a1)
{
  _DWORD *result; // eax
  int *v2; // ecx

  result = a1;
  v2 = (int *)*a1;
  if ( !*(_BYTE *)(*a1 + 21) )
  {
    do
    {
      result = v2;
      v2 = (int *)*v2;
    }
    while ( !*((_BYTE *)v2 + 21) );
  }
  return result;
}

//----- (65723D10) --------------------------------------------------------
int __thiscall RBTree22_RotateRight(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // esi
  int v4; // ecx
  _DWORD *v5; // ecx

  result = *a2;
  *a2 = *(_DWORD *)(*a2 + 8);
  v3 = *(_DWORD *)(result + 8);
  if ( !*(_BYTE *)(v3 + 21) )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(result + 4) = a2[1];
  v4 = *(this + 1);
  if ( a2 == *(_DWORD **)(v4 + 4) )
  {
    *(_DWORD *)(v4 + 4) = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  else
  {
    v5 = (_DWORD *)a2[1];
    if ( a2 == (_DWORD *)v5[2] )
      v5[2] = result;
    else
      *v5 = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  return result;
}

//----- (65724000) --------------------------------------------------------
void __cdecl __noreturn ThrowLengthError_Vector7(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657240A0) --------------------------------------------------------
void __cdecl __noreturn ThrowLengthError_Vector8(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65724140) --------------------------------------------------------
void __cdecl __noreturn ThrowLengthError_Vector9(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65724220) --------------------------------------------------------
void __cdecl __noreturn ThrowLengthError_Vector10(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657242C0) --------------------------------------------------------
void __cdecl __noreturn ThrowLengthError_Vector11(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65724470) --------------------------------------------------------
int *__thiscall RBTreeIter_Advance(int **this)
{
  int *result; // eax
  int *v2; // edx

  result = *this;
  if ( !*((_BYTE *)*this + 21) )
  {
    v2 = (int *)result[2];
    if ( *((_BYTE *)v2 + 21) )
    {
      for ( result = (int *)result[1]; !*((_BYTE *)result + 21); result = (int *)result[1] )
      {
        if ( *this != (int *)result[2] )
          break;
        *this = result;
      }
      *this = result;
    }
    else
    {
      result = (int *)*v2;
      if ( !*(_BYTE *)(*v2 + 21) )
      {
        do
        {
          v2 = result;
          result = (int *)*result;
        }
        while ( !*((_BYTE *)result + 21) );
      }
      *this = v2;
    }
  }
  return result;
}

//----- (65724510) --------------------------------------------------------
int __thiscall RBTreeIter22_Decrement(int **this)
{
  int *v1; // eax
  int result; // eax
  int v3; // edx

  v1 = *this;
  if ( *((_BYTE *)*this + 21) )
  {
    result = v1[2];
    *this = (int *)result;
  }
  else
  {
    v3 = *v1;
    if ( *(_BYTE *)(*v1 + 21) )
    {
      for ( result = v1[1]; !*(_BYTE *)(result + 21); result = *(_DWORD *)(result + 4) )
      {
        if ( *this != *(int **)result )
          break;
        *this = (int *)result;
      }
      if ( !*((_BYTE *)*this + 21) )
        *this = (int *)result;
    }
    else
    {
      for ( result = *(_DWORD *)(v3 + 8); !*(_BYTE *)(result + 21); result = *(_DWORD *)(result + 8) )
        v3 = result;
      *this = (int *)v3;
    }
  }
  return result;
}

//----- (657246E0) --------------------------------------------------------
void *__cdecl Vector4_Allocate2(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 4 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(4 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65724740) --------------------------------------------------------
void *__cdecl Vector4_Allocate3(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 4 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(4 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (657247A0) --------------------------------------------------------
void *__cdecl Vector4_Allocate4(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 4 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(4 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65724810) --------------------------------------------------------
void *__cdecl Vector4_Allocate5(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 4 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(4 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65724870) --------------------------------------------------------
void *__cdecl Vector4_Allocate6(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 4 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(4 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65724990) --------------------------------------------------------
BOOL __thiscall BitMask32_IsEmpty(_DWORD *this)
{
  return *this == -1;
}

//----- (657249A0) --------------------------------------------------------
BOOL __thiscall Vector_IsEmpty1(_DWORD *this)
{
  return *this == 0;
}

//----- (657249B0) --------------------------------------------------------
BOOL __thiscall BitMask32_TestBit(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (657249F0) --------------------------------------------------------
int __thiscall BitMask32_GetValue1(_DWORD *this)
{
  return *(this + 1);
}

//----- (65724A30) --------------------------------------------------------
BOOL __thiscall BitMask32_IsEmpty2(_DWORD *this)
{
  return *this == -1;
}

//----- (65724A40) --------------------------------------------------------
BOOL __thiscall Vector_IsEmpty2(_DWORD *this)
{
  return *this == 0;
}

//----- (65724A50) --------------------------------------------------------
BOOL __thiscall BitMask32_TestBit2(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (65724A90) --------------------------------------------------------
int __thiscall BitMask32_GetValue2(_DWORD *this)
{
  return *(this + 1);
}

//----- (65724AD0) --------------------------------------------------------
BOOL __thiscall BitMask32_IsEmpty3(_DWORD *this)
{
  return *this == -1;
}

//----- (65724AE0) --------------------------------------------------------
BOOL __thiscall Vector_IsEmpty3(_DWORD *this)
{
  return *this == 0;
}

//----- (65724AF0) --------------------------------------------------------
BOOL __thiscall BitMask32_TestBit3(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (65724B30) --------------------------------------------------------
int __thiscall BitMask32_GetValue3(_DWORD *this)
{
  return *(this + 1);
}

//----- (65724B70) --------------------------------------------------------
BOOL __thiscall BitMask32_IsEmpty4(_DWORD *this)
{
  return *this == -1;
}

//----- (65724B80) --------------------------------------------------------
BOOL __thiscall Vector_IsEmpty4(_DWORD *this)
{
  return *this == 0;
}

//----- (65724B90) --------------------------------------------------------
BOOL __thiscall BitMask32_TestBit4(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (65724BD0) --------------------------------------------------------
int __thiscall BitMask32_GetValue4(_DWORD *this)
{
  return *(this + 1);
}

//----- (65724F60) --------------------------------------------------------
int __thiscall Array728_GetAtIndex(void *this, int a2)
{
  return (int)this + 728 * a2 + 12;
}

//----- (65724F80) --------------------------------------------------------
int __thiscall Bitmask_GetHighestBit1(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (65724FB0) --------------------------------------------------------
int __thiscall Bitmask_GetLowestBit1(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (65724FE0) --------------------------------------------------------
int __thiscall LinkedList_Unlink2(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (65725000) --------------------------------------------------------
int __thiscall LinkedList_InsertBefore1(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (65725100) --------------------------------------------------------
int __thiscall Array120_GetAtIndex1(void *this, int a2)
{
  return (int)this + 120 * a2 + 12;
}

//----- (65725120) --------------------------------------------------------
int __thiscall Bitmask_GetHighestBit2(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (65725150) --------------------------------------------------------
int __thiscall Bitmask_GetLowestBit2(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (65725180) --------------------------------------------------------
int __thiscall LinkedList_Unlink3(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (657251A0) --------------------------------------------------------
int __thiscall LinkedList_InsertBefore2(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (657252A0) --------------------------------------------------------
int __thiscall Array112_GetAtIndex(void *this, int a2)
{
  return (int)this + 112 * a2 + 12;
}

//----- (657252C0) --------------------------------------------------------
int __thiscall Bitmask_GetHighestBit3(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (657252F0) --------------------------------------------------------
int __thiscall Bitmask_GetLowestBit3(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (65725320) --------------------------------------------------------
int __thiscall LinkedList_Unlink4(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (65725340) --------------------------------------------------------
int __thiscall LinkedList_InsertBefore3(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (65725440) --------------------------------------------------------
int __thiscall Array120_GetAtIndex2(void *this, int a2)
{
  return (int)this + 120 * a2 + 12;
}

//----- (65725460) --------------------------------------------------------
int __thiscall Bitmask_GetHighestBit4(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (65725490) --------------------------------------------------------
int __thiscall Bitmask_GetLowestBit4(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (657254C0) --------------------------------------------------------
int __thiscall LinkedList_Unlink5(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (657254E0) --------------------------------------------------------
int __thiscall LinkedList_InsertBefore4(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (657259D0) --------------------------------------------------------
void __cdecl __noreturn ThrowLengthError_Vector12(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65725AB0) --------------------------------------------------------
void *__cdecl Vector8_AllocateChecked(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 8 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(8 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65725E00) --------------------------------------------------------
_DWORD *__thiscall RBTree22_RotateLeft(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  _DWORD *v4; // ecx

  result = *(_DWORD **)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *result;
  if ( !*(_BYTE *)(*result + 21) )
    *(_DWORD *)(*result + 4) = a2;
  result[1] = *(_DWORD *)(a2 + 4);
  v3 = *(this + 1);
  if ( a2 == *(_DWORD *)(v3 + 4) )
  {
    *(_DWORD *)(v3 + 4) = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  else
  {
    v4 = *(_DWORD **)(a2 + 4);
    if ( a2 == *v4 )
      *v4 = result;
    else
      v4[2] = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  return result;
}

//----- (65726340) --------------------------------------------------------
_DWORD *__cdecl Array_FillValue1(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; ++result )
    *result = *a3;
  return result;
}

//----- (65726360) --------------------------------------------------------
_DWORD *__cdecl Array_FillValue2(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; ++result )
    *result = *a3;
  return result;
}

//----- (65726380) --------------------------------------------------------
_DWORD *__cdecl Array_FillValue3(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; ++result )
    *result = *a3;
  return result;
}

//----- (657263A0) --------------------------------------------------------
_DWORD *__cdecl Array_FillValue4(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; ++result )
    *result = *a3;
  return result;
}

//----- (657263C0) --------------------------------------------------------
_DWORD *__cdecl Array_FillValue5(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; ++result )
    *result = *a3;
  return result;
}

//----- (657264D0) --------------------------------------------------------
int __thiscall EntityPool1_AllocSlot(int *this, int a2)
{
  int LowestBit1; // eax

  LowestBit1 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( BitMask32_TestBit(this, 31) || BitMask32_GetValue1(this) )
        return 0;
      if ( Vector_IsEmpty1(this) )
        LowestBit1 = 0;
      else
        LowestBit1 = Bitmask_GetHighestBit1(this) + 1;
    }
  }
  else
  {
    if ( BitMask32_IsEmpty(this) )
      return 0;
    LowestBit1 = Bitmask_GetLowestBit1(this);
  }
  *this |= 1 << LowestBit1;
  return Array728_GetAtIndex(this, LowestBit1);
}

//----- (65726640) --------------------------------------------------------
int __thiscall EntityPool2_AllocSlot(int *this, int a2)
{
  int LowestBit2; // eax

  LowestBit2 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( BitMask32_TestBit2(this, 31) || BitMask32_GetValue2(this) )
        return 0;
      if ( Vector_IsEmpty2(this) )
        LowestBit2 = 0;
      else
        LowestBit2 = Bitmask_GetHighestBit2(this) + 1;
    }
  }
  else
  {
    if ( BitMask32_IsEmpty2(this) )
      return 0;
    LowestBit2 = Bitmask_GetLowestBit2(this);
  }
  *this |= 1 << LowestBit2;
  return Array120_GetAtIndex1(this, LowestBit2);
}

//----- (657267B0) --------------------------------------------------------
int __thiscall EntityPool3_AllocSlot(int *this, int a2)
{
  int LowestBit3; // eax

  LowestBit3 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( BitMask32_TestBit3(this, 31) || BitMask32_GetValue3(this) )
        return 0;
      if ( Vector_IsEmpty3(this) )
        LowestBit3 = 0;
      else
        LowestBit3 = Bitmask_GetHighestBit3(this) + 1;
    }
  }
  else
  {
    if ( BitMask32_IsEmpty3(this) )
      return 0;
    LowestBit3 = Bitmask_GetLowestBit3(this);
  }
  *this |= 1 << LowestBit3;
  return Array112_GetAtIndex(this, LowestBit3);
}

//----- (65726920) --------------------------------------------------------
int __thiscall EntityPool4_AllocSlot(int *this, int a2)
{
  int LowestBit4; // eax

  LowestBit4 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( BitMask32_TestBit4(this, 31) || BitMask32_GetValue4(this) )
        return 0;
      if ( Vector_IsEmpty4(this) )
        LowestBit4 = 0;
      else
        LowestBit4 = Bitmask_GetHighestBit4(this) + 1;
    }
  }
  else
  {
    if ( BitMask32_IsEmpty4(this) )
      return 0;
    LowestBit4 = Bitmask_GetLowestBit4(this);
  }
  *this |= 1 << LowestBit4;
  return Array120_GetAtIndex2(this, LowestBit4);
}

//----- (65726BD0) --------------------------------------------------------
_DWORD *Allocate23308()
{
  _DWORD *result; // eax

  result = operator new(0x5B0Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (65726BF0) --------------------------------------------------------
_DWORD *Allocate3852()
{
  _DWORD *result; // eax

  result = operator new(0xF0Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (65726C10) --------------------------------------------------------
_DWORD *Allocate3596()
{
  _DWORD *result; // eax

  result = operator new(0xE0Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (65726C30) --------------------------------------------------------
_DWORD *Allocate3852_2()
{
  _DWORD *result; // eax

  result = operator new(0xF0Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (65726F20) --------------------------------------------------------
_DWORD *__cdecl Pair8_FillValue(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; result += 2 )
  {
    *result = *a3;
    result[1] = a3[1];
  }
  return result;
}

//----- (65726FB0) --------------------------------------------------------
_DWORD *__cdecl Pair8_CopyConstruct(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 2 )
  {
    if ( result )
    {
      *result = *v3;
      result[1] = v3[1];
    }
    v3 += 2;
  }
  return result;
}

//----- (65727540) --------------------------------------------------------
_DWORD *__stdcall FXCreateParams_Alloc(int a1, int a2, int a3, _DWORD *a4, char a5)
{
  _DWORD *result; // eax

  result = operator new(0x18u);
  if ( result )
  {
    *result = a1;
    result[2] = a3;
    result[1] = a2;
    result[3] = *a4;
    result[4] = a4[1];
    *((_BYTE *)result + 20) = a5;
    *((_BYTE *)result + 21) = 0;
  }
  return result;
}

//----- (65727900) --------------------------------------------------------
int __cdecl Array4_MoveBackward1(void *Source, int a2, int a3)
{
  int v3; // eax
  int v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = a3 - 4 * v3;
  if ( v3 > 0 )
    memmove_s((void *const)(a3 - 4 * v3), 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65727940) --------------------------------------------------------
int __cdecl Array4_MoveBackward2(void *Source, int a2, int a3)
{
  int v3; // eax
  int v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = a3 - 4 * v3;
  if ( v3 > 0 )
    memmove_s((void *const)(a3 - 4 * v3), 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65727980) --------------------------------------------------------
int __cdecl Array4_MoveBackward3(void *Source, int a2, int a3)
{
  int v3; // eax
  int v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = a3 - 4 * v3;
  if ( v3 > 0 )
    memmove_s((void *const)(a3 - 4 * v3), 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (657279C0) --------------------------------------------------------
int __cdecl Array4_MoveBackward4(void *Source, int a2, int a3)
{
  int v3; // eax
  int v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = a3 - 4 * v3;
  if ( v3 > 0 )
    memmove_s((void *const)(a3 - 4 * v3), 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65727A00) --------------------------------------------------------
int __cdecl Array4_MoveBackward5(void *Source, int a2, int a3)
{
  int v3; // eax
  int v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = a3 - 4 * v3;
  if ( v3 > 0 )
    memmove_s((void *const)(a3 - 4 * v3), 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65727A40) --------------------------------------------------------
_DWORD *__thiscall EntityList1_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = BitMask32_GetValue1(v2);
    LinkedList_Unlink2(v3);
  }
  else
  {
    v3 = Allocate23308();
  }
  LinkedList_InsertBefore1(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (65727AA0) --------------------------------------------------------
_DWORD *__thiscall EntityList2_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = BitMask32_GetValue2(v2);
    LinkedList_Unlink3(v3);
  }
  else
  {
    v3 = Allocate3852();
  }
  LinkedList_InsertBefore2(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (65727B00) --------------------------------------------------------
_DWORD *__thiscall EntityList3_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = BitMask32_GetValue3(v2);
    LinkedList_Unlink4(v3);
  }
  else
  {
    v3 = Allocate3596();
  }
  LinkedList_InsertBefore3(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (65727B60) --------------------------------------------------------
_DWORD *__thiscall EntityList4_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = BitMask32_GetValue4(v2);
    LinkedList_Unlink5(v3);
  }
  else
  {
    v3 = Allocate3852_2();
  }
  LinkedList_InsertBefore4(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (65727DE0) --------------------------------------------------------
_DWORD *__cdecl Pair8_CopyBackward(int a1, int a2, _DWORD *a3)
{
  int v3; // ecx
  _DWORD *result; // eax
  int v5; // esi

  v3 = a2;
  for ( result = a3; v3 != a1; result[1] = *(_DWORD *)(v3 + 4) )
  {
    v5 = *(_DWORD *)(v3 - 8);
    v3 -= 8;
    result -= 2;
    *result = v5;
  }
  return result;
}

//----- (65727E10) --------------------------------------------------------
void __cdecl Array_FillWithValue(_DWORD *a1, int a2, _DWORD *a3)
{
  int i; // ecx

  for ( i = a2; i; a1 += 2 )
  {
    if ( a1 )
    {
      *a1 = *a3;
      a1[1] = a3[1];
    }
    --i;
  }
}

//----- (65727E80) --------------------------------------------------------
int __thiscall EntityArray_FindById(int **this, int a2)
{
  int *v2; // edx
  int *v3; // ecx
  int result; // eax

  if ( !a2 )
    return 0;
  v2 = *(this + 1);
  v3 = *(this + 2);
  if ( v2 == v3 )
    return 0;
  while ( 1 )
  {
    result = *v2;
    if ( *v2 )
    {
      if ( *(_DWORD *)(result + 8) == a2 )
        break;
    }
    if ( ++v2 == v3 )
      return 0;
  }
  return result;
}

//----- (65727EB0) --------------------------------------------------------
int __thiscall Msg2_75_Sub0_FindById(int **this, int a2)
{
  int *v2; // edx
  int *v3; // ecx
  int result; // eax

  if ( !a2 )
    return 0;
  v2 = *(this + 5);
  v3 = *(this + 6);
  if ( v2 == v3 )
    return 0;
  while ( 1 )
  {
    result = *v2;
    if ( *v2 )
    {
      if ( *(_DWORD *)(result + 8) == a2 )
        break;
    }
    if ( ++v2 == v3 )
      return 0;
  }
  return result;
}

//----- (65727EE0) --------------------------------------------------------
int __thiscall Msg2_75_Sub4_FindById(int **this, int a2)
{
  int *v2; // edx
  int *v3; // ecx
  int result; // eax

  if ( !a2 )
    return 0;
  v2 = *(this + 20);
  v3 = *(this + 21);
  if ( v2 == v3 )
    return 0;
  while ( 1 )
  {
    result = *v2;
    if ( *v2 )
    {
      if ( *(_DWORD *)(result + 8) == a2 )
        break;
    }
    if ( ++v2 == v3 )
      return 0;
  }
  return result;
}

//----- (65727F40) --------------------------------------------------------
int __thiscall Msg2_75_Sub1_FindById(int **this, int a2)
{
  int *v2; // edx
  int *v3; // ecx
  int result; // eax

  if ( !a2 )
    return 0;
  v2 = *(this + 9);
  v3 = *(this + 10);
  if ( v2 == v3 )
    return 0;
  while ( 1 )
  {
    result = *v2;
    if ( *v2 )
    {
      if ( *(_DWORD *)(result + 8) == a2 )
        break;
    }
    if ( ++v2 == v3 )
      return 0;
  }
  return result;
}

//----- (65727F70) --------------------------------------------------------
int __thiscall Msg2_75_Sub3_FindById(int **this, int a2)
{
  int *v2; // edx
  int *v3; // ecx
  int result; // eax

  if ( !a2 )
    return 0;
  v2 = *(this + 16);
  v3 = *(this + 17);
  if ( v2 == v3 )
    return 0;
  while ( 1 )
  {
    result = *v2;
    if ( *v2 )
    {
      if ( *(_DWORD *)(result + 8) == a2 )
        break;
    }
    if ( ++v2 == v3 )
      return 0;
  }
  return result;
}

//----- (65728010) --------------------------------------------------------
int __thiscall MsgId_76_Handler(int **this, int a2)
{
  int result; // eax
  int v4; // edi

  result = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 100))(a2);
  if ( result )
  {
    result = Msg2_75_Sub0_FindById(this, result);
    v4 = result;
    if ( result )
    {
      *(float *)(result + 148) = COERCE_FLOAT((*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 32));
      result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 16);
      *(_WORD *)(v4 + 702) = result;
    }
  }
  return result;
}

//----- (65728070) --------------------------------------------------------
int __thiscall MsgId_84_Handler(int **this, int a2)
{
  int result; // eax
  int v4; // esi

  result = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 100))(a2);
  if ( result )
  {
    result = Msg2_75_Sub0_FindById(this, result);
    v4 = result;
    if ( result )
    {
      result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 8);
      *(_BYTE *)(v4 + 724) = result;
    }
  }
  return result;
}

//----- (657280B0) --------------------------------------------------------
char __thiscall MsgId_9D_Handler(int **this, int a2)
{
  int v3; // eax
  int v4; // esi

  v3 = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 100))(a2);
  if ( v3 )
  {
    v3 = Msg2_75_Sub0_FindById(this, v3);
    v4 = v3;
    if ( v3 )
    {
      LOBYTE(v3) = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 1) != 0;
      *(_BYTE *)(v4 + 727) = v3;
    }
  }
  return v3;
}

//----- (65728100) --------------------------------------------------------
int __thiscall MsgId_8C_Handler(int **this, int a2)
{
  int result; // eax
  int v4; // esi

  result = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 100))(a2);
  if ( result )
  {
    result = Msg2_75_Sub0_FindById(this, result);
    v4 = result;
    if ( result )
    {
      result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 8);
      *(_BYTE *)(v4 + 725) = result;
    }
  }
  return result;
}

//----- (65728140) --------------------------------------------------------
int __thiscall MsgId_9A_Handler(int **this, int a2)
{
  int result; // eax
  int v4; // esi

  result = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 100))(a2);
  if ( result )
  {
    result = Msg2_75_Sub0_FindById(this, result);
    v4 = result;
    if ( result )
    {
      result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 8);
      *(_BYTE *)(v4 + 726) = result;
    }
  }
  return result;
}

//----- (65728180) --------------------------------------------------------
int __thiscall MsgId_83_Handler(int **this, int a2)
{
  int result; // eax

  result = a2;
  if ( a2 )
  {
    result = EntityArray_FindById(this, a2);
    if ( result )
      return (*(int (__thiscall **)(int))(*(_DWORD *)result + 16))(result);
  }
  return result;
}

//----- (65728330) --------------------------------------------------------
_DWORD *__thiscall RBTree22_EraseAndRebalance(_DWORD *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // ebx
  int v4; // edi
  _DWORD *v5; // eax
  _DWORD *v6; // edx
  int v7; // esi
  _DWORD *v8; // ecx
  int v9; // eax
  _DWORD *Max; // eax
  int v11; // ecx
  int v12; // ecx
  _DWORD *v13; // ecx
  char *v14; // ecx
  char *v15; // eax
  char v16; // dl
  _DWORD *i; // ecx
  _BYTE *v18; // eax
  int v19; // eax
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-5Ch] BYREF
  _BYTE v22[28]; // [esp+38h] [ebp-34h] BYREF
  int v23; // [esp+54h] [ebp-18h]
  void *v24; // [esp+58h] [ebp-14h]
  _DWORD *v25; // [esp+5Ch] [ebp-10h]
  int v26; // [esp+68h] [ebp-4h]

  v25 = this;
  v3 = (_DWORD *)a3;
  if ( *(_BYTE *)(a3 + 21) )
  {
    std::string::string(v22, "invalid map/set<T> iterator");
    v26 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v22);
    pExceptionObject[0] = &off_659BFD34;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVout_of_range_std__);
  }
  v24 = (void *)a3;
  RBTreeIter_Advance((int **)&a3);
  if ( *(_BYTE *)(*v3 + 21) )
  {
    v4 = v3[2];
LABEL_8:
    v7 = v3[1];
    if ( !*(_BYTE *)(v4 + 21) )
      *(_DWORD *)(v4 + 4) = v7;
    v8 = v25;
    v9 = v25[1];
    if ( *(_DWORD **)(v9 + 4) == v3 )
    {
      *(_DWORD *)(v9 + 4) = v4;
    }
    else if ( *(_DWORD **)v7 == v3 )
    {
      *(_DWORD *)v7 = v4;
    }
    else
    {
      *(_DWORD *)(v7 + 8) = v4;
    }
    if ( *(_DWORD **)v8[1] == v3 )
    {
      if ( *(_BYTE *)(v4 + 21) )
      {
        Max = (_DWORD *)v7;
      }
      else
      {
        Max = RBTree_FindMax((_DWORD *)v4);
        v8 = v25;
      }
      *(_DWORD *)v8[1] = Max;
    }
    v11 = v8[1];
    v23 = v11;
    if ( *(_DWORD **)(v11 + 8) == v3 )
    {
      if ( *(_BYTE *)(v4 + 21) )
        *(_DWORD *)(v11 + 8) = v7;
      else
        *(_DWORD *)(v23 + 8) = RBTree_FindMin(v4);
    }
    goto LABEL_36;
  }
  if ( *(_BYTE *)(v3[2] + 21) )
  {
    v4 = *v3;
    goto LABEL_8;
  }
  v5 = (_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 8);
  v6 = (_DWORD *)(a3 + 8);
  if ( (_DWORD *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*v3 + 4) = a3;
  *v5 = *v3;
  if ( v5 == (_DWORD *)v3[2] )
  {
    v7 = (int)v5;
  }
  else
  {
    v7 = v5[1];
    if ( !*(_BYTE *)(v4 + 21) )
      *(_DWORD *)(v4 + 4) = v7;
    *(_DWORD *)v7 = v4;
    *v6 = v3[2];
    *(_DWORD *)(v3[2] + 4) = v5;
  }
  v12 = v25[1];
  if ( *(_DWORD **)(v12 + 4) == v3 )
  {
    *(_DWORD *)(v12 + 4) = v5;
  }
  else
  {
    v13 = (_DWORD *)v3[1];
    if ( (_DWORD *)*v13 == v3 )
      *v13 = v5;
    else
      v13[2] = v5;
  }
  v5[1] = v3[1];
  v14 = (char *)(v3 + 5);
  v15 = (char *)(v5 + 5);
  if ( v15 != (char *)(v3 + 5) )
  {
    v16 = *v15;
    *v15 = *v14;
    *v14 = v16;
  }
LABEL_36:
  if ( *((_BYTE *)v24 + 20) == 1 )
  {
    for ( i = v25; v4 != *(_DWORD *)(i[1] + 4); v7 = *(_DWORD *)(v7 + 4) )
    {
      if ( *(_BYTE *)(v4 + 20) != 1 )
        break;
      v18 = *(_BYTE **)v7;
      if ( v4 == *(_DWORD *)v7 )
      {
        v18 = *(_BYTE **)(v7 + 8);
        if ( !v18[20] )
        {
          v18[20] = 1;
          *(_BYTE *)(v7 + 20) = 0;
          RBTree22_RotateLeft(i, v7);
          v18 = *(_BYTE **)(v7 + 8);
          i = v25;
        }
        if ( v18[21] )
          goto LABEL_54;
        if ( *(_BYTE *)(*(_DWORD *)v18 + 20) != 1 || *(_BYTE *)(*((_DWORD *)v18 + 2) + 20) != 1 )
        {
          if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 20) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v18 + 20) = 1;
            v18[20] = 0;
            RBTree22_RotateRight(i, v18);
            v18 = *(_BYTE **)(v7 + 8);
            i = v25;
          }
          v18[20] = *(_BYTE *)(v7 + 20);
          *(_BYTE *)(v7 + 20) = 1;
          *(_BYTE *)(*((_DWORD *)v18 + 2) + 20) = 1;
          RBTree22_RotateLeft(i, v7);
          break;
        }
      }
      else
      {
        if ( !v18[20] )
        {
          v18[20] = 1;
          *(_BYTE *)(v7 + 20) = 0;
          RBTree22_RotateRight(i, (_DWORD *)v7);
          v18 = *(_BYTE **)v7;
          i = v25;
        }
        if ( v18[21] )
          goto LABEL_54;
        if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 20) != 1 || *(_BYTE *)(*(_DWORD *)v18 + 20) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v18 + 20) == 1 )
          {
            *(_BYTE *)(*((_DWORD *)v18 + 2) + 20) = 1;
            v18[20] = 0;
            RBTree22_RotateLeft(i, (int)v18);
            v18 = *(_BYTE **)v7;
            i = v25;
          }
          v18[20] = *(_BYTE *)(v7 + 20);
          *(_BYTE *)(v7 + 20) = 1;
          *(_BYTE *)(*(_DWORD *)v18 + 20) = 1;
          RBTree22_RotateRight(i, (_DWORD *)v7);
          break;
        }
      }
      v18[20] = 0;
LABEL_54:
      v4 = v7;
    }
    *(_BYTE *)(v4 + 20) = 1;
  }
  operator delete(v24);
  v19 = v25[2];
  if ( v19 )
    v25[2] = v19 - 1;
  *a2 = a3;
  return a2;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD34: using guessed type void *off_659BFD34;

//----- (65728620) --------------------------------------------------------
int **__thiscall IntMap_LowerBound(int **this, int **a2, _DWORD *a3)
{
  int *v3; // edx
  int v4; // eax

  v3 = *(this + 1);
  v4 = v3[1];
  while ( !*(_BYTE *)(v4 + 21) )
  {
    if ( *(_DWORD *)(v4 + 12) >= *a3 )
    {
      v3 = (int *)v4;
      v4 = *(_DWORD *)v4;
    }
    else
    {
      v4 = *(_DWORD *)(v4 + 8);
    }
  }
  if ( v3 == *(this + 1) || *a3 < (unsigned int)v3[3] )
  {
    *a2 = *(this + 1);
    return a2;
  }
  else
  {
    *a2 = v3;
    return a2;
  }
}

//----- (65728A20) --------------------------------------------------------
int *__thiscall RBTree22_InsertAndRebalance(int **this, int *a2, char a3, int *a4, _DWORD *a5)
{
  _DWORD *v6; // ecx
  int *v7; // eax
  int **v8; // eax
  int v9; // eax
  int *v10; // eax
  int v11; // esi
  int v12; // ecx
  int *v13; // edx
  int v14; // edx
  int v15; // edx
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-50h] BYREF
  _BYTE v18[28]; // [esp+38h] [ebp-28h] BYREF
  int v19; // [esp+5Ch] [ebp-4h]
  _DWORD *v20; // [esp+74h] [ebp+14h]

  if ( (unsigned int)*(this + 2) >= 0x1FFFFFFE )
  {
    std::string::string(v18, "map/set<T> too long");
    v19 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v18);
    pExceptionObject[0] = &off_659BFD28;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
  }
  v6 = FXCreateParams_Alloc((int)*(this + 1), (int)a4, (int)*(this + 1), a5, 0);
  v7 = *(this + 1);
  *(this + 2) = (int *)((char *)*(this + 2) + 1);
  v20 = v6;
  if ( a4 == v7 )
  {
    v7[1] = (int)v6;
    **(this + 1) = (int)v6;
    (*(this + 1))[2] = (int)v6;
  }
  else if ( a3 )
  {
    *a4 = (int)v6;
    v8 = (int **)*(this + 1);
    if ( a4 == *v8 )
      *v8 = v6;
  }
  else
  {
    a4[2] = (int)v6;
    v9 = (int)*(this + 1);
    if ( a4 == *(int **)(v9 + 8) )
      *(_DWORD *)(v9 + 8) = v6;
  }
  v10 = v6 + 1;
  v11 = (int)v6;
  if ( !*(_BYTE *)(v6[1] + 20) )
  {
    do
    {
      v12 = *v10;
      v13 = *(int **)(*v10 + 4);
      if ( *v10 == *v13 )
      {
        v14 = v13[2];
        if ( *(_BYTE *)(v14 + 20) )
        {
          if ( v11 == *(_DWORD *)(v12 + 8) )
          {
            v11 = *v10;
            RBTree22_RotateLeft(this, *v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 20) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 20) = 0;
          RBTree22_RotateRight(this, *(_DWORD **)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 20) = 1;
          *(_BYTE *)(v14 + 20) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 20) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      else
      {
        v15 = *v13;
        if ( *(_BYTE *)(v15 + 20) )
        {
          if ( v11 == *(_DWORD *)v12 )
          {
            v11 = *v10;
            RBTree22_RotateRight(this, (_DWORD *)*v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 20) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 20) = 0;
          RBTree22_RotateLeft(this, *(_DWORD *)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 20) = 1;
          *(_BYTE *)(v15 + 20) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 20) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      v10 = (int *)(v11 + 4);
    }
    while ( !*(_BYTE *)(*(_DWORD *)(v11 + 4) + 20) );
    v6 = v20;
  }
  *(_BYTE *)((*(this + 1))[1] + 20) = 1;
  *a2 = (int)v6;
  return a2;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65728BF0) --------------------------------------------------------
int *__thiscall CharacterPool_AllocPlayer(int *this, int a2, int a3)
{
  int *Value1; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  int v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (Value1 = (int *)*(this + 1)) == 0 || BitMask32_TestBit(Value1, 31) )
    {
LABEL_10:
      result = EntityList1_AllocNode(this);
      Value1 = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    Value1 = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( BitMask32_IsEmpty(Value1) )
    {
      Value1 = (int *)BitMask32_GetValue1(Value1);
      if ( !Value1 )
        goto LABEL_10;
    }
  }
  if ( !Value1 )
    goto LABEL_10;
LABEL_11:
  v6 = EntityPool1_AllocSlot(Value1, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(728, this, v6);
  if ( v8 )
    PlayerCharacter_Ctor(v8);
  return (int *)v7;
}
// 65724A00: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (65728CF0) --------------------------------------------------------
int *__thiscall WeaponPool_AllocWeapon(int *this, int a2, int a3)
{
  int *Value2; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  float *v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (Value2 = (int *)*(this + 1)) == 0 || BitMask32_TestBit2(Value2, 31) )
    {
LABEL_10:
      result = EntityList2_AllocNode(this);
      Value2 = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    Value2 = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( BitMask32_IsEmpty2(Value2) )
    {
      Value2 = (int *)BitMask32_GetValue2(Value2);
      if ( !Value2 )
        goto LABEL_10;
    }
  }
  if ( !Value2 )
    goto LABEL_10;
LABEL_11:
  v6 = EntityPool2_AllocSlot(Value2, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = (float *)std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(120, this, v6);
  if ( v8 )
    WeaponSlotBase_Ctor(v8);
  return (int *)v7;
}
// 65724AA0: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (65728DF0) --------------------------------------------------------
int *__thiscall NPCPool_AllocNPC(int *this, int a2, int a3)
{
  int *Value3; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  int v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (Value3 = (int *)*(this + 1)) == 0 || BitMask32_TestBit3(Value3, 31) )
    {
LABEL_10:
      result = EntityList3_AllocNode(this);
      Value3 = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    Value3 = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( BitMask32_IsEmpty3(Value3) )
    {
      Value3 = (int *)BitMask32_GetValue3(Value3);
      if ( !Value3 )
        goto LABEL_10;
    }
  }
  if ( !Value3 )
    goto LABEL_10;
LABEL_11:
  v6 = EntityPool3_AllocSlot(Value3, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(112, this, v6);
  if ( v8 )
    NPCCharacter_Ctor(v8);
  return (int *)v7;
}
// 65724B40: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (65728EF0) --------------------------------------------------------
int *__thiscall EntityPool4_AllocEntity(int *this, int a2, int a3)
{
  int *Value4; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  int v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (Value4 = (int *)*(this + 1)) == 0 || BitMask32_TestBit4(Value4, 31) )
    {
LABEL_10:
      result = EntityList4_AllocNode(this);
      Value4 = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    Value4 = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( BitMask32_IsEmpty4(Value4) )
    {
      Value4 = (int *)BitMask32_GetValue4(Value4);
      if ( !Value4 )
        goto LABEL_10;
    }
  }
  if ( !Value4 )
    goto LABEL_10;
LABEL_11:
  v6 = EntityPool4_AllocSlot(Value4, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(120, this, v6);
  if ( v8 )
    sub_6589CDD0(v8);
  return (int *)v7;
}
// 65724BE0: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (657295B0) --------------------------------------------------------
int __thiscall RBTree22_FindOrInsert(int **this, int a2, int *a3)
{
  int *v3; // ebx
  int *v5; // esi
  int v6; // eax
  bool v7; // cl
  unsigned int v8; // edx
  int *v9; // edx
  int v10; // edx
  char v12; // [esp+Ch] [ebp-4h]

  v3 = a3;
  v5 = *(this + 1);
  v6 = v5[1];
  v7 = 1;
  v12 = 1;
  if ( !*(_BYTE *)(v6 + 21) )
  {
    v8 = *a3;
    do
    {
      v5 = (int *)v6;
      v7 = v8 < *(_DWORD *)(v6 + 12);
      v12 = v7;
      if ( v8 >= *(_DWORD *)(v6 + 12) )
        v6 = *(_DWORD *)(v6 + 8);
      else
        v6 = *(_DWORD *)v6;
    }
    while ( !*(_BYTE *)(v6 + 21) );
  }
  v9 = v5;
  a3 = v5;
  if ( v7 )
  {
    if ( v5 == (int *)**(this + 1) )
    {
      v10 = *RBTree22_InsertAndRebalance(this, (int *)&a3, 1, v5, v3);
      *(_BYTE *)(a2 + 4) = 1;
      *(_DWORD *)a2 = v10;
      return a2;
    }
    RBTreeIter22_Decrement(&a3);
    v9 = a3;
  }
  if ( v9[3] >= (unsigned int)*v3 )
  {
    *(_BYTE *)(a2 + 4) = 0;
    *(_DWORD *)a2 = v9;
  }
  else
  {
    *(_DWORD *)a2 = *RBTree22_InsertAndRebalance(this, (int *)&a3, v12, v5, v3);
    *(_BYTE *)(a2 + 4) = 1;
  }
  return a2;
}

//----- (65729720) --------------------------------------------------------
char *__stdcall Array4_MoveForward1(void *Source, int a2, char *Destination)
{
  int v3; // eax
  char *v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = &Destination[4 * v3];
  if ( v3 )
    memmove_s(Destination, 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65729760) --------------------------------------------------------
char *__stdcall Array4_MoveForward2(void *Source, int a2, char *Destination)
{
  int v3; // eax
  char *v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = &Destination[4 * v3];
  if ( v3 )
    memmove_s(Destination, 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (657297A0) --------------------------------------------------------
char *__stdcall Array4_MoveForward3(void *Source, int a2, char *Destination)
{
  int v3; // eax
  char *v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = &Destination[4 * v3];
  if ( v3 )
    memmove_s(Destination, 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (657297E0) --------------------------------------------------------
char *__stdcall Array4_MoveForward4(void *Source, int a2, char *Destination)
{
  int v3; // eax
  char *v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = &Destination[4 * v3];
  if ( v3 )
    memmove_s(Destination, 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65729820) --------------------------------------------------------
char *__stdcall Array4_MoveForward5(void *Source, int a2, char *Destination)
{
  int v3; // eax
  char *v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = &Destination[4 * v3];
  if ( v3 )
    memmove_s(Destination, 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65729860) --------------------------------------------------------
_DWORD *__stdcall Pair8_FillN(_DWORD *a1, int a2, _DWORD *a3)
{
  Array_FillWithValue(a1, a2, a3);
  return &a1[2 * a2];
}

//----- (65729A70) --------------------------------------------------------
_DWORD *__stdcall Array4_FillN1(_DWORD *a1, int a2, _DWORD *a3)
{
  int v3; // eax
  _DWORD *i; // ecx

  v3 = a2;
  for ( i = a1; v3; ++i )
  {
    *i = *a3;
    --v3;
  }
  return &a1[a2];
}

//----- (65729AA0) --------------------------------------------------------
_DWORD *__stdcall Array4_FillN2(_DWORD *a1, int a2, _DWORD *a3)
{
  int v3; // eax
  _DWORD *i; // ecx

  v3 = a2;
  for ( i = a1; v3; ++i )
  {
    *i = *a3;
    --v3;
  }
  return &a1[a2];
}

//----- (65729AD0) --------------------------------------------------------
_DWORD *__stdcall Array4_FillN3(_DWORD *a1, int a2, _DWORD *a3)
{
  int v3; // eax
  _DWORD *i; // ecx

  v3 = a2;
  for ( i = a1; v3; ++i )
  {
    *i = *a3;
    --v3;
  }
  return &a1[a2];
}

//----- (65729B30) --------------------------------------------------------
int *__thiscall RBTree22_InsertHinted(int **this, int *a2, int *a3, int *a4)
{
  int *v6; // eax
  int *v7; // esi
  int *v8; // eax
  int v9; // ecx
  _BYTE v10[8]; // [esp+8h] [ebp-8h] BYREF

  if ( !*(this + 2) )
  {
    RBTree22_InsertAndRebalance(this, a2, 1, *(this + 1), a4);
    return a2;
  }
  v6 = *(this + 1);
  v7 = a4;
  if ( a3 == (int *)*v6 )
  {
    if ( *a4 < (unsigned int)a3[3] )
    {
      RBTree22_InsertAndRebalance(this, a2, 1, a3, a4);
      return a2;
    }
    goto LABEL_22;
  }
  if ( a3 == v6 )
  {
    v8 = (int *)v6[2];
    if ( v8[3] < (unsigned int)*a4 )
    {
      RBTree22_InsertAndRebalance(this, a2, 0, v8, a4);
      return a2;
    }
    goto LABEL_22;
  }
  if ( *a4 >= (unsigned int)a3[3] || (a4 = a3, RBTreeIter22_Decrement(&a4), a4[3] >= (unsigned int)*v7) )
  {
    if ( a3[3] >= (unsigned int)*v7
      || (a4 = a3, RBTreeIter_Advance(&a4), a4 != *(this + 1)) && *v7 >= (unsigned int)a4[3] )
    {
LABEL_22:
      v9 = *(_DWORD *)RBTree22_FindOrInsert(this, (int)v10, v7);
      *a2 = v9;
      return a2;
    }
    if ( *(_BYTE *)(a3[2] + 21) )
      RBTree22_InsertAndRebalance(this, a2, 0, a3, v7);
    else
      RBTree22_InsertAndRebalance(this, a2, 1, a4, v7);
    return a2;
  }
  else
  {
    if ( *(_BYTE *)(a4[2] + 21) )
      RBTree22_InsertAndRebalance(this, a2, 0, a4, v7);
    else
      RBTree22_InsertAndRebalance(this, a2, 1, a3, v7);
    return a2;
  }
}

//----- (65729C90) --------------------------------------------------------
_DWORD *__stdcall Array4_FillN4(_DWORD *a1, int a2, _DWORD *a3)
{
  int v3; // eax
  _DWORD *i; // ecx

  v3 = a2;
  for ( i = a1; v3; ++i )
  {
    *i = *a3;
    --v3;
  }
  return &a1[a2];
}

//----- (65729CC0) --------------------------------------------------------
_DWORD *__stdcall Array4_FillN5(_DWORD *a1, int a2, _DWORD *a3)
{
  int v3; // eax
  _DWORD *i; // ecx

  v3 = a2;
  for ( i = a1; v3; ++i )
  {
    *i = *a3;
    --v3;
  }
  return &a1[a2];
}

//----- (65729CF0) --------------------------------------------------------
void __thiscall Vector1_InsertRange(int this, char *Source, unsigned int a3, unsigned int a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  int v7; // edi
  char *v8; // ebx
  int v9; // eax
  unsigned int v10; // ecx
  char *v11; // ebx
  char *v12; // eax
  char *v13; // eax
  void *v14; // eax
  int v15; // edi
  int v16; // eax
  unsigned int v17; // eax
  char *v18; // edi
  int v19; // [esp-4h] [ebp-10h]
  int v20; // [esp+0h] [ebp-Ch]
  unsigned int v21; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 2;
  else
    v6 = 0;
  v7 = a3;
  if ( a3 )
  {
    v8 = *(char **)(this + 8);
    v9 = (int)&v8[-v5] >> 2;
    if ( 0x3FFFFFFF - v9 < a3 )
      ThrowLengthError_Vector7(v19, v20);
    if ( v6 >= v9 + a3 )
    {
      if ( (v8 - Source) >> 2 >= a3 )
      {
        v17 = 4 * a3;
        v18 = &v8[-4 * a3];
        a3 = *(_DWORD *)a4;
        a4 = v17;
        *(_DWORD *)(this + 8) = Array4_MoveForward1(v18, (int)v8, v8);
        Array4_MoveBackward1(Source, (int)v18, (int)v8);
        Array_FillValue1(Source, &Source[a4], &a3);
      }
      else
      {
        a3 = *(_DWORD *)a4;
        a4 = 4 * v7;
        Array4_MoveForward1(Source, (int)v8, &Source[4 * v7]);
        Array4_FillN1(*(_DWORD **)(this + 8), v7 - ((*(_DWORD *)(this + 8) - (int)Source) >> 2), &a3);
        v16 = a4;
        *(_DWORD *)(this + 8) += a4;
        Array_FillValue1(Source, (_DWORD *)(*(_DWORD *)(this + 8) - v16), &a3);
      }
    }
    else
    {
      if ( 0x3FFFFFFF - (v6 >> 1) >= v6 )
      {
        v10 = (v6 >> 1) + v6;
        v21 = v10;
      }
      else
      {
        v21 = 0;
        v10 = 0;
      }
      if ( v10 < v9 + a3 )
      {
        v21 = v9 + a3;
        v10 = v9 + a3;
      }
      v11 = (char *)Vector4_Allocate2(v10);
      v12 = Array4_MoveForward1(*(void **)(this + 4), (int)Source, v11);
      v13 = (char *)Array4_FillN1(v12, v7, (_DWORD *)a4);
      Array4_MoveForward1(Source, *(_DWORD *)(this + 8), v13);
      v14 = *(void **)(this + 4);
      v15 = ((*(_DWORD *)(this + 8) - (int)v14) >> 2) + v7;
      if ( v14 )
        operator delete(v14);
      *(_DWORD *)(this + 4) = v11;
      *(_DWORD *)(this + 12) = &v11[4 * v21];
      *(_DWORD *)(this + 8) = &v11[4 * v15];
    }
  }
}
// 65729D2E: variable 'v19' is possibly undefined
// 65729D2E: variable 'v20' is possibly undefined

//----- (65729E90) --------------------------------------------------------
void __thiscall Vector2_InsertRange(int this, char *Source, unsigned int a3, unsigned int a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  int v7; // edi
  char *v8; // ebx
  int v9; // eax
  unsigned int v10; // ecx
  char *v11; // ebx
  char *v12; // eax
  char *v13; // eax
  void *v14; // eax
  int v15; // edi
  int v16; // eax
  unsigned int v17; // eax
  char *v18; // edi
  int v19; // [esp-4h] [ebp-10h]
  int v20; // [esp+0h] [ebp-Ch]
  unsigned int v21; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 2;
  else
    v6 = 0;
  v7 = a3;
  if ( a3 )
  {
    v8 = *(char **)(this + 8);
    v9 = (int)&v8[-v5] >> 2;
    if ( 0x3FFFFFFF - v9 < a3 )
      ThrowLengthError_Vector8(v19, v20);
    if ( v6 >= v9 + a3 )
    {
      if ( (v8 - Source) >> 2 >= a3 )
      {
        v17 = 4 * a3;
        v18 = &v8[-4 * a3];
        a3 = *(_DWORD *)a4;
        a4 = v17;
        *(_DWORD *)(this + 8) = Array4_MoveForward2(v18, (int)v8, v8);
        Array4_MoveBackward2(Source, (int)v18, (int)v8);
        Array_FillValue2(Source, &Source[a4], &a3);
      }
      else
      {
        a3 = *(_DWORD *)a4;
        a4 = 4 * v7;
        Array4_MoveForward2(Source, (int)v8, &Source[4 * v7]);
        Array4_FillN2(*(_DWORD **)(this + 8), v7 - ((*(_DWORD *)(this + 8) - (int)Source) >> 2), &a3);
        v16 = a4;
        *(_DWORD *)(this + 8) += a4;
        Array_FillValue2(Source, (_DWORD *)(*(_DWORD *)(this + 8) - v16), &a3);
      }
    }
    else
    {
      if ( 0x3FFFFFFF - (v6 >> 1) >= v6 )
      {
        v10 = (v6 >> 1) + v6;
        v21 = v10;
      }
      else
      {
        v21 = 0;
        v10 = 0;
      }
      if ( v10 < v9 + a3 )
      {
        v21 = v9 + a3;
        v10 = v9 + a3;
      }
      v11 = (char *)Vector4_Allocate3(v10);
      v12 = Array4_MoveForward2(*(void **)(this + 4), (int)Source, v11);
      v13 = (char *)Array4_FillN2(v12, v7, (_DWORD *)a4);
      Array4_MoveForward2(Source, *(_DWORD *)(this + 8), v13);
      v14 = *(void **)(this + 4);
      v15 = ((*(_DWORD *)(this + 8) - (int)v14) >> 2) + v7;
      if ( v14 )
        operator delete(v14);
      *(_DWORD *)(this + 4) = v11;
      *(_DWORD *)(this + 12) = &v11[4 * v21];
      *(_DWORD *)(this + 8) = &v11[4 * v15];
    }
  }
}
// 65729ECE: variable 'v19' is possibly undefined
// 65729ECE: variable 'v20' is possibly undefined

//----- (6572A030) --------------------------------------------------------
void __thiscall Vector3_InsertRange(int this, char *Source, unsigned int a3, unsigned int a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  int v7; // edi
  char *v8; // ebx
  int v9; // eax
  unsigned int v10; // ecx
  char *v11; // ebx
  char *v12; // eax
  char *v13; // eax
  void *v14; // eax
  int v15; // edi
  int v16; // eax
  unsigned int v17; // eax
  char *v18; // edi
  int v19; // [esp-4h] [ebp-10h]
  int v20; // [esp+0h] [ebp-Ch]
  unsigned int v21; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 2;
  else
    v6 = 0;
  v7 = a3;
  if ( a3 )
  {
    v8 = *(char **)(this + 8);
    v9 = (int)&v8[-v5] >> 2;
    if ( 0x3FFFFFFF - v9 < a3 )
      ThrowLengthError_Vector9(v19, v20);
    if ( v6 >= v9 + a3 )
    {
      if ( (v8 - Source) >> 2 >= a3 )
      {
        v17 = 4 * a3;
        v18 = &v8[-4 * a3];
        a3 = *(_DWORD *)a4;
        a4 = v17;
        *(_DWORD *)(this + 8) = Array4_MoveForward3(v18, (int)v8, v8);
        Array4_MoveBackward3(Source, (int)v18, (int)v8);
        Array_FillValue3(Source, &Source[a4], &a3);
      }
      else
      {
        a3 = *(_DWORD *)a4;
        a4 = 4 * v7;
        Array4_MoveForward3(Source, (int)v8, &Source[4 * v7]);
        Array4_FillN3(*(_DWORD **)(this + 8), v7 - ((*(_DWORD *)(this + 8) - (int)Source) >> 2), &a3);
        v16 = a4;
        *(_DWORD *)(this + 8) += a4;
        Array_FillValue3(Source, (_DWORD *)(*(_DWORD *)(this + 8) - v16), &a3);
      }
    }
    else
    {
      if ( 0x3FFFFFFF - (v6 >> 1) >= v6 )
      {
        v10 = (v6 >> 1) + v6;
        v21 = v10;
      }
      else
      {
        v21 = 0;
        v10 = 0;
      }
      if ( v10 < v9 + a3 )
      {
        v21 = v9 + a3;
        v10 = v9 + a3;
      }
      v11 = (char *)Vector4_Allocate4(v10);
      v12 = Array4_MoveForward3(*(void **)(this + 4), (int)Source, v11);
      v13 = (char *)Array4_FillN3(v12, v7, (_DWORD *)a4);
      Array4_MoveForward3(Source, *(_DWORD *)(this + 8), v13);
      v14 = *(void **)(this + 4);
      v15 = ((*(_DWORD *)(this + 8) - (int)v14) >> 2) + v7;
      if ( v14 )
        operator delete(v14);
      *(_DWORD *)(this + 4) = v11;
      *(_DWORD *)(this + 12) = &v11[4 * v21];
      *(_DWORD *)(this + 8) = &v11[4 * v15];
    }
  }
}
// 6572A06E: variable 'v19' is possibly undefined
// 6572A06E: variable 'v20' is possibly undefined

//----- (6572A1D0) --------------------------------------------------------
void __thiscall Vector4_InsertRange(int this, char *Source, unsigned int a3, unsigned int a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  int v7; // edi
  char *v8; // ebx
  int v9; // eax
  unsigned int v10; // ecx
  char *v11; // ebx
  char *v12; // eax
  char *v13; // eax
  void *v14; // eax
  int v15; // edi
  int v16; // eax
  unsigned int v17; // eax
  char *v18; // edi
  int v19; // [esp-4h] [ebp-10h]
  int v20; // [esp+0h] [ebp-Ch]
  unsigned int v21; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 2;
  else
    v6 = 0;
  v7 = a3;
  if ( a3 )
  {
    v8 = *(char **)(this + 8);
    v9 = (int)&v8[-v5] >> 2;
    if ( 0x3FFFFFFF - v9 < a3 )
      ThrowLengthError_Vector10(v19, v20);
    if ( v6 >= v9 + a3 )
    {
      if ( (v8 - Source) >> 2 >= a3 )
      {
        v17 = 4 * a3;
        v18 = &v8[-4 * a3];
        a3 = *(_DWORD *)a4;
        a4 = v17;
        *(_DWORD *)(this + 8) = Array4_MoveForward4(v18, (int)v8, v8);
        Array4_MoveBackward4(Source, (int)v18, (int)v8);
        Array_FillValue4(Source, &Source[a4], &a3);
      }
      else
      {
        a3 = *(_DWORD *)a4;
        a4 = 4 * v7;
        Array4_MoveForward4(Source, (int)v8, &Source[4 * v7]);
        Array4_FillN4(*(_DWORD **)(this + 8), v7 - ((*(_DWORD *)(this + 8) - (int)Source) >> 2), &a3);
        v16 = a4;
        *(_DWORD *)(this + 8) += a4;
        Array_FillValue4(Source, (_DWORD *)(*(_DWORD *)(this + 8) - v16), &a3);
      }
    }
    else
    {
      if ( 0x3FFFFFFF - (v6 >> 1) >= v6 )
      {
        v10 = (v6 >> 1) + v6;
        v21 = v10;
      }
      else
      {
        v21 = 0;
        v10 = 0;
      }
      if ( v10 < v9 + a3 )
      {
        v21 = v9 + a3;
        v10 = v9 + a3;
      }
      v11 = (char *)Vector4_Allocate5(v10);
      v12 = Array4_MoveForward4(*(void **)(this + 4), (int)Source, v11);
      v13 = (char *)Array4_FillN4(v12, v7, (_DWORD *)a4);
      Array4_MoveForward4(Source, *(_DWORD *)(this + 8), v13);
      v14 = *(void **)(this + 4);
      v15 = ((*(_DWORD *)(this + 8) - (int)v14) >> 2) + v7;
      if ( v14 )
        operator delete(v14);
      *(_DWORD *)(this + 4) = v11;
      *(_DWORD *)(this + 12) = &v11[4 * v21];
      *(_DWORD *)(this + 8) = &v11[4 * v15];
    }
  }
}
// 6572A20E: variable 'v19' is possibly undefined
// 6572A20E: variable 'v20' is possibly undefined

//----- (6572A370) --------------------------------------------------------
void __thiscall Vector5_InsertRange(int this, char *Source, unsigned int a3, unsigned int a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  int v7; // edi
  char *v8; // ebx
  int v9; // eax
  unsigned int v10; // ecx
  char *v11; // ebx
  char *v12; // eax
  char *v13; // eax
  void *v14; // eax
  int v15; // edi
  int v16; // eax
  unsigned int v17; // eax
  char *v18; // edi
  int v19; // [esp-4h] [ebp-10h]
  int v20; // [esp+0h] [ebp-Ch]
  unsigned int v21; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 2;
  else
    v6 = 0;
  v7 = a3;
  if ( a3 )
  {
    v8 = *(char **)(this + 8);
    v9 = (int)&v8[-v5] >> 2;
    if ( 0x3FFFFFFF - v9 < a3 )
      ThrowLengthError_Vector11(v19, v20);
    if ( v6 >= v9 + a3 )
    {
      if ( (v8 - Source) >> 2 >= a3 )
      {
        v17 = 4 * a3;
        v18 = &v8[-4 * a3];
        a3 = *(_DWORD *)a4;
        a4 = v17;
        *(_DWORD *)(this + 8) = Array4_MoveForward5(v18, (int)v8, v8);
        Array4_MoveBackward5(Source, (int)v18, (int)v8);
        Array_FillValue5(Source, &Source[a4], &a3);
      }
      else
      {
        a3 = *(_DWORD *)a4;
        a4 = 4 * v7;
        Array4_MoveForward5(Source, (int)v8, &Source[4 * v7]);
        Array4_FillN5(*(_DWORD **)(this + 8), v7 - ((*(_DWORD *)(this + 8) - (int)Source) >> 2), &a3);
        v16 = a4;
        *(_DWORD *)(this + 8) += a4;
        Array_FillValue5(Source, (_DWORD *)(*(_DWORD *)(this + 8) - v16), &a3);
      }
    }
    else
    {
      if ( 0x3FFFFFFF - (v6 >> 1) >= v6 )
      {
        v10 = (v6 >> 1) + v6;
        v21 = v10;
      }
      else
      {
        v21 = 0;
        v10 = 0;
      }
      if ( v10 < v9 + a3 )
      {
        v21 = v9 + a3;
        v10 = v9 + a3;
      }
      v11 = (char *)Vector4_Allocate6(v10);
      v12 = Array4_MoveForward5(*(void **)(this + 4), (int)Source, v11);
      v13 = (char *)Array4_FillN5(v12, v7, (_DWORD *)a4);
      Array4_MoveForward5(Source, *(_DWORD *)(this + 8), v13);
      v14 = *(void **)(this + 4);
      v15 = ((*(_DWORD *)(this + 8) - (int)v14) >> 2) + v7;
      if ( v14 )
        operator delete(v14);
      *(_DWORD *)(this + 4) = v11;
      *(_DWORD *)(this + 12) = &v11[4 * v21];
      *(_DWORD *)(this + 8) = &v11[4 * v15];
    }
  }
}
// 6572A3AE: variable 'v19' is possibly undefined
// 6572A3AE: variable 'v20' is possibly undefined

//----- (6572A510) --------------------------------------------------------
_DWORD *__stdcall Pair8_CopyConstructWrapper(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return Pair8_CopyConstruct(a1, a2, a3);
}

//----- (6572A6B0) --------------------------------------------------------
int *__thiscall IntMap_GetOrInsert(int **this, int *a2)
{
  int *v2; // edx
  int v3; // eax
  int v5[2]; // [esp+4h] [ebp-8h] BYREF

  v2 = *(this + 1);
  v3 = v2[1];
  while ( !*(_BYTE *)(v3 + 21) )
  {
    if ( *(_DWORD *)(v3 + 12) >= (unsigned int)*a2 )
    {
      v2 = (int *)v3;
      v3 = *(_DWORD *)v3;
    }
    else
    {
      v3 = *(_DWORD *)(v3 + 8);
    }
  }
  if ( v2 != *(this + 1) && *a2 >= (unsigned int)v2[3] )
    return v2 + 4;
  v5[0] = *a2;
  v5[1] = 0;
  return (int *)(*RBTree22_InsertHinted(this, (int *)&a2, v2, v5) + 16);
}

//----- (6572A8C0) --------------------------------------------------------
void __thiscall PairVector_InsertRange(int this, char *a2, unsigned int a3, int *a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  char *v7; // edi
  int v8; // eax
  unsigned int v9; // ecx
  char *Checked; // edi
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  int v13; // eax
  int v14; // ebx
  int v15; // edx
  void *v16; // edx
  char *v17; // ebx
  _DWORD *v18; // [esp-20h] [ebp-4Ch]
  _DWORD *v19; // [esp-Ch] [ebp-38h]
  int v20; // [esp-8h] [ebp-34h]
  int v21[4]; // [esp+0h] [ebp-2Ch] BYREF
  int v22; // [esp+10h] [ebp-1Ch] BYREF
  void *v23; // [esp+14h] [ebp-18h]
  unsigned int v24; // [esp+18h] [ebp-14h]
  int *v25; // [esp+1Ch] [ebp-10h]
  int v26; // [esp+28h] [ebp-4h]

  v25 = v21;
  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 3;
  else
    v6 = 0;
  if ( a3 )
  {
    v7 = *(char **)(this + 8);
    v8 = (int)&v7[-v5] >> 3;
    if ( 0x1FFFFFFF - v8 < a3 )
      ThrowLengthError_Vector12(v21[0], v21[1]);
    if ( v6 >= v8 + a3 )
    {
      if ( (v7 - a2) >> 3 >= a3 )
      {
        v16 = (void *)a4[1];
        v17 = &v7[-8 * a3];
        v22 = *a4;
        v23 = v16;
        *(_DWORD *)(this + 8) = Pair8_CopyConstructWrapper(v17, v7, v7);
        Pair8_CopyBackward((int)a2, (int)v17, v7);
        Pair8_FillValue(a2, &a2[8 * a3], &v22);
      }
      else
      {
        v15 = *a4;
        v23 = (void *)a4[1];
        v22 = v15;
        Pair8_CopyConstructWrapper(a2, v7, &a2[8 * a3]);
        v20 = a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 3);
        v19 = *(_DWORD **)(this + 8);
        v26 = 2;
        Pair8_FillN(v19, v20, &v22);
        *(_DWORD *)(this + 8) += 8 * a3;
        Pair8_FillValue(a2, (_DWORD *)(*(_DWORD *)(this + 8) - 8 * a3), &v22);
      }
    }
    else
    {
      if ( 0x1FFFFFFF - (v6 >> 1) >= v6 )
      {
        v9 = (v6 >> 1) + v6;
        v24 = v9;
      }
      else
      {
        v24 = 0;
        v9 = 0;
      }
      if ( v9 < v8 + a3 )
      {
        v24 = v8 + a3;
        v9 = v8 + a3;
      }
      Checked = (char *)Vector8_AllocateChecked(v9);
      v18 = *(_DWORD **)(this + 4);
      v23 = Checked;
      v26 = 0;
      v11 = Pair8_CopyConstruct(v18, a2, Checked);
      v12 = Pair8_FillN(v11, a3, a4);
      Pair8_CopyConstruct(a2, *(_DWORD **)(this + 8), v12);
      v13 = *(_DWORD *)(this + 4);
      v14 = ((*(_DWORD *)(this + 8) - v13) >> 3) + a3;
      if ( v13 )
        operator delete(*(void **)(this + 4));
      *(_DWORD *)(this + 12) = &Checked[8 * v24];
      *(_DWORD *)(this + 8) = &Checked[8 * v14];
      *(_DWORD *)(this + 4) = Checked;
    }
  }
}

//----- (6572AB90) --------------------------------------------------------
int *__thiscall Msg2_75_Sub2_SetValue(int **this, int a2, int a3)
{
  int **v4; // edi
  int *v5; // eax
  int *result; // eax
  int *v7; // [esp+8h] [ebp-4h] BYREF

  v4 = this + 12;
  v5 = *IntMap_LowerBound(this + 12, &v7, &a2);
  if ( v5 != *(this + 13) )
    RBTree22_EraseAndRebalance(v4, &v7, (int)v5);
  result = IntMap_GetOrInsert(v4, &a2);
  *result = a3;
  return result;
}

//----- (6572ABE0) --------------------------------------------------------
void __thiscall Vector1_PushBack(int **this, int *a2)
{
  int v2; // esi
  unsigned int v3; // eax
  int v4; // edx

  v2 = (int)*(this + 1);
  if ( v2 )
    v3 = ((int)*(this + 3) - v2) >> 2;
  else
    v3 = 0;
  v4 = (int)*(this + 2);
  if ( (v4 - v2) >> 2 >= v3 )
  {
    Vector1_InsertRange((int)this, (char *)v4, 1u, (unsigned int)a2);
  }
  else
  {
    *(_DWORD *)v4 = *a2;
    *(this + 2) = (int *)(v4 + 4);
  }
}

//----- (6572AC30) --------------------------------------------------------
void __thiscall Vector2_PushBack(int **this, int *a2)
{
  int v2; // esi
  unsigned int v3; // eax
  int v4; // edx

  v2 = (int)*(this + 1);
  if ( v2 )
    v3 = ((int)*(this + 3) - v2) >> 2;
  else
    v3 = 0;
  v4 = (int)*(this + 2);
  if ( (v4 - v2) >> 2 >= v3 )
  {
    Vector2_InsertRange((int)this, (char *)v4, 1u, (unsigned int)a2);
  }
  else
  {
    *(_DWORD *)v4 = *a2;
    *(this + 2) = (int *)(v4 + 4);
  }
}

//----- (6572AC80) --------------------------------------------------------
void __thiscall Vector3_PushBack(int **this, int *a2)
{
  int v2; // esi
  unsigned int v3; // eax
  int v4; // edx

  v2 = (int)*(this + 1);
  if ( v2 )
    v3 = ((int)*(this + 3) - v2) >> 2;
  else
    v3 = 0;
  v4 = (int)*(this + 2);
  if ( (v4 - v2) >> 2 >= v3 )
  {
    Vector3_InsertRange((int)this, (char *)v4, 1u, (unsigned int)a2);
  }
  else
  {
    *(_DWORD *)v4 = *a2;
    *(this + 2) = (int *)(v4 + 4);
  }
}

//----- (6572ACD0) --------------------------------------------------------
void __thiscall Vector4_PushBack(int **this, int *a2)
{
  int v2; // esi
  unsigned int v3; // eax
  int v4; // edx

  v2 = (int)*(this + 1);
  if ( v2 )
    v3 = ((int)*(this + 3) - v2) >> 2;
  else
    v3 = 0;
  v4 = (int)*(this + 2);
  if ( (v4 - v2) >> 2 >= v3 )
  {
    Vector4_InsertRange((int)this, (char *)v4, 1u, (unsigned int)a2);
  }
  else
  {
    *(_DWORD *)v4 = *a2;
    *(this + 2) = (int *)(v4 + 4);
  }
}

//----- (6572AD20) --------------------------------------------------------
void __thiscall Vector5_PushBack(int **this, int *a2)
{
  int v2; // esi
  unsigned int v3; // eax
  int v4; // edx

  v2 = (int)*(this + 1);
  if ( v2 )
    v3 = ((int)*(this + 3) - v2) >> 2;
  else
    v3 = 0;
  v4 = (int)*(this + 2);
  if ( (v4 - v2) >> 2 >= v3 )
  {
    Vector5_InsertRange((int)this, (char *)v4, 1u, (unsigned int)a2);
  }
  else
  {
    *(_DWORD *)v4 = *a2;
    *(this + 2) = (int *)(v4 + 4);
  }
}

//----- (6572ADC0) --------------------------------------------------------
int *__thiscall Msg2_75_Sub0_Create(int **this, int *a2, int a3)
{
  int v3; // ebx
  int *v6; // esi

  v3 = (int)a2;
  if ( Msg2_75_Sub0_FindById(this, (int)a2) )
    return 0;
  v6 = CharacterPool_AllocPlayer(dword_65A5AAB8, 0, 1);
  a2 = v6;
  if ( v6 )
  {
    (*(void (__thiscall **)(int *, int, int, _DWORD))(*v6 + 4))(v6, v3, a3, 0);
    Vector2_PushBack(this + 4, (int *)&a2);
    a2 = v6;
    Vector1_PushBack(this, (int *)&a2);
  }
  return v6;
}
// 65A5AAB8: using guessed type int dword_65A5AAB8[4];

//----- (6572AE30) --------------------------------------------------------
int __thiscall Msg2_75_Sub4_Create(int **this, int *a2, int a3, int a4, int a5)
{
  int v5; // ebx
  int *v8; // eax
  int v9; // esi

  v5 = (int)a2;
  if ( Msg2_75_Sub4_FindById(this, (int)a2) )
    return 0;
  v8 = EntityPool4_AllocEntity(dword_65A5AAE8, 0, 1);
  v9 = (int)v8;
  a2 = v8;
  if ( v8 )
  {
    (*(void (__thiscall **)(int *, int, int, int, int))(*v8 + 32))(v8, v5, a3, a4, a5);
    Vector5_PushBack(this + 19, (int *)&a2);
    a2 = (int *)v9;
    Vector1_PushBack(this, (int *)&a2);
  }
  return v9;
}
// 65A5AAE8: using guessed type int dword_65A5AAE8[4];

//----- (6572AEA0) --------------------------------------------------------
int __thiscall Msg2_75_Sub1_Create(int **this, int *a2, int a3, int a4, int a5)
{
  int v5; // ebx
  int *v8; // eax
  int v9; // esi

  v5 = (int)a2;
  if ( Msg2_75_Sub1_FindById(this, (int)a2) )
    return 0;
  v8 = WeaponPool_AllocWeapon(dword_65A5AAC8, 0, 1);
  v9 = (int)v8;
  a2 = v8;
  if ( v8 )
  {
    (*(void (__thiscall **)(int *, int, int, int, int))(*v8 + 32))(v8, v5, a3, a4, a5);
    Vector3_PushBack(this + 8, (int *)&a2);
    a2 = (int *)v9;
    Vector1_PushBack(this, (int *)&a2);
  }
  return v9;
}
// 65A5AAC8: using guessed type int dword_65A5AAC8[4];

//----- (6572AF10) --------------------------------------------------------
int __thiscall Msg2_75_Sub3_Create(int **this, int *a2, int a3, int a4)
{
  int v4; // ebx
  int *v7; // eax
  int v8; // esi

  v4 = (int)a2;
  if ( Msg2_75_Sub3_FindById(this, (int)a2) )
    return 0;
  v7 = NPCPool_AllocNPC(dword_65A5AAD8, 0, 1);
  v8 = (int)v7;
  a2 = v7;
  if ( v7 )
  {
    (*(void (__thiscall **)(int *, int, int, int))(*v7 + 4))(v7, v4, a3, a4);
    Vector4_PushBack(this + 15, (int *)&a2);
    a2 = (int *)v8;
    Vector1_PushBack(this, (int *)&a2);
  }
  return v8;
}
// 65A5AAD8: using guessed type int dword_65A5AAD8[4];

//----- (6572B310) --------------------------------------------------------
int __cdecl LTClient_SendMessage(int a1, int a2)
{
  int v2; // eax

  if ( g_pILTClient )
  {
    v2 = (*(int (__cdecl **)(int))(g_pILTClient + 248))(a1);
    if ( v2 )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v2);
      JUMPOUT(0x65985980);
    }
  }
  return a2;
}
// 6572B33E: control flows out of bounds to 65985980

//----- (6572B3A0) --------------------------------------------------------
double __cdecl LTClient_GetFloat(int a1, float a2)
{
  int v2; // eax

  if ( g_pILTClient && (v2 = (*(int (__cdecl **)(int))(g_pILTClient + 248))(a1)) != 0 )
    return ((double (__thiscall *)(int, int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v2);
  else
    return a2;
}

//----- (6572B440) --------------------------------------------------------
const char *__cdecl LTClient_RunCommand(const char *a1, int a2)
{
  const char *result; // eax
  CHAR v3[256]; // [esp+0h] [ebp-104h] BYREF

  result = a1;
  if ( g_pILTClient )
  {
    wsprintfA(v3, "+%s %i", a1, a2);
    return (const char *)(*(int (__cdecl **)(CHAR *))(g_pILTClient + 520))(v3);
  }
  return result;
}

//----- (6572B8E0) --------------------------------------------------------
void __thiscall Plane_InitFromPoints(float *this, float *__return_address, float *a3, float *a4)
{
  float v5; // [esp+8h] [ebp-24h]
  float v6; // [esp+Ch] [ebp-20h]
  float v7; // [esp+10h] [ebp-1Ch]
  float v8; // [esp+14h] [ebp-18h]
  float v9; // [esp+18h] [ebp-14h]
  float v10; // [esp+1Ch] [ebp-10h]
  float v11; // [esp+20h] [ebp-Ch]
  float v12; // [esp+24h] [ebp-8h]
  float v13; // [esp+28h] [ebp-4h]

  v11 = *a4 - *__return_address;
  v12 = a4[1] - __return_address[1];
  v13 = a4[2] - __return_address[2];
  v8 = *a3 - *__return_address;
  v9 = a3[1] - __return_address[1];
  v10 = a3[2] - __return_address[2];
  v5 = v9 * v13 - v10 * v12;
  v6 = v10 * v11 - v13 * v8;
  v7 = v12 * v8 - v9 * v11;
  *this = v5;
  *(this + 1) = v6;
  *(this + 2) = v7;
  Vec3_ScaleToLength(this, 1.0);
  *(this + 3) = *__return_address * *this + __return_address[1] * *(this + 1) + __return_address[2] * *(this + 2);
}

//----- (6572B9D0) --------------------------------------------------------
int __thiscall Plane_RayIntersect(float *this, float *__saved_registers, float *__return_address, int *a4, float *a5)
{
  double v6; // st6
  int v9; // eax
  double v11; // st6
  double v12; // st4
  double v13; // st5
  double v14; // st7
  int v15; // eax
  float v16; // [esp+4h] [ebp-1Ch] BYREF
  float v17; // [esp+8h] [ebp-18h]
  float v18; // [esp+Ch] [ebp-14h]
  float v19; // [esp+10h] [ebp-10h]
  float v20; // [esp+14h] [ebp-Ch]
  float v21; // [esp+18h] [ebp-8h]
  float v22; // [esp+1Ch] [ebp-4h]
  float v23; // [esp+28h] [ebp+8h]
  float v24; // [esp+28h] [ebp+8h]
  float v25; // [esp+2Ch] [ebp+Ch]
  float v26; // [esp+30h] [ebp+10h]
  float v27; // [esp+30h] [ebp+10h]
  float v28; // [esp+30h] [ebp+10h]
  float v29; // [esp+34h] [ebp+14h]
  float v30; // [esp+34h] [ebp+14h]
  float v31; // [esp+34h] [ebp+14h]
  float v32; // [esp+34h] [ebp+14h]

  v23 = *__saved_registers * *this + __saved_registers[1] * *(this + 1) + __saved_registers[2] * *(this + 2);
  v24 = v23 - *(this + 3);
  v6 = v24;
  if ( v24 == 0.0 )
  {
    *a4 = 2;
    if ( a5 )
    {
      *a5 = *__saved_registers;
      a5[1] = __saved_registers[1];
      a5[2] = __saved_registers[2];
      return 1;
    }
    return 1;
  }
  v22 = -v6;
  v16 = *this * v22;
  v17 = v22 * *(this + 1);
  v18 = v22 * *(this + 2);
  v25 = __return_address[1] * v17 + *__return_address * v16 + __return_address[2] * v18;
  if ( v25 > 0.0 )
  {
    if ( !a5 )
      return 1;
    v16 = *__return_address * 5000.0;
    v17 = __return_address[1] * 5000.0;
    v18 = 5000.0 * __return_address[2];
    v11 = v16;
    v19 = *__saved_registers + v16;
    v20 = v17 + __saved_registers[1];
    v21 = __saved_registers[2] + v18;
    v12 = v19;
    v13 = v21;
    v29 = *(this + 2) * v21 + *this * v19 + v20 * *(this + 1);
    v30 = v29 - *(this + 3);
    v14 = v20;
    if ( v24 <= 0.0 )
    {
      for ( ; v30 <= 0.0; v14 = v20 )
      {
        v19 = v12 + v11;
        v20 = v14 + v17;
        v21 = v13 + v18;
        v12 = v19;
        v13 = v21;
        v32 = *(this + 2) * v21 + *this * v19 + v20 * *(this + 1);
        v30 = v32 - *(this + 3);
      }
    }
    else
    {
      for ( ; v30 >= 0.0; v14 = v20 )
      {
        v19 = v12 + v11;
        v20 = v14 + v17;
        v21 = v13 + v18;
        v12 = v19;
        v13 = v21;
        v31 = *(this + 2) * v21 + *this * v19 + v20 * *(this + 1);
        v30 = v31 - *(this + 3);
      }
    }
    v15 = 1;
    if ( v24 <= 0.0 )
      v15 = 3;
    *a4 = v15;
    v16 = v12 - *__saved_registers;
    v17 = v14 - __saved_registers[1];
    v18 = v13 - __saved_registers[2];
    v26 = v17 * v17 + v16 * v16 + v18 * v18;
    v27 = sqrt(v26);
    v28 = v27 * v24 / (v24 - v30);
    Vec3_ScaleToLength(&v16, v28);
    v19 = *__saved_registers + v16;
    v20 = v17 + __saved_registers[1];
    v21 = __saved_registers[2] + v18;
    *a5 = v19;
    a5[1] = v20;
    a5[2] = v21;
    return 1;
  }
  v9 = 1;
  if ( v6 <= 0.0 )
    v9 = 3;
  *a4 = v9;
  return 0;
}

//----- (6572C110) --------------------------------------------------------
int __cdecl Terrain_WorldToGridCoords(float a1, float a2, _DWORD *a3, _DWORD *a4)
{
  int result; // eax
  double v5; // st7
  double v6; // st6
  int v7; // [esp+8h] [ebp-7Ch] BYREF
  int v8; // [esp+Ch] [ebp-78h] BYREF
  int v9; // [esp+10h] [ebp-74h] BYREF
  int v10; // [esp+14h] [ebp-70h] BYREF
  float v11; // [esp+18h] [ebp-6Ch] BYREF
  float v12; // [esp+1Ch] [ebp-68h] BYREF
  float v13; // [esp+20h] [ebp-64h]
  float v14; // [esp+24h] [ebp-60h]
  float v15[3]; // [esp+28h] [ebp-5Ch] BYREF
  float v16; // [esp+34h] [ebp-50h] BYREF
  float v17; // [esp+38h] [ebp-4Ch]
  float v18; // [esp+3Ch] [ebp-48h]
  float v19[3]; // [esp+40h] [ebp-44h] BYREF
  float v20; // [esp+4Ch] [ebp-38h] BYREF
  float v21; // [esp+50h] [ebp-34h]
  float v22; // [esp+54h] [ebp-30h]
  float v23; // [esp+58h] [ebp-2Ch] BYREF
  float v24; // [esp+5Ch] [ebp-28h]
  float v25; // [esp+60h] [ebp-24h]
  float v26; // [esp+64h] [ebp-20h] BYREF
  float v27; // [esp+68h] [ebp-1Ch] BYREF
  float v28; // [esp+6Ch] [ebp-18h]
  float v29; // [esp+70h] [ebp-14h]
  float v30; // [esp+74h] [ebp-10h]
  float v31; // [esp+78h] [ebp-Ch]
  float v32; // [esp+7Ch] [ebp-8h]
  float v33; // [esp+80h] [ebp-4h] BYREF

  v11 = 0.0;
  v12 = 0.0;
  v13 = 0.0;
  v14 = 1.0;
  (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, LODWORD(a1), &v23);
  (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 148))(g_pILTClient, LODWORD(a1), &v11);
  v20 = *(float *)LODWORD(a2) - v23;
  v21 = *(float *)(LODWORD(a2) + 4) - v24;
  v22 = *(float *)(LODWORD(a2) + 8) - v25;
  Vec3_ScaleToLength(&v20, 1.0);
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  HIBYTE(v33) = 0;
  (*(void (__cdecl **)(_DWORD, char *, int *, int *, int *, int *))(g_pILTClient + 592))(
    LODWORD(a1),
    (char *)&v33 + 3,
    &v7,
    &v8,
    &v9,
    &v10);
  (*(void (__cdecl **)(_DWORD, int, int, float *))(g_pILTClient + 576))(LODWORD(a1), v7, v8, &v16);
  (*(void (__cdecl **)(_DWORD, int, int, float *))(g_pILTClient + 576))(LODWORD(a1), v9 - 1, v8, v19);
  (*(void (__cdecl **)(_DWORD, int, int, float *))(g_pILTClient + 576))(LODWORD(a1), v7, v10 - 1, v15);
  Plane_InitFromPoints(&v26, v19, &v16, v15);
  result = Plane_RayIntersect(&v26, &v23, &v20, (int *)&a2, &v12);
  if ( result )
  {
    v27 = v19[0] - v16;
    v28 = v19[1] - v17;
    v29 = v19[2] - v18;
    v23 = v15[0] - v16;
    v24 = v15[1] - v17;
    v25 = v15[2] - v18;
    v20 = v12 - v16;
    v21 = v13 - v17;
    v22 = v14 - v18;
    v32 = v28 * v28 + v27 * v27 + v29 * v29;
    v30 = v24 * v24 + v23 * v23 + v25 * v25;
    Vec3_ScaleToLength(&v27, 1.0);
    Vec3_ScaleToLength(&v23, 1.0);
    a2 = v21 * v28 + v20 * v27 + v22 * v29;
    v31 = a2;
    a2 = sqrt(v32);
    v5 = v21 * v24;
    v6 = v20;
    *a3 = (int)(v31 / a2 * (double)(v9 - v7) + (double)v7);
    a2 = v5 + v6 * v23 + v22 * v25;
    v31 = a2;
    a2 = sqrt(v30);
    *a4 = (int)(v31 / a2 * (double)(v10 - v8) + (double)v8);
    return 1;
  }
  return result;
}

//----- (6572CC60) --------------------------------------------------------
float *__thiscall FogSettings_Ctor(float *this)
{
  *(_DWORD *)this = &off_659C0D34;
  *(this + 1) = 0.0;
  *(this + 2) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 1.0;
  *(this + 5) = 1.0;
  *(this + 6) = 1.0;
  *(this + 7) = 1.0;
  *(this + 8) = 1.0;
  *(this + 9) = 1.0;
  *(this + 10) = 0.0;
  *(this + 11) = 0.1;
  *(this + 12) = 0.2;
  *(this + 13) = 2500.0;
  *(this + 14) = 0.80000001;
  *(this + 15) = 0.0;
  *(this + 16) = 2.0;
  *(this + 17) = 10.0;
  *(this + 18) = 1000.0;
  return this;
}
// 659C0D34: using guessed type void *off_659C0D34;

//----- (6572EE70) --------------------------------------------------------
BOOL *__thiscall COM_Initialize(BOOL *this)
{
  BOOL v2; // ecx

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  v2 = CoInitialize(0) >= 0;
  *this = v2;
  return this;
}

//----- (6572EF20) --------------------------------------------------------
int __thiscall Sound_Speak(_DWORD *this, const CHAR *lpMultiByteStr)
{
  WCHAR WideCharStr[260]; // [esp+4h] [ebp-20Ch] BYREF

  if ( !*(this + 1) )
    return -2147418113;
  if ( !lpMultiByteStr )
    return -2147024809;
  WideChar_ToMultiByte_Wrapper(WideCharStr, lpMultiByteStr, 0x208u);
  return (*(int (__stdcall **)(_DWORD, void *, WCHAR *, _DWORD))(*(_DWORD *)*(this + 1) + 20))(
           *(this + 1),
           &unk_659D71FC,
           WideCharStr,
           0);
}

//----- (6572EFB0) --------------------------------------------------------
int __thiscall Sound_GetVolume(_DWORD *this)
{
  bool v1; // zf
  int v3; // [esp+0h] [ebp-4h] BYREF

  v1 = *(this + 2) == 0;
  v3 = 0;
  if ( v1 )
    return 0;
  (*(void (__stdcall **)(_DWORD, int *))(*(_DWORD *)*(this + 2) + 204))(*(this + 2), &v3);
  return v3;
}

//----- (6572F210) --------------------------------------------------------
_DWORD *__thiscall SoundInstance_Ctor(_DWORD *this, int a2, int a3, int a4)
{
  int v5; // ecx
  int v6; // eax

  v5 = a3;
  *(this + 3) = a2;
  v6 = a4;
  *(this + 2) = v5;
  *this = &off_659C0D90;
  *(this + 1) = v6;
  *(this + 4) = 0;
  *(this + 5) = 0;
  a2 = 0;
  if ( (*(int (__stdcall **)(int, int *))(*(_DWORD *)v6 + 108))(v6, &a2) >= 0 )
  {
    (*(void (__stdcall **)(_DWORD, int, int, _DWORD *))(*(_DWORD *)*(this + 3) + 192))(*(this + 3), a2, 1, this + 4);
    if ( a2 )
      (*(void (__stdcall **)(int))(*(_DWORD *)a2 + 8))(a2);
  }
  return this;
}
// 659C0D90: using guessed type void *off_659C0D90;

//----- (6572F370) --------------------------------------------------------
int __thiscall SoundInstance_Play(int *this, int a2)
{
  int v3; // eax
  int result; // eax
  int v5; // ecx

  v3 = *(this + 1);
  if ( !v3 )
    return -2147221008;
  v5 = a2;
  if ( a2 || (v5 = *(this + 4)) != 0 )
    result = (*(int (__stdcall **)(int, int))(*(_DWORD *)v3 + 116))(v3, v5);
  else
    result = (*(int (__stdcall **)(int, _DWORD))(*(_DWORD *)v3 + 116))(v3, *(this + 3));
  if ( result >= 0 )
    *(this + 5) = 1;
  return result;
}

//----- (6572F990) --------------------------------------------------------
HRESULT __thiscall Sound_CreateDevice(int this, int a2, int a3, int a4, int a5)
{
  int *v6; // esi
  HRESULT result; // eax
  int Volume; // eax
  int v9; // ecx

  v6 = a5 != 0 ? &a5 : 0;
  result = CoCreateInstance(&rclsid, 0, 3u, (const IID *const)&riid, (LPVOID *)(this + 4));
  if ( result >= 0 )
  {
    result = CoCreateInstance(
               (const IID *const)&stru_659D72DC,
               0,
               3u,
               (const IID *const)&stru_659D6E2C,
               (LPVOID *)(this + 8));
    if ( result >= 0 )
    {
      result = (*(int (__stdcall **)(_DWORD, _DWORD, int *, int, int, int, int, _DWORD))(**(_DWORD **)(this + 8) + 176))(
                 *(_DWORD *)(this + 8),
                 0,
                 v6,
                 a2,
                 a4,
                 a3,
                 63,
                 0);
      if ( result >= 0 )
      {
        Volume = Sound_GetVolume((_DWORD *)this);
        if ( Volume
          && (*(int (__stdcall **)(int, _DWORD, int, _DWORD, void *, _DWORD, void *, int))(*(_DWORD *)Volume + 12))(
               Volume,
               0,
               0x8000,
               0,
               &unk_659DB39C,
               0,
               &unk_659D7ACC,
               this + 12) >= 0 )
        {
          v9 = *(_DWORD *)(this + 12);
          *(_DWORD *)(this + 16) = 64;
          (*(void (__stdcall **)(int, int))(*(_DWORD *)v9 + 12))(v9, this + 16);
        }
        return 0;
      }
      else if ( result == -2005401480 )
      {
        (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
          g_pILTClient,
          "Warning: No sound card found");
        return -2005401480;
      }
    }
  }
  return result;
}

//----- (6572FA80) --------------------------------------------------------
int __thiscall Sound_LoadFile(int *this, int **a2, const CHAR *lpMultiByteStr, int a4, int a5)
{
  int result; // eax
  _DWORD *v7; // eax
  int *v8; // eax
  int v9; // [esp+10h] [ebp-21Ch] BYREF
  WCHAR WideCharStr[260]; // [esp+14h] [ebp-218h] BYREF
  int v11; // [esp+228h] [ebp-4h]

  v9 = 0;
  WideChar_ToMultiByte_Wrapper(WideCharStr, lpMultiByteStr, 0x208u);
  result = (*(int (__stdcall **)(_DWORD, int *, void *, WCHAR *, int *))(*(_DWORD *)*(this + 1) + 56))(
             *(this + 1),
             &dword_659D72CC,
             &unk_659D6E1C,
             WideCharStr,
             &v9);
  if ( result >= 0 )
  {
    v7 = operator new(0x18u);
    v11 = 0;
    if ( v7 )
      v8 = SoundInstance_Ctor(v7, *(this + 2), *(this + 1), v9);
    else
      v8 = 0;
    v11 = -1;
    *a2 = v8;
    if ( v8 )
    {
      if ( !a5
        || (result = (*(int (__stdcall **)(int, void *, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v9 + 76))(
                       v9,
                       &unk_659D704C,
                       -1,
                       0,
                       0,
                       0),
            result >= 0) )
      {
        if ( !a4 )
          return 0;
        result = SoundInstance_Play(*a2, 0);
        if ( result >= 0 )
          return 0;
      }
    }
    else
    {
      return -2147024882;
    }
  }
  return result;
}
// 659D72CC: using guessed type int dword_659D72CC;

//----- (65730740) --------------------------------------------------------
int __cdecl String_AnsiToWide(WCHAR *lpWideCharStr, const CHAR *lpMultiByteStr, int cchWideChar)
{
  int v3; // eax

  if ( !lpWideCharStr || !lpMultiByteStr || cchWideChar < 1 )
    return -2147024809;
  v3 = MultiByteToWideChar(0, 0, lpMultiByteStr, -1, lpWideCharStr, cchWideChar);
  lpWideCharStr[cchWideChar - 1] = 0;
  return v3 != 0 ? 0 : -2147467259;
}

//----- (65730820) --------------------------------------------------------
int __cdecl String_MultiByteToWide(WCHAR *lpWideCharStr, const CHAR *lpMultiByteStr, int cchWideChar)
{
  if ( lpWideCharStr && lpMultiByteStr && cchWideChar >= 1 )
    return String_AnsiToWide(lpWideCharStr, lpMultiByteStr, cchWideChar);
  else
    return -2147024809;
}

//----- (65730BD0) --------------------------------------------------------
int __cdecl WideChar_ToMultiByte_Wrapper(WCHAR *lpWideCharStr, const CHAR *lpMultiByteStr, unsigned int a3)
{
  return String_MultiByteToWide(lpWideCharStr, lpMultiByteStr, a3 >> 1);
}

//----- (657312C0) --------------------------------------------------------
char *__thiscall BitStream_WriteBit(char *this, char a2)
{
  if ( a2 )
    return BitStream_WriteBit1(this);
  else
    return BitStream_WriteBit0(this);
}

//----- (65731330) --------------------------------------------------------
int __thiscall ItemStructA_Init(char *this)
{
  *(_DWORD *)this = 0;
  *((_WORD *)this + 2) = 0;
  *((_WORD *)this + 3) = 0;
  *((_WORD *)this + 4) = 0;
  *((_WORD *)this + 5) = 0;
  *(this + 12) = 100;
  *(this + 13) = 0;
  *((_DWORD *)this + 4) = 0;
  *((_DWORD *)this + 5) = 0;
  *((_DWORD *)this + 6) = 0;
  *(this + 29) = 0;
  *(this + 30) = 0;
  *(this + 28) = 0;
  *(_DWORD *)(this + 31) = 0;
  *((_DWORD *)this + 9) = 0;
  *((_DWORD *)this + 10) = 0;
  *(this + 44) = 0;
  return 0;
}

//----- (65731430) --------------------------------------------------------
int __cdecl RBTree18_GetMax(int a1)
{
  int result; // eax
  int i; // ecx

  result = a1;
  for ( i = *(_DWORD *)(a1 + 8); !*(_BYTE *)(i + 17); i = *(_DWORD *)(i + 8) )
    result = i;
  return result;
}

//----- (65731450) --------------------------------------------------------
_DWORD *__cdecl RBTree18_GetMin(_DWORD *a1)
{
  _DWORD *result; // eax
  int *v2; // ecx

  result = a1;
  v2 = (int *)*a1;
  if ( !*(_BYTE *)(*a1 + 17) )
  {
    do
    {
      result = v2;
      v2 = (int *)*v2;
    }
    while ( !*((_BYTE *)v2 + 17) );
  }
  return result;
}

//----- (65731490) --------------------------------------------------------
int __thiscall RBTree_RotateLeft(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // esi
  int v4; // ecx
  _DWORD *v5; // ecx

  result = *a2;
  *a2 = *(_DWORD *)(*a2 + 8);
  v3 = *(_DWORD *)(result + 8);
  if ( !*(_BYTE *)(v3 + 17) )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(result + 4) = a2[1];
  v4 = *(this + 1);
  if ( a2 == *(_DWORD **)(v4 + 4) )
  {
    *(_DWORD *)(v4 + 4) = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  else
  {
    v5 = (_DWORD *)a2[1];
    if ( a2 == (_DWORD *)v5[2] )
      v5[2] = result;
    else
      *v5 = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  return result;
}

//----- (65731580) --------------------------------------------------------
int *__thiscall RBTreeIter18_Increment(int **this)
{
  int *result; // eax
  int *v2; // edx

  result = *this;
  if ( !*((_BYTE *)*this + 17) )
  {
    v2 = (int *)result[2];
    if ( *((_BYTE *)v2 + 17) )
    {
      for ( result = (int *)result[1]; !*((_BYTE *)result + 17); result = (int *)result[1] )
      {
        if ( *this != (int *)result[2] )
          break;
        *this = result;
      }
      *this = result;
    }
    else
    {
      result = (int *)*v2;
      if ( !*(_BYTE *)(*v2 + 17) )
      {
        do
        {
          v2 = result;
          result = (int *)*result;
        }
        while ( !*((_BYTE *)result + 17) );
      }
      *this = v2;
    }
  }
  return result;
}

//----- (657315D0) --------------------------------------------------------
void __cdecl __noreturn ThrowLengthError_Vector(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65731680) --------------------------------------------------------
char *__thiscall BitStream_WriteBool(char *this, char a2)
{
  char *v2; // ecx

  v2 = this + 12;
  if ( a2 )
    return BitStream_WriteBit1(v2);
  else
    return BitStream_WriteBit0(v2);
}

//----- (657316C0) --------------------------------------------------------
void *__cdecl Vector44_Allocate(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x2C )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(44 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65731770) --------------------------------------------------------
char *__thiscall ItemStructA_InitAlt(char *this)
{
  *(_DWORD *)this = 0;
  *((_WORD *)this + 2) = 0;
  *((_WORD *)this + 3) = 0;
  *((_WORD *)this + 4) = 0;
  *((_WORD *)this + 5) = 0;
  *(this + 13) = 0;
  *((_DWORD *)this + 4) = 0;
  *((_DWORD *)this + 5) = 0;
  *((_DWORD *)this + 6) = 0;
  *(this + 29) = 0;
  *(this + 30) = 0;
  *(this + 28) = 0;
  *(this + 12) = 100;
  *(_DWORD *)(this + 31) = 0;
  *((_DWORD *)this + 9) = 0;
  *((_DWORD *)this + 10) = 0;
  *(this + 44) = 0;
  return this;
}

//----- (657317C0) --------------------------------------------------------
char *__thiscall CharacterSlots6_Init(char *this)
{
  int v1; // esi
  char *v2; // edx

  v1 = 5;
  v2 = this + 8;
  do
  {
    *((_DWORD *)v2 - 2) = 0;
    *((_WORD *)v2 - 2) = 0;
    *((_WORD *)v2 - 1) = 0;
    *(_WORD *)v2 = 0;
    *((_WORD *)v2 + 1) = 0;
    v2[4] = 100;
    v2[5] = 0;
    *((_DWORD *)v2 + 2) = 0;
    *((_DWORD *)v2 + 3) = 0;
    *((_DWORD *)v2 + 4) = 0;
    v2[21] = 0;
    v2[22] = 0;
    v2[20] = 0;
    *(_DWORD *)(v2 + 23) = 0;
    *((_DWORD *)v2 + 7) = 0;
    *((_DWORD *)v2 + 8) = 0;
    v2[36] = 0;
    v2 += 48;
    --v1;
  }
  while ( v1 >= 0 );
  return this;
}

//----- (65731820) --------------------------------------------------------
char *__thiscall CharacterSlots12_Init(char *this)
{
  int v1; // esi
  char *v2; // edx

  v1 = 11;
  v2 = this + 8;
  do
  {
    *((_DWORD *)v2 - 2) = 0;
    *((_WORD *)v2 - 2) = 0;
    *((_WORD *)v2 - 1) = 0;
    *(_WORD *)v2 = 0;
    *((_WORD *)v2 + 1) = 0;
    v2[4] = 100;
    v2[5] = 0;
    *((_DWORD *)v2 + 2) = 0;
    *((_DWORD *)v2 + 3) = 0;
    *((_DWORD *)v2 + 4) = 0;
    v2[21] = 0;
    v2[22] = 0;
    v2[20] = 0;
    *(_DWORD *)(v2 + 23) = 0;
    *((_DWORD *)v2 + 7) = 0;
    *((_DWORD *)v2 + 8) = 0;
    v2[36] = 0;
    v2 += 48;
    --v1;
  }
  while ( v1 >= 0 );
  return this;
}

//----- (65731880) --------------------------------------------------------
_BYTE *__thiscall CharacterSlots3_Init(_BYTE *this)
{
  int v1; // esi
  _BYTE *v2; // edx

  v1 = 2;
  v2 = this + 8;
  do
  {
    *((_DWORD *)v2 - 2) = 0;
    *((_WORD *)v2 - 2) = 0;
    *((_WORD *)v2 - 1) = 0;
    *(_WORD *)v2 = 0;
    *((_WORD *)v2 + 1) = 0;
    v2[4] = 100;
    v2[5] = 0;
    *((_DWORD *)v2 + 2) = 0;
    *((_DWORD *)v2 + 3) = 0;
    *((_DWORD *)v2 + 4) = 0;
    v2[21] = 0;
    v2[22] = 0;
    v2[20] = 0;
    *(_DWORD *)(v2 + 23) = 0;
    *((_DWORD *)v2 + 7) = 0;
    *((_DWORD *)v2 + 8) = 0;
    v2[36] = 0;
    v2 += 48;
    --v1;
  }
  while ( v1 >= 0 );
  *(this + 144) = 0;
  return this;
}

//----- (657319C0) --------------------------------------------------------
_DWORD *__thiscall RBTree_RotateRight(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  _DWORD *v4; // ecx

  result = *(_DWORD **)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *result;
  if ( !*(_BYTE *)(*result + 17) )
    *(_DWORD *)(*result + 4) = a2;
  result[1] = *(_DWORD *)(a2 + 4);
  v3 = *(this + 1);
  if ( a2 == *(_DWORD *)(v3 + 4) )
  {
    *(_DWORD *)(v3 + 4) = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  else
  {
    v4 = *(_DWORD **)(a2 + 4);
    if ( a2 == *v4 )
      *v4 = result;
    else
      v4[2] = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  return result;
}

//----- (65731AB0) --------------------------------------------------------
char *__thiscall BitStream_Write_u32c(char *this, int a2)
{
  char *v2; // esi
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  v2 = this + 12;
  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  ByteSwapCopy((int)&a2, (int)v4, 4u);
  return BitStream_WriteBitsCompressed(v2, v4, 0x20u, 1);
}

//----- (65731C30) --------------------------------------------------------
char __thiscall Packet_ID_STORAGE_write(int this)
{
  char result; // al

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1076));
    switch ( *(_DWORD *)(this + 1076) )
    {
      case 2:
        ItemsAddedPayload_Write((ItemsAddedPayload *)(this + 1084), (unsigned int *)(this + 12));
        ItemsAddedPayload_Write((ItemsAddedPayload *)(this + 1120), (unsigned int *)(this + 12));
        BitStream_WriteBool((char *)this, *(_BYTE *)(this + 1156));
        return 1;
      case 3:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
        return 1;
      case 5:
      case 7:
        ItemsAddedPayload_Write((ItemsAddedPayload *)(this + 1084), (unsigned int *)(this + 12));
        return 1;
      case 9:
        sub_6593C190(this + 1160, (unsigned int *)(this + 12));
        goto LABEL_7;
      default:
LABEL_7:
        JUMPOUT(0x65731CE9);
    }
  }
  return result;
}
// 65731CE8: control flows out of bounds to 65731CE9

//----- (65731D10) --------------------------------------------------------
_DWORD *__thiscall RBTree_EraseNode2(_DWORD *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // ebx
  int v4; // edi
  _DWORD *v5; // eax
  _DWORD *v6; // edx
  int v7; // esi
  _DWORD *v8; // ecx
  int v9; // eax
  _DWORD *Min; // eax
  int v11; // ecx
  int v12; // ecx
  _DWORD *v13; // ecx
  char *v14; // ecx
  char *v15; // eax
  char v16; // dl
  _DWORD *i; // ecx
  _BYTE *v18; // eax
  int v19; // eax
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-5Ch] BYREF
  _BYTE v22[28]; // [esp+38h] [ebp-34h] BYREF
  int v23; // [esp+54h] [ebp-18h]
  void *v24; // [esp+58h] [ebp-14h]
  _DWORD *v25; // [esp+5Ch] [ebp-10h]
  int v26; // [esp+68h] [ebp-4h]

  v25 = this;
  v3 = (_DWORD *)a3;
  if ( *(_BYTE *)(a3 + 17) )
  {
    std::string::string(v22, "invalid map/set<T> iterator");
    v26 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v22);
    pExceptionObject[0] = &off_659BFD34;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVout_of_range_std__);
  }
  v24 = (void *)a3;
  RBTreeIter18_Increment((int **)&a3);
  if ( *(_BYTE *)(*v3 + 17) )
  {
    v4 = v3[2];
LABEL_8:
    v7 = v3[1];
    if ( !*(_BYTE *)(v4 + 17) )
      *(_DWORD *)(v4 + 4) = v7;
    v8 = v25;
    v9 = v25[1];
    if ( *(_DWORD **)(v9 + 4) == v3 )
    {
      *(_DWORD *)(v9 + 4) = v4;
    }
    else if ( *(_DWORD **)v7 == v3 )
    {
      *(_DWORD *)v7 = v4;
    }
    else
    {
      *(_DWORD *)(v7 + 8) = v4;
    }
    if ( *(_DWORD **)v8[1] == v3 )
    {
      if ( *(_BYTE *)(v4 + 17) )
      {
        Min = (_DWORD *)v7;
      }
      else
      {
        Min = RBTree18_GetMin((_DWORD *)v4);
        v8 = v25;
      }
      *(_DWORD *)v8[1] = Min;
    }
    v11 = v8[1];
    v23 = v11;
    if ( *(_DWORD **)(v11 + 8) == v3 )
    {
      if ( *(_BYTE *)(v4 + 17) )
        *(_DWORD *)(v11 + 8) = v7;
      else
        *(_DWORD *)(v23 + 8) = RBTree18_GetMax(v4);
    }
    goto LABEL_36;
  }
  if ( *(_BYTE *)(v3[2] + 17) )
  {
    v4 = *v3;
    goto LABEL_8;
  }
  v5 = (_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 8);
  v6 = (_DWORD *)(a3 + 8);
  if ( (_DWORD *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*v3 + 4) = a3;
  *v5 = *v3;
  if ( v5 == (_DWORD *)v3[2] )
  {
    v7 = (int)v5;
  }
  else
  {
    v7 = v5[1];
    if ( !*(_BYTE *)(v4 + 17) )
      *(_DWORD *)(v4 + 4) = v7;
    *(_DWORD *)v7 = v4;
    *v6 = v3[2];
    *(_DWORD *)(v3[2] + 4) = v5;
  }
  v12 = v25[1];
  if ( *(_DWORD **)(v12 + 4) == v3 )
  {
    *(_DWORD *)(v12 + 4) = v5;
  }
  else
  {
    v13 = (_DWORD *)v3[1];
    if ( (_DWORD *)*v13 == v3 )
      *v13 = v5;
    else
      v13[2] = v5;
  }
  v5[1] = v3[1];
  v14 = (char *)(v3 + 4);
  v15 = (char *)(v5 + 4);
  if ( v15 != (char *)(v3 + 4) )
  {
    v16 = *v15;
    *v15 = *v14;
    *v14 = v16;
  }
LABEL_36:
  if ( *((_BYTE *)v24 + 16) == 1 )
  {
    for ( i = v25; v4 != *(_DWORD *)(i[1] + 4); v7 = *(_DWORD *)(v7 + 4) )
    {
      if ( *(_BYTE *)(v4 + 16) != 1 )
        break;
      v18 = *(_BYTE **)v7;
      if ( v4 == *(_DWORD *)v7 )
      {
        v18 = *(_BYTE **)(v7 + 8);
        if ( !v18[16] )
        {
          v18[16] = 1;
          *(_BYTE *)(v7 + 16) = 0;
          RBTree_RotateRight(i, v7);
          v18 = *(_BYTE **)(v7 + 8);
          i = v25;
        }
        if ( v18[17] )
          goto LABEL_54;
        if ( *(_BYTE *)(*(_DWORD *)v18 + 16) != 1 || *(_BYTE *)(*((_DWORD *)v18 + 2) + 16) != 1 )
        {
          if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 16) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v18 + 16) = 1;
            v18[16] = 0;
            RBTree_RotateLeft(i, v18);
            v18 = *(_BYTE **)(v7 + 8);
            i = v25;
          }
          v18[16] = *(_BYTE *)(v7 + 16);
          *(_BYTE *)(v7 + 16) = 1;
          *(_BYTE *)(*((_DWORD *)v18 + 2) + 16) = 1;
          RBTree_RotateRight(i, v7);
          break;
        }
      }
      else
      {
        if ( !v18[16] )
        {
          v18[16] = 1;
          *(_BYTE *)(v7 + 16) = 0;
          RBTree_RotateLeft(i, (_DWORD *)v7);
          v18 = *(_BYTE **)v7;
          i = v25;
        }
        if ( v18[17] )
          goto LABEL_54;
        if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 16) != 1 || *(_BYTE *)(*(_DWORD *)v18 + 16) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v18 + 16) == 1 )
          {
            *(_BYTE *)(*((_DWORD *)v18 + 2) + 16) = 1;
            v18[16] = 0;
            RBTree_RotateRight(i, (int)v18);
            v18 = *(_BYTE **)v7;
            i = v25;
          }
          v18[16] = *(_BYTE *)(v7 + 16);
          *(_BYTE *)(v7 + 16) = 1;
          *(_BYTE *)(*(_DWORD *)v18 + 16) = 1;
          RBTree_RotateLeft(i, (_DWORD *)v7);
          break;
        }
      }
      v18[16] = 0;
LABEL_54:
      v4 = v7;
    }
    *(_BYTE *)(v4 + 16) = 1;
  }
  operator delete(v24);
  v19 = v25[2];
  if ( v19 )
    v25[2] = v19 - 1;
  *a2 = a3;
  return a2;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD34: using guessed type void *off_659BFD34;

//----- (65731FE0) --------------------------------------------------------
void __stdcall RBTree_DeleteSubtree(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; !*((_BYTE *)i + 17); v1 = i )
  {
    RBTree_DeleteSubtree((void **)i[2]);
    i = (void **)*i;
    operator delete(v1);
  }
}

//----- (65732020) --------------------------------------------------------
char __thiscall ItemVector_Init(_DWORD *this, unsigned int a2)
{
  char *v4; // eax
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( !a2 )
    return 0;
  if ( a2 > 0x5D1745D )
    ThrowLengthError_Vector(v5, v6);
  v4 = (char *)Vector44_Allocate(a2);
  *(this + 1) = v4;
  *(this + 2) = v4;
  *(this + 3) = &v4[44 * a2];
  return 1;
}
// 65732049: variable 'v5' is possibly undefined
// 65732049: variable 'v6' is possibly undefined

//----- (657320C0) --------------------------------------------------------
int **__thiscall RBTree_EraseRange(int ***this, int **a2, int *a3, int *a4)
{
  int v5; // eax
  int *v6; // ecx
  _DWORD *v7; // eax
  int v9; // edx
  int v10; // eax
  int *v11; // ecx
  int j; // eax
  int i; // eax
  int v14; // [esp+4h] [ebp-4h] BYREF

  v5 = (int)*(this + 1);
  v6 = a3;
  if ( a3 == *(int **)v5 && a4 == (int *)v5 )
  {
    RBTree_DeleteSubtree(*(void ***)(v5 + 4));
    (*(this + 1))[1] = (int *)*(this + 1);
    v7 = *(this + 1);
    *(this + 2) = 0;
    *v7 = v7;
    (*(this + 1))[2] = (int *)*(this + 1);
    *a2 = **(this + 1);
    return a2;
  }
  else
  {
    for ( ; a3 != a4; v6 = a3 )
    {
      v9 = (int)v6;
      if ( !*((_BYTE *)v6 + 17) )
      {
        v10 = v6[2];
        if ( *(_BYTE *)(v10 + 17) )
        {
          for ( i = v6[1]; !*(_BYTE *)(i + 17); i = *(_DWORD *)(i + 4) )
          {
            if ( v6 != *(int **)(i + 8) )
              break;
            v6 = (int *)i;
          }
          a3 = (int *)i;
        }
        else
        {
          v11 = (int *)v6[2];
          for ( j = *(_DWORD *)v10; !*(_BYTE *)(j + 17); j = *(_DWORD *)j )
            v11 = (int *)j;
          a3 = v11;
        }
      }
      RBTree_EraseNode2(this, &v14, v9);
    }
    *a2 = v6;
    return a2;
  }
}

//----- (65732250) --------------------------------------------------------
void __thiscall ItemMapContainer_Clear(int ***this)
{
  int ***v1; // esi
  int *v2; // [esp+4h] [ebp-4h] BYREF

  v1 = this + 8;
  RBTree_EraseRange(this + 8, &v2, **(this + 9), (int *)*(this + 9));
  operator delete(v1[1]);
  v1[1] = 0;
  v1[2] = 0;
}

//----- (65732360) --------------------------------------------------------
void __cdecl ItemVector_DestroyRange(int a1, int a2)
{
  int v2; // ebx
  int v3; // edi
  int v4; // esi

  v2 = a2;
  v3 = a1;
  if ( a1 != a2 )
  {
    v4 = a1 + 36;
    do
    {
      RBTree_EraseRange((int ***)(v4 - 4), (int **)&a1, **(int ***)v4, *(int **)v4);
      operator delete(*(void **)v4);
      *(_DWORD *)v4 = 0;
      *(_DWORD *)(v4 + 4) = 0;
      v3 += 44;
      v4 += 44;
    }
    while ( v3 != v2 );
  }
}

//----- (657323D0) --------------------------------------------------------
void __stdcall ItemVector_DestroyRange_Wrapper(int a1, int a2)
{
  ItemVector_DestroyRange(a1, a2);
}

//----- (65732500) --------------------------------------------------------
void __thiscall ItemListData_FreeVectors(int *this)
{
  int v2; // eax
  int *v3; // esi
  int v4; // eax

  v2 = *(this + 264);
  v3 = this + 263;
  if ( v2 )
  {
    ItemVector_DestroyRange(v2, *(this + 265));
    operator delete((void *)v3[1]);
  }
  v3[1] = 0;
  v3[2] = 0;
  v3[3] = 0;
  v4 = *(this + 2);
  if ( v4 )
  {
    ItemVector_DestroyRange(v4, *(this + 3));
    operator delete((void *)*(this + 2));
  }
  *(this + 2) = 0;
  *(this + 3) = 0;
  *(this + 4) = 0;
}

//----- (657325B0) --------------------------------------------------------
int __thiscall ItemListPacket_Dtor(int *this)
{
  int v2; // eax
  int v3; // eax

  ItemListData_FreeVectors(this + 290);
  v2 = *(this + 282);
  if ( v2 )
  {
    ItemVector_DestroyRange(v2, *(this + 283));
    operator delete((void *)*(this + 282));
  }
  *(this + 282) = 0;
  *(this + 283) = 0;
  *(this + 284) = 0;
  v3 = *(this + 273);
  if ( v3 )
  {
    ItemVector_DestroyRange(v3, *(this + 274));
    operator delete((void *)*(this + 273));
  }
  *(this + 273) = 0;
  *(this + 274) = 0;
  *(this + 275) = 0;
  *this = (int)&vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 3));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (65732690) --------------------------------------------------------
_DWORD *__thiscall ItemListData_Init(_DWORD *this)
{
  *(this + 2) = 0;
  *(this + 3) = 0;
  *(this + 4) = 0;
  *(_WORD *)this = 0;
  *((_BYTE *)this + 32) = 0;
  *(this + 5) = 0;
  *(this + 6) = 0;
  *(this + 7) = 0;
  CharacterSlots12_Init((char *)this + 36);
  CharacterSlots3_Init((_BYTE *)this + 612);
  CharacterSlots6_Init((char *)this + 760);
  *(this + 264) = 0;
  *(this + 265) = 0;
  *(this + 266) = 0;
  *((_WORD *)this + 524) = 0;
  *((_BYTE *)this + 1080) = 0;
  *(this + 267) = 0;
  *(this + 268) = 0;
  *(this + 269) = 0;
  return this;
}

//----- (65732740) --------------------------------------------------------
char *__thiscall Packet_Storage_Ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -103;
  *(_DWORD *)this = &off_659C0E80;
  *((_DWORD *)this + 273) = 0;
  *((_DWORD *)this + 274) = 0;
  *((_DWORD *)this + 275) = 0;
  *((_WORD *)this + 542) = 0;
  *(this + 1116) = 0;
  *((_DWORD *)this + 276) = 0;
  *((_DWORD *)this + 277) = 0;
  *((_DWORD *)this + 278) = 0;
  *((_DWORD *)this + 282) = 0;
  *((_DWORD *)this + 283) = 0;
  *((_DWORD *)this + 284) = 0;
  *((_WORD *)this + 560) = 0;
  *(this + 1152) = 0;
  *((_DWORD *)this + 285) = 0;
  *((_DWORD *)this + 286) = 0;
  *((_DWORD *)this + 287) = 0;
  ItemListData_Init((_DWORD *)this + 290);
  *((_DWORD *)this + 268) = 0;
  *((_DWORD *)this + 269) = 0;
  *((_DWORD *)this + 270) = 0;
  *(this + 1156) = 1;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659C0E80: using guessed type void *off_659C0E80;

//----- (65732840) --------------------------------------------------------
char __thiscall BitStream_ReadBit_Out(unsigned int *this, bool *a2)
{
  unsigned int v2; // eax

  v2 = *(this + 2);
  if ( v2 + 1 > *this )
    return 0;
  *a2 = ((unsigned __int8)(128 >> (v2 & 7)) & *(_BYTE *)((v2 >> 3) + *(this + 3))) != 0;
  ++*(this + 2);
  return 1;
}

//----- (657328E0) --------------------------------------------------------
char __thiscall VariableSizedPacket::ReadBit(unsigned int *this, bool *a2)
{
  unsigned int v2; // eax

  v2 = *(this + 5);
  if ( v2 + 1 > *(this + 3) )
    return 0;
  *a2 = ((unsigned __int8)(128 >> (v2 & 7)) & *(_BYTE *)((v2 >> 3) + *(this + 6))) != 0;
  ++*(this + 5);
  return 1;
}

//----- (65732940) --------------------------------------------------------
char __thiscall Packet_ID_STORAGE_read(int this, int a2)
{
  char result; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1076));
    switch ( *(_DWORD *)(this + 1076) )
    {
      case 2:
        ItemList_Read((ItemsAddedPayload *)(this + 1084), (unsigned int *)(this + 12));
        ItemList_Read((ItemsAddedPayload *)(this + 1120), (unsigned int *)(this + 12));
        VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1156));
        result = 1;
        break;
      case 3:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        result = 1;
        break;
      case 5:
      case 7:
        ItemList_Read((ItemsAddedPayload *)(this + 1084), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 9:
        Packet_ID_STORAGE_read_structA((char *)(this + 1160), (unsigned int *)(this + 12));
        goto LABEL_7;
      default:
LABEL_7:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (65732A50) --------------------------------------------------------
int SendPacket_Storage_Open()
{
  int result; // eax
  int v1[562]; // [esp+4h] [ebp-8D8h] BYREF
  int v2; // [esp+8D8h] [ebp-4h]

  result = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 32);
  if ( !(_BYTE)result )
  {
    Packet_Storage_Ctor((char *)v1);
    v2 = 0;
    v1[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    v1[269] = 8;
    Packet_ID_STORAGE_write((int)v1);
    LTClient_SendPacket_BuildIfNeeded(v1, 2, 1, 3, 0);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 32);
    v2 = -1;
    return ItemListPacket_Dtor(v1);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65732B20) --------------------------------------------------------
int __thiscall SendPacket_Storage_Request(_BYTE *this)
{
  int result; // eax
  int v3[562]; // [esp+8h] [ebp-8D8h] BYREF
  int v4; // [esp+8DCh] [ebp-4h]

  result = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 32);
  if ( !(_BYTE)result )
  {
    Packet_Storage_Ctor((char *)v3);
    v4 = 0;
    v3[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    v3[269] = *(this + 4) != 0;
    Packet_ID_STORAGE_write((int)v3);
    LTClient_SendPacket_BuildIfNeeded(v3, 2, 1, 3, 0);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 32);
    *(this + 4) = 0;
    v4 = -1;
    return ItemListPacket_Dtor(v3);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65732C40) --------------------------------------------------------
bool __cdecl Item_ValidateSlotForType(__int16 a1, unsigned __int8 a2)
{
  bool result; // al

  if ( a2 < 0xBu )
    return 0;
  switch ( a1 )
  {
    case 1:
    case 3:
    case 4:
    case 12:
    case 15:
    case 17:
    case 18:
    case 19:
    case 39:
    case 40:
    case 41:
    case 42:
    case 43:
    case 44:
    case 45:
    case 46:
    case 48:
    case 49:
    case 51:
    case 53:
    case 54:
    case 57:
      result = a2 >= 0xAu;
      break;
    case 2:
    case 5:
    case 6:
    case 7:
    case 9:
    case 16:
    case 20:
    case 23:
    case 24:
    case 25:
    case 26:
    case 27:
    case 28:
    case 31:
    case 32:
    case 34:
    case 35:
    case 36:
    case 52:
      result = a2 >= 0xCu;
      break;
    case 8:
    case 47:
      result = a2 >= 0x16u;
      break;
    case 10:
    case 11:
    case 14:
    case 22:
      result = a2 >= 0xDu;
      break;
    case 13:
    case 21:
    case 29:
    case 30:
    case 33:
    case 50:
      result = a2 >= 0xEu;
      break;
    case 37:
    case 38:
    case 56:
      result = a2 != 23 && a2 != 16;
      break;
    default:
      return 0;
  }
  return result;
}
// 65732C64: conditional instruction was optimized away because %arg_4.1>=Bu

//----- (65732D40) --------------------------------------------------------
int StatGroup5_GetValue()
{
  int v1; // [esp+0h] [ebp-4h] BYREF

  v1 = 0;
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v1);
  return v1;
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65732D90) --------------------------------------------------------
int __thiscall NPCCharacter_Ctor(int this)
{
  CharacterInfo_Ctor((float *)this, 4);
  *(_DWORD *)this = &off_659C0E90;
  *(_WORD *)(this + 88) = 0;
  *(_BYTE *)(this + 90) = 2;
  *(_BYTE *)(this + 52) = 0;
  return this;
}
// 659C0E90: using guessed type void *off_659C0E90;

//----- (65732FC0) --------------------------------------------------------
_WORD *__thiscall WordArray_FindById(_DWORD *this, __int16 a2)
{
  int v2; // edx
  _WORD *v3; // esi
  unsigned int v4; // eax
  _WORD *i; // ecx

  v2 = 0;
  if ( !((*(this + 4) - *(this + 3)) >> 2) )
    return 0;
  v3 = (_WORD *)*(this + 3);
  v4 = (*(this + 4) - (int)v3) >> 2;
  for ( i = v3; *i != a2; i += 2 )
  {
    if ( ++v2 >= v4 )
      return 0;
  }
  return &v3[2 * v2];
}

//----- (657330A0) --------------------------------------------------------
float *__thiscall FloatObject_Ctor(float *this)
{
  *(this + 2) = 1.0;
  *(_DWORD *)this = &off_659C0EBC;
  *((_BYTE *)this + 4) = 0;
  *(this + 3) = 0.0;
  *((_BYTE *)this + 5) = 1;
  return this;
}
// 659C0EBC: using guessed type void *off_659C0EBC;

//----- (65733350) --------------------------------------------------------
float *__thiscall PlayerState_Init(float *this)
{
  *(_DWORD *)this = &off_659C0ED4;
  ServerMenuMgr_Ctor(this + 11);
  ServerMenuMgr_Ctor(this + 81);
  *(this + 161) = 0.0;
  *(this + 155) = 0.0;
  *(this + 162) = 0.0;
  *((_DWORD *)this + 154) = &off_659C0EC4;
  *(this + 163) = 0.0;
  *(this + 156) = 0.0;
  *(this + 164) = 0.0;
  *(this + 157) = 0.0;
  *(this + 165) = 0.0;
  *(this + 158) = 0.0;
  *(this + 166) = 0.0;
  *(this + 159) = 0.0;
  *(this + 169) = 0.0;
  *(this + 168) = 0.0;
  *(this + 170) = 0.0;
  *(this + 167) = 0.0;
  *(this + 171) = 0.0;
  *(this + 172) = 0.0;
  *((_DWORD *)this + 160) = 1;
  *(this + 152) = 0.0;
  *((_DWORD *)this + 151) = 1;
  *(this + 6) = 0.0;
  *(this + 153) = 75.0;
  *(this + 7) = NAN;
  *(this + 8) = 0.0;
  *(this + 1) = 0.0;
  *(this + 2) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *(this + 3) = 1.0;
  *(this + 173) = 0.0;
  *(this + 4) = 1.0;
  *(this + 5) = 150.0;
  return this;
}
// 659C0EC4: using guessed type void *off_659C0EC4;
// 659C0ED4: using guessed type void *off_659C0ED4;

//----- (657334A0) --------------------------------------------------------
void __thiscall ServerCharacter_Dtor(char *this)
{
  int v2; // eax

  *(_DWORD *)this = &off_659C0ED4;
  v2 = *((_DWORD *)this + 9);
  if ( v2 )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 112))(g_pILTClient, v2);
    *((_DWORD *)this + 9) = 0;
  }
  if ( *((_DWORD *)this + 10) )
  {
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 112))(g_pILTClient, *((_DWORD *)this + 10));
    *((_DWORD *)this + 10) = 0;
  }
  if ( *((_DWORD *)this + 173) )
  {
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 112))(g_pILTClient, *((_DWORD *)this + 173));
    *((_DWORD *)this + 173) = 0;
  }
  if ( *((_DWORD *)this + 167) )
  {
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, *((_DWORD *)this + 167));
    *((_DWORD *)this + 167) = 0;
  }
  *((_DWORD *)this + 154) = &off_659C0D14;
  ServerMenuMgr_Dtor(this + 324);
  ServerMenuMgr_Dtor(this + 44);
}
// 659C0D14: using guessed type void *off_659C0D14;
// 659C0ED4: using guessed type void *off_659C0ED4;

//----- (65733950) --------------------------------------------------------
int __stdcall PlayerStats_GetStatValue(unsigned __int8 a1)
{
  unsigned int i; // eax
  _DWORD v3[106]; // [esp+4h] [ebp-1A8h] BYREF

  if ( a1 >= 0x35u )
    return 0;
  for ( i = 0; i < 0x35; ++i )
  {
    v3[2 * i] = 0;
    v3[2 * i + 1] = 0;
  }
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 1, v3);
  return v3[2 * a1];
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65733A00) --------------------------------------------------------
_DWORD *__thiscall CameraTransform_Ctor(_DWORD *this)
{
  *this = &off_659C0FFC;
  *(this + 1) = 0;
  *((_BYTE *)this + 8) = 0;
  *(this + 3) = 0;
  *((float *)this + 4) = 0.0;
  *((float *)this + 5) = 0.0;
  *((float *)this + 6) = 0.0;
  *((float *)this + 7) = 0.0;
  *((float *)this + 8) = 0.0;
  *((float *)this + 9) = 0.0;
  *((float *)this + 10) = 0.0;
  *((float *)this + 11) = 0.0;
  *((float *)this + 12) = 0.0;
  *((float *)this + 13) = 0.0;
  *((float *)this + 14) = 0.0;
  *((float *)this + 15) = 0.0;
  *((float *)this + 16) = 0.0;
  *((float *)this + 17) = 0.0;
  *((float *)this + 18) = 0.0;
  *((float *)this + 19) = 0.0;
  *((float *)this + 20) = 0.0;
  *((float *)this + 21) = 0.0;
  *((_BYTE *)this + 124) = 0;
  *((float *)this + 22) = 0.0;
  *((_BYTE *)this + 125) = 0;
  *((float *)this + 23) = 0.0;
  *((_BYTE *)this + 126) = 0;
  *((float *)this + 24) = 0.0;
  *((_BYTE *)this + 127) = 0;
  *((float *)this + 25) = 0.0;
  *((_BYTE *)this + 128) = 0;
  *((float *)this + 26) = 0.0;
  *((_BYTE *)this + 129) = 0;
  *((float *)this + 27) = 0.0;
  *((_BYTE *)this + 130) = 0;
  *((float *)this + 28) = 0.0;
  *((_BYTE *)this + 131) = 0;
  *((_BYTE *)this + 132) = 0;
  *((float *)this + 29) = 0.5;
  *((_BYTE *)this + 133) = 0;
  *((_BYTE *)this + 134) = 1;
  *((float *)this + 30) = 2.5;
  *((_BYTE *)this + 135) = 0;
  *(this + 34) = 0;
  *((float *)this + 36) = 1.0;
  *(this + 35) = 1;
  *((float *)this + 37) = 1.0;
  *((float *)this + 38) = 0.0;
  return this;
}
// 659C0FFC: using guessed type void *off_659C0FFC;

//----- (65733B40) --------------------------------------------------------
void __thiscall HandleFlashlightToggle(int *this)
{
  int v2; // eax
  int v3; // eax
  int v4; // esi
  char *v5; // eax

  if ( *(this + 1) && !PlayerStats_GetStatValue(2u) )
  {
    if ( *(this + 1) )
    {
      v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5310);
      if ( v4 )
        v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
      else
        v5 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v5, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v4 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
      SoundMgr_PlaySoundByIndex(dword_65ABF750, 0x3Cu);
    }
  }
  else
  {
    (*(void (__thiscall **)(int *))(*this + 28))(this);
    v2 = *(this + 9);
    if ( v2 && *(this + 10) && !*(this + 8) )
    {
      *(this + 8) = 1;
      (*(void (__thiscall **)(int, int, _DWORD, int, int))(*(_DWORD *)dword_65A5AA40 + 84))(dword_65A5AA40, v2, 0, 1, 1);
      (*(void (__thiscall **)(int, _DWORD, _DWORD, int, int))(*(_DWORD *)dword_65A5AA40 + 84))(
        dword_65A5AA40,
        *(this + 10),
        0,
        1,
        1);
      v3 = *(this + 173);
      *(this + 32) |= 1u;
      *(this + 102) |= 1u;
      if ( v3 )
        (*(void (__thiscall **)(int, int, _DWORD, int, int))(*(_DWORD *)dword_65A5AA40 + 84))(
          dword_65A5AA40,
          v3,
          0,
          1,
          1);
      SoundMgr_PlaySoundAtObject(dword_65ABF750, *(this + 6), "Sounds\\Interface\\Flashlight2on.wav", 256.0, 0);
    }
  }
}
// 65A5AA40: using guessed type int dword_65A5AA40;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (65735530) --------------------------------------------------------
LONG __thiscall SharedMem_ModifyU16_0x9D(char *this, char a2)
{
  int U16_std; // [esp+4h] [ebp-4h] BYREF

  U16_std = (unsigned __int16)SharedMem_ReadU16_std(0x9Du);
  sub_65932400(a2, 1, &U16_std);
  return SharedMem_WriteU16_std(0x9Du, U16_std);
}

//----- (65735580) --------------------------------------------------------
LONG __stdcall SharedMem_ModifyU16_0xA8(char a1)
{
  int U16_std; // [esp+4h] [ebp-4h] BYREF

  U16_std = (unsigned __int16)SharedMem_ReadU16_std(0xA8u);
  sub_65932400(a1, 1, &U16_std);
  return SharedMem_WriteU16_std(0xA8u, U16_std);
}

//----- (65735640) --------------------------------------------------------
int __thiscall CVar_GetBoolDefault(_DWORD *this, int a2, unsigned __int8 a3)
{
  int v4; // eax

  v4 = (*(int (__cdecl **)(int))(g_pILTClient + 248))(a2);
  *(this + 72) = v4;
  if ( v4 )
    return ((double (__thiscall *)(int, int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v4) > 0.0;
  else
    return a3;
}

//----- (657357B0) --------------------------------------------------------
BOOL __thiscall SharedMem_IsValidWorldId(void *this)
{
  return SharedMem_ReadDword_this(this, 0x2BE2u) && (unsigned int)SharedMem_ReadDword_this(this, 0x2BE2u) <= 0x41;
}

//----- (65735840) --------------------------------------------------------
void __thiscall MsgId_85_Handler(float *this, float a2)
{
  *(this + 1679) = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient) + a2;
}

//----- (65735A20) --------------------------------------------------------
int __thiscall CGameClientShell_Dtor(CGameClientShell *this)
{
  *(_DWORD *)this->_pad0 = &CGameClientShell_vftable;
  CShell_DestroyGlobalObjects();
  g_pGameClientShell = 0;
  ServerCharacter_Dtor((char *)this + 64);
  return ScaleMgr_Clear((int)&this->_pad0[4]);
}
// 659C116C: using guessed type _UNKNOWN *CGameClientShell_vftable;

//----- (65736080) --------------------------------------------------------
const char *__stdcall LTClient_SetFarZ(int a1)
{
  const char *result; // eax

  result = (const char *)a1;
  if ( a1 > 50 )
    return LTClient_RunCommand("FarZ", a1);
  return result;
}

//----- (657360A0) --------------------------------------------------------
const char *__thiscall ConsoleVar_SetFromObject(void *this, const char *a2, char *String1)
{
  const char *result; // eax
  char v4[8]; // [esp+10h] [ebp-208h] BYREF

  result = a2;
  if ( a2 && String1 )
  {
    *(float *)v4 = 0.0;
    (*(void (__thiscall **)(int, const char *, char *))(*(_DWORD *)g_pILTClient + 288))(g_pILTClient, a2, v4);
    if ( !_stricmp(String1, "FarZ") )
    {
      return LTClient_SetFarZ((int)*(float *)v4);
    }
    else
    {
      sprintf(&v4[4], "%s %f", String1, *(float *)v4);
      return (const char *)(*(int (__cdecl **)(char *))(g_pILTClient + 520))(&v4[4]);
    }
  }
  return result;
}

//----- (65736170) --------------------------------------------------------
const char *__thiscall Fog_RegisterAllCVars(void *this)
{
  ConsoleVar_SetFromObject(this, "FogEnable", "FogEnable");
  ConsoleVar_SetFromObject(this, "FogNearZ", "FogNearZ");
  ConsoleVar_SetFromObject(this, "FogFarZ", "FogFarZ");
  ConsoleVar_SetFromObject(this, "FogR", "FogR");
  ConsoleVar_SetFromObject(this, "FogG", "FogG");
  ConsoleVar_SetFromObject(this, "FogB", "FogB");
  ConsoleVar_SetFromObject(this, "SkyFogEnable", "SkyFogEnable");
  ConsoleVar_SetFromObject(this, "SkyFogNearZ", "SkyFogNearZ");
  return ConsoleVar_SetFromObject(this, "SkyFogFarZ", "SkyFogFarZ");
}

//----- (65736220) --------------------------------------------------------
void Fog_JumpOutHandler()
{
  JUMPOUT(0x658934C0);
}
// 6573622A: control flows out of bounds to 658934C0

//----- (65736230) --------------------------------------------------------
int __stdcall Input_ProcessMouseSensitivity(float a1)
{
  int v1; // eax
  int v2; // ebx
  int result; // eax
  int v4; // esi
  const char *v5; // eax
  const char *v6; // eax
  int v7; // [esp+10h] [ebp-110h]
  int v8; // [esp+14h] [ebp-10Ch]
  float v9; // [esp+18h] [ebp-108h]
  float v10; // [esp+18h] [ebp-108h]
  char v11[128]; // [esp+1Ch] [ebp-104h] BYREF
  char v12[16]; // [esp+9Ch] [ebp-84h] BYREF
  char v13[4]; // [esp+DCh] [ebp-44h] BYREF
  int v14; // [esp+E0h] [ebp-40h]
  int v15; // [esp+E4h] [ebp-3Ch]
  int v16; // [esp+E8h] [ebp-38h]
  char v17[4]; // [esp+ECh] [ebp-34h]
  int v18; // [esp+F0h] [ebp-30h]
  int v19; // [esp+F4h] [ebp-2Ch]
  int v20; // [esp+F8h] [ebp-28h]
  char v21[4]; // [esp+FCh] [ebp-24h] BYREF
  int v22; // [esp+100h] [ebp-20h]
  int v23; // [esp+104h] [ebp-1Ch]
  int v24; // [esp+108h] [ebp-18h]
  char Destination[4]; // [esp+10Ch] [ebp-14h]
  int v26; // [esp+110h] [ebp-10h]
  int v27; // [esp+114h] [ebp-Ch]
  int v28; // [esp+118h] [ebp-8h]

  v1 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("MouseSensitivity");
  v2 = 0;
  v9 = 10.0;
  if ( v1 )
    v9 = ((double (__thiscall *)(int, int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v1);
  memset(v11, 0, sizeof(v11));
  result = (*(int (__cdecl **)(int, char *, int))(g_pILTClient + 468))(2, v11, 127);
  if ( !result )
  {
    *(_DWORD *)v21 = 0;
    v22 = 0;
    v23 = 0;
    v24 = 0;
    *(_DWORD *)Destination = 0;
    v26 = 0;
    v27 = 0;
    v28 = 0;
    *(_DWORD *)v13 = 0;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    *(_DWORD *)v17 = 0;
    v18 = 0;
    v19 = 0;
    v20 = 0;
    v8 = 0;
    result = (*(int (__cdecl **)(int))(g_pILTClient + 460))(2);
    v7 = result;
    v4 = result;
    if ( result )
    {
      do
      {
        if ( *(_DWORD *)(v4 + 132) == 1 )
        {
          v5 = (const char *)(v4 + 136);
          if ( v4 == -136 )
            v5 = byte_659A8B98;
          strncpy(v21, v5, 0x1Fu);
          HIBYTE(v28) = 0;
          v2 = 1;
        }
        if ( *(_DWORD *)(v4 + 132) == 2 )
        {
          v6 = (const char *)(v4 + 136);
          if ( v4 == -136 )
            v6 = byte_659A8B98;
          strncpy(v13, v6, 0x1Fu);
          HIBYTE(v20) = 0;
          v8 = 1;
        }
        v4 = *(_DWORD *)(v4 + 212);
      }
      while ( v4 );
      result = (*(int (__cdecl **)(int))(g_pILTClient + 464))(v7);
      if ( v2 )
      {
        if ( v8 )
        {
          v10 = (v9 / 2.75 + 0.1659999936819077) * a1 * 0.001000000047497451;
          sprintf(v12, "scale \"%s\" \"%s\" %f", v11, v21, v10);
          (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v12);
          sprintf(v12, "scale \"%s\" \"%s\" %f", v11, v13, v10 * 1.100000023841858);
          return (*(int (__cdecl **)(char *))(g_pILTClient + 520))(v12);
        }
      }
    }
  }
  return result;
}

//----- (65736600) --------------------------------------------------------
_DWORD *__thiscall CAPIHolder_ILTClient_Ctor(_DWORD *this, int a2, _DWORD *a3, int a4)
{
  CommandHandler_Ctor(this, a2, a4);
  *this = &off_659C13A8;
  *(this + 3) = a3;
  *a3 = 0;
  CommandMgr_EnsureAlloc();
  CommandMgr_QueueCommand(this);
  return this;
}
// 659C13A8: using guessed type void *off_659C13A8;

//----- (65736880) --------------------------------------------------------
char *__thiscall EquipSlots_GetArmor(char *this, unsigned __int8 a2)
{
  if ( (unsigned __int8)(a2 - 5) > 0xBu )
    return 0;
  else
    return this + 48 * a2 - 240;
}

//----- (657368B0) --------------------------------------------------------
int __thiscall EquipSlots_GetWeapon(void *this, unsigned __int8 a2)
{
  if ( (unsigned __int8)(a2 - 1) > 2u )
    return 0;
  else
    return (int)this + 48 * a2 - 48;
}

//----- (65736930) --------------------------------------------------------
char *__thiscall EquipSlots_GetAccessory(char *this, unsigned __int8 a2)
{
  if ( (unsigned __int8)(a2 - 18) > 3u )
    return 0;
  else
    return this + 16 * a2 - 288;
}

//----- (65736970) --------------------------------------------------------
int __thiscall EquipSlots_GetByIndex(_DWORD *this, unsigned __int16 a2)
{
  if ( a2 < 0x14u )
    return *(this + a2);
  else
    return 0;
}

//----- (657369A0) --------------------------------------------------------
char *__thiscall Packet_ID_B2_Ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *((_DWORD *)this + 270) = 0;
  *((_DWORD *)this + 271) = 0;
  *(this + 1088) = 0;
  *(this + 1064) = -78;
  *(_DWORD *)this = &off_659C13BC;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659C13BC: using guessed type void *off_659C13BC;

//----- (65736B30) --------------------------------------------------------
bool __thiscall SharedMem_EquipSlotMask_HasSlot(void *this, char a2)
{
  unsigned __int16 U16_std; // ax

  U16_std = SharedMem_ReadU16_std(0x1D69Fu);
  return EquipSlotMask_HasSlot(a2, U16_std);
}

//----- (65736BF0) --------------------------------------------------------
BOOL IsPlayerAlive()
{
  int v1; // [esp+0h] [ebp-4h] BYREF

  v1 = 0;
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 6, &v1);
  return v1 == 1;
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65736C90) --------------------------------------------------------
BOOL IsGameActive()
{
  return SharedMem_ReadBool_std(0x52u) && *(_DWORD *)dword_65ABF704;
}

//----- (65736DC0) --------------------------------------------------------
void __cdecl __noreturn ThrowLengthError_Vector2(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65736E50) --------------------------------------------------------
void __cdecl __noreturn VectorTooLong_ThrowException(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65736F60) --------------------------------------------------------
void *__cdecl Vector4_Allocate(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 4 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(4 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65736FD0) --------------------------------------------------------
void *__cdecl SafeArrayAlloc(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 4 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(4 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65737320) --------------------------------------------------------
float *__thiscall MsgId_70_ReadVecOrStruct(void *this, float *a2)
{
  void (__thiscall *v2)(void *, float *, int); // edx

  v2 = *(void (__thiscall **)(void *, float *, int))(*(_DWORD *)this + 68);
  *a2 = 0.0;
  a2[1] = 0.0;
  a2[2] = 0.0;
  a2[3] = 1.0;
  v2(this, a2, 128);
  return a2;
}

//----- (657379B0) --------------------------------------------------------
BOOL SoundDriver_Init()
{
  unsigned __int8 BoolDefault; // al
  _DWORD *v1; // esi
  unsigned __int8 v2; // bl
  int v3; // eax
  const char *v4; // eax

  BoolDefault = CVar_GetBoolDefault(dword_65ABF714, (int)"UseEAX", 0);
  v1 = dword_65ABF714;
  v2 = BoolDefault;
  v3 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("SoundDriver");
  v1[72] = v3;
  if ( v3 )
    v4 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 96))(g_pILTClient, v3);
  else
    v4 = byte_659A8B98;
  return sub_65930760(dword_65ABF768, (int)v4, v2) == 0;
}

//----- (65737A20) --------------------------------------------------------
int __thiscall CGameClientShell_RenderFrame(int this)
{
  double v2; // st7
  int Element; // eax

  (*(void (__cdecl **)(_DWORD, int, _DWORD))(g_pILTClient + 164))(0, 3, 0);
  if ( SharedMem_ReadBool_std(0x55u) )
  {
    WeaponMgr_ShutdownAndReset((int *)dword_65ABF730);
    ScaleMgr_UpdateAll((float ***)(this + 4));
    v2 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)(this + 64) + 8))(this + 64);
    ClientFXMgr_UpdateAll((int)dword_65ABF72C, v2, *(unsigned __int8 *)(this + 30));
  }
  (*(void (**)(void))(g_pILTClient + 156))();
  ScreenEffect_SetEnabled((int)dword_65ABF770);
  Element = IndexArray_GetElement(dword_65ABF6FC, *((_DWORD *)dword_65ABF700 + 1));
  nullsub_13(dword_65ABF730, Element);
  ClientFXMgr_RenderAll(dword_65ABF72C, *(unsigned __int8 *)(this + 30));
  (*(void (**)(void))(g_pILTClient + 176))();
  HUD_Update(dword_65ABF6F4);
  FadeEffect_Update((int)dword_65ABF754);
  (*(void (**)(void))(g_pILTClient + 180))();
  (*(void (__cdecl **)(int))(g_pILTClient + 192))(1);
  return (*(int (__cdecl **)(_DWORD))(g_pILTClient + 152))(0);
}
// 658B5FC0: using guessed type int __thiscall nullsub_13(_DWORD, _DWORD);
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (65737E70) --------------------------------------------------------
char __thiscall CGameClientShell_OnMessage2(int **this, int a2, int *a3)
{
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int *v8; // edi
  int v9; // eax
  int v10; // edi
  int v11; // ebx
  unsigned __int16 v12; // ax
  int *v13; // edi
  int v14; // ebx
  unsigned __int16 v15; // ax
  int v16; // edi
  int v17; // edi
  int v18; // ebx
  int v19; // eax
  double v20; // st7
  int *v22; // [esp+18h] [ebp+8h]
  float CVar; // [esp+18h] [ebp+8h]
  int *v24; // [esp+1Ch] [ebp+Ch]

  if ( a2 )
    (*(void (__thiscall **)(int, int, int, int, int))(*(_DWORD *)dword_65A5AA40 + 84))(dword_65A5AA40, a2, 3, 1, 1);
  Msg2_PreDispatch(dword_65ABF730, a2, a3);
  (*(void (__thiscall **)(int *, _DWORD))(*a3 + 44))(a3, 0);
  v5 = (*(unsigned __int8 (__thiscall **)(int *, int))(*a3 + 60))(a3, 8) - 104;
  if ( !v5 )
  {
    v19 = (*(int (__thiscall **)(int *))(*a3 + 100))(a3);
    PlayerObjectMgr_OnMessage((float *)dword_65ABF704, v19);
    CVar = CameraDistance_GetCVar(dword_65ABF714);
    if ( CVar >= 60.0 )
    {
      v20 = 300.0;
      if ( CVar <= 300.0 )
        goto LABEL_23;
    }
    else
    {
      v20 = 60.0;
    }
    CVar = v20;
LABEL_23:
    LOBYTE(v7) = CameraDistance_BuildCommand((char *)dword_65ABF714, CVar);
    return v7;
  }
  v6 = v5 - 2;
  if ( v6 )
  {
    if ( v6 == 11 )
    {
      v7 = (*(unsigned __int8 (__thiscall **)(int *, int))(*a3 + 60))(a3, 8) - 1;
      switch ( v7 )
      {
        case 0:
          v7 = (*(int (__thiscall **)(int *))(*a3 + 100))(a3);
          v8 = (int *)v7;
          if ( v7 )
          {
            v9 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
            LOBYTE(v7) = (unsigned __int8)Msg2_75_Sub0_Create((int **)dword_65ABF764, v8, v9);
          }
          break;
        case 1:
          v7 = (*(int (__thiscall **)(int *))(*a3 + 100))(a3);
          v22 = (int *)v7;
          if ( v7 )
          {
            v10 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
            v11 = (*(unsigned __int16 (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
            v12 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
            LOBYTE(v7) = Msg2_75_Sub1_Create((int **)dword_65ABF764, v22, v10, v11, v12);
          }
          break;
        case 2:
          v7 = (*(int (__thiscall **)(int *))(*a3 + 100))(a3);
          v16 = v7;
          if ( v7 )
          {
            v7 = (*(int (__thiscall **)(int *))(*a3 + 100))(a3);
            if ( v7 )
              LOBYTE(v7) = (unsigned __int8)Msg2_75_Sub2_SetValue((int **)dword_65ABF764, v16, v7);
          }
          break;
        case 3:
          v7 = (*(int (__thiscall **)(int *))(*a3 + 100))(a3);
          v13 = (int *)v7;
          if ( v7 )
          {
            v14 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
            v15 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
            LOBYTE(v7) = Msg2_75_Sub3_Create((int **)dword_65ABF764, v13, v14, v15);
          }
          break;
        case 4:
          v7 = (*(int (__thiscall **)(int *))(*a3 + 100))(a3);
          v24 = (int *)v7;
          if ( v7 )
          {
            v17 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
            v18 = (*(unsigned __int16 (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
            LOBYTE(a2) = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 1) != 0;
            LOBYTE(v7) = Msg2_75_Sub4_Create((int **)dword_65ABF764, v24, v17, v18, a2);
          }
          break;
        default:
          return v7;
      }
    }
    else
    {
      (*(void (__thiscall **)(int *, _DWORD))(*a3 + 44))(a3, 0);
      LOBYTE(v7) = (unsigned __int8)Msg2_Default_Handler((int)dword_65ABF72C, a2, a3);
    }
  }
  else
  {
    LOBYTE(v7) = MsgId_6A_Handler(this + 1, (int)a3);
  }
  return v7;
}
// 65A5AA40: using guessed type int dword_65A5AA40;

//----- (65738110) --------------------------------------------------------
int __stdcall IClientShell_vtbl_0x14(int a1)
{
  int result; // eax

  result = a1;
  if ( *(_DWORD *)dword_65ABF704 == a1 )
    return PlayerObjectMgr_OnMessage((float *)dword_65ABF704, a1);
  return result;
}

//----- (657382F0) --------------------------------------------------------
int __thiscall CGameClientShell_OnDisconnect(_DWORD *this)
{
  WeaponFire_Holster(dword_65ABF75C);
  SharedMem_WriteU16_std(0x9Du, 0xFFFFu);
  if ( *((_DWORD *)dword_65ABF6FC + 11) )
    *((_DWORD *)dword_65ABF6FC + 11) = 0;
  if ( SharedMem_ReadBool_std(0x1D6A9u) )
    SharedMem_WriteU8_std(0x1D6A9u, 0);
  if ( SharedMem_ReadBool_std(0x1EEC4u) )
    SharedMem_WriteU8_std(0x1EEC4u, 0);
  if ( SharedMem_ReadBool_std(0x1EEBEu) )
    SharedMem_WriteU8_std(0x1EEBEu, 0);
  return (*(int (__thiscall **)(_DWORD *))(*(this + 16) + 20))(this + 16);
}
// 65ABF748: using guessed type int dword_65ABF748;

//----- (657383B0) --------------------------------------------------------
void __thiscall MsgId_8E_Handler(_DWORD *this, unsigned __int16 a2, char a3)
{
  int WindowById; // eax
  int v4; // esi
  const char *v5; // eax
  int v6; // edi
  char *v7; // eax

  switch ( a2 )
  {
    case 'f':
      (*(void (__thiscall **)(_DWORD *))(*(this + 16) + 20))(this + 16);
      break;
    case 'd':
      *((_DWORD *)dword_65ABF6FC + 11) = 0;
      break;
    case 'i':
      SharedMem_WriteU8_std(0x1D6A9u, 0);
      break;
    case 'l':
      SharedMem_WriteU8_std(0x1EEC4u, 0);
      break;
    case 'k':
      SharedMem_WriteU8_std(0x1EEBEu, 0);
      break;
    case 'j':
      WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x4Eu);
      if ( WindowById )
        (*(void (__thiscall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)WindowById + 4))(WindowById, 4, 0, 0);
      break;
  }
  if ( a3 )
  {
    v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, a2 + 30000);
    if ( v4 )
      v5 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
    else
      v5 = byte_659A8B98;
    v6 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4313, v5);
    if ( v6 )
      v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
    else
      v7 = (char *)byte_659A8B98;
    FriendList_AddEntry(dword_65ABF748, v7, 10, 0, 0, "00FF0000", "FFED0000", 0, 0, 0, 0);
    if ( v4 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
    if ( v6 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
  }
}
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (65738520) --------------------------------------------------------
int __thiscall MotionBlur_Apply(_BYTE *this, float a2, int Value, char Valuea)
{
  int v5; // eax
  void (__cdecl **v6)(int); // esi
  int v7; // eax
  int v8; // eax
  void (__cdecl **v9)(int); // esi
  int v10; // eax
  int result; // eax
  _BYTE v12[40]; // [esp+4h] [ebp-70h] BYREF
  _BYTE v13[28]; // [esp+2Ch] [ebp-48h] BYREF
  _BYTE v14[28]; // [esp+48h] [ebp-2Ch] BYREF
  _BYTE *v15; // [esp+64h] [ebp-10h]
  int v16; // [esp+70h] [ebp-4h]

  v15 = v12;
  sub_65941410(v12, Value);
  v5 = FormatString((int)v14, (int)"MotionBlurBlendFactor {0}");
  v16 = 0;
  v6 = (void (__cdecl **)(int))(g_pILTClient + 520);
  v7 = std::string::c_str(v5);
  (*v6)(v7);
  v16 = -1;
  std::string::~string(v14);
  sub_659417B0(v12, a2);
  v8 = FormatString((int)v13, (int)"MotionBlurFadeoutTime {0}");
  v16 = 1;
  v9 = (void (__cdecl **)(int))(g_pILTClient + 520);
  v10 = std::string::c_str(v8);
  (*v9)(v10);
  v16 = -1;
  std::string::~string(v13);
  if ( a2 > 0.0 )
    (*(void (__cdecl **)(const char *))(g_pILTClient + 520))("MotionBlurMode 1");
  if ( *(this + 788) && !Valuea )
    return (*(int (__cdecl **)(const char *))(g_pILTClient + 520))("ApplyMotionBlur");
  result = (*(int (__cdecl **)(const char *))(g_pILTClient + 520))("ResetMotionBlur");
  *(this + 788) = 1;
  return result;
}
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (65738700) --------------------------------------------------------
int __thiscall CameraEffects_Reset(float *this)
{
  *(_BYTE *)this = 0;
  *(this + 65) = 0.0;
  *(this + 66) = 0.0;
  *(this + 67) = 0.0;
  *(this + 68) = 0.0;
  *(this + 69) = 0.0;
  *(this + 70) = 0.0;
  *(this + 71) = 0.0;
  *(this + 72) = 10.0;
  *(this + 76) = 0.0;
  *(this + 77) = 0.0;
  *(this + 73) = 500.0;
  *(this + 78) = 0.0;
  *(this + 74) = 1.0;
  *(this + 75) = 1.0;
  return 0;
}

//----- (657387C0) --------------------------------------------------------
bool StatGroup_CheckLevelThreshold()
{
  unsigned int i; // eax
  _DWORD v2[106]; // [esp+0h] [ebp-1A8h] BYREF

  for ( i = 0; i < 0x35; ++i )
  {
    v2[2 * i] = 0;
    v2[2 * i + 1] = 0;
  }
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 1, v2);
  return v2[6] < 0xA9u;
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (657388F0) --------------------------------------------------------
bool __thiscall Read_u8c(unsigned int *this, char *a2)
{
  return RakNet::BitStream::ReadCompressed(this + 3, a2, 8u, 1);
}

//----- (65738910) --------------------------------------------------------
char *__thiscall Packet_WriteInt8(char *this, char a2)
{
  return BitStream_WriteBitsCompressed(this + 12, &a2, 8u, 1);
}

//----- (65738930) --------------------------------------------------------
char *__cdecl Vector_MoveElements(void *Source, int a2, char *Destination)
{
  int v3; // eax
  char *v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = &Destination[4 * v3];
  if ( v3 > 0 )
    memmove_s(Destination, 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (657389C0) --------------------------------------------------------
int __stdcall SharedMem_ReadWorldPosition(int *a1)
{
  int v2; // [esp+0h] [ebp-18h] BYREF
  int v3; // [esp+4h] [ebp-14h]
  int v4; // [esp+8h] [ebp-10h]
  int v5; // [esp+Ch] [ebp-Ch]
  int v6; // [esp+10h] [ebp-8h]
  int v7; // [esp+14h] [ebp-4h]

  v7 = 0;
  v6 = 0;
  v5 = 0;
  v4 = 0;
  v3 = 0;
  v2 = 0;
  SharedMem_ReadBlock_std(159, &v2, (WorldLoginReturnAddrPacked)24);
  return sub_65947090(a1, v7, v6, v5, v2, v3, v4);
}

//----- (65738A60) --------------------------------------------------------
CGameClientShell *__thiscall CGameClientShell_Ctor(CGameClientShell *this)
{
  *(_DWORD *)this->_pad0 = &CGameClientShell_vftable;
  RBTree_Init(&this->_pad0[4]);
  this->recoilScale = 0.0;
  this->_pad0[28] = 1;
  this->_pad0[29] = 0;
  this->_pad0[30] = 1;
  *((_DWORD *)this + 10) = 0;
  *((_DWORD *)this + 11) = 0;
  *((_DWORD *)this + 12) = 0;
  *((_DWORD *)this + 13) = 0;
  *((_DWORD *)this + 14) = 0;
  *((_DWORD *)this + 15) = 0;
  PlayerState_Init((float *)this + 16);
  *((_DWORD *)this + 16) = &off_659C10B8;
  *((float *)this + 190) = 0.0;
  *((float *)this + 191) = 0.0;
  *((_BYTE *)this + 768) = 0;
  *((float *)this + 193) = 0.0;
  *((float *)this + 194) = 0.0;
  g_pGameClientShell = this;
  *((_BYTE *)this + 788) = 0;
  return this;
}
// 659C10B8: using guessed type void *off_659C10B8;
// 659C116C: using guessed type _UNKNOWN *CGameClientShell_vftable;

//----- (65738B10) --------------------------------------------------------
void __thiscall CGameClientShell_OnMessage(int **this, float Float)
{
  int v2; // esi
  float *WindowById; // eax
  float *v5; // eax
  double v6; // st7
  float *VecOrStruct; // eax
  bool v8; // bl
  unsigned int v9; // eax
  int v10; // edi
  void (__thiscall *v11)(int, float *, int); // edx
  int v12; // eax
  int v13; // ebx
  float *Vector3f; // eax
  int v15; // eax
  _BYTE *v16; // eax
  _BYTE *v17; // eax
  _BYTE *v18; // eax
  int v19; // esi
  int v20; // eax
  int v21; // eax
  bool v22; // zf
  unsigned __int16 v23; // ax
  int v24; // ebx
  __int16 v25; // di
  int v26; // eax
  int v27; // esi
  int v28; // eax
  _BYTE *v29; // eax
  int v30; // eax
  int v31; // eax
  int v32; // eax
  float v33[4]; // [esp-18h] [ebp-6Ch] BYREF
  float v34; // [esp-8h] [ebp-5Ch]
  float v35; // [esp-4h] [ebp-58h]
  unsigned int v36; // [esp+0h] [ebp-54h]
  float v37[3]; // [esp+10h] [ebp-44h] BYREF
  float v38[5]; // [esp+1Ch] [ebp-38h] BYREF
  float v39[3]; // [esp+30h] [ebp-24h] BYREF
  float v40[3]; // [esp+3Ch] [ebp-18h] BYREF
  float v41[3]; // [esp+48h] [ebp-Ch]

  v2 = LODWORD(Float);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)LODWORD(Float) + 44))(LODWORD(Float), 0);
  switch ( (*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)v2 + 60))(v2, 8) )
  {
    case 0x6Au:
      MsgId_6A_Handler(this + 1, v2);
      break;
    case 0x6Bu:
      MsgId_6B_Handler((char *)dword_65ABF730, v2);
      break;
    case 0x6Cu:
      MsgId_6C_ResourceHandler(dword_65ABF74C, (int)this, v2);
      break;
    case 0x6Eu:
      CrosshairMgr_OnMessage((int *)dword_65ABF71C, (int *)v2);
      break;
    case 0x6Fu:
      TravelMgrClient_OnMessage((float *)dword_65ABF73C, v2);
      break;
    case 0x70u:
      MsgId_70_ReadVecOrStruct((void *)v2, &v38[1]);
      MsgId_70_Handler(dword_65ABF704, &v38[1]);
      break;
    case 0x76u:
      MsgId_76_Handler((int **)dword_65ABF764, v2);
      break;
    case 0x77u:
      v8 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v2 + 60))(v2, 1) != 0;
      v9 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v2 + 60))(v2, 32);
      v10 = v9;
      if ( v8 )
      {
        v11 = *(void (__thiscall **)(int, float *, int))(*(_DWORD *)v2 + 68);
        Float = 0.0;
        v11(v2, &Float, 32);
        MsgId_77_WithPayload((int **)dword_65ABF704, v10, (int *)&Float);
      }
      else
      {
        MsgId_77_NoPayload((int ***)dword_65ABF704, v9);
      }
      break;
    case 0x7Eu:
      v12 = (*(int (__thiscall **)(int))(*(_DWORD *)v2 + 100))(v2);
      MsgId_7E_Handler((unsigned int *)dword_65ABF720, v12);
      break;
    case 0x81u:
      Float = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
      if ( Float - *((float *)this + 191) >= 1.0 )
      {
        v13 = *((_DWORD *)dword_65ABF700 + 1);
        Vector3f = (float *)Msg_ReadVector3f((void *)v2, (int)v39);
        CameraShake_Add(v13, *Vector3f, Vector3f[1], Vector3f[2]);
        *((float *)this + 191) = Float;
      }
      *(float *)&v36 = Msg_ReadFloat((void *)v2);
      Recoil_ApplyStatGroup2(*(float *)&v36);
      break;
    case 0x83u:
      v15 = (*(int (__thiscall **)(int))(*(_DWORD *)v2 + 100))(v2);
      if ( v15 )
      {
        if ( v15 == *(_DWORD *)dword_65ABF704 )
        {
          if ( *((_DWORD *)dword_65ABF714 + 71) != 2 )
            MsgId_83_LocalPlayerGate((float *)dword_65ABF704);
        }
        else
        {
          MsgId_83_Handler((int **)dword_65ABF764, v15);
        }
      }
      break;
    case 0x84u:
      MsgId_84_Handler((int **)dword_65ABF764, v2);
      break;
    case 0x85u:
      Float = Msg_ReadFloat((void *)v2);
      WindowById = (float *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0);
      if ( WindowById )
        MsgId_85_Handler(WindowById, Float);
      break;
    case 0x86u:
      v16 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x58u);
      if ( v16 && v16[6241] )
        MsgId_86_WindowClose(v16);
      v17 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x59u);
      if ( v17 && v17[6241] )
        MsgId_86_WindowClose(v17);
      v18 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x5Au);
      if ( v18 && v18[6241] )
        MsgId_86_WindowClose(v18);
      break;
    case 0x88u:
      v19 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v2 + 60))(v2, 32);
      v20 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Fu);
      if ( v20 && *(_BYTE *)(v20 + 6241) && *(_DWORD *)(v20 + 7436) == v19 )
        MsgId_88_WindowClose((_BYTE *)v20, 0);
      v21 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Eu);
      if ( v21 && *(_BYTE *)(v21 + 6241) )
      {
        v22 = *(_DWORD *)(v21 + 6372) == v19;
        goto LABEL_80;
      }
      break;
    case 0x8Cu:
      MsgId_8C_Handler((int **)dword_65ABF764, v2);
      break;
    case 0x8Eu:
      v23 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v2 + 60))(v2, 16);
      MsgId_8E_Handler(this, v23, 1);
      break;
    case 0x8Fu:
      v38[1] = 0.0;
      v38[2] = 0.0;
      v38[3] = 0.0;
      v38[4] = 1.0;
      v5 = (float *)Msg_ReadVector3f((void *)v2, (int)v40);
      v41[0] = *v5;
      v6 = v5[1];
      *(float *)&v36 = COERCE_FLOAT(v37);
      v41[1] = v6;
      v41[2] = v5[2];
      VecOrStruct = MsgId_70_ReadVecOrStruct((void *)v2, v37);
      Vec4_Copy2(&v38[1], VecOrStruct);
      v34 = v41[0];
      v35 = v41[1];
      v36 = LODWORD(v41[2]);
      Vec4_Copy(v33, &v38[1]);
      MsgId_8F_Handler((float *)dword_65ABF740, v33[0], v33[1], v33[2], v33[3], v34, v35, *(float *)&v36);
      break;
    case 0x9Au:
      MsgId_9A_Handler((int **)dword_65ABF764, v2);
      break;
    case 0x9Bu:
      v24 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v2 + 60))(v2, 32);
      v25 = (*(int (__thiscall **)(int, int))(*(_DWORD *)v2 + 60))(v2, 16);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v2 + 60))(v2, 16);
      switch ( v25 )
      {
        case 510:
          v21 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x29u);
          if ( v21 && *(_BYTE *)(v21 + 6241) )
          {
            v22 = *(_DWORD *)(v21 + 6832) == v24;
            break;
          }
          return;
        case 511:
          v36 = 42;
          goto LABEL_77;
        case 512:
          v36 = 43;
          goto LABEL_77;
        case 515:
          v26 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x45u);
          v27 = v26;
          if ( v26 && *(_BYTE *)(v26 + 6241) && *(_DWORD *)(v26 + 6376) == v24 )
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v26 + 28))(v26, 0);
          v28 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x46u);
          if ( v28 )
          {
            if ( *(_BYTE *)(v27 + 6241) )
            {
              if ( *(_DWORD *)(v27 + 6376) == v24 )
              {
                (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v28 + 28))(v28, 0);
                v29 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
                if ( v29 )
                {
                  if ( v29[6241] )
                    (*(void (__thiscall **)(_BYTE *, _DWORD))(*(_DWORD *)v29 + 28))(v29, 0);
                }
              }
            }
          }
          v30 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x38u);
          if ( v30 && *(_BYTE *)(v30 + 6241) && *(_DWORD *)(v30 + 6368) == v24 )
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v30 + 28))(v30, 0);
          v31 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x37u);
          if ( v31 && *(_BYTE *)(v31 + 6241) && *(_DWORD *)(v31 + 6368) == v24 )
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v31 + 28))(v31, 0);
          v32 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x47u);
          if ( v32 && *(_BYTE *)(v32 + 6241) && *(_DWORD *)(v32 + 6552) == v24 )
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v32 + 28))(v32, 0);
          v21 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x4Bu);
          if ( !v21 || !*(_BYTE *)(v21 + 6241) )
            return;
          v22 = *(_DWORD *)(v21 + 6584) == v24;
          break;
        case 516:
          v36 = 68;
LABEL_77:
          v21 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, v36);
          if ( !v21 || !*(_BYTE *)(v21 + 6241) )
            return;
          v22 = *(_DWORD *)(v21 + 6368) == v24;
          break;
        default:
          return;
      }
LABEL_80:
      if ( v22 )
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v21 + 28))(v21, 0);
      break;
    case 0x9Du:
      MsgId_9D_Handler((int **)dword_65ABF764, v2);
      break;
    default:
      return;
  }
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65739380) --------------------------------------------------------
void __thiscall HandleQuickbarItemUse(_DWORD *this, unsigned __int8 a2)
{
  int v2; // eax
  int v3; // ecx
  int v4; // esi
  unsigned __int16 *v5; // eax
  unsigned int v6; // edi
  unsigned __int16 v7; // bx
  unsigned __int8 Value; // al
  int v9; // esi
  char *v10; // eax
  BOOL v11; // edi
  int v12; // eax
  int v13; // esi
  char *v14; // eax
  int WindowById; // eax
  int v16; // esi
  int StatValue; // eax
  int v18; // esi
  char *v19; // eax
  bool v20; // [esp-10h] [ebp-20h]
  char v21; // [esp-Ch] [ebp-1Ch]
  unsigned __int16 v23; // [esp+8h] [ebp-8h]

  if ( (unsigned __int8)(a2 - 5) > 0xBu )
    return;
  v2 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  v3 = 48 * a2;
  v4 = v3 + v2 - 204;
  if ( v3 + v2 == 204 || !*(_DWORD *)v4 || !ItemTemplateById_Get(g_ItemTemplateById, *(_WORD *)(v4 + 4)) )
    return;
  v5 = (unsigned __int16 *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  v6 = *v5;
  v7 = v5[6];
  v21 = *(_BYTE *)(v4 + 13) >= 2u;
  v23 = *(_WORD *)(v4 + 4);
  v20 = IsPlayerAlive();
  Value = StatGroup5_GetValue();
  if ( !ItemTemplate_CanUse(g_ItemTemplateById, v23, v7, v6, Value, v20, v21) )
  {
    v9 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5303);
    if ( v9 )
      v10 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
    else
      v10 = (char *)byte_659A8B98;
    FriendList_AddEntry(dword_65ABF748, v10, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
    if ( v9 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v9);
    return;
  }
  if ( !sub_65934370(*(_WORD *)(v4 + 4)) )
    return;
  v11 = !SharedMem_EquipSlotMask_HasSlot(g_pPlayerStats, a2);
  if ( !PlayerStats_GetStatValue(2u) )
  {
    if ( v11 )
    {
      v12 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5310);
LABEL_33:
      v18 = v12;
      if ( v12 )
        v19 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v12);
      else
        v19 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v19, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v18 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v18);
LABEL_29:
      SoundMgr_PlaySoundByIndex(dword_65ABF750, 0x3Cu);
      return;
    }
LABEL_41:
    SharedMem_ModifyU16_0x9D((char *)dword_65ABF748, a2);
    return;
  }
  if ( !v11 )
    goto LABEL_41;
  switch ( *(_WORD *)(v4 + 4) )
  {
    case 'd':
      *((_DWORD *)dword_65ABF6FC + 11) = 1;
      SharedMem_ModifyU16_0xA8(a2);
      return;
    case 'f':
      (*(void (__thiscall **)(_DWORD *))(*(this + 16) + 16))(this + 16);
      SharedMem_ModifyU16_0xA8(a2);
      return;
    case 'i':
      SharedMem_WriteU8_std(0x1D6A9u, 1u);
      goto LABEL_40;
    case 'j':
      if ( PlayerStats_GetStatValue(0x33u) || PlayerStats_GetStatValue(0x34u) )
      {
        v16 = *(_DWORD *)g_pILTClient;
        StatValue = PlayerStats_GetStatValue(0x34u);
        v12 = (*(int (__cdecl **)(int, int, int))(v16 + 64))(g_pILTClient, 5661, StatValue);
        goto LABEL_33;
      }
      if ( PlayerStats_GetStatValue(7u) )
      {
        v13 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5668);
        if ( v13 )
          v14 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v13);
        else
          v14 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v14, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
        if ( v13 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v13);
        goto LABEL_29;
      }
      WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x4Eu);
      if ( WindowById )
      {
        (*(void (__thiscall **)(int))(*(_DWORD *)WindowById + 16))(WindowById);
        WindowMgr_ShowWindowById((int *)dword_65ABF708, 0x4Eu);
        SharedMem_ModifyU16_0xA8(a2);
      }
      else
      {
LABEL_40:
        SharedMem_ModifyU16_0xA8(a2);
      }
      break;
    case 'k':
      SharedMem_WriteU8_std(0x1EEBEu, 1u);
      goto LABEL_40;
    case 'l':
      SharedMem_WriteU8_std(0x1EEC4u, 1u);
      goto LABEL_40;
    default:
      goto LABEL_40;
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65739780) --------------------------------------------------------
char __thiscall Packet_ID_B2_read(int this, int a2)
{
  char result; // al
  unsigned int *v4; // edi

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    v4 = (unsigned int *)(this + 12);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 1:
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1080));
        return 1;
      case 2:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1084));
        goto LABEL_6;
      case 3:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        goto LABEL_6;
      case 4:
LABEL_6:
        RakNet::BitStream::ReadCompressed(v4, (char *)(this + 1088), 8u, 1);
        break;
      default:
        return 1;
    }
    return 1;
  }
  return result;
}

//----- (65739960) --------------------------------------------------------
char __thiscall Vector_Reserve(_DWORD *this, unsigned int a2)
{
  char *v4; // eax
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( !a2 )
    return 0;
  if ( a2 > 0x3FFFFFFF )
    ThrowLengthError_Vector2(v5, v6);
  v4 = (char *)Vector4_Allocate(a2);
  *(this + 1) = v4;
  *(this + 2) = v4;
  *(this + 3) = &v4[4 * a2];
  return 1;
}
// 65739989: variable 'v5' is possibly undefined
// 65739989: variable 'v6' is possibly undefined

//----- (65739A80) --------------------------------------------------------
void __cdecl Cmd_Admin(int a1, const char **a2)
{
  FILE *v2; // ebx
  unsigned __int16 v3; // di
  int v4; // esi
  int v5; // eax
  int v6; // eax
  const char *v7; // eax
  void (__thiscall *v8)(int, int, int); // eax
  int *v9; // eax
  int v10; // edx
  void (__thiscall *v11)(int, _DWORD, _DWORD); // eax
  void (__thiscall *v12)(int, int, int); // eax
  int *v13; // eax
  int v14; // edx
  void (__thiscall *v15)(int, _DWORD, _DWORD); // eax
  void (__thiscall *v16)(int, int, int); // eax
  int *v17; // eax
  int v18; // edx
  void (__thiscall *v19)(int, _DWORD, _DWORD); // eax
  void (__thiscall *v20)(int, int, int); // eax
  int *v21; // eax
  int v22; // edx
  void (__thiscall *v23)(int, _DWORD, _DWORD); // eax
  unsigned int v24; // eax
  int v25; // ebx
  int v26; // eax
  int v27; // esi
  unsigned int i; // edi
  int v29; // esi
  const char *v30; // eax
  int v31; // esi
  _BYTE v32[28]; // [esp-20h] [ebp-29F4h] BYREF
  int v33; // [esp-4h] [ebp-29D8h] BYREF
  double v34; // [esp+10h] [ebp-29C4h]
  _BYTE *v35; // [esp+28h] [ebp-29ACh]
  int *v36; // [esp+2Ch] [ebp-29A8h]
  float v37[3]; // [esp+30h] [ebp-29A4h] BYREF
  int v38; // [esp+3Ch] [ebp-2998h] BYREF
  int v39; // [esp+40h] [ebp-2994h] BYREF
  __int16 v40; // [esp+44h] [ebp-2990h] BYREF
  int v41; // [esp+48h] [ebp-298Ch]
  int v42; // [esp+60h] [ebp-2974h]
  float v43; // [esp+64h] [ebp-2970h]
  float v44; // [esp+68h] [ebp-296Ch]
  float v45; // [esp+6Ch] [ebp-2968h]
  float v46; // [esp+70h] [ebp-2964h]
  float v47; // [esp+74h] [ebp-2960h]
  char v48[32]; // [esp+90h] [ebp-2944h] BYREF
  char v49; // [esp+10Fh] [ebp-28C5h]
  char v50[12]; // [esp+2524h] [ebp-4B0h] BYREF
  _BYTE v51[1060]; // [esp+2530h] [ebp-4A4h] BYREF
  int Dword_this; // [esp+2954h] [ebp-80h]
  char v53; // [esp+2958h] [ebp-7Ch]
  int v54; // [esp+295Ch] [ebp-78h]
  _BYTE v55[28]; // [esp+296Ch] [ebp-68h] BYREF
  char v56[28]; // [esp+2988h] [ebp-4Ch] BYREF
  char v57[4]; // [esp+29A4h] [ebp-30h] BYREF
  char v58[28]; // [esp+29A8h] [ebp-2Ch] BYREF
  int v59; // [esp+29D0h] [ebp-4h]

  if ( a1 < 1 )
  {
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "admin <command>");
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "  Commands:");
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "    itemlist - creates an item list text file");
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "    visareas - generates an SQL file to delete and insert all visareas for this world.");
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "    wservices - generates an SQL file to delete and insert all world services for this world.");
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "    minerals - generates an SQL file to delete and insert all serverminerals for this world.");
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "    aliens - generates an SQL file to delete and insert all serveralienspawners for this world.");
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "    openwindow - opens any window based on selected ID");
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "    time - gets the current game time (optional parameters: +/- integer_days )");
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "    aliendims - gets the dimensions of every alien in the game for the pathfinder");
    return;
  }
  if ( !_stricmp(*a2, "itemlist") )
  {
    std::string::string(v56);
    v59 = 0;
    std::string::string(v55);
    LOBYTE(v59) = 1;
    v2 = fopen("ItemList.txt", "w");
    if ( v2 )
    {
      v3 = 1;
      v38 = 30001;
      v39 = (int)&unk_65AC3FAC;
      do
      {
        if ( (unsigned __int16)(v3 - 1) <= 0xBBFu && *(_DWORD *)v39 && **(_WORD **)v39 )
        {
          v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v38);
          if ( v4 )
          {
            v5 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
            v36 = &v33;
            String_AssignFromPtr(&v33, v5);
            v35 = v32;
            LOBYTE(v59) = 2;
            String_FromU16(v32, v3);
            LOBYTE(v59) = 1;
            v6 = FormatString_Args((int)v58, (int)"{0} - {1}\n");
            LOBYTE(v59) = 3;
            std::string::operator=(v56, v6);
            LOBYTE(v59) = 1;
            std::string::~string(v58);
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
            v7 = (const char *)std::string::c_str(v56);
            fprintf(v2, v7);
          }
        }
        v39 += 4;
        ++v38;
        ++v3;
      }
      while ( v3 < 0xBC1u );
      fflush(v2);
      fclose(v2);
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "Done writing ItemList.txt");
    }
    LOBYTE(v59) = 0;
    std::string::~string(v55);
    v59 = -1;
    std::string::~string(v56);
    return;
  }
  if ( !_stricmp(*a2, "wservices") )
  {
    LTObject_Create(&v39);
    v8 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v39 + 36);
    v59 = 4;
    v8(v39, 150, 8);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v39 + 36))(v39, 1, 8);
    v9 = FXInstance_Clone(&v39, &v38);
    v10 = *(_DWORD *)g_pILTClient;
    *(_QWORD *)&v34 = (unsigned int)*v9;
    v11 = *(void (__thiscall **)(int, _DWORD, _DWORD))(v10 + 324);
    LOBYTE(v59) = 5;
    v11(g_pILTClient, LODWORD(v34), HIDWORD(v34));
    LOBYTE(v59) = 4;
LABEL_18:
    if ( v38 )
      (*(void (__thiscall **)(int))(*(_DWORD *)v38 + 8))(v38);
    v59 = -1;
    if ( v39 )
      (*(void (__thiscall **)(int))(*(_DWORD *)v39 + 8))(v39);
    return;
  }
  if ( !_stricmp(*a2, "minerals") )
  {
    LTObject_Create(&v39);
    v12 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v39 + 36);
    v59 = 6;
    v12(v39, 150, 8);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v39 + 36))(v39, 3, 8);
    v13 = FXInstance_Clone(&v39, &v38);
    v14 = *(_DWORD *)g_pILTClient;
    *(_QWORD *)&v34 = (unsigned int)*v13;
    v15 = *(void (__thiscall **)(int, _DWORD, _DWORD))(v14 + 324);
    LOBYTE(v59) = 7;
    v15(g_pILTClient, LODWORD(v34), HIDWORD(v34));
    LOBYTE(v59) = 6;
    goto LABEL_18;
  }
  if ( !_stricmp(*a2, "aliens") )
  {
    LTObject_Create(&v39);
    v16 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v39 + 36);
    v59 = 8;
    v16(v39, 150, 8);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v39 + 36))(v39, 4, 8);
    v17 = FXInstance_Clone(&v39, &v38);
    v18 = *(_DWORD *)g_pILTClient;
    *(_QWORD *)&v34 = (unsigned int)*v17;
    v19 = *(void (__thiscall **)(int, _DWORD, _DWORD))(v18 + 324);
    LOBYTE(v59) = 9;
    v19(g_pILTClient, LODWORD(v34), HIDWORD(v34));
    LOBYTE(v59) = 8;
LABEL_26:
    if ( v38 )
      (*(void (__thiscall **)(int))(*(_DWORD *)v38 + 8))(v38);
    v59 = -1;
    FXInstance_ReleaseAndClear(&v39);
    return;
  }
  if ( !_stricmp(*a2, "visareas") )
  {
    LTObject_Create(&v39);
    v20 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v39 + 36);
    v59 = 10;
    v20(v39, 150, 8);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v39 + 36))(v39, 2, 8);
    v21 = FXInstance_Clone(&v39, &v38);
    v22 = *(_DWORD *)g_pILTClient;
    *(_QWORD *)&v34 = (unsigned int)*v21;
    v23 = *(void (__thiscall **)(int, _DWORD, _DWORD))(v22 + 324);
    LOBYTE(v59) = 11;
    v23(g_pILTClient, LODWORD(v34), HIDWORD(v34));
    LOBYTE(v59) = 10;
    goto LABEL_26;
  }
  if ( !_stricmp(*a2, "openwindow") )
  {
    if ( a1 >= 2 )
    {
      v24 = atoi(a2[1]);
      GameMode_SetModeFour((int *)dword_65ABF6F4, v24);
    }
    else
    {
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "Enter a valid window ID");
    }
  }
  else if ( !_stricmp(*a2, "time") )
  {
    if ( IsGameActive() )
    {
      unknown_libname_664(&v39);
      SharedMem_ReadWorldPosition(&v39);
      if ( a1 > 2 )
      {
        v25 = atoi(a2[2]);
        v26 = _stricmp(a2[1], "+");
        HIDWORD(v34) = v25;
        if ( v26 )
          sub_65947180(&v39, SHIDWORD(v34));
        else
          sub_659470E0((unsigned int *)&v39, SHIDWORD(v34));
      }
      sub_65948390(v57, &v39);
      (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "Time result (%s) is integer %u",
        v57,
        v39);
    }
    else
    {
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "Cannot get time unless in world!");
    }
  }
  else if ( !_stricmp(*a2, "arrest") )
  {
    if ( a1 >= 2 )
    {
      v27 = atoi(a2[1]);
      Packet_ID_B2_Ctor(v50);
      v59 = 12;
      Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
      v53 = 1;
      v54 = v27;
      LTClient_SendPacket_BuildIfNeeded(v50, 2, 1, 3, 0);
      v59 = -1;
      *(_DWORD *)v50 = &vtbl_Packet_Unknown0;
      BitStream_FreeOwnedBuffer((int)v51);
    }
    else
    {
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "Enter a valid player ID");
    }
  }
  else if ( !_stricmp(*a2, "aliendims") )
  {
    for ( i = 0; i < 0x14; ++i )
    {
      if ( i - 1 <= 0x12 )
      {
        v29 = EquipSlots_GetByIndex(&dword_65AC9770, i);
        CharacterState_Reset((int)&v40);
        v59 = 13;
        CharacterState_Init((char *)&v40);
        v40 = 1;
        v30 = *(const char **)(v29 + 16);
        if ( !v30 )
          v30 = byte_659A8B98;
        strncpy(v48, v30, 0x7Fu);
        *(float *)&v42 = 0.0;
        v43 = 0.0;
        v44 = 0.0;
        v49 = 0;
        v41 = 513;
        v45 = 1.0;
        v46 = 1.0;
        v47 = 1.0;
        v31 = (*(int (__cdecl **)(__int16 *))(g_pILTClient + 540))(&v40);
        (*(void (__thiscall **)(int, int, float *))(*(_DWORD *)dword_65A5AA44 + 32))(dword_65A5AA44, v31, v37);
        (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
          g_pILTClient,
          "%.1ff,%.1ff,%.1ff, \t// fExtents[3]",
          v37[0],
          v37[1],
          v37[2]);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 112))(g_pILTClient, v31);
        v59 = -1;
        CharacterState_FreeBuffers((int)&v40);
      }
    }
  }
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA44: using guessed type int dword_65A5AA44;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC9770: using guessed type int dword_65AC9770;

//----- (6573A470) --------------------------------------------------------
void __usercall ClientGame_Update(float this@<ecx>, double a2@<st2>, double a3@<st1>)
{
  int v3; // edi
  double v4; // st7
  unsigned int i; // eax
  unsigned int j; // eax
  char *v7; // ecx
  _DWORD *v8; // eax
  char *v9; // esi
  float v10; // ecx
  void (__thiscall *v11)(_DWORD, int, int); // eax
  void (__thiscall *v12)(int, int, _DWORD); // eax
  unsigned int StatValue; // eax
  int v14; // ecx
  int v15; // esi
  int WindowById; // eax
  int v17; // eax
  double Float_std; // st7
  bool v19; // c0
  double v20; // st7
  double v21; // st7
  int v22; // eax
  int v23; // [esp+4h] [ebp-220h]
  _DWORD v24[106]; // [esp+1Ch] [ebp-208h] BYREF
  float v25[15]; // [esp+1C4h] [ebp-60h] BYREF
  __time64_t v26; // [esp+200h] [ebp-24h] BYREF
  int v27; // [esp+208h] [ebp-1Ch]
  double v28; // [esp+20Ch] [ebp-18h] BYREF
  float v29; // [esp+214h] [ebp-10h] BYREF
  float v30; // [esp+220h] [ebp-4h]

  v3 = LODWORD(this);
  v27 = LODWORD(this);
  v29 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  v4 = v29 - *(float *)(v3 + 760);
  if ( v4 > 1.0 )
  {
    Fog_RegisterAllCVars((void *)v3);
    v4 = v29;
    *(float *)(v3 + 760) = v29;
  }
  for ( i = 0; i < 0x35; ++i )
  {
    v24[2 * i] = 0;
    v24[2 * i + 1] = 0;
  }
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 1, v24);
  *((_DWORD *)dword_65ABF6FC + 12) = v24[84] == 1;
  CameraState_UpdateLerp((float *)dword_65ABF724);
  PlayerObject_UpdatePosition(dword_65ABF704);
  if ( SharedMem_ReadBool_std(0x9Cu) )
  {
    SharedMem_WriteU8_std(0x9Cu, 0);
    if ( WeaponZoom_IsActive() )
    {
      WeaponZoom_ResetIfActive((int)dword_65ABF75C);
      *(_DWORD *)(v3 + 52) = 1;
    }
    else
    {
      WeaponFire_Holster(dword_65ABF75C);
    }
  }
  for ( j = 0; j < 0x35; ++j )
  {
    v24[2 * j] = 0;
    v24[2 * j + 1] = 0;
  }
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 1, v24);
  if ( !v24[4] || SharedMem_ReadBool_std(0x70u) && !*(_DWORD *)(v3 + 60) )
  {
    SharedMem_WriteU16_std(0x9Du, 0xFFFFu);
    if ( *((_DWORD *)dword_65ABF6FC + 11) )
      *((_DWORD *)dword_65ABF6FC + 11) = 0;
    if ( SharedMem_ReadBool_std(0x1D6A9u) )
      SharedMem_WriteU8_std(0x1D6A9u, 0);
    if ( SharedMem_ReadBool_std(0x1EEC4u) )
      SharedMem_WriteU8_std(0x1EEC4u, 0);
    if ( SharedMem_ReadBool_std(0x1EEBEu) )
      SharedMem_WriteU8_std(0x1EEBEu, 0);
    (*(void (__thiscall **)(int))(*(_DWORD *)(v3 + 64) + 20))(v3 + 64);
    *(_DWORD *)(v3 + 60) = 1;
  }
  if ( SharedMem_ReadBool_std(0x94u) )
  {
    v4 = 5.0;
    MotionBlur_Apply((_BYTE *)v3, 5.0, -15329770, 0);
    v7 = (char *)dword_65ABF714;
    v8 = (char *)dword_65ABF714 + 284;
    if ( *((_DWORD *)dword_65ABF714 + 71) != 2 )
    {
      *v8 = 2;
      if ( *v8 != 2 )
      {
        v4 = 2.0;
        v9 = v7 + 292;
        sprintf(v7 + 292, "+%s %f", "CameraMode", 2.0);
        (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v9);
      }
    }
    v29 = 0.0;
    if ( (*(int (__thiscall **)(int, float *))(*(_DWORD *)dword_65A5A6E8 + 36))(dword_65A5A6E8, &v29) )
    {
      v10 = 0.0;
      v29 = 0.0;
    }
    else
    {
      (*(void (__thiscall **)(float))(*(_DWORD *)LODWORD(v29) + 4))(COERCE_FLOAT(LODWORD(v29)));
      v10 = v29;
    }
    v11 = *(void (__thiscall **)(_DWORD, int, int))(*(_DWORD *)LODWORD(v10) + 36);
    v30 = 0.0;
    v11(LODWORD(v10), 128, 8);
    (*(void (__thiscall **)(float, int, int))(*(_DWORD *)LODWORD(v29) + 36))(COERCE_FLOAT(LODWORD(v29)), 2, 8);
    (*(void (__thiscall **)(float, _DWORD, int))(*(_DWORD *)LODWORD(v29) + 36))(COERCE_FLOAT(LODWORD(v29)), 0, 32);
    v23 = *FXInstance_Clone(&v29, (int *)&v28 + 1);
    v12 = *(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 324);
    LOBYTE(v30) = 1;
    v12(g_pILTClient, v23, 0);
    LOBYTE(v30) = 0;
    if ( HIDWORD(v28) )
      (*(void (__thiscall **)(_DWORD))(*(_DWORD *)HIDWORD(v28) + 8))(HIDWORD(v28));
    v30 = NAN;
    if ( v29 != 0.0 )
      (*(void (__thiscall **)(float))(*(_DWORD *)LODWORD(v29) + 8))(COERCE_FLOAT(LODWORD(v29)));
  }
  else if ( PlayerStats_GetStatValue(0) )
  {
    StatValue = PlayerStats_GetStatValue(3u);
    if ( StatValue < 0x12C )
    {
      v14 = -13487566;
      if ( StatValue >= 0x64 )
      {
        if ( StatValue < 0xC8 )
          v14 = -15329770;
      }
      else
      {
        v14 = -16250872;
      }
      v4 = 5.0;
      MotionBlur_Apply((_BYTE *)v3, 5.0, v14, 0);
    }
  }
  v15 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
  if ( v15 )
  {
    v26 = _time64(0);
    if ( SkillList_UpdateProgress(v15, (unsigned int *)&v26) )
    {
      WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Du);
      if ( WindowById )
      {
        if ( *(_BYTE *)(WindowById + 6241) )
          SkillWindow_Refresh((int *)WindowById);
      }
    }
  }
  if ( CameraState_IsActive(dword_65ABF724) )
  {
    v17 = *((_DWORD *)dword_65ABF700 + 2);
    if ( v17 )
    {
      v4 = *((float *)dword_65ABF724 + 5);
      *(float *)(v17 + 16) = *((float *)dword_65ABF724 + 5);
    }
  }
  else if ( *((_DWORD *)dword_65ABF700 + 2) )
  {
    qmemcpy(v25, StatGroup_GetPtr((_DWORD *)g_pEncVarMgr, 2u), sizeof(v25));
    v28 = v25[14] * 0.1500000059604645;
    Float_std = SharedMem_ReadFloat_std(0x1D6A5u);
    a3 = -50.0;
    v19 = Float_std - v28 > -50.0;
    v20 = -50.0;
    if ( v19 )
    {
      v21 = SharedMem_ReadFloat_std(0x1D6A5u);
      v20 = v21 - v28;
    }
    *((float *)&v28 + 1) = v20;
    v4 = *((float *)&v28 + 1);
    v3 = v27;
    *((float *)dword_65ABF704 + 53) = *((float *)&v28 + 1);
    *(float *)(*((_DWORD *)dword_65ABF700 + 2) + 16) = v4;
  }
  if ( SharedMem_ReadDword_this(g_pPlayerStats, 0x1CEC2u) == 1 )
  {
    if ( *(_DWORD *)(v3 + 52) && !EquipSlots_FindSlotByType(dword_65ABF6FC, *((_DWORD *)dword_65ABF700 + 1), 104, 0) )
    {
      WeaponFire_Holster(dword_65ABF75C);
      *(_DWORD *)(v3 + 52) = 0;
    }
    if ( *(_DWORD *)(v3 + 56) && !EquipSlots_FindSlotByType(dword_65ABF6FC, *((_DWORD *)dword_65ABF700 + 1), 104, 0) )
    {
      WeaponFire_TryReload(dword_65ABF75C);
      *(_DWORD *)(v3 + 56) = 0;
    }
    if ( *(_DWORD *)(v3 + 48) && !EquipSlots_FindSlotByType(dword_65ABF6FC, *((_DWORD *)dword_65ABF700 + 1), 104, 0) )
    {
      CGameClientShell_OnDisconnect((_DWORD *)v3);
      *(_DWORD *)(v3 + 48) = 0;
    }
  }
  CameraDistance_ApplyDeltaScaled((float *)dword_65ABF700);
  CameraMgr_UpdateCamera(dword_65ABF6FC, a2, a3, v4);
  PlayerInput_UpdateAndSend((int)dword_65ABF704);
  if ( *(_BYTE *)(v3 + 30) )
  {
    if ( *(_DWORD *)dword_65ABF754 != 2 )
    {
      v22 = *((_DWORD *)dword_65ABF758 + 3);
      if ( v22 != 3 && v22 != 2 )
      {
        ScreenEffect_GetSaturation((int *)dword_65ABF770, COERCE_FLOAT(1));
        CGameClientShell_RenderFrame(v3);
      }
    }
  }
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6573B2D0) --------------------------------------------------------
void __thiscall Vector_FreeBuffer(int this)
{
  if ( *(_DWORD *)(this + 4) )
    operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
}

//----- (6573B350) --------------------------------------------------------
void __thiscall Vector_Clear(_DWORD *this)
{
  int v1; // esi

  v1 = *(this + 1);
  if ( v1 != *(this + 2) )
    *(this + 2) = v1;
}

//----- (6573BC50) --------------------------------------------------------
int __usercall Music_Initialize@<eax>(double a1@<st0>)
{
  int result; // eax

  result = sub_6588A1C0(dword_65ABF718, a1);
  if ( !result )
    return (*(int (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR: Couldn't initialize music!");
  return result;
}

//----- (6573BC90) --------------------------------------------------------
void __thiscall Chat_LoadSettings(_DWORD *this, _DWORD *a2)
{
  if ( a2 )
  {
    a2[1] = (unsigned __int8)CVar_GetBoolDefault(this, (int)"ChatBubbles", 1u);
    *a2 = (unsigned __int8)CVar_GetBoolDefault(this, (int)"ChatPlaySounds", 0);
  }
}

//----- (6573BCD0) --------------------------------------------------------
double __thiscall CVar_GetMusicVolume(_DWORD *this)
{
  int v2; // eax

  v2 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("MusicVolume");
  *(this + 72) = v2;
  if ( !v2 )
    return (float)55.0;
  return (float)((double (__thiscall *)(int, int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v2);
}

//----- (6573BD20) --------------------------------------------------------
double __thiscall CVar_GetSoundVolume(_DWORD *this)
{
  int v2; // eax

  v2 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("SoundVolume");
  *(this + 72) = v2;
  if ( !v2 )
    return (float)70.0;
  return (float)((double (__thiscall *)(int, int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v2);
}

//----- (6573BD70) --------------------------------------------------------
int __thiscall Music_ApplyVolume(_DWORD *this)
{
  float MusicVolume; // [esp+4h] [ebp-4h]

  MusicVolume = CVar_GetMusicVolume(this);
  return Music_SetVolume(MusicVolume);
}

//----- (6573BDA0) --------------------------------------------------------
int __thiscall Sound_ApplyVolume(_DWORD *this)
{
  float v2; // [esp+4h] [ebp-4h]

  v2 = CVar_GetSoundVolume(this) * 0.009999999776482582;
  return sub_6592D440(dword_65ABF768, v2);
}

//----- (6573BDD0) --------------------------------------------------------
int __usercall AudioMgr_Initialize@<eax>(_DWORD *a1@<ecx>, double a2@<st0>)
{
  int v3; // eax
  float v5; // [esp+Ch] [ebp-4h]

  Music_Initialize(a2);
  Music_ApplyVolume(a1);
  Sound_ApplyVolume(a1);
  SoundDriver_Init();
  v3 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("CameraMode");
  a1[72] = v3;
  if ( v3 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v3);
  else
    a2 = 0.0;
  v5 = a2;
  a1[71] = (__int64)v5;
  return 1;
}

//----- (65745870) --------------------------------------------------------
int __thiscall CShell_Sub_45870(
        _DWORD *this,
        unsigned int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        int a16,
        int a17,
        int a18,
        int a19,
        int a20,
        int a21,
        int a22,
        int a23)
{
  int v23; // esi
  int v24; // edi
  unsigned int v25; // eax

  v23 = *(this + 2);
  v24 = *(this + 1);
  v25 = (v23 - v24) / 84;
  if ( a2 <= v25 )
  {
    if ( a2 < v25 )
      sub_65744A80(&a2, v24 + 84 * a2, v23);
  }
  else
  {
    sub_65745270(v23, a2 - v25, &a3);
  }
  return sub_65889210(&a3);
}
// 65744A80: using guessed type int __stdcall sub_65744A80(_DWORD, _DWORD, _DWORD);
// 65745270: using guessed type int __stdcall sub_65745270(_DWORD, _DWORD, _DWORD);
// 65889210: using guessed type int __thiscall sub_65889210(_DWORD);

//----- (65745A50) --------------------------------------------------------
int __thiscall CShell_Sub_45A50(_DWORD *this, unsigned int a2)
{
  int v4[23]; // [esp-54h] [ebp-5Ch] BYREF

  v4[22] = (int)v4;
  sub_65889AF0(v4);
  return CShell_Sub_45870(
           this,
           a2,
           v4[0],
           v4[1],
           v4[2],
           v4[3],
           v4[4],
           v4[5],
           v4[6],
           v4[7],
           v4[8],
           v4[9],
           v4[10],
           v4[11],
           v4[12],
           v4[13],
           v4[14],
           v4[15],
           v4[16],
           v4[17],
           v4[18],
           v4[19],
           v4[20]);
}
// 65889AF0: using guessed type int __thiscall sub_65889AF0(_DWORD);

//----- (65746150) --------------------------------------------------------
int __thiscall CWindow_SetOffset(_DWORD *this, int a2, int a3)
{
  int v3; // esi
  int result; // eax

  v3 = a2 + *(this + 19);
  *(this + 21) = a2;
  result = a3 + *(this + 20);
  *(this + 17) = v3;
  *(this + 22) = a3;
  *(this + 18) = result;
  return result;
}

//----- (657464B0) --------------------------------------------------------
char __thiscall CWindow_SetVisibleFlag(_BYTE *this, char a2)
{
  char result; // al

  result = a2;
  *(this + 6241) = a2;
  *(this + 6242) = a2;
  if ( a2 )
    return (*(int (__thiscall **)(_BYTE *, _DWORD, _DWORD))(*(_DWORD *)this + 92))(
             this,
             *(_DWORD *)(dword_65ABF708 + 40),
             *(_DWORD *)(dword_65ABF708 + 44));
  return result;
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65746530) --------------------------------------------------------
_DWORD *__thiscall CWindow_HitTestChild(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  int v4; // ebx
  int v5; // edi
  int v6; // eax
  _DWORD *v7; // ecx
  _DWORD *result; // eax
  int v9; // [esp+18h] [ebp-10h]
  _DWORD *v10; // [esp+1Ch] [ebp-Ch]
  unsigned int v11; // [esp+20h] [ebp-8h]
  _DWORD **v12; // [esp+24h] [ebp-4h]

  v10 = this;
  v11 = 0;
  if ( *(this + 1008) )
  {
    v12 = (_DWORD **)(this + 8);
    do
    {
      v3 = *v12;
      if ( *v12 && v3[6] && v3[7] )
      {
        v4 = v3[17];
        v9 = v3[18];
        v5 = v4 + (*(int (__thiscall **)(_DWORD *))(*v3 + 16))(v3);
        v6 = v9 + (*(int (__thiscall **)(_DWORD *))(*v3 + 20))(v3);
        if ( a2 >= v4 && a2 <= v5 && a3 >= v9 && a3 <= v6 )
          return v3;
        this = v10;
      }
      ++v12;
      ++v11;
    }
    while ( v11 < *(this + 1008) );
  }
  v7 = (_DWORD *)*(this + 1510);
  result = 0;
  if ( v7 )
    return WindowMgr_FindWidgetAtPos(v7, a2, a3);
  return result;
}

//----- (65746600) --------------------------------------------------------
int __thiscall CWindow_HandleCommand(_BYTE *this, int a2, int a3, int a4)
{
  int result; // eax

  switch ( a2 )
  {
    case 1:
      *(this + 6243) = 1;
      result = 1;
      break;
    case 2:
      *(this + 6243) = 0;
      result = 1;
      break;
    case 3:
      GameMode_TrySetMode((int *)dword_65ABF6F4, 1);
      result = (*(int (__thiscall **)(_BYTE *, int, _DWORD, _DWORD))(*(_DWORD *)this + 4))(this, 4, 0, 0);
      break;
    case 4:
      SoundMgr_PlaySoundIfValid(0x2Eu);
      (*(void (__thiscall **)(_BYTE *, _DWORD))(*(_DWORD *)this + 28))(this, 0);
      result = 1;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (657466A0) --------------------------------------------------------
int __thiscall CWindow_OnMouseDown(int this, int a2, int a3)
{
  _DWORD *v4; // ecx
  _DWORD *v6; // edi
  int v7; // eax
  bool v9; // zf
  int v10; // ebx
  int v11; // [esp+18h] [ebp+Ch]

  if ( CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x56u) != this )
    sub_65808D40((_DWORD *)dword_65ABF708);
  v4 = (_DWORD *)dword_65ABF708;
  if ( this != *(_DWORD *)(dword_65ABF708 + 372) && this != *(_DWORD *)(dword_65ABF708 + 376) )
  {
    sub_65808BD0((_DWORD *)dword_65ABF708);
    v4 = (_DWORD *)dword_65ABF708;
  }
  if ( this != v4[95] && this != v4[96] && this != v4[97] )
    sub_65808CF0(v4);
  v6 = CWindow_HitTestChild((_DWORD *)this, a2, a3);
  if ( !v6 )
  {
    v9 = *(_BYTE *)(this + 18) == 0;
    *(_DWORD *)(this + 6280) = 0;
    if ( v9 || *(_DWORD *)(dword_65ABF6F4 + 80) != *(_DWORD *)(dword_65ABF6F4 + 100) )
    {
      if ( !*(_BYTE *)(this + 19)
        || *(_DWORD *)(this + 12)
        || *(_DWORD *)(dword_65ABF6F4 + 80) != *(_DWORD *)(dword_65ABF6F4 + 104) )
      {
        goto LABEL_26;
      }
      *(_BYTE *)(this + 6293) = 1;
      *(_BYTE *)(this + 6294) = 0;
    }
    else
    {
      *(_BYTE *)(this + 6292) = 1;
    }
    *(_DWORD *)(dword_65ABF708 + 36) = this;
LABEL_26:
    v10 = a3 - *(_DWORD *)(this + 6248);
    *(_DWORD *)(this + 6272) = a2 - *(_DWORD *)(this + 6244);
    *(_DWORD *)(this + 6276) = v10;
    return 0;
  }
  *(_DWORD *)(this + 6296) = v6;
  *(_DWORD *)(this + 6280) = v6;
  v11 = (*(int (__thiscall **)(_DWORD *, int, int))(*v6 + 52))(v6, a2, a3);
  if ( v6[42] && (*(int (__thiscall **)(_DWORD *))(*v6 + 104))(v6) )
  {
    *(_DWORD *)(dword_65ABF708 + 20) = v6;
    *(_DWORD *)(dword_65ABF708 + 24) = this;
    v7 = dword_65ABF708;
    *(_DWORD *)(dword_65ABF708 + 28) = a2 - 10;
    *(_DWORD *)(v7 + 32) = a3 - 10;
  }
  if ( v11 )
  {
    if ( v6[10] )
      SoundMgr_PlaySoundIfValid(0x2Au);
  }
  return v11;
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65746810) --------------------------------------------------------
int __thiscall CWindowInventory_OnLButtonDown(int this, int a2, int a3)
{
  _DWORD *v4; // esi
  int v5; // eax
  int v6; // edi

  *(_BYTE *)(this + 6292) = 0;
  if ( *(_BYTE *)(this + 6293) )
  {
    *(_BYTE *)(this + 6293) = 0;
    *(_BYTE *)(this + 6294) = 1;
  }
  *(_DWORD *)(dword_65ABF708 + 36) = 0;
  *(_DWORD *)(this + 6272) = 0;
  *(_DWORD *)(this + 6276) = 0;
  v4 = CWindow_HitTestChild((_DWORD *)this, a2, a3);
  if ( !v4 )
  {
    if ( *(_DWORD *)(dword_65ABF708 + 20) )
      *(_DWORD *)(dword_65ABF708 + 20) = 0;
    return 0;
  }
  v5 = *(_DWORD *)(dword_65ABF708 + 20);
  if ( v4 == *(_DWORD **)(this + 6280) )
  {
    if ( v5 && (v4[42] && v4[6] || v4[11] && v4[6]) )
    {
      if ( (*(unsigned __int8 (__thiscall **)(int, int, _DWORD *))(*(_DWORD *)this + 108))(this, v5, v4) )
        SoundMgr_PlaySoundIfValid(0x2Cu);
      else
        SoundMgr_PlaySoundIfValid(0x3Cu);
    }
    if ( *(_DWORD *)(dword_65ABF708 + 20) )
      *(_DWORD *)(dword_65ABF708 + 20) = 0;
    if ( v4[6] )
    {
      *(_DWORD *)(this + 6296) = v4;
      v6 = (*(int (__thiscall **)(_DWORD *, int, int))(*v4 + 56))(v4, a2, a3);
      if ( v6 )
      {
        if ( v4[10] )
          SoundMgr_PlaySoundIfValid(0x2Bu);
      }
      return v6;
    }
    return 0;
  }
  if ( !v5 )
    return 0;
  if ( v4[42] && v4[6] || v4[11] && v4[6] )
  {
    if ( (*(unsigned __int8 (__thiscall **)(int, int, _DWORD *))(*(_DWORD *)this + 108))(this, v5, v4) )
      SoundMgr_PlaySoundIfValid(0x2Cu);
    else
      SoundMgr_PlaySoundIfValid(0x3Cu);
    *(_DWORD *)(dword_65ABF708 + 20) = 0;
    return 0;
  }
  else
  {
    SoundMgr_PlaySoundIfValid(0x3Cu);
    *(_DWORD *)(dword_65ABF708 + 20) = 0;
    return 0;
  }
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (657469A0) --------------------------------------------------------
int __thiscall CWindowInventory_OnLButtonUp(_DWORD *this, int a2, int a3)
{
  _DWORD *v4; // ecx
  _DWORD *v5; // eax

  if ( (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x56u) != this )
    sub_65808D40((_DWORD *)dword_65ABF708);
  v4 = (_DWORD *)dword_65ABF708;
  if ( this != *(_DWORD **)(dword_65ABF708 + 372) && this != *(_DWORD **)(dword_65ABF708 + 376) )
  {
    sub_65808BD0((_DWORD *)dword_65ABF708);
    v4 = (_DWORD *)dword_65ABF708;
  }
  if ( this != (_DWORD *)v4[95] && this != (_DWORD *)v4[96] && this != (_DWORD *)v4[97] )
    sub_65808CF0(v4);
  v5 = CWindow_HitTestChild(this, a2, a3);
  if ( v5 )
  {
    *(this + 1574) = v5;
    *(this + 1571) = v5;
    return (*(int (__thiscall **)(_DWORD *, int, int))(*v5 + 64))(v5, a2, a3);
  }
  else
  {
    *(this + 1571) = 0;
    return 0;
  }
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65746A50) --------------------------------------------------------
int __thiscall CWindowInventory_SelectedItem_CallVfn3C(_DWORD **this, int a2, int a3)
{
  if ( *(this + 1574) )
    return (*(int (__thiscall **)(_DWORD, int, int))(**(this + 1574) + 60))(*(this + 1574), a2, a3);
  else
    return 0;
}

//----- (65746A70) --------------------------------------------------------
int __thiscall CWindowInventory_SelectedItem_CallVfn48(_DWORD **this, int a2, int a3)
{
  if ( *(this + 1574) )
    return (*(int (__thiscall **)(_DWORD, int, int))(**(this + 1574) + 72))(*(this + 1574), a2, a3);
  else
    return 0;
}

//----- (65746A90) --------------------------------------------------------
unsigned int __thiscall CWindowInventory_ResetSelection(_DWORD *this, int a2)
{
  unsigned int result; // eax
  _DWORD *v4; // ecx

  sub_65808D60(dword_65ABF708, this);
  result = 0;
  *(this + 1574) = 0;
  *(this + 1577) = 0;
  *(this + 1578) = 0;
  if ( *(this + 1008) )
  {
    v4 = this + 8;
    do
    {
      ++result;
      *(_DWORD *)(*v4++ + 36) = 0;
    }
    while ( result < *(this + 1008) );
  }
  if ( *(this + 1510) )
    return sub_6574C460();
  return result;
}
// 6574C460: using guessed type int sub_6574C460(void);
// 65808D60: using guessed type int __thiscall sub_65808D60(_DWORD, _DWORD);
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65746AF0) --------------------------------------------------------
int __thiscall CWindowInventory_ClearHover(_DWORD *this)
{
  *(this + 1577) = 0;
  *(this + 1578) = 0;
  return 0;
}

//----- (65746B30) --------------------------------------------------------
void __thiscall CWindowInventory_SetDragItem(_DWORD *this, int a2)
{
  *(this + 1572) = 0;
  if ( a2 )
  {
    (*(void (__thiscall **)(_DWORD *))(*this + 96))(this);
    SoundMgr_PlaySoundIfValid(0x2Du);
  }
  else
  {
    *((_BYTE *)this + 6292) = 0;
  }
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (65746B70) --------------------------------------------------------
int __thiscall CWindowInventory_OnKeyDown(_DWORD *this, int a2, int a3)
{
  int v3; // ecx

  if ( *(this + 1572) )
  {
    v3 = *(this + 1572);
    if ( a2 == 13 )
      return (*(int (__thiscall **)(int))(*(_DWORD *)v3 + 48))(v3);
    else
      return (*(int (__thiscall **)(int, int, int))(*(_DWORD *)v3 + 24))(v3, a2, a3) != 0;
  }
  else if ( a2 == 13 )
  {
    return (*(int (__thiscall **)(_DWORD *))(*this + 104))(this);
  }
  else if ( a2 == 27 )
  {
    (*(void (__thiscall **)(_DWORD *, int, _DWORD, _DWORD))(*this + 4))(this, 4, 0, 0);
    return 1;
  }
  else
  {
    return 0;
  }
}

//----- (65746C00) --------------------------------------------------------
int __thiscall CWindowInventory_OnChar(_DWORD *this, int a2)
{
  bool v2; // zf
  int result; // eax

  if ( !*(this + 1572) )
    return 0;
  v2 = (*(int (__thiscall **)(_DWORD, int))(*(_DWORD *)*(this + 1572) + 28))(*(this + 1572), a2) == 0;
  result = 1;
  if ( v2 )
    return 0;
  return result;
}

//----- (65746C30) --------------------------------------------------------
char __thiscall WindowLayer_AddWidget(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  _DWORD *v6; // ecx
  unsigned int v7; // esi
  unsigned int v8; // ecx
  _DWORD **v9; // esi

  if ( !a2 )
    return 1;
  v6 = (_DWORD *)*(this + 1510);
  if ( v6 )
    return WidgetArray1000_Add(v6, a2, a3, a4);
  v7 = *(this + 1008);
  if ( v7 >= 0x3E8 )
    return 0;
  v8 = 0;
  if ( v7 )
  {
    v9 = (_DWORD **)(this + 8);
    while ( *v9 != a2 )
    {
      ++v8;
      ++v9;
      if ( v8 >= *(this + 1008) )
        goto LABEL_11;
    }
  }
  else
  {
LABEL_11:
    a2[21] = a3;
    a2[22] = a4;
    a2[17] = a2[21] + a2[19];
    a2[18] = a2[20] + a2[22];
    *(this + (*(this + 1008))++ + 8) = a2;
  }
  return 1;
}

//----- (65746CD0) --------------------------------------------------------
char __thiscall WindowLayer_AddWidgetLayer2(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  _DWORD *v6; // ecx
  unsigned int v7; // esi
  unsigned int v8; // ecx
  _DWORD **v9; // esi

  if ( !a2 )
    return 1;
  v6 = (_DWORD *)*(this + 1510);
  if ( v6 )
    return WidgetArray500_Add(v6, a2, a3, a4);
  v7 = *(this + 1509);
  if ( v7 >= 0x1F4 )
    return 0;
  v8 = 0;
  if ( v7 )
  {
    v9 = (_DWORD **)(this + 1009);
    while ( *v9 != a2 )
    {
      ++v8;
      ++v9;
      if ( v8 >= *(this + 1509) )
        goto LABEL_11;
    }
  }
  else
  {
LABEL_11:
    a2[21] = a3;
    a2[22] = a4;
    a2[17] = a2[21] + a2[19];
    a2[18] = a2[20] + a2[22];
    *(this + (*(this + 1509))++ + 1009) = a2;
  }
  return 1;
}

//----- (65746D70) --------------------------------------------------------
char __thiscall WindowMgr_RegisterChild(_DWORD *this, int a2, int a3)
{
  unsigned int v4; // edx

  if ( !a2 )
    return 0;
  v4 = *(this + a3 + 1555);
  if ( v4 >= 0xA )
    return 0;
  *(this + 10 * a3 + v4 + 1525) = a2;
  ++*(this + a3 + 1555);
  return 1;
}

//----- (65746DB0) --------------------------------------------------------
char __thiscall WindowMgr_CreateGroup(unsigned int *this, void *a2)
{
  unsigned int v3; // eax
  unsigned int v5; // ecx
  unsigned int *v6; // edx
  _DWORD *v7; // eax
  _DWORD *v8; // eax

  v3 = *(this + 1524);
  if ( v3 >= 0xD )
    return 0;
  v5 = 0;
  if ( v3 )
  {
    v6 = this + 1511;
    while ( !*v6 || *(void **)(*v6 + 4) != a2 )
    {
      ++v5;
      ++v6;
      if ( v5 >= *(this + 1524) )
        goto LABEL_8;
    }
  }
  else
  {
LABEL_8:
    v7 = operator new(0x1780u);
    if ( !v7 )
      return 0;
    v8 = WindowMgr_Ctor(v7, (int)this, (int)a2);
    if ( !v8 )
      return 0;
    *(this + (*(this + 1524))++ + 1511) = (unsigned int)v8;
  }
  return 1;
}

//----- (65746E70) --------------------------------------------------------
char __thiscall WindowMgr_SelectGroup(int *this, int a2)
{
  int v2; // eax
  int v4; // edx
  int *i; // esi
  int v6; // eax

  v2 = *(this + 1510);
  if ( v2 && *(_DWORD *)(v2 + 4) == a2 )
    return 1;
  if ( !a2 )
  {
    *(this + 1510) = 0;
    return 1;
  }
  v4 = 0;
  if ( !*(this + 1524) )
    return 0;
  for ( i = this + 1511; ; ++i )
  {
    v6 = *i;
    if ( *i )
    {
      if ( *(_DWORD *)(v6 + 4) == a2 )
        break;
    }
    if ( ++v4 >= (unsigned int)*(this + 1524) )
      return 0;
  }
  *(this + 1510) = v6;
  return 1;
}

//----- (65746EE0) --------------------------------------------------------
char __thiscall WindowMgr_ContainsWindow(int *this, int a2)
{
  int v2; // edx
  unsigned int v5; // ebx
  int *v6; // edi
  int v7; // eax
  unsigned int v8; // ebx
  int *v9; // edi
  int v10; // eax
  unsigned int v11; // edi
  int **v12; // ebx

  v2 = a2;
  if ( !a2 )
    return 0;
  v5 = 0;
  if ( *(this + 1008) )
  {
    v6 = this + 8;
    do
    {
      v7 = *v6;
      if ( *v6 == v2 )
        return 1;
      if ( v7 )
      {
        if ( (*(unsigned __int8 (__stdcall **)(int))(*(_DWORD *)v7 + 120))(v2) )
          return 1;
        v2 = a2;
      }
      ++v5;
      ++v6;
    }
    while ( v5 < *(this + 1008) );
  }
  v8 = 0;
  if ( *(this + 1509) )
  {
    v9 = this + 1009;
    do
    {
      v10 = *v9;
      if ( *v9 == v2 )
        return 1;
      if ( v10 )
      {
        if ( (*(unsigned __int8 (__stdcall **)(int))(*(_DWORD *)v10 + 120))(v2) )
          return 1;
        v2 = a2;
      }
      ++v8;
      ++v9;
    }
    while ( v8 < *(this + 1509) );
  }
  v11 = 0;
  if ( *(this + 1524) )
  {
    v12 = (int **)(this + 1511);
    do
    {
      if ( *v12 )
      {
        if ( WindowMgr_ContainsWidget(*v12, v2) )
          return 1;
        v2 = a2;
      }
      ++v11;
      ++v12;
    }
    while ( v11 < *(this + 1524) );
  }
  return 0;
}

//----- (65747030) --------------------------------------------------------
int __cdecl VTable_CallDtor(int (__thiscall ***a1)(_DWORD, int))
{
  int result; // eax

  if ( a1 )
    return (**a1)(a1, 1);
  return result;
}

//----- (657471B0) --------------------------------------------------------
int __cdecl VTable_CallDtor2(int (__thiscall ***a1)(_DWORD, int))
{
  int result; // eax

  if ( a1 )
    return (**a1)(a1, 1);
  return result;
}

//----- (65747E50) --------------------------------------------------------
char *__thiscall WindowGroup_CopyEntry(char *this, int a2, char *Source)
{
  char *v3; // ebx
  char *v4; // esi

  if ( !Source )
    return this + 108 * a2;
  v3 = this + 8424;
  qmemcpy(this + 8424, this + 108 * a2, 0x6Cu);
  v4 = this + 8432;
  if ( this != (char *)-8432 )
  {
    strncpy(this + 8432, Source, 0xFu);
    v4[15] = 0;
  }
  return v3;
}

//----- (65747EB0) --------------------------------------------------------
_DWORD *__thiscall sub_65747EB0(_DWORD *this)
{
  _DWORD *v2; // edi
  _DWORD *v3; // eax
  int v4; // ebx

  sub_657692D0();
  *this = &off_659C2124;
  *(this + 2) = 0;
  *(this + 3) = 0;
  *((_BYTE *)this + 16) = 0;
  *((_BYTE *)this + 17) = 1;
  *((_BYTE *)this + 18) = 0;
  *((_BYTE *)this + 19) = 0;
  *((_BYTE *)this + 20) = 0;
  *(this + 6) = 0;
  *((_BYTE *)this + 28) = 0;
  *((_BYTE *)this + 6240) = 0;
  *((_BYTE *)this + 6241) = 0;
  *((_BYTE *)this + 6242) = 0;
  *((_BYTE *)this + 6243) = 0;
  *((_BYTE *)this + 6292) = 0;
  *((_BYTE *)this + 6293) = 0;
  *((_BYTE *)this + 6294) = 0;
  *((_BYTE *)this + 6295) = 0;
  *(this + 1) = -1;
  *(this + 1510) = 0;
  *(this + 1572) = 0;
  *(this + 1565) = 0;
  *(this + 1566) = 0;
  *(this + 1567) = 0;
  *(this + 1561) = 0;
  *(this + 1562) = 0;
  *(this + 1563) = 0;
  *(this + 1564) = 0;
  *((float *)this + 1575) = 1.0;
  *((float *)this + 1582) = 0.0;
  *(this + 1568) = 0;
  *(this + 1569) = 0;
  *(this + 1574) = 0;
  *(this + 1570) = 0;
  *(this + 1571) = 0;
  *((_BYTE *)this + 6304) = 0;
  *(this + 1577) = 0;
  *(this + 1578) = 0;
  *((_BYTE *)this + 6316) = 0;
  *((_BYTE *)this + 6317) = 0;
  *((_BYTE *)this + 6318) = 0;
  *(this + 1580) = 0;
  *(this + 1581) = 0;
  *(this + 1583) = 0;
  *((_BYTE *)this + 6336) = 0;
  *(this + 1008) = 0;
  memset(this + 8, 0, 0xFA0u);
  *(this + 1509) = 0;
  memset(this + 1009, 0, 0x7D0u);
  *(this + 1524) = 0;
  *(this + 1511) = 0;
  *(this + 1512) = 0;
  *(this + 1513) = 0;
  *(this + 1514) = 0;
  *(this + 1515) = 0;
  *(this + 1516) = 0;
  *(this + 1517) = 0;
  *(this + 1518) = 0;
  *(this + 1519) = 0;
  *(this + 1520) = 0;
  *(this + 1521) = 0;
  *(this + 1522) = 0;
  *(this + 1523) = 0;
  v2 = this + 1555;
  v3 = this + 1525;
  v4 = 3;
  do
  {
    *v3 = 0;
    v3[1] = 0;
    v3[2] = 0;
    v3[3] = 0;
    v3[4] = 0;
    v3[5] = 0;
    v3[6] = 0;
    v3[7] = 0;
    v3[8] = 0;
    v3[9] = 0;
    *v2++ = 0;
    v3 += 10;
    --v4;
  }
  while ( v4 );
  *(this + 1558) = 0;
  *(this + 1559) = 0;
  return this;
}
// 657692D0: using guessed type int sub_657692D0(void);
// 659C2124: using guessed type void *off_659C2124;

//----- (65748080) --------------------------------------------------------
int __stdcall Null_Return0(int a1)
{
  return 0;
}

//----- (65748090) --------------------------------------------------------
int Null_Return0_v2()
{
  return 0;
}

//----- (657480B0) --------------------------------------------------------
int __thiscall CWindow_UpdateChildren(char *this, int a2)
{
  unsigned int v2; // ebx
  DWORD Time; // eax
  DWORD v6; // ecx
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  int v9; // eax
  char *v10; // edi
  char *v11; // edi
  unsigned int v12; // ebx
  char *v13; // edi
  char *v14; // edi
  _DWORD *v15; // ecx

  v2 = 0;
  if ( !a2 )
    return 0;
  if ( *(this + 6241) && !*(this + 6242) )
    (*(void (__thiscall **)(char *, _DWORD, _DWORD))(*(_DWORD *)this + 92))(
      this,
      *(_DWORD *)(dword_65ABF708 + 40),
      *(_DWORD *)(dword_65ABF708 + 44));
  *(this + 6242) = *(this + 6241);
  if ( !*((_DWORD *)this + 1577) )
  {
LABEL_12:
    *((_DWORD *)this + 1578) = 0;
    goto LABEL_13;
  }
  if ( WindowMgr_ContainsWindow((int *)this, *((_DWORD *)this + 1577)) )
  {
    Time = timeGetTime();
    v6 = *((_DWORD *)this + 1578);
    if ( v6 )
    {
      if ( Time < v6 || *(_BYTE *)(CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x57u) + 6241) )
        goto LABEL_13;
      sub_6580A1B0((int *)dword_65ABF708, (int)this, *((_DWORD **)this + 1577));
      goto LABEL_12;
    }
    *((_DWORD *)this + 1578) = Time + *(_DWORD *)(*((_DWORD *)this + 1577) + 164);
  }
  else
  {
    *((_DWORD *)this + 1577) = 0;
  }
LABEL_13:
  v7 = (_DWORD *)*((_DWORD *)this + 1580);
  if ( v7 && *((_DWORD *)this + 1581) )
  {
    if ( *(this + 6243) )
    {
      v7[6] = 0;
      v7[50] = 0;
      v8 = (_DWORD *)*((_DWORD *)this + 1581);
      v8[6] = 1;
      v8[50] = 1;
      v8[8] = 1;
    }
    else
    {
      v7[6] = 1;
      v7[50] = 1;
      v7[8] = 1;
      v9 = *((_DWORD *)this + 1581);
      *(_DWORD *)(v9 + 24) = 0;
      *(_DWORD *)(v9 + 200) = 0;
    }
  }
  if ( *((_DWORD *)this + 1509) )
  {
    v10 = this + 4036;
    do
    {
      if ( *(_DWORD *)v10 )
      {
        (*(void (**)(void))(g_pILTClient + 180))();
        (*(void (**)(void))(g_pILTClient + 176))();
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)v10 + 12))(*(_DWORD *)v10, a2);
      }
      ++v2;
      v10 += 4;
    }
    while ( v2 < *((_DWORD *)this + 1509) );
    v2 = 0;
  }
  if ( *(this + 6318) )
  {
    if ( *((_DWORD *)this + 1008) )
    {
      v11 = this + 32;
      do
      {
        if ( *(_DWORD *)v11 && *(_BYTE *)(*(_DWORD *)v11 + 172) )
        {
          (*(void (**)(void))(g_pILTClient + 180))();
          (*(void (**)(void))(g_pILTClient + 176))();
          (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)v11 + 12))(*(_DWORD *)v11, a2);
        }
        ++v2;
        v11 += 4;
      }
      while ( v2 < *((_DWORD *)this + 1008) );
      v12 = 0;
      if ( *((_DWORD *)this + 1008) )
      {
        v13 = this + 32;
        do
        {
          if ( *(_DWORD *)v13 && !*(_BYTE *)(*(_DWORD *)v13 + 172) )
          {
            (*(void (**)(void))(g_pILTClient + 180))();
            (*(void (**)(void))(g_pILTClient + 176))();
            (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)v13 + 12))(*(_DWORD *)v13, a2);
          }
          ++v12;
          v13 += 4;
        }
        while ( v12 < *((_DWORD *)this + 1008) );
      }
    }
  }
  else if ( *((_DWORD *)this + 1008) )
  {
    v14 = this + 32;
    do
    {
      if ( *(_DWORD *)v14 )
      {
        (*(void (**)(void))(g_pILTClient + 180))();
        (*(void (**)(void))(g_pILTClient + 176))();
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)v14 + 12))(*(_DWORD *)v14, a2);
      }
      ++v2;
      v14 += 4;
    }
    while ( v2 < *((_DWORD *)this + 1008) );
  }
  v15 = (_DWORD *)*((_DWORD *)this + 1510);
  if ( v15 )
    WindowMgr_DrawAll(v15, a2);
  (*(void (**)(void))(g_pILTClient + 180))();
  (*(void (**)(void))(g_pILTClient + 176))();
  return (*(int (__thiscall **)(char *, int))(*(_DWORD *)this + 36))(this, a2);
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65748360) --------------------------------------------------------
_DWORD *__thiscall WindowBar_UpdateLayout(int this)
{
  _DWORD *result; // eax
  int v3; // esi
  int v4; // ecx
  int v5; // edi
  _DWORD *v6; // esi
  int v7; // eax
  int v8; // edx
  int v9; // edi
  _DWORD *v10; // esi
  int v11; // edi
  int v12; // ecx
  int v13; // edx
  int v14; // [esp+10h] [ebp-14h]
  int v15; // [esp+10h] [ebp-14h]
  int v16; // [esp+14h] [ebp-10h]
  _DWORD *v17; // [esp+18h] [ebp-Ch]
  _DWORD **v18; // [esp+1Ch] [ebp-8h]
  _DWORD **v19; // [esp+1Ch] [ebp-8h]
  _DWORD *v20; // [esp+20h] [ebp-4h]
  _DWORD *v21; // [esp+20h] [ebp-4h]

  result = (_DWORD *)((char *)&unk_659C2198 + 92 * *(_DWORD *)(this + 8));
  v16 = 0;
  v17 = 0;
  if ( !*(_BYTE *)(this + 20) )
  {
    v3 = result[13] - result[2];
    v16 = v3 <= 0 ? 0 : v3;
    v4 = result[15] - result[4];
    result = v4 <= 0 ? 0 : (_DWORD *)v4;
    v17 = result;
  }
  v5 = *(_DWORD *)(this + 6232);
  v20 = 0;
  if ( *(_DWORD *)(this + 6220) )
  {
    v18 = (_DWORD **)(this + 6100);
    do
    {
      v6 = *v18;
      if ( *v18 )
      {
        v14 = v6[22];
        v7 = (*(int (__thiscall **)(_DWORD *))(*v6 + 16))(v6);
        v6[17] = v5 + v6[19];
        v8 = v14 + v6[20];
        v6[21] = v5;
        v6[22] = v14;
        v6[18] = v8;
        v5 += v7 + 5;
      }
      ++v18;
      result = (_DWORD *)((char *)v20 + 1);
      v20 = result;
    }
    while ( (unsigned int)result < *(_DWORD *)(this + 6220) );
  }
  v21 = 0;
  v9 = *(_DWORD *)(this + 6264) - *(_DWORD *)(this + 6236) - (_DWORD)v17 - v16;
  if ( *(_DWORD *)(this + 6228) )
  {
    v19 = (_DWORD **)(this + 6180);
    do
    {
      v10 = *v19;
      if ( *v19 )
      {
        v15 = v10[22];
        v11 = v9 - (*(int (__thiscall **)(_DWORD *))(*v10 + 16))(v10);
        v12 = v11 + v10[19];
        v13 = v15 + v10[20];
        v10[21] = v11;
        v10[22] = v15;
        v10[17] = v12;
        v10[18] = v13;
        v9 = v11 - 5;
      }
      ++v19;
      result = (_DWORD *)((char *)v21 + 1);
      v21 = result;
    }
    while ( (unsigned int)result < *(_DWORD *)(this + 6228) );
  }
  return result;
}

//----- (65748660) --------------------------------------------------------
int (__thiscall ***__thiscall UiWidget_Create(
        void *this,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13))(_DWORD, int)
{
  int (__thiscall ***v14)(_DWORD, int); // eax
  int (__thiscall ***v15)(_DWORD, int); // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v15 = v14;
  if ( ((int (__thiscall *)(int (__thiscall ***)(_DWORD, int), int, int, int, int, int, int, int, int, int, int, void *, int, _DWORD, _DWORD, int))(*v14)[32])(
         v14,
         a2,
         a4,
         a5,
         a6,
         a7,
         a8,
         a9,
         a10,
         a11,
         a12,
         this,
         a3,
         0,
         0,
         a13) )
  {
    return v15;
  }
  VTable_CallDtor(v15);
  return 0;
}
// 6574869B: variable 'v14' is possibly undefined

//----- (65748710) --------------------------------------------------------
int (__thiscall ***__stdcall UiWidget_CreateSimple(int a1, int a2, int a3, void *a4, void *a5, int a6))(_DWORD, int)
{
  _DWORD *v6; // eax
  int (__thiscall ***v7)(_DWORD, int); // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v7 = (int (__thiscall ***)(_DWORD, int))v6;
  if ( Button_Initialize(v6, a1, a2, a3, a4, a5, a6) )
    return v7;
  VTable_CallDtor3(v7);
  return 0;
}
// 6574871F: variable 'v6' is possibly undefined

//----- (65748760) --------------------------------------------------------
int (__thiscall ***__stdcall UiWidget_CreateFromData(int a1, int a2, int a3, int a4))(_DWORD, int)
{
  _DWORD *v4; // eax
  int (__thiscall ***v5)(_DWORD, int); // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v5 = (int (__thiscall ***)(_DWORD, int))v4;
  if ( Icon_CreateNew(v4, a1, a2, a3, a4) )
    return v5;
  VTable_CallDtor4(v5);
  return 0;
}
// 6574876F: variable 'v4' is possibly undefined

//----- (657487A0) --------------------------------------------------------
int (__thiscall ***__thiscall UiWidget_CreateWithCallback(void *this, int a2, int a3, int a4))(_DWORD, int)
{
  _DWORD *v5; // eax
  int (__thiscall ***v6)(_DWORD, int); // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v6 = (int (__thiscall ***)(_DWORD, int))v5;
  if ( UiWidget_SetParams(v5, (int)this, a2, a3, a4) )
    return v6;
  IUnknown_Release1(v6);
  return 0;
}
// 657487B2: variable 'v5' is possibly undefined

//----- (65748820) --------------------------------------------------------
char *__stdcall UiWidget_CreateWithParams(const void *a1, float a2, int a3, char a4, char a5, _BYTE *a6)
{
  char *v6; // eax
  char *v7; // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v7 = v6;
  if ( CharacterEntry_Create(v6, a1, a2, a3, a4, a5, a6) )
    return v7;
  IUnknown_Release2((int (__thiscall ***)(_DWORD, int))v7);
  return 0;
}
// 65748832: variable 'v6' is possibly undefined

//----- (65748950) --------------------------------------------------------
_DWORD *__thiscall UiWidget_CreateFull(
        _DWORD *this,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13,
        int a14,
        int a15,
        char a16)
{
  int (__thiscall ***v17)(_DWORD, int); // esi
  char v18; // al

  v17 = UiWidget_Create(this, a2, a3, a4, a5, a6, a7, a8, a11, a12, a13, a14, a15);
  if ( !v17 )
    return 0;
  if ( a16 )
    v18 = WindowLayer_AddWidget(this, v17, a9, a10);
  else
    v18 = WindowLayer_AddWidgetLayer2(this, v17, a9, a10);
  if ( !v18 )
  {
    VTable_CallDtor(v17);
    return 0;
  }
  (*v17)[22](v17, 1);
  if ( a13 )
    v17[116] = (int (__thiscall **)(_DWORD, int))1;
  return v17;
}

//----- (65748A50) --------------------------------------------------------
_DWORD *__thiscall UiWidget_CreateWithInput(_DWORD *this, int a2, int a3, int a4, int a5, int a6)
{
  int v7; // eax
  _DWORD *v8; // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v8 = (_DWORD *)v7;
  if ( WeaponMgr_HandleInput(v7, a2, (unsigned int)this, a6, a5) && WindowLayer_AddWidget(this, v8, a3, a4) )
    return v8;
  VTable_CallDtor7((int (__thiscall ***)(_DWORD, int))v8);
  return 0;
}
// 65748A62: variable 'v7' is possibly undefined

//----- (65748B10) --------------------------------------------------------
int *__thiscall UiWidget_CreateExtended(_DWORD *this, int a2, int *a3, int a4, int a5, int *a6, unsigned int a7)
{
  int *v8; // eax
  int *v9; // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v9 = v8;
  if ( TextInput_Initialize(v8, a2, (int)this, a3, a6, a7) && WindowLayer_AddWidget(this, v9, a4, a5) )
    return v9;
  VTable_CallDtor8((int (__thiscall ***)(_DWORD, int))v9);
  return 0;
}
// 65748B22: variable 'v8' is possibly undefined

//----- (65748B70) --------------------------------------------------------
int *__thiscall UiWidget_CreateAlt(_DWORD *this, int a2, int *a3, int a4, int a5, int a6, int a7)
{
  int *v8; // eax
  int *v9; // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v9 = v8;
  if ( ListBox_Initialize(v8, a2, this, a3, a6, a7) && WindowLayer_AddWidget(this, v9, a4, a5) )
    return v9;
  VTable_CallDtor9((int (__thiscall ***)(_DWORD, int))v9);
  return 0;
}
// 65748B82: variable 'v8' is possibly undefined

//----- (65748C90) --------------------------------------------------------
_DWORD *__thiscall UiWidget_CreateBase(_DWORD *this, unsigned int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v7; // esi

  v7 = (_DWORD *)UiWidget_AllocNew();
  if ( ImageWidget_Initialize(v7, a2, a3, a6) && WindowLayer_AddWidget(this, v7, a4, a5) )
    return v7;
  VTable_CallDtor2((int (__thiscall ***)(_DWORD, int))v7);
  return 0;
}

//----- (65748DB0) --------------------------------------------------------
_DWORD *__thiscall UiWidget_CreateMin(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v6; // eax
  _DWORD *v7; // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v7 = v6;
  if ( Checkbox_Initialize(v6, a2, a3) && WindowLayer_AddWidget(this, v7, a4, a5) )
    return v7;
  VTable_CallDtor10((int (__thiscall ***)(_DWORD, int))v7);
  return 0;
}
// 65748DBF: variable 'v6' is possibly undefined

//----- (65748E60) --------------------------------------------------------
_DWORD *__thiscall UiWidget_CreateComplex(
        _DWORD *this,
        void *a2,
        void *a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        char a9,
        int a10,
        int a11,
        int a12)
{
  int v13; // eax
  _DWORD *v14; // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v14 = (_DWORD *)v13;
  if ( TextWidget_Initialize(v13, a2, a3, (int)this, a6, a7, a8, a9, a10, a11, a12)
    && WindowLayer_AddWidget(this, v14, a4, a5) )
  {
    return v14;
  }
  VTable_CallDtor11((int (__thiscall ***)(_DWORD, int))v14);
  return 0;
}
// 65748E72: variable 'v13' is possibly undefined

//----- (65749040) --------------------------------------------------------
_DWORD *__thiscall UiWidget_CreateWithStyle(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v6; // eax
  _DWORD *v7; // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v7 = v6;
  if ( ComboBox_Initialize(v6, a2, (unsigned int)this, a5) && WindowLayer_AddWidget(this, v7, a3, a4) )
    return v7;
  VTable_CallDtor12((int (__thiscall ***)(_DWORD, int))v7);
  return 0;
}
// 6574904F: variable 'v6' is possibly undefined

//----- (65749090) --------------------------------------------------------
_DWORD *__thiscall UiWidget_CreateScrollbar(_DWORD *this, int a2, int a3, int a4, int a5, float a6, char a7)
{
  int v8; // eax
  _DWORD *v9; // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v9 = (_DWORD *)v8;
  if ( Scrollbar_Initialize(v8, a4, a5, a6) )
  {
    if ( a7 ? WindowLayer_AddWidget(this, v9, a2, a3) : WindowLayer_AddWidgetLayer2(this, v9, a2, a3) )
      return v9;
  }
  VTable_CallDtor6((int (__thiscall ***)(_DWORD, int))v9);
  return 0;
}
// 657490A6: variable 'v8' is possibly undefined

//----- (65749100) --------------------------------------------------------
_DWORD *__thiscall UiWidget_CreateSlider(_DWORD *this, int a2, int a3, int a4, float a5, char a6)
{
  int v7; // eax
  _DWORD *v8; // esi

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v8 = (_DWORD *)v7;
  if ( Scrollbar_InitFromTable(v7, a4, a5) )
  {
    if ( a6 ? WindowLayer_AddWidget(this, v8, a2, a3) : WindowLayer_AddWidgetLayer2(this, v8, a2, a3) )
      return v8;
  }
  VTable_CallDtor5((int (__thiscall ***)(_DWORD, int))v8);
  return 0;
}
// 65749110: variable 'v7' is possibly undefined

//----- (657491C0) --------------------------------------------------------
char *__thiscall UiWidget_CreateContainer(
        _DWORD *this,
        int a2,
        int a3,
        int a4,
        int a5,
        int a6,
        const void *a7,
        char a8,
        int a9,
        int a10,
        int a11)
{
  char *v12; // eax
  char *v13; // esi

  v12 = (char *)operator new(0x17Cu);
  if ( v12 )
    v13 = UiObject_Ctor(v12);
  else
    v13 = 0;
  if ( sub_65764D80((int)v13, (int)this, a2, a3, a4, a7, a8, a9, a10, a11) && WindowLayer_AddWidget(this, v13, a5, a6) )
    return v13;
  if ( v13 )
    (**(void (__thiscall ***)(char *, int))v13)(v13, 1);
  return 0;
}

//----- (65749F80) --------------------------------------------------------
_DWORD *__thiscall CWindow_UpdateChildPositions(int this)
{
  int v2; // ebx
  _DWORD *v3; // eax
  int v4; // ecx
  int v5; // ecx
  int v6; // eax
  int v7; // ecx
  _DWORD *v8; // edx
  int v9; // edi
  _DWORD *v10; // edx
  int v11; // edi
  _DWORD *result; // eax
  unsigned int v13; // edi
  _DWORD **v14; // ebx
  int v15; // [esp+Ch] [ebp-14h]
  _DWORD *v16; // [esp+Ch] [ebp-14h]
  _DWORD *v17; // [esp+Ch] [ebp-14h]
  unsigned int v18; // [esp+10h] [ebp-10h]
  unsigned int v19; // [esp+10h] [ebp-10h]
  int v20; // [esp+14h] [ebp-Ch]
  int v21; // [esp+18h] [ebp-8h]
  int v22; // [esp+1Ch] [ebp-4h]

  v2 = 0;
  v3 = (_DWORD *)((char *)&unk_659C2198 + 92 * *(_DWORD *)(this + 8));
  v22 = 0;
  v21 = 0;
  v20 = 0;
  if ( !*(_BYTE *)(this + 20) )
  {
    v4 = v3[13] - v3[2];
    LOBYTE(v2) = v4 <= 0;
    v2 = v4 & (v2 - 1);
    v5 = v3[15] - v3[4];
    v22 = (v3[11] - v3[3]) & ((v3[11] - v3[3] <= 0) - 1);
    v21 = v5 <= 0 ? 0 : v5;
    v20 = (v3[19] - v3[5]) & ((v3[19] - v3[5] <= 0) - 1);
  }
  v18 = 0;
  if ( *(_DWORD *)(this + 6036) )
  {
    v16 = (_DWORD *)(this + 4036);
    v6 = this + 4036;
    v7 = this + 4036;
    do
    {
      v8 = (_DWORD *)*v16;
      if ( *v16 )
      {
        switch ( v8[13] )
        {
          case 0:
            v6 = v2 + *(_DWORD *)(this + 6244);
            v7 = v22 + *(_DWORD *)(this + 6248);
            break;
          case 1:
            v6 = v2 + *(_DWORD *)(this + 6244);
            goto LABEL_11;
          case 2:
            v6 = *(_DWORD *)(this + 6252) - v21;
            v7 = v22 + *(_DWORD *)(this + 6248);
            break;
          case 3:
            v6 = *(_DWORD *)(this + 6252) - v21;
LABEL_11:
            v7 = *(_DWORD *)(this + 6256) - v20;
            break;
          default:
            break;
        }
        v8[17] = v6 + v8[21];
        v9 = v8[22];
        v8[19] = v6;
        v8[20] = v7;
        v8[18] = v7 + v9;
      }
      ++v16;
      ++v18;
    }
    while ( v18 < *(_DWORD *)(this + 6036) );
  }
  else
  {
    v6 = v15;
    v7 = v15;
  }
  v19 = 0;
  if ( *(_DWORD *)(this + 4032) )
  {
    v17 = (_DWORD *)(this + 32);
    do
    {
      v10 = (_DWORD *)*v17;
      if ( *v17 )
      {
        switch ( v10[13] )
        {
          case 0:
            v6 = v2 + *(_DWORD *)(this + 6244);
            v7 = v22 + *(_DWORD *)(this + 6248);
            break;
          case 1:
            v6 = v2 + *(_DWORD *)(this + 6244);
            goto LABEL_24;
          case 2:
            v6 = *(_DWORD *)(this + 6252) - v21;
            v7 = v22 + *(_DWORD *)(this + 6248);
            break;
          case 3:
            v6 = *(_DWORD *)(this + 6252) - v21;
LABEL_24:
            v7 = *(_DWORD *)(this + 6256) - v20;
            break;
          default:
            break;
        }
        v10[17] = v6 + v10[21];
        v11 = v10[22];
        v10[19] = v6;
        v10[20] = v7;
        v10[18] = v7 + v11;
      }
      ++v17;
      ++v19;
    }
    while ( v19 < *(_DWORD *)(this + 4032) );
  }
  result = WindowBar_UpdateLayout(this);
  v13 = 0;
  if ( *(_DWORD *)(this + 6096) )
  {
    v14 = (_DWORD **)(this + 6044);
    do
    {
      if ( *v14 )
        result = WindowMgr_UpdateChildLayout(*v14);
      ++v13;
      ++v14;
    }
    while ( v13 < *(_DWORD *)(this + 6096) );
  }
  return result;
}
// 6574A09A: variable 'v15' is possibly undefined

//----- (6574A1A0) --------------------------------------------------------
int __thiscall CWindowInventory_OnMouseMove(_DWORD *this, int a2, int a3)
{
  _DWORD *v4; // eax
  _DWORD *v5; // esi
  int v6; // eax

  v4 = CWindow_HitTestChild(this, a2, a3);
  v5 = v4;
  if ( !v4 )
  {
    *(this + 1571) = 0;
    return 0;
  }
  if ( v4 != (_DWORD *)*(this + 1571) || !v4[6] )
    return 0;
  *(this + 1574) = v4;
  if ( (int)v4[35] <= 0 )
  {
    if ( v4[38] )
    {
      v6 = v4[39];
      if ( v6 )
      {
        if ( *(_DWORD *)(v6 + 140) )
          sub_6580A0B0(dword_65ABF708, this, v5[39]);
      }
    }
  }
  else
  {
    sub_6580A0B0(dword_65ABF708, this, v4);
  }
  return (*(int (__thiscall **)(_DWORD *, int, int))(*v5 + 68))(v5, a2, a3);
}
// 6580A0B0: using guessed type int __thiscall sub_6580A0B0(_DWORD, _DWORD, _DWORD);
// 65ABF708: using guessed type int dword_65ABF708;

//----- (6574A230) --------------------------------------------------------
void __thiscall GroupWindow_Dtor(void **this)
{
  void **v2; // edi
  void *v3; // esi
  unsigned int v4; // [esp+14h] [ebp-10h]

  *this = &off_659C2124;
  UiWidget_Thunk();
  v4 = 0;
  if ( *(this + 1524) )
  {
    v2 = this + 1511;
    do
    {
      v3 = *v2;
      if ( *v2 )
      {
        Widget_Thunk(*v2);
        operator delete(v3);
        *v2 = 0;
      }
      ++v2;
      ++v4;
    }
    while ( v4 < (unsigned int)*(this + 1524) );
  }
  UiWidget_SetVTable(this);
}
// 659C2124: using guessed type void *off_659C2124;

//----- (6574A2D0) --------------------------------------------------------
int __thiscall GroupWindow_Initialize(int this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  _DWORD *Full; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  int v12; // [esp-8h] [ebp-18h]
  int v13; // [esp-8h] [ebp-18h]
  int v14; // [esp-8h] [ebp-18h]
  int v15; // [esp-4h] [ebp-14h]
  float v16; // [esp+0h] [ebp-10h]

  WindowMgr_SelectGroup((int *)this, 0);
  switch ( *(_DWORD *)(this + 8) )
  {
    case 1:
      UiWidget_CreateWithInput(v2, 4, *(_DWORD *)(this + 6264) - 14, -13, 0, 39);
      if ( *(_BYTE *)(this + 16) )
      {
        v3 = UiWidget_CreateWithInput((_DWORD *)this, 1, *(_DWORD *)(this + 6264) - 26, -13, 0, 37);
        v12 = *(_DWORD *)(this + 6264) - 26;
        *(_DWORD *)(this + 6320) = v3;
        *(_DWORD *)(this + 6324) = UiWidget_CreateWithInput((_DWORD *)this, 2, v12, -13, 0, 38);
      }
      break;
    case 3:
      if ( *(_BYTE *)(this + 16) )
      {
        v4 = UiWidget_CreateWithInput(v2, 1, *(_DWORD *)(this + 6264) - 14, -4, 0, 37);
        v13 = *(_DWORD *)(this + 6264) - 14;
        *(_DWORD *)(this + 6320) = v4;
        *(_DWORD *)(this + 6324) = UiWidget_CreateWithInput((_DWORD *)this, 2, v13, -4, 0, 38);
      }
      break;
    case 4:
      UiWidget_CreateWithInput(v2, 4, *(_DWORD *)(this + 6264) - 14, -47, 0, 39);
      if ( *(_BYTE *)(this + 16) )
      {
        v5 = UiWidget_CreateWithInput((_DWORD *)this, 1, *(_DWORD *)(this + 6264) - 26, -47, 0, 37);
        v14 = *(_DWORD *)(this + 6264) - 26;
        *(_DWORD *)(this + 6320) = v5;
        *(_DWORD *)(this + 6324) = UiWidget_CreateWithInput((_DWORD *)this, 2, v14, -47, 0, 38);
      }
      if ( strlen((const char *)(this + 6336)) > 1 )
      {
        UiWidget_CreateSlider((_DWORD *)this, -2, -11, 14, *(float *)(this + 6300), 0);
        UiWidget_CreateFull(
          (_DWORD *)this,
          0,
          this + 6336,
          32,
          300,
          0,
          0,
          1,
          10,
          -29,
          (int)&unk_65A5CEC8,
          2,
          0,
          0,
          0,
          0);
      }
      if ( *(_DWORD *)(this + 24) )
      {
        v16 = *(float *)(this + 6300);
        v15 = *(_DWORD *)(this + 24);
        if ( *(_BYTE *)(this + 20) )
          goto LABEL_34;
        goto LABEL_35;
      }
      break;
    case 5:
      if ( strlen((const char *)(this + 6336)) > 1 )
      {
        UiWidget_CreateSlider((_DWORD *)this, -2, -11, 14, *(float *)(this + 6300), 0);
        UiWidget_CreateFull(
          (_DWORD *)this,
          0,
          this + 6336,
          32,
          300,
          0,
          0,
          1,
          10,
          -29,
          (int)&unk_65A5CEC8,
          2,
          0,
          0,
          0,
          0);
      }
      if ( *(_DWORD *)(this + 24) )
      {
        v16 = *(float *)(this + 6300);
        v15 = *(_DWORD *)(this + 24);
        if ( !*(_BYTE *)(this + 20) )
          goto LABEL_35;
        goto LABEL_34;
      }
      break;
    case 6:
      if ( *(_BYTE *)(this + 16) )
      {
        *(_DWORD *)(this + 6320) = UiWidget_CreateWithInput(v2, 1, *(_DWORD *)(this + 6264) - 26, -47, 0, 37);
        *(_DWORD *)(this + 6324) = UiWidget_CreateWithInput(
                                     (_DWORD *)this,
                                     2,
                                     *(_DWORD *)(this + 6264) - 26,
                                     -47,
                                     0,
                                     38);
      }
      if ( strlen((const char *)(this + 6336)) > 1 )
      {
        UiWidget_CreateSlider((_DWORD *)this, -2, -11, 14, *(float *)(this + 6300), 0);
        UiWidget_CreateFull(
          (_DWORD *)this,
          0,
          this + 6336,
          32,
          300,
          0,
          0,
          1,
          10,
          -29,
          (int)&unk_65A5CEC8,
          2,
          0,
          0,
          0,
          0);
      }
      if ( *(_DWORD *)(this + 24) )
      {
        v16 = *(float *)(this + 6300);
        v15 = *(_DWORD *)(this + 24);
        if ( !*(_BYTE *)(this + 20) )
          goto LABEL_35;
        goto LABEL_34;
      }
      break;
    case 8:
      UiWidget_CreateWithInput(v2, 4, -24, 2, 0, 39)[13] = 2;
      if ( *(_BYTE *)(this + 16) )
      {
        v6 = UiWidget_CreateWithInput((_DWORD *)this, 1, -36, 2, 0, 37);
        *(_DWORD *)(this + 6320) = v6;
        v6[13] = 2;
        v7 = UiWidget_CreateWithInput((_DWORD *)this, 2, -36, 2, 0, 38);
        *(_DWORD *)(this + 6324) = v7;
        v7[13] = 2;
      }
      break;
    case 9:
      UiWidget_CreateWithInput(v2, (*(_BYTE *)(this + 28) == 0) + 3, -5, -20, 0, 41)[13] = 2;
      Full = UiWidget_CreateFull(
               (_DWORD *)this,
               0,
               this + 6336,
               32,
               300,
               0,
               0,
               1,
               23,
               0,
               (int)&unk_65A5CFA0,
               2,
               0,
               0,
               0,
               0);
      *(_DWORD *)(this + 6332) = Full;
      (*(void (__thiscall **)(_DWORD *, _DWORD))(*Full + 88))(Full, 0);
      break;
    case 0xA:
      UiWidget_CreateWithInput((_DWORD *)this, 4, *(_DWORD *)(this + 6264) - 14, -47, 0, 39)[13] = 2;
      if ( *(_BYTE *)(this + 16) )
      {
        v9 = UiWidget_CreateWithInput((_DWORD *)this, 1, *(_DWORD *)(this + 6264) - 26, -47, 0, 37);
        *(_DWORD *)(this + 6320) = v9;
        v9[13] = 2;
        v10 = UiWidget_CreateWithInput((_DWORD *)this, 2, *(_DWORD *)(this + 6264) - 26, -47, 0, 38);
        *(_DWORD *)(this + 6324) = v10;
        v10[13] = 2;
      }
      if ( strlen((const char *)(this + 6336)) > 1 )
      {
        UiWidget_CreateSlider((_DWORD *)this, -2, -11, 14, *(float *)(this + 6300), 0);
        UiWidget_CreateFull(
          (_DWORD *)this,
          0,
          this + 6336,
          32,
          300,
          0,
          0,
          1,
          10,
          -29,
          (int)&unk_65A5CEC8,
          2,
          0,
          0,
          0,
          0);
      }
      if ( *(_DWORD *)(this + 24) )
      {
        v16 = *(float *)(this + 6300);
        v15 = *(_DWORD *)(this + 24);
        if ( *(_BYTE *)(this + 20) )
LABEL_34:
          UiWidget_CreateSlider((_DWORD *)this, -2, -2, v15, v16, 0);
        else
LABEL_35:
          UiWidget_CreateSlider(
            (_DWORD *)this,
            -2 - *((_DWORD *)&unk_659C2198 + 23 * *(_DWORD *)(this + 8) + 13),
            -2 - *((_DWORD *)&unk_659C2198 + 23 * *(_DWORD *)(this + 8) + 11),
            v15,
            v16,
            0);
      }
      break;
    default:
      break;
  }
  CWindow_UpdateChildPositions(this);
  *(_BYTE *)(this + 6240) = 1;
  return 1;
}
// 6574A301: variable 'v2' is possibly undefined

//----- (6574A810) --------------------------------------------------------
_DWORD *__thiscall GroupWindow_UpdatePosition(_DWORD *this, int a2, int a3, int a4)
{
  int v4; // edx
  int v5; // eax
  int v6; // edi
  int v7; // esi

  if ( a4 )
  {
    *(this + 1568) = 0;
    *(this + 1569) = 0;
  }
  v4 = a2 - *(this + 1568);
  v5 = a3 - *(this + 1569);
  v6 = *(this + 1566);
  if ( v6 + v4 > *(int *)&Data )
    v4 = *(_DWORD *)&Data - v6;
  if ( v4 < 0 )
    v4 = 0;
  v7 = *(this + 1567);
  if ( v7 + v5 > *(int *)&dword_65A55604 )
    v5 = *(_DWORD *)&dword_65A55604 - v7;
  if ( v5 < 0 )
    v5 = 0;
  *(this + 1561) = v4;
  *(this + 1562) = v5;
  *(this + 1563) = v4 + v6;
  *(this + 1564) = v5 + v7;
  return CWindow_UpdateChildPositions((int)this);
}

//----- (6574AAD0) --------------------------------------------------------
_DWORD *__thiscall GroupWindow_SetBackgroundImage(int this, int a2, int a3, int a4)
{
  int v4; // edx
  int v6; // ecx
  int v7; // eax
  int v8; // eax
  _DWORD *v9; // eax

  v4 = a4;
  v6 = a3;
  if ( a2 != 999999999 )
  {
    v7 = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 3) + 4 * a2);
    *(_DWORD *)(this + 12) = v7;
    if ( v7 )
    {
      (*(void (__cdecl **)(int, int *, int *))(g_pILTClient + 344))(v7, &a3, &a4);
      v6 = a3;
      v4 = a4;
    }
  }
  v8 = *(_DWORD *)(this + 8);
  if ( (!v8 || (unsigned int)(v8 - 7) <= 1) && *(_BYTE *)(this + 17) )
    *(_BYTE *)(this + 17) = 0;
  v9 = (_DWORD *)((char *)&unk_659C2198 + 92 * v8);
  if ( *(_BYTE *)(this + 20) )
  {
    *(_DWORD *)(this + 6264) = v6;
    *(_DWORD *)(this + 6268) = v4;
  }
  else
  {
    *(_DWORD *)(this + 6264) = v6 + v9[13] + v9[15] - v9[4] - v9[2];
    *(_DWORD *)(this + 6268) = v4 + v9[11] + v9[19] - v9[5] - v9[3];
  }
  return GroupWindow_UpdatePosition((_DWORD *)this, *(_DWORD *)(this + 6244), *(_DWORD *)(this + 6248), 1);
}

//----- (6574ABA0) --------------------------------------------------------
_DWORD *__thiscall CWindow_CenterOnScreen(_DWORD *this)
{
  return GroupWindow_UpdatePosition(
           this,
           *(_DWORD *)&Data / 2 - *(this + 1566) / 2,
           *(_DWORD *)&dword_65A55604 / 2 - *(this + 1567) / 2,
           1);
}

//----- (6574ABE0) --------------------------------------------------------
_DWORD *__thiscall CWindow_ClampToScreen(int *this)
{
  int v1; // edx
  int v2; // edx

  v1 = *(this + 1563);
  if ( v1 > *(int *)&Data )
  {
    *(this + 1561) += *(_DWORD *)&Data - v1;
    *(this + 1563) = *(_DWORD *)&Data;
  }
  v2 = *(this + 1564);
  if ( v2 > *(int *)&dword_65A55604 )
  {
    *(this + 1562) += *(_DWORD *)&dword_65A55604 - v2;
    *(this + 1564) = *(_DWORD *)&dword_65A55604;
  }
  return GroupWindow_UpdatePosition(this, *(this + 1561), *(this + 1562), 1);
}

//----- (6574AC40) --------------------------------------------------------
void *__thiscall UiTextStyle_Ctor(void *this)
{
  *(_DWORD *)this = 0;
  *((_DWORD *)this + 1) = 11;
  strncpy_s((char *)this + 8, 0x10u, "FFFFFF00", 0xFFFFFFFF);
  *((_DWORD *)this + 8) = 1;
  *((_DWORD *)this + 10) = 1;
  *((_BYTE *)this + 24) = 0;
  *((_DWORD *)this + 9) = 0;
  *((_BYTE *)this + 44) = 0;
  *((_BYTE *)this + 60) = 0;
  *((_DWORD *)this + 17) = 0;
  *((_BYTE *)this + 72) = 0;
  *((_BYTE *)this + 88) = 0;
  *((_DWORD *)this + 24) = 0;
  *((_DWORD *)this + 25) = 0;
  *((_DWORD *)this + 26) = 0;
  return this;
}

//----- (6574C2A0) --------------------------------------------------------
_DWORD *__thiscall WindowMgr_Ctor(_DWORD *this, int a2, int a3)
{
  *this = a2;
  *(this + 1) = a3;
  *(this + 1002) = 0;
  memset(this + 2, 0, 0xFA0u);
  *(this + 1503) = 0;
  memset(this + 1003, 0, 0x7D0u);
  return this;
}

//----- (6574C2F0) --------------------------------------------------------
int __thiscall WindowMgr_DrawAll(_DWORD *this, int a2)
{
  unsigned int v4; // edi
  _DWORD *v5; // ebx
  unsigned int v6; // edi
  _DWORD *v7; // ebx

  if ( !a2 )
    return 0;
  v4 = 0;
  if ( *(this + 1503) )
  {
    v5 = this + 1003;
    do
    {
      (*(void (**)(void))(g_pILTClient + 180))();
      (*(void (**)(void))(g_pILTClient + 176))();
      (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*v5 + 12))(*v5, a2);
      ++v4;
      ++v5;
    }
    while ( v4 < *(this + 1503) );
  }
  v6 = 0;
  if ( *(this + 1002) )
  {
    v7 = this + 2;
    do
    {
      (*(void (**)(void))(g_pILTClient + 180))();
      (*(void (**)(void))(g_pILTClient + 176))();
      (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*v7 + 12))(*v7, a2);
      ++v6;
      ++v7;
    }
    while ( v6 < *(this + 1002) );
  }
  return 1;
}

//----- (6574C3B0) --------------------------------------------------------
_DWORD *__thiscall WindowMgr_FindWidgetAtPos(_DWORD *this, int a2, int a3)
{
  _DWORD *v3; // esi
  int v4; // ebx
  int v5; // edi
  int v6; // eax
  int v8; // [esp+18h] [ebp-10h]
  _DWORD *v9; // [esp+1Ch] [ebp-Ch]
  int v10; // [esp+20h] [ebp-8h]
  _DWORD **i; // [esp+24h] [ebp-4h]

  v9 = this;
  v10 = 0;
  if ( !*(this + 1002) )
    return 0;
  for ( i = (_DWORD **)(this + 2); ; ++i )
  {
    v3 = *i;
    if ( !*i || !v3[6] || !v3[7] )
      goto LABEL_11;
    v4 = v3[17];
    v8 = v3[18];
    v5 = v4 + (*(int (__thiscall **)(_DWORD *))(*v3 + 16))(v3);
    v6 = v8 + (*(int (__thiscall **)(_DWORD *))(*v3 + 20))(v3);
    if ( a2 >= v4 && a2 <= v5 && a3 >= v8 && a3 <= v6 )
      break;
    this = v9;
LABEL_11:
    if ( (unsigned int)++v10 >= *(this + 1002) )
      return 0;
  }
  return v3;
}

//----- (6574C490) --------------------------------------------------------
char __thiscall WidgetArray1000_Add(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  unsigned int v5; // esi
  unsigned int v6; // edx
  _DWORD **v7; // esi

  if ( !a2 )
    return 1;
  v5 = *(this + 1002);
  if ( v5 >= 0x3E8 )
    return 0;
  v6 = 0;
  if ( v5 )
  {
    v7 = (_DWORD **)(this + 2);
    while ( *v7 != a2 )
    {
      ++v6;
      ++v7;
      if ( v6 >= *(this + 1002) )
        goto LABEL_9;
    }
  }
  else
  {
LABEL_9:
    a2[21] = a3;
    a2[22] = a4;
    a2[17] = a2[21] + a2[19];
    a2[18] = a2[20] + a2[22];
    *(this + (*(this + 1002))++ + 2) = a2;
  }
  return 1;
}

//----- (6574C510) --------------------------------------------------------
char __thiscall WidgetArray500_Add(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  unsigned int v5; // esi
  unsigned int v6; // edx
  _DWORD **v7; // esi

  if ( !a2 )
    return 1;
  v5 = *(this + 1503);
  if ( v5 >= 0x1F4 )
    return 0;
  v6 = 0;
  if ( v5 )
  {
    v7 = (_DWORD **)(this + 1003);
    while ( *v7 != a2 )
    {
      ++v6;
      ++v7;
      if ( v6 >= *(this + 1503) )
        goto LABEL_9;
    }
  }
  else
  {
LABEL_9:
    a2[21] = a3;
    a2[22] = a4;
    a2[17] = a2[21] + a2[19];
    a2[18] = a2[20] + a2[22];
    *(this + (*(this + 1503))++ + 1003) = a2;
  }
  return 1;
}

//----- (6574C590) --------------------------------------------------------
char __thiscall WindowMgr_ContainsWidget(int *this, int a2)
{
  int v2; // edx
  unsigned int v5; // ebx
  int *v6; // esi
  int v7; // eax
  int v8; // ebx
  int *i; // esi
  int v10; // eax

  v2 = a2;
  if ( !a2 )
    return 0;
  v5 = 0;
  if ( *(this + 1002) )
  {
    v6 = this + 2;
    while ( 1 )
    {
      v7 = *v6;
      if ( *v6 == v2 )
        break;
      if ( v7 )
      {
        if ( (*(unsigned __int8 (__stdcall **)(int))(*(_DWORD *)v7 + 120))(v2) )
          return 1;
        v2 = a2;
      }
      ++v5;
      ++v6;
      if ( v5 >= *(this + 1002) )
        goto LABEL_10;
    }
  }
  else
  {
LABEL_10:
    v8 = 0;
    if ( !*(this + 1503) )
      return 0;
    for ( i = this + 1003; ; ++i )
    {
      v10 = *i;
      if ( *i == v2 )
        break;
      if ( v10 )
      {
        if ( (*(unsigned __int8 (__stdcall **)(int))(*(_DWORD *)v10 + 120))(v2) )
          return 1;
        v2 = a2;
      }
      if ( ++v8 >= (unsigned int)*(this + 1503) )
        return 0;
    }
  }
  return 1;
}

//----- (6574C630) --------------------------------------------------------
_DWORD *__thiscall WindowMgr_UpdateChildLayout(_DWORD *this)
{
  _DWORD *v1; // edi
  int v2; // edx
  int v3; // eax
  int v4; // ecx
  _DWORD *v5; // eax
  int v6; // ebx
  int v7; // edx
  int v8; // edx
  _DWORD *result; // eax
  _DWORD *v10; // edx
  _DWORD *v11; // esi
  _DWORD *v12; // esi
  int v13; // [esp+Ch] [ebp-24h]
  int v14; // [esp+10h] [ebp-20h]
  int v15; // [esp+14h] [ebp-1Ch]
  int v16; // [esp+18h] [ebp-18h]
  _DWORD *v17; // [esp+1Ch] [ebp-14h]
  _DWORD *v18; // [esp+20h] [ebp-10h]
  _DWORD *v19; // [esp+20h] [ebp-10h]
  int v20; // [esp+24h] [ebp-Ch]
  int v21; // [esp+28h] [ebp-8h]
  unsigned int v22; // [esp+2Ch] [ebp-4h]
  unsigned int v23; // [esp+2Ch] [ebp-4h]

  v1 = this;
  v2 = *this;
  v3 = *(_DWORD *)(*this + 8);
  v13 = *(_DWORD *)(*this + 6244);
  v14 = *(_DWORD *)(*this + 6248);
  v15 = *(_DWORD *)(*this + 6252);
  v16 = *(_DWORD *)(*this + 6256);
  v4 = 0;
  v5 = (_DWORD *)((char *)&unk_659C2198 + 92 * v3);
  v6 = 0;
  v17 = v1;
  v21 = 0;
  v20 = 0;
  if ( !*(_BYTE *)(v2 + 20) )
  {
    v7 = v5[13] - v5[2];
    LOBYTE(v6) = v7 <= 0;
    v6 = v7 & (v6 - 1);
    LOBYTE(v4) = v5[11] - v5[3] <= 0;
    v8 = v5[15] - v5[4];
    v21 = (v5[11] - v5[3]) & (v4 - 1);
    v4 = v8 <= 0 ? 0 : v8;
    v20 = (v5[19] - v5[5]) & ((v5[19] - v5[5] <= 0) - 1);
  }
  result = v1;
  v22 = 0;
  if ( v1[1503] )
  {
    v18 = v1 + 1003;
    v10 = v1;
    do
    {
      v11 = (_DWORD *)*v18;
      if ( *v18 )
      {
        switch ( v11[13] )
        {
          case 0:
            result = (_DWORD *)(v6 + v13);
            v10 = (_DWORD *)(v21 + v14);
            break;
          case 1:
            result = (_DWORD *)(v6 + v13);
            goto LABEL_11;
          case 2:
            result = (_DWORD *)(v15 - v4);
            v10 = (_DWORD *)(v21 + v14);
            break;
          case 3:
            result = (_DWORD *)(v15 - v4);
LABEL_11:
            v10 = (_DWORD *)(v16 - v20);
            break;
          default:
            break;
        }
        v11[17] = (char *)result + v11[21];
        v11[18] = (char *)v10 + v11[22];
        v1 = v17;
        v11[19] = result;
        v11[20] = v10;
      }
      ++v22;
      ++v18;
    }
    while ( v22 < v1[1503] );
  }
  else
  {
    v10 = v1;
  }
  v23 = 0;
  if ( v1[1002] )
  {
    v19 = v1 + 2;
    do
    {
      v12 = (_DWORD *)*v19;
      if ( *v19 )
      {
        switch ( v12[13] )
        {
          case 0:
            result = (_DWORD *)(v6 + v13);
            v10 = (_DWORD *)(v21 + v14);
            break;
          case 1:
            result = (_DWORD *)(v6 + v13);
            goto LABEL_24;
          case 2:
            result = (_DWORD *)(v15 - v4);
            v10 = (_DWORD *)(v21 + v14);
            break;
          case 3:
            result = (_DWORD *)(v15 - v4);
LABEL_24:
            v10 = (_DWORD *)(v16 - v20);
            break;
          default:
            break;
        }
        v12[17] = (char *)result + v12[21];
        v12[18] = (char *)v10 + v12[22];
        v1 = v17;
        v12[19] = result;
        v12[20] = v10;
      }
      ++v23;
      ++v19;
    }
    while ( v23 < v1[1002] );
  }
  return result;
}

//----- (6574CB30) --------------------------------------------------------
_DWORD *__thiscall PlayerModels_Ctor(_DWORD *this)
{
  *this = 0;
  *(this + 1) = 0;
  *(this + 2) = 0;
  *((_BYTE *)this + 12) = 0;
  *(this + 4) = 0;
  *(this + 5) = 0;
  *(this + 6) = 0;
  *(this + 7) = 0;
  *(this + 8) = 0;
  *(this + 9) = 0;
  *(this + 10) = 0;
  *(this + 11) = 0;
  *(this + 12) = 0;
  *(this + 13) = 0;
  *(this + 14) = 0;
  *(this + 15) = 0;
  *(this + 16) = 0;
  *(this + 17) = 0;
  *(this + 18) = 0;
  *(this + 19) = 0;
  *(this + 20) = 0;
  *(this + 21) = 0;
  return this;
}

//----- (6574CB80) --------------------------------------------------------
void __cdecl Operator_Delete_CB80(void *a1)
{
  operator delete(a1);
}

//----- (6574CBC0) --------------------------------------------------------
void __thiscall PlayerModels_ClearAll(_DWORD *this)
{
  unsigned int i; // esi
  int v3; // eax
  int v4; // eax

  *(this + 25) = 0;
  for ( i = 0; i < 0x19; ++i )
  {
    v3 = *(this + i);
    if ( v3 )
    {
      v4 = *(_DWORD *)(v3 + 2080);
      if ( v4 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v4) )
        *(_DWORD *)(*(this + i) + 2080) = 0;
      if ( *(_DWORD *)(*(this + i) + 2084) )
      {
        if ( !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(_DWORD *)(*(this + i) + 2084)) )
          *(_DWORD *)(*(this + i) + 2084) = 0;
      }
      Operator_Delete_CB80((void *)*(this + i));
      *(this + i) = 0;
    }
  }
}

//----- (6574CC50) --------------------------------------------------------
void __thiscall PlayerModels_RemoveAt(_DWORD *this, unsigned int a2)
{
  unsigned int v2; // esi
  int v4; // eax
  int v5; // eax

  v2 = a2;
  if ( a2 < 0x19 )
  {
    v4 = *(this + a2);
    if ( v4 )
    {
      v5 = *(_DWORD *)(v4 + 2080);
      if ( v5 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v5) )
        *(_DWORD *)(*(this + a2) + 2080) = 0;
      if ( *(_DWORD *)(*(this + a2) + 2084)
        && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(_DWORD *)(*(this + a2) + 2084)) )
      {
        *(_DWORD *)(*(this + a2) + 2084) = 0;
      }
      Operator_Delete_CB80((void *)*(this + a2));
    }
    if ( a2 < --*(this + 25) )
    {
      do
      {
        *(this + v2) = *(this + v2 + 1);
        ++v2;
      }
      while ( v2 < *(this + 25) );
    }
    *(this + v2) = 0;
  }
}

//----- (6574CCF0) --------------------------------------------------------
void __thiscall MsgId_7E_Handler(unsigned int *this, int a2)
{
  unsigned int v2; // edx
  unsigned int v3; // eax

  v2 = *(this + 25);
  v3 = 0;
  if ( v2 )
  {
    while ( *(_DWORD *)(*(this + v3) + 2064) != a2 )
    {
      if ( ++v3 >= v2 )
        return;
    }
    PlayerModels_RemoveAt(this, v3);
  }
}

//----- (6574CD90) --------------------------------------------------------
void __stdcall CharTooltip_CreateBorder(_DWORD *a1)
{
  int v1; // eax
  unsigned int v2; // ecx
  unsigned int v3; // ebx
  int v4; // eax
  int v5; // esi
  int v6; // edi
  unsigned int v7; // ebx
  unsigned int v8; // eax
  unsigned int v9; // eax
  int v10; // eax
  int v11; // [esp+8h] [ebp-7Ch]
  unsigned int v12; // [esp+Ch] [ebp-78h]
  unsigned int v13; // [esp+10h] [ebp-74h]
  unsigned int v14; // [esp+14h] [ebp-70h]
  unsigned int v15; // [esp+14h] [ebp-70h]
  unsigned int v16; // [esp+14h] [ebp-70h]
  int v17; // [esp+18h] [ebp-6Ch] BYREF
  int v18; // [esp+1Ch] [ebp-68h]
  int v19; // [esp+20h] [ebp-64h]
  int v20; // [esp+24h] [ebp-60h]
  _DWORD v21[2]; // [esp+28h] [ebp-5Ch] BYREF
  char v22[4]; // [esp+34h] [ebp-50h] BYREF
  const char *v23; // [esp+38h] [ebp-4Ch]
  const char *Buffer; // [esp+40h] [ebp-44h]
  const char *v25; // [esp+54h] [ebp-30h]
  const char *v26; // [esp+5Ch] [ebp-28h]
  const char *v27; // [esp+60h] [ebp-24h]
  const char *v28; // [esp+64h] [ebp-20h]
  int v29; // [esp+68h] [ebp-1Ch]
  int v30; // [esp+6Ch] [ebp-18h]
  int v31; // [esp+70h] [ebp-14h]
  int v32; // [esp+74h] [ebp-10h]

  if ( a1 )
  {
    if ( !a1[520] )
    {
      PlayerModels_Ctor(v21);
      v21[0] = (char *)a1 + 9;
      sprintf(v22, "%u", 0);
      v25 = "1";
      Buffer = "1";
      v28 = "1";
      v23 = "12";
      v21[1] = "FFFFFF00";
      v26 = "224";
      v27 = "300";
      v1 = (*(int (__cdecl **)(_DWORD *))(g_pILTClient + 304))(v21);
      a1[521] = v1;
      if ( v1 )
      {
        v2 = v30 - v29;
        v3 = v32 - v31;
        v14 = v30 - v29;
        a1[522] = 0;
        if ( v2 < 0x40 )
        {
          v4 = (int)(64 - v2) / 2;
          v14 = 64;
          v2 = 64;
          a1[522] = v4;
        }
        v13 = v2 + 18;
        v12 = v3 + 26;
        v5 = (*(int (__cdecl **)(unsigned int, unsigned int, int))(g_pILTClient + 312))(v2 + 19, v3 + 26, 1);
        a1[520] = v5;
        if ( v5 )
        {
          v6 = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 13) + 52);
          (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v6, 1.0);
          v11 = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 13) + 56);
          (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v11, 1.0);
          v17 = 0;
          v18 = 0;
          v19 = v13 - 18;
          v20 = v3;
          (*(void (__cdecl **)(int, int, int *, int, int))(g_pILTClient + 364))(v5, v11, &v17, 9, 11);
          v17 = 0;
          v19 = 9;
          v18 = 11;
          if ( v3 <= 0x58 )
          {
            v20 = v3 + 11;
            (*(void (__cdecl **)(int, int, int *, _DWORD, int))(g_pILTClient + 364))(v5, v6, &v17, 0, 11);
          }
          else
          {
            v20 = 99;
            (*(void (__cdecl **)(int, int, int *, _DWORD, int))(g_pILTClient + 364))(v5, v6, &v17, 0, 11);
            v20 = v18 + v3 - 88;
            (*(void (__cdecl **)(int, int, int *, _DWORD, int))(g_pILTClient + 364))(v5, v6, &v17, 0, 99);
          }
          v17 = 136;
          v19 = 145;
          v18 = 11;
          if ( v3 <= 0x58 )
          {
            v20 = v3 + 11;
            (*(void (__cdecl **)(int, int, int *, unsigned int, int))(g_pILTClient + 364))(v5, v6, &v17, v14 + 9, 11);
          }
          else
          {
            v20 = 99;
            (*(void (__cdecl **)(int, int, int *, unsigned int, int))(g_pILTClient + 364))(v5, v6, &v17, v14 + 9, 11);
            v20 = v18 + v3 - 88;
            (*(void (__cdecl **)(int, int, int *, unsigned int, int))(g_pILTClient + 364))(v5, v6, &v17, v14 + 9, 99);
          }
          v17 = 9;
          v18 = 0;
          v20 = 11;
          if ( v14 <= 0x7F )
          {
            v19 = v14 + 9;
            (*(void (__cdecl **)(int, int, int *, int, _DWORD))(g_pILTClient + 364))(v5, v6, &v17, 9, 0);
          }
          else
          {
            v19 = 136;
            (*(void (__cdecl **)(int, int, int *, int, _DWORD))(g_pILTClient + 364))(v5, v6, &v17, 9, 0);
            v19 = v17 + v14 - 127;
            (*(void (__cdecl **)(int, int, int *, int, _DWORD))(g_pILTClient + 364))(v5, v6, &v17, 136, 0);
          }
          v7 = v3 + 11;
          v8 = v14 - 21;
          v15 = v8;
          v17 = 9;
          v18 = 99;
          v20 = 114;
          if ( v8 <= 0x6A )
          {
            v10 = v8 + 9;
          }
          else
          {
            v19 = 115;
            (*(void (__cdecl **)(int, int, int *, int, unsigned int))(g_pILTClient + 364))(v5, v6, &v17, 9, v7);
            v9 = v15 - 106;
            v16 = v9;
            if ( v9 > 0x6A )
            {
              (*(void (__cdecl **)(int, int, int *, int, unsigned int))(g_pILTClient + 364))(v5, v6, &v17, 115, v7);
              v19 = v16 + v17 - 106;
              (*(void (__cdecl **)(int, int, int *, int, unsigned int))(g_pILTClient + 364))(v5, v6, &v17, 221, v7);
LABEL_22:
              v17 = 0;
              v19 = 9;
              v18 = 0;
              v20 = 11;
              (*(void (__cdecl **)(int, int, int *, _DWORD, _DWORD))(g_pILTClient + 364))(v5, v6, &v17, 0, 0);
              v17 = 136;
              v19 = 145;
              (*(void (__cdecl **)(int, int, int *, unsigned int, _DWORD))(g_pILTClient + 364))(
                v5,
                v6,
                &v17,
                v13 - 9,
                0);
              v17 = 0;
              v19 = 9;
              v18 = 99;
              v20 = 114;
              (*(void (__cdecl **)(int, int, int *, _DWORD, unsigned int))(g_pILTClient + 364))(
                v5,
                v6,
                &v17,
                0,
                v12 - 15);
              v17 = 115;
              v19 = 145;
              v18 = 99;
              v20 = 114;
              (*(void (__cdecl **)(int, int, int *, unsigned int, unsigned int))(g_pILTClient + 364))(
                v5,
                v6,
                &v17,
                v13 - 30,
                v12 - 15);
              a1[523] = 19 - v13;
              a1[524] = -v12;
              (*(void (__cdecl **)(int))(g_pILTClient + 272))(v5);
              return;
            }
            v10 = v17 + v9;
          }
          v19 = v10;
          (*(void (__cdecl **)(int, int, int *))(g_pILTClient + 364))(v5, v6, &v17);
          goto LABEL_22;
        }
      }
    }
  }
}

//----- (6574D250) --------------------------------------------------------
void __stdcall CharTooltip_CreateHealthBar(int a1)
{
  int v1; // eax
  int v2; // edi
  int v3; // ebx
  int v4; // eax
  double v5; // st7
  _DWORD v6[4]; // [esp+4h] [ebp-70h] BYREF
  int v7; // [esp+14h] [ebp-60h]
  _DWORD v8[2]; // [esp+18h] [ebp-5Ch] BYREF
  char v9[4]; // [esp+24h] [ebp-50h] BYREF
  void *v10; // [esp+28h] [ebp-4Ch]
  const char *Buffer; // [esp+30h] [ebp-44h]
  const char *v12; // [esp+44h] [ebp-30h]
  const char *v13; // [esp+4Ch] [ebp-28h]
  const char *v14; // [esp+50h] [ebp-24h]
  const char *v15; // [esp+54h] [ebp-20h]
  int v16; // [esp+58h] [ebp-1Ch]
  int v17; // [esp+5Ch] [ebp-18h]

  if ( a1 )
  {
    if ( !*(_DWORD *)(a1 + 2080) )
    {
      PlayerModels_Ctor(v8);
      v8[0] = a1 + 9;
      sprintf(v9, "%u", 1);
      v12 = "1";
      Buffer = "1";
      v15 = "1";
      v10 = &unk_659C25C0;
      v8[1] = "FFFFFF00";
      v13 = "224";
      v14 = "300";
      v1 = (*(int (__cdecl **)(_DWORD *))(g_pILTClient + 304))(v8);
      *(_DWORD *)(a1 + 2084) = v1;
      if ( v1 )
      {
        *(_DWORD *)(a1 + 2088) = (v16 - v17 + 100) / 2;
        v2 = (*(int (__cdecl **)(int, int, int))(g_pILTClient + 312))(101, 100, 1);
        *(_DWORD *)(a1 + 2080) = v2;
        if ( v2 )
        {
          v3 = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 13) + 32);
          (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v3, 1.0);
          v4 = *(unsigned __int16 *)(a1 + 2062);
          v7 = *(unsigned __int16 *)(a1 + 2060);
          v6[0] = 0;
          v6[1] = 70;
          v5 = (double)v7;
          v7 = v4;
          v6[2] = (int)(v5 / (double)v4 * 100.0);
          v6[3] = 80;
          (*(void (__cdecl **)(int, int, _DWORD *, _DWORD, unsigned int))(g_pILTClient + 372))(
            v2,
            v3,
            v6,
            0,
            0x80000000);
          *(_DWORD *)(a1 + 2092) = -81;
          *(_DWORD *)(a1 + 2096) = -100;
          (*(void (__cdecl **)(int))(g_pILTClient + 272))(v2);
        }
      }
    }
  }
}

//----- (6574D5F0) --------------------------------------------------------
void __thiscall PlayerMarkers_Render(_DWORD *this, int a2)
{
  _DWORD *v2; // ebx
  unsigned int v3; // edi
  int v4; // esi
  int v5; // ebx
  int v6; // edi
  unsigned int v7; // eax
  _DWORD *v8; // ecx
  int v9; // eax
  int v10; // edi
  int v11; // ebx
  double v12; // st6
  double v13; // st7
  float v14; // [esp+10h] [ebp-28h] BYREF
  float v15; // [esp+14h] [ebp-24h]
  float v16; // [esp+18h] [ebp-20h]
  int Element; // [esp+1Ch] [ebp-1Ch]
  float v18; // [esp+20h] [ebp-18h]
  int v19; // [esp+24h] [ebp-14h] BYREF
  int v20; // [esp+28h] [ebp-10h] BYREF
  unsigned int v21; // [esp+2Ch] [ebp-Ch]
  _DWORD *v22; // [esp+30h] [ebp-8h]
  float v23; // [esp+34h] [ebp-4h]

  v2 = this;
  v22 = this;
  if ( a2 )
  {
    v18 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
    v3 = 0;
    Element = IndexArray_GetElement(dword_65ABF6FC, *((_DWORD *)dword_65ABF700 + 1));
    v21 = 0;
    if ( v2[25] )
    {
      while ( 1 )
      {
        v4 = v2[v3];
        if ( !v4 )
          goto LABEL_34;
        if ( v18 > *(float *)v4 + 1.0 + *(float *)(v4 + 4) + 2.0 )
        {
          PlayerModels_RemoveAt(v2, v3--);
          goto LABEL_34;
        }
        (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 152))(
          g_pILTClient,
          *(_DWORD *)(v4 + 2064),
          &v14);
        v14 = v14 + *(float *)(v4 + 2068);
        v15 = *(float *)(v4 + 2072) + v15;
        v16 = *(float *)(v4 + 2076) + v16;
        if ( Terrain_WorldToGridCoords(*(float *)&Element, COERCE_FLOAT(&v14), &v20, &v19) )
          break;
LABEL_34:
        v21 = ++v3;
        if ( v3 >= v2[25] )
          return;
      }
      v5 = 0;
      v6 = 0;
      v7 = 0;
      v23 = 0.0;
      v8 = (_DWORD *)(v4 + 2100);
      while ( 1 )
      {
        if ( v7 < 9 )
        {
          v9 = v8[11];
          *v8 = v8[1];
        }
        else
        {
          if ( (int)abs32(v20 - *v8) > 10 )
            *v8 = v20;
          if ( (int)abs32(v19 - v8[10]) <= 10 )
            goto LABEL_15;
          v9 = v19;
        }
        v8[10] = v9;
LABEL_15:
        v6 += *v8;
        v5 += v8[10];
        v7 = LODWORD(v23) + 1;
        ++v8;
        v23 = *(float *)&v7;
        if ( v7 >= 0xA )
        {
          v10 = v6 / 10;
          v11 = v5 / 10;
          if ( !*(_DWORD *)(v4 + 2080) )
          {
            if ( *(_BYTE *)(v4 + 8) )
              CharTooltip_CreateHealthBar(v4);
            else
              CharTooltip_CreateBorder((_DWORD *)v4);
          }
          v12 = v18 - *(float *)v4;
          if ( v12 >= 1.0 )
          {
            if ( *(float *)(v4 + 4) + 1.0 >= v12 )
              v13 = 1.0;
            else
              v13 = 1.0 - (v18 - (*(float *)v4 + 1.0 + *(float *)(v4 + 4))) * 0.5;
            v23 = v13;
          }
          else
          {
            v23 = v12;
          }
          v23 = v23 * 0.800000011920929;
          if ( v23 >= 0.0 )
          {
            if ( v23 > 1.0 )
              v23 = 1.0;
          }
          else
          {
            v23 = 0.0;
          }
          (*(void (__cdecl **)(_DWORD, float))(g_pILTClient + 412))(*(_DWORD *)(v4 + 2080), COERCE_FLOAT(LODWORD(v23)));
          (*(void (__cdecl **)(int, _DWORD, _DWORD, int, int))(g_pILTClient + 364))(
            a2,
            *(_DWORD *)(v4 + 2080),
            0,
            v10 + *(_DWORD *)(v4 + 2092),
            v11 + *(_DWORD *)(v4 + 2096));
          if ( *(_BYTE *)(v4 + 8) )
          {
            (*(void (__cdecl **)(_DWORD, float))(g_pILTClient + 412))(
              *(_DWORD *)(v4 + 2084),
              COERCE_FLOAT(LODWORD(v23)));
            (*(void (__cdecl **)(int, _DWORD, _DWORD, int, int))(g_pILTClient + 364))(
              a2,
              *(_DWORD *)(v4 + 2084),
              0,
              v10 + *(_DWORD *)(v4 + 2092) + *(_DWORD *)(v4 + 2088),
              v11 + *(_DWORD *)(v4 + 2096));
          }
          else
          {
            (*(void (__cdecl **)(_DWORD, float))(g_pILTClient + 412))(
              *(_DWORD *)(v4 + 2084),
              COERCE_FLOAT(LODWORD(v23)));
            (*(void (__cdecl **)(int, _DWORD, _DWORD, int, int))(g_pILTClient + 364))(
              a2,
              *(_DWORD *)(v4 + 2084),
              0,
              *(_DWORD *)(v4 + 2092) + *(_DWORD *)(v4 + 2088) + v10 + 9,
              *(_DWORD *)(v4 + 2096) + v11 + 11);
          }
          v2 = v22;
          v3 = v21;
          goto LABEL_34;
        }
      }
    }
  }
}

//----- (6574DA90) --------------------------------------------------------
void __usercall ThirdPerson_UpdateCamera(int this@<ecx>, int a2@<edi>)
{
  int *v3; // ecx
  int v4; // ecx
  float *v5; // esi
  int v6; // ecx
  float v7; // ecx

  if ( !CameraState_IsActive(dword_65ABF724) )
  {
    if ( *(_BYTE *)(this + 132) )
    {
      if ( *(_DWORD *)(this + 128) )
        JUMPOUT(0x65757950);
    }
    else
    {
      v3 = *(int **)(this + 124);
      if ( v3 )
      {
        HUD_UpdateHealthBars(v3, a2, this);
        v4 = *(_DWORD *)(this + 124);
        v5 = *(float **)(this + 124);
        if ( *(_BYTE *)(v4 + 4) )
        {
          RenderState_SetDefaults((_DWORD *)v4);
          (*(void (__thiscall **)(_DWORD))(**(_DWORD **)v5 + 4))(*(_DWORD *)v5);
          v6 = *(_DWORD *)v5;
          if ( v5[80] <= 40.0 )
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v6 + 16))(v6, *((_DWORD *)v5 + 75));
          else
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v6 + 16))(v6, *((_DWORD *)v5 + 77));
          (*(void (__cdecl **)(_DWORD *, int))(**(_DWORD **)v5 + 104))((_DWORD *)v5 + 26, 1);
          v7 = *v5;
          if ( v5[80] <= 40.0 )
            (*(void (__thiscall **)(float, _DWORD))(*(_DWORD *)LODWORD(v7) + 16))(
              COERCE_FLOAT(LODWORD(v7)),
              *((_DWORD *)v5 + 74));
          else
            (*(void (__thiscall **)(float, _DWORD))(*(_DWORD *)LODWORD(v7) + 16))(
              COERCE_FLOAT(LODWORD(v7)),
              *((_DWORD *)v5 + 76));
          (*(void (__cdecl **)(_DWORD *, int))(**(_DWORD **)v5 + 104))((_DWORD *)v5 + 2, 1);
          (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)v5 + 16))(*(_DWORD *)v5, *((_DWORD *)v5 + 78));
          (*(void (__cdecl **)(_DWORD *, int))(**(_DWORD **)v5 + 104))((_DWORD *)v5 + 50, 1);
          __asm { jmp     edx }
        }
      }
    }
  }
}
// 6574DAB5: control flows out of bounds to 65757950

//----- (6574DAE0) --------------------------------------------------------
void __thiscall Crosshair_TryUpdate(int this)
{
  if ( *(_BYTE *)(this + 132) )
  {
    if ( *(_DWORD *)(this + 128) )
      JUMPOUT(0x65757950);
  }
}
// 6574DAF3: control flows out of bounds to 65757950

//----- (6574DB00) --------------------------------------------------------
void __stdcall Recoil_ApplyStatGroup2(float a1)
{
  float v1[15]; // [esp+0h] [ebp-3Ch] BYREF
  float v2; // [esp+44h] [ebp+8h]

  if ( a1 > 0.0 )
  {
    v2 = a1 / 70.0;
    if ( v2 > 1.0 )
      v2 = 1.0;
    qmemcpy(v1, StatGroup_GetPtr((_DWORD *)g_pEncVarMgr, 2u), sizeof(v1));
    v1[1] = v2 * 40.0 + v1[1];
    StatGroup_WriteGroup((_DWORD *)g_pEncVarMgr, 2u, v1);
  }
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6574DB90) --------------------------------------------------------
int __thiscall Weapon_GetActiveSlotCount(char *this)
{
  int result; // eax
  char *v2; // ecx
  int v3; // edx

  LOBYTE(result) = 0;
  v2 = this + 8;
  v3 = 2;
  do
  {
    if ( v2[1] && *v2 )
      LOBYTE(result) = result + 1;
    if ( v2[13] && v2[12] )
      LOBYTE(result) = result + 1;
    if ( v2[25] && v2[24] )
      LOBYTE(result) = result + 1;
    if ( v2[37] && v2[36] )
      LOBYTE(result) = result + 1;
    if ( v2[49] )
    {
      if ( v2[48] )
        LOBYTE(result) = result + 1;
    }
    v2 += 60;
    --v3;
  }
  while ( v3 );
  return result;
}

//----- (6574DC30) --------------------------------------------------------
BOOL __thiscall PlayerStats_IsCharacterCreation(void *this)
{
  return SharedMem_ReadDword_this(this, 0x3042u) == 1
      || SharedMem_ReadDword_this(this, 0x3041u) == 1
      || SharedMem_ReadDword_this(this, 0x3041u) == 2;
}

//----- (6574DEC0) --------------------------------------------------------
int __thiscall CrosshairMgr_Init(_DWORD *this)
{
  float *v2; // eax
  float *v3; // eax
  float *v5; // eax
  float *v6; // eax
  int v7; // esi
  const char *v8; // eax
  _DWORD v9[3]; // [esp+10h] [ebp-A8h] BYREF
  char Buffer[4]; // [esp+1Ch] [ebp-9Ch] BYREF
  const char *v11; // [esp+20h] [ebp-98h]
  const char *v12; // [esp+28h] [ebp-90h]
  const char *v13; // [esp+30h] [ebp-88h]
  const char *v14; // [esp+34h] [ebp-84h]
  const char *v15; // [esp+3Ch] [ebp-7Ch]
  const char *v16; // [esp+40h] [ebp-78h]
  const char *v17; // [esp+4Ch] [ebp-6Ch]
  int v18; // [esp+50h] [ebp-68h]
  int v19; // [esp+54h] [ebp-64h]
  char Destination[64]; // [esp+68h] [ebp-50h] BYREF
  int v21; // [esp+B4h] [ebp-4h]

  v2 = (float *)operator new(0x17Cu);
  v21 = 0;
  if ( v2 )
    v3 = CrosshairMgr_Ctor(v2);
  else
    v3 = 0;
  v21 = -1;
  *(this + 31) = v3;
  if ( !v3 )
    return 0;
  CrosshairMgr_LoadTextures(v3);
  v5 = (float *)operator new(0xECu);
  v21 = 1;
  v6 = v5 ? SoundTransform_Init(v5) : 0;
  v21 = -1;
  *(this + 32) = v6;
  if ( !v6 )
    return 0;
  ScopeHUD_Init(v6);
  v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4307);
  if ( v7 )
    v8 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
  else
    v8 = byte_659A8B98;
  strncpy_s(Destination, 0x40u, v8, 0xFFFFFFFF);
  if ( v7 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
  PlayerModels_Ctor(v9);
  v9[0] = Destination;
  sprintf(Buffer, "%u", 2);
  v15 = "1";
  v16 = "1";
  v12 = "1";
  v11 = "14";
  v9[1] = "B4D2FE00";
  v14 = "30";
  v13 = "01010100";
  v17 = "0";
  *(this + 44) = (*(int (__cdecl **)(_DWORD *))(g_pILTClient + 304))(v9);
  *(this + 45) = (v19 - v18) / -2;
  *(this + 46) = -150;
  return 1;
}

//----- (6574E090) --------------------------------------------------------
void __stdcall Item_ApplyConsumable(unsigned __int16 a1)
{
  int v1; // ebx
  float v2[15]; // [esp+4h] [ebp-3Ch] BYREF

  if ( (unsigned __int16)(a1 - 1) > 0xBBFu )
    v1 = 0;
  else
    v1 = g_ItemTemplateById[a1];
  if ( *(_BYTE *)(v1 + 8) == 3 && *(float *)(v1 + 136) > 0.0 )
  {
    qmemcpy(v2, StatGroup_GetPtr((_DWORD *)g_pEncVarMgr, 2u), sizeof(v2));
    v2[0] = (v2[13] + 1.0) * *(float *)(v1 + 136) + v2[0];
    StatGroup_WriteGroup((_DWORD *)g_pEncVarMgr, 2u, v2);
  }
}
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6574E120) --------------------------------------------------------
char __thiscall Handcuff_UpdateProgress(int this)
{
  int v2; // edi
  char v3; // bl
  int v4; // eax
  int v5; // eax
  double v6; // st7
  int v7; // eax
  float v9; // [esp+10h] [ebp-464h]
  float Float; // [esp+18h] [ebp-45Ch]
  _UNKNOWN **v11; // [esp+1Ch] [ebp-458h] BYREF
  _DWORD v12[266]; // [esp+28h] [ebp-44Ch] BYREF
  int v13; // [esp+450h] [ebp-24h]
  int v14; // [esp+454h] [ebp-20h]
  int v15; // [esp+470h] [ebp-4h]

  v2 = 0;
  v3 = 0;
  v4 = Msg2_75_Sub0_FindById((int **)dword_65ABF764, *(_DWORD *)(this + 96));
  if ( v4 )
  {
    v2 = *(_DWORD *)(v4 + 12);
    v3 = *(_BYTE *)(v4 + 725);
  }
  v9 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  Float = EncVarMgr_GetFloat((_DWORD *)g_pEncVarMgr, 8u);
  if ( *(float *)(this + 188) > (double)v9 || !v3 )
    v2 = 0;
  if ( v2 != *(_DWORD *)(this + 168) )
  {
    *(_DWORD *)(this + 168) = v2;
    if ( v2 )
    {
      if ( v2 != *(_DWORD *)(this + 172) )
        Float = 0.0;
    }
  }
  v5 = *(_DWORD *)(this + 168);
  if ( v5 )
  {
    *(_DWORD *)(this + 172) = v5;
    if ( v3 == 2 )
      v6 = g_pGameClientShell->recoilScale * 143.0;
    else
      v6 = g_pGameClientShell->recoilScale * 80.0;
    Float = v6 + Float;
    if ( Float >= 100.0 )
    {
      Packet_ID_B2_Ctor((char *)&v11);
      v15 = 0;
      v12[265] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
      v7 = *(_DWORD *)(this + 168);
      LOBYTE(v13) = 1;
      v14 = v7;
      LTClient_SendPacket_BuildIfNeeded(&v11, 2, 1, 3, 0);
      Float = 0.0;
      *(_DWORD *)(this + 168) = 0;
      v15 = -1;
      v11 = &vtbl_Packet_Unknown0;
      *(float *)(this + 188) = v9 + 3.0;
      BitStream_FreeOwnedBuffer((int)v12);
    }
  }
  return EncVarMgr_SetFloat((_DWORD *)g_pEncVarMgr, 8, Float);
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6574E340) --------------------------------------------------------
int __thiscall UIAssetArray_GetWithAlpha(int this, int __saved_registers)
{
  int v3; // esi

  if ( __saved_registers >= *(_DWORD *)(this + 8) )
    return 0;
  v3 = *(_DWORD *)(*(_DWORD *)(this + 4) + 4 * __saved_registers);
  (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v3, *(float *)(this + 60));
  return v3;
}

//----- (6574E380) --------------------------------------------------------
void __thiscall Movement_UpdateFatigue(float *this, int a2)
{
  unsigned int i; // eax
  double v5; // st7
  double v6; // st6
  double v7; // st6
  double v8; // st7
  double v9; // st5
  double v10; // st4
  double v11; // st6
  double v12; // rt2
  double v13; // st7
  double v14; // rtt
  double v15; // st5
  double v16; // st4
  int v17; // eax
  double v18; // rtt
  double v19; // st4
  double v20; // st6
  int v21; // ecx
  double v22; // st6
  double v23; // st3
  double v24; // rtt
  double v25; // rt0
  double v26; // rtt
  double v27; // rt0
  double v28; // st6
  double v29; // st7
  double v30; // rt1
  double v31; // st6
  double v32; // st7
  _DWORD v33[106]; // [esp+Ch] [ebp-1C4h] BYREF
  float v34; // [esp+1B4h] [ebp-1Ch]
  float v35; // [esp+1B8h] [ebp-18h]
  float v36; // [esp+1BCh] [ebp-14h]
  float v37; // [esp+1C0h] [ebp-10h]
  _BYTE v38[4]; // [esp+1C4h] [ebp-Ch] BYREF
  float v39; // [esp+1C8h] [ebp-8h]
  float v40; // [esp+1CCh] [ebp-4h]
  float v41; // [esp+1D8h] [ebp+8h]
  float v42; // [esp+1D8h] [ebp+8h]
  float v43; // [esp+1D8h] [ebp+8h]
  float v44; // [esp+1D8h] [ebp+8h]
  float v45; // [esp+1D8h] [ebp+8h]
  float v46; // [esp+1D8h] [ebp+8h]
  float v47; // [esp+1D8h] [ebp+8h]
  float v48; // [esp+1D8h] [ebp+8h]
  float v49; // [esp+1D8h] [ebp+8h]
  float v50; // [esp+1D8h] [ebp+8h]
  float v51; // [esp+1D8h] [ebp+8h]
  float v52; // [esp+1D8h] [ebp+8h]

  StatGroup_Read((_DWORD *)g_pEncVarMgr, 2, v38);
  v39 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  for ( i = 0; i < 0x35; ++i )
  {
    v33[2 * i] = 0;
    v33[2 * i + 1] = 0;
  }
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 1, v33);
  v40 = (double)v33[34] / 1000.0;
  v37 = v39 - *(this + 40);
  v5 = 0.0;
  v6 = 350.0;
  if ( v37 <= 0.039999999 )
    goto LABEL_35;
  if ( ++*(_DWORD *)(a2 + 8) >= 0xAu )
    *(_DWORD *)(a2 + 8) = 0;
  v7 = 0.0;
  v8 = 350.0;
  v9 = v40;
  v10 = -1.0;
  if ( v40 <= 0.0 )
  {
    v23 = (float)0.0;
    goto LABEL_28;
  }
  v34 = *((float *)dword_65ABF704 + 204);
  v35 = *((float *)dword_65ABF704 + 205);
  v36 = *((float *)dword_65ABF704 + 206);
  v41 = v35 * v35 + v34 * v34 + v36 * v36;
  v42 = sqrt(v41);
  v11 = v42;
  if ( v42 < 0.0 )
    v11 = (float)0.0;
  v43 = v11 / 400.0;
  if ( v43 >= 0.0 )
  {
    if ( v43 > 1.0 )
      v43 = 1.0;
    v14 = v11;
    v7 = 0.0;
    v13 = v14;
  }
  else
  {
    v12 = v11;
    v7 = 0.0;
    v13 = v12;
    v43 = 0.0;
  }
  if ( v13 > 350.0 )
    v40 = v40 + v40;
  v44 = v43 * v40;
  if ( v13 <= v7 )
    v44 = v44 - 0.5;
  if ( (v38[0] & 0x20) != 0 )
    v44 = v44 - 0.25;
  v10 = -1.0;
  if ( v44 >= -1.0 )
  {
    v8 = 350.0;
    v23 = v44;
    v9 = v40;
LABEL_28:
    if ( v23 <= v9 )
    {
      v45 = v23;
      v25 = v10;
      v16 = v9;
      v15 = v25;
    }
    else
    {
      v24 = v10;
      v16 = v9;
      v15 = v24;
      v45 = v16;
    }
    goto LABEL_22;
  }
  v45 = -1.0;
  v15 = -1.0;
  v16 = v40;
  v8 = 350.0;
LABEL_22:
  *(float *)(a2 + 4 * *(_DWORD *)(a2 + 8) + 12) = v45;
  v17 = a2 + 12;
  v18 = v16;
  v19 = v7;
  v20 = v18;
  v21 = 10;
  v46 = v19;
  do
  {
    v17 += 4;
    --v21;
    v46 = v46 + *(float *)(v17 - 4);
  }
  while ( v21 );
  v47 = v46 / 10.0;
  if ( v47 >= v15 )
  {
    if ( v47 <= v20 )
      v20 = v47;
    v15 = v20;
    v22 = v19;
  }
  else
  {
    v22 = v19;
  }
  v48 = v15;
  *(float *)(a2 + 52) = v48;
  *(this + 40) = v39;
  v26 = v22;
  v6 = v8;
  v5 = v26;
LABEL_35:
  v49 = 50.0;
  v39 = 80.0;
  if ( (v38[0] & 0x20) != 0 )
  {
    v49 = 65.0;
    v39 = 96.0;
  }
  v27 = v6;
  v28 = v5;
  v29 = v27;
  if ( v28 >= *(float *)a2 )
  {
    v32 = v28;
    goto LABEL_45;
  }
  v30 = v28;
  v31 = v29;
  v32 = v30;
  if ( v31 >= *(float *)a2 )
  {
    if ( *(float *)a2 <= 75.0 )
      goto LABEL_42;
  }
  else
  {
    *(float *)a2 = v31;
  }
  v49 = (*(float *)a2 / 75.0 + 1.0) * v49;
LABEL_42:
  v50 = *(float *)a2 - g_pGameClientShell->recoilScale * v49;
  *(float *)a2 = v50;
  if ( v50 < v32 )
    *(float *)a2 = v32;
LABEL_45:
  if ( v32 < *(float *)(a2 + 4) )
  {
    v51 = *(float *)(a2 + 4) - g_pGameClientShell->recoilScale * v39;
    *(float *)(a2 + 4) = v51;
    if ( v51 < v32 )
      *(float *)(a2 + 4) = v32;
  }
  v52 = *(float *)(a2 + 4) + *(float *)a2;
  if ( v52 > (double)*(float *)(a2 + 56) )
    *(float *)(a2 + 56) = g_pGameClientShell->recoilScale * 100.0 + *(float *)(a2 + 56);
  if ( *(float *)(a2 + 56) > (double)v52 )
    *(float *)(a2 + 56) = v52;
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6574E710) --------------------------------------------------------
void __thiscall CrosshairMgr_OnMessage(int *this, int *__saved_registers)
{
  int v3; // eax
  int v4; // edx
  int v5; // eax
  int v6; // edx
  int v7; // eax
  void (__thiscall *v8)(int *, char *, int); // edx
  unsigned __int8 v9; // al
  void (*v10)(char *const, const char *const, ...); // esi
  unsigned int v11; // eax
  char *v12; // edi
  int v14; // ecx
  int v15; // eax
  int v16; // kr14_4
  int v17; // esi
  int v18; // eax
  const char *v19; // eax
  int v20; // eax
  unsigned int v21; // eax
  int v22; // ecx
  int (__stdcall *v23)(int); // eax
  unsigned int v24; // eax
  int v25; // eax
  int v26; // esi
  const char *v27; // eax
  int v28; // eax
  const char *v29; // eax
  signed int v30; // esi
  char v31; // al
  char *v32; // ecx
  int v33; // ecx
  int v34; // eax
  int v35; // eax
  int v36; // eax
  const char *v37; // eax
  int v38; // eax
  int v39; // eax
  unsigned int v40; // eax
  int v41; // esi
  int v42; // edi
  unsigned int v43; // edx
  int v44; // eax
  int v45; // eax
  int v46; // ecx
  int v47; // esi
  int v48; // ecx
  int v49; // edx
  int v50; // eax
  int v51; // edi
  int v52; // edx
  int v53; // edi
  _DWORD *WindowById; // esi
  int (__cdecl **v55)(int, int, int); // esi
  int v56; // eax
  int v57; // eax
  int (__cdecl **v58)(int, int, int); // esi
  int v59; // eax
  int (__cdecl **v60)(int, int, int, int); // esi
  int v61; // eax
  int v62; // esi
  int (__cdecl **v63)(int, int, int); // esi
  int v64; // eax
  const char *v65; // eax
  int v66; // edx
  int v67; // [esp+0h] [ebp-490h]
  int v68; // [esp+14h] [ebp-47Ch] BYREF
  int v69; // [esp+18h] [ebp-478h] BYREF
  int v70; // [esp+1Ch] [ebp-474h]
  int v71; // [esp+20h] [ebp-470h] BYREF
  int v72; // [esp+24h] [ebp-46Ch]
  int flagHostile; // [esp+28h] [ebp-468h]
  int v74; // [esp+2Ch] [ebp-464h] BYREF
  int v75; // [esp+30h] [ebp-460h] BYREF
  int v76; // [esp+34h] [ebp-45Ch] BYREF
  int v77; // [esp+38h] [ebp-458h] BYREF
  int v78; // [esp+3Ch] [ebp-454h] BYREF
  int xhairFlags; // [esp+40h] [ebp-450h]
  int xhairTitleStrId; // [esp+44h] [ebp-44Ch]
  int line1W; // [esp+48h] [ebp-448h] BYREF
  unsigned int line2H; // [esp+4Ch] [ebp-444h] BYREF
  int line2W; // [esp+50h] [ebp-440h] BYREF
  int iconPadY; // [esp+54h] [ebp-43Ch]
  char *tmpStrPtr; // [esp+58h] [ebp-438h]
  int tmpStrId; // [esp+5Ch] [ebp-434h] BYREF
  int v87; // [esp+60h] [ebp-430h]
  _DWORD v88[7]; // [esp+64h] [ebp-42Ch] BYREF
  int v89[9]; // [esp+80h] [ebp-410h] BYREF
  char *ltmsgParamsAlt; // [esp+A4h] [ebp-3ECh] BYREF
  const char *v91; // [esp+A8h] [ebp-3E8h]
  char v92[4]; // [esp+B0h] [ebp-3E0h] BYREF
  const char *v93; // [esp+B4h] [ebp-3DCh]
  const char *v94; // [esp+BCh] [ebp-3D4h]
  const char *v95; // [esp+C4h] [ebp-3CCh]
  const char *v96; // [esp+C8h] [ebp-3C8h]
  const char *v97; // [esp+D0h] [ebp-3C0h]
  const char *v98; // [esp+D4h] [ebp-3BCh]
  const char *v99; // [esp+E0h] [ebp-3B0h]
  int v100; // [esp+E4h] [ebp-3ACh]
  int v101; // [esp+E8h] [ebp-3A8h]
  _BYTE v102[28]; // [esp+FCh] [ebp-394h] BYREF
  char *ltmsgParams; // [esp+118h] [ebp-378h] BYREF
  const char *ARGBHexByCode; // [esp+11Ch] [ebp-374h]
  char v105[4]; // [esp+124h] [ebp-36Ch] BYREF
  const char *v106; // [esp+128h] [ebp-368h]
  const char *v107; // [esp+130h] [ebp-360h]
  const char *v108; // [esp+138h] [ebp-358h]
  const char *v109; // [esp+13Ch] [ebp-354h]
  const char *v110; // [esp+144h] [ebp-34Ch]
  const char *v111; // [esp+148h] [ebp-348h]
  void *v112; // [esp+14Ch] [ebp-344h]
  void *v113; // [esp+150h] [ebp-340h]
  const char *v114; // [esp+154h] [ebp-33Ch]
  int v115; // [esp+158h] [ebp-338h]
  int v116; // [esp+15Ch] [ebp-334h]
  int v117; // [esp+160h] [ebp-330h]
  int v118; // [esp+164h] [ebp-32Ch]
  char v119[8]; // [esp+170h] [ebp-320h] BYREF
  char fmtBuf[8]; // [esp+270h] [ebp-220h] BYREF
  char v121; // [esp+36Fh] [ebp-121h] BYREF
  char xhairTextBuf; // [esp+370h] [ebp-120h] BYREF
  char v123; // [esp+371h] [ebp-11Fh]
  char v124; // [esp+372h] [ebp-11Eh]
  char v125[8]; // [esp+470h] [ebp-20h] BYREF
  int v126; // [esp+48Ch] [ebp-4h]

  if ( __saved_registers )
  {
    if ( *(this + 3) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(this + 3)) )
      *(this + 3) = 0;
    if ( *(this + 4) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(this + 4)) )
      *(this + 4) = 0;
    if ( *(this + 6) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(this + 6)) )
      *(this + 6) = 0;
    if ( *(this + 23) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(this + 23)) )
      *(this + 23) = 0;
    if ( *(this + 21) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(this + 21)) )
      *(this + 21) = 0;
    if ( *(this + 29) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(this + 29)) )
      *(this + 29) = 0;
    if ( *(this + 30) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(this + 30)) )
      *(this + 30) = 0;
    if ( *(this + 5) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(this + 5)) )
      *(this + 5) = 0;
    *(this + 2) = 0;
    *(this + 19) = 0;
    *(this + 20) = 0;
    *(this + 22) = 0;
    *(this + 24) = (*(int (__thiscall **)(int *))(*__saved_registers + 100))(__saved_registers);
    v3 = (*(int (__thiscall **)(int *, int))(*__saved_registers + 60))(__saved_registers, 32);
    xhairFlags = v3;
    if ( v3 )
    {
      if ( (v3 & 0x20000) != 0 )
      {
        *(this + 2) = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 13) + 48);
        goto LABEL_36;
      }
      if ( (v3 & 0x240000) != 0 )
      {
        v4 = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 13) + 40);
      }
      else
      {
        if ( (v3 & 0x100000) == 0 )
        {
          if ( (v3 & 0x880000) != 0 )
            *(this + 2) = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 13) + 44);
LABEL_36:
          if ( (v3 & 0x2000) != 0 )
            *(this + 20) = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 13) + 24);
          v5 = *(this + 2);
          *(this + 17) = 0;
          *(this + 18) = 0;
          if ( v5 )
          {
            (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v5, 1.0);
            (*(void (__cdecl **)(_DWORD, int *, int *))(g_pILTClient + 344))(*(this + 2), this + 17, this + 18);
            *(this + 17) = (unsigned int)*(this + 17) >> 1;
            *(this + 18) = (unsigned int)*(this + 18) >> 1;
          }
          v6 = *__saved_registers;
          HIBYTE(v87) = 0;
          if ( (xhairFlags & 0x200000) != 0 )
          {
            v7 = (*(int (__thiscall **)(int *, int))(v6 + 60))(__saved_registers, 32);
            v8 = *(void (__thiscall **)(int *, char *, int))(*__saved_registers + 76);
            xhairTitleStrId = v7;
            v8(__saved_registers, &xhairTextBuf, 256);
            v9 = (*(int (__thiscall **)(int *, int))(*__saved_registers + 60))(__saved_registers, 8);
            v10 = (void (*)(char *const, const char *const, ...))sprintf;
            HIBYTE(v87) = v9;
            if ( v9 )
            {
              sprintf(fmtBuf, " (%u s)", v9);
              v11 = strlen(fmtBuf) + 1;
              v12 = &v121;
              while ( *++v12 )
                ;
              qmemcpy(v12, fmtBuf, v11);
              v10 = (void (*)(char *const, const char *const, ...))sprintf;
            }
            v10(fmtBuf, " %s ", &xhairTextBuf);
            PlayerModels_Ctor(&ltmsgParamsAlt);
            ltmsgParamsAlt = fmtBuf;
            v10(v92, "%u", 2);
            v93 = "14";
            v91 = "FF000000";
            if ( !HIBYTE(v87) )
              v91 = "B4D2FE00";
            v97 = "1";
            v98 = "1";
            v94 = "1";
            v96 = "30";
            v95 = "01010100";
            v99 = "0";
            v14 = (*(int (__cdecl **)(char **))(g_pILTClient + 304))(&ltmsgParamsAlt);
            v15 = v101 - v100;
            *(this + 3) = v14;
            v16 = v15;
            v17 = 0;
            line1W = 0;
            tmpStrId = 0;
            (*(void (__cdecl **)(int, int *, int *))(g_pILTClient + 344))(v14, &line1W, &tmpStrId);
            line2W = 0;
            line2H = 0;
            if ( xhairTitleStrId )
            {
              v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, xhairTitleStrId + 14000);
              tmpStrPtr = (char *)v18;
              if ( v18 )
              {
                v19 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v18);
                sprintf(fmtBuf, " %s ", v19);
                ltmsgParamsAlt = fmtBuf;
                sprintf(v92, "%u", 28);
                v93 = (const char *)&unk_659C25C0;
                v91 = "c4d6f100";
                v20 = (*(int (__cdecl **)(char **))(g_pILTClient + 304))(&ltmsgParamsAlt);
                *(this + 4) = v20;
                (*(void (__cdecl **)(int, int *, unsigned int *))(g_pILTClient + 344))(v20, &line2W, &line2H);
                v17 = (v101 - v100) / 2;
                (*(void (__thiscall **)(int, char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, tmpStrPtr);
              }
            }
            v21 = line2H + *(this + 18);
            v22 = -(v21 + tmpStrId);
            *(this + 7) = v16 / -2;
            *(this + 8) = v22;
            *(this + 9) = -v17;
            *(this + 10) = -v21;
            return;
          }
          v23 = *(int (__stdcall **)(int))(v6 + 60);
          if ( (xhairFlags & 0x100000) != 0 )
          {
            v24 = v23(32);
            if ( v24 )
            {
              sub_659480D0(v125, v24);
              v25 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 13008, v125);
            }
            else
            {
              v25 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 13007);
            }
            v26 = v25;
            if ( v25 )
            {
              v27 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v25);
              strncpy_s(&xhairTextBuf, 0x100u, v27, 0xFFFFFFFF);
            }
            else
            {
              strncpy_s(&xhairTextBuf, 0x100u, byte_659A8B98, 0xFFFFFFFF);
            }
            goto LABEL_63;
          }
          v28 = v23(32);
          if ( v28 )
          {
            v26 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v28);
            if ( v26 )
              v29 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v26);
            else
              v29 = byte_659A8B98;
            strncpy_s(&xhairTextBuf, 0x100u, v29, 0xFFFFFFFF);
LABEL_63:
            if ( v26 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v26);
            goto LABEL_80;
          }
          (*(void (__thiscall **)(int *, char *, int))(*__saved_registers + 76))(__saved_registers, &xhairTextBuf, 256);
          if ( (xhairFlags & 0x800000) == 0 || xhairTextBuf != 95 )
            goto LABEL_80;
          if ( v123 == 84 )
          {
            if ( v124 == 42 )
            {
              *(this + 2) = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 13) + 48);
              HIBYTE(v87) = 1;
LABEL_70:
              v30 = 0;
              iconPadY = 0;
              if ( (int)strlen(&xhairTextBuf) > 0 )
              {
                tmpStrPtr = v119;
                do
                {
                  v31 = *(&xhairTextBuf + v30);
                  v119[v30] = 0;
                  if ( v31 == 42 )
                  {
                    ++iconPadY;
                  }
                  else if ( iconPadY == 1 )
                  {
                    v32 = tmpStrPtr;
                    *tmpStrPtr = v31;
                    tmpStrPtr = v32 + 1;
                  }
                  ++v30;
                }
                while ( v30 < (int)strlen(&xhairTextBuf) );
              }
              strncpy_s(&xhairTextBuf, 0x100u, v119, 0xFFFFFFFF);
LABEL_80:
              sprintf(fmtBuf, " %s ", &xhairTextBuf);
              PlayerModels_Ctor(&ltmsgParams);
              ltmsgParams = fmtBuf;
              sprintf(v105, "%u", 2);
              v106 = "14";
              flagHostile = xhairFlags & 0x800000;
              if ( (xhairFlags & 0x800000) == 0 || (ARGBHexByCode = "ffae0000", HIBYTE(v87)) )
                ARGBHexByCode = "B4D2FE00";
              v109 = "30";
              v108 = "01010100";
              v110 = "1";
              v111 = "1";
              v107 = "1";
              v114 = "0";
              v33 = (*(int (__cdecl **)(char **))(g_pILTClient + 304))(&ltmsgParams);
              v68 = 0;
              v76 = 0;
              v34 = v116 - v115;
              *(this + 3) = v33;
              line1W = v34 / 2;
              v70 = (v118 - v117) / 2;
              (*(void (__cdecl **)(int, int *, int *))(g_pILTClient + 344))(v33, &v68, &v76);
              v71 = 0;
              v77 = 0;
              v69 = 0;
              v78 = 0;
              v75 = 0;
              v74 = 0;
              line2W = 0;
              xhairTitleStrId = 0;
              line2H = 0;
              iconPadY = 0;
              tmpStrPtr = 0;
              if ( (*(unsigned __int8 (__thiscall **)(int *, int))(*__saved_registers + 60))(__saved_registers, 8) == 1 )
              {
                (*(void (__thiscall **)(int *, char *, int))(*__saved_registers + 76))(
                  __saved_registers,
                  &xhairTextBuf,
                  256);
                if ( !sub_65948020(&xhairTextBuf) )
                {
                  sprintf(fmtBuf, " %s ", &xhairTextBuf);
                  ltmsgParams = fmtBuf;
                  sprintf(v105, "%u", 28);
                  v106 = (const char *)&unk_659C25C0;
                  ARGBHexByCode = "c4d6f100";
                  v35 = (*(int (__cdecl **)(char **))(g_pILTClient + 304))(&ltmsgParams);
                  *(this + 4) = v35;
                  (*(void (__cdecl **)(int, int *, int *))(g_pILTClient + 344))(v35, &v71, &v77);
                  line2W = (v116 - v115) / 2;
                }
                (*(void (__thiscall **)(int *, char *, int))(*__saved_registers + 76))(
                  __saved_registers,
                  &xhairTextBuf,
                  256);
                if ( !sub_65948020(&xhairTextBuf) )
                {
                  sprintf(fmtBuf, " %s ", &xhairTextBuf);
                  ltmsgParams = fmtBuf;
                  sprintf(v105, "%u", 28);
                  v106 = "14";
                  ARGBHexByCode = "c4d6f100";
                  v36 = (*(int (__cdecl **)(char **))(g_pILTClient + 304))(&ltmsgParams);
                  *(this + 5) = v36;
                  (*(void (__cdecl **)(int, int *, int *))(g_pILTClient + 344))(v36, &v69, &v78);
                  xhairTitleStrId = (v116 - v115) / 2;
                }
                PacketData_InitFieldsExt((int)v89);
                (*(void (__thiscall **)(int *, int *, int))(*__saved_registers + 68))(__saved_registers, v89, 992);
                if ( (unsigned __int8)Weapon_GetActiveSlotCount((char *)v89) )
                {
                  iconPadY = 10;
                  GameInput_HandleMouseClick((int **)dword_65ABF6F4, this + 21, 0, v89, 0x14u, 0x14u);
                }
                else
                {
                  iconPadY = 0;
                }
                if ( (*(int (__thiscall **)(int *, int))(*__saved_registers + 60))(__saved_registers, 1) )
                  *(this + 22) = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 13) + 32);
                if ( (*(int (__thiscall **)(int *, int))(*__saved_registers + 60))(__saved_registers, 1) )
                {
                  tmpStrId = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 13013);
                  if ( tmpStrId )
                    v37 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                          g_pILTClient,
                                          tmpStrId);
                  else
                    v37 = byte_659A8B98;
                  sprintf(fmtBuf, v37, &xhairTextBuf);
                  if ( tmpStrId )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, tmpStrId);
                  ltmsgParams = fmtBuf;
                  sprintf(v105, "%u", 2);
                  v106 = "14";
                  ARGBHexByCode = "90D7FF00";
                  *(this + 23) = (*(int (__cdecl **)(char **))(g_pILTClient + 304))(&ltmsgParams);
                }
                if ( (*(int (__thiscall **)(int *, int))(*__saved_registers + 60))(__saved_registers, 1) )
                {
                  *(this + 19) = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 13) + 20);
                  *(this + 22) = 0;
                }
                (*(void (__thiscall **)(int *, char *, int))(*__saved_registers + 76))(
                  __saved_registers,
                  &xhairTextBuf,
                  256);
                LOBYTE(tmpStrId) = (*(int (__thiscall **)(int *, int))(*__saved_registers + 60))(__saved_registers, 8);
                if ( !sub_65948020(&xhairTextBuf) )
                {
                  sprintf(fmtBuf, "[%s]", &xhairTextBuf);
                  ltmsgParams = fmtBuf;
                  sprintf(v105, "%u", 2);
                  v106 = "14";
                  ARGBHexByCode = Color_GetARGBHexByCode(tmpStrId);
                  v38 = (*(int (__cdecl **)(char **))(g_pILTClient + 304))(&ltmsgParams);
                  *(this + 29) = v38;
                  (*(void (__cdecl **)(int, int *, int *))(g_pILTClient + 344))(v38, &v75, &v75);
                  line2H = v116 - v115;
                }
                (*(void (__thiscall **)(int *, char *, int))(*__saved_registers + 76))(
                  __saved_registers,
                  &xhairTextBuf,
                  256);
                LOBYTE(tmpStrId) = (*(int (__thiscall **)(int *, int))(*__saved_registers + 60))(__saved_registers, 8);
                if ( !sub_65948020(&xhairTextBuf) )
                {
                  sprintf(fmtBuf, "[%s]", &xhairTextBuf);
                  ltmsgParams = fmtBuf;
                  sprintf(v105, "%u", 28);
                  v106 = (const char *)&unk_659C25C0;
                  ARGBHexByCode = Color_GetARGBHexByCode(tmpStrId);
                  v39 = (*(int (__cdecl **)(char **))(g_pILTClient + 304))(&ltmsgParams);
                  *(this + 30) = v39;
                  (*(void (__cdecl **)(int, int *, int *))(g_pILTClient + 344))(v39, &v74, &v74);
                  tmpStrPtr = (char *)(v116 - v115);
                }
              }
              v40 = line2H;
              v41 = v78 + *(this + 18);
              tmpStrId = v41 + v77;
              v42 = v41 + v77;
              v72 = -(v76 + v41 + v77);
              *(this + 8) = v72;
              v43 = ((unsigned int)tmpStrPtr >> 1) - line2W;
              v44 = (v40 >> 1) - iconPadY;
              *(this + 11) = ((unsigned int)tmpStrPtr >> 1) - xhairTitleStrId;
              v45 = v44 - line1W;
              v46 = v45 + 2 * line1W;
              *(this + 12) = -v41;
              v47 = iconPadY;
              *(this + 13) = iconPadY + v46;
              v48 = v72;
              line2W = -v42;
              *(this + 10) = -v42;
              *(this + 9) = v43;
              v49 = v43 - (_DWORD)tmpStrPtr;
              *(this + 7) = v45;
              v50 = v45 - line2H;
              v51 = v70 + v48 - v47;
              *(this + 27) = v49;
              v52 = line2W;
              *(this + 26) = v48;
              *(this + 14) = v51;
              *(this + 25) = v50;
              *(this + 28) = v52;
              std::string::string(v102);
              v53 = 0;
              v126 = 0;
              WindowById = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 6u);
              UIDataSource_GetFormattedString(WindowById, 51, (int)v102);
              if ( !flagHostile || HIBYTE(v87) )
              {
                if ( (xhairFlags & 0x80000) != 0 )
                {
                  v58 = (int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64);
                  v59 = std::string::c_str(v102);
                  v57 = (*v58)(g_pILTClient, 6002, v59);
                }
                else
                {
                  if ( (xhairFlags & 0x400000) != 0 )
                  {
                    std::string::string(v88);
                    LOBYTE(v126) = 1;
                    UIDataSource_GetFormattedString(WindowById, 59, (int)v88);
                    v60 = (int (__cdecl **)(int, int, int, int))(*(_DWORD *)g_pILTClient + 64);
                    v67 = std::string::c_str(v88);
                    v61 = std::string::c_str(v102);
                    v62 = (*v60)(g_pILTClient, 6061, v61, v67);
                    v53 = 5;
                    v112 = &unk_659C37E0;
                    v113 = &unk_659C37DC;
                    v114 = "1";
                    LOBYTE(v126) = 0;
                    std::string::~string(v88);
LABEL_115:
                    if ( v62 )
                      v65 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                            g_pILTClient,
                                            v62);
                    else
                      v65 = byte_659A8B98;
                    strncpy_s(&xhairTextBuf, 0x100u, v65, 0xFFFFFFFF);
                    if ( v62 )
                      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v62);
                    sprintf(fmtBuf, " %s ", &xhairTextBuf);
                    ltmsgParams = fmtBuf;
                    sprintf(v105, "%u", 0);
                    v106 = (const char *)&unk_659C37D8;
                    ARGBHexByCode = "B4D2FE00";
                    *(this + 6) = (*(int (__cdecl **)(char **))(g_pILTClient + 304))(&ltmsgParams);
                    v112 = 0;
                    v113 = 0;
                    v66 = v53 + *(this + 18);
                    *(this + 15) = (v116 - v115) / -2;
                    *(this + 16) = v66;
                    v126 = -1;
                    std::string::~string(v102);
                    return;
                  }
                  v63 = (int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64);
                  v64 = std::string::c_str(v102);
                  v57 = (*v63)(g_pILTClient, 6000, v64);
                  v53 = 5;
                }
              }
              else
              {
                v55 = (int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64);
                v56 = std::string::c_str(v102);
                v57 = (*v55)(g_pILTClient, 6001, v56);
              }
              v62 = v57;
              goto LABEL_115;
            }
          }
          else if ( v123 == 42 )
          {
            goto LABEL_70;
          }
          *(this + 2) = 0;
          return;
        }
        v4 = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 13) + 36);
      }
      *(this + 2) = v4;
      goto LABEL_36;
    }
  }
}
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (6574F730) --------------------------------------------------------
void __thiscall HUD_RenderCrosshair(int *this)
{
  int v2; // esi
  int v3; // edi
  bool v4; // zf
  int v5; // eax
  int v6; // ecx
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // edx
  int v15; // eax
  int v16; // edx
  int v17; // eax
  int v18; // edx
  int v19; // eax
  int v20; // edx
  int v21; // ecx
  int v22; // edx
  int v23; // eax
  int v24; // ecx
  int v25; // eax
  int v26; // eax
  int v27; // eax
  int v28; // eax
  int v29; // eax
  int v30; // eax
  int v31; // ecx
  int v32; // eax
  int v33; // edx
  int v34; // eax
  int v35; // edx
  int v36; // eax
  int v37; // edx
  int v38; // eax
  int v39; // eax
  int v40; // edx
  int v41; // ecx
  int v42; // edi
  int v43; // ebx
  int v44; // edi
  int v45; // esi
  int v46; // edi
  double v47; // st7
  int v48; // [esp-4h] [ebp-70h]
  float v49[15]; // [esp+10h] [ebp-5Ch] BYREF
  int v50; // [esp+4Ch] [ebp-20h] BYREF
  int v51; // [esp+50h] [ebp-1Ch]
  int v52; // [esp+54h] [ebp-18h]
  int v53; // [esp+58h] [ebp-14h]
  unsigned int v54; // [esp+5Ch] [ebp-10h] BYREF
  int v55; // [esp+60h] [ebp-Ch]
  unsigned int v56; // [esp+64h] [ebp-8h] BYREF
  int v57; // [esp+68h] [ebp-4h]

  if ( !g_pILTClient )
    return;
  qmemcpy(v49, StatGroup_GetPtr((_DWORD *)g_pEncVarMgr, 2u), sizeof(v49));
  Movement_UpdateFatigue((float *)this, (int)v49);
  StatGroup_WriteGroup((_DWORD *)g_pEncVarMgr, 2u, v49);
  if ( !*((_BYTE *)this + 132) && (*this || !*(this + 1) || !*((_BYTE *)dword_65ABF714 + 280)) )
    return;
  v2 = *(_DWORD *)&Data >> 1;
  v3 = *(_DWORD *)&dword_65A55604 >> 1;
  v4 = *(this + 2) == 0;
  v55 = 0;
  if ( v4 || PlayerStats_IsCharacterCreation(dword_65ABF75C) )
  {
    if ( *((_DWORD *)dword_65ABF714 + 71) == 2 )
      goto LABEL_52;
    ThirdPerson_UpdateCamera((int)this, v3);
    v24 = *(this + 3);
    if ( v24 )
    {
      v55 = *(this + 8) + v3 - 20;
      (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
        dword_65ABF780,
        v24,
        0,
        v2 + *(this + 7),
        v55);
      v25 = *(this + 4);
      if ( v25 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v25,
          0,
          v2 + *(this + 9),
          *(this + 10) + v3 - 20);
      v26 = *(this + 5);
      if ( v26 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v26,
          0,
          v2 + *(this + 11),
          *(this + 12) + v3 - 20);
      v27 = *(this + 21);
      if ( v27 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v27,
          0,
          v2 + *(this + 13),
          *(this + 14) + v3 - 20);
      v28 = *(this + 29);
      if ( v28 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v28,
          0,
          v2 + *(this + 25),
          *(this + 26) + v3 - 20);
      v29 = *(this + 30);
      if ( v29 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v29,
          0,
          v2 + *(this + 27),
          *(this + 28) + v3 - 20);
    }
    v30 = *(this + 20);
    v57 = 30;
    if ( v30 )
    {
      v56 = 0;
      v54 = 0;
      (*(void (__cdecl **)(int, unsigned int *, unsigned int *))(g_pILTClient + 344))(v30, &v56, &v54);
      v31 = *(this + 8) - (v54 + 30);
      v57 = v54 + 30;
      (*(void (__cdecl **)(int, _DWORD, _DWORD, unsigned int, int))(g_pILTClient + 364))(
        dword_65ABF780,
        *(this + 20),
        0,
        v2 - (v56 >> 1),
        v3 + v31);
      v57 += 10;
    }
    v32 = *(this + 19);
    if ( v32 )
    {
      v56 = 0;
      v54 = 0;
      (*(void (__cdecl **)(int, unsigned int *, unsigned int *))(g_pILTClient + 344))(v32, &v56, &v54);
      v33 = *(this + 8) - (v57 + v54 + 10);
      v56 += 2;
      v57 += v54 + 10;
      (*(void (__cdecl **)(int, _DWORD, _DWORD, unsigned int, int))(g_pILTClient + 364))(
        dword_65ABF780,
        *(this + 19),
        0,
        v2 - (v56 >> 1),
        v3 + v33);
    }
    v34 = *(this + 22);
    if ( v34 )
    {
      v56 = 0;
      v54 = 0;
      (*(void (__cdecl **)(int, unsigned int *, unsigned int *))(g_pILTClient + 344))(v34, &v56, &v54);
      v35 = *(this + 8) - (v57 + v54 + 10);
      v56 += 2;
      v57 += v54 + 10;
      (*(void (__cdecl **)(int, _DWORD, _DWORD, unsigned int, int))(g_pILTClient + 364))(
        dword_65ABF780,
        *(this + 22),
        0,
        v2 - (v56 >> 1),
        v3 + v35);
    }
    v36 = *(this + 23);
    if ( !v36 )
      goto LABEL_52;
    v56 = 0;
    v54 = 0;
    (*(void (__cdecl **)(int, unsigned int *, unsigned int *))(g_pILTClient + 344))(v36, &v56, &v54);
    v37 = *(this + 8) - v54 - v57;
    v56 -= 14;
    v21 = v37 + v3 - 10;
    v22 = v2 - (v56 >> 1);
    v23 = *(this + 23);
  }
  else
  {
    v5 = *(this + 2);
    if ( v5 )
      (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
        dword_65ABF780,
        v5,
        0,
        v2 - *(this + 17),
        v3 - *(this + 18));
    v6 = *(this + 3);
    if ( v6 )
    {
      v55 = v3 + *(this + 8);
      (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
        dword_65ABF780,
        v6,
        0,
        v2 + *(this + 7),
        v55);
      v7 = *(this + 4);
      if ( v7 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v7,
          0,
          v2 + *(this + 9),
          v3 + *(this + 10));
      v8 = *(this + 5);
      if ( v8 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v8,
          0,
          v2 + *(this + 11),
          v3 + *(this + 12));
      v9 = *(this + 6);
      if ( v9 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v9,
          0,
          v2 + *(this + 15),
          v3 + *(this + 16));
      v10 = *(this + 21);
      if ( v10 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v10,
          0,
          v2 + *(this + 13),
          v3 + *(this + 14));
      v11 = *(this + 29);
      if ( v11 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v11,
          0,
          v2 + *(this + 25),
          v3 + *(this + 26));
      v12 = *(this + 30);
      if ( v12 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v12,
          0,
          v2 + *(this + 27),
          v3 + *(this + 28));
    }
    v13 = *(this + 20);
    v57 = 10;
    if ( v13 )
    {
      v54 = 0;
      v56 = 0;
      (*(void (__cdecl **)(int, unsigned int *, unsigned int *))(g_pILTClient + 344))(v13, &v54, &v56);
      v14 = *(this + 8) - (v56 + 10);
      v57 = v56 + 10;
      (*(void (__cdecl **)(int, _DWORD, _DWORD, unsigned int, int))(g_pILTClient + 364))(
        dword_65ABF780,
        *(this + 20),
        0,
        v2 - (v54 >> 1),
        v3 + v14);
      v57 += 10;
    }
    v15 = *(this + 19);
    if ( v15 )
    {
      v56 = 0;
      v54 = 0;
      (*(void (__cdecl **)(int, unsigned int *, unsigned int *))(g_pILTClient + 344))(v15, &v56, &v54);
      v16 = *(this + 8) - (v57 + v54 + 10);
      v56 += 2;
      v57 += v54 + 10;
      (*(void (__cdecl **)(int, _DWORD, _DWORD, unsigned int, int))(g_pILTClient + 364))(
        dword_65ABF780,
        *(this + 19),
        0,
        v2 - (v56 >> 1),
        v3 + v16);
    }
    v17 = *(this + 23);
    if ( v17 )
    {
      v56 = 0;
      v54 = 0;
      (*(void (__cdecl **)(int, unsigned int *, unsigned int *))(g_pILTClient + 344))(v17, &v56, &v54);
      v18 = *(this + 8) - (v57 + v54 + 10);
      v56 -= 14;
      v57 += v54 + 10;
      (*(void (__cdecl **)(int, _DWORD, _DWORD, unsigned int, int))(g_pILTClient + 364))(
        dword_65ABF780,
        *(this + 23),
        0,
        v2 - (v56 >> 1),
        v3 + v18);
    }
    v19 = *(this + 22);
    if ( !v19 )
      goto LABEL_52;
    v56 = 0;
    v54 = 0;
    (*(void (__cdecl **)(int, unsigned int *, unsigned int *))(g_pILTClient + 344))(v19, &v56, &v54);
    v20 = *(this + 8) - v54 - v57;
    v56 -= 4;
    v21 = v20 + v3 - 10;
    v22 = v2 - (v56 >> 1);
    v23 = *(this + 22);
  }
  (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(dword_65ABF780, v23, 0, v22, v21);
LABEL_52:
  if ( *(this + 24) )
  {
    v38 = Msg2_75_Sub0_FindById((int **)dword_65ABF764, *(this + 24));
    if ( v38 )
    {
      if ( *(_BYTE *)(v38 + 725) )
      {
        v39 = UIAssetArray_GetWithAlpha((int)dword_65ABF760, 45);
        v54 = v39;
        if ( v39 )
        {
          v55 += 3;
          v48 = *(this + 7) + v2 - 20;
          v50 = 0;
          v51 = 379;
          v52 = 12;
          v53 = 395;
          (*(void (__cdecl **)(int, int, int *, int, int))(g_pILTClient + 364))(dword_65ABF780, v39, &v50, v48, v55);
          (*(void (__cdecl **)(int, unsigned int, int *, int, int))(g_pILTClient + 364))(
            dword_65ABF780,
            v54,
            &v50,
            v2 - *(this + 7) + 5,
            v55);
        }
      }
    }
  }
  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  if ( !(*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(56)
    || CameraState_IsActive(dword_65ABF724)
    || *((_DWORD *)dword_65ABF714 + 71) == 2 )
  {
    *(this + 42) = 0;
  }
  else
  {
    Handcuff_UpdateProgress((int)this);
    if ( *(this + 42) )
    {
      v40 = *(this + 44);
      v41 = v3 + *(this + 46);
      v55 = v41;
      if ( v40 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v40,
          0,
          v2 + *(this + 45),
          v41);
      v50 = 0;
      v51 = 0;
      v52 = 0;
      v53 = 0;
      v42 = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 8) + 44);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v42, 1.0);
      v43 = v55;
      v50 = v2 - 75;
      v51 = v55 + 20;
      v52 = v2 - 75 + 150;
      v53 = v55 + 35;
      (*(void (__cdecl **)(int, int, int *, _DWORD, unsigned int))(g_pILTClient + 372))(
        dword_65ABF780,
        v42,
        &v50,
        0,
        0x80000000);
      v44 = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 8) + 48);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v44, 1.0);
      v45 = v2 - 74;
      v43 += 21;
      v50 = v45;
      v51 = v43;
      v52 = v45 + 148;
      v53 = v43 + 13;
      (*(void (__cdecl **)(int, int, int *, _DWORD, unsigned int))(g_pILTClient + 372))(
        dword_65ABF780,
        v44,
        &v50,
        0,
        0x80000000);
      v46 = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 8) + 52);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v46, 1.0);
      v50 = v45;
      v51 = v43;
      v47 = EncVarMgr_GetFloat((_DWORD *)g_pEncVarMgr, 8u) * -148.0 * 0.009999999776482582;
      v52 = v50 - (int)v47;
      v53 = v51 + 13;
      if ( v52 > v50 )
        (*(void (__cdecl **)(int, int, int *, _DWORD, unsigned int))(g_pILTClient + 372))(
          dword_65ABF780,
          v46,
          &v50,
          0,
          0x80000000);
    }
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65ABF780: using guessed type int dword_65ABF780;

//----- (65750080) --------------------------------------------------------
int __thiscall RenderState_SetDefaults(_DWORD *this)
{
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 20))(*this, 1);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 32))(*this, 2);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 40))(*this, 0);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 44))(*this, 1);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 24))(*this, 1);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 36))(*this, 0);
  return (*(int (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 28))(*this, 3);
}

//----- (657501B0) --------------------------------------------------------
float *__cdecl Texture_CalcUVCoords(float *a1, int a2, float a3, float a4, float a5, float a6)
{
  int v6; // eax
  int (__thiscall *v7)(int, int, unsigned int *, unsigned int *); // eax
  double v8; // st7
  double v9; // st6
  double v11; // st4
  double v12; // st3
  double v13; // rtt
  unsigned int v14; // [esp+0h] [ebp-10h] BYREF
  unsigned int v15; // [esp+4h] [ebp-Ch] BYREF
  float v16; // [esp+8h] [ebp-8h]
  float v17; // [esp+Ch] [ebp-4h]
  float v18; // [esp+28h] [ebp+18h]
  float v19; // [esp+28h] [ebp+18h]
  float v20; // [esp+28h] [ebp+18h]
  float v21; // [esp+2Ch] [ebp+1Ch]

  v6 = *(_DWORD *)dword_65A5AA50;
  v17 = 0.0;
  v7 = *(int (__thiscall **)(int, int, unsigned int *, unsigned int *))(v6 + 24);
  v16 = 0.0;
  v8 = a5;
  if ( !v7(dword_65A5AA50, a2, &v15, &v14) )
  {
    v17 = 0.5 / (double)v15;
    v16 = 0.5 / (double)v14;
    if ( v8 < 0.0 )
      v17 = -v17;
    if ( a6 < 0.0 )
      v16 = -v16;
  }
  v9 = v17;
  v18 = v17 + a3;
  v11 = v18;
  a1[4] = v18;
  v12 = v16;
  v19 = v16 + a4;
  a1[5] = v19;
  v13 = v19;
  v20 = v8 + a3 - v9;
  a1[10] = v20;
  a1[16] = v20;
  a1[11] = v13;
  v21 = a4 + a6 - v12;
  a1[17] = v21;
  a1[23] = v21;
  a1[22] = v11;
  return a1;
}
// 65A5AA50: using guessed type int dword_65A5AA50;

//----- (657502A0) --------------------------------------------------------
float *__thiscall FloatArray_SetZero(float *this)
{
  *(this + 2) = 0.0;
  return this;
}

//----- (657502D0) --------------------------------------------------------
int __thiscall CrosshairMgr_LoadTextures(float *this)
{
  int inserted; // eax
  int v3; // ecx

  (*(void (__thiscall **)(_DWORD, int *, int))(**(_DWORD **)this + 244))(*(_DWORD *)this, (int *)this + 2, -1);
  (*(void (__stdcall **)(int *, int))(**(_DWORD **)this + 244))((int *)this + 26, -1);
  (*(void (__thiscall **)(_DWORD, int *, int))(**(_DWORD **)this + 244))(*(_DWORD *)this, (int *)this + 50, -1);
  *((_DWORD *)this + 74) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\XHAIR1.dtx");
  *((_DWORD *)this + 75) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\XHAIR2.dtx");
  *((_DWORD *)this + 78) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\XHAIRdot.dtx");
  *((_DWORD *)this + 76) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\XHAIR1red.dtx");
  inserted = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\XHAIR2red.dtx");
  v3 = *((_DWORD *)this + 74);
  *((_DWORD *)this + 77) = inserted;
  Texture_CalcUVCoords(this + 2, v3, 0.0, 0.0, 1.0, 1.0);
  Texture_CalcUVCoords(this + 26, *((_DWORD *)this + 75), 0.0, 0.0, 1.0, 1.0);
  Texture_CalcUVCoords(this + 50, *((_DWORD *)this + 78), 0.0, 0.0, 1.0, 1.0);
  return 1;
}

//----- (65750430) --------------------------------------------------------
float *__thiscall CrosshairMgr_Ctor(float *this)
{
  _DWORD *v2; // esi
  int i; // ebx

  v2 = this + 2;
  for ( i = 2; i >= 0; --i )
  {
    Array_IterateWithCallback((int)v2, 24, 4, (int (__thiscall *)(int))FloatArray_SetZero);
    memset(v2, 0, 0x60u);
    v2 += 24;
  }
  *(_DWORD *)this = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 196))(g_pILTClient);
  *(this + 74) = 0.0;
  *(this + 75) = 0.0;
  *(this + 76) = 0.0;
  *(this + 77) = 0.0;
  *(this + 78) = 0.0;
  *(this + 80) = -1.0;
  *((_BYTE *)this + 316) = 0;
  *((_BYTE *)this + 4) = 1;
  return this;
}

//----- (657504C0) --------------------------------------------------------
void __usercall HUD_UpdateHealthBars(int *a1@<ecx>, int a2@<edi>, int a3@<esi>)
{
  void *v4; // esi
  double v5; // st7
  double v6; // st7
  double v7; // st7
  bool v8; // c0
  bool v9; // c3
  int v10; // ecx
  double v11; // st7
  double v12; // st7
  double v13; // st6
  double v14; // st5
  double v15; // st4
  double v16; // st7
  double v17; // st7
  double v18; // st7
  double v19; // st7
  int v20; // ecx
  double v21; // st7
  double v22; // st6
  double v23; // rt2
  double v24; // st6
  double v25; // st7
  double v26; // st6
  float v27; // [esp+0h] [ebp-5Ch]
  float v28; // [esp+4h] [ebp-58h]
  float v30[15]; // [esp+1Ch] [ebp-40h] BYREF
  float v31; // [esp+58h] [ebp-4h]

  if ( *((_BYTE *)a1 + 4) )
  {
    qmemcpy(v30, StatGroup_GetPtr((_DWORD *)g_pEncVarMgr, 2u), sizeof(v30));
    if ( byte_65A533E0 )
      *((_BYTE *)a1 + 316) = 0;
    v4 = dword_65ABF75C;
    if ( (SharedMem_ReadDword_this(dword_65ABF75C, 0x3042u) == 1
       || SharedMem_ReadDword_this(v4, 0x3041u) == 1
       || SharedMem_ReadDword_this(v4, 0x3041u) == 2)
      && !StatGroup_CheckLevelThreshold()
      && !SharedMem_ReadBool_std(0x3044u) )
    {
      v5 = v30[14];
      *((_BYTE *)a1 + 316) = 0;
      if ( *((float *)a1 + 80) != v5 || byte_65A533E0 )
      {
        *((float *)a1 + 80) = v5;
        v31 = v5 / 70.0;
        v6 = v31;
        *((float *)a1 + 81) = v31;
        if ( v6 <= 1.1 )
        {
          v8 = v6 > 0.0;
          v9 = 0.0 == v6;
          v7 = 0.0;
          if ( v8 || v9 )
            goto LABEL_15;
        }
        else
        {
          v7 = 1.1;
        }
        *((float *)a1 + 81) = v7;
LABEL_15:
        v10 = *a1;
        v31 = (double)*(int *)&dword_65A55604 / 768.0;
        v11 = v31;
        *((float *)a1 + 82) = v31;
        v31 = v11 * 76.0;
        v12 = v31;
        *((float *)a1 + 83) = v31;
        *((float *)a1 + 84) = v12 * 0.5;
        a1[85] = *(_DWORD *)&Data / 2;
        v31 = (float)a1[85];
        v13 = v31;
        a1[86] = *(_DWORD *)&dword_65A55604 / 2;
        *((float *)a1 + 87) = v13;
        v31 = (float)a1[86];
        v14 = v31;
        *((float *)a1 + 88) = v31;
        a1[89] = a1[83];
        *((float *)a1 + 90) = v13 - *((float *)a1 + 84);
        *((float *)a1 + 91) = v14 - *((float *)a1 + 84);
        v31 = *((float *)a1 + 82) * 60.0;
        v15 = v31;
        *((float *)a1 + 92) = v31;
        *((float *)a1 + 93) = v13 - v15 * 0.5;
        *((float *)a1 + 94) = v14 - 0.5 * *((float *)a1 + 92);
        (*(void (__thiscall **)(int, int *, int))(*(_DWORD *)v10 + 276))(v10, a1 + 2, 255);
        (*(void (__stdcall **)(int *, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)*a1 + 192))(
          a1 + 2,
          *((float *)a1 + 90),
          *((float *)a1 + 91),
          *((float *)a1 + 89),
          *((float *)a1 + 89));
        (*(void (__stdcall **)(int *, int))(*(_DWORD *)*a1 + 276))(a1 + 26, 255);
        (*(void (__stdcall **)(int *, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)*a1 + 192))(
          a1 + 26,
          *((float *)a1 + 93),
          *((float *)a1 + 94),
          *((float *)a1 + 92),
          *((float *)a1 + 92));
        (*(void (__stdcall **)(int *, _DWORD))(*(_DWORD *)*a1 + 276))(a1 + 50, 0);
        byte_65A533E0 = 0;
      }
    }
    else
    {
      if ( !*((_BYTE *)a1 + 316) )
      {
        (*(void (__stdcall **)(int *, _DWORD, int, int))(*(_DWORD *)*a1 + 276))(a1 + 2, 0, a2, a3);
        (*(void (__stdcall **)(int *, _DWORD))(*(_DWORD *)*a1 + 276))(a1 + 26, 0);
        v31 = (double)*(int *)&dword_65A55604 / 768.0;
        v16 = v31;
        *((float *)a1 + 82) = v31;
        v31 = v16 * 76.0;
        v17 = v31;
        *((float *)a1 + 83) = v31;
        *((float *)a1 + 84) = v17 * 0.5;
        v18 = v30[14] / 70.0;
        a1[85] = *(_DWORD *)&Data / 2;
        a1[86] = *(_DWORD *)&dword_65A55604 / 2;
        v31 = v18;
        v19 = v31;
        *((float *)a1 + 81) = v31;
        if ( v19 <= 1.1 )
        {
          if ( v19 < 0.0 )
            *((float *)a1 + 81) = 0.0;
        }
        else
        {
          *((float *)a1 + 81) = 1.1;
        }
        (*(void (__cdecl **)(int *, int))(*(_DWORD *)*a1 + 276))(a1 + 50, 255);
        v20 = *a1;
        v31 = (float)a1[85];
        v21 = v31;
        *((float *)a1 + 87) = v31;
        v31 = (float)a1[86];
        v22 = v31;
        *((float *)a1 + 88) = v31;
        a1[89] = a1[83];
        v23 = v22;
        v31 = v21 - *((float *)a1 + 84);
        v24 = v31;
        *((float *)a1 + 90) = v31;
        v25 = v24;
        v31 = v23 - *((float *)a1 + 84);
        v26 = v31;
        *((float *)a1 + 91) = v31;
        v28 = v26;
        v27 = v25;
        (*(void (__thiscall **)(int, int *, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v20 + 192))(
          v20,
          a1 + 50,
          LODWORD(v27),
          LODWORD(v28),
          *((float *)a1 + 89),
          *((float *)a1 + 89));
        if ( v30[14] <= 0.0 )
          *((_BYTE *)a1 + 316) = 1;
      }
      *((float *)a1 + 80) = -1.0;
    }
  }
}
// 657504C0: could not find valid save-restore pair for edi
// 657504C0: could not find valid save-restore pair for esi
// 65A533E0: using guessed type char byte_65A533E0;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65750940) --------------------------------------------------------
int __thiscall Sprite_SetDefaults1(_DWORD *this)
{
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 20))(*this, 1);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 32))(*this, 2);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 40))(*this, 0);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 44))(*this, 1);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 24))(*this, 1);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 36))(*this, 0);
  return (*(int (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 28))(*this, 3);
}

//----- (657509A0) --------------------------------------------------------
int __thiscall PlayerStats_DrawAll(_DWORD *this)
{
  Sprite_SetDefaults1(this);
  (*(void (__thiscall **)(_DWORD))(*(_DWORD *)*this + 4))(*this);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 16))(*this, *(this + 97));
  (*(void (__stdcall **)(_DWORD *, int))(*(_DWORD *)*this + 104))(this + 1, 1);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 16))(*this, *(this + 98));
  (*(void (__stdcall **)(_DWORD *, int))(*(_DWORD *)*this + 104))(this + 25, 1);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 16))(*this, *(this + 99));
  (*(void (__stdcall **)(_DWORD *, int))(*(_DWORD *)*this + 104))(this + 49, 1);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 16))(*this, *(this + 100));
  (*(void (__stdcall **)(_DWORD *, int))(*(_DWORD *)*this + 104))(this + 73, 1);
  return (*(int (__thiscall **)(_DWORD))(*(_DWORD *)*this + 8))(*this);
}

//----- (65750A40) --------------------------------------------------------
char __thiscall PlayerStats_ResetXP(int this)
{
  *(float *)(this + 428) = 0.0;
  *(_DWORD *)(this + 432) = 0;
  *(_DWORD *)(this + 436) = 0;
  *(_BYTE *)(this + 440) = 0;
  return EncVarMgr_SetFloat((_DWORD *)g_pEncVarMgr, 7, 0.0);
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65750C90) --------------------------------------------------------
void __cdecl __noreturn Vector60_ThrowLengthError2(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65750E00) --------------------------------------------------------
void *__cdecl Vector60_AllocateChecked(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x3C )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(60 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65750F10) --------------------------------------------------------
int __thiscall Scanner_LoadTextures(float *this)
{
  int inserted; // eax
  int v3; // ecx

  (*(void (__thiscall **)(_DWORD, _DWORD *, int))(**(_DWORD **)this + 244))(*(_DWORD *)this, (_DWORD *)this + 1, -1);
  (*(void (__stdcall **)(_DWORD *, int))(**(_DWORD **)this + 244))((_DWORD *)this + 25, -1);
  (*(void (__thiscall **)(_DWORD, _DWORD *, int))(**(_DWORD **)this + 244))(*(_DWORD *)this, (_DWORD *)this + 49, -1);
  (*(void (__thiscall **)(_DWORD, _DWORD *, int))(**(_DWORD **)this + 244))(*(_DWORD *)this, (_DWORD *)this + 73, -1);
  *((_DWORD *)this + 97) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\scanner1.dtx");
  *((_DWORD *)this + 98) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\scanner2.dtx");
  *((_DWORD *)this + 99) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\scanner3.dtx");
  inserted = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\scanner4.dtx");
  v3 = *((_DWORD *)this + 97);
  *((_DWORD *)this + 100) = inserted;
  Texture_CalcUVCoords(this + 1, v3, 0.0, 0.0, 1.0, 1.0);
  Texture_CalcUVCoords(this + 25, *((_DWORD *)this + 98), 0.0, 0.0, 1.0, 1.0);
  Texture_CalcUVCoords(this + 49, *((_DWORD *)this + 99), 0.0, 0.0, 1.0, 1.0);
  Texture_CalcUVCoords(this + 73, *((_DWORD *)this + 100), 0.0, 0.0, 1.0, 1.0);
  return 1;
}

//----- (657511F0) --------------------------------------------------------
float *__thiscall Scanner_Init(float *this)
{
  float *v2; // edi
  int i; // ebx

  v2 = this + 1;
  for ( i = 3; i >= 0; --i )
  {
    Array_IterateWithCallback((int)v2, 24, 4, (int (__thiscall *)(int))FloatArray_SetZero);
    memset(v2, 0, 0x60u);
    v2 += 24;
  }
  *(this + 101) = 0.0;
  *(this + 102) = 0.0;
  *(this + 103) = 0.0;
  *(this + 104) = 1.0;
  *(_DWORD *)this = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 196))(g_pILTClient);
  *(this + 100) = 0.0;
  *(this + 99) = 0.0;
  *(this + 98) = 0.0;
  *(this + 97) = 0.0;
  *(this + 101) = 0.0;
  *(this + 102) = 0.0;
  *(this + 103) = 0.0;
  *(this + 104) = 1.0;
  *(this + 108) = 0.0;
  *(this + 109) = 0.0;
  *(this + 105) = 0.0;
  *((_BYTE *)this + 440) = 0;
  *(this + 106) = 500.0;
  *(this + 107) = 0.0;
  return this;
}

//----- (65751330) --------------------------------------------------------
char *__thiscall StringArray36_WriteToBitStream(_DWORD *this, char *a2)
{
  int v2; // esi
  char *v3; // edi
  char *result; // eax
  int v5; // ebx
  int v6; // esi
  char *v7; // edx
  int v8; // esi
  char *v9; // [esp-Ch] [ebp-20h]
  char v11[4]; // [esp+Ch] [ebp-8h] BYREF
  int v12; // [esp+10h] [ebp-4h] BYREF

  v2 = (*(this + 2) - *(this + 1)) / 36;
  v12 = v2;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v12, (int)v11, 4u);
    v9 = v11;
  }
  else
  {
    v9 = (char *)&v12;
  }
  v3 = a2;
  result = BitStream_WriteBitsCompressed(a2, v9, 0x20u, 1);
  if ( v2 )
  {
    v5 = 0;
    v12 = v2;
    do
    {
      v6 = *(this + 1);
      v7 = *(char **)(v6 + v5);
      v8 = v5 + v6;
      a2 = v7;
      if ( Net_IsBigEndian() )
      {
        ByteSwapCopy((int)&a2, (int)v11, 4u);
        BitStream_WriteBitsCompressed(v3, v11, 0x20u, 1);
      }
      else
      {
        BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
      }
      result = (char *)(*(int (__thiscall **)(int, int, int, char *))(*(_DWORD *)g_LTClient + 52))(
                         g_LTClient,
                         v8 + 4,
                         2048,
                         v3);
      v5 += 36;
      --v12;
    }
    while ( v12 );
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65751460) --------------------------------------------------------
char *__thiscall BytePairArray_WriteToBitStream(_DWORD *this, char *a2)
{
  _DWORD *v2; // esi
  int v3; // ebx
  char *result; // eax
  int v5; // edi
  int v6; // esi
  int v8; // [esp+Ch] [ebp-8h]
  char v9[4]; // [esp+10h] [ebp-4h] BYREF

  v2 = this;
  v3 = (*(this + 2) - *(this + 1)) >> 1;
  v9[0] = v3;
  result = BitStream_WriteBitsCompressed(a2, v9, 8u, 1);
  if ( (_BYTE)v3 )
  {
    v5 = 0;
    v8 = (unsigned __int8)v3;
    while ( 1 )
    {
      v6 = v2[1];
      v9[0] = *(_BYTE *)(v6 + v5);
      BitStream_WriteBitsCompressed(a2, v9, 8u, 1);
      result = *(_BYTE *)(v5 + v6 + 1) ? BitStream_WriteBit1(a2) : BitStream_WriteBit0(a2);
      v5 += 2;
      if ( !--v8 )
        break;
      v2 = this;
    }
  }
  return result;
}

//----- (657514E0) --------------------------------------------------------
char *__thiscall CharacterData_WriteToBitStream(char *this, unsigned int *bs)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *(_DWORD *)this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = (char *)bs;
  BitStream_WriteBitsCompressed((char *)bs, v5, 0x20u, 1);
  LOBYTE(bs) = *(this + 4);
  BitStream_WriteBitsCompressed(v3, (char *)&bs, 8u, 1);
  bs = (unsigned int *)*((_DWORD *)this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&bs, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&bs, 0x20u, 1);
  }
  bs = (unsigned int *)*((_DWORD *)this + 3);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&bs, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&bs, 0x20u, 1);
  }
  BytePairArray_WriteToBitStream((_DWORD *)this + 4, v3);
  if ( *(this + 96) )
    BitStream_WriteBit1(v3);
  else
    BitStream_WriteBit0(v3);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 32, 2048, v3);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 88, 2048, v3);
  ItemsAddedPayload_Write((ItemsAddedPayload *)(this + 52), (unsigned int *)v3);
  if ( *(this + 97) )
    BitStream_WriteBit1(v3);
  else
    BitStream_WriteBit0(v3);
  bs = (unsigned int *)*((_DWORD *)this + 165);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&bs, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&bs, 0x20u, 1);
  }
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 98, 2048, v3);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 122, 2048, v3);
  StringArray36_WriteToBitStream((_DWORD *)this + 159, v3);
  if ( *(this + 652) )
    BitStream_WriteBit1(v3);
  else
    BitStream_WriteBit0(v3);
  if ( *(this + 653) )
    BitStream_WriteBit1(v3);
  else
    BitStream_WriteBit0(v3);
  bs = (unsigned int *)*((_DWORD *)this + 164);
  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(v3, (char *)&bs, 0x20u, 1);
  ByteSwapCopy((int)&bs, (int)v6, 4u);
  return BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65751710) --------------------------------------------------------
char *__thiscall CharArray_WriteToStream(_DWORD *this, char *a2)
{
  int v3; // ebx
  char *result; // eax
  int v5; // edi
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 664;
  v6[0] = (char)(*((_BYTE *)this + 8) - *((_BYTE *)this + 4)) / -104;
  result = BitStream_WriteBitsCompressed(a2, v6, 8u, 1);
  if ( (_BYTE)v3 )
  {
    v5 = 0;
    v3 = (unsigned __int8)v3;
    do
    {
      result = CharacterData_WriteToBitStream((char *)(v5 + *(this + 1)), (unsigned int *)a2);
      v5 += 664;
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (65751780) --------------------------------------------------------
int __thiscall ItemData_WriteToBitStream(unsigned __int16 *this, char *a2)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *(_DWORD *)this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  if ( *((_BYTE *)this + 4) )
    BitStream_WriteBit1(v3);
  else
    BitStream_WriteBit0(v3);
  v7 = *(this + 3);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&v7, 0x10u, 1);
  }
  ItemStructA_write(this + 4, v3);
  return (*(int (__thiscall **)(int, unsigned __int16 *, int, char *))(*(_DWORD *)g_LTClient + 52))(
           g_LTClient,
           this + 20,
           2048,
           v3);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65751840) --------------------------------------------------------
char *__thiscall ItemArray_WriteToStream(char **this, char *a2)
{
  char *v3; // edi
  int v4; // ebx
  char *result; // eax
  int v6; // esi
  char *v7; // [esp-Ch] [ebp-24h]
  char v9[4]; // [esp+10h] [ebp-8h] BYREF
  int v10; // [esp+14h] [ebp-4h] BYREF

  v10 = (int)*(this + 1);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v10, (int)v9, 4u);
    v7 = v9;
  }
  else
  {
    v7 = (char *)&v10;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v7, 0x20u, 1);
  a2 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v9, 4u);
    BitStream_WriteBitsCompressed(v3, v9, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  v4 = (*(this + 4) - *(this + 3)) / 60;
  a2 = (char *)v4;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v9, 4u);
    result = BitStream_WriteBitsCompressed(v3, v9, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  if ( v4 )
  {
    v6 = 0;
    do
    {
      result = (char *)ItemData_WriteToBitStream((unsigned __int16 *)&(*(this + 3))[v6], v3);
      v6 += 60;
      --v4;
    }
    while ( v4 );
  }
  return result;
}

//----- (65751940) --------------------------------------------------------
char __thiscall Packet_ID_B0_write(int this)
{
  char result; // al
  char v3[4]; // [esp+4h] [ebp-4h] BYREF

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    v3[0] = *(_BYTE *)(this + 1076);
    BitStream_WriteBitsCompressed((char *)(this + 12), v3, 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 1:
      case 2:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
        result = 1;
        break;
      case 3:
        BitStream_WriteBool((char *)this, *(_BYTE *)(this + 1084));
        result = 1;
        break;
      case 4:
        CharArray_WriteToStream((_DWORD *)(this + 1088), (char *)(this + 12));
        result = 1;
        break;
      case 5:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
        if ( *(_DWORD *)(this + 1080) )
          goto LABEL_11;
        BitStream_Write2048((char *)this, this + 1104);
        result = 1;
        break;
      case 6:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
        BitStream_Write2048((char *)this, this + 1104);
        result = 1;
        break;
      case 8:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1124));
        result = 1;
        break;
      case 9:
        ItemArray_WriteToStream((char **)(this + 1128), (char *)(this + 12));
        goto LABEL_11;
      default:
LABEL_11:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (65751CF0) --------------------------------------------------------
char **__thiscall ItemArray_MoveRange(char **this, char **a2, char *a3, char *a4)
{
  char *v4; // edx
  char *v5; // ebx
  char **v6; // esi
  char *v7; // eax
  char *v8; // esi
  char *v9; // edi

  v4 = a4;
  v5 = a3;
  v6 = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v7 = *(this + 2);
    if ( a4 != v7 )
    {
      do
      {
        v8 = v4;
        v9 = v5;
        v4 += 60;
        v5 += 60;
        qmemcpy(v9, v8, 0x3Cu);
      }
      while ( v4 != v7 );
      v6 = a2;
    }
    *(this + 2) = v5;
  }
  return v6;
}

//----- (65751EC0) --------------------------------------------------------
void __thiscall CharSlot_FreeBuffers(int this)
{
  void *v2; // eax
  int v3; // eax

  v2 = *(void **)(this + 640);
  if ( v2 )
    operator delete(v2);
  *(_DWORD *)(this + 640) = 0;
  *(_DWORD *)(this + 644) = 0;
  *(_DWORD *)(this + 648) = 0;
  v3 = *(_DWORD *)(this + 60);
  if ( v3 )
  {
    ItemVector_DestroyRange(v3, *(_DWORD *)(this + 64));
    operator delete(*(void **)(this + 60));
  }
  *(_DWORD *)(this + 60) = 0;
  *(_DWORD *)(this + 64) = 0;
  *(_DWORD *)(this + 68) = 0;
  if ( *(_DWORD *)(this + 20) )
    operator delete(*(void **)(this + 20));
  *(_DWORD *)(this + 20) = 0;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = 0;
}

//----- (65752050) --------------------------------------------------------
int __thiscall CharSlots_DestroyAll(int *this)
{
  int v2; // esi
  int result; // eax
  int i; // edi

  v2 = *(this + 1);
  result = 0;
  if ( v2 )
  {
    for ( i = *(this + 2); v2 != i; v2 += 664 )
      CharSlot_FreeBuffers(v2);
    operator delete((void *)*(this + 1));
    result = 0;
  }
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  return result;
}

//----- (657520D0) --------------------------------------------------------
char *__thiscall Packet_ID_B0_Ctor(char *this)
{
  char *v3; // [esp+10h] [ebp-10h] BYREF

  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -80;
  *(_DWORD *)this = &off_659C3940;
  *((_DWORD *)this + 273) = 0;
  *((_DWORD *)this + 274) = 0;
  *((_DWORD *)this + 275) = 0;
  *((_DWORD *)this + 285) = 0;
  *((_DWORD *)this + 286) = 0;
  *((_DWORD *)this + 287) = 0;
  *((_DWORD *)this + 282) = 0;
  *((_DWORD *)this + 283) = 0;
  ItemArray_MoveRange((char **)this + 284, &v3, *((char **)this + 285), *((char **)this + 286));
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *((_DWORD *)this + 270) = 0;
  *(this + 1084) = 0;
  *((_DWORD *)this + 281) = 1;
  *(this + 1104) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659C3940: using guessed type void *off_659C3940;

//----- (65752330) --------------------------------------------------------
void __cdecl __noreturn Vector36_ThrowLengthError(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657523F0) --------------------------------------------------------
void __cdecl __noreturn Vector2_ThrowLengthError(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657526B0) --------------------------------------------------------
void *__cdecl Vector36_AllocateChecked(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x24 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(36 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65752710) --------------------------------------------------------
void *__cdecl Vector2_AllocateChecked(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 2 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(2 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65752D60) --------------------------------------------------------
char *__cdecl Array36_CopyElements(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax
  char *v5; // esi
  char *v6; // edi

  v3 = a1;
  result = a3;
  while ( v3 != a2 )
  {
    v5 = v3;
    v6 = result;
    v3 += 36;
    result += 36;
    qmemcpy(v6, v5, 0x24u);
  }
  return result;
}

//----- (65752D90) --------------------------------------------------------
_WORD *__cdecl Array2_CopyForward(_WORD *a1, _WORD *a2, _WORD *a3)
{
  _WORD *v3; // ecx
  _WORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; ++result )
    *result = *v3++;
  return result;
}

//----- (65752DC0) --------------------------------------------------------
char *__cdecl Array36_FillWithValue(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 36 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0x24u);
  }
  return result;
}

//----- (65752E20) --------------------------------------------------------
char *__cdecl Array60_FillWithValue(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 60 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0x3Cu);
  }
  return result;
}

//----- (65752F90) --------------------------------------------------------
char *__cdecl Array36_CopyForward(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 36 )
  {
    if ( result )
      qmemcpy(result, v3, 0x24u);
    v3 += 36;
  }
  return result;
}

//----- (65753040) --------------------------------------------------------
_WORD *__cdecl Array2_CopyForwardChecked(_WORD *a1, _WORD *a2, _WORD *a3)
{
  _WORD *v3; // ecx
  _WORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; ++result )
  {
    if ( result )
      *result = *v3;
    ++v3;
  }
  return result;
}

//----- (65753070) --------------------------------------------------------
char *__cdecl Array60_CopyForward(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 60 )
  {
    if ( result )
      qmemcpy(result, v3, 0x3Cu);
    v3 += 60;
  }
  return result;
}

//----- (657530B0) --------------------------------------------------------
int __thiscall Packet_ID_AF_read_structA(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  return (*(int (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
           g_LTClient,
           this + 4,
           2048,
           a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65753130) --------------------------------------------------------
int __thiscall ItemStructAWithName_read(char *this, unsigned int *a2)
{
  unsigned int v3; // eax

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *(this + 4) = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 6);
  ItemStructA_Read(this + 8, a2);
  return (*(int (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
           g_LTClient,
           this + 40,
           2048,
           a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657531A0) --------------------------------------------------------
_DWORD *__thiscall StringMap_GetBeginIter(_DWORD *this, _DWORD *a2)
{
  *a2 = *(this + 1);
  return a2;
}

//----- (65753210) --------------------------------------------------------
char __thiscall Array36_AllocateN(_DWORD *this, unsigned int a2)
{
  char *Checked; // eax
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( !a2 )
    return 0;
  if ( a2 > 0x71C71C7 )
    Vector36_ThrowLengthError(v5, v6);
  Checked = (char *)Vector36_AllocateChecked(a2);
  *(this + 1) = Checked;
  *(this + 2) = Checked;
  *(this + 3) = &Checked[36 * a2];
  return 1;
}
// 65753239: variable 'v5' is possibly undefined
// 65753239: variable 'v6' is possibly undefined

//----- (65753270) --------------------------------------------------------
char __thiscall Vector2_InitWithCapacity(_DWORD *this, unsigned int a2)
{
  char *Checked; // eax
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( !a2 )
    return 0;
  if ( a2 > 0x7FFFFFFF )
    Vector2_ThrowLengthError(v5, v6);
  Checked = (char *)Vector2_AllocateChecked(a2);
  *(this + 1) = Checked;
  *(this + 2) = Checked;
  *(this + 3) = &Checked[2 * a2];
  return 1;
}
// 65753299: variable 'v5' is possibly undefined
// 65753299: variable 'v6' is possibly undefined

//----- (657532E0) --------------------------------------------------------
_DWORD *__stdcall StringMapNode_Alloc(int a1, int a2, int a3, _DWORD *a4, char a5)
{
  _DWORD *result; // eax

  result = operator new(0x14u);
  if ( result )
  {
    *result = a1;
    result[1] = a2;
    result[2] = a3;
    result[3] = *a4;
    *((_BYTE *)result + 16) = a5;
    *((_BYTE *)result + 17) = 0;
  }
  return result;
}

//----- (65753380) --------------------------------------------------------
_DWORD *StringMapNode_AllocEmpty()
{
  _DWORD *result; // eax

  result = operator new(0x14u);
  if ( result )
    *result = 0;
  if ( result != (_DWORD *)-4 )
    result[1] = 0;
  if ( result != (_DWORD *)-8 )
    result[2] = 0;
  *((_BYTE *)result + 16) = 1;
  *((_BYTE *)result + 17) = 0;
  return result;
}

//----- (657533D0) --------------------------------------------------------
void *__thiscall StringMap_CopySubtree(_DWORD *this, int *a2, int a3)
{
  bool v4; // zf
  void *v5; // eax
  _DWORD *v6; // eax
  int v7; // edi
  int *v9; // [esp-8h] [ebp-30h]
  _DWORD v10[5]; // [esp+0h] [ebp-28h] BYREF
  void *v11; // [esp+14h] [ebp-14h]
  _DWORD *v12; // [esp+18h] [ebp-10h]
  int v13; // [esp+24h] [ebp-4h]

  v12 = v10;
  v10[4] = this;
  v4 = *((_BYTE *)a2 + 17) == 0;
  v5 = (void *)*(this + 1);
  v11 = v5;
  if ( v4 )
  {
    v6 = StringMapNode_Alloc((int)v5, a3, (int)v5, a2 + 3, *((_BYTE *)a2 + 16));
    v7 = (int)v6;
    if ( *((_BYTE *)v11 + 17) )
      v11 = v6;
    v9 = (int *)*a2;
    v13 = 0;
    *v6 = StringMap_CopySubtree(this, v9, (int)v6);
    *(_DWORD *)(v7 + 8) = StringMap_CopySubtree(this, (int *)a2[2], v7);
  }
  return v11;
}

//----- (65753490) --------------------------------------------------------
char *__cdecl Array36_CopyBackward(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a2;
  result = a3;
  while ( v3 != a1 )
  {
    v3 -= 36;
    result -= 36;
    qmemcpy(result, v3, 0x24u);
  }
  return result;
}

//----- (657534F0) --------------------------------------------------------
char *__cdecl Array60_CopyBackward(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a2;
  result = a3;
  while ( v3 != a1 )
  {
    v3 -= 60;
    result -= 60;
    qmemcpy(result, v3, 0x3Cu);
  }
  return result;
}

//----- (65753550) --------------------------------------------------------
char *__usercall Array36_FillN@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x24u);
      --v4;
      result += 36;
    }
    while ( v4 );
  }
  return result;
}

//----- (657535B0) --------------------------------------------------------
char *__usercall ArrayCopy60Bytes@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x3Cu);
      --v4;
      result += 60;
    }
    while ( v4 );
  }
  return result;
}

//----- (65753730) --------------------------------------------------------
int *__thiscall StringMap_CopyTree(int ***this, int a2)
{
  int v3; // edi
  _DWORD *v4; // edx
  int *result; // eax
  int i; // ecx
  int v7; // esi
  int *v8; // ecx

  v3 = (int)*(this + 1);
  *(_DWORD *)(v3 + 4) = StringMap_CopySubtree(this, *(int **)(*(_DWORD *)(a2 + 4) + 4), v3);
  v4 = *(this + 1);
  *(this + 2) = *(int ***)(a2 + 8);
  result = (int *)v4[1];
  if ( *((_BYTE *)result + 17) )
  {
    *v4 = v4;
    (*(this + 1))[2] = (int *)*(this + 1);
  }
  else
  {
    for ( i = *result; !*(_BYTE *)(i + 17); i = *(_DWORD *)i )
      result = (int *)i;
    *v4 = result;
    v7 = (int)*(this + 1);
    v8 = *(int **)(v7 + 4);
    for ( result = (int *)v8[2]; !*((_BYTE *)result + 17); result = (int *)result[2] )
      v8 = result;
    *(_DWORD *)(v7 + 8) = v8;
  }
  return result;
}

//----- (657537C0) --------------------------------------------------------
char *__thiscall Vector36_UninitializedCopy(void *this, char *a2, char *a3, char *a4)
{
  return Array36_CopyForward(a2, a3, a4);
}

//----- (657539A0) --------------------------------------------------------
_WORD *__thiscall Vector60_UninitializedCopy(void *this, _WORD *a2, _WORD *a3, _WORD *a4)
{
  return Array2_CopyForwardChecked(a2, a3, a4);
}

//----- (657539D0) --------------------------------------------------------
char *__stdcall Array36_FillAndGetEnd(char *a1, int a2, char *a3)
{
  Array36_FillN(a3, a1, a2, a3);
  return &a1[36 * a2];
}

//----- (65753A50) --------------------------------------------------------
char *__stdcall Array60_CopyToOffset(char *a1, int a2, char *a3)
{
  ArrayCopy60Bytes(a3, a1, a2, a3);
  return &a1[60 * a2];
}

//----- (65753B40) --------------------------------------------------------
int ***__thiscall StringMap_CopyFrom(int ***this, int a2)
{
  int **v3; // eax
  _DWORD v5[9]; // [esp+0h] [ebp-24h] BYREF

  v5[5] = v5;
  v5[4] = this;
  v3 = (int **)StringMapNode_AllocEmpty();
  *(this + 1) = v3;
  *((_BYTE *)v3 + 17) = 1;
  (*(this + 1))[1] = (int *)*(this + 1);
  **(this + 1) = (int *)*(this + 1);
  (*(this + 1))[2] = (int *)*(this + 1);
  *(this + 2) = 0;
  v5[8] = 0;
  StringMap_CopyTree(this, a2);
  return this;
}
// 65732180: using guessed type int __thiscall sub_65732180(_DWORD);

//----- (65753C90) --------------------------------------------------------
char *__stdcall Array36_CopyForwardWrapper(char *a1, char *a2, char *a3)
{
  return Array36_CopyForward(a1, a2, a3);
}

//----- (65753D50) --------------------------------------------------------
int ***__thiscall ItemData_Copy(int ***this, char *a2)
{
  char *v2; // eax
  int v4; // edi

  v2 = a2;
  qmemcpy(this, a2, 0x20u);
  v4 = (int)(v2 + 32);
  if ( this + 8 != (int ***)(v2 + 32) )
  {
    RBTree_EraseRange(this + 8, (int **)&a2, **(this + 9), (int *)*(this + 9));
    StringMap_CopyTree(this + 8, v4);
  }
  return this;
}

//----- (65753DA0) --------------------------------------------------------
char **__thiscall ItemData_MoveRange(char **this, char **a2, char *a3, char *a4)
{
  char *v4; // edx
  char *v5; // ebx
  char **v6; // esi
  char *v7; // eax
  char *v8; // esi
  char *v9; // edi

  v4 = a4;
  v5 = a3;
  v6 = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v7 = *(this + 2);
    if ( a4 != v7 )
    {
      do
      {
        v8 = v4;
        v9 = v5;
        v4 += 36;
        v5 += 36;
        qmemcpy(v9, v8, 0x24u);
      }
      while ( v4 != v7 );
      v6 = a2;
    }
    *(this + 2) = v5;
  }
  return v6;
}

//----- (65753E30) --------------------------------------------------------
int __thiscall Vector36_InsertN(int this, char *a2, unsigned int a3, char *a4)
{
  __int64 v5; // rax
  unsigned int v6; // edi
  int v7; // eax
  unsigned int v8; // edi
  void *Checked; // eax
  char *v10; // ecx
  char *v11; // eax
  char *End; // eax
  char *v13; // ecx
  int v14; // ecx
  int v15; // esi
  char *v16; // edi
  char *v18; // [esp-Ch] [ebp-60h]
  int v19; // [esp-8h] [ebp-5Ch]
  int v20[4]; // [esp+0h] [ebp-54h] BYREF
  char *v21; // [esp+10h] [ebp-44h]
  int v22; // [esp+14h] [ebp-40h]
  void *v23; // [esp+18h] [ebp-3Ch]
  char v24[36]; // [esp+1Ch] [ebp-38h] BYREF
  int *v25; // [esp+44h] [ebp-10h]
  int v26; // [esp+50h] [ebp-4h]

  v25 = v20;
  v21 = a4;
  LODWORD(v5) = *(_DWORD *)(this + 4);
  if ( (_DWORD)v5 )
  {
    v5 = 954437177LL * (*(_DWORD *)(this + 12) - (int)v5);
    v6 = (SHIDWORD(v5) >> 3) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v23 = *(void **)(this + 8);
    v7 = ((int)v23 - *(_DWORD *)(this + 4)) / 36;
    if ( 119304647 - v7 < a3 )
      Vector36_ThrowLengthError(v20[0], v20[1]);
    if ( v6 >= v7 + a3 )
    {
      qmemcpy(v24, v21, sizeof(v24));
      if ( ((_BYTE *)v23 - a2) / 36 >= a3 )
      {
        v16 = (char *)v23 - 36 * a3;
        *(_DWORD *)(this + 8) = Array36_CopyForwardWrapper(v16, (char *)v23, (char *)v23);
        Array36_CopyBackward(a2, v16, (char *)v23);
        LODWORD(v5) = Array36_FillWithValue(a2, &a2[36 * a3], v24);
      }
      else
      {
        Array36_CopyForwardWrapper(a2, (char *)v23, &a2[36 * a3]);
        v19 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 36;
        v18 = *(char **)(this + 8);
        v26 = 2;
        Array36_FillAndGetEnd(v18, v19, v24);
        *(_DWORD *)(this + 8) += 36 * a3;
        LODWORD(v5) = Array36_FillWithValue(a2, (char *)(*(_DWORD *)(this + 8) - 36 * a3), v24);
      }
    }
    else
    {
      if ( 119304647 - (v6 >> 1) >= v6 )
        v8 = (v6 >> 1) + v6;
      else
        v8 = 0;
      if ( v8 < v7 + a3 )
        v8 = v7 + a3;
      Checked = Vector36_AllocateChecked(v8);
      v10 = *(char **)(this + 4);
      LOBYTE(v22) = 0;
      v23 = Checked;
      v26 = 0;
      v11 = Array36_CopyForward(v10, a2, (char *)Checked);
      End = Array36_FillAndGetEnd(v11, a3, v21);
      v13 = *(char **)(this + 8);
      LOBYTE(v22) = 0;
      Array36_CopyForward(a2, v13, End);
      v14 = *(_DWORD *)(this + 4);
      v15 = (*(_DWORD *)(this + 8) - v14) / 36 + a3;
      if ( v14 )
        operator delete(*(void **)(this + 4));
      LODWORD(v5) = v23;
      *(_DWORD *)(this + 12) = (char *)v23 + 36 * v8;
      *(_DWORD *)(this + 8) = v5 + 36 * v15;
      *(_DWORD *)(this + 4) = v5;
    }
  }
  return v5;
}

//----- (65754120) --------------------------------------------------------
char *__stdcall Array60_CopyForwardWrapper(char *a1, char *a2, char *a3)
{
  return Array60_CopyForward(a1, a2, a3);
}

//----- (65754150) --------------------------------------------------------
int ***__cdecl ItemDataArray_Copy(char *a1, char *a2, int ***a3)
{
  char *v3; // edx
  int ***result; // eax
  int ***v5; // ebx
  int *v6; // [esp+0h] [ebp-8h] BYREF
  char *v7; // [esp+4h] [ebp-4h]

  v3 = a1;
  result = a3;
  if ( a1 != a2 )
  {
    v5 = a3 + 8;
    v7 = a1 + 32;
    do
    {
      qmemcpy(result, v3, 0x20u);
      if ( v5 != (int ***)v7 )
      {
        RBTree_EraseRange(v5, &v6, *v5[1], (int *)v5[1]);
        StringMap_CopyTree(v5, (int)v7);
        result = a3;
        v3 = a1;
      }
      v7 += 44;
      v3 += 44;
      result += 11;
      v5 += 11;
      a3 = result;
      a1 = v3;
    }
    while ( v3 != a2 );
  }
  return result;
}

//----- (65754220) --------------------------------------------------------
_DWORD *__thiscall Vector36_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 36 )
    v6 = (int)&a3[-v5] / 36;
  else
    v6 = 0;
  Vector36_InsertN((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 36 * v6;
  return a2;
}

//----- (657544B0) --------------------------------------------------------
int __thiscall Vector60_InsertN(int this, char *a2, unsigned int a3, char *a4)
{
  __int64 v5; // rax
  unsigned int v6; // edi
  int v7; // eax
  unsigned int v8; // edi
  void *Checked; // eax
  char *v10; // ecx
  char *v11; // eax
  char *v12; // eax
  char *v13; // ecx
  int v14; // esi
  char *v15; // edi
  char *v16; // eax
  char *v18; // [esp-Ch] [ebp-78h]
  int v19; // [esp-8h] [ebp-74h]
  char *v20; // [esp-4h] [ebp-70h]
  int v21[4]; // [esp+0h] [ebp-6Ch] BYREF
  char *v22; // [esp+10h] [ebp-5Ch]
  int v23; // [esp+14h] [ebp-58h]
  void *v24; // [esp+18h] [ebp-54h]
  char v25[60]; // [esp+1Ch] [ebp-50h] BYREF
  int *v26; // [esp+5Ch] [ebp-10h]
  int v27; // [esp+68h] [ebp-4h]

  v26 = v21;
  v22 = a4;
  LODWORD(v5) = *(_DWORD *)(this + 4);
  if ( (_DWORD)v5 )
  {
    v5 = 2290649225LL * (*(_DWORD *)(this + 12) - (int)v5);
    v6 = (SHIDWORD(v5) >> 5) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v24 = *(void **)(this + 8);
    v7 = ((int)v24 - *(_DWORD *)(this + 4)) / 60;
    if ( 71582788 - v7 < a3 )
      Vector60_ThrowLengthError2(v21[0], v21[1]);
    if ( v6 >= v7 + a3 )
    {
      qmemcpy(v25, v22, sizeof(v25));
      if ( ((_BYTE *)v24 - a2) / 60 >= a3 )
      {
        v15 = (char *)v24 - 60 * a3;
        v16 = Array60_CopyForwardWrapper(v15, (char *)v24, (char *)v24);
        v20 = (char *)v24;
        *(_DWORD *)(this + 8) = v16;
        Array60_CopyBackward(a2, v15, v20);
        LODWORD(v5) = Array60_FillWithValue(a2, &a2[60 * a3], v25);
      }
      else
      {
        Array60_CopyForwardWrapper(a2, (char *)v24, &a2[60 * a3]);
        v19 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 60;
        v18 = *(char **)(this + 8);
        v27 = 2;
        Array60_CopyToOffset(v18, v19, v25);
        *(_DWORD *)(this + 8) += 60 * a3;
        LODWORD(v5) = Array60_FillWithValue(a2, (char *)(*(_DWORD *)(this + 8) - 60 * a3), v25);
      }
    }
    else
    {
      if ( 71582788 - (v6 >> 1) >= v6 )
        v8 = (v6 >> 1) + v6;
      else
        v8 = 0;
      if ( v8 < v7 + a3 )
        v8 = v7 + a3;
      Checked = Vector60_AllocateChecked(v8);
      v10 = *(char **)(this + 4);
      LOBYTE(v23) = 0;
      v24 = Checked;
      v27 = 0;
      v11 = Array60_CopyForward(v10, a2, (char *)Checked);
      v12 = Array60_CopyToOffset(v11, a3, v22);
      v13 = *(char **)(this + 8);
      LOBYTE(v23) = 0;
      Array60_CopyForward(a2, v13, v12);
      v14 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 60 + a3;
      if ( *(_DWORD *)(this + 4) )
        operator delete(*(void **)(this + 4));
      LODWORD(v5) = v24;
      *(_DWORD *)(this + 12) = (char *)v24 + 60 * v8;
      *(_DWORD *)(this + 8) = v5 + 60 * v14;
      *(_DWORD *)(this + 4) = v5;
    }
  }
  return v5;
}

//----- (65754730) --------------------------------------------------------
int __thiscall Vector2_CopyFrom(int this, int a2)
{
  int v3; // ecx
  unsigned int v4; // edx
  int v5; // edx
  int v7; // eax
  unsigned int v8; // ecx
  unsigned int v9; // ebx
  _WORD *v10; // ebx

  if ( this == a2 )
    return this;
  v3 = *(_DWORD *)(this + 8);
  v4 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) >> 1;
  if ( !v4 )
  {
    v5 = *(_DWORD *)(this + 4);
    if ( v5 != v3 )
      *(_DWORD *)(this + 8) = v5;
    return this;
  }
  v7 = *(_DWORD *)(this + 4);
  v8 = (v3 - v7) >> 1;
  if ( v4 > v8 )
  {
    if ( v7 )
      v9 = (*(_DWORD *)(this + 12) - v7) >> 1;
    else
      v9 = 0;
    if ( v4 > v9 )
    {
      if ( v7 )
        operator delete(*(void **)(this + 4));
      if ( !Vector2_InitWithCapacity((_DWORD *)this, (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) >> 1) )
        return this;
      *(_DWORD *)(this + 8) = Vector60_UninitializedCopy(
                                (void *)this,
                                *(_WORD **)(a2 + 4),
                                *(_WORD **)(a2 + 8),
                                *(_WORD **)(this + 4));
      return this;
    }
    else
    {
      v10 = (_WORD *)(*(_DWORD *)(a2 + 4) + 2 * v8);
      Array2_CopyForward(*(_WORD **)(a2 + 4), v10, *(_WORD **)(this + 4));
      *(_DWORD *)(this + 8) = Vector60_UninitializedCopy((void *)this, v10, *(_WORD **)(a2 + 8), *(_WORD **)(this + 8));
      return this;
    }
  }
  else
  {
    Array2_CopyForward(*(_WORD **)(a2 + 4), *(_WORD **)(a2 + 8), *(_WORD **)(this + 4));
    *(_DWORD *)(this + 8) = *(_DWORD *)(this + 4) + 2 * ((*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) >> 1);
    return this;
  }
}

//----- (65754840) --------------------------------------------------------
int ***__cdecl ItemDataArray_CopyWrapper(char *a1, char *a2, int ***a3)
{
  return ItemDataArray_Copy(a1, a2, a3);
}

//----- (65754870) --------------------------------------------------------
int ***__thiscall ItemData_CopyCtor(int ***this, const void *a2)
{
  qmemcpy(this, a2, 0x20u);
  StringMap_CopyFrom(this + 8, (int)a2 + 32);
  return this;
}

//----- (657548F0) --------------------------------------------------------
char **__thiscall PlayerData_Reset(char *this)
{
  int v2; // edx
  char **result; // eax
  char *v4; // [esp+Ch] [ebp-4h] BYREF

  *(_DWORD *)this = 0;
  *(this + 4) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
  v2 = *((_DWORD *)this + 5);
  if ( v2 != *((_DWORD *)this + 6) )
    *((_DWORD *)this + 6) = v2;
  *(this + 32) = 0;
  sub_6593EE50((_DWORD *)this + 13);
  *(this + 97) = 0;
  ItemData_MoveRange((char **)this + 159, &v4, *((char **)this + 160), *((char **)this + 161));
  *(this + 88) = 0;
  *(this + 98) = 0;
  *(this + 122) = 0;
  result = ItemData_MoveRange((char **)this + 159, &v4, *((char **)this + 160), *((char **)this + 161));
  *(this + 652) = 0;
  *(this + 653) = 0;
  *((_DWORD *)this + 164) = 0;
  *((_DWORD *)this + 165) = 0;
  return result;
}

//----- (65754990) --------------------------------------------------------
int __thiscall ItemVector_Assign(int this, unsigned int a2)
{
  unsigned int v2; // edi
  int v5; // ebx
  unsigned int v6; // ecx
  unsigned int v7; // eax
  char *v8; // edx
  char *v9; // ecx
  char *v10; // [esp-10h] [ebp-18h]
  char *v11; // [esp-8h] [ebp-10h]

  v2 = a2;
  if ( this != a2 )
  {
    a2 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 36;
    if ( !a2 )
    {
      ItemData_MoveRange((char **)this, (char **)&a2, *(char **)(this + 4), *(char **)(this + 8));
      return this;
    }
    v5 = *(_DWORD *)(this + 4);
    v6 = (*(_DWORD *)(this + 8) - v5) / 36;
    if ( a2 <= v6 )
    {
      Array36_CopyElements(*(char **)(v2 + 4), *(char **)(v2 + 8), *(char **)(this + 4));
      *(_DWORD *)(this + 8) = *(_DWORD *)(this + 4) + 36 * ((*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 36);
      return this;
    }
    if ( v5 )
      v7 = (*(_DWORD *)(this + 12) - v5) / 36;
    else
      v7 = 0;
    if ( a2 > v7 )
    {
      if ( v5 )
        operator delete(*(void **)(this + 4));
      if ( !Array36_AllocateN((_DWORD *)this, (*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 36) )
        return this;
      v8 = *(char **)(this + 4);
      v9 = *(char **)(v2 + 4);
    }
    else
    {
      v11 = *(char **)(this + 4);
      v10 = *(char **)(v2 + 4);
      a2 = (unsigned int)&v10[36 * v6];
      Array36_CopyElements(v10, (char *)a2, v11);
      v8 = *(char **)(this + 8);
      v9 = (char *)a2;
    }
    *(_DWORD *)(this + 8) = Vector36_UninitializedCopy((void *)this, v9, *(char **)(v2 + 8), v8);
  }
  return this;
}

//----- (65754AD0) --------------------------------------------------------
char *__thiscall ItemVector36_PushBack(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 36;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 36 >= v4 )
    return (char *)Vector36_InsertOne(this, &a2, v5, a2);
  result = Array36_FillN(a2, v5, 1, a2);
  *(this + 2) = v5 + 36;
  return result;
}

//----- (65754BB0) --------------------------------------------------------
_DWORD *__thiscall ItemVector60_Insert(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 60 )
    v6 = (int)&a3[-v5] / 60;
  else
    v6 = 0;
  Vector60_InsertN((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 60 * v6;
  return a2;
}

//----- (65754CE0) --------------------------------------------------------
unsigned __int8 __thiscall Read_Map_U32_String(char **this, unsigned int *a2)
{
  unsigned int v3; // edi
  unsigned __int8 result; // al
  char v5[4]; // [esp+Ch] [ebp-30h] BYREF
  unsigned int v6; // [esp+10h] [ebp-2Ch] BYREF
  int v7; // [esp+14h] [ebp-28h] BYREF
  _BYTE v8[32]; // [esp+18h] [ebp-24h] BYREF

  v3 = 0;
  v6 = 0;
  result = RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v6);
  v7 = 0;
  v8[0] = 0;
  if ( v6 )
  {
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v5, 0x20u, 1) )
          ByteSwapCopy((int)v5, (int)&v7, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v7, 0x20u, 1);
      }
      (*(void (__thiscall **)(int, _BYTE *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(g_LTClient, v8, 2048, a2);
      result = (unsigned __int8)ItemVector36_PushBack(this, (char *)&v7);
      ++v3;
    }
    while ( v3 < v6 );
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65754E30) --------------------------------------------------------
char *__thiscall ItemDataArray_PushBack(char **this, char *a2)
{
  int v3; // eax
  unsigned int v4; // esi
  char *v5; // ebx
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 60;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - *(this + 1)) / 60 >= v4 )
    return (char *)ItemVector60_Insert(this, &a2, v5, a2);
  result = ArrayCopy60Bytes(a2, v5, 1, a2);
  *(this + 2) = v5 + 60;
  return result;
}

//----- (65754EE0) --------------------------------------------------------
int ***__cdecl ItemArray44_CopyRange(char *a1, char *a2, int ***a3)
{
  int ***v3; // ebx
  char *v4; // eax
  _DWORD v6[8]; // [esp+0h] [ebp-2Ch] BYREF
  int v7; // [esp+28h] [ebp-4h]

  v6[7] = v6;
  v3 = a3;
  v6[6] = a3;
  v7 = 0;
  while ( 1 )
  {
    v4 = a1;
    if ( a1 == a2 )
      break;
    v6[5] = v3;
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
    {
      qmemcpy(v3, a1, 0x20u);
      StringMap_CopyFrom(v3 + 8, (int)(a1 + 32));
      v4 = a1;
    }
    v3 += 11;
    LOBYTE(v7) = 0;
    a1 = v4 + 44;
  }
  return v3;
}
// 65732320: using guessed type int __thiscall sub_65732320(_DWORD, _DWORD);

//----- (65754FA0) --------------------------------------------------------
unsigned __int8 __thiscall Read_Vector_RankPermission(_DWORD *this, unsigned int *a2)
{
  unsigned int *v2; // ebx
  unsigned __int8 result; // al
  unsigned int v5; // eax
  bool v6; // zf
  int v7; // ecx
  unsigned int v8; // eax
  int v9; // esi
  char v10; // [esp+Ch] [ebp-8h] BYREF
  bool v11; // [esp+Dh] [ebp-7h]
  unsigned __int8 v12; // [esp+13h] [ebp-1h] BYREF

  v2 = a2;
  v12 = 0;
  result = RakNet::BitStream::ReadCompressed(a2, (char *)&v12, 8u, 1);
  v10 = 0;
  v11 = 0;
  HIBYTE(a2) = 0;
  if ( v12 )
  {
    do
    {
      RakNet::BitStream::ReadCompressed(v2, &v10, 8u, 1);
      v5 = v2[2];
      if ( v5 + 1 <= *v2 )
      {
        v6 = ((unsigned __int8)(128 >> (v5 & 7)) & *(_BYTE *)((v5 >> 3) + v2[3])) == 0;
        v2[2] = v5 + 1;
        v11 = !v6;
      }
      v7 = *(this + 1);
      if ( v7 )
        v8 = (*(this + 3) - v7) >> 1;
      else
        v8 = 0;
      v9 = *(this + 2);
      if ( (v9 - v7) >> 1 >= v8 )
      {
        sub_65754290(this, v9, 1, &v10);
      }
      else
      {
        sub_65753580(v9, 1, &v10, this, a2, 0);
        *(this + 2) = v9 + 2;
      }
      result = HIBYTE(a2) + 1;
      HIBYTE(a2) = result;
    }
    while ( result < v12 );
  }
  return result;
}
// 65753580: using guessed type int __cdecl sub_65753580(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 65754290: using guessed type int __thiscall sub_65754290(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65755080) --------------------------------------------------------
bool __thiscall Models::Apartment::Read(char *this, unsigned int *bs)
{
  unsigned int v3; // eax
  unsigned int v4; // eax
  unsigned int v5; // eax
  unsigned int v6; // eax

  RakNet::BitStream::ReadCompressed_T_uint(bs, this);
  RakNet::BitStream::ReadCompressed(bs, this + 4, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(bs, this + 8);
  RakNet::BitStream::ReadCompressed_T_uint(bs, this + 12);
  Read_Vector_RankPermission((_DWORD *)this + 4, bs);
  v3 = bs[2];
  if ( v3 + 1 <= *bs )
  {
    *(this + 96) = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + bs[3])) != 0;
    ++bs[2];
  }
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 32,
    2048,
    bs);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 88,
    2048,
    bs);
  ItemList_Read((ItemsAddedPayload *)(this + 52), bs);
  v4 = bs[2];
  if ( v4 + 1 <= *bs )
  {
    *(this + 97) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + bs[3])) != 0;
    ++bs[2];
  }
  RakNet::BitStream::ReadCompressed_T_uint(bs, this + 660);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 98,
    2048,
    bs);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 122,
    2048,
    bs);
  Read_Map_U32_String((char **)this + 159, bs);
  v5 = bs[2];
  if ( v5 + 1 <= *bs )
  {
    *(this + 652) = ((unsigned __int8)(128 >> (v5 & 7)) & *(_BYTE *)((v5 >> 3) + bs[3])) != 0;
    ++bs[2];
  }
  v6 = bs[2];
  if ( v6 + 1 <= *bs )
  {
    *(this + 653) = ((unsigned __int8)(128 >> (v6 & 7)) & *(_BYTE *)((v6 >> 3) + bs[3])) != 0;
    ++bs[2];
  }
  return RakNet::BitStream::ReadCompressed_T_uint(bs, this + 656);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65755200) --------------------------------------------------------
char *__thiscall Packet_ID_B0_read_listB(char *this, unsigned int *a2)
{
  unsigned int v3; // ebx
  char *result; // eax
  unsigned int v5; // eax
  bool v6; // zf
  char v7[4]; // [esp+10h] [ebp-4Ch] BYREF
  char v8[4]; // [esp+14h] [ebp-48h] BYREF
  unsigned int v9; // [esp+18h] [ebp-44h] BYREF
  int v10; // [esp+1Ch] [ebp-40h] BYREF
  bool v11; // [esp+20h] [ebp-3Ch]
  __int16 v12; // [esp+22h] [ebp-3Ah] BYREF
  _WORD v13[4]; // [esp+24h] [ebp-38h] BYREF
  char v14; // [esp+2Ch] [ebp-30h]
  char v15; // [esp+2Dh] [ebp-2Fh]
  int v16; // [esp+30h] [ebp-2Ch]
  int v17; // [esp+34h] [ebp-28h]
  int v18; // [esp+38h] [ebp-24h]
  char v19; // [esp+3Ch] [ebp-20h]
  char v20; // [esp+3Dh] [ebp-1Fh]
  char v21; // [esp+3Eh] [ebp-1Eh]
  int v22; // [esp+3Fh] [ebp-1Dh]
  _BYTE v23[20]; // [esp+44h] [ebp-18h] BYREF

  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 4);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  v3 = 0;
  v9 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v9);
  result = 0;
  v10 = 0;
  v12 = 0;
  v11 = 0;
  v13[0] = 0;
  v13[1] = 0;
  v13[2] = 0;
  v13[3] = 0;
  v14 = 100;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v20 = 0;
  v21 = 0;
  v19 = 0;
  v22 = 0;
  v23[0] = 0;
  if ( v9 )
  {
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v7, 0x20u, 1) )
          ByteSwapCopy((int)v7, (int)&v10, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v10, 0x20u, 1);
      }
      v5 = a2[2];
      if ( v5 + 1 <= *a2 )
      {
        v6 = ((unsigned __int8)(128 >> (v5 & 7)) & *(_BYTE *)((v5 >> 3) + a2[3])) == 0;
        a2[2] = v5 + 1;
        v11 = !v6;
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v8, 0x10u, 1) )
          ByteSwapCopy((int)v8, (int)&v12, 2u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v12, 0x10u, 1);
      }
      ItemStructA_Read((char *)v13, a2);
      (*(void (__thiscall **)(int, _BYTE *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
        g_LTClient,
        v23,
        2048,
        a2);
      result = ItemDataArray_PushBack((char **)this + 2, (char *)&v10);
      ++v3;
    }
    while ( v3 < v9 );
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657554A0) --------------------------------------------------------
int ***__thiscall ItemDataArray_InsertAt(void *this, char *a2, char *a3, int ***a4)
{
  return ItemArray44_CopyRange(a2, a3, a4);
}

//----- (65755630) --------------------------------------------------------
void __thiscall ItemDataArray_Clear(int *this)
{
  char *v2; // eax
  int ***v3; // ecx
  int ***v4; // edi

  v2 = (char *)*(this + 2);
  v3 = (int ***)*(this + 1);
  if ( v3 != (int ***)v2 )
  {
    v4 = ItemDataArray_Copy(v2, v2, v3);
    ItemVector_DestroyRange((int)v4, *(this + 2));
    *(this + 2) = (int)v4;
  }
}

//----- (657556C0) --------------------------------------------------------
int *__thiscall ItemDataArray_Assign(int *this, int a2)
{
  int v5; // ebx
  unsigned int v6; // ecx
  int ***v7; // eax
  unsigned int v8; // eax
  unsigned int v9; // [esp+10h] [ebp+8h]
  char *v10; // [esp+10h] [ebp+8h]

  if ( this != (int *)a2 )
  {
    v9 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 44;
    if ( !v9 )
    {
      ItemDataArray_Clear(this);
      return this;
    }
    v5 = *(this + 1);
    v6 = (*(this + 2) - v5) / 44;
    if ( v9 <= v6 )
    {
      v7 = ItemDataArray_CopyWrapper(*(char **)(a2 + 4), *(char **)(a2 + 8), (int ***)*(this + 1));
      ItemVector_DestroyRange((int)v7, *(this + 2));
      *(this + 2) = *(this + 1) + 44 * ((*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 44);
      return this;
    }
    if ( v5 )
      v8 = (*(this + 3) - v5) / 44;
    else
      v8 = 0;
    if ( v9 <= v8 )
    {
      v10 = (char *)(*(_DWORD *)(a2 + 4) + 44 * v6);
      ItemDataArray_CopyWrapper(*(char **)(a2 + 4), v10, (int ***)*(this + 1));
      *(this + 2) = (int)ItemDataArray_InsertAt(this, v10, *(char **)(a2 + 8), (int ***)*(this + 2));
      return this;
    }
    if ( v5 )
    {
      ItemVector_DestroyRange_Wrapper(v5, *(this + 2));
      operator delete((void *)*(this + 1));
    }
    if ( ItemVector_Init(this, (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 44) )
      *(this + 2) = (int)ItemDataArray_InsertAt(this, *(char **)(a2 + 4), *(char **)(a2 + 8), (int ***)*(this + 1));
  }
  return this;
}

//----- (65755820) --------------------------------------------------------
int __thiscall CharacterData_Reset(int this)
{
  int v2; // ecx
  char *v4[2]; // [esp+8h] [ebp-14h] BYREF
  int v5; // [esp+18h] [ebp-4h]

  v4[1] = (char *)this;
  *(_DWORD *)(this + 20) = 0;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = 0;
  *(_DWORD *)(this + 60) = 0;
  *(_DWORD *)(this + 64) = 0;
  *(_DWORD *)(this + 68) = 0;
  v5 = 0;
  *(_WORD *)(this + 52) = 0;
  *(_BYTE *)(this + 84) = 0;
  *(_DWORD *)(this + 72) = 0;
  *(_DWORD *)(this + 76) = 0;
  *(_DWORD *)(this + 80) = 0;
  v2 = this + 636;
  *(_DWORD *)(v2 + 4) = 0;
  *(_DWORD *)(v2 + 8) = 0;
  *(_DWORD *)(v2 + 12) = 0;
  ItemData_MoveRange((char **)v2, v4, 0, 0);
  LOBYTE(v5) = 2;
  PlayerData_Reset((char *)this);
  return this;
}

//----- (65755A00) --------------------------------------------------------
_DWORD *__thiscall ItemDataSmall_CopyFrom(_DWORD *this, int a2)
{
  *(_WORD *)this = *(_WORD *)a2;
  ItemDataArray_Assign(this + 1, a2 + 4);
  *(this + 5) = *(_DWORD *)(a2 + 20);
  *(this + 6) = *(_DWORD *)(a2 + 24);
  *(this + 7) = *(_DWORD *)(a2 + 28);
  *((_BYTE *)this + 32) = *(_BYTE *)(a2 + 32);
  return this;
}

//----- (65755A90) --------------------------------------------------------
char *__thiscall PlayerData_Assign(char *this, int a2)
{
  char *v3; // eax
  int v4; // ebx
  int v5; // ecx
  char *v6; // eax
  int v7; // ecx
  char *v8; // eax
  int v9; // ecx

  *(_DWORD *)this = *(_DWORD *)a2;
  *(this + 4) = *(_BYTE *)(a2 + 4);
  *((_DWORD *)this + 2) = *(_DWORD *)(a2 + 8);
  *((_DWORD *)this + 3) = *(_DWORD *)(a2 + 12);
  Vector2_CopyFrom((int)(this + 16), a2 + 16);
  v3 = this + 32;
  v4 = a2 - (_DWORD)this;
  v5 = 20;
  do
  {
    *v3 = v3[v4];
    ++v3;
    --v5;
  }
  while ( v5 );
  *((_WORD *)this + 26) = *(_WORD *)(a2 + 52);
  ItemDataArray_Assign((int *)this + 14, a2 + 56);
  *((_DWORD *)this + 18) = *(_DWORD *)(a2 + 72);
  *((_DWORD *)this + 19) = *(_DWORD *)(a2 + 76);
  *((_DWORD *)this + 20) = *(_DWORD *)(a2 + 80);
  *(this + 84) = *(_BYTE *)(a2 + 84);
  *(this + 88) = *(_BYTE *)(a2 + 88);
  *(this + 89) = *(_BYTE *)(a2 + 89);
  *(this + 90) = *(_BYTE *)(a2 + 90);
  *(this + 91) = *(_BYTE *)(a2 + 91);
  *(this + 92) = *(_BYTE *)(a2 + 92);
  *(this + 93) = *(_BYTE *)(a2 + 93);
  *(this + 94) = *(_BYTE *)(a2 + 94);
  *(this + 95) = *(_BYTE *)(a2 + 95);
  *(this + 96) = *(_BYTE *)(a2 + 96);
  *(this + 97) = *(_BYTE *)(a2 + 97);
  v6 = this + 98;
  v7 = 24;
  do
  {
    *v6 = v6[v4];
    ++v6;
    --v7;
  }
  while ( v7 );
  v8 = this + 122;
  v9 = 512;
  do
  {
    *v8 = v8[v4];
    ++v8;
    --v9;
  }
  while ( v9 );
  ItemVector_Assign((int)(this + 636), a2 + 636);
  *(this + 652) = *(_BYTE *)(a2 + 652);
  *(this + 653) = *(_BYTE *)(a2 + 653);
  *((_DWORD *)this + 164) = *(_DWORD *)(a2 + 656);
  *((_DWORD *)this + 165) = *(_DWORD *)(a2 + 660);
  return this;
}

//----- (65755F80) --------------------------------------------------------
int __thiscall Packet_ID_B0_dtor(int *this)
{
  void *v2; // eax

  v2 = (void *)*(this + 285);
  if ( v2 )
    operator delete(v2);
  *(this + 285) = 0;
  *(this + 286) = 0;
  *(this + 287) = 0;
  CharSlots_DestroyAll(this + 272);
  *this = (int)&vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 3));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (65756350) --------------------------------------------------------
void __thiscall CrosshairMgr_Update(CrosshairMgr *this, int a2)
{
  int xhairTargetId; // ebx
  int targetMode; // edi
  int sub0Node; // eax
  int sub1Node; // eax
  int *pkt; // ecx
  float nowTime; // [esp+1Ch] [ebp-918h]
  float baseSpread; // [esp+20h] [ebp-914h]
  float spread; // [esp+20h] [ebp-914h]
  _DWORD pktB0_Sub8[269]; // [esp+24h] [ebp-910h] BYREF
  char pktB0_SubId; // [esp+458h] [ebp-4DCh]
  _DWORD pktB0_Sub5[269]; // [esp+4A4h] [ebp-490h] BYREF
  char pktB0_SubId2; // [esp+8D8h] [ebp-5Ch]
  int pktB0_TargetMode; // [esp+8DCh] [ebp-58h]
  int pktCtorState; // [esp+930h] [ebp-4h]

  xhairTargetId = *((_DWORD *)dword_65ABF71C + 24);
  targetMode = 0;
  sub0Node = Msg2_75_Sub0_FindById((int **)dword_65ABF764, xhairTargetId);
  if ( sub0Node )
  {
    targetMode = *(_DWORD *)(sub0Node + 12);
    this->targetModeIsSpecial = 0;
  }
  else
  {
    sub1Node = Msg2_75_Sub1_FindById((int **)dword_65ABF764, xhairTargetId);
    if ( sub1Node && *(_WORD *)(sub1Node + 16) == 396 )
    {
      targetMode = 1;
      this->targetModeIsSpecial = 1;
    }
  }
  nowTime = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  if ( targetMode && targetMode == this->lastTargetMode )
    targetMode = 0;
  baseSpread = EncVarMgr_GetFloat((_DWORD *)g_pEncVarMgr, 7u);
  if ( targetMode != this->targetMode )
  {
    this->spreadLastTime = 0.0;
    this->targetMode = targetMode;
    baseSpread = 0.0;
  }
  if ( this->targetMode )
  {
    if ( nowTime - this->spreadLastTime >= 1.0 )
    {
      SoundMgr_PlaySoundByIndex(dword_65ABF750, 0x3Eu);
      this->spreadLastTime = nowTime;
      this->spreadCooldownMs = 500.0;
    }
    spread = g_pGameClientShell->recoilScale * 100.0 / 5.0 + baseSpread;
    if ( spread >= 100.0
      && !(*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 0x2000) )
    {
      if ( this->targetModeIsSpecial == 1 )
      {
        Packet_ID_B0_Ctor((char *)pktB0_Sub8);
        pktCtorState = 0;
        pktB0_Sub8[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
        pktB0_SubId = 8;
        Packet_ID_B0_write((int)pktB0_Sub8);
        LTClient_SendPacket_BuildIfNeeded(pktB0_Sub8, 2, 1, 3, 0);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 0x2000);
        pkt = pktB0_Sub8;
      }
      else
      {
        Packet_ID_B0_Ctor((char *)pktB0_Sub5);
        pktCtorState = 1;
        pktB0_Sub5[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
        pktB0_SubId2 = 5;
        pktB0_TargetMode = targetMode;
        Packet_ID_B0_write((int)pktB0_Sub5);
        LTClient_SendPacket_BuildIfNeeded(pktB0_Sub5, 1, 1, 3, 0);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 0x2000);
        pkt = pktB0_Sub5;
      }
      pktCtorState = -1;
      Packet_ID_B0_dtor(pkt);
      spread = 0.0;
      this->lastTargetMode = this->targetMode;
      this->targetModeIsSpecial = 0;
      this->targetMode = 0;
    }
    EncVarMgr_SetFloat((_DWORD *)g_pEncVarMgr, 7, spread);
  }
  else
  {
    EncVarMgr_SetFloat((_DWORD *)g_pEncVarMgr, 7, 0.0);
  }
  JUMPOUT(0x65756619);
}
// 65756618: control flows out of bounds to 65756619
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (657566C0) --------------------------------------------------------
int __usercall CrosshairView_Render@<eax>(int **a1@<ecx>, double a2@<st0>)
{
  int *v3; // ecx
  void (__thiscall *v4)(int *, int **); // edx
  void (__stdcall *v5)(int **, int, _DWORD, _DWORD, _DWORD); // edx
  double v6; // st7
  double v7; // st6
  unsigned int v8; // edi
  double v9; // st7
  void (__stdcall *v10)(int **, int); // eax
  void (__stdcall *v11)(int **, _DWORD, _DWORD, _DWORD, _DWORD); // eax
  double v12; // st7
  int v13; // edx
  void (__stdcall *v14)(int **, _DWORD); // edx
  float v16; // [esp+14h] [ebp-60h]
  float v17; // [esp+1Ch] [ebp-58h]
  int v18; // [esp+20h] [ebp-54h]
  _DWORD v19[4]; // [esp+28h] [ebp-4Ch]
  _BYTE v20[4]; // [esp+38h] [ebp-3Ch] BYREF
  float v21; // [esp+3Ch] [ebp-38h]
  float v22[2]; // [esp+40h] [ebp-34h]
  int v23; // [esp+48h] [ebp-2Ch] BYREF
  float v24; // [esp+4Ch] [ebp-28h]
  float v25; // [esp+50h] [ebp-24h]
  int v26; // [esp+54h] [ebp-20h]
  float v27; // [esp+58h] [ebp-1Ch]
  int v28; // [esp+5Ch] [ebp-18h]
  float v29; // [esp+60h] [ebp-14h]
  float v30; // [esp+64h] [ebp-10h]
  float v31; // [esp+68h] [ebp-Ch]
  float v32; // [esp+6Ch] [ebp-8h]
  float v33; // [esp+70h] [ebp-4h]

  CrosshairMgr_Update((CrosshairMgr *)a1, v18);
  *(float *)&v26 = a2;
  v3 = *a1;
  v28 = *(_DWORD *)&dword_65A55604 / 2;
  v31 = (float)(*(_DWORD *)&Data / 2);
  v4 = *(void (__thiscall **)(int *, int **))(*v3 + 276);
  v32 = (float)(*(_DWORD *)&dword_65A55604 / 2);
  v4(v3, a1 + 1);
  v5 = *(void (__stdcall **)(int **, int, _DWORD, _DWORD, _DWORD))(**a1 + 192);
  v29 = v32 - 250.0;
  *(float *)&v28 = v31 - 250.0;
  v5(a1 + 1, v28, LODWORD(v29), 500.0, 500.0);
  v6 = 2.0;
  if ( (dword_65A5E600 & 1) == 0 )
  {
    dword_65A5E600 |= 1u;
    v30 = sin(0.7853981852531433);
    v6 = 2.0;
    flt_65A5E5FC = v30 * 2.0;
  }
  v30 = 500.0 / flt_65A5E5FC;
  v33 = g_pGameClientShell->recoilScale * 30.0 + *((float *)a1 + 105);
  v7 = v33;
  *((float *)a1 + 105) = v33;
  if ( v7 >= 360.0 )
    *((float *)a1 + 105) = v7 - 360.0;
  *((float *)a1 + 101) = 0.0;
  *((float *)a1 + 102) = 0.0;
  *((float *)a1 + 103) = 0.0;
  *((float *)a1 + 104) = 1.0;
  *(float *)&v23 = (*((float *)a1 + 101) * *((float *)a1 + 102) - *((float *)a1 + 104) * *((float *)a1 + 103)) * v6;
  v24 = 1.0 - (*((float *)a1 + 103) * *((float *)a1 + 103) + *((float *)a1 + 101) * *((float *)a1 + 101)) * v6;
  v25 = v6 * (*((float *)a1 + 101) * *((float *)a1 + 104) + *((float *)a1 + 103) * *((float *)a1 + 102));
  v33 = *((float *)a1 + 105) * 0.01745329238474369;
  Quat_RotateAroundAxis((float *)a1 + 101, (float *)&v23, v33);
  (*(void (__thiscall **)(int, int **, _BYTE *))(*(_DWORD *)dword_65A5AA40 + 28))(dword_65A5AA40, a1 + 101, v20);
  v33 = v21;
  v8 = 0;
  do
  {
    v27 = cos(v33);
    *(float *)&v19[v8] = v27 * v30 + v31;
    v27 = sin(v33);
    v22[++v8] = v27 * v30 + v32;
    v33 = v33 + 1.570796370506287;
  }
  while ( v8 < 4 );
  (*(void (__stdcall **)(int **, int))(**a1 + 276))(a1 + 25, 255);
  (*(void (__stdcall **)(int **, _DWORD, _DWORD, _DWORD, int, _DWORD, float, _DWORD, float))(**a1 + 176))(
    a1 + 25,
    v19[0],
    LODWORD(v22[1]),
    v19[1],
    v23,
    v19[2],
    COERCE_FLOAT(LODWORD(v24)),
    v19[3],
    COERCE_FLOAT(LODWORD(v25)));
  if ( a1[108] )
    v9 = g_pGameClientShell->recoilScale * 300.0 + *((float *)a1 + 106);
  else
    v9 = 500.0;
  *((float *)a1 + 106) = v9;
  if ( *((float *)a1 + 106) > 750.0 )
    *((float *)a1 + 106) = 750.0;
  v10 = *(void (__stdcall **)(int **, int))(**a1 + 276);
  v27 = *((float *)a1 + 106) * 0.5;
  v10(a1 + 49, 255);
  v17 = *((float *)a1 + 106);
  v11 = *(void (__stdcall **)(int **, _DWORD, _DWORD, _DWORD, _DWORD))(**a1 + 192);
  v12 = v27;
  v27 = v32 - v27;
  v16 = v27;
  v27 = v31 - v12;
  v11(a1 + 49, LODWORD(v27), LODWORD(v16), LODWORD(v17), LODWORD(v17));
  v13 = **a1;
  *(float *)&v26 = *(float *)&v26 * 0.009999999776482582;
  v14 = *(void (__stdcall **)(int **, _DWORD))(v13 + 276);
  v26 = (int)(*(float *)&v26 * 255.0);
  v14(a1 + 73, (unsigned __int8)v26);
  return (*(int (__stdcall **)(int **, int, float, _DWORD, _DWORD))(**a1 + 192))(
           a1 + 73,
           v28,
           COERCE_FLOAT(LODWORD(v29)),
           500.0,
           500.0);
}
// 657566CA: variable 'v18' is possibly undefined
// 65A5AA40: using guessed type int dword_65A5AA40;
// 65A5E5FC: using guessed type float flt_65A5E5FC;
// 65A5E600: using guessed type int dword_65A5E600;

//----- (65756AC0) --------------------------------------------------------
void __thiscall Packet_ID_AF_B0_read_listA(void *this, unsigned int *a2)
{
  unsigned __int8 v3; // bl
  unsigned __int8 v4; // [esp+13h] [ebp-2A9h] BYREF
  char v5[664]; // [esp+14h] [ebp-2A8h] BYREF
  int v6; // [esp+2B8h] [ebp-4h]

  v3 = 0;
  v4 = 0;
  RakNet::BitStream::ReadCompressed(a2, (char *)&v4, 8u, 1);
  CharacterData_Reset((int)v5);
  v6 = 0;
  if ( v4 )
  {
    do
    {
      Models::Apartment::Read(v5, a2);
      sub_65756A30(this, v5);
      ++v3;
    }
    while ( v3 < v4 );
  }
  v6 = -1;
  CharSlot_FreeBuffers((int)v5);
}
// 65756A30: using guessed type int __thiscall sub_65756A30(_DWORD, _DWORD);

//----- (65756B80) --------------------------------------------------------
char __thiscall Packet_ID_B0_read(int this, int a2)
{
  char result; // al
  unsigned int *v4; // edi

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    v4 = (unsigned int *)(this + 12);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 1:
      case 2:
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1080));
        return 1;
      case 3:
        VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1084));
        return 1;
      case 4:
        Packet_ID_AF_B0_read_listA((void *)(this + 1088), (unsigned int *)(this + 12));
        return 1;
      case 5:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        if ( *(_DWORD *)(this + 1080) )
          goto LABEL_13;
        result = VariableSizedPacket::DecodeString((char *)this, this + 1104);
        goto LABEL_9;
      case 6:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        result = VariableSizedPacket::DecodeString((char *)this, this + 1104);
LABEL_9:
        if ( !result )
          return result;
        goto LABEL_13;
      case 8:
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1124));
        return 1;
      case 9:
        Packet_ID_B0_read_listB((char *)(this + 1128), (unsigned int *)(this + 12));
        goto LABEL_13;
      default:
LABEL_13:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (65756CD0) --------------------------------------------------------
int __thiscall Sprite_SetDefaults2(_DWORD *this)
{
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 20))(*this, 1);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 32))(*this, 2);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 40))(*this, 0);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 44))(*this, 1);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 24))(*this, 1);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 36))(*this, 0);
  return (*(int (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 28))(*this, 3);
}

//----- (65756D30) --------------------------------------------------------
int __thiscall NPCStats_DrawAll(_DWORD *this)
{
  Sprite_SetDefaults2(this);
  (*(void (__thiscall **)(_DWORD))(*(_DWORD *)*this + 4))(*this);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 16))(*this, *(this + 97));
  (*(void (__stdcall **)(_DWORD *, int))(*(_DWORD *)*this + 104))(this + 1, 1);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 16))(*this, *(this + 98));
  (*(void (__stdcall **)(_DWORD *, int))(*(_DWORD *)*this + 104))(this + 25, 1);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 16))(*this, *(this + 99));
  (*(void (__stdcall **)(_DWORD *, int))(*(_DWORD *)*this + 104))(this + 49, 1);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 16))(*this, *(this + 100));
  (*(void (__stdcall **)(_DWORD *, int))(*(_DWORD *)*this + 104))(this + 73, 1);
  return (*(int (__thiscall **)(_DWORD))(*(_DWORD *)*this + 8))(*this);
}

//----- (65756DD0) --------------------------------------------------------
char __thiscall NPCStats_ResetXP(int this)
{
  *(float *)(this + 428) = 0.0;
  *(_DWORD *)(this + 432) = 0;
  *(_DWORD *)(this + 436) = 0;
  return EncVarMgr_SetFloat((_DWORD *)g_pEncVarMgr, 6, 0.0);
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65756E00) --------------------------------------------------------
int __thiscall Scanner_LoadTextures2(float *this)
{
  int inserted; // eax
  int v3; // ecx

  (*(void (__thiscall **)(_DWORD, _DWORD *, int))(**(_DWORD **)this + 244))(*(_DWORD *)this, (_DWORD *)this + 1, -1);
  (*(void (__stdcall **)(_DWORD *, int))(**(_DWORD **)this + 244))((_DWORD *)this + 25, -1);
  (*(void (__thiscall **)(_DWORD, _DWORD *, int))(**(_DWORD **)this + 244))(*(_DWORD *)this, (_DWORD *)this + 49, -1);
  (*(void (__thiscall **)(_DWORD, _DWORD *, int))(**(_DWORD **)this + 244))(*(_DWORD *)this, (_DWORD *)this + 73, -1);
  *((_DWORD *)this + 97) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\scanner1.dtx");
  *((_DWORD *)this + 98) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\scanner2.dtx");
  *((_DWORD *)this + 99) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\scanner3.dtx");
  inserted = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\scanner4.dtx");
  v3 = *((_DWORD *)this + 97);
  *((_DWORD *)this + 100) = inserted;
  Texture_CalcUVCoords(this + 1, v3, 0.0, 0.0, 1.0, 1.0);
  Texture_CalcUVCoords(this + 25, *((_DWORD *)this + 98), 0.0, 0.0, 1.0, 1.0);
  Texture_CalcUVCoords(this + 49, *((_DWORD *)this + 99), 0.0, 0.0, 1.0, 1.0);
  Texture_CalcUVCoords(this + 73, *((_DWORD *)this + 100), 0.0, 0.0, 1.0, 1.0);
  return 1;
}

//----- (65756F60) --------------------------------------------------------
float *__thiscall Scanner_Init2(float *this)
{
  float *v2; // edi
  int i; // ebx

  v2 = this + 1;
  for ( i = 3; i >= 0; --i )
  {
    Array_IterateWithCallback((int)v2, 24, 4, (int (__thiscall *)(int))FloatArray_SetZero);
    memset(v2, 0, 0x60u);
    v2 += 24;
  }
  *(this + 101) = 0.0;
  *(this + 102) = 0.0;
  *(this + 103) = 0.0;
  *(this + 104) = 1.0;
  *(_DWORD *)this = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 196))(g_pILTClient);
  *(this + 100) = 0.0;
  *(this + 99) = 0.0;
  *(this + 98) = 0.0;
  *(this + 97) = 0.0;
  *(this + 101) = 0.0;
  *(this + 102) = 0.0;
  *(this + 103) = 0.0;
  *(this + 104) = 1.0;
  *(this + 108) = 0.0;
  *(this + 109) = 0.0;
  *(this + 105) = 0.0;
  *(this + 106) = 500.0;
  *(this + 107) = 0.0;
  return this;
}

//----- (65757030) --------------------------------------------------------
char __thiscall Arrest_UpdateProgress(int this)
{
  int v2; // edi
  int v3; // eax
  float v5; // [esp+10h] [ebp-918h]
  float Float; // [esp+14h] [ebp-914h]
  float v7; // [esp+14h] [ebp-914h]
  int v8[269]; // [esp+18h] [ebp-910h] BYREF
  char v9; // [esp+44Ch] [ebp-4DCh]
  int v10; // [esp+450h] [ebp-4D8h]
  int v11[269]; // [esp+498h] [ebp-490h] BYREF
  char v12; // [esp+8CCh] [ebp-5Ch]
  int v13; // [esp+8D0h] [ebp-58h]
  int v14; // [esp+924h] [ebp-4h]

  v2 = 0;
  v3 = Msg2_75_Sub0_FindById((int **)dword_65ABF764, *((_DWORD *)dword_65ABF71C + 24));
  if ( v3 && *(_BYTE *)(v3 + 726) == 1 )
    v2 = *(_DWORD *)(v3 + 12);
  v5 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  if ( v2 && v2 == *(_DWORD *)(this + 436) )
    v2 = 0;
  Float = EncVarMgr_GetFloat((_DWORD *)g_pEncVarMgr, 6u);
  if ( v2 != *(_DWORD *)(this + 432) )
  {
    *(float *)(this + 428) = 0.0;
    *(_DWORD *)(this + 432) = v2;
    Float = 0.0;
    if ( v2 )
    {
      if ( !(*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 0x2000) )
      {
        Packet_ID_B0_Ctor((char *)v11);
        v14 = 0;
        v11[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
        v12 = 1;
        v13 = v2;
        Packet_ID_B0_write((int)v11);
        LTClient_SendPacket_BuildIfNeeded(v11, 2, 1, 3, 0);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 0x2000);
        v14 = -1;
        Packet_ID_B0_dtor(v11);
      }
    }
  }
  if ( !*(_DWORD *)(this + 432) )
    return EncVarMgr_SetFloat((_DWORD *)g_pEncVarMgr, 6, 0.0);
  if ( v5 - *(float *)(this + 428) >= 1.0 )
  {
    SoundMgr_PlaySoundByIndex(dword_65ABF750, 0x3Eu);
    *(float *)(this + 428) = v5;
    *(float *)(this + 424) = 500.0;
  }
  v7 = g_pGameClientShell->recoilScale * 100.0 / 5.0 + Float;
  if ( v7 >= 100.0 && !(*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 0x2000) )
  {
    Packet_ID_B0_Ctor((char *)v8);
    v14 = 1;
    v8[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    v9 = 2;
    v10 = v2;
    Packet_ID_B0_write((int)v8);
    LTClient_SendPacket_BuildIfNeeded(v8, 2, 1, 3, 0);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 0x2000);
    v7 = 0.0;
    *(_DWORD *)(this + 436) = *(_DWORD *)(this + 432);
    *(_DWORD *)(this + 432) = 0;
    v14 = -1;
    Packet_ID_B0_dtor(v8);
  }
  return EncVarMgr_SetFloat((_DWORD *)g_pEncVarMgr, 6, v7);
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65757300) --------------------------------------------------------
int __usercall CrosshairView_RenderAlt@<eax>(float *this@<ecx>, double a2@<st0>)
{
  int v3; // ecx
  void (__thiscall *v4)(int, float *, int); // edx
  void (__stdcall *v5)(float *, int, _DWORD, _DWORD, _DWORD); // edx
  double v6; // st7
  double v7; // st6
  unsigned int v8; // edi
  double v9; // st7
  void (__stdcall *v10)(float *, int); // eax
  void (__stdcall *v11)(float *, _DWORD, _DWORD, _DWORD, _DWORD); // eax
  double v12; // st7
  int v13; // edx
  void (__stdcall *v14)(float *, _DWORD); // edx
  float v16; // [esp+14h] [ebp-60h]
  float v17; // [esp+1Ch] [ebp-58h]
  _DWORD v18[4]; // [esp+28h] [ebp-4Ch]
  _BYTE v19[4]; // [esp+38h] [ebp-3Ch] BYREF
  float v20; // [esp+3Ch] [ebp-38h]
  float v21[2]; // [esp+40h] [ebp-34h]
  int v22; // [esp+48h] [ebp-2Ch] BYREF
  float v23; // [esp+4Ch] [ebp-28h]
  float v24; // [esp+50h] [ebp-24h]
  int v25; // [esp+54h] [ebp-20h]
  float v26; // [esp+58h] [ebp-1Ch]
  int v27; // [esp+5Ch] [ebp-18h]
  float v28; // [esp+60h] [ebp-14h]
  float v29; // [esp+64h] [ebp-10h]
  float v30; // [esp+68h] [ebp-Ch]
  float v31; // [esp+6Ch] [ebp-8h]
  float v32; // [esp+70h] [ebp-4h]

  Arrest_UpdateProgress((int)this);
  *(float *)&v25 = a2;
  v3 = *(_DWORD *)this;
  v27 = *(_DWORD *)&dword_65A55604 / 2;
  v30 = (float)(*(_DWORD *)&Data / 2);
  v4 = *(void (__thiscall **)(int, float *, int))(*(_DWORD *)v3 + 276);
  v31 = (float)(*(_DWORD *)&dword_65A55604 / 2);
  v4(v3, this + 1, 255);
  v5 = *(void (__stdcall **)(float *, int, _DWORD, _DWORD, _DWORD))(**(_DWORD **)this + 192);
  v28 = v31 - 250.0;
  *(float *)&v27 = v30 - 250.0;
  v5(this + 1, v27, LODWORD(v28), 500.0, 500.0);
  v6 = 2.0;
  if ( (dword_65A5E608 & 1) == 0 )
  {
    dword_65A5E608 |= 1u;
    v29 = sin(0.7853981852531433);
    v6 = 2.0;
    flt_65A5E604 = v29 * 2.0;
  }
  v29 = 500.0 / flt_65A5E604;
  v32 = g_pGameClientShell->recoilScale * 30.0 + *(this + 105);
  v7 = v32;
  *(this + 105) = v32;
  if ( v7 >= 360.0 )
    *(this + 105) = v7 - 360.0;
  *(this + 101) = 0.0;
  *(this + 102) = 0.0;
  *(this + 103) = 0.0;
  *(this + 104) = 1.0;
  *(float *)&v22 = (*(this + 101) * *(this + 102) - *(this + 104) * *(this + 103)) * v6;
  v23 = 1.0 - (*(this + 103) * *(this + 103) + *(this + 101) * *(this + 101)) * v6;
  v24 = v6 * (*(this + 101) * *(this + 104) + *(this + 103) * *(this + 102));
  v32 = *(this + 105) * 0.01745329238474369;
  Quat_RotateAroundAxis(this + 101, (float *)&v22, v32);
  (*(void (__thiscall **)(int, float *, _BYTE *))(*(_DWORD *)dword_65A5AA40 + 28))(dword_65A5AA40, this + 101, v19);
  v32 = v20;
  v8 = 0;
  do
  {
    v26 = cos(v32);
    *(float *)&v18[v8] = v26 * v29 + v30;
    v26 = sin(v32);
    v21[++v8] = v26 * v29 + v31;
    v32 = v32 + 1.570796370506287;
  }
  while ( v8 < 4 );
  (*(void (__stdcall **)(float *, int))(**(_DWORD **)this + 276))(this + 25, 255);
  (*(void (__stdcall **)(float *, _DWORD, _DWORD, _DWORD, int, _DWORD, float, _DWORD, float))(**(_DWORD **)this + 176))(
    this + 25,
    v18[0],
    LODWORD(v21[1]),
    v18[1],
    v22,
    v18[2],
    COERCE_FLOAT(LODWORD(v23)),
    v18[3],
    COERCE_FLOAT(LODWORD(v24)));
  if ( *((_DWORD *)this + 108) )
    v9 = g_pGameClientShell->recoilScale * 300.0 + *(this + 106);
  else
    v9 = 500.0;
  *(this + 106) = v9;
  if ( *(this + 106) > 750.0 )
    *(this + 106) = 750.0;
  v10 = *(void (__stdcall **)(float *, int))(**(_DWORD **)this + 276);
  v26 = *(this + 106) * 0.5;
  v10(this + 49, 255);
  v17 = *(this + 106);
  v11 = *(void (__stdcall **)(float *, _DWORD, _DWORD, _DWORD, _DWORD))(**(_DWORD **)this + 192);
  v12 = v26;
  v26 = v31 - v26;
  v16 = v26;
  v26 = v30 - v12;
  v11(this + 49, LODWORD(v26), LODWORD(v16), LODWORD(v17), LODWORD(v17));
  v13 = **(_DWORD **)this;
  *(float *)&v25 = *(float *)&v25 * 0.009999999776482582;
  v14 = *(void (__stdcall **)(float *, _DWORD))(v13 + 276);
  v25 = (int)(*(float *)&v25 * 255.0);
  v14(this + 73, (unsigned __int8)v25);
  return (*(int (__stdcall **)(float *, int, float, _DWORD, _DWORD))(**(_DWORD **)this + 192))(
           this + 73,
           v27,
           COERCE_FLOAT(LODWORD(v28)),
           500.0,
           500.0);
}
// 65A5AA40: using guessed type int dword_65A5AA40;
// 65A5E604: using guessed type float flt_65A5E604;
// 65A5E608: using guessed type int dword_65A5E608;

//----- (65757680) --------------------------------------------------------
int __thiscall RenderState_SetDefaults2(_DWORD *this)
{
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 20))(*this, 1);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 32))(*this, 2);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 40))(*this, 0);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 44))(*this, 1);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 24))(*this, 1);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 36))(*this, 0);
  return (*(int (__thiscall **)(_DWORD, int))(*(_DWORD *)*this + 28))(*this, 3);
}

//----- (657576E0) --------------------------------------------------------
int __thiscall HUD_RefreshAndRender(_DWORD *this)
{
  RenderState_SetDefaults2(this);
  (*(void (__thiscall **)(_DWORD))(*(_DWORD *)*this + 4))(*this);
  (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*this + 16))(*this, *(this + 25));
  (*(void (__stdcall **)(_DWORD *, int))(*(_DWORD *)*this + 104))(this + 1, 1);
  return (*(int (__thiscall **)(_DWORD))(*(_DWORD *)*this + 8))(*this);
}

//----- (65757720) --------------------------------------------------------
int __thiscall HUD_LoadJumpLockTexture(float *this)
{
  int inserted; // eax

  (*(void (__thiscall **)(_DWORD, float *, int))(**(_DWORD **)this + 244))(*(_DWORD *)this, this + 1, -1);
  inserted = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\jump_lock.dtx");
  *((_DWORD *)this + 25) = inserted;
  Texture_CalcUVCoords(this + 1, inserted, 0.0, 0.0, 1.0, 1.0);
  return 1;
}

//----- (65757780) --------------------------------------------------------
int __thiscall HUD_RenderScannerPulse(float *this)
{
  float v3; // [esp+18h] [ebp-Ch]
  float v4; // [esp+18h] [ebp-Ch]
  float v5; // [esp+1Ch] [ebp-8h]
  float v6; // [esp+1Ch] [ebp-8h]
  float v7; // [esp+20h] [ebp-4h]
  float v8; // [esp+20h] [ebp-4h]
  float v9; // [esp+20h] [ebp-4h]

  v3 = (float)(*(_DWORD *)&Data / 2);
  v5 = (float)(*(_DWORD *)&dword_65A55604 / 2 + 70);
  if ( *((_BYTE *)this + 108) )
  {
    v7 = g_pGameClientShell->recoilScale * 7.0 + *(this + 26);
    *(this + 26) = v7;
    if ( v7 > 52.0 )
    {
      *((_BYTE *)this + 108) = 0;
      *(this + 26) = 52.0;
    }
  }
  else
  {
    v8 = *(this + 26) - g_pGameClientShell->recoilScale * 7.0;
    *(this + 26) = v8;
    if ( v8 < 45.0 )
    {
      *(this + 26) = 45.0;
      *((_BYTE *)this + 108) = 1;
    }
  }
  v9 = *(this + 26) * 0.5;
  (*(void (__stdcall **)(float *, int))(**(_DWORD **)this + 276))(this + 1, 255);
  v6 = v5 - v9;
  v4 = v3 - v9;
  return (*(int (__stdcall **)(float *, _DWORD, _DWORD, _DWORD, _DWORD))(**(_DWORD **)this + 192))(
           this + 1,
           LODWORD(v4),
           LODWORD(v6),
           *(this + 26),
           *(this + 26));
}

//----- (65757890) --------------------------------------------------------
float *__thiscall HUDElement_Ctor(float *this)
{
  *(this + 3) = 0.0;
  *(this + 9) = 0.0;
  *(this + 15) = 0.0;
  *(this + 21) = 0.0;
  memset(this + 1, 0, 0x60u);
  *(_DWORD *)this = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 196))(g_pILTClient);
  *(this + 26) = 45.0;
  *(this + 25) = 0.0;
  *((_BYTE *)this + 108) = 1;
  return this;
}

//----- (65757B60) --------------------------------------------------------
int __thiscall ScopeHUD_Init(float *this)
{
  (*(void (__thiscall **)(_DWORD, int *, int))(**(_DWORD **)this + 244))(*(_DWORD *)this, (int *)this + 1, -1);
  (*(void (__stdcall **)(int *, int))(**(_DWORD **)this + 244))((int *)this + 25, -1);
  *((_DWORD *)this + 49) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\scope.dtx");
  *((_DWORD *)this + 50) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\scope2.dtx");
  *((_DWORD *)this + 51) = TextInput_InsertChar((int **)dword_65ABF6F8, (int *)"interface\\hud\\scope3.dtx");
  Texture_CalcUVCoords(this + 1, *((_DWORD *)this + 49), 0.0, 0.0, 1.0, 1.0);
  Texture_CalcUVCoords(this + 25, *((_DWORD *)this + 50), 0.0, 0.0, 1.0, 1.0);
  return 1;
}

//----- (65757C20) --------------------------------------------------------
float *__thiscall SoundTransform_Init(float *this)
{
  *(this + 3) = 0.0;
  *(this + 9) = 0.0;
  *(this + 15) = 0.0;
  *(this + 21) = 0.0;
  memset(this + 1, 0, 0x60u);
  *(this + 27) = 0.0;
  *(this + 33) = 0.0;
  *(this + 39) = 0.0;
  *(this + 45) = 0.0;
  memset(this + 25, 0, 0x60u);
  *(_DWORD *)this = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 196))(g_pILTClient);
  *(this + 49) = 0.0;
  *(this + 50) = 0.0;
  *(this + 51) = 0.0;
  return this;
}

//----- (65757E40) --------------------------------------------------------
void __thiscall HUD_ResetAndUpdateWindowMgr(_DWORD *this)
{
  *(this + 15) = 0;
  sub_65808DC0((int *)dword_65ABF708);
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65757EE0) --------------------------------------------------------
void __thiscall SoundFade_Update(int this)
{
  double v2; // st7
  double v3; // st6
  double v4; // st6
  int v5; // edi
  double v6; // rt1
  double v7; // st6
  double v8; // st7
  int v9; // ebx
  float v10; // [esp+10h] [ebp-8h]
  float v11; // [esp+10h] [ebp-8h]
  float v12; // [esp+14h] [ebp-4h]
  float v13; // [esp+14h] [ebp-4h]
  float v14; // [esp+14h] [ebp-4h]

  v10 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  v2 = 1.0;
  v12 = 1.0;
  v3 = v10;
  if ( *(float *)(this + 208) <= (double)v10 )
  {
    if ( *(_DWORD *)(this + 200) )
    {
      if ( (*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(_DWORD *)(this + 200)) )
      {
        v2 = 1.0;
        v4 = v12;
      }
      else
      {
        *(_DWORD *)(this + 200) = 0;
        v4 = v12;
        v2 = 1.0;
      }
      goto LABEL_5;
    }
LABEL_12:
    v4 = v12;
    goto LABEL_5;
  }
  v11 = *(float *)(this + 208) - *(float *)(this + 204);
  if ( v11 <= 0.0099999998 )
    goto LABEL_12;
  v14 = (v3 - *(float *)(this + 204)) / v11;
  v4 = v14;
  if ( v14 > 1.0 )
    v4 = (float)1.0;
LABEL_5:
  v5 = *(_DWORD *)(this + 200);
  if ( v5 )
  {
    v6 = v4;
    v7 = v2;
    v8 = v6;
    v9 = *(_DWORD *)(this + 216);
    v13 = v7;
    if ( v6 >= 0.1000000014901161 )
    {
      if ( v8 > 0.5 )
      {
        v13 = 1.0 - v8 + 1.0 - v8;
        v9 += (int)((1.0 - v13) * -50.0);
      }
    }
    else
    {
      v13 = v8 / 0.1000000014901161;
    }
    (*(void (__cdecl **)(int, float))(g_pILTClient + 412))(v5, COERCE_FLOAT(LODWORD(v13)));
    (*(void (__cdecl **)(int, _DWORD, _DWORD, _DWORD, int))(g_pILTClient + 364))(
      dword_65ABF780,
      *(_DWORD *)(this + 200),
      0,
      *(_DWORD *)(this + 212),
      v9);
  }
}
// 65ABF780: using guessed type int dword_65ABF780;

//----- (65758060) --------------------------------------------------------
void __thiscall HUD_UpdateCountdownTimer(int this)
{
  double v2; // st7
  unsigned int v3; // eax
  int v4; // eax
  int v5; // edi
  int v6; // ecx
  float v7; // [esp+Ch] [ebp-64h]
  float v8; // [esp+Ch] [ebp-64h]
  _DWORD v9[3]; // [esp+14h] [ebp-5Ch] BYREF
  char Buffer[4]; // [esp+20h] [ebp-50h] BYREF
  const char *v11; // [esp+24h] [ebp-4Ch]
  const char *v12; // [esp+2Ch] [ebp-44h]
  const char *v13; // [esp+40h] [ebp-30h]
  const char *v14; // [esp+48h] [ebp-28h]
  const char *v15; // [esp+4Ch] [ebp-24h]
  int v16; // [esp+54h] [ebp-1Ch]
  int v17; // [esp+58h] [ebp-18h]

  if ( *(_DWORD *)(this + 148) )
  {
    v7 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
    v8 = *(float *)(this + 152) - v7;
    v2 = v8;
    if ( v8 >= 60.0 )
    {
LABEL_15:
      v6 = *(_DWORD *)(this + 160);
      if ( v6 )
        (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(
          dword_65ABF780,
          v6,
          0,
          *(_DWORD *)&Data / 2 - *(_DWORD *)(this + 164),
          70);
      return;
    }
    v3 = (__int64)v2;
    if ( v3 != *(_DWORD *)(this + 156) )
    {
      *(_DWORD *)(this + 156) = v3;
      if ( v3 >= 2 )
      {
        v4 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4314, (__int64)v2);
        goto LABEL_8;
      }
      if ( v3 == 1 )
      {
        v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4315);
LABEL_8:
        v5 = v4;
        if ( v4 )
        {
          if ( *(_DWORD *)(this + 160) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(_DWORD *)(this + 160)) )
            *(_DWORD *)(this + 160) = 0;
          PlayerModels_Ctor(v9);
          v9[0] = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
          v9[1] = "FFED0000";
          sprintf(Buffer, "%u", 0);
          v13 = "1";
          v12 = "1";
          v11 = "24";
          v14 = "600";
          v15 = "100";
          *(_DWORD *)(this + 160) = (*(int (__cdecl **)(_DWORD *))(g_pILTClient + 304))(v9);
          *(_DWORD *)(this + 164) = (v17 - v16) / 2;
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
        }
      }
    }
    if ( v8 <= 0.0 )
    {
      *(_DWORD *)(this + 148) = 0;
      (*(void (**)(void))(g_pILTClient + 144))();
    }
    goto LABEL_15;
  }
}
// 65ABF780: using guessed type int dword_65ABF780;

//----- (657582E0) --------------------------------------------------------
BOOL __stdcall GameState_IsNotOne(int a1)
{
  return a1 != 1;
}

//----- (657582F0) --------------------------------------------------------
int __thiscall GameState_OnExitMode(_DWORD *this, int a2)
{
  if ( a2 == 2 )
    return 0;
  *(this + 36) = *(this + 35);
  (*(void (__cdecl **)(void *))(g_pILTClient + 532))(&unk_65A53420);
  *(this + 28) = 0;
  return 1;
}

//----- (65758340) --------------------------------------------------------
int __thiscall GameState_OnExitModeSimple(_DWORD *this, int a2)
{
  if ( a2 == 2 )
    return 0;
  *(this + 28) = 0;
  return 1;
}

//----- (65758690) --------------------------------------------------------
int __thiscall Cursor_SetVisible(_DWORD *this, int a2)
{
  int v3; // eax
  int v4; // eax
  int v6; // eax

  *(this + 27) = a2;
  if ( a2 )
  {
    v3 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 212))(g_pILTClient);
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v3 + 24))(v3, *(this + 20));
    (*(void (__cdecl **)(const char *))(g_pILTClient + 520))("CursorCenter 0");
    v4 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 212))(g_pILTClient);
    return (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)v4 + 4))(v4, 1, 0);
  }
  else
  {
    (*(void (__cdecl **)(const char *))(g_pILTClient + 520))("CursorCenter 1");
    v6 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 212))(g_pILTClient);
    return (*(int (__thiscall **)(int, _DWORD, _DWORD))(*(_DWORD *)v6 + 4))(v6, 0, 0);
  }
}

//----- (65758730) --------------------------------------------------------
void __thiscall ScreenFade_Render(int this)
{
  int v2; // eax
  double v3; // st7
  double v4; // st7
  double v5; // st7
  int v6; // [esp-14h] [ebp-48h]
  _DWORD v7[4]; // [esp+Ch] [ebp-28h] BYREF
  _DWORD v8[4]; // [esp+1Ch] [ebp-18h] BYREF
  float v9; // [esp+2Ch] [ebp-8h]
  float v10; // [esp+30h] [ebp-4h]

  if ( !*(_DWORD *)(this + 64) || *(float *)(this + 68) < 0.1000000014901161 )
    return;
  v8[0] = 0;
  v8[1] = 0;
  v8[2] = 2;
  v8[3] = 2;
  if ( !*(_DWORD *)(this + 60) )
  {
    if ( *(_DWORD *)(this + 56) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(_DWORD *)(this + 56)) )
      *(_DWORD *)(this + 56) = 0;
    v2 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
    *(_DWORD *)(this + 56) = v2;
    if ( !v2 )
      return;
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v2, 1.0);
    (*(void (__cdecl **)(_DWORD, _DWORD *, int))(g_pILTClient + 404))(*(_DWORD *)(this + 56), v8, 657930);
    (*(void (__cdecl **)(_DWORD))(g_pILTClient + 272))(*(_DWORD *)(this + 56));
    *(float *)(this + 72) = *(float *)(this + 68);
    *(_DWORD *)(this + 60) = 1;
  }
  if ( *(_DWORD *)(this + 56) )
  {
    if ( *(_DWORD *)(this + 76) )
      v3 = *(float *)(this + 72);
    else
      v3 = *(float *)(this + 68) - *(float *)(this + 72);
    v9 = v3;
    v10 = v9 / *(float *)(this + 68);
    if ( v10 >= 0.0 )
    {
      if ( v10 > 1.0 )
        v10 = 1.0;
    }
    else
    {
      v10 = 0.0;
    }
    v9 = 1.0 - v10;
    v4 = v9;
    ScreenFade_SelectTransition(v9);
    v10 = 1.0 - v4;
    if ( v10 >= 0.0 )
    {
      if ( v10 > 1.0 )
        v10 = 1.0;
    }
    else
    {
      v10 = 0.0;
    }
    (*(void (__cdecl **)(_DWORD, float))(g_pILTClient + 412))(*(_DWORD *)(this + 56), COERCE_FLOAT(LODWORD(v10)));
    v7[2] = *(_DWORD *)&Data;
    v7[3] = *(_DWORD *)&dword_65A55604;
    v6 = *(_DWORD *)(this + 56);
    v7[0] = 0;
    v7[1] = 0;
    (*(void (__cdecl **)(int, int, _DWORD *, _DWORD *, unsigned int))(g_pILTClient + 372))(
      dword_65ABF780,
      v6,
      v7,
      v8,
      0x80000000);
    v5 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 104))(g_pILTClient);
    if ( v5 >= 0.1000000014901161 )
      v5 = 0.1;
    else
      (*(void (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 104))(g_pILTClient);
    v9 = v5;
    *(float *)(this + 72) = *(float *)(this + 72) - v9;
    if ( *(_DWORD *)(this + 76) )
    {
      if ( v10 > 0.0 )
        return;
    }
    else if ( v10 < 1.0 )
    {
      return;
    }
  }
  if ( *(_DWORD *)(this + 56) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(_DWORD *)(this + 56)) )
    *(_DWORD *)(this + 56) = 0;
  if ( *(_DWORD *)(this + 76) )
  {
    *(_DWORD *)(this + 60) = 0;
    *(_DWORD *)(this + 64) = 0;
  }
  else
  {
    (*(void (__cdecl **)(_DWORD, int, _DWORD))(g_pILTClient + 164))(0, 1, 0);
  }
}
// 65ABF780: using guessed type int dword_65ABF780;

//----- (657589B0) --------------------------------------------------------
void __stdcall SoundMgr_PlaySoundIfValid(unsigned int a1)
{
  if ( a1 != -1 )
    SoundMgr_PlaySoundByIndex(dword_65ABF750, a1);
}

//----- (65758CF0) --------------------------------------------------------
BOOL __thiscall Cursor_ClipToWindow(_DWORD *this, char a2)
{
  HWND v3; // edi
  bool v4; // al
  HWND v5; // eax
  struct tagWINDOWINFO pwi; // [esp+8h] [ebp-3Ch] BYREF

  v3 = (HWND)(*(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 84))(g_LTClient);
  v4 = GetForegroundWindow() == v3;
  if ( *(this + 2) != 1 || a2 || !v4 )
    return ClipCursor(0);
  pwi.cbSize = 60;
  v5 = (HWND)(*(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 84))(g_LTClient);
  GetWindowInfo(v5, &pwi);
  return ClipCursor(&pwi.rcClient);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65758D70) --------------------------------------------------------
BOOL Cursor_CenterInWindow()
{
  HWND v0; // eax
  struct tagWINDOWINFO pwi; // [esp+0h] [ebp-3Ch] BYREF

  pwi.cbSize = 60;
  v0 = (HWND)(*(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 84))(g_LTClient);
  GetWindowInfo(v0, &pwi);
  return SetCursorPos(
           pwi.rcClient.left + (pwi.rcClient.right - pwi.rcClient.left) / 2,
           pwi.rcClient.top + (pwi.rcClient.bottom - pwi.rcClient.top) / 2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65758E40) --------------------------------------------------------
void __stdcall Render_DrawRotatedLine(float a1, float a2, float a3, float a4, float a5, int a6, int a7, char a8)
{
  float v8; // ebx
  int v9; // edi
  double v10; // st7
  double v11; // st6
  int (__cdecl *v12)(_DWORD, int); // eax
  int (__cdecl *v13)(_DWORD, int); // ecx
  int v14; // esi
  double v15; // st7
  double v16; // st6
  double v17; // st5
  double v18; // st4
  double v19; // st2
  double v20; // st2
  double v21; // st2
  double v22; // st3
  double v23; // st3
  double v24; // st7
  double v25; // st7
  int v26; // eax
  int v27; // eax
  float v28[2]; // [esp+8h] [ebp-70h] BYREF
  float v29; // [esp+10h] [ebp-68h]
  float v30; // [esp+14h] [ebp-64h]
  float v31; // [esp+18h] [ebp-60h]
  float v32; // [esp+1Ch] [ebp-5Ch]
  float v33; // [esp+20h] [ebp-58h]
  float v34; // [esp+24h] [ebp-54h]
  float v35; // [esp+28h] [ebp-50h]
  float v36; // [esp+2Ch] [ebp-4Ch]
  float v37; // [esp+30h] [ebp-48h]
  float v38; // [esp+34h] [ebp-44h]
  float v39; // [esp+38h] [ebp-40h]
  float v40; // [esp+3Ch] [ebp-3Ch]
  float v41; // [esp+40h] [ebp-38h]
  float v42; // [esp+44h] [ebp-34h]
  int v43; // [esp+48h] [ebp-30h] BYREF
  int v44; // [esp+4Ch] [ebp-2Ch]
  int v45; // [esp+50h] [ebp-28h]
  int v46; // [esp+54h] [ebp-24h]
  double v47; // [esp+58h] [ebp-20h]
  double v48; // [esp+60h] [ebp-18h]
  double v49; // [esp+68h] [ebp-10h]
  double v50; // [esp+70h] [ebp-8h]
  float v51; // [esp+80h] [ebp+8h]
  int v52; // [esp+80h] [ebp+8h]
  float v53; // [esp+8Ch] [ebp+14h]
  float v54; // [esp+8Ch] [ebp+14h]
  float v55; // [esp+8Ch] [ebp+14h]
  float v56; // [esp+90h] [ebp+18h]
  float v57; // [esp+90h] [ebp+18h]
  float v58; // [esp+90h] [ebp+18h]
  float v59; // [esp+90h] [ebp+18h]
  float v60; // [esp+90h] [ebp+18h]
  float v61; // [esp+90h] [ebp+18h]
  float v62; // [esp+94h] [ebp+1Ch]
  float v63; // [esp+94h] [ebp+1Ch]
  float v64; // [esp+94h] [ebp+1Ch]
  float v65; // [esp+98h] [ebp+20h]
  float v66; // [esp+98h] [ebp+20h]

  v8 = a1;
  v9 = 0;
  if ( a1 != 0.0 )
  {
    v10 = a2;
    v11 = a4;
    if ( a4 < (double)a2 )
    {
      v51 = a2;
      a2 = a4;
      a4 = v51;
      a1 = a3;
      a3 = a5;
      a5 = a1;
      v10 = a2;
      v11 = a4;
    }
    v43 = 0;
    v44 = 0;
    v45 = 0;
    v46 = 0;
    HIDWORD(v50) = HIWORD(a1) | 0xC00;
    if ( v11 == v10 )
    {
      v12 = *(int (__cdecl **)(_DWORD, int))(g_pILTClient + 312);
      v48 = a5 - a3;
      *(_QWORD *)&v49 = (__int64)v48;
      v52 = v12((__int64)v48, a6);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v52, 1.0);
      v43 = 0;
      v44 = 0;
      v45 = (int)v48;
    }
    else
    {
      v49 = v11 - v10;
      v13 = *(int (__cdecl **)(_DWORD, int))(g_pILTClient + 312);
      *(_QWORD *)&v48 = (__int64)v49;
      v52 = v13((__int64)v49, a6);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v52, 1.0);
      v43 = 0;
      v44 = 0;
      v45 = (int)v49;
    }
    v46 = a6;
    (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v52, &v43, a7);
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v52);
    v14 = 0;
    v43 = 0;
    v44 = 0;
    v65 = a5 - a3;
    v45 = 0;
    v46 = 0;
    v56 = a4 - a2;
    v53 = atan2(v65, v56);
    v54 = v53 * 180.0 / 3.141592653589793 * 0.01745329238474369;
    v57 = pow(v56, 2.0);
    *((float *)&v50 + 1) = v57;
    v58 = pow(v65, 2.0);
    v59 = v58 + *((float *)&v50 + 1);
    v60 = sqrt(v59);
    v66 = v60;
    v62 = (float)a6;
    v28[0] = 0.0;
    v48 = v62 * 0.5;
    v61 = 0.0 - v48;
    v28[1] = v61;
    v63 = cos(v54);
    v49 = v63 * 0.0;
    v55 = sin(v54);
    v15 = v55;
    v29 = v49 - v55 * v61;
    v47 = v55 * 0.0;
    v16 = v63;
    v30 = v47 + v61 * v63;
    v17 = a2;
    v29 = v29 + a2;
    v18 = a3;
    v30 = v30 + a3;
    v19 = v29;
    if ( v29 >= 0.0 )
    {
      if ( v19 > 0.0 )
      {
        v9 = (int)v19;
        v45 = (int)v19;
      }
    }
    else
    {
      v43 = (int)v19;
    }
    v20 = v30;
    if ( v30 >= 0.0 )
    {
      if ( v20 != 0.0 )
      {
        v14 = (int)v20;
        v46 = (int)v20;
      }
    }
    else
    {
      v44 = (int)v20;
    }
    v31 = v66;
    v32 = 0.0 - v48;
    v21 = v66 * v16;
    v33 = v21 - v61 * v15;
    v50 = v15 * v66;
    v34 = v61 * v16 + v50;
    v33 = v33 + v17;
    v34 = v34 + v18;
    if ( (double)v43 <= v33 )
    {
      if ( (double)v45 < v33 )
      {
        v9 = (int)v33;
        v45 = v9;
      }
    }
    else
    {
      v43 = (int)v33;
    }
    if ( (double)v44 <= v34 )
    {
      if ( (double)v46 < v34 )
      {
        v14 = (int)v34;
        v46 = v14;
      }
    }
    else
    {
      v44 = (int)v34;
    }
    v35 = v66;
    v64 = v48;
    v36 = v64;
    v37 = v21 - v64 * v15;
    v38 = v64 * v16 + v50;
    v37 = v37 + v17;
    v38 = v38 + v18;
    v22 = v37;
    if ( (double)v43 <= v37 )
    {
      if ( (double)v45 < v22 )
      {
        v9 = (int)v22;
        v45 = (int)v22;
      }
    }
    else
    {
      v43 = (int)v22;
    }
    v23 = v38;
    if ( (double)v44 <= v38 )
    {
      if ( (double)v46 < v23 )
      {
        v14 = (int)v23;
        v46 = (int)v23;
      }
    }
    else
    {
      v44 = (int)v23;
    }
    v39 = 0.0;
    v40 = v48;
    v41 = v49 - v15 * v64;
    v42 = v16 * v64 + v47;
    v41 = a2 + v41;
    v42 = a3 + v42;
    v24 = v41;
    if ( (double)v43 <= v41 )
    {
      if ( (double)v45 < v24 )
      {
        v9 = (int)v24;
        v45 = (int)v24;
      }
    }
    else
    {
      v43 = (int)v24;
    }
    v25 = v42;
    if ( (double)v44 <= v42 )
    {
      if ( (double)v46 < v25 )
      {
        v14 = (int)v25;
        v46 = (int)v25;
      }
    }
    else
    {
      v44 = (int)v25;
    }
    if ( *(_DWORD *)LODWORD(v8) )
    {
      v26 = (*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(_DWORD *)LODWORD(v8));
      v14 = v46;
      v9 = v45;
      if ( !v26 )
        *(_DWORD *)LODWORD(v8) = 0;
    }
    if ( a8 )
      v27 = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD))(g_pILTClient + 312))(
              *(_DWORD *)&Data,
              *(_DWORD *)&dword_65A55604,
              0);
    else
      v27 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(v9 - v43, v14 - v44, 0);
    *(_DWORD *)LODWORD(v8) = v27;
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v27, 1.0);
    (*(void (__cdecl **)(_DWORD, int, float *, int))(g_pILTClient + 380))(*(_DWORD *)LODWORD(v8), v52, v28, 4);
    (*(void (__cdecl **)(_DWORD))(g_pILTClient + 272))(*(_DWORD *)LODWORD(v8));
    if ( v52 )
      (*(void (__cdecl **)(int))(g_pILTClient + 316))(v52);
  }
}

//----- (657597D0) --------------------------------------------------------
bool __thiscall TimeCoords_Validate(int this)
{
  unsigned __int8 v1; // bl

  return *(_BYTE *)(this + 5)
      && (v1 = *(_BYTE *)(this + 4)) != 0
      && v1 <= 0x64u
      && *(_BYTE *)(this + 5) <= 0x64u
      && *(_WORD *)(this + 6) <= 0x168u;
}

//----- (657598B0) --------------------------------------------------------
char __stdcall EncVarMgr_WriteIndexSeven(char Src)
{
  return StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 7, &Src);
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65759A10) --------------------------------------------------------
int __thiscall CursorMgr_LoadCursors(_DWORD *this)
{
  int v2; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  void *v12; // eax
  float *v13; // eax
  void *v14; // eax
  float *v15; // eax
  void *v16; // eax
  float *v17; // eax
  _DWORD v18[4]; // [esp+14h] [ebp-20h] BYREF
  void *v19; // [esp+24h] [ebp-10h]
  int v20; // [esp+30h] [ebp-4h]

  v2 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 212))(g_pILTClient);
  if ( (*(int (__thiscall **)(int, const char *, _DWORD *))(*(_DWORD *)v2 + 16))(
         v2,
         "Resources\\Interface\\cursor_standard.cur",
         this + 21) )
  {
    (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR in CInterfaceMgr::Init():  Could not initialize Cursor!");
    return 0;
  }
  v4 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 212))(g_pILTClient);
  if ( (*(int (__thiscall **)(int, const char *, _DWORD *))(*(_DWORD *)v4 + 16))(
         v4,
         "Resources\\Interface\\cursor_edit.cur",
         this + 22)
    || (v5 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 212))(g_pILTClient),
        (*(int (__thiscall **)(int, const char *, _DWORD *))(*(_DWORD *)v5 + 16))(
          v5,
          "Resources\\Interface\\cursor_hand.cur",
          this + 23))
    || (v6 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 212))(g_pILTClient),
        (*(int (__thiscall **)(int, const char *, _DWORD *))(*(_DWORD *)v6 + 16))(
          v6,
          "Resources\\Interface\\cursor_context.cur",
          this + 24))
    || (v7 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 212))(g_pILTClient),
        (*(int (__thiscall **)(int, const char *, _DWORD *))(*(_DWORD *)v7 + 16))(
          v7,
          "Resources\\Interface\\cursor_move.cur",
          this + 25))
    || (v8 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 212))(g_pILTClient),
        (*(int (__thiscall **)(int, const char *, _DWORD *))(*(_DWORD *)v8 + 16))(
          v8,
          "Resources\\Interface\\cursor_resize1.cur",
          this + 26)) )
  {
    (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR in CInterfaceMgr::Init():  Could not initialize Cursor!");
    return 0;
  }
  *(this + 20) = *(this + 21);
  v9 = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 212))(g_pILTClient);
  if ( (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v9 + 24))(v9, *(this + 20)) )
  {
    (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR:  Could not initialize Cursor!");
    return 0;
  }
  v10 = *(this + 42);
  *(this + 12) = 0;
  *(this + 13) = 0;
  v18[0] = 0;
  v18[1] = 0;
  v18[2] = 2;
  v18[3] = 2;
  if ( v10 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v10) )
    *(this + 42) = 0;
  v11 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  *(this + 42) = v11;
  if ( !v11 )
    return 0;
  (*(void (__cdecl **)(int, _DWORD *, int))(g_pILTClient + 404))(v11, v18, -2143272705);
  (*(void (__cdecl **)(_DWORD))(g_pILTClient + 272))(*(this + 42));
  (*(void (__cdecl **)(_DWORD, _DWORD))(g_pILTClient + 412))(*(this + 42), 1.0);
  v12 = operator new(0x1B8u);
  v19 = v12;
  v20 = 0;
  v13 = v12 ? Scanner_Init2((float *)v12) : 0;
  v20 = -1;
  *(this + 55) = v13;
  if ( !v13 )
    return 0;
  Scanner_LoadTextures2(v13);
  v14 = operator new(0x1BCu);
  v19 = v14;
  v20 = 1;
  v15 = v14 ? Scanner_Init((float *)v14) : 0;
  v20 = -1;
  *(this + 56) = v15;
  if ( !v15 )
    return 0;
  Scanner_LoadTextures(v15);
  v16 = operator new(0x70u);
  v19 = v16;
  v20 = 2;
  v17 = v16 ? HUDElement_Ctor((float *)v16) : 0;
  v20 = -1;
  *(this + 57) = v17;
  if ( !v17 )
    return 0;
  HUD_LoadJumpLockTexture(v17);
  return 1;
}

//----- (65759D20) --------------------------------------------------------
void __thiscall HUD_HideAndReset(void *this)
{
  sub_6580AEC0((int *)dword_65ABF708);
  HUD_UpdateCountdownTimer((int)this);
  JUMPOUT(0x65758C00);
}
// 65759D38: control flows out of bounds to 65758C00
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65759D40) --------------------------------------------------------
int __thiscall HUD_Update(int this)
{
  double v2; // st7
  bool Bool_std; // al
  float *v4; // ecx
  bool v5; // al
  int **v6; // ecx
  int WindowById; // eax
  _BYTE *v8; // eax
  int *v9; // eax
  float *v10; // ecx
  float v12; // [esp+4h] [ebp-4h]

  if ( *(_DWORD *)(this + 12) && SharedMem_ReadDword_this(g_pPlayerStats, 0x1CEC2u) == 1 )
  {
    PlayerMarkers_Render(dword_65ABF720, dword_65ABF780);
    v2 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
    if ( *(_DWORD *)(this + 8) == 4 )
    {
      Crosshair_TryUpdate((int)dword_65ABF71C);
    }
    else
    {
      HUD_RenderCrosshair((int *)dword_65ABF71C);
      if ( *(_DWORD *)(this + 220) )
      {
        Bool_std = SharedMem_ReadBool_std(0x1D6A9u);
        v4 = *(float **)(this + 220);
        if ( Bool_std )
        {
          CrosshairView_RenderAlt(v4, v2);
          NPCStats_DrawAll(*(_DWORD **)(this + 220));
        }
        else
        {
          NPCStats_ResetXP((int)v4);
        }
      }
      if ( *(_DWORD *)(this + 224) )
      {
        v5 = SharedMem_ReadBool_std(0x1EEC4u);
        v6 = *(int ***)(this + 224);
        if ( v5 )
        {
          CrosshairView_Render(v6, v2);
          PlayerStats_DrawAll(*(_DWORD **)(this + 224));
        }
        else
        {
          PlayerStats_ResetXP((int)v6);
        }
      }
      if ( SharedMem_ReadBool_std(0x1EEBEu) )
      {
        WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x28u);
        if ( WindowById && !*(_BYTE *)(WindowById + 6241) )
        {
          CraftingWindow_PopulateItemList((void (__fastcall ***)(char **))WindowById);
          WindowMgr_ShowWindowById((int *)dword_65ABF708, 0x28u);
        }
      }
      else
      {
        v8 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x28u);
        if ( v8 && v8[6241] )
        {
          (*(void (__thiscall **)(_BYTE *, _DWORD))(*(_DWORD *)v8 + 28))(v8, 0);
          v9 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 3u);
          if ( v9 )
            StatusList_Resize(v9);
          SharedMem_WriteDword_this(g_pPlayerStats, 0x1EEBFu, 0);
        }
      }
      v10 = *(float **)(this + 228);
      if ( v10 )
      {
        v12 = v2;
        if ( *(float *)(this + 180) >= (double)v12 && *((_DWORD *)dword_65ABF714 + 71) != 2 )
        {
          HUD_RenderScannerPulse(v10);
          HUD_RefreshAndRender(*(_DWORD **)(this + 228));
        }
      }
    }
  }
  ScreenFade_Render(this);
  if ( SharedMem_ReadDword_this(g_pPlayerStats, 0x1CEC2u) == 1 )
  {
    HUD_HideAndReset((void *)this);
    SoundFade_Update(this);
  }
  return 1;
}
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF780: using guessed type int dword_65ABF780;

//----- (65759F20) --------------------------------------------------------
int __thiscall CameraMode_EnterMode(_DWORD *this, int a2)
{
  int Element; // ebx

  if ( a2 == 3 )
    return 0;
  *(this + 3) = 0;
  Cursor_SetVisible(this, 1);
  *(this + 4) = 0;
  *(this + 5) = 0;
  *(this + 6) = 0;
  *(this + 7) = 0;
  Element = IndexArray_GetElement(dword_65ABF6FC, *((_DWORD *)dword_65ABF700 + 1));
  if ( Element )
  {
    HIBYTE(a2) = *(this + 8) == 1;
    (*(void (__cdecl **)(int, char *, _DWORD *, _DWORD *, _DWORD *, _DWORD *))(g_pILTClient + 592))(
      Element,
      (char *)&a2 + 3,
      this + 4,
      this + 5,
      this + 6,
      this + 7);
    (*(void (__cdecl **)(int, int, _DWORD, _DWORD, _DWORD, _DWORD))(g_pILTClient + 596))(
      Element,
      1,
      0,
      0,
      *(_DWORD *)&Data,
      *(_DWORD *)&dword_65A55604);
  }
  (*(void (__cdecl **)(void *))(g_pILTClient + 532))(&unk_65A53420);
  return 1;
}

//----- (65759FE0) --------------------------------------------------------
int __thiscall CameraMode_ExitMode(_DWORD *this, int a2)
{
  int Element; // eax
  int v5; // ecx

  if ( a2 == 3 )
    return 0;
  Widget_Detach((int *)dword_65ABF70C);
  if ( a2 != 2 )
  {
    Element = IndexArray_GetElement(dword_65ABF6FC, *((_DWORD *)dword_65ABF700 + 1));
    if ( Element )
    {
      v5 = *(this + 4);
      if ( v5 || *(this + 5) || *(this + 6) || *(this + 7) )
        (*(void (__cdecl **)(int, bool, int, _DWORD, _DWORD, _DWORD))(g_pILTClient + 596))(
          Element,
          *(this + 8) == 1,
          v5,
          *(this + 5),
          *(this + 6),
          *(this + 7));
    }
  }
  *(this + 3) = 1;
  Cursor_SetVisible(this, 1);
  (*(void (**)(void))(g_pILTClient + 428))();
  return 1;
}
// 65ABF70C: using guessed type int dword_65ABF70C;

//----- (6575A090) --------------------------------------------------------
int __thiscall GameMode_HideCursor(_DWORD *this, int a2)
{
  if ( a2 == 1 )
    return 0;
  Cursor_SetVisible(this, 0);
  return 1;
}

//----- (6575A0B0) --------------------------------------------------------
int __thiscall GameMode_CanTransition(_DWORD *this, int a2, int a3)
{
  int result; // eax

  switch ( a2 )
  {
    case 1:
      result = GameState_IsNotOne(a3);
      if ( !result )
        return result;
      break;
    case 2:
      result = GameState_OnExitModeSimple(this, a3);
      if ( !result )
        return result;
      break;
    case 3:
      result = CameraMode_ExitMode(this, a3);
      if ( !result )
        return result;
      break;
  }
  switch ( a3 )
  {
    case 1:
      result = GameMode_HideCursor(this, a2);
      break;
    case 2:
      result = GameState_OnExitMode(this, a2);
      break;
    case 3:
      result = CameraMode_EnterMode(this, a2);
      break;
    case 4:
      Cursor_SetVisible(this, 1);
      goto LABEL_14;
    default:
LABEL_14:
      result = 1;
      break;
  }
  return result;
}

//----- (6575A3F0) --------------------------------------------------------
int __thiscall IconAtlas_GetHandleByIndex(_DWORD *this, int __saved_registers)
{
  int v3; // esi

  if ( __saved_registers >= *(this + 12) )
    return 0;
  v3 = *(_DWORD *)(*(this + 11) + 4 * __saved_registers);
  (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v3, 1.0);
  return v3;
}

//----- (6575A430) --------------------------------------------------------
int __thiscall GameMode_TrySetMode(int *this, int a2)
{
  if ( SharedMem_ReadDword_this(g_pPlayerStats, 0x1CEC2u) == 2 && a2 == 4 && !SharedMem_ReadBool_std(0x72u)
    || !GameMode_CanTransition(this, *(this + 2), a2) )
  {
    return 0;
  }
  if ( a2 == 2 || a2 == 3 )
  {
    nullsub_9(dword_65ABF718);
    goto LABEL_13;
  }
  if ( a2 != 1 )
  {
    if ( a2 != 4 )
      goto LABEL_14;
LABEL_13:
    Cursor_CenterInWindow();
    goto LABEL_14;
  }
  (*(void (**)(void))(g_pILTClient + 428))();
  sub_658079C0((_DWORD **)dword_65ABF708);
  WindowMgr_CloseAllInputFocused((_BYTE **)dword_65ABF708);
  sub_65808D40((_DWORD *)dword_65ABF708);
  sub_65808D90((_DWORD *)dword_65ABF708);
  sub_65808CF0((_DWORD *)dword_65ABF708);
  sub_65808BD0((_DWORD *)dword_65ABF708);
  *(_DWORD *)(dword_65ABF708 + 36) = 0;
  *(_DWORD *)(dword_65ABF6F4 + 80) = *(_DWORD *)(dword_65ABF6F4 + 84);
  nullsub_10(dword_65ABF718);
LABEL_14:
  *(this + 2) = a2;
  Cursor_ClipToWindow(this, 0);
  return 1;
}
// 65889FB0: using guessed type int __thiscall nullsub_9(_DWORD);
// 65889FC0: using guessed type int __thiscall nullsub_10(_DWORD);
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (6575A540) --------------------------------------------------------
int __thiscall GameMode_SetModeThree(int *this, unsigned int a2)
{
  int result; // eax

  if ( *(this + 2) == 3 || (result = GameMode_TrySetMode(this, 3)) != 0 )
  {
    Widget_HandleSlotEvent((_DWORD *)dword_65ABF70C, a2);
    return 1;
  }
  return result;
}
// 65ABF70C: using guessed type int dword_65ABF70C;

//----- (6575A570) --------------------------------------------------------
int __thiscall GameMode_SetModeFour(int *this, unsigned int a2)
{
  int result; // eax
  void *WindowById; // eax

  if ( *(this + 2) == 4 || (result = GameMode_TrySetMode(this, 4)) != 0 )
  {
    WindowById = (void *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x4Au);
    if ( WindowById )
      WindowMgr_HandleWindowSwitch(WindowById, a2);
    WindowMgr_ShowWindowById((int *)dword_65ABF708, a2);
    return 1;
  }
  return result;
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (6575A650) --------------------------------------------------------
_DWORD *RBTreeNode_Alloc()
{
  _DWORD *result; // eax

  result = operator new(0x30u);
  if ( result )
    *result = 0;
  if ( result != (_DWORD *)-4 )
    result[1] = 0;
  if ( result != (_DWORD *)-8 )
    result[2] = 0;
  *((_BYTE *)result + 40) = 1;
  *((_BYTE *)result + 41) = 0;
  return result;
}

//----- (6575A810) --------------------------------------------------------
int __thiscall GameInput_HandleKeyPress(int this, int a2)
{
  int WindowById; // eax
  int v5; // eax
  int v6; // esi
  char *v7; // eax
  __time64_t v8; // rax
  unsigned int v9; // ebx
  unsigned int v10; // esi
  char *v11; // eax
  void (__thiscall *v12)(int, int, int); // edx
  void (__thiscall *v13)(int, int, int); // eax
  int v14; // [esp-8h] [ebp-5F0h]
  int v15; // [esp+10h] [ebp-5D8h] BYREF
  int v16; // [esp+14h] [ebp-5D4h] BYREF
  struct Packet_Id107 v17; // [esp+18h] [ebp-5D0h] BYREF
  int v18; // [esp+5E4h] [ebp-4h]

  switch ( a2 )
  {
    case '2':
      if ( *(_DWORD *)(this + 8) == 1 )
      {
        if ( Player_IsInGameMode2() )
          return 0;
        SoundMgr_PlaySoundByIndex(dword_65ABF750, 0x3Au);
        InventoryWindow_ShowPopup((int *)dword_65ABF708, 0);
      }
      return 1;
    case '5':
      *((_BYTE *)dword_65ABF714 + 280) = *((_BYTE *)dword_65ABF714 + 280) == 0;
      SharedMem_WriteU8_std(0x1EA47u, *((_BYTE *)dword_65ABF714 + 280));
      return 0;
    case '6':
      *((_DWORD *)dword_65ABF71C + 1) = *((_DWORD *)dword_65ABF71C + 1) == 0;
      return 0;
    case '7':
      sub_65808F10((_DWORD *)dword_65ABF708);
      return 0;
    case '9':
      WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 3u);
      if ( WindowById )
        (*(void (__thiscall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)WindowById + 4))(WindowById, 5, 0, 0);
      WindowMgr_ShowWindowById((int *)dword_65ABF708, 3u);
      return 0;
    case ':':
      v5 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
      if ( !v5 )
        return 0;
      if ( *(_WORD *)(v5 + 8) )
      {
        v8 = _time64(0);
        v9 = HIDWORD(v8);
        v10 = v8;
        if ( v8 >= *(_QWORD *)(this + 120) )
        {
          Packet_Id107_Init(&v17);
          v17.subId = 352;
          v18 = 0;
          *(unsigned int *)((char *)&v17.optC + 2) = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
          *(unsigned int *)((char *)&v17.optA + 2) = SharedMem_ReadDword_this(dword_65ABF73C, 0);
          *(unsigned int *)((char *)&v17.optB + 2) = SharedMem_ReadDword_this(dword_65ABF73C, 2u);
          Packet_ID_107_Write((int)&v17);
          LTClient_SendPacket_BuildIfNeeded(&v17, 1, 1, 3, 0);
          *(_QWORD *)(this + 120) = __PAIR64__(v9, v10) + 10;
          v18 = -1;
          *(_DWORD *)v17._pad0 = &vtbl_Packet_Unknown0;
          BitStream_FreeOwnedBuffer((int)&v17._pad0[12]);
        }
        else
        {
          v6 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                 g_pILTClient,
                 5656,
                 *(_DWORD *)(this + 120) - v8);
          if ( v6 )
            v11 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
          else
            v11 = (char *)byte_659A8B98;
          FriendList_AddEntry(dword_65ABF748, v11, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
          if ( v6 )
            goto LABEL_17;
        }
      }
      else
      {
        v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5655);
        if ( v6 )
          v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
        else
          v7 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v7, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
        if ( v6 )
LABEL_17:
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
      }
      return 0;
    case ';':
      if ( !(*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 2048) )
      {
        LTObject_Create(&v16);
        v12 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v16 + 36);
        v18 = 1;
        v12(v16, 152, 8);
        v14 = *FXInstance_Clone(&v16, &v15);
        v13 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)g_pILTClient + 324);
        LOBYTE(v18) = 2;
        v13(g_pILTClient, v14, 1);
        LOBYTE(v18) = 1;
        if ( v15 )
          (*(void (__thiscall **)(int))(*(_DWORD *)v15 + 8))(v15);
        v18 = -1;
        FXInstance_ReleaseAndClear(&v16);
      }
      return 0;
    default:
      return 0;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (6575AE30) --------------------------------------------------------
int __stdcall WorldLogin_LoadWorldFromPath(char *worldPath, int worldDisplayName)
{
  char *worldPathCStr; // esi
  char *worldFileObj; // ecx
  void (__thiscall *fileSetFlagFn)(char *, int, int); // eax
  void (__thiscall *ltClient_LoadWorld)(int, int, int); // eax
  int worldFileId; // [esp-8h] [ebp-20h]
  int worldFileHandle; // [esp+8h] [ebp-10h] BYREF
  int cleanupState; // [esp+14h] [ebp-4h]

  worldPathCStr = worldPath;
  if ( !worldPath || !*worldPath )
    return 0;
  PlayerStats_SetTargetAndRefresh(dword_65ABF73C, 1, 1);
  SharedMem_WriteString_std(19, worldPathCStr);
  worldPath = 0;
  if ( (*(int (__thiscall **)(int, char **))(*(_DWORD *)dword_65A5A6E8 + 36))(dword_65A5A6E8, &worldPath) )
  {
    worldFileObj = 0;
    worldPath = 0;
  }
  else
  {
    (*(void (__thiscall **)(char *))(*(_DWORD *)worldPath + 4))(worldPath);
    worldFileObj = worldPath;
  }
  fileSetFlagFn = *(void (__thiscall **)(char *, int, int))(*(_DWORD *)worldFileObj + 36);
  cleanupState = 0;
  fileSetFlagFn(worldFileObj, 111, 8);
  (*(void (__thiscall **)(char *, int, int))(*(_DWORD *)worldPath + 36))(worldPath, 1, 32);
  (*(void (__thiscall **)(char *, char *))(*(_DWORD *)worldPath + 56))(worldPath, worldPathCStr);
  worldFileId = *FXInstance_Clone(&worldPath, &worldFileHandle);
  ltClient_LoadWorld = *(void (__thiscall **)(int, int, int))(*(_DWORD *)g_pILTClient + 324);
  LOBYTE(cleanupState) = 1;
  ltClient_LoadWorld(g_pILTClient, worldFileId, 1);
  LOBYTE(cleanupState) = 0;
  if ( worldFileHandle )
    (*(void (__thiscall **)(int))(*(_DWORD *)worldFileHandle + 8))(worldFileHandle);
  cleanupState = -1;
  if ( worldPath )
    (*(void (__thiscall **)(char *))(*(_DWORD *)worldPath + 8))(worldPath);
  return 1;
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;

//----- (6575AF60) --------------------------------------------------------
int **__thiscall sub_6575AF60(int **this, int **a2, _DWORD *a3)
{
  int *v3; // edx
  int v4; // eax

  v3 = *(this + 1);
  v4 = v3[1];
  while ( !*(_BYTE *)(v4 + 41) )
  {
    if ( *(_DWORD *)(v4 + 16) >= *a3 )
    {
      v3 = (int *)v4;
      v4 = *(_DWORD *)v4;
    }
    else
    {
      v4 = *(_DWORD *)(v4 + 8);
    }
  }
  if ( v3 == *(this + 1) || *a3 < (unsigned int)v3[4] )
  {
    *a2 = *(this + 1);
    return a2;
  }
  else
  {
    *a2 = v3;
    return a2;
  }
}

//----- (6575B800) --------------------------------------------------------
_DWORD *__thiscall sub_6575B800(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  _DWORD *v6; // eax
  _DWORD *v7; // esi
  int v8; // eax
  int v9; // ecx
  _BYTE v10[8]; // [esp+8h] [ebp-8h] BYREF

  if ( !*(this + 2) )
  {
    sub_6575B010(this, a2, 1, *(this + 1), a4);
    return a2;
  }
  v6 = (_DWORD *)*(this + 1);
  v7 = a4;
  if ( a3 == (_DWORD *)*v6 )
  {
    if ( *a4 < a3[4] )
    {
      sub_6575B010(this, a2, 1, a3, a4);
      return a2;
    }
    goto LABEL_22;
  }
  if ( a3 == v6 )
  {
    v8 = v6[2];
    if ( *(_DWORD *)(v8 + 16) < *a4 )
    {
      sub_6575B010(this, a2, 0, v8, a4);
      return a2;
    }
    goto LABEL_22;
  }
  if ( *a4 >= a3[4] || (a4 = a3, sub_6575A2B0(&a4), a4[4] >= *v7) )
  {
    if ( a3[4] >= *v7 || (a4 = a3, sub_6575A310(&a4), a4 != (_DWORD *)*(this + 1)) && *v7 >= a4[4] )
    {
LABEL_22:
      v9 = *(_DWORD *)sub_6575B3C0(this, v10, v7);
      *a2 = v9;
      return a2;
    }
    if ( *(_BYTE *)(a3[2] + 41) )
      sub_6575B010(this, a2, 0, a3, v7);
    else
      sub_6575B010(this, a2, 1, a4, v7);
    return a2;
  }
  else
  {
    if ( *(_BYTE *)(a4[2] + 41) )
      sub_6575B010(this, a2, 0, a4, v7);
    else
      sub_6575B010(this, a2, 1, a3, v7);
    return a2;
  }
}
// 6575A2B0: using guessed type int __thiscall sub_6575A2B0(_DWORD);
// 6575A310: using guessed type int __thiscall sub_6575A310(_DWORD);
// 6575B010: using guessed type int __thiscall sub_6575B010(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 6575B3C0: using guessed type int __thiscall sub_6575B3C0(_DWORD, _DWORD, _DWORD);

//----- (6575B990) --------------------------------------------------------
int *__thiscall sub_6575B990(int **this, unsigned int *a2)
{
  int *v2; // edx
  int v3; // eax
  unsigned int v4; // ebx
  _DWORD v6[13]; // [esp+10h] [ebp-34h] BYREF

  v2 = *(this + 1);
  v3 = v2[1];
  while ( !*(_BYTE *)(v3 + 41) )
  {
    if ( *(_DWORD *)(v3 + 16) >= *a2 )
    {
      v2 = (int *)v3;
      v3 = *(_DWORD *)v3;
    }
    else
    {
      v3 = *(_DWORD *)(v3 + 8);
    }
  }
  if ( v2 != *(this + 1) && *a2 >= v2[4] )
    return v2 + 6;
  v6[8] = 0;
  v6[9] = 0;
  v4 = *a2;
  v6[2] = 0;
  v6[12] = 1;
  v6[0] = v4;
  v6[3] = v6[7];
  memset(&v6[4], 0, 12);
  return (int *)(*sub_6575B800(this, &a2, v2, v6) + 24);
}

//----- (6575BB20) --------------------------------------------------------
void __thiscall GameInput_HandleMouseClick(
        int **this,
        int *__return_address,
        char a3,
        int *a4,
        unsigned int a5,
        unsigned int a6)
{
  int *v7; // ebx
  int *v8; // edi
  bool v9; // al
  int v10; // edi
  unsigned __int8 v11; // al
  unsigned __int16 *v12; // esi
  int v13; // ebx
  int v14; // edi
  int v15; // eax
  int v16; // ecx
  void (__cdecl **v17)(int, int, _DWORD *, _DWORD); // edi
  int HandleByIndex; // eax
  int v19; // edi
  __time64_t v20; // rax
  unsigned int v21; // ebx
  unsigned __int64 v22; // kr00_8
  int *v23; // eax
  int v24; // ecx
  unsigned int v25; // esi
  unsigned int v26; // ebx
  int v27; // eax
  int v28; // edx
  _DWORD v29[4]; // [esp+14h] [ebp-90h] BYREF
  char *v30; // [esp+24h] [ebp-80h]
  int **v31; // [esp+28h] [ebp-7Ch]
  int v32; // [esp+2Ch] [ebp-78h] BYREF
  int v33; // [esp+30h] [ebp-74h]
  unsigned __int64 v34; // [esp+34h] [ebp-70h]
  float v35[2]; // [esp+3Ch] [ebp-68h] BYREF
  float v36; // [esp+44h] [ebp-60h]
  float v37; // [esp+48h] [ebp-5Ch]
  float v38; // [esp+4Ch] [ebp-58h]
  float v39; // [esp+50h] [ebp-54h]
  float v40; // [esp+54h] [ebp-50h]
  float v41; // [esp+58h] [ebp-4Ch]
  float v42; // [esp+5Ch] [ebp-48h]
  float v43; // [esp+60h] [ebp-44h]
  float v44; // [esp+64h] [ebp-40h]
  float v45; // [esp+68h] [ebp-3Ch]
  float v46; // [esp+6Ch] [ebp-38h]
  float v47; // [esp+70h] [ebp-34h]
  float v48; // [esp+74h] [ebp-30h]
  float v49; // [esp+78h] [ebp-2Ch]
  float v50; // [esp+7Ch] [ebp-28h]
  int *v51; // [esp+80h] [ebp-24h] BYREF
  int v52; // [esp+84h] [ebp-20h] BYREF
  int v53; // [esp+88h] [ebp-1Ch]
  float v54; // [esp+8Ch] [ebp-18h]
  float v55; // [esp+90h] [ebp-14h]
  float v56; // [esp+94h] [ebp-10h]
  int v57; // [esp+A0h] [ebp-4h]
  int v58; // [esp+B0h] [ebp+Ch]

  if ( !__return_address )
    return;
  v7 = a4;
  v52 = *a4;
  v31 = this + 32;
  sub_6575AF60(this + 32, &v51, &v52);
  v8 = v51;
  v9 = v51 != *(this + 33);
  HIBYTE(v53) = v9;
  if ( !a3 && v9 && _time64(0) <= *((_QWORD *)v8 + 4) )
  {
    v10 = v8[6];
    if ( !v10 )
    {
      GameInput_HandleMouseClick(this, __return_address, 1, v7, a5, a6);
      return;
    }
    goto LABEL_32;
  }
  v58 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(128, 128, 0);
  (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v58, 1.0);
  v11 = 0;
  v52 = 0;
  while ( 1 )
  {
    if ( v11 < 0xAu )
    {
      v12 = (unsigned __int16 *)&v7[3 * v11 + 1];
      if ( BYTE1(v7[3 * v11 + 2]) )
      {
        if ( LOBYTE(v7[3 * v11 + 2]) )
        {
          if ( &v7[3 * v11] != (int *)-4 )
          {
            v30 = sub_6594F990(*v12);
            if ( v30 )
            {
              if ( TimeCoords_Validate((int)v12) && *v12 < 0xEu )
              {
                v13 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(128, 128, 0);
                if ( v13 )
                {
                  (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v13, 1.0);
                  LODWORD(v56) = *((unsigned __int8 *)v12 + 5);
                  v14 = (int)((128.0 - (double)SLODWORD(v56) / 100.0 * 128.0) * 0.5);
                  LODWORD(v56) = *((unsigned __int8 *)v12 + 4);
                  v15 = (int)(0.5 * (128.0 - (double)SLODWORD(v56) / 100.0 * 128.0));
                  v29[3] = 126 - v14;
                  v16 = *v12;
                  v29[0] = v15 - 2;
                  v29[1] = v14 - 2;
                  v29[2] = 126 - v15;
                  v17 = (void (__cdecl **)(int, int, _DWORD *, _DWORD))(g_pILTClient + 368);
                  HandleByIndex = IconAtlas_GetHandleByIndex(dword_65ABF760, v16);
                  (*v17)(v13, HandleByIndex, v29, 0);
                  (*(void (__cdecl **)(int))(g_pILTClient + 272))(v13);
                  LODWORD(v56) = v12[3];
                  v54 = (double)SLODWORD(v56) * 0.01745329238474369;
                  v56 = 0.0 - 64.0;
                  v50 = cos(v54);
                  v54 = sin(v54);
                  v36 = v50 * v56 - v54 * v56;
                  v37 = v50 * v56 + v54 * v56;
                  v36 = v36 + 64.0;
                  v37 = v37 + 64.0;
                  v35[0] = v56 + 64.0;
                  v35[1] = v35[0];
                  v40 = v50 * 64.0 - v54 * v56;
                  v41 = v50 * v56 + v54 * 64.0;
                  v40 = v40 + 64.0;
                  v41 = v41 + 64.0;
                  v38 = 128.0;
                  v39 = v35[0];
                  v44 = v50 * 64.0 - v54 * 64.0;
                  v45 = v50 * 64.0 + v54 * 64.0;
                  v44 = v44 + 64.0;
                  v45 = v45 + 64.0;
                  v42 = 128.0;
                  v43 = 128.0;
                  v46 = v56;
                  v48 = v50 * v56 - v54 * 64.0;
                  v55 = v54;
                  v56 = v50;
                  v49 = v54 * v46 + v50 * 64.0;
                  v48 = v48 + 64.0;
                  v49 = v49 + 64.0;
                  v46 = v46 + 64.0;
                  v47 = 128.0;
                  v19 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(128, 128, 0);
                  if ( v19 )
                  {
                    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v19, 1.0);
                    (*(void (__cdecl **)(int, int, float *, int))(g_pILTClient + 380))(v19, v13, v35, 4);
                    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v19);
                    (*(void (__cdecl **)(int))(g_pILTClient + 316))(v13);
                    if ( v30[8] )
                      (*(void (__cdecl **)(int, int, _DWORD, _DWORD, _DWORD))(g_pILTClient + 364))(
                        v58,
                        v19,
                        0,
                        *((char *)v12 + 2),
                        *((char *)v12 + 3));
                    else
                      (*(void (__cdecl **)(int, int, _DWORD, _DWORD, _DWORD, unsigned int, unsigned int))(g_pILTClient + 356))(
                        v58,
                        v19,
                        0,
                        *((char *)v12 + 2),
                        *((char *)v12 + 3),
                        0x80000000,
                        *((unsigned __int8 *)v12 + 10)
                      | ((*((unsigned __int8 *)v12 + 9) | ((*((unsigned __int8 *)v12 + 8) | 0xFFFF8000) << 8)) << 8));
                    (*(void (__cdecl **)(int))(g_pILTClient + 316))(v19);
                    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v58);
                  }
                  v8 = v51;
                }
              }
            }
          }
        }
      }
    }
    v11 = ++v52;
    if ( v52 >= 10 )
      break;
    v7 = a4;
  }
  if ( *a4 )
  {
    if ( HIBYTE(v53) && v8[6] && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v8[6]) )
      v8[6] = 0;
    v57 = 0;
    v32 = v58;
    v20 = _time64(0);
    v21 = HIDWORD(v20);
    HIDWORD(v20) = *a4;
    v22 = __PAIR64__(v21, v20) + 300;
    v34 = __PAIR64__(v21, v20) + 300;
    a4 = (int *)HIDWORD(v20);
    v23 = sub_6575B990(v31, (unsigned int *)&a4);
    v24 = v33;
    *v23 = v58;
    v23[1] = v24;
    *((_QWORD *)v23 + 1) = v22;
    v57 = -1;
  }
  if ( v58 )
  {
    v10 = v58;
LABEL_32:
    if ( *__return_address )
    {
      if ( !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*__return_address) )
        *__return_address = 0;
    }
    v25 = a6;
    v26 = a5;
    v27 = (*(int (__cdecl **)(unsigned int, unsigned int, _DWORD))(g_pILTClient + 312))(a5, a6, 0);
    *__return_address = v27;
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v27, 1.0);
    v28 = *__return_address;
    v32 = 0;
    v33 = 0;
    v34 = __PAIR64__(v25, v26);
    (*(void (__cdecl **)(int, int, int *, _DWORD))(g_pILTClient + 368))(v28, v10, &v32, 0);
    (*(void (__cdecl **)(_DWORD))(g_pILTClient + 272))(*__return_address);
  }
}

//----- (6575C340) --------------------------------------------------------
float *__thiscall GameInputMgr_Ctor(float *this)
{
  _DWORD *v2; // ebx
  _DWORD *v3; // eax

  *(_DWORD *)this = &off_659C3BD8;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  v2 = this + 32;
  *(this + 12) = 0.0;
  *(this + 13) = 0.0;
  v3 = RBTreeNode_Alloc();
  v2[1] = v3;
  *((_BYTE *)v3 + 41) = 1;
  *(_DWORD *)(v2[1] + 4) = v2[1];
  *(_DWORD *)v2[1] = v2[1];
  *(_DWORD *)(v2[1] + 8) = v2[1];
  v2[2] = 0;
  *(this + 53) = 0.0;
  *(this + 54) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *(this + 2) = 0.0;
  *(this + 17) = 0.0;
  *(this + 57) = 0.0;
  *(this + 18) = 0.0;
  *(this + 11) = 0.0;
  *(this + 14) = 0.0;
  *(this + 16) = 0.0;
  *(this + 15) = 0.0;
  *(this + 27) = 0.0;
  *(this + 28) = 0.0;
  *((_DWORD *)this + 3) = 1;
  *((_DWORD *)this + 8) = 1;
  *((_DWORD *)this + 19) = 1;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 43) = 0.0;
  *(this + 44) = 0.0;
  *(this + 35) = 0.0;
  *(this + 45) = 0.0;
  *(this + 36) = 0.0;
  *(this + 42) = 0.0;
  *(this + 20) = 0.0;
  *(this + 21) = 0.0;
  *(this + 22) = 0.0;
  *(this + 23) = 0.0;
  *(this + 24) = 0.0;
  *(this + 25) = 0.0;
  *(this + 26) = 0.0;
  *(this + 38) = 0.0;
  *(this + 37) = 0.0;
  *(this + 51) = 0.0;
  *(this + 40) = 0.0;
  *(this + 52) = 0.0;
  *(this + 41) = 0.0;
  *(this + 50) = 0.0;
  *(this + 58) = 0.0;
  *(this + 55) = 0.0;
  *(this + 56) = 0.0;
  *(this + 30) = 0.0;
  *(this + 31) = 0.0;
  *((_DWORD *)this + 39) = 99;
  return this;
}
// 659C3BD8: using guessed type void *off_659C3BD8;

//----- (6575C4F0) --------------------------------------------------------
int __thiscall ScreenInfo_GetDimensions(_DWORD *this)
{
  int result; // eax
  _BYTE v3[260]; // [esp+4h] [ebp-118h] BYREF
  int v4; // [esp+108h] [ebp-14h]
  int v5; // [esp+10Ch] [ebp-10h]

  (*(void (__cdecl **)(_BYTE *))(g_pILTClient + 212))(v3);
  result = v4;
  *(this + 1) = v5;
  *this = result;
  return result;
}

//----- (6575C540) --------------------------------------------------------
void __thiscall GameInputMgr_GetInstance(float *this, int __return_address)
{
  *(this + 76) = LTClient_GetFloat((int)"TextOpacity", 100.0) * 0.009999999776482582;
  JUMPOUT(0x6576F2C0);
}
// 6575C56D: control flows out of bounds to 6576F2C0

//----- (6575CAE0) --------------------------------------------------------
int __thiscall sub_6575CAE0(void *this)
{
  _DWORD *v1; // eax
  int result; // eax
  int v3; // edx

  v1 = *(_DWORD **)this;
  if ( *(_BYTE *)(*(_DWORD *)this + 17) )
  {
    result = v1[2];
    *(_DWORD *)this = result;
  }
  else
  {
    v3 = *v1;
    if ( *(_BYTE *)(*v1 + 17) )
    {
      for ( result = v1[1]; !*(_BYTE *)(result + 17); result = *(_DWORD *)(result + 4) )
      {
        if ( *(_DWORD *)this != *(_DWORD *)result )
          break;
        *(_DWORD *)this = result;
      }
      if ( !*(_BYTE *)(*(_DWORD *)this + 17) )
        *(_DWORD *)this = result;
    }
    else
    {
      for ( result = *(_DWORD *)(v3 + 8); !*(_BYTE *)(result + 17); result = *(_DWORD *)(result + 8) )
        v3 = result;
      *(_DWORD *)this = v3;
    }
  }
  return result;
}

//----- (6575CB70) --------------------------------------------------------
int __thiscall Resource_Release(int *this, int a2, int a3)
{
  int result; // eax

  result = *(this + 1);
  if ( result )
  {
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 8))(a2, result);
    *(this + 1) = 0;
  }
  *(this + 3) = 0;
  return result;
}

//----- (6575CBA0) --------------------------------------------------------
int __stdcall Array_IndexedRead(int a1, int a2, int a3)
{
  return (*(int (__thiscall **)(int, int, int))(*(_DWORD *)a2 + 4))(a2, 4 * a1, a3);
}

//----- (6575CBC0) --------------------------------------------------------
void __thiscall GameInputMgr_UpdateMode(int this, int __return_address)
{
  double Float; // st7
  int v4; // edi
  bool v5; // cc
  int v6; // eax
  bool v7; // zf
  _DWORD *v8; // eax

  Float = LTClient_GetFloat((int)"WindowOpacity", 90.0);
  v4 = 0;
  v5 = *(_DWORD *)(this + 16) <= 0;
  *(float *)(this + 296) = Float * 0.009999999776482582;
  if ( !v5 )
  {
    do
    {
      v6 = *(_DWORD *)(this + 12);
      v7 = *(_DWORD *)(v6 + 4 * v4) == 0;
      v8 = (_DWORD *)(v6 + 4 * v4);
      if ( !v7 )
        (*(void (__cdecl **)(_DWORD, _DWORD))(g_pILTClient + 412))(*v8, *(float *)(this + 296));
      ++v4;
    }
    while ( v4 < *(_DWORD *)(this + 16) );
  }
  JUMPOUT(0x6576F320);
}
// 6575CC28: control flows out of bounds to 6576F320

//----- (6575CC30) --------------------------------------------------------
void __thiscall GameInputMgr_ProcessInput(int this, int __return_address)
{
  double Float; // st7
  int v4; // edi
  bool v5; // cc
  int v6; // eax
  bool v7; // zf
  _DWORD *v8; // eax
  _DWORD *v9; // edi
  int v10; // ebx
  _DWORD *v11; // edi
  int v12; // ebx

  Float = LTClient_GetFloat((int)"ElementOpacity", 90.0);
  v4 = 0;
  v5 = *(_DWORD *)(this + 36) <= 0;
  *(float *)(this + 300) = Float * 0.009999999776482582;
  if ( !v5 )
  {
    do
    {
      v6 = *(_DWORD *)(this + 32);
      v7 = *(_DWORD *)(v6 + 4 * v4) == 0;
      v8 = (_DWORD *)(v6 + 4 * v4);
      if ( !v7 )
        (*(void (__cdecl **)(_DWORD, _DWORD))(g_pILTClient + 412))(*v8, *(float *)(this + 300));
      ++v4;
    }
    while ( v4 < *(_DWORD *)(this + 36) );
  }
  v9 = (_DWORD *)(this + 68);
  v10 = 32;
  while ( 1 )
  {
    if ( *v9 )
      (*(void (__cdecl **)(_DWORD, _DWORD))(g_pILTClient + 412))(*v9, *(float *)(this + 300));
    ++v9;
    if ( !--v10 )
    {
      v11 = (_DWORD *)(this + 196);
      v12 = 25;
      while ( 1 )
      {
        if ( *v11 )
          (*(void (__cdecl **)(_DWORD, _DWORD))(g_pILTClient + 412))(*v11, *(float *)(this + 300));
        ++v11;
        if ( !--v12 )
          JUMPOUT(0x6576F380);
      }
    }
  }
}
// 6575CD02: control flows out of bounds to 6576F380

//----- (6575D1F0) --------------------------------------------------------
unsigned int __thiscall GameInputMgr_HandleWindowMsg(unsigned int *this, unsigned int a2, _DWORD *a3, int a4)
{
  unsigned int v5; // eax
  unsigned int result; // eax
  int v7; // ebx
  unsigned int v8; // eax
  _DWORD *v9; // ecx
  unsigned int v10; // ecx
  _DWORD *v11; // ecx

  v5 = *(this + 2);
  if ( a2 > v5 )
    return 0;
  if ( *(this + 3) )
  {
    for ( ; v5 > a2; *v11 = *(v11 - 1) )
      v11 = (_DWORD *)(*(this + 1) + 4 * v5--);
    --*(this + 3);
    *(_DWORD *)(*(this + 1) + 4 * a2) = *a3;
    ++*(this + 2);
    return 1;
  }
  else
  {
    v7 = Array_IndexedRead(*(this + 4) + v5 + 1, a4, 0);
    result = 0;
    if ( v7 )
    {
      if ( a2 )
      {
        do
        {
          *(_DWORD *)(v7 + 4 * result) = *(_DWORD *)(*(this + 1) + 4 * result);
          ++result;
        }
        while ( result < a2 );
      }
      v8 = a2;
      if ( a2 < *(this + 2) )
      {
        v9 = (_DWORD *)(v7 + 4 * a2 + 4);
        do
          *v9++ = *(_DWORD *)(*(this + 1) + 4 * v8++);
        while ( v8 < *(this + 2) );
      }
      *(_DWORD *)(v7 + 4 * a2) = *a3;
      if ( *(this + 1) )
        Resource_Release((int *)this, a4, *(this + 2) + *(this + 3));
      v10 = *(this + 4);
      *(this + 1) = v7;
      ++*(this + 2);
      *(this + 3) = v10;
      return 1;
    }
  }
  return result;
}

//----- (6575D310) --------------------------------------------------------
int **__thiscall RBTree18_LowerBound(int **this, int **a2, _DWORD *a3)
{
  int *v3; // edx
  int v4; // eax

  v3 = *(this + 1);
  v4 = v3[1];
  while ( !*(_BYTE *)(v4 + 17) )
  {
    if ( *(_DWORD *)(v4 + 12) >= *a3 )
    {
      v3 = (int *)v4;
      v4 = *(_DWORD *)v4;
    }
    else
    {
      v4 = *(_DWORD *)(v4 + 8);
    }
  }
  if ( v3 == *(this + 1) || *a3 < (unsigned int)v3[3] )
  {
    *a2 = *(this + 1);
    return a2;
  }
  else
  {
    *a2 = v3;
    return a2;
  }
}

//----- (6575D3C0) --------------------------------------------------------
int *__thiscall sub_6575D3C0(int **this, int *a2, char a3, int *a4, int a5)
{
  int v6; // ecx
  int *v7; // eax
  int *v8; // eax
  int v9; // eax
  int *v10; // eax
  int v11; // esi
  int v12; // ecx
  int *v13; // edx
  int v14; // edx
  int v15; // edx
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-50h] BYREF
  _BYTE v18[28]; // [esp+38h] [ebp-28h] BYREF
  int v19; // [esp+5Ch] [ebp-4h]
  int v20; // [esp+74h] [ebp+14h]

  if ( (unsigned int)*(this + 2) >= 0x3FFFFFFE )
  {
    std::string::string(v18, "map/set<T> too long");
    v19 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v18);
    pExceptionObject[0] = &off_659BFD28;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
  }
  v6 = sub_6575CDF0(*(this + 1), a4, *(this + 1), a5, 0);
  v7 = *(this + 1);
  *(this + 2) = (int *)((char *)*(this + 2) + 1);
  v20 = v6;
  if ( a4 == v7 )
  {
    v7[1] = v6;
    **(this + 1) = v6;
    (*(this + 1))[2] = v6;
  }
  else if ( a3 )
  {
    *a4 = v6;
    v8 = *(this + 1);
    if ( a4 == (int *)*v8 )
      *v8 = v6;
  }
  else
  {
    a4[2] = v6;
    v9 = (int)*(this + 1);
    if ( a4 == *(int **)(v9 + 8) )
      *(_DWORD *)(v9 + 8) = v6;
  }
  v10 = (int *)(v6 + 4);
  v11 = v6;
  if ( !*(_BYTE *)(*(_DWORD *)(v6 + 4) + 16) )
  {
    do
    {
      v12 = *v10;
      v13 = *(int **)(*v10 + 4);
      if ( *v10 == *v13 )
      {
        v14 = v13[2];
        if ( *(_BYTE *)(v14 + 16) )
        {
          if ( v11 == *(_DWORD *)(v12 + 8) )
          {
            v11 = *v10;
            sub_6575C980(this, *v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 16) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 16) = 0;
          sub_6575C9E0(this, *(_DWORD *)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 16) = 1;
          *(_BYTE *)(v14 + 16) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 16) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      else
      {
        v15 = *v13;
        if ( *(_BYTE *)(v15 + 16) )
        {
          if ( v11 == *(_DWORD *)v12 )
          {
            v11 = *v10;
            sub_6575C9E0(this, *v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 16) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 16) = 0;
          sub_6575C980(this, *(_DWORD *)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 16) = 1;
          *(_BYTE *)(v15 + 16) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 16) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      v10 = (int *)(v11 + 4);
    }
    while ( !*(_BYTE *)(*(_DWORD *)(v11 + 4) + 16) );
    v6 = v20;
  }
  *(_BYTE *)((*(this + 1))[1] + 16) = 1;
  *a2 = v6;
  return a2;
}
// 6575C980: using guessed type int __thiscall sub_6575C980(_DWORD, _DWORD);
// 6575C9E0: using guessed type int __thiscall sub_6575C9E0(_DWORD, _DWORD);
// 6575CDF0: using guessed type int __stdcall sub_6575CDF0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (6575D680) --------------------------------------------------------
unsigned int __thiscall CInterfaceMgr_AddTexture(unsigned int *this, unsigned int a2, _DWORD *a3)
{
  return GameInputMgr_HandleWindowMsg(this, a2, a3, (int)&off_65A560A4);
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (6575DB80) --------------------------------------------------------
int __thiscall RBTree18_InsertOrFind(int **this, int a2, _DWORD *a3)
{
  _DWORD *v3; // ebx
  _DWORD *v5; // esi
  int *v6; // eax
  bool v7; // cl
  unsigned int v8; // edx
  _DWORD *v9; // edx
  int v10; // edx
  char v12; // [esp+Ch] [ebp-4h]

  v3 = a3;
  v5 = *(this + 1);
  v6 = (int *)v5[1];
  v7 = 1;
  v12 = 1;
  if ( !*((_BYTE *)v6 + 17) )
  {
    v8 = *a3;
    do
    {
      v5 = v6;
      v7 = v8 < v6[3];
      v12 = v7;
      if ( v8 >= v6[3] )
        v6 = (int *)v6[2];
      else
        v6 = (int *)*v6;
    }
    while ( !*((_BYTE *)v6 + 17) );
  }
  v9 = v5;
  a3 = v5;
  if ( v7 )
  {
    if ( v5 == (_DWORD *)**(this + 1) )
    {
      v10 = *sub_6575D3C0(this, (int *)&a3, 1, v5, (int)v3);
      *(_BYTE *)(a2 + 4) = 1;
      *(_DWORD *)a2 = v10;
      return a2;
    }
    sub_6575CAE0(&a3);
    v9 = a3;
  }
  if ( v9[3] >= *v3 )
  {
    *(_BYTE *)(a2 + 4) = 0;
    *(_DWORD *)a2 = v9;
  }
  else
  {
    *(_DWORD *)a2 = *sub_6575D3C0(this, (int *)&a3, v12, v5, (int)v3);
    *(_BYTE *)(a2 + 4) = 1;
  }
  return a2;
}

//----- (6575DD00) --------------------------------------------------------
unsigned int __thiscall TextInput_GetCursorX(int this, int __return_address)
{
  int v2; // edi
  unsigned int result; // eax

  v2 = __return_address;
  if ( __return_address )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(__return_address);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v2, *(float *)(this + 296));
    return CInterfaceMgr_AddTexture((unsigned int *)(this + 8), *(_DWORD *)(this + 16), &__return_address);
  }
  return result;
}

//----- (6575DD50) --------------------------------------------------------
unsigned int __thiscall TextInput_GetCursorY(int this, int __return_address)
{
  int v2; // edi
  unsigned int result; // eax

  v2 = __return_address;
  if ( __return_address )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(__return_address);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v2, *(float *)(this + 300));
    return CInterfaceMgr_AddTexture((unsigned int *)(this + 28), *(_DWORD *)(this + 36), &__return_address);
  }
  return result;
}

//----- (6575DDA0) --------------------------------------------------------
unsigned int __thiscall CInterfaceResMgr_AddTexture(unsigned int *this, int __return_address)
{
  int v2; // esi
  unsigned int result; // eax

  v2 = __return_address;
  if ( __return_address )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(__return_address);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v2, 1.0);
    return CInterfaceMgr_AddTexture(this + 12, *(this + 14), &__return_address);
  }
  return result;
}

//----- (6575DE10) --------------------------------------------------------
int __thiscall CInterfaceResMgr_Init(int this)
{
  int v2; // edi
  unsigned int v3; // ebx
  int v4; // edi
  int v5; // edi
  int v6; // edi
  int v7; // edi
  int v9; // edi
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v19; // edi
  int v20; // edi
  int v21; // edi
  int v22; // eax
  int v23; // eax
  int v24; // eax
  int v25; // edi
  int v26; // edi
  int v27; // edi
  int v28; // edi
  int v29; // edi
  int v30; // edi
  int v31; // eax
  int v32; // eax
  int v33; // eax
  int v34; // eax
  int v35; // eax
  int v36; // eax
  int v37; // eax
  int v38; // eax
  int v39; // eax
  int v40; // eax
  int v41; // eax
  int v42; // eax
  int v43; // eax
  int v44; // eax
  int v45; // eax
  int v46; // eax
  int v47; // eax
  int v48; // eax
  int v49; // eax
  int v50; // eax
  int v51; // eax
  int v52; // eax
  int v53; // eax
  int v54; // eax
  int v55; // eax
  int v56; // eax
  int v57; // eax
  int v58; // eax
  int v59; // eax
  int v60; // eax
  int v61; // eax
  int v62; // eax
  int v63; // eax
  int v64; // eax
  int v65; // eax
  int v66; // eax
  int v67; // eax
  int v68; // eax
  int v69; // eax
  int v70; // eax
  int v71; // eax
  int v72; // edi
  int v73; // eax
  unsigned int i; // ebx
  int v75; // edi
  int v76; // eax
  int v77; // [esp+10h] [ebp-14h] BYREF
  int v78; // [esp+14h] [ebp-10h]
  int v79; // [esp+18h] [ebp-Ch]
  int v80; // [esp+1Ch] [ebp-8h]
  _DWORD var8[2]; // [esp+20h] [ebp-4h] BYREF

  ScreenInfo_GetDimensions((_DWORD *)this);
  *(float *)(this + 296) = LTClient_GetFloat((int)"WindowOpacity", 90.0) * 0.009999999776482582;
  *(float *)(this + 300) = LTClient_GetFloat((int)"ElementOpacity", 90.0) * 0.009999999776482582;
  *(float *)(this + 304) = LTClient_GetFloat((int)"TextOpacity", 100.0) * 0.009999999776482582;
  v2 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\windows\\window_standard.tga");
  v3 = 0;
  var8[0] = v2;
  if ( v2 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v2);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v2, *(float *)(this + 296));
    CInterfaceMgr_AddTexture((unsigned int *)(this + 8), *(_DWORD *)(this + 16), var8);
  }
  v4 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\windows\\window_simple.tga");
  var8[0] = v4;
  if ( v4 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v4);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v4, *(float *)(this + 296));
    CInterfaceMgr_AddTexture((unsigned int *)(this + 8), *(_DWORD *)(this + 16), var8);
  }
  v5 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\windows\\window_chat.tga");
  var8[0] = v5;
  if ( v5 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v5);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v5, *(float *)(this + 296));
    CInterfaceMgr_AddTexture((unsigned int *)(this + 8), *(_DWORD *)(this + 16), var8);
  }
  v6 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\windows\\window_terminal.tga");
  var8[0] = v6;
  if ( v6 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v6);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v6, *(float *)(this + 296));
    CInterfaceMgr_AddTexture((unsigned int *)(this + 8), *(_DWORD *)(this + 16), var8);
  }
  v7 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  if ( !v7 )
    return 0;
  v79 = 2;
  v80 = 2;
  v77 = 0;
  v78 = 0;
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v7, &v77, -2145705950);
  TextInput_GetCursorX(this, v7);
  v9 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  if ( !v9 )
    return 0;
  v77 = 0;
  v78 = 0;
  v79 = 2;
  v80 = 2;
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v9, &v77, -2145903330);
  TextInput_GetCursorX(this, v9);
  v10 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\windows\\secpad.pcx");
  TextInput_GetCursorX(this, v10);
  v11 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\windows\\window_hacking.pcx");
  TextInput_GetCursorX(this, v11);
  v12 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\windows\\window_hacking2.tga");
  TextInput_GetCursorX(this, v12);
  v13 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\windows\\processing.tga");
  TextInput_GetCursorX(this, v13);
  v14 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\windows\\processing_mini.tga");
  TextInput_GetCursorX(this, v14);
  v15 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\windows\\chemicallab.tga");
  TextInput_GetCursorX(this, v15);
  v16 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\windows\\window_character.tga");
  TextInput_GetCursorX(this, v16);
  v17 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\sort_icons.pcx");
  TextInput_GetCursorY(this, v17);
  v18 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\blacktag.pcx");
  TextInput_GetCursorY(this, v18);
  v77 = 0;
  v78 = 0;
  v79 = 2;
  v80 = 2;
  v19 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  if ( !v19 )
    return 0;
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v19, &v77, -2139062144);
  TextInput_GetCursorY(this, v19);
  v79 = 48;
  v80 = 48;
  v77 = 0;
  v78 = 0;
  v20 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(48, 48, 0);
  if ( !v20 )
    return 0;
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v20, &v77, -2134325048);
  TextInput_GetCursorY(this, v20);
  v21 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(48, 48, 0);
  if ( !v21 )
    return 0;
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v21, &v77, -2132360590);
  TextInput_GetCursorY(this, v21);
  v22 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\window_leds.tga");
  TextInput_GetCursorY(this, v22);
  v23 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\chemicallab_elements.tga");
  TextInput_GetCursorY(this, v23);
  v24 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\processing_elements.tga");
  TextInput_GetCursorY(this, v24);
  v77 = 0;
  v78 = 0;
  v79 = 2;
  v80 = 2;
  v25 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  if ( !v25 )
    return 0;
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v25, &v77, -2130771968);
  TextInput_GetCursorY(this, v25);
  v26 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  if ( !v26 )
    return 0;
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v26, &v77, -2130706688);
  TextInput_GetCursorY(this, v26);
  v27 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  if ( !v27 )
    return 0;
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v27, &v77, -2147418368);
  TextInput_GetCursorY(this, v27);
  v28 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  if ( !v28 )
    return 0;
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v28, &v77, -2143536068);
  TextInput_GetCursorY(this, v28);
  v29 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  if ( !v29 )
    return 0;
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v29, &v77, -2141167520);
  TextInput_GetCursorY(this, v29);
  v30 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  if ( !v30 )
    return 0;
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v30, &v77, -2140109617);
  TextInput_GetCursorY(this, v30);
  v31 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\clone.pcx");
  TextInput_GetCursorY(this, v31);
  v32 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\hacking_bar_alarm.pcx");
  TextInput_GetCursorY(this, v32);
  v33 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\hacking_bar.pcx");
  TextInput_GetCursorY(this, v33);
  v34 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\nightvision0.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v34);
  v35 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\nightvision1.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v35);
  v36 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\nightvision2.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v36);
  v37 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\nightvision3.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v37);
  v38 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\hud\\nightvisionlines.pcx");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v38);
  v39 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\hud\\most_wanted.pcx");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v39);
  v40 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\volunteer.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v40);
  v41 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\senator.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v41);
  v42 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\wanted.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v42);
  v43 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\xhair_act_door.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v43);
  v44 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\xhair_act_use.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v44);
  v45 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\xhair_act_dialog.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v45);
  v46 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\xhair_act_terminal.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v46);
  v47 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\bubble.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v47);
  v48 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\bubble_scale.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v48);
  v49 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\quickslots.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v49);
  v50 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\mining_production.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v50);
  v51 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\consciousness.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v51);
  v52 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\stats_empty.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v52);
  v53 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\stats_full.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v53);
  v54 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_empty.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v54);
  v55 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_arms.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v55);
  v56 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_arms_hl.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v56);
  v57 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_hands.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v57);
  v58 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_hands_hl.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v58);
  v59 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_head.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v59);
  v60 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_head_hl.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v60);
  v61 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_legs.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v61);
  v62 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_legs_hl.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v62);
  v63 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_shoulders.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v63);
  v64 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_shoulders_hl.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v64);
  v65 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_torso.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v65);
  v66 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\armor_torso_hl.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v66);
  v67 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\map.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v67);
  v68 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\mapsymbols.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v68);
  v69 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\healing.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v69);
  v70 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\hud\\eshield.tga");
  CInterfaceResMgr_AddTexture((unsigned int *)this, v70);
  var8[0] = this + 68;
  do
  {
    v71 = (*(int (__cdecl **)(char *))(g_pILTClient + 288))((char *)(&off_659E2988)[v3]);
    v72 = v71;
    if ( v71 )
    {
      (*(void (__cdecl **)(int))(g_pILTClient + 272))(v71);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v72, *(float *)(this + 300));
    }
    v73 = var8[0];
    *(_DWORD *)var8[0] = v72;
    v3 += 15;
    var8[0] = v73 + 4;
  }
  while ( v3 < 480 );
  var8[0] = this + 196;
  for ( i = 0; i < 150; i += 6 )
  {
    v75 = (*(int (__cdecl **)(char *))(g_pILTClient + 288))((char *)(&off_659E217C)[i]);
    if ( v75 )
    {
      (*(void (__cdecl **)(int))(g_pILTClient + 272))(v75);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v75, *(float *)(this + 300));
    }
    v76 = var8[0];
    *(_DWORD *)var8[0] = v75;
    var8[0] = v76 + 4;
  }
  dword_65A53FF8 = *(_DWORD *)(this + 36) + *(_DWORD *)(this + 56) + *(_DWORD *)(this + 16) + 57;
  return 1;
}
// 659E217C: using guessed type char (*off_659E217C)[4];
// 659E2988: using guessed type char (*off_659E2988)[4];
// 65A53FF8: using guessed type int dword_65A53FF8;

//----- (6575EC50) --------------------------------------------------------
int __thiscall TextInput_InsertChar(int **this, int *a2)
{
  int v2; // esi
  int result; // eax
  _BYTE v5[8]; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+10h] [ebp-4h] BYREF

  v2 = (int)a2;
  v6 = 0;
  if ( (*(int (__thiscall **)(int, int *, int *))(*(_DWORD *)dword_65A5AA50 + 4))(dword_65A5AA50, &v6, a2) )
  {
    (*(void (__thiscall **)(int, int *, int))(*(_DWORD *)dword_65A5AA50 + 8))(dword_65A5AA50, &v6, v2);
    result = v6;
    if ( v6 )
    {
      RBTree18_InsertOrFind(this + 77, (int)v5, &v6);
      return v6;
    }
  }
  else
  {
    RBTree18_LowerBound(this + 77, &a2, &v6);
    result = v6;
    if ( a2 == *(this + 78) )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)dword_65A5AA50 + 36))(dword_65A5AA50, v6);
      RBTree18_InsertOrFind(this + 77, (int)v5, &v6);
      return v6;
    }
  }
  return result;
}
// 65A5AA50: using guessed type int dword_65A5AA50;

//----- (6575F420) --------------------------------------------------------
int __thiscall TextInput_GetLength(_DWORD *this)
{
  int result; // eax
  _DWORD *v2; // ecx

  result = 0;
  *(this + 1570) = 0;
  *(this + 1565) = 0;
  v2 = (_DWORD *)*(this + 1569);
  if ( v2 )
    return Slider_ClampValue(v2, 0);
  return result;
}

//----- (6575F580) --------------------------------------------------------
void __cdecl __noreturn sub_6575F580(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (6575F720) --------------------------------------------------------
void *__cdecl sub_6575F720(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 4 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(4 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (6575FBC0) --------------------------------------------------------
char __thiscall ItemStructA_CompareVariantBytes(_BYTE *this, int a2)
{
  int v2; // eax
  char v3; // dl

  v2 = 0;
  while ( 1 )
  {
    v3 = (unsigned __int8)v2 < 4u ? *(_BYTE *)((unsigned __int8)v2 + a2 + 27) : 0;
    if ( *(this + v2 + 27) != v3 )
      break;
    if ( ++v2 >= 4 )
      return 1;
  }
  return 0;
}

//----- (6575FC80) --------------------------------------------------------
int __thiscall TextInput_SetText(_DWORD *this, int a2)
{
  _DWORD *v2; // eax
  int v3; // esi
  int v4; // edx
  int v5; // eax
  int result; // eax

  v2 = (_DWORD *)*(this + 1569);
  *(this + 2) = a2;
  if ( v2 )
  {
    v3 = *(this + 1572);
    v2[21] = a2 - 16;
    v4 = v2[21] + v2[19];
    v2[22] = v3;
    v2[17] = v4;
    v2[18] = v2[20] + v3;
  }
  v5 = *(this + 1576);
  if ( v5 )
    *(_DWORD *)(v5 + 8) = *(this + 2) - *(this + 1571) + 3;
  result = (*(this + 2) - *(this + 1571)) / *(this + 1561);
  *(this + 1560) = result;
  if ( result < 1 )
    *(this + 1560) = 1;
  return result;
}

//----- (6575FF60) --------------------------------------------------------
_DWORD *__cdecl sub_6575FF60(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; ++result )
    *result = *a3;
  return result;
}

//----- (6575FF80) --------------------------------------------------------
int __thiscall sub_6575FF80(int *this, int a2, int a3)
{
  int result; // eax

  result = *(this + 1);
  if ( result )
  {
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 8))(a2, result);
    *(this + 1) = 0;
  }
  *(this + 3) = 0;
  return result;
}

//----- (6575FFB0) --------------------------------------------------------
int __stdcall sub_6575FFB0(int a1, int a2, int a3)
{
  return (*(int (__thiscall **)(int, int, int))(*(_DWORD *)a2 + 4))(a2, 4 * a1, a3);
}

//----- (657604C0) --------------------------------------------------------
bool __thiscall ItemStructA_Equals(_WORD *this, int a2)
{
  return *this == *(_WORD *)a2
      && *(this + 1) == *(_WORD *)(a2 + 2)
      && *(this + 2) == *(_WORD *)(a2 + 4)
      && *(this + 3) == *(_WORD *)(a2 + 6)
      && *((_BYTE *)this + 25) == *(_BYTE *)(a2 + 25)
      && *((_BYTE *)this + 8) == *(_BYTE *)(a2 + 8)
      && *((_BYTE *)this + 9) == *(_BYTE *)(a2 + 9)
      && *((_DWORD *)this + 3) == *(_DWORD *)(a2 + 12)
      && *((_BYTE *)this + 24) == *(_BYTE *)(a2 + 24)
      && *((_DWORD *)this + 4) == *(_DWORD *)(a2 + 16)
      && *((_DWORD *)this + 5) == *(_DWORD *)(a2 + 20)
      && *((_BYTE *)this + 26) == *(_BYTE *)(a2 + 26)
      && ItemStructA_CompareVariantBytes(this, a2);
}

//----- (657605A0) --------------------------------------------------------
int __thiscall Inventory_FindItemByType(int *this, int a2)
{
  int v2; // ebx
  int v3; // esi
  int i; // edi
  int v6; // [esp+Ch] [ebp-4h]

  v2 = *(this + 46);
  v3 = 0;
  if ( v2 <= 0 )
    return 0;
  v6 = *(this + 45);
  for ( i = v6; !ItemStructA_Equals((_WORD *)(*(_DWORD *)i + 180), a2); i += 4 )
  {
    if ( ++v3 >= v2 )
      return 0;
  }
  return *(_DWORD *)(v6 + 4 * v3);
}

//----- (65760600) --------------------------------------------------------
char __thiscall Inventory_ContainsItem(int *this, int a2)
{
  int v2; // edx
  int v3; // eax
  _DWORD *i; // ecx

  v2 = *(this + 46);
  v3 = 0;
  if ( v2 <= 0 )
    return 0;
  for ( i = (_DWORD *)*(this + 45); *i != a2; ++i )
  {
    if ( ++v3 >= v2 )
      return 0;
  }
  return 1;
}

//----- (65760CC0) --------------------------------------------------------
_DWORD *ListNode_AllocNew()
{
  _DWORD *result; // eax

  result = operator new(0x34u);
  if ( result )
    *result = result;
  if ( result != (_DWORD *)-4 )
    result[1] = result;
  return result;
}

//----- (65760D90) --------------------------------------------------------
int __thiscall sub_65760D90(_DWORD *this, int a2, int a3, int a4)
{
  int v5; // eax
  int v7; // eax

  v5 = *(this + 2);
  if ( a2 == v5 && a2 )
    return 1;
  if ( *(this + 1) )
    sub_6575FFD0(this, a3, v5 + *(this + 3));
  *(this + 2) = a2;
  if ( a2 )
  {
    v7 = sub_65760000(this, a2 + *(this + 4), a3, a4);
    *(this + 1) = v7;
    if ( !v7 )
    {
      *(this + 2) = 0;
      *(this + 3) = 0;
      return 0;
    }
    *(this + 3) = *(this + 4);
  }
  return 1;
}
// 6575FFD0: using guessed type int __thiscall sub_6575FFD0(_DWORD, _DWORD, _DWORD);
// 65760000: using guessed type int __thiscall sub_65760000(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65760E10) --------------------------------------------------------
int __cdecl sub_65760E10(void *Source, int a2, int a3)
{
  int v3; // eax
  int v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = a3 - 4 * v3;
  if ( v3 > 0 )
    memmove_s((void *const)(a3 - 4 * v3), 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65760E50) --------------------------------------------------------
unsigned int __thiscall DynArray_InsertAt(unsigned int *this, unsigned int a2, _DWORD *a3, int a4)
{
  unsigned int v5; // eax
  unsigned int result; // eax
  int v7; // ebx
  unsigned int v8; // eax
  _DWORD *v9; // ecx
  unsigned int v10; // ecx
  _DWORD *v11; // ecx

  v5 = *(this + 2);
  if ( a2 > v5 )
    return 0;
  if ( *(this + 3) )
  {
    for ( ; v5 > a2; *v11 = *(v11 - 1) )
      v11 = (_DWORD *)(*(this + 1) + 4 * v5--);
    --*(this + 3);
    *(_DWORD *)(*(this + 1) + 4 * a2) = *a3;
    ++*(this + 2);
    return 1;
  }
  else
  {
    v7 = sub_6575FFB0(*(this + 4) + v5 + 1, a4, 0);
    result = 0;
    if ( v7 )
    {
      if ( a2 )
      {
        do
        {
          *(_DWORD *)(v7 + 4 * result) = *(_DWORD *)(*(this + 1) + 4 * result);
          ++result;
        }
        while ( result < a2 );
      }
      v8 = a2;
      if ( a2 < *(this + 2) )
      {
        v9 = (_DWORD *)(v7 + 4 * a2 + 4);
        do
          *v9++ = *(_DWORD *)(*(this + 1) + 4 * v8++);
        while ( v8 < *(this + 2) );
      }
      *(_DWORD *)(v7 + 4 * a2) = *a3;
      if ( *(this + 1) )
        sub_6575FF80((int *)this, a4, *(this + 2) + *(this + 3));
      v10 = *(this + 4);
      *(this + 1) = v7;
      ++*(this + 2);
      *(this + 3) = v10;
      return 1;
    }
  }
  return result;
}

//----- (65760F40) --------------------------------------------------------
unsigned int __thiscall sub_65760F40(unsigned int *this, unsigned int a2, _DWORD *a3, int a4)
{
  unsigned int v5; // eax
  unsigned int result; // eax
  int v7; // ebx
  unsigned int v8; // eax
  _DWORD *v9; // ecx
  unsigned int v10; // ecx
  _DWORD *v11; // ecx

  v5 = *(this + 2);
  if ( a2 > v5 )
    return 0;
  if ( *(this + 3) )
  {
    for ( ; v5 > a2; *v11 = *(v11 - 1) )
      v11 = (_DWORD *)(*(this + 1) + 4 * v5--);
    --*(this + 3);
    *(_DWORD *)(*(this + 1) + 4 * a2) = *a3;
    ++*(this + 2);
    return 1;
  }
  else
  {
    v7 = sub_65760000(this, *(this + 4) + v5 + 1, a4, 0);
    result = 0;
    if ( v7 )
    {
      if ( a2 )
      {
        do
        {
          *(_DWORD *)(v7 + 4 * result) = *(_DWORD *)(*(this + 1) + 4 * result);
          ++result;
        }
        while ( result < a2 );
      }
      v8 = a2;
      if ( a2 < *(this + 2) )
      {
        v9 = (_DWORD *)(v7 + 4 * a2 + 4);
        do
          *v9++ = *(_DWORD *)(*(this + 1) + 4 * v8++);
        while ( v8 < *(this + 2) );
      }
      *(_DWORD *)(v7 + 4 * a2) = *a3;
      if ( *(this + 1) )
        sub_6575FFD0(this, a4, *(this + 2) + *(this + 3));
      v10 = *(this + 4);
      *(this + 1) = v7;
      ++*(this + 2);
      *(this + 3) = v10;
      return 1;
    }
  }
  return result;
}
// 6575FFD0: using guessed type int __thiscall sub_6575FFD0(_DWORD, _DWORD, _DWORD);
// 65760000: using guessed type int __thiscall sub_65760000(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65761310) --------------------------------------------------------
char __thiscall ListNode_GetData(int this, _DWORD *a2)
{
  if ( !*(_DWORD *)(this + 40) )
    return 0;
  qmemcpy(a2 + 1, (const void *)this, 0x20u);
  *a2 = *(_DWORD *)(**(_DWORD **)(this + 36) + 12);
  return 1;
}

//----- (657614E0) --------------------------------------------------------
unsigned int __thiscall List_InsertAtOffset(unsigned int *this, unsigned int a1, _DWORD *a2)
{
  return DynArray_InsertAt(this, a1, a2, (int)&off_65A560A4);
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (65761500) --------------------------------------------------------
unsigned int __thiscall IndexedArray_Add(unsigned int *this, unsigned int a1, _DWORD *a2)
{
  return sub_65760F40(this, a1, a2, (int)&off_65A560A4);
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (65761520) --------------------------------------------------------
BOOL __thiscall IndexedArray_HasIndex(_DWORD *this, int a1)
{
  return sub_65760D90(this, a1, (int)&off_65A560A4, 0) != 0;
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (65761EE0) --------------------------------------------------------
_DWORD *__thiscall IndexedArrayMgr_Ctor(_DWORD *this)
{
  *(this + 1) = ListNode_AllocNew();
  *(this + 2) = 0;
  return this;
}

//----- (65761FB0) --------------------------------------------------------
char *__stdcall sub_65761FB0(void *Source, int a2, char *Destination)
{
  int v3; // eax
  char *v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = &Destination[4 * v3];
  if ( v3 )
    memmove_s(Destination, 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65762090) --------------------------------------------------------
void __thiscall LinkedList_AddNode(unsigned int *this, _DWORD *a2, int a3, int a4, int a5)
{
  _DWORD *v5; // esi
  _DWORD *v7; // eax
  int v8; // edx
  int v9; // ecx

  v5 = a2;
  if ( a2 )
  {
    v7 = operator new(0x10u);
    if ( v7 )
    {
      v8 = a4;
      v7[1] = a3;
      v9 = a5;
      *v7 = v5;
      v7[2] = v8;
      v7[3] = v9;
    }
    else
    {
      v7 = 0;
    }
    a2 = v7;
    List_InsertAtOffset(this + 33, *(this + 35), &a2);
  }
}

//----- (65762100) --------------------------------------------------------
BOOL __thiscall ObjectManager_ClearAll(_DWORD *this)
{
  int i; // edi
  int v3; // eax
  bool v4; // zf
  void (__thiscall ****v5)(_DWORD, int); // eax
  void (__thiscall ***v6)(_DWORD, int); // eax
  BOOL result; // eax

  for ( i = 0; i < *(this + 46); ++i )
  {
    v3 = *(this + 45);
    v4 = *(_DWORD *)(v3 + 4 * i) == 0;
    v5 = (void (__thiscall ****)(_DWORD, int))(v3 + 4 * i);
    if ( !v4 )
    {
      v6 = *v5;
      if ( v6 )
        (**v6)(v6, 1);
      *(_DWORD *)(*(this + 45) + 4 * i) = 0;
    }
  }
  result = IndexedArray_HasIndex(this + 44, 0);
  *(this + 1565) = 0;
  *(this + 1566) = 0;
  *(this + 1567) = 0;
  *(this + 1568) = 0;
  *(this + 1570) = 0;
  *(this + 40) = 0;
  return result;
}

//----- (65762180) --------------------------------------------------------
int __thiscall ItemList_AddWithSlider(unsigned int *this, int a2)
{
  int *v4; // ecx
  int v5; // edi
  int v6; // eax

  if ( !a2 || (int)*(this + 46) >= 1500 )
    return 0;
  IndexedArray_Add(this + 44, *(this + 46), &a2);
  v4 = (int *)*(this + 1569);
  if ( v4 )
  {
    v5 = *(this + 1560);
    v6 = (int)*(this + 46) / v5 - *(this + 1559) + 1;
    if ( (int)*(this + 46) % v5 > 0 )
      v6 = (int)*(this + 46) / v5 - *(this + 1559) + 2;
    if ( v6 > 0 )
    {
      Slider_SetTickCount(v4, v6);
      return 1;
    }
    Slider_SetTickCount(v4, 0);
  }
  return 1;
}

//----- (65762260) --------------------------------------------------------
_DWORD *__stdcall sub_65762260(_DWORD *a1, int a2, _DWORD *a3)
{
  int v3; // eax
  _DWORD *i; // ecx

  v3 = a2;
  for ( i = a1; v3; ++i )
  {
    *i = *a3;
    --v3;
  }
  return &a1[a2];
}

//----- (65762290) --------------------------------------------------------
void __thiscall sub_65762290(int this, char *Source, unsigned int a3, int a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  int v7; // edi
  char *v8; // ebx
  int v9; // eax
  unsigned int v10; // ecx
  char *v11; // ebx
  char *v12; // eax
  char *v13; // eax
  void *v14; // eax
  int v15; // edi
  int v16; // eax
  unsigned int v17; // eax
  char *v18; // edi
  int v19; // [esp-4h] [ebp-10h]
  int v20; // [esp+0h] [ebp-Ch]
  unsigned int v21; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 2;
  else
    v6 = 0;
  v7 = a3;
  if ( a3 )
  {
    v8 = *(char **)(this + 8);
    v9 = (int)&v8[-v5] >> 2;
    if ( 0x3FFFFFFF - v9 < a3 )
      sub_6575F580(v19, v20);
    if ( v6 >= v9 + a3 )
    {
      if ( (v8 - Source) >> 2 >= a3 )
      {
        v17 = 4 * a3;
        v18 = &v8[-4 * a3];
        a3 = *(_DWORD *)a4;
        a4 = v17;
        *(_DWORD *)(this + 8) = sub_65761FB0(v18, (int)v8, v8);
        sub_65760E10(Source, (int)v18, (int)v8);
        sub_6575FF60(Source, &Source[a4], &a3);
      }
      else
      {
        a3 = *(_DWORD *)a4;
        a4 = 4 * v7;
        sub_65761FB0(Source, (int)v8, &Source[4 * v7]);
        sub_65762260(*(_DWORD **)(this + 8), v7 - ((*(_DWORD *)(this + 8) - (int)Source) >> 2), &a3);
        v16 = a4;
        *(_DWORD *)(this + 8) += a4;
        sub_6575FF60(Source, (_DWORD *)(*(_DWORD *)(this + 8) - v16), &a3);
      }
    }
    else
    {
      if ( 0x3FFFFFFF - (v6 >> 1) >= v6 )
      {
        v10 = (v6 >> 1) + v6;
        v21 = v10;
      }
      else
      {
        v21 = 0;
        v10 = 0;
      }
      if ( v10 < v9 + a3 )
      {
        v21 = v9 + a3;
        v10 = v9 + a3;
      }
      v11 = (char *)sub_6575F720(v10);
      v12 = sub_65761FB0(*(void **)(this + 4), (int)Source, v11);
      v13 = (char *)sub_65762260(v12, v7, (_DWORD *)a4);
      sub_65761FB0(Source, *(_DWORD *)(this + 8), v13);
      v14 = *(void **)(this + 4);
      v15 = ((*(_DWORD *)(this + 8) - (int)v14) >> 2) + v7;
      if ( v14 )
        operator delete(v14);
      *(_DWORD *)(this + 4) = v11;
      *(_DWORD *)(this + 12) = &v11[4 * v21];
      *(_DWORD *)(this + 8) = &v11[4 * v15];
    }
  }
}
// 657622CE: variable 'v19' is possibly undefined
// 657622CE: variable 'v20' is possibly undefined

//----- (65762810) --------------------------------------------------------
void __thiscall sub_65762810(_DWORD *this)
{
  int v2; // edi
  int v3; // eax
  _DWORD *v4; // ecx
  unsigned int *v5; // ebx
  int v6; // eax
  char *v7; // esi

  if ( (int)*(this + 46) > 0 && *(this + 1574) <= 0xEu )
  {
    dword_65A5E610 = *(this + 1574);
    v2 = *(this + 46);
    v3 = 0;
    if ( v2 > 0 )
    {
      v4 = this + 49;
      do
        *v4++ = *(_DWORD *)(*(this + 45) + 4 * v3++);
      while ( v3 < v2 );
    }
    v5 = this + 44;
    IndexedArray_HasIndex(this + 44, 0);
    v6 = (int)(this + v2 + 49);
    if ( *(this + 1575) )
    {
      v7 = (char *)(this + 49);
      sub_65762510(v7, v6, (v6 - (int)v7) >> 2, 0);
    }
    else
    {
      v7 = (char *)(this + 49);
      sub_65762600(v7, v6, (v6 - (int)v7) >> 2, 0);
    }
    if ( v2 > 0 )
    {
      do
      {
        IndexedArray_Add(v5, v5[2], v7);
        v7 += 4;
        --v2;
      }
      while ( v2 );
    }
  }
}
// 65A5E610: using guessed type int dword_65A5E610;

//----- (657629B0) --------------------------------------------------------
void __thiscall TreeMap_ClearAll(void ***this)
{
  void **v1; // eax
  int ***v2; // edi
  int **v3; // ebx
  int *v4; // [esp+4h] [ebp-8h] BYREF
  void ***v5; // [esp+8h] [ebp-4h]

  v1 = *(this + 1);
  v2 = (int ***)*v1;
  *v1 = v1;
  (*(this + 1))[1] = *(this + 1);
  v5 = this;
  *(this + 2) = 0;
  if ( v2 != (int ***)*(this + 1) )
  {
    do
    {
      v3 = *v2;
      RBTree_EraseRange(v2 + 10, &v4, *v2[11], (int *)v2[11]);
      operator delete(v2[11]);
      v2[11] = 0;
      v2[12] = 0;
      operator delete(v2);
      v2 = (int ***)v3;
    }
    while ( v3 != (int **)v5[1] );
  }
}

//----- (65762A40) --------------------------------------------------------
void __thiscall TreeMap_Destroy(int this)
{
  TreeMap_ClearAll((void ***)this);
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
}

//----- (65762D70) --------------------------------------------------------
void __thiscall Inventory_ProcessItemSlots(int this, __int16 *a2, int a3, char a4)
{
  __int16 v4; // ax
  int v6; // edi
  int v7; // ecx
  int v8; // eax
  int v9; // ecx
  bool v10; // zf
  int v11; // ecx
  int *ItemByType; // esi
  unsigned __int16 *v13; // esi
  _DWORD *v14; // eax
  unsigned __int8 EquipSlot; // al
  _DWORD *v16; // eax
  int v17; // esi
  int *v18; // eax
  unsigned int v19; // edx
  int v20; // esi
  int *v21; // eax
  _DWORD *v22; // eax
  int v23; // esi
  int *v24; // eax
  __int16 v25; // si
  unsigned __int8 v26; // di
  int v27; // esi
  int *v28; // eax
  unsigned int v29; // edx
  void *v30; // eax
  char *v31; // ebx
  unsigned int *v32; // esi
  int v33; // eax
  int v34; // ecx
  int *v35; // ecx
  int **v36; // eax
  unsigned __int16 *v37; // esi
  _DWORD *v38; // eax
  unsigned __int8 v39; // al
  _DWORD *v40; // eax
  _DWORD *v41; // eax
  _DWORD *v42; // eax
  _DWORD *v43; // eax
  _DWORD *v44; // eax
  __int16 v45; // si
  unsigned __int8 v46; // di
  _DWORD *v47; // eax
  int v48; // ebx
  void *v49; // edx
  char *v50; // esi
  int *v51; // edi
  bool v52; // cc
  int v53; // ecx
  unsigned int v54; // eax
  int v55; // eax
  _DWORD *v56; // esi
  int v57; // [esp-24h] [ebp-1CCh]
  int v58; // [esp-8h] [ebp-1B0h]
  int v59; // [esp-4h] [ebp-1ACh]
  int *v60; // [esp-4h] [ebp-1ACh]
  char v61; // [esp+10h] [ebp-198h] BYREF
  char v62; // [esp+14h] [ebp-194h] BYREF
  int v63; // [esp+18h] [ebp-190h]
  int v64; // [esp+1Ch] [ebp-18Ch]
  int v65; // [esp+20h] [ebp-188h]
  int v66; // [esp+24h] [ebp-184h]
  int v67; // [esp+28h] [ebp-180h]
  int v68; // [esp+2Ch] [ebp-17Ch]
  int v69; // [esp+30h] [ebp-178h]
  int v70; // [esp+34h] [ebp-174h]
  int v71; // [esp+38h] [ebp-170h]
  int v72; // [esp+3Ch] [ebp-16Ch]
  int v73; // [esp+40h] [ebp-168h]
  int v74; // [esp+44h] [ebp-164h]
  int v75; // [esp+48h] [ebp-160h]
  _BYTE v76[4]; // [esp+4Ch] [ebp-15Ch] BYREF
  void *v77; // [esp+50h] [ebp-158h]
  char *v78; // [esp+54h] [ebp-154h]
  int v79; // [esp+58h] [ebp-150h]
  void **v80; // [esp+5Ch] [ebp-14Ch] BYREF
  void *v81; // [esp+60h] [ebp-148h]
  int v82; // [esp+64h] [ebp-144h]
  int *v83; // [esp+68h] [ebp-140h]
  _DWORD *v84; // [esp+6Ch] [ebp-13Ch]
  int v85; // [esp+70h] [ebp-138h] BYREF
  int v86; // [esp+74h] [ebp-134h] BYREF
  void *v87[2]; // [esp+78h] [ebp-130h] BYREF
  _DWORD v88[8]; // [esp+80h] [ebp-128h] BYREF
  _DWORD v89[8]; // [esp+B0h] [ebp-F8h] BYREF
  _DWORD v90[8]; // [esp+E0h] [ebp-C8h] BYREF
  _DWORD v91[8]; // [esp+110h] [ebp-98h] BYREF
  _DWORD v92[8]; // [esp+140h] [ebp-68h] BYREF
  _DWORD v93[8]; // [esp+16Ch] [ebp-3Ch] BYREF
  int **v94; // [esp+18Ch] [ebp-1Ch] BYREF
  void *v95; // [esp+190h] [ebp-18h]
  int v96; // [esp+194h] [ebp-14h]
  int v97; // [esp+1A4h] [ebp-4h]

  v4 = *a2;
  v6 = this + 6196;
  v83 = (int *)this;
  *(_WORD *)(this + 6196) = v4;
  ItemDataArray_Assign((int *)(this + 6200), (int)(a2 + 2));
  *(_DWORD *)(v6 + 20) = *((_DWORD *)a2 + 5);
  *(_DWORD *)(v6 + 24) = *((_DWORD *)a2 + 6);
  *(_DWORD *)(v6 + 28) = *((_DWORD *)a2 + 7);
  *(_BYTE *)(v6 + 32) = *((_BYTE *)a2 + 32);
  if ( !(unsigned __int16)ItemsAddedPayload_GetUsedCount((unsigned __int16 *)v6) )
  {
    ObjectManager_ClearAll((_DWORD *)this);
    return;
  }
  v81 = ListNode_AllocNew();
  v82 = 0;
  v97 = 0;
  sub_6593ED50((_WORD *)v6, &v80);
  if ( v82 )
  {
    v7 = *(_DWORD *)(this + 184);
    *(_BYTE *)(this + 6256) = a4;
    v8 = 0;
    *(_DWORD *)(this + 6252) = a3;
    if ( v7 > 0 )
    {
      do
      {
        v9 = *(_DWORD *)(this + 180);
        v10 = *(_DWORD *)(v9 + 4 * v8) == 0;
        v11 = v9 + 4 * v8;
        if ( !v10 )
          *(_BYTE *)(*(_DWORD *)v11 + 176) = 0;
        ++v8;
      }
      while ( v8 < *(_DWORD *)(this + 184) );
    }
    v84 = *(_DWORD **)v81;
    if ( v84 == v81 )
    {
LABEL_107:
      v48 = 0;
      v49 = 0;
      v50 = 0;
      v77 = 0;
      v78 = 0;
      v79 = 0;
      v51 = v83;
      v52 = v83[46] <= 0;
      LOBYTE(v97) = 3;
      if ( !v52 )
      {
        while ( 1 )
        {
          v53 = *(_DWORD *)(v51[45] + 4 * v48);
          v85 = v53;
          if ( v53 )
          {
            if ( *(_BYTE *)(v53 + 176) )
            {
              if ( v49 )
                v54 = (v79 - (int)v49) >> 2;
              else
                v54 = 0;
              if ( (v50 - (_BYTE *)v77) >> 2 >= v54 )
              {
                sub_65762290((int)v76, v50, 1u, (int)&v85);
                v50 = v78;
              }
              else
              {
                *(_DWORD *)v50 = v53;
                v50 += 4;
                v78 = v50;
              }
            }
            else
            {
              (**(void (__thiscall ***)(int, int))v53)(v53, 1);
            }
          }
          if ( ++v48 >= v51[46] )
            break;
          v49 = v77;
        }
      }
      IndexedArray_HasIndex(v51 + 44, 0);
      v55 = (v50 - (_BYTE *)v77) >> 2;
      if ( v55 > 0 )
      {
        v56 = v77;
        v87[0] = (void *)v55;
        do
        {
          IndexedArray_Add((unsigned int *)v51 + 44, v51[46], v56++);
          --v87[0];
        }
        while ( v87[0] );
      }
      if ( !Inventory_ContainsItem(v51, v51[1566]) )
        v51[1566] = 0;
      if ( !Inventory_ContainsItem(v51, v51[1567]) )
        v51[1567] = 0;
      if ( !Inventory_ContainsItem(v51, v51[1568]) )
        v51[1568] = 0;
      if ( !Inventory_ContainsItem(v51, v51[40]) )
        v51[40] = 0;
      if ( !Inventory_ContainsItem(v51, v51[39]) )
        v51[39] = 0;
      v51[1565] = 0;
      v51[1570] = 0;
      if ( a4 )
      {
        v51[1574] = 0;
        v51[1575] = 0;
        sub_65762810(v51);
        TextInput_GetLength(v51);
      }
      if ( v77 )
        operator delete(v77);
      goto LABEL_137;
    }
    while ( 1 )
    {
      qmemcpy(v93, v84 + 2, sizeof(v93));
      StringMap_CopyFrom(&v94, (int)(v84 + 10));
      LOBYTE(v97) = 1;
      ItemByType = (int *)Inventory_FindItemByType(v83, (int)v93);
      v85 = (int)ItemByType;
      if ( ItemByType )
      {
        sub_65765A40((int)ItemByType, v93);
        UiList_ClearEntries(ItemByType);
        if ( a3 )
        {
          v13 = (unsigned __int16 *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
          if ( (a3 & 1) != 0 && ItemId_IsUsable(g_ItemTemplateById, v93[0]) )
          {
            LOBYTE(v64) = BYTE1(v93[2]) >= 2u;
            v86 = 0;
            StatGroup_Read((_DWORD *)g_pEncVarMgr, 6, &v86);
            LOBYTE(v74) = v86 == 1;
            v87[0] = 0;
            StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, v87);
            if ( ItemTemplate_CanUse(
                   g_ItemTemplateById,
                   v93[0],
                   *((_BYTE *)v13 + 12),
                   *v13,
                   (unsigned __int8)v87[0],
                   v74,
                   v64) )
            {
              v14 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9000);
              LinkedList_AddNode((unsigned int *)v85, v14, 100, 0, 0);
            }
          }
          if ( (a3 & 4) != 0
            && ((EquipSlot = ItemTemplate_GetEquipSlot(g_ItemTemplateById, v93[0])) != 0 && EquipSlot < 4u
             || (unsigned __int8)(EquipSlot - 5) <= 0xBu) )
          {
            LOBYTE(v73) = BYTE1(v93[2]) >= 2u;
            v87[0] = 0;
            StatGroup_Read((_DWORD *)g_pEncVarMgr, 6, v87);
            LOBYTE(v71) = v87[0] == (void *)1;
            v86 = 0;
            StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v86);
            if ( ItemTemplate_CanUse(g_ItemTemplateById, v93[0], *((_BYTE *)v13 + 12), *v13, v86, v71, v73)
              && ItemTemplate_GetType(g_ItemTemplateById, v93[0]) != 6 )
            {
              v16 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9001);
              LinkedList_AddNode((unsigned int *)v85, v16, 102, 0, 0);
            }
          }
          if ( (a3 & 8) != 0 && sub_65934600(g_ItemTemplateById, v93[0]) )
          {
            v17 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9002);
            if ( v17 )
            {
              v18 = (int *)operator new(0x10u);
              if ( v18 )
              {
                *v18 = v17;
                v18[1] = 103;
                v18[2] = 0;
                v18[3] = 0;
              }
              else
              {
                v18 = 0;
              }
              v19 = *(_DWORD *)(v85 + 140);
              v87[0] = v18;
              List_InsertAtOffset((unsigned int *)(v85 + 132), v19, v87);
            }
          }
          if ( (a3 & 0x20) != 0 )
          {
            v92[0] = 0;
            v92[1] = 0;
            LOWORD(v92[2]) = 100;
            *(_DWORD *)((char *)&v92[6] + 3) = 0;
            if ( v96 )
              qmemcpy(v92, v93, sizeof(v92));
            LOBYTE(v69) = BYTE1(v92[2]);
            if ( sub_65933310(v92[0], HIWORD(v92[0]), HIWORD(v92[1]), BYTE1(v92[2])) )
            {
              v20 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9031);
              if ( v20 )
              {
                v21 = (int *)operator new(0x10u);
                if ( v21 )
                {
                  *v21 = v20;
                  v21[1] = 104;
                  v21[2] = 0;
                  v21[3] = 0;
                }
                else
                {
                  v21 = 0;
                }
                v87[0] = v21;
                List_InsertAtOffset((unsigned int *)(v85 + 132), *(_DWORD *)(v85 + 140), v87);
              }
            }
          }
          if ( (a3 & 0x40) != 0 )
          {
            LOWORD(v88[0]) = 0;
            *(_DWORD *)((char *)&v88[6] + 3) = 0;
            if ( v96 )
              qmemcpy(v88, v93, sizeof(v88));
            if ( (unsigned __int16)v96 > 1u && sub_65933150(g_ItemTemplateById, v88[0]) )
            {
              v22 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9043);
              LinkedList_AddNode((unsigned int *)v85, v22, 105, 0, 0);
            }
          }
          if ( (a3 & 0x80u) != 0 )
          {
            LOWORD(v89[0]) = 0;
            *(_DWORD *)((char *)&v89[6] + 3) = 0;
            if ( v96 )
              qmemcpy(v89, v93, sizeof(v89));
            if ( sub_65933490(v89[0]) )
            {
              v23 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9044);
              if ( v23 )
              {
                v24 = (int *)operator new(0x10u);
                if ( v24 )
                {
                  *v24 = v23;
                  v24[1] = 106;
                  v24[2] = 0;
                  v24[3] = 0;
                }
                else
                {
                  v24 = 0;
                }
                v87[0] = v24;
                List_InsertAtOffset((unsigned int *)(v85 + 132), *(_DWORD *)(v85 + 140), v87);
              }
            }
          }
          if ( (a3 & 2) != 0 )
          {
            v25 = v93[0];
            v87[0] = 0;
            StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, v87);
            v26 = (unsigned __int8)v87[0];
            LOBYTE(v67) = sub_65933EC0(g_ItemTemplateById, v93[0]);
            if ( sub_65933200(v25, v67, v26) )
            {
              v27 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9003);
              if ( v27 )
              {
                v28 = (int *)operator new(0x10u);
                if ( v28 )
                {
                  *v28 = v27;
                  v28[1] = 101;
                  v28[2] = 0;
                  v28[3] = 0;
                }
                else
                {
                  v28 = 0;
                }
                v29 = *(_DWORD *)(v85 + 140);
                v87[0] = v28;
                List_InsertAtOffset((unsigned int *)(v85 + 132), v29, v87);
              }
            }
          }
        }
      }
      else
      {
        v30 = operator new(0x17Cu);
        v87[0] = v30;
        LOBYTE(v97) = 2;
        if ( v30 )
          v31 = UiObject_Ctor((char *)v30);
        else
          v31 = 0;
        v32 = (unsigned int *)v83;
        v33 = v83[24];
        v59 = v83[1562];
        LOBYTE(v65) = *((_BYTE *)v83 + 100);
        v58 = v83[1561];
        v34 = v83[14];
        v57 = v83[1578];
        LOBYTE(v97) = 1;
        if ( !sub_65764D80((int)v31, v57, v34, 0, 0, v93, v65, v33, v58, v59) )
        {
          if ( v31 )
            (**(void (__thiscall ***)(char *, int))v31)(v31, 1);
          v35 = *(int **)v95;
          v60 = (int *)v95;
          v36 = (int **)&v61;
          goto LABEL_106;
        }
        *((_DWORD *)v31 + 76) = v32[1577];
        *((_DWORD *)v31 + 81) = 1;
        v31[328] = 1;
        ItemList_AddWithSlider(v32, (int)v31);
        if ( a3 )
        {
          v37 = (unsigned __int16 *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
          if ( (a3 & 1) != 0 && ItemId_IsUsable(g_ItemTemplateById, v93[0]) )
          {
            LOBYTE(v63) = BYTE1(v93[2]) >= 2u;
            v87[0] = 0;
            StatGroup_Read((_DWORD *)g_pEncVarMgr, 6, v87);
            LOBYTE(v75) = v87[0] == (void *)1;
            v86 = 0;
            StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v86);
            if ( ItemTemplate_CanUse(g_ItemTemplateById, v93[0], *((_BYTE *)v37 + 12), *v37, v86, v75, v63) )
            {
              v38 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9000);
              LinkedList_AddNode((unsigned int *)v31, v38, 100, 0, 0);
            }
          }
          if ( (a3 & 4) != 0
            && ((v39 = ItemTemplate_GetEquipSlot(g_ItemTemplateById, v93[0])) != 0 && v39 < 4u
             || (unsigned __int8)(v39 - 5) <= 0xBu) )
          {
            LOBYTE(v68) = BYTE1(v93[2]) >= 2u;
            v87[0] = 0;
            StatGroup_Read((_DWORD *)g_pEncVarMgr, 6, v87);
            LOBYTE(v72) = v87[0] == (void *)1;
            v86 = 0;
            StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v86);
            if ( ItemTemplate_CanUse(g_ItemTemplateById, v93[0], *((_BYTE *)v37 + 12), *v37, v86, v72, v68) )
            {
              if ( ItemTemplate_IsType3or4(g_ItemTemplateById, v93[0]) )
              {
                if ( !*((_BYTE *)dword_65ABF73C + 52) )
                {
LABEL_82:
                  v40 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9001);
                  LinkedList_AddNode((unsigned int *)v31, v40, 102, 0, 0);
                }
              }
              else if ( ItemTemplate_GetType(g_ItemTemplateById, v93[0]) != 6 )
              {
                goto LABEL_82;
              }
            }
          }
          if ( (a3 & 8) != 0 && sub_65934600(g_ItemTemplateById, v93[0]) )
          {
            v41 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9002);
            LinkedList_AddNode((unsigned int *)v31, v41, 103, 0, 0);
          }
          if ( (a3 & 0x20) != 0 )
          {
            v92[0] = 0;
            v92[1] = 0;
            LOWORD(v92[2]) = 100;
            *(_DWORD *)((char *)&v92[6] + 3) = 0;
            if ( v96 )
              qmemcpy(v92, v93, sizeof(v92));
            LOBYTE(v66) = BYTE1(v92[2]);
            if ( sub_65933310(v92[0], HIWORD(v92[0]), HIWORD(v92[1]), BYTE1(v92[2])) )
            {
              v42 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9031);
              LinkedList_AddNode((unsigned int *)v31, v42, 104, 0, 0);
            }
          }
          if ( (a3 & 0x40) != 0 )
          {
            LOWORD(v91[0]) = 0;
            *(_DWORD *)((char *)&v91[6] + 3) = 0;
            if ( v96 )
              qmemcpy(v91, v93, sizeof(v91));
            if ( (unsigned __int16)v96 > 1u && sub_65933150(g_ItemTemplateById, v91[0]) )
            {
              v43 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9043);
              LinkedList_AddNode((unsigned int *)v31, v43, 105, 0, 0);
            }
          }
          if ( (a3 & 0x80u) != 0 )
          {
            LOWORD(v90[0]) = 0;
            *(_DWORD *)((char *)&v90[6] + 3) = 0;
            if ( v96 )
              qmemcpy(v90, v93, sizeof(v90));
            if ( sub_65933490(v90[0]) )
            {
              v44 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9044);
              LinkedList_AddNode((unsigned int *)v31, v44, 106, 0, 0);
            }
          }
          if ( (a3 & 2) != 0 )
          {
            v45 = v93[0];
            v87[0] = 0;
            StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, v87);
            v46 = (unsigned __int8)v87[0];
            LOBYTE(v70) = sub_65933EC0(g_ItemTemplateById, v93[0]);
            if ( sub_65933200(v45, v70, v46) )
            {
              v47 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9003);
              LinkedList_AddNode((unsigned int *)v31, v47, 101, 0, 0);
            }
          }
        }
      }
      v35 = *(int **)v95;
      v60 = (int *)v95;
      v36 = (int **)&v62;
LABEL_106:
      LOBYTE(v97) = 0;
      RBTree_EraseRange(&v94, v36, v35, v60);
      operator delete(v95);
      v84 = (_DWORD *)*v84;
      if ( v84 == v81 )
        goto LABEL_107;
    }
  }
  ObjectManager_ClearAll((_DWORD *)this);
LABEL_137:
  v97 = -1;
  TreeMap_ClearAll(&v80);
  operator delete(v81);
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65763AA0) --------------------------------------------------------
void __thiscall InventoryUI_SetColumnCount(int this, int a2)
{
  int v3; // eax

  v3 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 6284)) / a2;
  *(_DWORD *)(this + 6244) = a2;
  *(_DWORD *)(this + 6240) = v3;
  if ( v3 < 1 )
    *(_DWORD *)(this + 6240) = 1;
  ObjectManager_ClearAll((_DWORD *)this);
  Inventory_ProcessItemSlots(this, (__int16 *)(this + 6196), *(_DWORD *)(this + 6252), *(_BYTE *)(this + 6256));
}

//----- (65763E20) --------------------------------------------------------
BOOL __thiscall ItemSlot_GetItemId(unsigned __int16 *this)
{
  return *(_DWORD *)this && ItemStructA_IsValid(this + 2);
}

//----- (65763E50) --------------------------------------------------------
_BYTE *__thiscall ItemSlot_GetQuantity(_BYTE *this, _DWORD *a2, _BYTE *a3)
{
  *(_DWORD *)this = *a2;
  *(this + 4) = *a3;
  return this;
}

//----- (65763E70) --------------------------------------------------------
int __thiscall ItemSlot_SetValues(int **this)
{
  int *v1; // eax
  int result; // eax
  int v3; // edx

  v1 = *this;
  if ( *((_BYTE *)*this + 17) )
  {
    result = v1[2];
    *this = (int *)result;
  }
  else
  {
    v3 = *v1;
    if ( *(_BYTE *)(*v1 + 17) )
    {
      for ( result = v1[1]; !*(_BYTE *)(result + 17); result = *(_DWORD *)(result + 4) )
      {
        if ( *this != *(int **)result )
          break;
        *this = (int *)result;
      }
      if ( !*((_BYTE *)*this + 17) )
        *this = (int *)result;
    }
    else
    {
      for ( result = *(_DWORD *)(v3 + 8); !*(_BYTE *)(result + 17); result = *(_DWORD *)(result + 8) )
        v3 = result;
      *this = (int *)v3;
    }
  }
  return result;
}

//----- (65763F00) --------------------------------------------------------
int __thiscall UiItemSlot_SetItemAndTooltip(
        int this,
        char a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        int a8,
        int a9,
        int a10,
        int a11,
        int a12,
        int a13)
{
  int result; // eax
  unsigned __int16 v15; // si
  int v16; // eax
  char *v17; // eax
  int v18; // eax
  unsigned __int16 v19; // ax
  int HandleByIndex; // eax
  unsigned __int16 v21; // ax
  int v22; // eax
  _BYTE v23[28]; // [esp-38h] [ebp-F4h] BYREF
  _BYTE v24[20]; // [esp-1Ch] [ebp-D8h] BYREF
  int v25; // [esp-8h] [ebp-C4h]
  char *v26; // [esp-4h] [ebp-C0h]
  char v27[92]; // [esp+10h] [ebp-ACh] BYREF
  _BYTE v28[28]; // [esp+6Ch] [ebp-50h] BYREF
  _BYTE *v29; // [esp+88h] [ebp-34h]
  _BYTE *v30; // [esp+8Ch] [ebp-30h]
  _BYTE v31[28]; // [esp+90h] [ebp-2Ch] BYREF
  int v32; // [esp+B8h] [ebp-4h]

  if ( (unsigned __int16)*(_DWORD *)(this + 220) )
  {
    *(float *)(this + 320) = 1.0;
    *(_DWORD *)(this + 332) = 0;
    *(_WORD *)(this + 336) = 0;
    *(_WORD *)(this + 338) = 0;
    *(_WORD *)(this + 340) = 0;
    *(_WORD *)(this + 342) = 0;
    *(_BYTE *)(this + 344) = 100;
    *(_BYTE *)(this + 345) = 0;
    *(_DWORD *)(this + 348) = 0;
    *(_DWORD *)(this + 352) = 0;
    *(_DWORD *)(this + 356) = 0;
    *(_BYTE *)(this + 361) = 0;
    *(_BYTE *)(this + 362) = 0;
    *(_BYTE *)(this + 360) = 0;
    *(_DWORD *)(this + 363) = 0;
    *(_DWORD *)(this + 368) = 0;
    *(_DWORD *)(this + 372) = 0;
    *(_BYTE *)(this + 376) = 0;
    return 0;
  }
  qmemcpy((void *)(this + 332), &a2, 0x30u);
  if ( *(_DWORD *)(this + 292) )
  {
    v15 = 0;
    switch ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, a3) )
    {
      case 2u:
      case 0x10u:
      case 0x11u:
      case 0x12u:
        goto LABEL_7;
      case 3u:
        if ( !ItemTemplate_IsRangedOrAmmoType(g_ItemTemplateById, a3) && *(_DWORD *)(this + 96) != 3 )
LABEL_7:
          v15 = HIWORD(a3);
        break;
      case 0x13u:
        v15 = HIWORD(a4);
        break;
      default:
        break;
    }
    std::string::string(v31, byte_659A8B98);
    v32 = 0;
    if ( v15 )
    {
      v30 = v24;
      String_FromU16(v24, v15);
      v29 = v23;
      LOBYTE(v32) = 1;
      String_FromU32(v23, 1u);
      LOBYTE(v32) = 0;
      v16 = FormatString_Args((int)v28, (int)"{0} x {1}");
      LOBYTE(v32) = 2;
      std::string::operator=(v31, v16);
      LOBYTE(v32) = 0;
      std::string::~string(v28);
    }
    v26 = 0;
    v25 = 0;
    v17 = (char *)std::string::c_str(v31);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 292), v17, v25, v26);
    v32 = -1;
    std::string::~string(v31);
  }
  *(_DWORD *)(this + 272) = ItemTemplate_GetIconHandle((int **)dword_65ABF748, *(_WORD *)(this + 336));
  v18 = *(unsigned __int16 *)(this + 336);
  *(_DWORD *)(this + 276) = 0;
  if ( v18 != 1280 )
  {
    if ( v18 != 1802 )
      goto LABEL_20;
    v19 = *(_WORD *)(this + 338);
    if ( !v19 || v19 > 0xAu )
      goto LABEL_20;
    HandleByIndex = IconAtlas_GetHandleByIndex(dword_65ABF760, v19 + 2);
    *(_BYTE *)(this + 280) = 1;
    goto LABEL_19;
  }
  v21 = *(_WORD *)(this + 338);
  LOBYTE(v30) = *(_BYTE *)(this + 362);
  if ( ItemTemplate_CopyVariantByIndex(v21, (unsigned __int8)v30, v27) )
  {
    HandleByIndex = ItemTemplate_GetIconHandle((int **)dword_65ABF748, *(unsigned __int16 *)v27);
    *(_BYTE *)(this + 280) = 0;
LABEL_19:
    *(_DWORD *)(this + 276) = HandleByIndex;
  }
LABEL_20:
  *(_DWORD *)(this + 308) = 1;
  UiItemSlot_FreeTooltipHString((int *)this);
  v22 = BuildItemTooltip((unsigned __int16 *)(this + 332));
  result = UiItemSlot_SetTooltipHString((int *)this, v22);
  *(float *)(this + 320) = 0.2;
  return result;
}
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (657647D0) --------------------------------------------------------
int *__thiscall sub_657647D0(int **this, int *a2, char a3, int *a4, _DWORD *a5)
{
  _DWORD *v6; // ecx
  int *v7; // eax
  int **v8; // eax
  int v9; // eax
  int *v10; // eax
  int v11; // esi
  int v12; // ecx
  int *v13; // edx
  int v14; // edx
  int v15; // edx
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-50h] BYREF
  _BYTE v18[28]; // [esp+38h] [ebp-28h] BYREF
  int v19; // [esp+5Ch] [ebp-4h]
  _DWORD *v20; // [esp+74h] [ebp+14h]

  if ( (unsigned int)*(this + 2) >= 0x3FFFFFFE )
  {
    std::string::string(v18, "map/set<T> too long");
    v19 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v18);
    pExceptionObject[0] = &off_659BFD28;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
  }
  v6 = StringMapNode_Alloc((int)*(this + 1), (int)a4, (int)*(this + 1), a5, 0);
  v7 = *(this + 1);
  *(this + 2) = (int *)((char *)*(this + 2) + 1);
  v20 = v6;
  if ( a4 == v7 )
  {
    v7[1] = (int)v6;
    **(this + 1) = (int)v6;
    (*(this + 1))[2] = (int)v6;
  }
  else if ( a3 )
  {
    *a4 = (int)v6;
    v8 = (int **)*(this + 1);
    if ( a4 == *v8 )
      *v8 = v6;
  }
  else
  {
    a4[2] = (int)v6;
    v9 = (int)*(this + 1);
    if ( a4 == *(int **)(v9 + 8) )
      *(_DWORD *)(v9 + 8) = v6;
  }
  v10 = v6 + 1;
  v11 = (int)v6;
  if ( !*(_BYTE *)(v6[1] + 16) )
  {
    do
    {
      v12 = *v10;
      v13 = *(int **)(*v10 + 4);
      if ( *v10 == *v13 )
      {
        v14 = v13[2];
        if ( *(_BYTE *)(v14 + 16) )
        {
          if ( v11 == *(_DWORD *)(v12 + 8) )
          {
            v11 = *v10;
            RBTree_RotateRight(this, *v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 16) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 16) = 0;
          RBTree_RotateLeft(this, *(_DWORD **)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 16) = 1;
          *(_BYTE *)(v14 + 16) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 16) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      else
      {
        v15 = *v13;
        if ( *(_BYTE *)(v15 + 16) )
        {
          if ( v11 == *(_DWORD *)v12 )
          {
            v11 = *v10;
            RBTree_RotateLeft(this, (_DWORD *)*v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 16) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 16) = 0;
          RBTree_RotateRight(this, *(_DWORD *)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 16) = 1;
          *(_BYTE *)(v15 + 16) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 16) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      v10 = (int *)(v11 + 4);
    }
    while ( !*(_BYTE *)(*(_DWORD *)(v11 + 4) + 16) );
    v6 = v20;
  }
  *(_BYTE *)((*(this + 1))[1] + 16) = 1;
  *a2 = (int)v6;
  return a2;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65764980) --------------------------------------------------------
_DWORD *__thiscall ItemStructA_Clear(char *this)
{
  char *v1; // esi
  _DWORD *result; // eax

  *(_WORD *)this = 0;
  *((_WORD *)this + 1) = 0;
  *((_WORD *)this + 2) = 0;
  *((_WORD *)this + 3) = 0;
  *(this + 8) = 100;
  *(this + 9) = 0;
  *((_DWORD *)this + 3) = 0;
  *((_DWORD *)this + 4) = 0;
  *((_DWORD *)this + 5) = 0;
  *(this + 25) = 0;
  *(this + 26) = 0;
  *(this + 24) = 0;
  v1 = this + 32;
  *(_DWORD *)(this + 27) = 0;
  RBTree_DeleteSubtree(*(void ***)(*((_DWORD *)this + 9) + 4));
  *(_DWORD *)(*((_DWORD *)v1 + 1) + 4) = *((_DWORD *)v1 + 1);
  result = (_DWORD *)*((_DWORD *)v1 + 1);
  *((_DWORD *)v1 + 2) = 0;
  *result = result;
  *(_DWORD *)(*((_DWORD *)v1 + 1) + 8) = *((_DWORD *)v1 + 1);
  return result;
}

//----- (657649E0) --------------------------------------------------------
int __thiscall ItemsAddedEntry_InsertVariantId(int **this, int a2, _DWORD *a3)
{
  _DWORD *v3; // ebx
  _DWORD *v5; // esi
  int *v6; // eax
  bool v7; // cl
  unsigned int v8; // edx
  _DWORD *v9; // edx
  int v10; // edx
  char v12; // [esp+Ch] [ebp-4h]

  v3 = a3;
  v5 = *(this + 1);
  v6 = (int *)v5[1];
  v7 = 1;
  v12 = 1;
  if ( !*((_BYTE *)v6 + 17) )
  {
    v8 = *a3;
    do
    {
      v5 = v6;
      v7 = v8 < v6[3];
      v12 = v7;
      if ( v8 >= v6[3] )
        v6 = (int *)v6[2];
      else
        v6 = (int *)*v6;
    }
    while ( !*((_BYTE *)v6 + 17) );
  }
  v9 = v5;
  a3 = v5;
  if ( v7 )
  {
    if ( v5 == (_DWORD *)**(this + 1) )
    {
      v10 = *sub_657647D0(this, (int *)&a3, 1, v5, v3);
      *(_BYTE *)(a2 + 4) = 1;
      *(_DWORD *)a2 = v10;
      return a2;
    }
    ItemSlot_SetValues(&a3);
    v9 = a3;
  }
  if ( v9[3] >= *v3 )
  {
    *(_BYTE *)(a2 + 4) = 0;
    *(_DWORD *)a2 = v9;
  }
  else
  {
    *(_DWORD *)a2 = *sub_657647D0(this, (int *)&a3, v12, v5, v3);
    *(_BYTE *)(a2 + 4) = 1;
  }
  return a2;
}

//----- (65764AD0) --------------------------------------------------------
bool __thiscall sub_65764AD0(int this, const void *a2)
{
  void *v3; // edi
  bool v4; // al
  bool result; // al
  unsigned __int16 v6; // ax
  int IconHandle; // eax
  int v8; // eax
  unsigned __int16 v9; // ax
  unsigned __int16 v10; // ax
  int v11; // eax
  char v12[92]; // [esp+Ch] [ebp-64h] BYREF
  int *v13; // [esp+68h] [ebp-8h] BYREF
  bool v14; // [esp+6Fh] [ebp-1h]
  int v15; // [esp+78h] [ebp+8h]

  *(_DWORD *)(this + 332) = 0;
  *(_WORD *)(this + 336) = 0;
  *(_WORD *)(this + 340) = 0;
  *(_WORD *)(this + 338) = 0;
  *(_WORD *)(this + 342) = 0;
  *(_BYTE *)(this + 344) = 100;
  *(_BYTE *)(this + 345) = 0;
  *(_DWORD *)(this + 348) = 0;
  *(_DWORD *)(this + 352) = 0;
  *(_DWORD *)(this + 356) = 0;
  *(_BYTE *)(this + 361) = 0;
  *(_BYTE *)(this + 362) = 0;
  *(_BYTE *)(this + 360) = 0;
  *(_DWORD *)(this + 363) = 0;
  v3 = (void *)(this + 180);
  *(_DWORD *)(this + 368) = 0;
  *(_DWORD *)(this + 372) = 0;
  *(_BYTE *)(this + 376) = 0;
  v4 = ItemStructA_Equals((_WORD *)(this + 180), (int)a2);
  qmemcpy(v3, a2, 0x20u);
  result = !v4;
  v14 = result;
  v15 = (int)a2 + 32;
  if ( this + 212 != v15 )
  {
    RBTree_EraseRange((int ***)(this + 212), &v13, **(int ***)(this + 216), *(int **)(this + 216));
    StringMap_CopyTree((int ***)(this + 212), v15);
    result = v14;
  }
  if ( *(_DWORD *)(this + 220) )
  {
    qmemcpy((void *)(this + 228), (const void *)(this + 180), 0x20u);
    *(_DWORD *)(this + 224) = *(_DWORD *)(**(_DWORD **)(this + 216) + 12);
  }
  if ( result )
  {
    v6 = *(_WORD *)(this + 228);
    if ( v6 && v6 < 0xBC1u )
      IconHandle = ItemTemplate_GetIconHandle((int **)dword_65ABF748, v6);
    else
      IconHandle = 0;
    *(_DWORD *)(this + 272) = IconHandle;
    v8 = *(unsigned __int16 *)(this + 228);
    *(_DWORD *)(this + 276) = 0;
    if ( v8 == 1280 )
    {
      v10 = *(_WORD *)(this + 230);
      if ( v10 && v10 < 0xBC1u )
      {
        if ( ItemTemplate_CopyVariantByIndex(v10, *(_BYTE *)(this + 254), v12)
          && (unsigned __int16)(*(_WORD *)v12 - 1) <= 0xBBFu )
        {
          *(_DWORD *)(this + 276) = ItemTemplate_GetIconHandle((int **)dword_65ABF748, *(unsigned __int16 *)v12);
        }
        *(_BYTE *)(this + 280) = 0;
      }
    }
    else if ( v8 == 1802 )
    {
      v9 = *(_WORD *)(this + 230);
      if ( v9 )
      {
        if ( v9 <= 0xAu )
        {
          *(_DWORD *)(this + 276) = IconAtlas_GetHandleByIndex(dword_65ABF760, v9 + 2);
          *(_BYTE *)(this + 280) = 1;
        }
      }
    }
    *(_DWORD *)(this + 308) = 1;
    UiItemSlot_FreeTooltipHString((int *)this);
    v11 = BuildItemTooltip((unsigned __int16 *)(this + 224));
    UiItemSlot_SetTooltipHString((int *)this, v11);
    return v14;
  }
  return result;
}
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (65764D00) --------------------------------------------------------
bool __thiscall ItemStructA_UpdateFrom(int **this, unsigned __int16 *a2)
{
  unsigned __int16 **v2; // edi
  unsigned __int16 *v4; // esi
  _BYTE v6[8]; // [esp+Ch] [ebp-8h] BYREF

  v2 = (unsigned __int16 **)a2;
  if ( !*(_DWORD *)a2 )
    return 0;
  v4 = a2 + 2;
  if ( !ItemStructA_IsValid(a2 + 2) )
    return 0;
  if ( ItemStructA_IsValid((unsigned __int16 *)this) )
  {
    if ( !ItemStructA_Equals(this, (int)(v2 + 1)) )
      return 0;
  }
  else
  {
    qmemcpy(this, v4, 0x20u);
    v2 = (unsigned __int16 **)a2;
  }
  a2 = *v2;
  return *(_BYTE *)(ItemsAddedEntry_InsertVariantId(this + 8, (int)v6, &a2) + 4) == 1;
}

//----- (65764D80) --------------------------------------------------------
int __thiscall sub_65764D80(
        int this,
        int a2,
        int a3,
        int a4,
        int Buffer,
        const void *a6,
        char a7,
        int a8,
        int a9,
        int a10)
{
  int v11; // eax
  int v12; // eax
  bool v13; // zf
  void *v14; // eax
  float *v15; // eax
  int *v16; // ecx
  int v17; // eax
  unsigned int v18; // ebx
  void (__thiscall ***v19)(_DWORD, int); // ecx
  int v21; // eax
  _DWORD *v22; // eax
  int v23; // ecx
  char *v24; // ecx
  void *v25; // eax
  float *v26; // eax
  void (__thiscall ***v27)(_DWORD, int); // ecx
  _DWORD *v28; // eax
  int v29; // ecx
  unsigned __int16 v30; // di
  int v31; // eax
  char *v32; // eax
  int v33; // edi
  void *v34; // eax
  float *v35; // eax
  const char *v36; // eax
  void (__thiscall ***v37)(_DWORD, int); // ecx
  _DWORD *v38; // eax
  int v39; // ecx
  int v40; // edx
  void *v41; // eax
  float *v42; // eax
  void (__thiscall ***v43)(_DWORD, int); // ecx
  _BYTE v44[28]; // [esp-34h] [ebp-9Ch] BYREF
  _DWORD v45[5]; // [esp-18h] [ebp-80h] BYREF
  int v46; // [esp-4h] [ebp-6Ch]
  char *v47; // [esp+0h] [ebp-68h]
  void *v48; // [esp+14h] [ebp-54h]
  void *v49; // [esp+18h] [ebp-50h] BYREF
  char v50[28]; // [esp+1Ch] [ebp-4Ch] BYREF
  char v51[4]; // [esp+38h] [ebp-30h] BYREF
  _BYTE v52[28]; // [esp+3Ch] [ebp-2Ch] BYREF
  int v53; // [esp+64h] [ebp-4h]

  sub_65764AD0(this, a6);
  *(_DWORD *)(this + 316) = a2;
  v11 = a9;
  if ( a9 <= 0 )
    v11 = 48;
  *(_DWORD *)(this + 8) = v11;
  v12 = a10;
  if ( a10 <= 0 )
    v12 = 48;
  v13 = *(_DWORD *)(this + 292) == 0;
  *(_DWORD *)(this + 12) = v12;
  *(_DWORD *)(this + 96) = a8;
  *(_BYTE *)(this + 100) = a7;
  if ( v13 )
  {
    v14 = operator new(0x224u);
    v49 = v14;
    v53 = 0;
    if ( v14 )
      v15 = TextInput_Ctor((float *)v14);
    else
      v15 = 0;
    v53 = -1;
    *(_DWORD *)(this + 292) = v15;
  }
  v47 = 0;
  v46 = 0;
  v16 = *(int **)(this + 292);
  v45[4] = 0;
  v17 = *v16;
  v45[3] = byte_659A8B98;
  v18 = *(unsigned __int16 *)(this + 220);
  if ( !(*(int (__thiscall **)(int *, _DWORD, int, int, _DWORD, _DWORD, int, void *, int, _DWORD, _DWORD, int, const char *, _DWORD, _DWORD, _DWORD))(v17 + 128))(
          v16,
          0,
          16,
          40,
          0,
          0,
          1,
          &unk_65A5CE5C,
          2,
          0,
          0,
          this,
          byte_659A8B98,
          0,
          0,
          0) )
  {
    v19 = *(void (__thiscall ****)(_DWORD, int))(this + 292);
    if ( v19 )
      (**v19)(v19, 1);
    *(_DWORD *)(this + 292) = 0;
    return 0;
  }
  v21 = *(_DWORD *)(this + 292);
  *(_DWORD *)(v21 + 504) = v18;
  *(_DWORD *)(v21 + 500) = 1;
  v22 = *(_DWORD **)(this + 292);
  v23 = v22[19] + 5;
  v22[18] = v22[20] + 35;
  v22[21] = 5;
  v22[22] = 35;
  v22[17] = v23;
  (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 292) + 88))(*(_DWORD *)(this + 292), 1);
  if ( !*(_DWORD *)(this + 200) )
  {
LABEL_25:
    v30 = 0;
    switch ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, *(_WORD *)(this + 180)) )
    {
      case 2u:
      case 0x10u:
      case 0x11u:
      case 0x12u:
        goto LABEL_28;
      case 3u:
        if ( !ItemTemplate_IsRangedOrAmmoType(g_ItemTemplateById, *(_WORD *)(this + 180)) && *(_DWORD *)(this + 96) != 3 )
LABEL_28:
          v30 = *(_WORD *)(this + 182);
        break;
      case 0x13u:
        v30 = *(_WORD *)(this + 186);
        break;
      default:
        break;
    }
    std::string::string(v50, byte_659A8B98);
    v53 = 2;
    if ( v30 && v18 )
    {
      v49 = v45;
      String_FromU16(v45, v30);
      v48 = v44;
      LOBYTE(v53) = 3;
      String_FromU32(v44, v18);
      LOBYTE(v53) = 2;
      v31 = FormatString_Args((int)v52, (int)"{0} x {1}");
      LOBYTE(v53) = 4;
    }
    else if ( v18 <= 1 )
    {
      if ( !v30 )
        goto LABEL_38;
      v48 = v45;
      String_FromU16(v45, v30);
      v31 = FormatString((int)v52, (int)&unk_659C45C8);
      LOBYTE(v53) = 6;
    }
    else
    {
      v48 = v45;
      String_FromU32(v45, v18);
      v31 = FormatString((int)v52, (int)&unk_659C45C8);
      LOBYTE(v53) = 5;
    }
    std::string::operator=(v50, v31);
    LOBYTE(v53) = 2;
    std::string::~string(v52);
LABEL_38:
    v47 = 0;
    v46 = 0;
    v32 = (char *)std::string::c_str(v50);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 292), v32, v46, v47);
    if ( *(int *)(this + 8) > 48 )
    {
      v33 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
              g_pILTClient,
              *(unsigned __int16 *)(this + 180) + 30000);
      if ( !*(_DWORD *)(this + 284) )
      {
        v34 = operator new(0x224u);
        v48 = v34;
        LOBYTE(v53) = 7;
        if ( v34 )
          v35 = TextInput_Ctor((float *)v34);
        else
          v35 = 0;
        LOBYTE(v53) = 2;
        *(_DWORD *)(this + 284) = v35;
      }
      if ( v33 )
        v36 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v33);
      else
        v36 = byte_659A8B98;
      if ( !(*(int (__thiscall **)(_DWORD, _DWORD, int, int, int, _DWORD, _DWORD, char *, int, _DWORD, _DWORD, int, const char *, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(this + 284) + 128))(
              *(_DWORD *)(this + 284),
              0,
              64,
              *(_DWORD *)(this + 8) - 50,
              42,
              0,
              0,
              byte_65A5C4A8,
              2,
              0,
              0,
              this,
              v36,
              0,
              0,
              0) )
      {
        if ( v33 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v33);
        v37 = *(void (__thiscall ****)(_DWORD, int))(this + 284);
        if ( v37 )
          (**v37)(v37, 1);
        *(_DWORD *)(this + 284) = 0;
LABEL_53:
        v53 = -1;
        std::string::~string(v50);
        return 0;
      }
      v38 = *(_DWORD **)(this + 284);
      v39 = v38[19] + 50;
      v40 = v38[20] + 6;
      v38[21] = 50;
      v38[22] = 6;
      v38[17] = v39;
      v38[18] = v40;
      if ( v33 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v33);
      if ( *(_DWORD *)(this + 192) )
      {
        unknown_libname_664(&v49);
        v49 = *(void **)(this + 192);
        sub_65948390(v51, &v49);
        if ( !*(_DWORD *)(this + 288) )
        {
          v41 = operator new(0x224u);
          v48 = v41;
          LOBYTE(v53) = 8;
          if ( v41 )
            v42 = TextInput_Ctor((float *)v41);
          else
            v42 = 0;
          LOBYTE(v53) = 2;
          *(_DWORD *)(this + 288) = v42;
        }
        if ( !(*(int (__thiscall **)(_DWORD, _DWORD, int, int, int, _DWORD, _DWORD, char *, int, _DWORD, _DWORD, int, char *, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(this + 288) + 128))(
                *(_DWORD *)(this + 288),
                0,
                64,
                *(_DWORD *)(this + 8) - 50,
                42,
                0,
                0,
                byte_65A5C4A8,
                2,
                0,
                0,
                this,
                v51,
                0,
                0,
                0) )
        {
          v43 = *(void (__thiscall ****)(_DWORD, int))(this + 288);
          if ( v43 )
            (**v43)(v43, 1);
          *(_DWORD *)(this + 288) = 0;
          goto LABEL_53;
        }
        CWindow_SetOffset(*(_DWORD **)(this + 288), 50, *(_DWORD *)(this + 12) - 16);
      }
    }
    *(_DWORD *)(this + 64) = Buffer;
    *(_BYTE *)(this + 176) = 1;
    *(_DWORD *)(this + 56) = a3;
    *(_DWORD *)(this + 60) = a4;
    v53 = -1;
    std::string::~string(v50);
    return 1;
  }
  if ( !*(_DWORD *)(this + 296) )
  {
    v25 = operator new(0xD8u);
    v49 = v25;
    v53 = 1;
    if ( v25 )
      v26 = sub_6576CC20((float *)v25);
    else
      v26 = 0;
    v53 = -1;
    *(_DWORD *)(this + 296) = v26;
  }
  v47 = v24;
  if ( Scrollbar_InitFromTable(*(_DWORD *)(this + 296), 128, 1.0) )
  {
    v28 = *(_DWORD **)(this + 296);
    v29 = v28[19] + 34;
    v28[18] = v28[20] + 2;
    v28[21] = 34;
    v28[22] = 2;
    v28[17] = v29;
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 296) + 88))(*(_DWORD *)(this + 296), 1);
    goto LABEL_25;
  }
  v27 = *(void (__thiscall ****)(_DWORD, int))(this + 296);
  if ( v27 )
    (**v27)(v27, 1);
  *(_DWORD *)(this + 296) = 0;
  return 0;
}
// 65764F16: variable 'v24' is possibly undefined
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65765320) --------------------------------------------------------
void __thiscall UiItemSlot_SetItem(int this, unsigned __int16 *a2)
{
  int v3; // eax
  unsigned __int16 v4; // ax
  unsigned __int16 v5; // ax
  int v6; // eax
  int v7; // esi
  char *v8; // eax
  int v9; // ecx
  unsigned int v10; // edi
  unsigned __int16 v11; // si
  int v12; // eax
  char *v13; // eax
  int v14; // ebx
  int v15; // ecx
  int v16; // ecx
  int v17; // ebx
  _BYTE v18[28]; // [esp-38h] [ebp-118h] BYREF
  _BYTE v19[16]; // [esp-1Ch] [ebp-FCh] BYREF
  char *v20; // [esp-Ch] [ebp-ECh]
  int v21; // [esp-8h] [ebp-E8h]
  char *v22; // [esp-4h] [ebp-E4h]
  char v23[92]; // [esp+10h] [ebp-D0h] BYREF
  _BYTE v24[28]; // [esp+6Ch] [ebp-74h] BYREF
  _BYTE *v25; // [esp+88h] [ebp-58h]
  int v26; // [esp+8Ch] [ebp-54h] BYREF
  bool v27; // [esp+93h] [ebp-4Dh]
  char v28[28]; // [esp+94h] [ebp-4Ch] BYREF
  char Buffer[32]; // [esp+B0h] [ebp-30h] BYREF
  int v30; // [esp+DCh] [ebp-4h]

  if ( a2 && *(_DWORD *)a2 && ItemStructA_IsValid(a2 + 2) )
  {
    *(_DWORD *)(this + 332) = 0;
    *(_WORD *)(this + 336) = 0;
    *(_WORD *)(this + 342) = 0;
    *(_BYTE *)(this + 345) = 0;
    *(_DWORD *)(this + 348) = 0;
    *(_DWORD *)(this + 352) = 0;
    *(_DWORD *)(this + 356) = 0;
    *(_BYTE *)(this + 361) = 0;
    *(_BYTE *)(this + 362) = 0;
    *(_BYTE *)(this + 360) = 0;
    *(_WORD *)(this + 338) = 0;
    *(_BYTE *)(this + 344) = 100;
    *(_WORD *)(this + 340) = 0;
    *(_DWORD *)(this + 363) = 0;
    *(_DWORD *)(this + 368) = 0;
    *(_DWORD *)(this + 372) = 0;
    *(_BYTE *)(this + 376) = 0;
    v27 = !ItemStructA_Equals((_WORD *)(this + 180), (int)(a2 + 2));
    ItemStructA_Clear((char *)(this + 180));
    ItemStructA_UpdateFrom((int **)(this + 180), a2);
    qmemcpy((void *)(this + 224), a2, 0x30u);
    if ( v27 )
    {
      *(_DWORD *)(this + 272) = ItemTemplate_GetIconHandle((int **)dword_65ABF748, *(_WORD *)(this + 228));
      v3 = *(unsigned __int16 *)(this + 228);
      *(_DWORD *)(this + 276) = 0;
      if ( v3 == 1280 )
      {
        v5 = *(_WORD *)(this + 230);
        if ( v5 && v5 < 0xBC1u )
        {
          LOBYTE(v26) = *(_BYTE *)(this + 254);
          if ( ItemTemplate_CopyVariantByIndex(v5, v26, v23) )
            *(_DWORD *)(this + 276) = ItemTemplate_GetIconHandle((int **)dword_65ABF748, *(unsigned __int16 *)v23);
          *(_BYTE *)(this + 280) = 0;
        }
      }
      else if ( v3 == 1802 )
      {
        v4 = *(_WORD *)(this + 230);
        if ( v4 )
        {
          if ( v4 <= 0xAu )
          {
            *(_DWORD *)(this + 276) = IconAtlas_GetHandleByIndex(dword_65ABF760, v4 + 2);
            *(_BYTE *)(this + 280) = 1;
          }
        }
      }
      *(_DWORD *)(this + 308) = 1;
      UiItemSlot_FreeTooltipHString((int *)this);
      v6 = BuildItemTooltip((unsigned __int16 *)(this + 224));
      UiItemSlot_SetTooltipHString((int *)this, v6);
      if ( *(_DWORD *)(this + 284) )
      {
        v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned __int16 *)(this + 180) + 30000);
        v8 = v7
           ? (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7)
           : (char *)byte_659A8B98;
        UiText_SetValueIfChanged(*(_DWORD *)(this + 284), v8, 0, 0);
        if ( v7 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
      }
      v9 = *(_DWORD *)(this + 288);
      if ( v9 )
      {
        if ( *(_DWORD *)(this + 192) )
        {
          unknown_libname_664(&v26);
          v26 = *(_DWORD *)(this + 192);
          sub_65948390(Buffer, &v26);
          v22 = 0;
          v21 = 0;
          v20 = Buffer;
          v9 = *(_DWORD *)(this + 288);
        }
        else
        {
          v22 = 0;
          v21 = 0;
          v20 = (char *)byte_659A8B98;
        }
        UiText_SetValueIfChanged(v9, v20, v21, v22);
      }
      if ( *(_DWORD *)(this + 292) )
      {
        v10 = *(unsigned __int16 *)(this + 220);
        v11 = 0;
        switch ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, *(_WORD *)(this + 180)) )
        {
          case 2u:
          case 0x10u:
          case 0x11u:
          case 0x12u:
            goto LABEL_30;
          case 3u:
            if ( !ItemTemplate_IsRangedOrAmmoType(g_ItemTemplateById, *(_WORD *)(this + 180))
              && *(_DWORD *)(this + 96) != 3 )
            {
LABEL_30:
              v11 = *(_WORD *)(this + 182);
            }
            break;
          case 0x13u:
            v11 = *(_WORD *)(this + 186);
            break;
          default:
            break;
        }
        std::string::string(v28, byte_659A8B98);
        v30 = 0;
        if ( v11 && v10 )
        {
          v26 = (int)v19;
          String_FromU16(v19, v11);
          v25 = v18;
          LOBYTE(v30) = 1;
          String_FromU32(v18, v10);
          LOBYTE(v30) = 0;
          v12 = FormatString_Args((int)v24, (int)"{0} x {1}");
          LOBYTE(v30) = 2;
        }
        else if ( v10 <= 1 )
        {
          if ( !v11 )
          {
LABEL_40:
            v22 = 0;
            v21 = 0;
            v13 = (char *)std::string::c_str(v28);
            UiText_SetValueIfChanged(*(_DWORD *)(this + 292), v13, v21, v22);
            v14 = *(_DWORD *)(this + 292);
            *(_DWORD *)(v14 + 504) = v10;
            *(_DWORD *)(v14 + 500) = 1;
            v30 = -1;
            std::string::~string(v28);
            return;
          }
          v25 = v19;
          String_FromU16(v19, v11);
          v12 = FormatString((int)v24, (int)&unk_659C45C8);
          LOBYTE(v30) = 4;
        }
        else
        {
          v25 = v19;
          String_FromU32(v19, v10);
          v12 = FormatString((int)v24, (int)&unk_659C45C8);
          LOBYTE(v30) = 3;
        }
        std::string::operator=(v28, v12);
        LOBYTE(v30) = 0;
        std::string::~string(v24);
        goto LABEL_40;
      }
    }
  }
  else
  {
    ItemStructA_Clear((char *)(this + 180));
    *(_DWORD *)(this + 224) = 0;
    *(_WORD *)(this + 228) = 0;
    *(_WORD *)(this + 234) = 0;
    *(_BYTE *)(this + 237) = 0;
    *(_BYTE *)(this + 253) = 0;
    *(_BYTE *)(this + 254) = 0;
    *(_BYTE *)(this + 252) = 0;
    *(_BYTE *)(this + 236) = 100;
    *(_DWORD *)(this + 240) = 0;
    *(_DWORD *)(this + 244) = 0;
    *(_DWORD *)(this + 248) = 0;
    *(_WORD *)(this + 230) = 0;
    *(_WORD *)(this + 232) = 0;
    *(_DWORD *)(this + 255) = 0;
    *(_BYTE *)(this + 268) = 0;
    *(_DWORD *)(this + 260) = 0;
    *(_DWORD *)(this + 264) = 0;
    *(_DWORD *)(this + 272) = 0;
    *(_DWORD *)(this + 276) = 0;
    UiItemSlot_FreeTooltipHString((int *)this);
    *(_DWORD *)(this + 308) = 0;
    UiList_ClearEntries((int *)this);
    *(_DWORD *)(this + 332) = 0;
    *(_WORD *)(this + 336) = 0;
    *(_WORD *)(this + 340) = 0;
    *(_WORD *)(this + 342) = 0;
    *(_BYTE *)(this + 344) = 100;
    *(_BYTE *)(this + 345) = 0;
    *(_DWORD *)(this + 348) = 0;
    *(_DWORD *)(this + 352) = 0;
    *(_DWORD *)(this + 356) = 0;
    *(_BYTE *)(this + 361) = 0;
    *(_BYTE *)(this + 362) = 0;
    *(_BYTE *)(this + 360) = 0;
    *(_WORD *)(this + 338) = 0;
    *(_DWORD *)(this + 363) = 0;
    *(_DWORD *)(this + 368) = 0;
    *(_DWORD *)(this + 372) = 0;
    *(_BYTE *)(this + 376) = 0;
    v15 = *(_DWORD *)(this + 292);
    if ( v15 )
      UiText_SetValueIfChanged(v15, (char *)byte_659A8B98, 0, 0);
    v16 = *(_DWORD *)(this + 284);
    if ( v16 )
      UiText_SetValueIfChanged(v16, (char *)byte_659A8B98, 0, 0);
    v17 = *(_DWORD *)(this + 288);
    if ( v17 )
      UiText_SetValueIfChanged(v17, (char *)byte_659A8B98, 0, 0);
  }
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65765A40) --------------------------------------------------------
int __thiscall sub_65765A40(int this, _DWORD *a2)
{
  int v3; // edi
  char *v4; // eax
  int v5; // ecx
  unsigned int v6; // ebx
  unsigned __int16 v7; // di
  int v8; // eax
  char *v9; // eax
  int v10; // eax
  _BYTE v12[28]; // [esp-38h] [ebp-B8h] BYREF
  _BYTE v13[16]; // [esp-1Ch] [ebp-9Ch] BYREF
  char *v14; // [esp-Ch] [ebp-8Ch]
  int v15; // [esp-8h] [ebp-88h]
  char *v16; // [esp-4h] [ebp-84h]
  _BYTE v17[28]; // [esp+10h] [ebp-70h] BYREF
  _BYTE *v18; // [esp+2Ch] [ebp-54h]
  int v19; // [esp+30h] [ebp-50h] BYREF
  char v20[28]; // [esp+34h] [ebp-4Ch] BYREF
  char Buffer[32]; // [esp+50h] [ebp-30h] BYREF
  int v22; // [esp+7Ch] [ebp-4h]

  if ( (unsigned __int16)a2[10] )
  {
    if ( sub_65764AD0(this, a2) )
    {
      if ( *(_DWORD *)(this + 284) )
      {
        v3 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned __int16 *)(this + 180) + 30000);
        v4 = v3
           ? (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3)
           : (char *)byte_659A8B98;
        UiText_SetValueIfChanged(*(_DWORD *)(this + 284), v4, 0, 0);
        if ( v3 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v3);
      }
      v5 = *(_DWORD *)(this + 288);
      if ( v5 )
      {
        if ( *(_DWORD *)(this + 192) )
        {
          unknown_libname_664(&v19);
          v19 = *(_DWORD *)(this + 192);
          sub_65948390(Buffer, &v19);
          v16 = 0;
          v15 = 0;
          v14 = Buffer;
          v5 = *(_DWORD *)(this + 288);
        }
        else
        {
          v16 = 0;
          v15 = 0;
          v14 = (char *)byte_659A8B98;
        }
        UiText_SetValueIfChanged(v5, v14, v15, v16);
      }
    }
    if ( !*(_DWORD *)(this + 292) )
      goto LABEL_30;
    v6 = *(unsigned __int16 *)(this + 220);
    v7 = 0;
    switch ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, *(_WORD *)(this + 180)) )
    {
      case 2u:
      case 0x10u:
      case 0x11u:
      case 0x12u:
        goto LABEL_19;
      case 3u:
        if ( !ItemTemplate_IsRangedOrAmmoType(g_ItemTemplateById, *(_WORD *)(this + 180)) && *(_DWORD *)(this + 96) != 3 )
LABEL_19:
          v7 = *(_WORD *)(this + 182);
        break;
      case 0x13u:
        v7 = *(_WORD *)(this + 186);
        break;
      default:
        break;
    }
    std::string::string(v20, byte_659A8B98);
    v22 = 0;
    if ( v7 && v6 )
    {
      v19 = (int)v13;
      String_FromU16(v13, v7);
      v18 = v12;
      LOBYTE(v22) = 1;
      String_FromU32(v12, v6);
      LOBYTE(v22) = 0;
      v8 = FormatString_Args((int)v17, (int)"{0} x {1}");
      LOBYTE(v22) = 2;
    }
    else if ( v6 <= 1 )
    {
      if ( !v7 )
      {
LABEL_29:
        v16 = 0;
        v15 = 0;
        v9 = (char *)std::string::c_str(v20);
        UiText_SetValueIfChanged(*(_DWORD *)(this + 292), v9, v15, v16);
        v10 = *(_DWORD *)(this + 292);
        *(_DWORD *)(v10 + 504) = v6;
        *(_DWORD *)(v10 + 500) = 1;
        v22 = -1;
        std::string::~string(v20);
LABEL_30:
        *(_BYTE *)(this + 176) = 1;
        return 1;
      }
      v18 = v13;
      String_FromU16(v13, v7);
      v8 = FormatString((int)v17, (int)&unk_659C45C8);
      LOBYTE(v22) = 4;
    }
    else
    {
      v18 = v13;
      String_FromU32(v13, v6);
      v8 = FormatString((int)v17, (int)&unk_659C45C8);
      LOBYTE(v22) = 3;
    }
    std::string::operator=(v20, v8);
    LOBYTE(v22) = 0;
    std::string::~string(v17);
    goto LABEL_29;
  }
  UiItemSlot_SetItem(this, 0);
  return 1;
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65765D10) --------------------------------------------------------
void __thiscall ItemsAddedEntry_Init(char *this)
{
  char *v1; // edi
  _DWORD *v2; // eax

  *((_WORD *)this + 1) = 0;
  v1 = this + 32;
  *(_WORD *)this = 0;
  *((_WORD *)this + 2) = 0;
  *((_WORD *)this + 3) = 0;
  *(this + 8) = 100;
  *(this + 9) = 0;
  *((_DWORD *)this + 3) = 0;
  *((_DWORD *)this + 4) = 0;
  *((_DWORD *)this + 5) = 0;
  *(this + 25) = 0;
  *(this + 26) = 0;
  *(this + 24) = 0;
  *(_DWORD *)(this + 27) = 0;
  v2 = StringMapNode_AllocEmpty();
  *((_DWORD *)v1 + 1) = v2;
  *((_BYTE *)v2 + 17) = 1;
  *(_DWORD *)(*((_DWORD *)v1 + 1) + 4) = *((_DWORD *)v1 + 1);
  **((_DWORD **)v1 + 1) = *((_DWORD *)v1 + 1);
  *(_DWORD *)(*((_DWORD *)v1 + 1) + 8) = *((_DWORD *)v1 + 1);
  *((_DWORD *)v1 + 2) = 0;
}

//----- (65765D80) --------------------------------------------------------
char *__thiscall UiObject_Ctor(char *this)
{
  sub_6576C080(this);
  *(_DWORD *)this = &off_659C45D4;
  *(this + 176) = 1;
  ItemsAddedEntry_Init(this + 180);
  *((_DWORD *)this + 56) = 0;
  *(this + 237) = 0;
  *((_DWORD *)this + 60) = 0;
  *((_DWORD *)this + 61) = 0;
  *((_DWORD *)this + 62) = 0;
  *(this + 253) = 0;
  *(this + 254) = 0;
  *(this + 252) = 0;
  *((_WORD *)this + 114) = 0;
  *((_WORD *)this + 116) = 0;
  *((_WORD *)this + 115) = 0;
  *((_WORD *)this + 117) = 0;
  *(this + 236) = 100;
  *(_DWORD *)(this + 255) = 0;
  *((_DWORD *)this + 65) = 0;
  *((_DWORD *)this + 66) = 0;
  *(this + 268) = 0;
  *((float *)this + 80) = 1.0;
  *((_DWORD *)this + 68) = 0;
  *((_DWORD *)this + 69) = 0;
  *(this + 280) = 0;
  *((_DWORD *)this + 71) = 0;
  *((_DWORD *)this + 72) = 0;
  *((_DWORD *)this + 73) = 0;
  *((_DWORD *)this + 74) = 0;
  *((_DWORD *)this + 75) = 0;
  *((_DWORD *)this + 76) = 0;
  *((_DWORD *)this + 77) = 0;
  *((_DWORD *)this + 78) = 0;
  *((_DWORD *)this + 79) = 0;
  *((_DWORD *)this + 81) = 0;
  *(this + 328) = 0;
  *((_DWORD *)this + 83) = 0;
  *(this + 344) = 100;
  *((_WORD *)this + 168) = 0;
  *((_WORD *)this + 169) = 0;
  *((_WORD *)this + 170) = 0;
  *((_WORD *)this + 171) = 0;
  *(this + 345) = 0;
  *((_DWORD *)this + 87) = 0;
  *((_DWORD *)this + 88) = 0;
  *((_DWORD *)this + 89) = 0;
  *(this + 361) = 0;
  *(this + 362) = 0;
  *(this + 360) = 0;
  *(_DWORD *)(this + 363) = 0;
  *((_DWORD *)this + 92) = 0;
  *((_DWORD *)this + 93) = 0;
  *(this + 376) = 0;
  *((_DWORD *)this + 42) = 1;
  *((_DWORD *)this + 11) = 1;
  *((_DWORD *)this + 1) = 25;
  *((_DWORD *)this + 41) = 500;
  return this;
}
// 659C45D4: using guessed type void *off_659C45D4;

//----- (65766060) --------------------------------------------------------
int __thiscall LoadingScreen_Initialize(int *this)
{
  int *v3; // esi
  int v4; // eax
  const char *v5; // eax
  int v6; // eax
  int v7; // edx
  int v8; // edi
  int v9; // ecx
  int v11; // [esp+Ch] [ebp-168h]
  unsigned int v12; // [esp+10h] [ebp-164h]
  int *v13; // [esp+14h] [ebp-160h]
  _DWORD v14[3]; // [esp+18h] [ebp-15Ch] BYREF
  char Buffer[4]; // [esp+24h] [ebp-150h] BYREF
  const char *v16; // [esp+28h] [ebp-14Ch]
  int v17; // [esp+2Ch] [ebp-148h]
  const char *v18; // [esp+30h] [ebp-144h]
  int v19; // [esp+34h] [ebp-140h]
  int v20; // [esp+38h] [ebp-13Ch]
  int v21; // [esp+3Ch] [ebp-138h]
  int v22; // [esp+40h] [ebp-134h]
  const char *v23; // [esp+44h] [ebp-130h]
  int v24; // [esp+48h] [ebp-12Ch]
  const char *v25; // [esp+4Ch] [ebp-128h]
  const char *v26; // [esp+50h] [ebp-124h]
  int v27; // [esp+54h] [ebp-120h]
  int v28; // [esp+58h] [ebp-11Ch]
  int v29; // [esp+5Ch] [ebp-118h]
  int v30; // [esp+60h] [ebp-114h]
  int v31; // [esp+64h] [ebp-110h]
  int v32; // [esp+68h] [ebp-10Ch]
  int v33; // [esp+6Ch] [ebp-108h]
  char Destination[256]; // [esp+70h] [ebp-104h] BYREF

  if ( *this )
    return 0;
  v14[0] = 0;
  v14[2] = 0;
  Buffer[0] = 0;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  v20 = 0;
  v21 = 0;
  v22 = 0;
  v23 = 0;
  v24 = 0;
  v25 = 0;
  v26 = 0;
  v27 = 0;
  v28 = 0;
  v29 = 0;
  v30 = 0;
  v31 = 0;
  v32 = 0;
  v33 = 0;
  v14[1] = "FFFFFF00";
  sprintf(Buffer, "%u", 0);
  v3 = this + 16;
  v16 = "10";
  v25 = "600";
  v26 = "25";
  v23 = "1";
  v18 = "2";
  v12 = 0;
  v13 = this + 10;
  do
  {
    v4 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v12 + 11510);
    v11 = v4;
    if ( !v4
      || (v5 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4)) == 0 )
    {
      v5 = byte_659A8B98;
    }
    strncpy(Destination, v5, 0xFFu);
    Destination[255] = 0;
    v14[0] = Destination;
    v6 = (*(int (__cdecl **)(_DWORD *))(g_pILTClient + 304))(v14);
    v7 = v29;
    v8 = v31;
    *v13 = v6;
    v9 = v30;
    *v3 = v28;
    v3[1] = v9;
    v3[2] = v7;
    v3[3] = v8;
    if ( v11 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v11);
    ++v13;
    v3 += 4;
    ++v12;
  }
  while ( v12 < 6 );
  if ( !*(this + 4) )
    *(this + 4) = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("Interface\\vortex.tga");
  *this = 1;
  return 1;
}

//----- (657662A0) --------------------------------------------------------
int __thiscall LoadingScreen_Draw(int this)
{
  double v1; // st7
  int v3; // ecx
  int v4; // eax
  int v5; // ecx
  int v6; // edi
  int result; // eax
  int v8; // edi
  double v9; // st7
  int v10; // ebx
  int v11; // [esp-1Ch] [ebp-54h]
  _DWORD v12[4]; // [esp+10h] [ebp-28h] BYREF
  _DWORD v13[4]; // [esp+20h] [ebp-18h] BYREF
  float v14; // [esp+30h] [ebp-8h] BYREF
  float v15; // [esp+34h] [ebp-4h] BYREF

  v1 = 0.0;
  v3 = *(_DWORD *)(this + 16);
  if ( v3 )
  {
    if ( *(float *)(this + 8) > 0.0 )
      v1 = *(float *)(this + 8);
    v15 = v1;
    (*(void (__cdecl **)(int, float))(g_pILTClient + 412))(v3, COERCE_FLOAT(LODWORD(v15)));
    v12[2] = *(_DWORD *)&Data;
    v12[3] = *(_DWORD *)&dword_65A55604;
    v4 = *(_DWORD *)(this + 16);
    v12[0] = 0;
    v12[1] = 0;
    v15 = 0.0;
    v14 = 0.0;
    (*(void (__cdecl **)(int, float *, float *))(g_pILTClient + 344))(v4, &v15, &v14);
    *(float *)&v13[2] = v15;
    *(float *)&v13[3] = v14;
    v11 = *(_DWORD *)(this + 16);
    v13[0] = 0;
    v13[1] = 0;
    (*(void (__cdecl **)(int, int, _DWORD *, _DWORD *))(g_pILTClient + 368))(dword_65ABF780, v11, v12, v13);
    v1 = 0.0;
  }
  v5 = *(_DWORD *)(this + 20);
  v6 = *(_DWORD *)&Data / 2;
  if ( v5 )
  {
    if ( v1 < *(float *)(this + 8) )
      v1 = *(float *)(this + 8);
    v14 = v1;
    (*(void (__cdecl **)(int, float))(g_pILTClient + 412))(v5, COERCE_FLOAT(LODWORD(v14)));
    (*(void (__cdecl **)(int, _DWORD, _DWORD, int, int))(g_pILTClient + 364))(
      dword_65ABF780,
      *(_DWORD *)(this + 20),
      0,
      v6 - (*(_DWORD *)(this + 32) - *(_DWORD *)(this + 24)) / 2,
      100);
  }
  result = SharedMem_GetDwordByIndex(0x90u);
  v8 = *(_DWORD *)(this + 4 * result + 40);
  if ( v8 )
  {
    v9 = 0.0;
    v10 = *(_DWORD *)&dword_65A55604 - 16;
    if ( *(float *)(this + 8) > 0.0 )
      v9 = *(float *)(this + 8);
    v14 = v9;
    (*(void (__cdecl **)(int, float))(g_pILTClient + 412))(v8, COERCE_FLOAT(LODWORD(v14)));
    return (*(int (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(dword_65ABF780, v8, 0, 10, v10);
  }
  return result;
}
// 65ABF780: using guessed type int dword_65ABF780;

//----- (65766430) --------------------------------------------------------
void __thiscall FadeEffect_Update(int this)
{
  DWORD Time; // eax
  unsigned int v3; // ecx
  double v4; // st7
  float v5; // [esp+4h] [ebp-4h]

  if ( *(_BYTE *)(this + 4) )
  {
    if ( !SharedMem_ReadBool_std(0x96u) )
      *(float *)(this + 8) = 1.0;
    LoadingScreen_Draw(this);
    Time = timeGetTime();
    v3 = Time - *(_DWORD *)(this + 12);
    if ( v3 > 0x64 )
      v3 = 100;
    v4 = *(float *)(this + 8);
    *(_DWORD *)(this + 12) = Time;
    v5 = v4 - (double)v3 / 1000.0 * 0.300000011920929;
    *(float *)(this + 8) = v5;
    if ( v5 <= 0.0 )
    {
      *(float *)(this + 8) = 0.0;
      *(_BYTE *)(this + 4) = 0;
    }
  }
}

//----- (657664C0) --------------------------------------------------------
int __thiscall LoadingScreen_Render(void *this)
{
  (*(void (__cdecl **)(_DWORD, int, _DWORD))(g_pILTClient + 164))(0, 3, 0);
  (*(void (**)(void))(g_pILTClient + 156))();
  (*(void (**)(void))(g_pILTClient + 176))();
  FadeEffect_Update((int)this);
  (*(void (**)(void))(g_pILTClient + 180))();
  (*(void (__cdecl **)(int))(g_pILTClient + 192))(1);
  return (*(int (__cdecl **)(_DWORD))(g_pILTClient + 152))(0);
}

//----- (65766530) --------------------------------------------------------
char __thiscall FadeEffect_SetActive(float *this, char a2)
{
  DWORD Time; // eax

  LOBYTE(Time) = SharedMem_WriteU8_std(0x53u, 0);
  if ( *(_DWORD *)this == 2 )
  {
    LOBYTE(Time) = a2;
    *((_BYTE *)this + 4) = a2;
    if ( a2 )
    {
      *(this + 2) = 1.0;
      Time = timeGetTime();
      *((_DWORD *)this + 3) = Time;
      *(_DWORD *)this = 1;
    }
    else
    {
      *(_DWORD *)this = 1;
      *(this + 2) = 0.0;
    }
  }
  return Time;
}

//----- (65766580) --------------------------------------------------------
int __thiscall sub_65766580(int *this, const char *a2)
{
  int result; // eax
  int v4; // eax
  int v5; // ecx
  int v6; // edx
  int v7; // edi
  _DWORD v8[3]; // [esp+Ch] [ebp-15Ch] BYREF
  char v9[4]; // [esp+18h] [ebp-150h] BYREF
  const char *v10; // [esp+1Ch] [ebp-14Ch]
  int v11; // [esp+20h] [ebp-148h]
  int v12; // [esp+24h] [ebp-144h]
  int v13; // [esp+28h] [ebp-140h]
  const char *v14; // [esp+2Ch] [ebp-13Ch]
  const char *v15; // [esp+30h] [ebp-138h]
  int v16; // [esp+34h] [ebp-134h]
  const char *v17; // [esp+38h] [ebp-130h]
  const char *v18; // [esp+3Ch] [ebp-12Ch]
  const char *v19; // [esp+40h] [ebp-128h]
  const char *v20; // [esp+44h] [ebp-124h]
  int v21; // [esp+48h] [ebp-120h]
  int v22; // [esp+4Ch] [ebp-11Ch]
  int v23; // [esp+50h] [ebp-118h]
  int v24; // [esp+54h] [ebp-114h]
  int v25; // [esp+58h] [ebp-110h]
  int v26; // [esp+5Ch] [ebp-10Ch]
  int v27; // [esp+60h] [ebp-108h]
  char Buffer[256]; // [esp+64h] [ebp-104h] BYREF

  result = *(this + 5);
  if ( result )
  {
    result = (*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(this + 5));
    if ( !result )
      *(this + 5) = 0;
  }
  if ( a2 )
  {
    sprintf(Buffer, " %s ", a2);
    _strupr(Buffer);
    v8[2] = 0;
    v9[0] = 0;
    v10 = 0;
    v11 = 0;
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    v17 = 0;
    v18 = 0;
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v22 = 0;
    v23 = 0;
    v24 = 0;
    v25 = 0;
    v26 = 0;
    v27 = 0;
    v8[1] = "FFFFFF00";
    v8[0] = Buffer;
    sprintf(v9, "%u", 16);
    v20 = "100";
    v17 = "1";
    v18 = "1";
    v15 = "100";
    v10 = "26";
    v19 = "800";
    v14 = "01010100";
    v4 = (*(int (__cdecl **)(_DWORD *))(g_pILTClient + 304))(v8);
    v5 = v24;
    v6 = v23;
    v7 = v25;
    *(this + 5) = v4;
    result = v22;
    *(this + 6) = v22;
    *(this + 7) = v5;
    *(this + 8) = v6;
    *(this + 9) = v7;
  }
  return result;
}

//----- (657667C0) --------------------------------------------------------
int __thiscall FadeEffect_Show(float *this, const char *a2)
{
  if ( *(_DWORD *)this != 1 )
    return 0;
  *(_DWORD *)this = 2;
  sub_65766580((int *)this, a2);
  Cursor_SetVisible((_DWORD *)dword_65ABF6F4, 0);
  SharedMem_WriteU8_std(0x53u, 1u);
  SharedMem_WriteU8_std(0x96u, 0);
  (*(void (__cdecl **)(_DWORD, int, _DWORD))(g_pILTClient + 164))(0, 3, 0);
  (*(void (**)(void))(g_pILTClient + 156))();
  (*(void (**)(void))(g_pILTClient + 176))();
  *(this + 2) = 1.0;
  LoadingScreen_Draw((int)this);
  (*(void (**)(void))(g_pILTClient + 180))();
  (*(void (__cdecl **)(int))(g_pILTClient + 192))(1);
  (*(void (__cdecl **)(_DWORD))(g_pILTClient + 152))(0);
  return 1;
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (65766950) --------------------------------------------------------
int __thiscall UiWidget_SetParams(_DWORD *this, int a2, int a3, int a4, int a5)
{
  *(this + 69) = a2;
  *(this + 14) = a3;
  *(this + 15) = a4;
  *(this + 16) = a5;
  return 1;
}

//----- (65766A80) --------------------------------------------------------
int __thiscall UiWidget_StartFadeAnimation(float *this, float a2)
{
  int (__thiscall *v3)(float *, int); // edx
  float v5; // [esp+4h] [ebp-4h]

  v5 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  v3 = *(int (__thiscall **)(float *, int))(*(_DWORD *)this + 88);
  *(this + 67) = v5;
  *((_DWORD *)this + 65) = 1;
  *(this + 68) = v5 + a2 - 0.5;
  *(this + 66) = 0.0099999998;
  return v3(this, 1);
}

//----- (65767650) --------------------------------------------------------
void __thiscall UiList_SetSelectionText(int this, int a2, char a3)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // edx
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // edx
  int v13; // eax
  int v14; // eax
  int v15; // [esp+8h] [ebp-5Ch] BYREF
  const char *v16; // [esp+Ch] [ebp-58h]
  char Buffer[4]; // [esp+14h] [ebp-50h] BYREF
  const char *v18; // [esp+18h] [ebp-4Ch]
  const char *v19; // [esp+1Ch] [ebp-48h]
  const char *v20; // [esp+20h] [ebp-44h]
  const char *v21; // [esp+24h] [ebp-40h]
  const char *v22; // [esp+28h] [ebp-3Ch]
  const char *v23; // [esp+2Ch] [ebp-38h]
  const char *v24; // [esp+34h] [ebp-30h]
  const char *v25; // [esp+38h] [ebp-2Ch]
  const char *v26; // [esp+44h] [ebp-20h]
  int v27; // [esp+48h] [ebp-1Ch]
  int v28; // [esp+4Ch] [ebp-18h]

  if ( *(int *)(this + 192) > 12 || !a2 )
    return;
  if ( *(_DWORD *)(this + 180) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(_DWORD *)(this + 180)) )
    *(_DWORD *)(this + 180) = 0;
  v4 = *(_DWORD *)(this + 192);
  switch ( v4 )
  {
    case 4:
      PlayerModels_Ctor(&v15);
      v15 = a2;
      sprintf(Buffer, "%u", 0);
      v24 = "1";
      v20 = "1";
      v18 = "12";
      v16 = "FFD27100";
      v26 = "0";
      *(_DWORD *)(this + 180) = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
      v5 = v28 - v27;
      v16 = "FFFFFF00";
LABEL_25:
      *(_DWORD *)(this + 188) = v5;
      *(_DWORD *)(this + 184) = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
      goto LABEL_27;
    case 5:
      PlayerModels_Ctor(&v15);
      v15 = a2;
      sprintf(Buffer, "%u", 1);
      v24 = "1";
      v20 = "1";
      v18 = "20";
      v16 = "DDDDDD00";
      v26 = "0";
      v6 = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
      v7 = v28 - v27;
      *(_DWORD *)(this + 180) = v6;
      *(_DWORD *)(this + 188) = v7;
      v16 = "FFFFFF00";
LABEL_16:
      *(_DWORD *)(this + 184) = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
      goto LABEL_27;
    case 6:
      PlayerModels_Ctor(&v15);
      v15 = a2;
      sprintf(Buffer, "%u", 28);
      v18 = "14";
      v16 = "BFC7FF00";
      v24 = "1";
      v20 = "1";
      v26 = "0";
      v25 = "1";
      *(_DWORD *)(this + 180) = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
      v5 = v28 - v27;
      *(_DWORD *)(this + 8) = v28 - v27;
      goto LABEL_23;
  }
  if ( v4 != 7 )
  {
    switch ( v4 )
    {
      case 8:
        PlayerModels_Ctor(&v15);
        v15 = a2;
        sprintf(Buffer, "%u", 28);
        v24 = "1";
        v25 = "1";
        v18 = "18";
        v16 = "BFC7FF00";
        v20 = "0";
        v19 = "00000000";
        v21 = "060A";
        *(_DWORD *)(this + 180) = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
        v9 = v28 - v27;
        v16 = "FFD09300";
        *(_DWORD *)(this + 188) = v28 - v27;
        *(_DWORD *)(this + 8) = v9;
        goto LABEL_16;
      case 9:
        PlayerModels_Ctor(&v15);
        v15 = a2;
        sprintf(Buffer, "%u", 28);
        v18 = "18";
        v16 = "99a6ff00";
        v24 = "1";
        v25 = "1";
        v20 = "1";
        v19 = "00000000";
        *(_DWORD *)(this + 180) = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
        v5 = v28 - v27;
        *(_DWORD *)(this + 8) = v28 - v27;
LABEL_24:
        v16 = "FFD09300";
        goto LABEL_25;
      case 10:
        PlayerModels_Ctor(&v15);
        v15 = a2;
        sprintf(Buffer, "%u", 28);
        v24 = "1";
        v25 = "1";
        v18 = "18";
        v16 = "FFFFFF00";
        v20 = "0";
        v19 = "00000000";
        v21 = "060A";
        *(_DWORD *)(this + 180) = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
        v10 = v28 - v27;
        *(_DWORD *)(this + 188) = v28 - v27;
        *(_DWORD *)(this + 8) = v10;
        v16 = "FFD09300";
        *(_DWORD *)(this + 184) = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
        goto LABEL_27;
    }
    if ( v4 != 11 )
    {
      PlayerModels_Ctor(&v15);
      v15 = a2;
      sprintf(Buffer, "%u", 2);
      v24 = "1";
      v20 = "1";
      v25 = "1";
      v18 = (const char *)&unk_659C37D8;
      v16 = "FFFFFF00";
      v26 = "0";
      v11 = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
      v12 = v28 - v27;
      *(_DWORD *)(this + 180) = v11;
      *(_DWORD *)(this + 188) = v12;
      goto LABEL_27;
    }
    PlayerModels_Ctor(&v15);
    v15 = a2;
    sprintf(Buffer, "%u", 16);
    v24 = "1";
    v20 = "1";
    v25 = "1";
    v18 = (const char *)&unk_659C481C;
    v16 = "BFC7FF00";
    v26 = "0";
    *(_DWORD *)(this + 180) = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
    v5 = v28 - v27;
LABEL_23:
    v20 = "0";
    v19 = "99999900";
    v21 = "060A";
    v23 = "20";
    v22 = "00000000";
    goto LABEL_24;
  }
  PlayerModels_Ctor(&v15);
  v15 = a2;
  sprintf(Buffer, "%u", 28);
  v24 = "1";
  v25 = "1";
  v18 = "18";
  v16 = "BFC7FF00";
  v20 = "0";
  v19 = "99999900";
  v21 = "060A";
  v23 = "20";
  v22 = "00000000";
  *(_DWORD *)(this + 180) = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
  v8 = v28 - v27;
  *(_DWORD *)(this + 188) = v28 - v27;
  *(_DWORD *)(this + 8) = v8;
  v16 = "FFD09300";
  v23 = "20";
  v22 = "00000000";
  *(_DWORD *)(this + 184) = (*(int (__cdecl **)(int *))(g_pILTClient + 304))(&v15);
LABEL_27:
  if ( a3 && *(_BYTE *)(this + 228) )
  {
    v13 = *(_DWORD *)(this + 244);
    if ( v13 <= 0 )
    {
      v14 = *(_DWORD *)(this + 188);
      if ( v14 <= 30 )
        v14 = 30;
      *(_DWORD *)(this + 8) = v14 + *(_DWORD *)(this + 232) + *(_DWORD *)(this + 236);
    }
    else
    {
      *(_DWORD *)(this + 8) = v13;
    }
  }
}

//----- (65768240) --------------------------------------------------------
int __thiscall WeaponMgr_HandleInput(int this, int a2, unsigned int __saved_registers, int __return_address, int a5)
{
  unsigned int v6; // edx
  bool v7; // cc
  int v8; // ebx
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v19; // eax
  int v20; // eax
  int v21; // eax
  int v22; // eax
  char v24; // [esp+4h] [ebp-Ch]

  *(_DWORD *)(this + 248) = __saved_registers;
  v6 = 0;
  v7 = __return_address <= 12;
  *(_DWORD *)(this + 192) = __return_address;
  __return_address = 0;
  __saved_registers = 0;
  if ( v7 && a5 )
  {
    v8 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, a5);
    if ( v8 )
    {
      v9 = (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8, 0);
      UiList_SetSelectionText(this, v9, v24);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v8);
    }
    v6 = __saved_registers;
  }
  switch ( *(_DWORD *)(this + 192) )
  {
    case 0:
      v10 = UIAssetArray_GetWithAlpha(dword_65A60644, 0);
      *(_DWORD *)(this + 176) = v10;
      if ( v10 )
        (*(void (__cdecl **)(int, int *, unsigned int *))(g_pILTClient + 344))(
          v10,
          &__return_address,
          &__saved_registers);
      v11 = __return_address;
      v6 = __saved_registers / 3;
      *(_DWORD *)(this + 232) = 13;
      *(_DWORD *)(this + 236) = 15;
      *(_DWORD *)(this + 240) = v11;
      *(_DWORD *)(this + 224) = 2;
      *(_BYTE *)(this + 228) = 1;
      goto LABEL_95;
    case 1:
      v12 = UIAssetArray_GetWithAlpha(dword_65A60644, 1);
      *(_DWORD *)(this + 176) = v12;
      if ( v12 )
        (*(void (__cdecl **)(int, int *, unsigned int *))(g_pILTClient + 344))(
          v12,
          &__return_address,
          &__saved_registers);
      v13 = __return_address;
      v6 = __saved_registers / 3;
      *(_DWORD *)(this + 232) = 13;
      *(_DWORD *)(this + 236) = 17;
      *(_DWORD *)(this + 240) = v13;
      *(_DWORD *)(this + 224) = 2;
      *(_BYTE *)(this + 228) = 1;
      *(_DWORD *)(this + 244) = 128;
      goto LABEL_95;
    case 2:
      v14 = UIAssetArray_GetWithAlpha(dword_65A60644, 1);
      *(_DWORD *)(this + 176) = v14;
      if ( v14 )
        (*(void (__cdecl **)(int, int *, unsigned int *))(g_pILTClient + 344))(
          v14,
          &__return_address,
          &__saved_registers);
      v15 = __return_address;
      v6 = __saved_registers / 3;
      *(_DWORD *)(this + 232) = 13;
      *(_DWORD *)(this + 236) = 17;
      *(_DWORD *)(this + 240) = v15;
      *(_DWORD *)(this + 224) = 2;
      *(_BYTE *)(this + 228) = 1;
      *(_DWORD *)(this + 244) = 216;
      goto LABEL_95;
    case 3:
      v16 = UIAssetArray_GetWithAlpha(dword_65A60644, 18);
      goto LABEL_17;
    case 4:
      v17 = *(_DWORD *)(this + 180);
      if ( v17 )
        (*(void (__cdecl **)(int, int *, unsigned int *))(g_pILTClient + 344))(
          v17,
          &__return_address,
          &__saved_registers);
      v6 = 16;
      goto LABEL_95;
    case 5:
      __return_address = *(_DWORD *)(this + 188);
      v6 = 20;
      goto LABEL_95;
    case 6:
      __return_address = *(_DWORD *)(this + 188);
      v6 = 16;
      goto LABEL_95;
    case 7:
    case 8:
    case 9:
    case 0xA:
      __return_address = *(_DWORD *)(this + 188);
      v6 = 25;
      goto LABEL_95;
    case 0xB:
      __return_address = *(_DWORD *)(this + 188);
      v6 = 15;
      goto LABEL_95;
    case 0xD:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 0;
      __return_address = 34;
      v6 = 35;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0xE:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 35;
      __return_address = 34;
      v6 = 39;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0xF:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 74;
      __return_address = 34;
      v6 = 33;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x10:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 107;
      goto LABEL_31;
    case 0x11:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 148;
      __return_address = 34;
      v6 = 30;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x12:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 178;
      __return_address = 34;
      v6 = 38;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x13:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 216;
      __return_address = 34;
      v6 = 32;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x14:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 248;
      __return_address = 34;
      v6 = 40;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x15:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 288;
      __return_address = 34;
      v6 = 36;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x16:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 324;
      __return_address = 34;
      v6 = 37;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x17:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 361;
LABEL_31:
      v6 = 41;
      __return_address = 34;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x18:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 402;
      v6 = 38;
      __return_address = 34;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x19:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 440;
      v6 = 40;
      __return_address = 34;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x1A:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 5);
      *(_DWORD *)(this + 208) = 480;
      v6 = 40;
      __return_address = 34;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x1B:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 8);
      v6 = 15;
      *(_DWORD *)(this + 208) = 0;
      __return_address = 15;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x1C:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 7);
      goto LABEL_44;
    case 0x1D:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 9);
LABEL_44:
      v6 = 16;
      *(_DWORD *)(this + 208) = 0;
      __return_address = 16;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x1E:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 10);
      *(_DWORD *)(this + 208) = 0;
      __return_address = 23;
      goto LABEL_47;
    case 0x1F:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 10);
      *(_DWORD *)(this + 212) = 23;
      __return_address = 23;
LABEL_47:
      v6 = 64;
      *(_DWORD *)(this + 216) = 0;
      *(_DWORD *)(this + 220) = 1;
      goto LABEL_94;
    case 0x20:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 11);
      v6 = 30;
      *(_DWORD *)(this + 208) = 0;
      __return_address = 30;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x21:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 11);
      v6 = 30;
      *(_DWORD *)(this + 208) = 30;
      __return_address = 30;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x22:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 11);
      v6 = 30;
      *(_DWORD *)(this + 208) = 60;
      __return_address = 30;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x23:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 11);
      v6 = 30;
      *(_DWORD *)(this + 208) = 90;
      __return_address = 30;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x24:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 12);
      v6 = 30;
      __return_address = 30;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x25:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 6);
      v6 = 9;
      *(_DWORD *)(this + 208) = 0;
      __return_address = 9;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x26:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 6);
      v6 = 9;
      *(_DWORD *)(this + 208) = 9;
      __return_address = 9;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x27:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 6);
      v6 = 9;
      *(_DWORD *)(this + 208) = 18;
      __return_address = 9;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x28:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 6);
      v6 = 9;
      *(_DWORD *)(this + 208) = 27;
      __return_address = 9;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x29:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 6);
      v6 = 9;
      *(_DWORD *)(this + 208) = 36;
      __return_address = 9;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x2A:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 13);
      v6 = 15;
      *(_DWORD *)(this + 208) = 0;
      __return_address = 15;
      goto LABEL_93;
    case 0x2B:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 13);
      v6 = 15;
      *(_DWORD *)(this + 208) = 15;
      __return_address = 15;
      goto LABEL_93;
    case 0x2C:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 14);
      *(_DWORD *)(this + 208) = 0;
      __return_address = 27;
      v6 = 23;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x2D:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 14);
      v6 = 23;
      *(_DWORD *)(this + 208) = 23;
      __return_address = 27;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x2E:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 14);
      *(_DWORD *)(this + 208) = 46;
      __return_address = 27;
      v6 = 23;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x2F:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 14);
      *(_DWORD *)(this + 208) = 69;
      __return_address = 27;
      v6 = 23;
      *(_DWORD *)(this + 220) = 0;
      goto LABEL_93;
    case 0x30:
      v19 = UIAssetArray_GetWithAlpha(dword_65A60644, 17);
      *(_DWORD *)(this + 176) = v19;
      if ( v19 )
        goto LABEL_66;
      goto LABEL_19;
    case 0x31:
      v16 = UIAssetArray_GetWithAlpha(dword_65A60644, 35);
LABEL_17:
      *(_DWORD *)(this + 176) = v16;
      if ( v16 )
        (*(void (__cdecl **)(int, int *, unsigned int *))(g_pILTClient + 344))(
          v16,
          &__return_address,
          &__saved_registers);
      goto LABEL_19;
    case 0x32:
      v19 = UIAssetArray_GetWithAlpha(dword_65A60644, 36);
      *(_DWORD *)(this + 176) = v19;
      if ( v19 )
      {
LABEL_66:
        (*(void (__cdecl **)(int, int *, unsigned int *))(g_pILTClient + 344))(
          v19,
          &__return_address,
          &__saved_registers);
        v6 = __saved_registers / 3;
      }
      else
      {
LABEL_19:
        v6 = __saved_registers / 3;
      }
      goto LABEL_95;
    case 0x33:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 15);
      *(_DWORD *)(this + 208) = 19;
      __return_address = 26;
      v6 = 96;
      goto LABEL_92;
    case 0x34:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 15);
      *(_DWORD *)(this + 208) = 116;
      __return_address = 26;
      v6 = 96;
      goto LABEL_92;
    case 0x35:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 15);
      *(_DWORD *)(this + 208) = 213;
      __return_address = 42;
      v6 = 28;
      goto LABEL_92;
    case 0x36:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 0;
      __return_address = 30;
      goto LABEL_92;
    case 0x37:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 31;
      __return_address = 30;
      goto LABEL_92;
    case 0x38:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 62;
      __return_address = 30;
      goto LABEL_92;
    case 0x39:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 93;
      __return_address = 30;
      goto LABEL_92;
    case 0x3A:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 124;
      __return_address = 30;
      goto LABEL_92;
    case 0x3B:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 155;
      __return_address = 30;
      goto LABEL_92;
    case 0x3C:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 186;
      __return_address = 30;
      goto LABEL_92;
    case 0x3D:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 217;
      __return_address = 30;
      goto LABEL_92;
    case 0x3E:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 248;
      __return_address = 30;
      goto LABEL_92;
    case 0x3F:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 279;
      __return_address = 30;
      goto LABEL_92;
    case 0x40:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 310;
      __return_address = 30;
      goto LABEL_92;
    case 0x41:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 341;
      __return_address = 30;
      goto LABEL_92;
    case 0x42:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 372;
      __return_address = 30;
      goto LABEL_92;
    case 0x43:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 403;
      __return_address = 30;
      goto LABEL_92;
    case 0x44:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 434;
      __return_address = 30;
      goto LABEL_92;
    case 0x45:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 465;
      __return_address = 30;
      goto LABEL_92;
    case 0x46:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      v6 = 30;
      *(_DWORD *)(this + 208) = 496;
      __return_address = 30;
      goto LABEL_92;
    case 0x47:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      *(_DWORD *)(this + 208) = 527;
      __return_address = 12;
      v6 = 17;
      goto LABEL_92;
    case 0x48:
      v18 = UIAssetArray_GetWithAlpha(dword_65A60644, 46);
      *(_DWORD *)(this + 208) = 545;
      __return_address = 17;
      v6 = 12;
LABEL_92:
      *(_DWORD *)(this + 220) = 1;
LABEL_93:
      *(_DWORD *)(this + 216) = 1;
LABEL_94:
      *(_DWORD *)(this + 176) = v18;
LABEL_95:
      __saved_registers = v6;
      break;
    default:
      break;
  }
  if ( *(_DWORD *)(this + 192) == 3 )
  {
    *(_DWORD *)(this + 8) = 120;
    goto LABEL_105;
  }
  if ( !*(_BYTE *)(this + 228) )
  {
    v20 = __return_address;
    goto LABEL_104;
  }
  v20 = *(_DWORD *)(this + 244);
  if ( v20 > 0 )
  {
LABEL_104:
    *(_DWORD *)(this + 8) = v20;
    goto LABEL_105;
  }
  v21 = *(_DWORD *)(this + 188);
  if ( v21 <= 30 )
    v21 = 30;
  *(_DWORD *)(this + 8) = v21 + *(_DWORD *)(this + 232) + *(_DWORD *)(this + 236);
LABEL_105:
  v22 = *(_DWORD *)(this + 176);
  *(_DWORD *)(this + 12) = v6;
  if ( v22 )
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v22, *(float *)(dword_65A60644 + 60));
  *(_DWORD *)(this + 60) = 0;
  *(_DWORD *)(this + 64) = 0;
  *(_DWORD *)(this + 56) = a2;
  return 1;
}
// 65768299: variable 'v24' is possibly undefined
// 65A60644: using guessed type int dword_65A60644;

//----- (657692E0) --------------------------------------------------------
void __thiscall UiWidget_SetVTable(_DWORD *this)
{
  *this = &off_659C4884;
}
// 659C4884: using guessed type void *off_659C4884;

//----- (657693B0) --------------------------------------------------------
int __cdecl sub_657693B0(int a1)
{
  int result; // eax

  if ( a1 )
  {
    result = *(_DWORD *)(a1 + 4);
    switch ( result )
    {
      case 0:
      case 1:
      case 2:
      case 3:
      case 4:
      case 5:
      case 6:
      case 7:
      case 8:
      case 9:
      case 10:
      case 11:
      case 12:
      case 13:
      case 14:
      case 15:
      case 16:
      case 17:
      case 18:
      case 19:
      case 20:
      case 21:
      case 22:
      case 23:
      case 24:
      case 25:
      case 26:
        result = (**(int (__stdcall ***)(int))a1)(1);
        break;
      default:
        return result;
    }
  }
  return result;
}

//----- (657694F0) --------------------------------------------------------
int __thiscall UiItemSlot_FreeTooltipHString(int *this)
{
  int result; // eax

  result = *(this + 26);
  if ( result )
  {
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, result);
    *(this + 26) = 0;
  }
  return result;
}

//----- (65769520) --------------------------------------------------------
int __thiscall UiItemSlot_SetTooltipHString(int *this, int a2)
{
  UiItemSlot_FreeTooltipHString(this);
  *(this + 26) = a2;
  return a2;
}

//----- (65769620) --------------------------------------------------------
int __thiscall UiWidget_SetState(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  if ( *(this + 5) != a2 )
  {
    *(this + 5) = a2;
    return (*(int (__thiscall **)(_DWORD *))(*this + 124))(this);
  }
  return result;
}

//----- (65769730) --------------------------------------------------------
void __cdecl __noreturn sub_65769730(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65769850) --------------------------------------------------------
void *__cdecl sub_65769850(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 4 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(4 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65769FC0) --------------------------------------------------------
int __thiscall sub_65769FC0(_DWORD *this, int a2, int a3, int a4)
{
  int v5; // eax
  int v7; // eax

  v5 = *(this + 2);
  if ( a2 == v5 && a2 )
    return 1;
  if ( *(this + 1) )
    sub_65769C90(this, a3, v5 + *(this + 3));
  *(this + 2) = a2;
  if ( a2 )
  {
    v7 = sub_65769CC0(this, a2 + *(this + 4), a3, a4);
    *(this + 1) = v7;
    if ( !v7 )
    {
      *(this + 2) = 0;
      *(this + 3) = 0;
      return 0;
    }
    *(this + 3) = *(this + 4);
  }
  return 1;
}
// 65769C90: using guessed type int __thiscall sub_65769C90(_DWORD, _DWORD, _DWORD);
// 65769CC0: using guessed type int __thiscall sub_65769CC0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6576A040) --------------------------------------------------------
int __thiscall sub_6576A040(int *this, int a2, int a3, int a4)
{
  int v5; // eax
  int v7; // eax

  v5 = *(this + 2);
  if ( a2 == v5 && a2 )
    return 1;
  if ( *(this + 1) )
    sub_6575FF80(this, a3, v5 + *(this + 3));
  *(this + 2) = a2;
  if ( a2 )
  {
    v7 = sub_6575FFB0(a2 + *(this + 4), a3, a4);
    *(this + 1) = v7;
    if ( !v7 )
    {
      *(this + 2) = 0;
      *(this + 3) = 0;
      return 0;
    }
    *(this + 3) = *(this + 4);
  }
  return 1;
}

//----- (6576A310) --------------------------------------------------------
BOOL __thiscall sub_6576A310(_DWORD *this, int a2)
{
  return sub_65769FC0(this, a2, (int)&off_65A560A4, 0) != 0;
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (6576A330) --------------------------------------------------------
BOOL __thiscall UiWidget_IsVisible(int *this, int a1)
{
  return sub_6576A040(this, a1, (int)&off_65A560A4, 0) != 0;
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (6576BB30) --------------------------------------------------------
BOOL __thiscall UiList_ClearEntries(int *this)
{
  int i; // edi
  int v3; // eax
  bool v4; // zf
  _DWORD **v5; // eax
  _DWORD *v6; // esi

  for ( i = 0; i < *(this + 35); ++i )
  {
    v3 = *(this + 34);
    v4 = *(_DWORD *)(v3 + 4 * i) == 0;
    v5 = (_DWORD **)(v3 + 4 * i);
    if ( !v4 )
    {
      v6 = *v5;
      if ( *v5 )
      {
        if ( *v6 )
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, *v6);
        *v6 = 0;
        operator delete(v6);
      }
      *(_DWORD *)(*(this + 34) + 4 * i) = 0;
    }
  }
  return UiWidget_IsVisible(this + 33, 0);
}

//----- (6576BD50) --------------------------------------------------------
int __thiscall sub_6576BD50(_DWORD *this)
{
  int v2; // ebx
  bool v3; // cc
  _DWORD **v4; // eax
  _DWORD *v5; // edi
  _DWORD *v6; // esi

  v2 = 0;
  if ( *this )
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, *this);
  v3 = *(this + 6) <= 0;
  *this = 0;
  if ( !v3 )
  {
    do
    {
      v4 = (_DWORD **)(*(this + 5) + 4 * v2);
      if ( *v4 )
      {
        v5 = *v4;
        if ( **v4 )
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, *v5);
        *v5 = 0;
        operator delete(v5);
        *(_DWORD *)(*(this + 5) + 4 * v2) = 0;
      }
      ++v2;
    }
    while ( v2 < *(this + 6) );
  }
  v6 = this + 4;
  sub_6576A2F0(v6, 0);
  *v6 = &off_659C48C4;
  return sub_65769F40(0);
}
// 65769F40: using guessed type int __cdecl sub_65769F40(_DWORD);
// 6576A2F0: using guessed type int __thiscall sub_6576A2F0(_DWORD, _DWORD);
// 659C48C4: using guessed type void *off_659C48C4;

//----- (6576BF90) --------------------------------------------------------
int __thiscall TextureManager_ClearAll(_DWORD *this)
{
  int v2; // edi
  bool v3; // cc
  _DWORD **v4; // eax
  void *v5; // ebx
  _DWORD *v6; // esi

  v2 = 0;
  if ( *this )
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, *this);
  v3 = *(this + 6) <= 0;
  *this = 0;
  if ( !v3 )
  {
    do
    {
      v4 = (_DWORD **)(*(this + 5) + 4 * v2);
      if ( *v4 )
      {
        v5 = *v4;
        sub_6576BD50(*v4);
        operator delete(v5);
        *(_DWORD *)(*(this + 5) + 4 * v2) = 0;
      }
      ++v2;
    }
    while ( v2 < *(this + 6) );
  }
  v6 = this + 4;
  sub_6576A310(v6, 0);
  *v6 = &off_659C48F8;
  return sub_65769FC0(v6, 0, (int)&off_65A560A4, 0);
}
// 659C48F8: using guessed type void *off_659C48F8;
// 65A560A4: using guessed type void *off_65A560A4;

//----- (6576C080) --------------------------------------------------------
_DWORD *__thiscall sub_6576C080(_DWORD *this)
{
  sub_657692D0();
  *this = &off_659C49CC;
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  *(this + 4) = 0;
  *(this + 5) = 0;
  *(this + 9) = 0;
  *(this + 10) = 0;
  *(this + 11) = 0;
  *(this + 12) = 0;
  *(this + 13) = 0;
  *(this + 14) = 0;
  *(this + 15) = 0;
  *(this + 16) = 0;
  *(this + 6) = 1;
  *(this + 7) = 1;
  *(this + 8) = 1;
  *(this + 17) = 0;
  *(this + 18) = 0;
  *(this + 19) = 0;
  *(this + 20) = 0;
  *(this + 21) = 0;
  *(this + 22) = 0;
  *(this + 23) = 0;
  *(this + 24) = 0;
  *((_BYTE *)this + 100) = 0;
  *(this + 26) = 0;
  *(this + 27) = 0;
  *(this + 28) = 0;
  *(this + 30) = 0;
  *(this + 31) = 0;
  *(this + 32) = 0;
  *(this + 33) = &off_659C492C;
  *(this + 34) = 0;
  *(this + 35) = 0;
  *(this + 36) = 0;
  *(this + 37) = 0;
  sub_6576B5F0(this + 33, 0, 0);
  *(this + 33) = &off_659C4994;
  *(this + 38) = 0;
  *(this + 39) = 0;
  *(this + 40) = 0;
  *(this + 41) = 1000;
  *(this + 42) = 0;
  *((_BYTE *)this + 172) = 0;
  return this;
}
// 657692D0: using guessed type int sub_657692D0(void);
// 6576B5F0: using guessed type int __thiscall sub_6576B5F0(_DWORD, _DWORD, _DWORD);
// 659C492C: using guessed type void *off_659C492C;
// 659C4994: using guessed type void *off_659C4994;
// 659C49CC: using guessed type void *off_659C49CC;

//----- (6576C1C0) --------------------------------------------------------
void __thiscall PtrVector_FreeAll(_DWORD *this)
{
  unsigned int i; // edi
  _DWORD **v3; // eax
  void *v4; // ebx
  int v5; // edi

  for ( i = 0; i < (*(this + 2) - *(this + 1)) >> 2; ++i )
  {
    v3 = (_DWORD **)(*(this + 1) + 4 * i);
    if ( *v3 )
    {
      v4 = *v3;
      TextureManager_ClearAll(*v3);
      operator delete(v4);
    }
  }
  v5 = *(this + 1);
  if ( v5 != *(this + 2) )
    *(this + 2) = v5;
}

//----- (6576C240) --------------------------------------------------------
void __thiscall PtrVector_FreeAll_thunk(_DWORD *this)
{
  PtrVector_FreeAll(this + 29);
}

//----- (6576C6E0) --------------------------------------------------------
float *__thiscall sub_6576C6E0(float *this)
{
  sub_6576C080(this);
  *(this + 44) = 0.5;
  *(this + 46) = 0.0;
  *(this + 47) = 0.0;
  *(this + 48) = 0.0;
  *(_DWORD *)this = &off_659C4ADC;
  *((_DWORD *)this + 1) = 6;
  *(this + 45) = -0.0;
  return this;
}
// 659C4ADC: using guessed type void *off_659C4ADC;

//----- (6576CB00) --------------------------------------------------------
int __thiscall Scrollbar_Initialize(int this, int a2, int a3, float a4)
{
  int v5; // edi
  int v6; // edi
  int v8; // edi

  *(float *)(this + 176) = a4;
  *(_DWORD *)(this + 8) = a2;
  *(_DWORD *)(this + 12) = a3;
  if ( *(int *)(dword_65A60644 + 28) > 0 )
  {
    v5 = **(_DWORD **)(dword_65A60644 + 24);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v5, *(float *)(dword_65A60644 + 64));
  }
  else
  {
    v5 = 0;
  }
  *(_DWORD *)(this + 184) = v5;
  if ( *(int *)(dword_65A60644 + 28) > 1 )
  {
    v6 = *(_DWORD *)(*(_DWORD *)(dword_65A60644 + 24) + 4);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v6, *(float *)(dword_65A60644 + 64));
  }
  else
  {
    v6 = 0;
  }
  *(_DWORD *)(this + 188) = v6;
  if ( *(int *)(dword_65A60644 + 28) > 2 )
  {
    v8 = *(_DWORD *)(*(_DWORD *)(dword_65A60644 + 24) + 8);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v8, *(float *)(dword_65A60644 + 64));
    *(_DWORD *)(this + 192) = v8;
  }
  else
  {
    *(_DWORD *)(this + 192) = 0;
  }
  return 1;
}
// 65A60644: using guessed type int dword_65A60644;

//----- (6576CC20) --------------------------------------------------------
float *__thiscall sub_6576CC20(float *this)
{
  sub_6576C080(this);
  *(_DWORD *)this = &off_659C577C;
  *((_DWORD *)this + 1) = 7;
  *(this + 44) = 0.0;
  *((_DWORD *)this + 45) = 53;
  *(this + 46) = 0.0;
  *(this + 47) = 0.0;
  *(this + 48) = 0.0;
  *(this + 51) = 0.5;
  *(this + 50) = 0.0;
  *((_BYTE *)this + 212) = 0;
  *(this + 49) = 0.0;
  *(this + 52) = -0.0;
  return this;
}
// 659C4B60: using guessed type int dword_659C4B60[];
// 659C577C: using guessed type void *off_659C577C;

//----- (6576CDA0) --------------------------------------------------------
int __thiscall Scrollbar_InitFromTable(int this, int a2, float a3)
{
  int *v5; // eax
  unsigned int v6; // eax
  int v7; // edi
  int v8; // eax
  int v9; // edx

  if ( a2 >= 129 )
    return 0;
  v5 = &dword_659C4B60[6 * a2];
  *(_DWORD *)(this + 176) = *v5;
  *(_DWORD *)(this + 180) = v5[1];
  *(_DWORD *)(this + 184) = v5[2];
  *(_DWORD *)(this + 188) = v5[3];
  *(_DWORD *)(this + 192) = v5[4];
  *(_DWORD *)(this + 196) = v5[5];
  v6 = *(_DWORD *)(this + 180);
  if ( v6 < 0x35 )
  {
    if ( (signed int)v6 < *(_DWORD *)(dword_65A60644 + 8) )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(dword_65A60644 + 4) + 4 * v6);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v7, *(float *)(dword_65A60644 + 60));
    }
    else
    {
      v7 = 0;
    }
    *(_DWORD *)(this + 200) = v7;
  }
  v8 = *(_DWORD *)(this + 196);
  v9 = *(_DWORD *)(this + 192);
  *(float *)(this + 204) = a3;
  *(_DWORD *)(this + 12) = v8;
  *(_DWORD *)(this + 8) = v9;
  return 1;
}
// 659C4B60: using guessed type int dword_659C4B60[];
// 65A60644: using guessed type int dword_65A60644;

//----- (6576D0A0) --------------------------------------------------------
void __thiscall Scrollbar_AddCallbackEntry(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v5; // eax

  if ( *(this + 54) < 0xAu )
  {
    v5 = operator new(0xCu);
    if ( v5 )
    {
      *v5 = a2;
      v5[1] = a3;
      v5[2] = a4;
    }
    else
    {
      v5 = 0;
    }
    *(this + (*(this + 54))++ + 44) = v5;
  }
}

//----- (6576D0F0) --------------------------------------------------------
int __cdecl sub_6576D0F0(_DWORD *a1, int a2, int a3, int a4, int a5, int a6)
{
  _DWORD *v7; // eax
  int v8; // ecx
  int *v9; // edi
  int *v10; // edx
  int *v11; // ecx

  if ( a1[555] >= 0x1F4u )
    return 0;
  v7 = operator new(0x40u);
  if ( v7 )
  {
    v7[10] = a2;
    v7[11] = a3;
    v7[12] = a4;
    v7[14] = a5;
    *v7 = 0;
    v7[1] = 0;
    v7[2] = 0;
    v7[3] = 0;
    v7[4] = 0;
    v7[5] = 0;
    v7[6] = 0;
    v7[7] = 0;
    v7[8] = 0;
    v7[9] = 0;
    *((_BYTE *)v7 + 60) = 0;
  }
  else
  {
    v7 = 0;
  }
  v8 = a6;
  if ( a6 )
  {
    v9 = &a6;
    v10 = v7 - 1;
    do
    {
      ++v10;
      ++v9;
      *v10 = v8;
      v8 = *v9;
    }
    while ( *v9 );
  }
  a1[a1[555]++ + 55] = v7;
  v11 = (int *)a1[563];
  a1[559] = v7;
  if ( v11 )
  {
    if ( a1[555] - a1[557] + 1 > 0 )
    {
      Slider_SetTickCount(v11, a1[555] - a1[557] + 1);
      return 1;
    }
    Slider_SetTickCount(v11, 0);
  }
  return 1;
}

//----- (6576D1D0) --------------------------------------------------------
int __thiscall sub_6576D1D0(_DWORD *this)
{
  int result; // eax
  _DWORD *v2; // ecx

  result = 0;
  *(this + 566) = 0;
  *(this + 558) = 0;
  v2 = (_DWORD *)*(this + 563);
  if ( v2 )
    return Slider_ClampValue(v2, 0);
  return result;
}

//----- (6576D9C0) --------------------------------------------------------
int __fastcall sub_6576D9C0(_DWORD *a1)
{
  void **v1; // ebx
  _DWORD *v2; // edi
  unsigned int v3; // esi
  _DWORD *v5; // [esp+Ch] [ebp-8h]
  int v6; // [esp+10h] [ebp-4h]

  v5 = a1;
  v1 = (void **)(a1 + 55);
  v6 = 500;
  do
  {
    v2 = *v1;
    v3 = 0;
    if ( *v1 )
    {
      do
        sub_657693B0(v2[v3++]);
      while ( v3 < 0xA );
      operator delete(v2);
      a1 = v5;
      *v1 = 0;
    }
    ++v1;
    --v6;
  }
  while ( v6 );
  a1[555] = 0;
  a1[556] = 0;
  a1[558] = 0;
  a1[566] = 0;
  a1[40] = 0;
  a1[560] = -1;
  a1[561] = -1;
  a1[562] = -1;
  return -1;
}

//----- (6576DA60) --------------------------------------------------------
int *__thiscall UiSlider_Create(int *this, int a2, int a3)
{
  float *v4; // eax
  int *v5; // esi
  int v7; // edx
  int v8; // eax
  int v9; // ecx
  int v10; // edx
  int v11; // edi

  v4 = (float *)operator new(0xF8u);
  if ( v4 )
    v5 = (int *)Slider_Ctor(v4);
  else
    v5 = 0;
  if ( UiWidget_InitWithSound(v5, a2, a3, *(this + 564), *(this + 565)) )
  {
    v7 = v5[20];
    v8 = *(this + 2) - 16;
    v5[22] = *(this + 568);
    v5[17] = v8 + v5[19];
    v9 = v5[22];
    v5[21] = v8;
    v5[18] = v9 + v7;
    v10 = *(this + 17);
    v11 = *(this + 18);
    v5[19] = v10;
    v5[18] = v9 + v11;
    v5[20] = v11;
    v5[17] = v8 + v10;
    return v5;
  }
  else
  {
    if ( v5 )
      (*(void (__thiscall **)(int *, int))*v5)(v5, 1);
    return 0;
  }
}

//----- (6576DEA0) --------------------------------------------------------
int __thiscall TextInput_Initialize(int *this, int a2, int a3, int *a4, int *a5, unsigned int a6)
{
  unsigned int v7; // eax

  if ( !a3 )
    return 0;
  *(this + 570) = a3;
  *(this + 2) = *a4;
  v7 = a4[1];
  *(this + 3) = v7;
  *(this + 15) = 0;
  *(this + 16) = 0;
  *(this + 557) = v7 / a6;
  *(this + 14) = a2;
  if ( a5 )
  {
    if ( *a5 != -1 )
    {
      *(this + 565) = *a5;
      *(this + 564) = a5[1];
      *(this + 567) = a5[2];
      *(this + 568) = a5[3];
      *(this + 563) = (int)UiSlider_Create(this, 1, (int)(this + 566));
    }
  }
  return 1;
}

//----- (6576E330) --------------------------------------------------------
char *sub_6576E330(char *Source, char *a2, ...)
{
  char *result; // eax
  char *v3; // esi
  char *v4; // edi
  char *v5; // ebx
  int v6; // eax
  char *v7; // esi
  char *v8; // [esp+8h] [ebp-8h]
  char *v9; // [esp+Ch] [ebp-4h] BYREF
  va_list va; // [esp+20h] [ebp+10h] BYREF

  va_start(va, a2);
  result = a2;
  v3 = Source;
  if ( Source != a2 )
  {
    v4 = Source + 4;
    if ( Source + 4 != a2 )
    {
      v8 = Source;
      do
      {
        v9 = *(char **)v4;
        v5 = v4;
        if ( (unsigned __int8)sub_6576D820(va, &v9, v3) )
        {
          v6 = (int)&v8[4 - (_DWORD)Source] >> 2;
          if ( v6 > 0 )
            memmove_s(&v4[-4 * v6 + 4], 4 * v6, v3, 4 * v6);
          result = v9;
          *(_DWORD *)v3 = v9;
        }
        else
        {
          v7 = v8;
          for ( result = (char *)sub_6576D820(va, &v9, v8); (_BYTE)result; result = (char *)sub_6576D820(va, &v9, v7) )
          {
            *(_DWORD *)v5 = *(_DWORD *)v7;
            v5 = v7;
            v7 -= 4;
          }
          v3 = Source;
          *(_DWORD *)v5 = v9;
        }
        v8 += 4;
        v4 += 4;
      }
      while ( v4 != a2 );
    }
  }
  return result;
}
// 6576D820: using guessed type int __thiscall sub_6576D820(_DWORD, _DWORD, _DWORD);

//----- (6576E4B0) --------------------------------------------------------
char *sub_6576E4B0(char *Source, char *a2, ...)
{
  char *result; // eax
  char *v3; // esi
  char *v4; // edi
  char *v5; // ebx
  int v6; // eax
  char *v7; // esi
  char *v8; // [esp+8h] [ebp-8h]
  char *v9; // [esp+Ch] [ebp-4h] BYREF
  va_list va; // [esp+20h] [ebp+10h] BYREF

  va_start(va, a2);
  result = a2;
  v3 = Source;
  if ( Source != a2 )
  {
    v4 = Source + 4;
    if ( Source + 4 != a2 )
    {
      v8 = Source;
      do
      {
        v9 = *(char **)v4;
        v5 = v4;
        if ( (unsigned __int8)sub_6576D8F0(va, &v9, v3) )
        {
          v6 = (int)&v8[4 - (_DWORD)Source] >> 2;
          if ( v6 > 0 )
            memmove_s(&v4[-4 * v6 + 4], 4 * v6, v3, 4 * v6);
          result = v9;
          *(_DWORD *)v3 = v9;
        }
        else
        {
          v7 = v8;
          for ( result = (char *)sub_6576D8F0(va, &v9, v8); (_BYTE)result; result = (char *)sub_6576D8F0(va, &v9, v7) )
          {
            *(_DWORD *)v5 = *(_DWORD *)v7;
            v5 = v7;
            v7 -= 4;
          }
          v3 = Source;
          *(_DWORD *)v5 = v9;
        }
        v8 += 4;
        v4 += 4;
      }
      while ( v4 != a2 );
    }
  }
  return result;
}
// 6576D8F0: using guessed type int __thiscall sub_6576D8F0(_DWORD, _DWORD, _DWORD);

//----- (6576E8F0) --------------------------------------------------------
int **__cdecl sub_6576E8F0(int **a1, int *a2, int *a3, int a4)
{
  int *v4; // esi
  int *v5; // ebx
  int *v6; // ecx
  int *v7; // edi
  int *v8; // eax
  int v9; // ecx
  bool v10; // zf
  int *v11; // ebx
  int v12; // eax
  int v13; // eax
  int *v14; // eax
  int *v15; // edx
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v20; // [esp+Ch] [ebp-Ch]
  int *v21; // [esp+10h] [ebp-8h]
  int *v22; // [esp+10h] [ebp-8h]
  int *v23; // [esp+14h] [ebp-4h]

  v4 = &a2[(a3 - a2) / 2];
  sub_6576E280(a2, v4, a3 - 1, a4);
  v5 = v4 + 1;
  v23 = v4 + 1;
  if ( a2 < v4 )
  {
    do
    {
      v21 = v4 - 1;
      if ( (unsigned __int8)sub_6576D820(&a4, v4 - 1, v4) )
        break;
      if ( (unsigned __int8)sub_6576D820(&a4, v4, v21) )
        break;
      --v4;
    }
    while ( a2 < v21 );
  }
  if ( v5 < a3 )
  {
    do
    {
      if ( (unsigned __int8)sub_6576D820(&a4, v5, v4) )
        break;
      if ( (unsigned __int8)sub_6576D820(&a4, v4, v5) )
        break;
      ++v5;
    }
    while ( v5 < a3 );
    v23 = v5;
  }
  v6 = v4;
  v7 = v5;
  v22 = v4;
  while ( 1 )
  {
    while ( 1 )
    {
      if ( v7 < a3 )
      {
        do
        {
          if ( !(unsigned __int8)sub_6576D820(&a4, v4, v7) )
          {
            if ( (unsigned __int8)sub_6576D820(&a4, v7, v4) )
              break;
            v8 = v5++;
            if ( v8 != v7 )
            {
              v9 = *v8;
              *v8 = *v7;
              *v7 = v9;
            }
          }
          ++v7;
        }
        while ( v7 < a3 );
        v6 = v22;
        v23 = v5;
      }
      v10 = v6 == a2;
      if ( v6 > a2 )
      {
        v11 = v6 - 1;
        do
        {
          if ( !(unsigned __int8)sub_6576D820(&a4, v11, v4) )
          {
            if ( (unsigned __int8)sub_6576D820(&a4, v4, v11) )
              break;
            if ( --v4 != v11 )
            {
              v12 = *v4;
              *v4 = *v11;
              *v11 = v12;
            }
          }
          --v11;
          --v22;
        }
        while ( a2 < v22 );
        v6 = v22;
        v5 = v23;
        v10 = v22 == a2;
      }
      if ( v10 )
        break;
      v22 = --v6;
      if ( v7 == a3 )
      {
        if ( v6 != --v4 )
        {
          v16 = *v6;
          *v6 = *v4;
          *v4 = v16;
        }
        v23 = --v5;
        if ( v4 != v5 )
        {
          v17 = *v4;
          *v4 = *v5;
          *v5 = v17;
        }
      }
      else
      {
        if ( v7 != v6 )
        {
          v18 = *v7;
          *v7 = *v6;
          *v6 = v18;
        }
        ++v7;
      }
    }
    if ( v7 == a3 )
      break;
    if ( v5 != v7 && v4 != v5 )
    {
      v13 = *v4;
      *v4 = *v5;
      *v5 = v13;
    }
    v14 = v7;
    v15 = v4;
    ++v5;
    ++v4;
    ++v7;
    v23 = v5;
    if ( v15 != v14 )
    {
      v20 = *v15;
      *v15 = *v14;
      v6 = v22;
      *v14 = v20;
    }
  }
  *a1 = v4;
  a1[1] = v5;
  return a1;
}
// 6576D820: using guessed type int __thiscall sub_6576D820(_DWORD, _DWORD, _DWORD);
// 6576E280: using guessed type int __cdecl sub_6576E280(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6576EAE0) --------------------------------------------------------
int **__cdecl sub_6576EAE0(int **a1, int *a2, int *a3, int a4)
{
  int *v4; // esi
  int *v5; // ebx
  int *v6; // ecx
  int *v7; // edi
  int *v8; // eax
  int v9; // ecx
  bool v10; // zf
  int *v11; // ebx
  int v12; // eax
  int v13; // eax
  int *v14; // eax
  int *v15; // edx
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v20; // [esp+Ch] [ebp-Ch]
  int *v21; // [esp+10h] [ebp-8h]
  int *v22; // [esp+10h] [ebp-8h]
  int *v23; // [esp+14h] [ebp-4h]

  v4 = &a2[(a3 - a2) / 2];
  sub_6576E400(a2, v4, a3 - 1, a4);
  v5 = v4 + 1;
  v23 = v4 + 1;
  if ( a2 < v4 )
  {
    do
    {
      v21 = v4 - 1;
      if ( (unsigned __int8)sub_6576D8F0(&a4, v4 - 1, v4) )
        break;
      if ( (unsigned __int8)sub_6576D8F0(&a4, v4, v21) )
        break;
      --v4;
    }
    while ( a2 < v21 );
  }
  if ( v5 < a3 )
  {
    do
    {
      if ( (unsigned __int8)sub_6576D8F0(&a4, v5, v4) )
        break;
      if ( (unsigned __int8)sub_6576D8F0(&a4, v4, v5) )
        break;
      ++v5;
    }
    while ( v5 < a3 );
    v23 = v5;
  }
  v6 = v4;
  v7 = v5;
  v22 = v4;
  while ( 1 )
  {
    while ( 1 )
    {
      if ( v7 < a3 )
      {
        do
        {
          if ( !(unsigned __int8)sub_6576D8F0(&a4, v4, v7) )
          {
            if ( (unsigned __int8)sub_6576D8F0(&a4, v7, v4) )
              break;
            v8 = v5++;
            if ( v8 != v7 )
            {
              v9 = *v8;
              *v8 = *v7;
              *v7 = v9;
            }
          }
          ++v7;
        }
        while ( v7 < a3 );
        v6 = v22;
        v23 = v5;
      }
      v10 = v6 == a2;
      if ( v6 > a2 )
      {
        v11 = v6 - 1;
        do
        {
          if ( !(unsigned __int8)sub_6576D8F0(&a4, v11, v4) )
          {
            if ( (unsigned __int8)sub_6576D8F0(&a4, v4, v11) )
              break;
            if ( --v4 != v11 )
            {
              v12 = *v4;
              *v4 = *v11;
              *v11 = v12;
            }
          }
          --v11;
          --v22;
        }
        while ( a2 < v22 );
        v6 = v22;
        v5 = v23;
        v10 = v22 == a2;
      }
      if ( v10 )
        break;
      v22 = --v6;
      if ( v7 == a3 )
      {
        if ( v6 != --v4 )
        {
          v16 = *v6;
          *v6 = *v4;
          *v4 = v16;
        }
        v23 = --v5;
        if ( v4 != v5 )
        {
          v17 = *v4;
          *v4 = *v5;
          *v5 = v17;
        }
      }
      else
      {
        if ( v7 != v6 )
        {
          v18 = *v7;
          *v7 = *v6;
          *v6 = v18;
        }
        ++v7;
      }
    }
    if ( v7 == a3 )
      break;
    if ( v5 != v7 && v4 != v5 )
    {
      v13 = *v4;
      *v4 = *v5;
      *v5 = v13;
    }
    v14 = v7;
    v15 = v4;
    ++v5;
    ++v4;
    ++v7;
    v23 = v5;
    if ( v15 != v14 )
    {
      v20 = *v15;
      *v15 = *v14;
      v6 = v22;
      *v14 = v20;
    }
  }
  *a1 = v4;
  a1[1] = v5;
  return a1;
}
// 6576D8F0: using guessed type int __thiscall sub_6576D8F0(_DWORD, _DWORD, _DWORD);
// 6576E400: using guessed type int __cdecl sub_6576E400(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6576ECD0) --------------------------------------------------------
int __cdecl sub_6576ECD0(int a1, int a2, int a3)
{
  int result; // eax
  int i; // esi
  int v5; // ecx

  result = ((a2 - a1) >> 2) - ((a2 - a1) >> 31);
  for ( i = ((a2 - a1) >> 2) / 2; i > 0; result = sub_6576E580(a1, i, (a2 - a1) >> 2, v5, a3) )
    v5 = *(_DWORD *)(a1 + 4 * i-- - 4);
  return result;
}
// 6576E580: using guessed type int __cdecl sub_6576E580(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (6576ED10) --------------------------------------------------------
int __cdecl sub_6576ED10(int a1, int a2, int a3)
{
  int result; // eax
  int i; // esi
  int v5; // ecx

  result = ((a2 - a1) >> 2) - ((a2 - a1) >> 31);
  for ( i = ((a2 - a1) >> 2) / 2; i > 0; result = sub_6576E600(a1, i, (a2 - a1) >> 2, v5, a3) )
    v5 = *(_DWORD *)(a1 + 4 * i-- - 4);
  return result;
}
// 6576E600: using guessed type int __cdecl sub_6576E600(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (6576EE90) --------------------------------------------------------
int __cdecl sub_6576EE90(_DWORD *a1, int a2, int a3)
{
  int v3; // esi
  int result; // eax
  int v5; // [esp-8h] [ebp-10h]

  v3 = a2 - (_DWORD)a1;
  result = (a2 - (int)a1) >> 2;
  if ( result > 1 )
  {
    do
    {
      v5 = *(_DWORD *)((char *)a1 + v3 - 4);
      *(_DWORD *)((char *)a1 + v3 - 4) = *a1;
      sub_6576E580(a1, 0, (v3 - 4) >> 2, v5, a3);
      v3 -= 4;
      result = v3 >> 2;
    }
    while ( v3 >> 2 > 1 );
  }
  return result;
}
// 6576E580: using guessed type int __cdecl sub_6576E580(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (6576EEE0) --------------------------------------------------------
int __cdecl sub_6576EEE0(_DWORD *a1, int a2, int a3)
{
  int v3; // esi
  int result; // eax
  int v5; // [esp-8h] [ebp-10h]

  v3 = a2 - (_DWORD)a1;
  result = (a2 - (int)a1) >> 2;
  if ( result > 1 )
  {
    do
    {
      v5 = *(_DWORD *)((char *)a1 + v3 - 4);
      *(_DWORD *)((char *)a1 + v3 - 4) = *a1;
      sub_6576E600(a1, 0, (v3 - 4) >> 2, v5, a3);
      v3 -= 4;
      result = v3 >> 2;
    }
    while ( v3 >> 2 > 1 );
  }
  return result;
}
// 6576E600: using guessed type int __cdecl sub_6576E600(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (6576EF70) --------------------------------------------------------
int __cdecl IntroSort_Ascending(char *Source, char *a2, int a3, int a4)
{
  char *v4; // ebx
  char *v5; // edi
  int result; // eax
  int v8; // [esp+Ch] [ebp-8h] BYREF
  void *v9; // [esp+10h] [ebp-4h]

  v4 = Source;
  v5 = a2;
  result = (a2 - Source) >> 2;
  if ( result <= 32 )
  {
LABEL_7:
    if ( result > 1 )
      return (int)sub_6576E330(v4, v5, a4, 0);
  }
  else
  {
    while ( a3 > 0 )
    {
      sub_6576E8F0((int **)&v8, (int *)v4, (int *)v5, a4);
      a3 = a3 / 2 / 2 + a3 / 2;
      if ( (int)((v8 - (_DWORD)v4) & 0xFFFFFFFC) >= (int)((v5 - (_BYTE *)v9) & 0xFFFFFFFC) )
      {
        IntroSort_Ascending(v9, (int)v5, a3, a4);
        v5 = (char *)v8;
      }
      else
      {
        IntroSort_Ascending(v4, v8, a3, a4);
        v4 = (char *)v9;
      }
      result = (v5 - v4) >> 2;
      if ( result <= 32 )
        goto LABEL_7;
    }
    if ( (int)((v5 - v4) & 0xFFFFFFFC) > 4 )
      sub_6576ECD0((int)v4, (int)v5, a4);
    return sub_6576EE90(v4, (int)v5, a4);
  }
  return result;
}
// 6576F021: conditional instruction was optimized away because eax.4>=21

//----- (6576F060) --------------------------------------------------------
int __cdecl IntroSort_Descending(char *Source, char *a2, int a3, int a4)
{
  char *v4; // ebx
  char *v5; // edi
  int result; // eax
  int v8; // [esp+Ch] [ebp-8h] BYREF
  void *v9; // [esp+10h] [ebp-4h]

  v4 = Source;
  v5 = a2;
  result = (a2 - Source) >> 2;
  if ( result <= 32 )
  {
LABEL_7:
    if ( result > 1 )
      return (int)sub_6576E4B0(v4, v5, a4, 0);
  }
  else
  {
    while ( a3 > 0 )
    {
      sub_6576EAE0((int **)&v8, (int *)v4, (int *)v5, a4);
      a3 = a3 / 2 / 2 + a3 / 2;
      if ( (int)((v8 - (_DWORD)v4) & 0xFFFFFFFC) >= (int)((v5 - (_BYTE *)v9) & 0xFFFFFFFC) )
      {
        IntroSort_Descending(v9, (int)v5, a3, a4);
        v5 = (char *)v8;
      }
      else
      {
        IntroSort_Descending(v4, v8, a3, a4);
        v4 = (char *)v9;
      }
      result = (v5 - v4) >> 2;
      if ( result <= 32 )
        goto LABEL_7;
    }
    if ( (int)((v5 - v4) & 0xFFFFFFFC) > 4 )
      sub_6576ED10((int)v4, (int)v5, a4);
    return sub_6576EEE0(v4, (int)v5, a4);
  }
  return result;
}
// 6576F111: conditional instruction was optimized away because eax.4>=21

//----- (6576F1B0) --------------------------------------------------------
void __thiscall ItemList_Sort(char *this, int a2, int a3)
{
  int v4; // ecx
  int v5; // eax
  _DWORD *v6; // edi
  unsigned int v7; // eax
  int v8; // [esp+4h] [ebp-4h]

  v4 = *((_DWORD *)this + 555);
  if ( v4 )
  {
    v5 = *((_DWORD *)this + 561);
    if ( v5 < 0 || v5 >= v4 )
      v8 = 0;
    else
      v8 = *((_DWORD *)this + v5 + 55);
    dword_65A6062C = a2;
    LOBYTE(a2) = 0;
    v6 = this + 220;
    if ( a3 )
      IntroSort_Ascending(this + 220, this + 4 * *((_DWORD *)this + 555) + 220, (4 * *((_DWORD *)this + 555)) >> 2, a2);
    else
      IntroSort_Descending(this + 220, this + 4 * *((_DWORD *)this + 555) + 220, (4 * *((_DWORD *)this + 555)) >> 2, a2);
    if ( v8 )
    {
      v7 = 0;
      if ( *((_DWORD *)this + 555) )
      {
        while ( *v6 != v8 )
        {
          ++v7;
          ++v6;
          if ( v7 >= *((_DWORD *)this + 555) )
            return;
        }
        *((_DWORD *)this + 561) = v7;
      }
    }
  }
}
// 65A6062C: using guessed type int dword_65A6062C;

//----- (6576F5E0) --------------------------------------------------------
unsigned int __usercall CInterfaceMgr_Init@<eax>(int a1@<ecx>, double a2@<st0>, double a3@<st1>, double a4@<st2>)
{
  int v5; // eax
  double v6; // st5
  int v7; // eax
  double v8; // st5
  int v9; // eax
  int v10; // edi
  int v11; // edi
  int v12; // eax
  int v13; // edi
  int v14; // edi
  int v15; // edi
  int v16; // eax
  int v17; // edi
  int v18; // edi
  int v19; // edi
  int v20; // eax
  int v21; // edi
  int v22; // edi
  int v23; // edi
  int v24; // eax
  int v25; // edi
  int v26; // edi
  int v27; // edi
  int v28; // eax
  int v29; // edi
  int v30; // edi
  int v31; // edi
  int v32; // eax
  int v33; // edi
  int v34; // edi
  int v35; // edi
  int v36; // edi
  int v37; // edi
  int v38; // edi
  int v39; // edi
  int v40; // edi
  int v41; // edi
  int v42; // edi
  int v43; // edi
  int v44; // edi
  int v45; // eax
  int v46; // edi
  int v47; // edi
  int v48; // edi
  int v49; // edi
  int v50; // edi
  int v51; // edi
  int v52; // eax
  int v53; // edi
  int v54; // edi
  int v55; // edi
  int v56; // eax
  int v57; // edi
  int v58; // edi
  int v59; // edi
  int v60; // edi
  int v61; // edi
  int v62; // edi
  int v63; // edi
  int v64; // edi
  int v65; // edi
  int v66; // eax
  int v67; // edi
  int v68; // edi
  int v69; // edi
  int v70; // eax
  int v71; // edi
  int v72; // edi
  int v73; // edi
  int v74; // eax
  int v75; // edi
  int v76; // edi
  int v77; // edi
  int v78; // edi
  int v79; // edi
  int v80; // edi
  int v81; // edi
  int v82; // edi
  int v83; // edi
  int v84; // edi
  int v85; // edi
  int v86; // edi
  int v87; // edi
  int v88; // edi
  int v89; // edi
  int v90; // edi
  unsigned int result; // eax
  unsigned int v92; // edi
  int v93; // [esp+10h] [ebp-14h] BYREF
  int v94; // [esp+14h] [ebp-10h]
  int v95; // [esp+18h] [ebp-Ch]
  int v96; // [esp+1Ch] [ebp-8h]
  float var8[2]; // [esp+20h] [ebp-4h] BYREF

  if ( g_pILTClient && (v5 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("ElementOpacity")) != 0 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v5);
  else
    a4 = 90.0;
  var8[0] = a4;
  v6 = var8[0] * 0.009999999776482582;
  *(float *)(a1 + 60) = v6;
  if ( g_pILTClient && (v7 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("TextOpacity")) != 0 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v7);
  else
    v6 = 100.0;
  var8[0] = v6;
  v8 = var8[0] * 0.009999999776482582;
  *(float *)(a1 + 68) = v8;
  if ( g_pILTClient && (v9 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("WindowOpacity")) != 0 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v9);
  else
    v8 = 90.0;
  var8[0] = v8;
  *(float *)(a1 + 64) = var8[0] * 0.009999999776482582;
  v10 = (*(int (__usercall **)@<eax>(const char *, double@<st0>, double@<st1>))(g_pILTClient + 292))(
          "interface\\elements\\button_standard.tga",
          a2,
          a3);
  LODWORD(var8[0]) = v10;
  if ( v10 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v10);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v10, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v11 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\button_dropdown.tga");
  LODWORD(var8[0]) = v11;
  if ( v11 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v11);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v11, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v12 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\scrollbar.tga");
  v13 = v12;
  LODWORD(var8[0]) = v12;
  if ( v12 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v12);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v13, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v14 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\slider.tga");
  LODWORD(var8[0]) = v14;
  if ( v14 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v14);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v14, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v15 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\tabs.tga");
  LODWORD(var8[0]) = v15;
  if ( v15 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v15);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v15, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v16 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\buttons.tga");
  v17 = v16;
  LODWORD(var8[0]) = v16;
  if ( v16 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v16);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v17, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v18 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\buttons_mini.tga");
  LODWORD(var8[0]) = v18;
  if ( v18 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v18);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v18, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v19 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\button_orangebox.tga");
  LODWORD(var8[0]) = v19;
  if ( v19 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v19);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v19, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v20 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\button_crosshair.tga");
  v21 = v20;
  LODWORD(var8[0]) = v20;
  if ( v20 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v20);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v21, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v22 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\button_bluebox.tga");
  LODWORD(var8[0]) = v22;
  if ( v22 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v22);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v22, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v23 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\button_vertical.tga");
  LODWORD(var8[0]) = v23;
  if ( v23 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v23);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v23, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v24 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\button_browser.tga");
  v25 = v24;
  LODWORD(var8[0]) = v24;
  if ( v24 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v24);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v25, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v26 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\button_stars.tga");
  LODWORD(var8[0]) = v26;
  if ( v26 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v26);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v26, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v27 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\buttons_small.tga");
  LODWORD(var8[0]) = v27;
  if ( v27 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v27);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v27, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v28 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\buttons_chat.tga");
  v29 = v28;
  LODWORD(var8[0]) = v28;
  if ( v28 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v28);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v29, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v30 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\processing_elements.tga");
  LODWORD(var8[0]) = v30;
  if ( v30 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v30);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v30, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v31 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\stolen_item.tga");
  LODWORD(var8[0]) = v31;
  if ( v31 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v31);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v31, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v32 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\imgbtn_hack.pcx");
  v33 = v32;
  LODWORD(var8[0]) = v32;
  if ( v32 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v32);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v33, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v34 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\btn_context.pcx");
  LODWORD(var8[0]) = v34;
  if ( v34 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v34);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v34, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 2;
  v96 = 2;
  v35 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v35, &v93, -2137614698);
  LODWORD(var8[0]) = v35;
  if ( v35 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v35);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v35, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 2;
  v96 = 12;
  v36 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 12, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v36, &v93, -2132351258);
  LODWORD(var8[0]) = v36;
  if ( v36 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v36);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v36, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 6;
  v96 = 12;
  v37 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(6, 12, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v37, &v93, -2132351258);
  LODWORD(var8[0]) = v37;
  if ( v37 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v37);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v37, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 3;
  v96 = 14;
  v38 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(3, 14, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v38, &v93, -2132351258);
  LODWORD(var8[0]) = v38;
  if ( v38 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v38);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v38, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 7;
  v96 = 14;
  v39 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(7, 14, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v39, &v93, -2132351258);
  LODWORD(var8[0]) = v39;
  if ( v39 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v39);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v39, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 2;
  v96 = 12;
  v40 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 12, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v40, &v93, -2146167788);
  LODWORD(var8[0]) = v40;
  if ( v40 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v40);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v40, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 6;
  v96 = 12;
  v41 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(6, 12, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v41, &v93, -2146167788);
  LODWORD(var8[0]) = v41;
  if ( v41 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v41);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v41, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 3;
  v96 = 14;
  v42 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(3, 14, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v42, &v93, -2146167788);
  LODWORD(var8[0]) = v42;
  if ( v42 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v42);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v42, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 7;
  v96 = 14;
  v43 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(7, 14, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v43, &v93, -2146167788);
  LODWORD(var8[0]) = v43;
  if ( v43 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v43);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v43, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v44 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\button_square.tga");
  LODWORD(var8[0]) = v44;
  if ( v44 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v44);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v44, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v45 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\checkbox.tga");
  v46 = v45;
  LODWORD(var8[0]) = v45;
  if ( v45 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v45);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v46, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v47 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\checkbox2.tga");
  LODWORD(var8[0]) = v47;
  if ( v47 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v47);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v47, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v48 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\selector_sort.pcx");
  LODWORD(var8[0]) = v48;
  if ( v48 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v48);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v48, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 2;
  v96 = 2;
  v49 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v49, &v93, -2130706433);
  LODWORD(var8[0]) = v49;
  if ( v49 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v49);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v49, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 2;
  v96 = 2;
  v50 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v50, &v93, -2142468353);
  LODWORD(var8[0]) = v50;
  if ( v50 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v50);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v50, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 43;
  v96 = 10;
  v51 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(43, 10, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v51, &v93, -2147417855);
  LODWORD(var8[0]) = v51;
  if ( v51 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v51);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v51, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v52 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\imgbtn_plus.pcx");
  v53 = v52;
  LODWORD(var8[0]) = v52;
  if ( v52 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v52);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v53, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v54 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\imgbtn_minus.pcx");
  LODWORD(var8[0]) = v54;
  if ( v54 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v54);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v54, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v55 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\arrow_up.pcx");
  LODWORD(var8[0]) = v55;
  if ( v55 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v55);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v55, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v56 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\arrow_dn.pcx");
  v57 = v56;
  LODWORD(var8[0]) = v56;
  if ( v56 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v56);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v57, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v58 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\arrow_lt.pcx");
  LODWORD(var8[0]) = v58;
  if ( v58 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v58);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v58, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v59 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\elements\\arrow_rt.pcx");
  LODWORD(var8[0]) = v59;
  if ( v59 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v59);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v59, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 2;
  v96 = 2;
  v60 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v60, &v93, -2142876851);
  LODWORD(var8[0]) = v60;
  if ( v60 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v60);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v60, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 2;
  v96 = 2;
  v61 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v61, &v93, -2143535037);
  LODWORD(var8[0]) = v61;
  if ( v61 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v61);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v61, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v95 = 2;
  v96 = 2;
  v93 = 0;
  v94 = 0;
  v62 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v62, &v93, -2147483448);
  LODWORD(var8[0]) = v62;
  if ( v62 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v62);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v62, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 2;
  v96 = 2;
  v63 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v63, &v93, -2140904218);
  LODWORD(var8[0]) = v63;
  if ( v63 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v63);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v63, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v64 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\layout_images.tga");
  LODWORD(var8[0]) = v64;
  if ( v64 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v64);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v64, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v65 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\hacking_elements.tga");
  LODWORD(var8[0]) = v65;
  if ( v65 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v65);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v65, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v66 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\logos_large.tga");
  v67 = v66;
  LODWORD(var8[0]) = v66;
  if ( v66 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v66);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v67, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v68 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\productionicon.tga");
  LODWORD(var8[0]) = v68;
  if ( v68 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v68);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v68, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v69 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\item_highlight.tga");
  LODWORD(var8[0]) = v69;
  if ( v69 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v69);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v69, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v70 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\territory_level_bar.tga");
  v71 = v70;
  LODWORD(var8[0]) = v70;
  if ( v70 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v70);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v71, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v72 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\territory_level_slider.tga");
  LODWORD(var8[0]) = v72;
  if ( v72 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v72);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v72, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v73 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\vortex_terminal.tga");
  LODWORD(var8[0]) = v73;
  if ( v73 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v73);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v73, *(float *)(a1 + 60));
    CInterfaceMgr_AddTexture((unsigned int *)a1, *(_DWORD *)(a1 + 8), var8);
  }
  v74 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\layout_box.tga");
  v75 = v74;
  LODWORD(var8[0]) = v74;
  if ( v74 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v74);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v75, *(float *)(a1 + 64));
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 20), *(_DWORD *)(a1 + 28), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 1;
  v96 = 1;
  v76 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(1, 1, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v76, &v93, -2139259523);
  LODWORD(var8[0]) = v76;
  if ( v76 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v76);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v76, *(float *)(a1 + 64));
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 20), *(_DWORD *)(a1 + 28), var8);
  }
  v93 = 0;
  v94 = 0;
  v95 = 2;
  v96 = 2;
  v77 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  (*(void (__cdecl **)(int, int *, int))(g_pILTClient + 404))(v77, &v93, -2145705950);
  LODWORD(var8[0]) = v77;
  if ( v77 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v77);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v77, *(float *)(a1 + 64));
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 20), *(_DWORD *)(a1 + 28), var8);
  }
  v78 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\circle.tga");
  LODWORD(var8[0]) = v78;
  if ( v78 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v78);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v78, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  v79 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\square.tga");
  LODWORD(var8[0]) = v79;
  if ( v79 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v79);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v79, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  v80 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\triangle.tga");
  LODWORD(var8[0]) = v80;
  if ( v80 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v80);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v80, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  v81 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\led.tga");
  LODWORD(var8[0]) = v81;
  if ( v81 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v81);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v81, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  v82 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\fdc.tga");
  LODWORD(var8[0]) = v82;
  if ( v82 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v82);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v82, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  v83 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\ae.tga");
  LODWORD(var8[0]) = v83;
  if ( v83 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v83);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v83, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  v84 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\gom.tga");
  LODWORD(var8[0]) = v84;
  if ( v84 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v84);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v84, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  v85 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\bos.tga");
  LODWORD(var8[0]) = v85;
  if ( v85 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v85);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v85, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  v86 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\mob.tga");
  LODWORD(var8[0]) = v86;
  if ( v86 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v86);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v86, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  v87 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\cmg.tga");
  LODWORD(var8[0]) = v87;
  if ( v87 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v87);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v87, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  v88 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\ec.tga");
  LODWORD(var8[0]) = v88;
  if ( v88 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v88);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v88, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  v89 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\vtx.tga");
  LODWORD(var8[0]) = v89;
  if ( v89 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v89);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v89, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  v90 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\ac.tga");
  LODWORD(var8[0]) = v90;
  if ( v90 )
  {
    (*(void (__cdecl **)(int))(g_pILTClient + 272))(v90);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v90, 1.0);
    CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  result = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("interface\\elements\\emblems\\gis.tga");
  v92 = result;
  LODWORD(var8[0]) = result;
  if ( result )
  {
    (*(void (__cdecl **)(unsigned int))(g_pILTClient + 272))(result);
    (*(void (__cdecl **)(unsigned int, _DWORD))(g_pILTClient + 412))(v92, 1.0);
    return CInterfaceMgr_AddTexture((unsigned int *)(a1 + 40), *(_DWORD *)(a1 + 48), var8);
  }
  return result;
}

//----- (65771E50) --------------------------------------------------------
unsigned __int8 __thiscall TextWidget_UpdatePosition(int this, float a2, float a3)
{
  float *DecodedBlob; // eax
  float v5; // eax
  unsigned __int8 result; // al
  float v7; // [esp+4h] [ebp-Ch] BYREF
  float v8; // [esp+8h] [ebp-8h]
  float v9; // [esp+Ch] [ebp-4h]

  DecodedBlob = (float *)StatContainer_GetDecodedBlob((_DWORD *)g_pEncVarMgr, *(_BYTE *)(this + 216));
  v7 = *DecodedBlob;
  v8 = DecodedBlob[1];
  v5 = DecodedBlob[2];
  v7 = a2;
  v9 = v5;
  v8 = a3;
  v9 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  result = StatContainer_GetSlotValue((_DWORD *)g_pEncVarMgr, *(_BYTE *)(this + 216), &v7);
  *(_DWORD *)(this + 196) = 1;
  *(float *)(this + 192) = a2;
  return result;
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65771FA0) --------------------------------------------------------
int __thiscall TextWidget_Initialize(
        int this,
        void *a2,
        void *a3,
        int a4,
        int a5,
        int a6,
        int a7,
        char a8,
        int a9,
        int a10,
        int a11)
{
  int *v12; // ebx
  int v13; // eax
  float *v14; // eax
  float *v15; // eax
  float *v16; // ecx
  int (__thiscall *v17)(float *, _DWORD, int, int, _DWORD, _DWORD, int, char *, int, _DWORD, _DWORD, _DWORD, const char *, _DWORD, _DWORD, _DWORD); // eax
  int v18; // eax
  int v19; // ecx
  _DWORD *v20; // eax
  int v21; // ecx
  int v22; // edx
  _DWORD *v23; // eax
  int v24; // ecx
  int v25; // edx
  _DWORD v27[4]; // [esp+14h] [ebp-1Ch] BYREF
  int v28; // [esp+2Ch] [ebp-4h]

  *(_DWORD *)(this + 176) = a4;
  *(_DWORD *)(this + 8) = a9;
  v12 = (int *)(this + 12);
  *(_DWORD *)(this + 12) = a10;
  *(_BYTE *)(this + 216) = (_BYTE)a2;
  *(_DWORD *)(this + 184) = a5;
  *(_DWORD *)(this + 180) = a6;
  if ( a7 )
  {
    if ( !a6 )
      (*(void (__cdecl **)(int, int, int))(g_pILTClient + 344))(a7, this + 8, this + 12);
    *(_DWORD *)(this + 188) = a7;
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(a7, *(float *)(dword_65A60644 + 60));
    *(_BYTE *)(this + 208) = 0;
  }
  else
  {
    v27[0] = 0;
    v27[1] = 0;
    v27[2] = 2;
    v27[3] = 2;
    v13 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
    *(_DWORD *)(this + 188) = v13;
    if ( v13 )
    {
      (*(void (__cdecl **)(int, _DWORD *, int))(g_pILTClient + 404))(v13, v27, a11);
      (*(void (__cdecl **)(_DWORD, _DWORD))(g_pILTClient + 412))(
        *(_DWORD *)(this + 188),
        *(float *)(dword_65A60644 + 60));
    }
    *(_BYTE *)(this + 208) = 1;
  }
  if ( a8 )
  {
    v14 = (float *)operator new(0x224u);
    v28 = 0;
    if ( v14 )
      v15 = TextInput_Ctor(v14);
    else
      v15 = 0;
    *(_DWORD *)(this + 200) = v15;
    v16 = v15;
    v17 = *(int (__thiscall **)(float *, _DWORD, int, int, _DWORD, _DWORD, int, char *, int, _DWORD, _DWORD, _DWORD, const char *, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v15 + 128);
    v28 = -1;
    v18 = v17(v16, 0, 512, 60, 0, 0, 1, byte_65A5C4A8, 2, 0, 0, 0, "0.0 %", 0, 0, 0);
    v19 = *(_DWORD *)(this + 200);
    if ( v18 )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)v19 + 88))(v19, 1);
      v20 = *(_DWORD **)(this + 200);
      v21 = *v12;
      v20[17] = v20[19] + 5;
      v22 = v20[20];
      v20[21] = 5;
      v21 -= 19;
      v20[22] = v21;
      v20[18] = v21 + v22;
      v23 = *(_DWORD **)(this + 200);
      v24 = *(_DWORD *)(this + 72);
      v23[19] = *(_DWORD *)(this + 68);
      v25 = v23[19] + v23[21];
      v23[20] = v24;
      v23[17] = v25;
      v23[18] = v24 + v23[22];
    }
    else
    {
      if ( v19 )
        (**(void (__thiscall ***)(int, int))v19)(v19, 1);
      *(_DWORD *)(this + 200) = 0;
    }
  }
  *(_DWORD *)(this + 56) = a3;
  *(_DWORD *)(this + 60) = 0;
  *(_DWORD *)(this + 64) = 0;
  return 1;
}
// 65A60644: using guessed type int dword_65A60644;

//----- (657725A0) --------------------------------------------------------
float *__thiscall Slider_Ctor(float *this)
{
  sub_6576C080(this);
  *(this + 60) = 0.0;
  *(this + 44) = 0.0;
  *(this + 45) = 0.0;
  *(this + 47) = 0.0;
  *(this + 48) = 0.0;
  *(this + 49) = 0.0;
  *(this + 51) = 0.0;
  *(this + 52) = 0.0;
  *(this + 53) = 0.0;
  *(this + 54) = 0.0;
  *(this + 55) = 0.0;
  *(this + 56) = 0.0;
  *(this + 57) = 0.0;
  *(this + 58) = 0.0;
  *(_DWORD *)this = &off_659C619C;
  *((_DWORD *)this + 46) = 1;
  *((_DWORD *)this + 50) = 1000;
  *((_BYTE *)this + 244) = 1;
  *((_DWORD *)this + 1) = 13;
  *((_DWORD *)this + 10) = 1;
  return this;
}
// 659C619C: using guessed type void *off_659C619C;

//----- (65772690) --------------------------------------------------------
int __thiscall Slider_ClampValue(_DWORD *this, int a2)
{
  int v2; // esi
  int v3; // edx
  int v4; // eax
  int result; // eax

  v2 = *(this + 46);
  v3 = *(this + 51);
  if ( a2 >= v3 + v2 || a2 <= v3 - v2 )
    *(this + 51) = *(this + 49) + a2 / v2 * v2;
  v4 = *(this + 50);
  if ( *(this + 51) > v4 )
    *(this + 51) = v4;
  result = *(this + 49);
  if ( *(this + 51) < result )
    *(this + 51) = result;
  return result;
}

//----- (65772700) --------------------------------------------------------
int __thiscall Slider_SetTickCount(int *this, int a2)
{
  int result; // eax

  result = a2;
  if ( a2 != *(this + 52) )
  {
    *(this + 52) = a2;
    if ( a2 <= 1 )
      result = *(this + 50);
    else
      result = (int)((double)*(this + 50) / (double)(a2 - 1));
    *(this + 46) = result;
    if ( result <= 0 )
      *(this + 46) = 1;
  }
  return result;
}

//----- (657727A0) --------------------------------------------------------
int __thiscall Slider_ResetToMin(int *this)
{
  int v1; // edx

  v1 = *this;
  *(this + 51) = *(this + 49);
  return (*(int (__stdcall **)(int))(v1 + 92))(1);
}

//----- (65773020) --------------------------------------------------------
int __thiscall UiWidget_InitWithSound(int *this, int __saved_registers, int __return_address, int a4, int a5)
{
  int v6; // edi
  int v8; // eax
  void (__thiscall *v9)(int *, int); // edx

  if ( !a5 )
  {
    if ( *(int *)(dword_65A60644 + 8) > 2 )
    {
      v6 = *(_DWORD *)(*(_DWORD *)(dword_65A60644 + 4) + 8);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v6, *(float *)(dword_65A60644 + 60));
    }
    else
    {
      v6 = 0;
    }
    *(this + 45) = v6;
  }
  if ( !*(this + 45) )
    return 0;
  v8 = *this;
  *(this + 46) = __saved_registers;
  *(this + 59) = __return_address;
  v9 = *(void (__thiscall **)(int *, int))(v8 + 108);
  *(this + 44) = a5;
  *(this + 2) = 15;
  v9(this, a4);
  *(this + 52) = *(this + 50) / *(this + 46);
  return 1;
}
// 65A60644: using guessed type int dword_65A60644;

//----- (657730F0) --------------------------------------------------------
_DWORD *__thiscall ProgressBar_Ctor(_DWORD *this)
{
  sub_6576C080(this);
  *(this + 44) = 0;
  *(this + 45) = 0;
  *(this + 47) = 0;
  *(this + 48) = 0;
  *(this + 50) = 0;
  *((_BYTE *)this + 204) = 0;
  *(this + 52) = 0;
  *this = &off_659C6224;
  *(this + 46) = -1;
  *(this + 49) = 1;
  *(this + 1) = 14;
  *(this + 12) = 2;
  *(this + 10) = 1;
  return this;
}
// 659C6224: using guessed type void *off_659C6224;

//----- (657733E0) --------------------------------------------------------
unsigned int __thiscall ImageWidget_Initialize(_DWORD *this, unsigned int a2, int a3, int a4)
{
  unsigned int result; // eax
  int v6; // eax
  int v7; // edx
  int v8; // eax
  __int64 v9; // rax
  int v10; // eax

  result = a2;
  if ( a2 )
  {
    *(this + 50) = a2;
    if ( a4 )
      *(this + 44) = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, a4);
    v6 = a3;
    v7 = 0;
    *(this + 46) = a3;
    a4 = 0;
    a2 = 0;
    switch ( v6 )
    {
      case 0:
        v8 = UIAssetArray_GetWithAlpha(dword_65A60644, 28);
        *(this + 45) = v8;
        if ( v8 )
          (*(void (__cdecl **)(int, int *, unsigned int *))(g_pILTClient + 344))(v8, &a4, &a2);
        v9 = 2863311531LL * a2;
        goto LABEL_15;
      case 1:
        v10 = UIAssetArray_GetWithAlpha(dword_65A60644, 29);
        goto LABEL_12;
      case 2:
        v10 = UIAssetArray_GetWithAlpha(dword_65A60644, 30);
        *(this + 45) = v10;
        if ( v10 )
          goto LABEL_13;
        goto LABEL_14;
      case 3:
        v10 = UIAssetArray_GetWithAlpha(dword_65A60644, 31);
LABEL_12:
        *(this + 45) = v10;
        if ( v10 )
LABEL_13:
          (*(void (__cdecl **)(int, int *, unsigned int *))(g_pILTClient + 344))(v10, &a4, &a2);
LABEL_14:
        HIDWORD(v9) = a2;
LABEL_15:
        v7 = HIDWORD(v9) >> 1;
        break;
      default:
        break;
    }
    *(this + 2) = a4;
    *(this + 3) = v7;
    return 1;
  }
  return result;
}
// 65A60644: using guessed type int dword_65A60644;

//----- (65773630) --------------------------------------------------------
int __thiscall Slider_SetValue(int *this, int a2)
{
  bool v2; // zf
  int v3; // eax
  int result; // eax

  v2 = *(this + 45) == 1;
  v3 = *(this + 47);
  *(this + 49) = a2;
  if ( v2 )
  {
    if ( a2 > v3 )
      *(this + 49) = v3;
    result = *(this + 46);
    if ( *(this + 49) < result )
      *(this + 49) = result;
  }
  else
  {
    if ( a2 < v3 )
      *(this + 49) = v3;
    result = *(this + 46);
    if ( *(this + 49) > result )
      *(this + 49) = result;
  }
  return result;
}

//----- (65773980) --------------------------------------------------------
int __thiscall RangeBar_SetMinMax(int *this, int a2, int a3)
{
  *(this + 46) = a2;
  *(this + 47) = a3;
  if ( a3 < a2 )
    *(this + 45) = 2;
  return Slider_SetValue(this, *(this + 49));
}

//----- (65773D80) --------------------------------------------------------
int __thiscall Checkbox_Initialize(_DWORD *this, int __saved_registers, int __return_address)
{
  int v5; // eax
  int v6; // edi

  if ( !__saved_registers )
    return 0;
  if ( *(int *)(dword_65A60644 + 8) > 3 )
  {
    v6 = *(_DWORD *)(*(_DWORD *)(dword_65A60644 + 4) + 12);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v6, *(float *)(dword_65A60644 + 60));
    v5 = v6;
  }
  else
  {
    v5 = 0;
  }
  *(this + 44) = v5;
  if ( !v5 )
    return 0;
  *(this + 2) = __return_address;
  *(this + 51) = __saved_registers;
  *(this + 48) = __return_address - 11;
  *(this + 3) = 11;
  return 1;
}
// 65A60644: using guessed type int dword_65A60644;

//----- (65774CD0) --------------------------------------------------------
void __thiscall TextLabel_CreateFont(_DWORD *this, int a2, char a3)
{
  int v4; // eax
  int v5; // eax
  _DWORD v6[3]; // [esp+Ch] [ebp-5Ch] BYREF
  char Buffer[4]; // [esp+18h] [ebp-50h] BYREF
  const char *v8; // [esp+1Ch] [ebp-4Ch]
  int v9; // [esp+20h] [ebp-48h]
  const char *v10; // [esp+24h] [ebp-44h]
  int v11; // [esp+28h] [ebp-40h]
  int v12; // [esp+2Ch] [ebp-3Ch]
  int v13; // [esp+30h] [ebp-38h]
  int v14; // [esp+34h] [ebp-34h]
  const char *v15; // [esp+38h] [ebp-30h]
  int v16; // [esp+3Ch] [ebp-2Ch]
  int v17; // [esp+40h] [ebp-28h]
  int v18; // [esp+44h] [ebp-24h]
  const char *v19; // [esp+48h] [ebp-20h]
  int v20; // [esp+4Ch] [ebp-1Ch]
  int v21; // [esp+50h] [ebp-18h]
  int v22; // [esp+54h] [ebp-14h]
  int v23; // [esp+58h] [ebp-10h]
  int v24; // [esp+5Ch] [ebp-Ch]
  int v25; // [esp+60h] [ebp-8h]

  if ( a2 )
  {
    if ( *(this + 46) && !(*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(this + 46)) )
      *(this + 46) = 0;
    v6[2] = 0;
    Buffer[0] = 0;
    v8 = 0;
    v9 = 0;
    v10 = 0;
    v11 = 0;
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    v17 = 0;
    v18 = 0;
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v22 = 0;
    v23 = 0;
    v24 = 0;
    v25 = 0;
    v6[0] = a2;
    sprintf(Buffer, "%u", 0);
    v15 = "1";
    v10 = "1";
    v8 = "10";
    v6[1] = "FFFFFF00";
    v19 = "0";
    *(this + 46) = (*(int (__cdecl **)(_DWORD *))(g_pILTClient + 304))(v6);
    v4 = v21 - v20;
    *(this + 47) = v21 - v20;
    if ( a3 )
    {
      v5 = v4 - 5;
      if ( v5 <= 20 )
        v5 = 20;
      *(this + 2) = v5 + *(this + 50) + *(this + 51);
    }
  }
}

//----- (65774FD0) --------------------------------------------------------
int __thiscall ComboBox_Initialize(_DWORD *this, int a2, unsigned int __saved_registers, int __return_address)
{
  int v5; // ecx
  bool v6; // cc
  int v7; // edi
  int v8; // eax
  unsigned int v9; // ecx
  int v10; // eax
  int v11; // edi
  int v12; // edx
  int v13; // eax
  int v14; // edx
  int v15; // edx
  int v16; // eax
  char v18; // [esp+4h] [ebp-Ch]

  v5 = __return_address;
  v6 = __return_address <= 0;
  *(this + 53) = __saved_registers;
  *(this + 44) = 0;
  if ( !v6 )
  {
    v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v5);
    if ( v7 )
    {
      v8 = (*(int (__thiscall **)(int, int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7, 1);
      TextLabel_CreateFont(this, v8, v18);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
    }
  }
  v9 = 0;
  __return_address = 0;
  __saved_registers = 0;
  if ( !*(this + 44) )
  {
    if ( *(int *)(dword_65A60644 + 8) > 4 )
    {
      v11 = *(_DWORD *)(*(_DWORD *)(dword_65A60644 + 4) + 16);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v11, *(float *)(dword_65A60644 + 60));
      v10 = v11;
    }
    else
    {
      v10 = 0;
    }
    *(this + 45) = v10;
    if ( v10 )
      (*(void (__cdecl **)(int, int *, unsigned int *))(g_pILTClient + 344))(v10, &__return_address, &__saved_registers);
    v9 = __saved_registers / 3;
    v12 = __return_address;
    __saved_registers /= 3u;
    *(this + 50) = 10;
    *(this + 51) = 10;
    *(this + 52) = v12;
  }
  v13 = *(this + 47) - 5;
  if ( v13 <= 20 )
    v13 = 20;
  v14 = *(this + 50) + *(this + 51);
  *(this + 3) = v9;
  v15 = v13 + v14;
  v16 = *(this + 45);
  *(this + 2) = v15;
  if ( v16 )
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v16, *(float *)(dword_65A60644 + 60));
  *(this + 15) = 0;
  *(this + 16) = 0;
  *(this + 14) = a2;
  return 1;
}
// 6577501A: variable 'v18' is possibly undefined
// 65A60644: using guessed type int dword_65A60644;

//----- (657755D0) --------------------------------------------------------
int __thiscall TextBuffer_GetNextChar(_DWORD *this)
{
  char *v1; // edx
  int result; // eax

  v1 = (char *)*(this + 1);
  if ( (unsigned int)v1 >= *(this + 2) )
    return 0;
  result = *v1;
  *(this + 1) = v1 + 1;
  return result;
}

//----- (657756F0) --------------------------------------------------------
_DWORD *__thiscall ListWidget_CopyState(_DWORD *this, const void *a2)
{
  _DWORD *result; // eax
  bool v3; // zf

  result = this;
  if ( a2 )
  {
    v3 = *(this + 93) == 0;
    qmemcpy(this + 50, a2, 0x6Cu);
    if ( !v3 )
      *(this + 3) = *(this + 51);
    *(this + 74) = *(this + 2);
  }
  return result;
}

//----- (65775FB0) --------------------------------------------------------
int __thiscall Widget_StartAnimation(float *this, float a2)
{
  int (__thiscall *v3)(float *, int); // edx
  float v5; // [esp+4h] [ebp-4h]

  v5 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  v3 = *(int (__thiscall **)(float *, int))(*(_DWORD *)this + 88);
  *(this + 135) = v5;
  *((_DWORD *)this + 133) = 1;
  *(this + 136) = v5 + a2 - 0.5;
  *(this + 134) = 0.0099999998;
  return v3(this, 1);
}

//----- (65776010) --------------------------------------------------------
int __thiscall UiWidget_SetVisible(_DWORD *this, int a2)
{
  if ( *(this + 122) )
  {
    if ( !a2 )
    {
      (*(void (__thiscall **)(_DWORD *))(*this + 136))(this);
LABEL_4:
      *(this + 122) = 0;
      return 0;
    }
  }
  else if ( !a2 )
  {
    goto LABEL_4;
  }
  if ( !*(this + 95) )
    goto LABEL_4;
  *(this + 122) = 1;
  return 1;
}

//----- (65777270) --------------------------------------------------------
int __thiscall TextWidget_UpdateCursor(_DWORD *this)
{
  int result; // eax
  const char *v2; // eax
  signed int v3; // edx
  int v4; // edi
  int v5; // esi
  int v6; // ebx
  int v7; // esi

  result = *(this + 111);
  if ( result && *(_DWORD *)(result + 24) )
  {
    v2 = (const char *)*(this + 44);
    if ( *(this + 93) )
    {
      result = strlen(v2);
      *(this + 115) = result;
    }
    else
    {
      v3 = strlen(v2);
      result = *(this + 115);
      if ( result < v3 )
      {
        if ( result >= 0 )
        {
          v4 = v3;
          if ( result <= v3 )
            v4 = *(this + 115);
        }
        else
        {
          v4 = 0;
        }
        v5 = *(this + 79);
        v6 = *(_DWORD *)(*(_DWORD *)(v5 + 4 * v4) + 16);
        if ( result <= v3 )
        {
          v7 = v5 + 4 * result;
          while ( 1 )
          {
            if ( *(_DWORD *)(*(_DWORD *)v7 + 16) > v6 )
            {
              v4 = result - 1;
              goto LABEL_18;
            }
            if ( result == v3 )
              break;
            ++result;
            v7 += 4;
            if ( result > v3 )
              goto LABEL_18;
          }
          v4 = v3;
        }
LABEL_18:
        if ( v4 >= 0 )
        {
          if ( v4 <= v3 )
            v3 = v4;
          *(this + 115) = v3;
        }
        else
        {
          *(this + 115) = 0;
        }
      }
    }
  }
  return result;
}

//----- (65777540) --------------------------------------------------------
void __thiscall UiText_SetValueIfChanged(int this, char *a2, int a3, char *Source)
{
  char *v4; // esi
  bool v5; // bl
  char *v6; // esi

  v4 = (char *)this;
  if ( a2 )
  {
    if ( !*(_DWORD *)(this + 488) )
      *(_DWORD *)(this + 460) = 0;
    v5 = 0;
    if ( Source )
      v5 = strcmp((const char *)(this + 208), Source) == 0;
    if ( strcmp(*((const char **)v4 + 44), a2) || !v5 || a3 )
    {
      if ( Source )
      {
        v6 = v4 + 208;
        if ( v6 )
        {
          strncpy(v6, Source, 0xFu);
          v6[15] = 0;
        }
        v4 = (char *)this;
      }
      strncpy_s(*((char **)v4 + 44), *((_DWORD *)v4 + 45), a2, 0xFFFFFFFF);
      if ( !sub_65948020(a2) )
        (*(void (__thiscall **)(char *))(*(_DWORD *)v4 + 136))(v4);
      if ( a3 )
        (*(void (__thiscall **)(char *))(*(_DWORD *)v4 + 132))(v4);
      else
        *((_DWORD *)v4 + 94) = 1;
      if ( *((_DWORD *)v4 + 122) )
        TextWidget_UpdateCursor(v4);
    }
  }
}

//----- (65778D60) --------------------------------------------------------
float *__thiscall TextInput_Ctor(float *this)
{
  sub_6576C080(this);
  *(_DWORD *)this = &off_659C6854;
  *(this + 44) = 0.0;
  *(this + 45) = 0.0;
  *(this + 46) = 0.0;
  *(this + 47) = 0.0;
  *(this + 48) = 0.0;
  *(this + 49) = 0.0;
  UiTextStyle_Ctor(this + 50);
  *((_DWORD *)this + 77) = 2;
  *(this + 79) = 0.0;
  *(this + 80) = 0.0;
  *(this + 81) = 0.0;
  *(this + 82) = 0.0;
  *(this + 83) = 0.0;
  *(this + 84) = 0.0;
  *(this + 85) = 0.0;
  *(this + 86) = 0.0;
  *(this + 87) = 0.0;
  *((_DWORD *)this + 94) = 1;
  *((_DWORD *)this + 105) = 1;
  *(this + 88) = 0.0;
  *(this + 89) = 0.0;
  *(this + 90) = 0.0;
  *(this + 91) = 0.0;
  *(this + 92) = 0.0;
  *(this + 93) = 0.0;
  *(this + 95) = 0.0;
  *(this + 96) = 0.0;
  *(this + 97) = 0.0;
  *(this + 98) = NAN;
  *(this + 99) = 0.0;
  *(this + 100) = 0.0;
  *(this + 101) = 0.0;
  *(this + 102) = 0.0;
  *(this + 103) = 0.0;
  *(this + 104) = 0.0;
  *(this + 107) = 0.0;
  *(this + 106) = 0.0;
  *(this + 127) = 1.0;
  *((_DWORD *)this + 129) = 1;
  *(this + 130) = 0.0;
  *((_DWORD *)this + 27) = 1;
  *(this + 131) = 0.0;
  *(this + 108) = 0.0;
  *(this + 132) = 0.0;
  *(this + 109) = 0.0;
  *(this + 134) = 0.0;
  *(this + 110) = 0.0;
  *(this + 135) = 0.0;
  *(this + 111) = 0.0;
  *(this + 136) = 0.0;
  *(this + 112) = 0.0;
  *(this + 113) = 0.0;
  *(this + 114) = 0.0;
  *(this + 115) = 0.0;
  *(this + 116) = 0.0;
  *(this + 117) = 0.0;
  *(this + 118) = 0.0;
  *((_BYTE *)this + 476) = 0;
  *(this + 120) = 0.0;
  *((_BYTE *)this + 484) = 0;
  *(this + 122) = 0.0;
  *(this + 123) = 0.0;
  *(this + 124) = 0.0;
  *(this + 125) = 0.0;
  *(this + 126) = 0.0;
  *(this + 128) = 0.0;
  *(this + 133) = 0.0;
  *((_DWORD *)this + 1) = 18;
  return this;
}
// 659C6854: using guessed type void *off_659C6854;

//----- (65779CF0) --------------------------------------------------------
int __thiscall ListBox_Reset(_DWORD *this)
{
  int result; // eax
  _DWORD *v2; // ecx

  result = 0;
  *(this + 666) = 0;
  *(this + 656) = 0;
  v2 = (_DWORD *)*(this + 663);
  if ( v2 )
    return Slider_ClampValue(v2, 0);
  return result;
}

//----- (65779EB0) --------------------------------------------------------
int *__thiscall Slider_CreateNew(int *this, int a2, int a3)
{
  float *v4; // eax
  int *v5; // esi
  int v7; // edx
  int v8; // eax
  int v9; // ecx
  int v10; // edx
  int v11; // edi

  v4 = (float *)operator new(0xF8u);
  if ( v4 )
    v5 = (int *)Slider_Ctor(v4);
  else
    v5 = 0;
  if ( UiWidget_InitWithSound(v5, a2, a3, *(this + 665), *(this + 664)) )
  {
    v7 = v5[20];
    v8 = *(this + 2) - 16;
    v5[22] = *(this + 668);
    v5[17] = v8 + v5[19];
    v9 = v5[22];
    v5[21] = v8;
    v5[18] = v9 + v7;
    v10 = *(this + 17);
    v11 = *(this + 18);
    v5[19] = v10;
    v5[18] = v9 + v11;
    v5[20] = v11;
    v5[17] = v8 + v10;
    return v5;
  }
  else
  {
    if ( v5 )
      (*(void (__thiscall **)(int *, int))*v5)(v5, 1);
    return 0;
  }
}

//----- (65779FE0) --------------------------------------------------------
int __thiscall sub_65779FE0(int *this, int a2, int a3)
{
  int result; // eax

  result = *(this + 1);
  if ( result )
  {
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 8))(a2, result);
    *(this + 1) = 0;
  }
  *(this + 3) = 0;
  return result;
}

//----- (6577A010) --------------------------------------------------------
int __stdcall sub_6577A010(int a1, int a2, int a3)
{
  return (*(int (__thiscall **)(int, int, int))(*(_DWORD *)a2 + 4))(a2, 4 * a1, a3);
}

//----- (6577A210) --------------------------------------------------------
int __thiscall ListBox_Initialize(int *this, int a2, void *a3, int *a4, int a5, int a6)
{
  int result; // eax
  int v8; // ecx
  int v9; // eax
  int v10; // ecx
  int *New; // eax
  float *v12; // eax
  float *v13; // eax
  int v14; // [esp-8h] [ebp-24h]
  int v15; // [esp-4h] [ebp-20h]

  result = (int)a3;
  if ( a3 )
  {
    *(this + 673) = (int)a3;
    v8 = *a4;
    *(this + 2) = *a4;
    v9 = v8;
    v10 = a4[1];
    *(this + 661) = v9;
    *(this + 3) = v10;
    *(this + 662) = a6;
    *(this + 14) = a2;
    *(this + 15) = 0;
    *(this + 16) = 0;
    *(this + 655) = v10 / a6;
    if ( a5 != -1 )
    {
      *(this + 664) = a5;
      *(this + 665) = v10 + 2;
      *(this + 667) = 20;
      *(this + 668) = -1;
      New = Slider_CreateNew(this, 1, (int)(this + 666));
      *(this + 661) -= *(this + 667);
      *(this + 663) = (int)New;
    }
    if ( !*(this + 672) )
    {
      v12 = (float *)operator new(0xC4u);
      if ( v12 )
        v13 = sub_6576C6E0(v12);
      else
        v13 = 0;
      v15 = *(this + 3) + 2;
      v14 = *(this + 2) - *(this + 667) + 4;
      *(this + 672) = (int)v13;
      Scrollbar_Initialize((int)v13, v14, v15, 0.5);
    }
    return 1;
  }
  return result;
}

//----- (6577A870) --------------------------------------------------------
int __thiscall DynBuffer_Resize(int *this, int a2, int a3, int a4)
{
  int v5; // eax
  int v7; // eax

  v5 = *(this + 2);
  if ( a2 == v5 && a2 )
    return 1;
  if ( *(this + 1) )
    sub_65779FE0(this, a3, v5 + *(this + 3));
  *(this + 2) = a2;
  if ( a2 )
  {
    v7 = sub_6577A010(a2 + *(this + 4), a3, a4);
    *(this + 1) = v7;
    if ( !v7 )
    {
      *(this + 2) = 0;
      *(this + 3) = 0;
      return 0;
    }
    *(this + 3) = *(this + 4);
  }
  return 1;
}

//----- (6577A8F0) --------------------------------------------------------
unsigned int __thiscall DynBuffer_InsertAt(unsigned int *this, unsigned int a2, _DWORD *a3, int a4)
{
  unsigned int v5; // eax
  unsigned int result; // eax
  int v7; // ebx
  unsigned int v8; // eax
  _DWORD *v9; // ecx
  unsigned int v10; // ecx
  _DWORD *v11; // ecx

  v5 = *(this + 2);
  if ( a2 > v5 )
    return 0;
  if ( *(this + 3) )
  {
    for ( ; v5 > a2; *v11 = *(v11 - 1) )
      v11 = (_DWORD *)(*(this + 1) + 4 * v5--);
    --*(this + 3);
    *(_DWORD *)(*(this + 1) + 4 * a2) = *a3;
    ++*(this + 2);
    return 1;
  }
  else
  {
    v7 = sub_6577A010(*(this + 4) + v5 + 1, a4, 0);
    result = 0;
    if ( v7 )
    {
      if ( a2 )
      {
        do
        {
          *(_DWORD *)(v7 + 4 * result) = *(_DWORD *)(*(this + 1) + 4 * result);
          ++result;
        }
        while ( result < a2 );
      }
      v8 = a2;
      if ( a2 < *(this + 2) )
      {
        v9 = (_DWORD *)(v7 + 4 * a2 + 4);
        do
          *v9++ = *(_DWORD *)(*(this + 1) + 4 * v8++);
        while ( v8 < *(this + 2) );
      }
      *(_DWORD *)(v7 + 4 * a2) = *a3;
      if ( *(this + 1) )
        sub_65779FE0((int *)this, a4, *(this + 2) + *(this + 3));
      v10 = *(this + 4);
      *(this + 1) = v7;
      ++*(this + 2);
      *(this + 3) = v10;
      return 1;
    }
  }
  return result;
}

//----- (6577A9E0) --------------------------------------------------------
char *sub_6577A9E0(char *Source, char *a2, ...)
{
  char *result; // eax
  char *v3; // esi
  char *v4; // edi
  char *v5; // ebx
  int v6; // eax
  char *v7; // esi
  char *v8; // [esp+8h] [ebp-8h]
  char *v9; // [esp+Ch] [ebp-4h] BYREF
  va_list va; // [esp+20h] [ebp+10h] BYREF

  va_start(va, a2);
  result = a2;
  v3 = Source;
  if ( Source != a2 )
  {
    v4 = Source + 4;
    if ( Source + 4 != a2 )
    {
      v8 = Source;
      do
      {
        v9 = *(char **)v4;
        v5 = v4;
        if ( (unsigned __int8)sub_6577A0D0(va, &v9, v3) )
        {
          v6 = (int)&v8[4 - (_DWORD)Source] >> 2;
          if ( v6 > 0 )
            memmove_s(&v4[-4 * v6 + 4], 4 * v6, v3, 4 * v6);
          result = v9;
          *(_DWORD *)v3 = v9;
        }
        else
        {
          v7 = v8;
          for ( result = (char *)sub_6577A0D0(va, &v9, v8); (_BYTE)result; result = (char *)sub_6577A0D0(va, &v9, v7) )
          {
            *(_DWORD *)v5 = *(_DWORD *)v7;
            v5 = v7;
            v7 -= 4;
          }
          v3 = Source;
          *(_DWORD *)v5 = v9;
        }
        v8 += 4;
        v4 += 4;
      }
      while ( v4 != a2 );
    }
  }
  return result;
}
// 6577A0D0: using guessed type int __thiscall sub_6577A0D0(_DWORD, _DWORD, _DWORD);

//----- (6577AAB0) --------------------------------------------------------
char *sub_6577AAB0(char *Source, char *a2, ...)
{
  char *result; // eax
  char *v3; // esi
  char *v4; // edi
  char *v5; // ebx
  int v6; // eax
  char *v7; // esi
  char *v8; // [esp+8h] [ebp-8h]
  char *v9; // [esp+Ch] [ebp-4h] BYREF
  va_list va; // [esp+20h] [ebp+10h] BYREF

  va_start(va, a2);
  result = a2;
  v3 = Source;
  if ( Source != a2 )
  {
    v4 = Source + 4;
    if ( Source + 4 != a2 )
    {
      v8 = Source;
      do
      {
        v9 = *(char **)v4;
        v5 = v4;
        if ( (unsigned __int8)sub_6577A170(va, &v9, v3) )
        {
          v6 = (int)&v8[4 - (_DWORD)Source] >> 2;
          if ( v6 > 0 )
            memmove_s(&v4[-4 * v6 + 4], 4 * v6, v3, 4 * v6);
          result = v9;
          *(_DWORD *)v3 = v9;
        }
        else
        {
          v7 = v8;
          for ( result = (char *)sub_6577A170(va, &v9, v8); (_BYTE)result; result = (char *)sub_6577A170(va, &v9, v7) )
          {
            *(_DWORD *)v5 = *(_DWORD *)v7;
            v5 = v7;
            v7 -= 4;
          }
          v3 = Source;
          *(_DWORD *)v5 = v9;
        }
        v8 += 4;
        v4 += 4;
      }
      while ( v4 != a2 );
    }
  }
  return result;
}
// 6577A170: using guessed type int __thiscall sub_6577A170(_DWORD, _DWORD, _DWORD);

//----- (6577AE70) --------------------------------------------------------
unsigned int __thiscall WidgetList_InsertAt(unsigned int *this, unsigned int a1, _DWORD *a2)
{
  return DynBuffer_InsertAt(this, a1, a2, (int)&off_65A560A4);
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (6577AE90) --------------------------------------------------------
BOOL __thiscall WidgetList_RemoveAt(int *this, int a1)
{
  return DynBuffer_Resize(this, a1, (int)&off_65A560A4, 0) != 0;
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (6577B6B0) --------------------------------------------------------
int **__cdecl sub_6577B6B0(int **a1, int *a2, int *a3, int a4)
{
  int *v4; // esi
  int *v5; // ebx
  int *v6; // ecx
  int *v7; // edi
  int *v8; // eax
  int v9; // ecx
  bool v10; // zf
  int *v11; // ebx
  int v12; // eax
  int v13; // eax
  int *v14; // eax
  int *v15; // edx
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v20; // [esp+Ch] [ebp-Ch]
  int *v21; // [esp+10h] [ebp-8h]
  int *v22; // [esp+10h] [ebp-8h]
  int *v23; // [esp+14h] [ebp-4h]

  v4 = &a2[(a3 - a2) / 2];
  sub_6577AEF0(a2, v4, a3 - 1, a4);
  v5 = v4 + 1;
  v23 = v4 + 1;
  if ( a2 < v4 )
  {
    do
    {
      v21 = v4 - 1;
      if ( (unsigned __int8)sub_6577A0D0(&a4, v4 - 1, v4) )
        break;
      if ( (unsigned __int8)sub_6577A0D0(&a4, v4, v21) )
        break;
      --v4;
    }
    while ( a2 < v21 );
  }
  if ( v5 < a3 )
  {
    do
    {
      if ( (unsigned __int8)sub_6577A0D0(&a4, v5, v4) )
        break;
      if ( (unsigned __int8)sub_6577A0D0(&a4, v4, v5) )
        break;
      ++v5;
    }
    while ( v5 < a3 );
    v23 = v5;
  }
  v6 = v4;
  v7 = v5;
  v22 = v4;
  while ( 1 )
  {
    while ( 1 )
    {
      if ( v7 < a3 )
      {
        do
        {
          if ( !(unsigned __int8)sub_6577A0D0(&a4, v4, v7) )
          {
            if ( (unsigned __int8)sub_6577A0D0(&a4, v7, v4) )
              break;
            v8 = v5++;
            if ( v8 != v7 )
            {
              v9 = *v8;
              *v8 = *v7;
              *v7 = v9;
            }
          }
          ++v7;
        }
        while ( v7 < a3 );
        v6 = v22;
        v23 = v5;
      }
      v10 = v6 == a2;
      if ( v6 > a2 )
      {
        v11 = v6 - 1;
        do
        {
          if ( !(unsigned __int8)sub_6577A0D0(&a4, v11, v4) )
          {
            if ( (unsigned __int8)sub_6577A0D0(&a4, v4, v11) )
              break;
            if ( --v4 != v11 )
            {
              v12 = *v4;
              *v4 = *v11;
              *v11 = v12;
            }
          }
          --v11;
          --v22;
        }
        while ( a2 < v22 );
        v6 = v22;
        v5 = v23;
        v10 = v22 == a2;
      }
      if ( v10 )
        break;
      v22 = --v6;
      if ( v7 == a3 )
      {
        if ( v6 != --v4 )
        {
          v16 = *v6;
          *v6 = *v4;
          *v4 = v16;
        }
        v23 = --v5;
        if ( v4 != v5 )
        {
          v17 = *v4;
          *v4 = *v5;
          *v5 = v17;
        }
      }
      else
      {
        if ( v7 != v6 )
        {
          v18 = *v7;
          *v7 = *v6;
          *v6 = v18;
        }
        ++v7;
      }
    }
    if ( v7 == a3 )
      break;
    if ( v5 != v7 && v4 != v5 )
    {
      v13 = *v4;
      *v4 = *v5;
      *v5 = v13;
    }
    v14 = v7;
    v15 = v4;
    ++v5;
    ++v4;
    ++v7;
    v23 = v5;
    if ( v15 != v14 )
    {
      v20 = *v15;
      *v15 = *v14;
      v6 = v22;
      *v14 = v20;
    }
  }
  *a1 = v4;
  a1[1] = v5;
  return a1;
}
// 6577A0D0: using guessed type int __thiscall sub_6577A0D0(_DWORD, _DWORD, _DWORD);
// 6577AEF0: using guessed type int __cdecl sub_6577AEF0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6577B880) --------------------------------------------------------
int **__cdecl sub_6577B880(int **a1, int *a2, int *a3, int a4)
{
  int *v4; // esi
  int *v5; // ebx
  int *v6; // ecx
  int *v7; // edi
  int *v8; // eax
  int v9; // ecx
  bool v10; // zf
  int *v11; // ebx
  int v12; // eax
  int v13; // eax
  int *v14; // eax
  int *v15; // edx
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v20; // [esp+Ch] [ebp-Ch]
  int *v21; // [esp+10h] [ebp-8h]
  int *v22; // [esp+10h] [ebp-8h]
  int *v23; // [esp+14h] [ebp-4h]

  v4 = &a2[(a3 - a2) / 2];
  sub_6577AFA0(a2, v4, a3 - 1, a4);
  v5 = v4 + 1;
  v23 = v4 + 1;
  if ( a2 < v4 )
  {
    do
    {
      v21 = v4 - 1;
      if ( (unsigned __int8)sub_6577A170(&a4, v4 - 1, v4) )
        break;
      if ( (unsigned __int8)sub_6577A170(&a4, v4, v21) )
        break;
      --v4;
    }
    while ( a2 < v21 );
  }
  if ( v5 < a3 )
  {
    do
    {
      if ( (unsigned __int8)sub_6577A170(&a4, v5, v4) )
        break;
      if ( (unsigned __int8)sub_6577A170(&a4, v4, v5) )
        break;
      ++v5;
    }
    while ( v5 < a3 );
    v23 = v5;
  }
  v6 = v4;
  v7 = v5;
  v22 = v4;
  while ( 1 )
  {
    while ( 1 )
    {
      if ( v7 < a3 )
      {
        do
        {
          if ( !(unsigned __int8)sub_6577A170(&a4, v4, v7) )
          {
            if ( (unsigned __int8)sub_6577A170(&a4, v7, v4) )
              break;
            v8 = v5++;
            if ( v8 != v7 )
            {
              v9 = *v8;
              *v8 = *v7;
              *v7 = v9;
            }
          }
          ++v7;
        }
        while ( v7 < a3 );
        v6 = v22;
        v23 = v5;
      }
      v10 = v6 == a2;
      if ( v6 > a2 )
      {
        v11 = v6 - 1;
        do
        {
          if ( !(unsigned __int8)sub_6577A170(&a4, v11, v4) )
          {
            if ( (unsigned __int8)sub_6577A170(&a4, v4, v11) )
              break;
            if ( --v4 != v11 )
            {
              v12 = *v4;
              *v4 = *v11;
              *v11 = v12;
            }
          }
          --v11;
          --v22;
        }
        while ( a2 < v22 );
        v6 = v22;
        v5 = v23;
        v10 = v22 == a2;
      }
      if ( v10 )
        break;
      v22 = --v6;
      if ( v7 == a3 )
      {
        if ( v6 != --v4 )
        {
          v16 = *v6;
          *v6 = *v4;
          *v4 = v16;
        }
        v23 = --v5;
        if ( v4 != v5 )
        {
          v17 = *v4;
          *v4 = *v5;
          *v5 = v17;
        }
      }
      else
      {
        if ( v7 != v6 )
        {
          v18 = *v7;
          *v7 = *v6;
          *v6 = v18;
        }
        ++v7;
      }
    }
    if ( v7 == a3 )
      break;
    if ( v5 != v7 && v4 != v5 )
    {
      v13 = *v4;
      *v4 = *v5;
      *v5 = v13;
    }
    v14 = v7;
    v15 = v4;
    ++v5;
    ++v4;
    ++v7;
    v23 = v5;
    if ( v15 != v14 )
    {
      v20 = *v15;
      *v15 = *v14;
      v6 = v22;
      *v14 = v20;
    }
  }
  *a1 = v4;
  a1[1] = v5;
  return a1;
}
// 6577A170: using guessed type int __thiscall sub_6577A170(_DWORD, _DWORD, _DWORD);
// 6577AFA0: using guessed type int __cdecl sub_6577AFA0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6577BA50) --------------------------------------------------------
int __cdecl sub_6577BA50(int a1, int a2, int a3)
{
  int result; // eax
  int i; // esi
  int v5; // ecx

  result = ((a2 - a1) >> 2) - ((a2 - a1) >> 31);
  for ( i = ((a2 - a1) >> 2) / 2; i > 0; result = sub_6577B050(a1, i, (a2 - a1) >> 2, v5, a3) )
    v5 = *(_DWORD *)(a1 + 4 * i-- - 4);
  return result;
}
// 6577B050: using guessed type int __cdecl sub_6577B050(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (6577BA90) --------------------------------------------------------
int __cdecl sub_6577BA90(int a1, int a2, int a3)
{
  int result; // eax
  int i; // esi
  int v5; // ecx

  result = ((a2 - a1) >> 2) - ((a2 - a1) >> 31);
  for ( i = ((a2 - a1) >> 2) / 2; i > 0; result = sub_6577B0D0(a1, i, (a2 - a1) >> 2, v5, a3) )
    v5 = *(_DWORD *)(a1 + 4 * i-- - 4);
  return result;
}
// 6577B0D0: using guessed type int __cdecl sub_6577B0D0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (6577BB50) --------------------------------------------------------
BOOL __thiscall ListBox_ClearItems(int *this)
{
  int i; // edi
  int v3; // eax
  bool v4; // zf
  void (__thiscall ****v5)(_DWORD, int); // eax
  void (__thiscall ***v6)(_DWORD, int); // eax
  BOOL result; // eax

  for ( i = 0; i < *(this + 46); ++i )
  {
    v3 = *(this + 45);
    v4 = *(_DWORD *)(v3 + 4 * i) == 0;
    v5 = (void (__thiscall ****)(_DWORD, int))(v3 + 4 * i);
    if ( !v4 )
    {
      v6 = *v5;
      if ( v6 )
        (**v6)(v6, 1);
    }
  }
  WidgetList_RemoveAt(this + 44, 0);
  memset(this + 55, 0, 0x960u);
  result = WidgetList_RemoveAt(this + 49, 0);
  *(this + 54) = 0;
  *(this + 656) = 0;
  *(this + 658) = 0;
  *(this + 659) = 0;
  *(this + 660) = 0;
  *(this + 666) = 0;
  *(this + 40) = 0;
  return result;
}

//----- (6577BBE0) --------------------------------------------------------
int __thiscall ListBox_AddItem(unsigned int *this, int a2)
{
  int v2; // edi

  v2 = a2;
  if ( !a2 || (int)*(this + 46) >= 600 )
    return 0;
  *(_DWORD *)(a2 + 8) = *(this + 661);
  *(_DWORD *)(v2 + 12) = *(this + 662);
  WidgetList_InsertAt(this + 44, *(this + 46), &a2);
  *(this + 657) = v2;
  return 1;
}

//----- (6577BC40) --------------------------------------------------------
int __thiscall ChatWindow_AddLine(unsigned int *this, _DWORD *a2)
{
  _DWORD *v2; // esi

  v2 = a2;
  if ( !a2 || (int)*(this + 46) >= 600 )
    return 0;
  a2[2] = *(this + 661) - 20;
  if ( v2[55] )
    v2[3] = (int)*(this + 662) / 2;
  else
    v2[3] = *(this + 662);
  v2[45] = *(this + 657);
  WidgetList_InsertAt(this + 44, *(this + 46), &a2);
  return 1;
}

//----- (6577BF10) --------------------------------------------------------
int __cdecl sub_6577BF10(_DWORD *a1, int a2, int a3)
{
  int v3; // esi
  int result; // eax
  int v5; // [esp-8h] [ebp-10h]

  v3 = a2 - (_DWORD)a1;
  result = (a2 - (int)a1) >> 2;
  if ( result > 1 )
  {
    do
    {
      v5 = *(_DWORD *)((char *)a1 + v3 - 4);
      *(_DWORD *)((char *)a1 + v3 - 4) = *a1;
      sub_6577B050(a1, 0, (v3 - 4) >> 2, v5, a3);
      v3 -= 4;
      result = v3 >> 2;
    }
    while ( v3 >> 2 > 1 );
  }
  return result;
}
// 6577B050: using guessed type int __cdecl sub_6577B050(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (6577BF60) --------------------------------------------------------
int __cdecl sub_6577BF60(_DWORD *a1, int a2, int a3)
{
  int v3; // esi
  int result; // eax
  int v5; // [esp-8h] [ebp-10h]

  v3 = a2 - (_DWORD)a1;
  result = (a2 - (int)a1) >> 2;
  if ( result > 1 )
  {
    do
    {
      v5 = *(_DWORD *)((char *)a1 + v3 - 4);
      *(_DWORD *)((char *)a1 + v3 - 4) = *a1;
      sub_6577B0D0(a1, 0, (v3 - 4) >> 2, v5, a3);
      v3 -= 4;
      result = v3 >> 2;
    }
    while ( v3 >> 2 > 1 );
  }
  return result;
}
// 6577B0D0: using guessed type int __cdecl sub_6577B0D0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (6577C180) --------------------------------------------------------
int __cdecl IntroSort2_Ascending(char *Source, char *a2, int a3, int a4)
{
  char *v4; // ebx
  char *v5; // edi
  int result; // eax
  int v8; // [esp+Ch] [ebp-8h] BYREF
  void *v9; // [esp+10h] [ebp-4h]

  v4 = Source;
  v5 = a2;
  result = (a2 - Source) >> 2;
  if ( result <= 32 )
  {
LABEL_7:
    if ( result > 1 )
      return (int)sub_6577A9E0(v4, v5, a4, 0);
  }
  else
  {
    while ( a3 > 0 )
    {
      sub_6577B6B0((int **)&v8, (int *)v4, (int *)v5, a4);
      a3 = a3 / 2 / 2 + a3 / 2;
      if ( (int)((v8 - (_DWORD)v4) & 0xFFFFFFFC) >= (int)((v5 - (_BYTE *)v9) & 0xFFFFFFFC) )
      {
        IntroSort2_Ascending(v9, (int)v5, a3, a4);
        v5 = (char *)v8;
      }
      else
      {
        IntroSort2_Ascending(v4, v8, a3, a4);
        v4 = (char *)v9;
      }
      result = (v5 - v4) >> 2;
      if ( result <= 32 )
        goto LABEL_7;
    }
    if ( (int)((v5 - v4) & 0xFFFFFFFC) > 4 )
      sub_6577BA50((int)v4, (int)v5, a4);
    return sub_6577BF10(v4, (int)v5, a4);
  }
  return result;
}
// 6577C231: conditional instruction was optimized away because eax.4>=21

//----- (6577C270) --------------------------------------------------------
int __cdecl IntroSort2_Descending(char *Source, char *a2, int a3, int a4)
{
  char *v4; // ebx
  char *v5; // edi
  int result; // eax
  int v8; // [esp+Ch] [ebp-8h] BYREF
  void *v9; // [esp+10h] [ebp-4h]

  v4 = Source;
  v5 = a2;
  result = (a2 - Source) >> 2;
  if ( result <= 32 )
  {
LABEL_7:
    if ( result > 1 )
      return (int)sub_6577AAB0(v4, v5, a4, 0);
  }
  else
  {
    while ( a3 > 0 )
    {
      sub_6577B880((int **)&v8, (int *)v4, (int *)v5, a4);
      a3 = a3 / 2 / 2 + a3 / 2;
      if ( (int)((v8 - (_DWORD)v4) & 0xFFFFFFFC) >= (int)((v5 - (_BYTE *)v9) & 0xFFFFFFFC) )
      {
        IntroSort2_Descending(v9, (int)v5, a3, a4);
        v5 = (char *)v8;
      }
      else
      {
        IntroSort2_Descending(v4, v8, a3, a4);
        v4 = (char *)v9;
      }
      result = (v5 - v4) >> 2;
      if ( result <= 32 )
        goto LABEL_7;
    }
    if ( (int)((v5 - v4) & 0xFFFFFFFC) > 4 )
      sub_6577BA90((int)v4, (int)v5, a4);
    return sub_6577BF60(v4, (int)v5, a4);
  }
  return result;
}
// 6577C321: conditional instruction was optimized away because eax.4>=21

//----- (6577C3C0) --------------------------------------------------------
void __thiscall ChatWindow_SortMessages(int *this)
{
  int v2; // edi
  int v3; // eax
  int *v4; // ecx
  bool v5; // zf
  int *v6; // ebx
  int v7; // esi
  int *v8; // esi
  int v9; // ebx
  int v10; // eax
  int v11; // [esp+4h] [ebp-18h] BYREF
  char v12[4]; // [esp+8h] [ebp-14h]
  unsigned int *v13; // [esp+Ch] [ebp-10h]
  int v14; // [esp+10h] [ebp-Ch] BYREF
  int *v15; // [esp+14h] [ebp-8h]
  int *v16; // [esp+18h] [ebp-4h]

  if ( *(this + 46) > 0 && (unsigned int)*(this + 670) <= 9 )
  {
    dword_65ABC3A0 = *(this + 670);
    v2 = *(this + 51);
    v3 = 0;
    if ( v2 > 0 )
    {
      v4 = this + 55;
      do
        *v4++ = *(_DWORD *)(*(this + 50) + 4 * v3++);
      while ( v3 < v2 );
    }
    v13 = (unsigned int *)(this + 49);
    WidgetList_RemoveAt(this + 49, 0);
    v5 = *(this + 671) == 0;
    v12[0] = 0;
    if ( v5 )
    {
      v16 = this + 55;
      IntroSort2_Descending((char *)this + 220, (char *)this + 4 * v2 + 220, (4 * v2) >> 2, *(int *)v12);
      v6 = this + 55;
    }
    else
    {
      v6 = this + 55;
      v16 = this + 55;
      IntroSort2_Ascending((char *)this + 220, (char *)this + 4 * v2 + 220, (4 * v2) >> 2, *(int *)v12);
    }
    if ( v2 > 0 )
    {
      v15 = v6;
      *(_DWORD *)v12 = v2;
      do
      {
        v7 = *v15;
        v14 = v7;
        if ( v7 )
        {
          if ( !*(_DWORD *)(v7 + 208) )
          {
            WidgetList_InsertAt(v13, v13[2], &v14);
            if ( *(_DWORD *)(v7 + 204) )
            {
              v8 = v6;
              v9 = v2;
              do
              {
                v10 = *v8;
                v11 = v10;
                if ( v10 )
                {
                  if ( *(_DWORD *)(v10 + 180) == v14 )
                    WidgetList_InsertAt(v13, v13[2], &v11);
                }
                ++v8;
                --v9;
              }
              while ( v9 );
              v6 = v16;
            }
          }
        }
        ++v15;
        --*(_DWORD *)v12;
      }
      while ( *(_DWORD *)v12 );
    }
  }
}
// 65ABC3A0: using guessed type int dword_65ABC3A0;

//----- (6577C500) --------------------------------------------------------
int __thiscall ListBox_RefreshDisplay(int *this)
{
  unsigned int *v2; // edi
  int v3; // ebx
  bool v4; // cc
  int v5; // eax
  bool v6; // zf
  _DWORD *v7; // eax
  _DWORD *v8; // ecx
  int *v9; // ecx
  int result; // eax
  int v11; // ecx
  BOOL v12; // [esp+Ch] [ebp-Ch]
  int v13; // [esp+10h] [ebp-8h]
  int v14; // [esp+14h] [ebp-4h]

  v2 = (unsigned int *)(this + 49);
  v3 = 0;
  WidgetList_RemoveAt(this + 49, 0);
  v4 = *(this + 46) <= 0;
  *(this + 54) = 0;
  v14 = 0;
  v13 = 0;
  v12 = 0;
  if ( !v4 )
  {
    do
    {
      v5 = *(this + 45);
      v6 = *(_DWORD *)(v5 + 4 * v3) == 0;
      v7 = (_DWORD *)(v5 + 4 * v3);
      if ( !v6 )
      {
        v8 = (_DWORD *)*v7;
        if ( *(_DWORD *)(*v7 + 208) )
        {
          if ( v12 )
          {
            WidgetList_InsertAt(v2, v2[2], v7);
            v8 = *(_DWORD **)(*(this + 45) + 4 * v3);
            if ( v8[55] )
              ++v13;
            else
              ++v14;
          }
        }
        else
        {
          WidgetList_InsertAt(v2, v2[2], v7);
          v8 = *(_DWORD **)(*(this + 45) + 4 * v3);
          ++v14;
          v12 = v8[51] != 0;
        }
        (*(void (__thiscall **)(_DWORD *, _DWORD))(*v8 + 88))(v8, 0);
      }
      ++v3;
    }
    while ( v3 < *(this + 46) );
  }
  ChatWindow_SortMessages(this);
  v9 = (int *)*(this + 663);
  result = v14 + v13 / 2;
  *(this + 54) = result;
  if ( v9 )
  {
    result = *(this + 51) - *(this + 655) + 1 <= 0
           ? Slider_SetTickCount(v9, 0)
           : Slider_SetTickCount(v9, *(this + 51) - *(this + 655) + 1);
    v11 = *(this + 656);
    if ( v11 )
    {
      result = 0;
      if ( v11 > 0 )
        result = *(_DWORD *)(*(this + 663) + 184) * v11;
      *(this + 666) = result;
    }
  }
  return result;
}

//----- (6577C830) --------------------------------------------------------
int __thiscall Button_Initialize(_DWORD *this, int a2, int a3, int a4, void *a5, void *a6, int a7)
{
  int v8; // eax
  float *v9; // eax
  float *v10; // eax

  *(this + 44) = a5;
  v8 = a6 == 0 ? a7 : 0;
  *(this + 52) = a6;
  *(this + 53) = v8;
  if ( !a6 && v8 )
  {
    v9 = (float *)operator new(0xD8u);
    if ( v9 )
      v10 = sub_6576CC20(v9);
    else
      v10 = 0;
    *(this + 56) = v10;
    Scrollbar_InitFromTable((int)v10, 78, 1.0);
  }
  *(this + 16) = a4;
  *(this + 14) = a2;
  *(this + 15) = a3;
  return 1;
}

//----- (6577C990) --------------------------------------------------------
int __thiscall sub_6577C990(int *this, int a2, int a3)
{
  int result; // eax

  result = *(this + 1);
  if ( result )
  {
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 8))(a2, result);
    *(this + 1) = 0;
  }
  *(this + 3) = 0;
  return result;
}

//----- (6577C9C0) --------------------------------------------------------
int __stdcall sub_6577C9C0(int a1, int a2, int a3)
{
  return (*(int (__thiscall **)(int, int, int))(*(_DWORD *)a2 + 4))(a2, 4 * a1, a3);
}

//----- (6577CF40) --------------------------------------------------------
unsigned int __thiscall DynBuffer2_InsertAt(unsigned int *this, unsigned int a2, _DWORD *a3, int a4)
{
  unsigned int v5; // eax
  unsigned int result; // eax
  int v7; // ebx
  unsigned int v8; // eax
  _DWORD *v9; // ecx
  unsigned int v10; // ecx
  _DWORD *v11; // ecx

  v5 = *(this + 2);
  if ( a2 > v5 )
    return 0;
  if ( *(this + 3) )
  {
    for ( ; v5 > a2; *v11 = *(v11 - 1) )
      v11 = (_DWORD *)(*(this + 1) + 4 * v5--);
    --*(this + 3);
    *(_DWORD *)(*(this + 1) + 4 * a2) = *a3;
    ++*(this + 2);
    return 1;
  }
  else
  {
    v7 = sub_6577C9C0(*(this + 4) + v5 + 1, a4, 0);
    result = 0;
    if ( v7 )
    {
      if ( a2 )
      {
        do
        {
          *(_DWORD *)(v7 + 4 * result) = *(_DWORD *)(*(this + 1) + 4 * result);
          ++result;
        }
        while ( result < a2 );
      }
      v8 = a2;
      if ( a2 < *(this + 2) )
      {
        v9 = (_DWORD *)(v7 + 4 * a2 + 4);
        do
          *v9++ = *(_DWORD *)(*(this + 1) + 4 * v8++);
        while ( v8 < *(this + 2) );
      }
      *(_DWORD *)(v7 + 4 * a2) = *a3;
      if ( *(this + 1) )
        sub_6577C990((int *)this, a4, *(this + 2) + *(this + 3));
      v10 = *(this + 4);
      *(this + 1) = v7;
      ++*(this + 2);
      *(this + 3) = v10;
      return 1;
    }
  }
  return result;
}

//----- (6577D0A0) --------------------------------------------------------
unsigned int __thiscall WidgetArray_InsertAt(unsigned int *this, unsigned int a1, _DWORD *a2)
{
  return DynBuffer2_InsertAt(this, a1, a2, (int)&off_65A560A4);
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (6577D600) --------------------------------------------------------
int __cdecl Button_AddCallbacks(int a1, int a2)
{
  int *v2; // esi
  int v3; // eax
  int v5; // [esp+0h] [ebp-4h] BYREF

  v5 = a2;
  if ( !a2 )
    return 1;
  v2 = &a2;
  do
  {
    if ( *(int *)(a1 + 192) >= 10 )
      break;
    WidgetArray_InsertAt((unsigned int *)(a1 + 184), *(_DWORD *)(a1 + 192), &v5);
    v3 = v2[1];
    ++v2;
    v5 = v3;
  }
  while ( v3 );
  return 1;
}

//----- (6577D8E0) --------------------------------------------------------
int __thiscall Icon_CreateNew(_DWORD *this, int a2, int a3, int a4, int a5)
{
  float *v6; // eax
  float *v7; // eax

  v6 = (float *)operator new(0xCCu);
  if ( v6 )
    v7 = Icon_Ctor(v6);
  else
    v7 = 0;
  *(this + 44) = v7;
  Icon_SetParams(v7, a5, 48, 48);
  *(this + 15) = a3;
  *(this + 14) = a2;
  *(this + 16) = a4;
  return 1;
}

//----- (6577DE60) --------------------------------------------------------
int __cdecl IconBar_AddIcons(int a1, int a2)
{
  int *v2; // esi
  int v3; // eax
  int v5; // [esp+0h] [ebp-4h] BYREF

  v5 = a2;
  if ( !a2 )
    return 1;
  v2 = &a2;
  do
  {
    if ( *(int *)(a1 + 236) >= 15 )
      break;
    WidgetArray_InsertAt((unsigned int *)(a1 + 228), *(_DWORD *)(a1 + 236), &v5);
    v3 = v2[1];
    ++v2;
    v5 = v3;
  }
  while ( v3 );
  return 1;
}

//----- (6577E130) --------------------------------------------------------
float *__thiscall Icon_Ctor(float *this)
{
  sub_6576C080(this);
  *(this + 50) = 1.0;
  *(this + 44) = 0.0;
  *(this + 45) = 0.0;
  *(this + 46) = 0.0;
  *(this + 47) = 0.0;
  *(this + 48) = 0.0;
  *(this + 49) = 0.0;
  *(_DWORD *)this = &off_659C6C24;
  *((_DWORD *)this + 1) = 22;
  return this;
}
// 659C6C24: using guessed type void *off_659C6C24;

//----- (6577E1B0) --------------------------------------------------------
int __thiscall Icon_SetParams(_DWORD *this, int a2, int a3, int a4)
{
  *(this + 44) = a2;
  *(this + 47) = a4;
  *(this + 14) = 0;
  *(this + 15) = 0;
  *(this + 16) = 0;
  *(this + 46) = a3;
  return 1;
}

//----- (6577E360) --------------------------------------------------------
int __thiscall UiWidget_ResetState(_DWORD *this)
{
  int result; // eax
  _DWORD *v2; // ecx

  result = 0;
  *(this + 561) = 0;
  *(this + 554) = 0;
  v2 = (_DWORD *)*(this + 558);
  if ( v2 )
    return Slider_ClampValue(v2, 0);
  return result;
}

//----- (6577E610) --------------------------------------------------------
int __thiscall sub_6577E610(int *this, int a2, int a3)
{
  int result; // eax

  result = *(this + 1);
  if ( result )
  {
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 8))(a2, result);
    *(this + 1) = 0;
  }
  *(this + 3) = 0;
  return result;
}

//----- (6577E640) --------------------------------------------------------
int __stdcall sub_6577E640(int a1, int a2, int a3)
{
  return (*(int (__thiscall **)(int, int, int))(*(_DWORD *)a2 + 4))(a2, 4 * a1, a3);
}

//----- (6577F000) --------------------------------------------------------
int __thiscall DynBuffer3_Resize(int *this, int a2, int a3, int a4)
{
  int v5; // eax
  int v7; // eax

  v5 = *(this + 2);
  if ( a2 == v5 && a2 )
    return 1;
  if ( *(this + 1) )
    sub_6577E610(this, a3, v5 + *(this + 3));
  *(this + 2) = a2;
  if ( a2 )
  {
    v7 = sub_6577E640(a2 + *(this + 4), a3, a4);
    *(this + 1) = v7;
    if ( !v7 )
    {
      *(this + 2) = 0;
      *(this + 3) = 0;
      return 0;
    }
    *(this + 3) = *(this + 4);
  }
  return 1;
}

//----- (6577F080) --------------------------------------------------------
unsigned int __thiscall DynBuffer3_InsertAt(unsigned int *this, unsigned int a2, _DWORD *a3, int a4)
{
  unsigned int v5; // eax
  unsigned int result; // eax
  int v7; // ebx
  unsigned int v8; // eax
  _DWORD *v9; // ecx
  unsigned int v10; // ecx
  _DWORD *v11; // ecx

  v5 = *(this + 2);
  if ( a2 > v5 )
    return 0;
  if ( *(this + 3) )
  {
    for ( ; v5 > a2; *v11 = *(v11 - 1) )
      v11 = (_DWORD *)(*(this + 1) + 4 * v5--);
    --*(this + 3);
    *(_DWORD *)(*(this + 1) + 4 * a2) = *a3;
    ++*(this + 2);
    return 1;
  }
  else
  {
    v7 = sub_6577E640(*(this + 4) + v5 + 1, a4, 0);
    result = 0;
    if ( v7 )
    {
      if ( a2 )
      {
        do
        {
          *(_DWORD *)(v7 + 4 * result) = *(_DWORD *)(*(this + 1) + 4 * result);
          ++result;
        }
        while ( result < a2 );
      }
      v8 = a2;
      if ( a2 < *(this + 2) )
      {
        v9 = (_DWORD *)(v7 + 4 * a2 + 4);
        do
          *v9++ = *(_DWORD *)(*(this + 1) + 4 * v8++);
        while ( v8 < *(this + 2) );
      }
      *(_DWORD *)(v7 + 4 * a2) = *a3;
      if ( *(this + 1) )
        sub_6577E610((int *)this, a4, *(this + 2) + *(this + 3));
      v10 = *(this + 4);
      *(this + 1) = v7;
      ++*(this + 2);
      *(this + 3) = v10;
      return 1;
    }
  }
  return result;
}

//----- (6577F600) --------------------------------------------------------
unsigned int __thiscall ItemList_InsertAt(unsigned int *this, unsigned int a1, _DWORD *a2)
{
  return DynBuffer3_InsertAt(this, a1, a2, (int)&off_65A560A4);
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (6577F620) --------------------------------------------------------
BOOL __thiscall ItemList_RemoveAt(int *this, int a1)
{
  return DynBuffer3_Resize(this, a1, (int)&off_65A560A4, 0) != 0;
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (657802E0) --------------------------------------------------------
int __thiscall ItemList_ClearAll(int *this)
{
  int i; // edi
  int v3; // eax
  bool v4; // zf
  void (__thiscall ****v5)(_DWORD, int); // eax
  void (__thiscall ***v6)(_DWORD, int); // eax

  for ( i = 0; i < *(this + 46); ++i )
  {
    v3 = *(this + 45);
    v4 = *(_DWORD *)(v3 + 4 * i) == 0;
    v5 = (void (__thiscall ****)(_DWORD, int))(v3 + 4 * i);
    if ( !v4 )
    {
      v6 = *v5;
      if ( v6 )
        (**v6)(v6, 1);
      *(_DWORD *)(*(this + 45) + 4 * i) = 0;
    }
  }
  ItemList_RemoveAt(this + 44, 0);
  memset(this + 49, 0, 0x7D0u);
  *(this + 554) = 0;
  *(this + 555) = 0;
  *(this + 556) = 0;
  *(this + 557) = 0;
  *(this + 561) = 0;
  *(this + 40) = 0;
  return 0;
}

//----- (65780370) --------------------------------------------------------
int __thiscall ItemList_AddItem(unsigned int *this, int a2)
{
  int v2; // eax
  int *v5; // ecx
  int v6; // edi
  int v7; // eax

  v2 = a2;
  if ( !a2 || (int)*(this + 46) >= 500 )
    return 0;
  *(_DWORD *)(a2 + 8) = *(this + 552);
  *(_DWORD *)(v2 + 12) = *(this + 553);
  ItemList_InsertAt(this + 44, *(this + 46), &a2);
  v5 = (int *)*(this + 558);
  if ( v5 )
  {
    v6 = *(this + 551);
    v7 = (int)*(this + 46) / v6 - *(this + 550) + 1;
    if ( (int)*(this + 46) % v6 > 0 )
      v7 = (int)*(this + 46) / v6 - *(this + 550) + 2;
    if ( v7 > 0 )
    {
      Slider_SetTickCount(v5, v7);
      return 1;
    }
    Slider_SetTickCount(v5, 0);
  }
  return 1;
}

//----- (657817A0) --------------------------------------------------------
int __thiscall sub_657817A0(int *this)
{
  int result; // eax

  result = *(this + 1);
  *this = (int)&off_659C6F10;
  if ( result )
  {
    result = (*(int (__cdecl **)(int))(g_pILTClient + 316))(result);
    if ( !result )
      *(this + 1) = 0;
  }
  return result;
}
// 659C6F10: using guessed type void *off_659C6F10;

//----- (65782590) --------------------------------------------------------
_DWORD *__cdecl Array24_Copy(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 6 )
  {
    result[1] = v3[1];
    result[2] = v3[2];
    result[3] = v3[3];
    result[4] = v3[4];
    result[5] = v3[5];
    v3 += 6;
  }
  return result;
}

//----- (65782830) --------------------------------------------------------
_WORD *__thiscall UiProgressBar_Ctor(_WORD *this)
{
  *(_DWORD *)this = &off_659C6F10;
  *(this + 8) = 0;
  *(this + 9) = 0;
  *((_DWORD *)this + 5) = 0;
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  return this;
}
// 659C6F10: using guessed type void *off_659C6F10;

//----- (65782E00) --------------------------------------------------------
_DWORD *__thiscall Vector_Resize(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  _DWORD *result; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // edi
  _DWORD *v8; // ebx
  _DWORD *i; // esi

  result = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v6 = Array24_Copy(a4, (_DWORD *)*(this + 2), a3);
    v7 = (_DWORD *)*(this + 2);
    v8 = v6;
    for ( i = v6; i != v7; i += 6 )
      (*(void (__thiscall **)(_DWORD *, _DWORD))*i)(i, 0);
    *(this + 2) = v8;
    return a2;
  }
  return result;
}

//----- (65782FA0) --------------------------------------------------------
void __thiscall sub_65782FA0(int this, int a2, unsigned int a3, int a4)
{
  int v5; // ecx
  int v6; // ebx
  int v7; // eax
  unsigned int v8; // eax
  unsigned int v9; // edx
  unsigned int v10; // ecx
  void *v11; // eax
  int v12; // ecx
  int v13; // eax
  int v14; // eax
  int v15; // ebx
  unsigned int v16; // edi
  char *v17; // eax
  int v18; // ebx
  int v19; // [esp+0h] [ebp-48h] BYREF
  int v20[6]; // [esp+10h] [ebp-38h] BYREF
  int v21; // [esp+28h] [ebp-20h]
  int v22; // [esp+2Ch] [ebp-1Ch]
  void *v23; // [esp+30h] [ebp-18h]
  unsigned int v24; // [esp+34h] [ebp-14h]
  int *v25; // [esp+38h] [ebp-10h]
  int v26; // [esp+44h] [ebp-4h]

  v25 = &v19;
  v22 = this;
  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v24 = (*(_DWORD *)(this + 12) - v5) / 24;
  else
    v24 = 0;
  if ( a3 )
  {
    v6 = *(_DWORD *)(this + 8);
    v7 = (v6 - v5) / 24;
    if ( 178956970 - v7 < a3 )
      v7 = sub_65781A10();
    v8 = a3 + v7;
    if ( v24 >= v8 )
    {
      sub_65781B70(v20, a4);
      if ( (v6 - a2) / 24 >= a3 )
      {
        v26 = 5;
        *(_DWORD *)(this + 8) = sub_65782EE0(this, v6 - 24 * a3, v6, v6);
        sub_657829C0(a2, v6 - 24 * a3, v6);
        sub_657825D0(a2, a2 + 24 * a3, v20);
      }
      else
      {
        v26 = 2;
        sub_65782EE0(this, a2, v6, a2 + 24 * a3);
        v18 = *(_DWORD *)(this + 8);
        LOBYTE(v26) = 3;
        sub_65782D60(this, v18, a3 - (v18 - a2) / 24, v20);
        *(_DWORD *)(this + 8) += 24 * a3;
        sub_657825D0(a2, *(_DWORD *)(this + 8) - 24 * a3, v20);
      }
      v26 = -1;
      sub_657817A0(v20);
    }
    else
    {
      v9 = v24 >> 1;
      if ( 178956970 - (v24 >> 1) >= v24 )
      {
        v10 = v9 + v24;
        v24 += v9;
      }
      else
      {
        v24 = 0;
        v10 = 0;
      }
      if ( v10 < v8 )
      {
        v24 = v8;
        v10 = v8;
      }
      v11 = (void *)sub_65781C60(v10, 0, v19);
      v12 = *(_DWORD *)(this + 4);
      LOBYTE(v21) = 0;
      v23 = v11;
      v26 = 0;
      v13 = sub_65782740(v12, a2, v11, this, a2, v21);
      v14 = sub_65782D60(this, v13, a3, a4);
      LOBYTE(a4) = 0;
      sub_65782740(a2, *(_DWORD *)(this + 8), v14, this, a2, a4);
      v15 = *(_DWORD *)(this + 4);
      v16 = (*(_DWORD *)(this + 8) - v15) / 24 + a3;
      v26 = -1;
      if ( v15 )
      {
        sub_65782D20(v15, *(_DWORD *)(this + 8));
        operator delete(*(void **)(this + 4));
      }
      v17 = (char *)v23;
      *(_DWORD *)(this + 12) = (char *)v23 + 24 * v24;
      *(_DWORD *)(this + 8) = &v17[24 * v16];
      *(_DWORD *)(this + 4) = v17;
    }
  }
}
// 65781A10: using guessed type int sub_65781A10(void);
// 65781B70: using guessed type int __thiscall sub_65781B70(_DWORD, _DWORD);
// 65781C60: using guessed type int __stdcall sub_65781C60(_DWORD, _DWORD, _DWORD);
// 657825D0: using guessed type int __cdecl sub_657825D0(_DWORD, _DWORD, _DWORD);
// 65782740: using guessed type int __cdecl sub_65782740(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 657829C0: using guessed type int __cdecl sub_657829C0(_DWORD, _DWORD, _DWORD);
// 65782D20: using guessed type int __cdecl sub_65782D20(_DWORD, _DWORD);
// 65782D60: using guessed type int __thiscall sub_65782D60(_DWORD, _DWORD, _DWORD, _DWORD);
// 65782EE0: using guessed type int __thiscall sub_65782EE0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65783720) --------------------------------------------------------
_DWORD *__thiscall StatusList_Resize(int *this)
{
  int *v2; // [esp+0h] [ebp-4h] BYREF

  v2 = this;
  return Vector_Resize(this + 1602, &v2, (_DWORD *)*(this + 1603), (_DWORD *)*(this + 1604));
}

//----- (65783750) --------------------------------------------------------
int __thiscall Vector24_ResizeWithDefault(int *this, unsigned int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  _DWORD *v8; // esi
  int v9; // edi
  unsigned int v10; // eax

  v8 = (_DWORD *)*(this + 2);
  v9 = *(this + 1);
  v10 = ((int)v8 - v9) / 24;
  if ( a2 <= v10 )
  {
    if ( a2 < v10 )
      Vector_Resize(this, &a2, (_DWORD *)(v9 + 24 * a2), v8);
  }
  else
  {
    sub_65782FA0((int)this, (int)v8, a2 - v10, (int)&a3);
  }
  return sub_657817A0(&a3);
}

//----- (65784B10) --------------------------------------------------------
unsigned int __thiscall StatusBar_UpdateDisplay(int *this, int __return_address)
{
  _DWORD *v3; // edx
  unsigned int v4; // esi
  int v5; // ecx
  unsigned int v6; // edx
  unsigned int result; // eax
  int v8; // esi
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int *v13; // ecx
  int v14[5]; // [esp-14h] [ebp-B4h] BYREF
  _DWORD *v15; // [esp+0h] [ebp-A0h]
  __int64 v16; // [esp+10h] [ebp-90h]
  unsigned int v17; // [esp+18h] [ebp-88h]
  int v18; // [esp+1Ch] [ebp-84h]
  int *v19; // [esp+20h] [ebp-80h] BYREF
  float v20; // [esp+28h] [ebp-78h]
  _DWORD v21[3]; // [esp+2Ch] [ebp-74h] BYREF
  char v22[4]; // [esp+38h] [ebp-68h] BYREF
  char *v23; // [esp+3Ch] [ebp-64h]
  int v24; // [esp+40h] [ebp-60h]
  const char *v25; // [esp+44h] [ebp-5Ch]
  int v26; // [esp+48h] [ebp-58h]
  int v27; // [esp+4Ch] [ebp-54h]
  int v28; // [esp+50h] [ebp-50h]
  int v29; // [esp+54h] [ebp-4Ch]
  const char *v30; // [esp+58h] [ebp-48h]
  int v31; // [esp+5Ch] [ebp-44h]
  const char *v32; // [esp+60h] [ebp-40h]
  const char *v33; // [esp+64h] [ebp-3Ch]
  int v34; // [esp+68h] [ebp-38h]
  int v35; // [esp+6Ch] [ebp-34h]
  int v36; // [esp+70h] [ebp-30h]
  int v37; // [esp+74h] [ebp-2Ch]
  int v38; // [esp+78h] [ebp-28h]
  int v39; // [esp+7Ch] [ebp-24h]
  int v40; // [esp+80h] [ebp-20h]
  char v41[4]; // [esp+84h] [ebp-1Ch] BYREF
  char v42[4]; // [esp+90h] [ebp-10h] BYREF

  v18 = __return_address;
  LODWORD(v20) = 32;
  if ( *(this + 1593) )
  {
    v20 = (double)*(int *)(*(this + 1593) + 8)
        / (double)(*(_DWORD *)(*(this + 1593) + 16) - *(_DWORD *)(*(this + 1593) + 8))
        + 1.0;
    v20 = v20 * 32.0;
    v20 = COERCE_FLOAT(sub_65947CD0(v20));
    sprintf(v42, "%u", v20);
  }
  v21[0] = 0;
  v21[2] = 0;
  v22[0] = 0;
  v23 = 0;
  v24 = 0;
  v25 = 0;
  v26 = 0;
  v27 = 0;
  v28 = 0;
  v29 = 0;
  v30 = 0;
  v31 = 0;
  v32 = 0;
  v33 = 0;
  v34 = 0;
  v35 = 0;
  v36 = 0;
  v37 = 0;
  v38 = 0;
  v39 = 0;
  v40 = 0;
  v21[1] = "FFFFFF00";
  sprintf(v22, "%u", 0);
  v3 = (_DWORD *)*(this + 1603);
  v23 = v42;
  v30 = "1";
  v25 = "1";
  v15 = (_DWORD *)*(this + 1604);
  v32 = "600";
  v33 = "100";
  Vector_Resize(this + 1602, &v19, v3, v15);
  v4 = (*(_DWORD *)(__return_address + 8) - *(_DWORD *)(v18 + 4)) >> 3;
  v19 = v14;
  UiProgressBar_Ctor(v14);
  Vector24_ResizeWithDefault(this + 1602, v4, v14[0], v14[1], v14[2], v14[3], v14[4], (int)v15);
  v5 = *(_DWORD *)(v18 + 4);
  v6 = 0;
  result = (*(_DWORD *)(v18 + 8) - v5) >> 3;
  v17 = 0;
  if ( result )
  {
    v8 = 0;
    do
    {
      v9 = v5 + 8 * v6;
      v19 = (int *)v9;
      if ( v9 )
      {
        v16 = (__int64)((double)*(unsigned int *)(v9 + 4) / 100000.0 * 100.0);
        sprintf(v41, "%u%%", (_DWORD)v16);
        HIDWORD(v16) = v8 + *(this + 1603);
        v21[0] = v41;
        v10 = (*(int (__cdecl **)(_DWORD *))(g_pILTClient + 304))(v21);
        *(_DWORD *)(HIDWORD(v16) + 4) = v10;
        v11 = *(this + 1603);
        if ( *(_DWORD *)(v11 + v8 + 4) )
        {
          *(_DWORD *)(v11 + v8 + 8) = (v36 - v35) / 2;
          v12 = *(this + 1603);
          v13 = v19;
          *(_DWORD *)(v12 + v8 + 16) = *v19;
          *(_DWORD *)(v12 + v8 + 20) = v13[1];
          *(float *)(*(this + 1603) + v8 + 12) = v20;
        }
        v6 = v17;
      }
      v5 = *(_DWORD *)(v18 + 4);
      ++v6;
      result = (*(_DWORD *)(v18 + 8) - v5) >> 3;
      v8 += 24;
      v17 = v6;
    }
    while ( v6 < result );
  }
  return result;
}
// 65784C72: conditional instruction was optimized away because eax.4!=0

//----- (657850A0) --------------------------------------------------------
void __cdecl SharedMem2BD3_WriteString(char *a1)
{
  if ( a1 )
    SharedMem_WriteString_std(11219, a1);
  JUMPOUT(0x657850B9);
}
// 657850B8: control flows out of bounds to 657850B9

//----- (657850C0) --------------------------------------------------------
void __stdcall SharedMem2BD0_ReadBlock12(void *a1)
{
  SharedMem_ReadBlock_std(11216, a1, (WorldLoginReturnAddrPacked)12);
  JUMPOUT(0x657850D7);
}
// 657850D6: control flows out of bounds to 657850D7

//----- (657850E0) --------------------------------------------------------
void __stdcall SharedMem2BD0_WriteBlock12(void *Src)
{
  SharedMem_WriteBlock_std(11216, Src, (WorldLoginReturnAddrPacked)12);
  JUMPOUT(0x657850F7);
}
// 657850F6: control flows out of bounds to 657850F7

//----- (657853A0) --------------------------------------------------------
void __thiscall CharacterData_Dtor(_DWORD *this)
{
  `eh vector destructor iterator'(this + 261, 0x1Cu, 8, std::string::~string);
  `eh vector destructor iterator'(this + 37, 0x1Cu, 32, std::string::~string);
  std::string::~string(this + 30);
  *this = &off_659C0D14;
}
// 65985B4A: using guessed type void __stdcall `eh vector destructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *));
// 659C0D14: using guessed type void *off_659C0D14;

//----- (65785C90) --------------------------------------------------------
float *__thiscall CharacterModel_Ctor(float *this)
{
  *(this + 1) = 0.0;
  *(_DWORD *)this = &off_659C8884;
  *(this + 2) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 1.0;
  std::string::string(this + 30);
  `eh vector constructor iterator'(this + 37, 0x1Cu, 32, std::string::string, std::string::~string);
  `eh vector constructor iterator'(this + 261, 0x1Cu, 8, std::string::string, std::string::~string);
  *(this + 24) = 0.0;
  *(this + 317) = 0.0;
  *(this + 25) = 0.0;
  *(this + 318) = 0.0;
  *(this + 26) = 0.0;
  *(this + 319) = 0.0;
  *(this + 27) = 0.0;
  *(this + 320) = 0.0;
  *(this + 321) = 0.0;
  *(this + 28) = 1.0;
  *(this + 322) = 0.0;
  *(this + 29) = 1.0;
  *(this + 323) = 0.0;
  *(this + 324) = 0.0;
  *(this + 326) = 0.0;
  *((_BYTE *)this + 1300) = 0;
  *((_BYTE *)this + 1301) = 3;
  *(this + 2) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 1.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *(this + 11) = 0.0;
  *(this + 12) = 0.0;
  *(this + 13) = 0.0;
  *(this + 14) = 0.0;
  *(this + 15) = 0.0;
  *(this + 16) = 0.0;
  *(this + 17) = 0.0;
  *(this + 18) = -1.0;
  *(this + 19) = -1.0;
  *(this + 20) = -1.0;
  *(this + 21) = -1.0;
  *(this + 22) = -1.0;
  *(this + 23) = -1.0;
  *(this + 327) = 0.0;
  *(this + 329) = 1.0;
  *(this + 328) = 0.0;
  *(this + 330) = 1.0;
  return this;
}
// 65985BAD: using guessed type void __stdcall `eh vector constructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *), void (__thiscall *)(void *));
// 659C8884: using guessed type void *off_659C8884;

//----- (65785E50) --------------------------------------------------------
_DWORD *__cdecl Array_FillValue(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; ++result )
    *result = *a3;
  return result;
}

//----- (65785F90) --------------------------------------------------------
float *__thiscall CharacterModel2_Ctor(float *this)
{
  *(this + 12) = 0.001;
  *(this + 11) = 0.0;
  *(this + 2) = 0.0;
  *(this + 1) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *((_BYTE *)this + 52) = 0;
  *(_DWORD *)this = &off_659C8894;
  *(this + 14) = 0.0;
  *(this + 15) = 0.0;
  *(this + 16) = 0.0;
  *(this + 17) = 1.0;
  std::string::string(this + 43);
  `eh vector constructor iterator'(this + 50, 0x1Cu, 32, std::string::string, std::string::~string);
  `eh vector constructor iterator'(this + 274, 0x1Cu, 8, std::string::string, std::string::~string);
  *(this + 341) = 0.0;
  *(this + 342) = 0.0;
  *(this + 343) = 0.0;
  *(this + 344) = 0.0;
  *(this + 345) = 0.0;
  *(this + 346) = 0.0;
  *(this + 347) = 0.0;
  *(this + 348) = 0.0;
  *(this + 349) = 0.0;
  *(this + 350) = 0.0;
  *(this + 351) = 0.0;
  *(this + 352) = 0.0;
  *(this + 353) = 0.0;
  *(this + 354) = 1.0;
  *(this + 358) = 1.0;
  *(this + 355) = 0.0;
  *(this + 356) = 0.0;
  *(this + 357) = 0.0;
  *(this + 14) = 0.0;
  *(this + 15) = 0.0;
  *(this + 16) = 0.0;
  *(this + 17) = 1.0;
  *(this + 18) = 0.0;
  *(this + 19) = 0.0;
  *(this + 20) = 0.0;
  *(this + 21) = 0.0;
  *(this + 22) = 0.0;
  *(this + 23) = 0.0;
  *(this + 24) = 1.0;
  *(this + 25) = 1.0;
  *(this + 26) = 1.0;
  *(this + 27) = 1.0;
  *(this + 28) = 1.0;
  *(this + 29) = 1.0;
  *(this + 30) = 1.0;
  *(this + 31) = 1.0;
  *(this + 32) = 1.0;
  *(this + 33) = 1.0;
  *(this + 34) = 1.0;
  *(this + 35) = 1.0;
  *((_WORD *)this + 675) = 0;
  *(this + 36) = 1.0;
  *(this + 330) = 0.0;
  *(this + 37) = 1.0;
  *(this + 332) = 0.0;
  *(this + 39) = 1.0;
  *(this + 333) = 0.0;
  *(this + 40) = 1.0;
  *(this + 334) = 0.0;
  *(this + 41) = 1.0;
  *(this + 335) = 0.0;
  *(this + 336) = 0.0;
  *(this + 338) = 0.0;
  *((_BYTE *)this + 1348) = 0;
  *(this + 38) = 0.0;
  *(this + 339) = 0.0;
  *(this + 340) = 0.0;
  *(this + 355) = 0.0;
  *(this + 356) = 0.0;
  *(this + 357) = 0.0;
  *(this + 358) = 1.0;
  *((_BYTE *)this + 1436) = 0;
  *(this + 362) = 1.0;
  *((_BYTE *)this + 1437) = 1;
  *(this + 363) = 1.0;
  *(this + 331) = 0.0;
  *(this + 364) = 1.0;
  *(this + 360) = 0.0;
  *(this + 361) = 0.0;
  *(this + 42) = 0.0;
  return this;
}
// 65985BAD: using guessed type void __stdcall `eh vector constructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *), void (__thiscall *)(void *));
// 659C8894: using guessed type void *off_659C8894;

//----- (657862C0) --------------------------------------------------------
char *__thiscall CharacterPanel_Ctor(char *this)
{
  sub_65747EB0(this);
  *(_DWORD *)this = &off_659C88EC;
  *((_DWORD *)this + 1594) = 0;
  *((_DWORD *)this + 1595) = 0;
  *((_DWORD *)this + 1596) = 0;
  *((_DWORD *)this + 1597) = 0;
  *((_DWORD *)this + 1598) = 0;
  *((_DWORD *)this + 1599) = 0;
  *((_DWORD *)this + 1600) = 0;
  *((_DWORD *)this + 1601) = 0;
  *((_DWORD *)this + 1602) = 0;
  *((_DWORD *)this + 1603) = 0;
  *((_DWORD *)this + 1604) = 0;
  *((_DWORD *)this + 1605) = 0;
  *(this + 6424) = 0;
  *((_DWORD *)this + 1608) = 0;
  *((_DWORD *)this + 1609) = 0;
  CharacterModel2_Ctor((float *)this + 1612);
  *((_WORD *)this + 3192) = 0;
  *((_WORD *)this + 3190) = 5;
  *((_WORD *)this + 3189) = 0;
  *((_WORD *)this + 3196) = 0;
  *((_WORD *)this + 3188) = 0;
  *((_WORD *)this + 3191) = 0;
  *((_WORD *)this + 3197) = 0;
  *((_WORD *)this + 3198) = 0;
  sub_659579A0((_WORD *)this + 3188);
  *((float *)this + 1607) = 0.0;
  *((float *)this + 1610) = 1.0;
  *((_DWORD *)this + 1592) = 0;
  *((float *)this + 1611) = 1.0;
  *((_DWORD *)this + 1593) = 0;
  *(this + 6426) = 0;
  *(this + 6427) = 0;
  *((_DWORD *)this + 1608) = 0;
  *((_DWORD *)this + 1609) = 0;
  *(this + 7908) = 0;
  *(this + 7909) = 1;
  *((_DWORD *)this + 1980) = 0;
  *((_DWORD *)this + 1981) = 0;
  *((_DWORD *)this + 1982) = 0;
  *((_DWORD *)this + 1983) = 0;
  *((_DWORD *)this + 1984) = 0;
  *((_DWORD *)this + 1985) = 0;
  *((_DWORD *)this + 1986) = 0;
  *((_DWORD *)this + 1987) = 0;
  *((_DWORD *)this + 1988) = 0;
  *((_DWORD *)this + 1989) = 0;
  *((_DWORD *)this + 1990) = 0;
  *((_DWORD *)this + 1991) = 0;
  *((_DWORD *)this + 1992) = 0;
  *((_DWORD *)this + 1993) = 0;
  *((_DWORD *)this + 1994) = 0;
  *((_DWORD *)this + 1995) = 0;
  *((_DWORD *)this + 1996) = 0;
  *((_DWORD *)this + 1997) = 0;
  *((_DWORD *)this + 1998) = 0;
  *((_DWORD *)this + 1999) = 0;
  *((_DWORD *)this + 2000) = 0;
  *((_DWORD *)this + 1978) = 28;
  *((_DWORD *)this + 1979) = 0;
  GroupWindow_SetBackgroundImage((int)this, 999999999, *(int *)&Data, *(int *)&dword_65A55604);
  return this;
}
// 659C88EC: using guessed type void *off_659C88EC;

//----- (65786750) --------------------------------------------------------
int __cdecl Array_MoveRange(void *Source, int a2, int a3)
{
  int v3; // eax
  int v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = a3 - 4 * v3;
  if ( v3 > 0 )
    memmove_s((void *const)(a3 - 4 * v3), 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65787150) --------------------------------------------------------
char *__stdcall Vector_MoveRange(void *Source, int a2, char *Destination)
{
  int v3; // eax
  char *v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = &Destination[4 * v3];
  if ( v3 )
    memmove_s(Destination, 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65787550) --------------------------------------------------------
_DWORD *__stdcall Array_FillN(_DWORD *a1, int a2, _DWORD *a3)
{
  int v3; // eax
  _DWORD *i; // ecx

  v3 = a2;
  for ( i = a1; v3; ++i )
  {
    *i = *a3;
    --v3;
  }
  return &a1[a2];
}

//----- (65787580) --------------------------------------------------------
void __thiscall Vector_InsertN(int this, char *Source, unsigned int a3, unsigned int a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  int v7; // edi
  char *v8; // ebx
  int v9; // eax
  unsigned int v10; // ecx
  char *v11; // ebx
  char *v12; // eax
  char *v13; // eax
  void *v14; // eax
  int v15; // edi
  int v16; // eax
  unsigned int v17; // eax
  char *v18; // edi
  int v19; // [esp-4h] [ebp-10h]
  int v20; // [esp+0h] [ebp-Ch]
  unsigned int v21; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 2;
  else
    v6 = 0;
  v7 = a3;
  if ( a3 )
  {
    v8 = *(char **)(this + 8);
    v9 = (int)&v8[-v5] >> 2;
    if ( 0x3FFFFFFF - v9 < a3 )
      ThrowLengthError_Vector2(v19, v20);
    if ( v6 >= v9 + a3 )
    {
      if ( (v8 - Source) >> 2 >= a3 )
      {
        v17 = 4 * a3;
        v18 = &v8[-4 * a3];
        a3 = *(_DWORD *)a4;
        a4 = v17;
        *(_DWORD *)(this + 8) = Vector_MoveRange(v18, (int)v8, v8);
        Array_MoveRange(Source, (int)v18, (int)v8);
        Array_FillValue(Source, &Source[a4], &a3);
      }
      else
      {
        a3 = *(_DWORD *)a4;
        a4 = 4 * v7;
        Vector_MoveRange(Source, (int)v8, &Source[4 * v7]);
        Array_FillN(*(_DWORD **)(this + 8), v7 - ((*(_DWORD *)(this + 8) - (int)Source) >> 2), &a3);
        v16 = a4;
        *(_DWORD *)(this + 8) += a4;
        Array_FillValue(Source, (_DWORD *)(*(_DWORD *)(this + 8) - v16), &a3);
      }
    }
    else
    {
      if ( 0x3FFFFFFF - (v6 >> 1) >= v6 )
      {
        v10 = (v6 >> 1) + v6;
        v21 = v10;
      }
      else
      {
        v21 = 0;
        v10 = 0;
      }
      if ( v10 < v9 + a3 )
      {
        v21 = v9 + a3;
        v10 = v9 + a3;
      }
      v11 = (char *)Vector4_Allocate(v10);
      v12 = Vector_MoveRange(*(void **)(this + 4), (int)Source, v11);
      v13 = (char *)Array_FillN(v12, v7, (_DWORD *)a4);
      Vector_MoveRange(Source, *(_DWORD *)(this + 8), v13);
      v14 = *(void **)(this + 4);
      v15 = ((*(_DWORD *)(this + 8) - (int)v14) >> 2) + v7;
      if ( v14 )
        operator delete(v14);
      *(_DWORD *)(this + 4) = v11;
      *(_DWORD *)(this + 12) = &v11[4 * v21];
      *(_DWORD *)(this + 8) = &v11[4 * v15];
    }
  }
}
// 657875BE: variable 'v19' is possibly undefined
// 657875BE: variable 'v20' is possibly undefined

//----- (65787770) --------------------------------------------------------
void __thiscall Vector_PushBackPtr(char **this, _DWORD *a2)
{
  int v2; // esi
  unsigned int v3; // eax
  char *v4; // edx

  v2 = (int)*(this + 1);
  if ( v2 )
    v3 = (int)&(*(this + 3))[-v2] >> 2;
  else
    v3 = 0;
  v4 = *(this + 2);
  if ( (int)&v4[-v2] >> 2 >= v3 )
  {
    Vector_InsertN((int)this, v4, 1u, (unsigned int)a2);
  }
  else
  {
    *(_DWORD *)v4 = *a2;
    *(this + 2) = v4 + 4;
  }
}

//----- (657877C0) --------------------------------------------------------
void __thiscall IntVector_PushN(int **this, int a2, int a3)
{
  int v4; // edi
  int v5; // edx
  unsigned int v6; // eax
  int v7; // ecx

  if ( (_BYTE)a3 )
  {
    v4 = a2;
    a3 = (unsigned __int8)a3;
    do
    {
      v5 = (int)*(this + 1);
      if ( v5 )
        v6 = ((int)*(this + 3) - v5) >> 2;
      else
        v6 = 0;
      v7 = (int)*(this + 2);
      if ( (v7 - v5) >> 2 >= v6 )
      {
        Vector_InsertN((int)this, (char *)v7, 1u, (unsigned int)&a2);
      }
      else
      {
        *(_DWORD *)v7 = v4;
        *(this + 2) = (int *)(v7 + 4);
      }
      --a3;
    }
    while ( a3 );
  }
}

//----- (657892D0) --------------------------------------------------------
int __thiscall LoginPanel_SetMode(int this, char a2)
{
  _DWORD *v3; // eax
  int v4; // eax
  _DWORD *v6; // eax

  v3 = *(_DWORD **)(this + 8904);
  if ( a2 )
  {
    v3[6] = 1;
    v3[50] = 1;
    v3[8] = 1;
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 8912) + 88))(*(_DWORD *)(this + 8912), 1);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 8908) + 88))(*(_DWORD *)(this + 8908), 1);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 8916) + 88))(*(_DWORD *)(this + 8916), 1);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 8932) + 88))(*(_DWORD *)(this + 8932), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 8928) + 88))(*(_DWORD *)(this + 8928), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 8924) + 88))(*(_DWORD *)(this + 8924), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 8944) + 88))(*(_DWORD *)(this + 8944), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 8940) + 88))(*(_DWORD *)(this + 8940), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 8936) + 88))(*(_DWORD *)(this + 8936), 0);
    v4 = *(_DWORD *)(this + 8952);
    *(_DWORD *)(v4 + 24) = 0;
    *(_DWORD *)(v4 + 200) = 0;
    return (*(int (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 8920) + 88))(*(_DWORD *)(this + 8920), 0);
  }
  else
  {
    v3[6] = 0;
    v3[50] = 0;
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 8912) + 88))(*(_DWORD *)(this + 8912), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 8908) + 88))(*(_DWORD *)(this + 8908), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 8916) + 88))(*(_DWORD *)(this + 8916), 0);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 8932) + 88))(*(_DWORD *)(this + 8932), 1);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 8928) + 88))(*(_DWORD *)(this + 8928), 1);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 8924) + 88))(*(_DWORD *)(this + 8924), 1);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 8944) + 88))(*(_DWORD *)(this + 8944), 1);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 8940) + 88))(*(_DWORD *)(this + 8940), 1);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 8936) + 88))(*(_DWORD *)(this + 8936), 1);
    v6 = *(_DWORD **)(this + 8952);
    v6[6] = 1;
    v6[50] = 1;
    v6[8] = 1;
    return (*(int (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 8920) + 88))(*(_DWORD *)(this + 8920), 1);
  }
}

//----- (65789460) --------------------------------------------------------
void __thiscall LoginUI_SetMessageText(float *this, int a2, char *Source, int a4, char a5, int a6)
{
  int v7; // esi
  int v8; // edx
  int v9; // eax
  int v10; // esi
  char *v11; // eax
  float v12; // [esp+4h] [ebp-4h]

  LoginPanel_SetMode((int)this, 0);
  v12 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  if ( a5 || *(this + 2245) <= (double)v12 )
  {
    UiText_SetValueIfChanged(*((_DWORD *)this + 2237), (char *)byte_659A8B98, 0, 0);
    v7 = a2;
    if ( a2 )
    {
      switch ( a2 )
      {
        case 1711:
        case 1721:
        case 1800:
        case 1803:
          FadeEffect_SetActive((float *)dword_65ABF754, 1);
          WindowMgr_CloseAllInputFocused((_BYTE **)dword_65ABF708);
          break;
        case 1718:
        case 1719:
          if ( a6 )
            v7 = a2 + 19;
          goto LABEL_8;
        default:
LABEL_8:
          FadeEffect_SetActive((float *)dword_65ABF754, 1);
          break;
      }
      if ( v7 > 0 )
      {
        if ( a4 )
        {
          v8 = *(_DWORD *)g_pILTClient;
          if ( a6 )
            v9 = (*(int (__cdecl **)(int, int, int, int))(v8 + 64))(g_pILTClient, v7, a4, a6);
          else
            v9 = (*(int (__cdecl **)(int, int, int))(v8 + 64))(g_pILTClient, v7, a4);
        }
        else
        {
          v9 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v7);
        }
        v10 = v9;
        if ( v9 )
          v11 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
        else
          v11 = (char *)byte_659A8B98;
        UiText_SetValueIfChanged(*((_DWORD *)this + 2237), v11, 1, Source);
        if ( v10 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v10);
        if ( a5 )
          *(this + 2245) = v12 + 5.0;
      }
    }
  }
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65789620) --------------------------------------------------------
int __thiscall Login_SetTokenMode(int *this, char a2, char *a3)
{
  if ( a2 )
  {
    UiText_SetValueIfChanged(*(this + 2233), a3, 0, 0);
    return LoginPanel_SetMode((int)this, 1);
  }
  else
  {
    (*(void (__cdecl **)(const char *))(g_pILTClient + 520))("+LoginToken ~");
    return LoginPanel_SetMode((int)this, 0);
  }
}

//----- (657896F0) --------------------------------------------------------
char __thiscall Steam_RequestAuthTicket(_BYTE *this, _DWORD *a2, char a3)
{
  char result; // al
  int v5; // eax

  result = 0;
  *(this + 8901) = 0;
  if ( !a3 )
  {
    *(this + 8900) = 0;
    result = (char)a2;
    if ( *a2 == 1 )
    {
      v5 = SteamUser();
      result = (*(int (__thiscall **)(int, _BYTE *, int, _BYTE *))(*(_DWORD *)v5 + 84))(
                 v5,
                 this + 7872,
                 1024,
                 this + 8896);
      *(this + 8900) = 1;
    }
  }
  return result;
}
// 659A8824: using guessed type int SteamUser(void);

//----- (657897C0) --------------------------------------------------------
char *__thiscall Packet_WriteBits(char *this, char *a2, unsigned int a3)
{
  return BitStream_WriteBits(this + 12, a2, a3, 1);
}

//----- (657897E0) --------------------------------------------------------
Packet_ID_LOGIN_TOKEN_CHECK *__thiscall Packet_ID_LOGIN_TOKEN_CHECK_Ctor(Packet_ID_LOGIN_TOKEN_CHECK *this)
{
  *(_DWORD *)this->base = &vtbl_Packet_Unknown0;
  this->base[8] = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)&this->base[12]);
  *(_DWORD *)&this->base[1056] = 0;
  *(_DWORD *)&this->base[1060] = 0;
  this->fromServer = 0;
  this->success = 0;
  this->requestToken[0] = 0;
  this->username[0] = 0;
  this->base[1064] = 112;
  *(_DWORD *)this->base = &vtbl_Packet_ID_LOGIN_TOKEN_CHECK;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659C8A5C: using guessed type int (__thiscall *vtbl_Packet_ID_LOGIN_TOKEN_CHECK)(void *, char);

//----- (65789F90) --------------------------------------------------------
int __thiscall CharacterData_ParseFromString(float *this, int a2, int a3, int a4)
{
  int v5; // edi
  char *v6; // eax
  const char *v7; // ecx
  char *v8; // eax
  __packed *v9; // edi
  const char *v10; // ecx
  char *v11; // edi
  int (__cdecl *v12)(const char *); // eax
  int v13; // eax
  _BYTE *v14; // eax
  int v15; // edi
  int v16; // ebx
  int v17; // eax
  double v18; // st7
  int result; // eax
  _DWORD *v20; // eax
  _DWORD *v21; // ecx
  int v22; // [esp-Ch] [ebp-4Ch]
  int v23; // [esp-4h] [ebp-44h]
  int v24; // [esp+10h] [ebp-30h]
  _BYTE v25[28]; // [esp+14h] [ebp-2Ch] BYREF
  int v26; // [esp+3Ch] [ebp-4h]

  switch ( a2 )
  {
    case 1:
      if ( WeaponZoom_IsActive() )
        WeaponZoom_ResetIfActive((int)dword_65ABF75C);
      *(_DWORD *)&g_pGameClientShell[1]._pad0[8] = 1;
      WindowMgr_CloseAllInputFocused((_BYTE **)dword_65ABF708);
      GetWindow35();
      LoginUI_ShowMessage(4);
      return 1;
    case 2:
      (*(void (**)(void))(g_pILTClient + 144))();
      return 1;
    case 3:
      if ( *(this + 2239) > ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient)
        || !(*(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 4))(g_LTClient) )
      {
        return 1;
      }
      if ( *(this + 2245) <= ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient) )
      {
        v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4310);
        v6 = v5
           ? (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5)
           : (char *)byte_659A8B98;
        UiText_SetValueIfChanged(*((_DWORD *)this + 2237), v6, 1, "FFFFFF00");
        if ( v5 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
      }
      v7 = *(const char **)(*((_DWORD *)this + 2233) + 176);
      v8 = (char *)g_pPlayerStats;
      v9 = g_pPlayerStats;
      if ( g_pPlayerStats )
      {
        if ( !v7 )
          v7 = byte_659A8B98;
        strncpy((char *)g_pPlayerStats, v7, 0x13u);
        *((_BYTE *)v9 + 19) = 0;
        v8 = (char *)g_pPlayerStats;
      }
      v10 = *(const char **)(*((_DWORD *)this + 2236) + 176);
      v11 = v8 + 20;
      if ( v8 != (char *)-20 )
      {
        if ( !v10 )
          v10 = byte_659A8B98;
        strncpy(v8 + 20, v10, 0x23u);
        v11[35] = 0;
        v8 = (char *)g_pPlayerStats;
      }
      Registry_WriteFoMKey((__packed *)v8);
      std::string::string(v25);
      v12 = *(int (__cdecl **)(const char *))(g_pILTClient + 248);
      v26 = 0;
      v13 = v12("LoginToken");
      if ( v13 )
      {
        v14 = (_BYTE *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 96))(g_pILTClient, v13);
        if ( v14 )
        {
          if ( *v14 != 126 )
          {
            std::string::operator=(v25, v14);
            (*(void (__cdecl **)(const char *))(g_pILTClient + 520))("+LoginToken ~");
          }
        }
      }
      v15 = *(_DWORD *)(*((_DWORD *)this + 2236) + 176);
      v16 = *(_DWORD *)(*((_DWORD *)this + 2233) + 176);
      v23 = *((_DWORD *)this + 2224);
      v24 = *(_DWORD *)g_LTClient;
      v22 = *((unsigned __int8 *)this + 8900);
      v17 = std::string::c_str(v25);
      (*(void (__thiscall **)(int, int, int, int, int, int, float *, int))(v24 + 36))(
        g_LTClient,
        v16,
        v15,
        1853,
        v17,
        v22,
        this + 1968,
        v23);
      v18 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
      v26 = -1;
      *(this + 2239) = v18 + 5.0;
      std::string::~string(v25);
      return 1;
    case 4:
      if ( a3 != 1 && a3 != 2 )
      {
        v20 = (_DWORD *)*((_DWORD *)this + 2233);
        v21 = (_DWORD *)dword_65ABF70C;
        goto LABEL_26;
      }
      Panel_SetActiveWidget((_DWORD *)dword_65ABF70C, *((_DWORD **)this + 2236), (int)this);
      result = 1;
      break;
    case 5:
      v21 = (_DWORD *)dword_65ABF70C;
      if ( a3 == 2 )
      {
        Panel_SetActiveWidget((_DWORD *)dword_65ABF70C, *((_DWORD **)this + 2233), (int)this);
        result = 1;
      }
      else if ( a3 == 1 )
      {
        Panel_SetActiveWidget((_DWORD *)dword_65ABF70C, 0, 0);
        (*(void (__thiscall **)(float *, int, _DWORD, _DWORD))(*(_DWORD *)this + 4))(this, 3, 0, 0);
        result = 1;
      }
      else
      {
        v20 = (_DWORD *)*((_DWORD *)this + 2236);
LABEL_26:
        if ( (_DWORD *)v21[2] == v20 )
          Panel_SetActiveWidget(v21, 0, 0);
        else
          Panel_SetActiveWidget(v21, v20, (int)this);
        result = 1;
      }
      break;
    case 6:
      if ( *((_BYTE *)this + 8960) )
        return 1;
      *((_BYTE *)this + 8960) = 1;
      *(this + 2243) = 0.0;
      *(this + 2241) = 0.0;
      return 1;
    default:
      return CWindow_HandleCommand(this, a2, a3, a4);
  }
  return result;
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF70C: using guessed type int dword_65ABF70C;

//----- (6578A3A0) --------------------------------------------------------
void __thiscall CharacterData_BuildUI(_BYTE *this)
{
  int v1; // edi
  int *v2; // esi
  int v3; // ecx
  _DWORD *v4; // eax
  int v5; // eax
  _DWORD *v6; // ecx
  int v7; // edi
  int v8; // ecx
  _DWORD *v9; // eax
  int (__cdecl *v10)(_DWORD *); // edx
  int v11; // eax
  _DWORD *v12; // ecx
  _BYTE *v13; // eax
  _DWORD v14[3]; // [esp+4h] [ebp-124h]
  _BYTE *v15; // [esp+10h] [ebp-118h]
  int v16; // [esp+14h] [ebp-114h]
  _DWORD *v17; // [esp+18h] [ebp-110h]
  _DWORD v18[3]; // [esp+1Ch] [ebp-10Ch] BYREF
  char Buffer[4]; // [esp+28h] [ebp-100h] BYREF
  const char *v20; // [esp+2Ch] [ebp-FCh]
  int v21; // [esp+30h] [ebp-F8h]
  const char *v22; // [esp+34h] [ebp-F4h]
  int v23; // [esp+38h] [ebp-F0h]
  int v24; // [esp+3Ch] [ebp-ECh]
  int v25; // [esp+40h] [ebp-E8h]
  int v26; // [esp+44h] [ebp-E4h]
  const char *v27; // [esp+48h] [ebp-E0h]
  int v28; // [esp+4Ch] [ebp-DCh]
  const char *v29; // [esp+50h] [ebp-D8h]
  const char *v30; // [esp+54h] [ebp-D4h]
  const char *v31; // [esp+58h] [ebp-D0h]
  int v32; // [esp+5Ch] [ebp-CCh]
  int v33; // [esp+60h] [ebp-C8h]
  int v34; // [esp+64h] [ebp-C4h]
  int v35; // [esp+68h] [ebp-C0h]
  int v36; // [esp+6Ch] [ebp-BCh]
  int v37; // [esp+70h] [ebp-B8h]
  _DWORD v38[3]; // [esp+74h] [ebp-B4h] BYREF
  char v39[4]; // [esp+80h] [ebp-A8h] BYREF
  const char *v40; // [esp+84h] [ebp-A4h]
  int v41; // [esp+88h] [ebp-A0h]
  const char *v42; // [esp+8Ch] [ebp-9Ch]
  int v43; // [esp+90h] [ebp-98h]
  int v44; // [esp+94h] [ebp-94h]
  int v45; // [esp+98h] [ebp-90h]
  int v46; // [esp+9Ch] [ebp-8Ch]
  const char *v47; // [esp+A0h] [ebp-88h]
  int v48; // [esp+A4h] [ebp-84h]
  const char *v49; // [esp+A8h] [ebp-80h]
  const char *v50; // [esp+ACh] [ebp-7Ch]
  const char *v51; // [esp+B0h] [ebp-78h]
  int v52; // [esp+B4h] [ebp-74h]
  int v53; // [esp+B8h] [ebp-70h]
  int v54; // [esp+BCh] [ebp-6Ch]
  int v55; // [esp+C0h] [ebp-68h]
  int v56; // [esp+C4h] [ebp-64h]
  int v57; // [esp+C8h] [ebp-60h]
  _DWORD v58[3]; // [esp+CCh] [ebp-5Ch] BYREF
  char v59[4]; // [esp+D8h] [ebp-50h] BYREF
  const char *v60; // [esp+DCh] [ebp-4Ch]
  int v61; // [esp+E0h] [ebp-48h]
  const char *v62; // [esp+E4h] [ebp-44h]
  int v63; // [esp+E8h] [ebp-40h]
  int v64; // [esp+ECh] [ebp-3Ch]
  int v65; // [esp+F0h] [ebp-38h]
  int v66; // [esp+F4h] [ebp-34h]
  const char *v67; // [esp+F8h] [ebp-30h]
  int v68; // [esp+FCh] [ebp-2Ch]
  const char *v69; // [esp+100h] [ebp-28h]
  const char *v70; // [esp+104h] [ebp-24h]
  const char *v71; // [esp+108h] [ebp-20h]
  int v72; // [esp+10Ch] [ebp-1Ch]
  int v73; // [esp+110h] [ebp-18h]
  int v74; // [esp+114h] [ebp-14h]
  int v75; // [esp+118h] [ebp-10h]
  int v76; // [esp+11Ch] [ebp-Ch]
  int v77; // [esp+120h] [ebp-8h]

  v15 = this;
  if ( !*(this + 8961) )
  {
    v18[0] = 0;
    v18[2] = 0;
    Buffer[0] = 0;
    v20 = 0;
    v21 = 0;
    v22 = 0;
    v23 = 0;
    v24 = 0;
    v25 = 0;
    v26 = 0;
    v27 = 0;
    v28 = 0;
    v29 = 0;
    v30 = 0;
    v31 = 0;
    v32 = 0;
    v33 = 0;
    v34 = 0;
    v35 = 0;
    v36 = 0;
    v37 = 0;
    v18[1] = "FFFFFF00";
    sprintf(Buffer, "%u", 2);
    v20 = "18";
    v29 = "350";
    v30 = "500";
    v27 = "1";
    v22 = "1";
    v31 = "1";
    v38[0] = 0;
    v38[2] = 0;
    v39[0] = 0;
    v40 = 0;
    v41 = 0;
    v42 = 0;
    v43 = 0;
    v44 = 0;
    v45 = 0;
    v46 = 0;
    v47 = 0;
    v48 = 0;
    v49 = 0;
    v50 = 0;
    v51 = 0;
    v52 = 0;
    v53 = 0;
    v54 = 0;
    v55 = 0;
    v56 = 0;
    v57 = 0;
    v38[1] = "FFFFFF00";
    sprintf(v39, "%u", 0);
    v40 = "14";
    v49 = "350";
    v50 = "5000";
    v47 = "1";
    v42 = "1";
    v51 = "1";
    v58[0] = 0;
    v58[2] = 0;
    v59[0] = 0;
    v60 = 0;
    v61 = 0;
    v62 = 0;
    v63 = 0;
    v64 = 0;
    v65 = 0;
    v66 = 0;
    v67 = 0;
    v68 = 0;
    v69 = 0;
    v70 = 0;
    v71 = 0;
    v72 = 0;
    v73 = 0;
    v74 = 0;
    v75 = 0;
    v76 = 0;
    v77 = 0;
    v58[1] = "FFFFFF00";
    sprintf(v59, "%u", 28);
    v1 = *(_DWORD *)&dword_65A55604;
    v67 = "1";
    v71 = "1";
    v60 = "24";
    v69 = "350";
    v70 = "500";
    v62 = "2";
    v14[0] = v18;
    v14[1] = v38;
    v14[2] = v58;
    v2 = (int *)&unk_65A52F70;
    v16 = 24;
    do
    {
      if ( *v2 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(*v2) )
        *v2 = 0;
      if ( v2[1] && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v2[1]) )
        v2[1] = 0;
      v3 = *(v2 - 3);
      v2[2] = v1;
      if ( v3 )
      {
        v4 = (_DWORD *)v14[*(v2 - 4)];
        *v4 = v3;
        v17 = v4;
        v5 = (*(int (__cdecl **)(_DWORD *))(g_pILTClient + 304))(v4);
        v6 = v17;
        *v2 = v5;
        v2[6] = (v6[17] - v6[16]) / 2;
        v7 = v6[19] - v6[18] + v1;
        v2[3] = v7;
        v1 = v7 + 5;
      }
      v8 = *(v2 - 1);
      v2[4] = v1;
      if ( v8 )
      {
        v9 = (_DWORD *)v14[*(v2 - 2)];
        *v9 = v8;
        v10 = *(int (__cdecl **)(_DWORD *))(g_pILTClient + 304);
        v17 = v9;
        v11 = v10(v9);
        v12 = v17;
        v2[1] = v11;
        v2[7] = (v12[17] - v12[16]) / 2;
        v1 += v12[19] - v12[18];
      }
      v2[5] = v1;
      v1 += 40;
      v2 += 12;
      --v16;
    }
    while ( v16 );
    v13 = v15;
    *((_DWORD *)v15 + 2242) = v1;
    v13[8961] = 1;
  }
}

//----- (6578A740) --------------------------------------------------------
int __thiscall Steam_RequestEncryptedTicket(int this)
{
  int v2; // eax
  int v3; // ebx
  __int64 v4; // rax
  unsigned int v6; // [esp+10h] [ebp-4h]

  v2 = SteamUser();
  v4 = ((__int64 (__thiscall *)(int, char *, int))*(_DWORD *)(*(_DWORD *)v2 + 80))(v2, aDt, 4);
  v3 = v4;
  LODWORD(v4) = *(_DWORD *)(this + 7860);
  v6 = HIDWORD(v4);
  if ( *(_QWORD *)(this + 7856) )
    v4 = __PAIR64__(v6, SteamAPI_UnregisterCallResult(this + 7840, *(_DWORD *)(this + 7856), v4));
  *(_DWORD *)(this + 7856) = v3;
  *(_DWORD *)(this + 7860) = HIDWORD(v4);
  *(_DWORD *)(this + 7864) = this;
  *(_DWORD *)(this + 7868) = Steam_RequestAuthTicket;
  if ( HIDWORD(v4) | v3 )
    LODWORD(v4) = SteamAPI_RegisterCallResult(this + 7840, v3, HIDWORD(v4));
  *(_BYTE *)(this + 8901) = 1;
  return v4;
}
// 659A881C: using guessed type int __cdecl SteamAPI_UnregisterCallResult(_DWORD, _DWORD, _DWORD);
// 659A8820: using guessed type int __cdecl SteamAPI_RegisterCallResult(_DWORD, _DWORD, _DWORD);
// 659A8824: using guessed type int SteamUser(void);

//----- (6578A890) --------------------------------------------------------
char *__thiscall VariableSizedPacket_WriteString(char *this, unsigned int a2, int a3)
{
  char *v3; // edi
  float v4; // edx
  char *v5; // esi
  double v7; // [esp+8h] [ebp-8h]

  v3 = (char *)a2;
  a2 = strlen((const char *)a2);
  LODWORD(v4) = (unsigned __int8)a3;
  *(float *)&a3 = v4;
  if ( a2 >= LODWORD(v4) )
    a2 = LODWORD(v4) - 1;
  v5 = this + 12;
  *(float *)&a3 = log((double)a3);
  v7 = *(float *)&a3;
  *(float *)&a3 = log(2.0);
  *(float *)&a3 = v7 / *(float *)&a3 + 1.0;
  *(float *)&a3 = floor(*(float *)&a3);
  BitStream_WriteBits(v5, (char *)&a2, (__int64)*(float *)&a3, 1);
  return BitStream_WriteBits(v5, v3, 8 * a2, 1);
}

//----- (6578A950) --------------------------------------------------------
char __thiscall VariableSizedPacket_ReadString(_DWORD *this, void *a2, unsigned __int8 a3)
{
  _DWORD *v4; // esi
  unsigned __int8 v5; // al
  char result; // al
  double v7; // [esp+Ch] [ebp-Ch]
  unsigned __int8 v8; // [esp+17h] [ebp-1h] BYREF
  float v9; // [esp+24h] [ebp+Ch]
  float v10; // [esp+24h] [ebp+Ch]
  float v11; // [esp+24h] [ebp+Ch]
  float v12; // [esp+24h] [ebp+Ch]

  v8 = 0;
  v4 = this + 3;
  v9 = log((double)a3);
  v7 = v9;
  v10 = log(2.0);
  v11 = v7 / v10 + 1.0;
  v12 = floor(v11);
  BitStream_ReadBits(v4, &v8, (__int64)v12, 1);
  v5 = v8;
  if ( v8 >= a3 )
  {
    v5 = a3 - 1;
    v8 = a3 - 1;
  }
  result = BitStream_ReadBits(v4, a2, 8 * v5, 1);
  *((_BYTE *)a2 + v8) = 0;
  return result;
}

//----- (6578AA10) --------------------------------------------------------
bool __thiscall Packet_ID_LOGIN_TOKEN_CHECK_Read(Packet_ID_LOGIN_TOKEN_CHECK *this, int packet)
{
  bool result; // al
  unsigned int v4; // eax

  result = VariableSizedPacket::Read(this, packet);
  if ( result )
  {
    v4 = *(_DWORD *)&this->base[20];
    if ( v4 + 1 <= *(_DWORD *)&this->base[12] )
    {
      this->fromServer = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + *(_DWORD *)&this->base[24])) != 0;
      ++*(_DWORD *)&this->base[20];
    }
    if ( this->fromServer )
    {
      VariableSizedPacket::ReadBit((unsigned int *)this->base, (bool *)&this->success);
      VariableSizedPacket_ReadString(this, this->username, 0x20u);
    }
    else
    {
      VariableSizedPacket_ReadString(this, this->requestToken, 0x20u);
    }
    return 1;
  }
  return result;
}

//----- (6578AAA0) --------------------------------------------------------
char __thiscall Packet_ID_LOGIN_TOKEN_CHECK_Write(Packet_ID_LOGIN_TOKEN_CHECK *this)
{
  char result; // al
  char *v3; // ecx
  char *v4; // ecx

  result = Packet_WriteHeader((int)this);
  if ( result )
  {
    v3 = (char *)&this->base[12];
    if ( this->fromServer )
      BitStream_WriteBit1(v3);
    else
      BitStream_WriteBit0(v3);
    if ( this->fromServer )
    {
      v4 = (char *)&this->base[12];
      if ( this->success )
        BitStream_WriteBit1(v4);
      else
        BitStream_WriteBit0(v4);
      VariableSizedPacket_WriteString((char *)this, (unsigned int)this->username, 32);
      return 1;
    }
    else
    {
      VariableSizedPacket_WriteString((char *)this, (unsigned int)this->requestToken, 32);
      return 1;
    }
  }
  return result;
}

//----- (6578AB30) --------------------------------------------------------
_DWORD *__thiscall Packet_ID_LOGIN_TOKEN_CHECK_ScalarDeletingDtor(_DWORD *this, char a2)
{
  *this = &vtbl_Packet_Unknown0;
  BitStream_FreeOwnedBuffer((int)(this + 3));
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (6578AB60) --------------------------------------------------------
float *__thiscall CharacterView_Ctor(float *this)
{
  sub_65747EB0(this);
  *(_DWORD *)this = &off_659C8ACC;
  CharacterModel2_Ctor(this + 1592);
  *((_BYTE *)this + 7844) = 0;
  *((_DWORD *)this + 1960) = &off_659C8AB8;
  *(this + 1964) = 0.0;
  *(this + 1965) = 0.0;
  *(this + 1966) = 0.0;
  *(this + 1967) = 0.0;
  *((_DWORD *)this + 1962) = 154;
  *(this + 2239) = 0.0;
  *(this + 1958) = 0.0;
  *(this + 2243) = 0.0;
  *(this + 1959) = 0.0;
  *(this + 2245) = 0.0;
  *(this + 2230) = 0.0;
  *(this + 2237) = 0.0;
  *(this + 2234) = 0.0;
  *(this + 2235) = 0.0;
  *(this + 2233) = 0.0;
  *(this + 2232) = 0.0;
  *(this + 2231) = 0.0;
  *(this + 2236) = 0.0;
  *(this + 2238) = 0.0;
  *((_BYTE *)this + 8960) = 0;
  *((_BYTE *)this + 8961) = 0;
  *(this + 2241) = 0.0;
  *(this + 2242) = 0.0;
  *(this + 1957) = 0.0;
  *((_BYTE *)this + 8976) = 1;
  *((_BYTE *)this + 8977) = 0;
  *(this + 2226) = 0.0;
  *(this + 2227) = 0.0;
  *(this + 2228) = 0.0;
  *(this + 2229) = 0.0;
  *((_BYTE *)this + 8900) = 0;
  *((_BYTE *)this + 8901) = 0;
  GroupWindow_SetBackgroundImage((int)this, 999999999, *(int *)&Data, *(int *)&dword_65A55604);
  return this;
}
// 659C8AB8: using guessed type void *off_659C8AB8;
// 659C8ACC: using guessed type void *off_659C8ACC;

//----- (6578AE90) --------------------------------------------------------
void __thiscall LoadingScreen_UpdateProgress(int this, int a2)
{
  int v3; // eax
  int v4; // ebx
  double v5; // st7
  bool v6; // cc
  int v7; // edi
  int v8; // edx
  int *v9; // esi
  int v10; // eax
  int v11; // ecx
  int v12; // edx
  int v13; // eax
  int v14; // edx
  int v15; // eax
  int v16; // ecx
  int v17; // eax
  int v18; // ecx
  int v19; // edx
  int v20; // eax
  int v21; // ecx
  int v22; // edx
  int v23; // eax
  int v24; // [esp-Ch] [ebp-58h]
  int v25; // [esp-Ch] [ebp-58h]
  _DWORD v26[4]; // [esp+4h] [ebp-48h] BYREF
  _DWORD v27[4]; // [esp+14h] [ebp-38h] BYREF
  int v28; // [esp+24h] [ebp-28h] BYREF
  int v29; // [esp+28h] [ebp-24h]
  int v30; // [esp+2Ch] [ebp-20h]
  int v31; // [esp+30h] [ebp-1Ch]
  int v32; // [esp+34h] [ebp-18h] BYREF
  int v33; // [esp+38h] [ebp-14h]
  int v34; // [esp+3Ch] [ebp-10h]
  int v35; // [esp+40h] [ebp-Ch]
  float v36; // [esp+44h] [ebp-8h]
  int v37; // [esp+48h] [ebp-4h]

  if ( *(_BYTE *)(this + 8960) )
  {
    if ( !*(_BYTE *)(this + 8961) )
      CharacterData_BuildUI((_BYTE *)this);
    v3 = *(_DWORD *)(*((_DWORD *)dword_65ABF6F8 + 3) + 16);
    if ( v3 )
    {
      v31 = *(_DWORD *)&dword_65A55604;
      v30 = *(_DWORD *)&Data;
      v34 = 2;
      v35 = 2;
      v28 = 0;
      v29 = 0;
      v32 = 0;
      v33 = 0;
      (*(void (__cdecl **)(int, int, int *, int *))(g_pILTClient + 368))(a2, v3, &v28, &v32);
    }
    v4 = *(_DWORD *)&Data / 2;
    v36 = g_pGameClientShell->recoilScale * 50.0 + *(float *)(this + 8972);
    v5 = v36;
    *(float *)(this + 8972) = v36;
    v6 = (int)v5 <= *(_DWORD *)(this + 8968);
    *(_DWORD *)(this + 8964) = (int)v5;
    if ( !v6 )
    {
      *(_DWORD *)(this + 8964) = 0;
      *(float *)(this + 8972) = 0.0;
    }
    v7 = *(_DWORD *)(this + 8964);
    v8 = v7 + *(_DWORD *)&dword_65A55604;
    v37 = v7 + *(_DWORD *)&dword_65A55604;
    v9 = (int *)&unk_65A52F78;
    v36 = 0.0;
    while ( 1 )
    {
      v10 = *v9;
      if ( *v9 >= v8 )
        break;
      if ( v9[3] >= v7 )
      {
        v11 = *(v9 - 2);
        if ( v11 )
        {
          if ( v10 >= v7 )
          {
            if ( v9[1] <= v8 )
            {
              (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(a2, v11, 0, v4 - v9[4], v10 - v7);
            }
            else
            {
              v32 = 0;
              v33 = 0;
              v34 = 2 * v9[4] + 2;
              v14 = v37 - v10;
              v24 = v10 - v7;
              v15 = v4 - v9[4];
              v35 = v14;
              (*(void (__cdecl **)(int, int, int *, int, int))(g_pILTClient + 364))(a2, v11, &v32, v15, v24);
            }
          }
          else
          {
            v29 = v7 - v10;
            v30 = 2 * v9[4] + 2;
            v12 = v9[1] - v10 + 2;
            v13 = v4 - v9[4];
            v31 = v12;
            v28 = 0;
            (*(void (__cdecl **)(int, int, int *, int, _DWORD))(g_pILTClient + 364))(a2, v11, &v28, v13, 0);
          }
        }
        v16 = *(v9 - 1);
        if ( v16 )
        {
          v17 = v9[2];
          if ( v17 < v37 || v9[3] > v7 )
          {
            if ( v17 >= v7 )
            {
              if ( v9[3] <= v37 )
              {
                (*(void (__cdecl **)(int, int, _DWORD, int, int))(g_pILTClient + 364))(a2, v16, 0, v4 - v9[5], v17 - v7);
              }
              else
              {
                v26[0] = 0;
                v26[1] = 0;
                v21 = v9[5];
                v26[2] = 2 * v21 + 2;
                v22 = v37 - v17;
                v25 = v17 - v7;
                v23 = *(v9 - 1);
                v26[3] = v22;
                (*(void (__cdecl **)(int, int, _DWORD *, int, int))(g_pILTClient + 364))(a2, v23, v26, v4 - v21, v25);
              }
            }
            else
            {
              v27[1] = v7 - v17;
              v18 = v9[5];
              v27[2] = 2 * v18 + 2;
              v19 = v9[3] - v17;
              v20 = *(v9 - 1);
              v27[3] = v19 + 2;
              v27[0] = 0;
              (*(void (__cdecl **)(int, int, _DWORD *, int, _DWORD))(g_pILTClient + 364))(a2, v20, v27, v4 - v18, 0);
            }
          }
        }
      }
      v9 += 12;
      LODWORD(v36) += 48;
      if ( LODWORD(v36) >= 0x480 )
        break;
      v8 = v37;
    }
  }
}

//----- (6578B140) --------------------------------------------------------
void __thiscall Camera_UpdateTransform(_DWORD *this)
{
  int v1; // esi
  float *v3; // eax
  int (__thiscall *v4)(_DWORD *, float *); // edx
  int v5; // esi
  int v6; // ebx
  int v7; // eax
  float v8[4]; // [esp+14h] [ebp-580h] BYREF
  int v9[3]; // [esp+24h] [ebp-570h] BYREF
  float v10[3]; // [esp+30h] [ebp-564h] BYREF
  int v11; // [esp+3Ch] [ebp-558h]
  float v12; // [esp+40h] [ebp-554h]
  int v13; // [esp+44h] [ebp-550h]
  float v14; // [esp+48h] [ebp-54Ch] BYREF
  float v15; // [esp+4Ch] [ebp-548h]
  float v16; // [esp+50h] [ebp-544h]
  float v17; // [esp+54h] [ebp-540h]
  float v18[30]; // [esp+58h] [ebp-53Ch] BYREF
  _BYTE v19[28]; // [esp+D0h] [ebp-4C4h] BYREF
  _BYTE v20[28]; // [esp+ECh] [ebp-4A8h] BYREF
  _BYTE v21[28]; // [esp+108h] [ebp-48Ch] BYREF
  _BYTE v22[28]; // [esp+124h] [ebp-470h] BYREF
  _BYTE v23[28]; // [esp+140h] [ebp-454h] BYREF
  _BYTE v24[28]; // [esp+15Ch] [ebp-438h] BYREF
  _BYTE v25[28]; // [esp+178h] [ebp-41Ch] BYREF
  _BYTE v26[28]; // [esp+194h] [ebp-400h] BYREF
  _BYTE v27[700]; // [esp+1B0h] [ebp-3E4h] BYREF
  _BYTE v28[28]; // [esp+46Ch] [ebp-128h] BYREF
  _BYTE v29[28]; // [esp+488h] [ebp-10Ch] BYREF
  _BYTE v30[28]; // [esp+4A4h] [ebp-F0h] BYREF
  _BYTE v31[140]; // [esp+4C0h] [ebp-D4h] BYREF
  int v32; // [esp+54Ch] [ebp-48h]
  int v33; // [esp+550h] [ebp-44h]
  int v34; // [esp+554h] [ebp-40h]
  char v35; // [esp+56Dh] [ebp-27h]
  int v36; // [esp+590h] [ebp-4h]

  v1 = *(_DWORD *)dword_65ABF700;
  if ( *(_DWORD *)dword_65ABF700 )
  {
    v14 = 0.0;
    v15 = 0.0;
    v16 = 0.0;
    v17 = 1.0;
    (*(void (__thiscall **)(int, int, float *))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, v1, v10);
    (*(void (__thiscall **)(int, int, float *))(*(_DWORD *)g_pILTClient + 148))(g_pILTClient, v1, &v14);
    v12 = (v15 * v14 - v17 * v16) * 2.0;
    *(float *)&v11 = 1.0 - (v16 * v16 + v14 * v14) * 2.0;
    *(float *)&v13 = (v15 * v16 + v14 * v17) * 2.0;
    *(float *)v9 = v12;
    v9[1] = v11;
    v9[2] = v13;
    CharacterModel_Ctor(v18);
    v36 = 0;
    std::string::operator=(v19, "Models\\Props\\gd_logo.ltb");
    std::string::operator=(v20, "Skins\\Props\\gd1.dtx");
    std::string::operator=(v21, "Skins\\Props\\gd2_1.dtx");
    std::string::operator=(v22, "Skins\\Props\\gd2_2.dtx");
    std::string::operator=(v23, "Skins\\Props\\gd2_3.dtx");
    std::string::operator=(v24, "Tex\\Berlin\\base\\base04bmp.dtx");
    std::string::operator=(v25, "Skins\\Props\\gd_holo.dtx");
    std::string::operator=(v26, "Tex\\Berlin\\base\\base04bmp.dtx");
    std::string::operator=(v27, "Tex\\chrome.dtx");
    std::string::operator=(v28, "RS\\Logo_Inner.ltb");
    std::string::operator=(v29, "RS\\Logo_Globe.ltb");
    std::string::operator=(v30, "RS\\Logo_Rings.ltb");
    std::string::operator=(v31, "RS\\Logo_Colonies.ltb");
    v18[6] = v10[0];
    v18[7] = v10[1];
    v18[8] = v10[2];
    v3 = Quaternion_FromAxisAngle(v8, (float *)v9, 3.1415927);
    v18[2] = *v3;
    v4 = *(int (__thiscall **)(_DWORD *, float *))(*(this + 1592) + 12);
    v18[3] = v3[1];
    v18[4] = v3[2];
    v18[5] = v3[3];
    v33 = 1;
    v35 = 1;
    v18[12] = 0.059999999;
    v34 = 1;
    v18[13] = 0.059999999;
    v18[14] = 0.059999999;
    v18[15] = 0.059999999;
    v32 = 641;
    v18[16] = 0.059999999;
    v18[17] = 0.059999999;
    v18[18] = 1.0;
    v18[19] = 1.0;
    v18[20] = 1.0;
    v18[21] = 1.0;
    v18[22] = 1.0;
    v18[23] = 1.0;
    v18[26] = 1.0;
    v18[27] = 1.0;
    v18[24] = 1000000.0;
    if ( v4(this + 1592, v18) )
    {
      (*(void (__thiscall **)(_DWORD *, int, _DWORD))(*(this + 1592) + 52))(this + 1592, g_pILTClient, 0);
      v5 = *(this + 1595);
      v6 = *(_DWORD *)g_pILTClient;
      v7 = (*(int (__thiscall **)(int, int, const char *, _DWORD))(*(_DWORD *)g_pILTClient + 156))(
             g_pILTClient,
             v5,
             "idle",
             0);
      (*(void (__thiscall **)(int, int, int))(v6 + 160))(g_pILTClient, v5, v7);
      (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)g_pILTClient + 168))(g_pILTClient, *(this + 1595), 1);
      *(this + 1957) = 1;
    }
    v36 = -1;
    CharacterData_Dtor(v18);
  }
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (6578B4D0) --------------------------------------------------------
void *__thiscall Camera_GetOrientation(float *this)
{
  void *result; // eax
  int v3; // edi
  float v4; // esi
  float *UpVector; // eax
  float *ForwardVector; // eax
  int (__cdecl **v7)(int, float *, int, _DWORD); // esi
  float v8; // [esp+0h] [ebp-64h]
  float v9[4]; // [esp+10h] [ebp-54h] BYREF
  float v10[3]; // [esp+20h] [ebp-44h] BYREF
  float v11; // [esp+2Ch] [ebp-38h] BYREF
  float v12; // [esp+30h] [ebp-34h]
  float v13; // [esp+34h] [ebp-30h]
  float v14; // [esp+38h] [ebp-2Ch] BYREF
  float v15; // [esp+3Ch] [ebp-28h]
  float v16; // [esp+40h] [ebp-24h]
  float v17; // [esp+44h] [ebp-20h]
  float v18; // [esp+48h] [ebp-1Ch]
  float v19; // [esp+4Ch] [ebp-18h]
  float v20; // [esp+50h] [ebp-14h] BYREF
  float v21; // [esp+54h] [ebp-10h]
  float v22; // [esp+58h] [ebp-Ch]
  float v23; // [esp+5Ch] [ebp-8h] BYREF
  float v24; // [esp+60h] [ebp-4h]

  if ( !*((_DWORD *)this + 1957) )
    Camera_UpdateTransform(this);
  result = dword_65ABF700;
  v3 = *(_DWORD *)dword_65ABF700;
  if ( *(_DWORD *)dword_65ABF700 )
  {
    result = (void *)(*(int (__thiscall **)(float *))(*((_DWORD *)this + 1592) + 20))(this + 1592);
    v4 = *(this + 1595);
    if ( v4 != 0.0 )
    {
      v9[0] = 0.0;
      v9[1] = 0.0;
      v9[2] = 0.0;
      v9[3] = 1.0;
      (*(void (__thiscall **)(int, int, float *))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, v3, &v20);
      (*(void (__thiscall **)(int, int, float *))(*(_DWORD *)g_pILTClient + 148))(g_pILTClient, v3, v9);
      UpVector = Quat_GetUpVector(v9, &v11);
      v17 = *UpVector;
      v18 = UpVector[1];
      v19 = UpVector[2];
      ForwardVector = Quat_GetForwardVector(v9, &v14);
      v11 = *ForwardVector;
      v12 = ForwardVector[1];
      v13 = ForwardVector[2];
      v14 = v17 * 10.0;
      v15 = v18 * 10.0;
      v16 = 10.0 * v19;
      v20 = v14 + v20;
      v21 = v21 + v15;
      v22 = v22 + v16;
      v14 = v11 * 150.0;
      v15 = v12 * 150.0;
      v16 = 150.0 * v13;
      v20 = v14 + v20;
      v21 = v15 + v21;
      v22 = v16 + v22;
      (*(void (__thiscall **)(int, float, float *, int))(*(_DWORD *)g_pILTClient + 188))(
        g_pILTClient,
        COERCE_FLOAT(LODWORD(v4)),
        &v20,
        1);
      v24 = 1000.0 / (double)*(int *)&dword_65A55604;
      v10[0] = v24;
      v10[1] = v24;
      v10[2] = v24;
      (*(void (__cdecl **)(float, float *))(g_pILTClient + 548))(COERCE_FLOAT(LODWORD(v4)), v10);
      (*(void (__thiscall **)(int, _DWORD, _DWORD, int, int))(*(_DWORD *)dword_65A5AA40 + 84))(
        dword_65A5AA40,
        *((_DWORD *)this + 1595),
        0,
        1,
        513);
      v23 = v4;
      v7 = (int (__cdecl **)(int, float *, int, _DWORD))(g_pILTClient + 168);
      v8 = ((double (*)(void))*(_DWORD *)(*(_DWORD *)g_pILTClient + 104))();
      return (void *)(*v7)(v3, &v23, 1, LODWORD(v8));
    }
  }
  return result;
}
// 65A5AA40: using guessed type int dword_65A5AA40;

//----- (6578B6D0) --------------------------------------------------------
int __thiscall LoginUI_Update_SendLoginTokenCheck(char *this, int a2)
{
  int v2; // edi
  int v4; // eax
  int v5; // ecx
  int v6; // eax
  const char *v7; // eax
  const char *v8; // edi
  bool v9; // zf
  void (__stdcall *v10)(int, _DWORD, _DWORD); // eax
  int result; // eax
  int v12; // [esp-18h] [ebp-4DCh]
  _DWORD v13[4]; // [esp+10h] [ebp-4B4h] BYREF
  _DWORD v14[4]; // [esp+20h] [ebp-4A4h] BYREF
  int v15; // [esp+30h] [ebp-494h] BYREF
  int v16; // [esp+34h] [ebp-490h] BYREF
  int v17; // [esp+38h] [ebp-48Ch]
  Packet_ID_LOGIN_TOKEN_CHECK pktLoginTokenCheck; // [esp+3Ch] [ebp-488h] BYREF
  int v19; // [esp+4C0h] [ebp-4h]

  v2 = a2;
  v4 = *((_DWORD *)this + 1958);
  v17 = a2;
  if ( v4 )
  {
    v15 = 0;
    v16 = 0;
    (*(void (__cdecl **)(int, int *, int *))(g_pILTClient + 344))(v4, &v15, &v16);
    v5 = *((_DWORD *)this + 1959);
    v13[3] = *(_DWORD *)&dword_65A55604 - v5;
    v13[2] = *(_DWORD *)&Data;
    v13[1] = v5;
    v14[2] = v15;
    v14[3] = v16;
    v12 = *((_DWORD *)this + 1958);
    v13[0] = 0;
    v14[0] = 0;
    v14[1] = 0;
    (*(void (__cdecl **)(int, int, _DWORD *, _DWORD *))(g_pILTClient + 368))(a2, v12, v13, v14);
  }
  if ( *((float *)this + 2239) > ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient)
    || !(*(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 4))(g_LTClient)
    || *((float *)this + 2245) > ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient)
    || *(this + 8901) )
  {
    *(_DWORD *)(*((_DWORD *)this + 2238) + 32) = 0;
    *(_DWORD *)(*((_DWORD *)this + 2226) + 32) = 0;
  }
  else
  {
    *(_DWORD *)(*((_DWORD *)this + 2238) + 32) = 1;
    *(_DWORD *)(*((_DWORD *)this + 2226) + 32) = 1;
  }
  (*(void (**)(void))(g_pILTClient + 180))();
  Camera_GetOrientation((float *)this);
  (*(void (**)(void))(g_pILTClient + 176))();
  if ( !*(this + 8977) && (*(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 4))(g_LTClient) )
  {
    v6 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("LoginToken");
    if ( v6 )
    {
      v7 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 96))(g_pILTClient, v6);
      v8 = v7;
      if ( v7 && *v7 != 126 )
      {
        Packet_ID_LOGIN_TOKEN_CHECK_Ctor(&pktLoginTokenCheck);
        v19 = 0;
        strncpy_s((char *)pktLoginTokenCheck.requestToken, 0x20u, v8, 0xFFFFFFFF);
        Packet_ID_LOGIN_TOKEN_CHECK_Write(&pktLoginTokenCheck);
        LTClient_SendPacket_BuildIfNeeded(&pktLoginTokenCheck, 1, 1, 3, 0);
        v19 = -1;
        *(_DWORD *)pktLoginTokenCheck.base = &vtbl_Packet_Unknown0;
        BitStream_FreeOwnedBuffer((int)&pktLoginTokenCheck.base[12]);
      }
      v2 = v17;
    }
    *(this + 8977) = 1;
  }
  if ( *(this + 8976) )
  {
    v9 = sub_65948020(*(const char **)(*((_DWORD *)this + 2233) + 176)) == 0;
    v10 = *(void (__stdcall **)(int, _DWORD, _DWORD))(*(_DWORD *)this + 4);
    if ( v9 )
      v10(5, 0, 0);
    else
      v10(4, 0, 0);
    if ( SteamUser() )
      Steam_RequestEncryptedTicket((int)this);
    *(this + 8976) = 0;
  }
  result = CWindow_UpdateChildren(this, v2);
  if ( result )
  {
    if ( *(this + 8960) )
      LoadingScreen_UpdateProgress((int)this, v2);
    return 1;
  }
  return result;
}
// 659A8824: using guessed type int SteamUser(void);
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6578BAF0) --------------------------------------------------------
int __thiscall Widget_Detach(int *this)
{
  int v2; // ecx
  int result; // eax

  v2 = *(this + 1);
  if ( v2 )
    result = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v2 + 40))(v2, 0);
  *(this + 1) = 0;
  return result;
}

//----- (6578BB10) --------------------------------------------------------
int __thiscall sub_6578BB10(_DWORD *this, _BYTE *a2)
{
  _BYTE *v3; // ecx
  int result; // eax

  v3 = (_BYTE *)*(this + 1);
  if ( a2 != v3 )
  {
    if ( v3 )
      (*(void (__thiscall **)(_BYTE *, _DWORD))(*(_DWORD *)v3 + 40))(v3, 0);
    *(this + 1) = a2;
    if ( !a2[6240] )
      (*(void (__thiscall **)(_BYTE *))(*(_DWORD *)a2 + 8))(a2);
    return (*(int (__thiscall **)(_BYTE *, int))(*(_DWORD *)a2 + 40))(a2, 1);
  }
  return result;
}

//----- (6578BB60) --------------------------------------------------------
int __thiscall UiWidget_GetSlot(_DWORD *this, unsigned int a2)
{
  if ( a2 < 4 )
    return *(this + a2 + 4);
  else
    return 0;
}

//----- (6578BC40) --------------------------------------------------------
char *__thiscall Panel_CreateByType(_DWORD *this, char *a2)
{
  char *result; // eax
  _DWORD *v4; // eax
  char *v5; // eax
  float *v6; // eax

  if ( a2 == (char *)1 )
  {
    v6 = (float *)operator new(0x2318u);
    if ( v6 )
    {
      result = (char *)CharacterView_Ctor(v6);
      goto LABEL_11;
    }
  }
  else if ( a2 == (char *)2 )
  {
    v5 = (char *)operator new(0x1F44u);
    if ( v5 )
    {
      result = CharacterPanel_Ctor(v5);
      goto LABEL_11;
    }
  }
  else
  {
    result = a2 - 3;
    if ( a2 != (char *)3 )
      return result;
    v4 = operator new(0x18F0u);
    if ( v4 )
    {
      result = (char *)StatusPanel_Ctor(v4);
      goto LABEL_11;
    }
  }
  result = 0;
LABEL_11:
  if ( result )
  {
    *((_DWORD *)result + 1) = a2;
    *((_DWORD *)result + 1565) = a2;
    *(this + (_DWORD)a2 + 4) = result;
  }
  return result;
}
// 6578BCF6: conditional instruction was optimized away because %arg_0.4 is in (1..3)

//----- (6578BD20) --------------------------------------------------------
int __thiscall Panel_SetActiveWidget(_DWORD *this, _DWORD *a2, int a3)
{
  _DWORD *v4; // ecx
  int v5; // eax
  int result; // eax

  v4 = (_DWORD *)*(this + 2);
  if ( v4 )
  {
    UiWidget_SetState(v4, 0);
    UiWidget_SetVisible((_DWORD *)*(this + 2), 0);
  }
  v5 = *(this + 3);
  if ( v5 )
    *(_DWORD *)(v5 + 6288) = 0;
  if ( a2 && (result = a3) != 0 )
  {
    if ( a2[95] )
    {
      *(this + 2) = a2;
      *(this + 3) = a3;
      UiWidget_SetState(a2, 1);
      UiWidget_SetVisible((_DWORD *)*(this + 2), 1);
      *(_DWORD *)(*(this + 3) + 6288) = *(this + 2);
      return (*(int (__cdecl **)(_DWORD))(g_pILTClient + 424))(0);
    }
  }
  else
  {
    *(this + 2) = 0;
    *(this + 3) = 0;
    return (*(int (__cdecl **)(int))(g_pILTClient + 424))(1);
  }
  return result;
}

//----- (6578BE20) --------------------------------------------------------
int __thiscall Panel_InitAll(_DWORD *this)
{
  int v2; // esi
  _DWORD *v3; // edi

  v2 = 1;
  v3 = this + 5;
  do
  {
    Panel_CreateByType(this, (char *)v2);
    if ( *v3 )
      (*(void (__thiscall **)(_DWORD))(*(_DWORD *)*v3 + 8))(*v3);
    ++v2;
    ++v3;
  }
  while ( v2 < 4 );
  return 1;
}

//----- (6578BEB0) --------------------------------------------------------
int __thiscall Widget_HandleSlotEvent(_DWORD *this, unsigned int a2)
{
  _BYTE *Slot; // eax
  _DWORD *v3; // ecx

  Slot = (_BYTE *)UiWidget_GetSlot(this, a2);
  if ( !Slot )
    return 0;
  sub_6578BB10(v3, Slot);
  return 1;
}
// 6578BEC1: variable 'v3' is possibly undefined

//----- (6578BF60) --------------------------------------------------------
_DWORD *__thiscall StatusPanel_Ctor(_DWORD *this)
{
  float v3; // [esp+10h] [ebp-10h]

  sub_65747EB0(this);
  *this = &off_659C8C6C;
  *(this + 1592) = 0;
  *(this + 1593) = 0;
  *(this + 1594) = 0;
  v3 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient) + 5.0;
  EncVarMgr_SetFloat((_DWORD *)g_pEncVarMgr, 15, v3);
  *((_BYTE *)this + 6380) = 0;
  *((_BYTE *)this + 6381) = 0;
  GroupWindow_SetBackgroundImage((int)this, 999999999, *(int *)&Data, *(int *)&dword_65A55604);
  return this;
}
// 659C8C6C: using guessed type void *off_659C8C6C;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6578C120) --------------------------------------------------------
void __thiscall MarketNagScreen_Show(int this)
{
  unsigned __int8 v2; // al
  int v3; // eax
  int v4; // ecx
  unsigned int v5; // [esp+4h] [ebp-8h] BYREF
  float v6; // [esp+8h] [ebp-4h] BYREF

  if ( *(_DWORD *)(this + 6368) )
    return;
  v2 = *(_BYTE *)(this + 6380);
  if ( !v2 )
    return;
  if ( v2 >= 2u )
  {
    if ( sub_65947AC0(0.5) )
    {
LABEL_5:
      v3 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("Interface\\nag_market.tga");
      goto LABEL_11;
    }
    goto LABEL_9;
  }
  if ( sub_65947AC0(0.30000001) )
  {
    if ( sub_65947AC0(0.5) )
      goto LABEL_5;
LABEL_9:
    v3 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("Interface\\nag_boxes.tga");
    goto LABEL_11;
  }
  v3 = (*(int (__cdecl **)(const char *))(g_pILTClient + 292))("Interface\\nag_prem.tga");
LABEL_11:
  *(_DWORD *)(this + 6368) = v3;
  if ( v3 )
  {
    v6 = 0.0;
    v5 = 0;
    (*(void (__cdecl **)(int, float *, unsigned int *))(g_pILTClient + 344))(v3, &v6, &v5);
    v6 = (double)*(int *)&Data / (double)LODWORD(v6);
    v4 = (int)(v6 * (double)v5);
    if ( *(int *)&dword_65A55604 > v4 )
      *(_DWORD *)(this + 6372) = (*(_DWORD *)&dword_65A55604 - v4) / 2;
  }
}

//----- (6578C290) --------------------------------------------------------
LONG __thiscall SharedMem_WriteDword_0x77(void *this, int a2)
{
  return SharedMem_WriteDword_this(this, 0x77u, a2);
}

//----- (6578C2B0) --------------------------------------------------------
LONG __thiscall SharedMem_WriteDword_0x78(void *this, int a2)
{
  return SharedMem_WriteDword_this(this, 0x78u, a2);
}

//----- (6578C2F0) --------------------------------------------------------
LONG __thiscall SharedMem_WriteWorldId_0x1EEC1(void *this, unsigned __int8 a2)
{
  return SharedMem_WriteDword_this(this, 0x1EEC1u, a2);
}

//----- (6578C310) --------------------------------------------------------
LONG __thiscall SharedMem_WriteWorldLoginState_0x1EEC0(void *this, unsigned __int8 a2)
{
  return SharedMem_WriteDword_this(this, 0x1EEC0u, a2);
}

//----- (6578C670) --------------------------------------------------------
int __userpurge WorldSelect_ApplyApartmentInfo@<eax>(
        int a1@<ecx>,
        double a2@<st0>,
        float a3,
        unsigned __int8 a4,
        int a5)
{
  void (*v6)(void); // eax
  int result; // eax
  float v8; // [esp-4h] [ebp-8h]
  float v9; // [esp+Ch] [ebp+8h]

  *(_BYTE *)(a1 + 6381) = LOBYTE(a3);
  *(_BYTE *)(a1 + 6380) = a4;
  v6 = *(void (**)(void))(*(_DWORD *)g_pILTClient + 100);
  if ( a4 < 2u )
  {
    v6();
    v9 = a2 + 5.0;
    a2 = v9;
  }
  else
  {
    v6();
  }
  v8 = a2;
  EncVarMgr_SetFloat((_DWORD *)g_pEncVarMgr, 15, v8);
  MarketNagScreen_Show(a1);
  SharedMem_WriteDword_this(dword_65ABF73C, 0x77u, *(_DWORD *)a5);
  SharedMem_WriteDword_this(dword_65ABF73C, 0x78u, *(unsigned __int8 *)(a5 + 4));
  result = SharedMem_ReadDword_this(dword_65ABF73C, 1u);
  *((_DWORD *)dword_65ABF73C + 14) = result;
  return result;
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6578C980) --------------------------------------------------------
int __thiscall CharacterEntry_Create(char *this, const void *a2, float a3, int a4, char a5, char a6, _BYTE *a7)
{
  int v8; // edx
  char v9; // al
  int *v10; // eax
  int v11; // esi
  char *v12; // eax
  char *v13; // eax
  bool v14; // zf
  _DWORD *v15; // eax
  int v17; // edx
  int v18; // ecx
  int v19; // esi
  const char *v20; // eax
  int *v21; // eax
  int v22; // esi
  char *v23; // eax
  char *v24; // eax
  int (__thiscall ***v25)(_DWORD, int); // eax
  _DWORD *v26; // eax
  int v27; // edx
  int v28; // ecx
  int v29; // edx
  int v30; // edx
  _DWORD *v31; // eax
  int v32; // ecx
  int v33; // ecx
  _DWORD *v34; // eax
  int v35; // edx
  int v36; // edx
  int v37; // ecx
  int v38; // ecx
  int v39; // edx
  int v40; // ecx
  int v41; // ecx
  int v42; // eax
  int v43; // eax
  int v44; // eax
  int v45; // esi
  char *v46; // eax
  char *v47; // eax
  int v48; // ecx
  _BYTE v49[8]; // [esp-28h] [ebp-124h] BYREF
  int v50; // [esp-20h] [ebp-11Ch]
  int v51; // [esp-1Ch] [ebp-118h]
  int v52; // [esp-18h] [ebp-114h]
  int v53; // [esp-14h] [ebp-110h]
  char *v54; // [esp-10h] [ebp-10Ch]
  int v55; // [esp-Ch] [ebp-108h]
  int v56; // [esp-8h] [ebp-104h]
  int v57; // [esp-4h] [ebp-100h]
  int v58[31]; // [esp+10h] [ebp-ECh] BYREF
  _BYTE v59[28]; // [esp+8Ch] [ebp-70h] BYREF
  int v60; // [esp+A8h] [ebp-54h] BYREF
  _BYTE *v61; // [esp+ACh] [ebp-50h] BYREF
  bool v62; // [esp+B2h] [ebp-4Ah]
  bool v63; // [esp+B3h] [ebp-49h]
  _BYTE v64[20]; // [esp+B4h] [ebp-48h] BYREF
  int v65; // [esp+C8h] [ebp-34h]
  _BYTE v66[28]; // [esp+D0h] [ebp-2Ch] BYREF
  int v67; // [esp+F8h] [ebp-4h]

  v8 = *(_DWORD *)this;
  v61 = a7;
  (*(void (__thiscall **)(char *))(v8 + 8))(this);
  qmemcpy(this + 216, a2, 0x140u);
  *((_DWORD *)this + 51) = a4;
  v63 = a4 < 250;
  if ( a4 >= 250 )
    *((_DWORD *)this + 52) = 25;
  else
    *((_DWORD *)this + 52) = a6 != 0 ? 48 : 38;
  std::string::string(v66);
  v67 = 0;
  if ( v61 )
  {
    std::string::operator=(v66, v61);
  }
  else
  {
    std::string::operator=(v66, "FFFFFF00");
    v9 = *(this + 220);
    if ( v9 )
    {
      if ( v9 == 2 )
        std::string::operator=(v66, "00FF0000");
    }
    else
    {
      a3 = a3 * 0.5;
    }
    if ( *(this + 220) == 4 )
    {
      v61 = 0;
      StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v61);
      if ( !Item_ValidateSlotForType(38, (unsigned __int8)v61) )
        goto LABEL_14;
    }
  }
  *((float *)this + 53) = a3;
  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v57 = 0;
  v56 = 0;
  v55 = 0;
  v54 = this + 300;
  v53 = 0;
  v52 = 0;
  *((_DWORD *)this + 45) = v10;
  v11 = *v10;
  v12 = (char *)std::string::c_str(v66);
  v13 = WindowGroup_CopyEntry(byte_65A5C4A8, 32, v12);
  v14 = (*(int (__thiscall **)(_DWORD, _DWORD, int, int, _DWORD, _DWORD, int, char *, int, _DWORD, int, int, char *, int, int, int))(v11 + 128))(
          *((_DWORD *)this + 45),
          0,
          64,
          200,
          0,
          0,
          1,
          v13,
          2,
          0,
          v52,
          v53,
          v54,
          v55,
          v56,
          v57) == 0;
  v15 = (_DWORD *)*((_DWORD *)this + 45);
  if ( v14 )
  {
    VTable_CallDtor(*((int (__thiscall ****)(_DWORD, int))this + 45));
LABEL_14:
    v67 = -1;
    std::string::~string(v66);
    return 0;
  }
  v17 = v15[20];
  v18 = v15[19] + 3;
  v14 = !v63;
  v15[21] = 3;
  v15[17] = v18;
  if ( v14 )
  {
    v15[22] = 0;
  }
  else
  {
    v15[22] = 1;
    ++v17;
  }
  v15[18] = v17;
  *(float *)(*((_DWORD *)this + 45) + 508) = a3;
  std::string::string(v64, this + 373);
  LOBYTE(v67) = 1;
  if ( !v65 )
  {
    v19 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 853);
    v20 = v19
        ? (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v19)
        : byte_659A8B98;
    std::string::operator=(v64, v20);
    if ( v19 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v19);
  }
  if ( a5 && strlen(this + 340) )
  {
    if ( v63 )
      v57 = (int)"\r";
    else
      v57 = (int)" / ";
    std::string::operator+=(v64, v57);
    std::string::operator+=(v64, this + 340);
  }
  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v57 = 0;
  *((_DWORD *)this + 46) = v21;
  v22 = *v21;
  v54 = (char *)std::string::c_str(v64);
  v23 = (char *)std::string::c_str(v66);
  v24 = WindowGroup_CopyEntry(byte_65A5C4A8, 74, v23);
  if ( !(*(int (__thiscall **)(_DWORD, _DWORD, int, int, int, _DWORD, bool, char *, int, _DWORD, _DWORD, _DWORD, char *, _DWORD, _DWORD, int))(v22 + 128))(
          *((_DWORD *)this + 46),
          0,
          64,
          200,
          24,
          0,
          !v63,
          v24,
          2,
          0,
          0,
          0,
          v54,
          0,
          0,
          v57) )
  {
    v25 = (int (__thiscall ***)(_DWORD, int))*((_DWORD *)this + 46);
LABEL_32:
    VTable_CallDtor(v25);
LABEL_33:
    LOBYTE(v67) = 0;
    std::string::~string(v64);
    goto LABEL_14;
  }
  if ( v63 && a6 )
  {
    v26 = (_DWORD *)*((_DWORD *)this + 46);
    v27 = v26[20];
    v28 = v26[19] + 8;
    v26[22] = 27;
    v29 = v27 + 27;
  }
  else
  {
    v26 = (_DWORD *)*((_DWORD *)this + 46);
    v30 = v26[20];
    v28 = v26[19] + 8;
    v26[22] = 14;
    v29 = v30 + 14;
  }
  v26[18] = v29;
  v26[17] = v28;
  v26[21] = 8;
  *(float *)(*((_DWORD *)this + 46) + 508) = a3;
  v60 = 0;
  qmemcpy(v58, this + 408, sizeof(v58));
  GameInput_HandleMouseClick((int **)dword_65ABF6F4, &v60, 1, v58, 0x12u, 0x12u);
  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  v57 = 0;
  v56 = 0;
  v55 = 0;
  v54 = 0;
  *((_DWORD *)this + 44) = v31;
  if ( !UiWidget_SetParams(v31, (int)v54, v55, v56, v57) )
  {
    IUnknown_Release1(*((int (__thiscall ****)(_DWORD, int))this + 44));
    goto LABEL_33;
  }
  *(_DWORD *)(*((_DWORD *)this + 44) + 200) = 1;
  (*(void (__thiscall **)(_DWORD, int))(**((_DWORD **)this + 44) + 128))(*((_DWORD *)this + 44), v60);
  v32 = *((_DWORD *)this + 51);
  if ( v63 )
  {
    v33 = v32 - 25;
    if ( a6 )
    {
      CWindow_SetOffset(*((_DWORD **)this + 44), v33, 13);
      goto LABEL_46;
    }
    v34 = (_DWORD *)*((_DWORD *)this + 44);
    v35 = v34[19];
    v34[21] = v33;
    v36 = v33 + v35;
    v37 = v34[20];
    v34[22] = 10;
    v38 = v37 + 10;
  }
  else
  {
    v34 = (_DWORD *)*((_DWORD *)this + 44);
    v39 = v34[19];
    v40 = v32 - 20;
    v34[21] = v40;
    v36 = v40 + v39;
    v41 = v34[20];
    v34[22] = 1;
    v38 = v41 + 1;
  }
  v34[18] = v38;
  v34[17] = v36;
LABEL_46:
  *(float *)(*((_DWORD *)this + 44) + 252) = a3;
  *(_BYTE *)(*((_DWORD *)this + 44) + 256) = 1;
  if ( a6 )
  {
    Concurrency::details::SchedulerBase::CheckStaticConstruction();
    v57 = 0;
    v56 = 0;
    v55 = 0;
    *((_DWORD *)this + 47) = v42;
    v43 = *((_DWORD *)this + 74);
    v61 = v49;
    sub_65941410(v49, v43);
    v44 = FormatString((int)v59, (int)"PP {0}");
    v45 = **((_DWORD **)this + 47);
    LOBYTE(v67) = 2;
    v54 = (char *)std::string::c_str(v44);
    v53 = 0;
    v52 = 0;
    v51 = 0;
    v50 = 2;
    v46 = (char *)std::string::c_str(v66);
    v47 = WindowGroup_CopyEntry(byte_65A5C4A8, 21, v46);
    v62 = (*(int (__thiscall **)(_DWORD, _DWORD, int, int, _DWORD, _DWORD, int, char *, int, int, int, int, char *, int, int, int))(v45 + 128))(
            *((_DWORD *)this + 47),
            0,
            32,
            100,
            0,
            0,
            1,
            v47,
            v50,
            v51,
            v52,
            v53,
            v54,
            v55,
            v56,
            v57) == 0;
    LOBYTE(v67) = 1;
    std::string::~string(v59);
    if ( v62 )
    {
      v25 = (int (__thiscall ***)(_DWORD, int))*((_DWORD *)this + 47);
      goto LABEL_32;
    }
    if ( v63 )
    {
      v57 = 15;
      v56 = 8;
    }
    else
    {
      v48 = *((_DWORD *)this + 51);
      v57 = 1;
      v56 = v48 - 120;
    }
    CWindow_SetOffset(*((_DWORD **)this + 47), v56, v57);
    *(float *)(*((_DWORD *)this + 47) + 508) = a3;
  }
  *((_DWORD *)this + 14) = 0;
  *((_DWORD *)this + 15) = 0;
  *((_DWORD *)this + 16) = 0;
  LOBYTE(v67) = 0;
  std::string::~string(v64);
  v67 = -1;
  std::string::~string(v66);
  return 1;
}
// 6578CAA4: variable 'v10' is possibly undefined
// 6578CBED: variable 'v21' is possibly undefined
// 6578CD02: variable 'v31' is possibly undefined
// 6578CDD4: variable 'v42' is possibly undefined
// 659A8274: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6578D180) --------------------------------------------------------
_DWORD *__thiscall InputBindings_FindActionSlot(_DWORD *this, int a2)
{
  int v2; // edx
  int v3; // esi
  _DWORD *i; // eax

  v2 = 0;
  v3 = dword_65A522C8[8 * a2];
  for ( i = this + 79; *(i - 67) != v3; i += 268 )
  {
    if ( *i == v3 )
    {
      ++v2;
      break;
    }
    if ( i[67] == v3 )
    {
      v2 += 2;
      break;
    }
    if ( i[134] == v3 )
    {
      v2 += 3;
      break;
    }
    v2 += 4;
    if ( v2 >= 44 )
      return 0;
  }
  if ( v2 < 44 )
    return this + 67 * v2 + 11;
  else
    return 0;
}
// 65A522C8: using guessed type int dword_65A522C8[];

//----- (6578D1F0) --------------------------------------------------------
_DWORD *__thiscall InputDevice_FindByHandle(_DWORD *this, int a1)
{
  int v2; // edx
  int *v3; // eax

  v2 = 0;
  v3 = &dword_65A522C4;
  while ( *v3 != a1 )
  {
    v3 += 8;
    ++v2;
    if ( (int)v3 >= (int)&dword_65A52844 )
      return 0;
  }
  return InputBindings_FindActionSlot(this, v2);
}
// 65A522C4: using guessed type int dword_65A522C4;
// 65A52844: using guessed type int dword_65A52844;

//----- (6578D230) --------------------------------------------------------
int __thiscall InputConfig_SaveMouse(int this)
{
  char *v2; // edi
  char *v3; // edi
  char *v4; // edi

  v2 = (char *)dword_65ABF714 + 292;
  sprintf((char *const)dword_65ABF714 + 292, "+%s %d", "MouseInvertY", *(_BYTE *)(this + 28) != 0);
  (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v2);
  v3 = (char *)dword_65ABF714 + 292;
  sprintf((char *const)dword_65ABF714 + 292, "+%s %f", "MouseSensitivity", (double)*(int *)(this + 36));
  (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v3);
  nullsub_3(dword_65ABF714);
  v4 = (char *)dword_65ABF714 + 292;
  sprintf((char *const)dword_65ABF714 + 292, "+%s %f", "InputRate", (double)*(int *)(this + 32));
  (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v4);
  return (*(int (__cdecl **)(const char *))(g_pILTClient + 20))("autoexec.cfg");
}
// 6573BC80: using guessed type int __thiscall nullsub_3(_DWORD);

//----- (6578D300) --------------------------------------------------------
int __thiscall InputConfig_ToggleRunLock(int *this)
{
  int result; // eax

  result = LTClient_SendMessage((int)"RunLock", *(this + 10));
  *(this + 10) = result;
  return result;
}

//----- (6578D320) --------------------------------------------------------
int InputConfig_RegisterActions()
{
  int *v0; // edi
  int v1; // esi
  const char *v2; // eax
  char Buffer[64]; // [esp+Ch] [ebp-44h] BYREF

  (*(void (__cdecl **)(const char *))(g_pILTClient + 476))("##mouse");
  (*(void (__cdecl **)(const char *))(g_pILTClient + 476))("##keyboard");
  v0 = &dword_65A522C4;
  do
  {
    v1 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v0[1]);
    if ( v1 )
      v2 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v1);
    else
      v2 = byte_659A8B98;
    sprintf(Buffer, "AddAction %s %i", v2, *v0);
    (*(void (__cdecl **)(char *))(g_pILTClient + 520))(Buffer);
    if ( v1 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v1);
    v0 += 8;
  }
  while ( (int)v0 < (int)&dword_65A52844 );
  (*(void (__cdecl **)(const char *))(g_pILTClient + 520))("AddAction Axis3 -3");
  (*(void (__cdecl **)(const char *))(g_pILTClient + 520))("AddAction Axis2 -2");
  return (*(int (__cdecl **)(const char *))(g_pILTClient + 520))("AddAction Axis1 -1");
}
// 65A522C4: using guessed type int dword_65A522C4;
// 65A52844: using guessed type int dword_65A52844;

//----- (6578D440) --------------------------------------------------------
int __stdcall sub_6578D440(int a1, const char *a2)
{
  int v2; // eax
  int v3; // edi
  bool v4; // cl
  int v5; // esi

  v2 = (*(int (__cdecl **)(int))(g_pILTClient + 460))(a1);
  v3 = 0;
  v4 = 0;
  v5 = v2;
  if ( v2 )
  {
    do
    {
      if ( v4 )
        break;
      if ( v5 != -136 )
      {
        v4 = strcmp(a2, (const char *)(v5 + 136)) == 0;
        if ( v4 )
          v3 = *(_DWORD *)(v5 + 132);
      }
      v5 = *(_DWORD *)(v5 + 212);
    }
    while ( v5 );
    (*(void (__cdecl **)(int))(g_pILTClient + 464))(v2);
  }
  return v3;
}

//----- (6578D4E0) --------------------------------------------------------
double __thiscall sub_6578D4E0(_DWORD *this)
{
  int v2; // eax

  v2 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("MouseSensitivity");
  *(this + 72) = v2;
  if ( !v2 )
    return (float)10.0;
  return (float)((double (__thiscall *)(int, int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v2);
}

//----- (6578D530) --------------------------------------------------------
int __thiscall PlayerData_Ctor(int this)
{
  int v2; // esi
  int i; // ebx

  std::string::string((void *)this);
  v2 = this + 44;
  for ( i = 43; i >= 0; --i )
  {
    *(_DWORD *)v2 = 0;
    *(_DWORD *)(v2 + 4) = 0;
    memset((void *)(v2 + 8), 0, 0x80u);
    memset((void *)(v2 + 136), 0, 0x80u);
    *(_WORD *)(v2 + 264) = 0;
    v2 += 268;
  }
  std::string::operator=(this, byte_659A8B98);
  *(_DWORD *)(this + 11836) = 0;
  *(_BYTE *)(this + 28) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 36) = 10;
  return this;
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (6578D5F0) --------------------------------------------------------
int __thiscall InputConfig_LoadBindings(char *this)
{
  char *v2; // esi
  int *v3; // edi
  char *v4; // ebx
  const char *v5; // eax
  const char *v6; // eax
  int v7; // edi
  int v8; // eax
  int v9; // esi
  float *v10; // eax
  int v11; // edx
  int v12; // ecx
  int *v13; // eax
  int v14; // eax
  char *v15; // esi
  char *v16; // eax
  char v17; // cl
  char *v18; // esi
  char *v19; // eax
  char v20; // cl
  char *v21; // esi
  int v22; // edi
  const char *v23; // eax
  const char *v24; // eax
  int result; // eax
  int v26; // [esp+Ch] [ebp-28h]
  int v27; // [esp+10h] [ebp-24h]
  int v28; // [esp+14h] [ebp-20h]
  int v29; // [esp+14h] [ebp-20h]
  char *Destination; // [esp+18h] [ebp-1Ch]
  int i; // [esp+1Ch] [ebp-18h]
  float *v32; // [esp+20h] [ebp-14h]
  _DWORD *ActionSlot; // [esp+24h] [ebp-10h]
  const char **v34; // [esp+28h] [ebp-Ch]
  int v35; // [esp+28h] [ebp-Ch]
  int v37; // [esp+30h] [ebp-4h]

  memset(this + 44, 0, 0x2E10u);
  v37 = 0;
  Destination = this + 180;
  for ( i = 0; i < 2; ++i )
  {
    v2 = Destination;
    v3 = dword_65A522C8;
    v4 = this + 48;
    v34 = (const char **)&(&off_65A522D8)[i];
    do
    {
      *((_DWORD *)v4 - 1) = *(v3 - 2);
      *(_DWORD *)v4 = *v3;
      v5 = *(v34 - 2);
      if ( v2 )
      {
        if ( !v5 )
          v5 = byte_659A8B98;
        strncpy(v2, v5, 0x3Fu);
        v2[63] = 0;
      }
      v6 = *v34;
      if ( v2 != (char *)128 )
      {
        if ( !v6 )
          v6 = byte_659A8B98;
        strncpy(v2 - 128, v6, 0x3Fu);
        *(v2 - 65) = 0;
      }
      v34 += 8;
      *((_WORD *)v4 + 130) = *((_WORD *)v3 + 2);
      v3 += 8;
      v2 += 268;
      v4 += 268;
    }
    while ( (int)v3 < (int)dword_65A52848 );
    v7 = dword_65A53FE0[i];
    v27 = v7;
    v8 = (*(int (__cdecl **)(int))(g_pILTClient + 432))(v7);
    v26 = v8;
    if ( v8 )
    {
      v9 = v8;
      v35 = v8;
      do
      {
        v10 = *(float **)(v9 + 320);
        v32 = v10;
        if ( v10 )
        {
          while ( 2 )
          {
            v11 = *(_DWORD *)v10;
            v12 = 0;
            v13 = (int *)&unk_65A522E4;
            while ( v11 != *(v13 - 8) )
            {
              if ( v11 == *v13 )
              {
                ++v12;
                break;
              }
              if ( v11 == v13[8] )
              {
                v12 += 2;
                break;
              }
              if ( v11 == v13[16] )
              {
                v12 += 3;
                break;
              }
              v13 += 32;
              v12 += 4;
              if ( (int)v13 >= (int)&dword_65A52864 )
                goto LABEL_70;
            }
            if ( v12 < 44 )
            {
              ActionSlot = InputBindings_FindActionSlot(this, v12);
              v14 = sub_6578D440(v7, (const char *)(v9 + 100));
              if ( v14 == 8 || v14 == 9 )
              {
                v21 = this + v37 * 4 + 180;
                v22 = 44;
                do
                {
                  if ( !strcmp(v21, (const char *)(v35 + 200)) )
                  {
                    if ( v21 )
                    {
                      strncpy(v21, byte_659A8B98, 0x3Fu);
                      v21[63] = 0;
                    }
                    if ( v21 != (char *)128 )
                    {
                      strncpy(v21 - 128, byte_659A8B98, 0x3Fu);
                      *(v21 - 65) = 0;
                    }
                  }
                  v21 += 268;
                  --v22;
                }
                while ( v22 );
                v23 = (const char *)(v35 + 100);
                if ( &ActionSlot[v37] != (_DWORD *)-8 )
                {
                  if ( v35 == -100 )
                    v23 = byte_659A8B98;
                  strncpy((char *)&ActionSlot[v37 + 2], v23, 0x3Fu);
                  HIBYTE(ActionSlot[v37 + 17]) = 0;
                }
                v24 = (const char *)(v35 + 200);
                if ( &ActionSlot[v37] != (_DWORD *)-136 )
                {
                  if ( v35 == -200 )
                    v24 = byte_659A8B98;
                  strncpy((char *)&ActionSlot[v37 + 34], v24, 0x3Fu);
                  HIBYTE(ActionSlot[v37 + 49]) = 0;
                }
              }
              else if ( v7 == 2 && v14 == 3 )
              {
                if ( v32[10] <= 0.0 )
                {
                  if ( v32[10] < 0.0 )
                  {
                    v18 = this + v37 * 4 + 180;
                    v29 = 44;
                    do
                    {
                      if ( !strcmp(v18, word_659C0B1C) )
                      {
                        if ( v18 )
                        {
                          strncpy(v18, byte_659A8B98, 0x3Fu);
                          v18[63] = 0;
                        }
                        if ( v18 != (char *)128 )
                        {
                          strncpy(v18 - 128, byte_659A8B98, 0x3Fu);
                          *(v18 - 65) = 0;
                        }
                      }
                      v18 += 268;
                      --v29;
                    }
                    while ( v29 );
                    strcpy((char *)&ActionSlot[v37 + 34], "#D");
                    v19 = byte_65ABC630;
                    do
                    {
                      v20 = *v19;
                      *((_BYTE *)ActionSlot + v37 * 4 - (_DWORD)byte_65ABC630 + (_DWORD)v19 + 8) = *v19;
                      ++v19;
                    }
                    while ( v20 );
                  }
                }
                else
                {
                  v15 = this + v37 * 4 + 180;
                  v28 = 44;
                  do
                  {
                    if ( !strcmp(v15, word_659C0B00) )
                    {
                      if ( v15 )
                      {
                        strncpy(v15, byte_659A8B98, 0x3Fu);
                        v15[63] = 0;
                      }
                      if ( v15 != (char *)128 )
                      {
                        strncpy(v15 - 128, byte_659A8B98, 0x3Fu);
                        *(v15 - 65) = 0;
                      }
                    }
                    v15 += 268;
                    --v28;
                  }
                  while ( v28 );
                  strcpy((char *)&ActionSlot[v37 + 34], "#U");
                  v16 = byte_65ABC610;
                  do
                  {
                    v17 = *v16;
                    *((_BYTE *)ActionSlot + v37 * 4 - (_DWORD)byte_65ABC610 + (_DWORD)v16 + 8) = *v16;
                    ++v16;
                  }
                  while ( v17 );
                }
              }
              v9 = v35;
              v7 = v27;
              v32 = (float *)*((_DWORD *)v32 + 11);
              if ( v32 )
              {
                v10 = v32;
                continue;
              }
            }
            break;
          }
        }
LABEL_70:
        v9 = *(_DWORD *)(v9 + 324);
        v35 = v9;
      }
      while ( v9 );
      (*(void (__cdecl **)(int))(g_pILTClient + 436))(v26);
    }
    v37 += 16;
    Destination += 64;
    result = i * 4 + 4;
  }
  return result;
}
// 65A522C8: using guessed type int dword_65A522C8[];
// 65A522D8: using guessed type char *off_65A522D8;
// 65A52848: using guessed type int dword_65A52848[6];
// 65A52864: using guessed type int dword_65A52864;
// 65A53FE0: using guessed type int dword_65A53FE0[];

//----- (6578DA80) --------------------------------------------------------
int __usercall InputConfig_LoadMouseSettings@<eax>(int a1@<ecx>, double a2@<st0>)
{
  _DWORD *v3; // edi
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int result; // eax
  float v8; // [esp+8h] [ebp-4h]

  *(_BYTE *)(a1 + 28) = CVar_GetBoolDefault(dword_65ABF714, (int)"MouseInvertY", 0);
  v3 = dword_65ABF714;
  v4 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("InputRate");
  v3[72] = v4;
  if ( v4 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v4);
  else
    a2 = 15.0;
  v8 = a2;
  v5 = (int)v8;
  *(_DWORD *)(a1 + 32) = v5;
  if ( v5 < 0 )
    *(_DWORD *)(a1 + 32) = 0;
  if ( *(int *)(a1 + 32) > 100 )
    *(_DWORD *)(a1 + 32) = 100;
  v6 = (int)sub_6578D4E0(dword_65ABF714);
  *(_DWORD *)(a1 + 36) = v6;
  if ( v6 < 0 )
    *(_DWORD *)(a1 + 36) = 0;
  result = 20;
  if ( *(int *)(a1 + 36) > 20 )
    *(_DWORD *)(a1 + 36) = 20;
  return result;
}

//----- (6578DB30) --------------------------------------------------------
int sub_6578DB30()
{
  int *v0; // ebx
  int v1; // eax
  int v2; // edi
  int *v3; // esi
  int v4; // ecx
  int v5; // edx
  int *v6; // eax
  int v7; // eax
  int v9; // [esp+Ch] [ebp-8h]

  v0 = dword_65A53FE0;
  do
  {
    v1 = (*(int (__cdecl **)(int))(g_pILTClient + 432))(*v0);
    v9 = v1;
    if ( v1 )
    {
      v2 = v1;
      do
      {
        v3 = *(int **)(v2 + 320);
        if ( v3 )
        {
          do
          {
            v4 = *v3;
            v5 = 0;
            v6 = (int *)&unk_65A522E4;
            while ( v4 != *(v6 - 8) )
            {
              if ( v4 == *v6 )
              {
                ++v5;
                break;
              }
              if ( v4 == v6[8] )
              {
                v5 += 2;
                break;
              }
              if ( v4 == v6[16] )
              {
                v5 += 3;
                break;
              }
              v6 += 32;
              v5 += 4;
              if ( (int)v6 >= (int)&dword_65A52864 )
                goto LABEL_21;
            }
            if ( v5 < 44 )
            {
              v7 = sub_6578D440(*v0, (const char *)(v2 + 100));
              if ( v7 == 8 || v7 == 9 || *v0 == 2 && v7 == 3 )
                (*(void (__cdecl **)(int, int))(g_pILTClient + 440))(v2, v2 + 200);
            }
LABEL_21:
            v3 = (int *)v3[11];
          }
          while ( v3 );
          v1 = v9;
        }
        v2 = *(_DWORD *)(v2 + 324);
      }
      while ( v2 );
      (*(void (__cdecl **)(int))(g_pILTClient + 436))(v1);
    }
    ++v0;
  }
  while ( (int)v0 < (int)&dword_65A53FE8 );
  return (*(int (__cdecl **)(const char *))(g_pILTClient + 20))("autoexec.cfg");
}
// 65A52864: using guessed type int dword_65A52864;
// 65A53FE0: using guessed type int dword_65A53FE0[];
// 65A53FE8: using guessed type int dword_65A53FE8;

//----- (6578DC50) --------------------------------------------------------
char *Input_LoadKeyNames()
{
  int *v0; // edi
  char *v1; // esi
  int v2; // esi
  const char *v3; // eax
  int v4; // esi
  const char *v5; // eax
  char *result; // eax

  v0 = dword_65A53FE0;
  v1 = aKeyboard_0;
  do
  {
    (*(void (__cdecl **)(int, char *, int))(g_pILTClient + 468))(*v0, v1, 256);
    v1 += 256;
    ++v0;
  }
  while ( (int)v1 < (int)byte_65ABC610 );
  v2 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 49004);
  if ( !v2
    || (v3 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v2)) == 0 )
  {
    v3 = byte_659A8B98;
  }
  strncpy(byte_65ABC610, v3, 0x1Fu);
  byte_65ABC62F = 0;
  if ( v2 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v2);
  v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 49005);
  if ( !v4
    || (v5 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4)) == 0 )
  {
    v5 = byte_659A8B98;
  }
  result = strncpy(byte_65ABC630, v5, 0x1Fu);
  byte_65ABC64F = 0;
  if ( v4 )
    return (*(char *(__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
  return result;
}
// 65A53FE0: using guessed type int dword_65A53FE0[];
// 65ABC62F: using guessed type char byte_65ABC62F;
// 65ABC64F: using guessed type char byte_65ABC64F;

//----- (6578DD50) --------------------------------------------------------
int __thiscall InputConfig_ApplyBindings(_DWORD *this)
{
  int v1; // ebx
  _DWORD *ActionSlot; // esi
  const char *v3; // edi
  char v4; // al
  int v5; // esi
  const char *v6; // eax
  char *v7; // edx
  char v8; // cl
  int v9; // esi
  const char *v10; // eax
  char *v11; // edx
  char v12; // cl
  int v13; // esi
  const char *v14; // eax
  char *v15; // edx
  char v16; // cl
  int *WindowById; // eax
  int *v18; // eax
  _DWORD *v21; // [esp+14h] [ebp-298h]
  _DWORD *v22; // [esp+18h] [ebp-294h]
  int i; // [esp+1Ch] [ebp-290h]
  int *v24; // [esp+20h] [ebp-28Ch]
  const char *v25; // [esp+24h] [ebp-288h]
  char v26[20]; // [esp+28h] [ebp-284h] BYREF
  char v27[20]; // [esp+228h] [ebp-84h] BYREF
  char v28[20]; // [esp+268h] [ebp-44h] BYREF

  sub_6578DB30();
  v26[0] = 0;
  v28[0] = 0;
  v27[0] = 0;
  v25 = aKeyboard_0;
  v24 = dword_65A53FE0;
  for ( i = 34; i < 66; i += 16 )
  {
    v1 = 0;
    v21 = 0;
    v22 = 0;
    do
    {
      ActionSlot = InputBindings_FindActionSlot(this, v1);
      if ( !ActionSlot )
        goto LABEL_20;
      if ( *v24 != 2 )
        goto LABEL_10;
      if ( !_stricmp((const char *)&ActionSlot[i], word_659C0B00) )
      {
        v21 = ActionSlot;
        goto LABEL_20;
      }
      if ( *v24 == 2 && !_stricmp((const char *)&ActionSlot[i], word_659C0B1C) )
      {
        v22 = ActionSlot;
      }
      else
      {
LABEL_10:
        v3 = (const char *)&ActionSlot[i];
        v4 = ActionSlot[i];
        if ( v4 && v4 != 32 )
        {
          v5 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, ActionSlot[1]);
          if ( v5 )
            v6 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
          else
            v6 = byte_659A8B98;
          v7 = aDeccameradist;
          do
          {
            v8 = *v6;
            *v7++ = *v6++;
          }
          while ( v8 );
          if ( v5 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
          sprintf(v26, "rangebind \"%s\" \"%s\" 0 0 \"%s\"", v25, v3, aDeccameradist);
          (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v26);
        }
      }
LABEL_20:
      ++v1;
    }
    while ( v1 < 44 );
    if ( *v24 == 2 )
    {
      sprintf(v26, "rangebind \"%s\" \"##x-axis\" 0 0 \"Axis1\"", v25);
      (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v26);
      sprintf(v26, "rangebind \"%s\" \"##y-axis\" 0 0 \"Axis2\"", v25);
      (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v26);
      Input_ProcessMouseSensitivity(1.0);
      if ( v21 || v22 )
      {
        v28[0] = 0;
        v27[0] = 0;
        if ( v21 )
        {
          v9 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v21[1]);
          if ( v9 )
            v10 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
          else
            v10 = byte_659A8B98;
          v11 = aDeccameradist;
          do
          {
            v12 = *v10;
            *v11++ = *v10++;
          }
          while ( v12 );
          if ( v9 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v9);
          sprintf(v28, "0.10 255.0 \"%s\"", aDeccameradist);
        }
        if ( v22 )
        {
          v13 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v22[1]);
          if ( v13 )
            v14 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v13);
          else
            v14 = byte_659A8B98;
          v15 = aDeccameradist;
          do
          {
            v16 = *v14;
            *v15++ = *v14++;
          }
          while ( v16 );
          if ( v13 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v13);
          sprintf(v27, "-0.10 -255.0 \"%s\"", aDeccameradist);
        }
        sprintf(v26, "rangebind \"%s\" \"##z-axis\" %s %s", v25, v28, v27);
        (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v26);
      }
    }
    ++v24;
    v25 += 256;
  }
  WindowById = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0);
  if ( WindowById )
    sub_6578EA50(WindowById);
  v18 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 1u);
  if ( v18 )
    sub_65792AC0(v18);
  return (*(int (__cdecl **)(const char *))(g_pILTClient + 20))("autoexec.cfg");
}
// 65A53FE0: using guessed type int dword_65A53FE0[];
// 65ABF708: using guessed type int dword_65ABF708;

//----- (6578E110) --------------------------------------------------------
int __usercall InputMgr_Initialize@<eax>(char *this@<ecx>, double a2@<st0>)
{
  InputConfig_RegisterActions();
  InputConfig_LoadBindings(this);
  InputConfig_ApplyBindings(this);
  InputConfig_LoadMouseSettings((int)this, a2);
  InputConfig_SaveMouse((int)this);
  InputConfig_ToggleRunLock((int *)this);
  *((_DWORD *)this + 2959) = 1;
  return 1;
}

//----- (6578E150) --------------------------------------------------------
int __usercall ShutdownUI_CheckState@<eax>(char *this@<ecx>, double a2@<st0>)
{
  bool v3; // zf
  int result; // eax

  Input_LoadKeyNames();
  v3 = InputMgr_Initialize(this, a2) == 0;
  result = 1;
  if ( v3 )
    return *((_DWORD *)this + 2959);
  return result;
}

//----- (6578E4E0) --------------------------------------------------------
int __thiscall ShutdownUI_LoadTextures(_DWORD *this)
{
  int v2; // eax
  int v4; // eax
  _DWORD var10_1[5]; // [esp+8h] [ebp-10h] BYREF

  v2 = (*(int (__cdecl **)(const char *))(g_pILTClient + 288))("interface\\windows\\shutdown.pcx");
  *(this + 4) = v2;
  if ( !v2 )
    return 0;
  v4 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(2, 2, 0);
  *(this + 5) = v4;
  if ( !v4 )
    return 0;
  var10_1[0] = 0;
  var10_1[1] = 0;
  var10_1[2] = 2;
  var10_1[3] = 2;
  (*(void (__cdecl **)(int, _DWORD *, int))(g_pILTClient + 404))(v4, var10_1, -2143465574);
  (*(void (__cdecl **)(_DWORD))(g_pILTClient + 272))(*(this + 5));
  (*(void (__cdecl **)(_DWORD, _DWORD))(g_pILTClient + 412))(*(this + 5), 1.0);
  return 1;
}

//----- (6578EA50) --------------------------------------------------------
void __thiscall sub_6578EA50(int *this)
{
  _DWORD *WindowById; // esi
  char *v3; // eax
  char *v4; // eax
  char *v5; // eax
  char *v6; // eax
  char *v7; // eax
  char *v8; // eax
  char *v9; // eax
  _BYTE v10[28]; // [esp+Ch] [ebp-2Ch] BYREF
  int v11; // [esp+34h] [ebp-4h]

  std::string::string(v10);
  v11 = 0;
  WindowById = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 6u);
  if ( WindowById )
  {
    UIDataSource_GetFormattedString(WindowById, 17, (int)v10);
    v3 = (char *)std::string::c_str(v10);
    UiText_SetValueIfChanged(*(this + 1614), v3, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 18, (int)v10);
    v4 = (char *)std::string::c_str(v10);
    UiText_SetValueIfChanged(*(this + 1615), v4, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 19, (int)v10);
    v5 = (char *)std::string::c_str(v10);
    UiText_SetValueIfChanged(*(this + 1616), v5, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 20, (int)v10);
    v6 = (char *)std::string::c_str(v10);
    UiText_SetValueIfChanged(*(this + 1617), v6, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 21, (int)v10);
    v7 = (char *)std::string::c_str(v10);
    UiText_SetValueIfChanged(*(this + 1618), v7, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 22, (int)v10);
    v8 = (char *)std::string::c_str(v10);
    UiText_SetValueIfChanged(*(this + 1619), v8, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 23, (int)v10);
    v9 = (char *)std::string::c_str(v10);
    UiText_SetValueIfChanged(*(this + 1620), v9, 0, 0);
  }
  v11 = -1;
  std::string::~string(v10);
}
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF708: using guessed type int dword_65ABF708;

//----- (6578ED60) --------------------------------------------------------
char __thiscall CharSlot_SetActiveIndex(_BYTE *this, char a2)
{
  *(this + 44) = a2;
  return a2;
}

//----- (6578ED70) --------------------------------------------------------
char *__thiscall CharSlots_FindByIdAndSetActive(_WORD *this, __int16 a2)
{
  unsigned __int8 v2; // dl
  char *result; // eax

  v2 = 0;
  while ( *(this + 24 * v2 + 2) != a2 )
  {
    if ( ++v2 >= 3u )
      return 0;
  }
  result = (char *)(this + 24 * v2);
  result[44] = v2 + 1;
  return result;
}

//----- (6578F1A0) --------------------------------------------------------
int __thiscall CharSelectUI_DisplayCharacter(int this, int a2, char *a3, int *a4)
{
  int v5; // esi
  int v6; // eax
  char *v7; // eax
  int Dword_this; // eax
  int v9; // ebx
  char *v10; // eax
  int WindowById; // esi
  const char *v12; // ebx
  int v13; // eax
  char *v14; // eax
  int v15; // esi
  int v16; // eax
  _DWORD *v17; // ecx
  int v18; // ebx
  _DWORD *v19; // ecx
  int v20; // edx
  _DWORD *v21; // ecx
  int v22; // ebx
  _DWORD *v23; // ecx
  int v24; // edx
  float v25; // ecx
  float v26; // ecx
  float v27; // ecx
  _BYTE v29[28]; // [esp-34h] [ebp-78h] BYREF
  _BYTE v30[24]; // [esp-18h] [ebp-5Ch] BYREF
  float v31; // [esp+0h] [ebp-44h]
  _BYTE v32[28]; // [esp+14h] [ebp-30h] BYREF
  int v33; // [esp+30h] [ebp-14h]
  int v34; // [esp+34h] [ebp-10h]
  int v35; // [esp+40h] [ebp-4h]

  v5 = a2;
  SharedMem_WriteDword_this(dword_65ABF73C, 2u, a2);
  v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v5 + 14000);
  v34 = v6;
  if ( v6 )
    v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
  else
    v7 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6416), v7, 0, 0);
  Dword_this = SharedMem_ReadDword_this(dword_65ABF73C, 0);
  v9 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, Dword_this + 3100);
  v33 = v9;
  if ( v9 )
    v10 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
  else
    v10 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6412), v10, 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6420), a3, 0, 0);
  a2 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(48, 48, 0);
  GameInput_HandleMouseClick((int **)dword_65ABF6F4, &a2, 1, a4, 0x30u, 0x30u);
  (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6408) + 128))(*(_DWORD *)(this + 6408), a2);
  *(_BYTE *)(*(_DWORD *)(this + 6408) + 256) = 1;
  WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 3u);
  if ( WindowById )
  {
    if ( v34 )
      a3 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v34);
    else
      a3 = (char *)byte_659A8B98;
    if ( v9 )
      v12 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
    else
      v12 = byte_659A8B98;
    a4 = (int *)v30;
    String_AssignFromPtr(v30, (int)a3);
    a3 = v29;
    v35 = 0;
    String_AssignFromPtr(v29, (int)v12);
    v35 = -1;
    v13 = FormatString_Args((int)v32, (int)"{0} - {1}");
    v35 = 1;
    v14 = (char *)std::string::c_str(v13);
    UiText_SetValueIfChanged(*(_DWORD *)(WindowById + 6428), v14, 0, 0);
    v35 = -1;
    std::string::~string(v32);
    v9 = v33;
  }
  if ( v34 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v34);
  if ( v9 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v9);
  v15 = *(_DWORD *)&Data / 2;
  v16 = (int)((double)*(int *)&dword_65A55604 * 0.699999988079071);
  v17 = *(_DWORD **)(this + 6408);
  v17[22] = v16 + 72;
  v18 = v17[19];
  v17[21] = v15 - 24;
  v17[17] = v15 - 24 + v18;
  v17[18] = v16 + 72 + v17[20];
  v19 = *(_DWORD **)(this + 6412);
  v20 = v19[19];
  v19[22] = v16;
  v15 -= 400;
  v19[21] = v15;
  v19[17] = v15 + v20;
  v19[18] = v16 + v19[20];
  v21 = *(_DWORD **)(this + 6416);
  v21[17] = v15 + v21[19];
  v22 = v21[20];
  v21[21] = v15;
  v21[22] = v16 + 20;
  v21[18] = v16 + 20 + v22;
  v23 = *(_DWORD **)(this + 6420);
  v23[17] = v15 + v23[19];
  v16 += 52;
  v24 = v16 + v23[20];
  v23[21] = v15;
  v31 = 5.0;
  v23[22] = v16;
  v23[18] = v24;
  Widget_StartAnimation(*(float **)(this + 6412), v31);
  v31 = v25;
  Widget_StartAnimation(*(float **)(this + 6416), 5.0);
  v31 = v26;
  Widget_StartAnimation(*(float **)(this + 6420), 5.0);
  v31 = v27;
  return UiWidget_StartFadeAnimation(*(float **)(this + 6408), 5.0);
}
// 6578F479: variable 'v25' is possibly undefined
// 6578F48E: variable 'v26' is possibly undefined
// 6578F4A3: variable 'v27' is possibly undefined
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (6578F4E0) --------------------------------------------------------
BOOL __thiscall LoginUI_GetUsernamePtr(_WORD *this, __int16 a2)
{
  return CharSlots_FindByIdAndSetActive(this, a2) != 0;
}

//----- (6578F500) --------------------------------------------------------
char *__thiscall LoginUI_SetFieldText(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -113;
  *(_DWORD *)this = &Packet_ID_UNLOAD_WEAPON_vtbl;
  *((_DWORD *)this + 271) = 0;
  *(this + 1097) = 0;
  *((_DWORD *)this + 275) = 0;
  *((_DWORD *)this + 276) = 0;
  *((_DWORD *)this + 277) = 0;
  *(this + 1113) = 0;
  *(this + 1114) = 0;
  *(this + 1112) = 0;
  *((_WORD *)this + 544) = 0;
  *((_WORD *)this + 546) = 0;
  *((_WORD *)this + 545) = 0;
  *((_WORD *)this + 547) = 0;
  *(this + 1096) = 100;
  *(_DWORD *)(this + 1115) = 0;
  *((_DWORD *)this + 280) = 0;
  *((_DWORD *)this + 281) = 0;
  *(this + 1128) = 0;
  *((_DWORD *)this + 268) = 0;
  *((_DWORD *)this + 269) = 0;
  *(this + 1080) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659C8FD4: using guessed type _UNKNOWN *Packet_ID_UNLOAD_WEAPON_vtbl;

//----- (6578F620) --------------------------------------------------------
int __thiscall List_IncSizeChecked(_DWORD *this, unsigned int a2)
{
  int v2; // eax
  int result; // eax
  _DWORD pExceptionObject[10]; // [esp+8h] [ebp-50h] BYREF
  _BYTE v5[28]; // [esp+30h] [ebp-28h] BYREF
  int v6; // [esp+54h] [ebp-4h]

  v2 = *(this + 2);
  if ( 0x3FFFFFFF - v2 < a2 )
  {
    std::string::string(v5, "list<T> too long");
    v6 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v5);
    pExceptionObject[0] = &off_659BFD28;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
  }
  result = a2 + v2;
  *(this + 2) = result;
  return result;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (6578F760) --------------------------------------------------------
int __thiscall CWindowStatusBar_UpdateStats(int this)
{
  unsigned int i; // eax
  int v3; // eax
  int *v4; // ecx
  int v5; // eax
  unsigned int j; // eax
  unsigned int v7; // edi
  unsigned int k; // eax
  unsigned int v9; // eax
  int *v10; // ecx
  int v11; // eax
  unsigned int m; // eax
  int v13; // eax
  int *v14; // ecx
  int v15; // eax
  int v16; // ecx
  int v17; // ecx
  void (__stdcall *v18)(int); // eax
  __int64 v20; // [esp+4h] [ebp-39Ch]
  int v21; // [esp+8h] [ebp-398h]
  int v22; // [esp+Ch] [ebp-394h]
  int v23; // [esp+Ch] [ebp-394h]
  double v24[2]; // [esp+18h] [ebp-388h] BYREF
  unsigned int v25; // [esp+2Ch] [ebp-374h]
  unsigned int v26; // [esp+18Ch] [ebp-214h]
  _DWORD v27[2]; // [esp+1C4h] [ebp-1DCh] BYREF
  unsigned int v28; // [esp+1CCh] [ebp-1D4h]
  int v29; // [esp+36Ch] [ebp-34h] BYREF
  int v30; // [esp+370h] [ebp-30h]
  int v31; // [esp+374h] [ebp-2Ch]
  _BYTE v32[12]; // [esp+378h] [ebp-28h] BYREF
  unsigned int v33; // [esp+384h] [ebp-1Ch]
  unsigned int v34; // [esp+388h] [ebp-18h]
  char v35[12]; // [esp+38Ch] [ebp-14h] BYREF

  for ( i = 0; i < 0x35; ++i )
  {
    v27[2 * i] = 0;
    v27[2 * i + 1] = 0;
  }
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 1, v27);
  v3 = v27[0];
  if ( v27[0] > g_StatScaleTable[0] )
    v3 = g_StatScaleTable[0];
  if ( v3 != *(_DWORD *)(this + 6544) )
  {
    *(_DWORD *)(this + 6544) = v3;
    v4 = *(int **)(this + 6376);
    *(_DWORD *)(this + 6556) = (unsigned int)(142 * v3) / g_StatScaleTable[0];
    UiItemSlot_FreeTooltipHString(v4);
    sprintf(v35, "%.1f %%", (double)*(unsigned int *)(this + 6544) / (double)(unsigned int)g_StatScaleTable[0] * 100.0);
    v5 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6020, v35);
    if ( v5 )
      UiItemSlot_SetTooltipHString(*(int **)(this + 6376), v5);
  }
  for ( j = 0; j < 0x35; ++j )
  {
    v27[2 * j] = 0;
    v27[2 * j + 1] = 0;
  }
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 1, v27);
  v7 = v28;
  for ( k = 0; k < 0x35; ++k )
  {
    HIDWORD(v24[k]) = 0;
    LODWORD(v24[k + 1]) = 0;
  }
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 1, (_BYTE *)v24 + 4);
  v34 = v26;
  if ( v28 > v26 )
    v7 = v26;
  if ( !v26 )
    v34 = 1;
  if ( v7 != *(_DWORD *)(this + 6552) )
  {
    v9 = 78 * v7 / v34;
    v10 = *(int **)(this + 6380);
    *(_DWORD *)(this + 6552) = v7;
    *(_DWORD *)(this + 6564) = v9;
    UiItemSlot_FreeTooltipHString(v10);
    v33 = v7;
    sprintf(v35, "%.1f %%", (double)v7 / (double)v34);
    v11 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6021, v35);
    if ( v11 )
      UiItemSlot_SetTooltipHString(*(int **)(this + 6380), v11);
  }
  for ( m = 0; m < 0x35; ++m )
  {
    HIDWORD(v24[m]) = 0;
    LODWORD(v24[m + 1]) = 0;
  }
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 1, (_BYTE *)v24 + 4);
  v13 = v25;
  if ( v25 > 0x3E8 )
    v13 = 1000;
  if ( v13 != *(_DWORD *)(this + 6548) )
  {
    *(_DWORD *)(this + 6548) = v13;
    v14 = *(int **)(this + 6384);
    *(_DWORD *)(this + 6560) = 78 * v13 / 0x3E8u;
    UiItemSlot_FreeTooltipHString(v14);
    sprintf(v35, "%.1f %%", (double)*(unsigned int *)(this + 6548) / (double)1000 * 100.0);
    v15 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6022, v35);
    if ( v15 )
      UiItemSlot_SetTooltipHString(*(int **)(this + 6384), v15);
  }
  memset(v32, 0, sizeof(v32));
  v31 = 0;
  v30 = 0;
  v29 = 0;
  SharedMem_ReadBlock_std(159, &v29, (WorldLoginReturnAddrPacked)24);
  v16 = v30;
  if ( v29 != *(_DWORD *)(this + 6568) || v30 != *(_DWORD *)(this + 6572) )
  {
    v22 = v30;
    v21 = v29;
    *(_DWORD *)(this + 6568) = v29;
    *(_DWORD *)(this + 6572) = v16;
    sprintf((char *const)(this + 6724), "%.2u:%.2u", v21, v22);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6396), (char *)(this + 6724), 0, 0);
  }
  v17 = *(_DWORD *)&v32[8];
  if ( *(_DWORD *)v32 != *(_DWORD *)(this + 6576)
    || *(_DWORD *)&v32[4] != *(_DWORD *)(this + 6580)
    || *(_DWORD *)&v32[8] != *(_DWORD *)(this + 6584) )
  {
    v23 = *(_DWORD *)&v32[8];
    v20 = *(_QWORD *)v32;
    *(_QWORD *)(this + 6576) = *(_QWORD *)v32;
    *(_DWORD *)(this + 6584) = v17;
    sprintf((char *const)(this + 6724), "%.2u/%.2u/%u", (_DWORD)v20, HIDWORD(v20), v23);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6400), (char *)(this + 6724), 0, 0);
  }
  **(_DWORD **)(this + 6372) = *((_BYTE *)dword_65ABF734 + 1884029) != 0;
  *(float *)&v34 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  v18 = *(void (__stdcall **)(int))(**(_DWORD **)(this + 6540) + 88);
  if ( *(float *)(this + 6716) < (double)*(float *)&v34 )
  {
    v18(0);
  }
  else
  {
    v18(1);
    *(_DWORD *)(*(_DWORD *)(this + 6540) + 184) = 1;
  }
  return 1;
}
// 659E0CA8: using guessed type int g_StatScaleTable[];
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6578FD40) --------------------------------------------------------
char __thiscall Packet_ID_MOVE_ITEMS_write(int this)
{
  char result; // al
  char v3[4]; // [esp+4h] [ebp-4h] BYREF

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    U16AndU32List_Write(this + 1076, (char *)(this + 12));
    v3[0] = *(_BYTE *)(this + 1088);
    BitStream_WriteBitsCompressed((char *)(this + 12), v3, 8u, 1);
    v3[0] = *(_BYTE *)(this + 1089);
    BitStream_WriteBitsCompressed((char *)(this + 12), v3, 8u, 1);
    v3[0] = *(_BYTE *)(this + 1090);
    BitStream_WriteBitsCompressed((char *)(this + 12), v3, 8u, 1);
    v3[0] = *(_BYTE *)(this + 1091);
    BitStream_WriteBitsCompressed((char *)(this + 12), v3, 8u, 1);
    return 1;
  }
  return result;
}

//----- (6578FDE0) --------------------------------------------------------
char __thiscall Packet_ID_UNLOAD_WEAPON_read(int this, int a2)
{
  char result; // al
  _BYTE *v4; // edi

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1076));
    v4 = (_BYTE *)(this + 1080);
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1080), 8u, 1);
    if ( *(_BYTE *)(this + 1080) == 2 )
      ItemEntryWithId_Read((char *)(this + 1084), (unsigned int *)(this + 12));
    if ( *v4 == 1 || *v4 == 2 )
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    return 1;
  }
  return result;
}

//----- (6578FE50) --------------------------------------------------------
char __thiscall Packet_ID_UNLOAD_WEAPON_write(int this)
{
  char result; // al
  char v3; // al
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1076));
    v4[0] = *(_BYTE *)(this + 1080);
    BitStream_WriteBitsCompressed((char *)(this + 12), v4, 8u, 1);
    if ( *(_BYTE *)(this + 1080) == 2 )
      ItemStructAPlus_u32_write((unsigned __int16 *)(this + 1084), (char *)(this + 12));
    v3 = *(_BYTE *)(this + 1080);
    if ( v3 == 1 || v3 == 2 )
      BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    return 1;
  }
  return result;
}

//----- (6578FF30) --------------------------------------------------------
_DWORD *LoginUI_GetPasswordPtr()
{
  _DWORD *result; // eax

  result = operator new(0xCu);
  if ( result )
    *result = result;
  if ( result != (_DWORD *)-4 )
    result[1] = result;
  return result;
}

//----- (6578FF50) --------------------------------------------------------
void __thiscall LoginUI_SetPassword(int this)
{
  _DWORD **v2; // ecx
  _DWORD *v3; // eax
  _DWORD *v4; // edi

  v2 = *(_DWORD ***)(this + 4);
  v3 = *v2;
  *v2 = v2;
  *(_DWORD *)(*(_DWORD *)(this + 4) + 4) = *(_DWORD *)(this + 4);
  *(_DWORD *)(this + 8) = 0;
  if ( v3 != *(_DWORD **)(this + 4) )
  {
    do
    {
      v4 = (_DWORD *)*v3;
      operator delete(v3);
      v3 = v4;
    }
    while ( v4 != *(_DWORD **)(this + 4) );
  }
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
}

//----- (6578FFA0) --------------------------------------------------------
_DWORD *__stdcall ListNode_Create3(int a1, int a2, _DWORD *a3)
{
  _DWORD *result; // eax

  result = operator new(0xCu);
  if ( result )
    *result = a1;
  if ( result != (_DWORD *)-4 )
    result[1] = a2;
  if ( result != (_DWORD *)-8 )
    result[2] = *a3;
  return result;
}

//----- (65790080) --------------------------------------------------------
int __thiscall LoginUI_ClearFields(int *this, _DWORD *a2)
{
  int v3; // edi
  _DWORD *v4; // ebx
  int result; // eax

  v3 = *(this + 1);
  v4 = ListNode_Create3(v3, *(_DWORD *)(v3 + 4), a2);
  result = List_IncSizeChecked(this, 1u);
  *(_DWORD *)(v3 + 4) = v4;
  *(_DWORD *)v4[1] = v4;
  return result;
}

//----- (65790840) --------------------------------------------------------
void __thiscall LoginPacket_InitPasswordPtr(_DWORD *this)
{
  *(this + 1) = LoginUI_GetPasswordPtr();
  *(this + 2) = 0;
}

//----- (65790870) --------------------------------------------------------
char *__thiscall Packet_ID_MOVE_ITEMS_ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -118;
  *(_DWORD *)this = &off_659C9024;
  *((_DWORD *)this + 270) = LoginUI_GetPasswordPtr();
  *((_DWORD *)this + 271) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1088) = 0;
  *(this + 1089) = 0;
  *(this + 1090) = 0;
  *(this + 1091) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659C9024: using guessed type void *off_659C9024;

//----- (65790910) --------------------------------------------------------
char __thiscall Packet_ID_MOVE_ITEMS_read(int this, int a2)
{
  char result; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    Read_u32c_list_u16count((int *)(this + 1076), (unsigned int *)(this + 12));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1088), 8u, 1);
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1089), 8u, 1);
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1090), 8u, 1);
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1091), 8u, 1);
    return 1;
  }
  return result;
}

//----- (657909A0) --------------------------------------------------------
int __thiscall LoginPacket_Dtor(_DWORD *this)
{
  LoginUI_SetPassword((int)(this + 269));
  *this = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 3));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (65792AC0) --------------------------------------------------------
void __thiscall sub_65792AC0(int *this)
{
  _DWORD *WindowById; // esi
  char *v3; // eax
  char *v4; // eax
  char *v5; // eax
  char *v6; // eax
  char *v7; // eax
  char *v8; // eax
  char *v9; // eax
  char *v10; // eax
  _BYTE v11[28]; // [esp+Ch] [ebp-2Ch] BYREF
  int v12; // [esp+34h] [ebp-4h]

  std::string::string(v11);
  v12 = 0;
  WindowById = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 6u);
  if ( WindowById )
  {
    UIDataSource_GetFormattedString(WindowById, 24, (int)v11);
    v3 = (char *)std::string::c_str(v11);
    UiText_SetValueIfChanged(*(this + 1601), v3, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 25, (int)v11);
    v4 = (char *)std::string::c_str(v11);
    UiText_SetValueIfChanged(*(this + 1602), v4, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 26, (int)v11);
    v5 = (char *)std::string::c_str(v11);
    UiText_SetValueIfChanged(*(this + 1603), v5, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 27, (int)v11);
    v6 = (char *)std::string::c_str(v11);
    UiText_SetValueIfChanged(*(this + 1604), v6, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 28, (int)v11);
    v7 = (char *)std::string::c_str(v11);
    UiText_SetValueIfChanged(*(this + 1606), v7, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 29, (int)v11);
    v8 = (char *)std::string::c_str(v11);
    UiText_SetValueIfChanged(*(this + 1605), v8, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 30, (int)v11);
    v9 = (char *)std::string::c_str(v11);
    UiText_SetValueIfChanged(*(this + 1607), v9, 0, 0);
    UIDataSource_GetFormattedString(WindowById, 31, (int)v11);
    v10 = (char *)std::string::c_str(v11);
    UiText_SetValueIfChanged(*(this + 1608), v10, 0, 0);
  }
  v12 = -1;
  std::string::~string(v11);
}
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65792E10) --------------------------------------------------------
char __thiscall UILayout_GetSlotPosition(_DWORD *this, unsigned __int8 a2, _DWORD *a3, _DWORD *a4)
{
  int v4; // eax
  _DWORD *v5; // edx

  LOBYTE(v4) = a2;
  if ( (unsigned __int8)(a2 - 5) <= 8u )
  {
    v5 = this + a2 + 1588;
    v4 = *v5;
    if ( *v5 )
    {
      *a3 = *(_DWORD *)(v4 + 84) + *(this + 1561);
      v4 = *(_DWORD *)(*v5 + 88);
      *a4 = v4 + *(this + 1562);
    }
  }
  return v4;
}

//----- (65793810) --------------------------------------------------------
int __thiscall DynArray_Init(_DWORD *this, int a2)
{
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 4) = a2;
  *(this + 3) = 0;
  return 0;
}

//----- (65793F60) --------------------------------------------------------
void __cdecl __noreturn ThrowLengthError_Vector3(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65794000) --------------------------------------------------------
void __cdecl __noreturn ThrowLengthError_Vector4(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657940A0) --------------------------------------------------------
void __cdecl __noreturn sub_657940A0(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65794150) --------------------------------------------------------
void __cdecl __noreturn Vector_ThrowLengthError(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657941F0) --------------------------------------------------------
void __cdecl __noreturn Vector_ThrowLengthError2(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657942A0) --------------------------------------------------------
void __cdecl __noreturn Vector_ThrowLengthError3(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65794350) --------------------------------------------------------
void __cdecl __noreturn sub_65794350(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65794400) --------------------------------------------------------
void __cdecl __noreturn sub_65794400(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657944B0) --------------------------------------------------------
void __cdecl __noreturn sub_657944B0(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65794550) --------------------------------------------------------
void __cdecl __noreturn sub_65794550(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657946B0) --------------------------------------------------------
void __cdecl __noreturn sub_657946B0(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65794750) --------------------------------------------------------
void __cdecl __noreturn sub_65794750(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65794890) --------------------------------------------------------
void __cdecl __noreturn sub_65794890(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65794950) --------------------------------------------------------
void __cdecl __noreturn ThrowLengthError_Vector5(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65794A50) --------------------------------------------------------
void __cdecl __noreturn ThrowLengthError_Vector6(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65794E50) --------------------------------------------------------
void *__cdecl sub_65794E50(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0xDC )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(220 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65794EB0) --------------------------------------------------------
void *__cdecl Vector8_Allocate(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 8 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(8 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65794F10) --------------------------------------------------------
void *__cdecl Vector68_Allocate(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x44 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(68 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65794F70) --------------------------------------------------------
void *__cdecl sub_65794F70(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0xC0 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(192 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65794FD0) --------------------------------------------------------
void *__cdecl SafeNewArray_CheckOverflow(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( !(0xFFFFFFFF / a1) )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65795030) --------------------------------------------------------
void *__cdecl sub_65795030(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x28 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(40 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65795090) --------------------------------------------------------
void *__cdecl sub_65795090(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x1BC )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(444 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (657950F0) --------------------------------------------------------
void *__cdecl sub_657950F0(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x3C )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(60 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65795150) --------------------------------------------------------
void *__cdecl sub_65795150(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0xB0 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(176 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (657951B0) --------------------------------------------------------
void *__cdecl sub_657951B0(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x174 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(372 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65795270) --------------------------------------------------------
void *__cdecl sub_65795270(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x48 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(72 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (657952D0) --------------------------------------------------------
void *__cdecl sub_657952D0(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x140 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(320 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65795390) --------------------------------------------------------
void *__cdecl sub_65795390(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x34 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(52 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (657953F0) --------------------------------------------------------
void *__cdecl Vector88_Allocate(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x58 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(88 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (657954B0) --------------------------------------------------------
void *__cdecl Vector8_Allocate2(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 8 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(8 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65795DD0) --------------------------------------------------------
_DWORD *__cdecl sub_65795DD0(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; ++result )
    *result = *a3;
  return result;
}

//----- (65796AD0) --------------------------------------------------------
char *__cdecl sub_65796AD0(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax
  const void *v5; // esi
  void *v6; // edi

  v3 = a1;
  result = a3;
  while ( v3 != a2 )
  {
    v5 = v3;
    v6 = result;
    v3 += 320;
    result += 320;
    qmemcpy(v6, v5, 0x140u);
  }
  return result;
}

//----- (65796B10) --------------------------------------------------------
char *__cdecl sub_65796B10(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax
  const void *v5; // esi
  void *v6; // edi

  v3 = a1;
  result = a3;
  while ( v3 != a2 )
  {
    v5 = v3;
    v6 = result;
    v3 += 52;
    result += 52;
    qmemcpy(v6, v5, 0x34u);
  }
  return result;
}

//----- (65796B70) --------------------------------------------------------
_DWORD *__cdecl sub_65796B70(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 2 )
  {
    *result = *v3;
    result[1] = v3[1];
    v3 += 2;
  }
  return result;
}

//----- (65796D90) --------------------------------------------------------
_DWORD *__cdecl Pair_CopyRange(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 2 )
  {
    if ( result )
    {
      *result = *v3;
      result[1] = v3[1];
    }
    v3 += 2;
  }
  return result;
}

//----- (65796DC0) --------------------------------------------------------
char *__cdecl sub_65796DC0(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 52 )
  {
    if ( result )
      qmemcpy(result, v3, 0x34u);
    v3 += 52;
  }
  return result;
}

//----- (65796E10) --------------------------------------------------------
_DWORD *__cdecl Pair_CopyRange2(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 2 )
  {
    if ( result )
    {
      *result = *v3;
      result[1] = v3[1];
    }
    v3 += 2;
  }
  return result;
}

//----- (65796E40) --------------------------------------------------------
char *__cdecl sub_65796E40(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 52 )
  {
    if ( result )
      qmemcpy(result, v3, 0x34u);
    v3 += 52;
  }
  return result;
}

//----- (65796E80) --------------------------------------------------------
int __cdecl sub_65796E80(void *Source, int a2, int a3)
{
  int v3; // eax
  int v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = a3 - 4 * v3;
  if ( v3 > 0 )
    memmove_s((void *const)(a3 - 4 * v3), 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65797080) --------------------------------------------------------
char __thiscall sub_65797080(_DWORD *this, unsigned int a2)
{
  char *v4; // eax
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( !a2 )
    return 0;
  if ( a2 > 0x1FFFFFFF )
    ThrowLengthError_Vector3(v5, v6);
  v4 = (char *)Vector8_Allocate(a2);
  *(this + 1) = v4;
  *(this + 2) = v4;
  *(this + 3) = &v4[8 * a2];
  return 1;
}
// 657970A9: variable 'v5' is possibly undefined
// 657970A9: variable 'v6' is possibly undefined

//----- (657970F0) --------------------------------------------------------
char __thiscall Vector68_Reserve(_DWORD *this, unsigned int a2)
{
  char *v4; // eax
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( !a2 )
    return 0;
  if ( a2 > 0x3C3C3C3 )
    ThrowLengthError_Vector4(v5, v6);
  v4 = (char *)Vector68_Allocate(a2);
  *(this + 1) = v4;
  *(this + 2) = v4;
  *(this + 3) = &v4[68 * a2];
  return 1;
}
// 65797119: variable 'v5' is possibly undefined
// 65797119: variable 'v6' is possibly undefined

//----- (657975C0) --------------------------------------------------------
char __thiscall sub_657975C0(_DWORD *this, unsigned int a2)
{
  char *v4; // eax
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( !a2 )
    return 0;
  if ( a2 > 0xCCCCCC )
    sub_65794750(v5, v6);
  v4 = (char *)sub_657952D0(a2);
  *(this + 1) = v4;
  *(this + 2) = v4;
  *(this + 3) = &v4[320 * a2];
  return 1;
}
// 657975E9: variable 'v5' is possibly undefined
// 657975E9: variable 'v6' is possibly undefined

//----- (65797690) --------------------------------------------------------
char __thiscall Vector52_Reserve(_DWORD *this, unsigned int a2)
{
  char *v4; // eax
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( !a2 )
    return 0;
  if ( a2 > 0x4EC4EC4 )
    sub_65794890(v5, v6);
  v4 = (char *)sub_65795390(a2);
  *(this + 1) = v4;
  *(this + 2) = v4;
  *(this + 3) = &v4[52 * a2];
  return 1;
}
// 657976B9: variable 'v5' is possibly undefined
// 657976B9: variable 'v6' is possibly undefined

//----- (65797940) --------------------------------------------------------
char *__stdcall Array_MoveToDestination(void *Source, int a2, char *Destination)
{
  int v3; // eax
  char *v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = &Destination[4 * v3];
  if ( v3 )
    memmove_s(Destination, 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65797AB0) --------------------------------------------------------
char *__cdecl Array320_Copy(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 320 )
  {
    if ( result )
      qmemcpy(result, v3, 0x140u);
    v3 += 320;
  }
  return result;
}

//----- (65797E80) --------------------------------------------------------
_DWORD *__stdcall Pair_CopyRangeWrapper(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return Pair_CopyRange2(a1, a2, a3);
}

//----- (65797EB0) --------------------------------------------------------
char *__thiscall Vector_InitWithData(void *this, char *a2, char *a3, char *a4)
{
  return sub_65796E40(a2, a3, a4);
}

//----- (65797EE0) --------------------------------------------------------
BOOL __thiscall Widget_InitAndProcess(_DWORD *this, int a2, int a3)
{
  sub_65769FC0(this, 0, (int)&off_65A560A4, 0);
  DynArray_Init(this, a3);
  return sub_6576A310(this, a2);
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (65797F40) --------------------------------------------------------
char *__stdcall Array_MoveElements(void *Source, int a2, char *Destination)
{
  int v3; // eax
  char *v4; // esi

  v3 = (a2 - (int)Source) >> 2;
  v4 = &Destination[4 * v3];
  if ( v3 )
    memmove_s(Destination, 4 * v3, Source, 4 * v3);
  return v4;
}

//----- (65797F80) --------------------------------------------------------
int __thiscall DwordVector_CopyFrom(int this, int a2)
{
  unsigned int v3; // eax
  int v5; // ecx
  unsigned int v6; // edx
  unsigned int v7; // ebx
  void *v8; // ebx

  if ( this != a2 )
  {
    v3 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) >> 2;
    if ( !v3 )
    {
      Vector_Clear((_DWORD *)this);
      return this;
    }
    v5 = *(_DWORD *)(this + 4);
    v6 = (*(_DWORD *)(this + 8) - v5) >> 2;
    if ( v3 <= v6 )
    {
      Vector_MoveElements(*(void **)(a2 + 4), *(_DWORD *)(a2 + 8), *(char **)(this + 4));
      *(_DWORD *)(this + 8) = *(_DWORD *)(this + 4) + 4 * ((*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) >> 2);
      return this;
    }
    if ( v5 )
      v7 = (*(_DWORD *)(this + 12) - v5) >> 2;
    else
      v7 = 0;
    if ( v3 <= v7 )
    {
      v8 = (void *)(*(_DWORD *)(a2 + 4) + 4 * v6);
      Vector_MoveElements(*(void **)(a2 + 4), (int)v8, *(char **)(this + 4));
      *(_DWORD *)(this + 8) = Array_MoveToDestination(v8, *(_DWORD *)(a2 + 8), *(char **)(this + 8));
      return this;
    }
    if ( v5 )
      operator delete(*(void **)(this + 4));
    if ( Vector_Reserve((_DWORD *)this, (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) >> 2) )
      *(_DWORD *)(this + 8) = Array_MoveToDestination(*(void **)(a2 + 4), *(_DWORD *)(a2 + 8), *(char **)(this + 4));
  }
  return this;
}

//----- (65798390) --------------------------------------------------------
_DWORD *__thiscall Vector52_CopyCtor(_DWORD *this, int a2)
{
  unsigned int v3; // edi
  char *v4; // eax
  char *v6; // [esp-20h] [ebp-44h]
  char *v7; // [esp-1Ch] [ebp-40h]
  int v8[9]; // [esp+0h] [ebp-24h] BYREF

  v8[5] = (int)v8;
  v8[4] = (int)this;
  v3 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 52;
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( v3 )
  {
    if ( v3 > 0x4EC4EC4 )
      sub_65794890(v8[0], v8[1]);
    v4 = (char *)sub_65795390(v3);
    *(this + 1) = v4;
    *(this + 2) = v4;
    *(this + 3) = &v4[52 * v3];
    v7 = *(char **)(a2 + 8);
    v6 = *(char **)(a2 + 4);
    v8[8] = 0;
    *(this + 2) = sub_65796DC0(v6, v7, v4);
  }
  return this;
}
// 65798300: using guessed type int __thiscall sub_65798300(_DWORD);

//----- (65798460) --------------------------------------------------------
char *__thiscall Vector4_UninitializedCopyWrap(void *this, char *a2, char *a3, char *a4)
{
  return Array320_Copy(a2, a3, a4);
}

//----- (657984D0) --------------------------------------------------------
_DWORD *__stdcall Array4_FillN(_DWORD *a1, int a2, _DWORD *a3)
{
  int v3; // eax
  _DWORD *i; // ecx

  v3 = a2;
  for ( i = a1; v3; ++i )
  {
    *i = *a3;
    --v3;
  }
  return &a1[a2];
}

//----- (65798500) --------------------------------------------------------
void __thiscall Vector_InsertRange(int this, char *Source, unsigned int a3, unsigned int a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  int v7; // edi
  char *v8; // ebx
  int v9; // eax
  unsigned int v10; // ecx
  char *v11; // ebx
  char *v12; // eax
  char *v13; // eax
  void *v14; // eax
  int v15; // edi
  int v16; // eax
  unsigned int v17; // eax
  char *v18; // edi
  int v19; // [esp-4h] [ebp-10h]
  int v20; // [esp+0h] [ebp-Ch]
  unsigned int v21; // [esp+8h] [ebp-4h]

  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 2;
  else
    v6 = 0;
  v7 = a3;
  if ( a3 )
  {
    v8 = *(char **)(this + 8);
    v9 = (int)&v8[-v5] >> 2;
    if ( 0x3FFFFFFF - v9 < a3 )
      sub_65769730(v19, v20);
    if ( v6 >= v9 + a3 )
    {
      if ( (v8 - Source) >> 2 >= a3 )
      {
        v17 = 4 * a3;
        v18 = &v8[-4 * a3];
        a3 = *(_DWORD *)a4;
        a4 = v17;
        *(_DWORD *)(this + 8) = Array_MoveElements(v18, (int)v8, v8);
        sub_65796E80(Source, (int)v18, (int)v8);
        sub_65795DD0(Source, &Source[a4], &a3);
      }
      else
      {
        a3 = *(_DWORD *)a4;
        a4 = 4 * v7;
        Array_MoveElements(Source, (int)v8, &Source[4 * v7]);
        Array4_FillN(*(_DWORD **)(this + 8), v7 - ((*(_DWORD *)(this + 8) - (int)Source) >> 2), &a3);
        v16 = a4;
        *(_DWORD *)(this + 8) += a4;
        sub_65795DD0(Source, (_DWORD *)(*(_DWORD *)(this + 8) - v16), &a3);
      }
    }
    else
    {
      if ( 0x3FFFFFFF - (v6 >> 1) >= v6 )
      {
        v10 = (v6 >> 1) + v6;
        v21 = v10;
      }
      else
      {
        v21 = 0;
        v10 = 0;
      }
      if ( v10 < v9 + a3 )
      {
        v21 = v9 + a3;
        v10 = v9 + a3;
      }
      v11 = (char *)sub_65769850(v10);
      v12 = Array_MoveElements(*(void **)(this + 4), (int)Source, v11);
      v13 = (char *)Array4_FillN(v12, v7, (_DWORD *)a4);
      Array_MoveElements(Source, *(_DWORD *)(this + 8), v13);
      v14 = *(void **)(this + 4);
      v15 = ((*(_DWORD *)(this + 8) - (int)v14) >> 2) + v7;
      if ( v14 )
        operator delete(v14);
      *(_DWORD *)(this + 4) = v11;
      *(_DWORD *)(this + 12) = &v11[4 * v21];
      *(_DWORD *)(this + 8) = &v11[4 * v15];
    }
  }
}
// 6579853E: variable 'v19' is possibly undefined
// 6579853E: variable 'v20' is possibly undefined

//----- (65798BE0) --------------------------------------------------------
char **__thiscall Array52_Erase(char **this, char **a2, char *a3, char *a4)
{
  char *v4; // edx
  char *v5; // ebx
  char **v6; // esi
  char *v7; // eax
  char *v8; // esi
  char *v9; // edi

  v4 = a4;
  v5 = a3;
  v6 = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v7 = *(this + 2);
    if ( a4 != v7 )
    {
      do
      {
        v8 = v4;
        v9 = v5;
        v4 += 52;
        v5 += 52;
        qmemcpy(v9, v8, 0x34u);
      }
      while ( v4 != v7 );
      v6 = a2;
    }
    *(this + 2) = v5;
  }
  return v6;
}

//----- (65798C70) --------------------------------------------------------
int __thiscall SkillData88_CopyFrom(int this, int a2)
{
  Vector52_CopyCtor((_DWORD *)this, a2);
  *(_WORD *)(this + 16) = *(_WORD *)(a2 + 16);
  *(_DWORD *)(this + 20) = *(_DWORD *)(a2 + 20);
  *(_BYTE *)(this + 24) = *(_BYTE *)(a2 + 24);
  *(_DWORD *)(this + 28) = *(_DWORD *)(a2 + 28);
  *(_DWORD *)(this + 32) = *(_DWORD *)(a2 + 32);
  *(_DWORD *)(this + 36) = *(_DWORD *)(a2 + 36);
  *(_DWORD *)(this + 40) = *(_DWORD *)(a2 + 40);
  *(_DWORD *)(this + 44) = *(_DWORD *)(a2 + 44);
  *(_DWORD *)(this + 48) = *(_DWORD *)(a2 + 48);
  *(_DWORD *)(this + 56) = *(_DWORD *)(a2 + 56);
  *(_DWORD *)(this + 60) = *(_DWORD *)(a2 + 60);
  *(_BYTE *)(this + 64) = *(_BYTE *)(a2 + 64);
  *(_DWORD *)(this + 72) = *(_DWORD *)(a2 + 72);
  *(_DWORD *)(this + 76) = *(_DWORD *)(a2 + 76);
  *(_DWORD *)(this + 80) = *(_DWORD *)(a2 + 80);
  *(_DWORD *)(this + 84) = *(_DWORD *)(a2 + 84);
  return this;
}

//----- (65798ED0) --------------------------------------------------------
void __thiscall VectorPair_FreeBuffers(int this)
{
  if ( *(_DWORD *)(this + 1260) )
    operator delete(*(void **)(this + 1260));
  *(_DWORD *)(this + 1260) = 0;
  *(_DWORD *)(this + 1264) = 0;
  *(_DWORD *)(this + 1268) = 0;
  if ( *(_DWORD *)(this + 1244) )
    operator delete(*(void **)(this + 1244));
  *(_DWORD *)(this + 1244) = 0;
  *(_DWORD *)(this + 1248) = 0;
  *(_DWORD *)(this + 1252) = 0;
}

//----- (657990B0) --------------------------------------------------------
void __thiscall sub_657990B0(_DWORD *this)
{
  int v1; // edx

  v1 = *(this + 1);
  if ( v1 != *(this + 2) )
    *(this + 2) = v1;
}
// 657990B0: could not find valid save-restore pair for edi

//----- (657992C0) --------------------------------------------------------
int __thiscall Vector8_Assign(int this, int a2)
{
  unsigned int v3; // eax
  int v5; // ecx
  unsigned int v6; // edx
  unsigned int v7; // ebx
  _DWORD *v8; // ebx

  if ( this != a2 )
  {
    v3 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) >> 3;
    if ( !v3 )
    {
      sub_657990B0((_DWORD *)this);
      return this;
    }
    v5 = *(_DWORD *)(this + 4);
    v6 = (*(_DWORD *)(this + 8) - v5) >> 3;
    if ( v3 <= v6 )
    {
      sub_65796B70(*(_DWORD **)(a2 + 4), *(_DWORD **)(a2 + 8), *(_DWORD **)(this + 4));
      *(_DWORD *)(this + 8) = *(_DWORD *)(this + 4) + 8 * ((*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) >> 3);
      return this;
    }
    if ( v5 )
      v7 = (*(_DWORD *)(this + 12) - v5) >> 3;
    else
      v7 = 0;
    if ( v3 <= v7 )
    {
      v8 = (_DWORD *)(*(_DWORD *)(a2 + 4) + 8 * v6);
      sub_65796B70(*(_DWORD **)(a2 + 4), v8, *(_DWORD **)(this + 4));
      *(_DWORD *)(this + 8) = Pair_CopyRangeWrapper(v8, *(_DWORD **)(a2 + 8), *(_DWORD **)(this + 8));
      return this;
    }
    if ( v5 )
      operator delete(*(void **)(this + 4));
    if ( sub_65797080((_DWORD *)this, (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) >> 3) )
      *(_DWORD *)(this + 8) = Pair_CopyRangeWrapper(*(_DWORD **)(a2 + 4), *(_DWORD **)(a2 + 8), *(_DWORD **)(this + 4));
  }
  return this;
}

//----- (657993B0) --------------------------------------------------------
int __thiscall Vector52_Assign(int this, unsigned int a2)
{
  unsigned int v2; // edi
  int v5; // ebx
  unsigned int v6; // ecx
  unsigned int v7; // eax
  char *v8; // edx
  char *v9; // ecx
  char *v10; // [esp-10h] [ebp-18h]
  char *v11; // [esp-8h] [ebp-10h]

  v2 = a2;
  if ( this != a2 )
  {
    a2 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 52;
    if ( !a2 )
    {
      Array52_Erase((char **)this, (char **)&a2, *(char **)(this + 4), *(char **)(this + 8));
      return this;
    }
    v5 = *(_DWORD *)(this + 4);
    v6 = (*(_DWORD *)(this + 8) - v5) / 52;
    if ( a2 <= v6 )
    {
      sub_65796B10(*(char **)(v2 + 4), *(char **)(v2 + 8), *(char **)(this + 4));
      *(_DWORD *)(this + 8) = *(_DWORD *)(this + 4) + 52 * ((*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 52);
      return this;
    }
    if ( v5 )
      v7 = (*(_DWORD *)(this + 12) - v5) / 52;
    else
      v7 = 0;
    if ( a2 > v7 )
    {
      if ( v5 )
        operator delete(*(void **)(this + 4));
      if ( !Vector52_Reserve((_DWORD *)this, (*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 52) )
        return this;
      v8 = *(char **)(this + 4);
      v9 = *(char **)(v2 + 4);
    }
    else
    {
      v11 = *(char **)(this + 4);
      v10 = *(char **)(v2 + 4);
      a2 = (unsigned int)&v10[52 * v6];
      sub_65796B10(v10, (char *)a2, v11);
      v8 = *(char **)(this + 8);
      v9 = (char *)a2;
    }
    *(_DWORD *)(this + 8) = Vector_InitWithData((void *)this, v9, *(char **)(v2 + 8), v8);
  }
  return this;
}

//----- (65799630) --------------------------------------------------------
void __thiscall PacketBlockState_Reset(_BYTE *this)
{
  int v2; // ecx
  int v3; // edi

  *this = 0;
  *(this + 1) = 0;
  v2 = *((_DWORD *)this + 10);
  if ( v2 != *((_DWORD *)this + 11) )
    *((_DWORD *)this + 11) = v2;
  v3 = *((_DWORD *)this + 14);
  if ( v3 != *((_DWORD *)this + 15) )
    *((_DWORD *)this + 15) = v3;
}

//----- (65799A20) --------------------------------------------------------
int __thiscall PlayerData_CopyFrom(int this, unsigned int a2)
{
  Vector52_Assign(this, a2);
  *(_WORD *)(this + 16) = *(_WORD *)(a2 + 16);
  *(_DWORD *)(this + 20) = *(_DWORD *)(a2 + 20);
  *(_BYTE *)(this + 24) = *(_BYTE *)(a2 + 24);
  *(_DWORD *)(this + 28) = *(_DWORD *)(a2 + 28);
  *(_DWORD *)(this + 32) = *(_DWORD *)(a2 + 32);
  *(_DWORD *)(this + 36) = *(_DWORD *)(a2 + 36);
  *(_DWORD *)(this + 40) = *(_DWORD *)(a2 + 40);
  *(_DWORD *)(this + 44) = *(_DWORD *)(a2 + 44);
  *(_DWORD *)(this + 48) = *(_DWORD *)(a2 + 48);
  *(_DWORD *)(this + 56) = *(_DWORD *)(a2 + 56);
  *(_DWORD *)(this + 60) = *(_DWORD *)(a2 + 60);
  *(_BYTE *)(this + 64) = *(_BYTE *)(a2 + 64);
  *(_DWORD *)(this + 72) = *(_DWORD *)(a2 + 72);
  *(_DWORD *)(this + 76) = *(_DWORD *)(a2 + 76);
  *(_DWORD *)(this + 80) = *(_DWORD *)(a2 + 80);
  *(_DWORD *)(this + 84) = *(_DWORD *)(a2 + 84);
  return this;
}

//----- (65799C00) --------------------------------------------------------
_DWORD *__thiscall PacketBlockHeader_Ctor(_DWORD *this, int a2, int a3, int a4, int a5)
{
  _DWORD *v6; // esi

  v6 = this + 4;
  *(this + 4) = &off_659C48F8;
  *(this + 5) = 0;
  *(this + 6) = 0;
  *(this + 7) = 0;
  *(this + 8) = 0;
  Widget_InitAndProcess(this + 4, 0, 0);
  *v6 = &off_659C91D8;
  *this = a2;
  *(this + 3) = a5;
  *(this + 1) = a3;
  *(this + 2) = a4;
  return this;
}
// 659C48F8: using guessed type void *off_659C48F8;
// 659C91D8: using guessed type void *off_659C91D8;

//----- (65799C50) --------------------------------------------------------
char __thiscall DwordVector_PushBack(int **this, int a2)
{
  int v3; // esi
  unsigned int v4; // edx
  int v5; // eax

  if ( !a2 )
    return 0;
  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = ((int)*(this + 3) - v3) >> 2;
  else
    v4 = 0;
  v5 = (int)*(this + 2);
  if ( (v5 - v3) >> 2 >= v4 )
  {
    Vector_InsertRange((int)this, (char *)v5, 1u, (unsigned int)&a2);
  }
  else
  {
    *(_DWORD *)v5 = a2;
    *(this + 2) = (int *)(v5 + 4);
  }
  return 1;
}

//----- (65799CB0) --------------------------------------------------------
void __thiscall UiList_AddEntry(int **this, void *a2, int a3, int a4, int a5)
{
  _DWORD *v6; // eax
  _DWORD *v7; // eax

  if ( a2 )
  {
    v6 = operator new(0x24u);
    if ( v6 )
      v7 = PacketBlockHeader_Ctor(v6, (int)a2, a3, a4, a5);
    else
      v7 = 0;
    DwordVector_PushBack(this + 29, (int)v7);
  }
}

//----- (6579A070) --------------------------------------------------------
int __thiscall PacketBlock_ResetArrays(int this)
{
  *(_DWORD *)(this + 40) = 0;
  *(_DWORD *)(this + 44) = 0;
  *(_DWORD *)(this + 48) = 0;
  *(_DWORD *)(this + 56) = 0;
  *(_DWORD *)(this + 60) = 0;
  *(_DWORD *)(this + 64) = 0;
  PacketBlockState_Reset((_BYTE *)this);
  return this;
}

//----- (6579A2F0) --------------------------------------------------------
int __thiscall VectorData_CopyFrom(int this, int a2)
{
  char *v4; // eax
  int v6; // ebx
  unsigned int v7; // ecx
  unsigned int v8; // eax
  char *v9; // ecx
  char *v10; // eax
  unsigned int v11; // [esp+10h] [ebp+8h]
  char *v12; // [esp+10h] [ebp+8h]

  if ( this != a2 )
  {
    v11 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 320;
    if ( !v11 )
    {
      v4 = *(char **)(this + 8);
      if ( *(char **)(this + 4) != v4 )
      {
        *(_DWORD *)(this + 8) = sub_65796AD0(v4, v4, *(char **)(this + 4));
        return this;
      }
      return this;
    }
    v6 = *(_DWORD *)(this + 4);
    v7 = (*(_DWORD *)(this + 8) - v6) / 320;
    if ( v11 <= v7 )
    {
      sub_65796AD0(*(char **)(a2 + 4), *(char **)(a2 + 8), *(char **)(this + 4));
      *(_DWORD *)(this + 8) = *(_DWORD *)(this + 4) + 320 * ((*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 320);
      return this;
    }
    if ( v6 )
      v8 = (*(_DWORD *)(this + 12) - v6) / 320;
    else
      v8 = 0;
    if ( v11 > v8 )
    {
      if ( v6 )
        operator delete(*(void **)(this + 4));
      if ( !sub_657975C0((_DWORD *)this, (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 320) )
        return this;
      v9 = *(char **)(this + 4);
      v10 = *(char **)(a2 + 4);
    }
    else
    {
      v12 = (char *)(*(_DWORD *)(a2 + 4) + 320 * v7);
      sub_65796AD0(*(char **)(a2 + 4), v12, *(char **)(this + 4));
      v9 = *(char **)(this + 8);
      v10 = v12;
    }
    *(_DWORD *)(this + 8) = Vector4_UninitializedCopyWrap((void *)this, v10, *(char **)(a2 + 8), v9);
  }
  return this;
}

//----- (6579A480) --------------------------------------------------------
_BYTE *__cdecl Array68_CopyForward(_BYTE *a1, _BYTE *a2, _BYTE *a3)
{
  _BYTE *v3; // edi
  _BYTE *v4; // esi
  _BYTE *v5; // eax
  int v6; // edx

  v3 = a1;
  if ( a1 == a2 )
    return a3;
  v4 = a3;
  do
  {
    *v4 = *v3;
    v5 = v4 + 1;
    v6 = 32;
    do
    {
      *v5 = v5[v3 - v4];
      ++v5;
      --v6;
    }
    while ( v6 );
    Vector8_Assign((int)(v4 + 36), (int)(v3 + 36));
    DwordVector_CopyFrom((int)(v4 + 52), (int)(v3 + 52));
    v3 += 68;
    v4 += 68;
  }
  while ( v3 != a2 );
  return v4;
}

//----- (6579AE30) --------------------------------------------------------
_BYTE *__cdecl PacketArray88_FilterDefault(_BYTE *a1, _BYTE *a2, _BYTE *a3)
{
  return Array68_CopyForward(a1, a2, a3);
}

//----- (6579AEC0) --------------------------------------------------------
void __cdecl PacketArray88_DestroyRange(int a1, int a2)
{
  int i; // esi

  for ( i = a1; i != a2; i += 88 )
  {
    if ( *(_DWORD *)(i + 4) )
      operator delete(*(void **)(i + 4));
    *(_DWORD *)(i + 4) = 0;
    *(_DWORD *)(i + 8) = 0;
    *(_DWORD *)(i + 12) = 0;
  }
}

//----- (6579AF00) --------------------------------------------------------
void __cdecl Array24_FreeVectors(int a1, int a2)
{
  int v2; // edi
  int v3; // esi

  v2 = a1;
  if ( a1 != a2 )
  {
    v3 = a1 + 8;
    do
    {
      if ( *(_DWORD *)v3 )
        operator delete(*(void **)v3);
      *(_DWORD *)v3 = 0;
      *(_DWORD *)(v3 + 4) = 0;
      *(_DWORD *)(v3 + 8) = 0;
      v2 += 24;
      v3 += 24;
    }
    while ( v2 != a2 );
  }
}

//----- (6579B0F0) --------------------------------------------------------
void __cdecl Array88_FreeVectors(int a1, int a2)
{
  int v2; // edi
  int v3; // esi

  v2 = a1;
  if ( a1 != a2 )
  {
    v3 = a1 + 76;
    do
    {
      if ( *(_DWORD *)v3 )
        operator delete(*(void **)v3);
      *(_DWORD *)v3 = 0;
      *(_DWORD *)(v3 + 4) = 0;
      *(_DWORD *)(v3 + 8) = 0;
      v2 += 88;
      v3 += 88;
    }
    while ( v2 != a2 );
  }
}

//----- (6579B130) --------------------------------------------------------
void __cdecl PacketArray68_DestroyRange(int a1, int a2)
{
  int v2; // ebx
  int v3; // esi

  v2 = a1;
  if ( a1 != a2 )
  {
    v3 = a1 + 56;
    do
    {
      if ( *(_DWORD *)v3 )
        operator delete(*(void **)v3);
      *(_DWORD *)v3 = 0;
      *(_DWORD *)(v3 + 4) = 0;
      *(_DWORD *)(v3 + 8) = 0;
      if ( *(_DWORD *)(v3 - 16) )
        operator delete(*(void **)(v3 - 16));
      *(_DWORD *)(v3 - 16) = 0;
      *(_DWORD *)(v3 - 12) = 0;
      *(_DWORD *)(v3 - 8) = 0;
      v2 += 68;
      v3 += 68;
    }
    while ( v2 != a2 );
  }
}

//----- (6579B290) --------------------------------------------------------
void __thiscall PacketArray88_Clear(int *this)
{
  int v2; // eax

  v2 = *(this + 1);
  if ( v2 )
  {
    PacketArray88_DestroyRange(v2, *(this + 2));
    operator delete((void *)*(this + 1));
  }
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
}

//----- (6579B350) --------------------------------------------------------
int *__thiscall PacketArray88_EraseRange(int *this, int *a2, int a3, unsigned int a4)
{
  int *result; // eax
  unsigned int v5; // esi
  int v6; // edi
  int v7; // ebx
  int *v8; // [esp+8h] [ebp-4h]

  result = a2;
  v5 = a4;
  v6 = a3;
  v8 = this;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v7 = *(this + 2);
    if ( a4 != v7 )
    {
      do
      {
        PlayerData_CopyFrom(v6, v5);
        v5 += 88;
        v6 += 88;
      }
      while ( v5 != v7 );
      this = v8;
    }
    PacketArray88_DestroyRange(v6, *(this + 2));
    v8[2] = v6;
    return a2;
  }
  return result;
}

//----- (6579B460) --------------------------------------------------------
void __stdcall PacketArray68_DestroyWrapper(int a1, int a2)
{
  PacketArray68_DestroyRange(a1, a2);
}

//----- (6579B4D0) --------------------------------------------------------
void __thiscall PacketArray88_Dtor(int *this)
{
  int v2; // eax

  v2 = *(this + 1);
  if ( v2 )
  {
    Array88_FreeVectors(v2, *(this + 2));
    operator delete((void *)*(this + 1));
  }
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
}

//----- (6579B540) --------------------------------------------------------
void __thiscall PacketArray68_Dtor_v1(int *this)
{
  int v2; // eax

  v2 = *(this + 1);
  if ( v2 )
  {
    Array24_FreeVectors(v2, *(this + 2));
    operator delete((void *)*(this + 1));
  }
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
}

//----- (6579B7A0) --------------------------------------------------------
void __thiscall PacketArray68_Dtor_v2(int *this)
{
  int v2; // eax

  v2 = *(this + 1);
  if ( v2 )
  {
    Array24_FreeVectors(v2, *(this + 2));
    operator delete((void *)*(this + 1));
  }
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
}

//----- (6579B840) --------------------------------------------------------
void __thiscall PacketArray68_Clear(int *this)
{
  int v2; // eax

  v2 = *(this + 1);
  if ( v2 )
  {
    PacketArray68_DestroyRange(v2, *(this + 2));
    operator delete((void *)*(this + 1));
  }
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
}

//----- (6579B890) --------------------------------------------------------
void __thiscall PacketArray68_Compact(int *this)
{
  _BYTE *v2; // eax
  _BYTE *v3; // ecx
  _BYTE *v4; // edi

  v2 = (_BYTE *)*(this + 2);
  v3 = (_BYTE *)*(this + 1);
  if ( v3 != v2 )
  {
    v4 = Array68_CopyForward(v2, v2, v3);
    PacketArray68_DestroyRange((int)v4, *(this + 2));
    *(this + 2) = (int)v4;
  }
}

//----- (6579BC30) --------------------------------------------------------
void __thiscall PacketData_ClearAll(int this)
{
  int v2; // eax
  int v3; // esi

  if ( *(_DWORD *)(this + 28) )
    operator delete(*(void **)(this + 28));
  *(_DWORD *)(this + 28) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 36) = 0;
  v2 = *(_DWORD *)(this + 8);
  v3 = this + 4;
  if ( v2 )
  {
    PacketArray68_DestroyRange(v2, *(_DWORD *)(v3 + 8));
    operator delete(*(void **)(v3 + 4));
  }
  *(_DWORD *)(v3 + 4) = 0;
  *(_DWORD *)(v3 + 8) = 0;
  *(_DWORD *)(v3 + 12) = 0;
}

//----- (6579BDF0) --------------------------------------------------------
void __cdecl Array20_FreePackets(int a1, int a2)
{
  int v2; // edi
  int *v3; // esi

  v2 = a1;
  if ( a1 != a2 )
  {
    v3 = (int *)(a1 + 8);
    do
    {
      if ( *v3 )
      {
        PacketArray88_DestroyRange(*v3, v3[1]);
        operator delete((void *)*v3);
      }
      *v3 = 0;
      v3[1] = 0;
      v3[2] = 0;
      v2 += 20;
      v3 += 5;
    }
    while ( v2 != a2 );
  }
}

//----- (6579BF30) --------------------------------------------------------
void __thiscall PacketArrayAlt_Dtor_v1(int *this)
{
  int v2; // eax

  v2 = *(this + 1);
  if ( v2 )
  {
    Array20_FreePackets(v2, *(this + 2));
    operator delete((void *)*(this + 1));
  }
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
}

//----- (6579C020) --------------------------------------------------------
void __thiscall PacketArrayAlt_Dtor_v2(int *this)
{
  int v2; // eax

  v2 = *(this + 1);
  if ( v2 )
  {
    Array20_FreePackets(v2, *(this + 2));
    operator delete((void *)*(this + 1));
  }
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
}

//----- (6579C070) --------------------------------------------------------
int __thiscall CharSelectPacket_Dtor(char *this)
{
  int v2; // eax
  char *v3; // ebx
  int v4; // eax
  int v5; // eax

  v2 = *((_DWORD *)this + 1520);
  v3 = this + 6076;
  if ( v2 )
  {
    Array88_FreeVectors(v2, *((_DWORD *)this + 1521));
    operator delete(*((void **)v3 + 1));
  }
  *((_DWORD *)v3 + 1) = 0;
  *((_DWORD *)v3 + 2) = 0;
  *((_DWORD *)v3 + 3) = 0;
  v4 = *((_DWORD *)this + 1516);
  if ( v4 )
  {
    Array24_FreeVectors(v4, *((_DWORD *)this + 1517));
    operator delete(*((void **)this + 1516));
  }
  *((_DWORD *)this + 1516) = 0;
  *((_DWORD *)this + 1517) = 0;
  *((_DWORD *)this + 1518) = 0;
  v5 = *((_DWORD *)this + 1512);
  if ( v5 )
  {
    Array20_FreePackets(v5, *((_DWORD *)this + 1513));
    operator delete(*((void **)this + 1512));
  }
  *((_DWORD *)this + 1512) = 0;
  *((_DWORD *)this + 1513) = 0;
  *((_DWORD *)this + 1514) = 0;
  if ( *((_DWORD *)this + 1507) )
    operator delete(*((void **)this + 1507));
  *((_DWORD *)this + 1507) = 0;
  *((_DWORD *)this + 1508) = 0;
  *((_DWORD *)this + 1509) = 0;
  if ( *((_DWORD *)this + 1483) )
    operator delete(*((void **)this + 1483));
  *((_DWORD *)this + 1483) = 0;
  *((_DWORD *)this + 1484) = 0;
  *((_DWORD *)this + 1485) = 0;
  if ( *((_DWORD *)this + 1229) )
    operator delete(*((void **)this + 1229));
  *((_DWORD *)this + 1229) = 0;
  *((_DWORD *)this + 1230) = 0;
  *((_DWORD *)this + 1231) = 0;
  if ( *((_DWORD *)this + 1225) )
    operator delete(*((void **)this + 1225));
  *((_DWORD *)this + 1225) = 0;
  *((_DWORD *)this + 1226) = 0;
  *((_DWORD *)this + 1227) = 0;
  if ( *((_DWORD *)this + 1113) )
    operator delete(*((void **)this + 1113));
  *((_DWORD *)this + 1113) = 0;
  *((_DWORD *)this + 1114) = 0;
  *((_DWORD *)this + 1115) = 0;
  if ( *((_DWORD *)this + 1061) )
    operator delete(*((void **)this + 1061));
  *((_DWORD *)this + 1061) = 0;
  *((_DWORD *)this + 1062) = 0;
  *((_DWORD *)this + 1063) = 0;
  if ( *((_DWORD *)this + 1057) )
    operator delete(*((void **)this + 1057));
  *((_DWORD *)this + 1057) = 0;
  *((_DWORD *)this + 1058) = 0;
  *((_DWORD *)this + 1059) = 0;
  if ( *((_DWORD *)this + 1050) )
    operator delete(*((void **)this + 1050));
  *((_DWORD *)this + 1050) = 0;
  *((_DWORD *)this + 1051) = 0;
  *((_DWORD *)this + 1052) = 0;
  if ( *((_DWORD *)this + 1046) )
    operator delete(*((void **)this + 1046));
  *((_DWORD *)this + 1046) = 0;
  *((_DWORD *)this + 1047) = 0;
  *((_DWORD *)this + 1048) = 0;
  PacketData_ClearAll((int)(this + 4104));
  if ( *((_DWORD *)this + 1014) )
    operator delete(*((void **)this + 1014));
  *((_DWORD *)this + 1014) = 0;
  *((_DWORD *)this + 1015) = 0;
  *((_DWORD *)this + 1016) = 0;
  if ( *((_DWORD *)this + 912) )
    operator delete(*((void **)this + 912));
  *((_DWORD *)this + 912) = 0;
  *((_DWORD *)this + 913) = 0;
  *((_DWORD *)this + 914) = 0;
  if ( *((_DWORD *)this + 908) )
    operator delete(*((void **)this + 908));
  *((_DWORD *)this + 908) = 0;
  *((_DWORD *)this + 909) = 0;
  *((_DWORD *)this + 910) = 0;
  if ( *((_DWORD *)this + 863) )
    operator delete(*((void **)this + 863));
  *((_DWORD *)this + 863) = 0;
  *((_DWORD *)this + 864) = 0;
  *((_DWORD *)this + 865) = 0;
  if ( *((_DWORD *)this + 853) )
    operator delete(*((void **)this + 853));
  *((_DWORD *)this + 853) = 0;
  *((_DWORD *)this + 854) = 0;
  *((_DWORD *)this + 855) = 0;
  VectorPair_FreeBuffers((int)(this + 2136));
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 12));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (6579C390) --------------------------------------------------------
char *__thiscall Packet_ID_FACTION_ctor(char *this)
{
  int v2; // eax
  _BYTE v4[4]; // [esp+1Ch] [ebp-14h] BYREF
  char *v5; // [esp+20h] [ebp-10h]
  int v6; // [esp+2Ch] [ebp-4h]

  v5 = this;
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -99;
  v6 = 0;
  *(_DWORD *)this = &off_659C920C;
  sub_6579A170(this + 2136);
  *((_DWORD *)this + 853) = 0;
  *((_DWORD *)this + 854) = 0;
  *((_DWORD *)this + 855) = 0;
  *((_DWORD *)this + 863) = 0;
  *((_DWORD *)this + 864) = 0;
  *((_DWORD *)this + 865) = 0;
  sub_65798A40(v4, 0, 0);
  PacketData_InitFieldsExt((int)(this + 3464));
  *(this + 3592) = 0;
  *(this + 3593) = 0;
  *((_DWORD *)this + 900) = 0;
  *((_DWORD *)this + 899) = 0;
  *(this + 3604) = 0;
  *(this + 3624) = 31;
  *((_DWORD *)this + 908) = 0;
  *((_DWORD *)this + 909) = 0;
  *((_DWORD *)this + 910) = 0;
  *((_DWORD *)this + 912) = 0;
  *((_DWORD *)this + 913) = 0;
  *((_DWORD *)this + 914) = 0;
  *((_DWORD *)this + 1014) = 0;
  *((_DWORD *)this + 1015) = 0;
  *((_DWORD *)this + 1016) = 0;
  LOBYTE(v6) = 6;
  sub_6579BD20(this + 4104);
  LOBYTE(v6) = 7;
  PacketBlock_ResetArrays((int)(this + 4144));
  *((_DWORD *)this + 1057) = 0;
  *((_DWORD *)this + 1058) = 0;
  *((_DWORD *)this + 1059) = 0;
  *((_WORD *)this + 2110) = 1;
  *((_WORD *)this + 2111) = 0;
  v2 = *((_DWORD *)this + 1058);
  if ( *((_DWORD *)this + 1057) != v2 )
    *((_DWORD *)this + 1058) = sub_65796BD0(v2, v2, *((_DWORD *)this + 1057));
  *((_DWORD *)this + 1061) = 0;
  *((_DWORD *)this + 1062) = 0;
  *((_DWORD *)this + 1063) = 0;
  *((_DWORD *)this + 1064) = 0;
  *(this + 4260) = 0;
  *(this + 4293) = 0;
  *(this + 4294) = 0;
  *(this + 4295) = 0;
  *(this + 4261) = 0;
  *(this + 4296) = 0;
  *(this + 4428) = 0;
  *((_DWORD *)this + 1106) = 0;
  *((_DWORD *)this + 1113) = 0;
  *((_DWORD *)this + 1114) = 0;
  *((_DWORD *)this + 1115) = 0;
  LOBYTE(v6) = 11;
  *(this + 4464) = 0;
  *(this + 4465) = 0;
  *(this + 4485) = 0;
  *(this + 4505) = 0;
  *((_WORD *)this + 2255) = 0;
  *(this + 4512) = 0;
  PacketData_InitFieldsExt((int)(this + 4716));
  sub_65793960(this + 4516);
  sub_6573B700(this + 4888);
  LOBYTE(v6) = 12;
  sub_65795F10(this + 4928);
  *((_DWORD *)this + 1483) = 0;
  *((_DWORD *)this + 1484) = 0;
  *((_DWORD *)this + 1485) = 0;
  *((_DWORD *)this + 1476) = 0;
  *((_DWORD *)this + 1477) = 0;
  *((_DWORD *)this + 1478) = 0;
  *((_DWORD *)this + 1479) = 0;
  *((_DWORD *)this + 1480) = 0;
  *((_DWORD *)this + 1481) = 0;
  if ( *((_DWORD *)this + 1483) != *((_DWORD *)this + 1484) )
    *((_DWORD *)this + 1484) = *((_DWORD *)this + 1483);
  LOBYTE(v6) = 13;
  unknown_libname_664(this + 6008);
  unknown_libname_664(this + 6012);
  *(this + 5944) = 0;
  *((_DWORD *)this + 1487) = 0;
  *(this + 5952) = 0;
  *(this + 5953) = 0;
  *(this + 5954) = 0;
  *(this + 5955) = 0;
  *(this + 5975) = 0;
  *((_DWORD *)this + 1502) = 0;
  *((_DWORD *)this + 1503) = 0;
  *(this + 6016) = 0;
  *((_DWORD *)this + 1507) = 0;
  *((_DWORD *)this + 1508) = 0;
  *((_DWORD *)this + 1509) = 0;
  *((_WORD *)this + 3010) = 1;
  *((_WORD *)this + 3011) = 0;
  sub_65798B20(v4, *((_DWORD *)this + 1507), *((_DWORD *)this + 1508));
  *((_DWORD *)this + 1512) = 0;
  *((_DWORD *)this + 1513) = 0;
  *((_DWORD *)this + 1514) = 0;
  *((_DWORD *)this + 1516) = 0;
  *((_DWORD *)this + 1517) = 0;
  *((_DWORD *)this + 1518) = 0;
  *((_DWORD *)this + 1520) = 0;
  *((_DWORD *)this + 1521) = 0;
  *((_DWORD *)this + 1522) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *(this + 1078) = 0;
  *(this + 1110) = 0;
  *((_DWORD *)this + 856) = 0;
  *(this + 3428) = 0;
  *(this + 3588) = 0;
  *(this + 3660) = 0;
  *(this + 3916) = 0;
  *(this + 3917) = 0;
  *((_DWORD *)this + 1012) = 0;
  *(this + 4068) = 0;
  *(this + 4100) = 0;
  *((_DWORD *)this + 1053) = 0;
  *(this + 4216) = 0;
  *(this + 6040) = 0;
  *(this + 6041) = 0;
  *(this + 1077) = 0;
  return this;
}
// 6573B700: using guessed type int __thiscall sub_6573B700(_DWORD);
// 65793960: using guessed type int __thiscall sub_65793960(_DWORD);
// 65795F10: using guessed type int __thiscall sub_65795F10(_DWORD);
// 65796BD0: using guessed type int __cdecl sub_65796BD0(_DWORD, _DWORD, _DWORD);
// 65798A40: using guessed type int __stdcall sub_65798A40(_DWORD, _DWORD, _DWORD);
// 65798B20: using guessed type int __stdcall sub_65798B20(_DWORD, _DWORD, _DWORD);
// 6579A170: using guessed type int __thiscall sub_6579A170(_DWORD);
// 6579BD20: using guessed type int __thiscall sub_6579BD20(_DWORD);
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659C920C: using guessed type void *off_659C920C;

//----- (6579D7C0) --------------------------------------------------------
char *__cdecl sub_6579D7C0(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a2;
  result = a3;
  while ( v3 != a1 )
  {
    v3 -= 192;
    result -= 192;
    qmemcpy(result, v3, 0xC0u);
  }
  return result;
}

//----- (6579D830) --------------------------------------------------------
char *__cdecl sub_6579D830(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a2;
  result = a3;
  while ( v3 != a1 )
  {
    v3 -= 444;
    result -= 444;
    qmemcpy(result, v3, 0x1BCu);
  }
  return result;
}

//----- (6579E130) --------------------------------------------------------
_DWORD *__cdecl Pair_FillValue(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; result += 2 )
  {
    *result = *a3;
    result[1] = a3[1];
  }
  return result;
}

//----- (6579E160) --------------------------------------------------------
char *__cdecl Array192_Fill(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 192 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0xC0u);
  }
  return result;
}

//----- (6579E190) --------------------------------------------------------
char *__cdecl Array40_Fill(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 40 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0x28u);
  }
  return result;
}

//----- (6579E1C0) --------------------------------------------------------
char *__cdecl Array444_Fill(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 444 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0x1BCu);
  }
  return result;
}

//----- (6579E1F0) --------------------------------------------------------
char *__cdecl Array60_Fill(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 60 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0x3Cu);
  }
  return result;
}

//----- (6579E220) --------------------------------------------------------
char *__cdecl Array176_Fill(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 176 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0xB0u);
  }
  return result;
}

//----- (6579E250) --------------------------------------------------------
char *__cdecl Array220_Fill(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 220 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0xDCu);
  }
  return result;
}

//----- (6579E280) --------------------------------------------------------
char *__cdecl Array372_Fill(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 372 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0x174u);
  }
  return result;
}

//----- (6579E2E0) --------------------------------------------------------
char *__cdecl Array72_Fill(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 72 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0x48u);
  }
  return result;
}

//----- (6579E310) --------------------------------------------------------
char *__cdecl Array320_Fill(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 320 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0x140u);
  }
  return result;
}

//----- (6579E370) --------------------------------------------------------
_DWORD *__cdecl Pair_FillValue2(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; result += 2 )
  {
    *result = *a3;
    result[1] = a3[1];
  }
  return result;
}

//----- (6579E3A0) --------------------------------------------------------
char *__usercall Array220_FillValue@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0xDCu);
      --v4;
      result += 220;
    }
    while ( v4 );
  }
  return result;
}

//----- (6579E750) --------------------------------------------------------
_DWORD *__cdecl Array8_CopyForwardChecked(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 2 )
  {
    if ( result )
    {
      *result = *v3;
      result[1] = v3[1];
    }
    v3 += 2;
  }
  return result;
}

//----- (6579E780) --------------------------------------------------------
_DWORD *__cdecl Pair_CopyRange3(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 2 )
  {
    if ( result )
    {
      *result = *v3;
      result[1] = v3[1];
    }
    v3 += 2;
  }
  return result;
}

//----- (6579E7C0) --------------------------------------------------------
char *__cdecl Array192_Copy(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 192 )
  {
    if ( result )
      qmemcpy(result, v3, 0xC0u);
    v3 += 192;
  }
  return result;
}

//----- (6579E800) --------------------------------------------------------
char *__cdecl Array40_Copy(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 40 )
  {
    if ( result )
      qmemcpy(result, v3, 0x28u);
    v3 += 40;
  }
  return result;
}

//----- (6579E840) --------------------------------------------------------
char *__cdecl Array444_Copy(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 444 )
  {
    if ( result )
      qmemcpy(result, v3, 0x1BCu);
    v3 += 444;
  }
  return result;
}

//----- (6579E880) --------------------------------------------------------
char *__cdecl Array60_Copy(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 60 )
  {
    if ( result )
      qmemcpy(result, v3, 0x3Cu);
    v3 += 60;
  }
  return result;
}

//----- (6579E8C0) --------------------------------------------------------
char *__cdecl Array176_Copy(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 176 )
  {
    if ( result )
      qmemcpy(result, v3, 0xB0u);
    v3 += 176;
  }
  return result;
}

//----- (6579E900) --------------------------------------------------------
char *__cdecl Array220_Copy(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 220 )
  {
    if ( result )
      qmemcpy(result, v3, 0xDCu);
    v3 += 220;
  }
  return result;
}

//----- (6579E940) --------------------------------------------------------
char *__cdecl Array372_Copy(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 372 )
  {
    if ( result )
      qmemcpy(result, v3, 0x174u);
    v3 += 372;
  }
  return result;
}

//----- (6579E9C0) --------------------------------------------------------
char *__cdecl Array72_Copy(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 72 )
  {
    if ( result )
      qmemcpy(result, v3, 0x48u);
    v3 += 72;
  }
  return result;
}

//----- (6579EA30) --------------------------------------------------------
char *__thiscall ByteAndInt_WriteToBitStream(_DWORD *this, char *a2)
{
  char *v2; // edi
  char v5[4]; // [esp+8h] [ebp-8h] BYREF
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = a2;
  v6[0] = *(_BYTE *)this;
  BitStream_WriteBitsCompressed(a2, v6, 8u, 1);
  a2 = (char *)*(this + 1);
  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  ByteSwapCopy((int)&a2, (int)v5, 4u);
  return BitStream_WriteBitsCompressed(v2, v5, 0x20u, 1);
}

//----- (6579EAA0) --------------------------------------------------------
char *__thiscall PlayerData_WriteToBitStream(_DWORD *this, char *a2)
{
  char *v2; // edi
  char v4; // al
  unsigned int v5; // esi
  unsigned int i; // ebx
  unsigned int v7; // ebx
  char *result; // eax
  unsigned int j; // esi
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  _DWORD *v11; // [esp+10h] [ebp-8h]
  char v12[4]; // [esp+14h] [ebp-4h] BYREF

  v2 = a2;
  v4 = *(_BYTE *)this;
  v11 = this;
  v12[0] = v4;
  BitStream_WriteBitsCompressed(a2, v12, 8u, 1);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    (char *)this + 1,
    2048,
    v2);
  v5 = (*(this + 11) - *(this + 10)) >> 3;
  a2 = (char *)v5;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v10, 4u);
    BitStream_WriteBitsCompressed(v2, v10, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  for ( i = 0; i < v5; ++i )
    ByteAndInt_WriteToBitStream((_DWORD *)(v11[10] + 8 * i), v2);
  v7 = (v11[15] - v11[14]) >> 2;
  a2 = (char *)v7;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v10, 4u);
    result = BitStream_WriteBitsCompressed(v2, v10, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  for ( j = 0; j < v7; ++j )
  {
    a2 = *(char **)(v11[14] + 4 * j);
    if ( Net_IsBigEndian() )
    {
      ByteSwapCopy((int)&a2, (int)v10, 4u);
      result = BitStream_WriteBitsCompressed(v2, v10, 0x20u, 1);
    }
    else
    {
      result = BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
    }
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579EBD0) --------------------------------------------------------
char *__thiscall CharacterList_WriteToBitStream(_DWORD *this, char *a2)
{
  _DWORD *v2; // edi
  int v3; // eax
  char *v4; // esi
  int v5; // ebx
  int v6; // edi
  unsigned int v7; // edi
  char *result; // eax
  unsigned int i; // ebx
  char *v10; // [esp-Ch] [ebp-24h]
  char v11[4]; // [esp+Ch] [ebp-Ch] BYREF
  int v12; // [esp+10h] [ebp-8h] BYREF
  _DWORD *v13; // [esp+14h] [ebp-4h]

  v2 = this;
  v3 = *this;
  v13 = this;
  v12 = v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v12, (int)v11, 4u);
    v10 = v11;
  }
  else
  {
    v10 = (char *)&v12;
  }
  v4 = a2;
  BitStream_WriteBitsCompressed(a2, v10, 0x20u, 1);
  v5 = (v2[3] - v2[2]) / 68;
  a2 = (char *)v5;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v11, 4u);
    BitStream_WriteBitsCompressed(v4, v11, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v4, (char *)&a2, 0x20u, 1);
  }
  if ( v5 )
  {
    v6 = 0;
    do
    {
      PlayerData_WriteToBitStream((_DWORD *)(v6 + v13[2]), v4);
      v6 += 68;
      --v5;
    }
    while ( v5 );
    v2 = v13;
  }
  v7 = (v2[8] - v13[7]) >> 2;
  a2 = (char *)v7;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v11, 4u);
    result = BitStream_WriteBitsCompressed(v4, v11, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(v4, (char *)&a2, 0x20u, 1);
  }
  for ( i = 0; i < v7; ++i )
  {
    a2 = *(char **)(v13[7] + 4 * i);
    if ( Net_IsBigEndian() )
    {
      ByteSwapCopy((int)&a2, (int)v11, 4u);
      result = BitStream_WriteBitsCompressed(v4, v11, 0x20u, 1);
    }
    else
    {
      result = BitStream_WriteBitsCompressed(v4, (char *)&a2, 0x20u, 1);
    }
  }
  return result;
}

//----- (6579ED20) --------------------------------------------------------
int __thiscall CharacterEntry_WriteToBitStream(_BYTE *this, char *a2)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *(_DWORD *)this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  LOBYTE(a2) = *(this + 4);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *(this + 37);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *(this + 39);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  a2 = (char *)*((_DWORD *)this + 42);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  LOBYTE(a2) = *(this + 38);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  (*(void (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 5, 2048, v3);
  (*(void (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 40, 2048, v3);
  return (*(int (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(
           g_LTClient,
           this + 172,
           2048,
           v3);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579EE50) --------------------------------------------------------
int __thiscall Packet_ID_FACTION_read_block_10A0(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed(a2, this + 4, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 37, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 39, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 168);
  RakNet::BitStream::ReadCompressed(a2, this + 38, 8u, 1);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 5,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 40,
    2048,
    a2);
  return (*(int (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
           g_LTClient,
           this + 172,
           2048,
           a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579EF00) --------------------------------------------------------
char *__thiscall PlayerList_WriteToBitStream(_DWORD *this, char *a2)
{
  int v3; // ebx
  char *result; // eax
  int v5; // edi
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 192;
  v6[0] = (char)(*((_BYTE *)this + 8) - *((_BYTE *)this + 4)) / -64;
  result = BitStream_WriteBitsCompressed(a2, v6, 8u, 1);
  if ( (_BYTE)v3 )
  {
    v5 = 0;
    v3 = (unsigned __int8)v3;
    do
    {
      result = (char *)CharacterEntry_WriteToBitStream((_BYTE *)(v5 + *(this + 1)), a2);
      v5 += 192;
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (6579EF70) --------------------------------------------------------
int __thiscall NetworkState_WriteToBitStream(_BYTE *this, char *a2)
{
  char *v2; // esi
  char v5[4]; // [esp+8h] [ebp-4h] BYREF

  v2 = a2;
  if ( *this )
    BitStream_WriteBit1(a2);
  else
    BitStream_WriteBit0(a2);
  LOBYTE(a2) = *(this + 1);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  a2 = (char *)*((_DWORD *)this + 1);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v5, 4u);
    BitStream_WriteBitsCompressed(v2, v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*((_DWORD *)this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v5, 4u);
    BitStream_WriteBitsCompressed(v2, v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  LOBYTE(a2) = *(this + 32);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  return (*(int (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(
           g_LTClient,
           this + 12,
           2048,
           v2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579F050) --------------------------------------------------------
int __thiscall Packet_ID_FACTION_read_block_0E08(char *this, unsigned int *a2)
{
  unsigned int v2; // eax

  v2 = a2[2];
  if ( v2 + 1 <= *a2 )
  {
    *this = ((unsigned __int8)(128 >> (v2 & 7)) & *(_BYTE *)((v2 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  RakNet::BitStream::ReadCompressed(a2, this + 1, 8u, 1);
  Read_u32c_alt(a2, this + 4);
  Read_u32c_alt(a2, this + 8);
  RakNet::BitStream::ReadCompressed(a2, this + 32, 8u, 1);
  return (*(int (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
           g_LTClient,
           this + 12,
           2048,
           a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579F0E0) --------------------------------------------------------
int __thiscall ChatMessage_WriteToBitStream(_BYTE *this, char *a2)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *(_DWORD *)this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  LOBYTE(a2) = *(this + 4);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  return (*(int (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 5, 2048, v3);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579F1A0) --------------------------------------------------------
char *__thiscall Array40_WriteToBitStream(_DWORD *this, char *a2)
{
  int v3; // edi
  char *result; // eax
  int v5; // esi
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 40;
  v7 = v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    result = BitStream_WriteBitsCompressed(a2, v6, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(a2, (char *)&v7, 0x20u, 1);
  }
  if ( v3 )
  {
    v5 = 0;
    do
    {
      result = (char *)ChatMessage_WriteToBitStream((_BYTE *)(v5 + *(this + 1)), a2);
      v5 += 40;
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (6579F220) --------------------------------------------------------
char *__thiscall Playerfile_BlockA_WriteFull(int *this, char *a2)
{
  char *v3; // esi
  char *result; // eax
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  a2 = (char *)*(this + 6);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  (*(void (__thiscall **)(int, int *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 1, 2048, v3);
  (*(void (__thiscall **)(int, int *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 7, 2048, v3);
  a2 = (char *)*(this + 71);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    result = BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  if ( *(this + 71) )
  {
    Playerfile_BlockC0_WriteFull(this + 72, v3);
    return (char *)(*(_DWORD *(__thiscall **)(int, int *, int, char *))(*(_DWORD *)g_LTClient + 52))(
                     g_LTClient,
                     this + 103,
                     2048,
                     v3);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579F350) --------------------------------------------------------
char __thiscall Packet_ID_FACTION_read_block_0E3C_entry(char *this, unsigned int *a2)
{
  char result; // al

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 24);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 4,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 28,
    2048,
    a2);
  result = RakNet::BitStream::ReadCompressed_T_uint(a2, this + 284);
  if ( *((_DWORD *)this + 71) )
  {
    Playerfile_read_blockC0(this + 288, a2);
    return (*(char (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
             g_LTClient,
             this + 412,
             2048,
             a2);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579F3E0) --------------------------------------------------------
char *__thiscall ItemArray_WriteToBitStream(_DWORD *this, char *a2)
{
  int v3; // edi
  char *result; // eax
  int v5; // esi
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 444;
  v7 = v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    result = BitStream_WriteBitsCompressed(a2, v6, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(a2, (char *)&v7, 0x20u, 1);
  }
  if ( v3 )
  {
    v5 = 0;
    do
    {
      result = Playerfile_BlockA_WriteFull((int *)(v5 + *(this + 1)), a2);
      v5 += 444;
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (6579F470) --------------------------------------------------------
int __thiscall Playerfile_BlockB_WriteFull(int *this, char *a2)
{
  char *v2; // esi
  char v5[4]; // [esp+8h] [ebp-4h] BYREF

  v2 = a2;
  BitStream_WriteU32_Compressed_thunk(this + 12, a2);
  LOBYTE(a2) = *((_BYTE *)this + 56);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  a2 = (char *)*this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v5, 4u);
    BitStream_WriteBitsCompressed(v2, v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*(this + 11);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v5, 4u);
    BitStream_WriteBitsCompressed(v2, v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*(this + 13);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v5, 4u);
    BitStream_WriteBitsCompressed(v2, v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  (*(void (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    (_BYTE *)this + 4,
    2048,
    v2);
  return (*(int (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(
           g_LTClient,
           (_BYTE *)this + 24,
           2048,
           v2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579F580) --------------------------------------------------------
int __thiscall Packet_ID_FACTION_read_block_0D78_entry(char *this, unsigned int *a2)
{
  sub_65946F10();
  RakNet::BitStream::ReadCompressed(a2, this + 56, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 44);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 52);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 4,
    2048,
    a2);
  return (*(int (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
           g_LTClient,
           this + 24,
           2048,
           a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579F600) --------------------------------------------------------
char *__thiscall Array60_WriteToBitStream(_DWORD *this, char *a2)
{
  int v3; // edi
  char *result; // eax
  int v5; // esi
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 60;
  v7 = v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    result = BitStream_WriteBitsCompressed(a2, v6, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(a2, (char *)&v7, 0x20u, 1);
  }
  if ( v3 )
  {
    v5 = 0;
    do
    {
      result = (char *)Playerfile_BlockB_WriteFull((int *)(v5 + *(this + 1)), a2);
      v5 += 60;
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (6579F690) --------------------------------------------------------
int __thiscall Playerfile_BlockC_WriteFull(char **this, char *a2)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char *v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  a2 = *(this + 6);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  (*(void (__thiscall **)(int, int *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, (int *)this + 1, 2048, v3);
  (*(void (__thiscall **)(int, int *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, (int *)this + 7, 2048, v3);
  return (*(int (__thiscall **)(int, int *, int, char *))(*(_DWORD *)g_LTClient + 52))(
           g_LTClient,
           (int *)this + 12,
           2048,
           v3);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579F7D0) --------------------------------------------------------
char *__thiscall Array176_WriteToBitStream(_DWORD *this, char *a2)
{
  int v3; // edi
  char *result; // eax
  int v5; // esi
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 176;
  v7 = v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    result = BitStream_WriteBitsCompressed(a2, v6, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(a2, (char *)&v7, 0x20u, 1);
  }
  if ( v3 )
  {
    v5 = 0;
    do
    {
      result = (char *)Playerfile_BlockC_WriteFull((char **)(v5 + *(this + 1)), a2);
      v5 += 176;
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (6579F860) --------------------------------------------------------
int __thiscall Playerfile_BlockD_WriteFull(int this, char *a2)
{
  char *v2; // esi
  char v5[4]; // [esp+8h] [ebp-4h] BYREF

  v2 = a2;
  BitStream_WriteU32_Compressed_thunk((int *)this, a2);
  LOBYTE(a2) = *(_BYTE *)(this + 4);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  a2 = *(char **)(this + 8);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v5, 4u);
    BitStream_WriteBitsCompressed(v2, v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  a2 = *(char **)(this + 12);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v5, 4u);
    BitStream_WriteBitsCompressed(v2, v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  a2 = *(char **)(this + 16);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v5, 4u);
    BitStream_WriteBitsCompressed(v2, v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  (*(void (__thiscall **)(int, int, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 20, 2048, v2);
  (*(void (__thiscall **)(int, int, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 40, 2048, v2);
  (*(void (__thiscall **)(int, int, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 60, 2048, v2);
  return (*(int (__thiscall **)(int, int, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 92, 2048, v2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579F9A0) --------------------------------------------------------
int __thiscall Packet_ID_FACTION_read_block_107C_entry(char *this, unsigned int *a2)
{
  sub_65946F10();
  RakNet::BitStream::ReadCompressed(a2, this + 4, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 8);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 12);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 16);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 20,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 40,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 60,
    2048,
    a2);
  return (*(int (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
           g_LTClient,
           this + 92,
           2048,
           a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579FA50) --------------------------------------------------------
char *__thiscall Array220_WriteToBitStream(unsigned __int16 *this, char *a2)
{
  char *v3; // esi
  int v4; // ebx
  char *result; // eax
  int v6; // edi
  char *v7; // [esp-Ch] [ebp-24h]
  int v9; // [esp+10h] [ebp-8h] BYREF
  _BYTE v10[4]; // [esp+14h] [ebp-4h] BYREF

  v9 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v9, (int)v10, 2u);
    v7 = v10;
  }
  else
  {
    v7 = (char *)&v9;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v7, 0x10u, 1);
  v9 = *(this + 1);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v9, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&v9, 0x10u, 1);
  }
  v4 = (*((_DWORD *)this + 3) - *((_DWORD *)this + 2)) / 220;
  LOBYTE(a2) = (char)(*((_BYTE *)this + 12) - *((_BYTE *)this + 8)) / -36;
  result = BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  if ( (_BYTE)v4 )
  {
    v6 = 0;
    v4 = (unsigned __int8)v4;
    do
    {
      result = (char *)Playerfile_BlockD_WriteFull(v6 + *((_DWORD *)this + 2), v3);
      v6 += 220;
      --v4;
    }
    while ( v4 );
  }
  return result;
}

//----- (6579FB30) --------------------------------------------------------
char *__thiscall PlayerBlock_WriteToBitStream(unsigned __int16 *this, char *a2)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *(_DWORD *)this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  v7 = *(this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&v7, 0x10u, 1);
  }
  if ( *((_BYTE *)this + 196) )
    BitStream_WriteBit1(v3);
  else
    BitStream_WriteBit0(v3);
  a2 = (char *)*((_DWORD *)this + 89);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*((_DWORD *)this + 90);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*((_DWORD *)this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  LOBYTE(a2) = *((_BYTE *)this + 197);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  (*(void (__thiscall **)(int, unsigned __int16 *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    this + 6,
    2048,
    v3);
  (*(void (__thiscall **)(int, unsigned __int16 *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    this + 16,
    2048,
    v3);
  (*(void (__thiscall **)(int, unsigned __int16 *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    this + 18,
    2048,
    v3);
  (*(void (__thiscall **)(int, unsigned __int16 *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    this + 34,
    2048,
    v3);
  (*(void (__thiscall **)(int, unsigned __int16 *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    this + 162,
    2048,
    v3);
  a2 = (char *)*((_DWORD *)this + 92);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*((_DWORD *)this + 91);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  return Playerfile_BlockC0_WriteFull((int *)this + 50, v3);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579FDA0) --------------------------------------------------------
bool __thiscall Packet_ID_FACTION_read_block_11A4(char *this, unsigned int *a2)
{
  unsigned int v3; // eax

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 4);
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *(this + 196) = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 356);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 360);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 8);
  RakNet::BitStream::ReadCompressed(a2, this + 197, 8u, 1);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 12,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 32,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 36,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 68,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 324,
    2048,
    a2);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 368);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 364);
  return Playerfile_read_blockC0(this + 200, a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579FED0) --------------------------------------------------------
char *__thiscall CharacterInfo_WriteToBitStream(_BYTE *this, char *a2)
{
  char *v2; // esi
  int v5; // [esp+8h] [ebp-4h] BYREF

  v2 = a2;
  if ( *this )
    BitStream_WriteBit1(a2);
  else
    BitStream_WriteBit0(a2);
  (*(void (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 1, 2048, v2);
  (*(void (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 21, 2048, v2);
  (*(void (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 41, 2048, v2);
  v5 = *((unsigned __int16 *)this + 23);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v5, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&v5, 0x10u, 1);
  }
  LOBYTE(a2) = *(this + 48);
  return BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6579FF90) --------------------------------------------------------
bool __thiscall Packet_ID_FACTION_read_block_1170(char *this, unsigned int *a2)
{
  unsigned int v2; // eax

  v2 = a2[2];
  if ( v2 + 1 <= *a2 )
  {
    *this = ((unsigned __int8)(128 >> (v2 & 7)) & *(_BYTE *)((v2 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 1,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 21,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 41,
    2048,
    a2);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 46);
  return RakNet::BitStream::ReadCompressed(a2, this + 48, 8u, 1);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A0030) --------------------------------------------------------
char *__thiscall Array372_WriteToBitStream(_DWORD *this, char *a2)
{
  int v3; // edi
  char *result; // eax
  int v5; // esi
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 372;
  v7 = v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    result = BitStream_WriteBitsCompressed(a2, v6, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(a2, (char *)&v7, 0x20u, 1);
  }
  if ( v3 )
  {
    v5 = 0;
    do
    {
      result = PlayerBlock_WriteToBitStream((unsigned __int16 *)(v5 + *(this + 1)), a2);
      v5 += 372;
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (657A0190) --------------------------------------------------------
char *__thiscall SkillArray_WriteToBitStream(int *this, char *a2)
{
  int *v2; // edi
  char *v3; // esi
  char *result; // eax
  char *v5; // [esp-Ch] [ebp-20h]
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  int v7; // [esp+10h] [ebp-4h] BYREF

  v2 = this;
  v7 = *(this + 240);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  if ( *((_BYTE *)v2 + 964) )
    BitStream_WriteBit1(v3);
  else
    BitStream_WriteBit0(v3);
  BitStream_WriteU32_Compressed_thunk(v2 + 242, v3);
  v7 = *((unsigned __int16 *)v2 + 486);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&v7, 0x10u, 1);
  }
  v7 = 30;
  do
  {
    if ( *(_BYTE *)v2 )
    {
      BitStream_WriteBit1(v3);
      LOBYTE(a2) = *(_BYTE *)v2;
      BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
      a2 = (char *)v2[7];
      if ( Net_IsBigEndian() )
      {
        ByteSwapCopy((int)&a2, (int)v6, 4u);
        result = BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
      }
      else
      {
        result = BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
      }
      if ( *(_BYTE *)v2 > 0xAu )
        result = (char *)(*(int (__thiscall **)(int, int, int, char *))(*(_DWORD *)g_LTClient + 52))(
                           g_LTClient,
                           (int)v2 + 1,
                           2048,
                           v3);
    }
    else
    {
      result = BitStream_WriteBit0(v3);
    }
    v2 += 8;
    --v7;
  }
  while ( v7 );
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A02E0) --------------------------------------------------------
char __thiscall Packet_ID_FACTION_read_block_1340(char *this, unsigned int *a2)
{
  unsigned int v4; // eax
  char *v5; // edi
  char result; // al
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF
  int v8; // [esp+18h] [ebp+8h]

  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 960);
  v4 = a2[2];
  if ( v4 + 1 <= *a2 )
  {
    *(this + 964) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  sub_65946F10();
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 972);
  v5 = this + 28;
  v8 = 30;
  do
  {
    result = RakNet::BitStream::ReadBit(a2);
    if ( result )
    {
      RakNet::BitStream::ReadCompressed(a2, v5 - 28, 8u, 1);
      if ( Net_IsBigEndian() )
      {
        result = RakNet::BitStream::ReadCompressed(a2, v7, 0x20u, 1);
        if ( result )
          result = ByteSwapCopy((int)v7, (int)v5, 4u);
      }
      else
      {
        result = RakNet::BitStream::ReadCompressed(a2, v5, 0x20u, 1);
      }
      if ( (unsigned __int8)*(v5 - 28) > 0xAu )
        result = (*(int (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
                   g_LTClient,
                   v5 - 27,
                   2048,
                   a2);
    }
    else
    {
      *(v5 - 28) = 0;
      *(v5 - 27) = 0;
      *(_DWORD *)v5 = 0;
    }
    v5 += 32;
    --v8;
  }
  while ( v8 );
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A03E0) --------------------------------------------------------
void __thiscall FactionData_WriteToBitStream(int *this, char *a2)
{
  char *v2; // edi
  char v4[4]; // [esp+8h] [ebp-4h] BYREF

  v2 = a2;
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    (char *)this + 6,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    (char *)this + 58,
    2048,
    v2);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    (char *)this + 26,
    2048,
    v2);
  a2 = (char *)*this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v4, 4u);
    BitStream_WriteBitsCompressed(v2, v4, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  if ( *((_BYTE *)this + 1082) )
    BitStream_WriteBit1(v2);
  else
    BitStream_WriteBit0(v2);
  LOBYTE(a2) = *((_BYTE *)this + 5);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *((_BYTE *)this + 4);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  if ( *((_BYTE *)this + 1082) )
  {
    BitStream_WriteU32_Compressed_thunk(this + 271, v2);
  }
  else
  {
    BitStream_WriteU32_Compressed_thunk(this + 272, v2);
    Playerfile_BlockC0_WriteFull(this + 273, v2);
    sub_65950D30(this + 304, v2);
    Array40_WriteToBitStream(this + 314, v2);
  }
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A0500) --------------------------------------------------------
char *__thiscall Playerfile_BlockE_WriteFull(int *this, char *a2)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  (*(void (__thiscall **)(int, int *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 1, 2048, v3);
  (*(void (__thiscall **)(int, int *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 6, 2048, v3);
  (*(void (__thiscall **)(int, int *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 14, 2048, v3);
  a2 = (char *)*(this + 109);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  return Playerfile_BlockC0_WriteFull(this + 78, v3);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A05E0) --------------------------------------------------------
bool __thiscall Packet_ID_FACTION_read_block_0FD4_entry(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 4,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 24,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 56,
    2048,
    a2);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 436);
  return Playerfile_read_blockC0(this + 312, a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A0660) --------------------------------------------------------
char *__thiscall Array440_WriteToBitStream(_DWORD *this, char *a2)
{
  int v3; // edi
  char *result; // eax
  int v5; // esi
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 440;
  v7 = v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    result = BitStream_WriteBitsCompressed(a2, v6, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(a2, (char *)&v7, 0x20u, 1);
  }
  if ( v3 )
  {
    v5 = 0;
    do
    {
      result = Playerfile_BlockE_WriteFull((int *)(v5 + *(this + 1)), a2);
      v5 += 440;
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (657A06F0) --------------------------------------------------------
void __thiscall Packet_ID_FACTION_read_block_1738(char *this, unsigned int *a2)
{
  unsigned int v3; // eax

  RakNet::BitStream::ReadCompressed(a2, this, 8u, 1);
  Read_u32c_alt(a2, this + 4);
  RakNet::BitStream::ReadCompressed(a2, this + 8, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 9, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 10, 8u, 1);
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *(this + 72) = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 11,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 31,
    2048,
    a2);
  sub_65946F10();
  sub_65946F10();
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A07B0) --------------------------------------------------------
void __thiscall Playerfile_BlockF_WriteFull(_DWORD *this, char *a2)
{
  char *v2; // edi
  char v4[4]; // [esp+8h] [ebp-8h] BYREF
  char v5[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = a2;
  v5[0] = *(_BYTE *)this;
  BitStream_WriteBitsCompressed(a2, v5, 8u, 1);
  a2 = (char *)*(this + 1);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v4, 4u);
    BitStream_WriteBitsCompressed(v2, v4, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  LOBYTE(a2) = *((_BYTE *)this + 8);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *((_BYTE *)this + 9);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *((_BYTE *)this + 10);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  if ( *((_BYTE *)this + 72) )
    BitStream_WriteBit1(v2);
  else
    BitStream_WriteBit0(v2);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    (char *)this + 11,
    2048,
    v2);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    (char *)this + 31,
    2048,
    v2);
  BitStream_WriteU32_Compressed_thunk(this + 16, v2);
  BitStream_WriteU32_Compressed_thunk(this + 17, v2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A08B0) --------------------------------------------------------
void __thiscall Packet_ID_FACTION_read_block_1784_entry(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed(a2, this, 8u, 1);
  Read_u32c_alt(a2, this + 4);
  RakNet::BitStream::ReadCompressed(a2, this + 8, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 12);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 16,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 36,
    2048,
    a2);
  sub_65946F10();
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A0930) --------------------------------------------------------
void __thiscall Playerfile_BlockG_WriteFull(_DWORD *this, char *a2)
{
  char *v2; // esi
  char v4[4]; // [esp+8h] [ebp-8h] BYREF
  char v5[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = a2;
  v5[0] = *(_BYTE *)this;
  BitStream_WriteBitsCompressed(a2, v5, 8u, 1);
  a2 = (char *)*(this + 1);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v4, 4u);
    BitStream_WriteBitsCompressed(v2, v4, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  LOBYTE(a2) = *((_BYTE *)this + 8);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  a2 = (char *)*(this + 3);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v4, 4u);
    BitStream_WriteBitsCompressed(v2, v4, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  (*(void (__thiscall **)(int, _DWORD *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 4, 2048, v2);
  (*(void (__thiscall **)(int, _DWORD *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 9, 2048, v2);
  BitStream_WriteU32_Compressed_thunk(this + 17, v2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A0A20) --------------------------------------------------------
void __thiscall InventorySlot_WriteToBitStream(unsigned __int16 *this, char *a2)
{
  char *v3; // esi
  int v4; // ebx
  int v5; // edi
  char *v6; // [esp-Ch] [ebp-24h]
  int v8; // [esp+10h] [ebp-8h] BYREF
  _BYTE v9[4]; // [esp+14h] [ebp-4h] BYREF

  v8 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v8, (int)v9, 2u);
    v6 = v9;
  }
  else
  {
    v6 = (char *)&v8;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v6, 0x10u, 1);
  v8 = *(this + 1);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v8, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&v8, 0x10u, 1);
  }
  v4 = (*((_DWORD *)this + 3) - *((_DWORD *)this + 2)) / 72;
  LOBYTE(a2) = (char)(*((_BYTE *)this + 12) - *((_BYTE *)this + 8)) / 72;
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  if ( (_BYTE)v4 )
  {
    v5 = 0;
    v4 = (unsigned __int8)v4;
    do
    {
      Playerfile_BlockG_WriteFull((_DWORD *)(v5 + *((_DWORD *)this + 2)), v3);
      v5 += 72;
      --v4;
    }
    while ( v4 );
  }
}

//----- (657A0B00) --------------------------------------------------------
char *__thiscall Playerfile_BlockH_WriteFull(int *this, char *a2)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  LOBYTE(a2) = *((_BYTE *)this + 4);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  a2 = (char *)*(this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  LOBYTE(a2) = *((_BYTE *)this + 12);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    (char *)this + 13,
    2048,
    v3);
  a2 = (char *)*(this + 20);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  LOBYTE(a2) = *((_BYTE *)this + 156);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    (char *)this + 157,
    2048,
    v3);
  (*(void (__thiscall **)(int, int *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 21, 2048, v3);
  (*(void (__thiscall **)(int, int *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 31, 2048, v3);
  Playerfile_BlockC0_WriteFull(this + 48, v3);
  LOBYTE(a2) = *((_BYTE *)this + 316);
  return BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A0C90) --------------------------------------------------------
bool __thiscall Packet_ID_PLAYERFILE_read_structA(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed(a2, this + 4, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 8);
  RakNet::BitStream::ReadCompressed(a2, this + 12, 8u, 1);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 13,
    2048,
    a2);
  Read_u32c_alt(a2, this + 80);
  RakNet::BitStream::ReadCompressed(a2, this + 156, 8u, 1);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 157,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 84,
    2048,
    a2);
  strncpy_s(this + 104, 0x14u, this + 84, 0xFFFFFFFF);
  _strlwr_s(this + 104, 0x14u);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 124,
    2048,
    a2);
  Playerfile_read_blockC0(this + 192, a2);
  return RakNet::BitStream::ReadCompressed(a2, this + 316, 8u, 1);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A0D90) --------------------------------------------------------
char *__thiscall Array320_WriteToBitStream(_DWORD *this, char *a2)
{
  int v3; // ebx
  char *result; // eax
  int v5; // esi
  int v6; // [esp+8h] [ebp-8h] BYREF
  char v7[4]; // [esp+Ch] [ebp-4h] BYREF

  LOWORD(v3) = (*(this + 2) - *(this + 1)) / 320;
  v6 = (unsigned __int16)v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v6, (int)v7, 2u);
    BitStream_WriteBitsCompressed(a2, v7, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(a2, (char *)&v6, 0x10u, 1);
  }
  result = 0;
  if ( (_WORD)v3 )
  {
    v5 = 0;
    v3 = (unsigned __int16)v3;
    do
    {
      result = Playerfile_BlockH_WriteFull((int *)(v5 + *(this + 1)), a2);
      v5 += 320;
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (657A0E30) --------------------------------------------------------
char *__thiscall Playerfile_BlockI_WriteFull(_DWORD *this, char *a2)
{
  char *v2; // edi
  char v5[4]; // [esp+8h] [ebp-8h] BYREF
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = a2;
  v6[0] = *(_BYTE *)this;
  BitStream_WriteBitsCompressed(a2, v6, 8u, 1);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(
    g_LTClient,
    (char *)this + 1,
    2048,
    v2);
  a2 = (char *)*(this + 17);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v5, 4u);
    BitStream_WriteBitsCompressed(v2, v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  return Array320_WriteToBitStream(this + 18, v2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A0EC0) --------------------------------------------------------
char *__thiscall Array88_WriteToBitStream(_DWORD *this, char *a2)
{
  int v3; // ebx
  char *result; // eax
  int v5; // edi
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 88;
  v6[0] = (char)(*((_BYTE *)this + 8) - *((_BYTE *)this + 4)) / 88;
  result = BitStream_WriteBitsCompressed(a2, v6, 8u, 1);
  if ( (_BYTE)v3 )
  {
    v5 = 0;
    v3 = (unsigned __int8)v3;
    do
    {
      result = Playerfile_BlockI_WriteFull((_DWORD *)(v5 + *(this + 1)), a2);
      v5 += 88;
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (657A0F20) --------------------------------------------------------
char *__thiscall PlayerData_WriteToStream(char **this, char *a2)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char *v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  (*(void (__thiscall **)(int, int *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, (int *)this + 1, 2048, v3);
  a2 = *(this + 9);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  v7 = (char *)*((unsigned __int16 *)this + 20);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&v7, 0x10u, 1);
  }
  a2 = *(this + 11);
  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  ByteSwapCopy((int)&a2, (int)v6, 4u);
  return BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A10A0) --------------------------------------------------------
void __thiscall Packet_ID_A9_WriteList(_DWORD *this, char *a2)
{
  _DWORD *v2; // edi
  int v3; // eax
  char *v4; // esi
  int v5; // ebx
  int v6; // edi
  char *v7; // [esp-Ch] [ebp-24h]
  char v8[4]; // [esp+Ch] [ebp-Ch] BYREF
  _DWORD *v9; // [esp+10h] [ebp-8h]
  int v10; // [esp+14h] [ebp-4h] BYREF

  v2 = this;
  v3 = *(this + 5);
  v9 = this;
  v10 = v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v10, (int)v8, 4u);
    v7 = v8;
  }
  else
  {
    v7 = (char *)&v10;
  }
  v4 = a2;
  BitStream_WriteBitsCompressed(a2, v7, 0x20u, 1);
  LOBYTE(a2) = *((_BYTE *)v2 + 24);
  BitStream_WriteBitsCompressed(v4, (char *)&a2, 8u, 1);
  v10 = *((unsigned __int16 *)v2 + 8);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v10, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v4, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v4, (char *)&v10, 0x10u, 1);
  }
  a2 = (char *)v2[7];
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v8, 4u);
    BitStream_WriteBitsCompressed(v4, v8, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v4, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)v2[10];
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v8, 4u);
    BitStream_WriteBitsCompressed(v4, v8, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v4, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)v2[11];
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v8, 4u);
    BitStream_WriteBitsCompressed(v4, v8, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v4, (char *)&a2, 0x20u, 1);
  }
  v5 = (v2[2] - v2[1]) / 52;
  a2 = (char *)v5;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v8, 4u);
    BitStream_WriteBitsCompressed(v4, v8, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v4, (char *)&a2, 0x20u, 1);
  }
  if ( v5 )
  {
    v6 = 0;
    do
    {
      PlayerData_WriteToStream((char **)(v6 + v9[1]), v4);
      v6 += 52;
      --v5;
    }
    while ( v5 );
    v2 = v9;
  }
  BitStream_WriteU32_Compressed_thunk(v2 + 8, v4);
  BitStream_WriteU32_Compressed_thunk(v2 + 9, v4);
}

//----- (657A1280) --------------------------------------------------------
void __thiscall Playerfile_BlockJ_WriteFull(_DWORD *this, char *a2)
{
  int v3; // esi
  int v4; // ebx
  char v5[4]; // [esp+Ch] [ebp-Ch] BYREF
  int v6; // [esp+10h] [ebp-8h] BYREF
  char v7[4]; // [esp+14h] [ebp-4h] BYREF

  v7[0] = *(_BYTE *)this;
  BitStream_WriteBitsCompressed(a2, v7, 8u, 1);
  v3 = (*(this + 3) - *(this + 2)) / 88;
  v6 = v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v6, (int)v5, 4u);
    BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(a2, (char *)&v6, 0x20u, 1);
  }
  if ( v3 )
  {
    v4 = 0;
    do
    {
      Packet_ID_A9_WriteList((_DWORD *)(v4 + *(this + 2)), a2);
      v4 += 88;
      --v3;
    }
    while ( v3 );
  }
}

//----- (657A1320) --------------------------------------------------------
void __thiscall Array20_WriteToBitStream(_DWORD *this, char *a2)
{
  int v3; // edi
  int v4; // esi
  char v5[4]; // [esp+8h] [ebp-8h] BYREF
  int v6; // [esp+Ch] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 20;
  v6 = v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v6, (int)v5, 4u);
    BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(a2, (char *)&v6, 0x20u, 1);
  }
  if ( v3 )
  {
    v4 = 0;
    do
    {
      Playerfile_BlockJ_WriteFull((_DWORD *)(v4 + *(this + 1)), a2);
      v4 += 20;
      --v3;
    }
    while ( v3 );
  }
}

//----- (657A13D0) --------------------------------------------------------
char *__thiscall IntPair_WriteToBitStream(char **this, char *a2)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char *v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  a2 = *(this + 1);
  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  ByteSwapCopy((int)&a2, (int)v6, 4u);
  return BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
}

//----- (657A1470) --------------------------------------------------------
char *__thiscall Playerfile_BlockK_WriteFull(_DWORD *this, char *a2)
{
  char *v2; // edi
  unsigned int v4; // ebx
  char *result; // eax
  unsigned int i; // esi
  char v8[4]; // [esp+10h] [ebp-8h] BYREF
  char v9[4]; // [esp+14h] [ebp-4h] BYREF

  v2 = a2;
  v9[0] = *(_BYTE *)this;
  BitStream_WriteBitsCompressed(a2, v9, 8u, 1);
  a2 = (char *)*(this + 5);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v8, 4u);
    BitStream_WriteBitsCompressed(v2, v8, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  v4 = (*(this + 3) - *(this + 2)) >> 3;
  a2 = (char *)v4;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v8, 4u);
    result = BitStream_WriteBitsCompressed(v2, v8, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  for ( i = 0; i < v4; ++i )
    result = IntPair_WriteToBitStream((char **)(*(this + 2) + 8 * i), v2);
  return result;
}

//----- (657A1540) --------------------------------------------------------
char *__thiscall Array24_WriteToBitStream(_DWORD *this, char *a2)
{
  int v3; // edi
  char *result; // eax
  int v5; // esi
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 24;
  v7 = v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    result = BitStream_WriteBitsCompressed(a2, v6, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(a2, (char *)&v7, 0x20u, 1);
  }
  if ( v3 )
  {
    v5 = 0;
    do
    {
      result = Playerfile_BlockK_WriteFull((_DWORD *)(v5 + *(this + 1)), a2);
      v5 += 24;
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (657A15C0) --------------------------------------------------------
char __thiscall GamePacket_WriteAllFields(int this)
{
  char result; // al
  char v3; // cl
  int v4; // eax
  char v5; // cl
  char *v6; // [esp-8h] [ebp-10h]
  char v7[4]; // [esp+4h] [ebp-4h] BYREF

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    v7[0] = *(_BYTE *)(this + 1076);
    BitStream_WriteBitsCompressed((char *)(this + 12), v7, 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 2:
        FactionData_WriteToBitStream((int *)(this + 2136), (char *)(this + 12));
        v6 = (char *)(this + 12);
        if ( *(_BYTE *)(this + 3218) )
          goto LABEL_18;
        CharacterList_WriteToBitStream((_DWORD *)(this + 4104), v6);
        Array20_WriteToBitStream((_DWORD *)(this + 6044), (char *)(this + 12));
        Array24_WriteToBitStream((_DWORD *)(this + 6060), (char *)(this + 12));
        return 1;
      case 4:
        BitStream_Write2048((char *)this, this + 1078);
        BitStream_Write2048((char *)this, this + 1110);
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1077));
        return 1;
      case 5:
        BitStream_Write2048((char *)this, this + 1110);
        return 1;
      case 7:
      case 0x2B:
      case 0x37:
      case 0x38:
      case 0x39:
      case 0x3C:
      case 0x42:
      case 0x46:
        goto LABEL_46;
      case 9:
        BitStream_Write2048((char *)this, this + 3428);
        return 1;
      case 0xA:
      case 0x19:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 3424));
        BitStream_WriteBool((char *)this, *(_BYTE *)(this + 3916));
        if ( *(_BYTE *)(this + 3916) )
          return 1;
        BitStream_Write2048((char *)this, this + 3917);
        return 1;
      case 0xD:
        Array60_WriteToBitStream((_DWORD *)(this + 3448), (char *)(this + 12));
        CharacterList_WriteToBitStream((_DWORD *)(this + 4104), (char *)(this + 12));
        return 1;
      case 0xE:
        goto LABEL_39;
      case 0xF:
        Playerfile_BlockC0_WriteFull((int *)(this + 3464), (char *)(this + 12));
        return 1;
      case 0x10:
        v3 = *(_BYTE *)(this + 3588);
        goto LABEL_13;
      case 0x11:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 3588));
        goto LABEL_15;
      case 0x12:
        NetworkState_WriteToBitStream((_BYTE *)(this + 3592), (char *)(this + 12));
        return 1;
      case 0x13:
        v6 = (char *)(this + 12);
LABEL_18:
        Array320_WriteToBitStream((_DWORD *)(this + 3408), v6);
        return 1;
      case 0x15:
        Array176_WriteToBitStream((_DWORD *)(this + 3628), (char *)(this + 12));
        ItemArray_WriteToBitStream((_DWORD *)(this + 3644), (char *)(this + 12));
        BitStream_Write2048((char *)this, this + 3660);
        BitStream_WriteBool((char *)this, *(_BYTE *)(this + 3916));
        CharacterList_WriteToBitStream((_DWORD *)(this + 4104), (char *)(this + 12));
        return 1;
      case 0x16:
      case 0x18:
      case 0x1C:
      case 0x34:
        goto LABEL_15;
      case 0x17:
        BitStream_Write2048((char *)this, this + 3660);
        BitStream_WriteBool((char *)this, *(_BYTE *)(this + 3916));
        return 1;
      case 0x1A:
      case 0x1B:
      case 0x22:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 4048));
        return 1;
      case 0x1E:
        Array440_WriteToBitStream((_DWORD *)(this + 4052), (char *)(this + 12));
        return 1;
      case 0x1F:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 4048));
        BitStream_Write2048((char *)this, this + 3660);
        return 1;
      case 0x21:
        ItemArray_WriteToBitStream((_DWORD *)(this + 3644), (char *)(this + 12));
        return 1;
      case 0x24:
        CharacterList_WriteToBitStream((_DWORD *)(this + 4104), (char *)(this + 12));
        SkillArray_WriteToBitStream((int *)(this + 4928), (char *)(this + 12));
        return 1;
      case 0x25:
        BitStream_Write2048((char *)this, this + 4068);
        return 1;
      case 0x26:
      case 0x28:
      case 0x29:
      case 0x3B:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 4100));
        return 1;
      case 0x27:
        PlayerData_WriteToBitStream((_DWORD *)(this + 4144), (char *)(this + 12));
        return 1;
      case 0x2A:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 4216));
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 4212));
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 3424));
        BitStream_Write2048((char *)this, this + 3917);
        return 1;
      case 0x2C:
        PlayerList_WriteToBitStream((_DWORD *)(this + 4240), (char *)(this + 12));
        Array220_WriteToBitStream((unsigned __int16 *)(this + 4220), (char *)(this + 12));
        CharacterList_WriteToBitStream((_DWORD *)(this + 4104), (char *)(this + 12));
        SkillArray_WriteToBitStream((int *)(this + 4928), (char *)(this + 12));
        sub_65950D30((int *)(this + 5904), (char *)(this + 12));
        return 1;
      case 0x2D:
        CharacterEntry_WriteToBitStream((_BYTE *)(this + 4256), (char *)(this + 12));
        goto LABEL_46;
      case 0x2E:
        CharacterEntry_WriteToBitStream((_BYTE *)(this + 4256), (char *)(this + 12));
        return 1;
      case 0x2F:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 3424));
        goto LABEL_46;
      case 0x30:
        BitStream_WriteBool((char *)this, *(_BYTE *)(this + 3916));
        CharacterInfo_WriteToBitStream((_BYTE *)(this + 4464), (char *)(this + 12));
        return 1;
      case 0x31:
        BitStream_WriteBool((char *)this, *(_BYTE *)(this + 3916));
        Array372_WriteToBitStream((_DWORD *)(this + 4448), (char *)(this + 12));
        CharacterList_WriteToBitStream((_DWORD *)(this + 4104), (char *)(this + 12));
        return 1;
      case 0x32:
        BitStream_WriteBool((char *)this, *(_BYTE *)(this + 3916));
        BitStream_Write2048((char *)this, this + 1078);
        return 1;
      case 0x33:
        PlayerBlock_WriteToBitStream((unsigned __int16 *)(this + 4516), (char *)(this + 12));
        return 1;
      case 0x36:
        sub_659510B0((int *)(this + 4888), (char *)(this + 12));
LABEL_39:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1077));
        return 1;
      case 0x3A:
        v3 = *(_BYTE *)(this + 4100);
LABEL_13:
        Packet_WriteInt8((char *)this, v3);
        BitStream_Write2048((char *)this, this + 1078);
        return 1;
      case 0x3D:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 4212));
        Playerfile_BlockF_WriteFull((_DWORD *)(this + 5944), (char *)(this + 12));
        return 1;
      case 0x3E:
        InventorySlot_WriteToBitStream((unsigned __int16 *)(this + 6020), (char *)(this + 12));
        return 1;
      case 0x3F:
        v4 = this + 1078;
        goto LABEL_44;
      case 0x40:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 6040));
        v5 = *(_BYTE *)(this + 6041);
        goto LABEL_45;
      case 0x41:
        v4 = this + 3428;
LABEL_44:
        BitStream_Write2048((char *)this, v4);
        v5 = *(_BYTE *)(this + 6040);
LABEL_45:
        Packet_WriteInt8((char *)this, v5);
LABEL_46:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 4212));
        return 1;
      case 0x43:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 4212));
LABEL_15:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 3424));
        return 1;
      case 0x44:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 4212));
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 3424));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 6040));
        return 1;
      case 0x45:
        BitStream_Write2048((char *)this, this + 3428);
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 4212));
        return 1;
      case 0x48:
        Array88_WriteToBitStream((_DWORD *)(this + 6076), (char *)(this + 12));
        return 1;
      case 0x49:
        BitStream_Write2048((char *)this, this + 1078);
        return 1;
      case 0x4A:
        goto LABEL_57;
      case 0x4B:
        BitStream_Write2048((char *)this, this + 3428);
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1077));
        return 1;
      case 0x4C:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 3424));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1077));
        return 1;
      case 0x4D:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 3424));
LABEL_57:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1077));
        break;
      default:
        return 1;
    }
    return 1;
  }
  return result;
}

//----- (657A1FF0) --------------------------------------------------------
_DWORD *__cdecl Pair8_CopyRangeReverse(int a1, int a2, _DWORD *a3)
{
  int v3; // ecx
  _DWORD *result; // eax
  int v5; // esi

  v3 = a2;
  for ( result = a3; v3 != a1; result[1] = *(_DWORD *)(v3 + 4) )
  {
    v5 = *(_DWORD *)(v3 - 8);
    v3 -= 8;
    result -= 2;
    *result = v5;
  }
  return result;
}

//----- (657A2020) --------------------------------------------------------
char *__cdecl Vector40_InitWrapper(char *a1, char *a2, char *a3)
{
  return sub_6579D7C0(a1, a2, a3);
}

//----- (657A2050) --------------------------------------------------------
char *__cdecl Array40_CopyReverse(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a2;
  result = a3;
  while ( v3 != a1 )
  {
    v3 -= 40;
    result -= 40;
    qmemcpy(result, v3, 0x28u);
  }
  return result;
}

//----- (657A2080) --------------------------------------------------------
char *__cdecl Vector60_InitWrapper(char *a1, char *a2, char *a3)
{
  return sub_6579D830(a1, a2, a3);
}

//----- (657A20B0) --------------------------------------------------------
char *__cdecl Array60_CopyReverse(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a2;
  result = a3;
  while ( v3 != a1 )
  {
    v3 -= 60;
    result -= 60;
    qmemcpy(result, v3, 0x3Cu);
  }
  return result;
}

//----- (657A20E0) --------------------------------------------------------
int __cdecl sub_657A20E0(int a1, int a2, int a3)
{
  char v4; // [esp+0h] [ebp-4h]

  v4 = 0;
  return sub_6579D8A0(a1, a2, a3, a3, a3, v4);
}
// 6579D8A0: using guessed type int __cdecl sub_6579D8A0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (657A2110) --------------------------------------------------------
int __cdecl sub_657A2110(int a1, int a2, int a3)
{
  char v4; // [esp+0h] [ebp-4h]

  v4 = 0;
  return sub_6579D8E0(a1, a2, a3, a3, a3, v4);
}
// 6579D8E0: using guessed type int __cdecl sub_6579D8E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (657A2140) --------------------------------------------------------
int __cdecl sub_657A2140(int a1, int a2, int a3)
{
  char v4; // [esp+0h] [ebp-4h]

  v4 = 0;
  return sub_6579D920(a1, a2, a3, a3, a3, v4);
}
// 6579D920: using guessed type int __cdecl sub_6579D920(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (657A21A0) --------------------------------------------------------
char *__cdecl sub_657A21A0(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a2;
  result = a3;
  while ( v3 != a1 )
  {
    v3 -= 72;
    result -= 72;
    qmemcpy(result, v3, 0x48u);
  }
  return result;
}

//----- (657A21D0) --------------------------------------------------------
int __cdecl sub_657A21D0(int a1, int a2, int a3)
{
  char v4; // [esp+0h] [ebp-4h]

  v4 = 0;
  return sub_6579D9D0(a1, a2, a3, a3, a3, v4);
}
// 6579D9D0: using guessed type int __cdecl sub_6579D9D0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (657A2230) --------------------------------------------------------
_DWORD *__cdecl Pair8_CopyRangeReverse2(int a1, int a2, _DWORD *a3)
{
  int v3; // ecx
  _DWORD *result; // eax
  int v5; // esi

  v3 = a2;
  for ( result = a3; v3 != a1; result[1] = *(_DWORD *)(v3 + 4) )
  {
    v5 = *(_DWORD *)(v3 - 8);
    v3 -= 8;
    result -= 2;
    *result = v5;
  }
  return result;
}

//----- (657A2260) --------------------------------------------------------
void __cdecl Pair8Array_FillCopy(_DWORD *a1, int a2, _DWORD *a3)
{
  int i; // ecx

  for ( i = a2; i; a1 += 2 )
  {
    if ( a1 )
    {
      *a1 = *a3;
      a1[1] = a3[1];
    }
    --i;
  }
}

//----- (657A2290) --------------------------------------------------------
char *__usercall Array192_FillValue@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0xC0u);
      --v4;
      result += 192;
    }
    while ( v4 );
  }
  return result;
}

//----- (657A22D0) --------------------------------------------------------
char *__usercall Array40_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x28u);
      --v4;
      result += 40;
    }
    while ( v4 );
  }
  return result;
}

//----- (657A2300) --------------------------------------------------------
char *__usercall Array444_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x1BCu);
      --v4;
      result += 444;
    }
    while ( v4 );
  }
  return result;
}

//----- (657A2340) --------------------------------------------------------
char *__usercall Array60_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x3Cu);
      --v4;
      result += 60;
    }
    while ( v4 );
  }
  return result;
}

//----- (657A2370) --------------------------------------------------------
char *__usercall Array176_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0xB0u);
      --v4;
      result += 176;
    }
    while ( v4 );
  }
  return result;
}

//----- (657A23B0) --------------------------------------------------------
char *__usercall Array372_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x174u);
      --v4;
      result += 372;
    }
    while ( v4 );
  }
  return result;
}

//----- (657A2430) --------------------------------------------------------
char *__usercall Array72_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x48u);
      --v4;
      result += 72;
    }
    while ( v4 );
  }
  return result;
}

//----- (657A2490) --------------------------------------------------------
void __cdecl Pair8Array_FillCopy_Alt(_DWORD *a1, int a2, _DWORD *a3)
{
  int i; // ecx

  for ( i = a2; i; a1 += 2 )
  {
    if ( a1 )
    {
      *a1 = *a3;
      a1[1] = a3[1];
    }
    --i;
  }
}

//----- (657A2550) --------------------------------------------------------
_DWORD *__cdecl Array4_CopyForwardChecked(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; ++result )
  {
    if ( result )
      *result = *v3;
    ++v3;
  }
  return result;
}

//----- (657A27A0) --------------------------------------------------------
char *__stdcall sub_657A27A0(char *a1, int a2, char *a3)
{
  Array220_FillValue(a3, a1, a2, a3);
  return &a1[220 * a2];
}

//----- (657A2A50) --------------------------------------------------------
char *__usercall Array320_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x140u);
      --v4;
      result += 320;
    }
    while ( v4 );
  }
  return result;
}

//----- (657A2D60) --------------------------------------------------------
_DWORD *__stdcall Pair8Array_FillAndGetEnd(_DWORD *a1, int a2, _DWORD *a3)
{
  Pair8Array_FillCopy(a1, a2, a3);
  return &a1[2 * a2];
}

//----- (657A2DA0) --------------------------------------------------------
char *__stdcall sub_657A2DA0(char *a1, int a2, char *a3)
{
  Array192_FillValue(a3, a1, a2, a3);
  return &a1[192 * a2];
}

//----- (657A2DE0) --------------------------------------------------------
char *__stdcall sub_657A2DE0(char *a1, int a2, char *a3)
{
  Array40_FillCopy(a3, a1, a2, a3);
  return &a1[40 * a2];
}

//----- (657A2E20) --------------------------------------------------------
char *__stdcall sub_657A2E20(char *a1, int a2, char *a3)
{
  Array444_FillCopy(a3, a1, a2, a3);
  return &a1[444 * a2];
}

//----- (657A2E60) --------------------------------------------------------
char *__stdcall sub_657A2E60(char *a1, int a2, char *a3)
{
  Array60_FillCopy(a3, a1, a2, a3);
  return &a1[60 * a2];
}

//----- (657A2EA0) --------------------------------------------------------
char *__stdcall sub_657A2EA0(char *a1, int a2, char *a3)
{
  Array176_FillCopy(a3, a1, a2, a3);
  return &a1[176 * a2];
}

//----- (657A2EE0) --------------------------------------------------------
char *__stdcall sub_657A2EE0(char *a1, int a2, char *a3)
{
  Array372_FillCopy(a3, a1, a2, a3);
  return &a1[372 * a2];
}

//----- (657A2F60) --------------------------------------------------------
char *__stdcall sub_657A2F60(char *a1, int a2, char *a3)
{
  Array72_FillCopy(a3, a1, a2, a3);
  return &a1[72 * a2];
}

//----- (657A2FE0) --------------------------------------------------------
_DWORD *__stdcall Pair8Array_FillAndGetEnd_Alt(_DWORD *a1, int a2, _DWORD *a3)
{
  Pair8Array_FillCopy_Alt(a1, a2, a3);
  return &a1[2 * a2];
}

//----- (657A3020) --------------------------------------------------------
_DWORD *__thiscall Pair8Vector_CopyCtor(_DWORD *this, int a2)
{
  unsigned int v3; // edi
  _DWORD *v4; // eax
  _DWORD *v6; // [esp-20h] [ebp-44h]
  _DWORD *v7; // [esp-1Ch] [ebp-40h]
  int v8[9]; // [esp+0h] [ebp-24h] BYREF

  v8[5] = (int)v8;
  v8[4] = (int)this;
  v3 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) >> 3;
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( v3 )
  {
    if ( v3 > 0x1FFFFFFF )
      ThrowLengthError_Vector6(v8[0], v8[1]);
    v4 = Vector8_Allocate2(v3);
    *(this + 1) = v4;
    *(this + 2) = v4;
    *(this + 3) = &v4[2 * v3];
    v7 = *(_DWORD **)(a2 + 8);
    v6 = *(_DWORD **)(a2 + 4);
    v8[8] = 0;
    *(this + 2) = Pair_CopyRange3(v6, v7, v4);
  }
  return this;
}
// 65798340: using guessed type int __thiscall sub_65798340(_DWORD);

//----- (657A3110) --------------------------------------------------------
_DWORD *__thiscall Pair8Vector_CopyMoveHelper(void *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  return Pair_CopyRange(a2, a3, a4);
}

//----- (657A33E0) --------------------------------------------------------
char *__stdcall sub_657A33E0(char *a1, int a2, char *a3)
{
  Array320_FillCopy(a3, a1, a2, a3);
  return &a1[320 * a2];
}

//----- (657A3420) --------------------------------------------------------
void __thiscall Pair8Vector_InsertRange(int this, char *a2, unsigned int a3, int *a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  char *v7; // edi
  int v8; // eax
  unsigned int v9; // ecx
  char *v10; // edi
  _DWORD *v11; // eax
  _DWORD *End_Alt; // eax
  int v13; // eax
  int v14; // ebx
  int v15; // edx
  void *v16; // edx
  char *v17; // ebx
  _DWORD *v18; // [esp-20h] [ebp-4Ch]
  _DWORD *v19; // [esp-Ch] [ebp-38h]
  int v20; // [esp-8h] [ebp-34h]
  int v21[4]; // [esp+0h] [ebp-2Ch] BYREF
  int v22; // [esp+10h] [ebp-1Ch] BYREF
  void *v23; // [esp+14h] [ebp-18h]
  unsigned int v24; // [esp+18h] [ebp-14h]
  int *v25; // [esp+1Ch] [ebp-10h]
  int v26; // [esp+28h] [ebp-4h]

  v25 = v21;
  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 3;
  else
    v6 = 0;
  if ( a3 )
  {
    v7 = *(char **)(this + 8);
    v8 = (int)&v7[-v5] >> 3;
    if ( 0x1FFFFFFF - v8 < a3 )
      ThrowLengthError_Vector6(v21[0], v21[1]);
    if ( v6 >= v8 + a3 )
    {
      if ( (v7 - a2) >> 3 >= a3 )
      {
        v16 = (void *)a4[1];
        v17 = &v7[-8 * a3];
        v22 = *a4;
        v23 = v16;
        *(_DWORD *)(this + 8) = Pair8Vector_CopyMoveHelper((void *)this, v17, v7, v7);
        Pair8_CopyRangeReverse2((int)a2, (int)v17, v7);
        Pair_FillValue2(a2, &a2[8 * a3], &v22);
      }
      else
      {
        v15 = *a4;
        v23 = (void *)a4[1];
        v22 = v15;
        Pair8Vector_CopyMoveHelper((void *)this, a2, v7, &a2[8 * a3]);
        v20 = a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 3);
        v19 = *(_DWORD **)(this + 8);
        v26 = 2;
        Pair8Array_FillAndGetEnd_Alt(v19, v20, &v22);
        *(_DWORD *)(this + 8) += 8 * a3;
        Pair_FillValue2(a2, (_DWORD *)(*(_DWORD *)(this + 8) - 8 * a3), &v22);
      }
    }
    else
    {
      if ( 0x1FFFFFFF - (v6 >> 1) >= v6 )
      {
        v9 = (v6 >> 1) + v6;
        v24 = v9;
      }
      else
      {
        v24 = 0;
        v9 = 0;
      }
      if ( v9 < v8 + a3 )
      {
        v24 = v8 + a3;
        v9 = v8 + a3;
      }
      v10 = (char *)Vector8_Allocate2(v9);
      v18 = *(_DWORD **)(this + 4);
      v23 = v10;
      v26 = 0;
      v11 = Pair_CopyRange(v18, a2, v10);
      End_Alt = Pair8Array_FillAndGetEnd_Alt(v11, a3, a4);
      Pair_CopyRange(a2, *(_DWORD **)(this + 8), End_Alt);
      v13 = *(_DWORD *)(this + 4);
      v14 = ((*(_DWORD *)(this + 8) - v13) >> 3) + a3;
      if ( v13 )
        operator delete(*(void **)(this + 4));
      *(_DWORD *)(this + 12) = &v10[8 * v24];
      *(_DWORD *)(this + 8) = &v10[8 * v14];
      *(_DWORD *)(this + 4) = v10;
    }
  }
}

//----- (657A3680) --------------------------------------------------------
_DWORD *__thiscall Vector4_CopyCtor(_DWORD *this, int a2)
{
  unsigned int v3; // edi
  _DWORD *v4; // eax
  _DWORD *v6; // [esp-20h] [ebp-44h]
  _DWORD *v7; // [esp-1Ch] [ebp-40h]
  int v8[9]; // [esp+0h] [ebp-24h] BYREF

  v8[5] = (int)v8;
  v8[4] = (int)this;
  v3 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) >> 2;
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( v3 )
  {
    if ( v3 > 0x3FFFFFFF )
      ThrowLengthError_Vector2(v8[0], v8[1]);
    v4 = Vector4_Allocate(v3);
    *(this + 1) = v4;
    *(this + 2) = v4;
    *(this + 3) = &v4[v3];
    v7 = *(_DWORD **)(a2 + 8);
    v6 = *(_DWORD **)(a2 + 4);
    v8[8] = 0;
    *(this + 2) = Array4_CopyForwardChecked(v6, v7, v4);
  }
  return this;
}
// 657399C0: using guessed type int __thiscall sub_657399C0(_DWORD);

//----- (657A3740) --------------------------------------------------------
_DWORD *__thiscall Vector8_CopyCtor(_DWORD *this, int a2)
{
  unsigned int v3; // edi
  _DWORD *v4; // eax
  _DWORD *v6; // [esp-20h] [ebp-44h]
  _DWORD *v7; // [esp-1Ch] [ebp-40h]
  int v8[9]; // [esp+0h] [ebp-24h] BYREF

  v8[5] = (int)v8;
  v8[4] = (int)this;
  v3 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) >> 3;
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( v3 )
  {
    if ( v3 > 0x1FFFFFFF )
      ThrowLengthError_Vector3(v8[0], v8[1]);
    v4 = Vector8_Allocate(v3);
    *(this + 1) = v4;
    *(this + 2) = v4;
    *(this + 3) = &v4[2 * v3];
    v7 = *(_DWORD **)(a2 + 8);
    v6 = *(_DWORD **)(a2 + 4);
    v8[8] = 0;
    *(this + 2) = Array8_CopyForwardChecked(v6, v7, v4);
  }
  return this;
}
// 65798960: using guessed type int __thiscall sub_65798960(_DWORD);

//----- (657A3800) --------------------------------------------------------
_DWORD *__thiscall sub_657A3800(_DWORD *this, int a2)
{
  int v3; // edi
  int v5; // [esp-18h] [ebp-3Ch]
  int v6; // [esp-14h] [ebp-38h]
  int v7; // [esp-10h] [ebp-34h]
  _DWORD v8[9]; // [esp+0h] [ebp-24h] BYREF

  v8[5] = v8;
  v8[4] = this;
  v3 = a2;
  if ( sub_657975C0(this, (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 320) )
  {
    LOBYTE(a2) = 0;
    v7 = *(this + 1);
    v6 = *(_DWORD *)(v3 + 8);
    v5 = *(_DWORD *)(v3 + 4);
    v8[8] = 0;
    *(this + 2) = sub_657A2580(v5, v6, v7, this, a2, a2);
  }
  return this;
}
// 65798BB0: using guessed type int __thiscall sub_65798BB0(_DWORD);
// 657A2580: using guessed type int __cdecl sub_657A2580(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (657A38B0) --------------------------------------------------------
_DWORD *__thiscall Pair8Vector_CopyMoveHelper_Alt(void *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  return Pair_CopyRange2(a2, a3, a4);
}

//----- (657A38E0) --------------------------------------------------------
char *__stdcall sub_657A38E0(char *a1, char *a2, char *a3)
{
  return Array192_Copy(a1, a2, a3);
}

//----- (657A3910) --------------------------------------------------------
char *__stdcall sub_657A3910(char *a1, char *a2, char *a3)
{
  return Array40_Copy(a1, a2, a3);
}

//----- (657A3940) --------------------------------------------------------
char *__stdcall sub_657A3940(char *a1, char *a2, char *a3)
{
  return Array444_Copy(a1, a2, a3);
}

//----- (657A3970) --------------------------------------------------------
char *__stdcall sub_657A3970(char *a1, char *a2, char *a3)
{
  return Array60_Copy(a1, a2, a3);
}

//----- (657A39A0) --------------------------------------------------------
char *__stdcall sub_657A39A0(char *a1, char *a2, char *a3)
{
  return Array176_Copy(a1, a2, a3);
}

//----- (657A39D0) --------------------------------------------------------
char *__stdcall sub_657A39D0(char *a1, char *a2, char *a3)
{
  return Array220_Copy(a1, a2, a3);
}

//----- (657A3A00) --------------------------------------------------------
char *__stdcall sub_657A3A00(char *a1, char *a2, char *a3)
{
  return Array372_Copy(a1, a2, a3);
}

//----- (657A3A60) --------------------------------------------------------
char *__stdcall sub_657A3A60(char *a1, char *a2, char *a3)
{
  return Array72_Copy(a1, a2, a3);
}

//----- (657A3A90) --------------------------------------------------------
char *__stdcall sub_657A3A90(char *a1, char *a2, char *a3)
{
  return Array320_Copy(a1, a2, a3);
}

//----- (657A3BB0) --------------------------------------------------------
void __thiscall Pair8Vector_InsertRange_Alt(int this, char *a2, unsigned int a3, int *a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  char *v7; // edi
  int v8; // eax
  unsigned int v9; // ecx
  char *v10; // edi
  _DWORD *v11; // eax
  _DWORD *End; // eax
  int v13; // eax
  int v14; // ebx
  int v15; // edx
  void *v16; // edx
  char *v17; // ebx
  _DWORD *v18; // [esp-20h] [ebp-4Ch]
  _DWORD *v19; // [esp-Ch] [ebp-38h]
  int v20; // [esp-8h] [ebp-34h]
  int v21[4]; // [esp+0h] [ebp-2Ch] BYREF
  int v22; // [esp+10h] [ebp-1Ch] BYREF
  void *v23; // [esp+14h] [ebp-18h]
  unsigned int v24; // [esp+18h] [ebp-14h]
  int *v25; // [esp+1Ch] [ebp-10h]
  int v26; // [esp+28h] [ebp-4h]

  v25 = v21;
  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 3;
  else
    v6 = 0;
  if ( a3 )
  {
    v7 = *(char **)(this + 8);
    v8 = (int)&v7[-v5] >> 3;
    if ( 0x1FFFFFFF - v8 < a3 )
      ThrowLengthError_Vector3(v21[0], v21[1]);
    if ( v6 >= v8 + a3 )
    {
      if ( (v7 - a2) >> 3 >= a3 )
      {
        v16 = (void *)a4[1];
        v17 = &v7[-8 * a3];
        v22 = *a4;
        v23 = v16;
        *(_DWORD *)(this + 8) = Pair8Vector_CopyMoveHelper_Alt((void *)this, v17, v7, v7);
        Pair8_CopyRangeReverse((int)a2, (int)v17, v7);
        Pair_FillValue(a2, &a2[8 * a3], &v22);
      }
      else
      {
        v15 = *a4;
        v23 = (void *)a4[1];
        v22 = v15;
        Pair8Vector_CopyMoveHelper_Alt((void *)this, a2, v7, &a2[8 * a3]);
        v20 = a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 3);
        v19 = *(_DWORD **)(this + 8);
        v26 = 2;
        Pair8Array_FillAndGetEnd(v19, v20, &v22);
        *(_DWORD *)(this + 8) += 8 * a3;
        Pair_FillValue(a2, (_DWORD *)(*(_DWORD *)(this + 8) - 8 * a3), &v22);
      }
    }
    else
    {
      if ( 0x1FFFFFFF - (v6 >> 1) >= v6 )
      {
        v9 = (v6 >> 1) + v6;
        v24 = v9;
      }
      else
      {
        v24 = 0;
        v9 = 0;
      }
      if ( v9 < v8 + a3 )
      {
        v24 = v8 + a3;
        v9 = v8 + a3;
      }
      v10 = (char *)Vector8_Allocate(v9);
      v18 = *(_DWORD **)(this + 4);
      v23 = v10;
      v26 = 0;
      v11 = Pair_CopyRange2(v18, a2, v10);
      End = Pair8Array_FillAndGetEnd(v11, a3, a4);
      Pair_CopyRange2(a2, *(_DWORD **)(this + 8), End);
      v13 = *(_DWORD *)(this + 4);
      v14 = ((*(_DWORD *)(this + 8) - v13) >> 3) + a3;
      if ( v13 )
        operator delete(*(void **)(this + 4));
      *(_DWORD *)(this + 12) = &v10[8 * v24];
      *(_DWORD *)(this + 8) = &v10[8 * v14];
      *(_DWORD *)(this + 4) = v10;
    }
  }
}

//----- (657A3DE0) --------------------------------------------------------
int __thiscall Vector192_InsertN(int this, char *a2, unsigned int a3, char *a4)
{
  __int64 v5; // rax
  unsigned int v6; // edi
  int v7; // eax
  unsigned int v8; // edi
  void *v9; // eax
  char *v10; // ecx
  char *v11; // eax
  char *v12; // eax
  char *v13; // ecx
  int v14; // ecx
  int v15; // esi
  char *v16; // edi
  char *v18; // [esp-Ch] [ebp-FCh]
  int v19; // [esp-8h] [ebp-F8h]
  int v20[4]; // [esp+0h] [ebp-F0h] BYREF
  char *v21; // [esp+10h] [ebp-E0h]
  int v22; // [esp+14h] [ebp-DCh]
  void *v23; // [esp+18h] [ebp-D8h]
  char v24[192]; // [esp+1Ch] [ebp-D4h] BYREF
  int *v25; // [esp+E0h] [ebp-10h]
  int v26; // [esp+ECh] [ebp-4h]

  v25 = v20;
  v21 = a4;
  LODWORD(v5) = *(_DWORD *)(this + 4);
  if ( (_DWORD)v5 )
  {
    v5 = 715827883LL * (*(_DWORD *)(this + 12) - (int)v5);
    v6 = (SHIDWORD(v5) >> 5) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v23 = *(void **)(this + 8);
    v7 = ((int)v23 - *(_DWORD *)(this + 4)) / 192;
    if ( 22369621 - v7 < a3 )
      sub_657940A0(v20[0], v20[1]);
    if ( v6 >= v7 + a3 )
    {
      qmemcpy(v24, v21, sizeof(v24));
      if ( ((_BYTE *)v23 - a2) / 192 >= a3 )
      {
        v16 = (char *)v23 - 192 * a3;
        *(_DWORD *)(this + 8) = sub_657A38E0(v16, (char *)v23, (char *)v23);
        Vector40_InitWrapper(a2, v16, (char *)v23);
        LODWORD(v5) = Array192_Fill(a2, &a2[192 * a3], v24);
      }
      else
      {
        sub_657A38E0(a2, (char *)v23, &a2[192 * a3]);
        v19 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 192;
        v18 = *(char **)(this + 8);
        v26 = 2;
        sub_657A2DA0(v18, v19, v24);
        *(_DWORD *)(this + 8) += 192 * a3;
        LODWORD(v5) = Array192_Fill(a2, (char *)(*(_DWORD *)(this + 8) - 192 * a3), v24);
      }
    }
    else
    {
      if ( 22369621 - (v6 >> 1) >= v6 )
        v8 = (v6 >> 1) + v6;
      else
        v8 = 0;
      if ( v8 < v7 + a3 )
        v8 = v7 + a3;
      v9 = sub_65794F70(v8);
      v10 = *(char **)(this + 4);
      LOBYTE(v22) = 0;
      v23 = v9;
      v26 = 0;
      v11 = Array192_Copy(v10, a2, (char *)v9);
      v12 = sub_657A2DA0(v11, a3, v21);
      v13 = *(char **)(this + 8);
      LOBYTE(v22) = 0;
      Array192_Copy(a2, v13, v12);
      v14 = *(_DWORD *)(this + 4);
      v15 = (*(_DWORD *)(this + 8) - v14) / 192 + a3;
      if ( v14 )
        operator delete(*(void **)(this + 4));
      LODWORD(v5) = v23;
      HIDWORD(v5) = (char *)v23 + 192 * v15;
      *(_DWORD *)(this + 12) = (char *)v23 + 192 * v8;
      *(_QWORD *)(this + 4) = v5;
    }
  }
  return v5;
}

//----- (657A4080) --------------------------------------------------------
int __thiscall Vector40_InsertN(int this, char *a2, unsigned int a3, char *a4)
{
  __int64 v5; // rax
  unsigned int v6; // edi
  int v7; // eax
  unsigned int v8; // edi
  void *v9; // eax
  char *v10; // ecx
  char *v11; // eax
  char *v12; // eax
  char *v13; // ecx
  int v14; // ecx
  int v15; // esi
  char *v16; // edi
  char *v18; // [esp-Ch] [ebp-64h]
  int v19; // [esp-8h] [ebp-60h]
  int v20[4]; // [esp+0h] [ebp-58h] BYREF
  char *v21; // [esp+10h] [ebp-48h]
  int v22; // [esp+14h] [ebp-44h]
  void *v23; // [esp+18h] [ebp-40h]
  char v24[40]; // [esp+1Ch] [ebp-3Ch] BYREF
  int *v25; // [esp+48h] [ebp-10h]
  int v26; // [esp+54h] [ebp-4h]

  v25 = v20;
  v21 = a4;
  LODWORD(v5) = *(_DWORD *)(this + 4);
  if ( (_DWORD)v5 )
  {
    v5 = 1717986919LL * (*(_DWORD *)(this + 12) - (int)v5);
    v6 = (SHIDWORD(v5) >> 4) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v23 = *(void **)(this + 8);
    v7 = ((int)v23 - *(_DWORD *)(this + 4)) / 40;
    if ( 107374182 - v7 < a3 )
      Vector_ThrowLengthError2(v20[0], v20[1]);
    if ( v6 >= v7 + a3 )
    {
      qmemcpy(v24, v21, sizeof(v24));
      if ( ((_BYTE *)v23 - a2) / 40 >= a3 )
      {
        v16 = (char *)v23 - 40 * a3;
        *(_DWORD *)(this + 8) = sub_657A3910(v16, (char *)v23, (char *)v23);
        Array40_CopyReverse(a2, v16, (char *)v23);
        LODWORD(v5) = Array40_Fill(a2, &a2[40 * a3], v24);
      }
      else
      {
        sub_657A3910(a2, (char *)v23, &a2[40 * a3]);
        v19 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 40;
        v18 = *(char **)(this + 8);
        v26 = 2;
        sub_657A2DE0(v18, v19, v24);
        *(_DWORD *)(this + 8) += 40 * a3;
        LODWORD(v5) = Array40_Fill(a2, (char *)(*(_DWORD *)(this + 8) - 40 * a3), v24);
      }
    }
    else
    {
      if ( 107374182 - (v6 >> 1) >= v6 )
        v8 = (v6 >> 1) + v6;
      else
        v8 = 0;
      if ( v8 < v7 + a3 )
        v8 = v7 + a3;
      v9 = sub_65795030(v8);
      v10 = *(char **)(this + 4);
      LOBYTE(v22) = 0;
      v23 = v9;
      v26 = 0;
      v11 = Array40_Copy(v10, a2, (char *)v9);
      v12 = sub_657A2DE0(v11, a3, v21);
      v13 = *(char **)(this + 8);
      LOBYTE(v22) = 0;
      Array40_Copy(a2, v13, v12);
      v14 = *(_DWORD *)(this + 4);
      v15 = (*(_DWORD *)(this + 8) - v14) / 40 + a3;
      if ( v14 )
        operator delete(*(void **)(this + 4));
      LODWORD(v5) = v23;
      *(_DWORD *)(this + 12) = (char *)v23 + 40 * v8;
      *(_DWORD *)(this + 8) = v5 + 40 * v15;
      *(_DWORD *)(this + 4) = v5;
    }
  }
  return v5;
}

//----- (657A42E0) --------------------------------------------------------
int __thiscall Vector444_InsertN(int this, char *a2, unsigned int a3, char *a4)
{
  __int64 v5; // rax
  unsigned int v6; // edi
  int v7; // eax
  unsigned int v8; // edi
  void *v9; // eax
  char *v10; // ecx
  char *v11; // eax
  char *v12; // eax
  char *v13; // ecx
  void *v14; // eax
  int v15; // esi
  char *v16; // esi
  char *v17; // edi
  char *v18; // eax
  char *v20; // [esp-Ch] [ebp-1F8h]
  int v21; // [esp-8h] [ebp-1F4h]
  char *v22; // [esp-4h] [ebp-1F0h]
  int v23[4]; // [esp+0h] [ebp-1ECh] BYREF
  char *v24; // [esp+10h] [ebp-1DCh]
  int v25; // [esp+14h] [ebp-1D8h]
  void *v26; // [esp+18h] [ebp-1D4h]
  char v27[444]; // [esp+1Ch] [ebp-1D0h] BYREF
  int *v28; // [esp+1DCh] [ebp-10h]
  int v29; // [esp+1E8h] [ebp-4h]

  v28 = v23;
  v24 = a4;
  LODWORD(v5) = *(_DWORD *)(this + 4);
  if ( (_DWORD)v5 )
  {
    v5 = 2476377541LL * (*(_DWORD *)(this + 12) - (int)v5);
    v6 = (SHIDWORD(v5) >> 8) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v26 = *(void **)(this + 8);
    v7 = ((int)v26 - *(_DWORD *)(this + 4)) / 444;
    if ( 9673349 - v7 < a3 )
      Vector_ThrowLengthError3(v23[0], v23[1]);
    if ( v6 >= v7 + a3 )
    {
      qmemcpy(v27, v24, sizeof(v27));
      if ( ((_BYTE *)v26 - a2) / 444 >= a3 )
      {
        v17 = (char *)v26 - 444 * a3;
        v18 = sub_657A3940(v17, (char *)v26, (char *)v26);
        v22 = (char *)v26;
        *(_DWORD *)(this + 8) = v18;
        Vector60_InitWrapper(a2, v17, v22);
        LODWORD(v5) = Array444_Fill(a2, &a2[444 * a3], v27);
      }
      else
      {
        sub_657A3940(a2, (char *)v26, &a2[444 * a3]);
        v21 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 444;
        v20 = *(char **)(this + 8);
        v29 = 2;
        sub_657A2E20(v20, v21, v27);
        *(_DWORD *)(this + 8) += 444 * a3;
        LODWORD(v5) = Array444_Fill(a2, (char *)(*(_DWORD *)(this + 8) - 444 * a3), v27);
      }
    }
    else
    {
      if ( 9673349 - (v6 >> 1) >= v6 )
        v8 = (v6 >> 1) + v6;
      else
        v8 = 0;
      if ( v8 < v7 + a3 )
        v8 = v7 + a3;
      v9 = sub_65795090(v8);
      v10 = *(char **)(this + 4);
      LOBYTE(v25) = 0;
      v26 = v9;
      v29 = 0;
      v11 = Array444_Copy(v10, a2, (char *)v9);
      v12 = sub_657A2E20(v11, a3, v24);
      v13 = *(char **)(this + 8);
      LOBYTE(v25) = 0;
      Array444_Copy(a2, v13, v12);
      v14 = *(void **)(this + 4);
      v15 = (*(_DWORD *)(this + 8) - (int)v14) / 444 + a3;
      if ( v14 )
        operator delete(v14);
      LODWORD(v5) = v26;
      v16 = (char *)v26 + 444 * v15;
      *(_DWORD *)(this + 12) = (char *)v26 + 444 * v8;
      *(_DWORD *)(this + 8) = v16;
      *(_DWORD *)(this + 4) = v5;
    }
  }
  return v5;
}

//----- (657A4590) --------------------------------------------------------
int __thiscall Vector60_InsertRange(int this, char *a2, unsigned int a3, char *a4)
{
  __int64 v5; // rax
  unsigned int v6; // edi
  int v7; // eax
  unsigned int v8; // edi
  void *v9; // eax
  char *v10; // ecx
  char *v11; // eax
  char *v12; // eax
  char *v13; // ecx
  int v14; // esi
  char *v15; // edi
  char *v16; // eax
  char *v18; // [esp-Ch] [ebp-78h]
  int v19; // [esp-8h] [ebp-74h]
  char *v20; // [esp-4h] [ebp-70h]
  int v21[4]; // [esp+0h] [ebp-6Ch] BYREF
  char *v22; // [esp+10h] [ebp-5Ch]
  int v23; // [esp+14h] [ebp-58h]
  void *v24; // [esp+18h] [ebp-54h]
  char v25[60]; // [esp+1Ch] [ebp-50h] BYREF
  int *v26; // [esp+5Ch] [ebp-10h]
  int v27; // [esp+68h] [ebp-4h]

  v26 = v21;
  v22 = a4;
  LODWORD(v5) = *(_DWORD *)(this + 4);
  if ( (_DWORD)v5 )
  {
    v5 = 2290649225LL * (*(_DWORD *)(this + 12) - (int)v5);
    v6 = (SHIDWORD(v5) >> 5) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v24 = *(void **)(this + 8);
    v7 = ((int)v24 - *(_DWORD *)(this + 4)) / 60;
    if ( 71582788 - v7 < a3 )
      sub_65794350(v21[0], v21[1]);
    if ( v6 >= v7 + a3 )
    {
      qmemcpy(v25, v22, sizeof(v25));
      if ( ((_BYTE *)v24 - a2) / 60 >= a3 )
      {
        v15 = (char *)v24 - 60 * a3;
        v16 = sub_657A3970(v15, (char *)v24, (char *)v24);
        v20 = (char *)v24;
        *(_DWORD *)(this + 8) = v16;
        Array60_CopyReverse(a2, v15, v20);
        LODWORD(v5) = Array60_Fill(a2, &a2[60 * a3], v25);
      }
      else
      {
        sub_657A3970(a2, (char *)v24, &a2[60 * a3]);
        v19 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 60;
        v18 = *(char **)(this + 8);
        v27 = 2;
        sub_657A2E60(v18, v19, v25);
        *(_DWORD *)(this + 8) += 60 * a3;
        LODWORD(v5) = Array60_Fill(a2, (char *)(*(_DWORD *)(this + 8) - 60 * a3), v25);
      }
    }
    else
    {
      if ( 71582788 - (v6 >> 1) >= v6 )
        v8 = (v6 >> 1) + v6;
      else
        v8 = 0;
      if ( v8 < v7 + a3 )
        v8 = v7 + a3;
      v9 = sub_657950F0(v8);
      v10 = *(char **)(this + 4);
      LOBYTE(v23) = 0;
      v24 = v9;
      v27 = 0;
      v11 = Array60_Copy(v10, a2, (char *)v9);
      v12 = sub_657A2E60(v11, a3, v22);
      v13 = *(char **)(this + 8);
      LOBYTE(v23) = 0;
      Array60_Copy(a2, v13, v12);
      v14 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 60 + a3;
      if ( *(_DWORD *)(this + 4) )
        operator delete(*(void **)(this + 4));
      LODWORD(v5) = v24;
      *(_DWORD *)(this + 12) = (char *)v24 + 60 * v8;
      *(_DWORD *)(this + 8) = v5 + 60 * v14;
      *(_DWORD *)(this + 4) = v5;
    }
  }
  return v5;
}

//----- (657A4810) --------------------------------------------------------
char *__thiscall Vector176_InsertRange(int this, char *a2, unsigned int a3, char *a4)
{
  char *result; // eax
  int v6; // ecx
  unsigned int v7; // edi
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // edi
  void *v11; // eax
  char *v12; // ecx
  char *v13; // eax
  char *v14; // eax
  char *v15; // ecx
  int v16; // ecx
  int v17; // esi
  char *v18; // esi
  char *v19; // edi
  char *v20; // eax
  char *v21; // [esp-Ch] [ebp-ECh]
  int v22; // [esp-8h] [ebp-E8h]
  void *v23; // [esp-4h] [ebp-E4h]
  int v24[4]; // [esp+0h] [ebp-E0h] BYREF
  char *v25; // [esp+10h] [ebp-D0h]
  int v26; // [esp+14h] [ebp-CCh]
  void *v27; // [esp+18h] [ebp-C8h]
  char v28[176]; // [esp+1Ch] [ebp-C4h] BYREF
  int *v29; // [esp+D0h] [ebp-10h]
  int v30; // [esp+DCh] [ebp-4h]

  v29 = v24;
  result = a4;
  v6 = *(_DWORD *)(this + 4);
  v25 = a4;
  if ( v6 )
  {
    result = (char *)(780903145 * (*(_DWORD *)(this + 12) - v6));
    v7 = (*(_DWORD *)(this + 12) - v6) / 176;
  }
  else
  {
    v7 = 0;
  }
  if ( a3 )
  {
    v27 = *(void **)(this + 8);
    v8 = ((int)v27 - v6) / 176;
    if ( 24403223 - v8 < a3 )
      sub_65794400(v24[0], v24[1]);
    v9 = a3 + v8;
    if ( v7 >= v9 )
    {
      qmemcpy(v28, v25, sizeof(v28));
      if ( ((_BYTE *)v27 - a2) / 176 >= a3 )
      {
        v19 = (char *)v27 - 176 * a3;
        v20 = sub_657A39A0(v19, (char *)v27, (char *)v27);
        v23 = v27;
        *(_DWORD *)(this + 8) = v20;
        sub_657A20E0((int)a2, (int)v19, (int)v23);
        return Array176_Fill(a2, &a2[176 * a3], v28);
      }
      else
      {
        sub_657A39A0(a2, (char *)v27, &a2[176 * a3]);
        v22 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 176;
        v21 = *(char **)(this + 8);
        v30 = 2;
        sub_657A2EA0(v21, v22, v28);
        *(_DWORD *)(this + 8) += 176 * a3;
        return Array176_Fill(a2, (char *)(*(_DWORD *)(this + 8) - 176 * a3), v28);
      }
    }
    else
    {
      if ( 24403223 - (v7 >> 1) >= v7 )
        v10 = (v7 >> 1) + v7;
      else
        v10 = 0;
      if ( v10 < v9 )
        v10 = v9;
      v11 = sub_65795150(v10);
      v12 = *(char **)(this + 4);
      LOBYTE(v26) = 0;
      v27 = v11;
      v30 = 0;
      v13 = Array176_Copy(v12, a2, (char *)v11);
      v14 = sub_657A2EA0(v13, a3, v25);
      v15 = *(char **)(this + 8);
      LOBYTE(v26) = 0;
      Array176_Copy(a2, v15, v14);
      v16 = *(_DWORD *)(this + 4);
      v17 = (*(_DWORD *)(this + 8) - v16) / 176 + a3;
      if ( v16 )
        operator delete(*(void **)(this + 4));
      result = (char *)v27;
      v18 = (char *)v27 + 176 * v17;
      *(_DWORD *)(this + 12) = (char *)v27 + 176 * v10;
      *(_DWORD *)(this + 8) = v18;
      *(_DWORD *)(this + 4) = result;
    }
  }
  return result;
}

//----- (657A4AB0) --------------------------------------------------------
char *__thiscall sub_657A4AB0(int this, char *a2, unsigned int a3, char *a4)
{
  char *result; // eax
  int v6; // ecx
  unsigned int v7; // edi
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // edi
  void *v11; // eax
  char *v12; // ecx
  char *v13; // eax
  char *v14; // eax
  char *v15; // ecx
  int v16; // ecx
  int v17; // esi
  char *v18; // esi
  char *v19; // edi
  char *v20; // eax
  char *v21; // [esp-Ch] [ebp-118h]
  int v22; // [esp-8h] [ebp-114h]
  void *v23; // [esp-4h] [ebp-110h]
  int v24[4]; // [esp+0h] [ebp-10Ch] BYREF
  char *v25; // [esp+10h] [ebp-FCh]
  int v26; // [esp+14h] [ebp-F8h]
  void *v27; // [esp+18h] [ebp-F4h]
  char v28[220]; // [esp+1Ch] [ebp-F0h] BYREF
  int *v29; // [esp+FCh] [ebp-10h]
  int v30; // [esp+108h] [ebp-4h]

  v29 = v24;
  result = a4;
  v6 = *(_DWORD *)(this + 4);
  v25 = a4;
  if ( v6 )
  {
    result = (char *)(156180629 * (*(_DWORD *)(this + 12) - v6));
    v7 = (*(_DWORD *)(this + 12) - v6) / 220;
  }
  else
  {
    v7 = 0;
  }
  if ( a3 )
  {
    v27 = *(void **)(this + 8);
    v8 = ((int)v27 - v6) / 220;
    if ( 19522578 - v8 < a3 )
      sub_657944B0(v24[0], v24[1]);
    v9 = a3 + v8;
    if ( v7 >= v9 )
    {
      qmemcpy(v28, v25, sizeof(v28));
      if ( ((_BYTE *)v27 - a2) / 220 >= a3 )
      {
        v19 = (char *)v27 - 220 * a3;
        v20 = sub_657A39D0(v19, (char *)v27, (char *)v27);
        v23 = v27;
        *(_DWORD *)(this + 8) = v20;
        sub_657A2110((int)a2, (int)v19, (int)v23);
        return Array220_Fill(a2, &a2[220 * a3], v28);
      }
      else
      {
        sub_657A39D0(a2, (char *)v27, &a2[220 * a3]);
        v22 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 220;
        v21 = *(char **)(this + 8);
        v30 = 2;
        sub_657A27A0(v21, v22, v28);
        *(_DWORD *)(this + 8) += 220 * a3;
        return Array220_Fill(a2, (char *)(*(_DWORD *)(this + 8) - 220 * a3), v28);
      }
    }
    else
    {
      if ( 19522578 - (v7 >> 1) >= v7 )
        v10 = (v7 >> 1) + v7;
      else
        v10 = 0;
      if ( v10 < v9 )
        v10 = v9;
      v11 = sub_65794E50(v10);
      v12 = *(char **)(this + 4);
      LOBYTE(v26) = 0;
      v27 = v11;
      v30 = 0;
      v13 = Array220_Copy(v12, a2, (char *)v11);
      v14 = sub_657A27A0(v13, a3, v25);
      v15 = *(char **)(this + 8);
      LOBYTE(v26) = 0;
      Array220_Copy(a2, v15, v14);
      v16 = *(_DWORD *)(this + 4);
      v17 = (*(_DWORD *)(this + 8) - v16) / 220 + a3;
      if ( v16 )
        operator delete(*(void **)(this + 4));
      result = (char *)v27;
      v18 = (char *)v27 + 220 * v17;
      *(_DWORD *)(this + 12) = (char *)v27 + 220 * v10;
      *(_DWORD *)(this + 8) = v18;
      *(_DWORD *)(this + 4) = result;
    }
  }
  return result;
}

//----- (657A4D50) --------------------------------------------------------
char *__thiscall sub_657A4D50(int this, char *a2, unsigned int a3, char *a4)
{
  char *result; // eax
  int v6; // ecx
  unsigned int v7; // edi
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // edi
  void *v11; // eax
  char *v12; // ecx
  char *v13; // eax
  char *v14; // eax
  char *v15; // ecx
  int v16; // ecx
  int v17; // esi
  char *v18; // esi
  char *v19; // edi
  char *v20; // eax
  char *v21; // [esp-Ch] [ebp-1B0h]
  int v22; // [esp-8h] [ebp-1ACh]
  void *v23; // [esp-4h] [ebp-1A8h]
  int v24[4]; // [esp+0h] [ebp-1A4h] BYREF
  char *v25; // [esp+10h] [ebp-194h]
  int v26; // [esp+14h] [ebp-190h]
  void *v27; // [esp+18h] [ebp-18Ch]
  char v28[372]; // [esp+1Ch] [ebp-188h] BYREF
  int *v29; // [esp+194h] [ebp-10h]
  int v30; // [esp+1A0h] [ebp-4h]

  v29 = v24;
  result = a4;
  v6 = *(_DWORD *)(this + 4);
  v25 = a4;
  if ( v6 )
  {
    result = (char *)(738919105 * (*(_DWORD *)(this + 12) - v6));
    v7 = (*(_DWORD *)(this + 12) - v6) / 372;
  }
  else
  {
    v7 = 0;
  }
  if ( a3 )
  {
    v27 = *(void **)(this + 8);
    v8 = ((int)v27 - v6) / 372;
    if ( 11545611 - v8 < a3 )
      sub_65794550(v24[0], v24[1]);
    v9 = a3 + v8;
    if ( v7 >= v9 )
    {
      qmemcpy(v28, v25, sizeof(v28));
      if ( ((_BYTE *)v27 - a2) / 372 >= a3 )
      {
        v19 = (char *)v27 - 372 * a3;
        v20 = sub_657A3A00(v19, (char *)v27, (char *)v27);
        v23 = v27;
        *(_DWORD *)(this + 8) = v20;
        sub_657A2140((int)a2, (int)v19, (int)v23);
        return Array372_Fill(a2, &a2[372 * a3], v28);
      }
      else
      {
        sub_657A3A00(a2, (char *)v27, &a2[372 * a3]);
        v22 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 372;
        v21 = *(char **)(this + 8);
        v30 = 2;
        sub_657A2EE0(v21, v22, v28);
        *(_DWORD *)(this + 8) += 372 * a3;
        return Array372_Fill(a2, (char *)(*(_DWORD *)(this + 8) - 372 * a3), v28);
      }
    }
    else
    {
      if ( 11545611 - (v7 >> 1) >= v7 )
        v10 = (v7 >> 1) + v7;
      else
        v10 = 0;
      if ( v10 < v9 )
        v10 = v9;
      v11 = sub_657951B0(v10);
      v12 = *(char **)(this + 4);
      LOBYTE(v26) = 0;
      v27 = v11;
      v30 = 0;
      v13 = Array372_Copy(v12, a2, (char *)v11);
      v14 = sub_657A2EE0(v13, a3, v25);
      v15 = *(char **)(this + 8);
      LOBYTE(v26) = 0;
      Array372_Copy(a2, v15, v14);
      v16 = *(_DWORD *)(this + 4);
      v17 = (*(_DWORD *)(this + 8) - v16) / 372 + a3;
      if ( v16 )
        operator delete(*(void **)(this + 4));
      result = (char *)v27;
      v18 = (char *)v27 + 372 * v17;
      *(_DWORD *)(this + 12) = (char *)v27 + 372 * v10;
      *(_DWORD *)(this + 8) = v18;
      *(_DWORD *)(this + 4) = result;
    }
  }
  return result;
}

//----- (657A5290) --------------------------------------------------------
int __thiscall Vector72_InsertRange(int this, char *a2, unsigned int a3, char *a4)
{
  __int64 v5; // rax
  unsigned int v6; // edi
  int v7; // eax
  unsigned int v8; // edi
  void *v9; // eax
  char *v10; // ecx
  char *v11; // eax
  char *v12; // eax
  char *v13; // ecx
  int v14; // ecx
  int v15; // esi
  char *v16; // edi
  char *v18; // [esp-Ch] [ebp-84h]
  int v19; // [esp-8h] [ebp-80h]
  int v20[4]; // [esp+0h] [ebp-78h] BYREF
  char *v21; // [esp+10h] [ebp-68h]
  int v22; // [esp+14h] [ebp-64h]
  void *v23; // [esp+18h] [ebp-60h]
  char v24[72]; // [esp+1Ch] [ebp-5Ch] BYREF
  int *v25; // [esp+68h] [ebp-10h]
  int v26; // [esp+74h] [ebp-4h]

  v25 = v20;
  v21 = a4;
  LODWORD(v5) = *(_DWORD *)(this + 4);
  if ( (_DWORD)v5 )
  {
    v5 = 954437177LL * (*(_DWORD *)(this + 12) - (int)v5);
    v6 = (SHIDWORD(v5) >> 4) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v23 = *(void **)(this + 8);
    v7 = ((int)v23 - *(_DWORD *)(this + 4)) / 72;
    if ( 59652323 - v7 < a3 )
      sub_657946B0(v20[0], v20[1]);
    if ( v6 >= v7 + a3 )
    {
      qmemcpy(v24, v21, sizeof(v24));
      if ( ((_BYTE *)v23 - a2) / 72 >= a3 )
      {
        v16 = (char *)v23 - 72 * a3;
        *(_DWORD *)(this + 8) = sub_657A3A60(v16, (char *)v23, (char *)v23);
        sub_657A21A0(a2, v16, (char *)v23);
        LODWORD(v5) = Array72_Fill(a2, &a2[72 * a3], v24);
      }
      else
      {
        sub_657A3A60(a2, (char *)v23, &a2[72 * a3]);
        v19 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 72;
        v18 = *(char **)(this + 8);
        v26 = 2;
        sub_657A2F60(v18, v19, v24);
        *(_DWORD *)(this + 8) += 72 * a3;
        LODWORD(v5) = Array72_Fill(a2, (char *)(*(_DWORD *)(this + 8) - 72 * a3), v24);
      }
    }
    else
    {
      if ( 59652323 - (v6 >> 1) >= v6 )
        v8 = (v6 >> 1) + v6;
      else
        v8 = 0;
      if ( v8 < v7 + a3 )
        v8 = v7 + a3;
      v9 = sub_65795270(v8);
      v10 = *(char **)(this + 4);
      LOBYTE(v22) = 0;
      v23 = v9;
      v26 = 0;
      v11 = Array72_Copy(v10, a2, (char *)v9);
      v12 = sub_657A2F60(v11, a3, v21);
      v13 = *(char **)(this + 8);
      LOBYTE(v22) = 0;
      Array72_Copy(a2, v13, v12);
      v14 = *(_DWORD *)(this + 4);
      v15 = (*(_DWORD *)(this + 8) - v14) / 72 + a3;
      if ( v14 )
        operator delete(*(void **)(this + 4));
      LODWORD(v5) = v23;
      *(_DWORD *)(this + 12) = (char *)v23 + 72 * v8;
      *(_DWORD *)(this + 8) = v5 + 72 * v15;
      *(_DWORD *)(this + 4) = v5;
    }
  }
  return v5;
}

//----- (657A54F0) --------------------------------------------------------
char *__thiscall Vector320_InsertRange(int this, char *a2, unsigned int a3, char *a4)
{
  char *result; // eax
  int v6; // esi
  unsigned int v7; // edi
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // edi
  void *v11; // eax
  char *v12; // ecx
  char *v13; // eax
  char *v14; // eax
  char *v15; // ecx
  int v16; // esi
  int i; // eax
  char *v18; // edi
  char *v19; // [esp-Ch] [ebp-17Ch]
  int v20; // [esp-8h] [ebp-178h]
  int v21[4]; // [esp+0h] [ebp-170h] BYREF
  char *v22; // [esp+10h] [ebp-160h]
  int v23; // [esp+14h] [ebp-15Ch]
  void *v24; // [esp+18h] [ebp-158h]
  char v25[320]; // [esp+1Ch] [ebp-154h] BYREF
  int *v26; // [esp+160h] [ebp-10h]
  int v27; // [esp+16Ch] [ebp-4h]
  int v28; // [esp+17Ch] [ebp+Ch]

  v26 = v21;
  result = a4;
  v6 = *(_DWORD *)(this + 4);
  v22 = a4;
  if ( v6 )
  {
    result = (char *)(1717986919 * (*(_DWORD *)(this + 12) - v6));
    v7 = (*(_DWORD *)(this + 12) - v6) / 320;
  }
  else
  {
    v7 = 0;
  }
  if ( a3 )
  {
    v24 = *(void **)(this + 8);
    v8 = ((int)v24 - v6) / 320;
    if ( 13421772 - v8 < a3 )
      sub_65794750(v21[0], v21[1]);
    v9 = a3 + v8;
    if ( v7 >= v9 )
    {
      qmemcpy(v25, v22, sizeof(v25));
      if ( ((_BYTE *)v24 - a2) / 320 >= a3 )
      {
        v18 = (char *)v24 - 320 * a3;
        *(_DWORD *)(this + 8) = sub_657A3A90(v18, (char *)v24, (char *)v24);
        sub_657A21D0((int)a2, (int)v18, (int)v24);
        return Array320_Fill(a2, &a2[320 * a3], v25);
      }
      else
      {
        sub_657A3A90(a2, (char *)v24, &a2[320 * a3]);
        v20 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 320;
        v19 = *(char **)(this + 8);
        v27 = 2;
        sub_657A33E0(v19, v20, v25);
        *(_DWORD *)(this + 8) += 320 * a3;
        return Array320_Fill(a2, (char *)(*(_DWORD *)(this + 8) - 320 * a3), v25);
      }
    }
    else
    {
      if ( 13421772 - (v7 >> 1) >= v7 )
        v10 = (v7 >> 1) + v7;
      else
        v10 = 0;
      if ( v10 < v9 )
        v10 = v9;
      v11 = sub_657952D0(v10);
      v12 = *(char **)(this + 4);
      LOBYTE(v23) = 0;
      v24 = v11;
      v27 = 0;
      v13 = Array320_Copy(v12, a2, (char *)v11);
      v14 = sub_657A33E0(v13, a3, v22);
      v15 = *(char **)(this + 8);
      LOBYTE(v23) = 0;
      Array320_Copy(a2, v15, v14);
      v16 = *(_DWORD *)(this + 4);
      v28 = (*(_DWORD *)(this + 8) - v16) / 320 + a3;
      if ( v16 )
      {
        for ( i = *(_DWORD *)(this + 8); v16 != i; v16 += 320 )
          ;
        operator delete(*(void **)(this + 4));
      }
      result = (char *)v24;
      *(_DWORD *)(this + 12) = (char *)v24 + 320 * v10;
      *(_DWORD *)(this + 8) = &result[320 * v28];
      *(_DWORD *)(this + 4) = result;
    }
  }
  return result;
}

//----- (657A59F0) --------------------------------------------------------
_BYTE *__thiscall Array68Item_CopyCtor(_BYTE *this, _BYTE *a2)
{
  *this = *a2;
  qmemcpy(this + 1, a2 + 1, 0x20u);
  Vector8_CopyCtor((_DWORD *)this + 9, (int)(a2 + 36));
  Vector4_CopyCtor((_DWORD *)this + 13, (int)(a2 + 52));
  return this;
}

//----- (657A5B00) --------------------------------------------------------
char **__thiscall GameDataArray_Reset(int this)
{
  char *v2; // eax
  char **result; // eax
  char *v4; // [esp-8h] [ebp-14h]
  char *v5; // [esp+8h] [ebp-4h] BYREF

  Array52_Erase((char **)this, &v5, *(char **)(this + 4), *(char **)(this + 8));
  v2 = *(char **)(this + 8);
  *(_WORD *)(this + 16) = 10000;
  v4 = *(char **)(this + 4);
  *(_DWORD *)(this + 28) = 0;
  *(_BYTE *)(this + 24) = 0;
  *(_DWORD *)(this + 48) = 0;
  *(_DWORD *)(this + 40) = 0;
  *(_DWORD *)(this + 72) = 0;
  *(_DWORD *)(this + 76) = 0;
  *(_DWORD *)(this + 80) = 0;
  *(_DWORD *)(this + 84) = 0;
  *(_DWORD *)(this + 36) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 56) = 0;
  *(_DWORD *)(this + 60) = 0;
  *(_BYTE *)(this + 64) = 1;
  result = Array52_Erase((char **)this, &v5, v4, v2);
  *(_DWORD *)(this + 44) = 0;
  return result;
}

//----- (657A5C70) --------------------------------------------------------
_DWORD *__thiscall Vector192_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 192 )
    v6 = (int)&a3[-v5] / 192;
  else
    v6 = 0;
  Vector192_InsertN((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 192 * v6;
  return a2;
}

//----- (657A5CE0) --------------------------------------------------------
_DWORD *__thiscall Vector40_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 40 )
    v6 = (int)&a3[-v5] / 40;
  else
    v6 = 0;
  Vector40_InsertN((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 40 * v6;
  return a2;
}

//----- (657A5D50) --------------------------------------------------------
_DWORD *__thiscall Vector444_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 444 )
    v6 = (int)&a3[-v5] / 444;
  else
    v6 = 0;
  Vector444_InsertN((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 444 * v6;
  return a2;
}

//----- (657A5DC0) --------------------------------------------------------
_DWORD *__thiscall Vector60_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 60 )
    v6 = (int)&a3[-v5] / 60;
  else
    v6 = 0;
  Vector60_InsertRange((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 60 * v6;
  return a2;
}

//----- (657A5E30) --------------------------------------------------------
_DWORD *__thiscall Vector176_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 176 )
    v6 = (int)&a3[-v5] / 176;
  else
    v6 = 0;
  Vector176_InsertRange((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 176 * v6;
  return a2;
}

//----- (657A5EA0) --------------------------------------------------------
_DWORD *__thiscall Vector220_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 220 )
    v6 = (int)&a3[-v5] / 220;
  else
    v6 = 0;
  sub_657A4AB0((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 220 * v6;
  return a2;
}

//----- (657A5F10) --------------------------------------------------------
_DWORD *__thiscall Vector372_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 372 )
    v6 = (int)&a3[-v5] / 372;
  else
    v6 = 0;
  sub_657A4D50((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 372 * v6;
  return a2;
}

//----- (657A5FF0) --------------------------------------------------------
_DWORD *__thiscall Vector72_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 72 )
    v6 = (int)&a3[-v5] / 72;
  else
    v6 = 0;
  Vector72_InsertRange((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 72 * v6;
  return a2;
}

//----- (657A6060) --------------------------------------------------------
_DWORD *__thiscall Vector320_InsertOne(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 320 )
    v6 = (int)&a3[-v5] / 320;
  else
    v6 = 0;
  Vector320_InsertRange((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 320 * v6;
  return a2;
}

//----- (657A6230) --------------------------------------------------------
_DWORD *__cdecl ChatEntry_Copy(_DWORD *a1, int a2)
{
  _DWORD *result; // eax

  result = a1;
  if ( a1 )
  {
    *(_BYTE *)a1 = *(_BYTE *)a2;
    qmemcpy((char *)a1 + 1, (const void *)(a2 + 1), 0x40u);
    a1[17] = *(_DWORD *)(a2 + 68);
    return sub_657A3800(a1 + 18, a2 + 72);
  }
  return result;
}

//----- (657A62F0) --------------------------------------------------------
_DWORD *__thiscall GameDataArray_Ctor(_DWORD *this)
{
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  unknown_libname_664(this + 8);
  unknown_libname_664(this + 9);
  GameDataArray_Reset((int)this);
  return this;
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);

//----- (657A6390) --------------------------------------------------------
char __thiscall Packet_ID_FACTION_read_listC_entry(char *this, unsigned int *a2)
{
  unsigned int *v2; // ebx
  unsigned int v4; // eax
  char *v5; // edi
  int v6; // ecx
  unsigned int v7; // eax
  char *v8; // esi
  int v10; // [esp+Ch] [ebp-18h] BYREF
  int v11; // [esp+10h] [ebp-14h] BYREF
  int v12; // [esp+14h] [ebp-10h]
  char v13[4]; // [esp+18h] [ebp-Ch] BYREF
  char v14[4]; // [esp+1Ch] [ebp-8h] BYREF
  unsigned int v15; // [esp+20h] [ebp-4h]

  v2 = a2;
  RakNet::BitStream::ReadCompressed(a2, this, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(v2, this + 20);
  a2 = 0;
  LOBYTE(v4) = RakNet::BitStream::ReadCompressed_T_uint(v2, (char *)&a2);
  v10 = 0;
  v11 = 0;
  v15 = 0;
  if ( a2 )
  {
    v5 = this + 4;
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, v14, 0x20u, 1) )
          ByteSwapCopy((int)v14, (int)&v10, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v10, 0x20u, 1);
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, v13, 0x20u, 1) )
          ByteSwapCopy((int)v13, (int)&v11, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v11, 0x20u, 1);
      }
      v6 = *((_DWORD *)v5 + 1);
      if ( v6 )
        v7 = (*((_DWORD *)v5 + 3) - v6) >> 3;
      else
        v7 = 0;
      v8 = (char *)*((_DWORD *)v5 + 2);
      if ( (int)&v8[-v6] >> 3 >= v7 )
      {
        Pair8Vector_InsertRange((int)v5, v8, 1u, &v10);
      }
      else
      {
        LOBYTE(v12) = 0;
        Pair8Array_FillCopy_Alt(v8, 1, &v10);
        *((_DWORD *)v5 + 2) = v8 + 8;
      }
      v4 = v15 + 1;
      v15 = v4;
    }
    while ( v4 < (unsigned int)a2 );
  }
  return v4;
}

//----- (657A6530) --------------------------------------------------------
char *__thiscall Vector192_PushBack(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 192;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 192 >= v4 )
    return (char *)Vector192_InsertOne(this, &a2, v5, a2);
  result = Array192_FillValue(a2, v5, 1, a2);
  *(this + 2) = v5 + 192;
  return result;
}

//----- (657A65C0) --------------------------------------------------------
char *__thiscall Vector40_PushBack(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 40;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 40 >= v4 )
    return (char *)Vector40_InsertOne(this, &a2, v5, a2);
  result = Array40_FillCopy(a2, v5, 1, a2);
  *(this + 2) = v5 + 40;
  return result;
}

//----- (657A6650) --------------------------------------------------------
char *__thiscall Vector444_PushBack(char **this, char *a2)
{
  int v3; // eax
  unsigned int v4; // esi
  char *v5; // ebx
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 444;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - *(this + 1)) / 444 >= v4 )
    return (char *)Vector444_InsertOne(this, &a2, v5, a2);
  result = Array444_FillCopy(a2, v5, 1, a2);
  *(this + 2) = v5 + 444;
  return result;
}

//----- (657A66F0) --------------------------------------------------------
char *__thiscall Vector60_PushBack(char **this, char *a2)
{
  int v3; // eax
  unsigned int v4; // esi
  char *v5; // ebx
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 60;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - *(this + 1)) / 60 >= v4 )
    return (char *)Vector60_InsertOne(this, &a2, v5, a2);
  result = Array60_FillCopy(a2, v5, 1, a2);
  *(this + 2) = v5 + 60;
  return result;
}

//----- (657A6780) --------------------------------------------------------
char *__thiscall Vector176_PushBack(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 176;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 176 >= v4 )
    return (char *)Vector176_InsertOne(this, &a2, v5, a2);
  result = Array176_FillCopy(a2, v5, 1, a2);
  *(this + 2) = v5 + 176;
  return result;
}

//----- (657A6810) --------------------------------------------------------
char *__thiscall Vector220_PushBack(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 220;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 220 >= v4 )
    return (char *)Vector220_InsertOne(this, &a2, v5, a2);
  result = Array220_FillValue(a2, v5, 1, a2);
  *(this + 2) = v5 + 220;
  return result;
}

//----- (657A68A0) --------------------------------------------------------
char *__thiscall Vector372_PushBack(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 372;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 372 >= v4 )
    return (char *)Vector372_InsertOne(this, &a2, v5, a2);
  result = Array372_FillCopy(a2, v5, 1, a2);
  *(this + 2) = v5 + 372;
  return result;
}

//----- (657A69C0) --------------------------------------------------------
char *__thiscall Vector72_PushBack(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 72;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 72 >= v4 )
    return (char *)Vector72_InsertOne(this, &a2, v5, a2);
  result = Array72_FillCopy(a2, v5, 1, a2);
  *(this + 2) = v5 + 72;
  return result;
}

//----- (657A6A50) --------------------------------------------------------
char *__thiscall Vector320_PushBack(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 320;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 320 >= v4 )
    return (char *)Vector320_InsertOne(this, &a2, v5, a2);
  result = Array320_FillCopy(a2, v5, 1, a2);
  *(this + 2) = v5 + 320;
  return result;
}

//----- (657A6D10) --------------------------------------------------------
int __cdecl Array88_CopyConstructRange(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // eax
  _DWORD v6[8]; // [esp+0h] [ebp-2Ch] BYREF
  int v7; // [esp+28h] [ebp-4h]

  v6[7] = v6;
  v3 = a3;
  v4 = a1;
  v6[6] = a3;
  v7 = 0;
  while ( v4 != a2 )
  {
    v6[5] = v3;
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
    {
      SkillData88_CopyFrom(v3, v4);
      v4 = a1;
    }
    v3 += 88;
    v4 += 88;
    LOBYTE(v7) = 0;
    a1 = v4;
  }
  return v3;
}
// 6579A530: using guessed type int __thiscall sub_6579A530(_DWORD, _DWORD);

//----- (657A6E70) --------------------------------------------------------
char __thiscall Packet_ID_A9_read_structB(char *this, unsigned int *a2)
{
  unsigned int *v2; // ebx
  char *v3; // edi
  _DWORD *v4; // edi
  int v5; // ecx
  unsigned int v6; // eax
  char *v7; // esi
  unsigned int v8; // eax
  int v9; // edx
  unsigned int v10; // eax
  char *v11; // ecx
  char v13[4]; // [esp+Ch] [ebp-1Ch] BYREF
  int v14; // [esp+10h] [ebp-18h] BYREF
  char *v15; // [esp+14h] [ebp-14h] BYREF
  int v16; // [esp+18h] [ebp-10h]
  char v17[4]; // [esp+1Ch] [ebp-Ch] BYREF
  unsigned int v18; // [esp+20h] [ebp-8h]
  int v19; // [esp+24h] [ebp-4h] BYREF

  v2 = a2;
  v3 = this;
  v15 = this;
  RakNet::BitStream::ReadCompressed(a2, this, 8u, 1);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(g_LTClient, v3 + 1, 2048, v2);
  a2 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(v2, (char *)&a2);
  v13[0] = 0;
  v14 = 0;
  v18 = 0;
  if ( a2 )
  {
    v4 = v3 + 36;
    do
    {
      RakNet::BitStream::ReadCompressed(v2, v13, 8u, 1);
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, v17, 0x20u, 1) )
          ByteSwapCopy((int)v17, (int)&v14, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v14, 0x20u, 1);
      }
      v5 = v4[1];
      if ( v5 )
        v6 = (v4[3] - v5) >> 3;
      else
        v6 = 0;
      v7 = (char *)v4[2];
      if ( (int)&v7[-v5] >> 3 >= v6 )
      {
        Pair8Vector_InsertRange_Alt((int)v4, v7, 1u, (int *)v13);
      }
      else
      {
        LOBYTE(v16) = 0;
        Pair8Array_FillCopy(v7, 1, v13);
        v4[2] = v7 + 8;
      }
      ++v18;
    }
    while ( v18 < (unsigned int)a2 );
    v3 = v15;
  }
  if ( Net_IsBigEndian() )
  {
    LOBYTE(v8) = RakNet::BitStream::ReadCompressed(v2, (char *)&v15, 0x20u, 1);
    if ( (_BYTE)v8 )
      LOBYTE(v8) = ByteSwapCopy((int)&v15, (int)&a2, 4u);
  }
  else
  {
    LOBYTE(v8) = RakNet::BitStream::ReadCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  v19 = 0;
  v18 = 0;
  if ( a2 )
  {
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, (char *)&v15, 0x20u, 1) )
          ByteSwapCopy((int)&v15, (int)&v19, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v19, 0x20u, 1);
      }
      v9 = *((_DWORD *)v3 + 14);
      if ( v9 )
        v10 = (*((_DWORD *)v3 + 16) - v9) >> 2;
      else
        v10 = 0;
      v11 = (char *)*((_DWORD *)v3 + 15);
      if ( (int)&v11[-v9] >> 2 >= v10 )
      {
        Vector_InsertN((int)(v3 + 52), v11, 1u, (unsigned int)&v19);
      }
      else
      {
        *(_DWORD *)v11 = v19;
        *((_DWORD *)v3 + 15) = v11 + 4;
      }
      v8 = v18 + 1;
      v18 = v8;
    }
    while ( v8 < (unsigned int)a2 );
  }
  return v8;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A7060) --------------------------------------------------------
unsigned __int8 __thiscall Packet_ID_FACTION_read_block_1090(char **this, unsigned int *a2)
{
  unsigned __int8 v3; // bl
  unsigned __int8 result; // al
  unsigned __int8 v5; // [esp+Fh] [ebp-C5h] BYREF
  int v6; // [esp+10h] [ebp-C4h] BYREF
  char v7; // [esp+14h] [ebp-C0h]
  char v8; // [esp+15h] [ebp-BFh]
  char v9; // [esp+35h] [ebp-9Fh]
  char v10; // [esp+36h] [ebp-9Eh]
  char v11; // [esp+37h] [ebp-9Dh]
  char v12; // [esp+38h] [ebp-9Ch]
  int v13; // [esp+B8h] [ebp-1Ch]
  char v14; // [esp+BCh] [ebp-18h]

  v3 = 0;
  v5 = 0;
  result = RakNet::BitStream::ReadCompressed(a2, (char *)&v5, 8u, 1);
  v6 = 0;
  v7 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v8 = 0;
  v12 = 0;
  v14 = 0;
  v13 = 0;
  if ( v5 )
  {
    do
    {
      Packet_ID_FACTION_read_block_10A0((char *)&v6, a2);
      result = (unsigned __int8)Vector192_PushBack(this, (char *)&v6);
      ++v3;
    }
    while ( v3 < v5 );
  }
  return result;
}

//----- (657A7110) --------------------------------------------------------
unsigned __int8 __thiscall Packet_ID_FACTION_read_blockA_list_4E8(char **this, unsigned int *a2)
{
  unsigned __int8 result; // al
  unsigned int v3; // edi
  char v5[4]; // [esp+10h] [ebp-34h] BYREF
  unsigned int v6; // [esp+14h] [ebp-30h] BYREF
  int v7; // [esp+18h] [ebp-2Ch] BYREF
  char i; // [esp+1Ch] [ebp-28h] BYREF
  _BYTE v9[35]; // [esp+1Dh] [ebp-27h] BYREF

  v6 = 0;
  result = RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v6);
  v3 = 0;
  v7 = 0;
  v9[0] = 0;
  for ( i = 0; v3 < v6; ++v3 )
  {
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(a2, v5, 0x20u, 1) )
        ByteSwapCopy((int)v5, (int)&v7, 4u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(a2, (char *)&v7, 0x20u, 1);
    }
    RakNet::BitStream::ReadCompressed(a2, &i, 8u, 1);
    (*(void (__thiscall **)(int, _BYTE *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(g_LTClient, v9, 2048, a2);
    result = (unsigned __int8)Vector40_PushBack(this, (char *)&v7);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A71E0) --------------------------------------------------------
int __thiscall Packet_ID_FACTION_read_block_0E3C(char **this, unsigned int *a2)
{
  int result; // eax
  unsigned int v3; // esi
  unsigned int v5; // [esp+10h] [ebp-1C4h] BYREF
  int v6; // [esp+14h] [ebp-1C0h] BYREF
  char v7; // [esp+18h] [ebp-1BCh]
  int v8; // [esp+2Ch] [ebp-1A8h]
  char v9; // [esp+30h] [ebp-1A4h]
  int v10; // [esp+130h] [ebp-A4h]
  _BYTE v11[124]; // [esp+134h] [ebp-A0h] BYREF
  char i; // [esp+1B0h] [ebp-24h]

  v5 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v5);
  PacketData_InitFieldsExt((int)v11);
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  result = PacketData_InitFields(v11);
  v3 = 0;
  for ( i = 0; v3 < v5; i = 0 )
  {
    Packet_ID_FACTION_read_block_0E3C_entry((char *)&v6, a2);
    Vector444_PushBack(this, (char *)&v6);
    v6 = 0;
    v7 = 0;
    v8 = 0;
    v9 = 0;
    v10 = 0;
    result = PacketData_InitFields(v11);
    ++v3;
  }
  return result;
}

//----- (657A72D0) --------------------------------------------------------
char *__thiscall Packet_ID_FACTION_read_block_0D78(char **this, unsigned int *a2)
{
  char *result; // eax
  unsigned int v3; // esi
  unsigned int v5; // [esp+10h] [ebp-44h] BYREF
  int v6; // [esp+14h] [ebp-40h] BYREF
  char v7; // [esp+18h] [ebp-3Ch]
  char v8; // [esp+2Ch] [ebp-28h]
  int v9; // [esp+40h] [ebp-14h]
  _DWORD v10[2]; // [esp+44h] [ebp-10h] BYREF
  char v11; // [esp+4Ch] [ebp-8h]

  v5 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v5);
  result = (char *)unknown_libname_664(v10);
  v3 = 0;
  v6 = 0;
  v7 = 0;
  v9 = 0;
  v8 = 0;
  v10[0] = 0;
  v11 = 0;
  for ( v10[1] = 0; v3 < v5; ++v3 )
  {
    Packet_ID_FACTION_read_block_0D78_entry((char *)&v6, a2);
    result = Vector60_PushBack(this, (char *)&v6);
  }
  return result;
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);

//----- (657A7350) --------------------------------------------------------
unsigned __int8 __thiscall Packet_ID_FACTION_read_block_0E2C(char **this, unsigned int *a2)
{
  unsigned __int8 result; // al
  unsigned int v3; // edi
  char v4[4]; // [esp+Ch] [ebp-C4h] BYREF
  char **v5; // [esp+10h] [ebp-C0h]
  char v6[4]; // [esp+14h] [ebp-BCh] BYREF
  unsigned int v7; // [esp+18h] [ebp-B8h] BYREF
  int v8; // [esp+1Ch] [ebp-B4h] BYREF
  _BYTE v9[20]; // [esp+20h] [ebp-B0h] BYREF
  int v10; // [esp+34h] [ebp-9Ch] BYREF
  _BYTE v11[20]; // [esp+38h] [ebp-98h] BYREF
  _BYTE v12[128]; // [esp+4Ch] [ebp-84h] BYREF

  v5 = this;
  v7 = 0;
  result = RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v7);
  v3 = 0;
  v8 = 0;
  v9[0] = 0;
  v10 = 0;
  v11[0] = 0;
  for ( v12[0] = 0; v3 < v7; ++v3 )
  {
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(a2, v4, 0x20u, 1) )
        ByteSwapCopy((int)v4, (int)&v8, 4u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(a2, (char *)&v8, 0x20u, 1);
    }
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(a2, v6, 0x20u, 1) )
        ByteSwapCopy((int)v6, (int)&v10, 4u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(a2, (char *)&v10, 0x20u, 1);
    }
    (*(void (__thiscall **)(int, _BYTE *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(g_LTClient, v9, 2048, a2);
    (*(void (__thiscall **)(int, _BYTE *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(g_LTClient, v11, 2048, a2);
    (*(void (__thiscall **)(int, _BYTE *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(g_LTClient, v12, 2048, a2);
    result = (unsigned __int8)Vector176_PushBack(v5, (char *)&v8);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A74F0) --------------------------------------------------------
unsigned __int8 __thiscall Packet_ID_FACTION_read_block_107C(char *this, unsigned int *a2)
{
  unsigned __int8 result; // al
  unsigned __int8 v4; // [esp+Eh] [ebp-E2h]
  unsigned __int8 v5; // [esp+Fh] [ebp-E1h] BYREF
  int v6; // [esp+10h] [ebp-E0h] BYREF
  char v7; // [esp+14h] [ebp-DCh]
  int v8; // [esp+18h] [ebp-D8h]
  int v9; // [esp+1Ch] [ebp-D4h]
  int v10; // [esp+20h] [ebp-D0h]
  char v11; // [esp+24h] [ebp-CCh]
  char v12; // [esp+38h] [ebp-B8h]
  char v13; // [esp+4Ch] [ebp-A4h]
  char v14; // [esp+6Ch] [ebp-84h]

  RakNet::BitStream::ReadCompressed_T_ushort(a2, this);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 2);
  v5 = 0;
  RakNet::BitStream::ReadCompressed(a2, (char *)&v5, 8u, 1);
  result = unknown_libname_664(&v6);
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v4 = 0;
  if ( v5 )
  {
    do
    {
      Packet_ID_FACTION_read_block_107C_entry((char *)&v6, a2);
      if ( v6 )
      {
        if ( (unsigned __int8)(v7 - 1) <= 0x10u )
          Vector220_PushBack((char **)this + 1, (char *)&v6);
      }
      result = v4 + 1;
      v4 = result;
    }
    while ( result < v5 );
  }
  return result;
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);

//----- (657A75F0) --------------------------------------------------------
int __thiscall Packet_ID_FACTION_read_block_1160(char **this, unsigned int *a2)
{
  int result; // eax
  unsigned int i; // esi
  unsigned int v5; // [esp+10h] [ebp-17Ch] BYREF
  int v6; // [esp+14h] [ebp-178h] BYREF
  __int16 v7; // [esp+18h] [ebp-174h]
  int v8; // [esp+1Ch] [ebp-170h]
  char v9; // [esp+20h] [ebp-16Ch]
  char v10; // [esp+34h] [ebp-158h]
  char v11; // [esp+38h] [ebp-154h]
  char v12; // [esp+58h] [ebp-134h]
  char v13; // [esp+D8h] [ebp-B4h]
  char v14; // [esp+D9h] [ebp-B3h]
  _BYTE v15[124]; // [esp+DCh] [ebp-B0h] BYREF
  char v16; // [esp+158h] [ebp-34h]
  int v17; // [esp+178h] [ebp-14h]
  int v18; // [esp+17Ch] [ebp-10h]
  int v19; // [esp+180h] [ebp-Ch]
  int v20; // [esp+184h] [ebp-8h]

  v5 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v5);
  PacketData_InitFieldsExt((int)v15);
  v7 = 0;
  v6 = 0;
  v13 = 0;
  v17 = 0;
  v18 = 0;
  v8 = 0;
  v14 = 0;
  v16 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v20 = 0;
  v19 = 0;
  result = PacketData_InitFields(v15);
  for ( i = 0; i < v5; ++i )
  {
    Packet_ID_FACTION_read_block_11A4((char *)&v6, a2);
    Vector372_PushBack(this, (char *)&v6);
    v6 = 0;
    v7 = 0;
    v13 = 0;
    v17 = 0;
    v18 = 0;
    v8 = 0;
    v14 = 0;
    v16 = 0;
    v9 = 0;
    v10 = 0;
    v11 = 0;
    v12 = 0;
    v20 = 0;
    v19 = 0;
    result = PacketData_InitFields(v15);
  }
  return result;
}

//----- (657A7720) --------------------------------------------------------
void __thiscall Packet_ID_FACTION_read_blockA(char *this, unsigned int *a2)
{
  unsigned int v3; // eax

  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 6,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 58,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 26,
    2048,
    a2);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *(this + 1082) = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  RakNet::BitStream::ReadCompressed(a2, this + 5, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 4, 8u, 1);
  if ( *(this + 1082) )
  {
    sub_65946F10();
  }
  else
  {
    sub_65946F10();
    Playerfile_read_blockC0(this + 1092, a2);
    Packet_ID_FACTION_read_blockA_struct_4C0(this + 1216, a2);
    Packet_ID_FACTION_read_blockA_list_4E8((char **)this + 314, a2);
  }
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A7810) --------------------------------------------------------
int __thiscall Packet_ID_FACTION_read_block_0FD4(void *this, unsigned int *a2)
{
  unsigned int v3; // esi
  int result; // eax
  unsigned int v5; // [esp+Ch] [ebp-1C0h] BYREF
  char v6[312]; // [esp+10h] [ebp-1BCh] BYREF
  _BYTE v7[124]; // [esp+148h] [ebp-84h] BYREF
  int v8; // [esp+1C4h] [ebp-8h]

  v3 = 0;
  v5 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v5);
  result = PacketData_InitFieldsExt((int)v7);
  v6[4] = 0;
  v6[24] = 0;
  v6[56] = 0;
  v8 = 0;
  if ( v5 )
  {
    do
    {
      Packet_ID_FACTION_read_block_0FD4_entry(v6, a2);
      result = sub_657A6930(this, v6);
      ++v3;
    }
    while ( v3 < v5 );
  }
  return result;
}
// 657A6930: using guessed type int __thiscall sub_657A6930(_DWORD, _DWORD);

//----- (657A78B0) --------------------------------------------------------
char *__thiscall Packet_ID_FACTION_read_block_1784(char *this, unsigned int *a2)
{
  unsigned __int8 v3; // bl
  char *result; // eax
  char **v5; // edi
  unsigned __int8 v6; // [esp+Fh] [ebp-4Dh] BYREF
  char v7[4]; // [esp+10h] [ebp-4Ch] BYREF
  int v8; // [esp+14h] [ebp-48h]
  char v9; // [esp+18h] [ebp-44h]
  int v10; // [esp+1Ch] [ebp-40h]
  char v11; // [esp+20h] [ebp-3Ch]
  char v12; // [esp+34h] [ebp-28h]
  int v13; // [esp+54h] [ebp-8h] BYREF

  RakNet::BitStream::ReadCompressed_T_ushort(a2, this);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 2);
  v3 = 0;
  v6 = 0;
  RakNet::BitStream::ReadCompressed(a2, (char *)&v6, 8u, 1);
  result = (char *)unknown_libname_664(&v13);
  v7[0] = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v13 = 0;
  if ( v6 )
  {
    v5 = (char **)(this + 4);
    do
    {
      Packet_ID_FACTION_read_block_1784_entry(v7, a2);
      result = Vector72_PushBack(v5, v7);
      ++v3;
    }
    while ( v3 < v6 );
  }
  return result;
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);

//----- (657A7950) --------------------------------------------------------
char *__thiscall Packet_ID_FACTION_read_block_0D50(char **this, unsigned int *a2)
{
  int v3; // ebx
  char *result; // eax
  int v5; // [esp+Ch] [ebp-148h] BYREF
  int v6; // [esp+10h] [ebp-144h] BYREF
  char v7; // [esp+14h] [ebp-140h]
  int v8; // [esp+18h] [ebp-13Ch]
  char v9; // [esp+1Ch] [ebp-138h]
  char v10; // [esp+1Dh] [ebp-137h]
  int v11; // [esp+60h] [ebp-F4h]
  char v12; // [esp+64h] [ebp-F0h]
  char v13; // [esp+78h] [ebp-DCh]
  char v14; // [esp+8Ch] [ebp-C8h]
  char v15; // [esp+ACh] [ebp-A8h]
  char v16; // [esp+ADh] [ebp-A7h]
  _BYTE v17[128]; // [esp+D0h] [ebp-84h] BYREF

  v3 = 0;
  v5 = 0;
  RakNet::BitStream::ReadCompressed_T_ushort(a2, (char *)&v5);
  result = (char *)PacketData_InitFieldsExt((int)v17);
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v17[124] = 0;
  if ( (_WORD)v5 )
  {
    do
    {
      Packet_ID_PLAYERFILE_read_structA((char *)&v6, a2);
      result = Vector320_PushBack(this, (char *)&v6);
      ++v3;
    }
    while ( (unsigned __int16)v3 < (unsigned __int16)v5 );
  }
  return result;
}

//----- (657A7AB0) --------------------------------------------------------
void __thiscall Packet_ID_A5_read_struct2(char *this, unsigned int *a2)
{
  unsigned int v3; // ebx
  char v4[4]; // [esp+Ch] [ebp-4Ch] BYREF
  char v5[4]; // [esp+10h] [ebp-48h] BYREF
  char v6[4]; // [esp+14h] [ebp-44h] BYREF
  char v7[4]; // [esp+18h] [ebp-40h] BYREF
  unsigned int v8; // [esp+1Ch] [ebp-3Ch] BYREF
  int v9; // [esp+20h] [ebp-38h] BYREF
  _BYTE v10[32]; // [esp+24h] [ebp-34h] BYREF
  int v11; // [esp+44h] [ebp-14h] BYREF
  char v12[4]; // [esp+48h] [ebp-10h] BYREF
  int v13; // [esp+4Ch] [ebp-Ch] BYREF
  __int16 v14; // [esp+50h] [ebp-8h]

  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 20);
  RakNet::BitStream::ReadCompressed(a2, this + 24, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 16);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 28);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 40);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 44);
  v3 = 0;
  v8 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v8);
  v9 = 0;
  v10[0] = 0;
  v11 = 0;
  *(_WORD *)v12 = 0;
  v13 = 0;
  v14 = 0;
  if ( v8 )
  {
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v6, 0x20u, 1) )
          ByteSwapCopy((int)v6, (int)&v9, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v9, 0x20u, 1);
      }
      (*(void (__thiscall **)(int, _BYTE *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
        g_LTClient,
        v10,
        2048,
        a2);
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v4, 0x20u, 1) )
          ByteSwapCopy((int)v4, (int)&v11, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v11, 0x20u, 1);
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v7, 0x10u, 1) )
          ByteSwapCopy((int)v7, (int)v12, 2u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, v12, 0x10u, 1);
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v5, 0x20u, 1) )
          ByteSwapCopy((int)v5, (int)&v13, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v13, 0x20u, 1);
      }
      sub_657A6AE0(this, &v9);
      ++v3;
    }
    while ( v3 < v8 );
  }
  sub_65946F10();
  sub_65946F10();
}
// 657A6AE0: using guessed type int __thiscall sub_657A6AE0(_DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657A7D30) --------------------------------------------------------
int __cdecl Array88_CopyConstructN(int a1, int a2, int a3)
{
  int v3; // esi
  int result; // eax
  _DWORD v6[7]; // [esp+0h] [ebp-28h] BYREF
  int v7; // [esp+24h] [ebp-4h]

  v6[6] = v6;
  v3 = a1;
  v6[5] = a1;
  v7 = 0;
  while ( a2 )
  {
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
      result = SkillData88_CopyFrom(v3, a3);
    --a2;
    v3 += 88;
    LOBYTE(v7) = 0;
  }
  return result;
}
// 6579A530: using guessed type int __thiscall sub_6579A530(_DWORD, _DWORD);

//----- (657A7FB0) --------------------------------------------------------
_BYTE *__cdecl Array68_CopyRange(_BYTE *a1, _BYTE *a2, _BYTE *a3)
{
  _BYTE *v3; // esi
  _DWORD v6[7]; // [esp+0h] [ebp-28h] BYREF
  int v7; // [esp+24h] [ebp-4h]

  v6[6] = v6;
  v3 = a3;
  v6[5] = a3;
  v7 = 0;
  while ( a1 != a2 )
  {
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
      Array68Item_CopyCtor(v3, a1);
    v3 += 68;
    LOBYTE(v7) = 0;
    a1 += 68;
  }
  return v3;
}
// 6579AF90: using guessed type int __thiscall sub_6579AF90(_DWORD, _DWORD);

//----- (657A81C0) --------------------------------------------------------
_BYTE *__cdecl Array68_CopyConstructN(_BYTE *a1, int a2, _BYTE *a3)
{
  _BYTE *v3; // esi
  _BYTE *result; // eax
  _DWORD v6[7]; // [esp+0h] [ebp-28h] BYREF
  int v7; // [esp+24h] [ebp-4h]

  v6[6] = v6;
  v3 = a1;
  v6[5] = a1;
  v7 = 0;
  while ( a2 )
  {
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
      result = Array68Item_CopyCtor(v3, a3);
    --a2;
    v3 += 68;
    LOBYTE(v7) = 0;
  }
  return result;
}
// 6579AF90: using guessed type int __thiscall sub_6579AF90(_DWORD, _DWORD);

//----- (657A8260) --------------------------------------------------------
_DWORD *__cdecl Array88_CopyForwardSafe(_DWORD *a1, int a2, int a3)
{
  _DWORD *v3; // edi
  _DWORD *result; // eax
  _DWORD v6[9]; // [esp+0h] [ebp-24h] BYREF

  v6[5] = v6;
  v3 = a1;
  v6[4] = a1;
  v6[8] = 0;
  while ( a2 )
  {
    result = ChatEntry_Copy(v3, a3);
    --a2;
    v3 += 22;
  }
  return result;
}
// 6579AFE0: using guessed type int __thiscall sub_6579AFE0(_DWORD, _DWORD);

//----- (657A84B0) --------------------------------------------------------
_DWORD *__thiscall Vector88_CopyCtor(_DWORD *this, int a2)
{
  unsigned int v3; // edi
  char *v4; // eax
  int v6; // [esp-20h] [ebp-44h]
  int v7; // [esp-1Ch] [ebp-40h]
  int v8[9]; // [esp+0h] [ebp-24h] BYREF

  v8[5] = (int)v8;
  v8[4] = (int)this;
  v3 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 88;
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( v3 )
  {
    if ( v3 > 0x2E8BA2E )
      ThrowLengthError_Vector5(v8[0], v8[1]);
    v4 = (char *)Vector88_Allocate(v3);
    *(this + 1) = v4;
    *(this + 2) = v4;
    *(this + 3) = &v4[88 * v3];
    v7 = *(_DWORD *)(a2 + 8);
    v6 = *(_DWORD *)(a2 + 4);
    v8[8] = 0;
    *(this + 2) = Array88_CopyConstructRange(v6, v7, (int)v4);
  }
  return this;
}
// 6579B1B0: using guessed type int __thiscall sub_6579B1B0(_DWORD);

//----- (657A8760) --------------------------------------------------------
int __thiscall sub_657A8760(int *this, int a2, unsigned int a3, int a4)
{
  __int64 v5; // rax
  unsigned int v6; // ebx
  int v7; // ecx
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // ebx
  void *v11; // eax
  int v12; // ecx
  int v13; // eax
  int v14; // eax
  int v15; // ecx
  unsigned int v16; // edi
  char *v17; // edi
  int v18; // ecx
  int v19; // ebx
  int v21; // [esp-8h] [ebp-8Ch]
  int v22; // [esp-8h] [ebp-8Ch]
  int v23[4]; // [esp+0h] [ebp-84h] BYREF
  _BYTE v24[88]; // [esp+10h] [ebp-74h] BYREF
  int v25; // [esp+68h] [ebp-1Ch]
  int *v26; // [esp+6Ch] [ebp-18h]
  void *v27; // [esp+70h] [ebp-14h]
  int *v28; // [esp+74h] [ebp-10h]
  int v29; // [esp+80h] [ebp-4h]

  v28 = v23;
  v26 = this;
  LODWORD(v5) = *(this + 1);
  if ( (_DWORD)v5 )
  {
    v5 = 780903145LL * (*(this + 3) - (int)v5);
    v6 = (SHIDWORD(v5) >> 4) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v7 = *(this + 2);
    v8 = (*(this + 2) - *(this + 1)) / 88;
    if ( 48806446 - v8 < a3 )
      ThrowLengthError_Vector5(v23[0], v23[1]);
    v9 = a3 + v8;
    if ( v6 >= v9 )
    {
      if ( (v7 - a2) / 88 >= a3 )
      {
        SkillData88_CopyFrom((int)v24, a4);
        v19 = *(this + 2);
        v29 = 5;
        *(this + 2) = sub_657A8620(this, v19 - 88 * a3, v19, v19);
        sub_657A7CF0(a2, v19 - 88 * a3, v19);
        sub_657A7CC0(a2, a2 + 88 * a3, v24);
      }
      else
      {
        SkillData88_CopyFrom((int)v24, a4);
        v21 = *(this + 2);
        v29 = 2;
        sub_657A8620(this, a2, v21, 88 * a3 + a2);
        v18 = *(this + 2);
        LOBYTE(v29) = 3;
        sub_657A8430(this, v18, a3 - (v18 - a2) / 88, v24);
        *(this + 2) += 88 * a3;
        v22 = *(this + 2) - 88 * a3;
        v29 = 2;
        sub_657A7CC0(a2, v22, v24);
      }
      LODWORD(v5) = sub_65798E70(v24);
    }
    else
    {
      if ( 48806446 - (v6 >> 1) >= v6 )
        v10 = (v6 >> 1) + v6;
      else
        v10 = 0;
      if ( v10 < v9 )
        v10 = v9;
      v11 = Vector88_Allocate(v10);
      v12 = *(this + 1);
      LOBYTE(v25) = 0;
      v27 = v11;
      v29 = 0;
      v13 = sub_6579A5B0(v12, a2, v11, this, a2, v25);
      v14 = sub_657A8430(this, v13, a3, a4);
      LOBYTE(a4) = 0;
      sub_6579A5B0(a2, *(this + 2), v14, this, a2, a4);
      v15 = *(this + 1);
      v16 = (*(this + 2) - v15) / 88 + a3;
      if ( v15 )
      {
        PacketArray88_DestroyRange(v15, *(this + 2));
        operator delete((void *)*(this + 1));
      }
      LODWORD(v5) = v27;
      v17 = (char *)v27 + 88 * v16;
      *(this + 3) = (int)v27 + 88 * v10;
      *(this + 2) = (int)v17;
      *(this + 1) = v5;
    }
  }
  return v5;
}
// 65798E70: using guessed type int __thiscall sub_65798E70(_DWORD);
// 6579A5B0: using guessed type int __cdecl sub_6579A5B0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 6579B190: using guessed type int __cdecl sub_6579B190(_DWORD, _DWORD);
// 657A7CC0: using guessed type int __cdecl sub_657A7CC0(_DWORD, _DWORD, _DWORD);
// 657A7CF0: using guessed type int __cdecl sub_657A7CF0(_DWORD, _DWORD, _DWORD);
// 657A8430: using guessed type int __thiscall sub_657A8430(_DWORD, _DWORD, _DWORD, _DWORD);
// 657A8620: using guessed type int __thiscall sub_657A8620(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (657A8B30) --------------------------------------------------------
_DWORD *__thiscall Vector88_Insert(int *this, _DWORD *a2, int a3, int a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 88 )
    v6 = (a3 - v5) / 88;
  else
    v6 = 0;
  sub_657A8760(this, a3, 1u, a4);
  *a2 = *(this + 1) + 88 * v6;
  return a2;
}

//----- (657A8F10) --------------------------------------------------------
_DWORD *__thiscall Vector88_PushBack(int *this, int a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  int v5; // edi
  _DWORD *result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 88;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - v3) / 88 >= v4 )
    return Vector88_Insert(this, &a2, v5, a2);
  result = (_DWORD *)Array88_CopyConstructN(v5, 1, a2);
  *(this + 2) = v5 + 88;
  return result;
}

//----- (657A9010) --------------------------------------------------------
int __thiscall sub_657A9010(int *this, _BYTE *a2, unsigned int a3, _BYTE *a4)
{
  __int64 v5; // rax
  unsigned int v6; // ebx
  int v7; // ecx
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // ebx
  _BYTE *v11; // eax
  _BYTE *v12; // ecx
  _BYTE *v13; // eax
  _BYTE *v14; // ecx
  int v15; // ecx
  unsigned int v16; // edi
  int v17; // ecx
  _BYTE *v18; // ecx
  int v19; // edi
  int v20; // eax
  int v22; // [esp-8h] [ebp-C8h]
  int v23; // [esp-8h] [ebp-C8h]
  int v24; // [esp-4h] [ebp-C4h]
  int v25; // [esp-4h] [ebp-C4h]
  int v26[4]; // [esp+0h] [ebp-C0h] BYREF
  void *v27; // [esp+10h] [ebp-B0h]
  int *v28; // [esp+14h] [ebp-ACh]
  _BYTE *v29; // [esp+18h] [ebp-A8h]
  _BYTE *v30; // [esp+1Ch] [ebp-A4h]
  int v31; // [esp+20h] [ebp-A0h]
  _BYTE v32[68]; // [esp+24h] [ebp-9Ch] BYREF
  _BYTE v33[68]; // [esp+68h] [ebp-58h] BYREF
  int *v34; // [esp+B0h] [ebp-10h]
  int v35; // [esp+BCh] [ebp-4h]

  v34 = v26;
  v29 = a4;
  LODWORD(v5) = *(this + 1);
  v28 = this;
  if ( (_DWORD)v5 )
  {
    v5 = 2021161081LL * (*(this + 3) - (int)v5);
    v6 = (SHIDWORD(v5) >> 5) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v7 = *(this + 2);
    v8 = (*(this + 2) - *(this + 1)) / 68;
    if ( 63161283 - v8 < a3 )
      ThrowLengthError_Vector4(v26[0], v26[1]);
    v9 = a3 + v8;
    if ( v6 >= v9 )
    {
      if ( (v7 - (int)a2) / 68 >= a3 )
      {
        Array68Item_CopyCtor(v32, v29);
        v24 = *(this + 2);
        v19 = v24 - 68 * a3;
        v35 = 5;
        v31 = v24;
        v20 = sub_657A8E60(this, v19, v24, v24);
        v25 = v31;
        *(this + 2) = v20;
        sub_657A7C90(a2, v19, v25);
        sub_657A6B70(a2, &a2[68 * a3], v32);
        v18 = v32;
      }
      else
      {
        Array68Item_CopyCtor(v33, v29);
        v22 = *(this + 2);
        v35 = 2;
        sub_657A8E60(this, a2, v22, &a2[68 * a3]);
        v17 = *(this + 2);
        LOBYTE(v35) = 3;
        sub_657A86E0(this, v17, a3 - (v17 - (int)a2) / 68, v33);
        *(this + 2) += 68 * a3;
        v23 = *(this + 2) - 68 * a3;
        v35 = 2;
        sub_657A6B70(a2, v23, v33);
        v18 = v33;
      }
      LODWORD(v5) = sub_657996A0(v18);
    }
    else
    {
      if ( 63161283 - (v6 >> 1) >= v6 )
        v10 = (v6 >> 1) + v6;
      else
        v10 = 0;
      if ( v10 < v9 )
        v10 = v9;
      v11 = Vector68_Allocate(v10);
      v12 = (_BYTE *)*(this + 1);
      LOBYTE(v31) = 0;
      v27 = v11;
      v30 = v11;
      v35 = 0;
      v30 = Array68_CopyRange(v12, a2, v11);
      v13 = (_BYTE *)sub_657A86E0(this, v30, a3, v29);
      v14 = (_BYTE *)*(this + 2);
      LOBYTE(v31) = 0;
      v30 = v13;
      Array68_CopyRange(a2, v14, v13);
      v15 = *(this + 1);
      v16 = (*(this + 2) - v15) / 68 + a3;
      if ( v15 )
      {
        PacketArray68_DestroyRange(v15, *(this + 2));
        operator delete((void *)*(this + 1));
      }
      LODWORD(v5) = v27;
      *(this + 3) = (int)v27 + 68 * v10;
      *(this + 2) = v5 + 68 * v16;
      *(this + 1) = v5;
    }
  }
  return v5;
}
// 657996A0: using guessed type int __thiscall sub_657996A0(_DWORD);
// 657A6B70: using guessed type int __cdecl sub_657A6B70(_DWORD, _DWORD, _DWORD);
// 657A7C90: using guessed type int __cdecl sub_657A7C90(_DWORD, _DWORD, _DWORD);
// 657A86E0: using guessed type int __thiscall sub_657A86E0(_DWORD, _DWORD, _DWORD, _DWORD);
// 657A8E60: using guessed type int __thiscall sub_657A8E60(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (657A9350) --------------------------------------------------------
int __thiscall sub_657A9350(int *this, int a2, unsigned int a3, int a4)
{
  __int64 v5; // rax
  unsigned int v6; // ebx
  int v7; // ecx
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // ebx
  void *v11; // eax
  int v12; // ecx
  int v13; // eax
  int v14; // ecx
  int v15; // ecx
  unsigned int v16; // edi
  char *v17; // edi
  int v18; // ecx
  int v19; // ecx
  int v20; // ebx
  int v21; // eax
  int v23; // [esp-8h] [ebp-98h]
  int v24; // [esp-8h] [ebp-98h]
  void *v25[5]; // [esp+0h] [ebp-90h] BYREF
  void *v26; // [esp+14h] [ebp-7Ch]
  int v27; // [esp+18h] [ebp-78h]
  int v28; // [esp+1Ch] [ebp-74h]
  int v29; // [esp+20h] [ebp-70h]
  _BYTE v30[88]; // [esp+24h] [ebp-6Ch] BYREF
  void **v31; // [esp+80h] [ebp-10h]
  int v32; // [esp+8Ch] [ebp-4h]

  v31 = v25;
  v28 = a4;
  LODWORD(v5) = *(this + 1);
  v25[4] = this;
  if ( (_DWORD)v5 )
  {
    v5 = 780903145LL * (*(this + 3) - (int)v5);
    v6 = (SHIDWORD(v5) >> 4) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v7 = *(this + 2);
    v8 = (*(this + 2) - *(this + 1)) / 88;
    if ( 48806446 - v8 < a3 )
      v8 = sub_657947E0();
    v9 = a3 + v8;
    if ( v6 >= v9 )
    {
      if ( (v7 - a2) / 88 >= a3 )
      {
        sub_657A6130(v30, v28);
        v20 = *(this + 2);
        v32 = 5;
        v29 = v20 - 88 * a3;
        v21 = sub_657A8E90(this, v29, v20, v20);
        v24 = v29;
        *(this + 2) = v21;
        sub_657A85F0(a2, v24, v20);
        sub_657A82F0(a2, a2 + 88 * a3, v30);
      }
      else
      {
        sub_657A6130(v30, v28);
        v18 = *(this + 2);
        v32 = 2;
        sub_657A8E90(this, a2, v18, 88 * a3 + a2);
        v19 = *(this + 2);
        LOBYTE(v32) = 3;
        sub_657A8720(this, v19, a3 - (v19 - a2) / 88, v30);
        *(this + 2) += 88 * a3;
        v23 = *(this + 2) - 88 * a3;
        v32 = 2;
        sub_657A82F0(a2, v23, v30);
      }
      LODWORD(v5) = sub_65799870(v30);
    }
    else
    {
      if ( 48806446 - (v6 >> 1) >= v6 )
        v10 = (v6 >> 1) + v6;
      else
        v10 = 0;
      if ( v10 < v9 )
        v10 = v9;
      v11 = (void *)sub_65795330(v10, 0, v25[0]);
      v12 = *(this + 1);
      LOBYTE(v29) = 0;
      v26 = v11;
      v27 = (int)v11;
      v32 = 0;
      v27 = sub_657A8060(v12, a2, v11, this, v29, v29);
      v13 = sub_657A8720(this, v27, a3, v28);
      v14 = *(this + 2);
      LOBYTE(v29) = 0;
      v27 = v13;
      sub_657A8060(a2, v14, v13, this, v29, v29);
      v15 = *(this + 1);
      v16 = (*(this + 2) - v15) / 88 + a3;
      if ( v15 )
      {
        Array88_FreeVectors(v15, *(this + 2));
        operator delete((void *)*(this + 1));
      }
      LODWORD(v5) = v26;
      v17 = (char *)v26 + 88 * v16;
      *(this + 3) = (int)v26 + 88 * v10;
      *(this + 2) = (int)v17;
      *(this + 1) = v5;
    }
  }
  return v5;
}
// 657A94DE: variable 'v7' is possibly undefined
// 657947E0: using guessed type int sub_657947E0(void);
// 65795330: using guessed type int __stdcall sub_65795330(_DWORD, _DWORD, _DWORD);
// 65799870: using guessed type int __thiscall sub_65799870(_DWORD);
// 6579B2E0: using guessed type int __cdecl sub_6579B2E0(_DWORD, _DWORD);
// 657A6130: using guessed type int __thiscall sub_657A6130(_DWORD, _DWORD);
// 657A8060: using guessed type int __cdecl sub_657A8060(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 657A82F0: using guessed type int __cdecl sub_657A82F0(_DWORD, _DWORD, _DWORD);
// 657A85F0: using guessed type int __cdecl sub_657A85F0(_DWORD, _DWORD, _DWORD);
// 657A8720: using guessed type int __thiscall sub_657A8720(_DWORD, _DWORD, _DWORD, _DWORD);
// 657A8E90: using guessed type int __thiscall sub_657A8E90(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (657A9610) --------------------------------------------------------
int *__thiscall Packet_ID_FACTION_listB_entry_init(int *this)
{
  int *v2; // ecx
  int v4[5]; // [esp+Ch] [ebp-14h] BYREF

  v4[1] = (int)this;
  v2 = this + 1;
  v2[1] = 0;
  v2[2] = 0;
  v2[3] = 0;
  v4[4] = 0;
  PacketArray88_EraseRange(v2, v4, 0, 0);
  *(_BYTE *)this = 0;
  return this;
}

//----- (657A9680) --------------------------------------------------------
void __thiscall Packet_ID_FACTION_read_listB_entry(char *this, unsigned int *a2)
{
  unsigned int *v3; // edi
  int *v4; // esi
  void *v5; // eax
  void *v6; // ecx
  int v7; // [esp+10h] [ebp-68h] BYREF
  void *v8; // [esp+14h] [ebp-64h]
  void *v9; // [esp+18h] [ebp-60h]
  __int16 v10; // [esp+20h] [ebp-58h]
  char v11; // [esp+28h] [ebp-50h]
  int v12; // [esp+2Ch] [ebp-4Ch]
  int v13; // [esp+30h] [ebp-48h]
  int v14; // [esp+34h] [ebp-44h]
  int v15; // [esp+38h] [ebp-40h]
  int v16; // [esp+3Ch] [ebp-3Ch]
  int v17; // [esp+40h] [ebp-38h]
  int v18; // [esp+48h] [ebp-30h]
  int v19; // [esp+4Ch] [ebp-2Ch]
  char v20; // [esp+50h] [ebp-28h]
  int v21; // [esp+58h] [ebp-20h]
  int v22; // [esp+5Ch] [ebp-1Ch]
  int v23; // [esp+60h] [ebp-18h]
  int v24; // [esp+64h] [ebp-14h]
  unsigned int v25; // [esp+68h] [ebp-10h]
  int v26; // [esp+74h] [ebp-4h]

  v3 = a2;
  RakNet::BitStream::ReadCompressed(a2, this, 8u, 1);
  a2 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(v3, (char *)&a2);
  GameDataArray_Ctor(&v7);
  v26 = 0;
  v25 = 0;
  if ( a2 )
  {
    v4 = (int *)(this + 4);
    do
    {
      Packet_ID_A5_read_struct2((char *)&v7, v3);
      Vector88_PushBack(v4, (int)&v7);
      v5 = v8;
      v6 = v9;
      if ( v8 != v9 )
      {
        v6 = v8;
        v9 = v8;
      }
      v10 = 10000;
      v12 = 0;
      v11 = 0;
      v17 = 0;
      v15 = 0;
      v21 = 0;
      v22 = 0;
      v23 = 0;
      v24 = 0;
      v14 = 0;
      v13 = 0;
      v18 = 0;
      v19 = 0;
      v20 = 1;
      if ( v8 != v6 )
        v9 = v8;
      v16 = 0;
      ++v25;
    }
    while ( v25 < (unsigned int)a2 );
  }
  else
  {
    v5 = v8;
  }
  if ( v5 )
    operator delete(v5);
}

//----- (657A9770) --------------------------------------------------------
int __thiscall Packet_ID_FACTION_listC_insert(_DWORD *this, int a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  int v5; // edi
  int result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 24;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - v3) / 24 >= v4 )
    return sub_657A8FA0(this, &a2, v5, a2);
  result = sub_657A7DD0(v5, 1, a2, this, a2, 0);
  *(this + 2) = v5 + 24;
  return result;
}
// 657A7DD0: using guessed type int __cdecl sub_657A7DD0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 657A8FA0: using guessed type int __thiscall sub_657A8FA0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (657A9800) --------------------------------------------------------
_DWORD *__thiscall Vector68_Insert(int *this, _DWORD *a2, _BYTE *a3, _BYTE *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 68 )
    v6 = (int)&a3[-v5] / 68;
  else
    v6 = 0;
  sub_657A9010(this, a3, 1u, a4);
  *a2 = *(this + 1) + 68 * v6;
  return a2;
}

//----- (657A9870) --------------------------------------------------------
_DWORD *__thiscall Vector88_InsertAlt(int *this, _DWORD *a2, int a3, int a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 88 )
    v6 = (a3 - v5) / 88;
  else
    v6 = 0;
  sub_657A9350(this, a3, 1u, a4);
  *a2 = *(this + 1) + 88 * v6;
  return a2;
}

//----- (657A99F0) --------------------------------------------------------
void __thiscall Packet_ID_FACTION_read_listC(_DWORD *this, unsigned int *a2)
{
  unsigned int v3; // esi
  char v4[8]; // [esp+10h] [ebp-28h] BYREF
  void *v5; // [esp+18h] [ebp-20h]
  void *v6; // [esp+1Ch] [ebp-1Ch]
  int v7; // [esp+20h] [ebp-18h]
  int v8; // [esp+24h] [ebp-14h]
  _DWORD v9[4]; // [esp+28h] [ebp-10h] BYREF

  v9[0] = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)v9);
  v5 = 0;
  v6 = 0;
  v7 = 0;
  v4[0] = 0;
  v8 = 0;
  v3 = 0;
  v9[3] = 0;
  if ( v9[0] )
  {
    do
    {
      Packet_ID_FACTION_read_listC_entry(v4, a2);
      Packet_ID_FACTION_listC_insert(this, (int)v4);
      v4[0] = 0;
      if ( v5 != v6 )
        v6 = v5;
      ++v3;
      v8 = 0;
    }
    while ( v3 < v9[0] );
    if ( v5 )
      operator delete(v5);
  }
}

//----- (657A9AA0) --------------------------------------------------------
_BYTE *__thiscall Vector68_PushBack(int *this, _BYTE *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  _BYTE *v5; // edi
  _BYTE *result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 68;
  else
    v4 = 0;
  v5 = (_BYTE *)*(this + 2);
  if ( (int)&v5[-v3] / 68 >= v4 )
    return Vector68_Insert(this, &a2, v5, a2);
  result = Array68_CopyConstructN(v5, 1, a2);
  *(this + 2) = (int)(v5 + 68);
  return result;
}

//----- (657A9B30) --------------------------------------------------------
_DWORD *__thiscall Vector88_PushBack2(int *this, int a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  _DWORD *v5; // edi
  _DWORD *result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 88;
  else
    v4 = 0;
  v5 = (_DWORD *)*(this + 2);
  if ( ((int)v5 - v3) / 88 >= v4 )
    return Vector88_InsertAlt(this, &a2, (int)v5, a2);
  result = Array88_CopyForwardSafe(v5, 1, a2);
  *(this + 2) = (int)(v5 + 22);
  return result;
}

//----- (657A9D00) --------------------------------------------------------
void __thiscall Packet_ID_FACTION_read_listA(char *this, unsigned int *a2)
{
  char *v2; // ebx
  unsigned int v3; // esi
  int *v4; // ebx
  int v5; // edx
  unsigned int v6; // eax
  char *v7; // ecx
  char v8[4]; // [esp+10h] [ebp-64h] BYREF
  int v9; // [esp+14h] [ebp-60h] BYREF
  char *i; // [esp+18h] [ebp-5Ch] BYREF
  unsigned int v11; // [esp+1Ch] [ebp-58h] BYREF
  char v12[40]; // [esp+20h] [ebp-54h] BYREF
  void *v13; // [esp+48h] [ebp-2Ch]
  void *v14; // [esp+58h] [ebp-1Ch]
  int v15; // [esp+5Ch] [ebp-18h]
  int v16; // [esp+60h] [ebp-14h]
  int v17; // [esp+70h] [ebp-4h]

  v2 = this;
  i = this;
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  v3 = 0;
  v11 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v11);
  PacketBlock_ResetArrays((int)v12);
  v17 = 0;
  if ( v11 )
  {
    v4 = (int *)(v2 + 4);
    do
    {
      Packet_ID_A9_read_structB(v12, a2);
      Vector68_PushBack(v4, v12);
      PacketBlockState_Reset(v12);
      ++v3;
    }
    while ( v3 < v11 );
    v2 = i;
  }
  if ( Net_IsBigEndian() )
  {
    if ( RakNet::BitStream::ReadCompressed(a2, (char *)&i, 0x20u, 1) )
      ByteSwapCopy((int)&i, (int)&v11, 4u);
  }
  else
  {
    RakNet::BitStream::ReadCompressed(a2, (char *)&v11, 0x20u, 1);
  }
  v9 = 0;
  for ( i = 0; (unsigned int)i < v11; ++i )
  {
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(a2, v8, 0x20u, 1) )
        ByteSwapCopy((int)v8, (int)&v9, 4u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(a2, (char *)&v9, 0x20u, 1);
    }
    v5 = *((_DWORD *)v2 + 7);
    if ( v5 )
      v6 = (*((_DWORD *)v2 + 9) - v5) >> 2;
    else
      v6 = 0;
    v7 = (char *)*((_DWORD *)v2 + 8);
    if ( (int)&v7[-v5] >> 2 >= v6 )
    {
      Vector_InsertN((int)(v2 + 24), v7, 1u, (unsigned int)&v9);
    }
    else
    {
      *(_DWORD *)v7 = v9;
      *((_DWORD *)v2 + 8) = v7 + 4;
    }
  }
  if ( v14 )
    operator delete(v14);
  v14 = 0;
  v15 = 0;
  v16 = 0;
  if ( v13 )
    operator delete(v13);
}

//----- (657A9EB0) --------------------------------------------------------
void __thiscall Packet_ID_FACTION_read_block_17BC(int *this, unsigned int *a2)
{
  char v3[6]; // [esp+10h] [ebp-70h] BYREF
  unsigned __int8 v4; // [esp+16h] [ebp-6Ah]
  unsigned __int8 v5; // [esp+17h] [ebp-69h] BYREF
  char v6; // [esp+18h] [ebp-68h] BYREF
  _BYTE v7[67]; // [esp+19h] [ebp-67h] BYREF
  int v8; // [esp+5Ch] [ebp-24h] BYREF
  char *v9; // [esp+60h] [ebp-20h] BYREF
  void *v10; // [esp+64h] [ebp-1Ch]
  void *v11; // [esp+68h] [ebp-18h]
  int v12; // [esp+6Ch] [ebp-14h]
  int v13; // [esp+7Ch] [ebp-4h]

  v5 = 0;
  RakNet::BitStream::ReadCompressed(a2, (char *)&v5, 8u, 1);
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v6 = 0;
  v7[0] = 0;
  v8 = 0;
  v13 = 0;
  v4 = 0;
  if ( v5 )
  {
    do
    {
      RakNet::BitStream::ReadCompressed(a2, &v6, 8u, 1);
      (*(void (__thiscall **)(int, _BYTE *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(g_LTClient, v7, 2048, a2);
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v3, 0x20u, 1) )
          ByteSwapCopy((int)v3, (int)&v8, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v8, 0x20u, 1);
      }
      Packet_ID_FACTION_read_block_0D50(&v9, a2);
      Vector88_PushBack2(this, (int)&v6);
      v6 = 0;
      v7[0] = 0;
      v8 = 0;
      if ( v10 != v11 )
        v11 = v10;
      ++v4;
    }
    while ( v4 < v5 );
    if ( v10 )
      operator delete(v10);
  }
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657AA480) --------------------------------------------------------
int __thiscall Packet_ID_FACTION_listB_insert(_DWORD *this, int a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  int v5; // edi
  int result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 20;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - v3) / 20 >= v4 )
    return sub_657AA3E0(this, &a2, v5, a2);
  result = sub_657A9BF0(v5, 1, a2, this, a2, 0);
  *(this + 2) = v5 + 20;
  return result;
}
// 657A9BF0: using guessed type int __cdecl sub_657A9BF0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 657AA3E0: using guessed type int __thiscall sub_657AA3E0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (657AA510) --------------------------------------------------------
void __cdecl SendPacket_Faction(int a1, int a2)
{
  int WindowById; // eax
  int v3; // eax
  _DWORD v4[269]; // [esp+Ch] [ebp-17E0h] BYREF
  char v5; // [esp+440h] [ebp-13ACh]
  int v6; // [esp+1080h] [ebp-76Ch]
  _BYTE v7[192]; // [esp+10ACh] [ebp-740h] BYREF
  int v8; // [esp+17E8h] [ebp-4h]

  if ( byte_65ABC675 && (a1 || a2) )
  {
    Packet_ID_FACTION_ctor((char *)v4);
    v8 = 0;
    v4[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    v5 = 45;
    qmemcpy(v7, &dword_65ABC650, sizeof(v7));
    WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
    if ( WindowById )
      v6 = *(unsigned __int16 *)(WindowById + 8304);
    LTClient_SendPacket_BuildIfNeeded(v4, 1, 1, 3, 0);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 0x200000);
    v3 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Bu);
    if ( v3 )
      (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v3 + 28))(v3, 0);
    v8 = -1;
    CharSelectPacket_Dtor((char *)v4);
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABC650: using guessed type int dword_65ABC650;
// 65ABC675: using guessed type char byte_65ABC675;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (657AAB50) --------------------------------------------------------
int __stdcall WorldMap_ShowTooltip(int a1, unsigned int a2)
{
  int result; // eax
  int v3; // eax
  int v4; // esi
  char *v5; // eax
  int v6; // [esp+0h] [ebp-8h] BYREF
  int v7; // [esp+4h] [ebp-4h] BYREF

  result = (unsigned __int8)byte_65ABC654 - 1;
  if ( byte_65ABC654 == 1 )
  {
    unknown_libname_664(&v7);
    SharedMem_ReadWorldPosition(&v7);
    unknown_libname_664(&v6);
    sub_65947520((unsigned int *)&v7, (unsigned int *)&v6, a2);
    v3 = sub_65956720(byte_65ABC675, COERCE_FLOAT(byte_65ABC676), a1, &v6);
    v4 = (*(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1874, v3);
    if ( v4 )
      v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
    else
      v5 = (char *)byte_659A8B98;
    result = TooltipMgr_ShowTextTooltip((int *)dword_65ABF708, v5, (int)SendPacket_Faction, 0, 1, 0);
    if ( v4 )
      return (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
  }
  return result;
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 65ABC654: using guessed type char byte_65ABC654;
// 65ABC675: using guessed type char byte_65ABC675;
// 65ABC676: using guessed type char byte_65ABC676;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (657AAC20) --------------------------------------------------------
void __thiscall Packet_ID_FACTION_read_listB(_DWORD *this, unsigned int *a2)
{
  unsigned int *v3; // ebx
  unsigned int v4; // esi
  char v5[4]; // [esp+10h] [ebp-24h] BYREF
  int v6; // [esp+14h] [ebp-20h] BYREF
  void *v7; // [esp+18h] [ebp-1Ch]
  unsigned int v8; // [esp+1Ch] [ebp-18h]
  _DWORD v9[4]; // [esp+24h] [ebp-10h] BYREF

  v3 = a2;
  v4 = 0;
  v9[0] = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)v9);
  Packet_ID_FACTION_listB_entry_init((int *)v5);
  v9[3] = 0;
  if ( v9[0] )
  {
    do
    {
      Packet_ID_FACTION_read_listB_entry(v5, v3);
      Packet_ID_FACTION_listB_insert(this, (int)v5);
      PacketArray88_EraseRange(&v6, (int *)&a2, (int)v7, v8);
      ++v4;
      v5[0] = 0;
    }
    while ( v4 < v9[0] );
  }
  if ( v7 )
  {
    PacketArray88_DestroyRange((int)v7, v8);
    operator delete(v7);
  }
}

//----- (657AAD00) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
char __userpurge Packet_ID_FACTION_read@<al>(char *a1@<ecx>, int a2@<esi>, int a3)
{
  unsigned int *v3; // edi
  char result; // al
  int v5; // eax
  int v6; // ecx
  unsigned int *v7; // [esp-14h] [ebp-14h]

  v3 = (unsigned int *)(a2 + 12);
  RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), a1);
  RakNet::BitStream::ReadCompressed((unsigned int *)(a2 + 12), (char *)(a2 + 1076), 8u, 1);
  switch ( *(_BYTE *)(a2 + 1076) )
  {
    case 2:
      Packet_ID_FACTION_read_blockA((char *)(a2 + 2136), (unsigned int *)(a2 + 12));
      v7 = (unsigned int *)(a2 + 12);
      if ( *(_BYTE *)(a2 + 3218) )
        goto LABEL_18;
      Packet_ID_FACTION_read_listA((char *)(a2 + 4104), v7);
      Packet_ID_FACTION_read_listB((_DWORD *)(a2 + 6044), (unsigned int *)(a2 + 12));
      Packet_ID_FACTION_read_listC((_DWORD *)(a2 + 6060), (unsigned int *)(a2 + 12));
      return 1;
    case 4:
      if ( !(unsigned __int8)VariableSizedPacket::DecodeString((char *)a2, a2 + 1078) )
        return 0;
      v5 = a2 + 1110;
      goto LABEL_64;
    case 5:
      result = VariableSizedPacket::DecodeString((char *)a2, a2 + 1110);
      goto LABEL_61;
    case 7:
    case 0x2B:
    case 0x37:
    case 0x38:
    case 0x39:
    case 0x3C:
    case 0x42:
    case 0x46:
      goto LABEL_50;
    case 9:
      result = VariableSizedPacket::DecodeString((char *)a2, a2 + 3428);
      goto LABEL_61;
    case 0xA:
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), (char *)(a2 + 3424));
      VariableSizedPacket::ReadBit((unsigned int *)a2, (bool *)(a2 + 3916));
      if ( *(_BYTE *)(a2 + 3916) )
        return 1;
      v6 = a2 + 3917;
      goto LABEL_60;
    case 0xD:
      Packet_ID_FACTION_read_block_0D78((char **)(a2 + 3448), (unsigned int *)(a2 + 12));
      Packet_ID_FACTION_read_listA((char *)(a2 + 4104), (unsigned int *)(a2 + 12));
      return 1;
    case 0xE:
      goto LABEL_44;
    case 0xF:
      Playerfile_read_blockC0((char *)(a2 + 3464), (unsigned int *)(a2 + 12));
      return 1;
    case 0x10:
      Read_u8c((unsigned int *)a2, (char *)(a2 + 3588));
      result = VariableSizedPacket::DecodeString((char *)a2, a2 + 1078);
      goto LABEL_61;
    case 0x11:
      Read_u8c((unsigned int *)a2, (char *)(a2 + 3588));
      goto LABEL_15;
    case 0x12:
      Packet_ID_FACTION_read_block_0E08((char *)(a2 + 3592), (unsigned int *)(a2 + 12));
      return 1;
    case 0x13:
      v7 = (unsigned int *)(a2 + 12);
LABEL_18:
      Packet_ID_FACTION_read_block_0D50((char **)(a2 + 3408), v7);
      return 1;
    case 0x15:
      Packet_ID_FACTION_read_block_0E2C((char **)(a2 + 3628), (unsigned int *)(a2 + 12));
      Packet_ID_FACTION_read_block_0E3C((char **)(a2 + 3644), (unsigned int *)(a2 + 12));
      if ( !(unsigned __int8)VariableSizedPacket::DecodeString((char *)a2, a2 + 3660) )
        return 0;
      VariableSizedPacket::ReadBit((unsigned int *)a2, (bool *)(a2 + 3916));
      Packet_ID_FACTION_read_listA((char *)(a2 + 4104), (unsigned int *)(a2 + 12));
      return 1;
    case 0x16:
    case 0x18:
    case 0x1C:
    case 0x34:
LABEL_15:
      RakNet::BitStream::ReadCompressed_T_uint(v3, (char *)(a2 + 3424));
      return 1;
    case 0x17:
      if ( !(unsigned __int8)VariableSizedPacket::DecodeString((char *)a2, a2 + 3660) )
        return 0;
      VariableSizedPacket::ReadBit((unsigned int *)a2, (bool *)(a2 + 3916));
      return 1;
    case 0x19:
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), (char *)(a2 + 3424));
      VariableSizedPacket::ReadBit((unsigned int *)a2, (bool *)(a2 + 3916));
      if ( *(_BYTE *)(a2 + 3916) )
        return 1;
      result = VariableSizedPacket::DecodeString((char *)a2, a2 + 3917);
      goto LABEL_61;
    case 0x1A:
    case 0x1B:
    case 0x22:
      RakNet::BitStream::ReadCompressed_T_uint(v3, (char *)(a2 + 4048));
      return 1;
    case 0x1E:
      Packet_ID_FACTION_read_block_0FD4((void *)(a2 + 4052), (unsigned int *)(a2 + 12));
      return 1;
    case 0x1F:
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), (char *)(a2 + 4048));
      result = VariableSizedPacket::DecodeString((char *)a2, a2 + 3660);
      goto LABEL_61;
    case 0x21:
      Packet_ID_FACTION_read_block_0E3C((char **)(a2 + 3644), (unsigned int *)(a2 + 12));
      return 1;
    case 0x24:
      Packet_ID_FACTION_read_listA((char *)(a2 + 4104), (unsigned int *)(a2 + 12));
      Packet_ID_FACTION_read_block_1340((char *)(a2 + 4928), (unsigned int *)(a2 + 12));
      return 1;
    case 0x25:
      result = VariableSizedPacket::DecodeString((char *)a2, a2 + 4068);
      goto LABEL_61;
    case 0x26:
    case 0x28:
    case 0x29:
    case 0x3B:
      Read_u8c((unsigned int *)a2, (char *)(a2 + 4100));
      return 1;
    case 0x27:
      Packet_ID_A9_read_structB((char *)(a2 + 4144), (unsigned int *)(a2 + 12));
      return 1;
    case 0x2A:
      Read_u8c((unsigned int *)a2, (char *)(a2 + 4216));
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), (char *)(a2 + 4212));
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), (char *)(a2 + 3424));
      result = VariableSizedPacket::DecodeString((char *)a2, a2 + 3917);
      goto LABEL_61;
    case 0x2C:
      Packet_ID_FACTION_read_block_1090((char **)(a2 + 4240), (unsigned int *)(a2 + 12));
      Packet_ID_FACTION_read_block_107C((char *)(a2 + 4220), (unsigned int *)(a2 + 12));
      Packet_ID_FACTION_read_listA((char *)(a2 + 4104), (unsigned int *)(a2 + 12));
      Packet_ID_FACTION_read_block_1340((char *)(a2 + 4928), (unsigned int *)(a2 + 12));
      Packet_ID_FACTION_read_blockA_struct_4C0((char *)(a2 + 5904), (unsigned int *)(a2 + 12));
      return 1;
    case 0x2D:
      Packet_ID_FACTION_read_block_10A0((char *)(a2 + 4256), (unsigned int *)(a2 + 12));
      goto LABEL_50;
    case 0x2E:
      Packet_ID_FACTION_read_block_10A0((char *)(a2 + 4256), (unsigned int *)(a2 + 12));
      return 1;
    case 0x2F:
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), (char *)(a2 + 3424));
      RakNet::BitStream::ReadCompressed_T_uint(v3, (char *)(a2 + 4212));
      return 1;
    case 0x30:
      VariableSizedPacket::ReadBit((unsigned int *)a2, (bool *)(a2 + 3916));
      Packet_ID_FACTION_read_block_1170((char *)(a2 + 4464), (unsigned int *)(a2 + 12));
      return 1;
    case 0x31:
      VariableSizedPacket::ReadBit((unsigned int *)a2, (bool *)(a2 + 3916));
      Packet_ID_FACTION_read_block_1160((char **)(a2 + 4448), (unsigned int *)(a2 + 12));
      Packet_ID_FACTION_read_listA((char *)(a2 + 4104), (unsigned int *)(a2 + 12));
      return 1;
    case 0x32:
      VariableSizedPacket::ReadBit((unsigned int *)a2, (bool *)(a2 + 3916));
      result = VariableSizedPacket::DecodeString((char *)a2, a2 + 1078);
      goto LABEL_61;
    case 0x33:
      Packet_ID_FACTION_read_block_11A4((char *)(a2 + 4516), (unsigned int *)(a2 + 12));
      return 1;
    case 0x36:
      Packet_ID_FACTION_read_block_1318((char *)(a2 + 4888), (unsigned int *)(a2 + 12));
      goto LABEL_44;
    case 0x3A:
      Read_u8c((unsigned int *)a2, (char *)(a2 + 4100));
      result = VariableSizedPacket::DecodeString((char *)a2, a2 + 1078);
      goto LABEL_61;
    case 0x3D:
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), (char *)(a2 + 4212));
      Packet_ID_FACTION_read_block_1738((char *)(a2 + 5944), (unsigned int *)(a2 + 12));
      return 1;
    case 0x3E:
      Packet_ID_FACTION_read_block_1784((char *)(a2 + 6020), (unsigned int *)(a2 + 12));
      return 1;
    case 0x3F:
      if ( (unsigned __int8)VariableSizedPacket::DecodeString((char *)a2, a2 + 1078) )
        goto LABEL_49;
      return 0;
    case 0x40:
      Read_u8c((unsigned int *)a2, (char *)(a2 + 6040));
      Read_u8c((unsigned int *)a2, (char *)(a2 + 6041));
      goto LABEL_50;
    case 0x41:
      if ( !(unsigned __int8)VariableSizedPacket::DecodeString((char *)a2, a2 + 3428) )
        return 0;
LABEL_49:
      Read_u8c((unsigned int *)a2, (char *)(a2 + 6040));
LABEL_50:
      RakNet::BitStream::ReadCompressed_T_uint(v3, (char *)(a2 + 4212));
      return 1;
    case 0x43:
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), (char *)(a2 + 4212));
      RakNet::BitStream::ReadCompressed_T_uint(v3, (char *)(a2 + 3424));
      return 1;
    case 0x44:
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), (char *)(a2 + 4212));
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), (char *)(a2 + 3424));
      Read_u8c((unsigned int *)a2, (char *)(a2 + 6040));
      return 1;
    case 0x45:
      result = VariableSizedPacket::DecodeString((char *)a2, a2 + 3428);
      if ( !result )
        return result;
      goto LABEL_50;
    case 0x48:
      Packet_ID_FACTION_read_block_17BC((int *)(a2 + 6076), (unsigned int *)(a2 + 12));
      return 1;
    case 0x49:
      v6 = a2 + 1078;
LABEL_60:
      result = VariableSizedPacket::DecodeString((char *)a2, v6);
LABEL_61:
      if ( !result )
        return result;
      return 1;
    case 0x4A:
      goto LABEL_68;
    case 0x4B:
      v5 = a2 + 3428;
LABEL_64:
      if ( !(unsigned __int8)VariableSizedPacket::DecodeString((char *)a2, v5) )
        return 0;
LABEL_44:
      Read_u8c((unsigned int *)a2, (char *)(a2 + 1077));
      return 1;
    case 0x4C:
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), (char *)(a2 + 3424));
      Read_u8c((unsigned int *)a2, (char *)(a2 + 1077));
      return 1;
    case 0x4D:
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(a2 + 12), (char *)(a2 + 3424));
LABEL_68:
      Read_u8c((unsigned int *)a2, (char *)(a2 + 1077));
      break;
    default:
      return 1;
  }
  return 1;
}
// 657AAD76: positive sp value 10 has been found
// 657AAD00: could not find valid save-restore pair for ebx
// 657AAD00: could not find valid save-restore pair for edi

//----- (657AB530) --------------------------------------------------------
char *__thiscall Packet_ID_152_Ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_WORD *)this + 543) = 0;
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *((_DWORD *)this + 270) = 0;
  *(this + 1084) = 0;
  *(this + 1088) = 0;
  *((_DWORD *)this + 274) = 0;
  *((_DWORD *)this + 275) = 0;
  *(this + 1064) = -90;
  *(_DWORD *)this = &off_659C9290;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659C9290: using guessed type void *off_659C9290;

//----- (657AB5D0) --------------------------------------------------------
bool __thiscall Read_u64c(unsigned int *this, char *a2)
{
  char v4[8]; // [esp+8h] [ebp-Ch] BYREF

  if ( !Net_IsBigEndian() )
    return RakNet::BitStream::ReadCompressed(this, a2, 0x40u, 1);
  if ( !RakNet::BitStream::ReadCompressed(this, v4, 0x40u, 1) )
    return 0;
  ByteSwapCopy((int)v4, (int)a2, 8u);
  return 1;
}

//----- (657AB9F0) --------------------------------------------------------
char __thiscall Packet_ID_A6_read(int this, int a2)
{
  char result; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1088), 8u, 1);
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1084), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 2:
      case 4:
      case 7:
        goto LABEL_4;
      case 3:
        Read_u64c((unsigned int *)(this + 12), (char *)(this + 1096));
LABEL_4:
        RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1086));
        break;
      default:
        return 1;
    }
    return 1;
  }
  return result;
}

//----- (657AC330) --------------------------------------------------------
LONG __stdcall SharedMem_SetCraftingFlag(unsigned __int8 a1)
{
  return SharedMem_WriteU8_std(0x2BE1u, a1);
}

//----- (657AC530) --------------------------------------------------------
void __thiscall CraftingUI_HandleItemUpdate(unsigned __int16 *this, _WORD *a2)
{
  int v3; // ecx
  _DWORD v4[6]; // [esp+Ch] [ebp-18h] BYREF

  v4[1] = LoginUI_GetPasswordPtr();
  v4[2] = 0;
  v4[5] = 0;
  sub_6593E160(a2, v4);
  sub_6593F120((_DWORD *)this + 1595, (int)v4);
  ObjectManager_ClearAll(*((_DWORD **)this + 1592));
  v3 = *((_DWORD *)this + 1592);
  *((_DWORD *)this + 1593) = 0;
  Inventory_ProcessItemSlots(v3, (__int16 *)this + 3190, 0, 1);
  if ( !(unsigned __int16)ItemsAddedPayload_GetUsedCount(this + 3190) )
    (*(void (__thiscall **)(unsigned __int16 *, int, _DWORD, _DWORD))(*(_DWORD *)this + 4))(this, 3, 0, 0);
  LoginUI_SetPassword((int)v4);
}

//----- (657AC5F0) --------------------------------------------------------
char *__thiscall Packet_ID_146_Ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -110;
  *(_DWORD *)this = &off_659C92A0;
  *((_DWORD *)this + 273) = 0;
  *((_DWORD *)this + 274) = 0;
  *((_DWORD *)this + 275) = 0;
  *((_WORD *)this + 542) = 0;
  *(this + 1116) = 0;
  *((_DWORD *)this + 276) = 0;
  *((_DWORD *)this + 277) = 0;
  *((_DWORD *)this + 278) = 0;
  *((_DWORD *)this + 282) = LoginUI_GetPasswordPtr();
  *((_DWORD *)this + 283) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *((_DWORD *)this + 270) = 0;
  *((_DWORD *)this + 280) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659C92A0: using guessed type void *off_659C92A0;

//----- (657AC6C0) --------------------------------------------------------
char __thiscall Packet_ID_BACKPACK_CONTENTS_read(int this, int a2)
{
  char result; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1120));
    ItemList_Read((ItemsAddedPayload *)(this + 1084), (unsigned int *)(this + 12));
    Read_u32c_list_u16count((int *)(this + 1124), (unsigned int *)(this + 12));
    return 1;
  }
  return result;
}

//----- (657AC740) --------------------------------------------------------
int __thiscall Packet_ID_146_Dtor(int *this)
{
  int v2; // eax

  LoginUI_SetPassword((int)(this + 281));
  v2 = *(this + 273);
  if ( v2 )
  {
    ItemVector_DestroyRange(v2, *(this + 274));
    operator delete((void *)*(this + 273));
  }
  *(this + 273) = 0;
  *(this + 274) = 0;
  *(this + 275) = 0;
  *this = (int)&vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 3));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (657ACC20) --------------------------------------------------------
void __thiscall CraftingMgr_UpdateRecipe(int this, int a2)
{
  int v3; // esi
  int v4; // ecx

  v3 = this + 6380;
  *(_WORD *)(this + 6380) = *(_WORD *)a2;
  ItemDataArray_Assign((int *)(this + 6384), a2 + 4);
  *(_DWORD *)(v3 + 20) = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(v3 + 24) = *(_DWORD *)(a2 + 24);
  *(_DWORD *)(v3 + 28) = *(_DWORD *)(a2 + 28);
  *(_BYTE *)(v3 + 32) = *(_BYTE *)(a2 + 32);
  ObjectManager_ClearAll(*(_DWORD **)(this + 6368));
  v4 = *(_DWORD *)(this + 6368);
  *(_DWORD *)(this + 6372) = 0;
  Inventory_ProcessItemSlots(v4, (__int16 *)v3, 0, 1);
}

//----- (657ACD80) --------------------------------------------------------
int __thiscall CraftingMgr_NotifyUpdate(void *this)
{
  return (*(int (__thiscall **)(void *, int, _DWORD, _DWORD))(*(_DWORD *)this + 4))(this, 5, 0, 0);
}

//----- (657AD1C0) --------------------------------------------------------
char *__thiscall Packet_ID_151_Ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -105;
  *(_DWORD *)this = &off_659C9328;
  *((_DWORD *)this + 280) = 0;
  *((_DWORD *)this + 281) = 0;
  *((_DWORD *)this + 282) = 0;
  *((_DWORD *)this + 268) = 0;
  *((_DWORD *)this + 269) = 0;
  *(this + 1080) = 0;
  *(this + 1081) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659C9328: using guessed type void *off_659C9328;

//----- (657AD7D0) --------------------------------------------------------
char __thiscall Packet_ID_FRIENDS_read(int this, int a2)
{
  char result; // al
  char v4; // bl

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1080), 8u, 1);
    v4 = *(_BYTE *)(this + 1080);
    if ( v4 == 3 || v4 == 7 )
    {
      Packet_ID_FACTION_read_block_0D50((char **)(this + 1116), (unsigned int *)(this + 12));
    }
    else
    {
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1076));
      result = (*(int (__thiscall **)(int, int, int, int))(*(_DWORD *)g_LTClient + 56))(
                 g_LTClient,
                 this + 1081,
                 2048,
                 this + 12);
      if ( !result )
        return result;
    }
    return 1;
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657AD870) --------------------------------------------------------
void __thiscall RewardUI_DisplayItems(int *this, int a2)
{
  unsigned __int16 v3; // si
  int v4; // esi
  unsigned __int8 *v5; // esi
  char *v6; // eax
  int v7; // edx
  int v8; // eax
  int v9; // ecx
  unsigned int *v10; // edi
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  int v13; // esi
  char *v14; // eax
  unsigned __int16 v15; // [esp+20h] [ebp-Ch]
  int v16; // [esp+24h] [ebp-8h]
  int v17; // [esp+28h] [ebp-4h]
  unsigned int v18; // [esp+34h] [ebp+8h]

  sub_6576D9C0((_DWORD *)*(this + 1595));
  VectorData_CopyFrom((int)(this + 1599), a2);
  v3 = (*(this + 1601) - *(this + 1600)) / 320;
  v15 = v3;
  if ( v3 )
  {
    v18 = 0;
    v17 = 0;
    v16 = v3;
    do
    {
      v4 = *(this + 1600);
      if ( v18 < (*(this + 1601) - v4) / 320 )
      {
        v5 = (unsigned __int8 *)(v17 + v4);
        if ( v5 )
        {
          v6 = UiWidget_CreateWithParams(v5, 1.0, 250, 1, 0, 0);
          if ( v6 )
          {
            sub_6576D0F0((_DWORD *)*(this + 1595), *(_DWORD *)v5, v5[4], 0, 25, (int)v6);
            v7 = *(_DWORD *)(*(this + 1595) + 2236);
            if ( v7 )
            {
              v8 = 0;
              while ( 1 )
              {
                v9 = *(_DWORD *)(v7 + 4 * v8);
                if ( v9 )
                {
                  if ( *(_DWORD *)(v9 + 4) == 24 )
                    break;
                }
                if ( (unsigned int)++v8 >= 0xA )
                  goto LABEL_14;
              }
              v10 = *(unsigned int **)(v7 + 4 * v8);
              v11 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9028);
              LinkedList_AddNode(v10, v11, 10, *(_DWORD *)v5, v5[4]);
              v12 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9057);
              LinkedList_AddNode(v10, v12, 6, *(_DWORD *)v5, 0);
            }
          }
        }
      }
LABEL_14:
      v17 += 320;
      ++v18;
      --v16;
    }
    while ( v16 );
    v3 = v15;
  }
  sub_6576D1D0((_DWORD *)*(this + 1595));
  ItemList_Sort((char *)*(this + 1595), 0, 1);
  v13 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4322, v3);
  if ( v13 )
    v14 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v13);
  else
    v14 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(this + 1596), v14, 0, 0);
  if ( v13 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v13);
}
// 657AD96D: conditional instruction was optimized away because ecx.4!=0

//----- (657ADC10) --------------------------------------------------------
char *__thiscall BuffSlots_FindByTypeId(_DWORD *this, int a2)
{
  unsigned __int8 v2; // dl
  char *result; // eax

  v2 = 0;
  while ( *(this + 12 * v2) != a2 )
  {
    if ( ++v2 >= 6u )
      return 0;
  }
  result = (char *)(this + 12 * v2);
  result[44] = v2 + 23;
  return result;
}

//----- (657ADCC0) --------------------------------------------------------
void __cdecl __noreturn Vector8_ThrowLengthError(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657ADDA0) --------------------------------------------------------
void *__cdecl SafeNew8Array_CheckOverflow(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 8 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(8 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (657AE100) --------------------------------------------------------
int __thiscall ItemStatList_GetByIndex(_DWORD *this, unsigned int a2)
{
  int v2; // eax

  v2 = *(this + 1);
  if ( a2 < (*(this + 2) - v2) >> 3 )
    return v2 + 8 * a2;
  else
    return 0;
}

//----- (657AE130) --------------------------------------------------------
int __thiscall ItemStatList_FindById(_DWORD *this, char a2)
{
  int v2; // edi
  unsigned int v3; // eax
  int v4; // edx
  _BYTE *i; // esi

  v2 = *(this + 1);
  v3 = (*(this + 2) - v2) >> 3;
  v4 = 0;
  if ( !v3 )
    return 0;
  for ( i = (_BYTE *)*(this + 1); *i != a2; i += 8 )
  {
    if ( ++v4 >= v3 )
      return 0;
  }
  return v2 + 8 * v4;
}

//----- (657AE170) --------------------------------------------------------
char __thiscall Buff_ReduceDurationPercent(int this, unsigned __int16 a2)
{
  unsigned __int16 v2; // dx
  unsigned __int16 v3; // ax
  float v5; // [esp+0h] [ebp-4h]

  v5 = (double)*(unsigned __int8 *)(this + 8) / 100.0;
  v2 = (int)(v5 * (double)a2);
  v3 = *(_WORD *)(this + 6);
  if ( v2 < v3 )
  {
    *(_WORD *)(this + 6) = v3 - v2;
    return 1;
  }
  else
  {
    *(_WORD *)(this + 6) = 0;
    return 0;
  }
}

//----- (657AE1F0) --------------------------------------------------------
char __thiscall BuffSlots_UpdateFromSource(_DWORD *this, int a2, int a3)
{
  char *v3; // eax

  v3 = BuffSlots_FindByTypeId(this, a2);
  if ( !v3 )
    return 0;
  *((_WORD *)v3 + 3) = *(_WORD *)(a3 + 6);
  *((_WORD *)v3 + 5) = *(_WORD *)(a3 + 10);
  return 1;
}

//----- (657AE220) --------------------------------------------------------
char __thiscall BuffSlots_RemoveAndClear(_DWORD *this, int a2, char *a3)
{
  char *v3; // eax

  v3 = BuffSlots_FindByTypeId(this, a2);
  if ( !v3 || *(_DWORD *)v3 != a2 )
    return 0;
  if ( a3 )
    qmemcpy(a3, v3, 0x30u);
  *(_DWORD *)v3 = 0;
  *((_WORD *)v3 + 2) = 0;
  *((_WORD *)v3 + 3) = 0;
  *((_WORD *)v3 + 4) = 0;
  *((_WORD *)v3 + 5) = 0;
  v3[12] = 100;
  v3[13] = 0;
  *((_DWORD *)v3 + 4) = 0;
  *((_DWORD *)v3 + 5) = 0;
  *((_DWORD *)v3 + 6) = 0;
  v3[29] = 0;
  v3[30] = 0;
  v3[28] = 0;
  *(_DWORD *)(v3 + 31) = 0;
  *((_DWORD *)v3 + 9) = 0;
  *((_DWORD *)v3 + 10) = 0;
  v3[44] = 0;
  return 1;
}

//----- (657AEE00) --------------------------------------------------------
void __thiscall DynamicArray_Free(int this)
{
  if ( *(_DWORD *)(this + 4) )
    operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
}

//----- (657AF840) --------------------------------------------------------
double __cdecl Float_Ceil(float a1)
{
  return (float)ceil(a1);
}

//----- (657B4DD0) --------------------------------------------------------
unsigned int __thiscall Packet_ID_B1_read_entryC(char *this, unsigned int *a2)
{
  unsigned int v3; // eax
  unsigned int v4; // eax
  unsigned int result; // eax
  int v6; // edx

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 4,
    2048,
    a2);
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *(this + 24) = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 28);
  v4 = a2[2];
  if ( v4 + 1 <= *a2 )
  {
    *(this + 32) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 36);
  result = a2[2];
  if ( result + 1 <= *a2 )
  {
    v6 = 128 >> (result & 7);
    result >>= 3;
    *(this + 40) = ((unsigned __int8)v6 & *(_BYTE *)(result + a2[3])) != 0;
    ++a2[2];
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657B4E90) --------------------------------------------------------
bool __thiscall Packet_ID_B1_read_entryB(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 4,
    2048,
    a2);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 24);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 28,
    2048,
    a2);
  RakNet::BitStream::ReadCompressed(a2, this + 60, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 61, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 62, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 64);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 68);
  return RakNet::BitStream::ReadCompressed(a2, this + 72, 8u, 1);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657B5850) --------------------------------------------------------
char __thiscall Packet_ID_B1_read_entryA_list(void *this, unsigned int *a2)
{
  char result; // al
  unsigned int v3; // esi
  unsigned int v5; // [esp+10h] [ebp-54h] BYREF
  int v6; // [esp+14h] [ebp-50h] BYREF
  char v7; // [esp+18h] [ebp-4Ch]
  char v8; // [esp+50h] [ebp-14h]
  char v9; // [esp+51h] [ebp-13h]
  char v10; // [esp+52h] [ebp-12h]
  int v11; // [esp+54h] [ebp-10h]
  int v12; // [esp+58h] [ebp-Ch]
  char i; // [esp+5Ch] [ebp-8h]

  v5 = 0;
  result = RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v5);
  v3 = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  for ( i = 3; v3 < v5; ++v3 )
  {
    Packet_ID_B1_read_entryB((char *)&v6, a2);
    result = sub_657B5760(this, &v6);
  }
  return result;
}
// 657B5760: using guessed type int __thiscall sub_657B5760(_DWORD, _DWORD);

//----- (657B5A60) --------------------------------------------------------
char __thiscall Packet_ID_B1_read_listB(void *this, unsigned int *a2)
{
  unsigned __int8 v3; // bl
  char result; // al
  unsigned __int8 v5; // [esp+Fh] [ebp-31h] BYREF
  int v6; // [esp+10h] [ebp-30h] BYREF
  char v7; // [esp+14h] [ebp-2Ch]
  char v8; // [esp+28h] [ebp-18h]
  int v9; // [esp+2Ch] [ebp-14h]
  char v10; // [esp+30h] [ebp-10h]
  int v11; // [esp+34h] [ebp-Ch]
  char v12; // [esp+38h] [ebp-8h]

  v3 = 0;
  v5 = 0;
  result = RakNet::BitStream::ReadCompressed(a2, (char *)&v5, 8u, 1);
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  if ( v5 )
  {
    do
    {
      Packet_ID_B1_read_entryC((char *)&v6, a2);
      result = sub_657B5990(this, &v6);
      ++v3;
    }
    while ( v3 < v5 );
  }
  return result;
}
// 657B5990: using guessed type int __thiscall sub_657B5990(_DWORD, _DWORD);

//----- (657B75C0) --------------------------------------------------------
void __thiscall Packet_ID_B1_read_listA(char *this, unsigned int *a2)
{
  char *v3; // edi
  void *v4; // eax
  unsigned int v5; // [esp+10h] [ebp-A8h]
  unsigned int v6; // [esp+14h] [ebp-A4h] BYREF
  _DWORD v7[2]; // [esp+18h] [ebp-A0h] BYREF
  char v8; // [esp+20h] [ebp-98h]
  int v9; // [esp+34h] [ebp-84h]
  char v10; // [esp+38h] [ebp-80h]
  int v11; // [esp+58h] [ebp-60h]
  char v12; // [esp+5Ch] [ebp-5Ch]
  int v13; // [esp+70h] [ebp-48h]
  char v14; // [esp+74h] [ebp-44h]
  int v15; // [esp+94h] [ebp-24h]
  void *v16; // [esp+9Ch] [ebp-1Ch]
  void *v17; // [esp+A0h] [ebp-18h]
  int v18; // [esp+B4h] [ebp-4h]

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 4);
  v6 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v6);
  sub_657B20E0(v7);
  v18 = 0;
  v5 = 0;
  if ( v6 )
  {
    v3 = this + 8;
    do
    {
      Packet_ID_B1_read_entryA(v7, (int)a2);
      sub_657B6120(v3, v7);
      v4 = v16;
      v7[0] = 0;
      v7[1] = 0;
      v8 = 0;
      v9 = 0;
      v10 = 0;
      v11 = 0;
      v12 = 0;
      v13 = 0;
      v14 = 0;
      v15 = 0;
      if ( v16 != v17 )
        v17 = v16;
      ++v5;
    }
    while ( v5 < v6 );
  }
  else
  {
    v4 = v16;
  }
  if ( v4 )
    operator delete(v4);
}
// 657B20E0: using guessed type int __thiscall sub_657B20E0(_DWORD);
// 657B6120: using guessed type int __thiscall sub_657B6120(_DWORD, _DWORD);

//----- (657B76E0) --------------------------------------------------------
char __thiscall Packet_ID_B1_read(int this, int a2)
{
  char result; // al
  unsigned int *v4; // edi
  char v5; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    v4 = (unsigned int *)(this + 12);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 1:
        RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1152));
        if ( !(unsigned __int8)VariableSizedPacket::DecodeString((char *)this, this + 1088) )
          return 0;
        v5 = VariableSizedPacket::DecodeString((char *)this, this + 1108);
        return v5 != 0;
      case 2:
        RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1152));
        RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1154));
        goto LABEL_6;
      case 3:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1084));
        v5 = VariableSizedPacket::DecodeString((char *)this, this + 1088);
        return v5 != 0;
      case 5:
      case 9:
LABEL_6:
        Packet_ID_B1_read_listA((char *)(this + 1128), (unsigned int *)(this + 12));
        return 1;
      case 6:
      case 7:
      case 0xC:
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1080));
        return 1;
      case 0xA:
      case 0xB:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        goto LABEL_12;
      case 0xD:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1084));
        Read_u8c((unsigned int *)this, (char *)(this + 1156));
        return 1;
      case 0xF:
      case 0x11:
        Packet_ID_B1_read_listB((void *)(this + 1160), (unsigned int *)(this + 12));
        return 1;
      case 0x12:
LABEL_12:
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1084));
        break;
      default:
        return 1;
    }
    return 1;
  }
  return result;
}

//----- (657BC290) --------------------------------------------------------
int __thiscall ClientObject_SpawnEffect(_DWORD *this)
{
  int result; // eax

  result = (*(int (__thiscall **)(_DWORD *))(*(this + 1592) + 60))(this + 1592);
  if ( result )
    return (*(int (__thiscall **)(int, _DWORD, _DWORD, _DWORD, int))(*(_DWORD *)dword_65A5AA40 + 84))(
             dword_65A5AA40,
             *(this + 1595),
             0,
             0,
             1);
  return result;
}
// 65A5AA40: using guessed type int dword_65A5AA40;

//----- (657BC7A0) --------------------------------------------------------
void __thiscall Equipment_ValidateAndDisplay(char *this)
{
  char *v1; // esi
  _WORD *v2; // eax
  _DWORD *v3; // ebx
  int v4; // ebx
  char *v5; // eax
  char *v6; // eax
  char *v7; // [esp+Ch] [ebp-38h] BYREF
  _DWORD v8[12]; // [esp+10h] [ebp-34h] BYREF

  v1 = this;
  v7 = this;
  ClientObject_SpawnEffect(this);
  v1[7836] = 0;
  v2 = (_WORD *)(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  memset(v8, 0, 12);
  LOWORD(v8[3]) = 100;
  memset(&v8[4], 0, 19);
  memset(&v8[9], 0, 9);
  if ( v2 && ItemList_FindEntryById_CopyEntry(v2, 1800, v8) )
  {
    if ( v8[0] && LOWORD(v8[1]) == 1800 )
    {
      v3 = v1 + 7940;
      qmemcpy(v1 + 7940, v8, 0x30u);
      v1 = v7;
    }
    else
    {
      v3 = v1 + 7940;
      ItemStructA_Init(v1 + 7940);
    }
  }
  else
  {
    v3 = v1 + 7940;
    *((_DWORD *)v1 + 1985) = 0;
    *((_WORD *)v1 + 3972) = 0;
    *((_WORD *)v1 + 3973) = 0;
    *((_WORD *)v1 + 3974) = 0;
    *((_WORD *)v1 + 3975) = 0;
    v1[7952] = 100;
    v1[7953] = 0;
    *((_DWORD *)v1 + 1989) = 0;
    *((_DWORD *)v1 + 1990) = 0;
    *((_DWORD *)v1 + 1991) = 0;
    v1[7969] = 0;
    v1[7970] = 0;
    v1[7968] = 0;
    *(_DWORD *)(v1 + 7971) = 0;
    *((_DWORD *)v1 + 1994) = 0;
    *((_DWORD *)v1 + 1995) = 0;
    v1[7984] = 0;
  }
  if ( (sub_659331C0(g_ItemTemplateById, *((_WORD *)v1 + 3952), 0)
     || sub_659331C0(g_ItemTemplateById, *((_WORD *)v1 + 3953), 0)
     || sub_659331C0(g_ItemTemplateById, *((_WORD *)v1 + 3954), 0)
     || sub_659331C0(g_ItemTemplateById, *((_WORD *)v1 + 3957), 0))
    && (v7 = 0, StatGroup_Read((_DWORD *)g_pEncVarMgr, 6, &v7), v7 != (char *)1) )
  {
    v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4319);
    if ( v4 )
    {
      v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
      UiText_SetValueIfChanged(*((_DWORD *)v1 + 2003), v5, 1, "FF000000");
    }
    else
    {
      UiText_SetValueIfChanged(*((_DWORD *)v1 + 2003), (char *)byte_659A8B98, 1, "FF000000");
    }
  }
  else
  {
    if ( *v3 )
    {
      UiText_SetValueIfChanged(*((_DWORD *)v1 + 2003), (char *)byte_659A8B98, 0, 0);
      return;
    }
    v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4320);
    if ( v4 )
      v6 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
    else
      v6 = (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*((_DWORD *)v1 + 2003), v6, 1, "FFD26400");
  }
  if ( v4 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (657BD200) --------------------------------------------------------
const void *__thiscall PlayerInfo_LoadFromLTClient(int this)
{
  const void *result; // eax

  result = (const void *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  if ( result )
  {
    qmemcpy((void *)(this + 7838), result, 0x32u);
    sub_659579A0((_WORD *)(this + 7838));
    qmemcpy((void *)(this + 7888), (const void *)(this + 7838), 0x32u);
    Equipment_ValidateAndDisplay((char *)this);
    *(_DWORD *)(this + 7940) = 0;
    *(_WORD *)(this + 7944) = 0;
    *(_WORD *)(this + 7946) = 0;
    *(_WORD *)(this + 7948) = 0;
    *(_WORD *)(this + 7950) = 0;
    *(_BYTE *)(this + 7952) = 100;
    *(_BYTE *)(this + 7953) = 0;
    *(_DWORD *)(this + 7956) = 0;
    *(_DWORD *)(this + 7960) = 0;
    *(_DWORD *)(this + 7964) = 0;
    *(_BYTE *)(this + 7969) = 0;
    *(_BYTE *)(this + 7970) = 0;
    *(_BYTE *)(this + 7968) = 0;
    *(_DWORD *)(this + 7971) = 0;
    *(_DWORD *)(this + 7976) = 0;
    *(_DWORD *)(this + 7980) = 0;
    *(_BYTE *)(this + 7984) = 0;
    return 0;
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657BE410) --------------------------------------------------------
int __thiscall sub_657BE410(int *this, int a2, int a3)
{
  int result; // eax

  result = *(this + 1);
  if ( result )
  {
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 8))(a2, result);
    *(this + 1) = 0;
  }
  *(this + 3) = 0;
  return result;
}

//----- (657BE440) --------------------------------------------------------
int __stdcall sub_657BE440(int a1, int a2, int a3)
{
  return (*(int (__thiscall **)(int, int, int))(*(_DWORD *)a2 + 4))(a2, 4 * a1, a3);
}

//----- (657BE770) --------------------------------------------------------
int __thiscall Animation_SetFrame(int *this, int a2, int a3, int a4)
{
  int v5; // eax
  int v7; // eax

  v5 = *(this + 2);
  if ( a2 == v5 && a2 )
    return 1;
  if ( *(this + 1) )
    sub_657BE410(this, a3, v5 + *(this + 3));
  *(this + 2) = a2;
  if ( a2 )
  {
    v7 = sub_657BE440(a2 + *(this + 4), a3, a4);
    *(this + 1) = v7;
    if ( !v7 )
    {
      *(this + 2) = 0;
      *(this + 3) = 0;
      return 0;
    }
    *(this + 3) = *(this + 4);
  }
  return 1;
}

//----- (657BEFE0) --------------------------------------------------------
BOOL __thiscall ItemList_RemoveAt2(int *this, int a1)
{
  return Animation_SetFrame(this, a1, (int)&off_65A560A4, 0) != 0;
}
// 65A560A4: using guessed type void *off_65A560A4;

//----- (657C0880) --------------------------------------------------------
LONG __stdcall SharedMem_SetFlag_0x94(unsigned __int8 a1)
{
  return SharedMem_WriteU8_std(0x94u, a1);
}

//----- (657C12B0) --------------------------------------------------------
char __stdcall sub_657C12B0(char *FileName, char *Buffer, _BYTE *Buffera, _BYTE *a4, _BYTE *a5)
{
  FILE *v6; // esi
  size_t v7; // eax
  size_t v8; // eax
  size_t v9; // eax
  size_t v10; // eax
  size_t v11; // eax
  int v12; // edi
  int v13; // eax
  size_t v14; // eax
  size_t v15; // eax
  FILE *v16; // [esp-10h] [ebp-14h]
  size_t v17; // [esp+0h] [ebp-4h] BYREF

  if ( !FileName )
    return 0;
  v6 = fopen(FileName, "rb");
  if ( !v6 )
    return 0;
  *Buffera = 0;
  *a4 = 0;
  *a5 = 0;
  v7 = fread(Buffer, 4u, 1u, v6);
  v16 = v6;
  if ( !v7 )
    goto LABEL_10;
  v17 = 0;
  v8 = fread(&v17, 4u, 1u, v6);
  v16 = v6;
  if ( !v8 )
    goto LABEL_10;
  v9 = fread(Buffera, 1u, v17, v6);
  v16 = v6;
  if ( v9 < v17 )
    goto LABEL_10;
  Buffera[v17] = 0;
  v10 = fread(&v17, 4u, 1u, v6);
  v16 = v6;
  if ( !v10 )
    goto LABEL_10;
  v11 = fread(a4, 1u, v17, v6);
  v16 = v6;
  if ( v11 >= v17
    && (a4[v17] = 0, v14 = fread(&v17, 4u, 1u, v6), v16 = v6, v14)
    && (v15 = fread(a5, 1u, v17, v6), v16 = v6, v15 >= v17) )
  {
    a5[v17] = 0;
    fclose(v6);
    return 1;
  }
  else
  {
LABEL_10:
    v12 = *(_DWORD *)g_pILTClient;
    v13 = ferror(v16);
    (*(void (**)(int, const char *, ...))(v12 + 28))(g_pILTClient, "Error reading file '%s': %u", FileName, v13);
    fclose(v6);
    return 0;
  }
}

//----- (657C1470) --------------------------------------------------------
char __stdcall SaveFileWithStrings(
        char *FileName,
        void *Buffer,
        WorldLoginReturnAddrPacked ElementCount,
        const char *a4,
        const char *a5)
{
  const char *flag_pad_ip0; // ebx
  FILE *v6; // esi
  size_t v8; // eax
  size_t v9; // eax
  const char *v10; // ebx
  size_t v11; // eax
  size_t v12; // eax
  const char *v13; // ebx
  size_t v14; // eax
  size_t v15; // eax
  int v16; // edi
  int v17; // eax
  FILE *v18; // [esp-Ch] [ebp-10h]

  if ( !a4 )
    return 0;
  if ( !a5 )
    return 0;
  flag_pad_ip0 = (const char *)ElementCount.flag_pad_ip0;
  if ( !ElementCount.flag_pad_ip0 || !FileName )
    return 0;
  v6 = fopen(FileName, "wb");
  if ( !v6 )
    return 0;
  if ( !fwrite(Buffer, 4u, 1u, v6) )
  {
    v18 = v6;
LABEL_18:
    v16 = *(_DWORD *)g_pILTClient;
    v17 = ferror(v18);
    (*(void (**)(int, const char *, ...))(v16 + 28))(g_pILTClient, "Error writing file '%s': %u", FileName, v17);
    fclose(v6);
    return 0;
  }
  ElementCount.flag_pad_ip0 = strlen(flag_pad_ip0);
  v8 = fwrite(&ElementCount, 4u, 1u, v6);
  v18 = v6;
  if ( !v8 )
    goto LABEL_18;
  v9 = fwrite(flag_pad_ip0, 1u, ElementCount.flag_pad_ip0, v6);
  if ( v9 < ElementCount.flag_pad_ip0 )
  {
    v18 = v6;
    goto LABEL_18;
  }
  v10 = a4;
  ElementCount.flag_pad_ip0 = strlen(a4);
  v11 = fwrite(&ElementCount, 4u, 1u, v6);
  v18 = v6;
  if ( !v11 )
    goto LABEL_18;
  v12 = fwrite(v10, 1u, ElementCount.flag_pad_ip0, v6);
  if ( v12 < ElementCount.flag_pad_ip0 )
  {
    v18 = v6;
    goto LABEL_18;
  }
  v13 = a5;
  ElementCount.flag_pad_ip0 = strlen(a5);
  v14 = fwrite(&ElementCount, 4u, 1u, v6);
  v18 = v6;
  if ( !v14 )
    goto LABEL_18;
  v15 = fwrite(v13, 1u, ElementCount.flag_pad_ip0, v6);
  v18 = v6;
  if ( v15 < ElementCount.flag_pad_ip0 )
    goto LABEL_18;
  fclose(v6);
  return 1;
}

//----- (657C18F0) --------------------------------------------------------
char __thiscall sub_657C18F0(_BYTE *this, int a2)
{
  intptr_t v4; // ebx
  unsigned int v5; // eax
  int v6; // eax
  bool v7; // zf
  char *v8; // eax
  char *v9; // edi
  void *Src; // [esp+10h] [ebp-140h]
  char *FileName; // [esp+14h] [ebp-13Ch] BYREF
  struct _finddata64i32_t FindData; // [esp+18h] [ebp-138h] BYREF
  int v13; // [esp+14Ch] [ebp-4h]

  if ( !a2 || !*(this + 1884028) )
    return 0;
  sub_657C1730(a2);
  unknown_libname_528(&FileName);
  v13 = 0;
  sub_658C8710((int)&FileName, "%s\\Inbox", (int)(this + 1884029));
  if ( !sub_657098C0(FileName) && !sub_657099A0(FileName) )
  {
    v13 = -1;
    sub_658C8290();
    return 0;
  }
  sub_658C8900("\\*.fml");
  LOBYTE(v13) = 1;
  sub_658C8150(Src);
  LOBYTE(v13) = 0;
  sub_658C8290();
  v4 = _findfirst64i32(FileName, &FindData);
  if ( v4 != -1 )
  {
    sub_657C1760(FindData.name);
    while ( !_findnext64i32(v4, &FindData) )
    {
      v5 = *(_DWORD *)(a2 + 26000);
      if ( v5 < 0x64 )
      {
        v6 = 260 * v5;
        v7 = a2 + v6 == 0;
        v8 = (char *)(a2 + v6);
        v9 = v8;
        if ( !v7 )
        {
          strncpy(v8, FindData.name, 0x103u);
          v9[259] = 0;
        }
        ++*(_DWORD *)(a2 + 26000);
      }
    }
  }
  _findclose(v4);
  v13 = -1;
  sub_658C8290();
  return 1;
}
// 657C19DA: variable 'Src' is possibly undefined
// 657C1730: using guessed type int __thiscall sub_657C1730(_DWORD);
// 658C7D90: using guessed type int __thiscall unknown_libname_528(_DWORD);

//----- (657C1FF0) --------------------------------------------------------
int __thiscall Mailbox_LoadInbox(unsigned int *this)
{
  unsigned int *v2; // esi
  unsigned int *v3; // eax
  int v4; // ecx
  unsigned int v5; // eax
  const char *v6; // ebx
  unsigned int *v7; // esi
  unsigned int v9; // [esp+10h] [ebp-11Ch]
  int v10; // [esp+14h] [ebp-118h] BYREF
  char Buffer[260]; // [esp+18h] [ebp-114h] BYREF
  int v12; // [esp+128h] [ebp-4h]

  v2 = this + 237801;
  *this = 0;
  v3 = this + 237801;
  v4 = 100;
  do
  {
    *(_BYTE *)v3 = 0;
    v3 += 65;
    --v4;
  }
  while ( v4 );
  v2[6500] = 0;
  sub_657C18F0(this, (int)v2);
  v5 = *(this + 244301);
  *this = v5;
  if ( v5 > 0x64 )
    *this = 100;
  unknown_libname_528(&v10);
  v12 = 0;
  sub_658C8710((int)&v10, "%s\\Inbox", (int)this + 1884029);
  v9 = 0;
  if ( *this )
  {
    v6 = (const char *)v2;
    v7 = this + 7;
    do
    {
      sprintf(Buffer, "%s\\%s", (const char *)v10, v6);
      if ( sub_657C12B0(Buffer, (char *)v7 - 24, (_BYTE *)v7 - 20, v7, (_BYTE *)v7 + 40) )
        strncpy_s((char *)v7 + 2088, 0x104u, Buffer, 0xFFFFFFFF);
      v7 += 593;
      v6 += 260;
      ++v9;
    }
    while ( v9 < *this );
  }
  v12 = -1;
  return sub_658C8290();
}
// 658C7D90: using guessed type int __thiscall unknown_libname_528(_DWORD);

//----- (657C51A0) --------------------------------------------------------
int __thiscall QuestState_Initialize(_BYTE *this)
{
  *(_DWORD *)this = 0;
  *(this + 4) = 0;
  *(this + 12) = 0;
  *(this + 5) = 3;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 4) = 0;
  *(this + 20) = 0;
  PacketData_InitFields(this + 52);
  *(this + 332) = 0;
  *((_DWORD *)this + 91) = 0;
  *((_DWORD *)this + 92) = 0;
  *((_DWORD *)this + 93) = 0;
  *(this + 176) = 0;
  return PacketData_InitFields(this + 208);
}

//----- (657C5520) --------------------------------------------------------
void __cdecl __noreturn Vector_ThrowLengthError_v2(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657C55C0) --------------------------------------------------------
void __cdecl __noreturn Vector_ThrowLengthError_v3(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657C57A0) --------------------------------------------------------
void __cdecl __noreturn Vector_ThrowLengthError_v4(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657C5930) --------------------------------------------------------
void *__cdecl SafeNew36Array_CheckOverflow(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x24 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(36 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (657C5990) --------------------------------------------------------
void *__cdecl Vector44_AllocateChecked(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x2C )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(44 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (657C5AB0) --------------------------------------------------------
void *__cdecl Vector8_AllocateChecked2(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 8 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(8 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (657C6430) --------------------------------------------------------
char *__thiscall sub_657C6430(unsigned __int16 *this, char *a2)
{
  char *v2; // esi
  int v5; // [esp+8h] [ebp-8h] BYREF
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = a2;
  v6[0] = *(_BYTE *)this;
  BitStream_WriteBitsCompressed(a2, v6, 8u, 1);
  v5 = *(this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v5, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&v5, 0x10u, 1);
  }
  a2 = (char *)*((_DWORD *)this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)&v5, 4u);
    BitStream_WriteBitsCompressed(v2, (char *)&v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*((_DWORD *)this + 3);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)&v5, 4u);
    BitStream_WriteBitsCompressed(v2, (char *)&v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  v5 = *(this + 8);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v5, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&v5, 0x10u, 1);
  }
  v5 = *(this + 9);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v5, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&v5, 0x10u, 1);
  }
  v5 = *(this + 10);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v5, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&v5, 0x10u, 1);
  }
  v5 = *(this + 11);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v5, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&v5, 0x10u, 1);
  }
  if ( *((_BYTE *)this + 24) )
    BitStream_WriteBit1(v2);
  else
    BitStream_WriteBit0(v2);
  LOBYTE(a2) = *((_BYTE *)this + 1);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *((_BYTE *)this + 2);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  if ( *((_BYTE *)this + 28) )
    return BitStream_WriteBit1(v2);
  else
    return BitStream_WriteBit0(v2);
}

//----- (657C67A0) --------------------------------------------------------
char *__thiscall sub_657C67A0(int this, char *a2)
{
  int v3; // ebx
  char *result; // eax
  int v5; // edi
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  ItemStructA_write((unsigned __int16 *)this, a2);
  v3 = (*(_DWORD *)(this + 40) - *(_DWORD *)(this + 36)) / 36;
  v6[0] = v3;
  result = BitStream_WriteBitsCompressed(a2, v6, 8u, 1);
  if ( (_BYTE)v3 )
  {
    v5 = 0;
    v3 = (unsigned __int8)v3;
    do
    {
      result = (char *)sub_657C6650(v5 + *(_DWORD *)(this + 36), a2);
      v5 += 36;
      --v3;
    }
    while ( v3 );
  }
  return result;
}
// 657C6650: using guessed type int __thiscall sub_657C6650(_DWORD, _DWORD);

//----- (657C68F0) --------------------------------------------------------
char *__thiscall sub_657C68F0(_DWORD *this, char *a2)
{
  int v3; // ebx
  char *result; // eax
  int v5; // edi
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 44;
  v6[0] = (char)(*((_BYTE *)this + 8) - *((_BYTE *)this + 4)) / 44;
  result = BitStream_WriteBitsCompressed(a2, v6, 8u, 1);
  if ( (_BYTE)v3 )
  {
    v5 = 0;
    v3 = (unsigned __int8)v3;
    do
    {
      result = (char *)sub_657C6810(v5 + *(this + 1), a2);
      v5 += 44;
      --v3;
    }
    while ( v3 );
  }
  return result;
}
// 657C6810: using guessed type int __thiscall sub_657C6810(_DWORD, _DWORD);

//----- (657C6A40) --------------------------------------------------------
int __thiscall sub_657C6A40(char *this, int a2)
{
  int v3; // edi
  int result; // eax

  v3 = 6;
  do
  {
    result = sub_657C69C0(this, a2);
    this += 16;
    --v3;
  }
  while ( v3 );
  return result;
}
// 657C69C0: using guessed type int __thiscall sub_657C69C0(_DWORD, _DWORD);

//----- (657C6A70) --------------------------------------------------------
char *__thiscall sub_657C6A70(char *this, char *a2)
{
  char *v2; // edi
  int v5; // [esp+8h] [ebp-8h] BYREF
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = a2;
  v6[0] = *this;
  BitStream_WriteBitsCompressed(a2, v6, 8u, 1);
  LOBYTE(a2) = *(this + 1);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  v5 = *((unsigned __int16 *)this + 1);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v5, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&v5, 0x10u, 1);
  }
  if ( *(this + 4) )
    BitStream_WriteBit1(v2);
  else
    BitStream_WriteBit0(v2);
  LOBYTE(a2) = *(this + 5);
  return BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
}

//----- (657C6B20) --------------------------------------------------------
char *__thiscall sub_657C6B20(char *this, char *a2)
{
  char *v2; // edi
  int v5; // [esp+8h] [ebp-8h] BYREF
  char v6[4]; // [esp+Ch] [ebp-4h] BYREF

  v2 = a2;
  v6[0] = *this;
  BitStream_WriteBitsCompressed(a2, v6, 8u, 1);
  LOBYTE(a2) = *(this + 1);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  v5 = *((unsigned __int16 *)this + 1);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v5, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&v5, 0x10u, 1);
  }
  if ( *(this + 4) )
    return BitStream_WriteBit1(v2);
  else
    return BitStream_WriteBit0(v2);
}

//----- (657C6BC0) --------------------------------------------------------
char __thiscall Packet_ID_AC_write(int this)
{
  char result; // al
  char v3[4]; // [esp+4h] [ebp-4h] BYREF

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    v3[0] = *(_BYTE *)(this + 1076);
    BitStream_WriteBitsCompressed((char *)(this + 12), v3, 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 0:
      case 0x15:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1112));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1148));
        goto LABEL_4;
      case 1:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1112));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1149));
        sub_659601C0((_DWORD *)(this + 1152), (char *)(this + 12));
        goto LABEL_7;
      case 2:
      case 0x17:
        ItemStructA_write((unsigned __int16 *)(this + 1080), (char *)(this + 12));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1112));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1148));
LABEL_4:
        sub_657C6430((unsigned __int16 *)(this + 1116), (char *)(this + 12));
        return 1;
      case 3:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1112));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1149));
        sub_657C67A0(this + 1168, (char *)(this + 12));
        sub_657C6A40((char *)(this + 1260), this + 12);
        return 1;
      case 5:
        sub_657C68F0((_DWORD *)(this + 1216), (char *)(this + 12));
        return 1;
      case 6:
      case 0x1A:
        goto LABEL_11;
      case 7:
      case 0x1B:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1236));
        BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1244));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1357));
LABEL_11:
        ItemStructA_write((unsigned __int16 *)(this + 1080), (char *)(this + 12));
        return 1;
      case 8:
      case 0x1C:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1240));
        U16AndU32List_Write(this + 1248, (char *)(this + 12));
        return 1;
      case 0xA:
        sub_657C6A40((char *)(this + 1260), this + 12);
        BitStream_WriteBool((char *)this, *(_BYTE *)(this + 1356));
        return 1;
      case 0xB:
LABEL_7:
        sub_657C6A40((char *)(this + 1260), this + 12);
        return 1;
      case 0xC:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1112));
        sub_657C6A70((char *)(this + 1358), (char *)(this + 12));
        return 1;
      case 0xD:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1112));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1149));
        sub_6595BF30((_DWORD *)(this + 1364), (char *)(this + 12));
        return 1;
      case 0xE:
        BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1380));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1382));
        BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1244));
        return 1;
      case 0x12:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1112));
        sub_657C6B20((char *)(this + 1384), (char *)(this + 12));
        return 1;
      case 0x13:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1112));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1149));
        sub_6595A9C0((_DWORD *)(this + 1392), (char *)(this + 12));
        return 1;
      case 0x14:
        BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1408));
        BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1244));
        return 1;
      case 0x16:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1112));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1149));
        sub_659601C0((_DWORD *)(this + 1152), (char *)(this + 12));
        return 1;
      case 0x18:
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1112));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1149));
        sub_657C67A0(this + 1168, (char *)(this + 12));
        return 1;
      case 0x1D:
        BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1410));
        BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1244));
        goto LABEL_23;
      default:
LABEL_23:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (657C7670) --------------------------------------------------------
_DWORD *__thiscall Array12_EraseAndShift(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  _DWORD *v4; // edx
  _DWORD *result; // eax
  _DWORD *v6; // esi
  _DWORD *v7; // edi

  v4 = a4;
  result = a2;
  v6 = a3;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v7 = (_DWORD *)*(this + 2);
    if ( a4 != v7 )
    {
      do
      {
        *v6 = *v4;
        v6[1] = v4[1];
        v6[2] = v4[2];
        v4 += 3;
        v6 += 3;
      }
      while ( v4 != v7 );
    }
    *(this + 2) = v6;
  }
  return result;
}

//----- (657C79C0) --------------------------------------------------------
void __thiscall sub_657C79C0(void **this)
{
  if ( *(this + 1) )
    operator delete(*(this + 1));
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
}

//----- (657C7A30) --------------------------------------------------------
int __thiscall Packet_ID_AC_dtor(char *this)
{
  void *v2; // eax

  v2 = (void *)*((_DWORD *)this + 349);
  if ( v2 )
    operator delete(v2);
  *((_DWORD *)this + 349) = 0;
  *((_DWORD *)this + 350) = 0;
  *((_DWORD *)this + 351) = 0;
  if ( *((_DWORD *)this + 342) )
    operator delete(*((void **)this + 342));
  *((_DWORD *)this + 342) = 0;
  *((_DWORD *)this + 343) = 0;
  *((_DWORD *)this + 344) = 0;
  `eh vector destructor iterator'(this + 1260, 0x10u, 6, (void (__thiscall *)(void *))sub_657C79C0);
  LoginUI_SetPassword((int)(this + 1248));
  if ( *((_DWORD *)this + 305) )
    operator delete(*((void **)this + 305));
  *((_DWORD *)this + 305) = 0;
  *((_DWORD *)this + 306) = 0;
  *((_DWORD *)this + 307) = 0;
  if ( *((_DWORD *)this + 301) )
    operator delete(*((void **)this + 301));
  *((_DWORD *)this + 301) = 0;
  *((_DWORD *)this + 302) = 0;
  *((_DWORD *)this + 303) = 0;
  if ( *((_DWORD *)this + 289) )
    operator delete(*((void **)this + 289));
  *((_DWORD *)this + 289) = 0;
  *((_DWORD *)this + 290) = 0;
  *((_DWORD *)this + 291) = 0;
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 12));
}
// 65985B4A: using guessed type void __stdcall `eh vector destructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *));
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (657C7DC0) --------------------------------------------------------
char *__thiscall Packet_ID_MARKET_ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -100;
  *(_DWORD *)this = &off_659C9F68;
  *(this + 1089) = 0;
  *((_DWORD *)this + 273) = 0;
  *((_DWORD *)this + 274) = 0;
  *((_DWORD *)this + 275) = 0;
  *(this + 1105) = 0;
  *(this + 1106) = 0;
  *(this + 1104) = 0;
  *((_WORD *)this + 540) = 0;
  *((_WORD *)this + 543) = 0;
  *((_WORD *)this + 541) = 0;
  *((_WORD *)this + 542) = 0;
  *(this + 1088) = 100;
  *(_DWORD *)(this + 1107) = 0;
  *(this + 1116) = 0;
  *((_DWORD *)this + 282) = 0;
  *((_DWORD *)this + 281) = 0;
  *((_WORD *)this + 566) = 0;
  *((_WORD *)this + 567) = 10000;
  *((_WORD *)this + 568) = 0;
  *((_WORD *)this + 569) = 10000;
  *(this + 1140) = 1;
  *(this + 1141) = 0;
  *(this + 1142) = 0;
  *(this + 1143) = 1;
  *((_WORD *)this + 560) = 0;
  *(this + 1117) = 0;
  *(this + 1118) = 0;
  *(this + 1144) = 0;
  *((_DWORD *)this + 289) = 0;
  *((_DWORD *)this + 290) = 0;
  *((_DWORD *)this + 291) = 0;
  *((_WORD *)this + 584) = 0;
  *((_WORD *)this + 585) = 0;
  *((_WORD *)this + 586) = 0;
  *((_WORD *)this + 587) = 0;
  *(this + 1176) = 100;
  *(this + 1177) = 0;
  *((_DWORD *)this + 295) = 0;
  *((_DWORD *)this + 296) = 0;
  *((_DWORD *)this + 297) = 0;
  *(this + 1193) = 0;
  *(this + 1194) = 0;
  *(this + 1192) = 0;
  *(_DWORD *)(this + 1195) = 0;
  *((_DWORD *)this + 301) = 0;
  *((_DWORD *)this + 302) = 0;
  *((_DWORD *)this + 303) = 0;
  *((_DWORD *)this + 305) = 0;
  *((_DWORD *)this + 306) = 0;
  *((_DWORD *)this + 307) = 0;
  *(this + 1232) = 0;
  *((_DWORD *)this + 313) = LoginUI_GetPasswordPtr();
  *((_DWORD *)this + 314) = 0;
  `eh vector constructor iterator'(this + 1260, 0x10u, 6, sub_657C7D60, (void (__thiscall *)(void *))sub_657C79C0);
  sub_657C7970(this + 1260);
  *(this + 1358) = 0;
  *(this + 1359) = 0;
  *(this + 1362) = 1;
  *((_WORD *)this + 680) = 0;
  *(this + 1363) = 0;
  *((_DWORD *)this + 342) = 0;
  *((_DWORD *)this + 343) = 0;
  *((_DWORD *)this + 344) = 0;
  *(this + 1384) = 0;
  *(this + 1385) = 0;
  *(this + 1388) = 1;
  *((_WORD *)this + 693) = 0;
  *((_DWORD *)this + 349) = 0;
  *((_DWORD *)this + 350) = 0;
  *((_DWORD *)this + 351) = 0;
  *((_WORD *)this + 704) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *(this + 1112) = 0;
  *(this + 1148) = 0;
  *(this + 1149) = 0;
  *((_DWORD *)this + 309) = 0;
  *((_DWORD *)this + 310) = 0;
  *((_WORD *)this + 622) = 0;
  *((_WORD *)this + 690) = 0;
  *(this + 1382) = 0;
  *(this + 1356) = 0;
  *(this + 1357) = 0;
  *((_WORD *)this + 705) = 0;
  return this;
}
// 657C7970: using guessed type int __thiscall sub_657C7970(_DWORD);
// 65985BAD: using guessed type void __stdcall `eh vector constructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *), void (__thiscall *)(void *));
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659C9F68: using guessed type void *off_659C9F68;

//----- (657C8590) --------------------------------------------------------
char *__cdecl Array36_FillWithValue2(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 36 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0x24u);
  }
  return result;
}

//----- (657C85C0) --------------------------------------------------------
char *__cdecl sub_657C85C0(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 44 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0x2Cu);
  }
  return result;
}

//----- (657C8720) --------------------------------------------------------
char *__cdecl sub_657C8720(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 36 )
  {
    if ( result )
      qmemcpy(result, v3, 0x24u);
    v3 += 36;
  }
  return result;
}

//----- (657C8760) --------------------------------------------------------
char *__cdecl sub_657C8760(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 44 )
  {
    if ( result )
      qmemcpy(result, v3, 0x2Cu);
    v3 += 44;
  }
  return result;
}

//----- (657C87E0) --------------------------------------------------------
unsigned int __thiscall Packet_ID_MARKET_read_structB(char *this, unsigned int *a2)
{
  unsigned int v3; // eax
  unsigned int result; // eax
  int v5; // edx

  RakNet::BitStream::ReadCompressed(a2, this, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 4);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 8);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 12);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 16);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 18);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 20);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 22);
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *(this + 24) = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  RakNet::BitStream::ReadCompressed(a2, this + 1, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 2, 8u, 1);
  result = a2[2];
  if ( result + 1 <= *a2 )
  {
    v5 = 128 >> (result & 7);
    result >>= 3;
    *(this + 28) = ((unsigned __int8)v5 & *(_BYTE *)(result + a2[3])) != 0;
    ++a2[2];
  }
  return result;
}

//----- (657C8920) --------------------------------------------------------
bool __thiscall ItemStructAPlus_u32_u16_u32_read(char *this, unsigned int *a2)
{
  ItemStructA_Read(this, a2);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 32);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 36);
  return RakNet::BitStream::ReadCompressed_T_uint(a2, this + 40);
}

//----- (657C89A0) --------------------------------------------------------
bool __thiscall Packet_ID_MARKET_read_structC(char *this, unsigned int *a2)
{
  unsigned int v3; // eax

  RakNet::BitStream::ReadCompressed(a2, this, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 1, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 2);
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *(this + 4) = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  return RakNet::BitStream::ReadCompressed(a2, this + 5, 8u, 1);
}

//----- (657C8A10) --------------------------------------------------------
unsigned int __thiscall Packet_ID_MARKET_read_structC2(char *this, unsigned int *a2)
{
  unsigned int result; // eax
  int v4; // edx

  RakNet::BitStream::ReadCompressed(a2, this, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 1, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 2);
  result = a2[2];
  if ( result + 1 <= *a2 )
  {
    v4 = 128 >> (result & 7);
    result >>= 3;
    *(this + 4) = ((unsigned __int8)v4 & *(_BYTE *)(result + a2[3])) != 0;
    ++a2[2];
  }
  return result;
}

//----- (657C8B10) --------------------------------------------------------
char *__cdecl sub_657C8B10(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a2;
  result = a3;
  while ( v3 != a1 )
  {
    v3 -= 36;
    result -= 36;
    qmemcpy(result, v3, 0x24u);
  }
  return result;
}

//----- (657C8B40) --------------------------------------------------------
char *__cdecl sub_657C8B40(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a2;
  result = a3;
  while ( v3 != a1 )
  {
    v3 -= 44;
    result -= 44;
    qmemcpy(result, v3, 0x2Cu);
  }
  return result;
}

//----- (657C8BA0) --------------------------------------------------------
char *__usercall sub_657C8BA0@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x24u);
      --v4;
      result += 36;
    }
    while ( v4 );
  }
  return result;
}

//----- (657C8BD0) --------------------------------------------------------
char *__usercall sub_657C8BD0@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x2Cu);
      --v4;
      result += 44;
    }
    while ( v4 );
  }
  return result;
}

//----- (657C8DE0) --------------------------------------------------------
char *__stdcall sub_657C8DE0(char *a1, int a2, char *a3)
{
  sub_657C8BA0(a3, a1, a2, a3);
  return &a1[36 * a2];
}

//----- (657C8E20) --------------------------------------------------------
char *__stdcall sub_657C8E20(char *a1, int a2, char *a3)
{
  sub_657C8BD0(a3, a1, a2, a3);
  return &a1[44 * a2];
}

//----- (657C8F30) --------------------------------------------------------
char *__stdcall sub_657C8F30(char *a1, char *a2, char *a3)
{
  return sub_657C8720(a1, a2, a3);
}

//----- (657C8F60) --------------------------------------------------------
char *__stdcall sub_657C8F60(char *a1, char *a2, char *a3)
{
  return sub_657C8760(a1, a2, a3);
}

//----- (657C8FC0) --------------------------------------------------------
int __thiscall Vector36_InsertRange(int this, char *a2, unsigned int a3, char *a4)
{
  __int64 v5; // rax
  unsigned int v6; // edi
  int v7; // eax
  unsigned int v8; // edi
  void *v9; // eax
  char *v10; // ecx
  char *v11; // eax
  char *v12; // eax
  char *v13; // ecx
  int v14; // ecx
  int v15; // esi
  char *v16; // edi
  char *v18; // [esp-Ch] [ebp-60h]
  int v19; // [esp-8h] [ebp-5Ch]
  int v20[4]; // [esp+0h] [ebp-54h] BYREF
  char *v21; // [esp+10h] [ebp-44h]
  int v22; // [esp+14h] [ebp-40h]
  void *v23; // [esp+18h] [ebp-3Ch]
  char v24[36]; // [esp+1Ch] [ebp-38h] BYREF
  int *v25; // [esp+44h] [ebp-10h]
  int v26; // [esp+50h] [ebp-4h]

  v25 = v20;
  v21 = a4;
  LODWORD(v5) = *(_DWORD *)(this + 4);
  if ( (_DWORD)v5 )
  {
    v5 = 954437177LL * (*(_DWORD *)(this + 12) - (int)v5);
    v6 = (SHIDWORD(v5) >> 3) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v23 = *(void **)(this + 8);
    v7 = ((int)v23 - *(_DWORD *)(this + 4)) / 36;
    if ( 119304647 - v7 < a3 )
      Vector_ThrowLengthError_v2(v20[0], v20[1]);
    if ( v6 >= v7 + a3 )
    {
      qmemcpy(v24, v21, sizeof(v24));
      if ( ((_BYTE *)v23 - a2) / 36 >= a3 )
      {
        v16 = (char *)v23 - 36 * a3;
        *(_DWORD *)(this + 8) = sub_657C8F30(v16, (char *)v23, (char *)v23);
        sub_657C8B10(a2, v16, (char *)v23);
        LODWORD(v5) = Array36_FillWithValue2(a2, &a2[36 * a3], v24);
      }
      else
      {
        sub_657C8F30(a2, (char *)v23, &a2[36 * a3]);
        v19 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 36;
        v18 = *(char **)(this + 8);
        v26 = 2;
        sub_657C8DE0(v18, v19, v24);
        *(_DWORD *)(this + 8) += 36 * a3;
        LODWORD(v5) = Array36_FillWithValue2(a2, (char *)(*(_DWORD *)(this + 8) - 36 * a3), v24);
      }
    }
    else
    {
      if ( 119304647 - (v6 >> 1) >= v6 )
        v8 = (v6 >> 1) + v6;
      else
        v8 = 0;
      if ( v8 < v7 + a3 )
        v8 = v7 + a3;
      v9 = SafeNew36Array_CheckOverflow(v8);
      v10 = *(char **)(this + 4);
      LOBYTE(v22) = 0;
      v23 = v9;
      v26 = 0;
      v11 = sub_657C8720(v10, a2, (char *)v9);
      v12 = sub_657C8DE0(v11, a3, v21);
      v13 = *(char **)(this + 8);
      LOBYTE(v22) = 0;
      sub_657C8720(a2, v13, v12);
      v14 = *(_DWORD *)(this + 4);
      v15 = (*(_DWORD *)(this + 8) - v14) / 36 + a3;
      if ( v14 )
        operator delete(*(void **)(this + 4));
      LODWORD(v5) = v23;
      *(_DWORD *)(this + 12) = (char *)v23 + 36 * v8;
      *(_DWORD *)(this + 8) = v5 + 36 * v15;
      *(_DWORD *)(this + 4) = v5;
    }
  }
  return v5;
}

//----- (657C9220) --------------------------------------------------------
char *__thiscall Vector44_InsertRange(int this, char *a2, unsigned int a3, char *a4)
{
  char *result; // eax
  int v6; // ecx
  unsigned int v7; // edi
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // edi
  void *Checked; // eax
  char *v12; // ecx
  char *v13; // eax
  char *v14; // eax
  char *v15; // ecx
  int v16; // ecx
  int v17; // esi
  char *v18; // esi
  char *v19; // edi
  char *v20; // eax
  char *v21; // [esp-Ch] [ebp-68h]
  int v22; // [esp-8h] [ebp-64h]
  char *v23; // [esp-4h] [ebp-60h]
  int v24[4]; // [esp+0h] [ebp-5Ch] BYREF
  char *v25; // [esp+10h] [ebp-4Ch]
  int v26; // [esp+14h] [ebp-48h]
  void *v27; // [esp+18h] [ebp-44h]
  char v28[44]; // [esp+1Ch] [ebp-40h] BYREF
  int *v29; // [esp+4Ch] [ebp-10h]
  int v30; // [esp+58h] [ebp-4h]

  v29 = v24;
  result = a4;
  v6 = *(_DWORD *)(this + 4);
  v25 = a4;
  if ( v6 )
  {
    result = (char *)(780903145 * (*(_DWORD *)(this + 12) - v6));
    v7 = (*(_DWORD *)(this + 12) - v6) / 44;
  }
  else
  {
    v7 = 0;
  }
  if ( a3 )
  {
    v27 = *(void **)(this + 8);
    v8 = ((int)v27 - v6) / 44;
    if ( 97612893 - v8 < a3 )
      Vector_ThrowLengthError_v3(v24[0], v24[1]);
    v9 = a3 + v8;
    if ( v7 >= v9 )
    {
      qmemcpy(v28, v25, sizeof(v28));
      if ( ((_BYTE *)v27 - a2) / 44 >= a3 )
      {
        v19 = (char *)v27 - 44 * a3;
        v20 = sub_657C8F60(v19, (char *)v27, (char *)v27);
        v23 = (char *)v27;
        *(_DWORD *)(this + 8) = v20;
        sub_657C8B40(a2, v19, v23);
        return sub_657C85C0(a2, &a2[44 * a3], v28);
      }
      else
      {
        sub_657C8F60(a2, (char *)v27, &a2[44 * a3]);
        v22 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 44;
        v21 = *(char **)(this + 8);
        v30 = 2;
        sub_657C8E20(v21, v22, v28);
        *(_DWORD *)(this + 8) += 44 * a3;
        return sub_657C85C0(a2, (char *)(*(_DWORD *)(this + 8) - 44 * a3), v28);
      }
    }
    else
    {
      if ( 97612893 - (v7 >> 1) >= v7 )
        v10 = (v7 >> 1) + v7;
      else
        v10 = 0;
      if ( v10 < v9 )
        v10 = v9;
      Checked = Vector44_AllocateChecked(v10);
      v12 = *(char **)(this + 4);
      LOBYTE(v26) = 0;
      v27 = Checked;
      v30 = 0;
      v13 = sub_657C8760(v12, a2, (char *)Checked);
      v14 = sub_657C8E20(v13, a3, v25);
      v15 = *(char **)(this + 8);
      LOBYTE(v26) = 0;
      sub_657C8760(a2, v15, v14);
      v16 = *(_DWORD *)(this + 4);
      v17 = (*(_DWORD *)(this + 8) - v16) / 44 + a3;
      if ( v16 )
        operator delete(*(void **)(this + 4));
      result = (char *)v27;
      v18 = (char *)v27 + 44 * v17;
      *(_DWORD *)(this + 12) = (char *)v27 + 44 * v10;
      *(_DWORD *)(this + 8) = v18;
      *(_DWORD *)(this + 4) = result;
    }
  }
  return result;
}

//----- (657C96F0) --------------------------------------------------------
_DWORD *__thiscall sub_657C96F0(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 36 )
    v6 = (int)&a3[-v5] / 36;
  else
    v6 = 0;
  Vector36_InsertRange((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 36 * v6;
  return a2;
}

//----- (657C9760) --------------------------------------------------------
_DWORD *__thiscall sub_657C9760(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 44 )
    v6 = (int)&a3[-v5] / 44;
  else
    v6 = 0;
  Vector44_InsertRange((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 44 * v6;
  return a2;
}

//----- (657C9850) --------------------------------------------------------
char *__thiscall sub_657C9850(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 36;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 36 >= v4 )
    return (char *)sub_657C96F0(this, &a2, v5, a2);
  result = sub_657C8BA0(a2, v5, 1, a2);
  *(this + 2) = v5 + 36;
  return result;
}

//----- (657C98E0) --------------------------------------------------------
char *__thiscall sub_657C98E0(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 44;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 44 >= v4 )
    return (char *)sub_657C9760(this, &a2, v5, a2);
  result = sub_657C8BD0(a2, v5, 1, a2);
  *(this + 2) = v5 + 44;
  return result;
}

//----- (657C9970) --------------------------------------------------------
int __thiscall sub_657C9970(_DWORD *this, int a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  int v5; // edi
  int result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 12;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - v3) / 12 >= v4 )
    return sub_657C97C0(this, &a2, v5, a2);
  result = sub_657C8C00(v5, 1, a2, this, a2, 0);
  *(this + 2) = v5 + 12;
  return result;
}
// 657C8C00: using guessed type int __cdecl sub_657C8C00(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 657C97C0: using guessed type int __thiscall sub_657C97C0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (657C9CE0) --------------------------------------------------------
char *__thiscall Packet_ID_MARKET_read_listC(char *this, unsigned int *a2)
{
  char *result; // eax
  unsigned __int8 v4; // bl
  char **v5; // edi
  char v6[4]; // [esp+Ch] [ebp-40h] BYREF
  char v7[4]; // [esp+10h] [ebp-3Ch] BYREF
  char v8[4]; // [esp+14h] [ebp-38h] BYREF
  char v9[4]; // [esp+18h] [ebp-34h] BYREF
  char v10[7]; // [esp+1Ch] [ebp-30h] BYREF
  unsigned __int8 v11; // [esp+23h] [ebp-29h] BYREF
  int v12; // [esp+24h] [ebp-28h] BYREF
  _BYTE v13[20]; // [esp+28h] [ebp-24h] BYREF
  int v14; // [esp+3Ch] [ebp-10h] BYREF
  __int16 v15; // [esp+40h] [ebp-Ch] BYREF
  __int16 v16; // [esp+42h] [ebp-Ah] BYREF
  int v17; // [esp+44h] [ebp-8h] BYREF

  ItemStructA_Read(this, a2);
  v11 = 0;
  RakNet::BitStream::ReadCompressed(a2, (char *)&v11, 8u, 1);
  result = 0;
  v4 = 0;
  v12 = 0;
  v13[0] = 0;
  v14 = 0;
  v15 = 1;
  v16 = 0;
  v17 = 0;
  if ( v11 )
  {
    v5 = (char **)(this + 32);
    do
    {
      v12 = 0;
      v13[0] = 0;
      v14 = 0;
      v15 = 1;
      v16 = 0;
      v17 = 0;
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v8, 0x20u, 1) )
          ByteSwapCopy((int)v8, (int)&v12, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v12, 0x20u, 1);
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v6, 0x20u, 1) )
          ByteSwapCopy((int)v6, (int)&v14, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v14, 0x20u, 1);
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v10, 0x10u, 1) )
          ByteSwapCopy((int)v10, (int)&v15, 2u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v15, 0x10u, 1);
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v9, 0x10u, 1) )
          ByteSwapCopy((int)v9, (int)&v16, 2u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v16, 0x10u, 1);
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v7, 0x20u, 1) )
          ByteSwapCopy((int)v7, (int)&v17, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v17, 0x20u, 1);
      }
      (*(void (__thiscall **)(int, _BYTE *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
        g_LTClient,
        v13,
        2048,
        a2);
      result = sub_657C9850(v5, (char *)&v12);
      ++v4;
    }
    while ( v4 < v11 );
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657C9EC0) --------------------------------------------------------
unsigned __int8 __thiscall Packet_ID_MARKET_read_listB(char **this, unsigned int *a2)
{
  unsigned __int8 result; // al
  char v4[4]; // [esp+Ch] [ebp-40h] BYREF
  char v5[4]; // [esp+10h] [ebp-3Ch] BYREF
  char v6[6]; // [esp+14h] [ebp-38h] BYREF
  unsigned __int8 i; // [esp+1Ah] [ebp-32h]
  unsigned __int8 v8; // [esp+1Bh] [ebp-31h] BYREF
  __int16 v9; // [esp+1Ch] [ebp-30h] BYREF
  __int16 v10; // [esp+1Eh] [ebp-2Eh]
  __int16 v11; // [esp+20h] [ebp-2Ch]
  __int16 v12; // [esp+22h] [ebp-2Ah]
  char v13; // [esp+24h] [ebp-28h]
  char v14; // [esp+25h] [ebp-27h]
  int v15; // [esp+28h] [ebp-24h]
  int v16; // [esp+2Ch] [ebp-20h]
  int v17; // [esp+30h] [ebp-1Ch]
  char v18; // [esp+34h] [ebp-18h]
  char v19; // [esp+35h] [ebp-17h]
  char v20; // [esp+36h] [ebp-16h]
  int v21; // [esp+37h] [ebp-15h]
  int v22; // [esp+3Ch] [ebp-10h] BYREF
  char v23[4]; // [esp+40h] [ebp-Ch] BYREF
  int v24; // [esp+44h] [ebp-8h] BYREF

  v8 = 0;
  RakNet::BitStream::ReadCompressed(a2, (char *)&v8, 8u, 1);
  result = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v13 = 100;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v19 = 0;
  v20 = 0;
  v18 = 0;
  v21 = 0;
  v22 = 0;
  *(_WORD *)v23 = 0;
  v24 = 0;
  for ( i = 0; result < v8; i = result )
  {
    v10 = 0;
    *(_WORD *)v23 = 0;
    v9 = 0;
    v11 = 0;
    v12 = 0;
    v13 = 100;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    v17 = 0;
    v19 = 0;
    v20 = 0;
    v18 = 0;
    v21 = 0;
    v22 = 0;
    v24 = 0;
    ItemStructA_Read((char *)&v9, a2);
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(a2, v4, 0x20u, 1) )
        ByteSwapCopy((int)v4, (int)&v22, 4u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(a2, (char *)&v22, 0x20u, 1);
    }
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(a2, v6, 0x10u, 1) )
        ByteSwapCopy((int)v6, (int)v23, 2u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(a2, v23, 0x10u, 1);
    }
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(a2, v5, 0x20u, 1) )
        ByteSwapCopy((int)v5, (int)&v24, 4u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(a2, (char *)&v24, 0x20u, 1);
    }
    sub_657C98E0(this, (char *)&v9);
    result = i + 1;
  }
  return result;
}

//----- (657CA060) --------------------------------------------------------
unsigned int __thiscall Packet_ID_MARKET_read_block(_DWORD *this, unsigned int *a2)
{
  unsigned int result; // eax
  _DWORD *v3; // esi
  int v4; // ebx
  unsigned int i; // [esp+Ch] [ebp-1Ch]
  char v7[4]; // [esp+10h] [ebp-18h] BYREF
  unsigned int v8; // [esp+14h] [ebp-14h] BYREF
  __int16 v9; // [esp+18h] [ebp-10h] BYREF
  _DWORD v10[2]; // [esp+1Ah] [ebp-Eh] BYREF
  __int16 v11; // [esp+22h] [ebp-6h]

  v8 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v8);
  result = 0;
  v9 = 0;
  v10[0] = 0;
  v10[1] = 0;
  v11 = 0;
  for ( i = 0; result < v8; i = result )
  {
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(a2, v7, 0x10u, 1) )
        ByteSwapCopy((int)v7, (int)&v9, 2u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(a2, (char *)&v9, 0x10u, 1);
    }
    v3 = v10;
    v4 = 5;
    do
    {
      BitStream_ReadBits(a2, v3, 9u, 1);
      v3 = (_DWORD *)((char *)v3 + 2);
      --v4;
    }
    while ( v4 );
    sub_657C9970(this, (int)&v9);
    result = i + 1;
  }
  return result;
}

//----- (657CA150) --------------------------------------------------------
unsigned int __thiscall Packet_ID_MARKET_read_block6(_DWORD *this, unsigned int *a2)
{
  int v3; // edi
  unsigned int result; // eax

  v3 = 6;
  do
  {
    result = Packet_ID_MARKET_read_block(this, a2);
    this += 4;
    --v3;
  }
  while ( v3 );
  return result;
}

//----- (657CA180) --------------------------------------------------------
char __thiscall Packet_ID_MARKET_read(int this, int a2)
{
  char result; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 0:
      case 0x15:
        goto LABEL_4;
      case 1:
        Read_u8c((unsigned int *)this, (char *)(this + 1112));
        Read_u8c((unsigned int *)this, (char *)(this + 1149));
        Packet_ID_MARKET_read_listA((char **)(this + 1152), (unsigned int *)(this + 12));
        goto LABEL_7;
      case 2:
        ItemStructA_Read((char *)(this + 1080), (unsigned int *)(this + 12));
LABEL_4:
        Read_u8c((unsigned int *)this, (char *)(this + 1112));
        Read_u8c((unsigned int *)this, (char *)(this + 1148));
        goto LABEL_5;
      case 3:
        Read_u8c((unsigned int *)this, (char *)(this + 1112));
        Read_u8c((unsigned int *)this, (char *)(this + 1149));
        Packet_ID_MARKET_read_listC((char *)(this + 1168), (unsigned int *)(this + 12));
        Packet_ID_MARKET_read_block6((_DWORD *)(this + 1260), (unsigned int *)(this + 12));
        return 1;
      case 5:
        Packet_ID_MARKET_read_listB((char **)(this + 1216), (unsigned int *)(this + 12));
        return 1;
      case 6:
      case 0x1A:
        goto LABEL_11;
      case 7:
      case 0x1B:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1236));
        RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1244));
        Read_u8c((unsigned int *)this, (char *)(this + 1357));
LABEL_11:
        ItemStructA_Read((char *)(this + 1080), (unsigned int *)(this + 12));
        return 1;
      case 8:
      case 0x1C:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1240));
        Read_u32c_list_u16count((int *)(this + 1248), (unsigned int *)(this + 12));
        return 1;
      case 0xA:
        Packet_ID_MARKET_read_block6((_DWORD *)(this + 1260), (unsigned int *)(this + 12));
        VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1356));
        return 1;
      case 0xB:
LABEL_7:
        Packet_ID_MARKET_read_block6((_DWORD *)(this + 1260), (unsigned int *)(this + 12));
        return 1;
      case 0xC:
        Read_u8c((unsigned int *)this, (char *)(this + 1112));
        Packet_ID_MARKET_read_structC((char *)(this + 1358), (unsigned int *)(this + 12));
        return 1;
      case 0xD:
        Read_u8c((unsigned int *)this, (char *)(this + 1112));
        Read_u8c((unsigned int *)this, (char *)(this + 1149));
        Packet_ID_MARKET_read_listD((int *)(this + 1364), (unsigned int *)(this + 12));
        return 1;
      case 0xE:
        RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1380));
        Read_u8c((unsigned int *)this, (char *)(this + 1382));
        goto LABEL_24;
      case 0x12:
        Read_u8c((unsigned int *)this, (char *)(this + 1112));
        Packet_ID_MARKET_read_structC2((char *)(this + 1384), (unsigned int *)(this + 12));
        return 1;
      case 0x13:
        Read_u8c((unsigned int *)this, (char *)(this + 1112));
        Read_u8c((unsigned int *)this, (char *)(this + 1149));
        Packet_ID_MARKET_read_listE((char **)(this + 1392), (unsigned int *)(this + 12));
        return 1;
      case 0x14:
        RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1408));
        goto LABEL_24;
      case 0x16:
        Read_u8c((unsigned int *)this, (char *)(this + 1112));
        Read_u8c((unsigned int *)this, (char *)(this + 1149));
        Packet_ID_MARKET_read_listA((char **)(this + 1152), (unsigned int *)(this + 12));
        return 1;
      case 0x17:
        ItemStructA_Read((char *)(this + 1080), (unsigned int *)(this + 12));
        Read_u8c((unsigned int *)this, (char *)(this + 1112));
        Read_u8c((unsigned int *)this, (char *)(this + 1148));
LABEL_5:
        Packet_ID_MARKET_read_structB((char *)(this + 1116), (unsigned int *)(this + 12));
        return 1;
      case 0x18:
        Read_u8c((unsigned int *)this, (char *)(this + 1112));
        Read_u8c((unsigned int *)this, (char *)(this + 1149));
        Packet_ID_MARKET_read_listC((char *)(this + 1168), (unsigned int *)(this + 12));
        return 1;
      case 0x1D:
        RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1410));
LABEL_24:
        RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1244));
        break;
      default:
        return 1;
    }
    return 1;
  }
  return result;
}

//----- (657CC060) --------------------------------------------------------
LONG __thiscall sub_657CC060(int this, char *Destination, WorldLoginReturnAddrPacked Count)
{
  return Ui_ReadFieldTextById((void *)(this + 4), 11219, Destination, Count.flag_pad_ip0);
}

//----- (657CC080) --------------------------------------------------------
void __thiscall sub_657CC080(int this)
{
  int v2; // ecx

  v2 = *(_DWORD *)(this + 6368);
  *(_BYTE *)(this + 6432) = 0;
  *(_BYTE *)(this + 6433) = 0;
  *(_BYTE *)(this + 6434) = 0;
  *(_DWORD *)(this + 6424) = 0;
  UiText_SetValueIfChanged(v2, "Trading with ...", 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6380), "0", 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6384), "0", 0, 0);
  *(_DWORD *)(this + 6400) = 0;
  *(_BYTE *)(this + 6404) = 0;
}

//----- (657CC0F0) --------------------------------------------------------
void __thiscall sub_657CC0F0(int *this)
{
  UiText_SetValueIfChanged(*(this + 1595), "0", 0, 0);
  *(this + 1606) = 0;
}

//----- (657CC400) --------------------------------------------------------
void __thiscall sub_657CC400(_DWORD *this)
{
  int i; // edi
  int v3; // eax
  bool v4; // zf
  void (__thiscall ****v5)(_DWORD, int); // eax
  void (__thiscall ***v6)(_DWORD, int); // eax
  int *v7; // ecx

  for ( i = 0; i < *(this + 1612); ++i )
  {
    v3 = *(this + 1611);
    v4 = *(_DWORD *)(v3 + 4 * i) == 0;
    v5 = (void (__thiscall ****)(_DWORD, int))(v3 + 4 * i);
    if ( !v4 )
    {
      v6 = *v5;
      if ( v6 )
        (**v6)(v6, 1);
    }
  }
  ItemList_RemoveAt2(this + 1610, 0);
  v7 = (int *)*(this + 1599);
  *(this + 1607) = 0;
  Slider_SetTickCount(v7, 0);
  JUMPOUT(0x65772780);
}
// 657CC464: control flows out of bounds to 65772780

//----- (657CC6F0) --------------------------------------------------------
int __thiscall sub_657CC6F0(int this)
{
  int *v2; // eax
  int v3; // esi
  int *v5; // [esp-8h] [ebp-28h]
  int *v6[2]; // [esp+Ch] [ebp-14h] BYREF
  int v7; // [esp+1Ch] [ebp-4h]

  v6[1] = (int *)this;
  v2 = *(int **)(this + 1144);
  v3 = this + 1140;
  v5 = (int *)*v2;
  v7 = 0;
  RBTree_EraseRange((int ***)(this + 1140), v6, v5, v2);
  operator delete(*(void **)(v3 + 4));
  *(_DWORD *)(v3 + 4) = 0;
  *(_DWORD *)(v3 + 8) = 0;
  v7 = -1;
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer(this + 12);
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (657CC830) --------------------------------------------------------
int __thiscall Packet_ID_P2P_CtorWrapper(void *this)
{
  int vars0; // [esp+0h] [ebp+0h] BYREF

  return Packet_ID_PLAYER2PLAYER_ctor((int)this, (int)&vars0);
}

//----- (657CC840) --------------------------------------------------------
int __usercall Packet_ID_PLAYER2PLAYER_ctor@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  *(_DWORD *)(a2 - 16) = a1;
  *(_DWORD *)a1 = &vtbl_Packet_Unknown0;
  *(_BYTE *)(a1 + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(a1 + 12));
  *(_DWORD *)(a1 + 1056) = 0;
  *(_DWORD *)(a1 + 1060) = 0;
  *(_BYTE *)(a1 + 1064) = -86;
  *(_DWORD *)(a2 - 4) = 0;
  *(_DWORD *)a1 = &Packet_ID_PLAYER2PLAYER_vftable;
  ItemsAddedEntry_Init((char *)(a1 + 1108));
  *(_DWORD *)(a1 + 1072) = 0;
  *(_DWORD *)(a1 + 1076) = 0;
  *(_BYTE *)(a1 + 1080) = 0;
  *(_BYTE *)(a1 + 1081) = 0;
  *(_DWORD *)(a1 + 1104) = 0;
  *(_DWORD *)(a1 + 1152) = 0;
  *(_BYTE *)(a1 + 1156) = 0;
  return a1;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CA0A0: using guessed type _UNKNOWN *Packet_ID_PLAYER2PLAYER_vftable;

//----- (657CC8E0) --------------------------------------------------------
char __thiscall Packet_ID_PLAYER2PLAYER_read(int this, int a2)
{
  char result; // al
  unsigned int *v4; // edi

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    v4 = (unsigned int *)(this + 12);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1076));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1080), 8u, 1);
    switch ( *(_BYTE *)(this + 1080) )
    {
      case 1:
        if ( !(unsigned __int8)VariableSizedPacket::DecodeString((char *)this, this + 1081) )
          goto LABEL_4;
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1104));
        result = 1;
        break;
      case 2:
      case 3:
      case 4:
      case 5:
        if ( (unsigned __int8)VariableSizedPacket::DecodeString((char *)this, this + 1081) )
          goto LABEL_10;
LABEL_4:
        result = 0;
        break;
      case 6:
      case 7:
      case 8:
      case 9:
        ItemsAddedEntry_Read((ItemsAddedEntry *)(this + 1108), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 0xA:
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1152));
        result = 1;
        break;
      case 0xD:
        VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1156));
        goto LABEL_10;
      default:
LABEL_10:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (657CCA10) --------------------------------------------------------
char __thiscall Packet_ID_PLAYER2PLAYER_write(int this)
{
  char result; // al
  char v3[4]; // [esp+4h] [ebp-4h] BYREF

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1076));
    v3[0] = *(_BYTE *)(this + 1080);
    BitStream_WriteBitsCompressed((char *)(this + 12), v3, 8u, 1);
    switch ( *(_BYTE *)(this + 1080) )
    {
      case 1:
        BitStream_Write2048((char *)this, this + 1081);
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1104));
        result = 1;
        break;
      case 2:
      case 3:
      case 4:
      case 5:
        BitStream_Write2048((char *)this, this + 1081);
        result = 1;
        break;
      case 6:
      case 7:
      case 8:
      case 9:
        ItemsAddedEntry_Write((ItemsAddedEntry *)(this + 1108), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 0xA:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1152));
        result = 1;
        break;
      case 0xD:
        BitStream_WriteBool((char *)this, *(_BYTE *)(this + 1156));
        goto LABEL_8;
      default:
LABEL_8:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (657CD920) --------------------------------------------------------
int __thiscall TradeUI_CopyTradeData(int this, int a2)
{
  int result; // eax

  *(_WORD *)a2 = *(_WORD *)(this + 6196);
  ItemDataArray_Assign((int *)(a2 + 4), this + 6200);
  *(_DWORD *)(a2 + 20) = *(_DWORD *)(this + 6216);
  result = *(_DWORD *)(this + 6220);
  *(_DWORD *)(a2 + 24) = result;
  *(_DWORD *)(a2 + 28) = *(_DWORD *)(this + 6224);
  *(_BYTE *)(a2 + 32) = *(_BYTE *)(this + 6228);
  return result;
}

//----- (657CDDE0) --------------------------------------------------------
int __thiscall CharacterWindow_OnClose(int *this, char a2, char a3)
{
  int v4; // edi
  int v5; // ecx
  int v6; // ecx
  int *v7; // ecx
  int v8; // esi
  __int16 v10; // [esp+10h] [ebp-4E4h] BYREF
  void *v11; // [esp+18h] [ebp-4DCh]
  int v12; // [esp+1Ch] [ebp-4D8h]
  int v13; // [esp+20h] [ebp-4D4h]
  int v14; // [esp+24h] [ebp-4D0h]
  int v15; // [esp+28h] [ebp-4CCh]
  int v16; // [esp+2Ch] [ebp-4C8h]
  char v17; // [esp+30h] [ebp-4C4h]
  __int16 v18; // [esp+34h] [ebp-4C0h] BYREF
  void *v19; // [esp+3Ch] [ebp-4B8h]
  int v20; // [esp+40h] [ebp-4B4h]
  int v21; // [esp+44h] [ebp-4B0h]
  int v22; // [esp+48h] [ebp-4ACh]
  int v23; // [esp+4Ch] [ebp-4A8h]
  int v24; // [esp+50h] [ebp-4A4h]
  char v25; // [esp+54h] [ebp-4A0h]
  _DWORD v26[270]; // [esp+5Ch] [ebp-498h] BYREF
  char v27; // [esp+494h] [ebp-60h]
  char v28; // [esp+4E0h] [ebp-14h]
  int v29; // [esp+4F0h] [ebp-4h]

  if ( a3 && *(this + 1600) )
  {
    Packet_ID_P2P_CtorWrapper(v26);
    v29 = 0;
    v26[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    v26[269] = *(this + 1600);
    v27 = 13;
    v28 = 0;
    LTClient_SendPacket_BuildIfNeeded(v26, 2, 1, 3, 0);
    v29 = -1;
    sub_657CC6F0((int)v26);
  }
  if ( a2 )
  {
    v4 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v18 = 0;
    v25 = 0;
    v22 = 0;
    v23 = 0;
    v24 = 0;
    v5 = *(this + 1593);
    v29 = 1;
    TradeUI_CopyTradeData(v5, (int)&v18);
    sub_6593FE90((int ****)v4, &v18, 32000);
    *(_BYTE *)(v4 + 32) = 1;
    v29 = -1;
    if ( v19 )
    {
      ItemVector_DestroyRange((int)v19, v20);
      operator delete(v19);
    }
  }
  v11 = 0;
  v12 = 0;
  v13 = 0;
  v10 = 0;
  v17 = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v6 = *(this + 1594);
  v29 = 2;
  Inventory_ProcessItemSlots(v6, &v10, 0, 1);
  Inventory_ProcessItemSlots(*(this + 1593), &v10, 0, 1);
  sub_657CC080((int)this);
  sub_657CC400(this);
  v7 = (int *)dword_65ABF708;
  if ( *(int **)(dword_65ABF708 + 24) == this )
  {
    *(_DWORD *)(dword_65ABF708 + 20) = 0;
    v7 = (int *)dword_65ABF708;
  }
  sub_65808DC0(v7);
  SharedMem_WriteU8_std(0x98u, 0);
  v8 = CWindow_HandleCommand(this, 4, 0, 0);
  v29 = -1;
  if ( v11 )
  {
    ItemVector_DestroyRange((int)v11, v12);
    operator delete(v11);
  }
  return v8;
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (657CEE40) --------------------------------------------------------
int __stdcall sub_657CEE40(int a1, int a2)
{
  return sub_657CEC60(a1, a2, &off_65A560A4);
}
// 657CEC60: using guessed type int __stdcall sub_657CEC60(_DWORD, _DWORD, _DWORD);
// 65A560A4: using guessed type void *off_65A560A4;

//----- (657CEE60) --------------------------------------------------------
BOOL __stdcall sub_657CEE60(int a1)
{
  return sub_657CEBE0(a1, &off_65A560A4, 0) != 0;
}
// 657CEBE0: using guessed type int __stdcall sub_657CEBE0(_DWORD, _DWORD, _DWORD);
// 65A560A4: using guessed type void *off_65A560A4;

//----- (657CF3A0) --------------------------------------------------------
int __thiscall ListWindow_PopulateFromDataSource(int *this, int a2, int a3)
{
  int v4; // esi
  int i; // ebx
  int v7; // eax
  bool v8; // zf
  int (__thiscall *****v9)(_DWORD, int); // eax
  int (__thiscall ****v10)(_DWORD, int); // esi
  unsigned int v11; // eax
  int v12; // ecx
  int *v13; // ebx
  _DWORD *v14; // eax
  _DWORD *v15; // esi
  int v16; // ebx
  const char *v17; // eax
  int v18; // eax
  int *v19; // ecx
  _DWORD *v20; // [esp+4h] [ebp-8h] BYREF
  unsigned int j; // [esp+8h] [ebp-4h]
  int v22; // [esp+14h] [ebp+8h]

  if ( !a2 || !a3 )
    return 0;
  *(this + 1592) = a2;
  *(this + 1593) = a3;
  v4 = (*(_DWORD *)(a3 + 124) - *(_DWORD *)(a3 + 120)) >> 2;
  v22 = v4;
  if ( v4 <= 0 )
    return 0;
  for ( i = 0; i < *(this + 1598); ++i )
  {
    v7 = *(this + 1597);
    v8 = *(_DWORD *)(v7 + 4 * i) == 0;
    v9 = (int (__thiscall *****)(_DWORD, int))(v7 + 4 * i);
    if ( !v8 )
    {
      v10 = *v9;
      if ( *v9 )
      {
        if ( *v10 )
          VTable_CallDtor(*v10);
        operator delete(v10);
      }
      v4 = v22;
      *(_DWORD *)(*(this + 1597) + 4 * i) = 0;
    }
  }
  sub_657CEE60(0);
  v11 = 0;
  *(this + 1601) = -1;
  for ( j = 0; (int)v11 < v4; j = v11 )
  {
    v12 = *(_DWORD *)(a3 + 120);
    if ( v11 < (*(_DWORD *)(a3 + 124) - v12) >> 2 )
    {
      v13 = *(int **)(v12 + 4 * v11);
      if ( v13 )
      {
        if ( *v13 )
        {
          v14 = operator new(8u);
          v15 = 0;
          if ( v14 )
          {
            *v14 = 0;
            v14[1] = 0;
            v15 = v14;
          }
          v20 = v15;
          if ( v15 )
          {
            sub_657CEE40(*(this + 1598), (int)&v20);
            v15[1] = v13;
            v16 = *v13;
            if ( v16 )
              v17 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v16);
            else
              v17 = byte_659A8B98;
            *v15 = UiWidget_Create(this, 0, (int)v17, 256, 190, 0, 0, 1, (int)&unk_65A5C5EC, 2, 0, 0, 0);
          }
          v4 = v22;
          v11 = j;
        }
      }
    }
    ++v11;
  }
  v18 = *(this + 1598) - 10;
  if ( v18 < 0 )
    v18 = 0;
  Slider_SetTickCount((int *)*(this + 1594), v18);
  v19 = (int *)*(this + 1594);
  *(this + 1595) = 0;
  Slider_ResetToMin(v19);
  return 1;
}

//----- (657CFBD0) --------------------------------------------------------
int __thiscall ListWindow_PopulateFromDataSource_Alt(int *this, int a2, int a3)
{
  int v4; // esi
  int i; // ebx
  int v7; // eax
  bool v8; // zf
  int (__thiscall *****v9)(_DWORD, int); // eax
  int (__thiscall ****v10)(_DWORD, int); // esi
  unsigned int v11; // eax
  int v12; // ecx
  int *v13; // ebx
  _DWORD *v14; // eax
  _DWORD *v15; // esi
  int v16; // ebx
  const char *v17; // eax
  int v18; // eax
  int *v19; // ecx
  _DWORD *v20; // [esp+4h] [ebp-8h] BYREF
  unsigned int j; // [esp+8h] [ebp-4h]
  int v22; // [esp+14h] [ebp+8h]

  if ( !a2 || !a3 )
    return 0;
  *(this + 1592) = a2;
  *(this + 1593) = a3;
  v4 = (*(_DWORD *)(a3 + 124) - *(_DWORD *)(a3 + 120)) >> 2;
  v22 = v4;
  if ( v4 <= 0 )
    return 0;
  for ( i = 0; i < *(this + 1598); ++i )
  {
    v7 = *(this + 1597);
    v8 = *(_DWORD *)(v7 + 4 * i) == 0;
    v9 = (int (__thiscall *****)(_DWORD, int))(v7 + 4 * i);
    if ( !v8 )
    {
      v10 = *v9;
      if ( *v9 )
      {
        if ( *v10 )
          VTable_CallDtor(*v10);
        operator delete(v10);
      }
      v4 = v22;
      *(_DWORD *)(*(this + 1597) + 4 * i) = 0;
    }
  }
  sub_657CEE60(0);
  v11 = 0;
  *(this + 1601) = -1;
  for ( j = 0; (int)v11 < v4; j = v11 )
  {
    v12 = *(_DWORD *)(a3 + 120);
    if ( v11 < (*(_DWORD *)(a3 + 124) - v12) >> 2 )
    {
      v13 = *(int **)(v12 + 4 * v11);
      if ( v13 )
      {
        if ( *v13 )
        {
          v14 = operator new(8u);
          v15 = 0;
          if ( v14 )
          {
            *v14 = 0;
            v14[1] = 0;
            v15 = v14;
          }
          v20 = v15;
          if ( v15 )
          {
            sub_657CEE40(*(this + 1598), (int)&v20);
            v15[1] = v13;
            v16 = *v13;
            if ( v16 )
              v17 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v16);
            else
              v17 = byte_659A8B98;
            *v15 = UiWidget_Create(this, 0, (int)v17, 256, 101, 0, 0, 1, (int)&unk_65A5C5EC, 2, 0, 0, 0);
          }
          v4 = v22;
          v11 = j;
        }
      }
    }
    ++v11;
  }
  v18 = *(this + 1598) - 10;
  if ( v18 < 0 )
    v18 = 0;
  Slider_SetTickCount((int *)*(this + 1594), v18);
  v19 = (int *)*(this + 1594);
  *(this + 1595) = 0;
  Slider_ResetToMin(v19);
  CWindow_UpdateChildPositions((int)this);
  return 1;
}

//----- (657D1320) --------------------------------------------------------
int __thiscall DialogUI_SetupConfirm(int this, char *Source, int a3, int a4, int a5)
{
  const char *v5; // eax
  char *v7; // edi
  int v8; // eax
  int v9; // eax
  int v10; // eax
  _DWORD *v11; // eax
  double v12; // st7
  int result; // eax
  float Sourcea; // [esp+14h] [ebp+8h]

  v5 = Source;
  v7 = (char *)(this + 6436);
  if ( this != -6436 )
  {
    if ( !Source )
      v5 = byte_659A8B98;
    strncpy((char *)(this + 6436), v5, 0x3FFu);
    v7[1023] = 0;
  }
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6384), v7, 0, 0);
  *(_DWORD *)(this + 6376) = a5;
  v8 = *(_DWORD *)(this + 6404);
  *(_DWORD *)(this + 6432) = a3;
  *(_DWORD *)(this + 6416) = a4;
  *(_DWORD *)(this + 6372) = 0;
  *(_DWORD *)(v8 + 24) = 0;
  *(_DWORD *)(v8 + 200) = 0;
  v9 = *(_DWORD *)(this + 6408);
  *(_DWORD *)(v9 + 24) = 0;
  *(_DWORD *)(v9 + 200) = 0;
  (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6380) + 88))(*(_DWORD *)(this + 6380), 0);
  (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6392) + 88))(*(_DWORD *)(this + 6392), 0);
  (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6396) + 88))(*(_DWORD *)(this + 6396), 0);
  (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6400) + 88))(*(_DWORD *)(this + 6400), 0);
  v10 = *(_DWORD *)(this + 6412);
  *(_DWORD *)(v10 + 24) = 0;
  *(_DWORD *)(v10 + 200) = 0;
  v11 = *(_DWORD **)(this + 6388);
  v11[6] = 1;
  v11[50] = 1;
  v11[8] = 1;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6392), (char *)byte_659A8B98, 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6396), (char *)byte_659A8B98, 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6400), (char *)byte_659A8B98, 0, 0);
  v12 = *(float *)(this + 6300) * 1.5;
  *(_DWORD *)(this + 6368) = 0;
  Sourcea = v12;
  *(float *)(this + 6300) = Sourcea;
  result = 1;
  if ( Sourcea > 1.0 )
    *(float *)(this + 6300) = 1.0;
  return result;
}

//----- (657D17F0) --------------------------------------------------------
int __thiscall DialogUI_SetupWithOptions(int this, float a2, char *Source, char *a4, int a5, int a6)
{
  const char *v6; // eax
  char *v8; // edi
  int v9; // eax
  int v10; // ecx
  int v11; // eax
  int v12; // eax
  int v13; // eax
  _DWORD *v14; // eax
  const char *v15; // eax
  void (__stdcall *v16)(int); // eax
  const char *v17; // eax
  char v18; // cl
  BOOL v19; // edx
  float v21; // [esp+14h] [ebp+8h]

  v6 = Source;
  v8 = (char *)(this + 6436);
  if ( this != -6436 )
  {
    if ( !Source )
      v6 = byte_659A8B98;
    strncpy((char *)(this + 6436), v6, 0x3FFu);
    v8[1023] = 0;
  }
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6384), v8, 0, 0);
  *(_DWORD *)(this + 6432) = a5;
  v9 = *(_DWORD *)(this + 6396);
  *(_DWORD *)(this + 6416) = a6;
  v10 = *(_DWORD *)(v9 + 180);
  if ( v10 <= 21 )
    *(_DWORD *)(v9 + 184) = v10;
  else
    *(_DWORD *)(v9 + 184) = 21;
  v11 = *(_DWORD *)(this + 6404);
  *(_DWORD *)(v11 + 24) = 0;
  *(_DWORD *)(v11 + 200) = 0;
  v12 = *(_DWORD *)(this + 6408);
  *(_DWORD *)(v12 + 24) = 0;
  *(_DWORD *)(v12 + 200) = 0;
  (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6380) + 88))(*(_DWORD *)(this + 6380), 1);
  (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6392) + 88))(*(_DWORD *)(this + 6392), 0);
  v13 = *(_DWORD *)(this + 6412);
  *(_DWORD *)(v13 + 24) = 0;
  *(_DWORD *)(v13 + 200) = 0;
  v14 = *(_DWORD **)(this + 6388);
  v14[6] = 1;
  v14[50] = 1;
  v14[8] = 1;
  v15 = a4;
  if ( v8 )
  {
    if ( !a4 )
      v15 = byte_659A8B98;
    strncpy(v8, v15, 0x3FFu);
    v8[1023] = 0;
  }
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6392), (char *)byte_659A8B98, 0, 0);
  v16 = *(void (__stdcall **)(int))(**(_DWORD **)(this + 6400) + 88);
  if ( LOBYTE(a2) )
  {
    v16(1);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6400), v8, 0, 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6396) + 88))(*(_DWORD *)(this + 6396), 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6396), (char *)byte_659A8B98, 0, 0);
  }
  else
  {
    v16(0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6400), (char *)byte_659A8B98, 0, 0);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6396) + 88))(*(_DWORD *)(this + 6396), 1);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6396), v8, 0, 0);
  }
  v17 = v8;
  if ( this != -7460 )
  {
    if ( !v8 )
      v17 = byte_659A8B98;
    strncpy((char *)(this + 7460), v17, 0x13u);
    *(_BYTE *)(this + 7479) = 0;
  }
  v18 = LOBYTE(a2);
  v19 = LOBYTE(a2) != 0;
  v21 = *(float *)(this + 6300) * 1.5;
  *(float *)(this + 6300) = v21;
  *(_DWORD *)(this + 6368) = v19 + 3;
  if ( v21 > 1.0 )
    *(float *)(this + 6300) = 1.0;
  if ( v18 )
    WindowMgr_SetFocusWindow((_DWORD *)dword_65ABF708, *(_DWORD **)(this + 6400), this);
  else
    WindowMgr_SetFocusWindow((_DWORD *)dword_65ABF708, *(_DWORD **)(this + 6396), this);
  return 1;
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (657D3DB0) --------------------------------------------------------
char *__thiscall Bitmask24_WriteToStream(char *this, char *a2)
{
  char *v2; // esi
  int v3; // ebx
  char *result; // eax

  v2 = this + 12;
  v3 = 6;
  do
  {
    if ( *(v2 - 12) )
      BitStream_WriteBit1(a2);
    else
      BitStream_WriteBit0(a2);
    if ( *(v2 - 6) )
      BitStream_WriteBit1(a2);
    else
      BitStream_WriteBit0(a2);
    if ( *v2 )
      BitStream_WriteBit1(a2);
    else
      BitStream_WriteBit0(a2);
    if ( v2[6] )
      result = BitStream_WriteBit1(a2);
    else
      result = BitStream_WriteBit0(a2);
    ++v2;
    --v3;
  }
  while ( v3 );
  return result;
}

//----- (657D3E20) --------------------------------------------------------
char *__thiscall UInt16Array6_WriteCompressed(unsigned __int16 *this, char *a2)
{
  char *v2; // esi
  unsigned int i; // edi
  char *result; // eax
  int v6; // [esp+Ch] [ebp-4h] BYREF

  v2 = a2;
  for ( i = 0; i < 6; ++i )
  {
    v6 = *(this + i);
    if ( Net_IsBigEndian() )
    {
      ByteSwapCopy((int)&v6, (int)&a2, 2u);
      result = BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x10u, 1);
    }
    else
    {
      result = BitStream_WriteBitsCompressed(v2, (char *)&v6, 0x10u, 1);
    }
  }
  return result;
}

//----- (657D3E80) --------------------------------------------------------
char *__thiscall Playerfile_Write(char *this, char *a2)
{
  char *v3; // esi
  char *result; // eax
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *(_DWORD *)this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  LOBYTE(a2) = *(this + 4);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *(this + 12);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *(this + 5);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  a2 = (char *)*((_DWORD *)this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*((_DWORD *)this + 4);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 20, 2048, v3);
  Playerfile_BlockC0_WriteFull((int *)this + 13, v3);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 332, 2048, v3);
  (*(void (__thiscall **)(int, char *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 176, 2048, v3);
  result = Playerfile_BlockC0_WriteFull((int *)this + 52, v3);
  if ( *(this + 4) != 2 )
    return UInt16Array6_WriteCompressed((unsigned __int16 *)this + 182, v3);
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657D4000) --------------------------------------------------------
char __thiscall Packet_ID_DEPLOY_ITEM_write(int this)
{
  char result; // al
  char v3[4]; // [esp+4h] [ebp-4h] BYREF

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    v3[0] = *(_BYTE *)(this + 1076);
    BitStream_WriteBitsCompressed((char *)(this + 12), v3, 8u, 1);
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 0:
        Write_QuantVec3_And9((char *)(this + 1084), (char *)(this + 12));
        result = 1;
        break;
      case 1:
      case 2:
        BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1100));
        result = 1;
        break;
      case 3:
        BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1100));
        switch ( *(_WORD *)(this + 1100) )
        {
          case 0x1F5:
            BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1632));
            BitStream_WriteBool((char *)this, *(_BYTE *)(this + 1580));
            goto LABEL_11;
          case 0x1FE:
            Playerfile_Write((char *)(this + 1104), (char *)(this + 12));
            Packet_ID_A9_WriteList((_DWORD *)(this + 1480), (char *)(this + 12));
            BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1568));
            BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1572));
            BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1576));
            result = 1;
            break;
          case 0x1FF:
            BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1572));
            BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1576));
            result = 1;
            break;
          case 0x200:
            BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1568));
            BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1572));
            BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1632));
            ItemStructAPlus_u32_write((unsigned __int16 *)(this + 1584), (char *)(this + 12));
            result = 1;
            break;
          case 0x204:
            BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1568));
            BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1572));
            BitStream_WriteBool((char *)this, *(_BYTE *)(this + 1580));
            result = 1;
            break;
          default:
            goto LABEL_12;
        }
        break;
      case 4:
        BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1100));
        switch ( *(_WORD *)(this + 1100) )
        {
          case 0x1F5:
LABEL_11:
            Bitmask24_WriteToStream((char *)(this + 1634), (char *)(this + 12));
            goto LABEL_12;
          case 0x1FE:
            BitStream_WriteBool((char *)this, *(_BYTE *)(this + 1580));
            if ( *(_BYTE *)(this + 1580) )
              goto LABEL_12;
            BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1576));
            result = 1;
            break;
          case 0x1FF:
          case 0x204:
            BitStream_WriteBool((char *)this, *(_BYTE *)(this + 1580));
            result = 1;
            break;
          case 0x200:
            BitStream_WriteBool((char *)this, *(_BYTE *)(this + 1580));
            BitStream_WriteBool((char *)this, *(_BYTE *)(this + 1581));
            BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1576));
            result = 1;
            break;
          default:
            goto LABEL_12;
        }
        break;
      default:
LABEL_12:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (657D44F0) --------------------------------------------------------
_DWORD *__thiscall Read_6x4BitFlags(bool *this, _DWORD *a2)
{
  _DWORD *result; // eax
  bool *v3; // edi
  unsigned int v4; // esi
  unsigned int v5; // esi
  unsigned int v6; // esi
  unsigned int v7; // esi
  int v8; // [esp+14h] [ebp+8h]

  result = a2;
  v3 = this + 12;
  v8 = 6;
  do
  {
    v4 = result[2];
    if ( v4 + 1 <= *result )
    {
      *(v3 - 12) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + result[3])) != 0;
      ++result[2];
    }
    v5 = result[2];
    if ( v5 + 1 <= *result )
    {
      *(v3 - 6) = ((unsigned __int8)(128 >> (v5 & 7)) & *(_BYTE *)((v5 >> 3) + result[3])) != 0;
      ++result[2];
    }
    v6 = result[2];
    if ( v6 + 1 <= *result )
    {
      *v3 = ((unsigned __int8)(128 >> (v6 & 7)) & *(_BYTE *)((v6 >> 3) + result[3])) != 0;
      ++result[2];
    }
    v7 = result[2];
    if ( v7 + 1 <= *result )
    {
      v3[6] = ((unsigned __int8)(128 >> (v7 & 7)) & *(_BYTE *)((v7 >> 3) + result[3])) != 0;
      ++result[2];
    }
    ++v3;
    --v8;
  }
  while ( v8 );
  return result;
}

//----- (657D45C0) --------------------------------------------------------
char __thiscall Read_u16c_x6(char *this, unsigned int *a2)
{
  unsigned int *v2; // edi
  int v4; // ebx
  char result; // al

  v2 = a2;
  v4 = 6;
  do
  {
    if ( Net_IsBigEndian() )
    {
      result = RakNet::BitStream::ReadCompressed(v2, (char *)&a2, 0x10u, 1);
      if ( result )
        result = ByteSwapCopy((int)&a2, (int)this, 2u);
    }
    else
    {
      result = RakNet::BitStream::ReadCompressed(v2, this, 0x10u, 1);
    }
    this += 2;
    --v4;
  }
  while ( v4 );
  return result;
}

//----- (657D4620) --------------------------------------------------------
char __thiscall Packet_ID_A5_read_struct1(char *this, unsigned int *a2)
{
  char result; // al

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed(a2, this + 4, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 12, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 5, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 8);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 16);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 20,
    2048,
    a2);
  Playerfile_read_blockC0(this + 52, a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 332,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 176,
    2048,
    a2);
  result = Playerfile_read_blockC0(this + 208, a2);
  if ( *(this + 4) != 2 )
    return Read_u16c_x6(this + 364, a2);
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657D46F0) --------------------------------------------------------
void **__thiscall Packet_ID_DEPLOY_ITEM_dtor(void **this, char a2)
{
  if ( *(this + 371) )
    operator delete(*(this + 371));
  *(this + 371) = 0;
  *(this + 372) = 0;
  *(this + 373) = 0;
  *this = &vtbl_Packet_Unknown0;
  BitStream_FreeOwnedBuffer((int)(this + 3));
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (657D4960) --------------------------------------------------------
char __thiscall Packet_ID_DEPLOY_ITEM_read(int this, int a2)
{
  char result; // al
  unsigned int *v4; // edi

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    v4 = (unsigned int *)(this + 12);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 0:
        Read_QuantVec3_9bit(this + 1084, (_DWORD *)(this + 12));
        result = 1;
        break;
      case 1:
      case 2:
        RakNet::BitStream::ReadCompressed_T_ushort(v4, (char *)(this + 1100));
        result = 1;
        break;
      case 3:
        RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1100));
        switch ( *(_WORD *)(this + 1100) )
        {
          case 0x1F5:
            RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1632));
            VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1580));
            goto LABEL_12;
          case 0x1FE:
            Packet_ID_A5_read_struct1((char *)(this + 1104), (unsigned int *)(this + 12));
            Packet_ID_A5_read_struct2((char *)(this + 1480), (unsigned int *)(this + 12));
            RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1568));
            RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1572));
            goto LABEL_16;
          case 0x1FF:
            RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1572));
            goto LABEL_16;
          case 0x200:
            RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1568));
            RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1572));
            RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1632));
            ItemEntryWithId_Read((char *)(this + 1584), (unsigned int *)(this + 12));
            result = 1;
            break;
          case 0x204:
            RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1568));
            RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1572));
            VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1580));
            result = 1;
            break;
          default:
            goto LABEL_13;
        }
        break;
      case 4:
        RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1100));
        switch ( *(_WORD *)(this + 1100) )
        {
          case 0x1F5:
LABEL_12:
            Read_6x4BitFlags((bool *)(this + 1634), (_DWORD *)(this + 12));
            goto LABEL_13;
          case 0x1FE:
            VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1580));
            if ( *(_BYTE *)(this + 1580) )
              goto LABEL_13;
LABEL_16:
            RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1576));
            result = 1;
            break;
          case 0x1FF:
          case 0x204:
            VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1580));
            result = 1;
            break;
          case 0x200:
            VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1580));
            VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1581));
            RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1576));
            result = 1;
            break;
          default:
            goto LABEL_13;
        }
        break;
      default:
LABEL_13:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (657D5510) --------------------------------------------------------
void __thiscall DialogUI_ClearText(int *this)
{
  UiText_SetValueIfChanged(*(this + 3517), (char *)byte_659A8B98, 0, 0);
  UiText_SetValueIfChanged(*(this + 2018), (char *)byte_659A8B98, 0, 0);
}

//----- (657D5B50) --------------------------------------------------------
int __thiscall WindowMgr_SelectAndNotify_44(int *this)
{
  WindowMgr_SelectGroup(this, 44);
  return (*(int (__thiscall **)(int *, int, _DWORD, _DWORD))(*this + 4))(this, 5, 0, 0);
}

//----- (657D5CF0) --------------------------------------------------------
char __thiscall sub_657D5CF0(char *this, _BYTE *a2)
{
  int v3; // eax
  _BYTE *i; // edx

  if ( *a2 )
  {
    qmemcpy(this + 32 * (unsigned __int8)*a2 - 32, a2, 0x20u);
    return 0;
  }
  else
  {
    v3 = 10;
    for ( i = this + 320; *i; i += 32 )
    {
      if ( (unsigned int)++v3 >= 0x1E )
        return 0;
    }
    *a2 = v3 + 1;
    qmemcpy(this + 32 * v3, a2, 0x20u);
    return 1;
  }
}

//----- (657D5D60) --------------------------------------------------------
char __thiscall sub_657D5D60(_BYTE *this, char a2)
{
  int v2; // eax
  _BYTE *i; // edx
  int v5; // eax
  bool v6; // zf
  _BYTE *v7; // eax
  _BYTE *v8; // esi
  int v9; // eax

  v2 = 0;
  for ( i = this; *i != a2; i += 32 )
  {
    if ( (unsigned int)++v2 >= 0x1E )
      return 0;
  }
  v5 = 32 * v2;
  v6 = this + v5 == 0;
  v7 = this + v5;
  v8 = v7;
  if ( v6 )
    return 0;
  if ( *v7 <= 0xAu )
    return 0;
  v9 = sub_657D5C90(this, 1);
  if ( !v9 )
    return 0;
  *(_DWORD *)(v9 + 28) += *((_DWORD *)v8 + 7);
  *v8 = 0;
  v8[1] = 0;
  *((_DWORD *)v8 + 7) = 0;
  return 1;
}
// 657D5C90: using guessed type int __thiscall sub_657D5C90(_DWORD, _DWORD);

//----- (657D60B0) --------------------------------------------------------
void __stdcall SharedMem_WritePlayerBlock(void *Src)
{
  SharedMem_WriteBlock_std(126515, Src, (WorldLoginReturnAddrPacked)124);
}

//----- (657D7190) --------------------------------------------------------
int __thiscall sub_657D7190(_DWORD *this, char a2)
{
  unsigned __int8 v2; // bl
  int v3; // esi

  v2 = 0;
  if ( !(unsigned __int8)((*(this + 3) - *(this + 2)) / 68) )
    return 0;
  v3 = *(this + 2);
  while ( *(_BYTE *)(v3 + 68 * v2) != a2 )
  {
    if ( ++v2 >= (unsigned __int8)((*(this + 3) - v3) / 68) )
      return 0;
  }
  return v3 + 68 * v2;
}

//----- (657D7210) --------------------------------------------------------
bool __thiscall GuildMgr_CheckPermission(_DWORD *this, int a2, int a3)
{
  int v5; // eax
  int v6; // [esp+4h] [ebp-4h] BYREF

  if ( SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) == *(this + 1611) )
    return 1;
  v5 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  if ( !v5 || !sub_657D7190(this + 1941, *(_BYTE *)(v5 + 14)) )
    return 0;
  v6 = 0;
  sub_65950EF0(a2, &v6);
  if ( a3 )
    return sub_659500C0(a2, a3);
  else
    return v6 == 1;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657D7D90) --------------------------------------------------------
char __thiscall SkillArray_HasSkillOfType(_DWORD *this, int a2)
{
  int v3; // edi
  int v4; // ecx
  char v6[8]; // [esp+Ch] [ebp-58h] BYREF
  int v7; // [esp+14h] [ebp-50h]

  v3 = 0;
  if ( !((*(this + 4) - *(this + 3)) >> 2) )
    return 0;
  while ( 1 )
  {
    v4 = *(this + 3);
    if ( *(_BYTE *)(v4 + 4 * v3 + 3) )
    {
      if ( SkillDefTable_CopyEntry(*(_WORD *)(v4 + 4 * v3), v6) && v7 == a2 )
        break;
    }
    if ( ++v3 >= (unsigned int)((*(this + 4) - *(this + 3)) >> 2) )
      return 0;
  }
  return 1;
}

//----- (657D81F0) --------------------------------------------------------
_DWORD *__cdecl DwordArray_CopyRange(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; ++result )
  {
    if ( result )
      *result = *v3;
    ++v3;
  }
  return result;
}

//----- (657D9D20) --------------------------------------------------------
int __thiscall sub_657D9D20(int this)
{
  unsigned int v2; // edi
  int v3; // esi
  int (__thiscall ***v4)(_DWORD, int); // eax
  int (__thiscall **v5)(_DWORD, int); // edx
  int (__thiscall ***v6)(_DWORD, int); // eax
  int v7; // edi
  int (__thiscall *v8)(_DWORD, int); // edx
  int v9; // eax
  int v10; // eax
  const char *v11; // eax
  int (__thiscall ***v12)(_DWORD, int); // eax
  int v13; // ecx
  int v14; // edx
  int (__thiscall ***Simple)(_DWORD, int); // [esp+8h] [ebp-18h]
  int (__thiscall ***v17)(_DWORD, int); // [esp+Ch] [ebp-14h]
  unsigned int v18; // [esp+10h] [ebp-10h]
  int v19; // [esp+14h] [ebp-Ch]
  _DWORD *v20; // [esp+18h] [ebp-8h]
  int v21; // [esp+18h] [ebp-8h]
  int v22; // [esp+1Ch] [ebp-4h] BYREF

  ListBox_ClearItems(*(int **)(this + 14032));
  v2 = 0;
  v18 = 0;
  if ( (*(_DWORD *)(this + 7724) - *(_DWORD *)(this + 7720)) / 440 )
  {
    v19 = 0;
    do
    {
      v3 = *(_DWORD *)(this + 7720);
      if ( v2 < (*(_DWORD *)(this + 7724) - v3) / 440 )
      {
        v20 = (_DWORD *)(v19 + v3);
        if ( v19 + v3 )
        {
          Simple = UiWidget_CreateSimple(125, *(_DWORD *)(v19 + v3), 0, 0, 0, 0);
          if ( Simple )
          {
            qmemcpy(&unk_65A5E590, &unk_65A5C9B8, 0x6Cu);
            strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
            byte_65A5E5A7 = 0;
            v4 = UiWidget_Create((void *)this, 0, (int)(v20 + 6), 33, 233, 0, 0, 1, (int)&unk_65A5E590, 2, 0, 0, 0);
            if ( v4 )
            {
              v5 = v4[19];
              v4[18] = (int (__thiscall **)(_DWORD, int))((char *)v4[20] + 2);
              v4[21] = (int (__thiscall **)(_DWORD, int))40;
              v4[22] = (int (__thiscall **)(_DWORD, int))2;
              v4[17] = v5 + 10;
              v4[126] = *v20 != 326 ? (int (__thiscall **)(_DWORD, int))*v20 : 0;
              v4[125] = (int (__thiscall **)(_DWORD, int))1;
              v22 = 0;
              GameInput_HandleMouseClick((int **)dword_65ABF6F4, &v22, 1, v20 + 78, 0x20u, 0x20u);
              if ( v22 )
              {
                v6 = UiWidget_CreateWithCallback((void *)this, 0, 0, 0);
                v7 = (int)v6;
                if ( v6 )
                {
                  v8 = (*v6)[32];
                  v6[50] = (int (__thiscall **)(_DWORD, int))1;
                  v8(v6, v22);
                  v9 = *(_DWORD *)(v7 + 76);
                  *(_DWORD *)(v7 + 72) = *(_DWORD *)(v7 + 80) + 2;
                  *(_DWORD *)(v7 + 84) = 4;
                  *(_DWORD *)(v7 + 88) = 2;
                  *(_DWORD *)(v7 + 68) = v9 + 4;
                  *(_BYTE *)(v7 + 256) = 1;
                  v10 = (*(int (__cdecl **)(int, int, _DWORD *, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          830,
                          v20 + 1,
                          v20[109]);
                  v21 = v10;
                  if ( v10 )
                    v11 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                          g_pILTClient,
                                          v10);
                  else
                    v11 = byte_659A8B98;
                  v12 = UiWidget_Create((void *)this, 0, (int)v11, 128, 233, 0, 0, 1, (int)&unk_65A5C730, 2, 0, 0, 0);
                  v17 = v12;
                  if ( v21 )
                  {
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v21);
                    v12 = v17;
                  }
                  if ( v12 )
                  {
                    v13 = (int)(v12[19] + 10);
                    v14 = (int)v12[20] + 18;
                    v12[21] = (int (__thiscall **)(_DWORD, int))40;
                    v12[22] = (int (__thiscall **)(_DWORD, int))18;
                    v12[17] = (int (__thiscall **)(_DWORD, int))v13;
                    v12[18] = (int (__thiscall **)(_DWORD, int))v14;
                    Button_AddCallbacks((int)Simple, v7);
                    ListBox_AddItem(*(unsigned int **)(this + 14032), (int)Simple);
                  }
                }
              }
            }
          }
        }
      }
      v19 += 440;
      v2 = v18 + 1;
      v18 = v2;
    }
    while ( v2 < (*(_DWORD *)(this + 7724) - *(_DWORD *)(this + 7720)) / 440 );
  }
  *(_DWORD *)(*(_DWORD *)(this + 14032) + 2680) = 0;
  *(_DWORD *)(*(_DWORD *)(this + 14032) + 2684) = 1;
  ListBox_RefreshDisplay(*(int **)(this + 14032));
  return ListBox_Reset(*(_DWORD **)(this + 14032));
}
// 65A5E5A7: using guessed type char byte_65A5E5A7;
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (657DD560) --------------------------------------------------------
void __thiscall GuildMemberList_Refresh(_DWORD *this)
{
  unsigned __int16 v2; // di
  int v3; // edi
  int *v4; // edi
  int v5; // ebx
  _BYTE *v6; // eax
  char *v7; // eax
  int v8; // ecx
  _DWORD *v9; // edx
  int v10; // edx
  int v11; // eax
  int v12; // ecx
  unsigned int *v13; // ebx
  _DWORD *v14; // eax
  _DWORD *v15; // eax
  unsigned __int16 v16; // ax
  int v17; // eax
  int v18; // edi
  int v19; // eax
  int v20; // edi
  char *v21; // eax
  _BYTE v22[28]; // [esp-28h] [ebp-C0h] BYREF
  _BYTE v23[12]; // [esp-Ch] [ebp-A4h] BYREF
  char *v24; // [esp+10h] [ebp-88h]
  _BYTE v25[28]; // [esp+24h] [ebp-74h] BYREF
  unsigned int v26; // [esp+40h] [ebp-58h]
  _BYTE *v27; // [esp+44h] [ebp-54h]
  _BYTE *v28; // [esp+48h] [ebp-50h]
  _BYTE v29[20]; // [esp+4Ch] [ebp-4Ch] BYREF
  int v30; // [esp+60h] [ebp-38h]
  char v31[20]; // [esp+68h] [ebp-30h] BYREF
  int v32; // [esp+94h] [ebp-4h]

  sub_6576D9C0((_DWORD *)*(this + 3523));
  v2 = (*(this + 1935) - *(this + 1934)) / 320;
  std::string::string(v29);
  v32 = 0;
  if ( v2 )
  {
    v26 = 0;
    v28 = 0;
    v27 = (_BYTE *)v2;
    do
    {
      v3 = *(this + 1934);
      if ( v26 < (*(this + 1935) - v3) / 320 )
      {
        v4 = (int *)&v28[v3];
        if ( v4 )
        {
          v5 = *v4;
          if ( v5 == SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) )
            v24 = "00B2FF00";
          else
            v24 = (char *)(*v4 == *(this + 1611) ? "FFED0000" : byte_659A8B98);
          std::string::operator=(v29, v24);
          v6 = v30 ? (_BYTE *)std::string::c_str(v29) : 0;
          v7 = UiWidget_CreateWithParams(v4, 1.0, 348, 1, 1, v6);
          if ( v7 )
          {
            v8 = *v4;
            v9 = (_DWORD *)*(this + 3523);
            v24 = 0;
            sub_6576D0F0(v9, v8, 0, 0, 25, (int)v7);
            v10 = *(_DWORD *)(*(this + 3523) + 2236);
            if ( v10 )
            {
              v11 = 0;
              while ( 1 )
              {
                v12 = *(_DWORD *)(v10 + 4 * v11);
                if ( v12 )
                {
                  if ( *(_DWORD *)(v12 + 4) == 24 )
                    break;
                }
                if ( (unsigned int)++v11 >= 0xA )
                  goto LABEL_24;
              }
              v13 = *(unsigned int **)(v10 + 4 * v11);
              v14 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9028);
              LinkedList_AddNode(v13, v14, 17, *v4, 0);
              if ( SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) != *v4
                && SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) == *(this + 1611) )
              {
                v15 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9018);
                LinkedList_AddNode(v13, v15, 134, *v4, 0);
              }
            }
          }
        }
      }
LABEL_24:
      v28 += 320;
      ++v26;
      --v27;
    }
    while ( v27 );
  }
  sub_6576D1D0((_DWORD *)*(this + 3523));
  ItemList_Sort((char *)*(this + 3523), 0, 1);
  sub_65948390(v31, this + 1882);
  v24 = v31;
  v27 = v23;
  sub_65941410(v23, 10);
  v16 = (__int16)(*((_WORD *)this + 3870) - *((_WORD *)this + 3868)) / 320;
  v28 = v22;
  LOBYTE(v32) = 1;
  String_FromU16(v22, v16);
  LOBYTE(v32) = 0;
  v17 = FormatString_Args((int)v25, (int)"{0}/{1}");
  v18 = *(_DWORD *)g_pILTClient;
  LOBYTE(v32) = 2;
  v19 = std::string::c_str(v17);
  v20 = (*(int (__cdecl **)(int, int, int))(v18 + 64))(g_pILTClient, 781, v19);
  LOBYTE(v32) = 0;
  std::string::~string(v25);
  if ( v20 )
    v21 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v20);
  else
    v21 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(this + 3524), v21, 0, 0);
  if ( v20 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v20);
  v32 = -1;
  std::string::~string(v29);
}
// 657DD6C9: conditional instruction was optimized away because ecx.4!=0
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (657DDB90) --------------------------------------------------------
int __thiscall CharacterPreview_ApplyData(_DWORD **this, int *a2)
{
  int v3; // eax
  int v4; // ebx
  int v5; // esi
  int *v6; // eax
  unsigned int v7; // edx
  int result; // eax
  _DWORD **Src; // [esp+Ch] [ebp-4h]

  Src = this + 1884;
  qmemcpy(this + 1884, a2, 0x7Cu);
  GameInput_HandleMouseClick((int **)dword_65ABF6F4, (int *)this + 1969, 1, (int *)this + 1884, 0x40u, 0x40u);
  UiList_ClearEntries(*(this + 1968));
  if ( GuildMgr_CheckPermission(this, 4, 0) )
  {
    v3 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9019);
    v4 = (int)*(this + 1968);
    v5 = v3;
    if ( v3 )
    {
      v6 = (int *)operator new(0x10u);
      if ( v6 )
      {
        *v6 = v5;
        v6[1] = 21;
        v6[2] = 0;
        v6[3] = 0;
      }
      else
      {
        v6 = 0;
      }
      v7 = *(_DWORD *)(v4 + 140);
      a2 = v6;
      List_InsertAtOffset((unsigned int *)(v4 + 132), v7, &a2);
    }
  }
  SharedMem_WriteBlock_std(126515, Src, (WorldLoginReturnAddrPacked)124);
  result = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  if ( result )
    *(_BYTE *)(result + 48) = 1;
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (657DDF70) --------------------------------------------------------
void __thiscall GuildMemberList_RefreshWithActions(int *this)
{
  unsigned __int16 v2; // si
  int v3; // esi
  unsigned __int8 *v4; // esi
  int v5; // edi
  _BYTE *v6; // eax
  char *v7; // eax
  int v8; // ecx
  int v9; // ecx
  int v10; // eax
  int v11; // edx
  unsigned int *v12; // edi
  _DWORD *v13; // eax
  _DWORD *v14; // eax
  _DWORD *v15; // eax
  int v16; // esi
  char *v17; // eax
  unsigned __int16 v18; // [esp+24h] [ebp-3Ch]
  int v19; // [esp+28h] [ebp-38h]
  unsigned int v20; // [esp+2Ch] [ebp-34h]
  int v21; // [esp+30h] [ebp-30h]
  _BYTE v22[20]; // [esp+34h] [ebp-2Ch] BYREF
  int v23; // [esp+48h] [ebp-18h]
  int v24; // [esp+5Ch] [ebp-4h]

  sub_6576D9C0((_DWORD *)*(this + 2010));
  v2 = (*(this + 1935) - *(this + 1934)) / 320;
  v18 = v2;
  std::string::string(v22);
  v24 = 0;
  if ( v2 )
  {
    v20 = 0;
    v21 = 0;
    v19 = v2;
    do
    {
      v3 = *(this + 1934);
      if ( v20 < (*(this + 1935) - v3) / 320 )
      {
        v4 = (unsigned __int8 *)(v21 + v3);
        if ( v4 )
        {
          v5 = *(_DWORD *)v4;
          if ( v5 == SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) )
          {
            std::string::operator=(v22, "00B2FF00");
          }
          else if ( *(_DWORD *)v4 == *(this + 1611) )
          {
            std::string::operator=(v22, "FFED0000");
          }
          else
          {
            std::string::operator=(v22, byte_659A8B98);
          }
          v6 = v23 ? (_BYTE *)std::string::c_str(v22) : 0;
          v7 = UiWidget_CreateWithParams(v4, 1.0, 198, 1, 1, v6);
          if ( v7 )
          {
            v8 = v4[156];
            if ( !(_BYTE)v8 )
              v8 = 31;
            *((_DWORD *)v7 + 49) = v8;
            *((_DWORD *)v7 + 48) = 1;
            sub_6576D0F0((_DWORD *)*(this + 2010), *(_DWORD *)v4, 0, 0, 48, (int)v7);
            v9 = *(_DWORD *)(*(this + 2010) + 2236);
            if ( v9 )
            {
              v10 = 0;
              while ( 1 )
              {
                v11 = *(_DWORD *)(v9 + 4 * v10);
                if ( v11 )
                {
                  if ( *(_DWORD *)(v11 + 4) == 24 )
                    break;
                }
                if ( (unsigned int)++v10 >= 0xA )
                  goto LABEL_29;
              }
              v12 = *(unsigned int **)(v9 + 4 * v10);
              v13 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9028);
              LinkedList_AddNode(v12, v13, 17, *(_DWORD *)v4, 0);
              if ( SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) != *(_DWORD *)v4 && *(_DWORD *)v4 != *(this + 1611) )
              {
                if ( GuildMgr_CheckPermission(this, 7, 0) )
                {
                  v14 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9018);
                  LinkedList_AddNode(v12, v14, 44, *(_DWORD *)v4, 0);
                }
                if ( GuildMgr_CheckPermission(this, 11, 0) )
                {
                  v15 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9023);
                  LinkedList_AddNode(v12, v15, 45, *(_DWORD *)v4, 0);
                }
              }
            }
          }
        }
      }
LABEL_29:
      v21 += 320;
      ++v20;
      --v19;
    }
    while ( v19 );
    v2 = v18;
  }
  sub_6576D1D0((_DWORD *)*(this + 2010));
  ItemList_Sort((char *)*(this + 2010), 0, 1);
  v16 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4352, v2);
  if ( v16 )
    v17 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v16);
  else
    v17 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(this + 2012), v17, 0, 0);
  if ( v16 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v16);
  v24 = -1;
  std::string::~string(v22);
}
// 657DE0FE: conditional instruction was optimized away because edx.4!=0
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (657DEEA0) --------------------------------------------------------
void __usercall sub_657DEEA0(int a1@<ecx>, int a2@<esi>)
{
  unsigned __int8 v3; // bl
  char *v4; // esi
  int (__thiscall ***v5)(_DWORD, int); // eax
  int (__thiscall **v6)(_DWORD, int); // edx
  int (__thiscall **v7)(_DWORD, int); // ecx
  int v8; // edx
  int v9; // eax
  int v10; // ecx
  unsigned int *v11; // ebx
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  _DWORD *v14; // eax
  int v16; // [esp+Bh] [ebp-9h]
  char v17; // [esp+Fh] [ebp-5h]
  unsigned __int8 i; // [esp+13h] [ebp-1h]

  sub_6576D9C0(*(_DWORD **)(a1 + 9368));
  v3 = 0;
  for ( i = 0; v3 < (unsigned __int8)((*(_DWORD *)(a1 + 7776) - *(_DWORD *)(a1 + 7772)) / 68); i = v3 )
  {
    if ( v3 < (unsigned __int8)((char)(*(_BYTE *)(a1 + 7776) - *(_BYTE *)(a1 + 7772)) / 68) )
    {
      v4 = (char *)(*(_DWORD *)(a1 + 7772) + 68 * v3);
      if ( v4 )
      {
        v5 = UiWidget_Create((void *)a1, 0, (int)(v4 + 1), 33, 200, 12, 0, 1, (int)&unk_65A5CD84, 2, 0, 0, 0);
        if ( v5 )
        {
          v6 = v5[19];
          v7 = v5[20];
          v5[21] = (int (__thiscall **)(_DWORD, int))6;
          v5[22] = (int (__thiscall **)(_DWORD, int))2;
          v5[17] = (int (__thiscall **)(_DWORD, int))((char *)v6 + 6);
          v5[18] = (int (__thiscall **)(_DWORD, int))((char *)v7 + 2);
          v5[126] = (int (__thiscall **)(_DWORD, int))(unsigned __int8)*v4;
          v5[125] = (int (__thiscall **)(_DWORD, int))1;
          sub_6576D0F0(*(_DWORD **)(a1 + 9368), (unsigned __int8)*v4, 0, 0, 13, (int)v5);
          if ( GuildMgr_CheckPermission((_DWORD *)a1, 22, 0) )
          {
            v8 = *(_DWORD *)(*(_DWORD *)(a1 + 9368) + 2236);
            if ( v8 )
            {
              v9 = 0;
              while ( 1 )
              {
                v10 = *(_DWORD *)(v8 + 4 * v9);
                if ( v10 )
                {
                  if ( *(_DWORD *)(v10 + 4) == 18 )
                    break;
                }
                if ( (unsigned int)++v9 >= 0xA )
                  goto LABEL_17;
              }
              v11 = *(unsigned int **)(v8 + 4 * v9);
              v17 = *v4;
              if ( (unsigned __int8)sub_65950F80(a1 + 7764, v17, a2) )
              {
                v12 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9029);
                LinkedList_AddNode(v11, v12, 73, (unsigned __int8)*v4, 0);
              }
              LOBYTE(v16) = *v4;
              a2 = v16;
              if ( (unsigned __int8)sub_65950F20(a1 + 7764) )
              {
                v13 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9030);
                LinkedList_AddNode(v11, v13, 74, (unsigned __int8)*v4, 0);
              }
              v14 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9027);
              LinkedList_AddNode(v11, v14, 72, (unsigned __int8)*v4, 0);
              v3 = i;
            }
          }
        }
      }
    }
LABEL_17:
    ++v3;
  }
  sub_6576D1D0(*(_DWORD **)(a1 + 9368));
  ItemList_Sort(*(char **)(a1 + 9368), 0, 1);
}
// 657DEEA0: could not find valid save-restore pair for esi
// 657DEFE3: conditional instruction was optimized away because ecx.4!=0
// 657DF02E: variable 'v16' is possibly undefined
// 65950F20: using guessed type int __thiscall sub_65950F20(_DWORD);
// 65950F80: using guessed type int __thiscall sub_65950F80(_DWORD, _DWORD, _DWORD);

//----- (657DF560) --------------------------------------------------------
int __thiscall sub_657DF560(int this)
{
  int v2; // ecx
  unsigned int v3; // edi
  int v4; // esi
  int v5; // edi
  int v6; // esi
  int v7; // eax
  int v8; // edi
  const char *v9; // eax
  void *v10; // eax
  int (__thiscall ***v11)(_DWORD, int); // esi
  int (__thiscall **v12)(_DWORD, int); // edx
  _DWORD *v13; // eax
  int v14; // edx
  int (__thiscall ***v15)(_DWORD, int); // edi
  int (__thiscall **v16)(_DWORD, int); // eax
  int v17; // eax
  _DWORD *v18; // esi
  int v19; // edx
  int v20; // eax
  char *v21; // eax
  int (__thiscall ***v22)(_DWORD, int); // eax
  int (__thiscall **v23)(_DWORD, int); // edx
  _DWORD *v24; // eax
  _DWORD *v25; // eax
  int v26; // eax
  const char *v27; // eax
  char *v28; // eax
  int v29; // eax
  const char *v30; // eax
  _DWORD *v31; // eax
  _DWORD *v32; // eax
  unsigned int *v33; // esi
  int v34; // ecx
  float v36[33]; // [esp+10h] [ebp-DCh] BYREF
  int v37; // [esp+94h] [ebp-58h]
  int (__thiscall ***v38)(_DWORD, int); // [esp+98h] [ebp-54h]
  int (__thiscall ***v39)(_DWORD, int); // [esp+9Ch] [ebp-50h]
  _DWORD *v40; // [esp+A0h] [ebp-4Ch]
  int v41; // [esp+A4h] [ebp-48h] BYREF
  unsigned int *Simple; // [esp+A8h] [ebp-44h]
  unsigned int v43; // [esp+ACh] [ebp-40h]
  int v44; // [esp+B0h] [ebp-3Ch] BYREF
  int v45; // [esp+B4h] [ebp-38h]
  int (__thiscall ***v46)(_DWORD, int); // [esp+B8h] [ebp-34h]
  const char *v47; // [esp+BCh] [ebp-30h]
  int v48; // [esp+C0h] [ebp-2Ch]
  int v49; // [esp+C4h] [ebp-28h]
  char v50[16]; // [esp+C8h] [ebp-24h] BYREF

  ListBox_ClearItems(*(int **)(this + 9792));
  unknown_libname_664(&v44);
  v2 = *(_DWORD *)(this + 9864) - *(_DWORD *)(this + 9860);
  v3 = 0;
  v43 = 0;
  if ( v2 / 372 )
  {
    v45 = 0;
    do
    {
      v4 = *(_DWORD *)(this + 9860);
      if ( v3 < (*(_DWORD *)(this + 9864) - v4) / 372 )
      {
        v5 = v4 + v45;
        v48 = v4 + v45;
        if ( v4 + v45 )
        {
          Simple = (unsigned int *)UiWidget_CreateSimple(0, 0, 0, 0, 0, 0);
          if ( Simple )
          {
            v6 = *(_DWORD *)g_pILTClient;
            LOBYTE(v37) = *(_BYTE *)(v5 + 197);
            v7 = sub_6594F930(v37);
            v8 = (*(int (__cdecl **)(int, int, int))(v6 + 64))(g_pILTClient, 883, v7);
            v49 = v8;
            if ( v8 )
              v47 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
            else
              v47 = byte_659A8B98;
            v9 = *(_BYTE *)(v48 + 196) != 0 ? "BFC7FF00" : 0;
            if ( v9 )
            {
              qmemcpy(&unk_65A5E590, &unk_65A5E158, 0x6Cu);
              strncpy(byte_65A5E598, v9, 0xFu);
              v8 = v49;
              byte_65A5E5A7 = 0;
              v10 = &unk_65A5E590;
            }
            else
            {
              v10 = &unk_65A5E158;
            }
            v11 = UiWidget_Create((void *)this, 0, (int)v47, 128, 220, 0, 0, 1, (int)v10, 2, 0, 0, 0);
            v39 = v11;
            if ( v8 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v8);
            if ( v11 )
            {
              v12 = v11[20];
              v11[17] = (int (__thiscall **)(_DWORD, int))((char *)v11[19] + 70);
              v11[21] = (int (__thiscall **)(_DWORD, int))70;
              v11[22] = (int (__thiscall **)(_DWORD, int))10;
              v11[18] = (int (__thiscall **)(_DWORD, int))((char *)v12 + 10);
              v13 = (_DWORD *)sub_657488D0(50, 50, 0.5);
              v40 = v13;
              if ( v13 )
              {
                v14 = v13[20];
                v13[17] = v13[19] + 15;
                v13[21] = 15;
                v13[22] = 8;
                v13[18] = v14 + 8;
                v46 = UiWidget_CreateWithCallback((void *)this, 0, 0, 0);
                if ( v46 )
                {
                  v41 = 0;
                  qmemcpy(v36, (const void *)(v48 + 200), 0x7Cu);
                  GameInput_HandleMouseClick((int **)dword_65ABF6F4, &v41, 1, (int *)v36, 0x30u, 0x30u);
                  v15 = v46;
                  (*v46)[32](v46, v41);
                  v16 = v15[19];
                  v15[18] = (int (__thiscall **)(_DWORD, int))((char *)v15[20] + 9);
                  *((_BYTE *)v15 + 256) = 1;
                  v15[21] = (int (__thiscall **)(_DWORD, int))16;
                  v15[22] = (int (__thiscall **)(_DWORD, int))9;
                  v15[17] = v16 + 4;
                  v17 = sub_657487E0(14, 0.5);
                  v18 = (_DWORD *)v17;
                  if ( v17 )
                  {
                    v19 = *(_DWORD *)(v17 + 76);
                    v20 = *(_DWORD *)(v17 + 80);
                    v18[21] = 65;
                    v18[22] = 27;
                    v18[17] = v19 + 65;
                    v18[18] = v20 + 27;
                    v21 = WindowGroup_CopyEntry(byte_65A5C4A8, 68, "BFC7FF00");
                    v22 = UiWidget_Create((void *)this, 0, v48 + 324, 33, 220, 0, 0, 1, (int)v21, 2, 0, 0, 0);
                    v38 = v22;
                    if ( v22 )
                    {
                      v23 = v22[19];
                      v22[18] = (int (__thiscall **)(_DWORD, int))((char *)v22[20] + 30);
                      v22[21] = (int (__thiscall **)(_DWORD, int))70;
                      v22[22] = (int (__thiscall **)(_DWORD, int))30;
                      v22[17] = (int (__thiscall **)(_DWORD, int))((char *)v23 + 70);
                      v24 = (_DWORD *)sub_657488D0(340, 44, 0.5);
                      LODWORD(v36[31]) = v24;
                      if ( v24 )
                      {
                        CWindow_SetOffset(v24, 8, 62);
                        v25 = UiWidget_Create(
                                (void *)this,
                                0,
                                v48 + 68,
                                129,
                                336,
                                0,
                                0,
                                0,
                                (int)&unk_65A5CD84,
                                2,
                                0,
                                0,
                                0);
                        LODWORD(v36[32]) = v25;
                        if ( v25 )
                        {
                          CWindow_SetOffset(v25, 10, 64);
                          v26 = (*(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64))(
                                  g_pILTClient,
                                  882,
                                  v48 + 12);
                          v49 = v26;
                          if ( v26 )
                            v27 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                                  g_pILTClient,
                                                  v26);
                          else
                            v27 = byte_659A8B98;
                          v28 = (char *)UiWidget_Create(
                                          (void *)this,
                                          0,
                                          (int)v27,
                                          128,
                                          130,
                                          0,
                                          0,
                                          0,
                                          (int)&unk_65A5CE5C,
                                          2,
                                          0,
                                          0,
                                          0);
                          v47 = v28;
                          if ( v49 )
                          {
                            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v49);
                            v28 = (char *)v47;
                          }
                          if ( v28 )
                          {
                            CWindow_SetOffset(v28, 342, 84);
                            if ( *(_WORD *)(v48 + 4) < 0x3E8u )
                            {
                              v44 = *(_DWORD *)(v48 + 8);
                              sub_65947680(*(unsigned __int16 *)(v48 + 4));
                              sub_65948390(v50, &v44);
                              v29 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(
                                      g_pILTClient,
                                      881,
                                      v50);
                            }
                            else
                            {
                              v29 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 885);
                            }
                            v49 = v29;
                            if ( v29 )
                              v30 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                                    g_pILTClient,
                                                    v29);
                            else
                              v30 = byte_659A8B98;
                            v31 = UiWidget_Create(
                                    (void *)this,
                                    0,
                                    (int)v30,
                                    128,
                                    130,
                                    0,
                                    0,
                                    0,
                                    (int)&unk_65A5CE5C,
                                    2,
                                    0,
                                    0,
                                    0);
                            v46 = (int (__thiscall ***)(_DWORD, int))v31;
                            if ( v49 )
                            {
                              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v49);
                              v31 = v46;
                            }
                            if ( v31 )
                            {
                              CWindow_SetOffset(v31, 342, 94);
                              if ( GuildMgr_CheckPermission((_DWORD *)this, 3, 0) )
                              {
                                v32 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                                                  g_pILTClient,
                                                  9007);
                                LinkedList_AddNode(Simple, v32, 90, *(_DWORD *)v48, 0);
                              }
                              v33 = Simple;
                              Button_AddCallbacks((int)Simple, (int)v38);
                              ListBox_AddItem(*(unsigned int **)(this + 9792), (int)v33);
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      v34 = *(_DWORD *)(this + 9864) - *(_DWORD *)(this + 9860);
      v45 += 372;
      v3 = v43 + 1;
      v43 = v3;
    }
    while ( v3 < v34 / 372 );
  }
  ListBox_RefreshDisplay(*(int **)(this + 9792));
  return ListBox_Reset(*(_DWORD **)(this + 9792));
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 65947680: using guessed type int __stdcall sub_65947680(_DWORD);
// 6594F930: using guessed type int __cdecl sub_6594F930(_DWORD);
// 65A5E5A7: using guessed type char byte_65A5E5A7;
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (657DFB30) --------------------------------------------------------
void __thiscall sub_657DFB30(_DWORD *this)
{
  unsigned int **v1; // ebx
  int *v2; // ecx
  unsigned int v3; // eax
  int v4; // eax
  unsigned int **v5; // esi
  unsigned int *Simple; // edi
  unsigned int v7; // eax
  int v8; // eax
  int v9; // edi
  const char *v10; // ebx
  unsigned int v11; // eax
  int v12; // eax
  int v13; // eax
  int (__thiscall ***v14)(_DWORD, int); // eax
  int (__thiscall **v15)(_DWORD, int); // edx
  int (__thiscall **v16)(_DWORD, int); // edx
  _DWORD *v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _BYTE v20[28]; // [esp-54h] [ebp-E0h] BYREF
  _BYTE v21[16]; // [esp-38h] [ebp-C4h] BYREF
  int v22; // [esp-28h] [ebp-B4h]
  int v23; // [esp-24h] [ebp-B0h]
  int v24; // [esp-20h] [ebp-ACh]
  int v25; // [esp-1Ch] [ebp-A8h] BYREF
  int v26; // [esp-18h] [ebp-A4h]
  void *v27; // [esp-14h] [ebp-A0h]
  int v28; // [esp-10h] [ebp-9Ch]
  unsigned int *v29; // [esp-Ch] [ebp-98h]
  int (__thiscall ***v30)(_DWORD, int); // [esp-8h] [ebp-94h]
  int v31; // [esp-4h] [ebp-90h]
  _BYTE v32[28]; // [esp+10h] [ebp-7Ch] BYREF
  _BYTE v33[28]; // [esp+2Ch] [ebp-60h] BYREF
  _BYTE *v34; // [esp+48h] [ebp-44h]
  _BYTE *v35; // [esp+4Ch] [ebp-40h]
  int *v36; // [esp+50h] [ebp-3Ch]
  unsigned int **v37; // [esp+54h] [ebp-38h]
  unsigned int v38; // [esp+58h] [ebp-34h]
  int *v39; // [esp+5Ch] [ebp-30h]
  _BYTE v40[28]; // [esp+60h] [ebp-2Ch] BYREF
  int v41; // [esp+88h] [ebp-4h]

  v1 = (unsigned int **)this;
  v2 = (int *)*(this + 2057);
  v37 = v1;
  ListBox_ClearItems(v2);
  std::string::string(v40);
  LOBYTE(v3) = 0;
  v41 = 0;
  v38 = 0;
  do
  {
    v4 = 8 * (unsigned __int8)v3;
    v5 = &v1[v4 + 2098];
    if ( *(_BYTE *)v5 )
    {
      if ( &v1[v4] != (unsigned int **)-8392 )
      {
        Simple = (unsigned int *)UiWidget_CreateSimple(0, 0, 0, 0, 0, 0);
        v39 = (int *)Simple;
        if ( Simple )
        {
          if ( *(_BYTE *)v5 <= 0xAu )
          {
            v9 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                   g_pILTClient,
                   *(unsigned __int8 *)v5 + 21200);
            if ( v9 )
              v10 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
            else
              v10 = byte_659A8B98;
            v11 = (unsigned int)v5[7];
            v36 = &v25;
            String_FromU32(&v25, v11);
            v35 = v21;
            LOBYTE(v41) = 3;
            String_AssignFromPtr(v21, (int)v10);
            v34 = v20;
            LOBYTE(v41) = 4;
            String_AssignFromPtr(v20, (int)"00B2FF00");
            LOBYTE(v41) = 0;
            v12 = sub_65946220((int)v32, (int)"<font color='{0}'>{1}</font> - {2}");
            LOBYTE(v41) = 5;
            std::string::operator=(v40, v12);
            LOBYTE(v41) = 0;
            std::string::~string(v32);
            if ( v9 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v9);
            Simple = (unsigned int *)v39;
            v1 = v37;
          }
          else
          {
            v7 = (unsigned int)v5[7];
            v39 = &v25;
            String_FromU32(&v25, v7);
            v36 = (int *)v21;
            LOBYTE(v41) = 1;
            String_AssignFromPtr(v21, (int)v5 + 1);
            LOBYTE(v41) = 0;
            v8 = FormatString_Args((int)v33, (int)"{0} - {1}");
            LOBYTE(v41) = 2;
            std::string::operator=(v40, v8);
            LOBYTE(v41) = 0;
            std::string::~string(v33);
          }
          v31 = 0;
          v30 = 0;
          v29 = 0;
          v28 = 2;
          v27 = &unk_65A5C5EC;
          v26 = 1;
          v25 = 0;
          v24 = 0;
          v23 = 233;
          v22 = 256;
          v13 = std::string::c_str(v40);
          v14 = UiWidget_Create(v1, 0, v13, v22, v23, v24, v25, v26, (int)v27, v28, (int)v29, (int)v30, v31);
          if ( v14 )
          {
            v14[17] = v14[19] + 1;
            v15 = v14[20];
            v14[21] = (int (__thiscall **)(_DWORD, int))4;
            v14[22] = (int (__thiscall **)(_DWORD, int))1;
            v14[18] = (int (__thiscall **)(_DWORD, int))((char *)v15 + 1);
            v16 = (int (__thiscall **)(_DWORD, int))*(unsigned __int8 *)v5;
            v31 = 0;
            v30 = v14;
            v29 = Simple;
            v14[126] = v16;
            v14[125] = (int (__thiscall **)(_DWORD, int))1;
            Button_AddCallbacks((int)v29, (int)v30);
            if ( *(_BYTE *)v5 == 1 )
            {
              v17 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9042);
              LinkedList_AddNode(Simple, v17, 68, *(unsigned __int8 *)v5, 0);
            }
            if ( GuildMgr_CheckPermission(v1, 16, *(unsigned __int8 *)v5) )
            {
              v18 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9036);
              LinkedList_AddNode(Simple, v18, 65, *(unsigned __int8 *)v5, 0);
            }
            if ( *(_BYTE *)v5 > 0xAu && GuildMgr_CheckPermission(v1, 26, *(unsigned __int8 *)v5) )
            {
              v19 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9037);
              LinkedList_AddNode(Simple, v19, 67, *(unsigned __int8 *)v5, 0);
            }
            ListBox_AddItem(v1[2057], (int)Simple);
          }
        }
      }
    }
    v3 = v38 + 1;
    v38 = v3;
  }
  while ( v3 < 0x1E );
  v1[2057][671] = 1;
  ListBox_RefreshDisplay((int *)v1[2057]);
  ListBox_Reset(v1[2057]);
  v41 = -1;
  std::string::~string(v40);
}
// 657DFB7E: conditional instruction was optimized away because al.1<1Eu
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (657DFF80) --------------------------------------------------------
char **__thiscall Vector372_EraseOne(char **this, char **a2, char *a3)
{
  char *v3; // edx
  char *v4; // ebx
  char *v5; // eax
  char *v6; // esi
  char *v7; // edi

  v3 = a3;
  v4 = *(this + 2);
  v5 = a3 + 372;
  if ( a3 + 372 != v4 )
  {
    do
    {
      v6 = v5;
      v7 = v3;
      v5 += 372;
      v3 += 372;
      qmemcpy(v7, v6, 0x174u);
    }
    while ( v5 != v4 );
    v3 = a3;
  }
  *(this + 2) -= 372;
  *a2 = v3;
  return a2;
}

//----- (657DFFE0) --------------------------------------------------------
_DWORD *__thiscall sub_657DFFE0(char **this, _DWORD *a2, char *a3)
{
  char *v3; // edx
  char *v4; // ebx
  char *v5; // eax
  const void *v6; // esi
  void *v7; // edi

  v3 = a3;
  v4 = *(this + 2);
  v5 = a3 + 440;
  if ( a3 + 440 != v4 )
  {
    do
    {
      v6 = v5;
      v7 = v3;
      v5 += 440;
      v3 += 440;
      qmemcpy(v7, v6, 0x1B8u);
    }
    while ( v5 != v4 );
    v3 = a3;
  }
  *(this + 2) -= 440;
  *a2 = v3;
  return a2;
}

//----- (657E0080) --------------------------------------------------------
void __thiscall GuildMgr_ToggleRankFlag(_BYTE *this, int a2, char a3)
{
  char v4; // [esp+7h] [ebp-1h] BYREF

  v4 = 0;
  if ( a3 )
    sub_659529B0((_DWORD *)this + 1941, 0, a2, &v4);
  else
    sub_659529B0((_DWORD *)this + 1941, 1, a2, &v4);
  sub_657DEEA0((int)this, (int)this);
  *(this + 9384) = 0;
}

//----- (657E00D0) --------------------------------------------------------
void __thiscall GuildNotes_SetMemberNote(char *this, char a2, char *Source)
{
  char *v4; // esi
  unsigned int v5; // eax
  char *v6; // ecx
  char *v7; // eax
  char v8; // [esp+Ch] [ebp-24h] BYREF
  char Destination[27]; // [esp+Dh] [ebp-23h] BYREF
  int v10; // [esp+28h] [ebp-8h]

  v4 = this + 8392;
  v5 = 0;
  v6 = this + 8392;
  while ( *v6 != a2 )
  {
    ++v5;
    v6 += 32;
    if ( v5 >= 0x1E )
      goto LABEL_6;
  }
  v7 = &v4[32 * v5];
  if ( !v7 )
  {
LABEL_6:
    Destination[0] = 0;
    v10 = 0;
    v8 = a2;
    strncpy_s(Destination, 0x18u, Source, 0xFFFFFFFF);
    sub_657D5CF0(v4, &v8);
    goto LABEL_8;
  }
  strncpy_s(v7 + 1, 0x18u, Source, 0xFFFFFFFF);
LABEL_8:
  sub_657DFB30(this);
}

//----- (657E0170) --------------------------------------------------------
void __thiscall GuildMgr_RemoveMemberByIndex(char *this, char a2)
{
  sub_657D5D60(this + 8392, a2);
  sub_65952A40((_DWORD *)this + 1941, 16, a2);
  sub_657DFB30(this);
}

//----- (657E01B0) --------------------------------------------------------
void __thiscall GuildMgr_TransferBankPoints(char *this, unsigned int a2, char a3, char a4)
{
  char *v4; // esi
  unsigned int v5; // eax
  char *v6; // edx
  char *v7; // eax
  unsigned int v8; // edx
  unsigned int v9; // eax
  char *v10; // edx
  char *v11; // eax

  v4 = this + 8392;
  v5 = 0;
  v6 = this + 8392;
  while ( *v6 != a3 )
  {
    ++v5;
    v6 += 32;
    if ( v5 >= 0x1E )
      goto LABEL_9;
  }
  v7 = &v4[32 * v5];
  if ( v7 )
  {
    v8 = *((_DWORD *)v7 + 7);
    if ( a2 <= v8 )
      *((_DWORD *)v7 + 7) = v8 - a2;
    else
      *((_DWORD *)v7 + 7) = 0;
  }
LABEL_9:
  v9 = 0;
  v10 = this + 8392;
  while ( *v10 != a4 )
  {
    ++v9;
    v10 += 32;
    if ( v9 >= 0x1E )
      goto LABEL_15;
  }
  v11 = &v4[32 * v9];
  if ( v11 )
    *((_DWORD *)v11 + 7) += a2;
LABEL_15:
  sub_657DFB30(this);
}

//----- (657E0240) --------------------------------------------------------
void __thiscall GuildMgr_AddMemberBankPoints(char *this, char a2, int a3)
{
  unsigned int v3; // eax
  char *v4; // edx
  char *v5; // eax

  v3 = 0;
  v4 = this + 8392;
  while ( *v4 != a2 )
  {
    ++v3;
    v4 += 32;
    if ( v3 >= 0x1E )
      goto LABEL_7;
  }
  v5 = this + 32 * v3 + 8392;
  if ( v5 )
    *((_DWORD *)v5 + 7) += a3;
LABEL_7:
  sub_657DFB30(this);
}

//----- (657E0460) --------------------------------------------------------
_DWORD *__thiscall sub_657E0460(char **this, _DWORD *a2, char *a3)
{
  char *v3; // edx
  char *v4; // ebx
  char *v5; // eax
  const void *v6; // esi
  void *v7; // edi

  v3 = a3;
  v4 = *(this + 2);
  v5 = a3 + 320;
  if ( a3 + 320 != v4 )
  {
    do
    {
      v6 = v5;
      v7 = v3;
      v5 += 320;
      v3 += 320;
      qmemcpy(v7, v6, 0x140u);
    }
    while ( v5 != v4 );
    v3 = a3;
  }
  *(this + 2) -= 320;
  *a2 = v3;
  return a2;
}

//----- (657E04F0) --------------------------------------------------------
int __thiscall GuildUI_ClearSelectedMember(_DWORD *this)
{
  char *v2; // eax
  char *v3; // edx
  int v4; // ecx
  int v6; // [esp+8h] [ebp-4h] BYREF

  UiText_SetValueIfChanged(*(this + 3507), (char *)byte_659A8B98, 0, 0);
  v2 = (char *)*(this + 1930);
  v3 = (char *)*(this + 1931);
  if ( v2 != v3 )
  {
    while ( *(_DWORD *)v2 != *(this + 3511) )
    {
      v2 += 440;
      if ( v2 == v3 )
        goto LABEL_6;
    }
    sub_657DFFE0((char **)this + 1929, &v6, v2);
  }
LABEL_6:
  v4 = *(this + 3506);
  *(this + 3511) = 0;
  UiText_SetValueIfChanged(v4, (char *)byte_659A8B98, 0, 0);
  return sub_657D9D20((int)this);
}

//----- (657E0570) --------------------------------------------------------
int __thiscall PlayerList_FindAndSelect(char **this, int a2)
{
  char *v3; // eax
  char *v4; // edx
  char **v5; // ecx

  v3 = *(this + 2465);
  v4 = *(this + 2466);
  v5 = this + 2464;
  if ( v3 != v4 )
  {
    while ( *(_DWORD *)v3 != a2 )
    {
      v3 += 372;
      if ( v3 == v4 )
        return sub_657DF560((int)this);
    }
    Vector372_EraseOne(v5, (char **)&a2, v3);
  }
  return sub_657DF560((int)this);
}

//----- (657E1160) --------------------------------------------------------
char __thiscall Vector320_FindAndRemoveById(char **this, int a2)
{
  char *v2; // eax
  char *v3; // edx

  v2 = *(this + 1);
  v3 = *(this + 2);
  if ( v2 == v3 )
    return 0;
  while ( *(_DWORD *)v2 != a2 )
  {
    v2 += 320;
    if ( v2 == v3 )
      return 0;
  }
  sub_657E0460(this, &a2, v2);
  return 1;
}

//----- (657E1410) --------------------------------------------------------
void __thiscall CharWindow_RefreshList(char *this)
{
  char *v1; // esi

  v1 = this + 7804;
  sub_659528D0((_DWORD *)this + 1941, (int)(this + 7804), 0);
  PacketBlockState_Reset(v1);
}

//----- (657E1430) --------------------------------------------------------
void __thiscall CharWindow_SelectPlayer(char **this, int a2)
{
  int v3; // eax

  if ( a2 )
  {
    Vector320_FindAndRemoveById(this + 1933, a2);
    v3 = (int)*(this + 1510);
    if ( v3 && *(_DWORD *)(v3 + 4) == 36 )
      GuildMemberList_RefreshWithActions((int *)this);
    else
      GuildMemberList_Refresh(this);
  }
}

//----- (657E7D10) --------------------------------------------------------
_BYTE *__thiscall Widget_ForwardInputEvent(void *this, _BYTE *a2, _BYTE *a3, _BYTE *a4)
{
  return Array68_CopyRange(a2, a3, a4);
}

//----- (657E7F00) --------------------------------------------------------
int *__thiscall Vector68_Assign(int *this, int *a2)
{
  int v5; // ebx
  unsigned int v6; // ecx
  _BYTE *v7; // eax
  unsigned int v8; // eax
  unsigned int v9; // [esp+10h] [ebp+8h]
  _BYTE *v10; // [esp+10h] [ebp+8h]

  if ( this != a2 )
  {
    v9 = (a2[2] - a2[1]) / 68;
    if ( !v9 )
    {
      PacketArray68_Compact(this);
      return this;
    }
    v5 = *(this + 1);
    v6 = (*(this + 2) - v5) / 68;
    if ( v9 <= v6 )
    {
      v7 = PacketArray88_FilterDefault((_BYTE *)a2[1], (_BYTE *)a2[2], (_BYTE *)*(this + 1));
      PacketArray68_DestroyRange((int)v7, *(this + 2));
      *(this + 2) = *(this + 1) + 68 * ((a2[2] - a2[1]) / 68);
      return this;
    }
    if ( v5 )
      v8 = (*(this + 3) - v5) / 68;
    else
      v8 = 0;
    if ( v9 <= v8 )
    {
      v10 = (_BYTE *)(a2[1] + 68 * v6);
      PacketArray88_FilterDefault((_BYTE *)a2[1], v10, (_BYTE *)*(this + 1));
      *(this + 2) = (int)Widget_ForwardInputEvent(this, v10, (_BYTE *)a2[2], (_BYTE *)*(this + 2));
      return this;
    }
    if ( v5 )
    {
      PacketArray68_DestroyWrapper(v5, *(this + 2));
      operator delete((void *)*(this + 1));
    }
    if ( Vector68_Reserve(this, (a2[2] - a2[1]) / 68) )
      *(this + 2) = (int)Widget_ForwardInputEvent(this, (_BYTE *)a2[1], (_BYTE *)a2[2], (_BYTE *)*(this + 1));
  }
  return this;
}

//----- (657EE770) --------------------------------------------------------
void __thiscall ItemWindow_OnConfirm(_DWORD *this)
{
  char *WindowById; // edi
  unsigned int v3; // eax

  if ( *(this + 1836) )
  {
    WindowById = (char *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
    if ( WindowById )
    {
      if ( *(_DWORD *)(*(this + 1845) + 176) )
        v3 = atoi(*(const char **)(*(this + 1845) + 176));
      else
        v3 = 0;
      GuildMgr_TransferBankPoints(WindowById, v3, *(_BYTE *)*(this + 1836), *((_BYTE *)this + 7448));
    }
    (*(void (__thiscall **)(_DWORD *, _DWORD))(*this + 28))(this, 0);
  }
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (657EF500) --------------------------------------------------------
char __thiscall TradeWindow_SetState(int this, int a2, char a3, char a4, char a5)
{
  *(_DWORD *)(this + 6372) = a2;
  *(_BYTE *)(this + 6368) = a3;
  *(_BYTE *)(this + 6369) = a4;
  *(_BYTE *)(this + 6376) = a5;
  return a4;
}

//----- (657EFBC0) --------------------------------------------------------
int __thiscall Widget_SendMessage5(void *this)
{
  return (*(int (__thiscall **)(void *, int, _DWORD, _DWORD))(*(_DWORD *)this + 4))(this, 5, 0, 0);
}

//----- (657F03C0) --------------------------------------------------------
void __thiscall FriendListUI_PopulateList(int *this, int a2)
{
  unsigned __int16 v3; // si
  int v4; // esi
  _BYTE *v5; // esi
  char *v6; // eax
  int v7; // edx
  int v8; // eax
  int v9; // ecx
  unsigned int *v10; // edi
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  char v13; // al
  _DWORD *v14; // eax
  int v15; // eax
  int v16; // esi
  char *v17; // eax
  unsigned __int16 v18; // [esp+20h] [ebp-Ch]
  int v19; // [esp+24h] [ebp-8h]
  int v20; // [esp+28h] [ebp-4h]
  unsigned int v21; // [esp+34h] [ebp+8h]

  sub_6576D9C0((_DWORD *)*(this + 1595));
  VectorData_CopyFrom((int)(this + 1599), a2);
  v3 = (*(this + 1601) - *(this + 1600)) / 320;
  v18 = v3;
  if ( v3 )
  {
    v21 = 0;
    v20 = 0;
    v19 = v3;
    do
    {
      v4 = *(this + 1600);
      if ( v21 < (*(this + 1601) - v4) / 320 )
      {
        v5 = (_BYTE *)(v20 + v4);
        if ( v5 )
        {
          v6 = UiWidget_CreateWithParams(v5, 1.0, 250, 1, v5[4] != 0, 0);
          if ( v6 )
          {
            sub_6576D0F0((_DWORD *)*(this + 1595), *(_DWORD *)v5, (unsigned __int8)v5[4], 0, 25, (int)v6);
            v7 = *(_DWORD *)(*(this + 1595) + 2236);
            if ( v7 )
            {
              v8 = 0;
              while ( 1 )
              {
                v9 = *(_DWORD *)(v7 + 4 * v8);
                if ( v9 )
                {
                  if ( *(_DWORD *)(v9 + 4) == 24 )
                    break;
                }
                if ( (unsigned int)++v8 >= 0xA )
                  goto LABEL_17;
              }
              v10 = *(unsigned int **)(v7 + 4 * v8);
              v11 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9028);
              LinkedList_AddNode(v10, v11, 11, *(_DWORD *)v5, (unsigned __int8)v5[4]);
              v12 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9015);
              LinkedList_AddNode(v10, v12, 6, *(_DWORD *)v5, 0);
              v13 = v5[4];
              if ( v13 == 2 )
              {
                v14 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9016);
                LinkedList_AddNode(v10, v14, 7, *(_DWORD *)v5, 0);
              }
              else if ( !v13 )
              {
                v15 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6049);
                UiItemSlot_SetTooltipHString((int *)v10, v15);
              }
            }
          }
        }
      }
LABEL_17:
      v20 += 320;
      ++v21;
      --v19;
    }
    while ( v19 );
    v3 = v18;
  }
  sub_6576D1D0((_DWORD *)*(this + 1595));
  ItemList_Sort((char *)*(this + 1595), 0, 1);
  v16 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4322, v3);
  if ( v16 )
    v17 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v16);
  else
    v17 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(this + 1596), v17, 0, 0);
  if ( v16 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v16);
}
// 657F04CE: conditional instruction was optimized away because ecx.4!=0

//----- (657F0640) --------------------------------------------------------
void __thiscall ChatInput_SetNameAndFocus(int this, char *Source, int a3)
{
  if ( Source )
  {
    if ( a3 )
    {
      *(_DWORD *)(this + 6288) = 0;
      *(_DWORD *)(this + 6376) = a3;
      strncpy_s((char *)(this + 6380), 0x14u, Source, 0xFFFFFFFF);
      UiText_SetValueIfChanged(*(_DWORD *)(this + 6368), (char *)(this + 6380), 0, 0);
    }
  }
}

//----- (657F0A20) --------------------------------------------------------
void __thiscall FriendListUI_ClearAll(int *this)
{
  int i; // edi
  int v3; // eax
  bool v4; // zf
  void (__thiscall ****v5)(_DWORD, int); // eax
  void (__thiscall ***v6)(_DWORD, int); // eax
  int *v7; // ecx

  for ( i = 0; i < *(this + 1604); ++i )
  {
    v3 = *(this + 1603);
    v4 = *(_DWORD *)(v3 + 4 * i) == 0;
    v5 = (void (__thiscall ****)(_DWORD, int))(v3 + 4 * i);
    if ( !v4 )
    {
      v6 = *v5;
      if ( v6 )
        (**v6)(v6, 1);
    }
  }
  ItemList_RemoveAt2(this + 1602, 0);
  v7 = (int *)*(this + 1593);
  *(this + 1600) = 0;
  Slider_SetTickCount(v7, 0);
  JUMPOUT(0x65772780);
}
// 657F0A84: control flows out of bounds to 65772780

//----- (657F0A90) --------------------------------------------------------
int __thiscall ChatInput_ClearAndReset(void *this)
{
  *((_DWORD *)this + 1572) = 0;
  *((_DWORD *)this + 1594) = 0;
  strncpy_s((char *)this + 6380, 0x14u, byte_659A8B98, 0xFFFFFFFF);
  UiText_SetValueIfChanged(*((_DWORD *)this + 1592), (char *)byte_659A8B98, 0, 0);
  FriendListUI_ClearAll((int *)this);
  return (*(int (__thiscall **)(void *, _DWORD))(*(_DWORD *)this + 28))(this, 0);
}

//----- (657F2E30) --------------------------------------------------------
int __thiscall MsgId_88_WindowClose(_BYTE *this, char a2)
{
  int v3; // esi
  char *v4; // eax
  int Dword_this; // eax
  char v6; // cl
  int v7; // eax
  char v9[12]; // [esp+Ch] [ebp-460h] BYREF
  _BYTE v10[1060]; // [esp+18h] [ebp-454h] BYREF
  int v11; // [esp+43Ch] [ebp-30h]
  char v12; // [esp+440h] [ebp-2Ch]
  int v13; // [esp+444h] [ebp-28h]
  char v14; // [esp+44Ch] [ebp-20h]
  int v15; // [esp+468h] [ebp-4h]

  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x10000);
  v3 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4366);
  if ( v3 )
    v4 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
  else
    v4 = (char *)byte_659A8B98;
  FriendList_AddEntry(dword_65ABF748, v4, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
  if ( v3 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v3);
  if ( a2 )
  {
    Packet_ID_152_Ctor(v9);
    v15 = 0;
    Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    v6 = *(this + 7440);
    v11 = Dword_this;
    v7 = *((_DWORD *)this + 1859);
    v14 = v6;
    v12 = 10;
    v13 = v7;
    LTClient_SendPacket_BuildIfNeeded(v9, 2, 1, 3, 0);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 0x10000);
    v15 = -1;
    *(_DWORD *)v9 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v10);
  }
  return (*(int (__cdecl **)(int))(*(_DWORD *)this + 4))(4);
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (657F46B0) --------------------------------------------------------
void __thiscall sub_657F46B0(int *this, int a2)
{
  _DWORD *WindowById; // ebx
  int v4; // ebx
  int v5; // eax
  int v6; // edi
  _DWORD *v7; // eax
  int v8; // edx
  int v9; // ecx
  int v10; // edx
  int v11; // edx
  int v12; // edx
  int v13; // edx
  int v14; // edx
  int v15; // edx
  int v16; // edx
  int v17; // edx
  char *v18; // eax
  int v19; // [esp-10h] [ebp-BCh]
  int v20; // [esp-Ch] [ebp-B8h]
  int v21; // [esp-8h] [ebp-B4h]
  int v22; // [esp-4h] [ebp-B0h]
  _BYTE v23[28]; // [esp+10h] [ebp-9Ch] BYREF
  _BYTE v24[28]; // [esp+2Ch] [ebp-80h] BYREF
  _BYTE v25[28]; // [esp+48h] [ebp-64h] BYREF
  _BYTE v26[28]; // [esp+64h] [ebp-48h] BYREF
  _BYTE v27[28]; // [esp+80h] [ebp-2Ch] BYREF
  int v28; // [esp+A8h] [ebp-4h]

  *(this + 1597) = 0;
  switch ( a2 )
  {
    case 1:
      WindowById = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 6u);
      if ( WindowById )
      {
        std::string::string(v23);
        v28 = 0;
        UIDataSource_GetFormattedString(WindowById, 6, (int)v23);
        std::string::string(v25);
        LOBYTE(v28) = 1;
        UIDataSource_GetFormattedString(WindowById, 11, (int)v25);
        std::string::string(v27);
        LOBYTE(v28) = 2;
        UIDataSource_GetFormattedString(WindowById, 10, (int)v27);
        std::string::string(v24);
        LOBYTE(v28) = 3;
        UIDataSource_GetFormattedString(WindowById, 57, (int)v24);
        std::string::string(v26);
        LOBYTE(v28) = 4;
        UIDataSource_GetFormattedString(WindowById, 55, (int)v26);
        v4 = *(_DWORD *)g_pILTClient;
        v22 = std::string::c_str(v26);
        v21 = std::string::c_str(v24);
        v20 = std::string::c_str(v27);
        v19 = std::string::c_str(v25);
        v5 = std::string::c_str(v23);
        v6 = (*(int (__cdecl **)(int, int, int, int, int, int, int))(v4 + 64))(
               g_pILTClient,
               a2 + 22561,
               v5,
               v19,
               v20,
               v21,
               v22);
        LOBYTE(v28) = 3;
        std::string::~string(v26);
        LOBYTE(v28) = 2;
        std::string::~string(v24);
        LOBYTE(v28) = 1;
        std::string::~string(v27);
        LOBYTE(v28) = 0;
        std::string::~string(v25);
        v28 = -1;
        std::string::~string(v23);
        goto LABEL_14;
      }
      return;
    case 2:
      *(this + 1597) = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 4u);
      v7 = (_DWORD *)*(this + 1596);
      v11 = v7[20];
      v9 = v7[19] + 10;
      v7[22] = 31;
      v10 = v11 + 31;
      goto LABEL_12;
    case 3:
      *(this + 1597) = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 4u);
      v7 = (_DWORD *)*(this + 1596);
      v12 = v7[20];
      v9 = v7[19] + 10;
      v7[22] = 74;
      v10 = v12 + 74;
      goto LABEL_12;
    case 4:
      *(this + 1597) = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 4u);
      v7 = (_DWORD *)*(this + 1596);
      v13 = v7[20];
      v9 = v7[19] + 10;
      v7[22] = 117;
      v10 = v13 + 117;
      goto LABEL_12;
    case 5:
      *(this + 1597) = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 4u);
      v7 = (_DWORD *)*(this + 1596);
      v14 = v7[20];
      v9 = v7[19] + 10;
      v7[22] = 154;
      v10 = v14 + 154;
      goto LABEL_12;
    case 6:
      *(this + 1597) = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 4u);
      v7 = (_DWORD *)*(this + 1596);
      v15 = v7[20];
      v9 = v7[19] + 10;
      v7[22] = 194;
      v10 = v15 + 194;
      goto LABEL_12;
    case 7:
      *(this + 1597) = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 4u);
      v7 = (_DWORD *)*(this + 1596);
      v17 = v7[20];
      v9 = v7[19] + 10;
      v7[22] = 287;
      v10 = v17 + 287;
      goto LABEL_12;
    case 25:
      *(this + 1597) = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 4u);
      v7 = (_DWORD *)*(this + 1596);
      v8 = v7[20];
      v9 = v7[19] + 10;
      v7[22] = -15;
      v10 = v8 - 15;
      goto LABEL_12;
    case 26:
      *(this + 1597) = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 4u);
      v7 = (_DWORD *)*(this + 1596);
      v16 = v7[20];
      v9 = v7[19] + 10;
      v7[22] = 242;
      v10 = v16 + 242;
LABEL_12:
      v7[18] = v10;
      v7[17] = v9;
      v7[21] = 10;
      break;
    default:
      break;
  }
  v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, a2 + 22561);
LABEL_14:
  if ( v6 )
  {
    v18 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
    UiText_SetValueIfChanged(*(this + 1592), v18, 0, 0);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
  }
}
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF708: using guessed type int dword_65ABF708;

//----- (657F4CD0) --------------------------------------------------------
_DWORD *__cdecl sub_657F4CD0(_DWORD *a1, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  _DWORD *i; // ecx

  for ( i = a2; i != a3; ++i )
  {
    if ( *i == *a4 )
      break;
  }
  *a1 = i;
  return a1;
}

//----- (657F5440) --------------------------------------------------------
void __thiscall HintSystem_TriggerHint(void *this, int a2)
{
  int v3; // ebx
  _DWORD *v4; // edi
  __time64_t v5; // rax
  bool v6; // bl
  bool v7; // zf
  void (__thiscall *v8)(void *, int); // eax
  int v9; // [esp+4h] [ebp-4h] BYREF

  if ( LTClient_SendMessage((int)"EnableHints", 1) )
  {
    v3 = a2;
    if ( a2 )
    {
      if ( SharedMem_ReadDword_this(dword_65ABF73C, 0) != 31 && (*((_QWORD *)this + 804) & (164 << v3)) == 0 )
      {
        v4 = (_DWORD *)*((_DWORD *)this + 1601);
        if ( (_DWORD *)*sub_657F4CD0(&v9, *((_DWORD **)this + 1600), v4, &a2) == v4 )
        {
          switch ( v3 )
          {
            case 1:
            case 2:
            case 3:
            case 4:
            case 5:
            case 6:
            case 7:
            case 8:
            case 21:
            case 22:
            case 24:
            case 25:
            case 26:
              LODWORD(v5) = 0;
              *((_DWORD *)this + 1605) = 0;
              break;
            default:
              v5 = _time64(0) + 15;
              *((_DWORD *)this + 1605) = HIDWORD(v5);
              break;
          }
          *((_DWORD *)this + 1604) = v5;
          v6 = (*((_DWORD *)this + 1601) - *((_DWORD *)this + 1600)) >> 2 != 0;
          Vector_PushBackPtr((char **)this + 1599, &a2);
          if ( !v6 )
            sub_657F46B0((int *)this, a2);
          v7 = *((_BYTE *)this + 6241) == 0;
          *((_BYTE *)this + 6392) = 0;
          if ( v7 )
          {
            v8 = *(void (__thiscall **)(void *, int))(*(_DWORD *)this + 28);
            *((float *)this + 1575) = 0.0;
            v8(this, 1);
          }
        }
      }
    }
  }
}

//----- (657F5660) --------------------------------------------------------
void __thiscall WindowMgr_HandleWindowSwitch(void *this, int a1)
{
  int WindowById; // eax
  char v4; // al

  switch ( a1 )
  {
    case 19:
      WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
      if ( WindowById )
      {
        v4 = *(_BYTE *)(WindowById + 7096);
        if ( v4 == 5 || v4 == 19 )
          HintSystem_TriggerHint(this, 10);
        else
          HintSystem_TriggerHint(this, 11);
      }
      break;
    case 21:
      HintSystem_TriggerHint(this, 12);
      break;
    case 22:
      HintSystem_TriggerHint(this, 13);
      break;
    case 29:
      HintSystem_TriggerHint(this, 9);
      break;
    case 34:
      HintSystem_TriggerHint(this, 15);
      break;
    case 35:
      HintSystem_TriggerHint(this, 16);
      break;
    case 36:
      HintSystem_TriggerHint(this, 17);
      break;
    case 39:
      HintSystem_TriggerHint(this, 14);
      break;
    case 44:
      HintSystem_TriggerHint(this, 18);
      break;
    case 46:
      HintSystem_TriggerHint(this, 19);
      break;
    case 48:
      HintSystem_TriggerHint(this, 23);
      break;
    case 51:
      HintSystem_TriggerHint(this, 20);
      break;
    default:
      return;
  }
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (657F5B60) --------------------------------------------------------
__time64_t __thiscall UiTimer_SetTextAndDelay(_QWORD *this, char *a2)
{
  __time64_t result; // rax

  UiText_SetValueIfChanged(*((_DWORD *)this + 1603), a2, 0, 0);
  result = _time64(0) + 45;
  *(this + 798) = result;
  return result;
}

//----- (657F82A0) --------------------------------------------------------
int __thiscall MsgId_86_WindowClose(void *this)
{
  return (*(int (__thiscall **)(void *, int, int, _DWORD))(*(_DWORD *)this + 4))(this, 5, 1, 0);
}

//----- (657F82B0) --------------------------------------------------------
int __thiscall PopupUI_ShowMessage(int this, int a2, char *a3)
{
  int v4; // ecx
  int v5; // ecx

  if ( !*(_BYTE *)(this + 6241) )
  {
    v4 = *(_DWORD *)(this + 6372);
    *(_DWORD *)(this + 6368) = a2;
    UiText_SetValueIfChanged(v4, "X", 0, 0);
    v5 = *(_DWORD *)(this + 6372);
    if ( a3 )
      UiText_SetValueIfChanged(v5, a3, 1, 0);
    else
      UiText_SetValueIfChanged(v5, (char *)byte_659A8B98, 1, 0);
    WindowMgr_SetFocusWindow((_DWORD *)dword_65ABF708, *(_DWORD **)(this + 6372), this);
    TextWidget_UpdateCursor(*(_DWORD **)(this + 6372));
    *(_DWORD *)(this + 14036) = 0;
  }
  return 1;
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (657F8920) --------------------------------------------------------
void __cdecl __noreturn Vector76_ThrowLengthError(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657F89C0) --------------------------------------------------------
void __cdecl __noreturn sub_657F89C0(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657F8A60) --------------------------------------------------------
int __cdecl RBTree_FindLeftmost(int a1)
{
  int result; // eax
  int i; // ecx

  result = a1;
  for ( i = *(_DWORD *)(a1 + 8); !*(_BYTE *)(i + 45); i = *(_DWORD *)(i + 8) )
    result = i;
  return result;
}

//----- (657F8A80) --------------------------------------------------------
_DWORD *__cdecl RBTree_FindRightmost(_DWORD *a1)
{
  _DWORD *result; // eax
  int *v2; // ecx

  result = a1;
  v2 = (int *)*a1;
  if ( !*(_BYTE *)(*a1 + 45) )
  {
    do
    {
      result = v2;
      v2 = (int *)*v2;
    }
    while ( !*((_BYTE *)v2 + 45) );
  }
  return result;
}

//----- (657F8B70) --------------------------------------------------------
void *__cdecl SafeNew76Array_CheckOverflow(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x4C )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(76 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (657F8BD0) --------------------------------------------------------
void *__cdecl sub_657F8BD0(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x914 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(2324 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (657F9480) --------------------------------------------------------
_DWORD *__thiscall RBTree_RotateLeft2(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  _DWORD *v4; // ecx

  result = *(_DWORD **)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *result;
  if ( !*(_BYTE *)(*result + 45) )
    *(_DWORD *)(*result + 4) = a2;
  result[1] = *(_DWORD *)(a2 + 4);
  v3 = *(this + 1);
  if ( a2 == *(_DWORD *)(v3 + 4) )
  {
    *(_DWORD *)(v3 + 4) = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  else
  {
    v4 = *(_DWORD **)(a2 + 4);
    if ( a2 == *v4 )
      *v4 = result;
    else
      v4[2] = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  return result;
}

//----- (657F94E0) --------------------------------------------------------
int __thiscall RBTree_RotateRight2(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // esi
  int v4; // ecx
  _DWORD *v5; // ecx

  result = *a2;
  *a2 = *(_DWORD *)(*a2 + 8);
  v3 = *(_DWORD *)(result + 8);
  if ( !*(_BYTE *)(v3 + 45) )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(result + 4) = a2[1];
  v4 = *(this + 1);
  if ( a2 == *(_DWORD **)(v4 + 4) )
  {
    *(_DWORD *)(v4 + 4) = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  else
  {
    v5 = (_DWORD *)a2[1];
    if ( a2 == (_DWORD *)v5[2] )
      v5[2] = result;
    else
      *v5 = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  return result;
}

//----- (657F9550) --------------------------------------------------------
int *__thiscall RBTree_Iterator_Increment(int **this)
{
  int *result; // eax
  int *v2; // edx

  result = *this;
  if ( !*((_BYTE *)*this + 45) )
  {
    v2 = (int *)result[2];
    if ( *((_BYTE *)v2 + 45) )
    {
      for ( result = (int *)result[1]; !*((_BYTE *)result + 45); result = (int *)result[1] )
      {
        if ( *this != (int *)result[2] )
          break;
        *this = result;
      }
      *this = result;
    }
    else
    {
      result = (int *)*v2;
      if ( !*(_BYTE *)(*v2 + 45) )
      {
        do
        {
          v2 = result;
          result = (int *)*result;
        }
        while ( !*((_BYTE *)result + 45) );
      }
      *this = v2;
    }
  }
  return result;
}

//----- (657F97F0) --------------------------------------------------------
char *__cdecl Array76_CopyRange(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 76 )
  {
    if ( result )
      qmemcpy(result, v3, 0x4Cu);
    v3 += 76;
  }
  return result;
}

//----- (657F9FB0) --------------------------------------------------------
_DWORD *__stdcall sub_657F9FB0(int a1, int a2, int a3, _DWORD *a4, char a5)
{
  _DWORD *v5; // eax
  _DWORD *v6; // esi
  _DWORD v8[10]; // [esp+0h] [ebp-28h] BYREF

  v8[6] = v8;
  v5 = operator new(0x30u);
  v6 = v5;
  v8[5] = v5;
  v8[9] = 1;
  v8[4] = v5;
  if ( v5 )
  {
    *v5 = a1;
    v5[1] = a2;
    v5[2] = a3;
    v5[3] = *a4;
    std::string::string(v5 + 4, a4 + 1);
    *((_BYTE *)v6 + 44) = a5;
    *((_BYTE *)v6 + 45) = 0;
  }
  return v6;
}
// 659A82A8: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (657FA0A0) --------------------------------------------------------
_DWORD *RBTreeNode48_Alloc()
{
  _DWORD *result; // eax

  result = operator new(0x30u);
  if ( result )
    *result = 0;
  if ( result != (_DWORD *)-4 )
    result[1] = 0;
  if ( result != (_DWORD *)-8 )
    result[2] = 0;
  *((_BYTE *)result + 44) = 1;
  *((_BYTE *)result + 45) = 0;
  return result;
}

//----- (657FAF40) --------------------------------------------------------
void __stdcall RBTree_DeleteNodes_Recursive(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; !*((_BYTE *)i + 45); v1 = i )
  {
    RBTree_DeleteNodes_Recursive((void **)i[2]);
    i = (void **)*i;
    std::string::~string(v1 + 4);
    operator delete(v1);
  }
}

//----- (657FAF90) --------------------------------------------------------
_DWORD *__thiscall RBTree_Erase(_DWORD *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // ebx
  int v4; // edi
  _DWORD *v5; // eax
  _DWORD *v6; // edx
  int v7; // esi
  _DWORD *v8; // ecx
  int v9; // eax
  _DWORD *Rightmost; // eax
  int v11; // ecx
  int v12; // ecx
  _DWORD *v13; // ecx
  char *v14; // ecx
  char *v15; // eax
  char v16; // dl
  _DWORD *i; // ecx
  _BYTE *v18; // eax
  int v19; // eax
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-5Ch] BYREF
  _BYTE v22[28]; // [esp+38h] [ebp-34h] BYREF
  int v23; // [esp+54h] [ebp-18h]
  void *v24; // [esp+58h] [ebp-14h]
  _DWORD *v25; // [esp+5Ch] [ebp-10h]
  int v26; // [esp+68h] [ebp-4h]

  v25 = this;
  v3 = (_DWORD *)a3;
  if ( *(_BYTE *)(a3 + 45) )
  {
    std::string::string(v22, "invalid map/set<T> iterator");
    v26 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v22);
    pExceptionObject[0] = &off_659BFD34;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVout_of_range_std__);
  }
  v24 = (void *)a3;
  RBTree_Iterator_Increment((int **)&a3);
  if ( *(_BYTE *)(*v3 + 45) )
  {
    v4 = v3[2];
LABEL_8:
    v7 = v3[1];
    if ( !*(_BYTE *)(v4 + 45) )
      *(_DWORD *)(v4 + 4) = v7;
    v8 = v25;
    v9 = v25[1];
    if ( *(_DWORD **)(v9 + 4) == v3 )
    {
      *(_DWORD *)(v9 + 4) = v4;
    }
    else if ( *(_DWORD **)v7 == v3 )
    {
      *(_DWORD *)v7 = v4;
    }
    else
    {
      *(_DWORD *)(v7 + 8) = v4;
    }
    if ( *(_DWORD **)v8[1] == v3 )
    {
      if ( *(_BYTE *)(v4 + 45) )
      {
        Rightmost = (_DWORD *)v7;
      }
      else
      {
        Rightmost = RBTree_FindRightmost((_DWORD *)v4);
        v8 = v25;
      }
      *(_DWORD *)v8[1] = Rightmost;
    }
    v11 = v8[1];
    v23 = v11;
    if ( *(_DWORD **)(v11 + 8) == v3 )
    {
      if ( *(_BYTE *)(v4 + 45) )
        *(_DWORD *)(v11 + 8) = v7;
      else
        *(_DWORD *)(v23 + 8) = RBTree_FindLeftmost(v4);
    }
    goto LABEL_36;
  }
  if ( *(_BYTE *)(v3[2] + 45) )
  {
    v4 = *v3;
    goto LABEL_8;
  }
  v5 = (_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 8);
  v6 = (_DWORD *)(a3 + 8);
  if ( (_DWORD *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*v3 + 4) = a3;
  *v5 = *v3;
  if ( v5 == (_DWORD *)v3[2] )
  {
    v7 = (int)v5;
  }
  else
  {
    v7 = v5[1];
    if ( !*(_BYTE *)(v4 + 45) )
      *(_DWORD *)(v4 + 4) = v7;
    *(_DWORD *)v7 = v4;
    *v6 = v3[2];
    *(_DWORD *)(v3[2] + 4) = v5;
  }
  v12 = v25[1];
  if ( *(_DWORD **)(v12 + 4) == v3 )
  {
    *(_DWORD *)(v12 + 4) = v5;
  }
  else
  {
    v13 = (_DWORD *)v3[1];
    if ( (_DWORD *)*v13 == v3 )
      *v13 = v5;
    else
      v13[2] = v5;
  }
  v5[1] = v3[1];
  v14 = (char *)(v3 + 11);
  v15 = (char *)(v5 + 11);
  if ( v15 != (char *)(v3 + 11) )
  {
    v16 = *v15;
    *v15 = *v14;
    *v14 = v16;
  }
LABEL_36:
  if ( *((_BYTE *)v24 + 44) == 1 )
  {
    for ( i = v25; v4 != *(_DWORD *)(i[1] + 4); v7 = *(_DWORD *)(v7 + 4) )
    {
      if ( *(_BYTE *)(v4 + 44) != 1 )
        break;
      v18 = *(_BYTE **)v7;
      if ( v4 == *(_DWORD *)v7 )
      {
        v18 = *(_BYTE **)(v7 + 8);
        if ( !v18[44] )
        {
          v18[44] = 1;
          *(_BYTE *)(v7 + 44) = 0;
          RBTree_RotateLeft2(i, v7);
          v18 = *(_BYTE **)(v7 + 8);
          i = v25;
        }
        if ( v18[45] )
          goto LABEL_54;
        if ( *(_BYTE *)(*(_DWORD *)v18 + 44) != 1 || *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) != 1 )
        {
          if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v18 + 44) = 1;
            v18[44] = 0;
            RBTree_RotateRight2(i, v18);
            v18 = *(_BYTE **)(v7 + 8);
            i = v25;
          }
          v18[44] = *(_BYTE *)(v7 + 44);
          *(_BYTE *)(v7 + 44) = 1;
          *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) = 1;
          RBTree_RotateLeft2(i, v7);
          break;
        }
      }
      else
      {
        if ( !v18[44] )
        {
          v18[44] = 1;
          *(_BYTE *)(v7 + 44) = 0;
          RBTree_RotateRight2(i, (_DWORD *)v7);
          v18 = *(_BYTE **)v7;
          i = v25;
        }
        if ( v18[45] )
          goto LABEL_54;
        if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) != 1 || *(_BYTE *)(*(_DWORD *)v18 + 44) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v18 + 44) == 1 )
          {
            *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) = 1;
            v18[44] = 0;
            RBTree_RotateLeft2(i, (int)v18);
            v18 = *(_BYTE **)v7;
            i = v25;
          }
          v18[44] = *(_BYTE *)(v7 + 44);
          *(_BYTE *)(v7 + 44) = 1;
          *(_BYTE *)(*(_DWORD *)v18 + 44) = 1;
          RBTree_RotateRight2(i, (_DWORD *)v7);
          break;
        }
      }
      v18[44] = 0;
LABEL_54:
      v4 = v7;
    }
    *(_BYTE *)(v4 + 44) = 1;
  }
  std::string::~string((char *)v24 + 16);
  operator delete(v24);
  v19 = v25[2];
  if ( v19 )
    v25[2] = v19 - 1;
  *a2 = a3;
  return a2;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD34: using guessed type void *off_659BFD34;

//----- (657FB720) --------------------------------------------------------
int **__thiscall RBTree_ClearRange(int ***this, int **a2, int *a3, int *a4)
{
  int v5; // eax
  int *v6; // ecx
  _DWORD *v7; // eax
  int v9; // edx
  int v10; // eax
  int *v11; // ecx
  int j; // eax
  int i; // eax
  int v14; // [esp+4h] [ebp-4h] BYREF

  v5 = (int)*(this + 1);
  v6 = a3;
  if ( a3 == *(int **)v5 && a4 == (int *)v5 )
  {
    RBTree_DeleteNodes_Recursive(*(void ***)(v5 + 4));
    (*(this + 1))[1] = (int *)*(this + 1);
    v7 = *(this + 1);
    *(this + 2) = 0;
    *v7 = v7;
    (*(this + 1))[2] = (int *)*(this + 1);
    *a2 = **(this + 1);
    return a2;
  }
  else
  {
    for ( ; a3 != a4; v6 = a3 )
    {
      v9 = (int)v6;
      if ( !*((_BYTE *)v6 + 45) )
      {
        v10 = v6[2];
        if ( *(_BYTE *)(v10 + 45) )
        {
          for ( i = v6[1]; !*(_BYTE *)(i + 45); i = *(_DWORD *)(i + 4) )
          {
            if ( v6 != *(int **)(i + 8) )
              break;
            v6 = (int *)i;
          }
          a3 = (int *)i;
        }
        else
        {
          v11 = (int *)v6[2];
          for ( j = *(_DWORD *)v10; !*(_BYTE *)(j + 45); j = *(_DWORD *)j )
            v11 = (int *)j;
          a3 = v11;
        }
      }
      RBTree_Erase(this, &v14, v9);
    }
    *a2 = v6;
    return a2;
  }
}

//----- (657FB820) --------------------------------------------------------
char **__thiscall Vector76_MoveElements(char **this, char **a2, char *a3, char *a4)
{
  char *v4; // edx
  char *v5; // ebx
  char **v6; // esi
  char *v7; // eax
  char *v8; // esi
  char *v9; // edi

  v4 = a4;
  v5 = a3;
  v6 = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v7 = *(this + 2);
    if ( a4 != v7 )
    {
      do
      {
        v8 = v4;
        v9 = v5;
        v4 += 76;
        v5 += 76;
        qmemcpy(v9, v8, 0x4Cu);
      }
      while ( v4 != v7 );
      v6 = a2;
    }
    *(this + 2) = v5;
  }
  return v6;
}

//----- (657FB8A0) --------------------------------------------------------
int *__thiscall sub_657FB8A0(int ***this, int a2)
{
  int v3; // edi
  int **v4; // edx
  int *result; // eax
  int *v6; // ecx
  int v7; // esi
  int **v8; // ecx

  v3 = (int)*(this + 1);
  *(_DWORD *)(v3 + 4) = sub_657FB270(*(_DWORD *)(*(_DWORD *)(a2 + 4) + 4), v3);
  v4 = *(this + 1);
  *(this + 2) = *(int ***)(a2 + 8);
  result = v4[1];
  if ( *((_BYTE *)result + 45) )
  {
    *v4 = (int *)v4;
    (*(this + 1))[2] = (int *)*(this + 1);
  }
  else
  {
    v6 = (int *)*result;
    if ( !*(_BYTE *)(*result + 45) )
    {
      do
      {
        result = v6;
        v6 = (int *)*v6;
      }
      while ( !*((_BYTE *)v6 + 45) );
    }
    *v4 = result;
    v7 = (int)*(this + 1);
    v8 = *(int ***)(v7 + 4);
    for ( result = v8[2]; !*((_BYTE *)result + 45); result = (int *)result[2] )
      v8 = (int **)result;
    *(_DWORD *)(v7 + 8) = v8;
  }
  return result;
}
// 657FB270: using guessed type int __stdcall sub_657FB270(_DWORD, _DWORD);

//----- (657FBA50) --------------------------------------------------------
int __thiscall sub_657FBA50(int this, unsigned int a2)
{
  unsigned int v2; // edi
  int v5; // ebx
  unsigned int v6; // ecx
  unsigned int v7; // eax
  int v8; // edx
  unsigned int v9; // ecx
  int v10; // [esp-10h] [ebp-18h]
  int v11; // [esp-8h] [ebp-10h]

  v2 = a2;
  if ( this != a2 )
  {
    a2 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 76;
    if ( !a2 )
    {
      Vector76_MoveElements((char **)this, (char **)&a2, *(char **)(this + 4), *(char **)(this + 8));
      return this;
    }
    v5 = *(_DWORD *)(this + 4);
    v6 = (*(_DWORD *)(this + 8) - v5) / 76;
    if ( a2 <= v6 )
    {
      sub_657F9760(*(_DWORD *)(v2 + 4), *(_DWORD *)(v2 + 8), *(_DWORD *)(this + 4));
      *(_DWORD *)(this + 8) = *(_DWORD *)(this + 4) + 76 * ((*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 76);
      return this;
    }
    if ( v5 )
      v7 = (*(_DWORD *)(this + 12) - v5) / 76;
    else
      v7 = 0;
    if ( a2 > v7 )
    {
      if ( v5 )
        operator delete(*(void **)(this + 4));
      if ( !(unsigned __int8)sub_657F9EE0(this, (*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 76) )
        return this;
      v8 = *(_DWORD *)(this + 4);
      v9 = *(_DWORD *)(v2 + 4);
    }
    else
    {
      v11 = *(_DWORD *)(this + 4);
      v10 = *(_DWORD *)(v2 + 4);
      a2 = v10 + 76 * v6;
      sub_657F9760(v10, a2, v11);
      v8 = *(_DWORD *)(this + 8);
      v9 = a2;
    }
    *(_DWORD *)(this + 8) = sub_657FA480(this, v9, *(_DWORD *)(v2 + 8), v8);
  }
  return this;
}
// 657F9760: using guessed type int __cdecl sub_657F9760(_DWORD, _DWORD, _DWORD);
// 657F9EE0: using guessed type int __thiscall sub_657F9EE0(_DWORD, _DWORD);
// 657FA480: using guessed type int __thiscall sub_657FA480(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (657FBB90) --------------------------------------------------------
int __thiscall StringMap_Clear(int this)
{
  int *v3; // [esp+4h] [ebp-4h] BYREF

  RBTree_ClearRange((int ***)this, &v3, **(int ***)(this + 4), *(int **)(this + 4));
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return 0;
}

//----- (657FBBD0) --------------------------------------------------------
_DWORD *__thiscall CharacterSlot_ResetFields(_BYTE *this)
{
  _DWORD *result; // eax
  char *v3; // [esp+Ch] [ebp-4h] BYREF

  *(_DWORD *)this = 0;
  *(this + 4) = 0;
  *(this + 68) = 0;
  *(this + 69) = 0;
  *(this + 70) = 0;
  *((_DWORD *)this + 19) = 0;
  *(this + 74) = 0;
  *(this + 80) = 0;
  *((_WORD *)this + 36) = 0;
  *((_WORD *)this + 72) = 0;
  *((_WORD *)this + 73) = 0;
  *(this + 2284) = 0;
  *(this + 2285) = 0;
  Vector76_MoveElements((char **)this + 567, &v3, *((char **)this + 568), *((char **)this + 569));
  *(this + 220) = 0;
  *((_DWORD *)this + 575) = 0;
  *(this + 2304) = 0;
  RBTree_DeleteNodes_Recursive(*(void ***)(*((_DWORD *)this + 573) + 4));
  *(_DWORD *)(*((_DWORD *)this + 573) + 4) = *((_DWORD *)this + 573);
  result = (_DWORD *)*((_DWORD *)this + 573);
  *((_DWORD *)this + 574) = 0;
  *result = result;
  *(_DWORD *)(*((_DWORD *)this + 573) + 8) = *((_DWORD *)this + 573);
  *(this + 148) = 0;
  *((_DWORD *)this + 38) = 0;
  *(this + 156) = 0;
  return result;
}

//----- (657FBC90) --------------------------------------------------------
int __thiscall StringMap_Clear2(int this)
{
  int *v3; // [esp+4h] [ebp-4h] BYREF

  RBTree_ClearRange((int ***)this, &v3, **(int ***)(this + 4), *(int **)(this + 4));
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return 0;
}

//----- (657FBCD0) --------------------------------------------------------
void __thiscall CharacterSlot_FreeAll(int this)
{
  int *v2; // eax
  int v3; // esi
  int *v4; // [esp-8h] [ebp-2Ch]
  int *v5[5]; // [esp+10h] [ebp-14h] BYREF

  v5[1] = (int *)this;
  v2 = *(int **)(this + 2292);
  v3 = this + 2288;
  v4 = (int *)*v2;
  v5[4] = 0;
  RBTree_ClearRange((int ***)(this + 2288), v5, v4, v2);
  operator delete(*(void **)(v3 + 4));
  *(_DWORD *)(v3 + 4) = 0;
  *(_DWORD *)(v3 + 8) = 0;
  if ( *(_DWORD *)(this + 2272) )
    operator delete(*(void **)(this + 2272));
  *(_DWORD *)(this + 2272) = 0;
  *(_DWORD *)(this + 2276) = 0;
  *(_DWORD *)(this + 2280) = 0;
}

//----- (657FBE00) --------------------------------------------------------
_DWORD *__thiscall StringMap_Init(_DWORD *this)
{
  _DWORD *v2; // eax
  _DWORD *v3; // eax

  v2 = RBTreeNode48_Alloc();
  *(this + 1) = v2;
  *((_BYTE *)v2 + 45) = 1;
  *(_DWORD *)(*(this + 1) + 4) = *(this + 1);
  *(_DWORD *)*(this + 1) = *(this + 1);
  *(_DWORD *)(*(this + 1) + 8) = *(this + 1);
  *(this + 2) = 0;
  RBTree_DeleteNodes_Recursive(*(void ***)(*(this + 1) + 4));
  *(_DWORD *)(*(this + 1) + 4) = *(this + 1);
  v3 = (_DWORD *)*(this + 1);
  *(this + 2) = 0;
  *v3 = v3;
  *(_DWORD *)(*(this + 1) + 8) = *(this + 1);
  return this;
}

//----- (657FBE90) --------------------------------------------------------
int __thiscall CharacterSlot_Init(int this)
{
  *(_BYTE *)(this + 68) = 0;
  *(_BYTE *)(this + 69) = 0;
  *(_BYTE *)(this + 70) = 0;
  *(_WORD *)(this + 72) = 0;
  *(_DWORD *)(this + 76) = 0;
  *(_BYTE *)(this + 74) = 0;
  *(_BYTE *)(this + 80) = 0;
  *(_DWORD *)(this + 2272) = 0;
  *(_DWORD *)(this + 2276) = 0;
  *(_DWORD *)(this + 2280) = 0;
  StringMap_Init((_DWORD *)(this + 2288));
  CharacterSlot_ResetFields((_BYTE *)this);
  return this;
}

//----- (657FBF10) --------------------------------------------------------
char *__thiscall CharacterData_CopyFrom(char *this, int a2)
{
  int v2; // edx
  int v4; // eax
  char *v5; // esi
  int v6; // edi
  char *v7; // esi
  int v8; // edi
  char *v9; // esi
  int v10; // edi
  int v11; // edi
  char *v12; // eax
  int v13; // esi
  int v15; // [esp+Ch] [ebp-4h]

  v2 = a2;
  *(_DWORD *)this = *(_DWORD *)a2;
  v4 = v2 - (_DWORD)this;
  v5 = this + 4;
  v15 = v2 - (_DWORD)this;
  v6 = 64;
  do
  {
    *v5 = v5[v4];
    ++v5;
    --v6;
  }
  while ( v6 );
  qmemcpy(this + 68, (const void *)(v2 + 68), 0x51u);
  *((_DWORD *)this + 38) = *(_DWORD *)(v2 + 152);
  v7 = this + 156;
  v8 = 64;
  do
  {
    *v7 = v7[v4];
    ++v7;
    --v8;
  }
  while ( v8 );
  v9 = this + 220;
  v10 = 2048;
  do
  {
    *v9 = v9[v4];
    ++v9;
    --v10;
  }
  while ( v10 );
  sub_657FBA50((int)(this + 2268), v2 + 2268);
  v11 = a2;
  *(this + 2284) = *(_BYTE *)(a2 + 2284);
  *(this + 2285) = *(_BYTE *)(v11 + 2285);
  if ( this + 2288 != (char *)(v11 + 2288) )
  {
    RBTree_ClearRange((int ***)this + 572, (int **)&a2, **((int ***)this + 573), *((int **)this + 573));
    sub_657FB8A0((int ***)this + 572, v11 + 2288);
  }
  *((_DWORD *)this + 575) = *(_DWORD *)(v11 + 2300);
  v12 = this + 2304;
  v13 = 20;
  do
  {
    *v12 = v12[v15];
    ++v12;
    --v13;
  }
  while ( v13 );
  return this;
}

//----- (657FC050) --------------------------------------------------------
char *__cdecl CharSlotVector_CopyRange(int a1, int a2, char *a3)
{
  int v3; // esi
  char *v4; // edi

  v3 = a1;
  if ( a1 == a2 )
    return a3;
  v4 = a3;
  do
  {
    CharacterData_CopyFrom(v4, v3);
    v3 += 2324;
    v4 += 2324;
  }
  while ( v3 != a2 );
  return v4;
}

//----- (657FC130) --------------------------------------------------------
void __stdcall sub_657FC130(int a1, int a2)
{
  int i; // esi

  for ( i = a1; i != a2; i += 2324 )
    CharacterSlot_FreeAll(i);
}

//----- (657FC160) --------------------------------------------------------
char **__thiscall CharSlotVector_EraseAndDestroy(int *this, char **a2, char *a3, char *a4)
{
  char **result; // eax
  char *v6; // eax
  int v7; // ebx
  int v8; // edi
  int i; // esi

  result = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v6 = CharSlotVector_CopyRange((int)a4, *(this + 2), a3);
    v7 = *(this + 2);
    v8 = (int)v6;
    for ( i = (int)v6; i != v7; i += 2324 )
      CharacterSlot_FreeAll(i);
    *(this + 2) = v8;
    return a2;
  }
  return result;
}

//----- (657FC270) --------------------------------------------------------
char **__thiscall CharSlotEntry_InitDefaults(_BYTE *this)
{
  char **result; // eax
  char *v3; // [esp+8h] [ebp-4h] BYREF

  *(_DWORD *)this = 0;
  *(this + 4) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_WORD *)this + 6) = 11;
  *((_WORD *)this + 11) = 0;
  *((_WORD *)this + 12) = 0;
  *((_WORD *)this + 10) = 0;
  *((_WORD *)this + 14) = 0;
  *((_DWORD *)this + 8) = 0;
  *((_DWORD *)this + 9) = 0;
  *((_DWORD *)this + 10) = 0;
  *((_DWORD *)this + 11) = 0;
  *((_DWORD *)this + 12) = 0;
  *((_DWORD *)this + 13) = 0;
  *((_DWORD *)this + 14) = 0;
  *((_DWORD *)this + 15) = 0;
  *((_DWORD *)this + 16) = 0;
  *((_DWORD *)this + 17) = 0;
  *((_DWORD *)this + 18) = 0;
  *((_DWORD *)this + 19) = 0;
  *((_WORD *)this + 18) = 28;
  *((_WORD *)this + 42) = 1000;
  *(this + 82) = 0;
  *(this + 86) = 0;
  *(this + 87) = 0;
  *(this + 151) = 0;
  *(this + 152) = 0;
  *((_DWORD *)this + 39) = 0;
  *(this + 160) = 0;
  result = CharSlotVector_EraseAndDestroy((int *)this + 45, &v3, *((char **)this + 46), *((char **)this + 47));
  *(this + 153) = 0;
  return result;
}

//----- (657FC3C0) --------------------------------------------------------
char *__thiscall CharSlotVector_Init(char *this)
{
  char *v3[5]; // [esp+8h] [ebp-14h] BYREF

  v3[1] = this;
  *((_DWORD *)this + 1) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 3) = 0;
  v3[4] = 0;
  CharSlotVector_EraseAndDestroy((int *)this, v3, 0, 0);
  return this;
}

//----- (657FC420) --------------------------------------------------------
int __thiscall SkillSlot_InitDefaults(int this)
{
  SkillDef_InitDefaults((_WORD *)(this + 16));
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 36) = 0;
  *(_DWORD *)(this + 40) = 0;
  *(_DWORD *)(this + 44) = 0;
  *(_DWORD *)(this + 48) = 0;
  *(_DWORD *)(this + 52) = 0;
  *(_DWORD *)(this + 56) = 0;
  *(_DWORD *)(this + 60) = 0;
  *(_DWORD *)(this + 64) = 0;
  *(_DWORD *)(this + 68) = 0;
  *(_DWORD *)(this + 72) = 0;
  *(_DWORD *)(this + 76) = 0;
  *(_BYTE *)(this + 80) = 0;
  CharSlotVector_Init((char *)(this + 180));
  CharSlotEntry_InitDefaults((_BYTE *)this);
  return this;
}

//----- (657FC610) --------------------------------------------------------
int __thiscall ItemSlotEntry_Init(_DWORD *this)
{
  *this = 0;
  sub_65948590((_BYTE *)this + 4);
  *(this + 6) = 0;
  *((_BYTE *)this + 37) = 0;
  *(this + 10) = 0;
  *(this + 11) = 0;
  *(this + 12) = 0;
  *((_BYTE *)this + 53) = 0;
  *((_BYTE *)this + 54) = 0;
  *((_BYTE *)this + 52) = 0;
  *((_BYTE *)this + 36) = 100;
  *((_WORD *)this + 14) = 0;
  *((_WORD *)this + 17) = 0;
  *((_WORD *)this + 15) = 0;
  *((_WORD *)this + 16) = 0;
  *(_DWORD *)((char *)this + 55) = 0;
  *(this + 15) = 0;
  *(this + 16) = 0;
  *((_BYTE *)this + 68) = 0;
  *(this + 18) = 0;
  return 0;
}

//----- (657FC750) --------------------------------------------------------
int __thiscall RBTreeIter_Decrement(int **this)
{
  int *v1; // eax
  int result; // eax
  int v3; // edx

  v1 = *this;
  if ( *((_BYTE *)*this + 45) )
  {
    result = v1[2];
    *this = (int *)result;
  }
  else
  {
    v3 = *v1;
    if ( *(_BYTE *)(*v1 + 45) )
    {
      for ( result = v1[1]; !*(_BYTE *)(result + 45); result = *(_DWORD *)(result + 4) )
      {
        if ( *this != *(int **)result )
          break;
        *this = (int *)result;
      }
      if ( !*((_BYTE *)*this + 45) )
        *this = (int *)result;
    }
    else
    {
      for ( result = *(_DWORD *)(v3 + 8); !*(_BYTE *)(result + 45); result = *(_DWORD *)(result + 8) )
        v3 = result;
      *this = (int *)v3;
    }
  }
  return result;
}

//----- (657FC8E0) --------------------------------------------------------
int __thiscall EquipSlotEntry_Init(int this)
{
  sub_65948AF0((_BYTE *)(this + 4));
  *(_DWORD *)(this + 24) = 0;
  *(_WORD *)(this + 28) = 0;
  *(_WORD *)(this + 30) = 0;
  *(_WORD *)(this + 32) = 0;
  *(_WORD *)(this + 34) = 0;
  *(_BYTE *)(this + 37) = 0;
  *(_DWORD *)(this + 40) = 0;
  *(_DWORD *)(this + 44) = 0;
  *(_DWORD *)(this + 48) = 0;
  *(_BYTE *)(this + 53) = 0;
  *(_BYTE *)(this + 54) = 0;
  *(_BYTE *)(this + 52) = 0;
  *(_BYTE *)(this + 36) = 100;
  *(_DWORD *)(this + 55) = 0;
  *(_DWORD *)(this + 60) = 0;
  *(_DWORD *)(this + 64) = 0;
  *(_BYTE *)(this + 68) = 0;
  ItemSlotEntry_Init((_DWORD *)this);
  return this;
}

//----- (657FC9E0) --------------------------------------------------------
char *__cdecl Array76_FillCopy(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  char *v4; // edi

  for ( result = a1; result != a2; result += 76 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0x4Cu);
  }
  return result;
}

//----- (657FCA80) --------------------------------------------------------
int __thiscall Packet_ID_B5_read_entry2_subA(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed(a2, this, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 1, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 2, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 4);
  RakNet::BitStream::ReadCompressed(a2, this + 6, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 8);
  return (*(int (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
           g_LTClient,
           this + 12,
           2048,
           a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657FCC40) --------------------------------------------------------
char *__cdecl Array76_CopyBackward(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a2;
  result = a3;
  while ( v3 != a1 )
  {
    v3 -= 76;
    result -= 76;
    qmemcpy(result, v3, 0x4Cu);
  }
  return result;
}

//----- (657FCC70) --------------------------------------------------------
char *__usercall Vector76_FillN@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x4Cu);
      --v4;
      result += 76;
    }
    while ( v4 );
  }
  return result;
}

//----- (657FCCD0) --------------------------------------------------------
int *__thiscall RBTree_InsertAndBalance(int **this, int *a2, char a3, int *a4, _DWORD *a5)
{
  _DWORD *v6; // ecx
  int *v7; // eax
  int **v8; // eax
  int v9; // eax
  int *v10; // eax
  int v11; // esi
  int v12; // ecx
  int *v13; // edx
  int v14; // edx
  int v15; // edx
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-50h] BYREF
  _BYTE v18[28]; // [esp+38h] [ebp-28h] BYREF
  int v19; // [esp+5Ch] [ebp-4h]
  _DWORD *v20; // [esp+74h] [ebp+14h]

  if ( (unsigned int)*(this + 2) >= 0x7FFFFFE )
  {
    std::string::string(v18, "map/set<T> too long");
    v19 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v18);
    pExceptionObject[0] = &off_659BFD28;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
  }
  v6 = sub_657F9FB0((int)*(this + 1), (int)a4, (int)*(this + 1), a5, 0);
  v7 = *(this + 1);
  *(this + 2) = (int *)((char *)*(this + 2) + 1);
  v20 = v6;
  if ( a4 == v7 )
  {
    v7[1] = (int)v6;
    **(this + 1) = (int)v6;
    (*(this + 1))[2] = (int)v6;
  }
  else if ( a3 )
  {
    *a4 = (int)v6;
    v8 = (int **)*(this + 1);
    if ( a4 == *v8 )
      *v8 = v6;
  }
  else
  {
    a4[2] = (int)v6;
    v9 = (int)*(this + 1);
    if ( a4 == *(int **)(v9 + 8) )
      *(_DWORD *)(v9 + 8) = v6;
  }
  v10 = v6 + 1;
  v11 = (int)v6;
  if ( !*(_BYTE *)(v6[1] + 44) )
  {
    do
    {
      v12 = *v10;
      v13 = *(int **)(*v10 + 4);
      if ( *v10 == *v13 )
      {
        v14 = v13[2];
        if ( *(_BYTE *)(v14 + 44) )
        {
          if ( v11 == *(_DWORD *)(v12 + 8) )
          {
            v11 = *v10;
            RBTree_RotateLeft2(this, *v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 44) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 44) = 0;
          RBTree_RotateRight2(this, *(_DWORD **)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 44) = 1;
          *(_BYTE *)(v14 + 44) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 44) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      else
      {
        v15 = *v13;
        if ( *(_BYTE *)(v15 + 44) )
        {
          if ( v11 == *(_DWORD *)v12 )
          {
            v11 = *v10;
            RBTree_RotateRight2(this, (_DWORD *)*v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 44) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 44) = 0;
          RBTree_RotateLeft2(this, *(_DWORD *)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 44) = 1;
          *(_BYTE *)(v15 + 44) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 44) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      v10 = (int *)(v11 + 4);
    }
    while ( !*(_BYTE *)(*(_DWORD *)(v11 + 4) + 44) );
    v6 = v20;
  }
  *(_BYTE *)((*(this + 1))[1] + 44) = 1;
  *a2 = (int)v6;
  return a2;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (657FCF10) --------------------------------------------------------
int __thiscall RBTree_InsertUnique(int **this, int a2, int *a3)
{
  int *v3; // ebx
  int *v5; // esi
  int v6; // eax
  bool v7; // cl
  unsigned int v8; // edx
  int *v9; // edx
  int v10; // edx
  char v12; // [esp+Ch] [ebp-4h]

  v3 = a3;
  v5 = *(this + 1);
  v6 = v5[1];
  v7 = 1;
  v12 = 1;
  if ( !*(_BYTE *)(v6 + 45) )
  {
    v8 = *a3;
    do
    {
      v5 = (int *)v6;
      v7 = v8 < *(_DWORD *)(v6 + 12);
      v12 = v7;
      if ( v8 >= *(_DWORD *)(v6 + 12) )
        v6 = *(_DWORD *)(v6 + 8);
      else
        v6 = *(_DWORD *)v6;
    }
    while ( !*(_BYTE *)(v6 + 45) );
  }
  v9 = v5;
  a3 = v5;
  if ( v7 )
  {
    if ( v5 == (int *)**(this + 1) )
    {
      v10 = *RBTree_InsertAndBalance(this, (int *)&a3, 1, v5, v3);
      *(_BYTE *)(a2 + 4) = 1;
      *(_DWORD *)a2 = v10;
      return a2;
    }
    RBTreeIter_Decrement(&a3);
    v9 = a3;
  }
  if ( v9[3] >= (unsigned int)*v3 )
  {
    *(_BYTE *)(a2 + 4) = 0;
    *(_DWORD *)a2 = v9;
  }
  else
  {
    *(_DWORD *)a2 = *RBTree_InsertAndBalance(this, (int *)&a3, v12, v5, v3);
    *(_BYTE *)(a2 + 4) = 1;
  }
  return a2;
}

//----- (657FCFD0) --------------------------------------------------------
int *__thiscall RBTree_InsertHint(int **this, int *a2, int *a3, int *a4)
{
  int *v6; // eax
  int *v7; // esi
  int *v8; // eax
  int v9; // ecx
  _BYTE v10[8]; // [esp+8h] [ebp-8h] BYREF

  if ( !*(this + 2) )
  {
    RBTree_InsertAndBalance(this, a2, 1, *(this + 1), a4);
    return a2;
  }
  v6 = *(this + 1);
  v7 = a4;
  if ( a3 == (int *)*v6 )
  {
    if ( *a4 < (unsigned int)a3[3] )
    {
      RBTree_InsertAndBalance(this, a2, 1, a3, a4);
      return a2;
    }
    goto LABEL_22;
  }
  if ( a3 == v6 )
  {
    v8 = (int *)v6[2];
    if ( v8[3] < (unsigned int)*a4 )
    {
      RBTree_InsertAndBalance(this, a2, 0, v8, a4);
      return a2;
    }
    goto LABEL_22;
  }
  if ( *a4 >= (unsigned int)a3[3] || (a4 = a3, RBTreeIter_Decrement(&a4), a4[3] >= (unsigned int)*v7) )
  {
    if ( a3[3] >= (unsigned int)*v7
      || (a4 = a3, RBTree_Iterator_Increment(&a4), a4 != *(this + 1)) && *v7 >= (unsigned int)a4[3] )
    {
LABEL_22:
      v9 = *(_DWORD *)RBTree_InsertUnique(this, (int)v10, v7);
      *a2 = v9;
      return a2;
    }
    if ( *(_BYTE *)(a3[2] + 45) )
      RBTree_InsertAndBalance(this, a2, 0, a3, v7);
    else
      RBTree_InsertAndBalance(this, a2, 1, a4, v7);
    return a2;
  }
  else
  {
    if ( *(_BYTE *)(a4[2] + 45) )
      RBTree_InsertAndBalance(this, a2, 0, a4, v7);
    else
      RBTree_InsertAndBalance(this, a2, 1, a3, v7);
    return a2;
  }
}

//----- (657FD130) --------------------------------------------------------
char *__stdcall Vector76_FillNWrapper(char *a1, int a2, char *a3)
{
  Vector76_FillN(a3, a1, a2, a3);
  return &a1[76 * a2];
}

//----- (657FD1A0) --------------------------------------------------------
int *__thiscall Packet_ID_B5_entry2_map_get_or_insert(int **this, unsigned int *a2)
{
  int *v3; // ecx
  int v4; // eax
  int *v5; // ebx
  int *v6; // esi
  int v7; // eax
  int v9; // [esp+10h] [ebp-48h] BYREF
  _BYTE v10[28]; // [esp+14h] [ebp-44h] BYREF
  _BYTE v11[28]; // [esp+30h] [ebp-28h] BYREF
  int v12; // [esp+54h] [ebp-4h]

  v3 = *(this + 1);
  v4 = v3[1];
  v5 = (int *)a2;
  v6 = v3;
  while ( !*(_BYTE *)(v4 + 45) )
  {
    if ( *(_DWORD *)(v4 + 12) >= *a2 )
    {
      v6 = (int *)v4;
      v4 = *(_DWORD *)v4;
    }
    else
    {
      v4 = *(_DWORD *)(v4 + 8);
    }
  }
  if ( v6 == *(this + 1) || *a2 < v6[3] )
  {
    std::string::string(v11);
    v9 = *v5;
    v12 = 0;
    std::string::string(v10, v7);
    LOBYTE(v12) = 1;
    v6 = (int *)*RBTree_InsertHint(this, (int *)&a2, v6, &v9);
    LOBYTE(v12) = 0;
    std::string::~string(v10);
    v12 = -1;
    std::string::~string(v11);
  }
  return v6 + 4;
}
// 657FD219: variable 'v7' is possibly undefined
// 659A82A8: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (657FD270) --------------------------------------------------------
_DWORD *__thiscall sub_657FD270(_DWORD *this, int a2)
{
  int v3; // ebx
  unsigned int v4; // edi
  char *v5; // eax
  int v7; // [esp-20h] [ebp-44h]
  int v8; // [esp-1Ch] [ebp-40h]
  int v9[9]; // [esp+0h] [ebp-24h] BYREF

  v9[5] = (int)v9;
  v9[4] = (int)this;
  v3 = a2;
  v4 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 76;
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( v4 )
  {
    if ( v4 > 0x35E50D7 )
      Vector76_ThrowLengthError(v9[0], v9[1]);
    v5 = (char *)SafeNew76Array_CheckOverflow(v4);
    LOBYTE(a2) = 0;
    *(this + 1) = v5;
    *(this + 2) = v5;
    *(this + 3) = &v5[76 * v4];
    v8 = *(_DWORD *)(v3 + 8);
    v7 = *(_DWORD *)(v3 + 4);
    v9[8] = 0;
    *(this + 2) = sub_657FCA40(v7, v8, v5, this, a2, a2);
  }
  return this;
}
// 657FB870: using guessed type int __thiscall sub_657FB870(_DWORD);
// 657FCA40: using guessed type int __cdecl sub_657FCA40(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (657FD340) --------------------------------------------------------
char *__stdcall Array76_CopyRangeWrapper(char *a1, char *a2, char *a3)
{
  return Array76_CopyRange(a1, a2, a3);
}

//----- (657FD370) --------------------------------------------------------
char __thiscall Packet_ID_B5_read_entry2_map(int **this, unsigned int *a2)
{
  unsigned int v3; // edi
  char result; // al
  int *v5; // eax
  char v6[4]; // [esp+Ch] [ebp-50h] BYREF
  char v7[4]; // [esp+10h] [ebp-4Ch] BYREF
  unsigned int v8; // [esp+14h] [ebp-48h] BYREF
  _BYTE v9[64]; // [esp+18h] [ebp-44h] BYREF

  v3 = 0;
  v8 = 0;
  result = RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v8);
  if ( v8 )
  {
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v6, 0x20u, 1) )
          ByteSwapCopy((int)v6, (int)v7, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, v7, 0x20u, 1);
      }
      (*(void (__thiscall **)(int, _BYTE *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(g_LTClient, v9, 2048, a2);
      v5 = Packet_ID_B5_entry2_map_get_or_insert(this, (unsigned int *)v7);
      result = std::string::operator=(v5, v9);
      ++v3;
    }
    while ( v3 < v8 );
  }
  return result;
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657FD430) --------------------------------------------------------
char *__thiscall Vector76_InsertAt(int this, char *a2, unsigned int a3, char *a4)
{
  char *result; // eax
  int v6; // ecx
  unsigned int v7; // edi
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // edi
  void *v11; // eax
  char *v12; // ecx
  char *v13; // eax
  char *v14; // eax
  char *v15; // ecx
  int v16; // ecx
  int v17; // esi
  char *v18; // esi
  char *v19; // edi
  char *v20; // eax
  char *v21; // [esp-Ch] [ebp-88h]
  int v22; // [esp-8h] [ebp-84h]
  char *v23; // [esp-4h] [ebp-80h]
  int v24[4]; // [esp+0h] [ebp-7Ch] BYREF
  char *v25; // [esp+10h] [ebp-6Ch]
  int v26; // [esp+14h] [ebp-68h]
  void *v27; // [esp+18h] [ebp-64h]
  char v28[76]; // [esp+1Ch] [ebp-60h] BYREF
  int *v29; // [esp+6Ch] [ebp-10h]
  int v30; // [esp+78h] [ebp-4h]

  v29 = v24;
  result = a4;
  v6 = *(_DWORD *)(this + 4);
  v25 = a4;
  if ( v6 )
  {
    result = (char *)(1808407283 * (*(_DWORD *)(this + 12) - v6));
    v7 = (*(_DWORD *)(this + 12) - v6) / 76;
  }
  else
  {
    v7 = 0;
  }
  if ( a3 )
  {
    v27 = *(void **)(this + 8);
    v8 = ((int)v27 - v6) / 76;
    if ( 56512727 - v8 < a3 )
      Vector76_ThrowLengthError(v24[0], v24[1]);
    v9 = a3 + v8;
    if ( v7 >= v9 )
    {
      qmemcpy(v28, v25, sizeof(v28));
      if ( ((_BYTE *)v27 - a2) / 76 >= a3 )
      {
        v19 = (char *)v27 - 76 * a3;
        v20 = Array76_CopyRangeWrapper(v19, (char *)v27, (char *)v27);
        v23 = (char *)v27;
        *(_DWORD *)(this + 8) = v20;
        Array76_CopyBackward(a2, v19, v23);
        return Array76_FillCopy(a2, &a2[76 * a3], v28);
      }
      else
      {
        Array76_CopyRangeWrapper(a2, (char *)v27, &a2[76 * a3]);
        v22 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 76;
        v21 = *(char **)(this + 8);
        v30 = 2;
        Vector76_FillNWrapper(v21, v22, v28);
        *(_DWORD *)(this + 8) += 76 * a3;
        return Array76_FillCopy(a2, (char *)(*(_DWORD *)(this + 8) - 76 * a3), v28);
      }
    }
    else
    {
      if ( 56512727 - (v7 >> 1) >= v7 )
        v10 = (v7 >> 1) + v7;
      else
        v10 = 0;
      if ( v10 < v9 )
        v10 = v9;
      v11 = SafeNew76Array_CheckOverflow(v10);
      v12 = *(char **)(this + 4);
      LOBYTE(v26) = 0;
      v27 = v11;
      v30 = 0;
      v13 = Array76_CopyRange(v12, a2, (char *)v11);
      v14 = Vector76_FillNWrapper(v13, a3, v25);
      v15 = *(char **)(this + 8);
      LOBYTE(v26) = 0;
      Array76_CopyRange(a2, v15, v14);
      v16 = *(_DWORD *)(this + 4);
      v17 = (*(_DWORD *)(this + 8) - v16) / 76 + a3;
      if ( v16 )
        operator delete(*(void **)(this + 4));
      result = (char *)v27;
      v18 = (char *)v27 + 76 * v17;
      *(_DWORD *)(this + 12) = (char *)v27 + 76 * v10;
      *(_DWORD *)(this + 8) = v18;
      *(_DWORD *)(this + 4) = result;
    }
  }
  return result;
}

//----- (657FD680) --------------------------------------------------------
int __thiscall sub_657FD680(int this, int a2)
{
  _DWORD *v3; // eax
  _DWORD v5[9]; // [esp+0h] [ebp-24h] BYREF

  v5[5] = v5;
  v5[4] = this;
  v3 = RBTreeNode48_Alloc();
  *(_DWORD *)(this + 4) = v3;
  *((_BYTE *)v3 + 45) = 1;
  *(_DWORD *)(*(_DWORD *)(this + 4) + 4) = *(_DWORD *)(this + 4);
  **(_DWORD **)(this + 4) = *(_DWORD *)(this + 4);
  *(_DWORD *)(*(_DWORD *)(this + 4) + 8) = *(_DWORD *)(this + 4);
  *(_DWORD *)(this + 8) = 0;
  v5[8] = 0;
  sub_657FB8A0((int ***)this, a2);
  return this;
}
// 657FB7E0: using guessed type int __thiscall sub_657FB7E0(_DWORD);

//----- (657FD710) --------------------------------------------------------
_DWORD *__thiscall Vector76_InsertSingle(_DWORD *this, _DWORD *a2, char *a3, char *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 76 )
    v6 = (int)&a3[-v5] / 76;
  else
    v6 = 0;
  Vector76_InsertAt((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 76 * v6;
  return a2;
}

//----- (657FD790) --------------------------------------------------------
char *__thiscall Vector76_PushBack(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 76;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 76 >= v4 )
    return (char *)Vector76_InsertSingle(this, &a2, v5, a2);
  result = Vector76_FillN(a2, v5, 1, a2);
  *(this + 2) = v5 + 76;
  return result;
}

//----- (657FD880) --------------------------------------------------------
char *__thiscall Packet_ID_B5_read_entry2(char *this, unsigned int *a2)
{
  unsigned int v3; // eax
  unsigned int v4; // eax
  unsigned int v5; // eax
  unsigned int v6; // ebx
  char *result; // eax
  char **v8; // edi
  char v9[4]; // [esp+Ch] [ebp-5Ch] BYREF
  char v10[4]; // [esp+10h] [ebp-58h] BYREF
  unsigned int v11; // [esp+14h] [ebp-54h] BYREF
  char v12[4]; // [esp+18h] [ebp-50h] BYREF
  char v13[20]; // [esp+1Ch] [ebp-4Ch] BYREF
  char v14[48]; // [esp+30h] [ebp-38h] BYREF
  char v15[4]; // [esp+60h] [ebp-8h] BYREF

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 4,
    2048,
    a2);
  Packet_ID_B5_read_entry2_subA(this + 68, a2);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 144);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 146);
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *(this + 148) = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 152);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 156,
    2048,
    a2);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 2300);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 2304,
    2048,
    a2);
  v4 = a2[2];
  if ( v4 + 1 <= *a2 )
  {
    *(this + 2284) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  v5 = a2[2];
  if ( v5 + 1 <= *a2 )
  {
    *(this + 2285) = ((unsigned __int8)(128 >> (v5 & 7)) & *(_BYTE *)((v5 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 220,
    2048,
    a2);
  Packet_ID_B5_read_entry2_map((int **)this + 572, a2);
  v6 = 0;
  v11 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v11);
  result = (char *)EquipSlotEntry_Init((int)v12);
  if ( v11 )
  {
    v8 = (char **)(this + 2268);
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v10, 0x20u, 1) )
          ByteSwapCopy((int)v10, (int)v12, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, v12, 0x20u, 1);
      }
      ItemStatEntry_ReadFromBitStream(v13, a2);
      ItemEntryWithId_Read(v14, a2);
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v9, 0x20u, 1) )
          ByteSwapCopy((int)v9, (int)v15, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, v15, 0x20u, 1);
      }
      result = Vector76_PushBack(v8, v12);
      ++v6;
    }
    while ( v6 < v11 );
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657FDAB0) --------------------------------------------------------
_DWORD *__thiscall CharacterData2324_CopyCtor(_DWORD *this, int a2)
{
  *this = *(_DWORD *)a2;
  qmemcpy(this + 1, (const void *)(a2 + 4), 0x40u);
  qmemcpy(this + 17, (const void *)(a2 + 68), 0x51u);
  *(this + 38) = *(_DWORD *)(a2 + 152);
  qmemcpy(this + 39, (const void *)(a2 + 156), 0x40u);
  qmemcpy(this + 55, (const void *)(a2 + 220), 0x800u);
  sub_657FD270(this + 567, a2 + 2268);
  *((_BYTE *)this + 2284) = *(_BYTE *)(a2 + 2284);
  *((_BYTE *)this + 2285) = *(_BYTE *)(a2 + 2285);
  sub_657FD680((int)(this + 572), a2 + 2288);
  *(this + 575) = *(_DWORD *)(a2 + 2300);
  *(this + 576) = *(_DWORD *)(a2 + 2304);
  *(this + 577) = *(_DWORD *)(a2 + 2308);
  *(this + 578) = *(_DWORD *)(a2 + 2312);
  *(this + 579) = *(_DWORD *)(a2 + 2316);
  *(this + 580) = *(_DWORD *)(a2 + 2320);
  return this;
}

//----- (657FDCB0) --------------------------------------------------------
char *__cdecl sub_657FDCB0(char *a1, char *a2, int a3)
{
  char *i; // esi
  char *result; // eax

  for ( i = a1; i != a2; i += 2324 )
    result = CharacterData_CopyFrom(i, a3);
  return result;
}

//----- (657FDCE0) --------------------------------------------------------
int __cdecl sub_657FDCE0(int a1, int a2, int a3)
{
  char v4; // [esp+0h] [ebp-4h]

  v4 = 0;
  return sub_657FD840(a1, a2, a3, a3, a3, v4);
}
// 657FD840: using guessed type int __cdecl sub_657FD840(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (657FDD30) --------------------------------------------------------
_DWORD *__cdecl sub_657FDD30(int a1, int a2, _DWORD *a3)
{
  _DWORD *v3; // esi
  _DWORD v6[7]; // [esp+0h] [ebp-28h] BYREF
  int v7; // [esp+24h] [ebp-4h]

  v6[6] = v6;
  v3 = a3;
  v6[5] = a3;
  v7 = 0;
  while ( a1 != a2 )
  {
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
      CharacterData2324_CopyCtor(v3, a1);
    v3 += 581;
    LOBYTE(v7) = 0;
    a1 += 2324;
  }
  return v3;
}

//----- (657FDDE0) --------------------------------------------------------
_DWORD *__cdecl CharSlot2324_InitRange(_DWORD *a1, int a2, int a3)
{
  _DWORD *v3; // esi
  _DWORD *result; // eax
  _DWORD v6[7]; // [esp+0h] [ebp-28h] BYREF
  int v7; // [esp+24h] [ebp-4h]

  v6[6] = v6;
  v3 = a1;
  v6[5] = a1;
  v7 = 0;
  while ( a2 )
  {
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
      result = CharacterData2324_CopyCtor(v3, a3);
    --a2;
    v3 += 581;
    LOBYTE(v7) = 0;
  }
  return result;
}

//----- (657FDF20) --------------------------------------------------------
_DWORD *__stdcall sub_657FDF20(_DWORD *a1, int a2, int a3)
{
  CharSlot2324_InitRange(a1, a2, a3);
  return &a1[581 * a2];
}

//----- (657FDF90) --------------------------------------------------------
_DWORD *__stdcall sub_657FDF90(int a1, int a2, _DWORD *a3)
{
  return sub_657FDD30(a1, a2, a3);
}

//----- (657FDFC0) --------------------------------------------------------
void __thiscall Vector2324_InsertRange(int *this, char *a2, unsigned int a3, int a4)
{
  int v5; // eax
  unsigned int v6; // ebx
  int v7; // ecx
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // ebx
  _DWORD *v11; // eax
  int v12; // ecx
  _DWORD *v13; // eax
  int v14; // ecx
  int v15; // ecx
  int v16; // edi
  void *v17; // eax
  char *v18; // edi
  _DWORD *v19; // ecx
  _DWORD *v20; // ebx
  _DWORD *v21; // eax
  _DWORD *v22; // [esp-Ch] [ebp-126Ch]
  int v23; // [esp-8h] [ebp-1268h]
  int v24; // [esp-8h] [ebp-1268h]
  char *v25; // [esp-8h] [ebp-1268h]
  int v26; // [esp-8h] [ebp-1268h]
  int v27[4]; // [esp+0h] [ebp-1260h] BYREF
  void *v28; // [esp+10h] [ebp-1250h]
  int v29; // [esp+14h] [ebp-124Ch]
  int v30; // [esp+18h] [ebp-1248h]
  _DWORD *v31; // [esp+1Ch] [ebp-1244h]
  _DWORD *v32; // [esp+20h] [ebp-1240h]
  _DWORD v33[581]; // [esp+24h] [ebp-123Ch] BYREF
  _DWORD v34[583]; // [esp+938h] [ebp-928h] BYREF
  int v35; // [esp+125Ch] [ebp-4h]

  v34[582] = v27;
  v30 = a4;
  v5 = *(this + 1);
  v29 = (int)this;
  if ( v5 )
    v6 = (*(this + 3) - v5) / 2324;
  else
    v6 = 0;
  if ( a3 )
  {
    v7 = *(this + 2);
    v8 = (*(this + 2) - *(this + 1)) / 2324;
    if ( 1848092 - v8 < a3 )
      sub_657F89C0(v27[0], v27[1]);
    v9 = a3 + v8;
    if ( v6 >= v9 )
    {
      if ( (v7 - (int)a2) / 2324 >= a3 )
      {
        CharacterData2324_CopyCtor(v34, v30);
        v20 = (_DWORD *)*(this + 2);
        v35 = 5;
        v32 = &v20[-581 * a3];
        v21 = sub_657FDF90((int)v32, (int)v20, v20);
        v26 = (int)v32;
        *(this + 2) = (int)v21;
        sub_657FDCE0((int)a2, v26, (int)v20);
        sub_657FDCB0(a2, &a2[2324 * a3], (int)v34);
        v19 = v34;
      }
      else
      {
        CharacterData2324_CopyCtor(v33, v30);
        v23 = *(this + 2);
        v35 = 2;
        sub_657FDF90((int)a2, v23, &a2[2324 * a3]);
        v24 = a3 - (*(this + 2) - (int)a2) / 2324;
        v22 = (_DWORD *)*(this + 2);
        LOBYTE(v35) = 3;
        sub_657FDF20(v22, v24, (int)v33);
        *(this + 2) += 2324 * a3;
        v25 = (char *)(*(this + 2) - 2324 * a3);
        v35 = 2;
        sub_657FDCB0(a2, v25, (int)v33);
        v19 = v33;
      }
      v35 = -1;
      CharacterSlot_FreeAll((int)v19);
    }
    else
    {
      if ( 1848092 - (v6 >> 1) >= v6 )
        v10 = (v6 >> 1) + v6;
      else
        v10 = 0;
      if ( v10 < v9 )
        v10 = v9;
      v11 = sub_657F8BD0(v10);
      v12 = *(this + 1);
      LOBYTE(v32) = 0;
      v28 = v11;
      v31 = v11;
      v35 = 0;
      v31 = sub_657FDD30(v12, (int)a2, v11);
      v13 = sub_657FDF20(v31, a3, v30);
      v14 = *(this + 2);
      LOBYTE(v32) = 0;
      v31 = v13;
      sub_657FDD30((int)a2, v14, v13);
      v15 = *(this + 1);
      v16 = (*(this + 2) - v15) / 2324 + a3;
      v35 = -1;
      if ( v15 )
      {
        sub_657FC130(v15, *(this + 2));
        operator delete((void *)*(this + 1));
      }
      v17 = v28;
      v18 = (char *)v28 + 2324 * v16;
      *(this + 3) = (int)v28 + 2324 * v10;
      *(this + 2) = (int)v18;
      *(this + 1) = (int)v17;
    }
  }
}

//----- (657FE330) --------------------------------------------------------
_DWORD *__thiscall Vector2324_InsertSingle(int *this, _DWORD *a2, char *a3, int a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 2324 )
    v6 = (int)&a3[-v5] / 2324;
  else
    v6 = 0;
  Vector2324_InsertRange(this, a3, 1u, a4);
  *a2 = *(this + 1) + 2324 * v6;
  return a2;
}

//----- (657FF390) --------------------------------------------------------
_DWORD *__thiscall Vector2324_PushBack(int *this, int a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  _DWORD *result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 2324;
  else
    v4 = 0;
  v5 = (char *)*(this + 2);
  if ( (int)&v5[-v3] / 2324 >= v4 )
    return Vector2324_InsertSingle(this, &a2, v5, a2);
  result = CharSlot2324_InitRange(v5, 1, a2);
  *(this + 2) = (int)(v5 + 2324);
  return result;
}

//----- (657FF800) --------------------------------------------------------
void __thiscall Packet_ID_B5_read_entry_list(int *this, unsigned int *a2)
{
  int v3; // esi
  int v4; // [esp+10h] [ebp-928h] BYREF
  char v5[2324]; // [esp+14h] [ebp-924h] BYREF
  int v6; // [esp+934h] [ebp-4h]

  v3 = 0;
  v4 = 0;
  RakNet::BitStream::ReadCompressed_T_ushort(a2, (char *)&v4);
  CharacterSlot_Init((int)v5);
  v6 = 0;
  if ( (_WORD)v4 )
  {
    do
    {
      Packet_ID_B5_read_entry2(v5, a2);
      Vector2324_PushBack(this, (int)v5);
      CharacterSlot_ResetFields(v5);
      ++v3;
    }
    while ( (unsigned __int16)v3 < (unsigned __int16)v4 );
  }
  v6 = -1;
  CharacterSlot_FreeAll((int)v5);
}

//----- (657FF8D0) --------------------------------------------------------
void __thiscall Packet_ID_B5_read_entry(char *this, unsigned int *a2)
{
  unsigned int v3; // eax
  unsigned int v4; // eax
  unsigned int v5; // eax

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed(a2, this + 4, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 8);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 12);
  Read_QuantVec3_9bit((int)(this + 16), a2);
  Read_BitfieldBlock_0x30(this + 32, a2);
  RakNet::BitStream::ReadCompressed(a2, this + 82, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 84);
  RakNet::BitStream::ReadCompressed(a2, this + 86, 8u, 1);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 87,
    2048,
    a2);
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *(this + 151) = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  v4 = a2[2];
  if ( v4 + 1 <= *a2 )
  {
    *(this + 152) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  v5 = a2[2];
  if ( v5 + 1 <= *a2 )
  {
    *(this + 153) = ((unsigned __int8)(128 >> (v5 & 7)) & *(_BYTE *)((v5 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 156);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 160,
    2048,
    a2);
  Packet_ID_B5_read_entry_list((int *)this + 45, a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (657FFD30) --------------------------------------------------------
LONG __thiscall LoginWindow_GetCharNameField(int this, char *Destination, WorldLoginReturnAddrPacked Count)
{
  return Ui_ReadFieldTextById((void *)(this + 4), 11224, Destination, Count.flag_pad_ip0);
}

//----- (657FFDA0) --------------------------------------------------------
void __thiscall TradeWindow_ClearItemSlot(int this)
{
  UiItemSlot_SetItem(*(_DWORD *)(this + 6772), 0);
  *(_BYTE *)(this + 6744) = 1;
}

//----- (65800000) --------------------------------------------------------
_DWORD *__thiscall CWindowInventory_PositionRelative(_DWORD *this)
{
  _DWORD *result; // eax

  result = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 4u);
  if ( result )
    return GroupWindow_UpdatePosition(this, result[1563] + 5, result[1562], 1);
  return result;
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65800030) --------------------------------------------------------
int __thiscall VTable_CallMethod16(void *this)
{
  return (*(int (__thiscall **)(void *))(*(_DWORD *)this + 16))(this);
}

//----- (65800040) --------------------------------------------------------
int __stdcall AlwaysReturnOne(int a1)
{
  return 1;
}

//----- (65800050) --------------------------------------------------------
int __thiscall Widget_CallMethod108(_DWORD *this, int a2)
{
  return (*(int (__thiscall **)(_DWORD *, int, _DWORD))(*this + 108))(this, a2, *(this + 1598));
}

//----- (65800230) --------------------------------------------------------
void *__thiscall CWindowInventory_dtor(void *this, char a2)
{
  sub_657FFF80();
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}
// 657FFF80: using guessed type int sub_657FFF80(void);

//----- (65800460) --------------------------------------------------------
unsigned __int8 __thiscall PlayerStatsUi_UpdateStatText(_DWORD *this)
{
  _DWORD *v1; // ebx
  int *v2; // esi
  int StatValue; // eax
  char *v4; // edi
  char *v5; // ebx
  unsigned __int8 result; // al
  char *v7; // [esp-4h] [ebp-18h]
  float v9; // [esp+10h] [ebp-4h]

  v1 = this;
  LOBYTE(v9) = 0;
  v2 = this + 1656;
  do
  {
    if ( *v2 && PlayerStats_GetStatValue(LOBYTE(v9)) != v2[53] )
    {
      StatValue = PlayerStats_GetStatValue(LOBYTE(v9));
      v4 = (char *)(v1 + 1778);
      v7 = (char *)(v1 + 1778);
      v5 = (char *)(v1 + 1762);
      v2[53] = StatValue;
      if ( Item_FormatStatValue(v9, StatValue, v5, v7) )
        UiText_SetValueIfChanged(*v2, v5, 0, v4);
      v1 = this;
    }
    result = LOBYTE(v9) + 1;
    ++v2;
    LOBYTE(v9) = result;
  }
  while ( result < 0x35u );
  return result;
}
// 658004B9: variable 'v9' is possibly undefined

//----- (65800500) --------------------------------------------------------
_DWORD *LinkedListNode_Alloc56()
{
  _DWORD *result; // eax

  result = operator new(0x38u);
  if ( result )
    *result = result;
  if ( result != (_DWORD *)-4 )
    result[1] = result;
  return result;
}

//----- (65800580) --------------------------------------------------------
void __thiscall LinkedList_DestroyAll(int this)
{
  _DWORD **v2; // ecx
  _DWORD *v3; // eax
  _DWORD *v4; // edi

  v2 = *(_DWORD ***)(this + 4);
  v3 = *v2;
  *v2 = v2;
  *(_DWORD *)(*(_DWORD *)(this + 4) + 4) = *(_DWORD *)(this + 4);
  *(_DWORD *)(this + 8) = 0;
  if ( v3 != *(_DWORD **)(this + 4) )
  {
    do
    {
      v4 = (_DWORD *)*v3;
      operator delete(v3);
      v3 = v4;
    }
    while ( v4 != *(_DWORD **)(this + 4) );
  }
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
}

//----- (658005E0) --------------------------------------------------------
_DWORD *__thiscall LinkedList_Init(_DWORD *this)
{
  *(this + 1) = LinkedListNode_Alloc56();
  *(this + 2) = 0;
  return this;
}

//----- (65800CC0) --------------------------------------------------------
int __thiscall CWindowInventory_OnCommand(_DWORD *this, int a2, int a3, int a4)
{
  int v5; // esi
  int v7; // eax
  int v8; // edx
  int v9; // eax
  _DWORD *v10; // eax
  int v11; // esi
  unsigned __int8 EquipSlot; // al
  char v13; // bl
  unsigned __int16 *v14; // eax
  unsigned int v15; // esi
  unsigned __int16 v16; // di
  unsigned __int8 Value; // al
  int v18; // eax
  int v19; // esi
  char *v20; // eax
  _DWORD *v21; // eax
  int v22; // esi
  char *v23; // eax
  int v24; // eax
  int v25; // esi
  int v26; // esi
  char *Armor; // eax
  int v28; // eax
  char *v29; // eax
  _WORD *v30; // esi
  _DWORD *Weapon; // eax
  _DWORD *v32; // eax
  _DWORD *v33; // eax
  int v34; // esi
  char *v35; // eax
  int v36; // ecx
  int v37; // esi
  unsigned __int16 *v38; // edi
  int v39; // esi
  _DWORD *WindowById; // eax
  int v41; // esi
  int v42; // eax
  int v43; // eax
  int v44; // eax
  int v45; // eax
  int v46; // esi
  bool v47; // [esp-8h] [ebp-920h]
  char v48; // [esp-4h] [ebp-91Ch]
  unsigned __int8 v49; // [esp+14h] [ebp-904h]
  int v50; // [esp+18h] [ebp-900h] BYREF
  char v51; // [esp+1Fh] [ebp-8F9h]
  char v52[12]; // [esp+20h] [ebp-8F8h] BYREF
  char v53[1060]; // [esp+2Ch] [ebp-8ECh] BYREF
  int v54; // [esp+450h] [ebp-4C8h]
  int Dword_this; // [esp+454h] [ebp-4C4h]
  char v56; // [esp+458h] [ebp-4C0h]
  _DWORD v57[269]; // [esp+490h] [ebp-488h] BYREF
  int v58[3]; // [esp+8C4h] [ebp-54h] BYREF
  char v59; // [esp+8D0h] [ebp-48h]
  char v60; // [esp+8D1h] [ebp-47h]
  char v61; // [esp+8D3h] [ebp-45h]
  int v62; // [esp+8D8h] [ebp-40h] BYREF
  int v63; // [esp+8DCh] [ebp-3Ch]
  unsigned __int8 v64; // [esp+8E5h] [ebp-33h]
  int v65; // [esp+914h] [ebp-4h]

  switch ( a2 )
  {
    case 5:
      if ( (unsigned int)(a3 - 5) > 0xB )
        return 1;
      WindowById = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 5u);
      if ( (unsigned __int8)Widget_CallMethod108(WindowById, *(this + a3 + 1776)) )
        SoundMgr_PlaySoundIfValid(0x2Cu);
      else
        SoundMgr_PlaySoundIfValid(0x3Cu);
      return 1;
    case 6:
      if ( (unsigned int)(a3 - 5) > 0xB )
        return 1;
      v41 = *(this + a3 + 1776);
      if ( !v41 || !*(_WORD *)(v41 + 220) )
        return 1;
      sub_6580B500((int *)dword_65ABF708, v41);
      return 0;
    case 7:
      v42 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0xEu);
      if ( !v42 )
        return 1;
      (*(void (__thiscall **)(int))(*(_DWORD *)v42 + 16))(v42);
      GameMode_SetModeFour((int *)dword_65ABF6F4, 0xEu);
      return 1;
    case 8:
      if ( (unsigned int)(a3 - 5) <= 0xB )
        HandleQuickbarItemUse(g_pGameClientShell, a3);
      return 1;
    case 9:
      v44 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Eu);
      if ( !v44 || !*(_BYTE *)(v44 + 6241) )
      {
        v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5548);
        goto LABEL_21;
      }
      v45 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x32u);
      v46 = v45;
      if ( v45 )
      {
        (*(void (__thiscall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v45 + 4))(v45, 5, 0, 0);
        (*(void (__thiscall **)(int))(*(_DWORD *)v46 + 16))(v46);
      }
      GameMode_SetModeFour((int *)dword_65ABF6F4, 0x32u);
      return 1;
    case 10:
      v43 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Bu);
      if ( !v43 )
        return 1;
      (*(void (__thiscall **)(int))(*(_DWORD *)v43 + 16))(v43);
      GameMode_SetModeFour((int *)dword_65ABF6F4, 0x3Bu);
      return 1;
    case 100:
      v5 = *(_DWORD *)(*(this + 1598) + 6272);
      if ( !v5 )
        return 1;
      ItemStructA_InitAlt((char *)&v62);
      ListNode_GetData(v5 + 180, &v62);
      HandleItemUseRequest((void *)dword_65ABF748, &v62);
      return 1;
    case 101:
      v7 = *(_DWORD *)(*(this + 1598) + 6272);
      if ( !v7 )
        return 1;
      sub_6580B500((int *)dword_65ABF708, v7);
      return 1;
    case 102:
      if ( !SharedMem_IsValidWorldId(dword_65ABF740) )
        goto LABEL_15;
      if ( Inventory_CheckSlotAvailable(dword_65ABF740, 1, 0) )
        return 1;
      Inventory_CheckSlotAvailable(dword_65ABF740, 0, 0x28u);
LABEL_15:
      v11 = *(_DWORD *)(*(this + 1598) + 6272);
      if ( !v11 )
        return 1;
      ItemStructA_InitAlt((char *)&v62);
      ListNode_GetData(v11 + 180, &v62);
      EquipSlot = ItemTemplate_GetEquipSlot(g_ItemTemplateById, v63);
      v13 = EquipSlot;
      v49 = EquipSlot;
      if ( (!EquipSlot || EquipSlot >= 4u) && (unsigned __int8)(EquipSlot - 5) > 0xBu )
        return 1;
      v14 = (unsigned __int16 *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
      v15 = *v14;
      v16 = v14[6];
      v48 = v64 >= 2u;
      v50 = (unsigned __int16)v63;
      v47 = IsPlayerAlive();
      Value = StatGroup5_GetValue();
      if ( !ItemTemplate_CanUse(g_ItemTemplateById, v50, v16, v15, Value, v47, v48) )
      {
        v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5320);
        goto LABEL_21;
      }
      v21 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
      if ( !v21 )
        return 0;
      if ( !ItemStatModifier_MeetsReqFromDisplayName(v21, (int)&v62) )
      {
        v22 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5445);
        if ( v22 )
          v23 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v22);
        else
          v23 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v23, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
        if ( v22 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v22);
        return 0;
      }
      v24 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
      v25 = v24;
      if ( (unsigned __int8)(v13 - 5) <= 0xBu )
      {
        v26 = v24 + 36;
        if ( v13 == 8 )
        {
          if ( ItemTemplate_GetType(g_ItemTemplateById, v63) == 5 && *(_DWORD *)(v26 + 336) )
          {
            v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5321);
            goto LABEL_21;
          }
        }
        else if ( v13 == 12
               && ItemTemplate_GetType(g_ItemTemplateById, v63) == 6
               && sub_65934160(g_ItemTemplateById, *(_WORD *)(v26 + 148)) )
        {
          v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5322);
          goto LABEL_21;
        }
        Armor = EquipSlots_GetArmor((char *)v26, v49);
        if ( ItemTemplate_GetType(g_ItemTemplateById, *((_WORD *)Armor + 2)) == 6 )
        {
          v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5472);
          goto LABEL_21;
        }
        v51 = 2;
        goto LABEL_72;
      }
      if ( (unsigned __int8)(v13 - 1) > 2u )
        return 1;
      if ( ItemTemplate_IsType3or4(g_ItemTemplateById, v63) )
      {
        v30 = (_WORD *)(v25 + 612);
        Weapon = (_DWORD *)EquipSlots_GetWeapon(v30, v49);
        if ( !Weapon )
          return 1;
        if ( !*Weapon )
          goto LABEL_62;
        v13 = 2;
        v32 = (_DWORD *)EquipSlots_GetWeapon(v30, 2u);
        if ( !v32 )
          return 1;
        if ( !*v32 )
          goto LABEL_62;
        v13 = 3;
        v33 = (_DWORD *)EquipSlots_GetWeapon(v30, 3u);
        if ( !v33 )
          return 1;
        if ( !*v33 )
        {
LABEL_62:
          if ( (unsigned int)StatGroup5_GetValue() < 2 && v13 == 3 )
          {
            v34 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5330);
            if ( v34 )
              v35 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v34);
            else
              v35 = (char *)byte_659A8B98;
            FriendList_AddEntry(dword_65ABF748, v35, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
            if ( v34 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v34);
            return 0;
          }
          if ( LoginUI_GetUsernamePtr(v30, v63) )
          {
            v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5325);
            goto LABEL_21;
          }
          v51 = 3;
LABEL_72:
          Packet_ID_MOVE_ITEMS_ctor((char *)v57);
          v65 = 0;
          v57[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
          v50 = v62;
          v59 = 1;
          v60 = v51;
          v61 = v13;
          LoginUI_ClearFields(v58, &v50);
          Packet_ID_MOVE_ITEMS_write((int)v57);
          LTClient_SendPacket_BuildIfNeeded(v57, 2, 1, 3, 0);
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 1);
          v65 = -1;
          LoginPacket_Dtor(v57);
          return 1;
        }
        v28 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5331);
      }
      else
      {
        v28 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5323);
      }
      v19 = v28;
      if ( v28 )
        v29 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v28);
      else
        v29 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v29, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( !v19 )
        return 1;
LABEL_25:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v19);
      return 1;
    case 103:
      if ( (*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 1) )
        return 1;
      v36 = *(this + 1598);
      v37 = *(_DWORD *)(v36 + 6272);
      if ( !v37 )
        return 1;
      if ( *(_WORD *)((*(int (__thiscall **)(_DWORD))(*(_DWORD *)v37 + 100))(*(_DWORD *)(v36 + 6272)) + 6) )
      {
        v38 = (unsigned __int16 *)(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
        StatGroup5_GetValue();
        if ( (unsigned __int16)ItemsAddedPayload_GetRemainingCapacity(v38) )
        {
          v39 = *(_DWORD *)(*(int (__thiscall **)(int))(*(_DWORD *)v37 + 100))(v37);
          LoginUI_SetFieldText(v52);
          v65 = 1;
          v56 = 1;
          Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
          v54 = v39;
          Packet_ID_UNLOAD_WEAPON_write((int)v52);
          LTClient_SendPacket_BuildIfNeeded(v52, 2, 1, 3, 0);
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 1);
          v65 = -1;
          *(_DWORD *)v52 = &vtbl_Packet_Unknown0;
          BitStream_FreeOwnedBuffer((int)v53);
          return 1;
        }
        v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5334);
      }
      else
      {
        v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5333);
      }
LABEL_21:
      v19 = v18;
      if ( v18 )
        v20 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v18);
      else
        v20 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v20, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v19 )
        goto LABEL_25;
      return 1;
    case 104:
      v8 = *(this + 1598);
      if ( !*(_DWORD *)(v8 + 6272) )
        return 1;
      sub_6580B6B0(*(_DWORD *)(v8 + 6272));
      return 1;
    case 105:
      v9 = *(_DWORD *)(*(this + 1598) + 6272);
      if ( !v9 )
        return 1;
      sub_6580B980(v9, 0);
      return 1;
    case 106:
      v10 = *(_DWORD **)(*(this + 1598) + 6272);
      if ( !v10 )
        return 1;
      InventoryUI_HandleDropItem(v10);
      return 1;
    default:
      return CWindow_HandleCommand(this, a2, a3, a4);
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65801640) --------------------------------------------------------
int __thiscall CWindowInventory_OnOpen(int this, int a2)
{
  int v4; // eax
  int v5; // edi
  void (__stdcall *v6)(int, int); // eax
  int CachedWindowById; // eax
  int v8; // ecx
  int v9; // eax
  int v10; // eax
  int v11; // [esp+0h] [ebp-Ch]
  _BYTE v12[4]; // [esp+4h] [ebp-8h] BYREF
  int v13; // [esp+8h] [ebp-4h] BYREF

  (*(void (__cdecl **)(int, int *, _BYTE *))(g_pILTClient + 344))(a2, &v13, v12);
  if ( !v13 )
    return 0;
  sub_658008D0(this);
  v4 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  v5 = v4;
  if ( *(_BYTE *)(v4 + 48) )
  {
    *(_BYTE *)(v4 + 48) = 0;
    sub_658002E0(this);
  }
  v6 = *(void (__stdcall **)(int, int))(**(_DWORD **)(this + 6432) + 88);
  if ( *(_WORD *)(v5 + 8) )
  {
    v6(1, v11);
    (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6644) + 88))(*(_DWORD *)(this + 6644), 1);
  }
  else
  {
    v6(0, v11);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6644) + 88))(*(_DWORD *)(this + 6644), 0);
  }
  CachedWindowById = CWindowMgr_GetCachedWindowById((_DWORD *)dword_65ABF708, *(_DWORD *)(this + 4));
  if ( CachedWindowById )
  {
    v8 = *(_DWORD *)(this + 6392);
    if ( *(_DWORD *)(v8 + 36) )
      *(_DWORD *)(v8 + 92) = CachedWindowById;
    v9 = dword_65ABF708;
    *(_DWORD *)(dword_65ABF708 + 808) = -1;
    *(_DWORD *)(v9 + 812) = 0;
  }
  PlayerStatsUi_UpdateStatText((_DWORD *)this);
  v10 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  if ( *(_BYTE *)(v10 + 32) )
  {
    *(_BYTE *)(v10 + 32) = 0;
    Inventory_ProcessItemSlots(*(_DWORD *)(this + 6392), (__int16 *)v10, 239, 1);
  }
  return CWindow_UpdateChildren((char *)this, a2);
}
// 658016B3: variable 'v11' is possibly undefined
// 658002E0: using guessed type int __thiscall sub_658002E0(_DWORD);
// 658008D0: using guessed type int __thiscall sub_658008D0(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65801CF0) --------------------------------------------------------
int __thiscall CWindowInventory_InitUI(int this)
{
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  int v19; // eax
  _DWORD *Full; // eax
  _DWORD *v21; // eax
  _DWORD *v22; // eax
  int v23; // eax
  int v24; // esi
  const char *v25; // eax
  int v26; // esi
  const char *v27; // eax
  int v28; // eax
  int v29; // esi
  const char *v30; // eax
  int v31; // eax
  int v32; // esi
  const char *v33; // eax
  int v34; // eax
  int v35; // esi
  const char *v36; // eax
  int v37; // eax
  int v38; // esi
  const char *v39; // eax
  int v40; // esi
  const char *v41; // eax
  int v42; // eax
  int v43; // esi
  const char *v44; // eax
  int v45; // eax
  int v46; // esi
  const char *v47; // eax
  int v48; // eax
  int v49; // esi
  const char *v50; // eax
  int v51; // eax
  int v52; // esi
  const char *v53; // eax
  int v54; // eax
  int v55; // esi
  const char *v56; // eax
  int v57; // esi
  const char *v58; // eax
  int v59; // eax
  int v60; // esi
  const char *v61; // eax
  int v62; // eax
  int v63; // esi
  const char *v64; // eax
  int v65; // eax
  int v66; // esi
  const char *v67; // eax
  int v68; // esi
  const char *v69; // eax
  int v70; // eax
  int v71; // esi
  const char *v72; // eax
  int v73; // eax
  int v74; // esi
  const char *v75; // eax
  int v76; // eax
  int v77; // esi
  const char *v78; // eax
  int v79; // eax
  int v80; // eax
  int v81; // eax
  int v82; // esi
  int *v84; // [esp-8h] [ebp-208h]
  int *v85; // [esp+10h] [ebp-1F0h] BYREF
  _DWORD v86[27]; // [esp+14h] [ebp-1ECh] BYREF
  _DWORD v87[27]; // [esp+80h] [ebp-180h] BYREF
  _DWORD v88[27]; // [esp+ECh] [ebp-114h] BYREF
  _DWORD v89[27]; // [esp+158h] [ebp-A8h] BYREF
  char v90[32]; // [esp+1C4h] [ebp-3Ch] BYREF
  int **v91; // [esp+1E4h] [ebp-1Ch] BYREF
  void *v92; // [esp+1E8h] [ebp-18h]
  int v93; // [esp+1FCh] [ebp-4h]

  UiTextStyle_Ctor(v89);
  v89[0] = 16;
  v89[1] = 12;
  v89[26] = 0;
  strncpy_s((char *)&v89[2], 0x10u, "85A6C500", 0xFFFFFFFF);
  qmemcpy(v87, v89, sizeof(v87));
  v87[0] = 18;
  UiTextStyle_Ctor(v88);
  v88[0] = 16;
  v88[1] = 12;
  v88[26] = 2;
  strncpy_s((char *)&v88[2], 0x10u, "D8EAFF00", 0xFFFFFFFF);
  qmemcpy(v86, v88, sizeof(v86));
  v86[0] = 18;
  ItemsAddedEntry_Init(v90);
  v93 = 0;
  *(_DWORD *)(this + 7156) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 292, 62, v90, 13, 2, 48, 48);
  v2 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6004);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7156), v2);
  *(_DWORD *)(this + 7124) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 236, 116, v90, 5, 2, 48, 48);
  v3 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6005);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7124), v3);
  *(_DWORD *)(this + 7128) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 349, 116, v90, 6, 2, 48, 48);
  v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6006);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7128), v4);
  *(_DWORD *)(this + 7132) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 235, 176, v90, 7, 2, 48, 48);
  v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6007);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7132), v5);
  *(_DWORD *)(this + 7160) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 349, 176, v90, 14, 2, 48, 48);
  v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6008);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7160), v6);
  *(_DWORD *)(this + 7136) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 292, 197, v90, 8, 2, 48, 48);
  v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6009);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7136), v7);
  *(_DWORD *)(this + 7152) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 292, 251, v90, 12, 2, 48, 48);
  v8 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6010);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7152), v8);
  *(_DWORD *)(this + 7140) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 235, 300, v90, 9, 2, 48, 48);
  v9 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6011);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7140), v9);
  *(_DWORD *)(this + 7144) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 349, 300, v90, 10, 2, 48, 48);
  v10 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6012);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7144), v10);
  *(_DWORD *)(this + 7164) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 256, 369, v90, 15, 2, 48, 48);
  v11 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6013);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7164), v11);
  *(_DWORD *)(this + 7148) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 256, 433, v90, 11, 2, 48, 48);
  v12 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6014);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7148), v12);
  *(_DWORD *)(this + 7168) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 256, 497, v90, 16, 2, 48, 48);
  v13 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6015);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7168), v13);
  *(_DWORD *)(this + 7172) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 349, 369, v90, 26, 4, 48, 48);
  v14 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6063);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7172), v14);
  v15 = *(_DWORD *)(this + 7172);
  *(_DWORD *)(v15 + 168) = 0;
  *(_DWORD *)(v15 + 44) = 0;
  *(_DWORD *)(this + 7176) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 349, 433, v90, 27, 4, 48, 48);
  v16 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6063);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7176), v16);
  v17 = *(_DWORD *)(this + 7176);
  *(_DWORD *)(v17 + 168) = 0;
  *(_DWORD *)(v17 + 44) = 0;
  *(_DWORD *)(this + 7180) = UiWidget_CreateContainer((_DWORD *)this, 0, 0, 0, 349, 497, v90, 28, 4, 48, 48);
  v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6063);
  UiItemSlot_SetTooltipHString(*(int **)(this + 7180), v18);
  v19 = *(_DWORD *)(this + 7180);
  *(_DWORD *)(v19 + 168) = 0;
  *(_DWORD *)(v19 + 44) = 0;
  Full = UiWidget_CreateFull(
           (_DWORD *)this,
           0,
           (int)byte_659A8B98,
           256,
           202,
           0,
           0,
           1,
           61,
           9,
           (int)&unk_65A5E158,
           2,
           0,
           0,
           0,
           1);
  *(_DWORD *)(this + 6368) = Full;
  Full[7] = 0;
  qmemcpy(&unk_65A5E590, &unk_65A5DB04, 0x6Cu);
  strncpy(byte_65A5E598, "A1B3D100", 0xFu);
  byte_65A5E5A7 = 0;
  v21 = UiWidget_CreateFull(
          (_DWORD *)this,
          0,
          (int)byte_659A8B98,
          256,
          200,
          0,
          0,
          1,
          61,
          23,
          (int)&unk_65A5E590,
          2,
          0,
          0,
          0,
          1);
  *(_DWORD *)(this + 6372) = v21;
  v21[7] = 0;
  qmemcpy(&unk_65A5E590, &unk_65A5C5EC, 0x6Cu);
  strncpy(byte_65A5E598, "D2D2D200", 0xFu);
  byte_65A5E5A7 = 0;
  v22 = UiWidget_CreateFull(
          (_DWORD *)this,
          0,
          (int)byte_659A8B98,
          256,
          200,
          0,
          0,
          1,
          61,
          37,
          (int)&unk_65A5E590,
          2,
          0,
          0,
          0,
          1);
  *(_DWORD *)(this + 6384) = v22;
  v22[7] = 0;
  v23 = sub_65748BD0(this, 0, 9, 11, 0, 0, 1);
  *(_DWORD *)(this + 6376) = v23;
  *(_DWORD *)(v23 + 200) = 1;
  v24 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6490);
  if ( v24 )
    v25 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v24);
  else
    v25 = byte_659A8B98;
  UiWidget_CreateFull((_DWORD *)this, 0, (int)v25, 32, 100, 0, 0, 1, 4, 57, (int)&unk_65A5D9C0, 2, 0, 0, 0, 1);
  if ( v24 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v24);
  v26 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6304);
  if ( v26 )
    v27 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v26);
  else
    v27 = byte_659A8B98;
  *(_DWORD *)(this + 6428) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v27,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               73,
                               (int)v87,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v26 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v26);
  v28 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6404);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6428), v28);
  *(_DWORD *)(this + 6640) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               73,
                               (int)v86,
                               2,
                               0,
                               0,
                               0,
                               1);
  v29 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6305);
  if ( v29 )
    v30 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v29);
  else
    v30 = byte_659A8B98;
  *(_DWORD *)(this + 6432) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v30,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               89,
                               (int)v87,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v29 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v29);
  v31 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6405);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6432), v31);
  *(_DWORD *)(this + 6644) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               89,
                               (int)v86,
                               2,
                               0,
                               0,
                               0,
                               1);
  v32 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6326);
  if ( v32 )
    v33 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v32);
  else
    v33 = byte_659A8B98;
  *(_DWORD *)(this + 6516) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v33,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               105,
                               (int)v87,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v32 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v32);
  v34 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6426);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6516), v34);
  *(_DWORD *)(this + 6728) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               105,
                               (int)v86,
                               2,
                               0,
                               0,
                               0,
                               1);
  v35 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6306);
  if ( v35 )
    v36 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v35);
  else
    v36 = byte_659A8B98;
  *(_DWORD *)(this + 6436) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v36,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               121,
                               (int)v87,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v35 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v35);
  v37 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6406);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6436), v37);
  *(_DWORD *)(this + 6648) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               121,
                               (int)v86,
                               2,
                               0,
                               0,
                               0,
                               1);
  v38 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6491);
  if ( v38 )
    v39 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v38);
  else
    v39 = byte_659A8B98;
  UiWidget_CreateFull((_DWORD *)this, 0, (int)v39, 32, 100, 0, 0, 1, 4, 146, (int)&unk_65A5D9C0, 2, 0, 0, 0, 1);
  if ( v38 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v38);
  v40 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6311);
  if ( v40 )
    v41 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v40);
  else
    v41 = byte_659A8B98;
  *(_DWORD *)(this + 6456) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v41,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               162,
                               (int)v89,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v40 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v40);
  v42 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6411);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6456), v42);
  *(_DWORD *)(this + 6668) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               162,
                               (int)v88,
                               2,
                               0,
                               0,
                               0,
                               1);
  v43 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6318);
  if ( v43 )
    v44 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v43);
  else
    v44 = byte_659A8B98;
  *(_DWORD *)(this + 6484) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v44,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               178,
                               (int)v89,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v43 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v43);
  v45 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6418);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6484), v45);
  *(_DWORD *)(this + 6696) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               178,
                               (int)v88,
                               2,
                               0,
                               0,
                               0,
                               1);
  v46 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6319);
  if ( v46 )
    v47 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v46);
  else
    v47 = byte_659A8B98;
  *(_DWORD *)(this + 6488) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v47,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               194,
                               (int)v89,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v46 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v46);
  v48 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6419);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6488), v48);
  *(_DWORD *)(this + 6700) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               194,
                               (int)v88,
                               2,
                               0,
                               0,
                               0,
                               1);
  v49 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6320);
  if ( v49 )
    v50 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v49);
  else
    v50 = byte_659A8B98;
  *(_DWORD *)(this + 6492) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v50,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               210,
                               (int)v89,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v49 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v49);
  v51 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6420);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6492), v51);
  *(_DWORD *)(this + 6704) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               210,
                               (int)v88,
                               2,
                               0,
                               0,
                               0,
                               1);
  v52 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6321);
  if ( v52 )
    v53 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v52);
  else
    v53 = byte_659A8B98;
  *(_DWORD *)(this + 6496) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v53,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               226,
                               (int)v89,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v52 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v52);
  v54 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6421);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6496), v54);
  *(_DWORD *)(this + 6708) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               226,
                               (int)v88,
                               2,
                               0,
                               0,
                               0,
                               1);
  v55 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6492);
  if ( v55 )
    v56 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v55);
  else
    v56 = byte_659A8B98;
  UiWidget_CreateFull((_DWORD *)this, 0, (int)v56, 32, 100, 0, 0, 1, 4, 248, (int)&unk_65A5D9C0, 2, 0, 0, 0, 1);
  if ( v55 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v55);
  v57 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6322);
  if ( v57 )
    v58 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v57);
  else
    v58 = byte_659A8B98;
  *(_DWORD *)(this + 6500) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v58,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               264,
                               (int)v89,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v57 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v57);
  v59 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6422);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6500), v59);
  *(_DWORD *)(this + 6712) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               264,
                               (int)v88,
                               2,
                               0,
                               0,
                               0,
                               1);
  v60 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6301);
  if ( v60 )
    v61 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v60);
  else
    v61 = byte_659A8B98;
  *(_DWORD *)(this + 6416) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v61,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               280,
                               (int)v89,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v60 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v60);
  v62 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6401);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6416), v62);
  *(_DWORD *)(this + 6628) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               280,
                               (int)v88,
                               2,
                               0,
                               0,
                               0,
                               1);
  v63 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6324);
  if ( v63 )
    v64 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v63);
  else
    v64 = byte_659A8B98;
  *(_DWORD *)(this + 6508) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v64,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               296,
                               (int)v89,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v63 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v63);
  v65 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6424);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6508), v65);
  *(_DWORD *)(this + 6720) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               296,
                               (int)v88,
                               2,
                               0,
                               0,
                               0,
                               1);
  v66 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6493);
  if ( v66 )
    v67 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v66);
  else
    v67 = byte_659A8B98;
  UiWidget_CreateFull((_DWORD *)this, 0, (int)v67, 32, 100, 0, 0, 1, 4, 318, (int)&unk_65A5D9C0, 2, 0, 0, 0, 1);
  if ( v66 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v66);
  v68 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6330);
  if ( v68 )
    v69 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v68);
  else
    v69 = byte_659A8B98;
  *(_DWORD *)(this + 6532) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v69,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               334,
                               (int)v89,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v68 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v68);
  v70 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6430);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6532), v70);
  *(_DWORD *)(this + 6744) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               334,
                               (int)v88,
                               2,
                               0,
                               0,
                               0,
                               1);
  v71 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6331);
  if ( v71 )
    v72 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v71);
  else
    v72 = byte_659A8B98;
  *(_DWORD *)(this + 6536) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v72,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               350,
                               (int)v89,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v71 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v71);
  v73 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6431);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6536), v73);
  *(_DWORD *)(this + 6748) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               350,
                               (int)v88,
                               2,
                               0,
                               0,
                               0,
                               1);
  v74 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6332);
  if ( v74 )
    v75 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v74);
  else
    v75 = byte_659A8B98;
  *(_DWORD *)(this + 6540) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v75,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               366,
                               (int)v89,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v74 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v74);
  v76 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6432);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6540), v76);
  *(_DWORD *)(this + 6752) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               366,
                               (int)v88,
                               2,
                               0,
                               0,
                               0,
                               1);
  v77 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6333);
  if ( v77 )
    v78 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v77);
  else
    v78 = byte_659A8B98;
  *(_DWORD *)(this + 6544) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)v78,
                               32,
                               100,
                               0,
                               0,
                               1,
                               4,
                               382,
                               (int)v89,
                               2,
                               0,
                               0,
                               0,
                               1);
  if ( v77 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v77);
  v79 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6433);
  UiItemSlot_SetTooltipHString(*(int **)(this + 6544), v79);
  *(_DWORD *)(this + 6756) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               60,
                               0,
                               0,
                               1,
                               154,
                               382,
                               (int)v88,
                               2,
                               0,
                               0,
                               0,
                               1);
  *(_DWORD *)(this + 6396) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               96,
                               0,
                               0,
                               1,
                               8,
                               408,
                               (int)&unk_65A5D9C0,
                               2,
                               0,
                               0,
                               0,
                               1);
  *(_DWORD *)(this + 6400) = UiWidget_CreateFull(
                               (_DWORD *)this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               96,
                               0,
                               0,
                               1,
                               104,
                               408,
                               (int)&unk_65A5DA98,
                               2,
                               0,
                               0,
                               0,
                               1);
  v80 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  v81 = sub_65749290(this, 0, 8, 422, 212, 144, v80, 48, 1, (void *)1, 0);
  *(_DWORD *)(this + 6392) = v81;
  *(_DWORD *)(v81 + 96) = 1;
  *(_BYTE *)(*(_DWORD *)(this + 6392) + 100) = 0;
  v82 = GroupWindow_Initialize(this);
  v84 = *(int **)v92;
  v93 = -1;
  RBTree_EraseRange(&v91, &v85, v84, (int *)v92);
  operator delete(v92);
  return v82;
}
// 65748BD0: using guessed type int __thiscall sub_65748BD0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65A5E5A7: using guessed type char byte_65A5E5A7;

//----- (65804EB0) --------------------------------------------------------
void __thiscall StatWindow_SetPercentValue(int *this, int a2, unsigned int __saved_registers, int __return_address)
{
  char v5[16]; // [esp+0h] [ebp-18h] BYREF

  *(this + 1592) = a2;
  *(this + 1593) = __return_address;
  sprintf(&v5[4], "%.1f%%", (double)__saved_registers / (double)(unsigned int)g_StatScaleTable[0] * 100.0);
  UiText_SetValueIfChanged(*(this + 1594), &v5[4], 0, 0);
}
// 659E0CA8: using guessed type int g_StatScaleTable[];

//----- (658055C0) --------------------------------------------------------
_DWORD *__thiscall LoginField_ApplyString(int *this, int a2, int a3)
{
  int v4; // eax
  int v5; // edi
  char *v6; // eax
  _DWORD *v7; // eax
  int v8; // eax
  _DWORD *v10; // eax

  *(this + 1594) = a2;
  if ( a3 )
    v4 = (*(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, a2, a3);
  else
    v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, a2);
  v5 = v4;
  v6 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
  UiText_SetValueIfChanged(*(this + 1593), v6, 1, 0);
  if ( v5 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
  v7 = (_DWORD *)*(this + 1595);
  if ( *(this + 1592) == 5 )
  {
    v7[6] = 0;
    v7[50] = 0;
    v8 = *(this + 1596);
    *(_DWORD *)(v8 + 24) = 0;
    *(_DWORD *)(v8 + 200) = 0;
    return GroupWindow_SetBackgroundImage((int)this, 999999999, 400, *(_DWORD *)(*(this + 1593) + 196) + 20);
  }
  else
  {
    v7[6] = 1;
    v7[50] = 1;
    v7[8] = 1;
    v10 = (_DWORD *)*(this + 1596);
    v10[6] = 1;
    v10[50] = 1;
    v10[8] = 1;
    return GroupWindow_SetBackgroundImage((int)this, 999999999, 400, 120);
  }
}

//----- (658056B0) --------------------------------------------------------
_WORD *__thiscall SystemAddress_Copy(_WORD *this, int a2)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  *(this + 2) = *(_WORD *)(a2 + 4);
  return this;
}

//----- (658057E0) --------------------------------------------------------
void __cdecl __noreturn Vector60_ThrowLengthError(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (658058C0) --------------------------------------------------------
void *__cdecl SafeNew60Array_CheckOverflow(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x3C )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(60 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65805EC0) --------------------------------------------------------
char __thiscall Vector60_Reserve(_DWORD *this, unsigned int a2)
{
  char *v4; // eax
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( !a2 )
    return 0;
  if ( a2 > 0x4444444 )
    Vector60_ThrowLengthError(v5, v6);
  v4 = (char *)SafeNew60Array_CheckOverflow(a2);
  *(this + 1) = v4;
  *(this + 2) = v4;
  *(this + 3) = &v4[60 * a2];
  return 1;
}
// 65805EE9: variable 'v5' is possibly undefined
// 65805EE9: variable 'v6' is possibly undefined

//----- (65806050) --------------------------------------------------------
_BYTE *__cdecl sub_65806050(_BYTE *a1, _BYTE *a2, _BYTE *a3)
{
  _BYTE *v3; // ebx
  _BYTE *v4; // esi
  _BYTE *v5; // edi

  v3 = a1;
  if ( a1 != a2 )
  {
    v4 = a3 + 20;
    v5 = a1 + 20;
    do
    {
      *a3 = *v3;
      *((_DWORD *)v4 - 4) = *((_DWORD *)v5 - 4);
      *((_WORD *)v4 - 6) = *((_WORD *)v5 - 6);
      *((_WORD *)v4 - 4) = *((_WORD *)v5 - 4);
      *(v4 - 4) = *(v5 - 4);
      sub_6579B930(v4, v5);
      v4[16] = v5[16];
      sub_65799930(v4 + 20, v5 + 20);
      a3 += 60;
      *((_DWORD *)v4 + 9) = *((_DWORD *)v5 + 9);
      v3 += 60;
      v4 += 60;
      v5 += 60;
    }
    while ( v3 != a2 );
  }
  return a3;
}
// 65799930: using guessed type int __thiscall sub_65799930(_DWORD, _DWORD);
// 6579B930: using guessed type int __thiscall sub_6579B930(_DWORD, _DWORD);

//----- (658060D0) --------------------------------------------------------
void __cdecl Vector60_DestroyRange(int a1, int a2)
{
  int v2; // ebx
  int v3; // esi
  int v4; // eax

  v2 = a1;
  if ( a1 != a2 )
  {
    v3 = a1 + 44;
    do
    {
      if ( *(_DWORD *)v3 )
        operator delete(*(void **)v3);
      *(_DWORD *)v3 = 0;
      *(_DWORD *)(v3 + 4) = 0;
      *(_DWORD *)(v3 + 8) = 0;
      v4 = *(_DWORD *)(v3 - 20);
      if ( v4 )
      {
        PacketArray88_DestroyRange(v4, *(_DWORD *)(v3 - 16));
        operator delete(*(void **)(v3 - 20));
      }
      *(_DWORD *)(v3 - 20) = 0;
      *(_DWORD *)(v3 - 16) = 0;
      *(_DWORD *)(v3 - 12) = 0;
      v2 += 60;
      v3 += 60;
    }
    while ( v2 != a2 );
  }
}

//----- (65806140) --------------------------------------------------------
_BYTE *__cdecl Vector60_FilterDefault(_BYTE *a1, _BYTE *a2, _BYTE *a3)
{
  return sub_65806050(a1, a2, a3);
}

//----- (65806190) --------------------------------------------------------
void __stdcall Vector60_DestroyWrapper(int a1, int a2)
{
  Vector60_DestroyRange(a1, a2);
}

//----- (658062B0) --------------------------------------------------------
void __thiscall Vector60_Compact(int *this)
{
  _BYTE *v2; // eax
  _BYTE *v3; // ecx
  _BYTE *v4; // edi

  v2 = (_BYTE *)*(this + 2);
  v3 = (_BYTE *)*(this + 1);
  if ( v3 != v2 )
  {
    v4 = sub_65806050(v2, v2, v3);
    Vector60_DestroyRange((int)v4, *(this + 2));
    *(this + 2) = (int)v4;
  }
}

//----- (658063B0) --------------------------------------------------------
int __thiscall Packet_ID_7B_Dtor(_DWORD *this)
{
  int v2; // eax
  void **v3; // esi
  int v4; // eax

  v2 = *(this + 281);
  v3 = (void **)(this + 280);
  if ( v2 )
  {
    Vector60_DestroyRange(v2, *(this + 282));
    operator delete(v3[1]);
  }
  v3[1] = 0;
  v3[2] = 0;
  v3[3] = 0;
  v4 = *(this + 272);
  if ( v4 )
  {
    ItemVector_DestroyRange(v4, *(this + 273));
    operator delete((void *)*(this + 272));
  }
  *(this + 272) = 0;
  *(this + 273) = 0;
  *(this + 274) = 0;
  *this = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 3));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (658064C0) --------------------------------------------------------
char *__thiscall Packet_ID_WORLD_SELECT_Ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = 123;
  *(_DWORD *)this = &off_659CB498;
  *((_DWORD *)this + 272) = 0;
  *((_DWORD *)this + 273) = 0;
  *((_DWORD *)this + 274) = 0;
  *((_WORD *)this + 540) = 0;
  *(this + 1112) = 0;
  *((_DWORD *)this + 275) = 0;
  *((_DWORD *)this + 276) = 0;
  *((_DWORD *)this + 277) = 0;
  Packet_ID_7B_Sub6List_Init(this + 1120);
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *(this + 1077) = 0;
  *(this + 1078) = 0;
  *((_DWORD *)this + 279) = 0;
  return this;
}
// 65806470: using guessed type int __thiscall Packet_ID_7B_Sub6List_Init(_DWORD);
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CB498: using guessed type void *off_659CB498;

//----- (65806590) --------------------------------------------------------
char __thiscall Packet_ID_WORLD_SELECT_Read(int this, int payload)
{
  char ok; // al

  ok = VariableSizedPacket::Read((_DWORD *)this, payload);
  if ( ok )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 2:
        ItemList_Read((ItemsAddedPayload *)(this + 1080), (unsigned int *)(this + 12));
        ok = 1;
        break;
      case 3:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1116));
        Read_u8c((unsigned int *)this, (char *)(this + 1077));
        Read_u8c((unsigned int *)this, (char *)(this + 1078));
        ok = 1;
        break;
      case 4:
        Read_u8c((unsigned int *)this, (char *)(this + 1077));
        Read_u8c((unsigned int *)this, (char *)(this + 1078));
        ok = 1;
        break;
      case 6:
        Packet_ID_7B_ReadSubId6List((char *)(this + 1120), (unsigned int *)(this + 12));
        ok = 1;
        break;
      case 7:
        Read_u8c((unsigned int *)this, (char *)(this + 1077));
        Read_u8c((unsigned int *)this, (char *)(this + 1078));
        goto LABEL_8;
      default:
LABEL_8:
        ok = 1;
        break;
    }
  }
  return ok;
}

//----- (65806F70) --------------------------------------------------------
_DWORD *__thiscall sub_65806F70(_DWORD *this)
{
  *(this + 105) = -1;
  *(this + 106) = -1;
  *(this + 8) = 0;
  *(this + 205) = 0;
  *(this + 107) = 0;
  *(this + 5) = 0;
  *(this + 6) = 0;
  *(this + 7) = 0;
  *(this + 204) = 0;
  *(this + 9) = 0;
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 201) = 0;
  *(this + 10) = 0;
  *(this + 11) = 0;
  *(this + 3) = 0;
  *(this + 4) = 0;
  *this = &off_659CB74C;
  memset(this + 12, 0, 0x174u);
  return this;
}
// 659CB74C: using guessed type void *off_659CB74C;

//----- (658072E0) --------------------------------------------------------
int __thiscall WindowMgr_CloseAllInputFocused(_BYTE **this)
{
  _BYTE **v1; // esi
  int v2; // edi
  _BYTE *v3; // ecx
  int result; // eax

  v1 = this + 12;
  v2 = 93;
  do
  {
    v3 = *v1;
    if ( *v1 && v3[6316] )
    {
      if ( v3[6241] )
        result = (*(int (__thiscall **)(_BYTE *, int, _DWORD, _DWORD))(*(_DWORD *)v3 + 4))(v3, 4, 0, 0);
    }
    ++v1;
    --v2;
  }
  while ( v2 );
  return result;
}

//----- (65807380) --------------------------------------------------------
int __thiscall WindowMgr_SetFocusWindow(_DWORD *this, _DWORD *a2, int a3)
{
  _DWORD *v4; // ecx
  int v5; // eax
  int result; // eax

  v4 = (_DWORD *)*(this + 1);
  if ( v4 )
  {
    UiWidget_SetState(v4, 0);
    UiWidget_SetVisible((_DWORD *)*(this + 1), 0);
  }
  v5 = *(this + 2);
  if ( v5 )
    *(_DWORD *)(v5 + 6288) = 0;
  if ( a2 && (result = a3) != 0 )
  {
    if ( a2[95] )
    {
      *(this + 1) = a2;
      *(this + 2) = a3;
      UiWidget_SetState(a2, 1);
      UiWidget_SetVisible((_DWORD *)*(this + 1), 1);
      *(_DWORD *)(*(this + 1) + 464) = 1;
      *(_DWORD *)(*(this + 2) + 6288) = *(this + 1);
      result = (*(int (__cdecl **)(_DWORD))(g_pILTClient + 424))(0);
      *(this + 201) = 1;
    }
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
    result = (*(int (__cdecl **)(int))(g_pILTClient + 424))(1);
    *(this + 201) = 0;
  }
  return result;
}

//----- (65807540) --------------------------------------------------------
int __thiscall CWindowMgr_GetWindowById(_DWORD *this, unsigned int a2)
{
  if ( a2 < 0x5D )
    return *(this + a2 + 12);
  else
    return 0;
}

//----- (65807710) --------------------------------------------------------
int __thiscall sub_65807710(int *this)
{
  int v2; // edi
  int v3; // esi
  unsigned int v4; // ecx
  int *v5; // edx
  int result; // eax
  _DWORD v7[93]; // [esp+Ch] [ebp-174h] BYREF

  memset(v7, 0, sizeof(v7));
  v2 = 92;
  *(_DWORD *)(*(this + 107) + 6260) = 92;
  v3 = 91;
  do
  {
    v4 = 0;
    v5 = this + 12;
    do
    {
      result = *v5;
      if ( *v5
        && result != *(this + 107)
        && *(_BYTE *)(result + 6240)
        && !v7[v4]
        && *(_BYTE *)(result + 6241)
        && *(_DWORD *)(result + 6260) == v2 )
      {
        if ( v3 <= 92 )
          *(_DWORD *)(result + 6260) = v3;
        if ( v3 > 0 )
          --v3;
        v7[v4] = 1;
      }
      ++v4;
      ++v5;
    }
    while ( v4 < 0x5D );
    --v2;
  }
  while ( v2 >= 0 );
  return result;
}

//----- (658079C0) --------------------------------------------------------
int __thiscall sub_658079C0(_DWORD **this)
{
  int result; // eax

  if ( *(this + 107) )
    return (*(int (__thiscall **)(_DWORD, int))(**(this + 107) + 44))(*(this + 107), 1);
  return result;
}

//----- (658079E0) --------------------------------------------------------
int __thiscall CWindowMgr_GetCachedWindowById(_DWORD *this, int a2)
{
  if ( a2 == *(this + 202) )
    return *(this + 203);
  else
    return 0;
}

//----- (65807A00) --------------------------------------------------------
void __thiscall sub_65807A00(_DWORD *this, unsigned int a2)
{
  void *v3; // eax
  int v4; // eax
  void *v5; // eax
  void *v6; // eax
  void *v7; // eax
  void *v8; // eax
  void *v9; // eax
  void *v10; // eax
  void *v11; // eax
  void *v12; // eax
  void *v13; // eax
  void *v14; // eax
  void *v15; // eax
  void *v16; // eax
  void *v17; // eax
  void *v18; // eax
  void *v19; // eax
  void *v20; // eax
  void *v21; // eax
  void *v22; // eax
  void *v23; // eax
  void *v24; // eax
  void *v25; // eax
  void *v26; // eax
  void *v27; // eax
  void *v28; // eax
  void *v29; // eax
  void *v30; // eax
  void *v31; // eax
  void *v32; // eax
  void *v33; // eax
  void *v34; // eax
  void *v35; // eax
  void *v36; // eax
  void *v37; // eax
  void *v38; // eax
  void *v39; // eax
  void *v40; // eax
  void *v41; // eax
  void *v42; // eax
  void *v43; // eax
  void *v44; // eax
  void *v45; // eax
  void *v46; // eax
  void *v47; // eax
  void *v48; // eax
  void *v49; // eax
  void *v50; // eax
  void *v51; // eax
  void *v52; // eax
  void *v53; // eax
  void *v54; // eax
  void *v55; // eax
  void *v56; // eax
  void *v57; // eax
  void *v58; // eax
  void *v59; // eax
  void *v60; // eax
  void *v61; // eax
  void *v62; // eax
  void *v63; // eax
  void *v64; // eax
  void *v65; // eax
  void *v66; // eax
  void *v67; // eax
  void *v68; // eax
  void *v69; // eax
  void *v70; // eax
  void *v71; // eax
  void *v72; // eax
  void *v73; // eax
  void *v74; // eax
  void *v75; // eax
  void *v76; // eax
  void *v77; // eax
  void *v78; // eax
  void *v79; // eax
  void *v80; // eax
  void *v81; // eax
  void *v82; // eax
  void *v83; // eax
  void *v84; // eax
  void *v85; // eax
  void *v86; // eax
  void *v87; // eax
  void *v88; // eax
  void *v89; // eax
  void *v90; // eax
  void *v91; // eax
  void *v92; // eax

  if ( a2 < 0x5D )
  {
    switch ( a2 )
    {
      case 0u:
        v7 = operator new(0x1A64u);
        if ( !v7 )
          goto LABEL_5;
        v4 = sub_6578E810(v7);
        goto LABEL_192;
      case 1u:
        v8 = operator new(0x1928u);
        if ( !v8 )
          goto LABEL_5;
        v4 = sub_657929D0(v8);
        goto LABEL_192;
      case 2u:
        v10 = operator new(0x19F8u);
        if ( !v10 )
          goto LABEL_5;
        v4 = sub_657AE350(v10);
        goto LABEL_192;
      case 3u:
        v6 = operator new(0x1A6Cu);
        if ( !v6 )
          goto LABEL_5;
        v4 = sub_65783520(v6);
        goto LABEL_192;
      case 4u:
        v3 = operator new(0x1900u);
        if ( !v3 )
          goto LABEL_5;
        v4 = sub_658C7260(v3);
        goto LABEL_192;
      case 5u:
        v5 = operator new(0x1C10u);
        if ( !v5 )
          goto LABEL_5;
        v4 = sub_657FFE50(v5);
        goto LABEL_192;
      case 6u:
        v16 = operator new(0x53ECu);
        if ( !v16 )
          goto LABEL_5;
        v4 = sub_65837E80(v16);
        goto LABEL_192;
      case 7u:
        v9 = operator new(0x1914u);
        if ( !v9 )
          goto LABEL_190;
        v4 = sub_657AC7E0(v9);
        goto LABEL_191;
      case 8u:
        v11 = operator new(0x3494u);
        if ( !v11 )
          goto LABEL_5;
        v4 = sub_657BAC40(v11);
        goto LABEL_192;
      case 9u:
        v12 = operator new(0x1F50u);
        if ( !v12 )
          goto LABEL_190;
        v4 = sub_657BC3A0(v12);
        goto LABEL_191;
      case 0xAu:
        v13 = operator new(0x290Cu);
        if ( !v13 )
          goto LABEL_5;
        v4 = sub_657C26C0(v13);
        goto LABEL_192;
      case 0xBu:
        v14 = operator new(0x18F0u);
        if ( !v14 )
          goto LABEL_5;
        v4 = sub_65820DD0(v14);
        goto LABEL_192;
      case 0xCu:
        v15 = operator new(0x1904u);
        if ( !v15 )
          goto LABEL_5;
        v4 = sub_658239A0(v15);
        goto LABEL_192;
      case 0xDu:
        v17 = operator new(0x18F0u);
        if ( !v17 )
          goto LABEL_5;
        v4 = sub_6583C7A0(v17);
        goto LABEL_192;
      case 0xEu:
        v18 = operator new(0x18F0u);
        if ( !v18 )
          goto LABEL_5;
        v4 = sub_6583E2F0(v18);
        goto LABEL_192;
      case 0xFu:
        v28 = operator new(0x18F8u);
        if ( !v28 )
          goto LABEL_5;
        v4 = sub_657C08A0(v28);
        goto LABEL_192;
      case 0x10u:
        v29 = operator new(0x221Cu);
        if ( !v29 )
          goto LABEL_5;
        v4 = sub_657C01C0(v29);
        goto LABEL_192;
      case 0x11u:
        v30 = operator new(0x190Cu);
        if ( !v30 )
          goto LABEL_5;
        v4 = sub_657EFE50(v30);
        goto LABEL_192;
      case 0x12u:
        v31 = operator new(0x190Cu);
        if ( !v31 )
          goto LABEL_5;
        v4 = sub_657AD2A0(v31);
        goto LABEL_192;
      case 0x13u:
        v32 = operator new(0x1BE4u);
        if ( !v32 )
          goto LABEL_190;
        v4 = sub_6586BBB0(v32);
        goto LABEL_191;
      case 0x14u:
        v33 = operator new(0x1AA0u);
        if ( !v33 )
          goto LABEL_5;
        v4 = sub_657CA680(v33);
        goto LABEL_192;
      case 0x15u:
        v34 = operator new(0x1DB8u);
        if ( !v34 )
          goto LABEL_190;
        v4 = sub_65862D70(v34);
        goto LABEL_191;
      case 0x16u:
        v35 = operator new(0x1BE0u);
        if ( !v35 )
          goto LABEL_190;
        v4 = sub_6584E7E0(v35);
        goto LABEL_191;
      case 0x17u:
        v36 = operator new(0x1B58u);
        if ( !v36 )
          goto LABEL_5;
        v4 = sub_657C7B70(v36);
        goto LABEL_192;
      case 0x18u:
        v37 = operator new(0x3738u);
        if ( !v37 )
          goto LABEL_5;
        v4 = sub_657E8DC0(v37);
        goto LABEL_192;
      case 0x19u:
        v38 = operator new(0x19ECu);
        if ( !v38 )
          goto LABEL_5;
        v4 = sub_657D26D0(v38);
        goto LABEL_192;
      case 0x1Au:
        v39 = operator new(0x1AA0u);
        if ( !v39 )
          goto LABEL_5;
        v4 = sub_6583C2D0(v39);
        goto LABEL_192;
      case 0x1Bu:
        v40 = operator new(0x18FCu);
        if ( !v40 )
          goto LABEL_5;
        v4 = sub_65795C90(v40);
        goto LABEL_192;
      case 0x1Cu:
        v41 = operator new(0x190Cu);
        if ( !v41 )
          goto LABEL_5;
        v4 = sub_65821870(v41);
        goto LABEL_192;
      case 0x1Du:
        v42 = operator new(0x191Cu);
        if ( !v42 )
          goto LABEL_5;
        v4 = sub_6583EBD0(v42);
        goto LABEL_192;
      case 0x1Eu:
        v43 = operator new(0x1D6Cu);
        if ( !v43 )
          goto LABEL_190;
        v4 = sub_657F0F00(v43);
        goto LABEL_191;
      case 0x1Fu:
        v44 = operator new(0x1D14u);
        if ( !v44 )
          goto LABEL_190;
        v4 = sub_657F2C50(v44);
        goto LABEL_191;
      case 0x20u:
        v45 = operator new(0x1B58u);
        if ( !v45 )
          goto LABEL_190;
        v4 = sub_6587F160(v45);
        goto LABEL_191;
      case 0x21u:
        v46 = operator new(0x1D38u);
        if ( !v46 )
          goto LABEL_5;
        v4 = sub_657EE7E0(v46);
        goto LABEL_192;
      case 0x22u:
        v47 = operator new(0x1A7Cu);
        if ( !v47 )
          goto LABEL_190;
        v4 = sub_65858DD0(v47);
        goto LABEL_191;
      case 0x23u:
        v48 = operator new(0x1BF4u);
        if ( !v48 )
          goto LABEL_190;
        v4 = sub_6584A6E0(v48);
        goto LABEL_191;
      case 0x24u:
        v49 = operator new(0x1AD8u);
        if ( !v49 )
          goto LABEL_5;
        v4 = sub_6581F170(v49);
        goto LABEL_192;
      case 0x25u:
        v50 = operator new(0x1A58u);
        if ( !v50 )
          goto LABEL_5;
        v4 = sub_658166D0(v50);
        goto LABEL_192;
      case 0x26u:
        v51 = operator new(0x1970u);
        if ( !v51 )
          goto LABEL_190;
        v4 = sub_658580A0(v51);
        goto LABEL_191;
      case 0x27u:
        v52 = operator new(0x1AF0u);
        if ( !v52 )
          goto LABEL_190;
        v4 = sub_65853D70(v52);
        goto LABEL_191;
      case 0x28u:
        v53 = operator new(0x18E8u);
        if ( !v53 )
          goto LABEL_5;
        v4 = sub_6580EA40(v53);
        goto LABEL_192;
      case 0x29u:
        v54 = operator new(0x1AF0u);
        if ( !v54 )
          goto LABEL_190;
        v4 = sub_657F7C40(v54);
        goto LABEL_191;
      case 0x2Au:
        v55 = operator new(0x18FCu);
        if ( !v55 )
          goto LABEL_190;
        v4 = sub_65804F50(v55);
        goto LABEL_191;
      case 0x2Bu:
        v56 = operator new(0x1938u);
        if ( !v56 )
          goto LABEL_190;
        v4 = sub_65810350(v56);
        goto LABEL_191;
      case 0x2Cu:
        v57 = operator new(0x1A80u);
        if ( !v57 )
          goto LABEL_190;
        v4 = sub_658678B0(v57);
        goto LABEL_191;
      case 0x2Du:
        v58 = operator new(0x1A6Cu);
        if ( !v58 )
          goto LABEL_190;
        v4 = sub_65866B50(v58);
        goto LABEL_191;
      case 0x2Eu:
        v59 = operator new(0x1AECu);
        if ( !v59 )
          goto LABEL_190;
        v4 = sub_65843D10(v59);
        goto LABEL_191;
      case 0x2Fu:
        v60 = operator new(0x193Cu);
        if ( !v60 )
          goto LABEL_190;
        v4 = sub_65823250(v60);
        goto LABEL_191;
      case 0x30u:
        v61 = operator new(0x1C7Cu);
        if ( !v61 )
          goto LABEL_190;
        v4 = sub_6585C0B0(v61);
        goto LABEL_191;
      case 0x31u:
        v62 = operator new(0x1C54u);
        if ( !v62 )
          goto LABEL_190;
        v4 = sub_65876FC0(v62);
        goto LABEL_191;
      case 0x32u:
        v63 = operator new(0x18ECu);
        if ( !v63 )
          goto LABEL_190;
        v4 = sub_657AB6C0(v63);
        goto LABEL_191;
      case 0x33u:
        v64 = operator new(0x19C4u);
        if ( !v64 )
          goto LABEL_5;
        v4 = sub_657B65D0(v64);
        goto LABEL_192;
      case 0x34u:
        v65 = operator new(0x18E8u);
        if ( !v65 )
          goto LABEL_190;
        v4 = sub_6585F4D0(v65);
        goto LABEL_191;
      case 0x35u:
        v66 = operator new(0x1D3Cu);
        if ( !v66 )
          goto LABEL_190;
        v4 = sub_657CCB70(v66);
        goto LABEL_191;
      case 0x36u:
        v67 = operator new(0x1AECu);
        if ( !v67 )
          goto LABEL_190;
        v4 = sub_65856320(v67);
        goto LABEL_191;
      case 0x37u:
        v68 = operator new(0x1934u);
        if ( !v68 )
          goto LABEL_190;
        v4 = sub_658493F0(v68);
        goto LABEL_191;
      case 0x38u:
        v69 = operator new(0x19C8u);
        if ( !v69 )
          goto LABEL_190;
        v4 = sub_65847170(v69);
        goto LABEL_191;
      case 0x39u:
        v70 = operator new(0x1908u);
        if ( !v70 )
          goto LABEL_190;
        v4 = sub_6585DD30(v70);
        goto LABEL_191;
      case 0x3Au:
        v71 = operator new(0x1A7Cu);
        if ( !v71 )
          goto LABEL_190;
        v4 = sub_6585F160(v71);
        goto LABEL_191;
      case 0x3Bu:
        v72 = operator new(0x1910u);
        if ( !v72 )
          goto LABEL_190;
        v4 = sub_657F57B0(v72);
        goto LABEL_191;
      case 0x3Cu:
        v73 = operator new(0x1908u);
        if ( !v73 )
          goto LABEL_190;
        v4 = sub_657F6560(v73);
        goto LABEL_191;
      case 0x3Du:
        v74 = operator new(0x18F8u);
        if ( !v74 )
          goto LABEL_5;
        v4 = sub_658046B0(v74);
        goto LABEL_192;
      case 0x3Eu:
        v75 = operator new(0x2A9Cu);
        if ( !v75 )
          goto LABEL_5;
        v4 = sub_6582EB10(v75);
        goto LABEL_192;
      case 0x3Fu:
        v76 = operator new(0x1918u);
        if ( !v76 )
          goto LABEL_5;
        v4 = sub_65831960((int)v76);
        goto LABEL_192;
      case 0x40u:
        v77 = operator new(0x46DCu);
        if ( !v77 )
          goto LABEL_5;
        v4 = sub_65834450(v77);
        goto LABEL_192;
      case 0x41u:
        v78 = operator new(0x1924u);
        if ( !v78 )
          goto LABEL_5;
        v4 = sub_658258A0(v78);
        goto LABEL_192;
      case 0x42u:
        v79 = operator new(0x18F8u);
        if ( !v79 )
          goto LABEL_5;
        v4 = sub_657B7E40(v79);
        goto LABEL_192;
      case 0x43u:
        v80 = operator new(0x1AB8u);
        if ( !v80 )
          goto LABEL_190;
        v4 = sub_658748C0(v80);
        goto LABEL_191;
      case 0x44u:
        v81 = operator new(0x1904u);
        if ( !v81 )
          goto LABEL_190;
        v4 = sub_657D3B90(v81);
        goto LABEL_191;
      case 0x45u:
        v82 = operator new(0x199Cu);
        if ( !v82 )
          goto LABEL_190;
        v4 = sub_65879DF0(v82);
        goto LABEL_191;
      case 0x46u:
        v83 = operator new(0x1AA4u);
        if ( !v83 )
          goto LABEL_190;
        v4 = sub_65871250(v83);
        goto LABEL_191;
      case 0x47u:
        v84 = operator new(0x1A54u);
        if ( !v84 )
          goto LABEL_190;
        v4 = sub_6587B300(v84);
        goto LABEL_191;
      case 0x48u:
        v85 = operator new(0x1900u);
        if ( !v85 )
          goto LABEL_5;
        v4 = sub_657EF530(v85);
        goto LABEL_192;
      case 0x49u:
        v86 = operator new(0x1AE4u);
        if ( !v86 )
          goto LABEL_190;
        v4 = sub_65851F40(v86);
        goto LABEL_191;
      case 0x4Au:
        v87 = operator new(0x1928u);
        if ( !v87 )
          goto LABEL_5;
        v4 = sub_657F4F40(v87);
        goto LABEL_192;
      case 0x4Bu:
        v88 = operator new(0x1A8Cu);
        if ( !v88 )
          goto LABEL_190;
        v4 = sub_65878E30(v88);
        goto LABEL_191;
      case 0x4Cu:
        v89 = operator new(0x1928u);
        if ( !v89 )
          goto LABEL_190;
        v4 = sub_65868680(v89);
        goto LABEL_191;
      case 0x4Du:
        v90 = operator new(0x1D1Cu);
        if ( !v90 )
          goto LABEL_5;
        v4 = sub_657F0DE0(v90);
        goto LABEL_192;
      case 0x4Eu:
        v91 = operator new(0x18F8u);
        if ( !v91 )
          goto LABEL_5;
        v4 = sub_6587D5D0(v91);
        goto LABEL_192;
      case 0x4Fu:
        v92 = operator new(0x1964u);
        if ( !v92 )
          goto LABEL_190;
        v4 = sub_6587CB40(v92);
        goto LABEL_191;
      case 0x50u:
        v19 = operator new(0x1D38u);
        if ( !v19 )
          goto LABEL_190;
        v4 = sub_657D0930(v19);
        goto LABEL_191;
      case 0x51u:
        v20 = operator new(0x1908u);
        if ( !v20 )
          goto LABEL_5;
        v4 = sub_657CFE90(v20);
        goto LABEL_192;
      case 0x52u:
        v21 = operator new(0x1908u);
        if ( !v21 )
          goto LABEL_5;
        v4 = sub_657CF730(v21);
        goto LABEL_192;
      case 0x53u:
        v22 = operator new(0x1910u);
        if ( v22 )
          goto LABEL_45;
        goto LABEL_5;
      case 0x54u:
        v22 = operator new(0x1910u);
        if ( v22 )
          goto LABEL_45;
        goto LABEL_5;
      case 0x55u:
        v22 = operator new(0x1910u);
        if ( !v22 )
          goto LABEL_5;
LABEL_45:
        v4 = sub_657D0800(v22);
        goto LABEL_192;
      case 0x56u:
        v23 = operator new(0x18FCu);
        if ( !v23 )
          goto LABEL_5;
        v4 = sub_657C5070(v23);
        goto LABEL_192;
      case 0x57u:
        v24 = operator new(0x1958u);
        if ( !v24 )
          goto LABEL_5;
        v4 = sub_6587BE90(v24);
        goto LABEL_192;
      case 0x58u:
        v25 = operator new(0x36D8u);
        if ( v25 )
          goto LABEL_55;
        goto LABEL_5;
      case 0x59u:
        v25 = operator new(0x36D8u);
        if ( v25 )
          goto LABEL_55;
        goto LABEL_5;
      case 0x5Au:
        v25 = operator new(0x36D8u);
        if ( !v25 )
          goto LABEL_5;
LABEL_55:
        v4 = sub_657F8E90(v25);
        goto LABEL_192;
      case 0x5Bu:
        v26 = operator new(0x1D0Cu);
        if ( v26 )
          v4 = sub_65805480(v26);
        else
LABEL_5:
          v4 = 0;
        goto LABEL_192;
      case 0x5Cu:
        v27 = operator new(0x1D00u);
        if ( v27 )
          v4 = sub_6587B4B0(v27);
        else
LABEL_190:
          v4 = 0;
LABEL_191:
        *(_BYTE *)(v4 + 6316) = 1;
LABEL_192:
        if ( v4 )
        {
          *(_DWORD *)(v4 + 4) = a2;
          *(_DWORD *)(v4 + 6260) = a2;
          *(this + a2 + 12) = v4;
        }
        break;
      default:
        return;
    }
  }
}
// 658089D7: conditional instruction was optimized away because %arg_0.4<5Du
// 65783520: using guessed type int __thiscall sub_65783520(_DWORD);
// 6578E810: using guessed type int __thiscall sub_6578E810(_DWORD);
// 657929D0: using guessed type int __thiscall sub_657929D0(_DWORD);
// 65795C90: using guessed type int __thiscall sub_65795C90(_DWORD);
// 657AB6C0: using guessed type int __thiscall sub_657AB6C0(_DWORD);
// 657AC7E0: using guessed type int __thiscall sub_657AC7E0(_DWORD);
// 657AD2A0: using guessed type int __thiscall sub_657AD2A0(_DWORD);
// 657AE350: using guessed type int __thiscall sub_657AE350(_DWORD);
// 657B65D0: using guessed type int __thiscall sub_657B65D0(_DWORD);
// 657B7E40: using guessed type int __thiscall sub_657B7E40(_DWORD);
// 657BAC40: using guessed type int __thiscall sub_657BAC40(_DWORD);
// 657BC3A0: using guessed type int __thiscall sub_657BC3A0(_DWORD);
// 657C01C0: using guessed type int __thiscall sub_657C01C0(_DWORD);
// 657C08A0: using guessed type int __thiscall sub_657C08A0(_DWORD);
// 657C26C0: using guessed type int __thiscall sub_657C26C0(_DWORD);
// 657C5070: using guessed type int __thiscall sub_657C5070(_DWORD);
// 657C7B70: using guessed type int __thiscall sub_657C7B70(_DWORD);
// 657CA680: using guessed type int __thiscall sub_657CA680(_DWORD);
// 657CCB70: using guessed type int __thiscall sub_657CCB70(_DWORD);
// 657CF730: using guessed type int __thiscall sub_657CF730(_DWORD);
// 657CFE90: using guessed type int __thiscall sub_657CFE90(_DWORD);
// 657D0800: using guessed type int __thiscall sub_657D0800(_DWORD);
// 657D0930: using guessed type int __thiscall sub_657D0930(_DWORD);
// 657D26D0: using guessed type int __thiscall sub_657D26D0(_DWORD);
// 657D3B90: using guessed type int __thiscall sub_657D3B90(_DWORD);
// 657E8DC0: using guessed type int __thiscall sub_657E8DC0(_DWORD);
// 657EE7E0: using guessed type int __thiscall sub_657EE7E0(_DWORD);
// 657EF530: using guessed type int __thiscall sub_657EF530(_DWORD);
// 657EFE50: using guessed type int __thiscall sub_657EFE50(_DWORD);
// 657F0DE0: using guessed type int __thiscall sub_657F0DE0(_DWORD);
// 657F0F00: using guessed type int __thiscall sub_657F0F00(_DWORD);
// 657F2C50: using guessed type int __thiscall sub_657F2C50(_DWORD);
// 657F4F40: using guessed type int __thiscall sub_657F4F40(_DWORD);
// 657F57B0: using guessed type int __thiscall sub_657F57B0(_DWORD);
// 657F6560: using guessed type int __thiscall sub_657F6560(_DWORD);
// 657F7C40: using guessed type int __thiscall sub_657F7C40(_DWORD);
// 657F8E90: using guessed type int __thiscall sub_657F8E90(_DWORD);
// 657FFE50: using guessed type int __thiscall sub_657FFE50(_DWORD);
// 658046B0: using guessed type int __thiscall sub_658046B0(_DWORD);
// 65804F50: using guessed type int __thiscall sub_65804F50(_DWORD);
// 65805480: using guessed type int __thiscall sub_65805480(_DWORD);
// 6580EA40: using guessed type int __thiscall sub_6580EA40(_DWORD);
// 65810350: using guessed type int __thiscall sub_65810350(_DWORD);
// 658166D0: using guessed type int __thiscall sub_658166D0(_DWORD);
// 6581F170: using guessed type int __thiscall sub_6581F170(_DWORD);
// 65820DD0: using guessed type int __thiscall sub_65820DD0(_DWORD);
// 65821870: using guessed type int __thiscall sub_65821870(_DWORD);
// 65823250: using guessed type int __thiscall sub_65823250(_DWORD);
// 658239A0: using guessed type int __thiscall sub_658239A0(_DWORD);
// 658258A0: using guessed type int __thiscall sub_658258A0(_DWORD);
// 6582EB10: using guessed type int __thiscall sub_6582EB10(_DWORD);
// 65834450: using guessed type int __thiscall sub_65834450(_DWORD);
// 65837E80: using guessed type int __thiscall sub_65837E80(_DWORD);
// 6583C2D0: using guessed type int __thiscall sub_6583C2D0(_DWORD);
// 6583C7A0: using guessed type int __thiscall sub_6583C7A0(_DWORD);
// 6583E2F0: using guessed type int __thiscall sub_6583E2F0(_DWORD);
// 6583EBD0: using guessed type int __thiscall sub_6583EBD0(_DWORD);
// 65843D10: using guessed type int __thiscall sub_65843D10(_DWORD);
// 65847170: using guessed type int __thiscall sub_65847170(_DWORD);
// 658493F0: using guessed type int __thiscall sub_658493F0(_DWORD);
// 6584A6E0: using guessed type int __thiscall sub_6584A6E0(_DWORD);
// 6584E7E0: using guessed type int __thiscall sub_6584E7E0(_DWORD);
// 65851F40: using guessed type int __thiscall sub_65851F40(_DWORD);
// 65853D70: using guessed type int __thiscall sub_65853D70(_DWORD);
// 65856320: using guessed type int __thiscall sub_65856320(_DWORD);
// 658580A0: using guessed type int __thiscall sub_658580A0(_DWORD);
// 65858DD0: using guessed type int __thiscall sub_65858DD0(_DWORD);
// 6585C0B0: using guessed type int __thiscall sub_6585C0B0(_DWORD);
// 6585DD30: using guessed type int __thiscall sub_6585DD30(_DWORD);
// 6585F160: using guessed type int __thiscall sub_6585F160(_DWORD);
// 6585F4D0: using guessed type int __thiscall sub_6585F4D0(_DWORD);
// 65862D70: using guessed type int __thiscall sub_65862D70(_DWORD);
// 65866B50: using guessed type int __thiscall sub_65866B50(_DWORD);
// 658678B0: using guessed type int __thiscall sub_658678B0(_DWORD);
// 65868680: using guessed type int __thiscall sub_65868680(_DWORD);
// 6586BBB0: using guessed type int __thiscall sub_6586BBB0(_DWORD);
// 65871250: using guessed type int __thiscall sub_65871250(_DWORD);
// 658748C0: using guessed type int __thiscall sub_658748C0(_DWORD);
// 65876FC0: using guessed type int __thiscall sub_65876FC0(_DWORD);
// 65878E30: using guessed type int __thiscall sub_65878E30(_DWORD);
// 65879DF0: using guessed type int __thiscall sub_65879DF0(_DWORD);
// 6587B300: using guessed type int __thiscall sub_6587B300(_DWORD);
// 6587B4B0: using guessed type int __thiscall sub_6587B4B0(_DWORD);
// 6587BE90: using guessed type int __thiscall sub_6587BE90(_DWORD);
// 6587CB40: using guessed type int __thiscall sub_6587CB40(_DWORD);
// 6587D5D0: using guessed type int __thiscall sub_6587D5D0(_DWORD);
// 6587F160: using guessed type int __thiscall sub_6587F160(_DWORD);
// 658C7260: using guessed type int __thiscall sub_658C7260(_DWORD);

//----- (65808BA0) --------------------------------------------------------
int __thiscall sub_65808BA0(_DWORD *this)
{
  unsigned int i; // esi
  int result; // eax

  for ( i = 0; i < 0x5D; ++i )
  {
    result = CWindowMgr_GetWindowById(this, i);
    if ( result )
      result = (*(int (__thiscall **)(int))(*(_DWORD *)result + 20))(result);
  }
  return result;
}

//----- (65808BD0) --------------------------------------------------------
int __thiscall sub_65808BD0(_DWORD *this)
{
  int v2; // ecx
  int result; // eax
  int v4; // ecx

  v2 = *(this + 93);
  if ( v2 )
    result = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v2 + 28))(v2, 0);
  v4 = *(this + 94);
  if ( v4 )
    result = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v4 + 28))(v4, 0);
  *(this + 3) = 0;
  return result;
}

//----- (65808CF0) --------------------------------------------------------
int __thiscall sub_65808CF0(_DWORD *this)
{
  int v2; // ecx
  int result; // eax
  int v4; // ecx
  int v5; // ecx

  v2 = *(this + 95);
  if ( v2 )
    result = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v2 + 28))(v2, 0);
  v4 = *(this + 96);
  if ( v4 )
    result = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v4 + 28))(v4, 0);
  v5 = *(this + 97);
  if ( v5 )
    result = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v5 + 28))(v5, 0);
  *(this + 4) = 0;
  return result;
}

//----- (65808D40) --------------------------------------------------------
int __thiscall sub_65808D40(_DWORD *this)
{
  int v1; // ecx
  int result; // eax

  v1 = *(this + 98);
  if ( v1 )
    return (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)v1 + 28))(v1, 0);
  return result;
}

//----- (65808D90) --------------------------------------------------------
int __thiscall sub_65808D90(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ecx
  int result; // eax

  v1 = (_DWORD *)*(this + 99);
  if ( v1 )
  {
    v2 = v1[1592];
    if ( v2 )
      (*(void (__thiscall **)(int))(*(_DWORD *)v2 + 48))(v2);
    return (*(int (__thiscall **)(_DWORD *, _DWORD))(*v1 + 28))(v1, 0);
  }
  return result;
}

//----- (65808DC0) --------------------------------------------------------
void __thiscall sub_65808DC0(int *this)
{
  int v2; // edi
  int v3; // eax
  int v4; // edi
  int v5; // eax
  int v6; // edi
  int v7; // eax

  v2 = *(this + 100);
  if ( v2 && *(_BYTE *)(v2 + 6241) )
  {
    WindowMgr_SetFocusWindow(this, 0, 0);
    v3 = *(_DWORD *)(v2 + 6368);
    switch ( v3 )
    {
      case 16:
        *(this + 107) = *(this + 28);
        break;
      case 53:
        *(this + 107) = *(this + 65);
        break;
      case 77:
        *(this + 107) = *(this + 89);
        break;
    }
    sub_65807710(this);
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v2 + 28))(v2, 0);
  }
  v4 = *(this + 101);
  if ( v4 && *(_BYTE *)(v4 + 6241) )
  {
    WindowMgr_SetFocusWindow(this, 0, 0);
    v5 = *(_DWORD *)(v4 + 6368);
    switch ( v5 )
    {
      case 16:
        *(this + 107) = *(this + 28);
        break;
      case 53:
        *(this + 107) = *(this + 65);
        break;
      case 77:
        *(this + 107) = *(this + 89);
        break;
    }
    sub_65807710(this);
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v4 + 28))(v4, 0);
  }
  v6 = *(this + 102);
  if ( v6 && *(_BYTE *)(v6 + 6241) )
  {
    WindowMgr_SetFocusWindow(this, 0, 0);
    v7 = *(_DWORD *)(v6 + 6368);
    switch ( v7 )
    {
      case 16:
        *(this + 107) = *(this + 28);
        break;
      case 53:
        *(this + 107) = *(this + 65);
        break;
      case 77:
        *(this + 107) = *(this + 89);
        break;
    }
    sub_65807710(this);
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v6 + 28))(v6, 0);
  }
}

//----- (65808F10) --------------------------------------------------------
int __thiscall sub_65808F10(_DWORD *this)
{
  int result; // eax

  if ( *(this + 28) )
    return sub_657BE620(13);
  return result;
}
// 657BE620: using guessed type int __stdcall sub_657BE620(_DWORD);

//----- (65808F70) --------------------------------------------------------
int __thiscall LoginField_QueueUpdate(int **this, int a2, int a3, int a4, int a5)
{
  int v5; // esi
  int v6; // edx
  void (__thiscall *v7)(int, int); // eax

  v5 = (int)*(this + 103);
  if ( !v5 || *(_BYTE *)(v5 + 6241) )
    return 0;
  *(_DWORD *)(v5 + 6396) = a4;
  *(_DWORD *)(v5 + 6368) = a2;
  LoginField_ApplyString((int *)v5, a3, a5);
  (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 16))(v5);
  v6 = *(_DWORD *)v5;
  *(float *)(v5 + 6400) = 0.0;
  v7 = *(void (__thiscall **)(int, int))(v6 + 28);
  *(float *)(v5 + 6404) = 0.0;
  v7(v5, 1);
  return 1;
}

//----- (65809040) --------------------------------------------------------
int __thiscall sub_65809040(_DWORD *this)
{
  int result; // eax
  _BYTE *v2; // ecx

  v2 = (_BYTE *)*(this + 103);
  if ( v2 )
  {
    if ( v2[6241] )
      return (*(int (__thiscall **)(_BYTE *, int, _DWORD, _DWORD))(*(_DWORD *)v2 + 4))(v2, 5, 0, 0);
  }
  return result;
}

//----- (65809060) --------------------------------------------------------
int __thiscall sub_65809060(int *this, char *Source, int a3, int a4, int a5, int a6, float a7)
{
  int v8; // esi

  v8 = *(this + 92);
  if ( !v8 || !sub_657D1480(Source, a3, a4, a5, a6, a7) )
    return 0;
  (*(void (__thiscall **)(int, int))(*(_DWORD *)v8 + 28))(v8, 1);
  *(this + 107) = v8;
  sub_65807710(this);
  (*(void (__thiscall **)(int))(*(_DWORD *)v8 + 16))(v8);
  return 1;
}

//----- (65809130) --------------------------------------------------------
int __thiscall TooltipMgr_ShowItemTooltip(int *this, float a2, char *Source, char *a4, int a5, int a6)
{
  int v7; // esi

  v7 = *(this + 92);
  if ( !v7 || !DialogUI_SetupWithOptions(v7, a2, Source, a4, a5, a6) )
    return 0;
  (*(void (__thiscall **)(int, int))(*(_DWORD *)v7 + 28))(v7, 1);
  *(this + 107) = v7;
  sub_65807710(this);
  (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 16))(v7);
  return 1;
}

//----- (658092A0) --------------------------------------------------------
int __thiscall sub_658092A0(unsigned __int16 *this)
{
  int result; // eax

  LOWORD(result) = *(this + 2);
  if ( !(_WORD)result )
    LOWORD(result) = ItemTemplate_GetAmmoItemId(g_ItemTemplateById, *this);
  return (unsigned __int16)result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658092D0) --------------------------------------------------------
BOOL __thiscall sub_658092D0(unsigned __int16 *this)
{
  unsigned __int16 AmmoItemId; // ax

  AmmoItemId = *(this + 2);
  if ( !AmmoItemId )
    AmmoItemId = ItemTemplate_GetAmmoItemId(g_ItemTemplateById, *this);
  return *(this + 1) >= AmmoItemId;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65809300) --------------------------------------------------------
bool __thiscall sub_65809300(unsigned __int16 *this)
{
  return *(this + 3) == (unsigned __int16)ItemTemplate_GetMaxDurability(*this);
}

//----- (65809320) --------------------------------------------------------
char __thiscall SetByte29(_BYTE *this, char a2)
{
  *(this + 29) = a2;
  return a2;
}

//----- (65809330) --------------------------------------------------------
int __thiscall Item_GetAmmoItemIdOrTemplate(unsigned __int16 *this)
{
  int result; // eax

  LOWORD(result) = *(this + 4);
  if ( !(_WORD)result )
    LOWORD(result) = ItemTemplate_GetAmmoItemId(g_ItemTemplateById, *(this + 2));
  return (unsigned __int16)result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658093A0) --------------------------------------------------------
double __thiscall Item_GetDurabilityPercent(unsigned __int16 *this)
{
  double v2; // [esp+0h] [ebp-Ch]

  v2 = (double)*(this + 5);
  return (float)(v2 / (double)(unsigned __int16)ItemTemplate_GetMaxDurability(*(this + 2)) * 100.0);
}

//----- (65809540) --------------------------------------------------------
int __thiscall EquipSlotsWindow_ClearAll(_DWORD *this)
{
  _DWORD *v2; // edi
  unsigned int v3; // esi
  _DWORD *v4; // esi
  int v5; // edi
  _DWORD *v6; // esi
  int v7; // edi
  _DWORD *v9; // [esp+Ch] [ebp-4h]

  v2 = this + 12;
  v3 = 0;
  v9 = this + 12;
  do
  {
    *v2 = 0;
    sub_65807A00(this, v3++);
    ++v2;
  }
  while ( v3 < 0x5D );
  v4 = v9;
  v5 = 93;
  do
  {
    if ( *v4 )
      (*(void (__thiscall **)(_DWORD))(*(_DWORD *)*v4 + 16))(*v4);
    ++v4;
    --v5;
  }
  while ( v5 );
  sub_65808BA0(this);
  v6 = v9;
  v7 = 93;
  do
  {
    if ( *v6 )
      (*(void (__thiscall **)(_DWORD))(*(_DWORD *)*v6 + 8))(*v6);
    ++v6;
    --v7;
  }
  while ( v7 );
  dword_65A53FF0 = 186;
  return 1;
}
// 65A53FF0: using guessed type int dword_65A53FF0;

//----- (65809A10) --------------------------------------------------------
int GetWindow35()
{
  int result; // eax

  result = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x23u);
  if ( result )
    JUMPOUT(0x6584AAF0);
  return result;
}
// 65809A23: control flows out of bounds to 6584AAF0
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65809A30) --------------------------------------------------------
int __thiscall EquipSlotsWindow_RefreshSlots(_BYTE **this)
{
  unsigned int v2; // esi
  _BYTE **v3; // edi
  _BYTE *v4; // ecx
  int result; // eax

  WindowMgr_SetFocusWindow(this, 0, 0);
  v2 = 0;
  v3 = this + 12;
  do
  {
    v4 = *v3;
    if ( *v3 )
    {
      switch ( v2 )
      {
        case 0u:
        case 1u:
        case 2u:
        case 3u:
        case 4u:
        case 0x10u:
        case 0x40u:
        case 0x4Du:
        case 0x58u:
        case 0x59u:
        case 0x5Au:
          break;
        default:
          if ( v2 != 14 && v2 != 40 && v2 != 78 )
            v4[6243] = 0;
          (*(void (__thiscall **)(_BYTE *, _DWORD))(*(_DWORD *)v4 + 28))(v4, 0);
          break;
      }
    }
    ++v2;
    ++v3;
  }
  while ( v2 < 0x5D );
  result = CWindowMgr_GetWindowById(this, 0x10u);
  if ( result )
    JUMPOUT(0x657BF5A0);
  return result;
}
// 65809A96: control flows out of bounds to 657BF5A0

//----- (65809C00) --------------------------------------------------------
_BYTE *__thiscall sub_65809C00(_DWORD *this, unsigned int a2)
{
  _BYTE *result; // eax

  result = (_BYTE *)CWindowMgr_GetWindowById(this, a2);
  if ( result )
    return (_BYTE *)(*(int (__thiscall **)(_BYTE *, bool))(*(_DWORD *)result + 28))(result, result[6241] == 0);
  return result;
}

//----- (65809C80) --------------------------------------------------------
int __thiscall sub_65809C80(int *this, int a2)
{
  int v3; // ecx
  int v4; // eax

  v3 = *(this + 107);
  if ( v3 && !*(this + 201) )
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v3 + 40))(v3, 0);
  v4 = *(this + 105);
  *(this + 107) = a2;
  *(this + 106) = v4;
  *(this + 105) = *(_DWORD *)(a2 + 4);
  if ( !*(_BYTE *)(a2 + 6240) )
    (*(void (__thiscall **)(int))(*(_DWORD *)a2 + 8))(a2);
  if ( a2 != *(this + 2) )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 40))(a2, 1);
  (*(void (__thiscall **)(int, int))(*(_DWORD *)a2 + 28))(a2, 1);
  return sub_65807710(this);
}

//----- (65809DE0) --------------------------------------------------------
int __thiscall sub_65809DE0(int *this, int a2, _DWORD *a3, int a4, int a5, int a6)
{
  bool v8; // bl
  int v9; // ebx
  int v10; // eax
  int *v11; // ecx
  int v12; // eax
  int *v13; // ebx
  int v15; // edi
  int v16; // eax
  int v17; // esi
  int v18; // edx
  int v19; // ecx
  int *v20; // ecx
  int v21; // [esp-10h] [ebp-38h]
  int v22; // [esp+8h] [ebp-20h]
  int v23; // [esp+Ch] [ebp-1Ch]
  int v24; // [esp+10h] [ebp-18h]
  int v25; // [esp+14h] [ebp-14h]
  int v26; // [esp+1Ch] [ebp-Ch]
  int v27; // [esp+20h] [ebp-8h]
  int v28; // [esp+24h] [ebp-4h]
  int v29; // [esp+30h] [ebp+8h]
  int *v30; // [esp+34h] [ebp+Ch]

  if ( a2 && a3 )
  {
    v8 = *(this + 3) == (_DWORD)a3;
    sub_65808BD0(this);
    sub_65808D90(this);
    if ( v8 )
      return 1;
    *(this + 3) = (int)a3;
    v28 = a3[17];
    v9 = a3[18];
    v10 = (*(int (__thiscall **)(_DWORD *))(*a3 + 20))(a3);
    v11 = (int *)*(this + 94);
    v12 = v10 + v9 + 1;
    v13 = (int *)*(this + 93);
    v26 = v12;
    v30 = v11;
    if ( a4 )
    {
      if ( v11 && ListWindow_PopulateFromDataSource(v11, a2, (int)a3) )
      {
        (*(void (__thiscall **)(int *, int))(*v30 + 28))(v30, 1);
        *(this + 107) = (int)v30;
        v22 = v30[1561];
        v23 = v30[1562];
        v24 = v30[1563];
        v25 = v30[1564];
        goto LABEL_12;
      }
    }
    else if ( v13 && ListWindow_PopulateFromDataSource_Alt(v13, a2, (int)a3) )
    {
      (*(void (__thiscall **)(int *, int))(*v13 + 28))(v13, 1);
      *(this + 107) = (int)v13;
      v22 = v13[1561];
      v23 = v13[1562];
      v24 = v13[1563];
      v25 = v13[1564];
LABEL_12:
      sub_65807710(this);
      v15 = v24 - v22;
      v29 = v25 - v23;
      if ( a5 )
      {
        v16 = v28;
      }
      else
      {
        v27 = a3[17];
        v16 = v27 - v15 + (*(int (__thiscall **)(_DWORD *))(*a3 + 16))(a3);
      }
      if ( a6 )
        v17 = v26;
      else
        v17 = a3[18] - v29 - 1;
      v18 = *(_DWORD *)&dword_65A55604 - v29;
      if ( v16 <= *(_DWORD *)&Data - v15 )
        v19 = v16;
      else
        v19 = *(_DWORD *)&Data - v15 - v15;
      if ( v17 <= v18 )
        v18 = v17;
      v21 = v19;
      v20 = v13;
      if ( a4 )
        v20 = v30;
      GroupWindow_UpdatePosition(v20, v21, v18, 1);
      return 1;
    }
    return 0;
  }
  return 0;
}

//----- (6580A1B0) --------------------------------------------------------
int __thiscall sub_6580A1B0(int *this, int a2, _DWORD *a3)
{
  int result; // eax
  int v6; // edi
  int v7; // edx
  int v8; // ecx
  int v9; // ebx
  int v10; // eax
  int v11; // ebx
  int v12; // eax
  int *v13; // ecx
  int v14; // ebx
  int v15; // [esp+10h] [ebp-14h]
  int v16; // [esp+10h] [ebp-14h]
  int v17; // [esp+18h] [ebp-Ch]
  int v18; // [esp+18h] [ebp-Ch]
  int v19; // [esp+1Ch] [ebp-8h]
  int v21; // [esp+2Ch] [ebp+8h]
  int v22; // [esp+30h] [ebp+Ch]

  result = LTClient_SendMessage((int)"ToolTips", 1);
  if ( result )
  {
    if ( a2 && a3 )
    {
      v6 = *(this + 99);
      if ( !v6 )
        return 0;
      if ( *(_BYTE *)(v6 + 6241) )
        sub_65808D90(this);
      if ( QuestUI_PopulateObjectiveList(v6, a2, a3) )
      {
        *(this + 107) = v6;
        v7 = *(_DWORD *)(v6 + 6252) - *(_DWORD *)(v6 + 6244);
        v21 = a3[27];
        v8 = *(_DWORD *)(v6 + 6256) - *(_DWORD *)(v6 + 6248);
        v17 = *(_DWORD *)&Data - v7;
        v19 = v7;
        v22 = v8;
        v15 = *(_DWORD *)&dword_65A55604 - v8;
        if ( v21 )
        {
          v9 = *(this + 10) - v7 - 5;
          v10 = *(this + 11) - v8 - 5;
        }
        else
        {
          v9 = a3[17] - v7 - 2;
          v10 = a3[18] - v8 - 2;
        }
        if ( v9 < 0 || v10 < 0 )
        {
          if ( v21 )
          {
            v9 = *(this + 10) + 5;
            v10 = *(this + 11) - v8 - 5;
          }
          else
          {
            v11 = a3[17];
            v12 = (*(int (__thiscall **)(_DWORD *))(*a3 + 16))(a3);
            v7 = v19;
            v9 = v12 + v11 + 2;
            v10 = a3[18] - v22 - 2;
          }
          if ( v9 > v17 || v10 < 0 )
          {
            if ( v21 )
            {
              v13 = this;
              v9 = *(this + 10) - v7 - 5;
              v10 = *(this + 11) + 5;
            }
            else
            {
              v18 = a3[18];
              v9 = a3[17] - v7 - 2;
              v10 = (*(int (__thiscall **)(_DWORD *))(*a3 + 20))(a3) + v18 + 2;
              v13 = this;
            }
            if ( v9 < 0 || v10 > v15 )
            {
              if ( v21 )
              {
                v9 = v13[10] + 5;
                v10 = v13[11] + 5;
              }
              else
              {
                v14 = a3[17];
                v9 = (*(int (__thiscall **)(_DWORD *))(*a3 + 16))(a3) + v14 + 2;
                v16 = a3[18];
                v10 = (*(int (__thiscall **)(_DWORD *))(*a3 + 20))(a3) + v16 + 2;
              }
            }
          }
        }
        GroupWindow_UpdatePosition((_DWORD *)v6, v9, v10, 1);
        sub_65807710(this);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v6 + 28))(v6, 1);
        return 1;
      }
      else
      {
        return 0;
      }
    }
    else
    {
      return 0;
    }
  }
  return result;
}

//----- (6580A3D0) --------------------------------------------------------
int __thiscall TooltipMgr_ShowTextTooltip(int *this, char *Source, int a3, int a4, int a5, char a6)
{
  int v7; // esi

  v7 = *(this + 92);
  if ( !v7 || !DialogUI_SetupConfirm(v7, Source, a3, a4, a5) )
    return 0;
  (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 16))(v7);
  if ( a6 )
    GameMode_SetModeFour((int *)dword_65ABF6F4, 0x50u);
  else
    sub_65809C80(this, v7);
  return 1;
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (6580A460) --------------------------------------------------------
BOOL __thiscall sub_6580A460(int this, int a2)
{
  return *(_WORD *)this == *(_WORD *)a2
      && *(_BYTE *)(this + 9) == *(_BYTE *)(a2 + 9)
      && *(_WORD *)(this + 6) == *(_WORD *)(a2 + 6)
      && *(_BYTE *)(this + 8) == *(_BYTE *)(a2 + 8)
      && *(_DWORD *)(this + 12) == *(_DWORD *)(a2 + 12)
      && *(_BYTE *)(this + 26) == *(_BYTE *)(a2 + 26)
      && ItemStructA_CompareVariantBytes((_BYTE *)this, a2)
      && *(_BYTE *)(this + 25) == *(_BYTE *)(a2 + 25)
      && *(_BYTE *)(this + 24) == *(_BYTE *)(a2 + 24);
}

//----- (6580A4D0) --------------------------------------------------------
BOOL __thiscall sub_6580A4D0(int this, int a2)
{
  return *(_WORD *)this == *(_WORD *)a2
      && *(_BYTE *)(this + 9) == *(_BYTE *)(a2 + 9)
      && *(_WORD *)(this + 2) == *(_WORD *)(a2 + 2)
      && *(_BYTE *)(this + 26) == *(_BYTE *)(a2 + 26)
      && ItemStructA_CompareVariantBytes((_BYTE *)this, a2)
      && *(_BYTE *)(this + 8) == *(_BYTE *)(a2 + 8)
      && *(_DWORD *)(this + 12) == *(_DWORD *)(a2 + 12)
      && *(_BYTE *)(this + 25) == *(_BYTE *)(a2 + 25)
      && *(_BYTE *)(this + 24) == *(_BYTE *)(a2 + 24);
}

//----- (6580A540) --------------------------------------------------------
char *__thiscall Packet_Unknown0_Ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -112;
  *(_DWORD *)this = &off_659CB764;
  *((_DWORD *)this + 272) = 0;
  *(this + 1101) = 0;
  *((_DWORD *)this + 276) = 0;
  *((_DWORD *)this + 277) = 0;
  *((_DWORD *)this + 278) = 0;
  *(this + 1117) = 0;
  *(this + 1118) = 0;
  *(this + 1116) = 0;
  *((_WORD *)this + 546) = 0;
  *((_WORD *)this + 548) = 0;
  *((_WORD *)this + 547) = 0;
  *((_WORD *)this + 549) = 0;
  *(this + 1100) = 100;
  *(_DWORD *)(this + 1119) = 0;
  *((_DWORD *)this + 281) = 0;
  *((_DWORD *)this + 282) = 0;
  *(this + 1132) = 0;
  *((_DWORD *)this + 284) = 0;
  *(this + 1148) = 100;
  *(this + 1149) = 0;
  *((_DWORD *)this + 288) = 0;
  *((_DWORD *)this + 289) = 0;
  *((_DWORD *)this + 290) = 0;
  *(this + 1165) = 0;
  *(this + 1166) = 0;
  *(this + 1164) = 0;
  *((_WORD *)this + 570) = 0;
  *((_WORD *)this + 571) = 0;
  *((_WORD *)this + 572) = 0;
  *((_WORD *)this + 573) = 0;
  *(_DWORD *)(this + 1167) = 0;
  *((_DWORD *)this + 293) = 0;
  *((_DWORD *)this + 294) = 0;
  *(this + 1180) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *((_DWORD *)this + 270) = 0;
  *((_DWORD *)this + 271) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CB764: using guessed type void *off_659CB764;

//----- (6580A6A0) --------------------------------------------------------
char *__thiscall sub_6580A6A0(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -94;
  *(_DWORD *)this = &off_659CB774;
  *((_DWORD *)this + 271) = 0;
  *(this + 1097) = 0;
  *((_DWORD *)this + 275) = 0;
  *((_DWORD *)this + 276) = 0;
  *((_DWORD *)this + 277) = 0;
  *(this + 1113) = 0;
  *(this + 1114) = 0;
  *(this + 1112) = 0;
  *((_WORD *)this + 544) = 0;
  *((_WORD *)this + 546) = 0;
  *((_WORD *)this + 545) = 0;
  *((_WORD *)this + 547) = 0;
  *(this + 1096) = 100;
  *(_DWORD *)(this + 1115) = 0;
  *((_DWORD *)this + 280) = 0;
  *((_DWORD *)this + 281) = 0;
  *(this + 1128) = 0;
  *((_WORD *)this + 540) = 0;
  *((_DWORD *)this + 268) = 0;
  *((_DWORD *)this + 269) = 0;
  *(this + 1082) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CB774: using guessed type void *off_659CB774;

//----- (6580AB50) --------------------------------------------------------
int __thiscall WindowMgr_ShowWindowById(int *this, unsigned int a2)
{
  int WindowById; // eax
  int *v4; // ecx

  WindowById = CWindowMgr_GetWindowById(this, a2);
  if ( !WindowById )
    return 0;
  sub_65809C80(v4, WindowById);
  if ( *(this + 201) )
  {
    if ( *(this + 2) )
      sub_65809C80(this, *(this + 2));
  }
  return 1;
}
// 6580AB64: variable 'v4' is possibly undefined

//----- (6580ABA0) --------------------------------------------------------
_BYTE *__thiscall InventoryWindow_ShowPopup(int *this, char *a2)
{
  int v3; // ebx
  _BYTE *result; // eax
  int v5; // esi

  v3 = *(this + 28);
  if ( v3 && !*(_BYTE *)(v3 + 6241) )
  {
    *(_BYTE *)(v3 + 6243) = 1;
    result = sub_65809C00(this, 0x10u);
  }
  v5 = *(this + 100);
  if ( v5 )
  {
    if ( !*(_BYTE *)(v5 + 6241) )
    {
      GroupWindow_UpdatePosition((_DWORD *)v5, *(_DWORD *)(v3 + 6244) + 32, *(_DWORD *)(v3 + 6256) - 20, 1);
      PopupUI_ShowMessage(v5, 16, a2);
      *(this + 107) = v5;
      sub_65807710(this);
      return (_BYTE *)(*(int (__thiscall **)(int, int))(*(_DWORD *)v5 + 28))(v5, 1);
    }
  }
  return result;
}

//----- (6580AC50) --------------------------------------------------------
BOOL __thiscall InventoryWindow_HandleItemByType(void *this, unsigned __int16 *a2)
{
  char Type; // al

  Type = ItemTemplate_GetType(g_ItemTemplateById, *a2);
  if ( Type == 5 || Type == 19 )
    return sub_6580A4D0((int)this, (int)a2);
  else
    return sub_6580A460((int)this, (int)a2);
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6580AC90) --------------------------------------------------------
char __thiscall Packet_ID_MERGE_ITEMS_read(int this, int a2)
{
  char result; // al
  unsigned int v4; // eax

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    v4 = *(_DWORD *)(this + 20);
    if ( v4 + 1 <= *(_DWORD *)(this + 12) )
    {
      *(_BYTE *)(this + 1076) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + *(_DWORD *)(this + 24))) != 0;
      ++*(_DWORD *)(this + 20);
    }
    if ( *(_BYTE *)(this + 1076) )
    {
      ItemEntryWithId_Read((char *)(this + 1088), (unsigned int *)(this + 12));
      ItemEntryWithId_Read((char *)(this + 1136), (unsigned int *)(this + 12));
    }
    else
    {
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1084));
    }
    return 1;
  }
  return result;
}

//----- (6580AD40) --------------------------------------------------------
char __thiscall Packet_ID_ItemSwap_Write(int this)
{
  char result; // al
  char *v3; // ecx

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    v3 = (char *)(this + 12);
    if ( *(_BYTE *)(this + 1076) )
      BitStream_WriteBit1(v3);
    else
      BitStream_WriteBit0(v3);
    if ( *(_BYTE *)(this + 1076) )
    {
      ItemStructAPlus_u32_write((unsigned __int16 *)(this + 1088), (char *)(this + 12));
      ItemStructAPlus_u32_write((unsigned __int16 *)(this + 1136), (char *)(this + 12));
    }
    else
    {
      BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
      BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1084));
    }
    return 1;
  }
  return result;
}

//----- (6580ADC0) --------------------------------------------------------
char __thiscall Packet_ID_SPLIT_CONTAINER_read(int this, int a2)
{
  char result; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1076));
    RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1080));
    ItemEntryWithId_Read((char *)(this + 1084), (unsigned int *)(this + 12));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1082), 8u, 1);
    return 1;
  }
  return result;
}

//----- (6580AE30) --------------------------------------------------------
char __thiscall Packet_ID_ItemSplit_Write(int this)
{
  char result; // al
  char v3[4]; // [esp+4h] [ebp-4h] BYREF

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1076));
    BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1080));
    ItemStructAPlus_u32_write((unsigned __int16 *)(this + 1084), (char *)(this + 12));
    v3[0] = *(_BYTE *)(this + 1082);
    BitStream_WriteBitsCompressed((char *)(this + 12), v3, 8u, 1);
    return 1;
  }
  return result;
}

//----- (6580AEC0) --------------------------------------------------------
int __thiscall sub_6580AEC0(int *this)
{
  int result; // eax
  _BYTE *v2; // esi
  int v4; // eax

  sub_6580A970();
  v4 = *(this + 103);
  if ( v4 && *(_BYTE *)(v4 + 6241) && !*(this + 201) )
  {
    *(this + 107) = v4;
    sub_65807710(this);
  }
  if ( *(_DWORD *)(dword_65ABF6F4 + 8) == 4 )
    JUMPOUT(0x6580A830);
  result = sub_65807040(this);
  v2 = (_BYTE *)*(this + 86);
  if ( v2 )
  {
    if ( v2[6241] )
    {
      sub_657493B0(v2);
      return (*(int (__thiscall **)(_BYTE *, int))(*(_DWORD *)v2 + 32))(v2, dword_65ABF780);
    }
  }
  return result;
}
// 6580AEFF: control flows out of bounds to 6580A830
// 657493B0: using guessed type int __thiscall sub_657493B0(_DWORD);
// 65807040: using guessed type int __cdecl sub_65807040(_DWORD);
// 6580A970: using guessed type int sub_6580A970(void);
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF780: using guessed type int dword_65ABF780;

//----- (6580AF10) --------------------------------------------------------
void __cdecl InventoryMgr_SendSplitRequest(int a1, int a2)
{
  int v2; // esi
  int v3; // eax
  bool v4; // cf
  int Dword_this; // eax
  int v6; // ebx
  char v7[12]; // [esp+10h] [ebp-4B0h] BYREF
  _BYTE v8[1060]; // [esp+1Ch] [ebp-4A4h] BYREF
  int v9; // [esp+440h] [ebp-80h]
  int v10; // [esp+444h] [ebp-7Ch]
  __int16 v11; // [esp+448h] [ebp-78h]
  char v12; // [esp+44Ah] [ebp-76h]
  _DWORD v13[8]; // [esp+484h] [ebp-3Ch] BYREF
  int v14; // [esp+4BCh] [ebp-4h]

  v2 = 0;
  if ( a1 > 0 && a2 )
  {
    v13[0] = 0;
    HIWORD(v13[1]) = 0;
    *(_DWORD *)((char *)&v13[6] + 3) = 0;
    if ( *(_DWORD *)(a2 + 220) )
    {
      v3 = **(_DWORD **)(a2 + 216);
      qmemcpy(v13, (const void *)(a2 + 180), sizeof(v13));
      v2 = *(_DWORD *)(v3 + 12);
    }
    if ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, v13[0]) == 19 )
      v4 = (unsigned __int16)a1 < HIWORD(v13[1]);
    else
      v4 = (unsigned __int16)a1 < HIWORD(v13[0]);
    if ( v4 )
    {
      sub_6580A6A0(v7);
      v14 = 0;
      Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
      v6 = *(_DWORD *)(a2 + 96);
      v9 = Dword_this;
      v10 = v2;
      v11 = a1;
      v12 = v6;
      Packet_ID_ItemSplit_Write((int)v7);
      LTClient_SendPacket_BuildIfNeeded(v7, 2, 1, 3, 0);
      SharedMem_SetFlag(dword_65ABF734, 2);
      v14 = -1;
      *(_DWORD *)v7 = &vtbl_Packet_Unknown0;
      BitStream_FreeOwnedBuffer((int)v8);
    }
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6580B050) --------------------------------------------------------
void __stdcall InventoryUI_HandleDropItem(_DWORD *a1)
{
  int v1; // eax
  char Dword_this; // al
  int v3; // eax
  int v4; // esi
  char *v5; // eax
  _DWORD *v6; // eax
  void (__thiscall *v7)(int, int, int); // eax
  void (__thiscall *v8)(int, int, _DWORD); // eax
  int v9; // [esp-8h] [ebp-60h]
  int v10; // [esp+10h] [ebp-48h] BYREF
  int v11; // [esp+14h] [ebp-44h] BYREF
  int v12; // [esp+18h] [ebp-40h] BYREF
  _DWORD v13[10]; // [esp+1Ch] [ebp-3Ch] BYREF
  char v14; // [esp+44h] [ebp-14h]
  int v15; // [esp+54h] [ebp-4h]

  if ( !a1 || (*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 8) )
    return;
  v13[0] = 0;
  v12 = 0;
  v13[1] = 0;
  LOWORD(v13[2]) = 100;
  memset(&v13[3], 0, 19);
  v13[8] = 0;
  v13[9] = 0;
  v14 = 0;
  if ( a1[55] )
  {
    v1 = a1[54];
    qmemcpy(v13, a1 + 45, 0x20u);
    v12 = *(_DWORD *)(*(_DWORD *)v1 + 12);
  }
  Dword_this = SharedMem_ReadDword_this(dword_65ABF73C, 0);
  if ( IsValue2Or30_NotEqual(Dword_this, 0) )
  {
    v3 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5580);
LABEL_7:
    v4 = v3;
    if ( v3 )
      v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
    else
      v5 = (char *)byte_659A8B98;
    FriendList_AddEntry(dword_65ABF748, v5, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
    if ( v4 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
    return;
  }
  v6 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
  if ( !v6 )
    return;
  if ( !ItemStatModifier_MeetsReqFromDisplayName(v6, (int)&v12) )
  {
    v3 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5445);
    goto LABEL_7;
  }
  LTObject_Create(&v11);
  v7 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v11 + 36);
  v15 = 0;
  v7(v11, 153, 8);
  FXInstance_WriteUInt32(&v11, v12);
  v9 = *FXInstance_Clone(&v11, &v10);
  v8 = *(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 324);
  LOBYTE(v15) = 1;
  v8(g_pILTClient, v9, 0);
  LOBYTE(v15) = 0;
  if ( v10 )
    (*(void (__thiscall **)(int))(*(_DWORD *)v10 + 8))(v10);
  v15 = -1;
  FXInstance_ReleaseAndClear(&v11);
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (6580B260) --------------------------------------------------------
void __cdecl sub_6580B260(int a1, int a2)
{
  int *v2; // eax
  int *v3; // [esp-8h] [ebp-4A0h]
  int *v4; // [esp+10h] [ebp-488h] BYREF
  char v5[12]; // [esp+14h] [ebp-484h] BYREF
  _BYTE v6[1060]; // [esp+20h] [ebp-478h] BYREF
  int Dword_this; // [esp+444h] [ebp-54h]
  _DWORD v8[3]; // [esp+448h] [ebp-50h] BYREF
  char v9; // [esp+454h] [ebp-44h]
  char v10; // [esp+455h] [ebp-43h]
  char v11; // [esp+456h] [ebp-42h]
  char v12; // [esp+457h] [ebp-41h]
  int *v13[8]; // [esp+45Ch] [ebp-3Ch] BYREF
  int **v14; // [esp+47Ch] [ebp-1Ch] BYREF
  void *v15; // [esp+480h] [ebp-18h]
  int v16; // [esp+484h] [ebp-14h]
  int v17; // [esp+494h] [ebp-4h]

  if ( a1 > 0 && a2 )
  {
    Packet_ID_MOVE_ITEMS_ctor(v5);
    v17 = 0;
    Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    v9 = *(_DWORD *)(a2 + 96);
    v11 = *(_BYTE *)(a2 + 100);
    v10 = 8;
    qmemcpy(v13, (const void *)(a2 + 180), sizeof(v13));
    v12 = 0;
    StringMap_CopyFrom(&v14, a2 + 212);
    LOBYTE(v17) = 1;
    if ( (unsigned __int16)a1 < (unsigned __int16)v16 )
      v2 = (int *)(unsigned __int16)a1;
    else
      v2 = 0;
    List_CopyEntriesLimited(v13, v8, v2);
    Packet_ID_MOVE_ITEMS_write((int)v5);
    LTClient_SendPacket_BuildIfNeeded(v5, 2, 1, 3, 0);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 1);
    v3 = *(int **)v15;
    LOBYTE(v17) = 0;
    RBTree_EraseRange(&v14, &v4, v3, (int *)v15);
    operator delete(v15);
    v15 = 0;
    v16 = 0;
    v17 = -1;
    LoginUI_SetPassword((int)v8);
    *(_DWORD *)v5 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v6);
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6580B3C0) --------------------------------------------------------
void __cdecl sub_6580B3C0(int a1, int a2)
{
  int *v2; // [esp-8h] [ebp-4A0h]
  int *v3; // [esp+10h] [ebp-488h] BYREF
  char v4[12]; // [esp+14h] [ebp-484h] BYREF
  _BYTE v5[1060]; // [esp+20h] [ebp-478h] BYREF
  int Dword_this; // [esp+444h] [ebp-54h]
  _DWORD v7[3]; // [esp+448h] [ebp-50h] BYREF
  char v8; // [esp+454h] [ebp-44h]
  char v9; // [esp+455h] [ebp-43h]
  char v10; // [esp+456h] [ebp-42h]
  char v11; // [esp+457h] [ebp-41h]
  int *v12[8]; // [esp+45Ch] [ebp-3Ch] BYREF
  int **v13; // [esp+47Ch] [ebp-1Ch] BYREF
  void *v14; // [esp+480h] [ebp-18h]
  int v15; // [esp+484h] [ebp-14h]
  int v16; // [esp+494h] [ebp-4h]

  if ( a2 )
  {
    Packet_ID_MOVE_ITEMS_ctor(v4);
    v16 = 0;
    Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    v8 = *(_DWORD *)(a2 + 96);
    v10 = *(_BYTE *)(a2 + 100);
    v9 = 8;
    qmemcpy(v12, (const void *)(a2 + 180), sizeof(v12));
    v11 = 0;
    StringMap_CopyFrom(&v13, a2 + 212);
    LOBYTE(v16) = 1;
    List_CopyEntriesLimited(v12, v7, (int *)1);
    Packet_ID_MOVE_ITEMS_write((int)v4);
    LTClient_SendPacket_BuildIfNeeded(v4, 2, 1, 3, 0);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 1);
    v2 = *(int **)v14;
    LOBYTE(v16) = 0;
    RBTree_EraseRange(&v13, &v3, v2, (int *)v14);
    operator delete(v14);
    v14 = 0;
    v15 = 0;
    v16 = -1;
    LoginUI_SetPassword((int)v7);
    *(_DWORD *)v4 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v5);
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6580B500) --------------------------------------------------------
void __thiscall sub_6580B500(int *this, int a2)
{
  int (__cdecl *v2)(int, int); // eax
  int v3; // eax
  int v4; // edi
  const char *v5; // eax
  int v6; // esi
  char *v7; // eax
  const char *v8; // eax
  char *v9; // eax
  int *v10; // [esp-8h] [ebp-58h]
  int *v11; // [esp+10h] [ebp-40h] BYREF
  _WORD v12[16]; // [esp+14h] [ebp-3Ch] BYREF
  int **v13; // [esp+34h] [ebp-1Ch] BYREF
  void *v14; // [esp+38h] [ebp-18h]
  unsigned __int16 v15; // [esp+3Ch] [ebp-14h]
  int v16; // [esp+4Ch] [ebp-4h]

  v11 = this;
  qmemcpy(v12, (const void *)(a2 + 180), sizeof(v12));
  StringMap_CopyFrom(&v13, a2 + 212);
  v2 = *(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64);
  v16 = 0;
  v3 = v2(g_pILTClient, v12[0] + 30000);
  v4 = v3;
  if ( v15 <= 1u )
  {
    if ( v3 )
      v8 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
    else
      v8 = byte_659A8B98;
    v6 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1813, v8);
    if ( v6 )
      v9 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
    else
      v9 = (char *)byte_659A8B98;
    TooltipMgr_ShowTextTooltip(v11, v9, (int)sub_6580B3C0, a2, 1, 0);
  }
  else
  {
    if ( v3 )
      v5 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
    else
      v5 = byte_659A8B98;
    v6 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1814, v5);
    if ( v6 )
      v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
    else
      v7 = (char *)byte_659A8B98;
    sub_65809060((int *)dword_65ABF708, v7, v15, v15, (int)sub_6580B260, a2, COERCE_FLOAT(1));
  }
  if ( v6 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
  if ( v4 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
  v10 = *(int **)v14;
  v16 = -1;
  RBTree_EraseRange(&v13, &v11, v10, (int *)v14);
  operator delete(v14);
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (6580B6B0) --------------------------------------------------------
void __stdcall sub_6580B6B0(int a1)
{
  int (__cdecl *v1)(int, int); // eax
  unsigned __int16 v2; // di
  int v3; // eax
  unsigned __int16 *v4; // eax
  bool v5; // zf
  unsigned __int16 *v6; // esi
  int v7; // esi
  char *v8; // eax
  unsigned int v9; // esi
  const char *v10; // eax
  int v11; // edi
  char *v12; // eax
  int *v13; // [esp-8h] [ebp-8Ch]
  int *v14; // [esp+10h] [ebp-74h] BYREF
  int v15; // [esp+14h] [ebp-70h]
  int **v16[8]; // [esp+18h] [ebp-6Ch] BYREF
  int **v17; // [esp+38h] [ebp-4Ch] BYREF
  void *v18; // [esp+3Ch] [ebp-48h]
  int v19; // [esp+40h] [ebp-44h]
  _DWORD v20[8]; // [esp+48h] [ebp-3Ch] BYREF
  int v21; // [esp+80h] [ebp-4h]

  if ( SharedMem_CheckFlag(dword_65ABF734, 2) )
    return;
  qmemcpy(v16, (const void *)(a1 + 180), sizeof(v16));
  StringMap_CopyFrom(&v17, a1 + 212);
  v1 = *(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64);
  v21 = 0;
  v15 = v1(g_pILTClient, LOWORD(v16[0]) + 30000);
  v20[0] = 0;
  v20[1] = 0;
  LOWORD(v20[2]) = 100;
  *(_DWORD *)((char *)&v20[6] + 3) = 0;
  if ( v19 )
    qmemcpy(v20, v16, sizeof(v20));
  v2 = v20[0];
  LOBYTE(v14) = BYTE1(v20[2]);
  if ( !sub_65933310(v20[0], HIWORD(v20[0]), HIWORD(v20[1]), BYTE1(v20[2])) )
    goto LABEL_30;
  v3 = *(_DWORD *)(a1 + 96);
  if ( v3 == 6 )
  {
    v4 = (unsigned __int16 *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
    if ( v4 )
    {
      v5 = ItemsAddedPayload_GetRemainingCapacity(v4) == 0;
      goto LABEL_11;
    }
  }
  else if ( v3 == 1 )
  {
    v6 = (unsigned __int16 *)(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
    if ( v6 )
    {
      StatGroup5_GetValue();
      v5 = (unsigned __int16)ItemsAddedPayload_GetRemainingCapacity(v6) == 0;
LABEL_11:
      if ( v5 )
      {
        v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5518);
        if ( v7 )
          v8 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
        else
          v8 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v8, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
        if ( v7 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
        if ( v15 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v15);
        v21 = -1;
        ItemMapContainer_Clear(v16);
        return;
      }
    }
  }
  v9 = HIWORD(v20[0]);
  if ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, v2) == 19 )
    v9 = HIWORD(v20[1]);
  if ( v15 )
    v10 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v15);
  else
    v10 = byte_659A8B98;
  v11 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1862, v10);
  if ( v11 )
    v12 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v11);
  else
    v12 = (char *)byte_659A8B98;
  sub_65809060((int *)dword_65ABF708, v12, v9 >> 1, v9, (int)InventoryMgr_SendSplitRequest, a1, COERCE_FLOAT(1));
  if ( v11 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v11);
LABEL_30:
  if ( v15 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v15);
  v13 = *(int **)v18;
  v21 = -1;
  RBTree_EraseRange(&v17, &v14, v13, (int *)v18);
  operator delete(v18);
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6580B980) --------------------------------------------------------
void __stdcall sub_6580B980(int a1, int *a2)
{
  int v2; // esi
  int v3; // edi
  unsigned __int16 v4; // si
  int *v5; // [esp-8h] [ebp-590h]
  int *v6; // [esp+10h] [ebp-578h] BYREF
  int v7; // [esp+14h] [ebp-574h] BYREF
  _DWORD *v8; // [esp+18h] [ebp-570h]
  unsigned int v9; // [esp+1Ch] [ebp-56Ch]
  char v10[12]; // [esp+20h] [ebp-568h] BYREF
  _BYTE v11[1060]; // [esp+2Ch] [ebp-55Ch] BYREF
  int Dword_this; // [esp+450h] [ebp-138h]
  int v13; // [esp+458h] [ebp-130h]
  int v14; // [esp+45Ch] [ebp-12Ch]
  _DWORD v15[12]; // [esp+4C0h] [ebp-C8h] BYREF
  int **v16[8]; // [esp+4F0h] [ebp-98h] BYREF
  int **v17[3]; // [esp+510h] [ebp-78h] BYREF
  int v18; // [esp+51Ch] [ebp-6Ch] BYREF
  unsigned __int16 v19[4]; // [esp+520h] [ebp-68h] BYREF
  char v20; // [esp+528h] [ebp-60h]
  char v21; // [esp+529h] [ebp-5Fh]
  int v22; // [esp+52Ch] [ebp-5Ch]
  int v23; // [esp+530h] [ebp-58h]
  int v24; // [esp+534h] [ebp-54h]
  char v25; // [esp+538h] [ebp-50h]
  char v26; // [esp+539h] [ebp-4Fh]
  char v27; // [esp+53Ah] [ebp-4Eh]
  int v28; // [esp+53Bh] [ebp-4Dh]
  int v29; // [esp+540h] [ebp-48h]
  int v30; // [esp+544h] [ebp-44h]
  char v31; // [esp+548h] [ebp-40h]
  int **v32[8]; // [esp+54Ch] [ebp-3Ch] BYREF
  int **v33; // [esp+56Ch] [ebp-1Ch] BYREF
  void *v34; // [esp+570h] [ebp-18h]
  int v35; // [esp+584h] [ebp-4h]

  v6 = a2;
  if ( a1 )
  {
    qmemcpy(v32, (const void *)(a1 + 180), sizeof(v32));
    StringMap_CopyFrom(&v33, a1 + 212);
    v35 = 0;
    if ( !sub_65933150(g_ItemTemplateById, (unsigned __int16)v32[0]) )
    {
      v5 = *(int **)v34;
      v35 = -1;
      RBTree_EraseRange(&v33, &v6, v5, (int *)v34);
      operator delete(v34);
      return;
    }
    v19[1] = 0;
    v2 = 0;
    v3 = 0;
    v15[0] = 0;
    *(_DWORD *)((char *)&v15[7] + 3) = 0;
    v18 = 0;
    v19[0] = 0;
    v19[2] = 0;
    v19[3] = 0;
    v20 = 100;
    v21 = 0;
    v22 = 0;
    v23 = 0;
    v24 = 0;
    v26 = 0;
    v27 = 0;
    v25 = 0;
    v28 = 0;
    v29 = 0;
    v30 = 0;
    v31 = 0;
    if ( v6 )
    {
      qmemcpy(v16, v6 + 45, sizeof(v16));
      StringMap_CopyFrom(v17, (int)(v6 + 53));
      LOBYTE(v35) = 1;
      if ( InventoryWindow_HandleItemByType(v32, (unsigned __int16 *)v16) )
      {
        switch ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, (unsigned __int16)v16[0]) )
        {
          case 2u:
            v4 = sub_658092A0((unsigned __int16 *)v16);
            if ( v4 < (unsigned __int16)sub_658092A0((unsigned __int16 *)v32) )
            {
              ListNode_GetData((int)v16, v15);
              ListNode_GetData((int)v32, &v18);
            }
            else
            {
              ListNode_GetData((int)v16, &v18);
              ListNode_GetData((int)v32, v15);
            }
            v3 = v18;
            v2 = v15[0];
            if ( v18 == v15[0] || sub_658092D0(v19) )
              goto LABEL_16;
            break;
          case 5u:
          case 0x13u:
            if ( sub_65809300((unsigned __int16 *)v16) )
              goto LABEL_16;
            if ( sub_65809300((unsigned __int16 *)v32) )
              goto LABEL_16;
            ListNode_GetData((int)v32, v15);
            ListNode_GetData((int)v16, &v18);
            v3 = v18;
            v2 = v15[0];
            if ( v18 == v15[0] )
              goto LABEL_16;
            break;
          case 0x10u:
          case 0x11u:
          case 0x12u:
            if ( sub_658092D0((unsigned __int16 *)v16) )
              goto LABEL_16;
            if ( sub_658092D0((unsigned __int16 *)v32) )
              goto LABEL_16;
            ListNode_GetData((int)v32, v15);
            ListNode_GetData((int)v16, &v18);
            v3 = v18;
            v2 = v15[0];
            if ( v18 == v15[0] )
              goto LABEL_16;
            break;
          default:
            goto LABEL_16;
        }
        LOBYTE(v35) = 0;
        ItemMapContainer_Clear(v16);
        goto LABEL_35;
      }
LABEL_16:
      LOBYTE(v35) = 0;
      ItemMapContainer_Clear(v16);
    }
    else
    {
      switch ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, (unsigned __int16)v32[0]) )
      {
        case 2u:
          if ( sub_658092D0((unsigned __int16 *)v32) )
            goto LABEL_38;
          LoginPacket_InitPasswordPtr(&v7);
          LOBYTE(v35) = 2;
          List_CopyEntriesLimited((int **)v32, &v7, (int *)2);
          if ( v9 < 2 )
            goto LABEL_27;
          v2 = *(_DWORD *)(v8[1] + 8);
          break;
        case 5u:
        case 0x13u:
          if ( sub_65809300((unsigned __int16 *)v32) )
            goto LABEL_38;
          LoginPacket_InitPasswordPtr(&v7);
          LOBYTE(v35) = 4;
          List_CopyEntriesLimited((int **)v32, &v7, (int *)2);
          if ( v9 >= 2 )
          {
            v2 = *(_DWORD *)(*v8 + 8);
            v3 = *(_DWORD *)(v8[1] + 8);
            if ( v3 != v2 )
              goto LABEL_34;
          }
          goto LABEL_27;
        case 0x10u:
        case 0x11u:
        case 0x12u:
          if ( sub_658092D0((unsigned __int16 *)v32) )
            goto LABEL_38;
          LoginPacket_InitPasswordPtr(&v7);
          LOBYTE(v35) = 3;
          List_CopyEntriesLimited((int **)v32, &v7, (int *)2);
          if ( v9 < 2 )
            goto LABEL_27;
          v2 = *(_DWORD *)(*v8 + 8);
          v3 = *(_DWORD *)(v8[1] + 8);
          break;
        default:
          goto LABEL_35;
      }
      if ( v3 != v2 )
      {
LABEL_34:
        LOBYTE(v35) = 0;
        LoginUI_SetPassword((int)&v7);
LABEL_35:
        if ( v2 )
        {
          if ( v3 )
          {
            Packet_Unknown0_Ctor(v10);
            LOBYTE(v35) = 5;
            Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
            v13 = v2;
            v14 = v3;
            Packet_ID_ItemSwap_Write((int)v10);
            LTClient_SendPacket_BuildIfNeeded(v10, 2, 1, 3, 0);
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 1);
            LOBYTE(v35) = 0;
            *(_DWORD *)v10 = &vtbl_Packet_Unknown0;
            BitStream_FreeOwnedBuffer((int)v11);
          }
        }
        goto LABEL_38;
      }
LABEL_27:
      LoginUI_SetPassword((int)&v7);
    }
LABEL_38:
    v35 = -1;
    ItemMapContainer_Clear(v32);
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6580C330) --------------------------------------------------------
int __stdcall BuildItemTooltip(unsigned __int16 *a1)
{
  int v1; // ebx
  int v2; // esi
  int v3; // eax
  const char *v4; // eax
  int v5; // esi
  const char *v6; // eax
  int (__cdecl **v7)(int, int); // esi
  int Type; // eax
  int v9; // esi
  const char *v10; // eax
  int (__cdecl **v11)(int, int); // esi
  int SubType; // eax
  int v13; // esi
  const char *v14; // eax
  unsigned __int8 v15; // al
  int v16; // esi
  const char *v17; // eax
  __int16 *DisplayName; // edi
  int v19; // esi
  const char *v20; // eax
  int v21; // ebx
  const char *v22; // eax
  unsigned __int8 v23; // al
  int v24; // esi
  const char *v25; // eax
  const char *v26; // eax
  unsigned __int16 *v27; // ebx
  int v28; // esi
  const char *v29; // eax
  int v30; // eax
  unsigned __int16 v31; // di
  int (__cdecl **v32)(int, int, _DWORD, _DWORD); // esi
  unsigned __int16 AmmoItemIdOrTemplate; // ax
  int v34; // eax
  unsigned __int16 v35; // ax
  int v36; // esi
  int v37; // eax
  unsigned __int16 v38; // si
  int v39; // esi
  const char *v40; // eax
  int v41; // edi
  const char *v42; // eax
  unsigned __int16 v43; // di
  int (__cdecl **v44)(int, int, _DWORD, _DWORD); // esi
  unsigned __int16 v45; // ax
  int v46; // esi
  const char *v47; // eax
  char v48; // al
  __int16 v49; // si
  unsigned __int8 Value; // al
  int v51; // esi
  const char *v52; // eax
  char *v53; // edx
  int v54; // esi
  const char *v55; // eax
  const char *v56; // eax
  int v57; // esi
  const char *v58; // eax
  int v59; // esi
  int v60; // eax
  int v61; // eax
  unsigned __int16 v62; // ax
  __int16 *Entry; // eax
  __int16 *v64; // ebx
  int v65; // esi
  const char *v66; // eax
  int v67; // edi
  _DWORD *v68; // esi
  const char *v69; // eax
  int v70; // edi
  const char *v71; // eax
  int v72; // esi
  const char *v73; // eax
  int v74; // esi
  const char *v75; // eax
  unsigned __int8 v76; // al
  int v77; // esi
  const char *v78; // eax
  __int16 *v79; // eax
  __int16 *v80; // ebx
  int v81; // esi
  const char *v82; // eax
  int v83; // edi
  _DWORD *v84; // esi
  const char *v85; // eax
  int v86; // esi
  const char *v87; // eax
  int v88; // esi
  const char *v89; // eax
  int v90; // esi
  const char *v91; // eax
  int v92; // esi
  const char *v93; // eax
  int v94; // esi
  const char *v95; // eax
  unsigned int i; // edi
  unsigned __int16 v97; // ax
  int v98; // esi
  const char *v99; // eax
  unsigned __int16 v100; // dx
  int v101; // eax
  int v102; // eax
  int v103; // esi
  const char *v104; // eax
  char v105; // cl
  unsigned int v106; // edi
  unsigned __int8 *v107; // eax
  unsigned __int8 *v108; // esi
  unsigned __int8 v109; // bl
  int v110; // eax
  int v111; // eax
  int v112; // ecx
  int v113; // esi
  const char *v114; // eax
  unsigned int v115; // edi
  char *v116; // eax
  char *v117; // esi
  char *v118; // esi
  unsigned __int8 v119; // bl
  int v120; // eax
  int v121; // edx
  char *v122; // edi
  int v123; // esi
  const char *v124; // eax
  int v125; // eax
  int v126; // ebx
  const char *v127; // eax
  int v128; // esi
  const char *v129; // eax
  unsigned __int8 *v130; // ebx
  unsigned __int8 v131; // al
  int v132; // esi
  const char *v133; // eax
  int v134; // edi
  const char *v135; // eax
  const char *v136; // edi
  unsigned int v137; // eax
  int v138; // eax
  int v139; // eax
  int v140; // esi
  int v141; // edi
  unsigned __int16 v142; // ax
  int v143; // eax
  int v144; // ebx
  const char *v145; // esi
  const char *v146; // eax
  int v147; // esi
  const char *v148; // eax
  int v149; // eax
  const char *v150; // eax
  int v151; // eax
  int v152; // esi
  const char *v153; // eax
  int v154; // esi
  int v155; // edx
  int v156; // eax
  int v157; // esi
  const char *v158; // eax
  int (__cdecl **v159)(int, int, _DWORD); // esi
  unsigned __int16 v160; // ax
  int v161; // esi
  const char *v162; // eax
  const char *v163; // eax
  unsigned __int16 v164; // ax
  int v165; // eax
  const char *v166; // eax
  int v167; // ecx
  int v168; // esi
  const char *v169; // eax
  int v170; // edi
  int v171; // esi
  const char *v172; // eax
  int v173; // eax
  bool v174; // cf
  int v175; // esi
  const char *v176; // eax
  int v177; // esi
  const char *v178; // eax
  int (__thiscall **v179)(int, int); // esi
  int v180; // eax
  int v181; // esi
  _BYTE v183[28]; // [esp-2Ch] [ebp-2D4h] BYREF
  _BYTE v184[16]; // [esp-10h] [ebp-2B8h] BYREF
  double v185; // [esp+0h] [ebp-2A8h]
  char *v186; // [esp+8h] [ebp-2A0h]
  _BYTE v187[28]; // [esp+1Ch] [ebp-28Ch] BYREF
  _BYTE v188[28]; // [esp+38h] [ebp-270h] BYREF
  _BYTE v189[28]; // [esp+54h] [ebp-254h] BYREF
  _BYTE v190[28]; // [esp+70h] [ebp-238h] BYREF
  _BYTE v191[28]; // [esp+8Ch] [ebp-21Ch] BYREF
  _BYTE v192[28]; // [esp+A8h] [ebp-200h] BYREF
  char *v193[4]; // [esp+C4h] [ebp-1E4h] BYREF
  unsigned __int8 v194; // [esp+D4h] [ebp-1D4h]
  _WORD v195[34]; // [esp+DCh] [ebp-1CCh]
  char v196[4]; // [esp+120h] [ebp-188h] BYREF
  void *v197; // [esp+124h] [ebp-184h]
  int v198; // [esp+128h] [ebp-180h]
  int v199; // [esp+12Ch] [ebp-17Ch]
  char *v200; // [esp+130h] [ebp-178h] BYREF
  int v201; // [esp+134h] [ebp-174h]
  int v202; // [esp+138h] [ebp-170h]
  int v203; // [esp+13Ch] [ebp-16Ch]
  char *v204; // [esp+140h] [ebp-168h] BYREF
  void *v205; // [esp+144h] [ebp-164h]
  int v206; // [esp+148h] [ebp-160h]
  int v207; // [esp+14Ch] [ebp-15Ch]
  int v208; // [esp+150h] [ebp-158h]
  int v209; // [esp+154h] [ebp-154h] BYREF
  char v210[4]; // [esp+158h] [ebp-150h]
  unsigned __int16 *v211; // [esp+15Ch] [ebp-14Ch]
  int v212; // [esp+160h] [ebp-148h]
  char v213[4]; // [esp+164h] [ebp-144h]
  char v214[28]; // [esp+168h] [ebp-140h] BYREF
  char v215[4]; // [esp+184h] [ebp-124h] BYREF
  char v216[4]; // [esp+1C4h] [ebp-E4h] BYREF
  char v217[16]; // [esp+204h] [ebp-A4h] BYREF
  int v218; // [esp+214h] [ebp-94h] BYREF
  unsigned __int16 v219; // [esp+218h] [ebp-90h]
  __int16 v220; // [esp+21Ah] [ebp-8Eh]
  __int16 v221; // [esp+21Eh] [ebp-8Ah]
  char v222; // [esp+231h] [ebp-77h]
  char v223[16]; // [esp+244h] [ebp-64h] BYREF
  char v224[4]; // [esp+254h] [ebp-54h] BYREF
  int v225; // [esp+258h] [ebp-50h]
  int v226; // [esp+25Ch] [ebp-4Ch]
  int v227; // [esp+260h] [ebp-48h]
  char v228[4]; // [esp+264h] [ebp-44h] BYREF
  char v229[8]; // [esp+274h] [ebp-34h] BYREF
  int v230; // [esp+27Ch] [ebp-2Ch]
  char v231[12]; // [esp+280h] [ebp-28h] BYREF
  char v232[12]; // [esp+28Ch] [ebp-1Ch] BYREF
  int v233; // [esp+2A4h] [ebp-4h]

  v1 = a1[2];
  v211 = a1;
  v208 = v1;
  if ( (unsigned __int16)(v1 - 1) > 0xBBFu )
    return 0;
  *(_DWORD *)v210 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
  if ( !*(_DWORD *)v210 )
    return 0;
  v212 = g_ItemTemplateById[(unsigned __int16)v1];
  if ( !v212 )
    return 0;
  v2 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
         g_pILTClient,
         *((unsigned __int8 *)v211 + 29) + 29991);
  std::string::string(v214, "<font type='16' size='11' space='2'");
  v3 = *((unsigned __int8 *)v211 + 29);
  v233 = 0;
  switch ( v3 )
  {
    case 0:
      v186 = " color='FFFFFF00'>";
      goto LABEL_10;
    case 1:
      v186 = " color='BFC7FF00'>";
      goto LABEL_10;
    case 2:
      v186 = " color='FFD26400'>";
      goto LABEL_10;
    case 3:
      v186 = " color='FFED0000'>";
      goto LABEL_10;
    case 4:
      v186 = " color='FF000000'>";
LABEL_10:
      std::string::operator+=(v214, v186);
      break;
    default:
      break;
  }
  if ( v2 )
    v4 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v2);
  else
    v4 = byte_659A8B98;
  std::string::operator+=(v214, v4);
  std::string::operator+=(v214, word_659C0C8C);
  if ( v2 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v2);
  v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, (unsigned __int16)v1 + 30000);
  if ( v5 )
    v6 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
  else
    v6 = byte_659A8B98;
  std::string::operator+=(v214, v6);
  std::string::operator+=(v214, "</font>\r");
  if ( v5 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
  v7 = (int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64);
  Type = ItemTemplate_GetType(g_ItemTemplateById, v1);
  v9 = (*v7)(g_pILTClient, Type + 29900);
  std::string::operator+=(v214, "<font type='2' size='9' color='FFFFFF00'>");
  if ( v9 )
    v10 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
  else
    v10 = byte_659A8B98;
  std::string::operator+=(v214, v10);
  if ( v9 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v9);
  if ( ItemTemplate_GetSubType(g_ItemTemplateById, v1) )
  {
    v11 = (int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64);
    SubType = ItemTemplate_GetSubType(g_ItemTemplateById, v1);
    v13 = (*v11)(g_pILTClient, SubType + 29931);
    std::string::operator+=(v214, " (");
    v14 = v13
        ? (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v13)
        : byte_659A8B98;
    std::string::operator+=(v214, v14);
    std::string::operator+=(v214, ")");
    if ( v13 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v13);
  }
  std::string::operator+=(v214, "</font>\r");
  if ( sub_65933EC0(g_ItemTemplateById, v211[2]) )
  {
    v15 = sub_65933EC0(g_ItemTemplateById, v211[2]);
    if ( sub_659480D0(v224, v15) )
    {
      v16 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6065, v224);
      v17 = v16
          ? (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v16)
          : byte_659A8B98;
      std::string::operator+=(v214, v17);
      std::string::operator+=(v214, "\r");
      if ( v16 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v16);
    }
    DisplayName = ItemId_GetDisplayName(v211[2]);
    if ( DisplayName && sub_659480D0(v224, *((unsigned __int8 *)DisplayName + 8)) )
    {
      v19 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
              g_pILTClient,
              *((_DWORD *)DisplayName + 1) + 17951);
      if ( v19 )
        v20 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v19);
      else
        v20 = byte_659A8B98;
      v21 = (*(int (__cdecl **)(int, int, const char *, char *))(*(_DWORD *)g_pILTClient + 64))(
              g_pILTClient,
              6066,
              v20,
              v224);
      if ( v19 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v19);
      if ( ItemStatModifier_HasMinLevel(*(_DWORD **)v210, *((_DWORD *)DisplayName + 1), *((_BYTE *)DisplayName + 8)) )
      {
        v186 = "<font type='2' size='9' color='00FF0000'>";
      }
      else if ( ItemStatModifier_FindById(*(_DWORD **)v210, *((_DWORD *)DisplayName + 1)) )
      {
        v186 = "<font type='2' size='9' color='FFED0000'>";
      }
      else
      {
        v186 = "<font type='2' size='9' color='FF000000'>";
      }
      std::string::operator+=(v214, v186);
      if ( v21 )
        v22 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v21);
      else
        v22 = byte_659A8B98;
      std::string::operator+=(v214, v22);
      std::string::operator+=(v214, "</font>\r");
      if ( v21 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v21);
    }
  }
  v23 = *((_BYTE *)v211 + 13);
  if ( v23 < 3u )
  {
    if ( v23 < 2u )
    {
      if ( !v23 )
        goto LABEL_71;
      v186 = (char *)6062;
    }
    else
    {
      v186 = (char *)6044;
    }
    v24 = (*(int (__cdecl **)(int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v186);
    std::string::operator+=(v214, "<font type='0' size='9' color='FFED0000'>");
    if ( v24 )
      v26 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v24);
    else
      v26 = byte_659A8B98;
    std::string::operator+=(v214, v26);
    std::string::operator+=(v214, "</font>\r");
    if ( v24 )
      goto LABEL_70;
  }
  else
  {
    v24 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6073);
    std::string::operator+=(v214, "<font type='0' size='9' color='FFED0000'>");
    if ( v24 )
      v25 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v24);
    else
      v25 = byte_659A8B98;
    std::string::operator+=(v214, v25);
    std::string::operator+=(v214, "</font>\r");
    if ( v24 )
LABEL_70:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v24);
  }
LABEL_71:
  v27 = v211;
  v213[0] = *((_BYTE *)v211 + 13) >= 2u;
  if ( sub_659331C0(g_ItemTemplateById, v208, v213[0]) )
  {
    v28 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6043);
    std::string::operator+=(v214, "<font type='0' size='9' color='FFD26400'>");
    v29 = v28
        ? (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v28)
        : byte_659A8B98;
    std::string::operator+=(v214, v29);
    std::string::operator+=(v214, "</font>\r");
    if ( v28 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v28);
  }
  std::string::operator+=(v214, "\r");
  switch ( ItemTemplate_GetType(g_ItemTemplateById, v208) )
  {
    case 1:
    case 8:
    case 9:
      FormatDuration_MinSec(v223, v211[5]);
      v59 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6034, v223);
      goto LABEL_391;
    case 2:
      v30 = ItemTemplate_GetSubType(g_ItemTemplateById, v208);
      v31 = v211[3];
      v32 = (int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64);
      if ( v30 == 24 )
      {
        AmmoItemIdOrTemplate = Item_GetAmmoItemIdOrTemplate(v211);
        v34 = (*v32)(g_pILTClient, 6042, v31, AmmoItemIdOrTemplate);
      }
      else
      {
        v35 = Item_GetAmmoItemIdOrTemplate(v211);
        v34 = (*v32)(g_pILTClient, 6041, v31, v35);
      }
      v36 = v34;
      std::string::operator+=(v214, "<font type='2' size='9' color='FFFFFF00'>");
      if ( v36 )
      {
        v37 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v36);
        std::string::operator+=(v214, v37);
      }
      else
      {
        std::string::operator+=(v214, byte_659A8B98);
      }
      v186 = "</font>\r";
      goto LABEL_131;
    case 3:
      v38 = *(_WORD *)(v212 + 100);
      if ( !ItemTemplate_IsRangedOrAmmoType(g_ItemTemplateById, v208) && (unsigned __int16)(v38 - 1) <= 0xBBFu )
      {
        v39 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v38 + 30000);
        if ( v39 )
          v40 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v39);
        else
          v40 = byte_659A8B98;
        v41 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6040, v40);
        std::string::operator+=(v214, "<font type='16' size='10' space='1' color='BFC7FF00'>");
        if ( v41 )
          v42 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v41);
        else
          v42 = byte_659A8B98;
        std::string::operator+=(v214, v42);
        std::string::operator+=(v214, "</font>\r");
        if ( v39 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v39);
        if ( v41 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v41);
        v43 = v211[3];
        v44 = (int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64);
        v45 = Item_GetAmmoItemIdOrTemplate(v211);
        v46 = (*v44)(g_pILTClient, 6039, v43, v45);
        std::string::operator+=(v214, "<font type='2' size='9' color='FFFFFF00'>");
        if ( v46 )
          v47 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v46);
        else
          v47 = byte_659A8B98;
        std::string::operator+=(v214, v47);
        std::string::operator+=(v214, "</font>\r");
        if ( v46 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v46);
      }
      *(float *)v213 = Item_GetDurabilityPercent(v211);
      v48 = sub_65933EC0(g_ItemTemplateById, v211[2]);
      v49 = v211[2];
      LOBYTE(v212) = v48;
      Value = StatGroup5_GetValue();
      if ( !sub_65933200(v49, v212, Value) )
        goto LABEL_278;
      sprintf(v217, "%.2f %s", *(float *)v213, (const char *)&word_659C6184);
      v51 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6035, v217);
      if ( *(float *)v213 > 25.0 )
        v186 = "<font type='2' size='9' color='00FF0000'>";
      else
        v186 = "<font type='2' size='9' color='FF000000'>";
      std::string::operator+=(v214, v186);
      if ( v51 )
        v52 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v51);
      else
        v52 = byte_659A8B98;
      std::string::operator+=(v214, v52);
      std::string::operator+=(v214, "</font>\r");
      if ( v51 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v51);
      v212 = *((unsigned __int8 *)v211 + 12);
      *(float *)v213 = (double)v212 / 100.0;
      sprintf(v217, "%.2f", *(float *)v213);
      v53 = v217;
      goto LABEL_144;
    case 5:
      *(float *)v213 = Item_GetDurabilityPercent(v211);
      sprintf(v232, "%.2f %s", *(float *)v213, (const char *)&word_659C6184);
      v54 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6035, v232);
      if ( *(float *)v213 > 25.0 )
      {
        if ( *(float *)v213 >= 60.0 )
          v186 = "<font type='2' size='9' color='00FF0000'>";
        else
          v186 = "<font type='2' size='9' color='FFED0000'>";
      }
      else
      {
        v186 = "<font type='2' size='9' color='FF000000'>";
      }
      std::string::operator+=(v214, v186);
      if ( v54 )
        v55 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v54);
      else
        v55 = byte_659A8B98;
      std::string::operator+=(v214, v55);
      std::string::operator+=(v214, "</font>\r");
      if ( v54 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v54);
      v212 = *((unsigned __int8 *)v211 + 12);
      *(float *)v213 = (double)v212 / 100.0;
      sprintf(v232, "%.2f", *(float *)v213);
      v36 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6057, v232);
      if ( *(float *)v213 >= 1.0 )
      {
        if ( *(float *)v213 <= 1.5 )
          v186 = "<font type='2' size='9' color='FFFFFF00'>";
        else
          v186 = "<font type='2' size='9' color='FF000000'>";
      }
      else
      {
        v186 = "<font type='2' size='9' color='00FF0000'>";
      }
      std::string::operator+=(v214, v186);
      if ( v36 )
        v56 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v36);
      else
        v56 = byte_659A8B98;
      std::string::operator+=(v214, v56);
      v186 = "</font>\r\r";
LABEL_131:
      std::string::operator+=(v214, v186);
      if ( !v36 )
        goto LABEL_278;
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v36);
      goto LABEL_279;
    case 6:
      *(float *)v213 = Item_GetDurabilityPercent(v211);
      sprintf(v232, "%.2f %s", *(float *)v213, (const char *)&word_659C6184);
      v57 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6035, v232);
      if ( *(float *)v213 > 25.0 )
      {
        if ( *(float *)v213 >= 60.0 )
          v186 = "<font type='2' size='9' color='00FF0000'>";
        else
          v186 = "<font type='2' size='9' color='FFED0000'>";
      }
      else
      {
        v186 = "<font type='2' size='9' color='FF000000'>";
      }
      std::string::operator+=(v214, v186);
      if ( v57 )
        v58 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v57);
      else
        v58 = byte_659A8B98;
      std::string::operator+=(v214, v58);
      std::string::operator+=(v214, "</font>\r");
      if ( v57 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v57);
      v212 = *((unsigned __int8 *)v211 + 12);
      *(float *)v213 = (double)v212 / 100.0;
      sprintf(v232, "%.2f", *(float *)v213);
      v53 = v232;
LABEL_144:
      v59 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6057, v53);
      if ( *(float *)v213 >= 1.0 )
      {
        if ( *(float *)v213 <= 1.5 )
          v186 = "<font type='2' size='9' color='FFFFFF00'>";
        else
          v186 = "<font type='2' size='9' color='FF000000'>";
      }
      else
      {
        v186 = "<font type='2' size='9' color='00FF0000'>";
      }
      std::string::operator+=(v214, v186);
      if ( v59 )
      {
        v60 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v59);
        std::string::operator+=(v214, v60);
      }
      else
      {
        std::string::operator+=(v214, byte_659A8B98);
      }
      v186 = "</font>\r\r";
      goto LABEL_396;
    case 10:
      if ( v211[2] == 985 )
      {
        v139 = v211[5];
        v140 = 20 * v139 + 3250;
        v141 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v139 + 3100);
        v142 = v211[3];
        if ( v142 )
        {
          if ( v142 == 25 )
            v143 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 3247);
          else
            v143 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v142 + v140 - 1);
        }
        else
        {
          v143 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 3249);
        }
        v144 = v143;
        if ( v143 )
          v145 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v143);
        else
          v145 = byte_659A8B98;
        if ( v141 )
          v146 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v141);
        else
          v146 = byte_659A8B98;
        v147 = (*(int (__cdecl **)(int, int, const char *, const char *))(*(_DWORD *)g_pILTClient + 64))(
                 g_pILTClient,
                 3248,
                 v146,
                 v145);
        if ( v141 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v141);
        if ( v144 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v144);
        std::string::operator+=(v214, "<font type='2' size='9'>");
        if ( v147 )
          v148 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v147);
        else
          v148 = byte_659A8B98;
        std::string::operator+=(v214, v148);
        std::string::operator+=(v214, "</font>\r");
        if ( v147 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v147);
        goto LABEL_278;
      }
      if ( v211[2] != 991 )
        goto LABEL_278;
      v59 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 632);
      std::string::operator+=(v214, "<font type='2' size='9'>");
      if ( v59 )
        v136 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v59);
      else
        v136 = byte_659A8B98;
      v137 = *((_DWORD *)v211 + 5);
      v212 = (int)v184;
      String_FromU32(v184, v137);
      *(float *)v213 = COERCE_FLOAT(v183);
      LOBYTE(v233) = 6;
      String_AssignFromPtr(v183, (int)v136);
      LOBYTE(v233) = 0;
      v138 = FormatString_Args((int)v191, (int)"{0} {1}");
      LOBYTE(v233) = 7;
      std::string::operator+=(v214, v138);
      LOBYTE(v233) = 0;
      std::string::~string(v191);
      goto LABEL_395;
    case 16:
    case 17:
    case 18:
      v61 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6069, v211[3]);
      v186 = "<font type='2' size='9' color='FFFFFF00'>";
      goto LABEL_390;
    case 19:
      v62 = v211[3];
      if ( v211[2] == 1280 )
      {
        LOBYTE(v212) = *((_BYTE *)v211 + 30);
        if ( !ItemTemplate_CopyVariantByIndex(v62, v212, (char *)v193) )
          goto LABEL_278;
        Entry = ItemStatReqTable_FindEntry((unsigned __int16)v193[0]);
        v64 = Entry;
        if ( Entry && sub_659480D0(v228, *((unsigned __int8 *)Entry + 8)) )
        {
          v65 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                  g_pILTClient,
                  *((_DWORD *)v64 + 1) + 17951);
          if ( v65 )
            v66 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v65);
          else
            v66 = byte_659A8B98;
          v67 = (*(int (__cdecl **)(int, int, const char *, char *))(*(_DWORD *)g_pILTClient + 64))(
                  g_pILTClient,
                  6067,
                  v66,
                  v228);
          if ( v65 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v65);
          v68 = *(_DWORD **)v210;
          if ( ItemStatModifier_HasMinLevel(*(_DWORD **)v210, *((_DWORD *)v64 + 1), *((_BYTE *)v64 + 8)) )
          {
            v186 = "<font type='2' size='9' color='00FF0000'>";
          }
          else if ( ItemStatModifier_FindById(v68, *((_DWORD *)v64 + 1)) )
          {
            v186 = "<font type='2' size='9' color='FFED0000'>";
          }
          else
          {
            v186 = "<font type='2' size='9' color='FF000000'>";
          }
          std::string::operator+=(v214, v186);
          if ( v67 )
            v69 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v67);
          else
            v69 = byte_659A8B98;
          std::string::operator+=(v214, v69);
          std::string::operator+=(v214, "</font>\r");
          if ( v67 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v67);
        }
        v70 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LOWORD(v193[0]) + 30000);
        if ( v70 )
          v71 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v70);
        else
          v71 = byte_659A8B98;
        v72 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 17201, v71);
        std::string::operator+=(v214, "<font type='2' size='9' color='00FF0000'>");
        if ( v72 )
          v73 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v72);
        else
          v73 = byte_659A8B98;
        std::string::operator+=(v214, v73);
        std::string::operator+=(v214, "\r");
        if ( v72 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v72);
        if ( v70 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v70);
        v74 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                g_pILTClient,
                17206,
                HIBYTE(v193[0]));
        if ( v74 )
          v75 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v74);
        else
          v75 = byte_659A8B98;
        std::string::operator+=(v214, v75);
        std::string::operator+=(v214, "\r");
        if ( v74 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v74);
        v76 = sub_65933EC0(g_ItemTemplateById, (unsigned __int16)v193[0]);
        if ( v76 )
        {
          if ( sub_659480D0(v228, v76) )
          {
            v77 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6065, v228);
            v78 = v77
                ? (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v77)
                : byte_659A8B98;
            std::string::operator+=(v214, v78);
            std::string::operator+=(v214, "\r");
            if ( v77 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v77);
          }
          v79 = ItemId_GetDisplayName((unsigned __int16)v193[0]);
          v80 = v79;
          if ( v79 && sub_659480D0(v228, *((unsigned __int8 *)v79 + 8)) )
          {
            v81 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                    g_pILTClient,
                    *((_DWORD *)v80 + 1) + 17951);
            if ( v81 )
              v82 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v81);
            else
              v82 = byte_659A8B98;
            v83 = (*(int (__cdecl **)(int, int, const char *, char *))(*(_DWORD *)g_pILTClient + 64))(
                    g_pILTClient,
                    6066,
                    v82,
                    v228);
            if ( v81 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v81);
            v84 = *(_DWORD **)v210;
            if ( ItemStatModifier_HasMinLevel(*(_DWORD **)v210, *((_DWORD *)v80 + 1), *((_BYTE *)v80 + 8)) )
            {
              v186 = "<font type='2' size='9' color='00FF0000'>";
            }
            else if ( ItemStatModifier_FindById(v84, *((_DWORD *)v80 + 1)) )
            {
              v186 = "<font type='2' size='9' color='FFED0000'>";
            }
            else
            {
              v186 = "<font type='2' size='9' color='FF000000'>";
            }
            std::string::operator+=(v214, v186);
            if ( v83 )
              v85 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v83);
            else
              v85 = byte_659A8B98;
            std::string::operator+=(v214, v85);
            std::string::operator+=(v214, "</font>\r");
            if ( v83 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v83);
          }
        }
        if ( BYTE2(v193[0]) < 3u )
        {
          if ( BYTE2(v193[0]) < 2u )
          {
            if ( !BYTE2(v193[0]) )
            {
LABEL_224:
              v88 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 17203, v211[5]);
              if ( v88 )
                v89 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v88);
              else
                v89 = byte_659A8B98;
              std::string::operator+=(v214, v89);
              std::string::operator+=(v214, "\r");
              if ( v88 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v88);
              v90 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 17205, v194);
              if ( v90 )
                v91 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v90);
              else
                v91 = byte_659A8B98;
              std::string::operator+=(v214, v91);
              std::string::operator+=(v214, "\r");
              if ( v90 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v90);
              v92 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 17204, v193[2]);
              if ( v92 )
                v93 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v92);
              else
                v93 = byte_659A8B98;
              std::string::operator+=(v214, v93);
              std::string::operator+=(v214, "</font>\r\r");
              if ( v92 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v92);
              v94 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 17207);
              std::string::operator+=(v214, "<font type='2' size='9'>");
              if ( v94 )
                v95 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v94);
              else
                v95 = byte_659A8B98;
              std::string::operator+=(v214, v95);
              std::string::operator+=(v214, "\r");
              if ( v94 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v94);
              for ( i = 0; i < 5; ++i )
              {
                v97 = v195[2 * i];
                if ( v97 && v97 < 0xBC1u )
                {
                  v98 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v97 + 30000);
                  v99 = v98
                      ? (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                        g_pILTClient,
                                        v98)
                      : byte_659A8B98;
                  v212 = (int)v184;
                  String_AssignFromPtr(v184, (int)v99);
                  v100 = v195[2 * i + 1];
                  *(float *)v213 = COERCE_FLOAT(v183);
                  LOBYTE(v233) = 1;
                  String_FromU16(v183, v100);
                  LOBYTE(v233) = 0;
                  v101 = FormatString_Args((int)v188, (int)"{0}x - {1}\r");
                  LOBYTE(v233) = 2;
                  std::string::operator+=(v214, v101);
                  LOBYTE(v233) = 0;
                  std::string::~string(v188);
                  if ( v98 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v98);
                }
              }
              std::string::operator+=(v214, "</font>\r");
              v102 = ItemTemplate_GetType(g_ItemTemplateById, (unsigned __int16)v193[0]);
              if ( v102 == 3 || (unsigned int)(v102 - 5) <= 1 )
              {
                v212 = *((unsigned __int8 *)v211 + 12);
                *(float *)v213 = (double)v212 / 100.0;
                sprintf(v231, "%.2f", *(float *)v213);
                v103 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6057, v231);
                if ( *(float *)v213 >= 1.0 )
                  v186 = *(float *)v213 <= 1.5
                       ? "<font type='2' size='9' color='FFFFFF00'>"
                       : "<font type='2' size='9' color='FF000000'>";
                else
                  v186 = "<font type='2' size='9' color='00FF0000'>";
                std::string::operator+=(v214, v186);
                v104 = v103
                     ? (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                       g_pILTClient,
                                       v103)
                     : byte_659A8B98;
                std::string::operator+=(v214, v104);
                std::string::operator+=(v214, "</font>");
                if ( v103 )
                  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v103);
              }
              ItemStructA_InitAlt((char *)&v218);
              v219 = (unsigned __int16)v193[0];
              v220 = 100;
              v105 = *((_BYTE *)v211 + 29);
              v218 = 1;
              v221 = 10000;
              v222 = v105;
              v201 = 0;
              v202 = 0;
              v203 = 0;
              LOBYTE(v233) = 3;
              Item_CollectStatsForTooltip((int)&v218, *(_DWORD **)v210, &v200);
              v225 = 0;
              v226 = 0;
              v227 = 0;
              LOBYTE(v233) = 4;
              Item_AppendBaseStatsByType(v193[0], (char **)v224);
              v215[0] = 0;
              strncpy(v232, "66666600", 9u);
              v106 = 0;
              for ( v232[9] = 0; v106 < (v202 - v201) >> 3; ++v106 )
              {
                v107 = (unsigned __int8 *)ItemStatList_GetByIndex(&v200, v106);
                v108 = v107;
                if ( v107 )
                {
                  v109 = *v107;
                  LOBYTE(v212) = *v107;
                  v110 = ItemStatList_FindById(v224, v212);
                  v111 = v110 ? *(_DWORD *)(v110 + 4) : *((_DWORD *)v108 + 1);
                  v112 = *((_DWORD *)v108 + 1);
                  v213[0] = v109;
                  if ( Item_FormatStatLine(v109, v112, v111, v215, v232, v219) )
                  {
                    v113 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, *v108 + 6300);
                    std::string::operator+=(v214, "</font>\r");
                    std::string::operator+=(v214, "<font type='0' size='9' color='");
                    std::string::operator+=(v214, v232);
                    std::string::operator+=(v214, "'>");
                    v114 = v113
                         ? (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                           g_pILTClient,
                                           v113)
                         : byte_659A8B98;
                    std::string::operator+=(v214, v114);
                    std::string::operator+=(v214, ": ");
                    std::string::operator+=(v214, v215);
                    if ( v113 )
                      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v113);
                  }
                }
              }
              std::string::operator+=(v214, "</font>\r");
              DynamicArray_Free((int)v224);
              DynamicArray_Free((int)&v200);
              goto LABEL_278;
            }
            v186 = (char *)6062;
          }
          else
          {
            v186 = (char *)6044;
          }
        }
        else
        {
          v186 = (char *)6073;
        }
        v86 = (*(int (__cdecl **)(int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v186);
        std::string::operator+=(v214, "<font type='0' size='9' color='FFED0000'>");
        if ( v86 )
          v87 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v86);
        else
          v87 = byte_659A8B98;
        std::string::operator+=(v214, v87);
        std::string::operator+=(v214, "</font>\r");
        if ( v86 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v86);
        goto LABEL_224;
      }
      if ( v62 )
      {
        if ( v62 < 0x10u )
        {
          v122 = (char *)&unk_659E0BA0 + 16 * v62;
          if ( v122 )
          {
            v123 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v62 + 17000);
            std::string::operator+=(v214, "<font type='2' size='9' color='00FF0000'>");
            if ( v123 )
              v124 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v123);
            else
              v124 = byte_659A8B98;
            v212 = (int)v184;
            String_AssignFromPtr(v184, (int)v124);
            v125 = FormatString((int)v192, (int)&unk_659C45C8);
            LOBYTE(v233) = 5;
            std::string::operator+=(v214, v125);
            LOBYTE(v233) = 0;
            std::string::~string(v192);
            std::string::operator+=(v214, "</font>\r");
            if ( v123 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v123);
            v126 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                     g_pILTClient,
                     (unsigned __int8)v122[1] + 17100);
            if ( v126 )
              v127 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v126);
            else
              v127 = byte_659A8B98;
            v128 = (*(int (__cdecl **)(int, int, const char *, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                     g_pILTClient,
                     17202,
                     v127,
                     *((_DWORD *)v122 + 1));
            if ( *((int *)v122 + 1) < 0 )
              v186 = "<font type='2' size='9' color='FF000000'>";
            else
              v186 = "<font type='2' size='9' color='00FF0000'>";
            std::string::operator+=(v214, v186);
            if ( v128 )
              v129 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v128);
            else
              v129 = byte_659A8B98;
            std::string::operator+=(v214, v129);
            std::string::operator+=(v214, "</font>\r\r");
            if ( v128 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v128);
            if ( v126 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v126);
            v130 = (unsigned __int8 *)(v122 + 9);
            *(_DWORD *)v213 = 5;
            do
            {
              v131 = *v130;
              if ( *v130 && v131 < 0x19u )
              {
                v132 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v131 + 29900);
                if ( v132 )
                  v133 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                         g_pILTClient,
                                         v132);
                else
                  v133 = byte_659A8B98;
                v134 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(
                         g_pILTClient,
                         6058,
                         v133);
                if ( v132 )
                  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v132);
                std::string::operator+=(v214, "<font type='2' size='9' color='FF000000'>");
                if ( v134 )
                  v135 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                         g_pILTClient,
                                         v134);
                else
                  v135 = byte_659A8B98;
                std::string::operator+=(v214, v135);
                std::string::operator+=(v214, "</font>\r");
                if ( v134 )
                  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v134);
              }
              ++v130;
              --*(_DWORD *)v213;
            }
            while ( *(float *)v213 != 0.0 );
            std::string::operator+=(v214, "\r");
          }
        }
      }
      goto LABEL_278;
    case 20:
      if ( v211[3] )
        v149 = (*(int (__cdecl **)(int, int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                 g_pILTClient,
                 953,
                 v211[5] - v211[3],
                 v211[3]);
      else
        v149 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 924, v211[5]);
      v59 = v149;
      std::string::operator+=(v214, "<font type='2' size='9' color='00FF0000'>");
      if ( v59 )
        v150 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v59);
      else
        v150 = byte_659A8B98;
      v212 = (int)v184;
      String_AssignFromPtr(v184, (int)v150);
      v151 = FormatString((int)v189, (int)&unk_659C45C8);
      LOBYTE(v233) = 8;
      std::string::operator+=(v214, v151);
      LOBYTE(v233) = 0;
      std::string::~string(v189);
      v186 = "</font>\r\r";
      goto LABEL_396;
    case 21:
      *(float *)v213 = Item_GetDurabilityPercent(v211);
      sprintf(v231, "%.2f %s", *(float *)v213, (const char *)&word_659C6184);
      v152 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6035, v231);
      if ( *(float *)v213 > 25.0 )
      {
        if ( *(float *)v213 >= 60.0 )
          v186 = "<font type='2' size='9' color='00FF0000'>";
        else
          v186 = "<font type='2' size='9' color='FFED0000'>";
      }
      else
      {
        v186 = "<font type='2' size='9' color='FF000000'>";
      }
      std::string::operator+=(v214, v186);
      if ( v152 )
        v153 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v152);
      else
        v153 = byte_659A8B98;
      std::string::operator+=(v214, v153);
      std::string::operator+=(v214, "</font>\r");
      if ( v152 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v152);
      if ( v211[2] != 979 )
        goto LABEL_278;
      v154 = EquipSlots_GetByIndex(&dword_65AC9770, v211[3]);
      if ( !v154 )
        goto LABEL_278;
      std::string::operator+=(v214, "<font type='2' size='9'>");
      v155 = *(_DWORD *)(v154 + 4);
      v212 = (int)v184;
      String_AssignFromPtr(v184, v155);
      v156 = FormatString((int)v187, (int)&unk_659C45C8);
      LOBYTE(v233) = 9;
      std::string::operator+=(v214, v156);
      LOBYTE(v233) = 0;
      std::string::~string(v187);
      std::string::operator+=(v214, "</font>\r");
      goto LABEL_279;
    case 22:
      *(float *)v213 = Item_GetDurabilityPercent(v211);
      sprintf(v231, "%.2f %s", *(float *)v213, (const char *)&word_659C6184);
      v157 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6035, v231);
      if ( *(float *)v213 > 25.0 )
      {
        if ( *(float *)v213 >= 60.0 )
          v186 = "<font type='2' size='9' color='00FF0000'>";
        else
          v186 = "<font type='2' size='9' color='FFED0000'>";
      }
      else
      {
        v186 = "<font type='2' size='9' color='FF000000'>";
      }
      std::string::operator+=(v214, v186);
      if ( v157 )
        v158 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v157);
      else
        v158 = byte_659A8B98;
      std::string::operator+=(v214, v158);
      std::string::operator+=(v214, "</font>\r");
      if ( v157 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v157);
      v159 = (int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64);
      v160 = Item_GetAmmoItemIdOrTemplate(v211);
      v161 = (*v159)(g_pILTClient, 1045, v160);
      std::string::operator+=(v214, "<font type='2' size='9' color='00FF0000'>");
      if ( v161 )
        v162 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v161);
      else
        v162 = byte_659A8B98;
      std::string::operator+=(v214, v162);
      std::string::operator+=(v214, "</font>\r");
      if ( v161 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v161);
      v61 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1046, v211[3]);
      v186 = "<font type='2' size='9' color='FF000000'>";
      goto LABEL_390;
    case 24:
      if ( v211[2] == 1804 )
      {
        v186 = (char *)v211[3];
        HIDWORD(v185) = 1056;
LABEL_389:
        v61 = (*(int (__cdecl **)(int, _DWORD, char *))(*(_DWORD *)g_pILTClient + 64))(
                g_pILTClient,
                HIDWORD(v185),
                v186);
        v186 = "<font type='2' size='9' color='00FF0000'>";
LABEL_390:
        v59 = v61;
        std::string::operator+=(v214, v186);
LABEL_391:
        if ( v59 )
          v166 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v59);
        else
          v166 = byte_659A8B98;
        std::string::operator+=(v214, v166);
        goto LABEL_395;
      }
      if ( v211[2] == 1806 )
      {
        v186 = (char *)v211[3];
        HIDWORD(v185) = 1059;
        goto LABEL_389;
      }
      if ( v211[2] != 1808 )
        goto LABEL_278;
      v59 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6326);
      std::string::operator+=(v214, "<font type='2' size='9' color='00FF0000'>");
      if ( v59 )
        v163 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v59);
      else
        v163 = byte_659A8B98;
      v212 = (int)v184;
      String_AssignFromPtr(v184, (int)v163);
      v164 = v27[3];
      *(float *)v213 = COERCE_FLOAT(v183);
      LOBYTE(v233) = 10;
      String_FromU16(v183, v164);
      LOBYTE(v233) = 0;
      v165 = FormatString_Args((int)v190, (int)"{0} {1}");
      LOBYTE(v233) = 11;
      std::string::operator+=(v214, v165);
      LOBYTE(v233) = 0;
      std::string::~string(v190);
LABEL_395:
      v186 = "</font>\r";
LABEL_396:
      std::string::operator+=(v214, v186);
      if ( v59 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v59);
      else
LABEL_278:
        v27 = v211;
LABEL_279:
      v115 = 0;
      v205 = 0;
      v206 = 0;
      v207 = 0;
      LOBYTE(v233) = 12;
      Item_CollectStatsForTooltip((int)v27, *(_DWORD **)v210, &v204);
      v197 = 0;
      v198 = 0;
      v199 = 0;
      v116 = (char *)v27[2];
      LOBYTE(v233) = 13;
      Item_AppendBaseStatsByType(v116, (char **)v196);
      v216[0] = 0;
      strncpy(v229, "66666600", 9u);
      v117 = (char *)v205;
      BYTE1(v230) = 0;
      if ( (v206 - (int)v205) >> 3 )
      {
        do
        {
          v118 = &v117[8 * v115];
          if ( v118 )
          {
            v119 = *v118;
            LOBYTE(v212) = *v118;
            v120 = ItemStatList_FindById(v196, v212);
            v121 = v120 ? *(_DWORD *)(v120 + 4) : *((_DWORD *)v118 + 1);
            v167 = *((_DWORD *)v118 + 1);
            LOWORD(v186) = v211[2];
            v210[0] = v119;
            if ( Item_FormatStatLine(v119, v167, v121, v216, v229, (unsigned __int16)v186) )
            {
              v168 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                       g_pILTClient,
                       (unsigned __int8)*v118 + 6300);
              std::string::operator+=(v214, "<font type='0' size='9' color='");
              std::string::operator+=(v214, v229);
              std::string::operator+=(v214, "'>");
              v169 = v168
                   ? (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v168)
                   : byte_659A8B98;
              std::string::operator+=(v214, v169);
              std::string::operator+=(v214, ": ");
              std::string::operator+=(v214, v216);
              std::string::operator+=(v214, "</font>\r");
              if ( v168 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v168);
            }
          }
          v117 = (char *)v205;
          ++v115;
        }
        while ( v115 < (v206 - (int)v205) >> 3 );
      }
      std::string::operator+=(v214, "\r");
      v170 = v208;
      v171 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, (unsigned __int16)v208 + 40000);
      std::string::operator+=(v214, "<font type='0' size='9' color='FFFFFF00'>");
      if ( v171 )
        v172 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v171);
      else
        v172 = byte_659A8B98;
      std::string::operator+=(v214, v172);
      std::string::operator+=(v214, "</font>\r\r");
      if ( v171 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v171);
      v173 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
      v174 = *((_BYTE *)v211 + 13) < 2u;
      v209 = 0;
      LOBYTE(v212) = !v174;
      if ( sub_65932540(v170, (int)&v209, 1, *(unsigned __int16 *)(v173 + 8), v212) )
      {
        v175 = (*(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6033, v209);
        std::string::operator+=(v214, "<font type='0' size='9' color='FF000000'>");
        v176 = v175
             ? (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v175)
             : byte_659A8B98;
        std::string::operator+=(v214, v176);
        std::string::operator+=(v214, "</font>\r\r");
        if ( v175 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v175);
      }
      v177 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6046);
      std::string::operator+=(v214, "<font type='2' size='9' color='FFFFFF00'>");
      if ( v177 )
        v178 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v177);
      else
        v178 = byte_659A8B98;
      std::string::operator+=(v214, v178);
      std::string::operator+=(v214, "</font>\r\r\r\r");
      if ( v177 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v177);
      v179 = (int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 72);
      v180 = std::string::c_str(v214);
      v181 = (*v179)(g_pILTClient, v180);
      if ( v197 )
        operator delete(v197);
      v197 = 0;
      v198 = 0;
      v199 = 0;
      if ( v205 )
        operator delete(v205);
      v205 = 0;
      v206 = 0;
      v207 = 0;
      v233 = -1;
      std::string::~string(v214);
      return v181;
    default:
      goto LABEL_278;
  }
}
// 659A8274: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A8288: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 659C6184: using guessed type __int16 word_659C6184;
// 65A5AA4C: using guessed type int g_LTClient;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];
// 65AC9770: using guessed type int dword_65AC9770;

//----- (6580EA20) --------------------------------------------------------
unsigned __int8 __thiscall MineralScanner_UpdateTextPosition(int *this)
{
  return TextWidget_UpdatePosition(*(this + 1593), 10.0, 0.0);
}

//----- (6580EAC0) --------------------------------------------------------
void __thiscall CWindowMineralScanner_Dtor(void **this)
{
  *this = &CWindowMineralScanner_vtbl;
  GroupWindow_Dtor(this);
}
// 659CBA44: using guessed type int (__thiscall *CWindowMineralScanner_vtbl)(void *, char);

//----- (6580EAD0) --------------------------------------------------------
_DWORD *__thiscall CWindowMineralScanner_PositionRelative(_DWORD *this)
{
  _DWORD *WindowById; // eax
  int v4; // [esp+4h] [ebp-8h] BYREF
  int v5; // [esp+8h] [ebp-4h] BYREF

  v4 = 0;
  v5 = 0;
  WindowById = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 1u);
  if ( WindowById )
    UILayout_GetSlotPosition(WindowById, 6u, &v4, &v5);
  return GroupWindow_UpdatePosition(this, v4, v5 + 62, 1);
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (6580EB30) --------------------------------------------------------
int __thiscall CWindowMineralScanner_OnUpdate(char *this, int a2)
{
  return CWindow_UpdateChildren(this, a2);
}

//----- (6580EB90) --------------------------------------------------------
void __cdecl __noreturn Vector8_ThrowLengthError_v2(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (6580EC70) --------------------------------------------------------
void *__cdecl SafeNew8Array_CheckOverflow_v2(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 8 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(8 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (6580ED80) --------------------------------------------------------
void **__thiscall CWindowMineralScanner_dtor(void **this, char a2)
{
  CWindowMineralScanner_Dtor(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (6580EEC0) --------------------------------------------------------
int __thiscall CWindowMineralScanner_InitUI(_DWORD *this)
{
  int v2; // edi
  const char *v3; // eax
  int v4; // edi
  float v6[2]; // [esp+10h] [ebp-70h] BYREF
  char v7[28]; // [esp+18h] [ebp-68h] BYREF
  int v8; // [esp+34h] [ebp-4Ch]
  int v9; // [esp+38h] [ebp-48h]
  int v10; // [esp+78h] [ebp-8h]

  UiTextStyle_Ctor(v6);
  LODWORD(v6[0]) = 24;
  v10 = 1;
  LODWORD(v6[1]) = 12;
  v9 = 1;
  v8 = 5;
  strncpy(v7, "FFFFFF00", 0xFu);
  v7[15] = 0;
  v2 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 437);
  if ( v2 )
    v3 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v2);
  else
    v3 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v3, 32, 230, -5, 0, 1, 0, 0, (int)v6, 2, 0, 0, 0, 1);
  if ( v2 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v2);
  *(this + 1592) = UiWidget_CreateWithInput(this, 5, 8, 20, 0, 2);
  UiWidget_CreateScrollbar(this, 10, 45, 210, 24, 0.5, 0);
  if ( *((int *)dword_65ABF760 + 2) > 43 )
  {
    v4 = *(_DWORD *)(*((_DWORD *)dword_65ABF760 + 1) + 172);
    (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v4, *((float *)dword_65ABF760 + 15));
  }
  else
  {
    v4 = 0;
  }
  *(this + 1593) = UiWidget_CreateComplex(this, (void *)0x12, (void *)7, 11, 46, 0, 1, v4, 1, 208, 22, 0);
  return GroupWindow_Initialize((int)this);
}

//----- (6580F030) --------------------------------------------------------
char *__thiscall ItemSlotPair_WriteCompressed(unsigned __int16 *this, char *a2)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  int v6; // [esp+8h] [ebp-8h] BYREF
  _BYTE v7[4]; // [esp+Ch] [ebp-4h] BYREF

  v6 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v6, (int)v7, 2u);
    v5 = v7;
  }
  else
  {
    v5 = (char *)&v6;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x10u, 1);
  v6 = *(this + 1);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v6, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&v6, 0x10u, 1);
  }
  a2 = (char *)*((_DWORD *)this + 1);
  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  ByteSwapCopy((int)&a2, (int)&v6, 4u);
  return BitStream_WriteBitsCompressed(v3, (char *)&v6, 0x20u, 1);
}

//----- (6580F110) --------------------------------------------------------
char *__thiscall ItemSlotArray_WriteToStream(_DWORD *this, char *a2)
{
  unsigned int v2; // edi
  char *result; // eax
  unsigned int i; // esi
  char *v5; // [esp-Ch] [ebp-24h]
  char v7[4]; // [esp+10h] [ebp-8h] BYREF
  unsigned int v8; // [esp+14h] [ebp-4h] BYREF

  v2 = (*(this + 2) - *(this + 1)) >> 3;
  v8 = v2;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v8, (int)v7, 4u);
    v5 = v7;
  }
  else
  {
    v5 = (char *)&v8;
  }
  result = BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  for ( i = 0; i < v2; ++i )
    result = ItemSlotPair_WriteCompressed((unsigned __int16 *)(*(this + 1) + 8 * i), a2);
  return result;
}

//----- (6580F190) --------------------------------------------------------
char __thiscall Packet_ID_MINING_write(int this)
{
  char result; // al
  char v3[4]; // [esp+4h] [ebp-4h] BYREF

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    v3[0] = *(_BYTE *)(this + 1076);
    BitStream_WriteBitsCompressed((char *)(this + 12), v3, 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 0:
      case 2:
        BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1084));
        result = 1;
        break;
      case 1:
        ItemSlotArray_WriteToStream((_DWORD *)(this + 1088), (char *)(this + 12));
        BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1084));
        result = 1;
        break;
      case 3:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
        goto LABEL_6;
      default:
LABEL_6:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (6580F450) --------------------------------------------------------
int __thiscall Packet_ID_MINING_free(void **this)
{
  if ( *(this + 273) )
    operator delete(*(this + 273));
  *(this + 273) = 0;
  *(this + 274) = 0;
  *(this + 275) = 0;
  *this = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 3));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (6580F4A0) --------------------------------------------------------
char __thiscall CraftingWindow_PopulateItemList(void (__fastcall ***this)(char **))
{
  int v2; // eax
  int v3; // esi
  unsigned int i; // esi
  int v5; // edi
  char Dword_this; // al
  void *v7; // edi
  const char *v8; // eax
  int v10; // [esp+18h] [ebp-10h]
  int v12; // [esp+20h] [ebp-8h]
  unsigned __int8 v13; // [esp+27h] [ebp-1h]

  (*this)[4]((char **)this);
  v2 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  if ( v2 )
  {
    v3 = v2 + 84;
    if ( v2 != -84 && *(_WORD *)(v2 + 88) == 107 )
    {
      v2 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
      if ( v2 )
      {
        v2 = ItemStatModifier_FindById((_DWORD *)v2, 57);
        v10 = v2;
        if ( v2 )
        {
          v13 = *(_BYTE *)(v3 + 13) == 0 ? 6 : 1;
          v12 = 1151;
          PtrVector_FreeAll_thunk(*(this + 1592));
          for ( i = 1150; i <= 0x499; ++i )
          {
            if ( (unsigned __int16)(i - 1) <= 0xBBFu )
            {
              v5 = g_ItemTemplateById[(unsigned __int16)i];
              if ( v5 )
              {
                if ( v13 < *(_BYTE *)(v5 + 2)
                  || ItemStatModifier_GetValue(*(_DWORD *)v10, *(_BYTE *)(v10 + 4)) < (unsigned int)*(unsigned __int8 *)(v5 + 2)
                  || (Dword_this = SharedMem_ReadDword_this(dword_65ABF73C, 0), sub_6596AEC0(Dword_this, i) == 0.0) )
                {
                  if ( i == v12 )
                    ++v12;
                }
                else
                {
                  v7 = (void *)(*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
                                 g_pILTClient,
                                 i + 30000);
                  UiList_AddEntry((int **)*(this + 1592), v7, 6, i, 0);
                  if ( v12 == i )
                  {
                    if ( v7 )
                      v8 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(
                                           g_pILTClient,
                                           v7);
                    else
                      v8 = byte_659A8B98;
                    UiList_SetSelectionText((int)*(this + 1592), (int)v8, 1);
                  }
                }
              }
            }
          }
          SharedMem_WriteDword_this(g_pPlayerStats, 0x1EEBFu, v12);
          LOBYTE(v2) = TextWidget_UpdatePosition((int)*(this + 1593), 10.0, 0.0);
        }
      }
    }
  }
  return v2;
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6580F670) --------------------------------------------------------
char *__thiscall Packet_ID_MINING_Ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -102;
  *(_DWORD *)this = &Packet_ID_MINING_vtbl;
  *((_DWORD *)this + 273) = 0;
  *((_DWORD *)this + 274) = 0;
  *((_DWORD *)this + 275) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *((_DWORD *)this + 270) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CBAB8: using guessed type _UNKNOWN *Packet_ID_MINING_vtbl;

//----- (6580F890) --------------------------------------------------------
_DWORD *__cdecl Array8_FillRange(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; result += 2 )
  {
    *result = *a3;
    result[1] = a3[1];
  }
  return result;
}

//----- (6580F910) --------------------------------------------------------
_DWORD *__cdecl Array8_CopyRange(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 2 )
  {
    if ( result )
    {
      *result = *v3;
      result[1] = v3[1];
    }
    v3 += 2;
  }
  return result;
}

//----- (6580F990) --------------------------------------------------------
_DWORD *__cdecl Array8_CopyBackward(int a1, int a2, _DWORD *a3)
{
  int v3; // ecx
  _DWORD *result; // eax
  int v5; // esi

  v3 = a2;
  for ( result = a3; v3 != a1; result[1] = *(_DWORD *)(v3 + 4) )
  {
    v5 = *(_DWORD *)(v3 - 8);
    v3 -= 8;
    result -= 2;
    *result = v5;
  }
  return result;
}

//----- (6580F9C0) --------------------------------------------------------
void __cdecl Vector8_FillN(_DWORD *a1, int a2, _DWORD *a3)
{
  int i; // ecx

  for ( i = a2; i; a1 += 2 )
  {
    if ( a1 )
    {
      *a1 = *a3;
      a1[1] = a3[1];
    }
    --i;
  }
}

//----- (6580FA80) --------------------------------------------------------
_DWORD *__stdcall Vector8_FillNWrapper(_DWORD *a1, int a2, _DWORD *a3)
{
  Vector8_FillN(a1, a2, a3);
  return &a1[2 * a2];
}

//----- (6580FAF0) --------------------------------------------------------
_DWORD *__stdcall Array8_CopyRangeWrapper(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return Array8_CopyRange(a1, a2, a3);
}

//----- (6580FB20) --------------------------------------------------------
void __thiscall Vector8_InsertAt(int this, char *a2, unsigned int a3, int *a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  char *v7; // edi
  int v8; // eax
  unsigned int v9; // ecx
  char *v10; // edi
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  int v13; // eax
  int v14; // ebx
  int v15; // edx
  void *v16; // edx
  char *v17; // ebx
  _DWORD *v18; // [esp-20h] [ebp-4Ch]
  _DWORD *v19; // [esp-Ch] [ebp-38h]
  int v20; // [esp-8h] [ebp-34h]
  int v21[4]; // [esp+0h] [ebp-2Ch] BYREF
  int v22; // [esp+10h] [ebp-1Ch] BYREF
  void *v23; // [esp+14h] [ebp-18h]
  unsigned int v24; // [esp+18h] [ebp-14h]
  int *v25; // [esp+1Ch] [ebp-10h]
  int v26; // [esp+28h] [ebp-4h]

  v25 = v21;
  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 3;
  else
    v6 = 0;
  if ( a3 )
  {
    v7 = *(char **)(this + 8);
    v8 = (int)&v7[-v5] >> 3;
    if ( 0x1FFFFFFF - v8 < a3 )
      Vector8_ThrowLengthError_v2(v21[0], v21[1]);
    if ( v6 >= v8 + a3 )
    {
      if ( (v7 - a2) >> 3 >= a3 )
      {
        v16 = (void *)a4[1];
        v17 = &v7[-8 * a3];
        v22 = *a4;
        v23 = v16;
        *(_DWORD *)(this + 8) = Array8_CopyRangeWrapper(v17, v7, v7);
        Array8_CopyBackward((int)a2, (int)v17, v7);
        Array8_FillRange(a2, &a2[8 * a3], &v22);
      }
      else
      {
        v15 = *a4;
        v23 = (void *)a4[1];
        v22 = v15;
        Array8_CopyRangeWrapper(a2, v7, &a2[8 * a3]);
        v20 = a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 3);
        v19 = *(_DWORD **)(this + 8);
        v26 = 2;
        Vector8_FillNWrapper(v19, v20, &v22);
        *(_DWORD *)(this + 8) += 8 * a3;
        Array8_FillRange(a2, (_DWORD *)(*(_DWORD *)(this + 8) - 8 * a3), &v22);
      }
    }
    else
    {
      if ( 0x1FFFFFFF - (v6 >> 1) >= v6 )
      {
        v9 = (v6 >> 1) + v6;
        v24 = v9;
      }
      else
      {
        v24 = 0;
        v9 = 0;
      }
      if ( v9 < v8 + a3 )
      {
        v24 = v8 + a3;
        v9 = v8 + a3;
      }
      v10 = (char *)SafeNew8Array_CheckOverflow_v2(v9);
      v18 = *(_DWORD **)(this + 4);
      v23 = v10;
      v26 = 0;
      v11 = Array8_CopyRange(v18, a2, v10);
      v12 = Vector8_FillNWrapper(v11, a3, a4);
      Array8_CopyRange(a2, *(_DWORD **)(this + 8), v12);
      v13 = *(_DWORD *)(this + 4);
      v14 = ((*(_DWORD *)(this + 8) - v13) >> 3) + a3;
      if ( v13 )
        operator delete(*(void **)(this + 4));
      *(_DWORD *)(this + 12) = &v10[8 * v24];
      *(_DWORD *)(this + 8) = &v10[8 * v14];
      *(_DWORD *)(this + 4) = v10;
    }
  }
}

//----- (6580FE70) --------------------------------------------------------
int __thiscall CWindowMineralScanner_OnCommand(int *this, int a2, int a3, int a4)
{
  int result; // eax
  int v6; // esi
  const char *v7; // eax
  void *v8[269]; // [esp+10h] [ebp-460h] BYREF
  char v9; // [esp+444h] [ebp-2Ch]
  __int16 Dword_this; // [esp+44Ch] [ebp-24h]
  int v11; // [esp+46Ch] [ebp-4h]

  switch ( a2 )
  {
    case 5:
      sub_65809DE0((int *)dword_65ABF708, (int)this, (_DWORD *)*(this + 1592), 1, 1, 1);
      result = 1;
      break;
    case 6:
      v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, a3 + 30000);
      if ( v6 )
        v7 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
      else
        v7 = byte_659A8B98;
      UiList_SetSelectionText(*(this + 1592), (int)v7, 1);
      if ( v6 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
      SharedMem_WriteDword_this(g_pPlayerStats, 0x1EEBFu, a3);
      result = 1;
      break;
    case 7:
      if ( (*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 4) )
      {
        MineralScanner_UpdateTextPosition(this);
      }
      else
      {
        Packet_ID_MINING_Ctor((char *)v8);
        v11 = 0;
        v8[268] = (void *)SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
        v9 = 0;
        Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x1EEBFu);
        Packet_ID_MINING_write((int)v8);
        LTClient_SendPacket_BuildIfNeeded(v8, 2, 1, 3, 0);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 4);
        v11 = -1;
        Packet_ID_MINING_free(v8);
      }
      result = 1;
      break;
    default:
      result = CWindow_HandleCommand(this, a2, a3, a4);
      break;
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65810040) --------------------------------------------------------
char __thiscall Packet_ID_MINING_read_list(char **this, unsigned int *a2)
{
  unsigned int *v2; // ebx
  unsigned int v4; // eax
  int v5; // ecx
  unsigned int v6; // eax
  char *v7; // esi
  int v9; // [esp+Ch] [ebp-1Ch] BYREF
  int v10; // [esp+10h] [ebp-18h] BYREF
  int v11; // [esp+14h] [ebp-14h]
  char v12[4]; // [esp+18h] [ebp-10h] BYREF
  unsigned int v13; // [esp+1Ch] [ebp-Ch]
  unsigned int v14; // [esp+20h] [ebp-8h] BYREF
  char v15[4]; // [esp+24h] [ebp-4h] BYREF

  v2 = a2;
  v14 = 0;
  LOBYTE(v4) = RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v14);
  v9 = 0;
  v10 = 0;
  v13 = 0;
  if ( v14 )
  {
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, (char *)&a2, 0x10u, 1) )
          ByteSwapCopy((int)&a2, (int)&v9, 2u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v9, 0x10u, 1);
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, v15, 0x10u, 1) )
          ByteSwapCopy((int)v15, (int)&v9 + 2, 2u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v9 + 2, 0x10u, 1);
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, v12, 0x20u, 1) )
          ByteSwapCopy((int)v12, (int)&v10, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v10, 0x20u, 1);
      }
      v5 = (int)*(this + 1);
      if ( v5 )
        v6 = (int)&(*(this + 3))[-v5] >> 3;
      else
        v6 = 0;
      v7 = *(this + 2);
      if ( (int)&v7[-v5] >> 3 >= v6 )
      {
        Vector8_InsertAt((int)this, v7, 1u, &v9);
      }
      else
      {
        LOBYTE(v11) = 0;
        Vector8_FillN(v7, 1, &v9);
        *(this + 2) = v7 + 8;
      }
      v4 = v13 + 1;
      v13 = v4;
    }
    while ( v4 < v14 );
  }
  return v4;
}

//----- (658101A0) --------------------------------------------------------
char __thiscall Packet_ID_MINING_read(int this, int a2)
{
  char result; // al
  unsigned int *v4; // edi

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    v4 = (unsigned int *)(this + 12);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 0:
      case 2:
        RakNet::BitStream::ReadCompressed_T_ushort(v4, (char *)(this + 1084));
        result = 1;
        break;
      case 1:
        Packet_ID_MINING_read_list((char **)(this + 1088), (unsigned int *)(this + 12));
        RakNet::BitStream::ReadCompressed_T_ushort(v4, (char *)(this + 1084));
        result = 1;
        break;
      case 3:
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1080));
        goto LABEL_6;
      default:
LABEL_6:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (658133F0) --------------------------------------------------------
char *__cdecl Array224_CopyRange(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax
  char *v5; // esi
  char *v6; // edi

  v3 = a1;
  result = a3;
  while ( v3 != a2 )
  {
    v5 = v3;
    v6 = result;
    v3 += 224;
    result += 224;
    qmemcpy(v6, v5, 0xE0u);
  }
  return result;
}

//----- (658134F0) --------------------------------------------------------
char *__usercall Array224_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0xE0u);
      --v4;
      result += 224;
    }
    while ( v4 );
  }
  return result;
}

//----- (65814670) --------------------------------------------------------
void __thiscall SoundDefPool_FreeAll(int this)
{
  int v2; // eax
  int v3; // eax
  int v4; // edi
  int v5; // eax
  bool v6; // zf
  void **v7; // eax

  while ( *(_DWORD *)(this + 28) )
  {
    v2 = *(_DWORD *)(this + 28);
    if ( v2 )
    {
      v3 = v2 - 1;
      *(_DWORD *)(this + 28) = v3;
      if ( !v3 )
        *(_DWORD *)(this + 24) = 0;
    }
  }
  v4 = *(_DWORD *)(this + 20);
  while ( v4 )
  {
    v5 = *(_DWORD *)(this + 16);
    --v4;
    v6 = *(_DWORD *)(v5 + 4 * v4) == 0;
    v7 = (void **)(v5 + 4 * v4);
    if ( !v6 )
      operator delete(*v7);
  }
  if ( *(_DWORD *)(this + 16) )
    operator delete(*(void **)(this + 16));
  *(_DWORD *)(this + 16) = 0;
  *(_DWORD *)(this + 20) = 0;
}

//----- (658153D0) --------------------------------------------------------
void __thiscall sub_658153D0(int this, unsigned int a2)
{
  unsigned int v2; // edx
  unsigned int v4; // eax
  unsigned int v5; // ecx
  unsigned int v6; // edi
  int v7; // edi
  int v8; // eax
  char *v9; // ebx
  unsigned int v10; // edx
  const void *v11; // ecx
  int v12; // eax
  rsize_t v13; // edi
  char *v14; // edi
  unsigned int v15; // ecx
  int v16; // eax
  int v17; // eax
  unsigned int v18; // [esp+8h] [ebp-8h]
  char *Destination; // [esp+Ch] [ebp-4h]

  v2 = a2;
  v4 = *(_DWORD *)(this + 20);
  if ( 19173961 - v4 < a2 )
    v4 = sub_658116E0();
  v5 = v4 >> 1;
  if ( v4 >> 1 < 8 )
    v5 = 8;
  if ( v2 < v5 && v4 <= 19173961 - v5 )
  {
    v2 = v5;
    a2 = v5;
  }
  v6 = *(_DWORD *)(this + 24);
  v18 = v6;
  Destination = (char *)sub_65811B10(v2 + v4, 0);
  v7 = 4 * v6;
  v8 = (4 * *(_DWORD *)(this + 20) - v7) >> 2;
  v9 = &Destination[4 * v8 + v7];
  if ( v8 )
    memmove_s(&Destination[v7], 4 * v8, (const void *const)(*(_DWORD *)(this + 16) + v7), 4 * v8);
  v10 = a2;
  v11 = *(const void **)(this + 16);
  if ( v18 > a2 )
  {
    v16 = (int)(4 * a2) >> 2;
    if ( v16 )
    {
      memmove_s(v9, 4 * v16, v11, 4 * v16);
      v10 = a2;
    }
    v17 = (int)(v7 - 4 * v10) >> 2;
    v14 = &Destination[4 * v17];
    if ( v17 )
    {
      memmove_s(Destination, 4 * v17, (const void *const)(*(_DWORD *)(this + 16) + 4 * v10), 4 * v17);
      v10 = a2;
    }
    if ( v10 )
    {
      v15 = v10;
      goto LABEL_23;
    }
  }
  else
  {
    v12 = v7 >> 2;
    v13 = 4 * (v7 >> 2);
    if ( v12 )
      memmove_s(v9, v13, v11, v13);
    v10 = a2;
    if ( a2 != v18 )
      memset(&v9[v13], 0, 4 * (a2 - v18));
    if ( v18 )
    {
      v14 = Destination;
      v15 = v18;
LABEL_23:
      memset(v14, 0, 4 * v15);
    }
  }
  if ( *(_DWORD *)(this + 16) )
  {
    operator delete(*(void **)(this + 16));
    v10 = a2;
  }
  *(_DWORD *)(this + 20) += v10;
  *(_DWORD *)(this + 16) = Destination;
}
// 65815401: variable 'v2' is possibly undefined
// 658116E0: using guessed type int sub_658116E0(void);
// 65811B10: using guessed type int __cdecl sub_65811B10(_DWORD, _DWORD);

//----- (65815540) --------------------------------------------------------
char **__thiscall sub_65815540(char **this, char **a2, char *a3, char *a4)
{
  char *v4; // edx
  char *v5; // ebx
  char **v6; // esi
  char *v7; // eax
  const void *v8; // esi
  void *v9; // edi

  v4 = a4;
  v5 = a3;
  v6 = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v7 = *(this + 2);
    if ( a4 != v7 )
    {
      do
      {
        v8 = v4;
        v9 = v5;
        v4 += 96;
        v5 += 96;
        qmemcpy(v9, v8, 0x60u);
      }
      while ( v4 != v7 );
      v6 = a2;
    }
    *(this + 2) = v5;
  }
  return v6;
}

//----- (65815870) --------------------------------------------------------
_DWORD *__thiscall sub_65815870(_DWORD *this)
{
  _DWORD *v2; // eax
  _DWORD *v3; // edi
  _DWORD *v4; // eax

  v2 = operator new(4u);
  if ( v2 )
    *v2 = this;
  else
    v2 = 0;
  *this = v2;
  *(this + 4) = 0;
  *(this + 5) = 0;
  *(this + 6) = 0;
  *(this + 7) = 0;
  v3 = this + 8;
  v4 = operator new(4u);
  if ( v4 )
    *v4 = v3;
  else
    v4 = 0;
  *v3 = v4;
  *(this + 12) = 0;
  *(this + 13) = 0;
  *(this + 14) = 0;
  *(this + 15) = 0;
  SoundDefPool_FreeAll((int)(this + 8));
  SoundDefPool_FreeAll((int)this);
  return this;
}

//----- (65815940) --------------------------------------------------------
void __thiscall QuestEntry_FreeBuffers(int this)
{
  void **v2; // esi

  if ( *(_DWORD *)(this + 272) )
    operator delete(*(void **)(this + 272));
  *(_DWORD *)(this + 272) = 0;
  *(_DWORD *)(this + 276) = 0;
  *(_DWORD *)(this + 280) = 0;
  if ( *(_DWORD *)(this + 256) )
    operator delete(*(void **)(this + 256));
  *(_DWORD *)(this + 256) = 0;
  *(_DWORD *)(this + 260) = 0;
  *(_DWORD *)(this + 264) = 0;
  v2 = (void **)(this + 184);
  SoundDefPool_FreeAll((int)(v2 + 8));
  operator delete(v2[8]);
  SoundDefPool_FreeAll((int)v2);
  operator delete(*v2);
}

//----- (65815B20) --------------------------------------------------------
void __thiscall QuestPool_AllocEntry224(_DWORD *this, const void *a2)
{
  int v3; // esi
  int v4; // esi
  void *v5; // edi

  if ( *(this + 5) <= (unsigned int)(*(this + 7) + 1) )
    sub_658153D0((int)this, 1u);
  v3 = *(this + 6);
  if ( !v3 )
    v3 = *(this + 5);
  v4 = v3 - 1;
  if ( !*(_DWORD *)(*(this + 4) + 4 * v4) )
    *(_DWORD *)(*(this + 4) + 4 * v4) = operator new(0xE0u);
  v5 = *(void **)(*(this + 4) + 4 * v4);
  if ( v5 )
    qmemcpy(v5, a2, 0xE0u);
  ++*(this + 7);
  *(this + 6) = v4;
}

//----- (65815C30) --------------------------------------------------------
_DWORD *__thiscall sub_65815C30(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 224 )
    v6 = (a3 - v5) / 224;
  else
    v6 = 0;
  sub_65815590(this, a3, 1, a4);
  *a2 = *(this + 1) + 224 * v6;
  return a2;
}
// 65815590: using guessed type int __thiscall sub_65815590(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65815EF0) --------------------------------------------------------
void __thiscall sub_65815EF0(int this)
{
  if ( *(_DWORD *)(this + 220) )
    operator delete(*(void **)(this + 220));
  *(_DWORD *)(this + 220) = 0;
  *(_DWORD *)(this + 224) = 0;
  *(_DWORD *)(this + 228) = 0;
  if ( *(_DWORD *)(this + 192) )
    operator delete(*(void **)(this + 192));
  *(_DWORD *)(this + 192) = 0;
  *(_DWORD *)(this + 196) = 0;
  *(_DWORD *)(this + 200) = 0;
}

//----- (65815FB0) --------------------------------------------------------
char **__thiscall QuestEntry_Reset(_DWORD *this)
{
  _DWORD *v2; // edi
  char *v3; // eax
  char **result; // eax
  char *v5; // [esp+Ch] [ebp-4h] BYREF

  v2 = this + 46;
  *(this + 1) = 0;
  *(_BYTE *)this = 0;
  *(this + 2) = 0;
  *((_BYTE *)this + 180) = 0;
  *((_BYTE *)this + 181) = 0;
  *((_BYTE *)this + 182) = 0;
  *((_BYTE *)this + 13) = 0;
  *((_BYTE *)this + 41) = 0;
  *(this + 43) = 0;
  *(this + 44) = 0;
  SoundDefPool_FreeAll((int)(this + 54));
  SoundDefPool_FreeAll((int)v2);
  *((_WORD *)this + 124) = 1;
  *((_WORD *)this + 125) = 0;
  v3 = (char *)*(this + 65);
  if ( (char *)*(this + 64) != v3 )
    *(this + 65) = Array224_CopyRange(v3, v3, (char *)*(this + 64));
  result = sub_65815540((char **)this + 67, &v5, (char *)*(this + 68), (char *)*(this + 69));
  *((_BYTE *)this + 12) = 0;
  return result;
}

//----- (65816090) --------------------------------------------------------
char *__thiscall Vector224_PushBack(char **this, char *a2)
{
  int v3; // eax
  unsigned int v4; // esi
  char *v5; // ebx
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 224;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - *(this + 1)) / 224 >= v4 )
    return (char *)sub_65815C30(this, &a2, (int)v5, (int)a2);
  result = Array224_FillCopy(a2, v5, 1, a2);
  *(this + 2) = v5 + 224;
  return result;
}

//----- (65816310) --------------------------------------------------------
char *__thiscall sub_65816310(void *this)
{
  char *result; // eax
  char *v3; // [esp+8h] [ebp-4h] BYREF

  *(_DWORD *)this = 0;
  *((_BYTE *)this + 28) = 0;
  *((_DWORD *)this + 1) = 0;
  *((_BYTE *)this + 8) = 0;
  *((_BYTE *)this + 29) = 0;
  *((_BYTE *)this + 57) = 0;
  ItemData_MoveRange((char **)this + 47, &v3, *((char **)this + 48), *((char **)this + 49));
  *((_BYTE *)this + 204) = 0;
  *((_BYTE *)this + 205) = 0;
  *((_BYTE *)this + 206) = 0;
  *((_BYTE *)this + 207) = 0;
  *((_DWORD *)this + 52) = 0;
  *((_WORD *)this + 106) = 1;
  *((_BYTE *)this + 214) = 1;
  result = (char *)*((_DWORD *)this + 56);
  if ( *((char **)this + 55) != result )
  {
    result = sub_65796AD0(result, result, *((char **)this + 55));
    *((_DWORD *)this + 56) = result;
  }
  *((_DWORD *)this + 58) = 0;
  return result;
}

//----- (658164A0) --------------------------------------------------------
int __thiscall QuestEntry_Init(int this)
{
  char *v2; // eax
  char *v4; // [esp+10h] [ebp-10h] BYREF

  unknown_libname_664(this + 172);
  sub_65815870((_DWORD *)(this + 184));
  *(_DWORD *)(this + 256) = 0;
  *(_DWORD *)(this + 260) = 0;
  *(_DWORD *)(this + 264) = 0;
  *(_WORD *)(this + 248) = 1;
  *(_WORD *)(this + 250) = 0;
  v2 = *(char **)(this + 260);
  if ( *(char **)(this + 256) != v2 )
    *(_DWORD *)(this + 260) = Array224_CopyRange(v2, v2, *(char **)(this + 256));
  *(_DWORD *)(this + 272) = 0;
  *(_DWORD *)(this + 276) = 0;
  *(_DWORD *)(this + 280) = 0;
  sub_65815540((char **)(this + 268), &v4, 0, 0);
  QuestEntry_Reset((_DWORD *)this);
  return this;
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);

//----- (65816850) --------------------------------------------------------
char **__thiscall QuestEntry_Clear(char **this)
{
  char **v2; // ecx
  char *v4; // [esp+10h] [ebp-10h] BYREF

  v2 = this + 47;
  v2[1] = 0;
  v2[2] = 0;
  v2[3] = 0;
  ItemData_MoveRange(v2, &v4, 0, 0);
  *(this + 55) = 0;
  *(this + 56) = 0;
  *(this + 57) = 0;
  sub_65816310(this);
  return this;
}

//----- (65818030) --------------------------------------------------------
int __thiscall QuestVector_FindById(_DWORD *this, int a2)
{
  int v2; // edi
  int v3; // esi
  int v4; // ecx
  _DWORD *i; // edx

  v2 = 0;
  if ( !((*(this + 3) - *(this + 2)) / 284) )
    return 0;
  v3 = *(this + 3) - *(this + 2);
  v4 = *(this + 2);
  for ( i = (_DWORD *)(v4 + 4); *i != a2; i += 71 )
  {
    if ( ++v2 >= (unsigned int)(v3 / 284) )
      return 0;
  }
  return v4 + 284 * v2;
}

//----- (658181E0) --------------------------------------------------------
bool __thiscall Packet_ID_A9_read_structC(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed(a2, this, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 1, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 2, 8u, 1);
  return RakNet::BitStream::ReadCompressed(a2, this + 3, 8u, 1);
}

//----- (65818230) --------------------------------------------------------
int __thiscall Packet_ID_A9_read_structC2(char *this, unsigned int *a2)
{
  char *v3; // esi

  RakNet::BitStream::ReadCompressed(a2, this, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 4);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 8,
    2048,
    a2);
  RakNet::BitStream::ReadCompressed(a2, this + 28, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 29, 8u, 1);
  sub_65946F10();
  if ( *this )
  {
    RakNet::BitStream::ReadCompressed_T_uint(a2, this + 36);
    (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
      g_LTClient,
      this + 40,
      2048,
      a2);
    RakNet::BitStream::ReadCompressed_T_uint(a2, this + 60);
    v3 = this + 64;
  }
  else
  {
    v3 = this + 96;
  }
  return (*(int (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
           g_LTClient,
           v3,
           2048,
           a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (658182F0) --------------------------------------------------------
bool __thiscall Packet_ID_A9_read_structC3(char *this, unsigned int *a2)
{
  unsigned int v3; // eax

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 4,
    2048,
    a2);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 24);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 28,
    2048,
    a2);
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *(this + 60) = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 64);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 68);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 72);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 76);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 80);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 84);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 88);
  return RakNet::BitStream::ReadCompressed(a2, this + 92, 8u, 1);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65818460) --------------------------------------------------------
char *__usercall sub_65818460@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x60u);
      --v4;
      result += 96;
    }
    while ( v4 );
  }
  return result;
}

//----- (65818A60) --------------------------------------------------------
_DWORD *__thiscall sub_65818A60(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 96 )
    v6 = (a3 - v5) / 96;
  else
    v6 = 0;
  sub_658187B0(this, a3, 1, a4);
  *a2 = *(this + 1) + 96 * v6;
  return a2;
}
// 658187B0: using guessed type int __thiscall sub_658187B0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65818B00) --------------------------------------------------------
void __thiscall Packet_ID_A9_read_structD_sub_B8(char *this, unsigned int *a2)
{
  unsigned int v2; // esi
  unsigned int v4; // [esp+10h] [ebp-E8h] BYREF
  char v5[4]; // [esp+14h] [ebp-E4h] BYREF
  int v6; // [esp+18h] [ebp-E0h]
  char v7; // [esp+1Ch] [ebp-DCh]
  char v8; // [esp+30h] [ebp-C8h]
  char v9; // [esp+31h] [ebp-C7h]
  _DWORD v10[2]; // [esp+34h] [ebp-C4h] BYREF
  char v11; // [esp+3Ch] [ebp-BCh]
  int v12; // [esp+50h] [ebp-A8h]
  char v13; // [esp+54h] [ebp-A4h]
  char i; // [esp+74h] [ebp-84h]

  v4 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v4);
  unknown_libname_664(v10);
  v2 = 0;
  v5[0] = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v10[0] = 0;
  v10[1] = 0;
  v11 = 0;
  v12 = 0;
  v13 = 0;
  for ( i = 0; v2 < v4; ++v2 )
  {
    Packet_ID_A9_read_structC2(v5, a2);
    QuestPool_AllocEntry224((_DWORD *)this + 8, v5);
  }
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);

//----- (65818BE0) --------------------------------------------------------
char *__thiscall Vector96_PushBack(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 96;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 96 >= v4 )
    return (char *)sub_65818A60(this, &a2, (int)v5, (int)a2);
  result = sub_65818460(a2, v5, 1, a2);
  *(this + 2) = v5 + 96;
  return result;
}

//----- (65818DE0) --------------------------------------------------------
unsigned __int8 __thiscall Packet_ID_A9_read_structD_sub_F8(char *this, unsigned int *a2)
{
  unsigned __int8 result; // al
  char **v4; // edi
  unsigned __int8 v5; // [esp+Eh] [ebp-E6h]
  unsigned __int8 v6; // [esp+Fh] [ebp-E5h] BYREF
  char v7[4]; // [esp+10h] [ebp-E4h] BYREF
  int v8; // [esp+14h] [ebp-E0h]
  char v9; // [esp+18h] [ebp-DCh]
  char v10; // [esp+2Ch] [ebp-C8h]
  char v11; // [esp+2Dh] [ebp-C7h]
  int v12; // [esp+30h] [ebp-C4h] BYREF
  int v13; // [esp+34h] [ebp-C0h]
  char v14; // [esp+38h] [ebp-BCh]
  int v15; // [esp+4Ch] [ebp-A8h]
  char v16; // [esp+50h] [ebp-A4h]
  char v17; // [esp+70h] [ebp-84h]

  RakNet::BitStream::ReadCompressed_T_ushort(a2, this);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 2);
  v6 = 0;
  RakNet::BitStream::ReadCompressed(a2, (char *)&v6, 8u, 1);
  result = unknown_libname_664(&v12);
  v7[0] = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v5 = 0;
  if ( v6 )
  {
    v4 = (char **)(this + 4);
    do
    {
      v7[0] = 0;
      v8 = 0;
      v9 = 0;
      v10 = 0;
      v11 = 0;
      v12 = 0;
      v13 = 0;
      v14 = 0;
      v15 = 0;
      v16 = 0;
      v17 = 0;
      Packet_ID_A9_read_structC2(v7, a2);
      Vector224_PushBack(v4, v7);
      result = v5 + 1;
      v5 = result;
    }
    while ( result < v6 );
  }
  return result;
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);

//----- (65818F50) --------------------------------------------------------
char __thiscall Packet_ID_A9_read_structD_sub_10C(char **this, unsigned int *a2)
{
  unsigned int *v2; // edi
  unsigned int v4; // esi
  unsigned int v5; // eax
  int v6; // edi
  unsigned int v7; // eax
  _DWORD *v8; // ecx
  unsigned int v10; // [esp+10h] [ebp-6Ch]
  unsigned int v11; // [esp+14h] [ebp-68h] BYREF
  int v12; // [esp+18h] [ebp-64h] BYREF
  char v13; // [esp+1Ch] [ebp-60h]
  int v14; // [esp+30h] [ebp-4Ch]
  char v15; // [esp+34h] [ebp-48h]
  char v16; // [esp+54h] [ebp-28h]
  int v17; // [esp+58h] [ebp-24h]
  int v18; // [esp+5Ch] [ebp-20h]
  int v19; // [esp+60h] [ebp-1Ch]
  int v20; // [esp+64h] [ebp-18h]
  int v21; // [esp+68h] [ebp-14h]
  int v22; // [esp+6Ch] [ebp-10h]
  int v23; // [esp+70h] [ebp-Ch]
  char v24; // [esp+74h] [ebp-8h]

  v2 = a2;
  v4 = 0;
  v11 = 0;
  LOBYTE(v5) = RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v11);
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  v20 = 0;
  v21 = 0;
  v22 = 0;
  v23 = 0;
  v24 = 0;
  v10 = 0;
  if ( v11 )
  {
    while ( 1 )
    {
      Packet_ID_A9_read_structC3((char *)&v12, v2);
      v6 = (int)*(this + 1);
      v7 = (int)&(*(this + 2))[-v6] / 96;
      if ( !v7 )
        goto LABEL_10;
      v8 = *(this + 1);
      while ( *v8 != v12 )
      {
        ++v4;
        v8 += 24;
        if ( v4 >= v7 )
          goto LABEL_10;
      }
      if ( !(v6 + 96 * v4) )
LABEL_10:
        Vector96_PushBack(this, (char *)&v12);
      v5 = v10 + 1;
      v10 = v5;
      if ( v5 >= v11 )
        break;
      v2 = a2;
      v4 = 0;
    }
  }
  return v5;
}

//----- (65819030) --------------------------------------------------------
void __thiscall Packet_ID_A9_read_structD(bool *this, unsigned int *a2)
{
  unsigned int v3; // eax

  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)this + 4);
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)this + 8);
  RakNet::BitStream::ReadCompressed(a2, (char *)this + 180, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, (char *)this + 181, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, (char *)this + 182, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, (char *)this + 12, 8u, 1);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    (char *)this + 13,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    (char *)this + 41,
    2048,
    a2);
  sub_65946F10();
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)this + 176);
  Packet_ID_A9_read_structD_sub_10C((char **)this + 67, a2);
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *this = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  if ( *this )
    Packet_ID_A9_read_structD_sub_B8((char *)this + 184, a2);
  else
    Packet_ID_A9_read_structD_sub_F8((char *)this + 248, a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65819210) --------------------------------------------------------
bool __thiscall Packet_ID_A9_read_structA(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed(a2, this + 28, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 4);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 8,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 29,
    2048,
    a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 57,
    2048,
    a2);
  Read_Map_U32_String((char **)this + 47, a2);
  RakNet::BitStream::ReadCompressed(a2, this + 204, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 205, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 206, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 207, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 208);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 212);
  RakNet::BitStream::ReadCompressed(a2, this + 214, 8u, 1);
  Packet_ID_FACTION_read_block_0D50((char **)this + 54, a2);
  return RakNet::BitStream::ReadCompressed_T_uint(a2, this + 232);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (658195E0) --------------------------------------------------------
int __cdecl sub_658195E0(int a1, int a2, int a3)
{
  int v3; // esi
  int result; // eax
  _DWORD v6[7]; // [esp+0h] [ebp-28h] BYREF
  int v7; // [esp+24h] [ebp-4h]

  v6[6] = v6;
  v3 = a1;
  v6[5] = a1;
  v7 = 0;
  while ( a2 )
  {
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
      result = sub_65818C70(v3, a3);
    --a2;
    v3 += 236;
    LOBYTE(v7) = 0;
  }
  return result;
}
// 65818C70: using guessed type int __thiscall sub_65818C70(_DWORD, _DWORD);

//----- (65819A00) --------------------------------------------------------
int __cdecl sub_65819A00(int a1, int a2, int a3)
{
  int v3; // esi
  int result; // eax
  _DWORD v6[7]; // [esp+0h] [ebp-28h] BYREF
  int v7; // [esp+24h] [ebp-4h]

  v6[6] = v6;
  v3 = a1;
  v6[5] = a1;
  v7 = 0;
  while ( a2 )
  {
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
      result = sub_658194C0(v3, a3);
    --a2;
    v3 += 284;
    LOBYTE(v7) = 0;
  }
  return result;
}
// 658194C0: using guessed type int __thiscall sub_658194C0(_DWORD, _DWORD);

//----- (65819F70) --------------------------------------------------------
_DWORD *__thiscall sub_65819F70(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 236 )
    v6 = (a3 - v5) / 236;
  else
    v6 = 0;
  sub_65819BE0(this, a3, 1, a4);
  *a2 = *(this + 1) + 236 * v6;
  return a2;
}
// 65819BE0: using guessed type int __thiscall sub_65819BE0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6581A010) --------------------------------------------------------
_DWORD *__thiscall Vector236_PushBack(int *this, int a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  int v5; // edi
  _DWORD *result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 236;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - v3) / 236 >= v4 )
    return sub_65819F70(this, &a2, v5, a2);
  result = (_DWORD *)sub_658195E0(v5, 1, a2);
  *(this + 2) = v5 + 236;
  return result;
}

//----- (6581A5E0) --------------------------------------------------------
void __thiscall Packet_ID_A9_read_structA_list(int *this, unsigned int *a2)
{
  unsigned int v3; // esi
  unsigned int v4; // [esp+10h] [ebp-100h] BYREF
  char *v5[48]; // [esp+14h] [ebp-FCh] BYREF
  void *v6; // [esp+D4h] [ebp-3Ch]
  void *v7; // [esp+F0h] [ebp-20h]
  int v8; // [esp+F4h] [ebp-1Ch]
  int v9; // [esp+F8h] [ebp-18h]
  int v10; // [esp+10Ch] [ebp-4h]

  v3 = 0;
  v4 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v4);
  QuestEntry_Clear(v5);
  v10 = 0;
  if ( v4 )
  {
    do
    {
      Packet_ID_A9_read_structA((char *)v5, a2);
      Vector236_PushBack(this, (int)v5);
      ++v3;
    }
    while ( v3 < v4 );
  }
  if ( v7 )
    operator delete(v7);
  v7 = 0;
  v8 = 0;
  v9 = 0;
  if ( v6 )
    operator delete(v6);
}

//----- (6581A6B0) --------------------------------------------------------
_DWORD *__thiscall sub_6581A6B0(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 284 )
    v6 = (a3 - v5) / 284;
  else
    v6 = 0;
  sub_6581A0A0(this, a3, 1, a4);
  *a2 = *(this + 1) + 284 * v6;
  return a2;
}
// 6581A0A0: using guessed type int __thiscall sub_6581A0A0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6581AB80) --------------------------------------------------------
_DWORD *__thiscall Vector284_PushBack(int *this, int a2)
{
  int v3; // eax
  unsigned int v4; // esi
  int v5; // ebx
  _DWORD *result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 284;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - *(this + 1)) / 284 >= v4 )
    return sub_6581A6B0(this, &a2, v5, a2);
  result = (_DWORD *)sub_65819A00(v5, 1, a2);
  *(this + 2) = v5 + 284;
  return result;
}

//----- (6581AC50) --------------------------------------------------------
void __thiscall Packet_ID_A9_read_structD_list(char *this, unsigned int *a2)
{
  unsigned int v3; // ebx
  unsigned int v4; // [esp+10h] [ebp-130h] BYREF
  char v5[4]; // [esp+14h] [ebp-12Ch] BYREF
  int v6; // [esp+18h] [ebp-128h]
  int v7; // [esp+13Ch] [ebp-4h]

  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 2);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this);
  v3 = 0;
  v4 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v4);
  QuestEntry_Init((int)v5);
  v7 = 0;
  if ( v4 )
  {
    do
    {
      QuestEntry_Reset(v5);
      Packet_ID_A9_read_structD((bool *)v5, a2);
      if ( !QuestVector_FindById(this, v6) )
        Vector284_PushBack((int *)this + 1, (int)v5);
      ++v3;
    }
    while ( v3 < v4 );
  }
  QuestEntry_FreeBuffers((int)v5);
}

//----- (6581AD30) --------------------------------------------------------
char __thiscall Packet_ID_A9_read(int this, int a2)
{
  char result; // al
  unsigned int *v4; // edi
  char v5; // al
  int v6; // edx

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    v4 = (unsigned int *)(this + 12);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 2:
        Packet_ID_A9_read_structA((char *)(this + 1084), (unsigned int *)(this + 12));
        Packet_ID_A9_read_structB((char *)(this + 1320), (unsigned int *)(this + 12));
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1420));
        goto LABEL_4;
      case 3:
        Packet_ID_A9_read_structB((char *)(this + 1320), (unsigned int *)(this + 12));
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1420));
LABEL_4:
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1424));
        return 1;
      case 4:
        Packet_ID_A9_read_structA((char *)(this + 1084), (unsigned int *)(this + 12));
        return 1;
      case 6:
      case 9:
        v5 = VariableSizedPacket::DecodeString((char *)this, this + 1388);
        goto LABEL_19;
      case 7:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        v6 = this + 1388;
        goto LABEL_18;
      case 8:
      case 0xF:
      case 0x10:
        goto LABEL_8;
      case 0xA:
        if ( !(unsigned __int8)VariableSizedPacket::DecodeString((char *)this, this + 1388) )
          goto LABEL_20;
LABEL_8:
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1080));
        return 1;
      case 0xB:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        Packet_ID_PLAYERFILE_read_structA((char *)(this + 1428), (unsigned int *)(this + 12));
        return 1;
      case 0xD:
        Packet_ID_A9_read_structC((char *)(this + 1748), (unsigned int *)(this + 12));
        return 1;
      case 0xE:
        Packet_ID_A9_read_structA_list((int *)(this + 1752), (unsigned int *)(this + 12));
        return 1;
      case 0x11:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        goto LABEL_15;
      case 0x12:
        Packet_ID_A9_read_structD((bool *)(this + 1768), (unsigned int *)(this + 12));
        return 1;
      case 0x13:
        v6 = this + 2054;
LABEL_18:
        v5 = VariableSizedPacket::DecodeString((char *)this, v6);
LABEL_19:
        if ( v5 )
          goto LABEL_23;
LABEL_20:
        result = 0;
        break;
      case 0x14:
LABEL_15:
        RakNet::BitStream::ReadCompressed_T_ushort(v4, (char *)(this + 2052));
        return 1;
      case 0x15:
        Packet_ID_A9_read_structD_list((char *)(this + 2184), (unsigned int *)(this + 12));
        VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 2182));
        return 1;
      case 0x16:
      case 0x17:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 2182));
        goto LABEL_23;
      default:
LABEL_23:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (6581B060) --------------------------------------------------------
void __thiscall CraftWindow_OnClickConfirm(_DWORD *this)
{
  int v1; // eax

  if ( *((_BYTE *)this + 6241) )
  {
    v1 = *(this + 1510);
    if ( v1 )
    {
      if ( *(_DWORD *)(v1 + 4) == 51 )
        (*(void (__thiscall **)(_DWORD *, int, _DWORD, _DWORD))(*this + 4))(this, 5, 0, 0);
    }
  }
}

//----- (6581B090) --------------------------------------------------------
int __thiscall CraftWindow_OnClickCancel(_BYTE *this)
{
  int result; // eax

  if ( *(this + 6241) )
    return (*(int (__thiscall **)(_BYTE *, int, _DWORD, _DWORD))(*(_DWORD *)this + 4))(this, 6, 0, 0);
  return result;
}

//----- (6581B390) --------------------------------------------------------
char __thiscall sub_6581B390(_DWORD *this, int a2)
{
  int v2; // esi
  unsigned int v3; // eax
  _DWORD *i; // ecx

  v2 = 0;
  v3 = (*(this + 2) - *(this + 1)) / 36;
  if ( !v3 )
    return 0;
  for ( i = (_DWORD *)*(this + 1); *i != a2; i += 9 )
  {
    if ( ++v2 >= v3 )
      return 0;
  }
  return 1;
}

//----- (6581BC90) --------------------------------------------------------
void __thiscall sub_6581BC90(int this)
{
  unsigned __int16 v2; // si
  int v3; // esi
  int *v4; // esi
  int v5; // edi
  _BYTE *v6; // eax
  char *v7; // eax
  int v8; // edx
  int v9; // eax
  int v10; // ecx
  unsigned int *v11; // edi
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  int v14; // [esp+24h] [ebp-38h]
  unsigned int v15; // [esp+28h] [ebp-34h]
  int v16; // [esp+2Ch] [ebp-30h]
  _BYTE v17[20]; // [esp+30h] [ebp-2Ch] BYREF
  int v18; // [esp+44h] [ebp-18h]
  int v19; // [esp+58h] [ebp-4h]

  sub_6576D9C0(*(_DWORD **)(this + 6740));
  v2 = (*(_DWORD *)(this + 6672) - *(_DWORD *)(this + 6668)) / 320;
  std::string::string(v17);
  v19 = 0;
  if ( v2 )
  {
    v15 = 0;
    v16 = 0;
    v14 = v2;
    do
    {
      v3 = *(_DWORD *)(this + 6668);
      if ( v15 < (*(_DWORD *)(this + 6672) - v3) / 320 )
      {
        v4 = (int *)(v16 + v3);
        if ( v4 )
        {
          v5 = *v4;
          if ( v5 == SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) )
          {
            std::string::operator=(v17, "00B2FF00");
          }
          else if ( *v4 == *(_DWORD *)(this + 6452) )
          {
            std::string::operator=(v17, "FFED0000");
          }
          else
          {
            std::string::clear(v17);
          }
          v6 = v18 ? (_BYTE *)std::string::c_str(v17) : 0;
          v7 = UiWidget_CreateWithParams(v4, 1.0, 212, 1, 0, v6);
          if ( v7 )
          {
            sub_6576D0F0(*(_DWORD **)(this + 6740), *v4, 0, 0, 38, (int)v7);
            v8 = *(_DWORD *)(*(_DWORD *)(this + 6740) + 2236);
            if ( v8 )
            {
              v9 = 0;
              while ( 1 )
              {
                v10 = *(_DWORD *)(v8 + 4 * v9);
                if ( v10 )
                {
                  if ( *(_DWORD *)(v10 + 4) == 24 )
                    break;
                }
                if ( (unsigned int)++v9 >= 0xA )
                  goto LABEL_24;
              }
              v11 = *(unsigned int **)(v8 + 4 * v9);
              v12 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9028);
              LinkedList_AddNode(v11, v12, 9, *v4, 0);
              if ( SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) != *v4
                && SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) == *(_DWORD *)(this + 6452) )
              {
                v13 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9018);
                LinkedList_AddNode(v11, v13, 34, *v4, 0);
              }
            }
          }
        }
      }
LABEL_24:
      v16 += 320;
      ++v15;
      --v14;
    }
    while ( v14 );
  }
  sub_6576D1D0(*(_DWORD **)(this + 6740));
  ItemList_Sort(*(char **)(this + 6740), 0, 1);
  v19 = -1;
  std::string::~string(v17);
}
// 6581BDFD: conditional instruction was optimized away because ecx.4!=0
// 659A8254: using guessed type int __thiscall std::string::clear(_DWORD);
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (6581DFB0) --------------------------------------------------------
void __thiscall sub_6581DFB0(int this, _DWORD *a2, int a3, int a4, int a5)
{
  int v6; // eax
  char *v7; // eax
  int v8; // eax
  char *v9; // eax
  unsigned __int8 v10; // cl
  int v11; // eax
  char *v12; // eax
  unsigned __int16 v13; // ax
  int v14; // eax
  char *v15; // eax
  unsigned int v16; // eax
  int v17; // eax
  char *v18; // eax
  int v19; // eax
  int v20; // eax
  int v21; // eax
  int v22; // eax
  int v23; // eax
  int v24; // eax
  _DWORD *v25; // eax
  const char *v26; // eax
  char *v27; // eax
  int v28; // ecx
  unsigned int v29; // eax
  int v30; // eax
  char *v31; // eax
  int Dword_this; // eax
  _DWORD *v33; // eax
  _DWORD *v34; // eax
  _DWORD *v35; // eax
  int v36; // edi
  _DWORD *v37; // esi
  _BYTE v38[28]; // [esp-24h] [ebp-A8h] BYREF
  int v39; // [esp-8h] [ebp-8Ch]
  char *v40; // [esp-4h] [ebp-88h]
  _BYTE v41[28]; // [esp+10h] [ebp-74h] BYREF
  int v42; // [esp+2Ch] [ebp-58h] BYREF
  _BYTE *v43; // [esp+30h] [ebp-54h]
  _BYTE *v44; // [esp+34h] [ebp-50h]
  char v45[28]; // [esp+38h] [ebp-4Ch] BYREF
  char Buffer[32]; // [esp+54h] [ebp-30h] BYREF
  int v47; // [esp+80h] [ebp-4h]

  sub_65799AA0(this + 6380, a3);
  if ( *(_DWORD *)(this + 6448) || *a2 )
  {
    sub_65816930(a2);
    *(_DWORD *)(this + 6784) = a5;
    *(_DWORD *)(this + 6780) = a4;
    sub_6581C030(this);
    sub_6581C1B0(this);
    sub_6581C2A0(this);
    sub_6581BF80(this);
    sub_6581B980(this);
    sub_6581BC90(this);
    v40 = 0;
    v39 = 0;
    v44 = v38;
    String_AssignFromPtr(v38, this + 6477);
    v6 = FormatString((int)v41, (int)&unk_659C45C8);
    v47 = 0;
    v7 = (char *)std::string::c_str(v6);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6684), v7, v39, v40);
    v47 = -1;
    std::string::~string(v41);
    v40 = 0;
    v39 = 0;
    v44 = v38;
    String_AssignFromPtr(v38, this + 6505);
    v8 = FormatString((int)v41, (int)&unk_659C45C8);
    v47 = 1;
    v9 = (char *)std::string::c_str(v8);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6688), v9, v39, v40);
    v47 = -1;
    std::string::~string(v41);
    v10 = *(_BYTE *)(this + 6662);
    v40 = 0;
    v39 = 0;
    LOBYTE(v44) = v10;
    v43 = v38;
    String_FromU8(v38, v10);
    v11 = FormatString((int)v41, (int)&unk_659C45C8);
    v47 = 2;
    v12 = (char *)std::string::c_str(v11);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6728), v12, v39, v40);
    v47 = -1;
    std::string::~string(v41);
    v13 = *(_WORD *)(this + 6660);
    v40 = 0;
    v39 = 0;
    v43 = v38;
    String_FromU16(v38, v13);
    v14 = FormatString((int)v41, (int)&unk_659C45C8);
    v47 = 3;
    v15 = (char *)std::string::c_str(v14);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6724), v15, v39, v40);
    v47 = -1;
    std::string::~string(v41);
    v16 = *(_DWORD *)(this + 6656);
    v40 = 0;
    v39 = 0;
    v43 = v38;
    String_FromU32(v38, v16);
    v17 = FormatString((int)v41, (int)&unk_659C45C8);
    v47 = 4;
    v18 = (char *)std::string::c_str(v17);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6720), v18, v39, v40);
    v47 = -1;
    std::string::~string(v41);
    v19 = *(_DWORD *)(this + 6752);
    *(_DWORD *)(v19 + 24) = 0;
    *(_DWORD *)(v19 + 200) = 0;
    v20 = *(_DWORD *)(this + 6756);
    *(_DWORD *)(v20 + 24) = 0;
    *(_DWORD *)(v20 + 200) = 0;
    v21 = *(_DWORD *)(this + 6760);
    *(_DWORD *)(v21 + 24) = 0;
    *(_DWORD *)(v21 + 200) = 0;
    v22 = *(_DWORD *)(this + 6764);
    *(_DWORD *)(v22 + 24) = 0;
    *(_DWORD *)(v22 + 200) = 0;
    v23 = *(_DWORD *)(this + 6768);
    *(_DWORD *)(v23 + 24) = 0;
    *(_DWORD *)(v23 + 200) = 0;
    if ( *(_DWORD *)(this + 6448) )
    {
      v26 = "00B2FF00";
      if ( *(_BYTE *)(this + 6655) != 2 )
        v26 = "00FF0000";
      std::string::string(v45, v26);
      v47 = 5;
      v27 = (char *)std::string::c_str(v45);
      v28 = *(_DWORD *)(this + 6656);
      v40 = v27;
      v29 = v28 * *(unsigned __int8 *)(this + 6662);
      v39 = 0;
      v43 = v38;
      String_FromU32(v38, v29);
      v30 = FormatString((int)v41, (int)&unk_659C45C8);
      LOBYTE(v47) = 6;
      v31 = (char *)std::string::c_str(v30);
      UiText_SetValueIfChanged(*(_DWORD *)(this + 6732), v31, v39, v40);
      LOBYTE(v47) = 5;
      std::string::~string(v41);
      *(_DWORD *)(*(_DWORD *)(this + 6684) + 380) = 0;
      *(_DWORD *)(*(_DWORD *)(this + 6688) + 380) = 0;
      *(_DWORD *)(*(_DWORD *)(this + 6704) + 32) = 0;
      *(_DWORD *)(*(_DWORD *)(this + 6708) + 32) = 0;
      *(_DWORD *)(*(_DWORD *)(this + 6712) + 32) = 0;
      *(_DWORD *)(*(_DWORD *)(this + 6716) + 32) = 0;
      *(_DWORD *)(*(_DWORD *)(this + 6720) + 380) = 0;
      *(_DWORD *)(*(_DWORD *)(this + 6724) + 380) = 0;
      *(_DWORD *)(*(_DWORD *)(this + 6728) + 380) = 0;
      *(_DWORD *)(*(_DWORD *)(this + 6696) + 380) = 0;
      *(_DWORD *)(*(_DWORD *)(this + 6700) + 32) = 0;
      v44 = *(_BYTE **)(this + 6452);
      Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
      if ( v44 == (_BYTE *)Dword_this )
      {
        v33 = *(_DWORD **)(this + 6760);
        v33[6] = 1;
        v33[50] = 1;
        v33[8] = 1;
        *(_DWORD *)(*(_DWORD *)(this + 6744) + 380) = 1;
        *(_DWORD *)(*(_DWORD *)(this + 6748) + 32) = 1;
      }
      else
      {
        v34 = *(_DWORD **)(this + 6756);
        v34[6] = 1;
        v34[50] = 1;
        v34[8] = 1;
        *(_DWORD *)(*(_DWORD *)(this + 6744) + 380) = 0;
        *(_DWORD *)(*(_DWORD *)(this + 6748) + 32) = 0;
      }
      if ( *(_BYTE *)(this + 6476) )
      {
        if ( *(_BYTE *)(this + 6476) == 1 )
        {
          unknown_libname_664(&v42);
          v42 = *(_DWORD *)(this + 6680);
          sub_65947720(&v42, *(unsigned __int16 *)(this + 6660));
          sub_65948390(Buffer, &v42);
          UiText_SetValueIfChanged(*(_DWORD *)(this + 6736), Buffer, 0, 0);
          v35 = *(_DWORD **)(this + 6764);
          v35[6] = 1;
          v35[50] = 1;
          v35[8] = 1;
          *(_DWORD *)(*(_DWORD *)(this + 6744) + 380) = 0;
          *(_DWORD *)(*(_DWORD *)(this + 6748) + 32) = 0;
        }
      }
      else
      {
        v36 = *(_DWORD *)(this + 6452);
        if ( v36 == SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) )
        {
          v37 = *(_DWORD **)(this + 6768);
          v37[6] = 1;
          v37[50] = 1;
          v37[8] = 1;
        }
      }
      v47 = -1;
      std::string::~string(v45);
    }
    else
    {
      v24 = *(_DWORD *)(this + 6684);
      *(_DWORD *)(this + 6656) = 0;
      *(_BYTE *)(this + 6662) = -6;
      *(_DWORD *)(v24 + 380) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 6688) + 380) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 6704) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 6708) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 6712) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 6716) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 6720) + 380) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 6724) + 380) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 6728) + 380) = 1;
      v25 = *(_DWORD **)(this + 6752);
      v25[6] = 1;
      v25[50] = 1;
      v25[8] = 1;
      *(_DWORD *)(*(_DWORD *)(this + 6748) + 32) = 0;
      *(_DWORD *)(*(_DWORD *)(this + 6696) + 380) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 6700) + 32) = 1;
    }
  }
  else
  {
    sub_6581C030(this);
    sub_6581C1B0(this);
    sub_6581C2A0(this);
    sub_6581BF80(this);
    sub_6581B980(this);
    sub_6581BC90(this);
  }
}
// 65799AA0: using guessed type int __thiscall sub_65799AA0(_DWORD, _DWORD);
// 65816930: using guessed type int __stdcall sub_65816930(_DWORD);
// 6581B980: using guessed type int __thiscall sub_6581B980(_DWORD);
// 6581BF80: using guessed type int __thiscall sub_6581BF80(_DWORD);
// 6581C030: using guessed type int __thiscall sub_6581C030(_DWORD);
// 6581C1B0: using guessed type int __thiscall sub_6581C1B0(_DWORD);
// 6581C2A0: using guessed type int __thiscall sub_6581C2A0(_DWORD);
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (6581E620) --------------------------------------------------------
void __thiscall CraftWindow_StartCrafting(int this)
{
  int v2; // eax
  char **v3; // eax
  int v4; // [esp-8h] [ebp-108h]
  int v5; // [esp-4h] [ebp-104h]
  char *v6[62]; // [esp+8h] [ebp-F8h] BYREF

  if ( *(_BYTE *)(this + 6241) )
  {
    v2 = *(_DWORD *)(this + 6040);
    if ( v2 )
    {
      if ( *(_DWORD *)(v2 + 4) == 51 )
      {
        v3 = QuestEntry_Clear(v6);
        v5 = *(_DWORD *)(this + 6784);
        v4 = *(_DWORD *)(this + 6780);
        v6[61] = 0;
        sub_6581DFB0(this, v3, this + 6380, v4, v5);
        sub_65815EF0((int)v6);
      }
    }
  }
}

//----- (6581E6B0) --------------------------------------------------------
void __thiscall CraftWindow_BeginProduction(int this)
{
  int v2; // eax
  int v3; // eax
  int v4; // [esp-4h] [ebp-Ch]
  int v5; // [esp+4h] [ebp-4h] BYREF

  if ( *(_BYTE *)(this + 6241) )
  {
    v2 = *(_DWORD *)(this + 6040);
    if ( v2 )
    {
      if ( *(_DWORD *)(v2 + 4) == 51 )
      {
        *(_BYTE *)(this + 6476) = 1;
        unknown_libname_664(&v5);
        SharedMem_ReadWorldPosition(&v5);
        v3 = *(_DWORD *)(this + 6780);
        v4 = *(_DWORD *)(this + 6784);
        *(_DWORD *)(this + 6680) = v5;
        sub_6581DFB0(this, (_DWORD *)(this + 6448), this + 6380, v3, v4);
      }
    }
  }
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 65ABF748: using guessed type int dword_65ABF748;

//----- (6581E720) --------------------------------------------------------
void __thiscall CraftWindow_OnRecipeSelect(int this, int a2)
{
  int v3; // eax

  if ( *(_BYTE *)(this + 6241) )
  {
    v3 = *(_DWORD *)(this + 6040);
    if ( v3 )
    {
      if ( *(_DWORD *)(v3 + 4) == 51 )
      {
        if ( a2 == SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) )
        {
          CraftWindow_StartCrafting(this);
        }
        else
        {
          Vector320_FindAndRemoveById((char **)(this + 6664), a2);
          sub_6581BC90(this);
        }
      }
    }
  }
}

//----- (65821760) --------------------------------------------------------
char __thiscall SetByte6408(_BYTE *this, char a2)
{
  *(this + 6408) = a2;
  return a2;
}

//----- (65822890) --------------------------------------------------------
LONG sub_65822890()
{
  SharedMem_WriteU8_std(0x9Cu, 1u);
  return SharedMem_WriteU16_std(0x9Du, 0);
}

//----- (65822920) --------------------------------------------------------
LONG __thiscall SharedMem_WriteWorldInst_0x1EEC2(void *this, unsigned __int8 a2)
{
  return SharedMem_WriteDword_this(this, 0x1EEC2u, a2);
}

//----- (65822FF0) --------------------------------------------------------
void __thiscall sub_65822FF0(int this)
{
  unsigned __int8 Dword_this; // al
  int v3; // edi
  char *v4; // eax
  int v5; // edi
  char *v6; // eax

  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  Dword_this = SharedMem_ReadDword_this(dword_65ABF73C, 1u);
  *(_BYTE *)(this + 6397) = Dword_this;
  *(_BYTE *)(this + 6396) = 0;
  v3 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, Dword_this + 3100);
  if ( v3 )
    v4 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
  else
    v4 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6368), v4, 0, 0);
  if ( v3 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v3);
  v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
         g_pILTClient,
         *(unsigned __int8 *)(this + 6397) + 3200);
  if ( v5 )
    v6 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
  else
    v6 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6372), v6, 0, 0);
  if ( v5 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
  JUMPOUT(0x65822C20);
}
// 658230D3: control flows out of bounds to 65822C20
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65823100) --------------------------------------------------------
int *__thiscall Sub6Entry_Reset(_DWORD *this)
{
  int *result; // eax
  int v3; // edx
  int v4; // [esp+8h] [ebp-4h] BYREF

  *(_BYTE *)this = -1;
  *(this + 1) = dword_65ABC9BC;
  *((_WORD *)this + 4) = word_65ABC9C0;
  *((_WORD *)this + 6) = 0;
  result = PacketArray88_EraseRange(this + 5, &v4, *(this + 6), *(this + 7));
  *((_BYTE *)this + 16) = 0;
  *((_BYTE *)this + 36) = 0;
  v3 = *(this + 11);
  if ( v3 != *(this + 12) )
  {
    result = (int *)*(this + 12);
    *(this + 12) = v3;
  }
  *(this + 14) = 0;
  return result;
}
// 65823100: could not find valid save-restore pair for edi
// 65ABC9BC: using guessed type int dword_65ABC9BC;
// 65ABC9C0: using guessed type __int16 word_65ABC9C0;

//----- (658231B0) --------------------------------------------------------
int __thiscall Sub6Entry_Init(int this)
{
  int v2; // ecx

  SystemAddress_SetUnassigned((_WORD *)(this + 4));
  Packet_ID_FACTION_listB_entry_init((int *)(this + 16));
  *(_DWORD *)(this + 44) = 0;
  *(_DWORD *)(this + 48) = 0;
  *(_DWORD *)(this + 52) = 0;
  *(_BYTE *)(this + 36) = 0;
  v2 = *(_DWORD *)(this + 44);
  if ( v2 != *(_DWORD *)(this + 48) )
    *(_DWORD *)(this + 48) = v2;
  *(_DWORD *)(this + 56) = 0;
  Sub6Entry_Reset((_DWORD *)this);
  return this;
}

//----- (65825E90) --------------------------------------------------------
char __thiscall Packet_ID_B5_read_extra_list_entry(char *this, unsigned int *a2)
{
  unsigned int v3; // eax
  unsigned int v4; // eax

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *(this + 4) = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  v4 = a2[2];
  if ( v4 + 1 <= *a2 )
  {
    LOBYTE(v4) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + a2[3])) != 0;
    *(this + 5) = v4;
    ++a2[2];
  }
  return v4;
}

//----- (658261D0) --------------------------------------------------------
char __thiscall Packet_ID_B5_read_extra_list(char **this, unsigned int *a2)
{
  unsigned int v3; // eax
  int v4; // ecx
  unsigned int v5; // eax
  char *v6; // edi
  int v8; // [esp+8h] [ebp-14h] BYREF
  char v9; // [esp+Ch] [ebp-10h]
  char v10; // [esp+Dh] [ebp-Fh]
  int v11; // [esp+10h] [ebp-Ch]
  unsigned int v12; // [esp+14h] [ebp-8h]
  unsigned int v13; // [esp+18h] [ebp-4h] BYREF

  v13 = 0;
  LOBYTE(v3) = RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v13);
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v12 = 0;
  if ( v13 )
  {
    do
    {
      Packet_ID_B5_read_extra_list_entry((char *)&v8, a2);
      v4 = (int)*(this + 1);
      if ( v4 )
        v5 = (int)&(*(this + 3))[-v4] >> 3;
      else
        v5 = 0;
      v6 = *(this + 2);
      if ( (int)&v6[-v4] >> 3 >= v5 )
      {
        PairVector_InsertRange((int)this, v6, 1u, &v8);
      }
      else
      {
        LOBYTE(v11) = 0;
        Array_FillWithValue(v6, 1, &v8);
        *(this + 2) = v6 + 8;
      }
      v3 = v12 + 1;
      v12 = v3;
    }
    while ( v3 < v13 );
  }
  return v3;
}

//----- (65826460) --------------------------------------------------------
char *__thiscall sub_65826460(char *this, int a2)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  *(this + 4) = *(_BYTE *)(a2 + 4);
  *((_DWORD *)this + 2) = *(_DWORD *)(a2 + 8);
  *((_WORD *)this + 6) = *(_WORD *)(a2 + 12);
  *((_DWORD *)this + 4) = *(_DWORD *)(a2 + 16);
  *((_DWORD *)this + 5) = *(_DWORD *)(a2 + 20);
  *((_DWORD *)this + 6) = *(_DWORD *)(a2 + 24);
  *((_DWORD *)this + 7) = *(_DWORD *)(a2 + 28);
  qmemcpy(this + 32, (const void *)(a2 + 32), 0x33u);
  *((_WORD *)this + 42) = *(_WORD *)(a2 + 84);
  *(this + 86) = *(_BYTE *)(a2 + 86);
  qmemcpy(this + 87, (const void *)(a2 + 87), 0x43u);
  *((_DWORD *)this + 39) = *(_DWORD *)(a2 + 156);
  *((_DWORD *)this + 40) = *(_DWORD *)(a2 + 160);
  *((_DWORD *)this + 41) = *(_DWORD *)(a2 + 164);
  *((_DWORD *)this + 42) = *(_DWORD *)(a2 + 168);
  *((_DWORD *)this + 43) = *(_DWORD *)(a2 + 172);
  *((_DWORD *)this + 44) = *(_DWORD *)(a2 + 176);
  sub_65826390(this + 180, a2 + 180);
  return this;
}
// 65826390: using guessed type int __thiscall sub_65826390(_DWORD, _DWORD);

//----- (65826860) --------------------------------------------------------
char *__cdecl sub_65826860(char *a1, int a2, int a3)
{
  char *v3; // esi
  char *result; // eax
  _DWORD v6[7]; // [esp+0h] [ebp-28h] BYREF
  int v7; // [esp+24h] [ebp-4h]

  v6[6] = v6;
  v3 = a1;
  v6[5] = a1;
  v7 = 0;
  while ( a2 )
  {
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
      result = sub_65826460(v3, a3);
    --a2;
    v3 += 196;
    LOBYTE(v7) = 0;
  }
  return result;
}
// 65825A10: using guessed type int __thiscall sub_65825A10(_DWORD, _DWORD);

//----- (65826A40) --------------------------------------------------------
int __thiscall sub_65826A40(int this, int a2, unsigned int a3, int a4)
{
  __int64 v5; // rax
  unsigned int v6; // ebx
  int v7; // ecx
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // ebx
  void *v11; // eax
  int v12; // ecx
  int v13; // eax
  int v14; // ecx
  int v15; // ecx
  unsigned int v16; // edi
  char *v17; // edi
  int v18; // ecx
  int v19; // ebx
  int v20; // eax
  int v22; // [esp-8h] [ebp-104h]
  int v23; // [esp-8h] [ebp-104h]
  int v24; // [esp-8h] [ebp-104h]
  void *v25[5]; // [esp+0h] [ebp-FCh] BYREF
  void *v26; // [esp+14h] [ebp-E8h]
  int v27; // [esp+18h] [ebp-E4h]
  int v28; // [esp+1Ch] [ebp-E0h]
  int v29; // [esp+20h] [ebp-DCh]
  char v30[180]; // [esp+24h] [ebp-D8h] BYREF
  _BYTE v31[16]; // [esp+D8h] [ebp-24h] BYREF
  void **v32; // [esp+ECh] [ebp-10h]
  int v33; // [esp+F8h] [ebp-4h]

  v32 = v25;
  v28 = a4;
  LODWORD(v5) = *(_DWORD *)(this + 4);
  v25[4] = (void *)this;
  if ( (_DWORD)v5 )
  {
    v5 = 1402438301LL * (*(_DWORD *)(this + 12) - (int)v5);
    v6 = (SHIDWORD(v5) >> 6) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v7 = *(_DWORD *)(this + 8);
    v8 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 196;
    if ( 21913098 - v8 < a3 )
      v8 = sub_658242C0();
    v9 = a3 + v8;
    if ( v6 >= v9 )
    {
      if ( (v7 - a2) / 196 >= a3 )
      {
        sub_65826460(v30, v28);
        v19 = *(_DWORD *)(this + 8);
        v33 = 5;
        v29 = v19 - 196 * a3;
        v20 = sub_65826A10(this, v29, v19, v19);
        v24 = v29;
        *(_DWORD *)(this + 8) = v20;
        sub_65826830(a2, v24, v19);
        sub_65826800(a2, a2 + 196 * a3, v30);
      }
      else
      {
        sub_65826460(v30, v28);
        v22 = *(_DWORD *)(this + 8);
        v33 = 2;
        sub_65826A10(this, a2, v22, 196 * a3 + a2);
        v18 = *(_DWORD *)(this + 8);
        LOBYTE(v33) = 3;
        sub_658269A0(this, v18, a3 - (v18 - a2) / 196, v30);
        *(_DWORD *)(this + 8) += 196 * a3;
        v23 = *(_DWORD *)(this + 8) - 196 * a3;
        v33 = 2;
        sub_65826800(a2, v23, v30);
      }
      v33 = -1;
      LODWORD(v5) = sub_657FC1D0(v31);
    }
    else
    {
      if ( 21913098 - (v6 >> 1) >= v6 )
        v10 = (v6 >> 1) + v6;
      else
        v10 = 0;
      if ( v10 < v9 )
        v10 = v9;
      v11 = (void *)sub_658243B0(v10, 0, v25[0]);
      v12 = *(_DWORD *)(this + 4);
      LOBYTE(v29) = 0;
      v26 = v11;
      v27 = (int)v11;
      v33 = 0;
      v27 = sub_65826750(v12, a2, v11, this, v29, v29);
      v13 = sub_658269A0(this, v27, a3, v28);
      v14 = *(_DWORD *)(this + 8);
      LOBYTE(v29) = 0;
      v27 = v13;
      sub_65826750(a2, v14, v13, this, v29, v29);
      v15 = *(_DWORD *)(this + 4);
      v16 = (*(_DWORD *)(this + 8) - v15) / 196 + a3;
      v33 = -1;
      if ( v15 )
      {
        sub_65825A30(v15, *(_DWORD *)(this + 8), this, v29);
        operator delete(*(void **)(this + 4));
      }
      LODWORD(v5) = v26;
      v17 = (char *)v26 + 196 * v16;
      *(_DWORD *)(this + 12) = (char *)v26 + 196 * v10;
      *(_DWORD *)(this + 8) = v17;
      *(_DWORD *)(this + 4) = v5;
    }
  }
  return v5;
}
// 65826C14: variable 'v7' is possibly undefined
// 657FC1D0: using guessed type int __thiscall sub_657FC1D0(_DWORD);
// 658242C0: using guessed type int sub_658242C0(void);
// 658243B0: using guessed type int __stdcall sub_658243B0(_DWORD, _DWORD, _DWORD);
// 65825A30: using guessed type int __cdecl sub_65825A30(_DWORD, _DWORD, _DWORD, _DWORD);
// 65825AC0: using guessed type int __cdecl sub_65825AC0(_DWORD, _DWORD);
// 65826750: using guessed type int __cdecl sub_65826750(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 65826800: using guessed type int __cdecl sub_65826800(_DWORD, _DWORD, _DWORD);
// 65826830: using guessed type int __cdecl sub_65826830(_DWORD, _DWORD, _DWORD);
// 658269A0: using guessed type int __thiscall sub_658269A0(_DWORD, _DWORD, _DWORD, _DWORD);
// 65826A10: using guessed type int __thiscall sub_65826A10(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65826E60) --------------------------------------------------------
_DWORD *__thiscall sub_65826E60(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 196 )
    v6 = (a3 - v5) / 196;
  else
    v6 = 0;
  sub_65826A40((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 196 * v6;
  return a2;
}

//----- (65827250) --------------------------------------------------------
char *__thiscall sub_65827250(char **this, int a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 196;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 196 >= v4 )
    return (char *)sub_65826E60(this, &a2, (int)v5, a2);
  result = sub_65826860(v5, 1, a2);
  *(this + 2) = v5 + 196;
  return result;
}

//----- (658272E0) --------------------------------------------------------
void __thiscall Packet_ID_B5_read_list(char **this, unsigned int *a2)
{
  int v3; // esi
  char *v4; // esi
  char *v5; // edi
  int v6; // [esp+10h] [ebp-D8h] BYREF
  char v7[184]; // [esp+14h] [ebp-D4h] BYREF
  void *v8; // [esp+CCh] [ebp-1Ch]
  char *v9; // [esp+D0h] [ebp-18h]
  int v10; // [esp+E4h] [ebp-4h]

  v3 = 0;
  v6 = 0;
  RakNet::BitStream::ReadCompressed_T_ushort(a2, (char *)&v6);
  SkillSlot_InitDefaults((int)v7);
  v10 = 0;
  if ( (_WORD)v6 )
  {
    do
    {
      Packet_ID_B5_read_entry(v7, a2);
      sub_65827250(this, (int)v7);
      CharSlotEntry_InitDefaults(v7);
      ++v3;
    }
    while ( (unsigned __int16)v3 < (unsigned __int16)v6 );
  }
  v4 = (char *)v8;
  v10 = -1;
  if ( v8 )
  {
    v5 = v9;
    if ( v8 != v9 )
    {
      do
      {
        CharacterSlot_FreeAll((int)v4);
        v4 += 2324;
      }
      while ( v4 != v5 );
      v4 = (char *)v8;
    }
    operator delete(v4);
  }
}

//----- (658273D0) --------------------------------------------------------
char __thiscall Packet_ID_B5_read(int this, int a2)
{
  char result; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 1:
        Packet_ID_B5_read_list((char **)(this + 1280), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 2:
        Packet_ID_B5_read_entry((char *)(this + 1084), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 3:
      case 7:
      case 0xD:
        Packet_ID_B5_read_entry_list((int *)(this + 3620), (unsigned int *)(this + 12));
        goto LABEL_10;
      case 4:
        Packet_ID_B5_read_entry2((char *)(this + 1296), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 6:
      case 8:
      case 9:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        result = 1;
        break;
      case 0xB:
        Packet_ID_B5_read_entry_list((int *)(this + 3620), (unsigned int *)(this + 12));
        Packet_ID_B5_read_extra_list((char **)(this + 3636), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 0xC:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        Read_u8c((unsigned int *)this, (char *)(this + 3652));
        result = 1;
        break;
      default:
LABEL_10:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (65827530) --------------------------------------------------------
void __thiscall sub_65827530(int this, int a2, char *Source)
{
  int v4; // ecx

  if ( a2 )
  {
    *(_DWORD *)(this + 8124) = a2;
    strncpy_s((char *)(this + 8128), 0x40u, Source, 0xFFFFFFFF);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 10736), Source, 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 10744), "NPC target found", 1, "00FF0000");
  }
  else
  {
    v4 = *(_DWORD *)(this + 10736);
    *(_DWORD *)(this + 8124) = 0;
    *(_BYTE *)(this + 8128) = 0;
    UiText_SetValueIfChanged(v4, (char *)byte_659A8B98, 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 10744), "NPC is unknown!", 1, "FF000000");
  }
}

//----- (65827880) --------------------------------------------------------
void __cdecl __noreturn sub_65827880(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65827940) --------------------------------------------------------
void *__cdecl sub_65827940(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 2 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(2 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (65827ED0) --------------------------------------------------------
_WORD *__cdecl sub_65827ED0(_WORD *a1, _WORD *a2, _WORD *a3)
{
  _WORD *result; // eax

  for ( result = a1; result != a2; ++result )
    *result = *a3;
  return result;
}

//----- (65827FD0) --------------------------------------------------------
_DWORD *__thiscall sub_65827FD0(_DWORD *this, _DWORD *a2, unsigned int *a3)
{
  int *v3; // edx
  int *v4; // eax
  int *v5; // ebx
  unsigned int v6; // edi
  unsigned int v7; // esi
  int *v8; // eax

  v3 = (int *)*(this + 1);
  v4 = (int *)v3[1];
  v5 = v3;
  if ( !*((_BYTE *)v4 + 45) )
  {
    v6 = *a3;
    do
    {
      v7 = v4[3];
      if ( v7 >= v6 )
      {
        if ( *((_BYTE *)v3 + 45) && v6 < v7 )
          v3 = v4;
        v5 = v4;
        v4 = (int *)*v4;
      }
      else
      {
        v4 = (int *)v4[2];
      }
    }
    while ( !*((_BYTE *)v4 + 45) );
  }
  if ( *((_BYTE *)v3 + 45) )
    v8 = *(int **)(*(this + 1) + 4);
  else
    v8 = (int *)*v3;
  while ( !*((_BYTE *)v8 + 45) )
  {
    if ( *a3 >= v8[3] )
    {
      v8 = (int *)v8[2];
    }
    else
    {
      v3 = v8;
      v8 = (int *)*v8;
    }
  }
  *a2 = v5;
  a2[1] = v3;
  return a2;
}

//----- (65828060) --------------------------------------------------------
char __thiscall sub_65828060(_BYTE *this, char a2)
{
  sub_65827DA0();
  *(this + 7848) = 0;
  *(this + 7849) = a2;
  return a2;
}
// 65827DA0: using guessed type int sub_65827DA0(void);

//----- (65828120) --------------------------------------------------------
int __cdecl MoveMemory_Words(void *Source, int a2, int a3)
{
  int v3; // eax
  int v4; // esi

  v3 = (a2 - (int)Source) >> 1;
  v4 = a3 - 2 * v3;
  if ( v3 > 0 )
    memmove_s((void *const)(a3 - 2 * v3), 2 * v3, Source, 2 * v3);
  return v4;
}

//----- (65828B70) --------------------------------------------------------
void __cdecl sub_65828B70(int *a1, int *a2, _DWORD *a3)
{
  int *v3; // ecx
  int **v4; // eax
  int *j; // eax
  int *i; // eax

  v3 = a1;
  while ( v3 != a2 )
  {
    ++*a3;
    if ( !*((_BYTE *)v3 + 45) )
    {
      v4 = (int **)v3[2];
      if ( *((_BYTE *)v4 + 45) )
      {
        for ( i = (int *)v3[1]; !*((_BYTE *)i + 45); i = (int *)i[1] )
        {
          if ( v3 != (int *)i[2] )
            break;
          v3 = i;
        }
        v3 = i;
      }
      else
      {
        v3 = (int *)v3[2];
        for ( j = *v4; !*((_BYTE *)j + 45); j = (int *)*j )
          v3 = j;
      }
    }
  }
}

//----- (65828C80) --------------------------------------------------------
int __stdcall CopyMemory_Words(void *Source, int a2, void *Destination)
{
  if ( (a2 - (int)Source) >> 1 )
    memmove_s(Destination, 2 * ((a2 - (int)Source) >> 1), Source, 2 * ((a2 - (int)Source) >> 1));
  return (int)Destination + 2 * ((a2 - (int)Source) >> 1);
}

//----- (658297A0) --------------------------------------------------------
int __thiscall ProductionWindow_RefreshList(_DWORD *this)
{
  int *v2; // esi
  int v3; // eax
  int (__cdecl *v4)(int, int, int); // eax
  int v5; // eax
  const char *v6; // eax
  int (__thiscall ***v7)(_DWORD, int); // ebx
  int v8; // ecx
  BOOL v9; // eax
  int (__thiscall **v10)(_DWORD, int); // edx
  int v11; // eax
  unsigned int v12; // eax
  unsigned int v13; // eax
  int v14; // ebx
  int v15; // eax
  const char *v16; // eax
  int (__thiscall ***v17)(_DWORD, int); // ebx
  int v18; // ecx
  BOOL v19; // eax
  int (__thiscall **v20)(_DWORD, int); // edx
  int v21; // eax
  unsigned __int16 v22; // ax
  unsigned __int8 v23; // al
  int v24; // eax
  int v25; // esi
  const char *v26; // eax
  int (__thiscall ***v27)(_DWORD, int); // esi
  int v28; // eax
  BOOL v29; // ecx
  int v30; // eax
  int (__thiscall **v31)(_DWORD, int); // ecx
  _DWORD *v32; // eax
  int v34; // [esp-8h] [ebp-40h]
  int v35; // [esp+8h] [ebp-30h]
  unsigned int *Simple; // [esp+Ch] [ebp-2Ch]
  int v37; // [esp+10h] [ebp-28h]
  int (__thiscall ***v38)(_DWORD, int); // [esp+14h] [ebp-24h]
  unsigned int v39; // [esp+18h] [ebp-20h]
  int v40; // [esp+1Ch] [ebp-1Ch] BYREF
  const char *v41; // [esp+20h] [ebp-18h]
  char Buffer[16]; // [esp+24h] [ebp-14h] BYREF

  ListBox_ClearItems((int *)*(this + 2676));
  v39 = 0;
  if ( (*(this + 2581) - *(this + 2580)) / 76 )
  {
    v37 = 0;
    do
    {
      v2 = (int *)(v37 + *(this + 2580));
      if ( v2 )
      {
        Simple = (unsigned int *)UiWidget_CreateSimple(0, 0, 0, 0, 0, 0);
        if ( Simple )
        {
          v3 = *v2;
          v40 = -9;
          if ( v3 )
          {
            v34 = v3;
            v4 = *(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64);
            v40 = 3;
            v5 = v4(g_pILTClient, 4332, v34);
            v41 = (const char *)v5;
            if ( v5 )
              v6 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
            else
              v6 = byte_659A8B98;
            v7 = UiWidget_Create(this, 0, (int)v6, 256, 466, 0, 0, 1, (int)&unk_65A5D0E4, 2, 0, 0, 0);
            v38 = v7;
            if ( v41 )
              (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v41);
          }
          else
          {
            v38 = UiWidget_Create(this, 0, (int)byte_659A8B98, 256, 466, 0, 0, 1, (int)&unk_65A5D0E4, 2, 0, 0, 0);
            v7 = v38;
          }
          if ( v7 )
          {
            v8 = v40;
            v9 = v40 <= 0;
            v7[17] = v7[19] + 1;
            v10 = v7[20];
            v7[21] = (int (__thiscall **)(_DWORD, int))4;
            v11 = v9 ? 0 : v8;
            v7[22] = (int (__thiscall **)(_DWORD, int))v11;
            v7[18] = (int (__thiscall **)(_DWORD, int))((char *)v10 + v11);
            v12 = v2[1];
            if ( v12 && v12 < 0x74 )
            {
              v13 = *((unsigned __int8 *)v2 + 8);
              v40 = v8 + 12;
              sub_659480D0(Buffer, v13);
              v14 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v2[1] + 17951);
              if ( v14 )
                v41 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v14);
              else
                v41 = byte_659A8B98;
              v15 = (*(int (__cdecl **)(int, int, const char *, char *, int))(*(_DWORD *)g_pILTClient + 64))(
                      g_pILTClient,
                      1024,
                      v41,
                      Buffer,
                      v2[3]);
              v41 = (const char *)v15;
              if ( v14 )
              {
                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v14);
                v15 = (int)v41;
              }
              if ( v15 )
                v16 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v15);
              else
                v16 = byte_659A8B98;
              v17 = UiWidget_Create(this, 0, (int)v16, 256, 466, 0, 0, 1, (int)&unk_65A5D0E4, 2, 0, 0, 0);
              if ( v41 )
                (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v41);
            }
            else
            {
              v17 = UiWidget_Create(this, 0, (int)byte_659A8B98, 256, 466, 0, 0, 1, (int)&unk_65A5D0E4, 2, 0, 0, 0);
            }
            if ( v17 )
            {
              v18 = v40;
              v19 = v40 <= 0;
              v17[17] = v17[19] + 1;
              v20 = v17[20];
              v17[21] = (int (__thiscall **)(_DWORD, int))4;
              v21 = v19 ? 0 : v18;
              v17[22] = (int (__thiscall **)(_DWORD, int))v21;
              v17[18] = (int (__thiscall **)(_DWORD, int))((char *)v20 + v21);
              v22 = *((_WORD *)v2 + 14);
              if ( v22 && v22 < 0xBC1u )
              {
                v40 = v18 + 12;
                v23 = sub_65933EC0(g_ItemTemplateById, v22);
                sub_659480D0(Buffer, v23);
                v24 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                        g_pILTClient,
                        *((unsigned __int16 *)v2 + 14) + 30000);
                v35 = v24;
                if ( v24 )
                  v41 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                        g_pILTClient,
                                        v24);
                else
                  v41 = byte_659A8B98;
                v25 = (*(int (__cdecl **)(int, int, int, const char *, char *, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                        g_pILTClient,
                        1025,
                        v2[18],
                        v41,
                        Buffer,
                        *((unsigned __int8 *)v2 + 37));
                v41 = (const char *)v25;
                if ( v35 )
                  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v35);
                if ( v25 )
                  v26 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                        g_pILTClient,
                                        v25);
                else
                  v26 = byte_659A8B98;
                v27 = UiWidget_Create(this, 0, (int)v26, 256, 466, 0, 0, 1, (int)&unk_65A5D0E4, 2, 0, 0, 0);
                if ( v41 )
                  (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v41);
              }
              else
              {
                v27 = UiWidget_Create(this, 0, (int)byte_659A8B98, 256, 466, 0, 0, 1, (int)&unk_65A5D0E4, 2, 0, 0, 0);
              }
              if ( v27 )
              {
                v28 = v40;
                v29 = v40 <= 0;
                v27[17] = v27[19] + 1;
                v27[21] = (int (__thiscall **)(_DWORD, int))4;
                v30 = v29 ? 0 : v28;
                v31 = v27[20];
                v27[22] = (int (__thiscall **)(_DWORD, int))v30;
                v27[18] = (int (__thiscall **)(_DWORD, int))((char *)v31 + v30);
                v40 = 0;
                StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v40);
                if ( Item_ValidateSlotForType(28, v40) )
                {
                  v32 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9007);
                  LinkedList_AddNode(Simple, v32, 72, v39, 0);
                }
                Button_AddCallbacks((int)Simple, (int)v38);
                ListBox_AddItem((unsigned int *)*(this + 2676), (int)Simple);
              }
            }
          }
        }
      }
      v37 += 76;
      ++v39;
    }
    while ( v39 < (*(this + 2581) - *(this + 2580)) / 76 );
  }
  ListBox_RefreshDisplay((int *)*(this + 2676));
  return ListBox_Reset((_DWORD *)*(this + 2676));
}
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65829CA0) --------------------------------------------------------
void __thiscall sub_65829CA0(int this)
{
  unsigned int v2; // eax
  unsigned int v3; // ebx
  int v4; // eax
  int v5; // eax
  int (__thiscall ***v6)(_DWORD, int); // eax
  int v7; // esi
  int (__thiscall **v8)(_DWORD, int); // ecx
  _DWORD *v9; // eax
  unsigned int *v10; // ebx
  _BYTE v11[16]; // [esp-38h] [ebp-A8h] BYREF
  int v12; // [esp-28h] [ebp-98h]
  int v13; // [esp-24h] [ebp-94h]
  int v14; // [esp-20h] [ebp-90h]
  int v15; // [esp-1Ch] [ebp-8Ch] BYREF
  int v16; // [esp-18h] [ebp-88h]
  void *v17; // [esp-14h] [ebp-84h]
  int v18; // [esp-10h] [ebp-80h]
  int v19; // [esp-Ch] [ebp-7Ch]
  unsigned int v20; // [esp-8h] [ebp-78h]
  int *v21; // [esp-4h] [ebp-74h]
  _BYTE v22[28]; // [esp+10h] [ebp-60h] BYREF
  _BYTE *v23; // [esp+2Ch] [ebp-44h]
  int *v24; // [esp+30h] [ebp-40h]
  unsigned int Value; // [esp+34h] [ebp-3Ch] BYREF
  int v26; // [esp+38h] [ebp-38h] BYREF
  unsigned int i; // [esp+3Ch] [ebp-34h]
  unsigned int *Simple; // [esp+40h] [ebp-30h]
  _BYTE v29[28]; // [esp+44h] [ebp-2Ch] BYREF
  int v30; // [esp+6Ch] [ebp-4h]

  ListBox_ClearItems(*(int **)(this + 10764));
  std::string::string(v29);
  v2 = 0;
  v30 = 0;
  for ( i = 0; v2 < *(_DWORD *)(this + 10344); i = v2 )
  {
    if ( (unsigned __int8)sub_65828CB0(this + 10336, v2, &Value, v29) )
    {
      Simple = (unsigned int *)UiWidget_CreateSimple(0, 0, 0, 0, 0, 0);
      if ( Simple )
      {
        v24 = &v15;
        sub_65941900(&v15, v29);
        v3 = Value;
        v23 = v11;
        LOBYTE(v30) = 1;
        String_FromU32(v11, Value);
        LOBYTE(v30) = 0;
        v4 = FormatString_Args((int)v22, (int)"({0}){1}");
        LOBYTE(v30) = 2;
        std::string::operator=(v29, v4);
        LOBYTE(v30) = 0;
        std::string::~string(v22);
        v21 = 0;
        v20 = 0;
        v19 = 0;
        v18 = 2;
        v17 = &unk_65A5C730;
        v16 = 1;
        v15 = 0;
        v14 = 0;
        v13 = 466;
        v12 = 256;
        v5 = std::string::c_str(v29);
        v6 = UiWidget_Create((void *)this, 0, v5, v12, v13, v14, v15, v16, (int)v17, v18, v19, v20, (int)v21);
        v7 = (int)v6;
        if ( v6 )
        {
          v8 = v6[20];
          v6[17] = v6[19] + 1;
          v21 = &v26;
          v6[21] = (int (__thiscall **)(_DWORD, int))4;
          v6[22] = (int (__thiscall **)(_DWORD, int))4;
          v6[18] = v8 + 1;
          v26 = 0;
          StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, v21);
          if ( Item_ValidateSlotForType(28, v26) )
          {
            v9 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9007);
            v20 = v3;
            v10 = Simple;
            LinkedList_AddNode(Simple, v9, 73, v20, 0);
          }
          else
          {
            v10 = Simple;
          }
          v21 = 0;
          Button_AddCallbacks((int)v10, v7);
          ListBox_AddItem(*(unsigned int **)(this + 10764), (int)v10);
        }
      }
    }
    v2 = i + 1;
  }
  ListBox_RefreshDisplay(*(int **)(this + 10764));
  ListBox_Reset(*(_DWORD **)(this + 10764));
  v30 = -1;
  std::string::~string(v29);
}
// 65828CB0: using guessed type int __thiscall sub_65828CB0(_DWORD, _DWORD, _DWORD, _DWORD);
// 65941900: using guessed type int __thiscall sub_65941900(_DWORD, _DWORD);
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65829EF0) --------------------------------------------------------
_WORD *__stdcall FillWordArray(_WORD *a1, int a2, _WORD *a3)
{
  int v3; // eax
  _WORD *i; // ecx

  v3 = a2;
  for ( i = a1; v3; ++i )
  {
    *i = *a3;
    --v3;
  }
  return &a1[a2];
}

//----- (65829F20) --------------------------------------------------------
void __thiscall WordVector_InsertAt(_DWORD *this, char *Source, unsigned int a3, unsigned int a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  int v7; // edi
  char *v8; // ebx
  int v9; // eax
  unsigned int v10; // ecx
  char *v11; // eax
  _BYTE *v12; // ecx
  char *v13; // ebx
  rsize_t v14; // eax
  _WORD *v15; // eax
  int v16; // ecx
  void *v17; // eax
  int v18; // edi
  int v19; // eax
  unsigned int v20; // eax
  char *v21; // edi
  int v22; // [esp-4h] [ebp-10h]
  int v23; // [esp+0h] [ebp-Ch]
  unsigned int v24; // [esp+8h] [ebp-4h]

  v5 = *(this + 1);
  if ( v5 )
    v6 = (*(this + 3) - v5) >> 1;
  else
    v6 = 0;
  v7 = a3;
  if ( a3 )
  {
    v8 = (char *)*(this + 2);
    v9 = (int)&v8[-v5] >> 1;
    if ( 0x7FFFFFFF - v9 < a3 )
      sub_65827880(v22, v23);
    if ( v6 >= v9 + a3 )
    {
      if ( (v8 - Source) >> 1 >= a3 )
      {
        v20 = 2 * a3;
        v21 = &v8[-2 * a3];
        a3 = *(unsigned __int16 *)a4;
        a4 = v20;
        *(this + 2) = CopyMemory_Words(v21, (int)v8, v8);
        MoveMemory_Words(Source, (int)v21, (int)v8);
        sub_65827ED0(Source, &Source[a4], &a3);
      }
      else
      {
        a3 = *(unsigned __int16 *)a4;
        a4 = 2 * v7;
        CopyMemory_Words(Source, (int)v8, &Source[2 * v7]);
        FillWordArray((_WORD *)*(this + 2), v7 - ((*(this + 2) - (int)Source) >> 1), &a3);
        v19 = a4;
        *(this + 2) += a4;
        sub_65827ED0(Source, (_WORD *)(*(this + 2) - v19), &a3);
      }
    }
    else
    {
      if ( 0x7FFFFFFF - (v6 >> 1) >= v6 )
      {
        v10 = (v6 >> 1) + v6;
        v24 = v10;
      }
      else
      {
        v24 = 0;
        v10 = 0;
      }
      if ( v10 < v9 + a3 )
      {
        v24 = v9 + a3;
        v10 = v9 + a3;
      }
      v11 = (char *)sub_65827940(v10);
      v12 = (_BYTE *)*(this + 1);
      v13 = v11;
      v14 = 2 * ((Source - v12) >> 1);
      a3 = (unsigned int)&v13[v14];
      if ( (Source - v12) >> 1 )
        memmove_s(v13, v14, v12, v14);
      v15 = FillWordArray((_WORD *)a3, v7, (_WORD *)a4);
      v16 = (*(this + 2) - (int)Source) >> 1;
      if ( v16 )
        memmove_s(v15, 2 * v16, Source, 2 * v16);
      v17 = (void *)*(this + 1);
      v18 = ((*(this + 2) - (int)v17) >> 1) + v7;
      if ( v17 )
        operator delete(v17);
      *(this + 1) = v13;
      *(this + 3) = &v13[2 * v24];
      *(this + 2) = &v13[2 * v18];
    }
  }
}
// 65829F5C: variable 'v22' is possibly undefined
// 65829F5C: variable 'v23' is possibly undefined

//----- (6582A0E0) --------------------------------------------------------
void __thiscall StringMap_Insert(int **this, int a2, int a3)
{
  int v4; // [esp+8h] [ebp-70h] BYREF
  _BYTE v5[28]; // [esp+Ch] [ebp-6Ch] BYREF
  int v6; // [esp+28h] [ebp-50h]
  _BYTE v7[28]; // [esp+2Ch] [ebp-4Ch] BYREF
  _BYTE v8[28]; // [esp+48h] [ebp-30h] BYREF
  _BYTE v9[8]; // [esp+64h] [ebp-14h] BYREF
  int v10; // [esp+74h] [ebp-4h]

  std::string::string(v8, a3);
  v6 = a2;
  v10 = 0;
  std::string::string(v7, v8);
  LOBYTE(v10) = 1;
  v4 = a2;
  std::string::string(v5, v7);
  LOBYTE(v10) = 2;
  RBTree_InsertUnique(this, (int)v9, &v4);
  LOBYTE(v10) = 1;
  std::string::~string(v5);
  LOBYTE(v10) = 0;
  std::string::~string(v7);
  v10 = -1;
  std::string::~string(v8);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A8: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (6582A1A0) --------------------------------------------------------
void __thiscall ProductionWindow_AddToQueue(int **this, int a2, int a3)
{
  StringMap_Insert(this + 2584, a2, a3);
  sub_65829CA0((int)this);
}

//----- (6582A1D0) --------------------------------------------------------
_DWORD *__thiscall WordVector_InsertSingle(_DWORD *this, _DWORD *a2, char *Source, unsigned int a4)
{
  int v5; // eax
  int v6; // esi

  v5 = *(this + 1);
  if ( ((*(this + 2) - v5) & 0xFFFFFFFE) != 0 )
    v6 = (int)&Source[-v5] >> 1;
  else
    v6 = 0;
  WordVector_InsertAt(this, Source, 1u, a4);
  *a2 = *(this + 1) + 2 * v6;
  return a2;
}

//----- (6582A220) --------------------------------------------------------
unsigned int *__thiscall WordRBTree_Erase(int ***this, unsigned int *a2)
{
  int *v3; // edi
  int *v4; // ebx
  int *v6; // [esp+Ch] [ebp-8h] BYREF
  int *v7; // [esp+10h] [ebp-4h] BYREF

  sub_65827FD0(this, &v6, a2);
  v3 = v7;
  v4 = v6;
  a2 = 0;
  sub_65828B70(v6, v7, &a2);
  RBTree_ClearRange(this, &v7, v4, v3);
  return a2;
}

//----- (6582A280) --------------------------------------------------------
void __thiscall WordVector_PushBack(char **this, _WORD *a2)
{
  int v2; // esi
  unsigned int v3; // eax
  char *v4; // edx

  v2 = (int)*(this + 1);
  if ( v2 )
    v3 = (int)&(*(this + 3))[-v2] >> 1;
  else
    v3 = 0;
  v4 = *(this + 2);
  if ( (int)&v4[-v2] >> 1 >= v3 )
  {
    WordVector_InsertAt(this, v4, 1u, (unsigned int)a2);
  }
  else
  {
    *(_WORD *)v4 = *a2;
    *(this + 2) = v4 + 2;
  }
}

//----- (6582A2D0) --------------------------------------------------------
unsigned int *__thiscall WordRBTree_EraseByValue(int ***this, unsigned int a2)
{
  return WordRBTree_Erase(this, &a2);
}

//----- (6582A2E0) --------------------------------------------------------
int __thiscall sub_6582A2E0(char *this)
{
  _DWORD *v2; // eax
  int v3; // esi
  _DWORD *v4; // eax
  int v5; // esi
  _DWORD *v6; // eax
  int v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  int *v10; // eax
  _DWORD *Full; // eax
  unsigned __int8 v12; // al
  bool v13; // zf
  int v14; // esi
  void *v15; // eax
  void *v16; // esi
  const char *v17; // eax
  int v18; // esi
  void *v19; // eax
  int **v20; // ecx
  const char *v21; // eax
  _DWORD *v22; // eax
  _DWORD *v23; // eax
  int v24; // eax
  _DWORD *v25; // eax
  int v26; // ecx
  _DWORD *v27; // esi
  int v28; // edi
  int v29; // eax
  _DWORD *v30; // eax
  int v31; // esi
  int v32; // edi
  int v33; // esi
  int v34; // eax
  _DWORD *v35; // eax
  int v36; // esi
  const char *v37; // eax
  _DWORD *v38; // eax
  int v39; // edx
  int *v40; // eax
  _DWORD *v41; // eax
  int v42; // esi
  void *v43; // eax
  int **v44; // ecx
  const char *v45; // eax
  float v47; // [esp+0h] [ebp-34h]
  float v48; // [esp+0h] [ebp-34h]
  int v49; // [esp+14h] [ebp-20h] BYREF
  int v50; // [esp+18h] [ebp-1Ch]
  int v51; // [esp+1Ch] [ebp-18h]
  int v52; // [esp+20h] [ebp-14h]
  int v53; // [esp+24h] [ebp-10h] BYREF
  int v54; // [esp+28h] [ebp-Ch]
  unsigned int v55; // [esp+2Ch] [ebp-8h] BYREF
  int v56; // [esp+30h] [ebp-4h]

  v2 = UiWidget_CreateWithStyle(this, 6, 10, 0, 195);
  *((_DWORD *)this + 1592) = v2;
  v2[8] = 0;
  v3 = (*(int (__thiscall **)(_DWORD))(**((_DWORD **)this + 1592) + 16))(*((_DWORD *)this + 1592)) + 11;
  v4 = UiWidget_CreateWithStyle(this, 7, v3, 0, 196);
  *((_DWORD *)this + 1593) = v4;
  v4[8] = 0;
  v5 = v3 + (*(int (__thiscall **)(_DWORD))(**((_DWORD **)this + 1593) + 16))(*((_DWORD *)this + 1593)) + 1;
  v6 = UiWidget_CreateWithStyle(this, 8, v5, 0, 197);
  *((_DWORD *)this + 1594) = v6;
  v6[8] = 0;
  v7 = (*(int (__thiscall **)(_DWORD))(**((_DWORD **)this + 1594) + 16))(*((_DWORD *)this + 1594));
  v8 = UiWidget_CreateWithStyle(this, 9, v5 + v7 + 1, 0, 198);
  *((_DWORD *)this + 1595) = v8;
  v8[8] = 0;
  UiWidget_CreateScrollbar(this, 5, 13, 940, 510, 0.5, 0);
  *((_DWORD *)this + 1558) = 7;
  *((_DWORD *)this + 1559) = 7;
  v9 = UiWidget_CreateWithInput(this, 5, 10, 528, 32, 0);
  *((_DWORD *)this + 1596) = v9;
  WindowMgr_RegisterChild(this, (int)v9, 2);
  WindowMgr_CreateGroup((unsigned int *)this, (void *)0x3C);
  WindowMgr_CreateGroup((unsigned int *)this, (void *)0x3D);
  WindowMgr_CreateGroup((unsigned int *)this, (void *)0x3E);
  WindowMgr_CreateGroup((unsigned int *)this, (void *)0x3F);
  WindowMgr_SelectGroup((int *)this, 60);
  UiWidget_CreateScrollbar(this, 15, 35, 504, 482, 0.5, 0);
  v53 = 520;
  v54 = 480;
  v49 = 0;
  v50 = 482;
  v51 = 20;
  v52 = -2;
  v10 = UiWidget_CreateExtended(this, 0, &v53, 17, 37, &v49, 0x1Eu);
  *((_DWORD *)this + 2598) = v10;
  Scrollbar_AddCallbackEntry(v10, 1, 3, 490);
  *((_DWORD *)this + 2599) = UiWidget_CreateFull(
                               this,
                               0,
                               (int)byte_659A8B98,
                               32,
                               100,
                               0,
                               0,
                               1,
                               420,
                               23,
                               (int)&unk_65A5CE5C,
                               2,
                               0,
                               0,
                               0,
                               1);
  UiWidget_CreateFull(this, 0, (int)"Filters", 32, 210, 0, 0, 1, 550, 30, (int)&unk_65A5CF34, 2, 0, 0, 0, 1);
  UiWidget_CreateFull(this, 0, (int)"Created by myself", 32, 100, 0, 0, 1, 545, 52, (int)&unk_65A5C580, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2601) = UiWidget_CreateBase(this, (unsigned int)(this + 10524), 1, 650, 50, 0);
  UiWidget_CreateFull(this, 0, (int)"NPC ID", 32, 100, 0, 0, 1, 545, 82, (int)&unk_65A5C580, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 650, 80, 216, 16, 0.5, 0);
  Full = UiWidget_CreateFull(this, 12, (int)byte_659A8B98, 32, 212, 0, 0, 1, 652, 82, (int)&unk_65A5C5EC, 0, 1, 0, 0, 1);
  *((_DWORD *)this + 2602) = Full;
  Full[117] = 3;
  UiWidget_CreateFull(this, 0, (int)"World", 32, 100, 0, 0, 1, 545, 112, (int)&unk_65A5C580, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2603) = UiWidget_CreateWithInput(this, 13, 650, 110, 0, 2);
  v12 = 0;
  HIBYTE(v56) = 0;
  do
  {
    v13 = v12 == 0;
    if ( !v12 )
      goto LABEL_15;
    v14 = 15 * v12;
    if ( dword_659E2958[v14] && v12 != 5 )
    {
      if ( dword_659E2964[15 * v12] )
      {
        v55 = 0;
        StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v55);
        if ( !Item_ValidateSlotForType(47, v55) )
          goto LABEL_23;
        v12 = HIBYTE(v56);
      }
      if ( dword_659E2960[v14] )
      {
        v55 = 0;
        StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v55);
        if ( !Item_ValidateSlotForType(39, v55) )
          goto LABEL_23;
        v12 = HIBYTE(v56);
      }
      if ( dword_659E295C[v14] )
      {
        v55 = 0;
        StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v55);
        if ( v55 < 2 )
          goto LABEL_23;
        v12 = HIBYTE(v56);
      }
      v13 = v12 == 0;
LABEL_15:
      if ( v13 )
        v15 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 3099);
      else
        v15 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v12 + 3100);
      v16 = v15;
      UiList_AddEntry(*((int ***)this + 2603), v15, 14, HIBYTE(v56), 0);
      if ( HIBYTE(v56) == *(this + 10432) )
      {
        if ( v16 )
          v17 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v16);
        else
          v17 = byte_659A8B98;
        UiList_SetSelectionText(*((_DWORD *)this + 2603), (int)v17, 1);
      }
LABEL_23:
      v12 = HIBYTE(v56);
    }
    HIBYTE(v56) = ++v12;
  }
  while ( v12 < 0x20u );
  UiWidget_CreateFull(this, 0, (int)"NPC Name", 32, 100, 0, 0, 1, 545, 142, (int)&unk_65A5C580, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 650, 140, 216, 16, 0.5, 0);
  *((_DWORD *)this + 2604) = UiWidget_CreateFull(
                               this,
                               15,
                               (int)byte_659A8B98,
                               64,
                               212,
                               0,
                               1,
                               1,
                               652,
                               142,
                               (int)&unk_65A5C5EC,
                               0,
                               1,
                               0,
                               0,
                               1);
  UiWidget_CreateFull(this, 0, (int)"Published State", 32, 100, 0, 0, 1, 545, 172, (int)&unk_65A5C580, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2605) = UiWidget_CreateWithInput(this, 16, 650, 170, 0, 2);
  HIBYTE(v56) = 0;
  v18 = 0;
  do
  {
    v19 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v18 + 22606);
    v20 = (int **)*((_DWORD *)this + 2605);
    v55 = (unsigned int)v19;
    UiList_AddEntry(v20, v19, 17, v18, 0);
    if ( HIBYTE(v56) == *(this + 10433) )
    {
      if ( v55 )
        v21 = (const char *)(*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v55);
      else
        v21 = byte_659A8B98;
      UiList_SetSelectionText(*((_DWORD *)this + 2605), (int)v21, 1);
    }
    ++v18;
    ++HIBYTE(v56);
  }
  while ( HIBYTE(v56) <= 2u );
  UiWidget_CreateFull(this, 0, (int)"Editor Name", 32, 100, 0, 0, 1, 545, 202, (int)&unk_65A5C580, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 650, 200, 216, 16, 0.5, 0);
  *((_DWORD *)this + 2606) = UiWidget_CreateFull(
                               this,
                               18,
                               (int)byte_659A8B98,
                               32,
                               212,
                               0,
                               0,
                               1,
                               652,
                               202,
                               (int)&unk_65A5C5EC,
                               0,
                               1,
                               0,
                               0,
                               1);
  *((_DWORD *)this + 2632) = UiWidget_CreateWithInput(this, 5, 600, 250, 58, 0);
  *((_DWORD *)this + 2600) = UiWidget_CreateWithInput(this, 11, 7, 528, 38, 0);
  WindowMgr_SelectGroup((int *)this, 61);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Name", 32, 80, 0, 0, 1, 15, 31, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 100, 26, 216, 21, 0.5, 0);
  qmemcpy(&unk_65A5E590, &unk_65A5D36C, 0x6Cu);
  strncpy(byte_65A5E598, "ffae0000", 0xFu);
  byte_65A5E5A7 = 0;
  *((_DWORD *)this + 2633) = UiWidget_CreateFull(
                               this,
                               24,
                               (int)byte_659A8B98,
                               64,
                               212,
                               0,
                               1,
                               1,
                               102,
                               28,
                               (int)&unk_65A5E590,
                               0,
                               1,
                               0,
                               0,
                               1);
  qmemcpy(&unk_65A5E590, &unk_65A5D738, 0x6Cu);
  strncpy(byte_65A5E598, "FF000000", 0xFu);
  byte_65A5E5A7 = 0;
  *((_DWORD *)this + 2634) = UiWidget_CreateFull(
                               this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               200,
                               0,
                               0,
                               1,
                               325,
                               32,
                               (int)&unk_65A5E590,
                               2,
                               0,
                               0,
                               0,
                               1);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"ID", 32, 80, 0, 0, 1, 15, 51, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 100, 50, 216, 16, 0.5, 0);
  *((_DWORD *)this + 2635) = UiWidget_CreateFull(
                               this,
                               0,
                               (int)byte_659A8B98,
                               32,
                               212,
                               0,
                               0,
                               1,
                               102,
                               52,
                               (int)byte_65A5C4A8,
                               2,
                               0,
                               0,
                               0,
                               1);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Location", 32, 80, 0, 0, 1, 15, 71, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 100, 70, 216, 16, 0.5, 0);
  *((_DWORD *)this + 2636) = UiWidget_CreateFull(
                               this,
                               0,
                               (int)byte_659A8B98,
                               32,
                               212,
                               0,
                               0,
                               1,
                               102,
                               72,
                               (int)byte_65A5C4A8,
                               2,
                               0,
                               0,
                               0,
                               1);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Type", 32, 80, 0, 0, 1, 15, 111, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2637) = UiWidget_CreateWithInput(this, 25, 100, 110, 0, 2);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Animation", 32, 80, 0, 0, 1, 15, 131, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2638) = UiWidget_CreateWithInput(this, 27, 100, 130, 0, 2);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Scale", 32, 80, 0, 0, 1, 15, 151, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 100, 150, 216, 16, 0.5, 0);
  v22 = UiWidget_CreateFull(this, 29, (int)byte_659A8B98, 32, 212, 0, 0, 1, 102, 152, (int)&unk_65A5C5EC, 0, 1, 0, 0, 1);
  *((_DWORD *)this + 2641) = v22;
  v22[117] = 3;
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Flag as NPC", 32, 80, 0, 0, 1, 15, 171, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2639) = UiWidget_CreateBase(this, (unsigned int)(this + 8004), 1, 140, 171, 0);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Owner Mod Only", 32, 80, 0, 0, 1, 15, 191, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2640) = UiWidget_CreateBase(this, (unsigned int)(this + 8005), 1, 140, 191, 0);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Gender", 32, 80, 0, 0, 1, 15, 221, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2642) = UiWidget_CreateWithInput(this, 30, 100, 220, 0, 2);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Skin", 32, 80, 0, 0, 1, 15, 241, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2643) = UiWidget_CreateWithInput(this, 32, 100, 240, 0, 2);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Face", 32, 80, 0, 0, 1, 15, 261, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2644) = UiWidget_CreateWithInput(this, 34, 100, 260, 0, 2);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Hair", 32, 80, 0, 0, 1, 15, 281, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2645) = UiWidget_CreateWithInput(this, 36, 100, 280, 0, 2);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Torso", 32, 80, 0, 0, 1, 15, 301, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2646) = UiWidget_CreateWithInput(this, 38, 100, 300, 0, 1);
  *((_DWORD *)this + 2647) = UiWidget_CreateWithInput(this, 40, 250, 300, 66, 0);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Legs", 32, 80, 0, 0, 1, 15, 321, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2648) = UiWidget_CreateWithInput(this, 41, 100, 320, 0, 1);
  *((_DWORD *)this + 2649) = UiWidget_CreateWithInput(this, 43, 250, 320, 66, 0);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Shoes", 32, 80, 0, 0, 1, 15, 341, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2650) = UiWidget_CreateWithInput(this, 44, 100, 340, 0, 1);
  *((_DWORD *)this + 2651) = UiWidget_CreateWithInput(this, 46, 250, 340, 66, 0);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Gloves", 32, 80, 0, 0, 1, 15, 361, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2652) = UiWidget_CreateWithInput(this, 47, 100, 360, 0, 1);
  *((_DWORD *)this + 2653) = UiWidget_CreateWithInput(this, 49, 250, 360, 66, 0);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Helmet", 32, 80, 0, 0, 1, 15, 381, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2654) = UiWidget_CreateWithInput(this, 50, 100, 380, 0, 1);
  *((_DWORD *)this + 2655) = UiWidget_CreateWithInput(this, 52, 250, 380, 66, 0);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Glasses", 32, 80, 0, 0, 1, 15, 401, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2656) = UiWidget_CreateWithInput(this, 53, 100, 400, 0, 1);
  *((_DWORD *)this + 2657) = UiWidget_CreateWithInput(this, 55, 250, 400, 66, 0);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Shoulder Armor", 32, 80, 0, 0, 1, 15, 421, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2658) = UiWidget_CreateWithInput(this, 56, 100, 420, 0, 1);
  *((_DWORD *)this + 2659) = UiWidget_CreateWithInput(this, 58, 250, 420, 66, 0);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Arm Armor", 32, 80, 0, 0, 1, 15, 441, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2660) = UiWidget_CreateWithInput(this, 59, 100, 440, 0, 1);
  *((_DWORD *)this + 2661) = UiWidget_CreateWithInput(this, 61, 250, 440, 66, 0);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Torso Armor", 32, 80, 0, 0, 1, 15, 461, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2662) = UiWidget_CreateWithInput(this, 62, 100, 460, 0, 1);
  *((_DWORD *)this + 2663) = UiWidget_CreateWithInput(this, 64, 250, 460, 66, 0);
  qmemcpy(&unk_65A5E590, byte_65A5C4A8, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Leg Armor", 32, 80, 0, 0, 1, 15, 481, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2664) = UiWidget_CreateWithInput(this, 65, 100, 480, 0, 1);
  *((_DWORD *)this + 2665) = UiWidget_CreateWithInput(this, 67, 250, 480, 66, 0);
  qmemcpy(&unk_65A5E590, &unk_65A5D738, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  UiWidget_CreateFull(this, 0, (int)"Mood", 32, 80, 0, 0, 1, 15, 501, (int)&unk_65A5E590, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2666) = UiWidget_CreateWithInput(this, 68, 100, 500, 0, 2);
  UiWidget_CreateFull(this, 0, (int)"Objectives", 32, 140, 0, 0, 1, 600, 21, (int)&unk_65A5CD84, 2, 0, 0, 0, 1);
  v53 = 320;
  v54 = 450;
  *((_DWORD *)this + 2671) = UiWidget_CreateAlt(this, 0, &v53, 602, 35, 0, 45);
  *((_DWORD *)this + 2672) = UiWidget_CreateWithInput(this, 70, 602, 490, 190, 0);
  v23 = UiWidget_CreateWithInput(this, 75, 7, 528, 49, 0);
  *((_DWORD *)this + 2667) = v23;
  v24 = (*(int (__thiscall **)(_DWORD *))(*v23 + 16))(v23);
  v25 = UiWidget_CreateWithInput(this, 76, v24 + 12, 528, 40, 0);
  v26 = *((_DWORD *)this + 2667);
  v27 = v25;
  *((_DWORD *)this + 2668) = v25;
  v28 = (*(int (__thiscall **)(int))(*(_DWORD *)v26 + 16))(v26);
  v29 = (*(int (__thiscall **)(_DWORD *))(*v27 + 16))(v27);
  v30 = UiWidget_CreateWithInput(this, 77, v28 + v29 + 17, 528, 47, 0);
  v31 = *((_DWORD *)this + 2668);
  *((_DWORD *)this + 2669) = v30;
  v32 = (*(int (__thiscall **)(_DWORD *))(*v30 + 16))(v30);
  v33 = v32 + (*(int (__thiscall **)(int))(*(_DWORD *)v31 + 16))(v31);
  v34 = (*(int (__thiscall **)(_DWORD))(**((_DWORD **)this + 2667) + 16))(*((_DWORD *)this + 2667));
  *((_DWORD *)this + 2670) = UiWidget_CreateWithInput(this, 78, v34 + v33 + 22, 528, 202, 0);
  WindowMgr_SelectGroup((int *)this, 62);
  UiWidget_CreateFull(this, 0, (int)"Objective-ID", 32, 135, 0, 0, 1, 650, 32, (int)byte_65A5C4A8, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 800, 30, 100, 16, *((float *)this + 1575), 0);
  *((_DWORD *)this + 2675) = UiWidget_CreateFull(
                               this,
                               0,
                               (int)"0",
                               16,
                               96,
                               0,
                               0,
                               1,
                               802,
                               32,
                               (int)&unk_65A5C5EC,
                               2,
                               0,
                               0,
                               0,
                               1);
  UiWidget_CreateFull(this, 0, (int)"Title:", 32, 85, 0, 0, 1, 15, 32, (int)byte_65A5C4A8, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 100, 28, 500, 20, *((float *)this + 1575), 0);
  qmemcpy(&unk_65A5E590, &unk_65A5E158, 0x6Cu);
  strncpy(byte_65A5E598, "BFC7FF00", 0xFu);
  byte_65A5E5A7 = 0;
  *((_DWORD *)this + 2673) = UiWidget_CreateFull(
                               this,
                               93,
                               (int)byte_659A8B98,
                               64,
                               496,
                               0,
                               0,
                               1,
                               102,
                               32,
                               (int)&unk_65A5E590,
                               0,
                               1,
                               0,
                               0,
                               1);
  qmemcpy(&unk_65A5E590, &unk_65A5D738, 0x6Cu);
  strncpy(byte_65A5E598, "FF000000", 0xFu);
  byte_65A5E5A7 = 0;
  *((_DWORD *)this + 2674) = UiWidget_CreateFull(
                               this,
                               0,
                               (int)byte_659A8B98,
                               64,
                               200,
                               0,
                               0,
                               1,
                               620,
                               49,
                               (int)&unk_65A5E590,
                               2,
                               0,
                               0,
                               0,
                               1);
  UiWidget_CreateFull(this, 0, (int)"Objective Speech:", 32, 140, 0, 0, 1, 300, 62, (int)byte_65A5C4A8, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 300, 80, 404, 350, 0.5, 0);
  v49 = 0;
  v50 = 350;
  v51 = 20;
  v52 = -2;
  *((_DWORD *)this + 2687) = UiWidget_CreateFull(
                               this,
                               97,
                               (int)byte_659A8B98,
                               2048,
                               420,
                               346,
                               0,
                               0,
                               302,
                               82,
                               (int)&unk_65A5C874,
                               1,
                               1,
                               (int)&v49,
                               0,
                               1);
  UiWidget_CreateFull(this, 0, (int)"Primary Config:", 32, 140, 0, 0, 1, 15, 87, (int)&unk_65A5CD84, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2678) = UiWidget_CreateWithInput(this, 84, 25, 100, 0, 2);
  UiWidget_CreateFull(this, 0, (int)"Repeatable", 32, 100, 0, 0, 1, 25, 125, (int)&unk_65A5C5EC, 2, 0, 0, 0, 1);
  UiWidget_CreateBase(this, (unsigned int)(this + 10333), 2, 135, 125, 0);
  UiWidget_CreateFull(this, 0, (int)"Limited 1 Reward", 32, 100, 0, 0, 1, 25, 150, (int)&unk_65A5C5EC, 2, 0, 0, 0, 1);
  UiWidget_CreateBase(this, (unsigned int)(this + 10332), 2, 135, 150, 0);
  UiWidget_CreateFull(this, 0, (int)"Rewards:", 32, 140, 0, 0, 1, 15, 175, (int)&unk_65A5CD84, 2, 0, 0, 0, 1);
  v53 = 280;
  v54 = 60;
  *((_DWORD *)this + 2676) = UiWidget_CreateAlt(this, 0, &v53, 15, 187, 0, 60);
  UiWidget_CreateWithInput(this, 99, 15, 255, 320, 0);
  UiWidget_CreateFull(this, 0, (int)"Parameters:", 32, 140, 0, 0, 1, 15, 279, (int)&unk_65A5CD84, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2677) = UiWidget_CreateWithInput(this, 79, 25, 295, 0, 2);
  *((_DWORD *)this + 2679) = UiWidget_CreateWithInput(this, 86, 25, 320, 0, 2);
  *((_DWORD *)this + 2680) = UiWidget_CreateWithInput(this, 88, 25, 345, 0, 2);
  *((_DWORD *)this + 2681) = UiWidget_CreateWithInput(this, 90, 25, 370, 0, 2);
  v35 = UiWidget_CreateFull(this, 0, (int)"Target", 32, 60, 0, 0, 1, 28, 420, (int)&unk_65A5CD84, 2, 0, 0, 0, 1);
  v47 = *((float *)this + 1575);
  *((_DWORD *)this + 2683) = v35;
  UiWidget_CreateScrollbar(this, 85, 418, 150, 16, v47, 0);
  *((_DWORD *)this + 2684) = UiWidget_CreateFull(
                               this,
                               95,
                               (int)byte_659A8B98,
                               64,
                               140,
                               0,
                               1,
                               1,
                               87,
                               420,
                               (int)&unk_65A5C5EC,
                               0,
                               1,
                               0,
                               0,
                               1);
  *((_DWORD *)this + 2685) = UiWidget_CreateWithInput(this, 96, 130, 440, 194, 0);
  *((_DWORD *)this + 2686) = UiWidget_CreateFull(
                               this,
                               0,
                               (int)byte_659A8B98,
                               32,
                               100,
                               0,
                               0,
                               1,
                               30,
                               440,
                               (int)&unk_65A5CD84,
                               2,
                               0,
                               0,
                               0,
                               1);
  v36 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 860);
  if ( v36 )
    v37 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v36);
  else
    v37 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v37, 32, 60, 0, 0, 1, 25, 463, (int)&unk_65A5CD84, 2, 0, 0, 0, 1);
  if ( v36 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v36);
  UiWidget_CreateScrollbar(this, 85, 461, 150, 16, *((float *)this + 1575), 0);
  v38 = UiWidget_CreateFull(this, 94, (int)"0", 10, 140, 0, 1, 1, 87, 463, (int)&unk_65A5C5EC, 0, 1, 0, 0, 1);
  *((_DWORD *)this + 2682) = v38;
  v39 = *v38;
  v38[117] = 3;
  v38[118] = 30000;
  v38[120] = 0;
  *((_BYTE *)v38 + 476) = 1;
  *((_BYTE *)v38 + 484) = 1;
  (*(void (__thiscall **)(_DWORD *))(v39 + 136))(v38);
  UiWidget_CreateFull(
    this,
    0,
    (int)"Depending Objectives:",
    32,
    60,
    0,
    0,
    1,
    730,
    62,
    (int)&unk_65A5CD84,
    2,
    0,
    0,
    0,
    1);
  v54 = 320;
  v53 = 200;
  v40 = UiWidget_CreateAlt(this, 0, &v53, 732, 82, 0, 20);
  v48 = *((float *)this + 1575);
  *((_DWORD *)this + 2691) = v40;
  UiWidget_CreateScrollbar(this, 732, 412, 70, 16, v48, 0);
  *((_DWORD *)this + 2689) = UiWidget_CreateFull(
                               this,
                               74,
                               (int)"0",
                               10,
                               68,
                               0,
                               0,
                               1,
                               734,
                               414,
                               (int)&unk_65A5C5EC,
                               0,
                               1,
                               0,
                               0,
                               1);
  *((_DWORD *)this + 2690) = UiWidget_CreateWithInput(this, 100, 810, 412, 321, 0);
  *((_DWORD *)this + 2688) = UiWidget_CreateWithInput(this, 98, 7, 528, 47, 0);
  WindowMgr_SelectGroup((int *)this, 63);
  v54 = 450;
  v53 = 520;
  *((_DWORD *)this + 2692) = UiWidget_CreateAlt(this, 0, &v53, 17, 45, 0, 45);
  *((_DWORD *)this + 2693) = UiWidget_CreateFull(
                               this,
                               0,
                               (int)byte_659A8B98,
                               32,
                               100,
                               0,
                               0,
                               1,
                               420,
                               31,
                               (int)&unk_65A5CE5C,
                               2,
                               0,
                               0,
                               0,
                               1);
  UiWidget_CreateFull(this, 0, (int)"Filters", 32, 210, 0, 0, 1, 550, 30, (int)&unk_65A5CF34, 2, 0, 0, 0, 1);
  UiWidget_CreateFull(this, 0, (int)"Created by myself", 32, 100, 0, 0, 1, 545, 52, (int)&unk_65A5C580, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2694) = UiWidget_CreateBase(this, (unsigned int)(this + 10892), 1, 650, 50, 0);
  UiWidget_CreateFull(this, 0, (int)"Quest ID", 32, 100, 0, 0, 1, 545, 82, (int)&unk_65A5C580, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 650, 80, 216, 16, 0.5, 0);
  v41 = UiWidget_CreateFull(this, 19, (int)byte_659A8B98, 32, 212, 0, 0, 1, 652, 82, (int)&unk_65A5C5EC, 0, 1, 0, 0, 1);
  *((_DWORD *)this + 2695) = v41;
  v41[117] = 3;
  UiWidget_CreateFull(this, 0, (int)"Quest Title", 32, 100, 0, 0, 1, 545, 112, (int)&unk_65A5C580, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 650, 110, 216, 16, 0.5, 0);
  *((_DWORD *)this + 2696) = UiWidget_CreateFull(
                               this,
                               20,
                               (int)byte_659A8B98,
                               32,
                               212,
                               0,
                               0,
                               1,
                               652,
                               112,
                               (int)&unk_65A5C5EC,
                               0,
                               1,
                               0,
                               0,
                               1);
  UiWidget_CreateFull(this, 0, (int)"Published State", 32, 100, 0, 0, 1, 545, 142, (int)&unk_65A5C580, 2, 0, 0, 0, 1);
  *((_DWORD *)this + 2697) = UiWidget_CreateWithInput(this, 21, 650, 140, 0, 2);
  HIBYTE(v56) = 0;
  v42 = 0;
  do
  {
    v43 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v42 + 22606);
    v44 = (int **)*((_DWORD *)this + 2697);
    v55 = (unsigned int)v43;
    UiList_AddEntry(v44, v43, 22, v42, 0);
    if ( HIBYTE(v56) == *(this + 10801) )
    {
      if ( v55 )
        v45 = (const char *)(*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v55);
      else
        v45 = byte_659A8B98;
      UiList_SetSelectionText(*((_DWORD *)this + 2697), (int)v45, 1);
    }
    ++v42;
    ++HIBYTE(v56);
  }
  while ( HIBYTE(v56) <= 2u );
  UiWidget_CreateFull(this, 0, (int)"Editor Name", 32, 100, 0, 0, 1, 545, 172, (int)&unk_65A5C580, 2, 0, 0, 0, 1);
  UiWidget_CreateScrollbar(this, 650, 170, 216, 16, 0.5, 0);
  *((_DWORD *)this + 2698) = UiWidget_CreateFull(
                               this,
                               23,
                               (int)byte_659A8B98,
                               32,
                               212,
                               0,
                               0,
                               1,
                               652,
                               172,
                               (int)&unk_65A5C5EC,
                               0,
                               1,
                               0,
                               0,
                               1);
  *((_DWORD *)this + 2724) = UiWidget_CreateWithInput(this, 5, 600, 250, 58, 0);
  return GroupWindow_Initialize((int)this);
}
// 659E2958: using guessed type int dword_659E2958[];
// 659E295C: using guessed type int dword_659E295C[];
// 659E2960: using guessed type int dword_659E2960[];
// 659E2964: using guessed type int dword_659E2964[];
// 65A5E5A7: using guessed type char byte_65A5E5A7;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6582C170) --------------------------------------------------------
void __thiscall sub_6582C170(int this)
{
  int v2; // ecx
  unsigned int v3; // edx
  int v4; // eax
  char *v5; // eax
  int v6; // edi
  char *v7; // eax
  int i; // edi
  void *v9; // ebx
  const char *v10; // eax
  int Count45; // eax
  int v12; // ebx
  int v13; // edi
  char **v14; // ebx
  void *v15; // eax
  unsigned __int16 v16; // ax
  int v17; // eax
  char *v18; // eax
  int j; // ebx
  const char *v20; // eax
  void *v21; // edi
  const char *v22; // eax
  int k; // edi
  int v24; // eax
  int v25; // ebx
  int v26; // eax
  void *v27; // ebx
  const char *v28; // eax
  int v29; // ebx
  _DWORD *v30; // ecx
  __int16 v31; // cx
  unsigned int v32; // eax
  int v33; // edx
  int v34; // edi
  int v35; // eax
  bool v36; // zf
  int v37; // eax
  int v38; // ebx
  int v39; // eax
  void *v40; // ebx
  const char *v41; // eax
  int m; // ebx
  int v43; // eax
  int v44; // edi
  int v45; // eax
  void *v46; // edi
  const char *v47; // eax
  _DWORD *v48; // ecx
  int v49; // edi
  unsigned __int16 *v50; // eax
  unsigned __int16 v51; // di
  int v52; // eax
  int v53; // ebx
  int v54; // eax
  void *v55; // ebx
  const char *v56; // eax
  unsigned __int16 *v57; // eax
  unsigned __int16 v58; // di
  int v59; // eax
  int v60; // ebx
  int v61; // eax
  void *v62; // ebx
  const char *v63; // eax
  unsigned __int16 *v64; // eax
  unsigned __int16 v65; // di
  int v66; // eax
  int v67; // ebx
  int v68; // eax
  void *v69; // ebx
  const char *v70; // eax
  char *v71; // ecx
  unsigned int v72; // eax
  unsigned __int16 v73; // di
  int v74; // eax
  const char *v75; // eax
  void *v76; // ebx
  const char *v77; // eax
  char *v78; // ecx
  unsigned int v79; // eax
  unsigned __int16 v80; // di
  int v81; // eax
  const char *v82; // eax
  void *v83; // ebx
  const char *v84; // eax
  char *v85; // ecx
  unsigned int v86; // eax
  unsigned __int16 v87; // di
  int v88; // eax
  const char *v89; // eax
  void *v90; // ebx
  const char *v91; // eax
  char *v92; // ecx
  unsigned int v93; // eax
  unsigned __int16 v94; // di
  int v95; // eax
  const char *v96; // eax
  void *v97; // ebx
  const char *v98; // eax
  char *v99; // ecx
  unsigned int v100; // eax
  unsigned __int16 v101; // di
  int v102; // eax
  const char *v103; // eax
  void *v104; // ebx
  const char *v105; // eax
  char *v106; // ecx
  unsigned int v107; // eax
  unsigned __int16 v108; // di
  int v109; // eax
  const char *v110; // eax
  void *v111; // ebx
  const char *v112; // eax
  char *v113; // ecx
  unsigned int v114; // eax
  unsigned __int16 v115; // di
  int v116; // eax
  const char *v117; // eax
  void *v118; // ebx
  const char *v119; // eax
  int ii; // edi
  int v121; // ebx
  const char *Name; // eax
  void *v123; // ebx
  const char *v124; // eax
  _BYTE v125[8]; // [esp-24h] [ebp-A0h] BYREF
  _BYTE v126[16]; // [esp-1Ch] [ebp-98h] BYREF
  char *v127; // [esp-Ch] [ebp-88h]
  int v128; // [esp-8h] [ebp-84h]
  char *v129; // [esp-4h] [ebp-80h]
  _BYTE v130[28]; // [esp+10h] [ebp-6Ch] BYREF
  char v131[28]; // [esp+2Ch] [ebp-50h] BYREF
  char v132[4]; // [esp+48h] [ebp-34h] BYREF
  void *v133; // [esp+4Ch] [ebp-30h]
  void *Source; // [esp+50h] [ebp-2Ch]
  int v135; // [esp+54h] [ebp-28h]
  _BYTE *v136; // [esp+58h] [ebp-24h]
  int n; // [esp+5Ch] [ebp-20h] BYREF
  int v138; // [esp+60h] [ebp-1Ch]
  int v139; // [esp+64h] [ebp-18h]
  int v140; // [esp+68h] [ebp-14h]
  bool v141; // [esp+6Fh] [ebp-Dh]
  int v142; // [esp+78h] [ebp-4h]

  v140 = 0;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 10532), (char *)(this + 7939), 0, 0);
  v2 = *(_DWORD *)(this + 10536);
  v129 = 0;
  v128 = 0;
  if ( *(_BYTE *)(this + 8003) )
    v127 = "Published, can't be edited!";
  else
    v127 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(v2, v127, v128, v129);
  v3 = *(_DWORD *)(this + 7852);
  v129 = 0;
  v128 = 0;
  n = (int)v125;
  String_FromU32(v125, v3);
  v4 = FormatString((int)v131, (int)&unk_659C45C8);
  v142 = 0;
  v5 = (char *)std::string::c_str(v4);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 10540), v5, v128, v129);
  v142 = -1;
  std::string::~string(v131);
  v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
         g_pILTClient,
         *(unsigned __int8 *)(this + 7856) + 3100);
  if ( v6 )
    v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
  else
    v7 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 10544), v7, 0, 0);
  if ( v6 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
  PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10548));
  for ( i = 11; i < 127; ++i )
  {
    v9 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, i + 22395);
    UiList_AddEntry(*(int ***)(this + 10548), v9, 26, i, 0);
    if ( i == *(unsigned __int16 *)(this + 7864) )
    {
      if ( v9 )
        v10 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
      else
        v10 = byte_659A8B98;
      UiList_SetSelectionText(*(_DWORD *)(this + 10548), (int)v10, 1);
    }
  }
  PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10552));
  Count45 = EntryTable_GetCount45();
  v138 = Count45;
  if ( *(_BYTE *)(this + 7934) >= (unsigned __int8)Count45 )
  {
    v12 = 0;
    if ( Count45 > 0 )
    {
      while ( !EntryTable_GetByTypeIndex(*(_WORD *)(this + 7864), v12) )
      {
        if ( ++v12 >= v138 )
          goto LABEL_22;
      }
      *(_BYTE *)(this + 7934) = v12;
LABEL_22:
      Count45 = v138;
    }
  }
  v13 = 0;
  if ( Count45 > 0 )
  {
    do
    {
      v14 = EntryTable_GetByTypeIndex(*(_WORD *)(this + 7864), v13);
      if ( v14 )
      {
        v15 = (void *)(*(int (__thiscall **)(int, char *))(*(_DWORD *)g_pILTClient + 72))(g_pILTClient, v14[1]);
        UiList_AddEntry(*(int ***)(this + 10552), v15, 28, v13, 0);
        if ( v13 == *(unsigned __int8 *)(this + 7934) )
          UiList_SetSelectionText(*(_DWORD *)(this + 10552), (int)v14[1], 1);
      }
      ++v13;
    }
    while ( v13 < v138 );
  }
  v16 = *(_WORD *)(this + 7936);
  v129 = 0;
  v128 = 0;
  n = (int)v125;
  String_FromU16(v125, v16);
  v17 = FormatString((int)v131, (int)&unk_659C45C8);
  v142 = 1;
  v18 = (char *)std::string::c_str(v17);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 10564), v18, v128, v129);
  v142 = -1;
  std::string::~string(v131);
  if ( *(_WORD *)(this + 7864) == 11 )
  {
    *(_DWORD *)(*(_DWORD *)(this + 10568) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10568));
    for ( j = 0; j <= 1; ++j )
    {
      v20 = "Male";
      if ( j )
        v20 = "Female";
      v21 = (void *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 72))(g_pILTClient, v20);
      UiList_AddEntry(*(int ***)(this + 10568), v21, 31, j, 0);
      if ( j == *(unsigned __int16 *)(this + 7884) )
      {
        if ( v21 )
          v22 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v21);
        else
          v22 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 10568), (int)v22, 1);
      }
    }
    *(_DWORD *)(*(_DWORD *)(this + 10572) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10572));
    for ( k = 0; k < 2; ++k )
    {
      n = (int)v126;
      sub_65941410(v126, k);
      v24 = FormatString((int)v131, (int)"Skin {0}");
      v25 = *(_DWORD *)g_pILTClient;
      v142 = 2;
      v26 = std::string::c_str(v24);
      v27 = (void *)(*(int (__thiscall **)(int, int))(v25 + 72))(g_pILTClient, v26);
      v142 = -1;
      std::string::~string(v131);
      UiList_AddEntry(*(int ***)(this + 10572), v27, 33, k, 0);
      if ( k == *(unsigned __int16 *)(this + 7886) )
      {
        if ( v27 )
          v28 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v27);
        else
          v28 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 10572), (int)v28, 1);
      }
    }
    v29 = *(unsigned __int16 *)(this + 7886);
    v36 = *(unsigned __int16 *)(this + 7884) == 1;
    v139 = *(unsigned __int16 *)(this + 7884);
    *(_DWORD *)(*(_DWORD *)(this + 10576) + 32) = 1;
    v30 = *(_DWORD **)(this + 10576);
    v141 = v36;
    n = v29;
    PtrVector_FreeAll_thunk(v30);
    if ( *(_WORD *)(this + 7888) >= 0x1Cu )
    {
      v31 = 0;
      v32 = 0;
      while ( 1 )
      {
        v33 = v141 ? (unsigned __int16)word_659DC978[v32] : (unsigned __int16)word_659DC828[v32];
        if ( v33 == v29 )
          break;
        v32 += 6;
        ++v31;
        if ( v32 >= 168 )
          goto LABEL_54;
      }
      *(_WORD *)(this + 7888) = v31;
    }
LABEL_54:
    v34 = 0;
    v35 = 0;
    v138 = 0;
    do
    {
      if ( v141 )
        v36 = *(unsigned __int16 *)((char *)word_659DC978 + v35) == v29;
      else
        v36 = *(unsigned __int16 *)((char *)word_659DC828 + v35) == v29;
      if ( v36 )
      {
        v136 = v126;
        sub_65941410(v126, v34);
        v37 = FormatString((int)v131, (int)"Face {0}");
        v38 = *(_DWORD *)g_pILTClient;
        v142 = 3;
        v39 = std::string::c_str(v37);
        v40 = (void *)(*(int (__thiscall **)(int, int))(v38 + 72))(g_pILTClient, v39);
        v142 = -1;
        std::string::~string(v131);
        UiList_AddEntry(*(int ***)(this + 10576), v40, 35, v34, 0);
        if ( v34 == *(unsigned __int16 *)(this + 7888) )
        {
          if ( v40 )
            v41 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v40);
          else
            v41 = byte_659A8B98;
          UiList_SetSelectionText(*(_DWORD *)(this + 10576), (int)v41, 1);
        }
        v35 = v138;
        v29 = n;
      }
      v35 += 12;
      ++v34;
      v138 = v35;
    }
    while ( v35 < 336 );
    *(_DWORD *)(*(_DWORD *)(this + 10580) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10580));
    for ( m = 0; m < 23; ++m )
    {
      v136 = v126;
      sub_65941410(v126, m);
      v43 = FormatString((int)v131, (int)"Hair {0}");
      v44 = *(_DWORD *)g_pILTClient;
      v142 = 4;
      v45 = std::string::c_str(v43);
      v46 = (void *)(*(int (__thiscall **)(int, int))(v44 + 72))(g_pILTClient, v45);
      v142 = -1;
      std::string::~string(v131);
      UiList_AddEntry(*(int ***)(this + 10580), v46, 37, m, 0);
      if ( m == *(unsigned __int16 *)(this + 7890) )
      {
        if ( v46 )
          v47 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v46);
        else
          v47 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 10580), (int)v47, 1);
      }
    }
    v138 = m;
    v133 = 0;
    Source = 0;
    v135 = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10584) + 32) = 1;
    v48 = *(_DWORD **)(this + 10584);
    v142 = 5;
    PtrVector_FreeAll_thunk(v48);
    if ( v133 != Source )
      Source = v133;
    v49 = v139;
    sub_65935010(g_ItemTemplateById, v132, 11, v139, 0);
    sub_65935010(g_ItemTemplateById, v132, 13, v49, 0);
    if ( !*(_WORD *)(this + 7900) || *(unsigned __int16 *)(this + 7900) >= 0xBC1u )
      *(_WORD *)(this + 7900) = sub_65938820(g_ItemTemplateById, v49);
    v50 = (unsigned __int16 *)v133;
    n = (int)v133;
    if ( v133 != Source )
    {
      do
      {
        v51 = *v50;
        v136 = v126;
        String_FromU16(v126, v51);
        v52 = FormatString((int)v131, (int)"Torso {0}");
        v53 = *(_DWORD *)g_pILTClient;
        LOBYTE(v142) = 6;
        v54 = std::string::c_str(v52);
        v55 = (void *)(*(int (__thiscall **)(int, int))(v53 + 72))(g_pILTClient, v54);
        LOBYTE(v142) = 5;
        std::string::~string(v131);
        UiList_AddEntry(*(int ***)(this + 10584), v55, 39, v51, 0);
        if ( v51 == *(unsigned __int16 *)(this + 7900) )
        {
          if ( v55 )
            v56 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v55);
          else
            v56 = byte_659A8B98;
          UiList_SetSelectionText(*(_DWORD *)(this + 10584), (int)v56, 1);
        }
        v50 = (unsigned __int16 *)(n + 2);
        n = (int)v50;
      }
      while ( v50 != Source );
      v49 = v139;
    }
    *(_DWORD *)(*(_DWORD *)(this + 10592) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10592));
    if ( v133 != Source )
      Source = v133;
    sub_65935010(g_ItemTemplateById, v132, 12, v49, 0);
    sub_65935010(g_ItemTemplateById, v132, 14, v49, 0);
    if ( !*(_WORD *)(this + 7902) || *(unsigned __int16 *)(this + 7902) >= 0xBC1u )
      *(_WORD *)(this + 7902) = sub_659388F0(g_ItemTemplateById, v49);
    v57 = (unsigned __int16 *)v133;
    n = (int)v133;
    if ( v133 != Source )
    {
      do
      {
        v58 = *v57;
        v136 = v126;
        String_FromU16(v126, v58);
        v59 = FormatString((int)v131, (int)"Legs {0}");
        v60 = *(_DWORD *)g_pILTClient;
        LOBYTE(v142) = 7;
        v61 = std::string::c_str(v59);
        v62 = (void *)(*(int (__thiscall **)(int, int))(v60 + 72))(g_pILTClient, v61);
        LOBYTE(v142) = 5;
        std::string::~string(v131);
        UiList_AddEntry(*(int ***)(this + 10592), v62, 42, v58, 0);
        if ( v58 == *(unsigned __int16 *)(this + 7902) )
        {
          if ( v62 )
            v63 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v62);
          else
            v63 = byte_659A8B98;
          UiList_SetSelectionText(*(_DWORD *)(this + 10592), (int)v63, 1);
        }
        v57 = (unsigned __int16 *)(n + 2);
        n = (int)v57;
      }
      while ( v57 != Source );
      v49 = v139;
    }
    *(_DWORD *)(*(_DWORD *)(this + 10600) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10600));
    if ( v133 != Source )
      Source = v133;
    sub_65935010(g_ItemTemplateById, v132, 15, v49, 0);
    if ( !*(_WORD *)(this + 7904) || *(unsigned __int16 *)(this + 7904) >= 0xBC1u )
      *(_WORD *)(this + 7904) = sub_659389C0(g_ItemTemplateById, v49);
    v64 = (unsigned __int16 *)v133;
    n = (int)v133;
    if ( v133 != Source )
    {
      do
      {
        v65 = *v64;
        v136 = v126;
        String_FromU16(v126, v65);
        v66 = FormatString((int)v131, (int)"Shoes {0}");
        v67 = *(_DWORD *)g_pILTClient;
        LOBYTE(v142) = 8;
        v68 = std::string::c_str(v66);
        v69 = (void *)(*(int (__thiscall **)(int, int))(v67 + 72))(g_pILTClient, v68);
        LOBYTE(v142) = 5;
        std::string::~string(v131);
        UiList_AddEntry(*(int ***)(this + 10600), v69, 45, v65, 0);
        if ( v65 == *(unsigned __int16 *)(this + 7904) )
        {
          if ( v69 )
            v70 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v69);
          else
            v70 = byte_659A8B98;
          UiList_SetSelectionText(*(_DWORD *)(this + 10600), (int)v70, 1);
        }
        v64 = (unsigned __int16 *)(n + 2);
        n = (int)v64;
      }
      while ( v64 != Source );
      v49 = v139;
    }
    *(_DWORD *)(*(_DWORD *)(this + 10608) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10608));
    v71 = (char *)Source;
    if ( v133 != Source )
    {
      v71 = (char *)v133;
      Source = v133;
    }
    v72 = 0;
    n = 0;
    if ( v133 )
      v72 = (v135 - (int)v133) >> 1;
    if ( (v71 - (_BYTE *)v133) >> 1 >= v72 )
    {
      WordVector_InsertAt(v132, v71, 1u, (unsigned int)&n);
    }
    else
    {
      *(_WORD *)v71 = 0;
      Source = v71 + 2;
    }
    sub_65935010(g_ItemTemplateById, v132, 5, v49, 10);
    for ( n = (int)v133; (void *)n != Source; n += 2 )
    {
      v73 = *(_WORD *)n;
      if ( v138 <= 0 )
      {
        v75 = "None";
      }
      else
      {
        v136 = v126;
        String_FromU16(v126, v73);
        v74 = FormatString((int)v131, (int)"Gloves {0}");
        v140 |= 1u;
        LOBYTE(v142) = 9;
        v75 = (const char *)std::string::c_str(v74);
      }
      v76 = (void *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 72))(g_pILTClient, v75);
      v142 = 5;
      if ( (v140 & 1) != 0 )
      {
        v140 &= ~1u;
        std::string::~string(v131);
      }
      UiList_AddEntry(*(int ***)(this + 10608), v76, 48, v73, 0);
      if ( v73 == *(unsigned __int16 *)(this + 7922) )
      {
        if ( v76 )
          v77 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v76);
        else
          v77 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 10608), (int)v77, 1);
      }
    }
    *(_DWORD *)(*(_DWORD *)(this + 10616) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10616));
    v78 = (char *)Source;
    if ( v133 != Source )
    {
      v78 = (char *)v133;
      Source = v133;
    }
    v79 = 0;
    n = 0;
    if ( v133 )
      v79 = (v135 - (int)v133) >> 1;
    if ( (v78 - (_BYTE *)v133) >> 1 >= v79 )
    {
      WordVector_InsertAt(v132, v78, 1u, (unsigned int)&n);
    }
    else
    {
      *(_WORD *)v78 = 0;
      Source = v78 + 2;
    }
    sub_65935010(g_ItemTemplateById, v132, 5, v139, 5);
    for ( n = (int)v133; (void *)n != Source; n += 2 )
    {
      v80 = *(_WORD *)n;
      if ( v138 <= 0 )
      {
        v82 = "None";
      }
      else
      {
        v136 = v126;
        String_FromU16(v126, v80);
        v81 = FormatString((int)v131, (int)"Helmet {0}");
        v140 |= 2u;
        LOBYTE(v142) = 10;
        v82 = (const char *)std::string::c_str(v81);
      }
      v83 = (void *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 72))(g_pILTClient, v82);
      v142 = 5;
      if ( (v140 & 2) != 0 )
      {
        v140 &= ~2u;
        std::string::~string(v131);
      }
      UiList_AddEntry(*(int ***)(this + 10616), v83, 51, v80, 0);
      if ( v80 == *(unsigned __int16 *)(this + 7906) )
      {
        if ( v83 )
          v84 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v83);
        else
          v84 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 10616), (int)v84, 1);
      }
    }
    *(_DWORD *)(*(_DWORD *)(this + 10624) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10624));
    v85 = (char *)Source;
    if ( v133 != Source )
    {
      v85 = (char *)v133;
      Source = v133;
    }
    n = 0;
    if ( v133 )
      v86 = (v135 - (int)v133) >> 1;
    else
      v86 = 0;
    if ( (v85 - (_BYTE *)v133) >> 1 >= v86 )
    {
      WordVector_InsertAt(v132, v85, 1u, (unsigned int)&n);
    }
    else
    {
      *(_WORD *)v85 = 0;
      Source = v85 + 2;
    }
    sub_65935010(g_ItemTemplateById, v132, 7, v139, 0);
    for ( n = (int)v133; (void *)n != Source; n += 2 )
    {
      v87 = *(_WORD *)n;
      if ( v138 <= 0 )
      {
        v89 = "None";
      }
      else
      {
        v136 = v126;
        String_FromU16(v126, v87);
        v88 = FormatString((int)v131, (int)"Glasses {0}");
        v140 |= 4u;
        LOBYTE(v142) = 11;
        v89 = (const char *)std::string::c_str(v88);
      }
      v90 = (void *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 72))(g_pILTClient, v89);
      v142 = 5;
      if ( (v140 & 4) != 0 )
      {
        v140 &= ~4u;
        std::string::~string(v131);
      }
      UiList_AddEntry(*(int ***)(this + 10624), v90, 54, v87, 0);
      if ( v87 == *(unsigned __int16 *)(this + 7910) )
      {
        if ( v90 )
          v91 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v90);
        else
          v91 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 10624), (int)v91, 1);
      }
    }
    *(_DWORD *)(*(_DWORD *)(this + 10632) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10632));
    v92 = (char *)Source;
    if ( v133 != Source )
    {
      v92 = (char *)v133;
      Source = v133;
    }
    v93 = 0;
    n = 0;
    if ( v133 )
      v93 = (v135 - (int)v133) >> 1;
    if ( (v92 - (_BYTE *)v133) >> 1 >= v93 )
    {
      WordVector_InsertAt(v132, v92, 1u, (unsigned int)&n);
    }
    else
    {
      *(_WORD *)v92 = 0;
      Source = v92 + 2;
    }
    sub_65935010(g_ItemTemplateById, v132, 5, v139, 7);
    for ( n = (int)v133; (void *)n != Source; n += 2 )
    {
      v94 = *(_WORD *)n;
      if ( v138 <= 0 )
      {
        v96 = "None";
      }
      else
      {
        v136 = v126;
        String_FromU16(v126, v94);
        v95 = FormatString((int)v131, (int)"Shoulder Pads {0}");
        v140 |= 8u;
        LOBYTE(v142) = 12;
        v96 = (const char *)std::string::c_str(v95);
      }
      v97 = (void *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 72))(g_pILTClient, v96);
      v142 = 5;
      if ( (v140 & 8) != 0 )
      {
        v140 &= ~8u;
        std::string::~string(v131);
      }
      UiList_AddEntry(*(int ***)(this + 10632), v97, 57, v94, 0);
      if ( v94 == *(unsigned __int16 *)(this + 7912) )
      {
        if ( v97 )
          v98 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v97);
        else
          v98 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 10632), (int)v98, 1);
      }
    }
    *(_DWORD *)(*(_DWORD *)(this + 10640) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10640));
    v99 = (char *)Source;
    if ( v133 != Source )
    {
      v99 = (char *)v133;
      Source = v133;
    }
    v100 = 0;
    n = 0;
    if ( v133 )
      v100 = (v135 - (int)v133) >> 1;
    if ( (v99 - (_BYTE *)v133) >> 1 >= v100 )
    {
      WordVector_InsertAt(v132, v99, 1u, (unsigned int)&n);
    }
    else
    {
      *(_WORD *)v99 = 0;
      Source = v99 + 2;
    }
    sub_65935010(g_ItemTemplateById, v132, 5, v139, 9);
    for ( n = (int)v133; (void *)n != Source; n += 2 )
    {
      v101 = *(_WORD *)n;
      if ( v138 <= 0 )
      {
        v103 = "None";
      }
      else
      {
        v136 = v126;
        String_FromU16(v126, v101);
        v102 = FormatString((int)v131, (int)"Arm Pads {0}");
        v140 |= 0x10u;
        LOBYTE(v142) = 13;
        v103 = (const char *)std::string::c_str(v102);
      }
      v104 = (void *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 72))(g_pILTClient, v103);
      v142 = 5;
      if ( (v140 & 0x10) != 0 )
      {
        v140 &= ~0x10u;
        std::string::~string(v131);
      }
      UiList_AddEntry(*(int ***)(this + 10640), v104, 60, v101, 0);
      if ( v101 == *(unsigned __int16 *)(this + 7914) )
      {
        if ( v104 )
          v105 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v104);
        else
          v105 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 10640), (int)v105, 1);
      }
    }
    *(_DWORD *)(*(_DWORD *)(this + 10648) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10648));
    v106 = (char *)Source;
    if ( v133 != Source )
    {
      v106 = (char *)v133;
      Source = v133;
    }
    v107 = 0;
    n = 0;
    if ( v133 )
      v107 = (v135 - (int)v133) >> 1;
    if ( (v106 - (_BYTE *)v133) >> 1 >= v107 )
    {
      WordVector_InsertAt(v132, v106, 1u, (unsigned int)&n);
    }
    else
    {
      *(_WORD *)v106 = 0;
      Source = v106 + 2;
    }
    sub_65935010(g_ItemTemplateById, v132, 5, v139, 8);
    for ( n = (int)v133; (void *)n != Source; n += 2 )
    {
      v108 = *(_WORD *)n;
      if ( v138 <= 0 )
      {
        v110 = "None";
      }
      else
      {
        v136 = v126;
        String_FromU16(v126, v108);
        v109 = FormatString((int)v131, (int)"Torso Armor {0}");
        v140 |= 0x20u;
        LOBYTE(v142) = 14;
        v110 = (const char *)std::string::c_str(v109);
      }
      v111 = (void *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 72))(g_pILTClient, v110);
      v142 = 5;
      if ( (v140 & 0x20) != 0 )
      {
        v140 &= ~0x20u;
        std::string::~string(v131);
      }
      UiList_AddEntry(*(int ***)(this + 10648), v111, 63, v108, 0);
      if ( v108 == *(unsigned __int16 *)(this + 7916) )
      {
        if ( v111 )
          v112 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v111);
        else
          v112 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 10648), (int)v112, 1);
      }
    }
    *(_DWORD *)(*(_DWORD *)(this + 10656) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10656));
    v113 = (char *)Source;
    if ( v133 != Source )
    {
      v113 = (char *)v133;
      Source = v133;
    }
    v114 = 0;
    n = 0;
    if ( v133 )
      v114 = (v135 - (int)v133) >> 1;
    if ( (v113 - (_BYTE *)v133) >> 1 >= v114 )
    {
      WordVector_InsertAt(v132, v113, 1u, (unsigned int)&n);
    }
    else
    {
      *(_WORD *)v113 = 0;
      Source = v113 + 2;
    }
    sub_65935010(g_ItemTemplateById, v132, 5, v139, 11);
    for ( n = (int)v133; (void *)n != Source; n += 2 )
    {
      v115 = *(_WORD *)n;
      if ( v138 <= 0 )
      {
        v117 = "None";
      }
      else
      {
        v136 = v126;
        String_FromU16(v126, v115);
        v116 = FormatString((int)v130, (int)"Leg Pads {0}");
        v140 |= 0x40u;
        LOBYTE(v142) = 15;
        v117 = (const char *)std::string::c_str(v116);
      }
      v118 = (void *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 72))(g_pILTClient, v117);
      v142 = 5;
      if ( (v140 & 0x40) != 0 )
      {
        v140 &= ~0x40u;
        std::string::~string(v130);
      }
      UiList_AddEntry(*(int ***)(this + 10656), v118, 66, v115, 0);
      if ( v115 == *(unsigned __int16 *)(this + 7920) )
      {
        if ( v118 )
          v119 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v118);
        else
          v119 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 10656), (int)v119, 1);
      }
    }
    *(_DWORD *)(*(_DWORD *)(this + 10664) + 32) = 1;
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10664));
    for ( ii = 0; ii < 4; ++ii )
    {
      v121 = *(_DWORD *)g_pILTClient;
      Name = Personality_GetName(ii);
      v123 = (void *)(*(int (__thiscall **)(int, const char *))(v121 + 72))(g_pILTClient, Name);
      UiList_AddEntry(*(int ***)(this + 10664), v123, 69, ii, 0);
      if ( ii == *(unsigned __int8 *)(this + 7938) )
      {
        if ( v123 )
          v124 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v123);
        else
          v124 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 10664), (int)v124, 1);
      }
    }
    if ( v133 )
      operator delete(v133);
  }
  else
  {
    *(_DWORD *)(*(_DWORD *)(this + 10568) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10572) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10576) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10580) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10584) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10592) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10600) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10608) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10616) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10624) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10632) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10640) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10648) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10656) + 32) = 0;
    *(_DWORD *)(*(_DWORD *)(this + 10664) + 32) = 0;
  }
}
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 659DC828: using guessed type __int16 word_659DC828[];
// 659DC978: using guessed type __int16 word_659DC978[];
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6582D530) --------------------------------------------------------
void __thiscall ProductionWindow_PopulateTypeList(_DWORD *this)
{
  unsigned __int8 v1; // bl
  bool v2; // zf
  int v3; // ecx
  void *v4; // eax
  void *v5; // esi
  const char *v6; // eax
  char v7; // [esp+8h] [ebp-Ch]
  unsigned int v8; // [esp+Ch] [ebp-8h] BYREF
  _DWORD *v9; // [esp+10h] [ebp-4h]

  v9 = this;
  PtrVector_FreeAll_thunk((_DWORD *)*(this + 2677));
  v1 = 0;
  v7 = 0;
  do
  {
    v2 = v1 == 0;
    if ( v1 )
    {
      if ( !dword_659E2958[15 * v1] && v1 != 30 )
        goto LABEL_23;
      if ( v1 == 5 )
        goto LABEL_23;
      if ( dword_659E2964[15 * v1] )
      {
        v8 = 0;
        StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v8);
        if ( !Item_ValidateSlotForType(47, v8) )
          goto LABEL_23;
      }
      if ( dword_659E2960[15 * v1] )
      {
        v8 = 0;
        StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v8);
        if ( !Item_ValidateSlotForType(39, v8) )
          goto LABEL_23;
      }
      if ( dword_659E295C[15 * v1] )
      {
        v8 = 0;
        StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v8);
        if ( v8 < 2 )
          goto LABEL_23;
      }
      if ( *((_BYTE *)v9 + 8116) == 8 && !Production_IsValidTypeCombo(v7, 8, *((_BYTE *)v9 + 8122)) )
        goto LABEL_23;
      v2 = v1 == 0;
    }
    v3 = *(_DWORD *)g_pILTClient;
    if ( v2 )
      v4 = (void *)(*(int (__cdecl **)(int, int))(v3 + 64))(g_pILTClient, 3099);
    else
      v4 = (void *)(*(int (__cdecl **)(int, int))(v3 + 64))(g_pILTClient, v1 + 3100);
    v5 = v4;
    UiList_AddEntry((int **)v9[2677], v4, 80, v1, 0);
    if ( v1 == *((_BYTE *)v9 + 8117) )
    {
      if ( v5 )
        v6 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
      else
        v6 = byte_659A8B98;
      UiList_SetSelectionText(v9[2677], (int)v6, 1);
    }
LABEL_23:
    v7 = ++v1;
  }
  while ( v1 < 0x20u );
}
// 659E2958: using guessed type int dword_659E2958[];
// 659E295C: using guessed type int dword_659E295C[];
// 659E2960: using guessed type int dword_659E2960[];
// 659E2964: using guessed type int dword_659E2964[];
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6582D6D0) --------------------------------------------------------
unsigned __int8 __thiscall ProductionWindow_PopulateResourceList(int this)
{
  int v2; // ebx
  char v3; // al
  void *v4; // esi
  const char *v5; // eax
  unsigned __int8 result; // al
  unsigned __int8 v7; // [esp+Ch] [ebp-4h]

  PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10720));
  v7 = 0;
  v2 = 0;
  do
  {
    v3 = *(_BYTE *)(this + 8117);
    if ( !v3
      || (unsigned __int8)v3 >= 0x20u
      || IsValue2Or30_NotEqual(v3, 0)
      || Production_IsValidTypeCombo(*(_BYTE *)(this + 8117), v7, 0) )
    {
      v4 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v2 + 21600);
      UiList_AddEntry(*(int ***)(this + 10720), v4, 81, v2, 0);
      if ( v7 == *(_WORD *)(this + 8120) )
      {
        if ( v4 )
          v5 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
        else
          v5 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 10720), (int)v5, 1);
      }
    }
    result = v7 + 1;
    ++v2;
    v7 = result;
  }
  while ( result < 0x20u );
  return result;
}

//----- (6582D7A0) --------------------------------------------------------
unsigned __int8 __thiscall ProductionWindow_PopulateSortList(int this)
{
  int v2; // ebx
  void *v3; // esi
  const char *v4; // eax
  unsigned __int8 result; // al
  unsigned __int8 v6; // [esp+Fh] [ebp-1h]

  PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10716));
  v6 = 0;
  v2 = 0;
  do
  {
    v3 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v2 + 29900);
    UiList_AddEntry(*(int ***)(this + 10716), v3, 87, v2, 0);
    if ( v6 == *(_BYTE *)(this + 8118) )
    {
      if ( v3 )
        v4 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
      else
        v4 = byte_659A8B98;
      UiList_SetSelectionText(*(_DWORD *)(this + 10716), (int)v4, 1);
    }
    result = v6 + 1;
    ++v2;
    v6 = result;
  }
  while ( result < 0x19u );
  return result;
}

//----- (6582D830) --------------------------------------------------------
unsigned __int8 __thiscall ProductionWindow_PopulateCategoryList(int this)
{
  int v2; // ebx
  void *v3; // esi
  const char *v4; // eax
  unsigned __int8 result; // al
  unsigned __int8 v6; // [esp+Fh] [ebp-1h]

  PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10712));
  v6 = 0;
  v2 = 0;
  do
  {
    v3 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v2 + 22610);
    UiList_AddEntry(*(int ***)(this + 10712), v3, 85, v2, 0);
    if ( v6 == *(_BYTE *)(this + 8116) )
    {
      if ( v3 )
        v4 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
      else
        v4 = byte_659A8B98;
      UiList_SetSelectionText(*(_DWORD *)(this + 10712), (int)v4, 1);
    }
    result = v6 + 1;
    ++v2;
    v6 = result;
  }
  while ( result < 0xFu );
  return result;
}

//----- (6582D8C0) --------------------------------------------------------
void __thiscall ProductionWindow_PopulateItemList(int this)
{
  unsigned __int16 v2; // si
  unsigned __int8 v3; // al
  void *v4; // edi
  const char *v5; // eax
  int v6; // [esp+Ch] [ebp-4h]

  PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10720));
  v2 = 0;
  v6 = 0;
  do
  {
    v3 = *(_BYTE *)(this + 8118);
    if ( !v3 || v3 >= 0x19u || ItemTemplate_GetType(g_ItemTemplateById, v2) == *(unsigned __int8 *)(this + 8118) )
    {
      switch ( *(_BYTE *)(this + 8116) )
      {
        case 5:
          if ( ItemId_IsUsable(g_ItemTemplateById, v2) )
            goto LABEL_7;
          break;
        case 7:
          if ( sub_65933490(v2) )
            goto LABEL_7;
          break;
        case 8:
          if ( sub_65932430(v2) )
            goto LABEL_7;
          break;
        case 9:
          if ( ItemTemplate_GetType(g_ItemTemplateById, v2) == 16 )
            goto LABEL_7;
          break;
        case 0xE:
          switch ( ItemTemplate_GetType(g_ItemTemplateById, v2) )
          {
            case 3:
            case 5:
            case 6:
            case 20:
            case 23:
              goto LABEL_7;
            default:
              goto LABEL_19;
          }
        default:
LABEL_7:
          v4 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v6 + 30000);
          UiList_AddEntry(*(int ***)(this + 10720), v4, 89, v6, 0);
          if ( v2 == *(_WORD *)(this + 8120) )
          {
            if ( v4 )
              v5 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
            else
              v5 = byte_659A8B98;
            UiList_SetSelectionText(*(_DWORD *)(this + 10720), (int)v5, 1);
          }
          break;
      }
    }
LABEL_19:
    ++v6;
    ++v2;
  }
  while ( v2 < 0xBC1u );
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6582DA50) --------------------------------------------------------
void __thiscall ProductionWindow_PopulateClassList(int this)
{
  unsigned int i; // esi
  char *Entry; // eax
  void *v4; // edi
  const char *v5; // eax
  char v6[95]; // [esp+4h] [ebp-74h] BYREF
  char v7; // [esp+63h] [ebp-15h]
  char Buffer[16]; // [esp+64h] [ebp-14h] BYREF

  PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10724));
  if ( !*(_WORD *)(this + 8120) )
    return;
  v7 = 0;
  for ( i = 0; i <= 0xA; ++i )
  {
    if ( *(_BYTE *)(this + 8116) == 4 )
    {
      Entry = ItemStatModifierTable_GetEntry(*(unsigned __int16 *)(this + 8120));
      if ( !Entry || !i || i > (unsigned __int8)Entry[9] )
        continue;
    }
    else if ( !ItemTemplate_CopyVariantByIndex(*(_WORD *)(this + 8120), 0, v6) )
    {
      continue;
    }
    if ( !i )
      v7 = 1;
    sub_659480D0(Buffer, i);
    v4 = (void *)(*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 6065, Buffer);
    UiList_AddEntry(*(int ***)(this + 10724), v4, 91, i, 0);
    if ( i == *(unsigned __int8 *)(this + 8122) )
    {
      if ( v4 )
        v5 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
      else
        v5 = byte_659A8B98;
      UiList_SetSelectionText(*(_DWORD *)(this + 10724), (int)v5, 1);
    }
  }
  if ( !v7 && !*(_BYTE *)(this + 8122) )
    UiList_SetSelectionText(*(_DWORD *)(this + 10724), (int)"- Unspecified Class -", 1);
}

//----- (6582DC00) --------------------------------------------------------
void __thiscall ProductionWindow_PopulateAlienList(int this)
{
  __int16 v2; // si
  int v3; // ebx
  void *v4; // eax
  int *v5; // [esp+Ch] [ebp-8h]
  int v6; // [esp+10h] [ebp-4h]

  PtrVector_FreeAll_thunk(*(_DWORD **)(this + 10720));
  v2 = 1;
  v6 = 1;
  v5 = &dword_65AC9774;
  do
  {
    v3 = *v5;
    if ( *v5 )
    {
      v4 = (void *)(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 72))(
                     g_pILTClient,
                     *(_DWORD *)(v3 + 4));
      UiList_AddEntry(*(int ***)(this + 10720), v4, 82, v6, 0);
      if ( v2 == *(_WORD *)(this + 8120) )
        UiList_SetSelectionText(*(_DWORD *)(this + 10720), *(_DWORD *)(v3 + 4), 1);
    }
    ++v6;
    ++v5;
    ++v2;
  }
  while ( (unsigned __int16)v2 < 0x14u );
  if ( !*(_WORD *)(this + 8120) )
    UiList_SetSelectionText(*(_DWORD *)(this + 10720), (int)"- Unspecified Alien -", 1);
}
// 65AC9774: using guessed type int dword_65AC9774;

//----- (6582DD70) --------------------------------------------------------
int __thiscall ProductionWindow_OnQueueAdd(char **this, int a2, char *a3)
{
  int result; // eax

  result = (int)*(this + 2012);
  if ( result == a2 )
  {
    Vector76_PushBack(this + 2579, a3);
    return ProductionWindow_RefreshList(this);
  }
  return result;
}

//----- (6582DDA0) --------------------------------------------------------
void __thiscall ProductionWindow_RefreshSubList(int this)
{
  switch ( *(_BYTE *)(this + 8116) )
  {
    case 3:
      ProductionWindow_PopulateAlienList(this);
      break;
    case 4:
      JUMPOUT(0x6582DCB0);
    case 6:
      ProductionWindow_PopulateResourceList(this);
      break;
    case 0xA:
      JUMPOUT(0x6582DB80);
    default:
      ProductionWindow_PopulateItemList(this);
      break;
  }
}
// 6582DDBB: control flows out of bounds to 6582DCB0
// 6582DDC5: control flows out of bounds to 6582DB80

//----- (6582DDF0) --------------------------------------------------------
void __thiscall sub_6582DDF0(int this)
{
  unsigned int v2; // eax
  int v3; // eax
  char *v4; // eax
  bool v5; // zf
  int v6; // ecx
  unsigned __int16 v7; // dx
  int v8; // eax
  char *v9; // eax
  _BYTE v10[24]; // [esp-24h] [ebp-74h] BYREF
  char *v11; // [esp-Ch] [ebp-5Ch]
  int v12; // [esp-8h] [ebp-58h]
  char *v13; // [esp-4h] [ebp-54h]
  _BYTE v14[28]; // [esp+8h] [ebp-48h] BYREF
  _BYTE v15[28]; // [esp+24h] [ebp-2Ch] BYREF
  _BYTE *v16; // [esp+40h] [ebp-10h]
  int v17; // [esp+4Ch] [ebp-4h]

  v2 = *(_DWORD *)(this + 8048);
  v13 = 0;
  v12 = 0;
  v16 = v10;
  String_FromU32(v10, v2);
  v3 = FormatString((int)v15, (int)&unk_659C45C8);
  v17 = 0;
  v4 = (char *)std::string::c_str(v3);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 10700), v4, v12, v13);
  v17 = -1;
  std::string::~string(v15);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 10692), (char *)(this + 8052), 0, 0);
  v5 = *(_BYTE *)(this + 8196) == 0;
  v6 = *(_DWORD *)(this + 10696);
  v13 = 0;
  v12 = 0;
  if ( v5 )
    v11 = (char *)byte_659A8B98;
  else
    v11 = "Published, can't be edited!";
  UiText_SetValueIfChanged(v6, v11, v12, v13);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 10748), (char *)(this + 8268), 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 10736), (char *)(this + 8128), 0, 0);
  v7 = *(_WORD *)(this + 8194);
  v13 = 0;
  v12 = 0;
  v16 = v10;
  String_FromU16(v10, v7);
  v8 = FormatString((int)v14, (int)&unk_659C45C8);
  v17 = 1;
  v9 = (char *)std::string::c_str(v8);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 10728), v9, v12, v13);
  v17 = -1;
  std::string::~string(v14);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 10744), (char *)byte_659A8B98, 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 10756), (char *)byte_659A8B98, 0, 0);
  ProductionWindow_PopulateCategoryList(this);
  ProductionWindow_RefreshList((_DWORD *)this);
  sub_65829CA0(this);
  ProductionWindow_PopulateTypeList((_DWORD *)this);
  ProductionWindow_PopulateSortList(this);
  ProductionWindow_RefreshSubList(this);
  ProductionWindow_PopulateClassList(this);
}
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (6582DF90) --------------------------------------------------------
char __thiscall sub_6582DF90(int this, char a2)
{
  int v3; // ecx
  __int16 v4; // ax
  const char *v5; // edx
  int v6; // ecx
  _DWORD *v7; // eax
  unsigned __int16 v8; // ax
  unsigned __int16 v9; // ax
  int v10; // ecx
  unsigned __int16 v11; // ax
  unsigned __int8 v12; // al
  bool v13; // cf
  int v14; // ecx
  unsigned __int16 v15; // ax
  unsigned __int16 v16; // ax
  unsigned __int16 v17; // ax
  int v18; // ecx
  unsigned __int16 v19; // ax
  unsigned __int8 v20; // al
  char result; // al

  *(_DWORD *)(*(_DWORD *)(this + 10708) + 32) = 0;
  *(_DWORD *)(*(_DWORD *)(this + 10716) + 32) = 0;
  *(_DWORD *)(*(_DWORD *)(this + 10720) + 32) = 0;
  *(_DWORD *)(*(_DWORD *)(this + 10724) + 32) = 0;
  *(_DWORD *)(*(_DWORD *)(this + 10728) + 28) = 0;
  *(float *)(*(_DWORD *)(this + 10728) + 508) = 0.5;
  (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 10736) + 88))(*(_DWORD *)(this + 10736), 0);
  *(_DWORD *)(*(_DWORD *)(this + 10736) + 28) = 0;
  *(float *)(*(_DWORD *)(this + 10732) + 508) = 0.5;
  *(float *)(*(_DWORD *)(this + 10736) + 508) = 0.5;
  *(_DWORD *)(*(_DWORD *)(this + 10740) + 32) = 0;
  *(_DWORD *)(*(_DWORD *)(this + 10752) + 32) = 0;
  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  if ( a2 )
  {
    ProductionWindow_PopulateTypeList((_DWORD *)this);
    ProductionWindow_PopulateSortList(this);
    ProductionWindow_RefreshSubList(this);
    ProductionWindow_PopulateClassList(this);
  }
  v3 = *(_DWORD *)(this + 10728);
  if ( *(_DWORD *)(v3 + 176) )
    v4 = atoi(*(const char **)(v3 + 176));
  else
    v4 = 0;
  *(_WORD *)(this + 8194) = v4;
  switch ( *(_BYTE *)(this + 8116) )
  {
    case 1:
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 10736) + 88))(*(_DWORD *)(this + 10736), 1);
      *(_DWORD *)(*(_DWORD *)(this + 10736) + 28) = 1;
      *(float *)(*(_DWORD *)(this + 10732) + 508) = *(float *)(this + 6300);
      *(float *)(*(_DWORD *)(this + 10736) + 508) = *(float *)(this + 6300);
      *(_DWORD *)(*(_DWORD *)(this + 10708) + 32) = 1;
      if ( !a2 )
      {
        v5 = *(const char **)(*(_DWORD *)(this + 10736) + 176);
        if ( !v5
          || strlen(*(const char **)(*(_DWORD *)(this + 10736) + 176)) < 2
          || !_stricmp(v5, (const char *)(this + 8128)) )
        {
          if ( *(_DWORD *)(this + 8124) )
            goto LABEL_13;
        }
        else
        {
          *(_DWORD *)(*(_DWORD *)(this + 10740) + 32) = 1;
          UiText_SetValueIfChanged(*(_DWORD *)(this + 10744), (char *)byte_659A8B98, 0, 0);
        }
      }
      goto LABEL_68;
    case 2:
      *(_DWORD *)(*(_DWORD *)(this + 10752) + 32) = 1;
      if ( !a2 )
        goto LABEL_14;
      goto LABEL_68;
    case 3:
      v7 = *(_DWORD **)(this + 10720);
      v7[6] = 1;
      v7[50] = 1;
      v7[8] = 1;
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 10728) + 88))(*(_DWORD *)(this + 10728), 1);
      *(_DWORD *)(*(_DWORD *)(this + 10728) + 28) = 1;
      *(float *)(*(_DWORD *)(this + 10728) + 508) = *(float *)(this + 6300);
      if ( !a2 )
      {
        v8 = *(_WORD *)(this + 8120);
        if ( v8 )
        {
          if ( v8 < 0x14u && *(_WORD *)(this + 8194) )
            *(_DWORD *)(*(_DWORD *)(this + 10752) + 32) = 1;
        }
      }
      goto LABEL_68;
    case 4:
      *(_DWORD *)(*(_DWORD *)(this + 10720) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 10716) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 10724) + 32) = 1;
      if ( !a2 )
      {
        *(_WORD *)(this + 8194) = 1;
        UiText_SetValueIfChanged(*(_DWORD *)(this + 10728), "1", 0, 0);
        v9 = *(_WORD *)(this + 8120);
        if ( v9 )
        {
          if ( v9 < 0x74u && *(_BYTE *)(this + 8122) )
            goto LABEL_67;
        }
      }
      goto LABEL_68;
    case 5:
      *(_DWORD *)(*(_DWORD *)(this + 10716) + 32) = 1;
      v10 = *(_DWORD *)(this + 10720);
      goto LABEL_28;
    case 6:
      *(_DWORD *)(*(_DWORD *)(this + 10708) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 10720) + 32) = 1;
      if ( !a2 )
      {
        v14 = *(_DWORD *)(this + 10728);
        *(_WORD *)(this + 8194) = 1;
        UiText_SetValueIfChanged(v14, "1", 0, 0);
        v15 = *(_WORD *)(this + 8120);
        if ( v15 )
        {
          if ( v15 < 0x10u )
            *(_DWORD *)(*(_DWORD *)(this + 10752) + 32) = 1;
        }
      }
      goto LABEL_68;
    case 7:
      *(_DWORD *)(*(_DWORD *)(this + 10708) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 10720) + 32) = 1;
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 10728) + 88))(*(_DWORD *)(this + 10728), 1);
      *(_DWORD *)(*(_DWORD *)(this + 10728) + 28) = 1;
      *(float *)(*(_DWORD *)(this + 10728) + 508) = *(float *)(this + 6300);
      if ( !a2 )
      {
        v16 = *(_WORD *)(this + 8120);
        if ( v16 )
        {
          if ( v16 < 0xBC1u && *(_WORD *)(this + 8194) )
            *(_DWORD *)(*(_DWORD *)(this + 10752) + 32) = 1;
        }
      }
      goto LABEL_68;
    case 8:
      *(_DWORD *)(*(_DWORD *)(this + 10708) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 10720) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 10716) + 32) = 1;
      v10 = *(_DWORD *)(this + 10724);
LABEL_28:
      *(_DWORD *)(v10 + 32) = 1;
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 10728) + 88))(*(_DWORD *)(this + 10728), 1);
      *(_DWORD *)(*(_DWORD *)(this + 10728) + 28) = 1;
      *(float *)(*(_DWORD *)(this + 10728) + 508) = *(float *)(this + 6300);
      if ( a2 )
        goto LABEL_68;
      v11 = *(_WORD *)(this + 8120);
      if ( v11 && v11 < 0xBC1u )
        goto LABEL_34;
      v12 = *(_BYTE *)(this + 8118);
      if ( v12 )
      {
        v13 = v12 < 0x19u;
LABEL_33:
        if ( v13 )
        {
LABEL_34:
          if ( *(_WORD *)(this + 8194) )
LABEL_67:
            *(_DWORD *)(*(_DWORD *)(this + 10752) + 32) = 1;
        }
      }
LABEL_68:
      result = *(_BYTE *)(this + 8116);
      if ( result )
      {
        if ( (unsigned __int8)result < 0xFu )
        {
          result = sub_65948020(*(const char **)(*(_DWORD *)(this + 10748) + 176));
          if ( result
            || (result = sub_65948020(*(const char **)(*(_DWORD *)(this + 10692) + 176))) != 0
            || *(_BYTE *)(this + 8196) )
          {
            *(_DWORD *)(*(_DWORD *)(this + 10752) + 32) = 0;
          }
        }
      }
      return result;
    case 9:
      *(_DWORD *)(*(_DWORD *)(this + 10708) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 10720) + 32) = 1;
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 10728) + 88))(*(_DWORD *)(this + 10728), 1);
      *(_DWORD *)(*(_DWORD *)(this + 10728) + 28) = 1;
      *(float *)(*(_DWORD *)(this + 10728) + 508) = *(float *)(this + 6300);
      if ( a2 )
        goto LABEL_68;
      v17 = *(_WORD *)(this + 8120);
      if ( !v17 )
        goto LABEL_68;
      v13 = v17 < 0xBC1u;
      goto LABEL_33;
    case 0xA:
      *(_DWORD *)(*(_DWORD *)(this + 10708) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 10720) + 32) = 1;
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 10728) + 88))(*(_DWORD *)(this + 10728), 1);
      *(_DWORD *)(*(_DWORD *)(this + 10728) + 28) = 1;
      *(float *)(*(_DWORD *)(this + 10728) + 508) = *(float *)(this + 6300);
      if ( !a2 && *(_WORD *)(this + 8120) && *(_WORD *)(this + 8194) )
        *(_DWORD *)(*(_DWORD *)(this + 10752) + 32) = 1;
      goto LABEL_68;
    case 0xB:
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 10736) + 88))(*(_DWORD *)(this + 10736), 1);
      *(_DWORD *)(*(_DWORD *)(this + 10736) + 28) = 1;
      *(float *)(*(_DWORD *)(this + 10732) + 508) = *(float *)(this + 6300);
      *(float *)(*(_DWORD *)(this + 10736) + 508) = *(float *)(this + 6300);
      *(_DWORD *)(*(_DWORD *)(this + 10708) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 10720) + 32) = 1;
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 10728) + 88))(*(_DWORD *)(this + 10728), 1);
      *(_DWORD *)(*(_DWORD *)(this + 10728) + 28) = 1;
      *(float *)(*(_DWORD *)(this + 10728) + 508) = *(float *)(this + 6300);
      *(_DWORD *)(*(_DWORD *)(this + 10716) + 32) = 1;
      if ( !a2 )
      {
        strncpy_s((char *)(this + 8128), 0x40u, *(const char **)(*(_DWORD *)(this + 10736) + 176), 0xFFFFFFFF);
        if ( !sub_65948020(*(const char **)(*(_DWORD *)(this + 10736) + 176)) )
        {
          if ( *(_WORD *)(this + 8194) )
            *(_DWORD *)(*(_DWORD *)(this + 10752) + 32) = 1;
        }
      }
      goto LABEL_68;
    case 0xC:
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 10736) + 88))(*(_DWORD *)(this + 10736), 1);
      *(_DWORD *)(*(_DWORD *)(this + 10736) + 28) = 1;
      *(float *)(*(_DWORD *)(this + 10732) + 508) = *(float *)(this + 6300);
      *(float *)(*(_DWORD *)(this + 10736) + 508) = *(float *)(this + 6300);
      if ( !a2 && !sub_65948020(*(const char **)(*(_DWORD *)(this + 10736) + 176)) )
      {
        strncpy_s((char *)(this + 8128), 0x40u, *(const char **)(*(_DWORD *)(this + 10736) + 176), 0xFFFFFFFF);
LABEL_13:
        *(_DWORD *)(*(_DWORD *)(this + 10752) + 32) = 1;
LABEL_14:
        v6 = *(_DWORD *)(this + 10728);
        *(_WORD *)(this + 8194) = 1;
        UiText_SetValueIfChanged(v6, "1", 0, 0);
      }
      goto LABEL_68;
    case 0xD:
      *(_DWORD *)(*(_DWORD *)(this + 10708) + 32) = 1;
      if ( a2 )
        goto LABEL_68;
      *(_WORD *)(this + 8194) = 1;
      UiText_SetValueIfChanged(*(_DWORD *)(this + 10728), "1", 0, 0);
      goto LABEL_67;
    case 0xE:
      *(_DWORD *)(*(_DWORD *)(this + 10720) + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(this + 10716) + 32) = 1;
      if ( !a2 )
      {
        v18 = *(_DWORD *)(this + 10728);
        *(_WORD *)(this + 8194) = 1;
        UiText_SetValueIfChanged(v18, "1", 0, 0);
        v19 = *(_WORD *)(this + 8120);
        if ( v19 )
        {
          if ( v19 < 0xBC1u )
            goto LABEL_67;
        }
        v20 = *(_BYTE *)(this + 8118);
        if ( v20 )
        {
          if ( v20 < 0x19u )
            goto LABEL_67;
        }
      }
      goto LABEL_68;
    default:
      goto LABEL_68;
  }
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6582F451) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_6582F451@<eax>(int a1@<ecx>, _BYTE *a2@<ebx>, char a3@<dil>, int a4, int a5, int a6)
{
  sub_6582C170(a1);
  sub_65828060(a2, a3);
  a2[10388] = 1;
  return 1;
}
// 658311F6: positive sp value 14 has been found

//----- (65831390) --------------------------------------------------------
void __thiscall sub_65831390(unsigned int **this, _DWORD *a2)
{
  _DWORD *v2; // edi
  unsigned int **v3; // esi
  int v4; // ecx
  int v5; // ebx
  unsigned __int8 v6; // al
  unsigned int v7; // eax
  int v8; // eax
  const char *v9; // edi
  int v10; // eax
  int v11; // eax
  int (__thiscall ***v12)(_DWORD, int); // eax
  _DWORD *v13; // edi
  int (__thiscall **v14)(_DWORD, int); // edx
  int (__thiscall **v15)(_DWORD, int); // eax
  int v16; // eax
  int (__thiscall ***v17)(_DWORD, int); // eax
  int v18; // esi
  int (__thiscall **v19)(_DWORD, int); // edx
  int v20; // eax
  int *v21; // eax
  _DWORD *v22; // eax
  unsigned __int8 Value; // al
  _DWORD *v24; // eax
  unsigned __int8 v25; // al
  int v26; // edx
  _DWORD *v27; // eax
  unsigned int *v28; // esi
  _BYTE v29[16]; // [esp-38h] [ebp-150h] BYREF
  int v30; // [esp-28h] [ebp-140h]
  int v31; // [esp-24h] [ebp-13Ch]
  int v32; // [esp-20h] [ebp-138h]
  int v33; // [esp-1Ch] [ebp-134h] BYREF
  int v34; // [esp-18h] [ebp-130h]
  _DWORD *v35; // [esp-14h] [ebp-12Ch]
  int v36; // [esp-10h] [ebp-128h]
  int v37; // [esp-Ch] [ebp-124h]
  int *v38; // [esp-8h] [ebp-120h]
  int v39; // [esp-4h] [ebp-11Ch]
  _BYTE v40[28]; // [esp+10h] [ebp-108h] BYREF
  _DWORD *v41; // [esp+2Ch] [ebp-ECh]
  int *v42; // [esp+30h] [ebp-E8h]
  int v43; // [esp+34h] [ebp-E4h]
  int v44; // [esp+38h] [ebp-E0h]
  int *v45; // [esp+3Ch] [ebp-DCh]
  unsigned int **v46; // [esp+40h] [ebp-D8h]
  unsigned int *Simple; // [esp+44h] [ebp-D4h]
  _DWORD v48[2]; // [esp+48h] [ebp-D0h] BYREF
  char Destination[28]; // [esp+50h] [ebp-C8h] BYREF
  int v50; // [esp+6Ch] [ebp-ACh]
  int v51; // [esp+B0h] [ebp-68h]
  _BYTE v52[28]; // [esp+B4h] [ebp-64h] BYREF
  _BYTE v53[28]; // [esp+D0h] [ebp-48h] BYREF
  _BYTE v54[28]; // [esp+ECh] [ebp-2Ch] BYREF
  int v55; // [esp+114h] [ebp-4h]

  v2 = a2;
  v3 = this;
  v46 = this;
  v41 = a2;
  if ( *a2 )
  {
    sub_658265B0(this + 1963, a2);
    sub_6582C170((int)v3);
    sub_65828060(v3, 1);
    v39 = 61;
    *((_BYTE *)v3 + 10388) = 0;
    WindowMgr_SelectGroup((int *)v3, v39);
    ListBox_ClearItems((int *)v3[2671]);
    std::string::string(v52);
    v55 = 0;
    std::string::string(v53);
    LOBYTE(v55) = 1;
    std::string::string(v54);
    LOBYTE(v55) = 2;
    UiTextStyle_Ctor(v48);
    v48[0] = 28;
    v51 = 0;
    v48[1] = 10;
    v50 = 1;
    strncpy_s(Destination, 0x10u, "ffae0000", 0xFFFFFFFF);
    v4 = a2[47] - a2[46];
    if ( v4 / 2324 )
    {
      v44 = 0;
      v43 = v4 / 2324;
      while ( 1 )
      {
        v5 = v44 + v2[46];
        if ( v5 )
        {
          v6 = *(_BYTE *)(v5 + 68);
          if ( v6 )
          {
            if ( v6 < 0xFu )
            {
              if ( (unsigned __int8)sub_65833120(v5, v52, v54, 1, 0) )
              {
                Simple = (unsigned int *)UiWidget_CreateSimple(0, 0, 0, 0, 0, 0);
                if ( Simple )
                {
                  v7 = *(_DWORD *)v5;
                  v45 = &v33;
                  String_FromU32(&v33, v7);
                  v42 = (int *)v29;
                  LOBYTE(v55) = 3;
                  String_AssignFromPtr(v29, (int)"FFFFFF00");
                  LOBYTE(v55) = 2;
                  v8 = FormatString_Args((int)v40, (int)"<font color='{0}'>({1}) ");
                  LOBYTE(v55) = 4;
                  std::string::operator=(v53, v8);
                  LOBYTE(v55) = 2;
                  std::string::~string(v40);
                  v9 = "00FF0000";
                  if ( !*(_BYTE *)(v5 + 148) )
                    v9 = "ffae0000";
                  v42 = &v33;
                  sub_65941900(&v33, v52);
                  v45 = (int *)v29;
                  LOBYTE(v55) = 5;
                  String_AssignFromPtr(v29, (int)v9);
                  LOBYTE(v55) = 2;
                  v10 = FormatString_Args((int)v40, (int)"<font color='{0}'>{1}");
                  LOBYTE(v55) = 6;
                  std::string::operator+=(v53, v10);
                  LOBYTE(v55) = 2;
                  std::string::~string(v40);
                  v39 = 0;
                  v38 = 0;
                  v37 = 0;
                  v36 = 2;
                  v35 = v48;
                  v34 = 1;
                  v33 = 0;
                  v32 = 0;
                  v31 = 300;
                  v30 = 256;
                  v11 = std::string::c_str(v53);
                  v12 = UiWidget_Create(v3, 0, v11, v30, v31, v32, v33, v34, (int)v35, v36, v37, (int)v38, v39);
                  v13 = v12;
                  if ( v12 )
                  {
                    v14 = v12[19];
                    v15 = v12[20];
                    v39 = 0;
                    v38 = 0;
                    v37 = 0;
                    v36 = 2;
                    v35 = &unk_65A5CD84;
                    v34 = 0;
                    v33 = 0;
                    v32 = 33;
                    v31 = 300;
                    v30 = 1024;
                    v13[21] = 4;
                    v13[22] = 3;
                    v13[17] = v14 + 1;
                    v13[18] = (char *)v15 + 3;
                    v16 = std::string::c_str(v54);
                    v17 = UiWidget_Create(v3, 0, v16, v30, v31, v32, v33, v34, (int)v35, v36, v37, (int)v38, v39);
                    v18 = (int)v17;
                    if ( v17 )
                    {
                      v19 = v17[20];
                      v17[17] = v17[19] + 1;
                      v39 = (int)"last edited by <font color='BFC7FF00'>";
                      v17[21] = (int (__thiscall **)(_DWORD, int))4;
                      v17[22] = (int (__thiscall **)(_DWORD, int))13;
                      v17[18] = (int (__thiscall **)(_DWORD, int))((char *)v19 + 13);
                      std::string::operator=(v54, v39);
                      std::string::operator+=(v54, v5 + 2304);
                      v39 = 0;
                      v38 = 0;
                      v37 = 0;
                      v36 = 2;
                      v35 = &unk_65A5CE5C;
                      v34 = 1;
                      v33 = 0;
                      v32 = 0;
                      v31 = 283;
                      v30 = 64;
                      v20 = std::string::c_str(v54);
                      v21 = (int *)UiWidget_Create(
                                     v46,
                                     0,
                                     v20,
                                     v30,
                                     v31,
                                     v32,
                                     v33,
                                     v34,
                                     (int)v35,
                                     v36,
                                     v37,
                                     (int)v38,
                                     v39);
                      v45 = v21;
                      if ( v21 )
                      {
                        CWindow_SetOffset(v21, 10, 27);
                        v22 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 880);
                        LinkedList_AddNode(Simple, v22, 8, *(_DWORD *)v5, 0);
                        if ( !*(_BYTE *)(v5 + 148) )
                        {
                          Value = StatGroup5_GetValue();
                          if ( Item_ValidateSlotForType(28, Value) )
                          {
                            v24 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                                              g_pILTClient,
                                              9007);
                            LinkedList_AddNode(Simple, v24, 71, *(_DWORD *)v5, 0);
                          }
                        }
                        v25 = StatGroup5_GetValue();
                        if ( Item_ValidateSlotForType(30, v25) )
                        {
                          v26 = *(_DWORD *)g_pILTClient;
                          if ( *(_BYTE *)(v5 + 148) )
                          {
                            v27 = (_DWORD *)(*(int (__cdecl **)(int, int))(v26 + 64))(g_pILTClient, 9055);
                            v39 = 0;
                          }
                          else
                          {
                            v27 = (_DWORD *)(*(int (__cdecl **)(int, int))(v26 + 64))(g_pILTClient, 9054);
                            v39 = 1;
                          }
                          LinkedList_AddNode(Simple, v27, 103, *(_DWORD *)v5, v39);
                        }
                        v39 = 0;
                        v38 = v45;
                        v37 = v18;
                        v28 = Simple;
                        Button_AddCallbacks((int)Simple, (int)v13);
                        ListBox_AddItem(v46[2671], (int)v28);
                      }
                    }
                    v3 = v46;
                  }
                }
              }
            }
          }
        }
        v44 += 2324;
        if ( !--v43 )
          break;
        v2 = v41;
      }
    }
    ListBox_RefreshDisplay((int *)v3[2671]);
    ListBox_Reset(v3[2671]);
    LOBYTE(v55) = 1;
    std::string::~string(v54);
    LOBYTE(v55) = 0;
    std::string::~string(v53);
    v55 = -1;
    std::string::~string(v52);
  }
}
// 658265B0: using guessed type int __thiscall sub_658265B0(_DWORD, _DWORD);
// 65833120: using guessed type int __cdecl sub_65833120(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 65941900: using guessed type int __thiscall sub_65941900(_DWORD, _DWORD);
// 659A8274: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A8288: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (658318A0) --------------------------------------------------------
int __thiscall sub_658318A0(int this, int a2)
{
  unsigned __int8 v3; // al
  unsigned __int16 v4; // ax
  unsigned int v5; // eax

  v3 = *(_BYTE *)(this + 6372);
  if ( v3 && v3 < 0x19u && (v4 = *(_WORD *)(this + 6374)) != 0 && v4 < 0xBC1u
    || atoi(*(const char **)(*(_DWORD *)(this + 6388) + 176)) > 0
    || (v5 = *(_DWORD *)(this + 6380)) != 0 && v5 < 0x74 )
  {
    *(_DWORD *)(*(_DWORD *)(this + 6420) + 32) = 1;
    return CWindow_UpdateChildren((char *)this, a2);
  }
  else
  {
    *(_DWORD *)(*(_DWORD *)(this + 6420) + 32) = 0;
    return CWindow_UpdateChildren((char *)this, a2);
  }
}

//----- (65831940) --------------------------------------------------------
char __thiscall sub_65831940(_BYTE *this, char a2)
{
  *(this + 4) = a2;
  return a2;
}

//----- (65831950) --------------------------------------------------------
int __thiscall sub_65831950(_DWORD *this, int a2)
{
  *(this + 2) = a2;
  return a2;
}

//----- (65831960) --------------------------------------------------------
int __thiscall sub_65831960(int this)
{
  int v2; // eax
  const char *v3; // eax
  int v5; // [esp+14h] [ebp-10h]

  sub_65747EB0((_DWORD *)this);
  *(_DWORD *)this = &off_659CC60C;
  *(_DWORD *)(this + 6368) = 0;
  *(_DWORD *)(this + 6388) = 0;
  *(_DWORD *)(this + 6392) = 0;
  *(_DWORD *)(this + 6396) = 0;
  *(_DWORD *)(this + 6400) = 0;
  *(_DWORD *)(this + 6404) = 0;
  *(_DWORD *)(this + 6408) = 0;
  *(_DWORD *)(this + 6416) = 0;
  *(_DWORD *)(this + 6412) = 0;
  *(_BYTE *)(this + 6376) = 0;
  *(_DWORD *)(this + 6420) = 0;
  v2 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 459);
  v5 = v2;
  if ( v2 )
    v3 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v2);
  else
    v3 = byte_659A8B98;
  if ( this != -6336 )
  {
    if ( !v3 )
      v3 = byte_659A8B98;
    strncpy((char *)(this + 6336), v3, 0x1Fu);
    *(_BYTE *)(this + 6367) = 0;
  }
  if ( v5 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
  *(_DWORD *)(this + 8) = 4;
  *(_BYTE *)(this + 16) = 1;
  *(_BYTE *)(this + 6243) = 1;
  *(_BYTE *)(this + 18) = 1;
  GroupWindow_SetBackgroundImage(this, 999999999, 600, 90);
  return this;
}
// 659CC60C: using guessed type void *off_659CC60C;

//----- (65831A90) --------------------------------------------------------
void *__thiscall sub_65831A90(void *this, char a2)
{
  sub_65831890();
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}
// 65831890: using guessed type int sub_65831890(void);

//----- (65831F00) --------------------------------------------------------
unsigned __int8 __thiscall sub_65831F00(int this)
{
  int v2; // ebx
  void *v3; // esi
  const char *v4; // eax
  unsigned __int8 result; // al
  unsigned __int8 v6; // [esp+Fh] [ebp-1h]

  PtrVector_FreeAll_thunk(*(_DWORD **)(this + 6404));
  v6 = 0;
  v2 = 0;
  do
  {
    v3 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v2 + 29900);
    UiList_AddEntry(*(int ***)(this + 6404), v3, 10, v2, 0);
    if ( v6 == *(_BYTE *)(this + 6372) )
    {
      if ( v3 )
        v4 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
      else
        v4 = byte_659A8B98;
      UiList_SetSelectionText(*(_DWORD *)(this + 6404), (int)v4, 1);
    }
    result = v6 + 1;
    ++v2;
    v6 = result;
  }
  while ( result < 0x19u );
  *(_WORD *)(this + 6374) = 0;
  return result;
}

//----- (65831FA0) --------------------------------------------------------
void __thiscall sub_65831FA0(int this)
{
  unsigned __int8 v2; // al
  unsigned __int16 v3; // bx
  void *v4; // edi
  const char *v5; // eax
  int v6; // [esp+4h] [ebp-4h]

  PtrVector_FreeAll_thunk(*(_DWORD **)(this + 6408));
  *(_DWORD *)(*(_DWORD *)(this + 6408) + 32) = 0;
  v2 = *(_BYTE *)(this + 6372);
  if ( v2 && v2 < 0x19u )
  {
    v3 = 1;
    *(_DWORD *)(*(_DWORD *)(this + 6408) + 32) = 1;
    v6 = 1;
    do
    {
      if ( ItemTemplate_GetType(g_ItemTemplateById, v3) == *(unsigned __int8 *)(this + 6372) )
      {
        v4 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v6 + 30000);
        UiList_AddEntry(*(int ***)(this + 6408), v4, 12, v6, 0);
        if ( v3 == *(_WORD *)(this + 6374) )
        {
          if ( v4 )
            v5 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
          else
            v5 = byte_659A8B98;
          UiList_SetSelectionText(*(_DWORD *)(this + 6408), (int)v5, 1);
        }
      }
      ++v6;
      ++v3;
    }
    while ( v3 < 0xBC1u );
  }
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65832C20) --------------------------------------------------------
void __thiscall sub_65832C20(int *this, int a2, int a3)
{
  int v4; // esi
  const char *v5; // eax
  int v6; // esi
  const char *v7; // eax
  const char *v8; // eax
  char *v9; // eax
  int v10; // esi
  int v11; // eax
  _DWORD *v12; // ecx
  _DWORD *v13; // ecx
  int v14; // edx
  float v15[7]; // [esp+10h] [ebp-2Ch] BYREF
  int v16; // [esp+38h] [ebp-4h]

  std::string::string(v15);
  v16 = 0;
  std::string::operator+=(v15, "<font size='14' color='BFC7FF00'>");
  v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 22736);
  if ( v4 )
    v5 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
  else
    v5 = byte_659A8B98;
  std::string::operator+=(v15, v5);
  if ( v4 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
  std::string::operator+=(v15, "\r");
  if ( a3 )
  {
    v6 = (*(int (__cdecl **)(int, int, int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4451, a2, a3);
    if ( v6 )
      v7 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
    else
      v7 = byte_659A8B98;
    std::string::operator+=(v15, v7);
    if ( v6 )
LABEL_16:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
  }
  else
  {
    v6 = (*(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4452, a2);
    if ( v6 )
      v8 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
    else
      v8 = byte_659A8B98;
    std::string::operator+=(v15, v8);
    if ( v6 )
      goto LABEL_16;
  }
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*(this + 4531) + 88))(*(this + 4531), 1);
  v9 = (char *)std::string::c_str(v15);
  UiText_SetValueIfChanged(*(this + 4531), v9, 0, 0);
  v10 = *(_DWORD *)&Data / 2 - 400;
  v11 = (int)((double)*(int *)&dword_65A55604 * 0.1500000059604645);
  v12 = (_DWORD *)*(this + 4531);
  v12[17] = v12[21];
  v12[18] = v12[22];
  v12[19] = 0;
  v12[20] = 0;
  v13 = (_DWORD *)*(this + 4531);
  v13[17] = v10 + v13[19];
  v11 += 100;
  v14 = v11 + v13[20];
  v13[21] = v10;
  v13[22] = v11;
  v13[18] = v14;
  Widget_StartAnimation((float *)*(this + 4531), 5.0);
  SoundMgr_PlaySoundIfValid(0x2Fu);
  WindowMgr_ShowWindowById((int *)dword_65ABF708, 0x40u);
  v16 = -1;
  std::string::~string(v15);
}
// 659A8274: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65832E50) --------------------------------------------------------
void __thiscall BroadcastUI_ShowLevelMessage(float **this, int a2, unsigned __int8 a3)
{
  int v4; // esi
  const char *v5; // eax
  int v6; // esi
  const char *v7; // eax
  int v8; // ebx
  const char *v9; // eax
  char *v10; // eax
  int v11; // esi
  int v12; // eax
  _DWORD *v13; // ecx
  _DWORD *v14; // ecx
  int v15; // edx
  float v16[7]; // [esp+14h] [ebp-3Ch] BYREF
  char v17[16]; // [esp+30h] [ebp-20h] BYREF
  int v18; // [esp+4Ch] [ebp-4h]

  std::string::string(v16);
  v18 = 0;
  std::string::operator+=(v16, "<font size='14' color='BFC7FF00'>");
  v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 21105);
  if ( v4 )
    v5 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
  else
    v5 = byte_659A8B98;
  std::string::operator+=(v16, v5);
  if ( v4 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
  std::string::operator+=(v16, "\r");
  v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, a2 + 17951);
  sub_659480D0(v17, a3);
  if ( v6 )
    v7 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
  else
    v7 = byte_659A8B98;
  v8 = (*(int (__cdecl **)(int, int, const char *, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 21106, v7, v17);
  if ( v6 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
  if ( v8 )
    v9 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
  else
    v9 = byte_659A8B98;
  std::string::operator+=(v16, v9);
  if ( v8 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v8);
  (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*(this + 4531) + 88))(*(this + 4531), 1);
  v10 = (char *)std::string::c_str(v16);
  UiText_SetValueIfChanged((int)*(this + 4531), v10, 0, 0);
  v11 = *(_DWORD *)&Data / 2 - 400;
  v12 = (int)((double)*(int *)&dword_65A55604 * 0.1500000059604645);
  v13 = *(this + 4531);
  v13[19] = 0;
  v13[20] = 0;
  v13[17] = v13[21];
  v13[18] = v13[22];
  v14 = *(this + 4531);
  v14[17] = v11 + v14[19];
  v12 += 100;
  v15 = v12 + v14[20];
  v14[21] = v11;
  v14[22] = v12;
  v14[18] = v15;
  Widget_StartAnimation(*(this + 4531), 5.0);
  SoundMgr_PlaySoundIfValid(0x2Fu);
  WindowMgr_ShowWindowById((int *)dword_65ABF708, 0x40u);
  v18 = -1;
  std::string::~string(v16);
}
// 659A8274: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65833E70) --------------------------------------------------------
int __thiscall ItemDropUI_ShowNotification(int this, int a2, float a3)
{
  int result; // eax
  int v5; // edi
  int IconHandle; // eax
  int v7; // edi
  char *v8; // eax
  int v9; // eax
  _DWORD *v10; // ecx
  _DWORD *v11; // ecx
  int v12; // edx
  int v13; // eax
  _DWORD *v14; // ecx
  _DWORD *v15; // ecx
  int v16; // edx
  int v17; // edx
  int v18; // eax

  result = a2;
  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu )
  {
    result = g_ItemTemplateById[(unsigned __int16)a2];
    if ( result )
    {
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 18128) + 88))(*(_DWORD *)(this + 18128), 1);
      v5 = **(_DWORD **)(this + 18128);
      IconHandle = ItemTemplate_GetIconHandle((int **)dword_65ABF748, a2);
      (*(void (__thiscall **)(_DWORD, int))(v5 + 128))(*(_DWORD *)(this + 18128), IconHandle);
      v7 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 21107, LOWORD(a3));
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 18132) + 88))(*(_DWORD *)(this + 18132), 1);
      if ( v7 )
        v8 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
      else
        v8 = (char *)byte_659A8B98;
      UiText_SetValueIfChanged(*(_DWORD *)(this + 18132), v8, 0, 0);
      if ( v7 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
      v9 = *(_DWORD *)&Data;
      v10 = *(_DWORD **)(this + 18128);
      v10[19] = 0;
      v10[20] = 0;
      v10[17] = v10[21];
      v10[18] = v10[22];
      v11 = *(_DWORD **)(this + 18128);
      v12 = v11[19];
      v11[22] = 60;
      v13 = v9 / 2 - 24;
      v11[21] = v13;
      v11[17] = v13 + v12;
      v11[18] = v11[20] + 60;
      v14 = *(_DWORD **)(this + 18132);
      v14[17] = v14[21];
      v14[18] = v14[22];
      v14[19] = 0;
      v14[20] = 0;
      v15 = *(_DWORD **)(this + 18132);
      v16 = v15[19];
      v15[21] = v13;
      v17 = v13 + v16;
      v18 = v15[20] + 90;
      v15[22] = 90;
      v15[17] = v17;
      v15[18] = v18;
      UiWidget_StartFadeAnimation(*(float **)(this + 18128), 1.5);
      Widget_StartAnimation(*(float **)(this + 18132), 1.5);
      SoundMgr_PlaySoundIfValid(0x2Fu);
      return WindowMgr_ShowWindowById((int *)dword_65ABF708, 0x40u);
    }
  }
  return result;
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65834170) --------------------------------------------------------
void __thiscall CharacterSlotEntry_Init(_BYTE *this)
{
  CharacterSlot_Init((int)(this + 8));
  *(this + 4) = 0;
  *(_DWORD *)this = 0;
  *((_DWORD *)this + 583) = 0;
  *((_DWORD *)this + 584) = 0;
  *((_DWORD *)this + 585) = 0;
  *((_DWORD *)this + 586) = 0;
}

//----- (65834DA0) --------------------------------------------------------
char *sub_65834DA0()
{
  return byte_65ABDE60;
}

//----- (65834DB0) --------------------------------------------------------
char *sub_65834DB0()
{
  return byte_65ABDE80;
}

//----- (65834DC0) --------------------------------------------------------
const char *__stdcall sub_65834DC0(int a1)
{
  if ( a1 >= 2 )
    return byte_659A8B98;
  else
    return (char *)&unk_65ABDC60 + 256 * a1;
}

//----- (65835010) --------------------------------------------------------
void __thiscall UIDataSource_GetFormattedString(_DWORD *this, int a2, int a3)
{
  _DWORD *v4; // eax
  _DWORD *v5; // esi
  char v6; // cl
  _DWORD *v7; // eax
  int v8; // edx
  char v9; // al
  const char *v10; // esi
  const char *v11; // eax
  char *v12; // eax
  char *v13; // eax

  if ( *(this + 1726) )
  {
    std::string::clear(a3);
    v4 = InputDevice_FindByHandle((_DWORD *)*(this + 1726), a2);
    v5 = v4;
    if ( v4 )
    {
      v6 = *((_BYTE *)v4 + 8);
      v7 = v4 + 2;
      v8 = 0;
      if ( v6 && v6 != 32 )
      {
        std::string::operator+=(a3, v7);
        v8 = 1;
      }
      v9 = *((_BYTE *)v5 + 72);
      v10 = (const char *)(v5 + 18);
      if ( v9 && v9 != 32 )
      {
        if ( v8 )
          std::string::operator+=(a3, " / ");
        v11 = sub_65834DC0(1);
        std::string::operator+=(a3, v11);
        std::string::operator+=(a3, word_659C0C8C);
        if ( !_stricmp(word_659C0B00, v10) )
        {
          v12 = sub_65834DA0();
          std::string::operator+=(a3, v12);
        }
        else if ( !_stricmp(word_659C0B1C, v10) )
        {
          v13 = sub_65834DB0();
          std::string::operator+=(a3, v13);
        }
        else
        {
          std::string::operator+=(a3, v10);
        }
      }
    }
  }
}
// 659A8254: using guessed type int __thiscall std::string::clear(_DWORD);
// 659A8274: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);

//----- (65836930) --------------------------------------------------------
int __thiscall Array12_GetElementAt(_DWORD *this, int a2)
{
  return *(this + 1) + 12 * a2;
}

//----- (65836950) --------------------------------------------------------
int __thiscall Array12Handle_Release(int *this, int a2, int a3)
{
  int result; // eax

  result = *(this + 1);
  if ( result )
  {
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 8))(a2, result);
    *(this + 1) = 0;
  }
  *(this + 3) = 0;
  return result;
}

//----- (65836980) --------------------------------------------------------
int __stdcall Array12_AllocElement(int a1, int a2, int a3)
{
  return (*(int (__thiscall **)(int, int, int))(*(_DWORD *)a2 + 4))(a2, 12 * a1, a3);
}

//----- (658369A0) --------------------------------------------------------
char __thiscall GuildData_GetMemberInfo(int this, unsigned int a2, int a3)
{
  const char *v5; // eax
  const char *v6; // eax
  int v7; // eax
  int v8; // ecx
  int v9; // eax
  int v10; // edx

  if ( a2 >= *(_DWORD *)(this + 6800) )
    return 0;
  *(_BYTE *)a3 = *(_BYTE *)(this + 6388);
  v5 = (const char *)(this + 6389);
  if ( a3 != -1 )
  {
    if ( this == -6389 )
      v5 = byte_659A8B98;
    strncpy((char *)(a3 + 1), v5, 0x7Fu);
    *(_BYTE *)(a3 + 128) = 0;
  }
  v6 = (const char *)(this + 6589);
  if ( a3 != -129 )
  {
    if ( this == -6589 )
      v6 = byte_659A8B98;
    strncpy((char *)(a3 + 129), v6, 0x7Fu);
    *(_BYTE *)(a3 + 256) = 0;
  }
  v7 = *(_DWORD *)(this + 6796);
  v8 = *(_DWORD *)(v7 + 12 * a2);
  v9 = v7 + 12 * a2;
  v10 = *(_DWORD *)(v9 + 4);
  *(_DWORD *)(a3 + 268) = *(_DWORD *)(v9 + 8);
  *(_DWORD *)(a3 + 260) = v8;
  *(_DWORD *)(a3 + 264) = v10;
  *(_DWORD *)(a3 + 272) = 0;
  return 1;
}

//----- (65836A60) --------------------------------------------------------
unsigned __int8 __thiscall OptionsUI_SaveGameSettings(int this)
{
  int v2; // edi
  int v3; // edi
  int v4; // edi
  unsigned __int8 v5; // bl
  unsigned __int8 v6; // bl
  unsigned __int8 v7; // bl
  unsigned __int8 v8; // bl
  unsigned __int8 v9; // bl
  unsigned __int8 v10; // bl
  unsigned __int8 v11; // bl
  unsigned __int8 v12; // bl
  unsigned __int8 v13; // bl
  unsigned __int8 v14; // bl
  unsigned __int8 v15; // bl
  unsigned __int8 v16; // bl
  unsigned __int8 result; // al
  int v18; // [esp+0h] [ebp-14h]
  int Src; // [esp+Ch] [ebp-8h] BYREF
  int v20; // [esp+10h] [ebp-4h]

  v2 = *(_DWORD *)(this + 20436);
  if ( v2 != LTClient_SendMessage((int)"WindowOpacity", 90) )
  {
    LTClient_RunCommand("WindowOpacity", v2);
    GameInputMgr_UpdateMode((int)dword_65ABF6F8, v18);
  }
  v3 = *(_DWORD *)(this + 20440);
  if ( v3 != LTClient_SendMessage((int)"ElementOpacity", 90) )
  {
    LTClient_RunCommand("ElementOpacity", v3);
    GameInputMgr_ProcessInput((int)dword_65ABF6F8, v18);
  }
  v4 = *(_DWORD *)(this + 20444);
  if ( v4 != LTClient_SendMessage((int)"TextOpacity", 100) )
  {
    LTClient_RunCommand("TextOpacity", v4);
    GameInputMgr_GetInstance((float *)dword_65ABF6F8, v18);
  }
  v5 = *(_BYTE *)(this + 20448);
  if ( v5 != (LTClient_SendMessage((int)"ChatPlaySounds", 0) == 1) )
  {
    LTClient_RunCommand("ChatPlaySounds", v5);
    Src = 0;
    v20 = 1;
    SharedMem_ReadBlock_std(11239, &Src, (WorldLoginReturnAddrPacked)8);
    Chat_LoadSettings(dword_65ABF714, &Src);
    SharedMem_WriteBlock_std(11239, &Src, (WorldLoginReturnAddrPacked)8);
  }
  v6 = *(_BYTE *)(this + 20449);
  if ( v6 != (LTClient_SendMessage((int)"ToolTips", 1) == 1) )
    LTClient_RunCommand("ToolTips", v6);
  v7 = *(_BYTE *)(this + 20450);
  if ( v7 != (LTClient_SendMessage((int)"ChatBubbles", 1) == 1) )
  {
    LTClient_RunCommand("ChatBubbles", v7);
    Src = 0;
    v20 = 1;
    SharedMem_ReadBlock_std(11239, &Src, (WorldLoginReturnAddrPacked)8);
    Chat_LoadSettings(dword_65ABF714, &Src);
    SharedMem_WriteBlock_std(11239, &Src, (WorldLoginReturnAddrPacked)8);
  }
  v8 = *(_BYTE *)(this + 20451);
  if ( v8 != (LTClient_SendMessage((int)"ShowMap", 1) == 1) )
    LTClient_RunCommand("ShowMap", v8);
  v9 = *(_BYTE *)(this + 20452);
  if ( v9 != (LTClient_SendMessage((int)"BlockTrade", 0) == 1) )
  {
    LTClient_RunCommand("BlockTrade", v9);
    SharedMem_WriteU8_std(0x99u, *(_BYTE *)(this + 20452) == 1);
  }
  v10 = *(_BYTE *)(this + 20453);
  if ( v10 != (LTClient_SendMessage((int)"SwearFilter", 1) == 1) )
    LTClient_RunCommand("SwearFilter", v10);
  v11 = *(_BYTE *)(this + 20454);
  if ( v11 != (LTClient_SendMessage((int)"DisplayPassiveObjectiveProgress", 0) == 1) )
    LTClient_RunCommand("DisplayPassiveObjectiveProgress", v11);
  v12 = *(_BYTE *)(this + 20455);
  if ( v12 != (LTClient_SendMessage((int)"EnableMarketMails", 1) == 1) )
    LTClient_RunCommand("EnableMarketMails", v12);
  v13 = *(_BYTE *)(this + 20456);
  if ( v13 != (LTClient_SendMessage((int)"EnableTakeoverIcons", 1) == 1) )
    LTClient_RunCommand("EnableTakeoverIcons", v13);
  v14 = *(_BYTE *)(this + 20458);
  if ( v14 != (LTClient_SendMessage((int)"EnableHints", 1) == 1) )
    LTClient_RunCommand("EnableHints", v14);
  v15 = *(_BYTE *)(this + 20459);
  if ( v15 != (LTClient_SendMessage((int)"DisplayPrivateChatInGeneral", 1) == 1) )
    LTClient_RunCommand("DisplayPrivateChatInGeneral", v15);
  v16 = *(_BYTE *)(this + 20457);
  result = LTClient_SendMessage((int)"EnableHealthIcons", 1) == 1;
  if ( v16 != result )
    return (unsigned __int8)LTClient_RunCommand("EnableHealthIcons", v16);
  return result;
}
// 65836A98: variable 'v18' is possibly undefined

//----- (65836DE0) --------------------------------------------------------
int __thiscall Array12Handle_SetIndex(int *this, int a2, int a3, int a4)
{
  int v5; // eax
  int v7; // eax

  v5 = *(this + 2);
  if ( a2 == v5 && a2 )
    return 1;
  if ( *(this + 1) )
    Array12Handle_Release(this, a3, v5 + *(this + 3));
  *(this + 2) = a2;
  if ( a2 )
  {
    v7 = Array12_AllocElement(a2 + *(this + 4), a3, a4);
    *(this + 1) = v7;
    if ( !v7 )
    {
      *(this + 2) = 0;
      *(this + 3) = 0;
      return 0;
    }
    *(this + 3) = *(this + 4);
  }
  return 1;
}

//----- (65836E60) --------------------------------------------------------
int __thiscall Array12_InsertAt(unsigned int *this, unsigned int a2, _DWORD *a3, int a4)
{
  unsigned int v5; // eax
  unsigned int v6; // edi
  int result; // eax
  unsigned int v8; // ebx
  int v9; // ecx
  int v10; // eax
  int v11; // edx
  int v12; // eax
  unsigned int v13; // edx
  _DWORD *v14; // ecx
  int v15; // eax
  int v16; // ebx
  int v17; // eax
  _DWORD *v18; // eax
  unsigned int v19; // ecx
  int v20; // ecx
  int v21; // edx
  int v22; // eax
  int v23; // ebx
  _DWORD *v24; // eax
  int v25; // edx
  _DWORD *v26; // eax
  int v27; // [esp+8h] [ebp-8h]
  unsigned int v28; // [esp+Ch] [ebp-4h]

  v5 = *(this + 2);
  v6 = a2;
  if ( a2 > v5 )
    return 0;
  if ( *(this + 3) )
  {
    if ( v5 > a2 )
    {
      v20 = 12 * v5;
      v21 = v5 - a2;
      do
      {
        v22 = *(this + 1);
        v23 = *(_DWORD *)(v22 + v20 - 12);
        v24 = (_DWORD *)(v20 + v22);
        *v24 = v23;
        v24[1] = *(v24 - 2);
        v20 -= 12;
        --v21;
        v24[2] = *(v24 - 1);
      }
      while ( v21 );
    }
    v25 = *(this + 1);
    --*(this + 3);
    v26 = (_DWORD *)(v25 + 12 * a2);
    *v26 = *a3;
    v26[1] = a3[1];
    v26[2] = a3[2];
    ++*(this + 2);
    return 1;
  }
  else
  {
    result = Array12_AllocElement(*(this + 4) + v5 + 1, a4, 0);
    v8 = result;
    v27 = result;
    if ( result )
    {
      if ( a2 )
      {
        v9 = 0;
        v28 = a2;
        do
        {
          v10 = *(this + 1);
          v11 = *(_DWORD *)(v10 + v9);
          v12 = v9 + v10;
          *(_DWORD *)(v9 + v8) = v11;
          *(_DWORD *)(v9 + v8 + 4) = *(_DWORD *)(v12 + 4);
          *(_DWORD *)(v9 + v8 + 8) = *(_DWORD *)(v12 + 8);
          v9 += 12;
          --v28;
        }
        while ( v28 );
      }
      if ( a2 < *(this + 2) )
      {
        v13 = 12 * a2;
        v14 = (_DWORD *)(12 * a2 + v8 + 12);
        do
        {
          v15 = *(this + 1);
          v16 = *(_DWORD *)(v15 + v13);
          v17 = v13 + v15;
          *v14 = v16;
          v14[1] = *(_DWORD *)(v17 + 4);
          v14[2] = *(_DWORD *)(v17 + 8);
          ++v6;
          v13 += 12;
          v14 += 3;
        }
        while ( v6 < *(this + 2) );
        v8 = v27;
        v6 = a2;
      }
      v18 = (_DWORD *)(v8 + 12 * v6);
      *v18 = *a3;
      v18[1] = a3[1];
      v18[2] = a3[2];
      if ( *(this + 1) )
        Array12Handle_Release((int *)this, a4, *(this + 2) + *(this + 3));
      v19 = *(this + 4);
      *(this + 1) = v8;
      ++*(this + 2);
      *(this + 3) = v19;
      return 1;
    }
  }
  return result;
}

//----- (6583B460) --------------------------------------------------------
BOOL __thiscall sub_6583B460(int this, char a2, int a3, char a4)
{
  _DWORD *v5; // ecx
  char v6; // al
  BOOL result; // eax
  char v8; // al

  result = 0;
  if ( a2 == 6 )
  {
    v5 = (_DWORD *)(this + 6688);
    if ( a3 == *(_DWORD *)(this + 6688) )
      return 1;
    if ( sub_657D7190(v5, a4) )
    {
      v6 = *(_BYTE *)(this + 6813);
      if ( !v6 || sub_659500C0(6, v6) )
      {
        v8 = *(_BYTE *)(this + 6524);
        if ( !v8 || sub_659500C0(6, v8) )
          return 1;
      }
    }
  }
  return result;
}

//----- (6583B970) --------------------------------------------------------
_DWORD *__thiscall CharTransferUI_PopulatePlanetList(int this)
{
  _DWORD *result; // eax
  int v3; // edi
  int v4; // edi
  unsigned __int8 v5; // bl
  int Dword_this; // eax
  void *v7; // edi
  const char *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // eax
  int v12; // edx
  int v13; // edx
  int v14; // eax
  int v15; // edx
  int v16; // [esp-4h] [ebp-1Ch]
  char v17; // [esp+Ch] [ebp-Ch]
  char v18; // [esp+10h] [ebp-8h]
  int v19; // [esp+14h] [ebp-4h]

  result = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  v3 = (int)result;
  if ( result )
  {
    v17 = *((_BYTE *)result + 14);
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 6772));
    if ( *(_DWORD *)(this + 6376) == *(unsigned __int16 *)(v3 + 8) )
    {
      v4 = *(_DWORD *)(this + 6368);
      if ( v4 != SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) )
      {
        v5 = 0;
        v18 = 0;
        v19 = 0;
        do
        {
          Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
          if ( sub_6583B460(this, v18, Dword_this, v17) )
          {
            if ( v5 != 6 )
            {
              v7 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v19 + 17761);
              UiList_AddEntry(*(int ***)(this + 6772), v7, 9, v19, 0);
              if ( v5 == *(_BYTE *)(this + 6812) )
              {
                if ( v7 )
                  v8 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(
                                       g_pILTClient,
                                       v7);
                else
                  v8 = byte_659A8B98;
                UiList_SetSelectionText(*(_DWORD *)(this + 6772), (int)v8, 1);
              }
            }
          }
          ++v19;
          v18 = ++v5;
        }
        while ( v5 < 0x1Au );
      }
    }
    v9 = *(_DWORD **)(this + 6772);
    if ( ((v9[31] - v9[30]) & 0xFFFFFFFC) != 0 )
    {
      v9[6] = 1;
      v9[50] = 1;
      v9[8] = 1;
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6776) + 88))(*(_DWORD *)(this + 6776), 1);
      v10 = *(_DWORD **)(this + 6792);
      v10[6] = 1;
      v10[50] = 1;
      v10[8] = 1;
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6784) + 88))(*(_DWORD *)(this + 6784), 1);
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6788) + 88))(*(_DWORD *)(this + 6788), 1);
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6780) + 88))(*(_DWORD *)(this + 6780), 1);
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6804) + 88))(*(_DWORD *)(this + 6804), 1);
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6808) + 88))(*(_DWORD *)(this + 6808), 1);
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6800) + 88))(*(_DWORD *)(this + 6800), 1);
      v11 = *(_DWORD **)(this + 6768);
      v12 = v11[20];
      v11[22] = 342;
      v13 = v12 + 342;
      v16 = 357;
    }
    else
    {
      v9[6] = 0;
      v9[50] = 0;
      (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6776) + 88))(*(_DWORD *)(this + 6776), 0);
      v14 = *(_DWORD *)(this + 6792);
      *(_DWORD *)(v14 + 24) = 0;
      *(_DWORD *)(v14 + 200) = 0;
      (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6784) + 88))(*(_DWORD *)(this + 6784), 0);
      (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6788) + 88))(*(_DWORD *)(this + 6788), 0);
      (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6780) + 88))(*(_DWORD *)(this + 6780), 0);
      (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6804) + 88))(*(_DWORD *)(this + 6804), 0);
      (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6808) + 88))(*(_DWORD *)(this + 6808), 0);
      (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6800) + 88))(*(_DWORD *)(this + 6800), 0);
      v11 = *(_DWORD **)(this + 6768);
      v15 = v11[20];
      v11[22] = 186;
      v13 = v15 + 186;
      v16 = 198;
    }
    v11[17] = v11[19] + 235;
    v11[21] = 235;
    v11[18] = v13;
    return GroupWindow_SetBackgroundImage(this, 999999999, 300, v16);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6583BC00) --------------------------------------------------------
int __thiscall CharTransferUI_PopulateSlotList(int this)
{
  int result; // eax
  int v3; // edi
  char v4; // bl
  _BYTE *v5; // eax
  _BYTE *v6; // edi
  int Dword_this; // eax
  void *v8; // ebx
  const char *v9; // eax
  int v10; // eax
  void *v11; // edi
  const char *v12; // eax
  _DWORD *v13; // esi
  int v14; // esi
  char v15; // [esp+8h] [ebp-8h]
  char v16; // [esp+Ch] [ebp-4h]

  result = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  v3 = result;
  if ( result )
  {
    v15 = *(_BYTE *)(result + 14);
    PtrVector_FreeAll_thunk(*(_DWORD **)(this + 6736));
    if ( *(_DWORD *)(this + 6376) == *(unsigned __int16 *)(v3 + 8) )
    {
      v4 = 0;
      do
      {
        v16 = ++v4;
        v5 = (_BYTE *)sub_657D7190((_DWORD *)(this + 6688), v4);
        v6 = v5;
        if ( v5 )
        {
          *(_BYTE *)(this + 6813) = *v5;
          Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
          if ( sub_6583B460(this, 6, Dword_this, v15) )
          {
            v8 = (void *)(*(int (__thiscall **)(int, _BYTE *))(*(_DWORD *)g_pILTClient + 72))(g_pILTClient, v6 + 1);
            UiList_AddEntry(*(int ***)(this + 6736), v8, 11, (unsigned __int8)*v6, 0);
            if ( *v6 == *(_BYTE *)(this + 6524) )
            {
              if ( v8 )
                v9 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
              else
                v9 = byte_659A8B98;
              UiList_SetSelectionText(*(_DWORD *)(this + 6736), (int)v9, 1);
            }
            v4 = v16;
          }
        }
      }
      while ( (unsigned __int8)v4 < 0x1Eu );
    }
    v10 = *(_DWORD *)(this + 6736) + 116;
    *(_BYTE *)(this + 6813) = *(_BYTE *)(this + 6524);
    if ( ((*(_DWORD *)(v10 + 8) - *(_DWORD *)(v10 + 4)) & 0xFFFFFFFC) != 0 )
    {
      v11 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 853);
      UiList_AddEntry(*(int ***)(this + 6736), v11, 11, 0, 0);
      if ( !*(_BYTE *)(this + 6524) )
      {
        if ( v11 )
          v12 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v11);
        else
          v12 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 6736), (int)v12, 1);
      }
      result = (*(int (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6740) + 88))(*(_DWORD *)(this + 6740), 0);
      v13 = *(_DWORD **)(this + 6736);
      v13[6] = 1;
      v13[50] = 1;
      v13[8] = 1;
    }
    else
    {
      (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6740) + 88))(*(_DWORD *)(this + 6740), 1);
      v14 = *(_DWORD *)(this + 6736);
      *(_DWORD *)(v14 + 24) = 0;
      *(_DWORD *)(v14 + 200) = 0;
      return 0;
    }
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6583BDD0) --------------------------------------------------------
_DWORD *__thiscall CharTransferUI_UpdateDisplay(int this, const void *a2, char *a3)
{
  int v4; // eax
  int v5; // eax
  char *v6; // esi
  char *v7; // eax
  int v8; // esi
  char *v9; // eax
  int v10; // esi
  char *v11; // eax
  bool v12; // zf
  int v13; // eax
  int v14; // eax
  char *v15; // eax
  _BYTE v17[28]; // [esp-24h] [ebp-DCh] BYREF
  int v18; // [esp-8h] [ebp-C0h]
  char *v19; // [esp-4h] [ebp-BCh]
  int v20[31]; // [esp+10h] [ebp-A8h] BYREF
  _BYTE v21[28]; // [esp+8Ch] [ebp-2Ch] BYREF
  float v22; // [esp+A8h] [ebp-10h]
  int v23; // [esp+B4h] [ebp-4h]

  qmemcpy((void *)(this + 6368), a2, 0x140u);
  qmemcpy(v20, (const void *)(this + 6560), sizeof(v20));
  a2 = 0;
  GameInput_HandleMouseClick((int **)dword_65ABF6F4, (int *)&a2, 1, v20, 0x25u, 0x25u);
  (*(void (__thiscall **)(_DWORD, const void *))(**(_DWORD **)(this + 6744) + 128))(*(_DWORD *)(this + 6744), a2);
  v4 = *(_DWORD *)(this + 6744);
  v22 = *(float *)(this + 6300);
  v19 = 0;
  v18 = 0;
  *(float *)(v4 + 252) = v22;
  *(_BYTE *)(*(_DWORD *)(this + 6744) + 256) = 1;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6732), (char *)(this + 6452), v18, v19);
  v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
         g_pILTClient,
         *(unsigned __int8 *)(this + 6684) + 22531);
  v6 = 0;
  switch ( *(_BYTE *)(this + 6684) )
  {
    case 1:
      v6 = "00FF0000";
      break;
    case 2:
      v6 = "CC663300";
      break;
    case 3:
      v6 = "F2F2F200";
      break;
    case 4:
      v6 = "D4A01700";
      break;
    case 5:
    case 6:
      v6 = "C0C0C000";
      break;
    default:
      break;
  }
  if ( v5 )
    v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
  else
    v7 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6728), v7, 1, v6);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6764), a3, 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6740), (char *)(this + 6525), 0, 0);
  if ( sub_65948020((const char *)(this + 6525)) )
  {
    v8 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 853);
    v9 = v8
       ? (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8)
       : (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6740), v9, 0, 0);
    if ( v8 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v8);
  }
  if ( sub_65948020((const char *)(this + 6492)) )
  {
    v10 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 854);
    if ( v10 )
      v11 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v10);
    else
      v11 = (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6748), v11, 1, 0);
    if ( v10 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v10);
  }
  else
  {
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6748), (char *)(this + 6492), 1, 0);
  }
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6752), (char *)(this + 6381), 0, 0);
  v12 = *(_BYTE *)(this + 6756) == 0;
  v19 = 0;
  v18 = 0;
  if ( v12 )
  {
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6760), "PP ...", v18, v19);
  }
  else
  {
    v13 = *(_DWORD *)(this + 6448);
    a3 = v17;
    sub_65941410(v17, v13);
    v14 = FormatString((int)v21, (int)"PP {0}");
    v23 = 0;
    v15 = (char *)std::string::c_str(v14);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6760), v15, v18, v19);
    v23 = -1;
    std::string::~string(v21);
  }
  CharTransferUI_PopulateSlotList(this);
  return CharTransferUI_PopulatePlanetList(this);
}
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (6583C110) --------------------------------------------------------
char *__thiscall Packet_ID_PLAYERFILE_ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -97;
  *(_DWORD *)this = &off_659CCC50;
  PacketData_InitFieldsExt((int)(this + 1276));
  *((_DWORD *)this + 271) = 0;
  *(this + 1088) = 0;
  *((_DWORD *)this + 273) = 0;
  *(this + 1096) = 0;
  *(this + 1097) = 0;
  *((_DWORD *)this + 291) = 0;
  *(this + 1168) = 0;
  *(this + 1188) = 0;
  *(this + 1208) = 0;
  *(this + 1240) = 0;
  *(this + 1241) = 0;
  *(this + 1400) = 0;
  sub_6579BD20(this + 1916);
  *((_DWORD *)this + 268) = 0;
  *((_DWORD *)this + 270) = 0;
  *(this + 1076) = 0;
  *(this + 1404) = 0;
  return this;
}
// 6579BD20: using guessed type int __thiscall sub_6579BD20(_DWORD);
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CCC50: using guessed type void *off_659CCC50;

//----- (6583C6F0) --------------------------------------------------------
char __thiscall Packet_ID_PLAYERFILE_read(int this, int a2)
{
  char result; // al
  unsigned int v4; // eax

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    v4 = *(_DWORD *)(this + 20);
    if ( v4 + 1 <= *(_DWORD *)(this + 12) )
    {
      *(_BYTE *)(this + 1076) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + *(_DWORD *)(this + 24))) != 0;
      ++*(_DWORD *)(this + 20);
    }
    if ( *(_BYTE *)(this + 1076) )
    {
      Packet_ID_PLAYERFILE_read_structA((char *)(this + 1084), (unsigned int *)(this + 12));
      Packet_ID_FACTION_read_listA((char *)(this + 1916), (unsigned int *)(this + 12));
      result = (*(int (__thiscall **)(int, int, int, int))(*(_DWORD *)g_LTClient + 56))(
                 g_LTClient,
                 this + 1404,
                 2048,
                 this + 12);
      if ( !result )
        return result;
    }
    else
    {
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
    }
    return 1;
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6583C970) --------------------------------------------------------
errno_t __thiscall Packet_ID_MAIL_entry_fill(_BYTE *this, int a2, char a3, int a4, char *Source, char *a6, char *a7)
{
  const char *v8; // eax
  const char *v9; // eax
  const char *v10; // eax

  *(_DWORD *)this = a2;
  v8 = Source;
  *(this + 4) = a3;
  *((_DWORD *)this + 2) = a4;
  if ( !Source )
    v8 = byte_659A8B98;
  strncpy_s(this + 12, 0x14u, v8, 0xFFFFFFFF);
  v9 = a6;
  if ( !a6 )
    v9 = byte_659A8B98;
  strncpy_s(this + 32, 0x28u, v9, 0xFFFFFFFF);
  v10 = a7;
  if ( !a7 )
    v10 = byte_659A8B98;
  return strncpy_s(this + 72, 0x800u, v10, 0xFFFFFFFF);
}

//----- (6583CF40) --------------------------------------------------------
char __thiscall Packet_ID_MAIL_entry_list_contains(_DWORD *this, int a2)
{
  int v2; // esi
  int v3; // eax
  unsigned __int8 v4; // cl

  v2 = *(this + 1);
  v3 = (*(this + 2) - v2) / 2120;
  v4 = 0;
  if ( !(_BYTE)v3 )
    return 0;
  while ( *(_DWORD *)(2120 * v4 + v2) != a2 )
  {
    if ( ++v4 >= (unsigned __int8)v3 )
      return 0;
  }
  return 1;
}

//----- (6583D0F0) --------------------------------------------------------
int __thiscall Packet_ID_MAIL_write_entry(_BYTE *this, char *a2)
{
  char *v3; // esi
  int result; // eax
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *(_DWORD *)this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  LOBYTE(a2) = *(this + 4);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  a2 = (char *)*((_DWORD *)this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  (*(void (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 12, 2048, v3);
  result = (*(int (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(
             g_LTClient,
             this + 72,
             2048,
             v3);
  if ( !*(this + 4) )
    return (*(int (__thiscall **)(int, _BYTE *, int, char *))(*(_DWORD *)g_LTClient + 52))(
             g_LTClient,
             this + 32,
             2048,
             v3);
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6583D1E0) --------------------------------------------------------
char *__thiscall Packet_ID_MAIL_write_entries(_DWORD *this, char *a2)
{
  int v3; // ebx
  char *result; // eax
  int v5; // edi
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 2120;
  v6[0] = (char)(*((_BYTE *)this + 8) - *((_BYTE *)this + 4)) / 72;
  result = BitStream_WriteBitsCompressed(a2, v6, 8u, 1);
  if ( (_BYTE)v3 )
  {
    v5 = 0;
    v3 = (unsigned __int8)v3;
    do
    {
      result = (char *)Packet_ID_MAIL_write_entry((_BYTE *)(v5 + *(this + 1)), a2);
      v5 += 2120;
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (6583D250) --------------------------------------------------------
char *__thiscall Packet_ID_MAIL_write_idlist(_DWORD *this, char *a2)
{
  int v2; // ebx
  char *v3; // esi
  int v4; // ebx
  char *result; // eax
  int v6; // edi
  char v7[4]; // [esp+8h] [ebp-Ch] BYREF
  _DWORD *v8; // [esp+Ch] [ebp-8h]
  char v9[4]; // [esp+10h] [ebp-4h] BYREF

  v2 = *(this + 2) - *(this + 1);
  v3 = a2;
  v8 = this;
  v4 = v2 >> 2;
  v9[0] = v4;
  result = BitStream_WriteBitsCompressed(a2, v9, 8u, 1);
  if ( (_BYTE)v4 )
  {
    v6 = 0;
    v4 = (unsigned __int8)v4;
    do
    {
      a2 = *(char **)(v6 + v8[1]);
      if ( Net_IsBigEndian() )
      {
        ByteSwapCopy((int)&a2, (int)v7, 4u);
        result = BitStream_WriteBitsCompressed(v3, v7, 0x20u, 1);
      }
      else
      {
        result = BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
      }
      v6 += 4;
      --v4;
    }
    while ( v4 );
  }
  return result;
}

//----- (6583D2E0) --------------------------------------------------------
char __thiscall Packet_ID_MAIL_write(int this)
{
  char result; // al
  char *v3; // ecx

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    Packet_ID_MAIL_write_entries((_DWORD *)(this + 1076), (char *)(this + 12));
    v3 = (char *)(this + 12);
    if ( *(_BYTE *)(this + 1092) )
      BitStream_WriteBit1(v3);
    else
      BitStream_WriteBit0(v3);
    if ( *(_BYTE *)(this + 1092) )
      Packet_ID_MAIL_write_idlist((_DWORD *)(this + 1096), (char *)(this + 12));
    return 1;
  }
  return result;
}

//----- (6583D420) --------------------------------------------------------
char *__usercall Array2120_FillCopy@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x848u);
      --v4;
      result += 2120;
    }
    while ( v4 );
  }
  return result;
}

//----- (6583D6A0) --------------------------------------------------------
int __thiscall sub_6583D6A0(void **this)
{
  if ( *(this + 275) )
    operator delete(*(this + 275));
  *(this + 275) = 0;
  *(this + 276) = 0;
  *(this + 277) = 0;
  if ( *(this + 270) )
    operator delete(*(this + 270));
  *(this + 270) = 0;
  *(this + 271) = 0;
  *(this + 272) = 0;
  *this = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 3));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (6583D700) --------------------------------------------------------
int __thiscall sub_6583D700(int this, int a2, unsigned int a3, const void *a4)
{
  int result; // eax
  int v6; // ecx
  unsigned int v7; // edi
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // edi
  void *v11; // eax
  int v12; // ecx
  int v13; // eax
  int v14; // eax
  int v15; // ecx
  int v16; // ecx
  unsigned int v17; // esi
  char *v18; // esi
  int v19; // ecx
  int v20; // eax
  char *v21; // edi
  int v22; // eax
  void *v23; // [esp-4h] [ebp-87Ch]
  _DWORD v24[4]; // [esp+0h] [ebp-878h] BYREF
  const void *v25; // [esp+10h] [ebp-868h]
  int v26; // [esp+14h] [ebp-864h]
  void *v27; // [esp+18h] [ebp-860h]
  _BYTE v28[2120]; // [esp+1Ch] [ebp-85Ch] BYREF
  _DWORD *v29; // [esp+868h] [ebp-10h]
  int v30; // [esp+874h] [ebp-4h]

  v29 = v24;
  result = (int)a4;
  v6 = *(_DWORD *)(this + 4);
  v25 = a4;
  if ( v6 )
  {
    result = 1037275121 * (*(_DWORD *)(this + 12) - v6);
    v7 = (*(_DWORD *)(this + 12) - v6) / 2120;
  }
  else
  {
    v7 = 0;
  }
  if ( a3 )
  {
    v27 = *(void **)(this + 8);
    v8 = ((int)v27 - v6) / 2120;
    if ( 2025927 - v8 < a3 )
      v8 = sub_6583CA80();
    v9 = a3 + v8;
    if ( v7 >= v9 )
    {
      qmemcpy(v28, v25, sizeof(v28));
      if ( ((int)v27 - a2) / 2120 >= a3 )
      {
        v21 = (char *)v27 - 2120 * a3;
        v22 = sub_6583D630(this, v21, v27, v27);
        v23 = v27;
        *(_DWORD *)(this + 8) = v22;
        sub_6583D3E0(a2, v21, v23);
        return sub_6583D020(a2, a2 + 2120 * a3, v28);
      }
      else
      {
        sub_6583D630(this, a2, v27, 2120 * a3 + a2);
        v19 = *(_DWORD *)(this + 8) - a2;
        v24[2] = v28;
        v20 = *(_DWORD *)(this + 8);
        v30 = 2;
        sub_6583D590(this, v20, a3 - v19 / 2120, v28);
        *(_DWORD *)(this + 8) += 2120 * a3;
        return sub_6583D020(a2, *(_DWORD *)(this + 8) - 2120 * a3, v28);
      }
    }
    else
    {
      if ( 2025927 - (v7 >> 1) >= v7 )
        v10 = (v7 >> 1) + v7;
      else
        v10 = 0;
      if ( v10 < v9 )
        v10 = v9;
      v11 = (void *)sub_6583CB80(v10, 0, v24[0]);
      v12 = *(_DWORD *)(this + 4);
      LOBYTE(v26) = 0;
      v27 = v11;
      v30 = 0;
      v13 = sub_6583D0B0(v12, a2, v11, this, v26, v26);
      v14 = sub_6583D590(this, v13, a3, v25);
      v15 = *(_DWORD *)(this + 8);
      LOBYTE(v26) = 0;
      sub_6583D0B0(a2, v15, v14, this, v26, v26);
      v16 = *(_DWORD *)(this + 4);
      v17 = (*(_DWORD *)(this + 8) - v16) / 2120 + a3;
      if ( v16 )
        operator delete(*(void **)(this + 4));
      result = (int)v27;
      v18 = (char *)v27 + 2120 * v17;
      *(_DWORD *)(this + 12) = (char *)v27 + 2120 * v10;
      *(_DWORD *)(this + 8) = v18;
      *(_DWORD *)(this + 4) = result;
    }
  }
  return result;
}
// 6583CA80: using guessed type int sub_6583CA80(void);
// 6583CB80: using guessed type int __stdcall sub_6583CB80(_DWORD, _DWORD, _DWORD);
// 6583D020: using guessed type int __cdecl sub_6583D020(_DWORD, _DWORD, _DWORD);
// 6583D0B0: using guessed type int __cdecl sub_6583D0B0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 6583D3E0: using guessed type int __cdecl sub_6583D3E0(_DWORD, _DWORD, _DWORD);
// 6583D590: using guessed type int __thiscall sub_6583D590(_DWORD, _DWORD, _DWORD, _DWORD);
// 6583D630: using guessed type int __thiscall sub_6583D630(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6583D9A0) --------------------------------------------------------
char *__thiscall sub_6583D9A0(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -116;
  *(_DWORD *)this = &off_659CCCD8;
  *((_DWORD *)this + 270) = 0;
  *((_DWORD *)this + 271) = 0;
  *((_DWORD *)this + 272) = 0;
  *((_DWORD *)this + 275) = 0;
  *((_DWORD *)this + 276) = 0;
  *((_DWORD *)this + 277) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1092) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CCCD8: using guessed type void *off_659CCCD8;

//----- (6583DA40) --------------------------------------------------------
int __thiscall Packet_ID_MAIL_read_entry(char *this, unsigned int *a2)
{
  int result; // eax

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed(a2, this + 4, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 8);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 12,
    2048,
    a2);
  result = (*(int (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
             g_LTClient,
             this + 72,
             2048,
             a2);
  if ( !*(this + 4) )
    return (*(int (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
             g_LTClient,
             this + 32,
             2048,
             a2);
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6583DAF0) --------------------------------------------------------
_DWORD *__thiscall Vector2120_InsertAndGetPtr(_DWORD *this, _DWORD *a2, int a3, const void *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 2120 )
    v6 = (a3 - v5) / 2120;
  else
    v6 = 0;
  sub_6583D700((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 2120 * v6;
  return a2;
}

//----- (6583DB60) --------------------------------------------------------
unsigned __int8 __thiscall Read_Vector_U32_Compressed(int **this, unsigned int *a2)
{
  int *v3; // edi
  unsigned __int8 result; // al
  int v6; // edx
  unsigned int v7; // eax
  int v8; // ecx
  char v9[4]; // [esp+Ch] [ebp-Ch] BYREF
  int v10; // [esp+10h] [ebp-8h] BYREF
  unsigned __int8 v11; // [esp+17h] [ebp-1h] BYREF
  unsigned __int8 v12; // [esp+23h] [ebp+Bh]

  v3 = *(this + 1);
  if ( v3 != *(this + 2) )
    *(this + 2) = v3;
  v11 = 0;
  result = RakNet::BitStream::ReadCompressed(a2, (char *)&v11, 8u, 1);
  v10 = 0;
  v12 = 0;
  if ( v11 )
  {
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v9, 0x20u, 1) )
          ByteSwapCopy((int)v9, (int)&v10, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v10, 0x20u, 1);
      }
      v6 = (int)*(this + 1);
      if ( v6 )
        v7 = ((int)*(this + 3) - v6) >> 2;
      else
        v7 = 0;
      v8 = (int)*(this + 2);
      if ( (v8 - v6) >> 2 >= v7 )
      {
        Vector_InsertN((int)this, (char *)v8, 1u, (unsigned int)&v10);
      }
      else
      {
        *(_DWORD *)v8 = v10;
        *(this + 2) = (int *)(v8 + 4);
      }
      result = v12 + 1;
      v12 = result;
    }
    while ( result < v11 );
  }
  return result;
}

//----- (6583DC60) --------------------------------------------------------
char *__thiscall Packet_ID_MAIL_entry_list_insert(char **this, void *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 2120;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 2120 >= v4 )
    return (char *)Vector2120_InsertAndGetPtr(this, &a2, (int)v5, a2);
  result = Array2120_FillCopy((char *)a2, v5, 1, a2);
  *(this + 2) = v5 + 2120;
  return result;
}

//----- (6583DCF0) --------------------------------------------------------
char __thiscall Packet_ID_MAIL_entry_list_insert_unique(char **this, int *a2)
{
  if ( !Packet_ID_MAIL_entry_list_contains(this, *a2) )
    Packet_ID_MAIL_entry_list_insert(this, a2);
  return 1;
}

//----- (6583DD20) --------------------------------------------------------
unsigned __int8 __thiscall Packet_ID_MAIL_read_entries(char **this, unsigned int *a2)
{
  unsigned __int8 v3; // bl
  unsigned __int8 result; // al
  unsigned __int8 v5; // [esp+Fh] [ebp-84Dh] BYREF
  int v6; // [esp+10h] [ebp-84Ch] BYREF
  char v7; // [esp+14h] [ebp-848h]
  int v8; // [esp+18h] [ebp-844h]
  char v9; // [esp+1Ch] [ebp-840h]
  char v10; // [esp+30h] [ebp-82Ch]
  char v11; // [esp+58h] [ebp-804h]

  v3 = 0;
  v5 = 0;
  result = RakNet::BitStream::ReadCompressed(a2, (char *)&v5, 8u, 1);
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  if ( v5 )
  {
    do
    {
      Packet_ID_MAIL_read_entry((char *)&v6, a2);
      result = (unsigned __int8)Packet_ID_MAIL_entry_list_insert(this, &v6);
      ++v3;
    }
    while ( v3 < v5 );
  }
  return result;
}

//----- (6583DDC0) --------------------------------------------------------
char __thiscall Packet_ID_MAIL_read(int this, int a2)
{
  char result; // al
  unsigned int v4; // eax

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    Packet_ID_MAIL_read_entries((char **)(this + 1076), (unsigned int *)(this + 12));
    v4 = *(_DWORD *)(this + 20);
    if ( v4 + 1 <= *(_DWORD *)(this + 12) )
    {
      *(_BYTE *)(this + 1092) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + *(_DWORD *)(this + 24))) != 0;
      ++*(_DWORD *)(this + 20);
    }
    if ( *(_BYTE *)(this + 1092) )
      Read_Vector_U32_Compressed((int **)(this + 1096), (unsigned int *)(this + 12));
    return 1;
  }
  return result;
}

//----- (6583DE40) --------------------------------------------------------
int __thiscall CWindowSendMail_OnCommand(_DWORD *this, int a2, int a3, int a4)
{
  _DWORD *v5; // eax
  _DWORD *v6; // ecx
  int v8; // edx
  const char *v9; // ecx
  const char *v10; // eax
  int v11; // eax
  const char *v12; // edx
  const char *v13; // eax
  const char *v14; // eax
  char *v15; // [esp+10h] [ebp-CD0h]
  int v16; // [esp+14h] [ebp-CCCh]
  int v17; // [esp+18h] [ebp-CC8h] BYREF
  char v18; // [esp+1Ch] [ebp-CC4h]
  int v19; // [esp+20h] [ebp-CC0h]
  char v20; // [esp+24h] [ebp-CBCh]
  char v21; // [esp+38h] [ebp-CA8h]
  char v22; // [esp+60h] [ebp-C80h]
  void *v23[269]; // [esp+860h] [ebp-480h] BYREF
  char *v24[9]; // [esp+C94h] [ebp-4Ch] BYREF
  char String2[24]; // [esp+CB8h] [ebp-28h] BYREF
  int v26; // [esp+CDCh] [ebp-4h]

  switch ( a2 )
  {
    case 5:
      if ( a3 != 2 && a3 != 1 )
      {
        v5 = (_DWORD *)*(this + 1592);
        goto LABEL_5;
      }
      WindowMgr_SetFocusWindow((_DWORD *)dword_65ABF708, (_DWORD *)*(this + 1593), (int)this);
      return 1;
    case 6:
      if ( a3 != 2 && a3 != 1 )
      {
        v5 = (_DWORD *)*(this + 1593);
LABEL_5:
        v6 = (_DWORD *)dword_65ABF708;
        goto LABEL_6;
      }
      WindowMgr_SetFocusWindow((_DWORD *)dword_65ABF708, (_DWORD *)*(this + 1594), (int)this);
      return 1;
    case 7:
      v6 = (_DWORD *)dword_65ABF708;
      if ( a3 == 2 )
      {
        WindowMgr_SetFocusWindow((_DWORD *)dword_65ABF708, (_DWORD *)*(this + 1592), (int)this);
        return 1;
      }
      else
      {
        v5 = (_DWORD *)*(this + 1594);
LABEL_6:
        if ( (_DWORD *)v6[1] == v5 )
          WindowMgr_SetFocusWindow(v6, 0, 0);
        else
          WindowMgr_SetFocusWindow(v6, v5, (int)this);
        return 1;
      }
    case 8:
      v15 = (char *)dword_65ABF734 + 948840;
      v16 = 1;
      Ui_ReadFieldTextById((void *)(dword_65ABF748 + 4), 11219, String2, 0x15u);
      v8 = *(this + 1592);
      v9 = *(const char **)(v8 + 176);
      if ( !v9 )
      {
        FriendList_AddEntry(
          dword_65ABF748,
          "You must enter a recipient name!",
          10,
          0,
          1,
          "FF000000",
          "FFED0000",
          0,
          0,
          0,
          0);
        goto LABEL_29;
      }
      if ( strlen(*(const char **)(v8 + 176)) < 4 || sub_65948020(v9) )
      {
        FriendList_AddEntry(
          dword_65ABF748,
          "Recipient name is too short!",
          10,
          0,
          1,
          "FF000000",
          "FFED0000",
          0,
          0,
          0,
          0);
        goto LABEL_29;
      }
      if ( !_stricmp(*(const char **)(*(this + 1592) + 176), String2) )
      {
        FriendList_AddEntry(
          dword_65ABF748,
          "You cannot send a message to yourself!",
          10,
          0,
          1,
          "FF000000",
          "FFED0000",
          0,
          0,
          0,
          0);
LABEL_29:
        v16 = 0;
        goto LABEL_30;
      }
      v10 = *(const char **)(*(this + 1592) + 176);
      if ( v15 != (char *)-4 )
      {
        if ( !v10 )
          v10 = byte_659A8B98;
        strncpy(v15 + 4, v10, 0x13u);
        v15[23] = 0;
      }
LABEL_30:
      v11 = *(this + 1593);
      v12 = *(const char **)(v11 + 176);
      if ( !v12 )
      {
        FriendList_AddEntry(
          dword_65ABF748,
          "You must enter a subject for your mail!",
          10,
          0,
          1,
          "FF000000",
          "FFED0000",
          0,
          0,
          0,
          0);
        goto LABEL_39;
      }
      if ( strlen(*(const char **)(v11 + 176)) < 5 || sub_65948020(v12) )
      {
        FriendList_AddEntry(dword_65ABF748, "Mail subject is too short!", 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
LABEL_39:
        v16 = 0;
        goto LABEL_40;
      }
      v13 = *(const char **)(*(this + 1593) + 176);
      if ( v15 != (char *)-24 )
      {
        if ( !v13 )
          v13 = byte_659A8B98;
        strncpy(v15 + 24, v13, 0x27u);
        v15[63] = 0;
      }
LABEL_40:
      if ( *(_DWORD *)(*(this + 1594) + 176) )
      {
        if ( strlen(*(const char **)(*(this + 1594) + 176)) < 0xA
          || sub_65948020(*(const char **)(*(this + 1594) + 176)) )
        {
          FriendList_AddEntry(
            dword_65ABF748,
            "Message text is too short!",
            10,
            0,
            1,
            "FF000000",
            "FFED0000",
            0,
            0,
            0,
            0);
          return 1;
        }
        else
        {
          v14 = *(const char **)(*(this + 1594) + 176);
          if ( v15 != (char *)-64 )
          {
            if ( !v14 )
              v14 = byte_659A8B98;
            strncpy(v15 + 64, v14, 0x7FFu);
            v15[2111] = 0;
          }
          if ( v16 && !(*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 0x4000) )
          {
            sub_6583D9A0((char *)v23);
            v26 = 0;
            v23[268] = (void *)SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
            v17 = 0;
            v18 = 0;
            v19 = 0;
            v20 = 0;
            v21 = 0;
            v22 = 0;
            Packet_ID_MAIL_entry_fill(&v17, 0, 0, 0, v15 + 4, v15 + 24, v15 + 64);
            Packet_ID_MAIL_entry_list_insert_unique(v24, &v17);
            Packet_ID_MAIL_write((int)v23);
            LTClient_SendPacket_BuildIfNeeded(v23, 2, 1, 3, 1);
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 0x4000);
            v26 = -1;
            sub_6583D6A0(v23);
          }
          return 1;
        }
      }
      else
      {
        FriendList_AddEntry(
          dword_65ABF748,
          "You must enter a message text!",
          10,
          0,
          1,
          "FF000000",
          "FFED0000",
          0,
          0,
          0,
          0);
        return 1;
      }
    default:
      return CWindow_HandleCommand(this, a2, a3, a4);
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (6583E6D0) --------------------------------------------------------
char __cdecl sub_6583E6D0(int a1, char __saved_registers, int __return_address)
{
  char *Entry; // eax
  char *v4; // esi
  int v6; // eax
  int v7; // edi
  int v8; // eax
  int v9; // edi
  int Value; // eax
  int v11; // esi
  const char *v12; // eax
  int v13; // [esp+14h] [ebp-10h]
  char v14[8]; // [esp+18h] [ebp-Ch] BYREF

  Entry = ItemStatModifierTable_GetEntry(a1);
  v4 = Entry;
  if ( !Entry )
    return 0;
  switch ( *(_DWORD *)Entry )
  {
    case 0x12:
    case 0x18:
    case 0x19:
    case 0x3A:
    case 0x3C:
    case 0x3D:
    case 0x3E:
    case 0x3F:
    case 0x40:
    case 0x41:
    case 0x42:
    case 0x43:
    case 0x44:
    case 0x45:
    case 0x46:
    case 0x49:
    case 0x4A:
    case 0x4F:
    case 0x50:
    case 0x52:
      v9 = *(_DWORD *)g_pILTClient;
      Value = ItemStatModifier_GetValue(*Entry, __saved_registers + 1);
      v6 = (*(int (__cdecl **)(int, int, int))(v9 + 64))(g_pILTClient, *(_DWORD *)v4 + 20051, Value);
      break;
    case 0x38:
    case 0x39:
    case 0x53:
    case 0x54:
    case 0x55:
    case 0x56:
    case 0x57:
    case 0x58:
    case 0x59:
    case 0x5A:
    case 0x5B:
    case 0x5C:
    case 0x5D:
    case 0x5E:
    case 0x5F:
    case 0x60:
    case 0x61:
    case 0x62:
    case 0x63:
    case 0x68:
    case 0x69:
    case 0x6A:
    case 0x6B:
    case 0x6E:
    case 0x6F:
      if ( !__saved_registers )
        goto LABEL_8;
      v7 = *(_DWORD *)g_pILTClient;
      v8 = ItemStatModifier_GetValue(*Entry, __saved_registers + 1);
      v6 = (*(int (__cdecl **)(int, int, int))(v7 + 64))(g_pILTClient, *(_DWORD *)v4 + 20551, v8);
      break;
    case 0x4B:
      v13 = ItemStatModifier_GetValue(*Entry, __saved_registers + 1);
      sprintf(v14, "%.2f", (double)(unsigned int)v13 / 10.0);
      v6 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(
             g_pILTClient,
             *(_DWORD *)v4 + 20051,
             v14);
      break;
    default:
LABEL_8:
      v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, *(_DWORD *)Entry + 20051);
      break;
  }
  v11 = v6;
  if ( v6 )
    v12 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
  else
    v12 = byte_659A8B98;
  std::string::operator=(__return_address, v12);
  if ( v11 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v11);
  return 1;
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (6583E940) --------------------------------------------------------
void __cdecl __noreturn sub_6583E940(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (6583E9E0) --------------------------------------------------------
void *__cdecl SafeNew20Array_CheckOverflow(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x14 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(20 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (6583EA50) --------------------------------------------------------
_DWORD *__cdecl Array20_CopyRange(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 5 )
  {
    *result = *v3;
    result[1] = v3[1];
    result[2] = v3[2];
    result[3] = v3[3];
    result[4] = v3[4];
    v3 += 5;
  }
  return result;
}

//----- (6583F4C0) --------------------------------------------------------
_DWORD *__thiscall TeamUI_UpdatePlayerList(int **this)
{
  int **v1; // ebx
  _DWORD *result; // eax
  unsigned int v3; // edi
  int v4; // ebx
  int (__cdecl **v5)(int, int, const char *, int, int); // esi
  int v6; // eax
  int v7; // edi
  const char *v8; // eax
  int (__thiscall ***v9)(_DWORD, int); // esi
  int v10; // ecx
  int v11; // edx
  int v12; // [esp-Ch] [ebp-24h]
  int (__thiscall ***Simple)(_DWORD, int); // [esp+4h] [ebp-14h]
  const char *v14; // [esp+8h] [ebp-10h]
  _DWORD *v15; // [esp+Ch] [ebp-Ch]
  unsigned int v16; // [esp+10h] [ebp-8h]

  v1 = this;
  result = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
  v15 = result;
  if ( result )
  {
    ListBox_ClearItems(v1[1592]);
    v3 = 0;
    v16 = 0;
    do
    {
      if ( v3 - 1 <= 8 && v3 != 1 )
      {
        Simple = UiWidget_CreateSimple(6, v3, 0, 0, 0, 0);
        if ( Simple )
        {
          v4 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v3 + 17900);
          if ( v4 )
            v14 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
          else
            v14 = byte_659A8B98;
          v5 = (int (__cdecl **)(int, int, const char *, int, int))(*(_DWORD *)g_pILTClient + 64);
          v12 = ItemStatModifierTable_CountByGroup(v3);
          v6 = ItemStatModifier_CountByGroup(v15, v3);
          v7 = (*v5)(g_pILTClient, 21100, v14, v6, v12);
          if ( v7 )
            v8 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
          else
            v8 = byte_659A8B98;
          v9 = UiWidget_Create(this, 0, (int)v8, 256, 233, 0, 0, 1, (int)&unk_65A5C5EC, 2, 0, 0, 0);
          if ( v4 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
          if ( v7 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
          if ( v9 )
          {
            v10 = (int)(v9[19] + 1);
            v11 = (int)v9[20] + 1;
            v9[21] = (int (__thiscall **)(_DWORD, int))4;
            v9[22] = (int (__thiscall **)(_DWORD, int))1;
            v9[17] = (int (__thiscall **)(_DWORD, int))v10;
            v9[18] = (int (__thiscall **)(_DWORD, int))v11;
            Button_AddCallbacks((int)Simple, (int)v9);
            ListBox_AddItem((unsigned int *)*(this + 1592), (int)Simple);
          }
          v1 = this;
          v3 = v16;
        }
      }
      v16 = ++v3;
    }
    while ( v3 < 0xA );
    ListBox_RefreshDisplay(v1[1592]);
    return (_DWORD *)ListBox_Reset(v1[1592]);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6583F680) --------------------------------------------------------
void __thiscall TeamUI_ShowTeamMessage(int **this, int a2, unsigned __int8 a3)
{
  int v3; // edi
  unsigned int v4; // esi
  int **v5; // ebx
  bool v6; // zf
  int v7; // edi
  const char *v8; // eax
  int v9; // eax
  int v10; // ebx
  const char *v11; // esi
  char *v12; // eax
  int (__thiscall ***v13)(_DWORD, int); // esi
  int (__thiscall **v14)(_DWORD, int); // edx
  int v15; // eax
  int (__thiscall ***v16)(_DWORD, int); // edi
  int v17; // ecx
  int v18; // edx
  int (__thiscall ***Simple)(_DWORD, int); // [esp+10h] [ebp-54h]
  char *Source; // [esp+14h] [ebp-50h]
  int v21; // [esp+1Ch] [ebp-48h]
  int (__thiscall **v22)(_DWORD, int); // [esp+20h] [ebp-44h]
  char v24[28]; // [esp+28h] [ebp-3Ch] BYREF
  char Buffer[16]; // [esp+44h] [ebp-20h] BYREF
  int v26; // [esp+60h] [ebp-4h]

  v3 = a2;
  v4 = 0;
  v5 = this;
  if ( a2 )
  {
    std::string::string(v24);
    v6 = *(_BYTE *)(a2 + 9) == 0;
    v26 = 0;
    v22 = 0;
    if ( !v6 )
    {
      v21 = a2 + 116;
      do
      {
        if ( v21 && sub_659480D0(Buffer, v4 + 1) && sub_6583E6D0(*(_DWORD *)v3, v4, (int)v24) )
        {
          Simple = UiWidget_CreateSimple(0, 0, 0, 0, 0, 0);
          v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, *(_DWORD *)v3 + 17951);
          if ( v7 )
            v8 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
          else
            v8 = byte_659A8B98;
          v9 = (*(int (__cdecl **)(int, int, const char *, char *))(*(_DWORD *)g_pILTClient + 64))(
                 g_pILTClient,
                 21101,
                 v8,
                 Buffer);
          v10 = v9;
          Source = "00FF0000";
          if ( a3 <= v4 )
            Source = "FF000000";
          if ( v9 )
            v11 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
          else
            v11 = byte_659A8B98;
          v12 = WindowGroup_CopyEntry(byte_65A5C4A8, 3, Source);
          v13 = UiWidget_Create(this, 0, (int)v11, 256, 233, 0, 0, 1, (int)v12, 2, 0, 0, 0);
          if ( v7 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
          if ( v10 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v10);
          if ( v13 )
          {
            v14 = v13[20];
            v13[17] = v13[19] + 1;
            v13[126] = v22;
            v13[21] = (int (__thiscall **)(_DWORD, int))4;
            v13[22] = (int (__thiscall **)(_DWORD, int))1;
            v13[18] = (int (__thiscall **)(_DWORD, int))((char *)v14 + 1);
            v13[125] = (int (__thiscall **)(_DWORD, int))1;
            v15 = std::string::c_str(v24);
            v16 = UiWidget_Create(this, 0, v15, 256, 195, 0, 0, 1, (int)&unk_65A5CD84, 2, 0, 0, 0);
            if ( v16 )
            {
              v17 = (int)(v16[19] + 1);
              v18 = (int)v16[20] + 14;
              v16[21] = (int (__thiscall **)(_DWORD, int))4;
              v16[22] = (int (__thiscall **)(_DWORD, int))14;
              v16[17] = (int (__thiscall **)(_DWORD, int))v17;
              v16[18] = (int (__thiscall **)(_DWORD, int))v18;
              Button_AddCallbacks((int)Simple, (int)v13);
              ListBox_AddItem((unsigned int *)*(this + 1604), (int)Simple);
            }
          }
          v4 = (unsigned int)v22;
          v3 = a2;
        }
        v21 += 4;
        v5 = this;
        v22 = (int (__thiscall **)(_DWORD, int))++v4;
      }
      while ( v4 < *(unsigned __int8 *)(v3 + 9) );
    }
    v5[1604][671] = 1;
    ListBox_RefreshDisplay(v5[1604]);
    ListBox_Reset(v5[1604]);
    v26 = -1;
    std::string::~string(v24);
  }
}
// 6583F879: conditional instruction was optimized away because ebx.4==0
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (6583F9A0) --------------------------------------------------------
_DWORD *__cdecl sub_6583F9A0(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return Array20_CopyRange(a1, a2, a3);
}

//----- (6583FCD0) --------------------------------------------------------
void __thiscall TeamUI_UpdateMemberInfo(int *this, int a2)
{
  int v3; // ecx
  _DWORD *v4; // edi
  char *Entry; // esi
  int v6; // esi
  unsigned int v7; // eax
  int v8; // esi
  const char *v9; // eax
  int v10; // edi
  char *v11; // eax
  int v12; // esi
  char *v13; // eax
  int v14; // ecx
  int v15; // esi
  char *v16; // eax
  int v17; // esi
  char *v18; // eax
  int v19; // esi
  char *v20; // eax
  unsigned __int8 v21; // al
  int v22; // [esp+4h] [ebp-C8h]
  int v23; // [esp+8h] [ebp-C4h]
  char v24[156]; // [esp+Ch] [ebp-C0h] BYREF
  char Buffer[16]; // [esp+A8h] [ebp-24h] BYREF
  char v26[16]; // [esp+B8h] [ebp-14h] BYREF

  v3 = *(this + 1598);
  *(this + 1595) = a2;
  (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v3 + 128))(v3, 0);
  UiText_SetValueIfChanged(*(this + 1599), (char *)byte_659A8B98, 0, 0);
  UiText_SetValueIfChanged(*(this + 1600), (char *)byte_659A8B98, 0, 0);
  UiText_SetValueIfChanged(*(this + 1601), (char *)byte_659A8B98, 0, 0);
  UiText_SetValueIfChanged(*(this + 1602), (char *)byte_659A8B98, 0, 0);
  UiText_SetValueIfChanged(*(this + 1603), (char *)byte_659A8B98, 0, 0);
  ListBox_ClearItems((int *)*(this + 1604));
  if ( *(this + 1595) )
  {
    v4 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
    if ( v4 )
    {
      Entry = ItemStatModifierTable_GetEntry(*(this + 1595));
      v23 = (int)Entry;
      v22 = ItemStatModifier_FindById(v4, *(this + 1595));
      if ( Entry )
      {
        qmemcpy(v24, Entry, sizeof(v24));
        v6 = (*(int (__cdecl **)(char *))(g_pILTClient + 292))(&v24[10]);
        if ( v6 )
        {
          (*(void (__cdecl **)(int))(g_pILTClient + 272))(v6);
          (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*(this + 1598) + 128))(*(this + 1598), v6);
          *(_BYTE *)(*(this + 1598) + 256) = 1;
          v7 = v22 ? *(unsigned __int8 *)(v22 + 4) : 0;
          if ( sub_659480D0(v26, v7) )
          {
            v8 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, *(_DWORD *)v23 + 17951);
            if ( v8 )
              v9 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
            else
              v9 = byte_659A8B98;
            v10 = (*(int (__cdecl **)(int, int, const char *, char *))(*(_DWORD *)g_pILTClient + 64))(
                    g_pILTClient,
                    21101,
                    v9,
                    v26);
            if ( v8 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v8);
            if ( v10 )
              v11 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v10);
            else
              v11 = (char *)byte_659A8B98;
            UiText_SetValueIfChanged(*(this + 1599), v11, 0, 0);
            if ( v10 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v10);
            v12 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                    g_pILTClient,
                    *(_DWORD *)(v23 + 4) + 17900);
            if ( v12 )
              v13 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v12);
            else
              v13 = (char *)byte_659A8B98;
            UiText_SetValueIfChanged(*(this + 1600), v13, 0, 0);
            if ( v12 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v12);
            if ( v22 )
              v14 = *(unsigned __int8 *)(v22 + 4);
            else
              v14 = 0;
            v15 = (*(int (__cdecl **)(int, int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                    g_pILTClient,
                    21102,
                    v14,
                    *(unsigned __int8 *)(v23 + 9));
            if ( v15 )
              v16 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v15);
            else
              v16 = (char *)byte_659A8B98;
            UiText_SetValueIfChanged(*(this + 1601), v16, 0, 0);
            if ( v15 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v15);
            if ( v22 && *(_DWORD *)(v22 + 8) && *(_BYTE *)(v22 + 4) < *(_BYTE *)(v23 + 9) )
            {
              sub_65947EB0(Buffer, *(_DWORD *)(v22 + 8));
              v17 = (*(int (__cdecl **)(int, int, char *, int))(*(_DWORD *)g_pILTClient + 64))(
                      g_pILTClient,
                      21104,
                      Buffer,
                      *(unsigned __int8 *)(v22 + 4) + 1);
              if ( v17 )
                v18 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v17);
              else
                v18 = (char *)byte_659A8B98;
              UiText_SetValueIfChanged(*(this + 1602), v18, 0, 0);
              if ( v17 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v17);
            }
            else
            {
              UiText_SetValueIfChanged(*(this + 1602), (char *)byte_659A8B98, 0, 0);
            }
            v19 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, *(_DWORD *)v23 + 19001);
            if ( v19 )
              v20 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v19);
            else
              v20 = (char *)byte_659A8B98;
            UiText_SetValueIfChanged(*(this + 1603), v20, 0, 0);
            if ( v19 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v19);
            if ( v22 )
              v21 = *(_BYTE *)(v22 + 4);
            else
              v21 = 0;
            TeamUI_ShowTeamMessage((int **)this, v23, v21);
          }
        }
      }
    }
  }
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (658400F0) --------------------------------------------------------
char __thiscall sub_658400F0(_DWORD *this, unsigned int a2)
{
  char *v4; // eax
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( !a2 )
    return 0;
  if ( a2 > 0xCCCCCCC )
    sub_6583E940(v5, v6);
  v4 = (char *)SafeNew20Array_CheckOverflow(a2);
  *(this + 1) = v4;
  *(this + 2) = v4;
  *(this + 3) = &v4[20 * a2];
  return 1;
}
// 65840119: variable 'v5' is possibly undefined
// 65840119: variable 'v6' is possibly undefined

//----- (65840170) --------------------------------------------------------
_DWORD *__cdecl CopyArray20(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 5 )
  {
    if ( result )
    {
      *result = *v3;
      result[1] = v3[1];
      result[2] = v3[2];
      result[3] = v3[3];
      result[4] = v3[4];
    }
    v3 += 5;
  }
  return result;
}

//----- (65840350) --------------------------------------------------------
_DWORD *__stdcall sub_65840350(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return CopyArray20(a1, a2, a3);
}

//----- (65840390) --------------------------------------------------------
void __thiscall TeamUI_HandlePacketUpdate(int **this)
{
  int (__thiscall *v2)(int, int); // edx
  unsigned __int8 *v3; // ebx
  int v4; // eax
  int v5; // esi
  int v6; // ecx
  unsigned int v7; // eax
  int v8; // edi
  char *Entry; // eax
  char *v10; // esi
  unsigned __int8 v11; // al
  int v12; // esi
  const char *v13; // eax
  char *v14; // eax
  const char *v15; // ebx
  char *v16; // eax
  int *v17; // ebx
  char *v18; // edx
  int v19; // esi
  const char *v20; // ebx
  char *v21; // eax
  _DWORD *v22; // ebx
  _DWORD *v23; // eax
  unsigned __int8 v24; // cl
  unsigned int v25; // eax
  unsigned __int8 v26; // al
  int v27; // eax
  _DWORD *v28; // eax
  int v29; // esi
  int *v30; // esi
  int v31; // ecx
  int v32; // eax
  char *v33; // eax
  char v34; // bl
  int v35; // ecx
  int (__cdecl *v36)(int, int); // eax
  int v37; // edi
  const char *v38; // eax
  char *v39; // eax
  bool v40; // zf
  char *v41; // ebx
  const char *v42; // esi
  char *v43; // eax
  int (__thiscall ***v44)(_DWORD, int); // esi
  int (__thiscall **v45)(_DWORD, int); // eax
  char *v46; // ecx
  int (__thiscall **v47)(_DWORD, int); // eax
  int v48; // eax
  int v49; // edi
  const char *v50; // ebx
  char *v51; // eax
  int (__thiscall ***v52)(_DWORD, int); // ebx
  int v53; // ecx
  int v54; // edx
  _DWORD *v55; // eax
  int v56; // eax
  char *v57; // eax
  int v58; // eax
  _DWORD *v59; // eax
  int v60; // edi
  _BYTE *v61; // ebx
  int v62; // eax
  int v63; // edi
  const char *v64; // eax
  int v65; // esi
  const char *v66; // eax
  int (__thiscall **v67)(int, int); // esi
  int v68; // eax
  int v69; // eax
  unsigned int **v70; // esi
  _BYTE v71[12]; // [esp-38h] [ebp-11Ch] BYREF
  const char *v72; // [esp-2Ch] [ebp-110h]
  int v73; // [esp-28h] [ebp-10Ch]
  int v74; // [esp-24h] [ebp-108h]
  int v75; // [esp-20h] [ebp-104h]
  int v76; // [esp-1Ch] [ebp-100h] BYREF
  int v77; // [esp-18h] [ebp-FCh]
  char *v78; // [esp-14h] [ebp-F8h]
  int v79; // [esp-10h] [ebp-F4h]
  _DWORD *v80; // [esp-Ch] [ebp-F0h]
  int v81; // [esp-8h] [ebp-ECh]
  int v82; // [esp-4h] [ebp-E8h]
  _BYTE v83[28]; // [esp+10h] [ebp-D4h] BYREF
  int *v84; // [esp+2Ch] [ebp-B8h]
  unsigned int v85; // [esp+30h] [ebp-B4h]
  unsigned __int8 *v86; // [esp+34h] [ebp-B0h]
  int v87; // [esp+38h] [ebp-ACh] BYREF
  unsigned int *Simple; // [esp+3Ch] [ebp-A8h]
  char *v89; // [esp+40h] [ebp-A4h]
  int v90; // [esp+44h] [ebp-A0h]
  char *v91; // [esp+48h] [ebp-9Ch]
  unsigned int i; // [esp+4Ch] [ebp-98h]
  char *Source; // [esp+50h] [ebp-94h] BYREF
  unsigned int **v94; // [esp+54h] [ebp-90h]
  char v95; // [esp+5Ah] [ebp-8Ah]
  bool v96; // [esp+5Bh] [ebp-89h] BYREF
  _BYTE v97[28]; // [esp+5Ch] [ebp-88h] BYREF
  _BYTE v98[20]; // [esp+78h] [ebp-6Ch] BYREF
  int v99; // [esp+8Ch] [ebp-58h]
  char v100[16]; // [esp+94h] [ebp-50h] BYREF
  char Buffer[32]; // [esp+A4h] [ebp-40h] BYREF
  char v102[16]; // [esp+C4h] [ebp-20h] BYREF
  int v103; // [esp+E0h] [ebp-4h]

  v2 = *(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88);
  v94 = (unsigned int **)this;
  v3 = (unsigned __int8 *)v2(g_LTClient, 4);
  v86 = v3;
  if ( v3 )
  {
    ListBox_ClearItems(*(this + 1594));
    Buffer[0] = 0;
    std::string::string(v97);
    v103 = 0;
    v4 = sub_65948DD0(v3);
    v5 = *((_DWORD *)v3 + 1);
    v6 = *((_DWORD *)v3 + 2);
    v85 = v4;
    v7 = (v6 - v5) / 20;
    i = 0;
    if ( v7 )
    {
      v87 = 0;
      do
      {
        if ( i < v7 )
        {
          v8 = v87 + v5;
          if ( v87 + v5 )
          {
            Entry = ItemStatModifierTable_GetEntry(*(_DWORD *)v8);
            v10 = Entry;
            v91 = Entry;
            if ( Entry )
            {
              if ( Entry[74] )
              {
                if ( *((_DWORD *)Entry + 1) == *((unsigned __int8 *)v94 + 6372) )
                {
                  Simple = (unsigned int *)UiWidget_CreateSimple(7, *(_DWORD *)v8, 0, 0, 0, 0);
                  if ( Simple )
                  {
                    if ( sub_659480D0(v102, *(unsigned __int8 *)(v8 + 4)) )
                    {
                      v11 = *(_BYTE *)(v8 + 4);
                      v96 = v11 >= (unsigned __int8)v10[9];
                      if ( v96 )
                      {
                        Source = "00FF0000";
LABEL_18:
                        v12 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                                g_pILTClient,
                                *(_DWORD *)v10 + 17951);
                        if ( v12 )
                          v13 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                                g_pILTClient,
                                                v12);
                        else
                          v13 = byte_659A8B98;
                        v14 = (char *)(*(int (__cdecl **)(int, int, const char *, char *))(*(_DWORD *)g_pILTClient + 64))(
                                        g_pILTClient,
                                        21101,
                                        v13,
                                        v102);
                        v89 = v14;
                        if ( v14 )
                          v15 = (const char *)(*(int (__thiscall **)(int, char *))(*(_DWORD *)g_pILTClient + 88))(
                                                g_pILTClient,
                                                v14);
                        else
                          v15 = byte_659A8B98;
                        v82 = 0;
                        v81 = 0;
                        v80 = 0;
                        v79 = 2;
                        v16 = WindowGroup_CopyEntry(byte_65A5C4A8, 3, Source);
                        v17 = (int *)UiWidget_Create(
                                       v94,
                                       0,
                                       (int)v15,
                                       256,
                                       303,
                                       0,
                                       0,
                                       1,
                                       (int)v16,
                                       v79,
                                       (int)v80,
                                       v81,
                                       v82);
                        v84 = v17;
                        if ( v12 )
                          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v12);
                        if ( v89 )
                          (*(void (__thiscall **)(int, char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v89);
                        if ( v17 )
                        {
                          CWindow_SetOffset(v17, 4, 1);
                          v18 = v91;
                          v17[126] = *(_DWORD *)v91 + 1000;
                          v17[125] = 1;
                          v19 = (*(int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                                  g_pILTClient,
                                  21103,
                                  *(unsigned __int8 *)(v8 + 4),
                                  (unsigned __int8)v18[9]);
                          if ( v19 )
                            v20 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                                  g_pILTClient,
                                                  v19);
                          else
                            v20 = byte_659A8B98;
                          v82 = 0;
                          v81 = 0;
                          v80 = 0;
                          v79 = 2;
                          v21 = WindowGroup_CopyEntry(byte_65A5C4A8, 5, Source);
                          v22 = UiWidget_Create(v94, 0, (int)v20, 256, 473, 0, 0, 1, (int)v21, v79, (int)v80, v81, v82);
                          if ( v19 )
                            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v19);
                          if ( v22 )
                          {
                            CWindow_SetOffset(v22, 4, 1);
                            if ( !*(_BYTE *)(v8 + 12)
                              && v85 < ((unsigned __int8)StatGroup5_GetValue() < 2u ? 86400 : 259200)
                              && !v96 )
                            {
                              v23 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                                                g_pILTClient,
                                                9033);
                              LinkedList_AddNode(Simple, v23, 10, *(_DWORD *)v8, 0);
                            }
                            v24 = *(_BYTE *)(v8 + 4);
                            if ( v24 >= (unsigned __int8)v91[9] )
                            {
                              v82 = 0;
                              v81 = 0;
                              v80 = 0;
                              v79 = 2;
                              v78 = WindowGroup_CopyEntry(byte_65A5C4A8, 23, Source);
                              v77 = 1;
                              v76 = 0;
                              v75 = 0;
                              v74 = 440;
                              v73 = 256;
                              v72 = byte_659A8B98;
                            }
                            else
                            {
                              v25 = *(_DWORD *)(v8 + 8);
                              if ( !v25 )
                                v25 = *(_DWORD *)&v91[4 * v24 + 116];
                              sub_65947F70(Buffer, v25);
                              v26 = *(_BYTE *)(v8 + 13) + *(_BYTE *)(v8 + 14);
                              if ( v26 )
                              {
                                LOBYTE(v90) = *(_BYTE *)(v8 + 13) + *(_BYTE *)(v8 + 14);
                                v89 = (char *)&v76;
                                String_FromU8(&v76, v26);
                                v91 = v71;
                                LOBYTE(v103) = 1;
                                String_AssignFromPtr(v71, (int)Buffer);
                                LOBYTE(v103) = 0;
                                v27 = FormatString_Args((int)v98, (int)"{0} ({1}% Multiplier)");
                                LOBYTE(v103) = 2;
                                std::string::operator=(v97, v27);
                                LOBYTE(v103) = 0;
                                std::string::~string(v98);
                              }
                              else
                              {
                                std::string::operator=(v97, Buffer);
                              }
                              v82 = 0;
                              v81 = 0;
                              v80 = 0;
                              v79 = 2;
                              v78 = WindowGroup_CopyEntry(byte_65A5C4A8, 23, Source);
                              v77 = 1;
                              v76 = 0;
                              v75 = 0;
                              v74 = 440;
                              v73 = 256;
                              v72 = (const char *)std::string::c_str(v97);
                            }
                            v28 = UiWidget_Create(
                                    v94,
                                    0,
                                    (int)v72,
                                    v73,
                                    v74,
                                    v75,
                                    v76,
                                    v77,
                                    (int)v78,
                                    v79,
                                    (int)v80,
                                    v81,
                                    v82);
                            v29 = (int)v28;
                            if ( v28 )
                            {
                              CWindow_SetOffset(v28, 4, 3);
                              v82 = 0;
                              v81 = v29;
                              v30 = (int *)Simple;
                              v80 = v22;
                              Button_AddCallbacks((int)Simple, (int)v84);
                              ListBox_AddItem(v94[1594], (int)v30);
                            }
                          }
                        }
                        goto LABEL_49;
                      }
                      if ( *(_BYTE *)(v8 + 12) || v11 )
                      {
                        Source = "FFED0000";
                        goto LABEL_18;
                      }
                      if ( ItemStatModifier_MeetsPrereqs(v3, i) )
                      {
                        Source = "FFFFFF00";
                        goto LABEL_18;
                      }
                    }
                  }
                }
              }
            }
          }
        }
LABEL_49:
        v3 = v86;
        v5 = *((_DWORD *)v86 + 1);
        v31 = *((_DWORD *)v86 + 2);
        v87 += 20;
        v7 = (v31 - v5) / 20;
        ++i;
      }
      while ( i < v7 );
    }
    for ( i = 0; i < 0x74; ++i )
    {
      v32 = ItemStatModifier_FindById(v86, i);
      v90 = v32;
      if ( !v32 || !*(_BYTE *)(v32 + 12) && !*(_BYTE *)(v32 + 4) )
      {
        v33 = ItemStatModifierTable_GetEntry(i);
        v91 = v33;
        if ( v33 )
        {
          if ( v33[74] )
          {
            if ( *((_DWORD *)v33 + 1) == *((unsigned __int8 *)v94 + 6372) )
            {
              Simple = (unsigned int *)UiWidget_CreateSimple(7, *(_DWORD *)v33, 0, 0, 0, 0);
              if ( Simple )
              {
                if ( sub_659480D0(v102, 0) )
                {
                  v34 = ItemStatModifier_MeetsPrereqs(v86, i);
                  v35 = *(_DWORD *)g_pILTClient;
                  v82 = *(_DWORD *)v91 + 17951;
                  v81 = g_pILTClient;
                  v36 = *(int (__cdecl **)(int, int))(v35 + 64);
                  v95 = v34;
                  v37 = v36(g_pILTClient, v82);
                  if ( v37 )
                    v38 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                          g_pILTClient,
                                          v37);
                  else
                    v38 = byte_659A8B98;
                  v39 = (char *)(*(int (__cdecl **)(int, int, const char *, char *))(*(_DWORD *)g_pILTClient + 64))(
                                  g_pILTClient,
                                  21101,
                                  v38,
                                  v102);
                  v40 = v34 == 0;
                  v89 = v39;
                  v41 = "FFFFFF00";
                  if ( v40 )
                    v41 = "FF000000";
                  if ( v39 )
                    v42 = (const char *)(*(int (__thiscall **)(int, char *))(*(_DWORD *)g_pILTClient + 88))(
                                          g_pILTClient,
                                          v39);
                  else
                    v42 = byte_659A8B98;
                  v82 = 0;
                  v81 = 0;
                  v80 = 0;
                  v79 = 2;
                  v43 = WindowGroup_CopyEntry(byte_65A5C4A8, 3, v41);
                  v44 = UiWidget_Create(v94, 0, (int)v42, 256, 303, 0, 0, 1, (int)v43, v79, (int)v80, v81, v82);
                  if ( v37 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v37);
                  if ( v89 )
                    (*(void (__thiscall **)(int, char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v89);
                  if ( v44 )
                  {
                    v45 = v44[20];
                    v44[17] = v44[19] + 1;
                    v46 = v91;
                    v44[22] = (int (__thiscall **)(_DWORD, int))1;
                    v44[21] = (int (__thiscall **)(_DWORD, int))4;
                    v44[18] = (int (__thiscall **)(_DWORD, int))((char *)v45 + 1);
                    v47 = *(int (__thiscall ***)(_DWORD, int))v46;
                    v44[125] = (int (__thiscall **)(_DWORD, int))1;
                    v44[126] = v47;
                    v48 = (*(int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                            g_pILTClient,
                            21103,
                            0,
                            (unsigned __int8)v46[9]);
                    v49 = v48;
                    v89 = "FFFFFF00";
                    if ( !v95 )
                      v89 = "FF000000";
                    if ( v48 )
                      v50 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                            g_pILTClient,
                                            v48);
                    else
                      v50 = byte_659A8B98;
                    v82 = 0;
                    v81 = 0;
                    v80 = 0;
                    v79 = 2;
                    v51 = WindowGroup_CopyEntry(byte_65A5C4A8, 5, v89);
                    v52 = UiWidget_Create(v94, 0, (int)v50, 256, 473, 0, 0, 1, (int)v51, v79, (int)v80, v81, v82);
                    if ( v49 )
                      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v49);
                    if ( v52 )
                    {
                      v53 = (int)(v52[19] + 1);
                      v54 = (int)v52[20] + 1;
                      v40 = v95 == 0;
                      v52[21] = (int (__thiscall **)(_DWORD, int))4;
                      v52[22] = (int (__thiscall **)(_DWORD, int))1;
                      v52[17] = (int (__thiscall **)(_DWORD, int))v53;
                      v52[18] = (int (__thiscall **)(_DWORD, int))v54;
                      if ( !v40 && v85 < ((unsigned __int8)StatGroup5_GetValue() < 2u ? 86400 : 259200) )
                      {
                        v55 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                                          g_pILTClient,
                                          9033);
                        LinkedList_AddNode(Simple, v55, 10, *(_DWORD *)v91, 0);
                      }
                      v87 = 0;
                      LOBYTE(Source) = 0;
                      if ( v90 && *(_DWORD *)(v90 + 8) )
                      {
                        v87 = *(_DWORD *)(v90 + 8);
                        LOBYTE(Source) = *(_BYTE *)(v90 + 13) + *(_BYTE *)(v90 + 14);
                      }
                      else
                      {
                        v96 = 0;
                        ItemStatModifierTable_GetBaseValueWithListPct(
                          v86,
                          i,
                          1,
                          (char **)&v87,
                          (unsigned __int8 *)&Source,
                          (unsigned __int8 *)&v96);
                        LOBYTE(Source) = v96 + (_BYTE)Source;
                      }
                      sub_65947F70(Buffer, v87);
                      if ( (_BYTE)Source )
                      {
                        v84 = &v76;
                        String_FromU8(&v76, (unsigned __int8)Source);
                        v90 = (int)v71;
                        LOBYTE(v103) = 3;
                        String_AssignFromPtr(v71, (int)Buffer);
                        LOBYTE(v103) = 0;
                        v56 = FormatString_Args((int)v83, (int)"{0} ({1}% Multiplier)");
                        LOBYTE(v103) = 4;
                        std::string::operator=(v97, v56);
                        LOBYTE(v103) = 0;
                        std::string::~string(v83);
                      }
                      else
                      {
                        std::string::operator=(v97, Buffer);
                      }
                      v57 = "FFFFFF00";
                      if ( !v95 )
                        v57 = "FF000000";
                      v82 = 0;
                      v81 = 0;
                      v80 = 0;
                      v79 = 2;
                      v78 = WindowGroup_CopyEntry(byte_65A5C4A8, 23, v57);
                      v77 = 1;
                      v76 = 0;
                      v75 = 0;
                      v74 = 440;
                      v73 = 256;
                      v58 = std::string::c_str(v97);
                      v59 = UiWidget_Create(v94, 0, v58, v73, v74, v75, v76, v77, (int)v78, v79, (int)v80, v81, v82);
                      v60 = (int)v59;
                      if ( v59 )
                      {
                        CWindow_SetOffset(v59, 4, 3);
                        v82 = 0;
                        v81 = v60;
                        v80 = v52;
                        Button_AddCallbacks((int)Simple, (int)v44);
                        if ( !v95 )
                        {
                          std::string::string(v98);
                          LOBYTE(v103) = 5;
                          v61 = v91 + 76;
                          v90 = 5;
                          do
                          {
                            v62 = *(_DWORD *)v61;
                            if ( *(int *)v61 > 0
                              && v62 < 116
                              && !ItemStatModifier_HasMinLevel(v86, v62, v61[4])
                              && sub_659480D0(v100, (unsigned __int8)v61[4]) )
                            {
                              if ( v99 )
                                std::string::operator+=(v98, "\r");
                              v63 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                                      g_pILTClient,
                                      *(_DWORD *)v61 + 17951);
                              if ( v63 )
                                v64 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                                      g_pILTClient,
                                                      v63);
                              else
                                v64 = byte_659A8B98;
                              v65 = (*(int (__cdecl **)(int, int, const char *, char *))(*(_DWORD *)g_pILTClient + 64))(
                                      g_pILTClient,
                                      6066,
                                      v64,
                                      v100);
                              std::string::operator+=(v98, "<font type='2' size='9' color='FF000000'>");
                              if ( v65 )
                                v66 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                                      g_pILTClient,
                                                      v65);
                              else
                                v66 = byte_659A8B98;
                              std::string::operator+=(v98, v66);
                              std::string::operator+=(v98, "</font>");
                              if ( v65 )
                                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v65);
                              if ( v63 )
                                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v63);
                            }
                            v61 += 8;
                            --v90;
                          }
                          while ( v90 );
                          if ( v99 )
                          {
                            v67 = (int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 72);
                            v68 = std::string::c_str(v98);
                            v69 = (*v67)(g_pILTClient, v68);
                            if ( v69 )
                              UiItemSlot_SetTooltipHString((int *)Simple, v69);
                          }
                          LOBYTE(v103) = 0;
                          std::string::~string(v98);
                        }
                        ListBox_AddItem(v94[1594], (int)Simple);
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    v70 = v94;
    ListBox_RefreshDisplay((int *)v94[1594]);
    ListBox_Reset(v70[1594]);
    v103 = -1;
    std::string::~string(v97);
  }
}
// 659A8274: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65840F70) --------------------------------------------------------
_DWORD *__thiscall TeamUI_RefreshMemberList(int **this)
{
  _DWORD *result; // eax
  _DWORD *v3; // ebx
  int v4; // esi
  int v5; // edi
  char *Entry; // esi
  int v7; // ebx
  const char *v8; // eax
  int v9; // eax
  const char *v10; // eax
  int (__thiscall ***v11)(_DWORD, int); // esi
  int v12; // ecx
  int v13; // ebx
  const char *v14; // eax
  _DWORD *v15; // eax
  _DWORD *v16; // eax
  _DWORD *v17; // eax
  _DWORD *v18; // eax
  unsigned int *Simple; // [esp+8h] [ebp-3Ch]
  unsigned int v20; // [esp+Ch] [ebp-38h]
  int v21; // [esp+10h] [ebp-34h]
  _DWORD *v22; // [esp+14h] [ebp-30h]
  int v23; // [esp+18h] [ebp-2Ch]
  _DWORD *v24; // [esp+18h] [ebp-2Ch]
  char Buffer[16]; // [esp+20h] [ebp-24h] BYREF
  char v27[16]; // [esp+30h] [ebp-14h] BYREF

  result = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
  v3 = result;
  v22 = result;
  if ( result )
  {
    ListBox_ClearItems(*(this + 1597));
    v4 = v3[1];
    v20 = 0;
    if ( (v3[2] - v4) / 20 )
    {
      v21 = 0;
      do
      {
        v5 = v21 + v4;
        if ( v21 + v4 )
        {
          Entry = ItemStatModifierTable_GetEntry(*(_DWORD *)v5);
          if ( Entry )
          {
            if ( *(_BYTE *)(v5 + 12) )
            {
              Simple = (unsigned int *)UiWidget_CreateSimple(7, *(_DWORD *)v5, 0, 0, 0, 0);
              if ( Simple )
              {
                if ( sub_659480D0(v27, *(unsigned __int8 *)(v5 + 4) + 1) )
                {
                  v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                         g_pILTClient,
                         *(_DWORD *)Entry + 17951);
                  if ( v7 )
                    v8 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                         g_pILTClient,
                                         v7);
                  else
                    v8 = byte_659A8B98;
                  v9 = (*(int (__cdecl **)(int, int, const char *, char *))(*(_DWORD *)g_pILTClient + 64))(
                         g_pILTClient,
                         21101,
                         v8,
                         v27);
                  v23 = v9;
                  if ( v9 )
                    v10 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                          g_pILTClient,
                                          v9);
                  else
                    v10 = byte_659A8B98;
                  v11 = UiWidget_Create(this, 0, (int)v10, 256, 195, 0, 0, 1, (int)&unk_65A5C5EC, 2, 0, 0, 0);
                  if ( v7 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
                  if ( v23 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v23);
                  if ( v11 )
                  {
                    v12 = (int)(v11[19] + 1);
                    v11[18] = (int (__thiscall **)(_DWORD, int))((char *)v11[20] + 1);
                    v11[21] = (int (__thiscall **)(_DWORD, int))4;
                    v11[22] = (int (__thiscall **)(_DWORD, int))1;
                    v11[17] = (int (__thiscall **)(_DWORD, int))v12;
                    v11[126] = (int (__thiscall **)(_DWORD, int))*(unsigned __int8 *)(v5 + 12);
                    v11[125] = (int (__thiscall **)(_DWORD, int))1;
                    sub_65947EB0(Buffer, *(_DWORD *)(v5 + 8));
                    v13 = (*(int (__cdecl **)(int, int, char *, int))(*(_DWORD *)g_pILTClient + 64))(
                            g_pILTClient,
                            21104,
                            Buffer,
                            *(unsigned __int8 *)(v5 + 4) + 1);
                    if ( v13 )
                      v14 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                            g_pILTClient,
                                            v13);
                    else
                      v14 = byte_659A8B98;
                    v15 = UiWidget_Create(this, 0, (int)v14, 256, 195, 0, 0, 1, (int)&unk_65A5C5EC, 2, 0, 0, 0);
                    v24 = v15;
                    if ( v13 )
                    {
                      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v13);
                      v15 = v24;
                    }
                    if ( v15 )
                    {
                      CWindow_SetOffset(v15, 4, 13);
                      v16 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9032);
                      LinkedList_AddNode(Simple, v16, 11, *(_DWORD *)v5, 0);
                      if ( *(_BYTE *)(v5 + 12) > 1u )
                      {
                        v17 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                                          g_pILTClient,
                                          9034);
                        LinkedList_AddNode(Simple, v17, 8, *(_DWORD *)v5, 0);
                      }
                      if ( ItemStatModifier_HasLevelAbove(v22, *(unsigned __int8 *)(v5 + 12)) )
                      {
                        v18 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                                          g_pILTClient,
                                          9035);
                        LinkedList_AddNode(Simple, v18, 9, *(_DWORD *)v5, 0);
                      }
                      Button_AddCallbacks((int)Simple, (int)v11);
                      ListBox_AddItem((unsigned int *)*(this + 1597), (int)Simple);
                    }
                  }
                  v3 = v22;
                }
              }
            }
          }
        }
        v4 = v3[1];
        v21 += 20;
        ++v20;
      }
      while ( v20 < (v3[2] - v4) / 20 );
    }
    (*(this + 1597))[670] = 0;
    (*(this + 1597))[671] = 1;
    ListBox_RefreshDisplay(*(this + 1597));
    return (_DWORD *)ListBox_Reset(*(this + 1597));
  }
  return result;
}
// 65840FD8: conditional instruction was optimized away because eax.4!=0
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65841300) --------------------------------------------------------
int __thiscall SkillWindow_Refresh(int *this)
{
  int result; // eax
  unsigned int v3; // eax
  int v4; // edi
  char *v5; // eax
  char Buffer[16]; // [esp+4h] [ebp-14h] BYREF

  result = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
  if ( result )
  {
    v3 = sub_65948DD0((_DWORD *)result);
    sub_65947EB0(Buffer, v3);
    v4 = (*(int (__stdcall **)(int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient);
    if ( v4 )
      v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
    else
      v5 = (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*(this + 1596), v5, 0, 0);
    if ( v4 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
    TeamUI_HandlePacketUpdate((int **)this);
    TeamUI_UpdateMemberInfo(this, *(this + 1595));
    TeamUI_RefreshMemberList((int **)this);
    result = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
    if ( result )
      *(_BYTE *)(result + 32) = 1;
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (658413E0) --------------------------------------------------------
_DWORD *__thiscall SkillWindow_HandleInput(int **a1, unsigned __int16 a3, int a4)
{
  _DWORD *result; // eax
  int v6; // eax
  int v7; // esi
  char *v8; // eax

  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x20000000);
  result = (_DWORD *)(a3 - 118);
  switch ( a3 )
  {
    case 'v':
      v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5433);
      goto LABEL_5;
    case 'w':
      result = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
      if ( result )
      {
        ItemStatModifier_DecrementLevel(result, a4);
        return TeamUI_RefreshMemberList(a1);
      }
      return result;
    case 'x':
      result = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
      if ( result )
      {
        ItemStatModifier_IncrementLevel(result, a4);
        return TeamUI_RefreshMemberList(a1);
      }
      return result;
    case 'y':
      v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5434);
      goto LABEL_5;
    case 'z':
      result = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
      if ( result )
      {
        SkillList_QueueLevelIncrease(result, a4);
        TeamUI_HandlePacketUpdate(a1);
        return TeamUI_RefreshMemberList(a1);
      }
      return result;
    case '{':
      v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5435);
LABEL_5:
      v7 = v6;
      if ( v6 )
        v8 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
      else
        v8 = (char *)byte_659A8B98;
      result = (_DWORD *)FriendList_AddEntry(dword_65ABF748, v8, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v7 )
        result = (*(_DWORD *(__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
      break;
    case '|':
      result = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
      if ( result )
      {
        ItemStatModifier_ResetLevelAndReindex((int)result, a4);
        TeamUI_HandlePacketUpdate(a1);
        result = TeamUI_RefreshMemberList(a1);
      }
      break;
    default:
      return result;
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (65841660) --------------------------------------------------------
int __thiscall TeamUI_HandleMemberAction(int this, int a2)
{
  _DWORD *v4; // eax
  _DWORD *v5; // ecx
  int v7; // ebx
  unsigned int v8; // ecx
  unsigned int v9; // eax
  _DWORD *v10; // edx
  _DWORD *v11; // ecx
  unsigned int v12; // [esp+10h] [ebp+8h]
  _DWORD *v13; // [esp+10h] [ebp+8h]

  if ( this != a2 )
  {
    v12 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 20;
    if ( !v12 )
    {
      v4 = *(_DWORD **)(this + 8);
      v5 = *(_DWORD **)(this + 4);
      if ( v5 != v4 )
      {
        *(_DWORD *)(this + 8) = Array20_CopyRange(v4, v4, v5);
        return this;
      }
      return this;
    }
    v7 = *(_DWORD *)(this + 4);
    v8 = (*(_DWORD *)(this + 8) - v7) / 20;
    if ( v12 <= v8 )
    {
      sub_6583F9A0(*(_DWORD **)(a2 + 4), *(_DWORD **)(a2 + 8), *(_DWORD **)(this + 4));
      *(_DWORD *)(this + 8) = *(_DWORD *)(this + 4) + 20 * ((*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 20);
      return this;
    }
    if ( v7 )
      v9 = (*(_DWORD *)(this + 12) - v7) / 20;
    else
      v9 = 0;
    if ( v12 > v9 )
    {
      if ( v7 )
        operator delete(*(void **)(this + 4));
      if ( !sub_658400F0((_DWORD *)this, (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 20) )
        return this;
      v10 = *(_DWORD **)(this + 4);
      v11 = *(_DWORD **)(a2 + 4);
    }
    else
    {
      v13 = (_DWORD *)(*(_DWORD *)(a2 + 4) + 20 * v8);
      sub_6583F9A0(*(_DWORD **)(a2 + 4), v13, *(_DWORD **)(this + 4));
      v10 = *(_DWORD **)(this + 8);
      v11 = v13;
    }
    *(_DWORD *)(this + 8) = sub_65840350(v11, *(_DWORD **)(a2 + 8), v10);
  }
  return this;
}

//----- (65841800) --------------------------------------------------------
char *__thiscall Packet_ID_SKILLS_ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -93;
  *(_DWORD *)this = &off_659CCEE8;
  SkillList_Init((_DWORD *)this + 270);
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *((_DWORD *)this + 282) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CCEE8: using guessed type void *off_659CCEE8;

//----- (65841890) --------------------------------------------------------
char __thiscall Packet_ID_SKILLS_read(int this, int a2)
{
  char result; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 2:
      case 7:
        Packet_ID_SKILLS_read_list((char *)(this + 1080), (unsigned int *)(this + 12));
        goto LABEL_5;
      case 3:
      case 4:
      case 5:
      case 6:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1128));
        result = 1;
        break;
      default:
LABEL_5:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (65841930) --------------------------------------------------------
int __thiscall SkillWindow_Dtor(void **this)
{
  if ( *(this + 275) )
    operator delete(*(this + 275));
  *(this + 275) = 0;
  *(this + 276) = 0;
  *(this + 277) = 0;
  if ( *(this + 271) )
    operator delete(*(this + 271));
  *(this + 271) = 0;
  *(this + 272) = 0;
  *(this + 273) = 0;
  *this = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 3));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (65841CE0) --------------------------------------------------------
int __thiscall SkillEntry_CopyFrom(int this, int a2)
{
  TeamUI_HandleMemberAction(this, a2);
  DwordVector_CopyFrom(this + 16, a2 + 16);
  *(_DWORD *)(this + 32) = *(_DWORD *)(a2 + 32);
  *(_BYTE *)(this + 36) = *(_BYTE *)(a2 + 36);
  *(_BYTE *)(this + 37) = *(_BYTE *)(a2 + 37);
  *(_BYTE *)(this + 38) = *(_BYTE *)(a2 + 38);
  *(_BYTE *)(this + 39) = *(_BYTE *)(a2 + 39);
  *(_BYTE *)(this + 40) = *(_BYTE *)(a2 + 40);
  *(_DWORD *)(this + 44) = *(_DWORD *)(a2 + 44);
  return this;
}

//----- (65841D70) --------------------------------------------------------
_DWORD *__thiscall SkillWindow_LoadSkill(int this, int a2)
{
  _DWORD *result; // eax
  _DWORD *v4; // esi
  unsigned int v5; // eax
  int v6; // esi
  char *v7; // eax
  char Buffer[16]; // [esp+Ch] [ebp-14h] BYREF

  result = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
  v4 = result;
  if ( result )
  {
    SkillEntry_CopyFrom((int)result, a2);
    v5 = sub_65948DD0(v4);
    sub_65947EB0(Buffer, v5);
    v6 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 891, Buffer);
    if ( v6 )
      v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
    else
      v7 = (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6384), v7, 0, 0);
    if ( v6 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
    *(_BYTE *)(this + 6372) = 0;
    TeamUI_UpdatePlayerList((int **)this);
    *(_DWORD *)(this + 6380) = 0;
    TeamUI_UpdateMemberInfo((int *)this, 0);
    TeamUI_HandlePacketUpdate((int **)this);
    return TeamUI_RefreshMemberList((int **)this);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65841FD0) --------------------------------------------------------
void __thiscall sub_65841FD0(int this)
{
  unsigned __int8 v2; // al
  char *v3; // eax
  int v4; // eax
  int v5; // edi
  char *v6; // eax
  int v7; // ebx
  int v8; // edi
  char *v9; // eax
  int v10; // edi
  char *v11; // eax
  int v12; // edi
  char *v13; // eax
  char *v14; // eax
  char *v15; // eax
  char *v16; // eax
  int v17; // edi
  char *v18; // eax
  int v19; // [esp+4h] [ebp-8h] BYREF
  char v20; // [esp+Bh] [ebp-1h]

  v2 = *(_BYTE *)(this + 6808);
  if ( !v2 || v2 >= 0x19u )
  {
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6796) + 128))(*(_DWORD *)(this + 6796), 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6784), (char *)byte_659A8B98, 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6788), (char *)byte_659A8B98, 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6792), (char *)byte_659A8B98, 0, 0);
    return;
  }
  v20 = 0;
  v19 = 0;
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 6, &v19);
  if ( v19 != 1 )
  {
    v3 = (char *)&unk_659E2168 + 24 * *(unsigned __int8 *)(this + 6808);
    if ( v3 )
    {
      if ( (unsigned __int8)v3[2] > 1u )
        v20 = 1;
    }
  }
  if ( *(unsigned __int8 *)(this + 6808) >= 0x19u )
    v4 = 0;
  else
    v4 = *((_DWORD *)dword_65ABF6F8 + *(unsigned __int8 *)(this + 6808) + 49);
  (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6796) + 128))(*(_DWORD *)(this + 6796), v4);
  v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
         g_pILTClient,
         *(unsigned __int8 *)(this + 6808) + 10500);
  if ( v5 )
    v6 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
  else
    v6 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6784), v6, 0, 0);
  if ( v5 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
  v19 = 0;
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v19);
  if ( !Item_ValidateSlotForType(42, v19) )
  {
    if ( v20 )
    {
      v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4466);
      v12 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4466);
      if ( v12 )
        v13 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v12);
      else
        v13 = (char *)byte_659A8B98;
      UiText_SetValueIfChanged(*(_DWORD *)(this + 6824), v13, 0, 0);
      if ( v12 )
LABEL_36:
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v12);
    }
    else
    {
      v7 = (*(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64))(
             g_pILTClient,
             4412,
             dword_659E216C[6 * *(unsigned __int8 *)(this + 6808)]);
      v12 = (*(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64))(
              g_pILTClient,
              4413,
              dword_659E216C[6 * *(unsigned __int8 *)(this + 6808)]);
      if ( v12 )
        v14 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v12);
      else
        v14 = (char *)byte_659A8B98;
      UiText_SetValueIfChanged(*(_DWORD *)(this + 6824), v14, 0, 0);
      if ( v12 )
        goto LABEL_36;
    }
    v10 = (*(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64))(
            g_pILTClient,
            4414,
            dword_659E2170[6 * *(unsigned __int8 *)(this + 6808)]);
    if ( v10 )
      v15 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v10);
    else
      v15 = (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6836), v15, 0, 0);
    if ( !v10 )
      goto LABEL_42;
    goto LABEL_41;
  }
  v7 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4412, 0);
  v8 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4413, 0);
  if ( v8 )
    v9 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
  else
    v9 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6824), v9, 0, 0);
  if ( v8 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v8);
  v10 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4414, 0);
  if ( v10 )
    v11 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v10);
  else
    v11 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6836), v11, 0, 0);
  if ( !v10 )
    goto LABEL_42;
LABEL_41:
  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v10);
LABEL_42:
  if ( v7 )
    v16 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
  else
    v16 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6788), v16, 0, 0);
  if ( v7 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
  v17 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
          g_pILTClient,
          *(unsigned __int8 *)(this + 6808) + 10550);
  if ( v17 )
    v18 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v17);
  else
    v18 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6792), v18, 0, 0);
  if ( v17 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v17);
  *(_DWORD *)(*(_DWORD *)(this + 6812) + 32) = 1;
  *(float *)(*(_DWORD *)(this + 6796) + 252) = 1.0;
  *(float *)(*(_DWORD *)(this + 6784) + 508) = 1.0;
  *(float *)(*(_DWORD *)(this + 6788) + 508) = 1.0;
  *(float *)(*(_DWORD *)(this + 6792) + 508) = 1.0;
}
// 659E216C: using guessed type int dword_659E216C[];
// 659E2170: using guessed type int dword_659E2170[];
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65842750) --------------------------------------------------------
int __thiscall sub_65842750(int this)
{
  int v2; // eax
  int v3; // edi

  v2 = sub_65842540(this + 6752, *(_DWORD *)(this + 6884));
  v3 = v2;
  if ( v2 )
  {
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6868), (char *)(v2 + 98), 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6872), (char *)(v3 + 122), 0, 0);
    if ( *(unsigned __int8 *)(v3 + 4) >= 0x19u )
      return (*(int (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6876) + 128))(*(_DWORD *)(this + 6876), 0);
    else
      return (*(int (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6876) + 128))(
               *(_DWORD *)(this + 6876),
               *((_DWORD *)dword_65ABF6F8 + *(unsigned __int8 *)(v3 + 4) + 49));
  }
  else
  {
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6868), (char *)byte_659A8B98, 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6872), (char *)byte_659A8B98, 0, 0);
    return (*(int (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6876) + 128))(*(_DWORD *)(this + 6876), 0);
  }
}
// 65842540: using guessed type int __thiscall sub_65842540(_DWORD, _DWORD);

//----- (65844660) --------------------------------------------------------
int __thiscall sub_65844660(int this, unsigned int a2)
{
  unsigned int v2; // edi
  int v5; // ebx
  unsigned int v6; // ecx
  int v7; // eax
  unsigned int v8; // eax
  int v9; // [esp-10h] [ebp-18h]
  int v10; // [esp-8h] [ebp-10h]

  v2 = a2;
  if ( this != a2 )
  {
    a2 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 664;
    if ( !a2 )
    {
      sub_658439D0(this, &a2, *(_DWORD *)(this + 4), *(_DWORD *)(this + 8));
      return this;
    }
    v5 = *(_DWORD *)(this + 4);
    v6 = (*(_DWORD *)(this + 8) - v5) / 664;
    if ( a2 <= v6 )
    {
      v7 = sub_65843970(*(_DWORD *)(v2 + 4), *(_DWORD *)(v2 + 8), *(_DWORD *)(this + 4));
      sub_65752020(this, v7, *(_DWORD *)(this + 8));
      *(_DWORD *)(this + 8) = *(_DWORD *)(this + 4) + 664 * ((*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 664);
      return this;
    }
    if ( v5 )
      v8 = (*(_DWORD *)(this + 12) - v5) / 664;
    else
      v8 = 0;
    if ( a2 <= v8 )
    {
      v10 = *(_DWORD *)(this + 4);
      v9 = *(_DWORD *)(v2 + 4);
      a2 = v9 + 664 * v6;
      sub_65843970(v9, a2, v10);
      *(_DWORD *)(this + 8) = sub_658439A0(this, a2, *(_DWORD *)(v2 + 8), *(_DWORD *)(this + 8));
      return this;
    }
    if ( v5 )
    {
      sub_65752020(this, v5, *(_DWORD *)(this + 8));
      operator delete(*(void **)(this + 4));
    }
    if ( (unsigned __int8)sub_65751A90(this, (*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 664) )
      *(_DWORD *)(this + 8) = sub_658439A0(this, *(_DWORD *)(v2 + 4), *(_DWORD *)(v2 + 8), *(_DWORD *)(this + 4));
  }
  return this;
}
// 65751A90: using guessed type int __thiscall sub_65751A90(_DWORD, _DWORD);
// 65752020: using guessed type int __thiscall sub_65752020(_DWORD, _DWORD, _DWORD);
// 65843970: using guessed type int __cdecl sub_65843970(_DWORD, _DWORD, _DWORD);
// 658439A0: using guessed type int __thiscall sub_658439A0(_DWORD, _DWORD, _DWORD, _DWORD);
// 658439D0: using guessed type int __thiscall sub_658439D0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65844850) --------------------------------------------------------
void __thiscall TeamUI_ShowInviteDialog(unsigned int *this, unsigned int a2)
{
  unsigned int v2; // esi
  int v4; // edi
  unsigned int v5; // eax
  int v6; // ecx
  bool v7; // zf
  int v8; // ecx
  int v9; // esi
  unsigned int v10; // eax
  unsigned int v11; // eax
  int v12; // eax
  char v13; // al
  int v14; // eax
  int (__thiscall ***v15)(_DWORD, int); // eax
  int (__thiscall **v16)(_DWORD, int); // ecx
  int v17; // ecx
  _BYTE v18[28]; // [esp-54h] [ebp-118h] BYREF
  _BYTE v19[16]; // [esp-38h] [ebp-FCh] BYREF
  int v20; // [esp-28h] [ebp-ECh]
  int v21; // [esp-24h] [ebp-E8h]
  int v22; // [esp-20h] [ebp-E4h]
  int v23; // [esp-1Ch] [ebp-E0h] BYREF
  int v24; // [esp-18h] [ebp-DCh]
  char *v25; // [esp-14h] [ebp-D8h]
  int v26; // [esp-10h] [ebp-D4h]
  int v27; // [esp-Ch] [ebp-D0h]
  int v28; // [esp-8h] [ebp-CCh]
  int v29; // [esp-4h] [ebp-C8h]
  _BYTE v30[28]; // [esp+10h] [ebp-B4h] BYREF
  int *v31; // [esp+2Ch] [ebp-98h]
  _BYTE *v32; // [esp+30h] [ebp-94h]
  _BYTE *v33; // [esp+34h] [ebp-90h]
  unsigned int v34; // [esp+38h] [ebp-8Ch]
  unsigned __int8 i; // [esp+3Fh] [ebp-85h]
  char v36[28]; // [esp+40h] [ebp-84h] BYREF
  char Str[24]; // [esp+5Ch] [ebp-68h] BYREF
  char v38[20]; // [esp+74h] [ebp-50h] BYREF
  char Destination[24]; // [esp+88h] [ebp-3Ch] BYREF
  char String[20]; // [esp+A0h] [ebp-24h] BYREF
  int v41; // [esp+C0h] [ebp-4h]

  v2 = a2;
  v34 = a2;
  *(this + 1721) = 0;
  sub_65842750((int)this);
  sub_65844660((int)(this + 1688), a2);
  strncpy_s(Destination, 0x18u, *(const char **)(*(this + 1712) + 176), 0xFFFFFFFF);
  _strlwr_s(Destination, 0x18u);
  strncpy_s(String, 0x14u, *(const char **)(*(this + 1713) + 176), 0xFFFFFFFF);
  _strlwr_s(String, 0x14u);
  sub_6576D9C0((_DWORD *)*(this + 1711));
  std::string::string(v36);
  v4 = *(_DWORD *)(a2 + 4);
  v5 = (*(_DWORD *)(a2 + 8) - v4) / 664;
  v41 = 0;
  for ( i = 0; i < (unsigned __int8)v5; v5 = (v17 - v4) / 664 )
  {
    if ( i < v5 )
    {
      v6 = 664 * i;
      v7 = v4 + v6 == 0;
      v8 = v4 + v6;
      v9 = v8;
      if ( !v7 )
      {
        if ( *(_DWORD *)v8 )
        {
          strncpy_s(Str, 0x18u, (const char *)(v8 + 98), 0xFFFFFFFF);
          _strlwr_s(Str, 0x18u);
          strncpy_s(v38, 0x14u, (const char *)(v9 + 32), 0xFFFFFFFF);
          _strlwr_s(v38, 0x14u);
          if ( (sub_65948020(Destination) || !strcmp(Destination, Str) || strstr(Str, Destination))
            && (sub_65948020(String) || !strcmp(String, v38) || strstr(v38, String)) )
          {
            v10 = *(this + 1722);
            if ( !v10 || v10 >= 0x19 || v10 == *(unsigned __int8 *)(v9 + 4) )
            {
              v11 = *(_DWORD *)(v9 + 660);
              v31 = &v23;
              String_FromU32(&v23, v11);
              v32 = v19;
              LOBYTE(v41) = 1;
              String_AssignFromPtr(v19, v9 + 32);
              v33 = v18;
              LOBYTE(v41) = 2;
              String_AssignFromPtr(v18, v9 + 98);
              LOBYTE(v41) = 0;
              v12 = sub_65946220((int)v30, (int)"{0} - {1} - {2}");
              LOBYTE(v41) = 3;
              std::string::operator=(v36, v12);
              LOBYTE(v41) = 0;
              std::string::~string(v30);
              v13 = *(_BYTE *)(v9 + 652);
              v29 = 0;
              v28 = 0;
              v27 = 0;
              v26 = 2;
              v25 = WindowGroup_CopyEntry(byte_65A5C4A8, 3, v13 != 0 ? "00B2FF00" : 0);
              v24 = 1;
              v23 = 0;
              v22 = 0;
              v21 = 420;
              v20 = 128;
              v14 = std::string::c_str(v36);
              v15 = UiWidget_Create(this, 0, v14, v20, v21, v22, v23, v24, (int)v25, v26, v27, v28, v29);
              if ( v15 )
              {
                v16 = *(int (__thiscall ***)(_DWORD, int))(v9 + 660);
                v7 = *(_BYTE *)(v9 + 652) == 0;
                v15[125] = (int (__thiscall **)(_DWORD, int))1;
                if ( !v7 )
                  v16 += 2500;
                v29 = 0;
                v15[126] = v16;
                sub_6576D0F0((_DWORD *)*(this + 1711), *(_DWORD *)v9, *(unsigned __int8 *)(v9 + 4), 0, 20, (int)v15);
              }
            }
          }
        }
      }
      v2 = v34;
    }
    v4 = *(_DWORD *)(v2 + 4);
    v17 = *(_DWORD *)(v2 + 8);
    ++i;
  }
  sub_6576D1D0((_DWORD *)*(this + 1711));
  v41 = -1;
  std::string::~string(v36);
}
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (65844C00) --------------------------------------------------------
void __thiscall TeamUI_ProcessInviteResponse(int this, unsigned int a2)
{
  unsigned int v2; // ebx
  int v3; // edi
  int v4; // esi
  unsigned int v5; // eax
  int v6; // edi
  int v7; // esi
  const char *v8; // eax
  int v9; // eax
  int v10; // ebx
  int v11; // esi
  int v12; // ebx
  int (__cdecl **v13)(int, int, int, const char *, int); // esi
  int v14; // eax
  int v15; // ebx
  int (__cdecl **v16)(int, int, int, const char *, int); // esi
  int v17; // esi
  const char *v18; // eax
  int (__thiscall ***v19)(_DWORD, int); // ebx
  int v20; // [esp-4h] [ebp-54h]
  int v21; // [esp-4h] [ebp-54h]
  int v22; // [esp+10h] [ebp-40h]
  const char *v24; // [esp+1Ch] [ebp-34h]
  const char *v25; // [esp+1Ch] [ebp-34h]
  unsigned __int8 v26; // [esp+23h] [ebp-2Dh]
  _BYTE v27[20]; // [esp+24h] [ebp-2Ch] BYREF
  int v28; // [esp+38h] [ebp-18h]
  int v29; // [esp+4Ch] [ebp-4h]

  v2 = a2;
  v3 = this;
  *(_BYTE *)(this + 6808) = 1;
  sub_65841FD0(this);
  sub_65844660(v3 + 6752, a2);
  sub_6576D9C0(*(_DWORD **)(v3 + 6780));
  std::string::string(v27);
  v4 = *(_DWORD *)(a2 + 4);
  v5 = (*(_DWORD *)(a2 + 8) - v4) / 664;
  v29 = 0;
  v26 = 0;
  if ( (_BYTE)v5 )
  {
    do
    {
      if ( v26 < v5 )
      {
        v6 = v4 + 664 * v26;
        if ( v6 )
        {
          if ( *(_DWORD *)v6 )
          {
            std::string::operator=(v27, v6 + 98);
            if ( !v28 )
            {
              v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4423);
              v8 = v7
                 ? (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7)
                 : byte_659A8B98;
              std::string::operator=(v27, v8);
              if ( v7 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
            }
            v9 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                   g_pILTClient,
                   *(unsigned __int8 *)(v6 + 4) + 10500);
            v10 = *(_DWORD *)(v6 + 8);
            v11 = v9;
            v22 = v9;
            if ( v10 == SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) )
            {
              if ( v11 )
                v24 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v11);
              else
                v24 = byte_659A8B98;
              v12 = *(_DWORD *)v6;
              v13 = (int (__cdecl **)(int, int, int, const char *, int))(*(_DWORD *)g_pILTClient + 64);
              v20 = std::string::c_str(v27);
              v14 = (*v13)(g_pILTClient, 4415, v12, v24, v20);
            }
            else
            {
              if ( v11 )
                v25 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v11);
              else
                v25 = byte_659A8B98;
              v15 = *(_DWORD *)v6;
              v16 = (int (__cdecl **)(int, int, int, const char *, int))(*(_DWORD *)g_pILTClient + 64);
              v21 = std::string::c_str(v27);
              v14 = (*v16)(g_pILTClient, 4434, v15, v25, v21);
            }
            v17 = v14;
            if ( v14 )
              v18 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v14);
            else
              v18 = byte_659A8B98;
            v19 = UiWidget_Create((void *)this, 0, (int)v18, 128, 420, 0, 0, 1, (int)&unk_65A5C5EC, 2, 0, 0, 0);
            if ( v17 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v17);
            if ( v22 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v22);
            sub_6576D0F0(*(_DWORD **)(this + 6780), *(_DWORD *)v6, *(unsigned __int8 *)(v6 + 4), 0, 20, (int)v19);
            v2 = a2;
          }
        }
      }
      v4 = *(_DWORD *)(v2 + 4);
      ++v26;
      v5 = (*(_DWORD *)(v2 + 8) - v4) / 664;
    }
    while ( v26 < (unsigned __int8)v5 );
    v3 = this;
  }
  sub_6576D1D0(*(_DWORD **)(v3 + 6780));
  v29 = -1;
  std::string::~string(v27);
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (65844ED0) --------------------------------------------------------
char __thiscall Packet_ID_AF_read(int this, int a2)
{
  char result; // al
  char v4; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 3:
      case 4:
        Packet_ID_AF_B0_read_listA((void *)(this + 1084), (unsigned int *)(this + 12));
        return 1;
      case 5:
        Read_u8c((unsigned int *)this, (char *)(this + 1100));
        VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1101));
        return 1;
      case 6:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        v4 = VariableSizedPacket::DecodeString((char *)this, this + 1102);
        goto LABEL_11;
      case 7:
      case 0xA:
      case 0xE:
      case 0x10:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        return 1;
      case 8:
        Models::Apartment::Read((char *)(this + 1624), (unsigned int *)(this + 12));
        if ( !(unsigned __int8)VariableSizedPacket::DecodeString((char *)this, this + 1110) )
          goto LABEL_12;
        Packet_ID_FACTION_read_listA((char *)(this + 2380), (unsigned int *)(this + 12));
        return 1;
      case 9:
        Models::Apartment::Read((char *)(this + 1624), (unsigned int *)(this + 12));
        v4 = VariableSizedPacket::DecodeString((char *)this, this + 1110);
        goto LABEL_11;
      case 0xB:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        v4 = VariableSizedPacket::DecodeString((char *)this, this + 2288);
LABEL_11:
        if ( v4 )
          goto LABEL_15;
LABEL_12:
        result = 0;
        break;
      case 0xC:
      case 0xD:
        Packet_ID_AF_read_structA((char *)(this + 2308), (unsigned int *)(this + 12));
        return 1;
      case 0xF:
        ItemList_Read((ItemsAddedPayload *)(this + 2344), (unsigned int *)(this + 12));
        VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1101));
        goto LABEL_15;
      default:
LABEL_15:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (658456C0) --------------------------------------------------------
int __thiscall ShopWindow_SetTimer(int this, int a2)
{
  __time64_t v3; // rax

  if ( *(_DWORD *)(this + 6548) )
  {
    *(_DWORD *)(this + 6552) = a2;
    LODWORD(v3) = a2;
  }
  else
  {
    *(_DWORD *)(this + 6548) = 300;
    v3 = _time64(0);
    *(_QWORD *)(this + 6592) = v3 + *(unsigned int *)(this + 6548);
    *(_DWORD *)(this + 6552) = a2;
  }
  return v3;
}

//----- (65847A90) --------------------------------------------------------
_DWORD *__thiscall Read_6BitFlags(bool *this, _DWORD *a2)
{
  _DWORD *result; // eax
  unsigned int v3; // edi
  unsigned int v4; // edi
  unsigned int v5; // edi
  unsigned int v6; // edi
  unsigned int v7; // edi
  unsigned int v8; // edi

  result = a2;
  v3 = a2[2];
  if ( v3 + 1 <= *a2 )
  {
    *this = ((unsigned __int8)(128 >> (v3 & 7)) & *(_BYTE *)((v3 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  v4 = a2[2];
  if ( v4 + 1 <= *a2 )
  {
    *(this + 1) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  v5 = a2[2];
  if ( v5 + 1 <= *a2 )
  {
    *(this + 2) = ((unsigned __int8)(128 >> (v5 & 7)) & *(_BYTE *)((v5 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  v6 = a2[2];
  if ( v6 + 1 <= *a2 )
  {
    *(this + 3) = ((unsigned __int8)(128 >> (v6 & 7)) & *(_BYTE *)((v6 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  v7 = a2[2];
  if ( v7 + 1 <= *a2 )
  {
    *(this + 4) = ((unsigned __int8)(128 >> (v7 & 7)) & *(_BYTE *)((v7 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  v8 = a2[2];
  if ( v8 + 1 <= *a2 )
  {
    *(this + 5) = ((unsigned __int8)(128 >> (v8 & 7)) & *(_BYTE *)((v8 >> 3) + a2[3])) != 0;
    ++a2[2];
  }
  return result;
}

//----- (65847C70) --------------------------------------------------------
void __thiscall Packet_ID_B6_read_structA(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 8);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 12);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 16);
  Playerfile_read_blockC0(this + 52, a2);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 20,
    2048,
    a2);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 176);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 180);
  sub_65946F10();
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65847CF0) --------------------------------------------------------
_DWORD *__thiscall Packet_ID_B6_read_structB(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 4);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 7,
    2048,
    a2);
  RakNet::BitStream::ReadCompressed(a2, this + 6, 8u, 1);
  Read_u16c_x6(this + 136, a2);
  return Read_6BitFlags((bool *)this + 148, a2);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65847E40) --------------------------------------------------------
char *__usercall sub_65847E40@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x24u);
      --v4;
      result += 36;
    }
    while ( v4 );
  }
  return result;
}

//----- (658480F0) --------------------------------------------------------
int __thiscall sub_658480F0(int this, int a2, unsigned int a3, const void *a4)
{
  __int64 v5; // rax
  unsigned int v6; // edi
  int v7; // eax
  unsigned int v8; // edi
  void *v9; // eax
  int v10; // ecx
  int v11; // eax
  int v12; // eax
  int v13; // ecx
  int v14; // ecx
  unsigned int v15; // esi
  int v16; // ecx
  char *v17; // edi
  int v19; // [esp+0h] [ebp-54h] BYREF
  const void *v20; // [esp+10h] [ebp-44h]
  int v21; // [esp+14h] [ebp-40h]
  void *v22; // [esp+18h] [ebp-3Ch]
  _BYTE v23[36]; // [esp+1Ch] [ebp-38h] BYREF
  int *v24; // [esp+44h] [ebp-10h]
  int v25; // [esp+50h] [ebp-4h]

  v24 = &v19;
  v20 = a4;
  LODWORD(v5) = *(_DWORD *)(this + 4);
  if ( (_DWORD)v5 )
  {
    v5 = 954437177LL * (*(_DWORD *)(this + 12) - (int)v5);
    v6 = (SHIDWORD(v5) >> 3) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v22 = *(void **)(this + 8);
    v7 = ((int)v22 - *(_DWORD *)(this + 4)) / 36;
    if ( 119304647 - v7 < a3 )
      v7 = sub_658452D0();
    if ( v6 >= v7 + a3 )
    {
      qmemcpy(v23, v20, sizeof(v23));
      if ( ((int)v22 - a2) / 36 >= a3 )
      {
        v17 = (char *)v22 - 36 * a3;
        *(_DWORD *)(this + 8) = sub_65848040(this, v17, v22, v22);
        sub_65847E10(a2, v17, v22);
        LODWORD(v5) = sub_65847C10(a2, a2 + 36 * a3, v23);
      }
      else
      {
        sub_65848040(this, a2, v22, 36 * a3 + a2);
        v16 = *(_DWORD *)(this + 8);
        v25 = 2;
        sub_65847F20(this, v16, a3 - (v16 - a2) / 36, v23);
        *(_DWORD *)(this + 8) += 36 * a3;
        LODWORD(v5) = sub_65847C10(a2, *(_DWORD *)(this + 8) - 36 * a3, v23);
      }
    }
    else
    {
      if ( 119304647 - (v6 >> 1) >= v6 )
        v8 = (v6 >> 1) + v6;
      else
        v8 = 0;
      if ( v8 < v7 + a3 )
        v8 = v7 + a3;
      v9 = (void *)sub_65845450(v8, 0, v19);
      v10 = *(_DWORD *)(this + 4);
      LOBYTE(v21) = 0;
      v22 = v9;
      v25 = 0;
      v11 = sub_65845970(v10, a2, v9, this, v21, v21);
      v12 = sub_65847F20(this, v11, a3, v20);
      v13 = *(_DWORD *)(this + 8);
      LOBYTE(v21) = 0;
      sub_65845970(a2, v13, v12, this, v21, v21);
      v14 = *(_DWORD *)(this + 4);
      v15 = (*(_DWORD *)(this + 8) - v14) / 36 + a3;
      if ( v14 )
        operator delete(*(void **)(this + 4));
      LODWORD(v5) = v22;
      *(_DWORD *)(this + 12) = (char *)v22 + 36 * v8;
      *(_DWORD *)(this + 8) = v5 + 36 * v15;
      *(_DWORD *)(this + 4) = v5;
    }
  }
  return v5;
}
// 658452D0: using guessed type int sub_658452D0(void);
// 65845450: using guessed type int __stdcall sub_65845450(_DWORD, _DWORD, _DWORD);
// 65845970: using guessed type int __cdecl sub_65845970(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 65847C10: using guessed type int __cdecl sub_65847C10(_DWORD, _DWORD, _DWORD);
// 65847E10: using guessed type int __cdecl sub_65847E10(_DWORD, _DWORD, _DWORD);
// 65847F20: using guessed type int __thiscall sub_65847F20(_DWORD, _DWORD, _DWORD, _DWORD);
// 65848040: using guessed type int __thiscall sub_65848040(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65848440) --------------------------------------------------------
_DWORD *__thiscall sub_65848440(_DWORD *this, _DWORD *a2, int a3, const void *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 36 )
    v6 = (a3 - v5) / 36;
  else
    v6 = 0;
  sub_658480F0((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 36 * v6;
  return a2;
}

//----- (65848570) --------------------------------------------------------
char __thiscall Packet_ID_B6_read_structD_entry(char *this, unsigned int *a2)
{
  unsigned int *v2; // edi
  unsigned int v4; // eax
  char *v5; // esi
  int v6; // edx
  unsigned int v7; // eax
  char *v8; // ecx
  char v10[4]; // [esp+Ch] [ebp-Ch] BYREF
  unsigned int v11; // [esp+10h] [ebp-8h]
  unsigned int v12; // [esp+14h] [ebp-4h] BYREF

  v2 = a2;
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  (*(void (__thiscall **)(int, char *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
    g_LTClient,
    this + 4,
    2048,
    v2);
  v12 = 0;
  LOBYTE(v4) = RakNet::BitStream::ReadCompressed_T_uint(v2, (char *)&v12);
  v11 = 0;
  if ( v12 )
  {
    v5 = this + 36;
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, v10, 0x20u, 1) )
          ByteSwapCopy((int)v10, (int)&a2, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&a2, 0x20u, 1);
      }
      v6 = *((_DWORD *)v5 + 1);
      if ( v6 )
        v7 = (*((_DWORD *)v5 + 3) - v6) >> 2;
      else
        v7 = 0;
      v8 = (char *)*((_DWORD *)v5 + 2);
      if ( (int)&v8[-v6] >> 2 >= v7 )
      {
        Vector_InsertN((int)v5, v8, 1u, (unsigned int)&a2);
      }
      else
      {
        *(_DWORD *)v8 = a2;
        *((_DWORD *)v5 + 2) = v8 + 4;
      }
      v4 = v11 + 1;
      v11 = v4;
    }
    while ( v4 < v12 );
  }
  return v4;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65848650) --------------------------------------------------------
char *__thiscall Vector36_PushBack(char **this, void *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 36;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 36 >= v4 )
    return (char *)sub_65848440(this, &a2, (int)v5, a2);
  result = sub_65847E40((char *)a2, v5, 1, a2);
  *(this + 2) = v5 + 36;
  return result;
}

//----- (658487A0) --------------------------------------------------------
char *__thiscall Packet_ID_B6_read_structC(char *this, unsigned int *a2)
{
  unsigned int v3; // ebx
  char *result; // eax
  unsigned int v5; // eax
  bool v6; // zf
  char v7[4]; // [esp+Ch] [ebp-38h] BYREF
  char **v8; // [esp+10h] [ebp-34h]
  char v9[4]; // [esp+14h] [ebp-30h] BYREF
  unsigned int v10; // [esp+18h] [ebp-2Ch] BYREF
  int v11; // [esp+1Ch] [ebp-28h] BYREF
  int v12; // [esp+20h] [ebp-24h] BYREF
  bool v13; // [esp+24h] [ebp-20h]
  _BYTE v14[23]; // [esp+25h] [ebp-1Fh] BYREF
  int v15; // [esp+3Ch] [ebp-8h] BYREF

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 20);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 24);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 28);
  sub_65946F10();
  v3 = 0;
  v10 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v10);
  result = (char *)unknown_libname_664(&v15);
  v11 = 0;
  v12 = 0;
  v13 = 0;
  v14[0] = 0;
  v15 = 0;
  if ( v10 )
  {
    v8 = (char **)(this + 4);
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v7, 0x20u, 1) )
          ByteSwapCopy((int)v7, (int)&v11, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v11, 0x20u, 1);
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v9, 0x20u, 1) )
          ByteSwapCopy((int)v9, (int)&v12, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v12, 0x20u, 1);
      }
      v5 = a2[2];
      if ( v5 + 1 <= *a2 )
      {
        v6 = ((unsigned __int8)(128 >> (v5 & 7)) & *(_BYTE *)((v5 >> 3) + a2[3])) == 0;
        a2[2] = v5 + 1;
        v13 = !v6;
      }
      (*(void (__thiscall **)(int, _BYTE *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
        g_LTClient,
        v14,
        2048,
        a2);
      sub_65946F10();
      result = Vector36_PushBack(v8, &v11);
      ++v3;
    }
    while ( v3 < v10 );
  }
  return result;
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65848FC0) --------------------------------------------------------
int __thiscall Packet_ID_B6_structD_list_insert(_DWORD *this, int a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  int v5; // edi
  int result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 52;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - v3) / 52 >= v4 )
    return sub_65848D00(this, &a2, v5, a2);
  result = sub_658486E0(v5, 1, a2, this, a2, 0);
  *(this + 2) = v5 + 52;
  return result;
}
// 658486E0: using guessed type int __cdecl sub_658486E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 65848D00: using guessed type int __thiscall sub_65848D00(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65849050) --------------------------------------------------------
void __thiscall Packet_ID_B6_read_structD(_DWORD *this, unsigned int *a2)
{
  int v3; // edx
  unsigned int v4; // eax
  char *v5; // ecx
  _DWORD *v6; // esi
  int v7; // [esp+10h] [ebp-54h] BYREF
  char v8[4]; // [esp+14h] [ebp-50h] BYREF
  unsigned int i; // [esp+18h] [ebp-4Ch]
  unsigned int v10; // [esp+1Ch] [ebp-48h] BYREF
  int v11; // [esp+20h] [ebp-44h] BYREF
  char v12; // [esp+24h] [ebp-40h]
  void *v13; // [esp+48h] [ebp-1Ch]
  void *v14; // [esp+4Ch] [ebp-18h]
  int v15; // [esp+50h] [ebp-14h]
  int v16; // [esp+60h] [ebp-4h]

  v10 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v10);
  for ( i = 0; i < v10; ++i )
  {
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(a2, v8, 0x20u, 1) )
        ByteSwapCopy((int)v8, (int)&v7, 4u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(a2, (char *)&v7, 0x20u, 1);
    }
    v3 = *(this + 1);
    if ( v3 )
      v4 = (*(this + 3) - v3) >> 2;
    else
      v4 = 0;
    v5 = (char *)*(this + 2);
    if ( (int)&v5[-v3] >> 2 >= v4 )
    {
      Vector_InsertN((int)this, v5, 1u, (unsigned int)&v7);
    }
    else
    {
      *(_DWORD *)v5 = v7;
      *(this + 2) = v5 + 4;
    }
  }
  if ( Net_IsBigEndian() )
  {
    if ( RakNet::BitStream::ReadCompressed(a2, v8, 0x20u, 1) )
      ByteSwapCopy((int)v8, (int)&v10, 4u);
  }
  else
  {
    RakNet::BitStream::ReadCompressed(a2, (char *)&v10, 0x20u, 1);
  }
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v11 = 0;
  v12 = 0;
  v16 = 0;
  i = 0;
  if ( v10 )
  {
    v6 = this + 4;
    do
    {
      Packet_ID_B6_read_structD_entry((char *)&v11, a2);
      Packet_ID_B6_structD_list_insert(v6, (int)&v11);
      v11 = 0;
      v12 = 0;
      if ( v13 != v14 )
        v14 = v13;
      ++i;
    }
    while ( i < v10 );
    if ( v13 )
      operator delete(v13);
  }
}

//----- (658491E0) --------------------------------------------------------
char __thiscall Packet_ID_B6_read(int this, int a2)
{
  char result; // al
  unsigned int *v4; // edi

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    v4 = (unsigned int *)(this + 12);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 1:
      case 3:
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1080));
        result = 1;
        break;
      case 2:
        Packet_ID_B6_read_structB((char *)(this + 1272), (unsigned int *)(this + 12));
        VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1460));
        if ( *(_WORD *)(this + 1276) == 992 )
        {
          Packet_ID_B6_read_structD((_DWORD *)(this + 1428), (unsigned int *)(this + 12));
          Packet_ID_B6_read_structA((char *)(this + 1088), (unsigned int *)(this + 12));
          result = 1;
        }
        else
        {
          if ( *(_WORD *)(this + 1276) != 994 )
            goto LABEL_11;
          Packet_ID_B6_read_structA((char *)(this + 1088), (unsigned int *)(this + 12));
          result = 1;
        }
        break;
      case 4:
        Packet_ID_B6_read_structB((char *)(this + 1272), (unsigned int *)(this + 12));
        VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1460));
        Packet_ID_B6_read_structC((char *)(this + 1464), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 5:
        Packet_ID_B6_read_structB((char *)(this + 1272), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 6:
      case 7:
      case 8:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1084));
        goto LABEL_11;
      default:
LABEL_11:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (65849360) --------------------------------------------------------
int __thiscall LockWindow_SetPinDigits(int this, int a2, _BYTE *a3)
{
  DWORD Time; // eax
  int result; // eax

  Time = timeGetTime();
  *(_BYTE *)(this + 6444) = *a3;
  *(_DWORD *)(this + 6412) = Time + 2500;
  *(_BYTE *)(this + 6445) = a3[1];
  *(_DWORD *)(this + 6416) = Time + 3750;
  *(_BYTE *)(this + 6446) = a3[2];
  *(_DWORD *)(this + 6420) = Time + 5000;
  *(_BYTE *)(this + 6447) = a3[3];
  *(_DWORD *)(this + 6424) = Time + 6250;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6404), (char *)byte_659A8B98, 0, 0);
  *(_DWORD *)(this + 6448) = a2;
  return result;
}

//----- (6584A1D0) --------------------------------------------------------
int __thiscall LockWindow_ShowMessage(int *this, int a2)
{
  int v3; // edi
  char *v4; // eax
  int v5; // edi
  const char *v6; // eax
  int v7; // ebx
  char *v8; // eax
  int v9; // ecx
  int v11; // ecx
  int v12; // ecx
  int v13; // ecx

  if ( a2 == 1866 )
  {
    v3 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4380);
    if ( v3 )
      v4 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
    else
      v4 = (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*(this + 1711), v4, 0, "00FF0000");
    if ( v3 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v3);
  }
  else
  {
    v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, a2);
    if ( v5 )
      v6 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
    else
      v6 = byte_659A8B98;
    v7 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4381, v6);
    if ( v7 )
      v8 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
    else
      v8 = (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*(this + 1711), v8, 0, "FF000000");
    if ( v5 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
    if ( v7 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
  }
  v9 = *(this + 1688);
  *(_DWORD *)(v9 + 168) = 1;
  *(_DWORD *)(v9 + 44) = 1;
  v11 = *(this + 1689);
  *(_DWORD *)(v11 + 168) = 1;
  *(_DWORD *)(v11 + 44) = 1;
  v12 = *(this + 1690);
  *(_DWORD *)(v12 + 168) = 1;
  *(_DWORD *)(v12 + 44) = 1;
  v13 = *(this + 1691);
  *(_DWORD *)(v13 + 168) = 1;
  *(_DWORD *)(v13 + 44) = 1;
  *(this + 1715) = 0;
  *(this + 1787) = 9999;
  return 1;
}

//----- (6584A5E0) --------------------------------------------------------
char __thiscall sub_6584A5E0(_DWORD *this, _DWORD *a2)
{
  int v3; // eax
  unsigned int v4; // edi
  unsigned __int16 v5; // cx
  char v7[81]; // [esp+Ch] [ebp-58h] BYREF
  unsigned __int8 v8; // [esp+5Dh] [ebp-7h]

  v3 = (*(this + 4) - *(this + 3)) >> 2;
  v4 = 0;
  if ( v3 )
  {
    do
    {
      v3 = *(this + 3) + 4 * v4;
      if ( *(_BYTE *)(v3 + 3) )
      {
        v5 = *(_WORD *)v3;
        LOBYTE(v3) = *(_WORD *)v3;
        if ( v5 == 17 || v5 == 24 )
        {
          LOBYTE(v3) = SkillDefTable_CopyEntry(v5, v7);
          if ( (_BYTE)v3 )
          {
            LOBYTE(v3) = v8;
            *a2 += v8;
          }
        }
      }
      ++v4;
    }
    while ( v4 < (*(this + 4) - *(this + 3)) >> 2 );
  }
  return v3;
}

//----- (6584A970) --------------------------------------------------------
void __thiscall LockWindow_TryUnlock(int *this)
{
  _DWORD *v2; // edi
  _DWORD *v3; // eax
  int v4; // edi
  char *v5; // eax
  float v6; // [esp+0h] [ebp-44h]
  int v7; // [esp+14h] [ebp-30h] BYREF
  float v8; // [esp+18h] [ebp-2Ch]
  float v9; // [esp+1Ch] [ebp-28h]
  int v10; // [esp+20h] [ebp-24h]
  int v11; // [esp+24h] [ebp-20h]
  int v12; // [esp+28h] [ebp-1Ch]
  int v13; // [esp+2Ch] [ebp-18h]
  __int16 v14; // [esp+30h] [ebp-14h]
  int RequirementValue; // [esp+34h] [ebp-10h] BYREF
  int v16; // [esp+38h] [ebp-Ch]
  int v17; // [esp+3Ch] [ebp-8h] BYREF
  int v18; // [esp+40h] [ebp-4h] BYREF

  v18 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  if ( v18 )
  {
    v2 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
    if ( v2 )
    {
      v13 = *(this + 1786);
      LOWORD(v8) = 0;
      v9 = 0.0;
      v10 = 0;
      v11 = 0;
      v12 = 0;
      LOBYTE(v14) = 0;
      RequirementValue = 0;
      LOWORD(v16) = 0;
      v7 = 4;
      RequirementValue = Production_GetRequirementValue((int)(this + 1592), *(unsigned __int16 *)(v18 + 8), 4u);
      v3 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 5);
      if ( v3 )
        sub_6584A5E0(v3, &RequirementValue);
      v18 = 0;
      StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v18);
      if ( ProductionCalcB(v18, (int)&v7) )
      {
        ItemStatModifier_ProcessValue_ByItemTemplate(v2, *(_WORD *)(*(this + 1687) + 180), &v17);
        ItemStatModifier_ProcessValue(v2, 0x4Au, &v17);
        v6 = (float)v17;
        TextWidget_UpdatePosition(*(this + 1713), v6, 0.0);
        *(this + 1715) = 1;
        v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4378);
        if ( v4 )
          v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
        else
          v5 = (char *)byte_659A8B98;
        UiText_SetValueIfChanged(*(this + 1711), v5, 0, "FFFFFF00");
        if ( v4 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
      }
    }
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6584B810) --------------------------------------------------------
char __thiscall Packet_ID_CHEMICAL_LAB_read(int this, int a2)
{
  char result; // al
  unsigned int *v4; // esi
  int *v5; // edi
  int v6; // ebx

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    v4 = (unsigned int *)(this + 12);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    if ( *(_BYTE *)(this + 1076) == 1 )
    {
      RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1077), 8u, 1);
      RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1078), 8u, 1);
      RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1079), 8u, 1);
      RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1080), 8u, 1);
      RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1081), 8u, 1);
      RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1082), 8u, 1);
      v5 = (int *)(this + 1084);
      v6 = 4;
      do
      {
        Read_u32c_list_u16count(v5, v4);
        v5 += 3;
        --v6;
      }
      while ( v6 );
    }
    return 1;
  }
  return result;
}

//----- (6584C0E0) --------------------------------------------------------
char __thiscall LockWindow_ProcessInput(char *this, unsigned __int8 a2, __int16 a3, int *a4)
{
  int *v4; // ebx
  int v5; // eax
  int *v7; // [esp-8h] [ebp-58h]
  int *v8; // [esp+10h] [ebp-40h] BYREF
  _DWORD v9[8]; // [esp+14h] [ebp-3Ch] BYREF
  int **v10; // [esp+34h] [ebp-1Ch] BYREF
  void *v11; // [esp+38h] [ebp-18h]
  int v12; // [esp+4Ch] [ebp-4h]

  v8 = a4;
  if ( (unsigned __int8)(a2 - 47) > 3u )
    return 0;
  v4 = (int *)(this + 4 * a2 + 6564);
  v5 = *v4 + 212;
  qmemcpy(v9, (const void *)(*v4 + 180), sizeof(v9));
  StringMap_CopyFrom(&v10, v5);
  v12 = 0;
  sub_6593D9A0(v9, a3, v8);
  sub_65765A40(*v4, v9);
  v7 = *(int **)v11;
  v12 = -1;
  RBTree_EraseRange(&v10, &v8, v7, (int *)v11);
  operator delete(v11);
  return 1;
}

//----- (6584CDA0) --------------------------------------------------------
int __thiscall sub_6584CDA0(int this)
{
  unsigned __int8 v2; // al
  int v3; // edi
  char *v4; // eax
  int result; // eax

  v2 = *(_BYTE *)(this + 6905);
  if ( v2 )
  {
    if ( *(_BYTE *)(this + 6904) > v2 )
      *(_BYTE *)(this + 6904) = v2;
    v3 = (*(int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
           g_pILTClient,
           4336,
           *(unsigned __int8 *)(this + 6904),
           v2);
    if ( v3 )
      v4 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
    else
      v4 = (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6892), v4, 0, 0);
    if ( v3 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v3);
    result = 1;
    *(_DWORD *)(*(_DWORD *)(this + 6896) + 32) = *(_BYTE *)(this + 6904) > 1u;
    *(_DWORD *)(*(_DWORD *)(this + 6900) + 32) = *(_BYTE *)(this + 6904) < *(_BYTE *)(this + 6905);
  }
  else
  {
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6892), (char *)byte_659A8B98, 0, 0);
    *(_DWORD *)(*(_DWORD *)(this + 6896) + 32) = 0;
    result = *(_DWORD *)(this + 6900);
    *(_DWORD *)(result + 32) = 0;
  }
  return result;
}

//----- (6584CE90) --------------------------------------------------------
int __thiscall sub_6584CE90(int this)
{
  unsigned __int8 v2; // al
  int v3; // edi
  char *v4; // eax
  int result; // eax

  v2 = *(_BYTE *)(this + 6925);
  if ( v2 )
  {
    if ( *(_BYTE *)(this + 6924) > v2 )
      *(_BYTE *)(this + 6924) = v2;
    v3 = (*(int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
           g_pILTClient,
           4336,
           *(unsigned __int8 *)(this + 6924),
           v2);
    if ( v3 )
      v4 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
    else
      v4 = (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6912), v4, 0, 0);
    if ( v3 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v3);
    result = 1;
    *(_DWORD *)(*(_DWORD *)(this + 6916) + 32) = *(_BYTE *)(this + 6924) > 1u;
    *(_DWORD *)(*(_DWORD *)(this + 6920) + 32) = *(_BYTE *)(this + 6924) < *(_BYTE *)(this + 6925);
  }
  else
  {
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6912), (char *)byte_659A8B98, 0, 0);
    *(_DWORD *)(*(_DWORD *)(this + 6916) + 32) = 0;
    result = *(_DWORD *)(this + 6920);
    *(_DWORD *)(result + 32) = 0;
  }
  return result;
}

//----- (6584D340) --------------------------------------------------------
void __thiscall sub_6584D340(int this)
{
  unsigned __int16 *v2; // ecx
  int v3; // edi
  int IconHandle; // eax
  int v5; // edi
  char *v6; // eax
  int v7; // ecx
  unsigned __int16 v8; // ax
  unsigned int v9; // edi
  int v10; // eax
  char *v11; // eax
  int v12; // eax
  double v13; // st7
  int v14; // eax
  char *v15; // eax
  double v16; // st7
  int v17; // eax
  char *v18; // eax
  _BYTE v19[28]; // [esp-24h] [ebp-84h] BYREF
  int v20; // [esp-8h] [ebp-68h]
  char *v21; // [esp-4h] [ebp-64h]
  _BYTE v22[28]; // [esp+Ch] [ebp-54h] BYREF
  _BYTE v23[28]; // [esp+28h] [ebp-38h] BYREF
  unsigned int Value[2]; // [esp+44h] [ebp-1Ch]
  float v25; // [esp+4Ch] [ebp-14h]
  int v26; // [esp+5Ch] [ebp-4h]

  if ( !*(_DWORD *)(this + 7100) || (v2 = *(unsigned __int16 **)(this + 7096)) == 0 || !ItemStructA_IsValid(v2) )
  {
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6928) + 128))(*(_DWORD *)(this + 6928), 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6932), (char *)byte_659A8B98, 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6940), (char *)byte_659A8B98, 0, 0);
    v21 = 0;
    v20 = 0;
LABEL_17:
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6960), (char *)byte_659A8B98, v20, v21);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6964), (char *)byte_659A8B98, 0, 0);
    v21 = 0;
    v20 = 0;
    goto LABEL_18;
  }
  v3 = **(_DWORD **)(this + 6928);
  IconHandle = ItemTemplate_GetIconHandle((int **)dword_65ABF748, **(_WORD **)(this + 7096));
  (*(void (__thiscall **)(_DWORD, int))(v3 + 128))(*(_DWORD *)(this + 6928), IconHandle);
  v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
         g_pILTClient,
         **(unsigned __int16 **)(this + 7096) + 30000);
  if ( v5 )
    v6 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
  else
    v6 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6932), v6, 1, 0);
  if ( v5 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
  v7 = *(_DWORD *)(this + 6940);
  if ( *(_DWORD *)(v7 + 176) )
    v8 = atoi(*(const char **)(v7 + 176));
  else
    v8 = 0;
  v21 = 0;
  *(_WORD *)(this + 7026) = v8;
  v20 = 0;
  if ( !v8 )
    goto LABEL_17;
  v9 = *(_DWORD *)(*(_DWORD *)(this + 7100) + 24) * v8;
  Value[1] = (unsigned int)v19;
  String_FromU32(v19, v9);
  v10 = FormatString((int)v23, (int)"{0} <font size=10 color=FFD26400>UC");
  v26 = 0;
  v11 = (char *)std::string::c_str(v10);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6960), v11, v20, v21);
  v26 = -1;
  std::string::~string(v23);
  v12 = *(_DWORD *)(this + 7096);
  LOBYTE(v25) = *(_BYTE *)(this + 6373);
  v25 = sub_65970420(this + 6744, LODWORD(v25), v12);
  v21 = 0;
  v13 = (v25 + 1.0) * (double)v9;
  v20 = 0;
  *(_QWORD *)Value = (__int64)v13;
  Value[1] = (unsigned int)v19;
  String_FromU32(v19, (__int64)v13);
  v14 = FormatString((int)v23, (int)"{0} <font size=10 color=FFD26400>UC");
  v26 = 1;
  v15 = (char *)std::string::c_str(v14);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6964), v15, v20, v21);
  v26 = -1;
  std::string::~string(v23);
  v21 = 0;
  v20 = 0;
  if ( v25 > 0.0 )
  {
    v16 = v25 * 100.0;
    *(_QWORD *)Value = (__int64)v16;
    Value[1] = (unsigned int)v19;
    String_FromU32(v19, (__int64)v16);
    v17 = FormatString((int)v22, (int)"+ {0}%");
    v26 = 2;
    v18 = (char *)std::string::c_str(v17);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6968), v18, v20, v21);
    v26 = -1;
    std::string::~string(v22);
    return;
  }
LABEL_18:
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6968), (char *)byte_659A8B98, v20, v21);
}
// 65970420: using guessed type double __thiscall sub_65970420(_DWORD, _DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF748: using guessed type int dword_65ABF748;

//----- (6584DC10) --------------------------------------------------------
void __thiscall sub_6584DC10(int this)
{
  int v2; // eax
  int v3; // ecx
  int v4; // eax
  int v5; // edx
  __int16 v6; // ax
  __int16 v7; // ax
  int v8; // ecx
  __int16 v9; // ax
  int v10; // edx

  if ( *(_DWORD *)(*(_DWORD *)(this + 6856) + 176) )
    v2 = atoi(*(const char **)(*(_DWORD *)(this + 6856) + 176));
  else
    v2 = 0;
  v3 = *(_DWORD *)(this + 6860);
  *(_DWORD *)(this + 7000) = v2;
  if ( *(_DWORD *)(v3 + 176) )
    v4 = atoi(*(const char **)(v3 + 176));
  else
    v4 = 0;
  v5 = *(_DWORD *)(this + 6872);
  *(_DWORD *)(this + 7004) = v4;
  if ( *(_DWORD *)(v5 + 176) )
    v6 = atoi(*(const char **)(v5 + 176));
  else
    v6 = 100;
  *(_WORD *)(this + 7008) = v6;
  if ( *(_DWORD *)(*(_DWORD *)(this + 6876) + 176) )
    v7 = atoi(*(const char **)(*(_DWORD *)(this + 6876) + 176));
  else
    v7 = 100;
  v8 = *(_DWORD *)(this + 6864);
  *(_WORD *)(this + 7010) = v7;
  if ( *(_DWORD *)(v8 + 176) )
    v9 = atoi(*(const char **)(v8 + 176));
  else
    v9 = 0;
  v10 = *(_DWORD *)(this + 6868);
  *(_WORD *)(this + 7012) = v9;
  if ( *(_DWORD *)(v10 + 176) )
    *(_WORD *)(this + 7014) = atoi(*(const char **)(v10 + 176));
  else
    *(_WORD *)(this + 7014) = 10000;
  JUMPOUT(0x6584D670);
}
// 6584DCF0: control flows out of bounds to 6584D670

//----- (6584DE10) --------------------------------------------------------
char **__thiscall sub_6584DE10(char **this, char **a2, char *a3, char *a4)
{
  char *v4; // edx
  char *v5; // ebx
  char **v6; // esi
  char *v7; // eax
  const void *v8; // esi
  void *v9; // edi

  v4 = a4;
  v5 = a3;
  v6 = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v7 = *(this + 2);
    if ( a4 != v7 )
    {
      do
      {
        v8 = v4;
        v9 = v5;
        v4 += 44;
        v5 += 44;
        qmemcpy(v9, v8, 0x2Cu);
      }
      while ( v4 != v7 );
      v6 = a2;
    }
    *(this + 2) = v5;
  }
  return v6;
}

//----- (6584E170) --------------------------------------------------------
int __thiscall sub_6584E170(int this, unsigned int a2)
{
  unsigned int v2; // edi
  int v5; // ebx
  unsigned int v6; // ecx
  unsigned int v7; // eax
  int v8; // edx
  unsigned int v9; // ecx
  int v10; // [esp-10h] [ebp-18h]
  int v11; // [esp-8h] [ebp-10h]

  v2 = a2;
  if ( this != a2 )
  {
    a2 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 12;
    if ( !a2 )
    {
      Array12_EraseAndShift((_DWORD *)this, &a2, *(_DWORD **)(this + 4), *(_DWORD **)(this + 8));
      return this;
    }
    v5 = *(_DWORD *)(this + 4);
    v6 = (*(_DWORD *)(this + 8) - v5) / 12;
    if ( a2 <= v6 )
    {
      sub_657C63A0(*(_DWORD *)(v2 + 4), *(_DWORD *)(v2 + 8), *(_DWORD *)(this + 4));
      *(_DWORD *)(this + 8) = *(_DWORD *)(this + 4) + 12 * ((*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 12);
      return this;
    }
    if ( v5 )
      v7 = (*(_DWORD *)(this + 12) - v5) / 12;
    else
      v7 = 0;
    if ( a2 > v7 )
    {
      if ( v5 )
        operator delete(*(void **)(this + 4));
      if ( !(unsigned __int8)sub_657C70A0(this, (*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 12) )
        return this;
      v8 = *(_DWORD *)(this + 4);
      v9 = *(_DWORD *)(v2 + 4);
    }
    else
    {
      v11 = *(_DWORD *)(this + 4);
      v10 = *(_DWORD *)(v2 + 4);
      a2 = v10 + 12 * v6;
      sub_657C63A0(v10, a2, v11);
      v8 = *(_DWORD *)(this + 8);
      v9 = a2;
    }
    *(_DWORD *)(this + 8) = sub_6584DDE0(this, v9, *(_DWORD *)(v2 + 8), v8);
  }
  return this;
}
// 657C63A0: using guessed type int __cdecl sub_657C63A0(_DWORD, _DWORD, _DWORD);
// 657C70A0: using guessed type int __thiscall sub_657C70A0(_DWORD, _DWORD);
// 6584DDE0: using guessed type int __thiscall sub_6584DDE0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6584E2D0) --------------------------------------------------------
int __thiscall sub_6584E2D0(char *this)
{
  char *v2; // [esp+0h] [ebp-4h] BYREF

  v2 = this;
  *(_WORD *)this = 0;
  *((_WORD *)this + 2) = 0;
  *(this + 9) = 0;
  *((_DWORD *)this + 3) = 0;
  *((_DWORD *)this + 4) = 0;
  *((_DWORD *)this + 5) = 0;
  *(this + 25) = 0;
  *(this + 26) = 0;
  *(this + 24) = 0;
  *((_WORD *)this + 1) = 0;
  *((_WORD *)this + 3) = 0;
  *(this + 8) = 100;
  *(_DWORD *)(this + 27) = 0;
  return ((int (__thiscall *)(char *, char **, _DWORD, _DWORD))sub_6584DE60)(
           this + 32,
           &v2,
           *((_DWORD *)this + 9),
           *((_DWORD *)this + 10));
}
// 6584DE60: using guessed type int __thiscall sub_6584DE60(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (6584E5E0) --------------------------------------------------------
void __thiscall sub_6584E5E0(int this)
{
  char Dword_this; // al
  char IsValidTypeCombo; // bl
  void *v4; // edi
  const char *v5; // eax
  void *v6; // edi
  const char *v7; // eax
  void *v8; // edi
  int v9; // eax

  PtrVector_FreeAll_thunk(*(_DWORD **)(this + 6984));
  Dword_this = SharedMem_ReadDword_this(dword_65ABF73C, 0);
  IsValidTypeCombo = Production_IsValidTypeCombo(Dword_this, 3, 0);
  if ( !IsValidTypeCombo && *(_BYTE *)(this + 6988) == 2 )
    *(_BYTE *)(this + 6988) = 1;
  v4 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 22542);
  UiList_AddEntry(*(int ***)(this + 6984), v4, 31, 1, 0);
  if ( *(_BYTE *)(this + 6988) == 1 )
  {
    if ( v4 )
      v5 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
    else
      v5 = byte_659A8B98;
    UiList_SetSelectionText(*(_DWORD *)(this + 6984), (int)v5, 1);
  }
  if ( IsValidTypeCombo )
  {
    v6 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 22543);
    UiList_AddEntry(*(int ***)(this + 6984), v6, 31, 2, 0);
    if ( *(_BYTE *)(this + 6988) == 2 )
    {
      if ( v6 )
        v7 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
      else
        v7 = byte_659A8B98;
      UiList_SetSelectionText(*(_DWORD *)(this + 6984), (int)v7, 1);
    }
  }
  v8 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 22544);
  UiList_AddEntry(*(int ***)(this + 6984), v8, 31, 3, 0);
  if ( *(_BYTE *)(this + 6988) == 3 )
  {
    if ( v8 )
    {
      v9 = (*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
      UiList_SetSelectionText(*(_DWORD *)(this + 6984), v9, 1);
    }
    else
    {
      UiList_SetSelectionText(*(_DWORD *)(this + 6984), (int)byte_659A8B98, 1);
    }
  }
}

//----- (6584E7A0) --------------------------------------------------------
char *__thiscall Array96_CopyFrom6Elements(char *this, int a2)
{
  char *v2; // esi
  int v3; // edi
  int v4; // ebx

  v2 = this;
  v3 = a2 - (_DWORD)this;
  v4 = 6;
  do
  {
    sub_6584E170((int)v2, (unsigned int)&v2[v3]);
    v2 += 16;
    --v4;
  }
  while ( v4 );
  return this;
}

//----- (65850540) --------------------------------------------------------
int __thiscall ProductionUI_UpdateDisplay(int this, char a2)
{
  int result; // eax
  int Dword_this; // eax
  char v5; // dl
  double v6; // st7
  char *v7; // [esp+10h] [ebp-59Ch] BYREF
  _DWORD v8[269]; // [esp+14h] [ebp-598h] BYREF
  char v9; // [esp+448h] [ebp-164h]
  char v10; // [esp+46Ch] [ebp-140h]
  _BYTE v11[300]; // [esp+470h] [ebp-13Ch] BYREF
  int v12; // [esp+5A8h] [ebp-4h]

  result = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 2);
  if ( !(_BYTE)result )
  {
    sub_6584E5E0(this);
    sub_6584DC10(this);
    ItemList_ClearAll(*(int **)(this + 6888));
    ItemList_ClearAll(*(int **)(this + 6908));
    sub_6584DE10((char **)(this + 7032), &v7, *(char **)(this + 7036), *(char **)(this + 7040));
    sub_6584E2D0((char *)(this + 7048));
    *(_DWORD *)(this + 7096) = 0;
    *(_DWORD *)(this + 7100) = 0;
    sub_6584D340(this);
    *(_BYTE *)(this + 6904) = 1;
    *(_BYTE *)(this + 6905) = 0;
    sub_6584CDA0(this);
    *(_BYTE *)(this + 6924) = 1;
    *(_BYTE *)(this + 6925) = 0;
    sub_6584CE90(this);
    Packet_ID_MARKET_ctor((char *)v8);
    v12 = 0;
    v9 = 0;
    Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    v5 = *(_BYTE *)(this + 7024);
    v10 = a2;
    v8[268] = Dword_this;
    qmemcpy(v11, (const void *)(this + 6992), 0x20u);
    v11[32] = v5;
    Packet_ID_AC_write((int)v8);
    LTClient_SendPacket_BuildIfNeeded(v8, 2, 1, 3, 0);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 2);
    v6 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
    v12 = -1;
    *(float *)(this + 7028) = v6 + 2.5;
    return Packet_ID_AC_dtor((char *)v8);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65856020) --------------------------------------------------------
_DWORD *__cdecl CopyArray8(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 2 )
  {
    if ( result )
    {
      *result = *v3;
      result[1] = v3[1];
    }
    v3 += 2;
  }
  return result;
}

//----- (65858BD0) --------------------------------------------------------
int __thiscall EquipWindow_ConfirmAction(_BYTE *this)
{
  int WindowById; // eax
  int (__thiscall *v3)(_BYTE *, int, _DWORD, _DWORD); // eax

  WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x16u);
  if ( WindowById )
    Array96_CopyFrom6Elements((char *)(WindowById + 6744), (int)(this + 6368));
  v3 = *(int (__thiscall **)(_BYTE *, int, _DWORD, _DWORD))(*(_DWORD *)this + 4);
  *(this + 6466) = 0;
  return v3(this, 4, 0, 0);
}
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65858C10) --------------------------------------------------------
LONG __thiscall EquipWindow_SetSlotMode(char *this, unsigned int a2)
{
  char *v2; // ecx

  v2 = this + 4;
  if ( a2 > 3 )
    return SharedMem_WriteDword_this(v2, 0xA7u, 0);
  else
    return SharedMem_WriteDword_this(v2, 0xA7u, a2);
}

//----- (65858C70) --------------------------------------------------------
int __cdecl ItemId_GetMaxStack(unsigned __int16 a1)
{
  if ( (unsigned __int16)(a1 - 1) > 0xBBFu )
    return 0;
  else
    return ItemTemplate_GetType(g_ItemTemplateById, a1) != 6 ? 1000 : 500;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65858CF0) --------------------------------------------------------
char *__thiscall EquipSlot_FindById(_DWORD *this, int a2)
{
  unsigned __int8 v2; // dl
  char *result; // eax

  v2 = 0;
  while ( *(this + 12 * v2) != a2 )
  {
    if ( ++v2 >= 0xCu )
      return 0;
  }
  result = (char *)(this + 12 * v2);
  result[44] = v2 + 5;
  return result;
}

//----- (65858D70) --------------------------------------------------------
char __thiscall EquipSlot_CopyFromObject(_DWORD *this, int a1, char *a2)
{
  char *v4; // eax

  if ( !a1 )
    return 0;
  v4 = BuffSlots_FindByTypeId(this, a1);
  if ( !v4 )
    return 0;
  qmemcpy(a2, v4, 0x30u);
  return 1;
}

//----- (65858DA0) --------------------------------------------------------
char __thiscall EquipSlot_GetById(_DWORD *this, int a2, char *a3)
{
  char *v4; // eax

  if ( !a2 )
    return 0;
  v4 = EquipSlot_FindById(this, a2);
  if ( !v4 )
    return 0;
  qmemcpy(a3, v4, 0x30u);
  return 1;
}

//----- (65858F30) --------------------------------------------------------
void __thiscall EquipWindow_RefreshStats(int *this)
{
  int v2; // ebx
  int v3; // eax
  unsigned __int16 v4; // ax
  unsigned int v5; // eax
  int v6; // eax
  char *v7; // eax
  int v8; // esi
  char *v9; // eax
  _BYTE v10[28]; // [esp-24h] [ebp-64h] BYREF
  int v11; // [esp-8h] [ebp-48h]
  char *v12; // [esp-4h] [ebp-44h]
  _BYTE v13[28]; // [esp+10h] [ebp-30h] BYREF
  _BYTE *v14; // [esp+2Ch] [ebp-14h]
  unsigned int Value; // [esp+30h] [ebp-10h] BYREF
  int v16; // [esp+3Ch] [ebp-4h]

  v2 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  if ( v2 )
  {
    v3 = *(this + 1693);
    if ( *(_WORD *)(v3 + 220) && (v4 = *(_WORD *)(v3 + 180), (unsigned __int16)(v4 - 1) <= 0xBBFu) )
      v5 = ItemTemplate_GetType(g_ItemTemplateById, v4) != 6 ? 1000 : 500;
    else
      v5 = 0;
    Value = v5;
    Production_ApplySkillModifiers((int)(this + 1592), *(unsigned __int16 *)(v2 + 8), (char **)&Value);
    v12 = 0;
    v11 = 0;
    v14 = v10;
    String_FromU32(v10, Value);
    v6 = FormatString((int)v13, (int)&unk_659C45C8);
    v16 = 0;
    v7 = (char *)std::string::c_str(v6);
    UiText_SetValueIfChanged(*(this + 1691), v7, v11, v12);
    v16 = -1;
    std::string::~string(v13);
    Value = 12;
    Production_ApplySkillModifiers((int)(this + 1592), *(unsigned __int16 *)(v2 + 8), (char **)&Value);
    v8 = (*(int (__cdecl **)(int, int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4374, Value);
    if ( v8 )
      v9 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
    else
      v9 = (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*(this + 1688), v9, 0, 0);
    if ( v8 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v8);
  }
}
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658590A0) --------------------------------------------------------
void __thiscall ItemTooltipUI_BuildContent(_DWORD *this)
{
  _DWORD *v1; // ebx
  _DWORD *v2; // eax
  int v3; // ecx
  int v4; // eax
  char v5; // cl
  unsigned __int16 *v6; // edi
  int *v7; // eax
  _DWORD *v8; // esi
  int IconHandle; // eax
  int v10; // edx
  int v11; // esi
  const char *v12; // eax
  int (__thiscall ***v13)(_DWORD, int); // ebx
  int v14; // ecx
  int v15; // edx
  int (__cdecl **v16)(int, int); // esi
  int Type; // eax
  int v18; // eax
  const char *v19; // eax
  int (__thiscall ***v20)(_DWORD, int); // esi
  int (__thiscall **v21)(_DWORD, int); // ecx
  int (__thiscall **v22)(_DWORD, int); // edx
  int v23; // eax
  const char *v24; // eax
  _DWORD *v25; // edi
  int v26; // eax
  _DWORD *v27; // eax
  char v28; // al
  unsigned __int16 *v29; // edi
  int *v30; // eax
  _DWORD *v31; // esi
  int v32; // eax
  int v33; // ecx
  int v34; // esi
  const char *v35; // eax
  int (__thiscall ***v36)(_DWORD, int); // ebx
  int v37; // ecx
  int v38; // edx
  int (__cdecl **v39)(int, int); // esi
  int v40; // eax
  int v41; // esi
  const char *v42; // eax
  int (__thiscall ***v43)(_DWORD, int); // edi
  int v44; // ecx
  int v45; // edx
  int v46; // eax
  const char *v47; // eax
  int (__thiscall ***v48)(_DWORD, int); // esi
  int (__thiscall **v49)(_DWORD, int); // edx
  int (__thiscall **v50)(_DWORD, int); // ecx
  int v51; // eax
  _DWORD *v52; // eax
  int v53; // [esp+8h] [ebp-18h]
  int *v54; // [esp+Ch] [ebp-14h]
  int *v55; // [esp+Ch] [ebp-14h]
  unsigned __int16 *v56; // [esp+10h] [ebp-10h]
  unsigned __int16 *v57; // [esp+10h] [ebp-10h]
  int v58; // [esp+14h] [ebp-Ch]
  int v59; // [esp+14h] [ebp-Ch]
  int v60; // [esp+14h] [ebp-Ch]
  char v62; // [esp+1Fh] [ebp-1h]
  char v63; // [esp+1Fh] [ebp-1h]

  v1 = this;
  ItemList_ClearAll((int *)*(this + 1694));
  v2 = (_DWORD *)v1[1694];
  v3 = v2[555];
  if ( v3 )
    *(_DWORD *)(v3 + 248) = 0;
  v2[555] = 0;
  v2[556] = 0;
  v2[557] = 0;
  v2[549] = 0;
  v4 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  v53 = v4;
  if ( v4 )
  {
    v5 = 5;
    v6 = (unsigned __int16 *)(v4 + 40);
    v62 = 5;
    v56 = (unsigned __int16 *)(v4 + 40);
    do
    {
      if ( (unsigned __int8)(v5 - 5) <= 0xBu && v6 != (unsigned __int16 *)4 )
      {
        if ( *((_DWORD *)v6 - 1) )
        {
          if ( ItemStructA_IsValid(v6) && ItemTemplate_GetType(g_ItemTemplateById, *v6) == 6 )
          {
            v7 = (int *)UiWidget_CreateFromData(0, 0, 0, *v6);
            v54 = v7;
            if ( v7 )
            {
              v8 = (_DWORD *)v7[44];
              if ( v8 )
              {
                IconHandle = ItemTemplate_GetIconHandle((int **)dword_65ABF748, *v6);
                v10 = v8[19];
                v8[45] = IconHandle;
                v8[18] = v8[20] + 1;
                v8[21] = 3;
                v8[22] = 1;
                v8[17] = v10 + 3;
                v11 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, *v6 + 30000);
                if ( v11 )
                  v12 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                        g_pILTClient,
                                        v11);
                else
                  v12 = byte_659A8B98;
                v13 = UiWidget_Create(v1, 0, (int)v12, 128, 140, 35, 0, 0, (int)&unk_65A5D0E4, 2, 0, 0, 0);
                v14 = (int)v13[19] + 55;
                v15 = (int)(v13[20] + 2);
                v13[21] = (int (__thiscall **)(_DWORD, int))55;
                v13[22] = (int (__thiscall **)(_DWORD, int))8;
                v13[17] = (int (__thiscall **)(_DWORD, int))v14;
                v13[18] = (int (__thiscall **)(_DWORD, int))v15;
                if ( v11 )
                  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v11);
                v16 = (int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64);
                Type = ItemTemplate_GetType(g_ItemTemplateById, *v6);
                v18 = (*v16)(g_pILTClient, Type + 29900);
                v58 = v18;
                if ( v18 )
                  v19 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                        g_pILTClient,
                                        v18);
                else
                  v19 = byte_659A8B98;
                v20 = UiWidget_Create(this, 0, (int)v19, 128, 140, 35, 0, 0, (int)&unk_65A5CD84, 2, 0, 0, 0);
                v21 = v20[19];
                v22 = v20[20];
                v20[21] = (int (__thiscall **)(_DWORD, int))55;
                v20[22] = (int (__thiscall **)(_DWORD, int))19;
                v20[17] = (int (__thiscall **)(_DWORD, int))((char *)v21 + 55);
                v20[18] = (int (__thiscall **)(_DWORD, int))((char *)v22 + 19);
                if ( v58 )
                  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v58);
                if ( ItemTemplate_GetType(g_ItemTemplateById, *v6) == 6 )
                {
                  v25 = UiWidget_Create(this, 0, (int)byte_659A8B98, 128, 180, 35, 0, 0, (int)&unk_65A5C730, 2, 0, 0, 0);
                }
                else
                {
                  if ( v6[1] )
                    v23 = (*(int (__cdecl **)(int, int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                            g_pILTClient,
                            953,
                            v6[3] - v6[1],
                            v6[1]);
                  else
                    v23 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                            g_pILTClient,
                            924,
                            v6[3]);
                  v59 = v23;
                  if ( v23 )
                    v24 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                          g_pILTClient,
                                          v23);
                  else
                    v24 = byte_659A8B98;
                  v25 = UiWidget_Create(
                          this,
                          0,
                          (int)v24,
                          128,
                          180,
                          35,
                          0,
                          0,
                          (int)&byte_65A5C4A8[108 * (v6[1] != 0 ? 0 : 6)],
                          2,
                          0,
                          0,
                          0);
                  if ( v59 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v59);
                }
                CWindow_SetOffset(v25, 55, 30);
                if ( v25 )
                {
                  IconBar_AddIcons((int)v54, (int)v13);
                  qmemcpy(v54 + 45, v56 - 2, 0x30u);
                  v26 = BuildItemTooltip(v56 - 2);
                  UiItemSlot_SetTooltipHString(v54, v26);
                  v27 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9038);
                  LinkedList_AddNode((unsigned int *)v54, v27, 7, *((_DWORD *)v56 - 1), 0);
                  ItemList_AddItem((unsigned int *)*(this + 1694), (int)v54);
                }
                v1 = this;
                v6 = v56;
              }
            }
          }
        }
      }
      v5 = v62 + 1;
      v6 += 24;
      v62 = v5;
      v56 = v6;
    }
    while ( (unsigned __int8)v5 < 0x11u );
    v28 = 26;
    v29 = (unsigned __int16 *)(v53 + 908);
    v63 = 26;
    v57 = (unsigned __int16 *)(v53 + 908);
    do
    {
      if ( (unsigned __int8)(v28 - 23) <= 5u && v29 != (unsigned __int16 *)4 )
      {
        if ( *((_DWORD *)v29 - 1) )
        {
          if ( ItemStructA_IsValid(v29) )
          {
            v30 = (int *)UiWidget_CreateFromData(0, 0, 0, *v29);
            v55 = v30;
            if ( v30 )
            {
              v31 = (_DWORD *)v30[44];
              if ( v31 )
              {
                v32 = ItemTemplate_GetIconHandle((int **)dword_65ABF748, *v29);
                v33 = v31[20];
                v31[45] = v32;
                v31[17] = v31[19] + 3;
                v31[18] = v33 + 1;
                v31[21] = 3;
                v31[22] = 1;
                v34 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, *v29 + 30000);
                if ( v34 )
                  v35 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                        g_pILTClient,
                                        v34);
                else
                  v35 = byte_659A8B98;
                v36 = UiWidget_Create(v1, 0, (int)v35, 128, 140, 35, 0, 0, (int)&unk_65A5D0E4, 2, 0, 0, 0);
                v37 = (int)v36[19] + 55;
                v38 = (int)(v36[20] + 2);
                v36[21] = (int (__thiscall **)(_DWORD, int))55;
                v36[22] = (int (__thiscall **)(_DWORD, int))8;
                v36[17] = (int (__thiscall **)(_DWORD, int))v37;
                v36[18] = (int (__thiscall **)(_DWORD, int))v38;
                if ( v34 )
                  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v34);
                v39 = (int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64);
                v40 = ItemTemplate_GetType(g_ItemTemplateById, *v29);
                v41 = (*v39)(g_pILTClient, v40 + 29900);
                if ( v41 )
                  v42 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                        g_pILTClient,
                                        v41);
                else
                  v42 = byte_659A8B98;
                v43 = UiWidget_Create(this, 0, (int)v42, 128, 140, 35, 0, 0, (int)&unk_65A5CD84, 2, 0, 0, 0);
                v44 = (int)v43[19] + 55;
                v45 = (int)v43[20] + 19;
                v43[21] = (int (__thiscall **)(_DWORD, int))55;
                v43[22] = (int (__thiscall **)(_DWORD, int))19;
                v43[17] = (int (__thiscall **)(_DWORD, int))v44;
                v43[18] = (int (__thiscall **)(_DWORD, int))v45;
                if ( v41 )
                  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v41);
                if ( ItemTemplate_GetType(g_ItemTemplateById, *v57) == 6 )
                {
                  v48 = UiWidget_Create(this, 0, (int)byte_659A8B98, 128, 180, 35, 0, 0, (int)&unk_65A5C730, 2, 0, 0, 0);
                  v50 = v48[20];
                  v48[17] = (int (__thiscall **)(_DWORD, int))((char *)v48[19] + 55);
                  v48[18] = (int (__thiscall **)(_DWORD, int))((char *)v50 + 30);
                }
                else
                {
                  if ( v57[1] )
                    v46 = (*(int (__cdecl **)(int, int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                            g_pILTClient,
                            953,
                            v57[3] - v57[1],
                            v57[1]);
                  else
                    v46 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                            g_pILTClient,
                            924,
                            v57[3]);
                  v60 = v46;
                  if ( v46 )
                    v47 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                          g_pILTClient,
                                          v46);
                  else
                    v47 = byte_659A8B98;
                  v48 = UiWidget_Create(
                          this,
                          0,
                          (int)v47,
                          128,
                          180,
                          35,
                          0,
                          0,
                          (int)&byte_65A5C4A8[108 * (v57[1] != 0 ? 0 : 6)],
                          2,
                          0,
                          0,
                          0);
                  if ( v60 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v60);
                  v49 = v48[20];
                  v48[17] = (int (__thiscall **)(_DWORD, int))((char *)v48[19] + 55);
                  v48[18] = (int (__thiscall **)(_DWORD, int))((char *)v49 + 30);
                }
                v48[22] = (int (__thiscall **)(_DWORD, int))30;
                v48[21] = (int (__thiscall **)(_DWORD, int))55;
                IconBar_AddIcons((int)v55, (int)v36);
                qmemcpy(v55 + 45, v57 - 2, 0x30u);
                v51 = BuildItemTooltip(v57 - 2);
                UiItemSlot_SetTooltipHString(v55, v51);
                v52 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9038);
                LinkedList_AddNode((unsigned int *)v55, v52, 7, *((_DWORD *)v57 - 1), 1);
                ItemList_AddItem((unsigned int *)*(this + 1694), (int)v55);
                v29 = v57;
                v1 = this;
              }
            }
          }
        }
      }
      v28 = v63 + 1;
      v29 += 24;
      v63 = v28;
      v57 = v29;
    }
    while ( (unsigned __int8)v28 < 0x1Du );
    UiWidget_ResetState((_DWORD *)v1[1694]);
    EquipWindow_RefreshStats(v1);
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65859880) --------------------------------------------------------
int __thiscall CWindowTerminalMedical_Update(int this, int a2)
{
  unsigned int StatValue; // edi
  int v4; // edi
  char *v5; // eax
  void (__stdcall *v6)(int); // edx
  void *v7; // ecx
  int CachedWindowById; // eax
  int v9; // ecx
  int v10; // eax

  if ( *(_BYTE *)(this + 6744) )
  {
    ItemTooltipUI_BuildContent((_DWORD *)this);
    *(_BYTE *)(this + 6744) = 0;
  }
  *(_DWORD *)(*(_DWORD *)(this + 6768) + 32) = *(_WORD *)(*(_DWORD *)(this + 6772) + 220)
                                            && !(*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(
                                                  g_LTClient,
                                                  1);
  if ( *(_DWORD *)(this + 6760) == 1
    && (unsigned int)PlayerStats_GetStatValue(0) >= g_StatScaleTable[0]
    && (unsigned int)PlayerStats_GetStatValue(3u) >= 0x3E8 )
  {
    StatValue = PlayerStats_GetStatValue(0x2Eu);
    if ( PlayerStats_GetStatValue(1u) >= StatValue && (unsigned int)PlayerStats_GetStatValue(2u) >= 0x3E8 )
    {
      v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4376);
      if ( v4 )
        v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
      else
        v5 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v5, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
      if ( v4 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
      *(_DWORD *)(this + 6760) = 0;
    }
  }
  v6 = *(void (__stdcall **)(int))(**(_DWORD **)(this + 6756) + 88);
  if ( *(_DWORD *)(this + 6760) )
    v6(1);
  else
    v6(0);
  v7 = (void *)(dword_65ABF748 + 4);
  if ( *(_DWORD *)(this + 6760) > 3u )
    SharedMem_WriteDword_this(v7, 0xA7u, 0);
  else
    SharedMem_WriteDword_this(v7, 0xA7u, *(_DWORD *)(this + 6760));
  CachedWindowById = CWindowMgr_GetCachedWindowById((_DWORD *)dword_65ABF708, *(_DWORD *)(this + 4));
  if ( CachedWindowById )
  {
    v9 = *(_DWORD *)(this + 6776);
    if ( *(_DWORD *)(v9 + 36) )
      *(_DWORD *)(v9 + 92) = CachedWindowById;
    v10 = dword_65ABF708;
    *(_DWORD *)(dword_65ABF708 + 808) = -1;
    *(_DWORD *)(v10 + 812) = 0;
  }
  return CWindow_UpdateChildren((char *)this, a2);
}
// 659E0CA8: using guessed type int g_StatScaleTable[];
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (65859A40) --------------------------------------------------------
int __thiscall CWindowTerminalMedical_OnCommand(_DWORD *this, int a2, int a3, int a4)
{
  int v5; // eax
  unsigned int StatValue; // edi
  int v7; // eax
  int v8; // esi
  char *v9; // eax
  int v11; // edi
  char *v12; // eax
  int v13; // eax
  char v14; // bl
  int v15; // eax
  int v16; // edi
  int v17; // ebx
  int v18; // esi
  char *v19; // eax
  char Type; // al
  int v21; // edi
  int v22; // eax
  int v23; // [esp+10h] [ebp-8D8h] BYREF
  char *MaxStack; // [esp+14h] [ebp-8D4h] BYREF
  _DWORD v25[269]; // [esp+18h] [ebp-8D0h] BYREF
  int v26[3]; // [esp+44Ch] [ebp-49Ch] BYREF
  char v27; // [esp+458h] [ebp-490h]
  char v28; // [esp+459h] [ebp-48Fh]
  char v29; // [esp+45Ah] [ebp-48Eh]
  char v30; // [esp+45Bh] [ebp-48Dh]
  _DWORD v31[269]; // [esp+460h] [ebp-488h] BYREF
  _DWORD v32[3]; // [esp+894h] [ebp-54h] BYREF
  char v33; // [esp+8A0h] [ebp-48h]
  char v34; // [esp+8A1h] [ebp-47h]
  char v35; // [esp+8A2h] [ebp-46h]
  char v36; // [esp+8A3h] [ebp-45h]
  int v37; // [esp+8A8h] [ebp-40h] BYREF
  unsigned __int16 v38[20]; // [esp+8ACh] [ebp-3Ch] BYREF
  char v39; // [esp+8D4h] [ebp-14h]
  int v40; // [esp+8E4h] [ebp-4h]

  switch ( a2 )
  {
    case 4:
      v21 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
      if ( v21 )
      {
        v22 = *(this + 1693);
        if ( *(_WORD *)(v22 + 220) )
        {
          sub_6593FC80(v21, v22 + 180, 0);
          UiItemSlot_SetItem(*(this + 1693), 0);
          *(_BYTE *)(v21 + 32) = 1;
        }
      }
      *(this + 1690) = 0;
      EquipWindow_SetSlotMode((char *)dword_65ABF748, 0);
      SendPacket_ID_0xA5_Unknown();
      return CWindow_HandleCommand(this, a2, a3, a4);
    case 5:
      v5 = *(this + 1690);
      if ( v5 )
      {
        if ( v5 == 1 )
        {
          v11 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4375);
          if ( v11 )
            v12 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v11);
          else
            v12 = (char *)byte_659A8B98;
          FriendList_AddEntry(dword_65ABF748, v12, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
          if ( v11 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v11);
          *(this + 1690) = 0;
        }
        goto LABEL_23;
      }
      if ( (unsigned int)PlayerStats_GetStatValue(0) < g_StatScaleTable[0]
        || (unsigned int)PlayerStats_GetStatValue(3u) < 0x3E8
        || (StatValue = PlayerStats_GetStatValue(0x2Eu), PlayerStats_GetStatValue(1u) < StatValue)
        || (unsigned int)PlayerStats_GetStatValue(2u) < 0x3E8 )
      {
        if ( (unsigned int)PlayerStats_GetStatValue(4u) < 0xC )
        {
          v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5352);
          goto LABEL_8;
        }
        *(this + 1690) = 1;
LABEL_23:
        EquipWindow_SetSlotMode((char *)dword_65ABF748, *(this + 1690));
        SoundMgr_PlaySoundByIndex(dword_65ABF750, 0x3Du);
        return 1;
      }
      v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5469);
LABEL_8:
      v8 = v7;
      if ( v7 )
        v9 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
      else
        v9 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v9, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
      if ( !v8 )
        return 1;
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v8);
      return 1;
    case 6:
      if ( (*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 1) )
        return 1;
      v16 = ItemTemplateById_Get(g_ItemTemplateById, *(_WORD *)(*(this + 1693) + 180));
      if ( !v16 )
        return 1;
      v17 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
      if ( !v17 )
        return 1;
      MaxStack = (char *)ItemId_GetMaxStack(*(_WORD *)v16);
      Production_ApplySkillModifiers((int)(this + 1592), *(unsigned __int16 *)(v17 + 8), &MaxStack);
      if ( PlayerStats_GetStatValue(4u) >= (unsigned int)MaxStack )
      {
        ItemData_CopyCtor((int ***)v38, (const void *)(*(this + 1693) + 180));
        v40 = 1;
        Packet_ID_MOVE_ITEMS_ctor((char *)v31);
        LOBYTE(v40) = 2;
        v31[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
        v33 = 1;
        Type = ItemTemplate_GetType(g_ItemTemplateById, v38[0]);
        v35 = 0;
        v34 = 2 * (Type != 6) + 2;
        v36 = *(_BYTE *)(v16 + 10);
        List_CopyEntriesLimited((int **)v38, v32, 0);
        Packet_ID_MOVE_ITEMS_write((int)v31);
        LTClient_SendPacket_BuildIfNeeded(v31, 2, 1, 3, 0);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 1);
        SoundMgr_PlaySoundByIndex(dword_65ABF750, 0x3Du);
        LOBYTE(v40) = 1;
        LoginPacket_Dtor(v31);
        v40 = -1;
        ItemMapContainer_Clear((int ***)v38);
        return 1;
      }
      v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5352);
      if ( v18 )
        v19 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v18);
      else
        v19 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v19, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( !v18 )
        return 1;
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v18);
      return 1;
    case 7:
      if ( (*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 1) )
        return 1;
      ItemStructA_InitAlt((char *)&v37);
      if ( a4 == 1 )
      {
        v13 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
        if ( v13 )
        {
          if ( !EquipSlot_CopyFromObject((_DWORD *)(v13 + 760), a3, (char *)&v37) )
          {
LABEL_28:
            ItemTooltipUI_BuildContent(this);
            return 1;
          }
          v14 = 4;
LABEL_33:
          Packet_ID_MOVE_ITEMS_ctor((char *)v25);
          v40 = 0;
          v25[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
          v23 = v37;
          v27 = v14;
          v28 = 1;
          v29 = v39;
          v30 = 0;
          LoginUI_ClearFields(v26, &v23);
          Packet_ID_MOVE_ITEMS_write((int)v25);
          LTClient_SendPacket_BuildIfNeeded(v25, 2, 1, 3, 0);
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 1);
          SoundMgr_PlaySoundByIndex(dword_65ABF750, 0x3Du);
          v40 = -1;
          LoginPacket_Dtor(v25);
          return 1;
        }
      }
      else
      {
        v15 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
        if ( v15 )
        {
          if ( !EquipSlot_GetById((_DWORD *)(v15 + 36), a3, (char *)&v37) )
            goto LABEL_28;
          v14 = 2;
          goto LABEL_33;
        }
      }
      return 1;
    default:
      return CWindow_HandleCommand(this, a2, a3, a4);
  }
}
// 659E0CA8: using guessed type int g_StatScaleTable[];
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6585B9E0) --------------------------------------------------------
_DWORD *__thiscall sub_6585B9E0(int this)
{
  _BYTE *v2; // eax
  int v3; // ecx
  int v4; // esi
  _DWORD *result; // eax
  bool v6; // zf
  _WORD *v7; // eax
  int v8; // ebx
  unsigned int v9; // edx
  int v10; // eax
  int v11; // ebx
  char *v12; // ebx
  int v13; // esi
  int (__thiscall ***v14)(_DWORD, int); // eax
  _DWORD *v15; // esi
  int (__thiscall **v16)(_DWORD, int); // eax
  unsigned int v17; // eax
  _BYTE *v18; // eax
  _DWORD *v19; // eax
  int v20; // edx
  int v21; // ecx
  unsigned int v22; // eax
  int (__thiscall ***Simple)(_DWORD, int); // [esp+8h] [ebp-10h]
  unsigned int v24; // [esp+10h] [ebp-8h] BYREF
  bool v25; // [esp+17h] [ebp-1h]

  ListBox_ClearItems(*(int **)(this + 7104));
  v2 = (_BYTE *)(this + 7218);
  v3 = 30;
  do
  {
    *(v2 - 30) = 0;
    *v2++ = 0;
    --v3;
  }
  while ( v3 );
  v4 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  result = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 5);
  if ( v4 && result )
  {
    v6 = *(_WORD *)(v4 + 8) == 0;
    v25 = 0;
    if ( !v6 )
    {
      v7 = WordArray_FindById(result, 39);
      if ( v7 )
      {
        if ( *((_BYTE *)v7 + 3) )
        {
          if ( sub_657D7190((_DWORD *)(this + 7108), *(_BYTE *)(v4 + 14)) )
          {
            v24 = 0;
            sub_65950EF0(17, &v24);
            v25 = v24 == 1;
          }
          v8 = *(_DWORD *)(this + 7108);
          if ( v8 == SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu) )
            v25 = 1;
        }
      }
    }
    LOBYTE(v9) = 0;
    v10 = (*(_DWORD *)(this + 6392) - *(_DWORD *)(this + 6388)) >> 1;
    v24 = 0;
    if ( v10 )
    {
      do
      {
        v11 = *(_DWORD *)(this + 6388);
        if ( (unsigned __int8)v9 < (unsigned int)((*(_DWORD *)(this + 6392) - v11) >> 1) )
        {
          v12 = (char *)(v11 + 2 * (unsigned __int8)v9);
          if ( v12 )
          {
            v13 = sub_657D7190((_DWORD *)(this + 7108), *v12);
            if ( v13 )
            {
              Simple = UiWidget_CreateSimple(0, 0, 0, 0, 0, 0);
              if ( Simple )
              {
                v14 = UiWidget_Create((void *)this, 0, v13 + 1, 33, 220, 0, 0, 1, (int)&unk_65A5CD84, 2, 0, 0, 0);
                v15 = v14;
                if ( v14 )
                {
                  v16 = v14[19];
                  v15[18] = v15[20] + 5;
                  v15[21] = 4;
                  v15[22] = 5;
                  v15[17] = v16 + 1;
                  v17 = v24;
                  v15[126] = (unsigned __int8)*v12;
                  v15[125] = 1;
                  v18 = (_BYTE *)(this + v17 + 7188);
                  *v18 = v12[1];
                  v18[30] = v12[1];
                  v19 = (_DWORD *)sub_657486D0(this, v18, 1, 0);
                  if ( v19 )
                  {
                    v20 = v19[19] + 234;
                    v21 = v19[20] + 2;
                    v6 = !v25;
                    v19[21] = 234;
                    v19[22] = 2;
                    v19[17] = v20;
                    v19[18] = v21;
                    if ( v6 )
                      v19[7] = 0;
                    Button_AddCallbacks((int)Simple, (int)v15);
                    ListBox_AddItem(*(unsigned int **)(this + 7104), (int)Simple);
                  }
                }
              }
            }
          }
        }
        v9 = v24 + 1;
        v22 = (*(_DWORD *)(this + 6392) - *(_DWORD *)(this + 6388)) >> 1;
        v24 = v9;
      }
      while ( v9 < v22 );
    }
    *(_DWORD *)(*(_DWORD *)(this + 7104) + 2680) = 0;
    ListBox_RefreshDisplay(*(int **)(this + 7104));
    return (_DWORD *)ListBox_Reset(*(_DWORD **)(this + 7104));
  }
  return result;
}
// 657486D0: using guessed type int __thiscall sub_657486D0(_DWORD, _DWORD, _DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6585BC50) --------------------------------------------------------
int (__thiscall ***__thiscall sub_6585BC50(int this))(_DWORD, int)
{
  int v2; // ebx
  int (__thiscall ***result)(_DWORD, int); // eax
  int v4; // eax
  const char *v5; // eax
  int (__thiscall ***v6)(_DWORD, int); // esi
  int (__thiscall **v7)(_DWORD, int); // edx
  int (__thiscall **v8)(_DWORD, int); // edx
  int v9; // ecx
  unsigned int v10; // esi
  int v11; // ecx
  _DWORD *v12; // esi
  unsigned int *Simple; // ebx
  int v14; // eax
  const char *v15; // eax
  int (__thiscall ***v16)(_DWORD, int); // esi
  int v17; // ecx
  _DWORD *v18; // eax
  int *v19; // [esp+8h] [ebp-10h]
  int v20; // [esp+Ch] [ebp-Ch]
  unsigned int v21; // [esp+Ch] [ebp-Ch]
  int v22; // [esp+10h] [ebp-8h]
  int (__thiscall ***v23)(_DWORD, int); // [esp+14h] [ebp-4h]
  int v24; // [esp+14h] [ebp-4h]

  ListBox_ClearItems(*(int **)(this + 7280));
  v2 = this + 7032;
  *(_BYTE *)(this + 7076) = sub_6581B390((_DWORD *)(this + 7032), 0);
  result = UiWidget_CreateSimple(0, 0, 0, 0, 0, 0);
  v20 = (int)result;
  if ( result )
  {
    v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 941);
    v23 = (int (__thiscall ***)(_DWORD, int))v4;
    if ( v4 )
      v5 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
    else
      v5 = byte_659A8B98;
    v6 = UiWidget_Create((void *)this, 0, (int)v5, 256, 233, 0, 0, 1, (int)&unk_65A5C5EC, 2, 0, 0, 0);
    result = v23;
    if ( v23 )
      result = (int (__thiscall ***)(_DWORD, int))(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 76))(
                                                    g_pILTClient,
                                                    v23);
    if ( v6 )
    {
      v7 = v6[20];
      v6[17] = v6[19] + 7;
      v6[21] = (int (__thiscall **)(_DWORD, int))28;
      v6[22] = (int (__thiscall **)(_DWORD, int))2;
      v6[18] = (int (__thiscall **)(_DWORD, int))((char *)v7 + 2);
      result = (int (__thiscall ***)(_DWORD, int))sub_657486D0(this, this + 7076, 1, 0);
      if ( result )
      {
        v8 = result[20];
        v9 = (int)(result[19] + 2);
        result[21] = (int (__thiscall **)(_DWORD, int))8;
        result[22] = 0;
        result[17] = (int (__thiscall **)(_DWORD, int))v9;
        result[18] = v8;
        result[14] = (int (__thiscall **)(_DWORD, int))21;
        result[52] = (int (__thiscall **)(_DWORD, int))this;
        Button_AddCallbacks(v20, (int)v6);
        ListBox_AddItem(*(unsigned int **)(this + 7280), v20);
        v10 = 0;
        v21 = 0;
        if ( (*(_DWORD *)(this + 7040) - *(_DWORD *)(this + 7036)) / 36 )
        {
          v22 = 0;
          do
          {
            v11 = *(_DWORD *)(v2 + 4);
            if ( v10 < (*(_DWORD *)(v2 + 8) - v11) / 36 )
            {
              v12 = (_DWORD *)(v22 + v11);
              v19 = (int *)(v22 + v11);
              if ( v22 + v11 )
              {
                if ( *v12 )
                {
                  Simple = (unsigned int *)UiWidget_CreateSimple(0, 0, 0, 0, 0, 0);
                  if ( Simple )
                  {
                    v14 = (*(int (__cdecl **)(int, int, _DWORD *))(*(_DWORD *)g_pILTClient + 64))(
                            g_pILTClient,
                            940,
                            v12 + 1);
                    v24 = v14;
                    if ( v14 )
                      v15 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                            g_pILTClient,
                                            v14);
                    else
                      v15 = byte_659A8B98;
                    v16 = UiWidget_Create((void *)this, 0, (int)v15, 256, 233, 0, 0, 1, (int)&unk_65A5C730, 2, 0, 0, 0);
                    if ( v24 )
                      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v24);
                    if ( v16 )
                    {
                      v17 = (int)(v16[19] + 2);
                      v16[18] = (int (__thiscall **)(_DWORD, int))((char *)v16[20] + 2);
                      v16[21] = (int (__thiscall **)(_DWORD, int))8;
                      v16[22] = (int (__thiscall **)(_DWORD, int))2;
                      v16[17] = (int (__thiscall **)(_DWORD, int))v17;
                      v18 = (_DWORD *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 9039);
                      LinkedList_AddNode(Simple, v18, 20, *v19, 0);
                      Button_AddCallbacks((int)Simple, (int)v16);
                      ListBox_AddItem(*(unsigned int **)(this + 7280), (int)Simple);
                    }
                  }
                }
              }
            }
            v22 += 36;
            v2 = this + 7032;
            v10 = v21 + 1;
            v21 = v10;
          }
          while ( v10 < (*(_DWORD *)(this + 7040) - *(_DWORD *)(this + 7036)) / 36 );
        }
        ListBox_RefreshDisplay(*(int **)(this + 7280));
        return (int (__thiscall ***)(_DWORD, int))ListBox_Reset(*(_DWORD **)(this + 7280));
      }
    }
  }
  return result;
}
// 657486D0: using guessed type int __thiscall sub_657486D0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6585BF40) --------------------------------------------------------
errno_t __thiscall MailUI_CopyFromInputFields(int this)
{
  int v2; // eax
  errno_t result; // eax

  std::string::operator=(this + 7048, *(_DWORD *)(*(_DWORD *)(this + 7260) + 176));
  v2 = *(_DWORD *)(this + 7256);
  *(_BYTE *)(this + 6464) = *(_BYTE *)(this + 7252);
  strncpy_s((char *)(this + 6456), 8u, *(const char **)(v2 + 176), 0xFFFFFFFF);
  ItemVector_Assign(this + 7004, this + 7032);
  strncpy_s((char *)(this + 6466), 0x18u, *(const char **)(*(_DWORD *)(this + 7264) + 176), 0xFFFFFFFF);
  result = strncpy_s((char *)(this + 6490), 0x200u, *(const char **)(*(_DWORD *)(this + 7276) + 176), 0xFFFFFFFF);
  *(_BYTE *)(this + 6465) = *(_BYTE *)(this + 7272);
  qmemcpy((void *)(this + 7218), (const void *)(this + 7188), 0x1Eu);
  return result;
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (6585C2B0) --------------------------------------------------------
void __thiscall MailUI_PopulateFromMailData(
        int this,
        char *a2,
        int a3,
        int a4,
        int a5,
        int a6,
        int a7,
        char a8,
        int a9,
        int a10,
        int a11,
        int a12,
        char *a13)
{
  char *v14; // ebx

  PlayerData_Assign((char *)(this + 6368), (int)a2);
  ItemVector_Assign(this + 7032, (unsigned int)(a2 + 636));
  v14 = a13;
  std::string::operator=(this + 7048, a13);
  *(_BYTE *)(this + 7252) = a2[96];
  UiText_SetValueIfChanged(*(_DWORD *)(this + 7256), a2 + 88, 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 7260), v14, 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 7264), a2 + 98, 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 7276), a2 + 122, 0, 0);
  *(_BYTE *)(this + 7272) = a2[97];
  sub_6585BC50(this);
  *(_DWORD *)(this + 7108) = a3;
  Vector68_Assign((int *)(this + 7112), &a4);
  *(_BYTE *)(this + 7128) = a8;
  DwordVector_CopyFrom(this + 7132, (int)&a9);
  sub_6585B9E0(this);
  PacketData_ClearAll((int)&a3);
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (6585D1F0) --------------------------------------------------------
char *__thiscall sub_6585D1F0(char **this, char *a2)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  char *v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  (*(void (__thiscall **)(int, char **, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 1, 2048, v3);
  a2 = *(this + 6);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  a2 = *(this + 7);
  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  ByteSwapCopy((int)&a2, (int)v6, 4u);
  return BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6585D2E0) --------------------------------------------------------
char *__thiscall GuildInvitePacket_WriteToStream(char **this, char *a2)
{
  char *v3; // esi
  int v4; // ebx
  char *result; // eax
  int v6; // edi
  char *v7; // [esp-Ch] [ebp-24h]
  char v9[4]; // [esp+10h] [ebp-8h] BYREF
  char *v10; // [esp+14h] [ebp-4h] BYREF

  v10 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v10, (int)v9, 4u);
    v7 = v9;
  }
  else
  {
    v7 = (char *)&v10;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v7, 0x20u, 1);
  a2 = *(this + 1);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v9, 4u);
    BitStream_WriteBitsCompressed(v3, v9, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  v4 = (*(this + 4) - *(this + 3)) >> 5;
  a2 = (char *)v4;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v9, 4u);
    result = BitStream_WriteBitsCompressed(v3, v9, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  if ( v4 )
  {
    v6 = 0;
    do
    {
      result = sub_6585D1F0((char **)&(*(this + 3))[v6], v3);
      v6 += 32;
      --v4;
    }
    while ( v4 );
  }
  return result;
}

//----- (6585D3D0) --------------------------------------------------------
char __thiscall GuildPacket_WriteBody(int this)
{
  char result; // al
  char v3[4]; // [esp+4h] [ebp-4h] BYREF

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    v3[0] = *(_BYTE *)(this + 1076);
    BitStream_WriteBitsCompressed((char *)(this + 12), v3, 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 1:
      case 4:
      case 6:
      case 7:
      case 0xA:
      case 0xD:
      case 0xF:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
        result = 1;
        break;
      case 3:
        ItemsAddedPayload_Write((ItemsAddedPayload *)(this + 1600), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 5:
        Playerfile_Write((char *)(this + 1092), (char *)(this + 12));
        result = 1;
        break;
      case 8:
        Playerfile_Write((char *)(this + 1092), (char *)(this + 12));
        Packet_ID_A9_WriteList((_DWORD *)(this + 1472), (char *)(this + 12));
        BitStream_WriteBool((char *)this, *(_BYTE *)(this + 1560));
        result = 1;
        break;
      case 9:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
        UInt16Array6_WriteCompressed((unsigned __int16 *)(this + 1562), (char *)(this + 12));
        result = 1;
        break;
      case 0xB:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
        Packet_WriteInt8((char *)this, *(_BYTE *)(this + 1088));
        result = 1;
        break;
      case 0xC:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1084));
        result = 1;
        break;
      case 0xE:
        GuildInvitePacket_WriteToStream((char **)(this + 1576), (char *)(this + 12));
        result = 1;
        break;
      case 0x10:
        GuildInvitePacket_WriteToStream((char **)(this + 1576), (char *)(this + 12));
        BitStream_WriteBool((char *)this, *(_BYTE *)(this + 1560));
        result = 1;
        break;
      case 0x11:
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
        BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1084));
        goto LABEL_13;
      default:
LABEL_13:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (6585D750) --------------------------------------------------------
char **__thiscall Array32_PartitionRange(char **this, char **a2, char *a3, char *a4)
{
  char *v4; // edx
  char *v5; // ebx
  char **v6; // esi
  char *v7; // eax
  char *v8; // esi
  char *v9; // edi

  v4 = a4;
  v5 = a3;
  v6 = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v7 = *(this + 2);
    if ( a4 != v7 )
    {
      do
      {
        v8 = v4;
        v9 = v5;
        v4 += 32;
        v5 += 32;
        qmemcpy(v9, v8, 0x20u);
      }
      while ( v4 != v7 );
      v6 = a2;
    }
    *(this + 2) = v5;
  }
  return v6;
}

//----- (6585DE50) --------------------------------------------------------
char *__thiscall Packet_ID_A5_ctor(char *this)
{
  char *v3[4]; // [esp+10h] [ebp-10h] BYREF

  v3[0] = this;
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -91;
  v3[3] = 0;
  *(_DWORD *)this = &off_659CD568;
  PacketData_InitFieldsExt((int)(this + 1144));
  PacketData_InitFieldsExt((int)(this + 1300));
  *((_DWORD *)this + 364) = 0;
  *((_DWORD *)this + 365) = 0;
  *((_DWORD *)this + 366) = 0;
  QuestState_Initialize(this + 1092);
  GameDataArray_Ctor((_DWORD *)this + 368);
  *(_DWORD *)(this + 1562) = 0;
  *(_DWORD *)(this + 1566) = 0;
  *(_DWORD *)(this + 1570) = 0;
  *((_DWORD *)this + 397) = 0;
  *((_DWORD *)this + 398) = 0;
  *((_DWORD *)this + 399) = 0;
  *((_DWORD *)this + 394) = 0;
  *((_DWORD *)this + 395) = 0;
  Array32_PartitionRange((char **)this + 396, v3, *((char **)this + 397), *((char **)this + 398));
  *((_DWORD *)this + 402) = 0;
  *((_DWORD *)this + 403) = 0;
  *((_DWORD *)this + 404) = 0;
  *(this + 1632) = 0;
  *((_DWORD *)this + 405) = 0;
  *((_DWORD *)this + 406) = 0;
  *((_DWORD *)this + 407) = 0;
  *((_WORD *)this + 800) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1088) = 0;
  *(this + 1076) = 0;
  *((_DWORD *)this + 270) = 0;
  *(this + 1560) = 0;
  *((_DWORD *)this + 271) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CD568: using guessed type void *off_659CD568;

//----- (6585E590) --------------------------------------------------------
char __thiscall Packet_ID_A5_read_struct3(char *this, unsigned int *a2)
{
  unsigned int v3; // eax
  _DWORD *v4; // ebx
  int v5; // ecx
  unsigned int v6; // eax
  int v7; // esi
  char v9[4]; // [esp+Ch] [ebp-3Ch] BYREF
  char v10[4]; // [esp+10h] [ebp-38h] BYREF
  char v11[4]; // [esp+14h] [ebp-34h] BYREF
  int v12; // [esp+18h] [ebp-30h]
  unsigned int v13; // [esp+1Ch] [ebp-2Ch]
  unsigned int v14; // [esp+20h] [ebp-28h] BYREF
  int v15; // [esp+24h] [ebp-24h] BYREF
  _BYTE v16[20]; // [esp+28h] [ebp-20h] BYREF
  int v17; // [esp+3Ch] [ebp-Ch] BYREF
  int v18; // [esp+40h] [ebp-8h] BYREF

  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 4);
  v14 = 0;
  LOBYTE(v3) = RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v14);
  v15 = 0;
  v16[0] = 0;
  v17 = 0;
  v18 = 0;
  v13 = 0;
  if ( v14 )
  {
    v4 = this + 8;
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v10, 0x20u, 1) )
          ByteSwapCopy((int)v10, (int)&v15, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v15, 0x20u, 1);
      }
      (*(void (__thiscall **)(int, _BYTE *, int, unsigned int *))(*(_DWORD *)g_LTClient + 56))(
        g_LTClient,
        v16,
        2048,
        a2);
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v11, 0x20u, 1) )
          ByteSwapCopy((int)v11, (int)&v17, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v17, 0x20u, 1);
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v9, 0x20u, 1) )
          ByteSwapCopy((int)v9, (int)&v18, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, (char *)&v18, 0x20u, 1);
      }
      v5 = v4[1];
      if ( v5 )
        v6 = (v4[3] - v5) >> 5;
      else
        v6 = 0;
      v7 = v4[2];
      if ( (v7 - v5) >> 5 >= v6 )
      {
        sub_6585E2D0(v4, v7, 1, &v15);
      }
      else
      {
        LOBYTE(v12) = 0;
        sub_6585E1A0(v7, 1, &v15, v4, v12, v12);
        v4[2] = v7 + 32;
      }
      v3 = v13 + 1;
      v13 = v3;
    }
    while ( v3 < v14 );
  }
  return v3;
}
// 6585E1A0: using guessed type int __cdecl sub_6585E1A0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 6585E2D0: using guessed type int __thiscall sub_6585E2D0(_DWORD, _DWORD, _DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6585E730) --------------------------------------------------------
char __thiscall Packet_ID_A5_read(int this, int a2)
{
  char result; // al
  unsigned int *v4; // edi

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    v4 = (unsigned int *)(this + 12);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    switch ( *(_BYTE *)(this + 1076) )
    {
      case 1:
      case 4:
      case 6:
      case 7:
      case 0xA:
      case 0xD:
      case 0xF:
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1080));
        result = 1;
        break;
      case 3:
        ItemList_Read((ItemsAddedPayload *)(this + 1600), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 5:
        Packet_ID_A5_read_struct1((char *)(this + 1092), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 8:
        Packet_ID_A5_read_struct1((char *)(this + 1092), (unsigned int *)(this + 12));
        Packet_ID_A5_read_struct2((char *)(this + 1472), (unsigned int *)(this + 12));
        VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1560));
        result = 1;
        break;
      case 9:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        Read_u16c_x6((char *)(this + 1562), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 0xB:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        Read_u8c((unsigned int *)this, (char *)(this + 1088));
        result = 1;
        break;
      case 0xC:
      case 0x11:
        RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
        RakNet::BitStream::ReadCompressed_T_uint(v4, (char *)(this + 1084));
        goto LABEL_12;
      case 0xE:
        Packet_ID_A5_read_struct3((char *)(this + 1576), (unsigned int *)(this + 12));
        result = 1;
        break;
      case 0x10:
        Packet_ID_A5_read_struct3((char *)(this + 1576), (unsigned int *)(this + 12));
        VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1560));
        result = 1;
        break;
      default:
LABEL_12:
        result = 1;
        break;
    }
  }
  return result;
}

//----- (6585E8F0) --------------------------------------------------------
int __thiscall TerminalWindow_ClearVectors(char *this)
{
  int v2; // eax
  char *v3; // esi

  v2 = *((_DWORD *)this + 402);
  v3 = this + 1604;
  if ( v2 )
  {
    ItemVector_DestroyRange(v2, *((_DWORD *)this + 403));
    operator delete(*((void **)v3 + 1));
  }
  *((_DWORD *)v3 + 1) = 0;
  *((_DWORD *)v3 + 2) = 0;
  *((_DWORD *)v3 + 3) = 0;
  if ( *((_DWORD *)this + 397) )
    operator delete(*((void **)this + 397));
  *((_DWORD *)this + 397) = 0;
  *((_DWORD *)this + 398) = 0;
  *((_DWORD *)this + 399) = 0;
  if ( *((_DWORD *)this + 369) )
    operator delete(*((void **)this + 369));
  *((_DWORD *)this + 369) = 0;
  *((_DWORD *)this + 370) = 0;
  *((_DWORD *)this + 371) = 0;
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 12));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (6585F4A0) --------------------------------------------------------
void __thiscall CWindowTerminalPrisonMineralCollector_Dtor(void **this)
{
  *this = &CWindowTerminalPrisonMineralCollector_vtbl;
  GroupWindow_Dtor(this);
}
// 659CD5F4: using guessed type int (__thiscall *CWindowTerminalPrisonMineralCollector_vtbl)(void *, char);

//----- (6585F4B0) --------------------------------------------------------
int __thiscall CWindowTerminalPrisonMineralCollector_InitUI(_DWORD *this)
{
  *(this + 1592) = UiWidget_CreateWithInput(this, 5, 75, 0, 80, 0);
  return GroupWindow_Initialize((int)this);
}

//----- (6585F5B0) --------------------------------------------------------
void **__thiscall CWindowTerminalPrisonMineralCollector_dtor(void **this, char a2)
{
  CWindowTerminalPrisonMineralCollector_Dtor(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (6585F5E0) --------------------------------------------------------
int __thiscall CWindowTerminalPrisonMineralCollector_OnCommand(_DWORD *this, int a2, int a3, int a4)
{
  _WORD *v6; // edi
  int v7; // esi
  char *v8; // eax
  int v9; // eax
  _DWORD v10[269]; // [esp+Ch] [ebp-678h] BYREF
  char v11; // [esp+440h] [ebp-244h]
  int v12; // [esp+444h] [ebp-240h]
  int v13; // [esp+680h] [ebp-4h]

  if ( a2 == 4 )
  {
    SendPacket_ID_0xA5_Unknown();
    return CWindow_HandleCommand(this, 4, a3, a4);
  }
  else
  {
    if ( a2 != 5 )
      return CWindow_HandleCommand(this, a2, a3, a4);
    if ( !(*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 2048) )
    {
      v6 = (_WORD *)(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
      if ( ItemsAddedPayload_GetVariantCountByTemplateId(v6, 973)
        || ItemsAddedPayload_GetVariantCountByTemplateId(v6, 974)
        || ItemsAddedPayload_GetVariantCountByTemplateId(v6, 975) )
      {
        Packet_ID_A5_ctor((char *)v10);
        v13 = 0;
        v10[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
        v9 = *(this + 1593);
        v11 = 12;
        v12 = v9;
        GuildPacket_WriteBody((int)v10);
        LTClient_SendPacket_BuildIfNeeded(v10, 2, 1, 3, 0);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 2048);
        v13 = -1;
        TerminalWindow_ClearVectors((char *)v10);
      }
      else
      {
        v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5569);
        if ( v7 )
          v8 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
        else
          v8 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v8, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
        if ( v7 )
        {
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
          return 1;
        }
      }
    }
    return 1;
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (6585F8C0) --------------------------------------------------------
int __thiscall CWindowTerminalProduction_UpdateTabs(_DWORD *this)
{
  int result; // eax

  *(_DWORD *)(*(this + 1725) + 32) = 0;
  *(_DWORD *)(*(this + 1726) + 32) = 0;
  result = *(this + 1510);
  if ( result )
  {
    result = *(_DWORD *)(result + 4);
    if ( result == 3 )
    {
      *(_DWORD *)(*(this + 1725) + 32) = 1;
    }
    else if ( result == 27 )
    {
      *(_DWORD *)(*(this + 1726) + 32) = 1;
    }
  }
  return result;
}

//----- (6585F910) --------------------------------------------------------
int __thiscall sub_6585F910(_DWORD *this)
{
  int result; // eax
  _DWORD *v3; // ebx
  int v4; // edi
  int v5; // edi
  char v6; // al
  _DWORD *v7; // edi
  int v8; // ebx
  unsigned __int8 v9; // al
  int v10; // ecx
  _DWORD *v11; // eax
  int v12; // ebx
  _DWORD *v13; // edi
  int v14; // ebx
  int v15; // edi
  _DWORD *v16; // ebx
  int v17; // edi
  int v18; // edi
  int v19; // edi
  float v20; // [esp+Ch] [ebp-34h]
  int v21; // [esp+34h] [ebp-Ch]
  float v22; // [esp+34h] [ebp-Ch]
  int v23; // [esp+34h] [ebp-Ch]
  int v24; // [esp+38h] [ebp-8h] BYREF
  char v25; // [esp+3Fh] [ebp-1h]

  result = *(this + 1748);
  if ( result )
  {
    result = (*(int (__cdecl **)(_DWORD))(g_pILTClient + 316))(*(this + 1748));
    if ( !result )
      *(this + 1748) = 0;
  }
  v3 = this + 1730;
  if ( *(_DWORD *)(*(this + 1730) + 24) )
  {
    result = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(685, 90, 0);
    *(this + 1748) = result;
    if ( result )
    {
      v24 = 0;
      Render_DrawRotatedLine(COERCE_FLOAT(&v24), 0.0, 0.0, 0.0, 36.0, 3, -2139062144, 0);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v24, 1.0);
      (*(void (__cdecl **)(_DWORD, int, _DWORD, _DWORD, _DWORD))(g_pILTClient + 364))(*(this + 1748), v24, 0, 0, 0);
      if ( v24 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v24) )
        v24 = 0;
      Render_DrawRotatedLine(COERCE_FLOAT(&v24), 0.0, 0.0, 0.0, 37.0, 3, -2139062144, 0);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v24, 1.0);
      (*(void (__cdecl **)(_DWORD, int, _DWORD, int, int))(g_pILTClient + 364))(*(this + 1748), v24, 0, 677, 36);
      if ( v24 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v24) )
        v24 = 0;
      v4 = *(_DWORD *)(*v3 + 84);
      v5 = (*(int (**)(void))(*(_DWORD *)*v3 + 16))() / 2 + v4 - 40;
      Render_DrawRotatedLine(COERCE_FLOAT(&v24), 0.0, 0.0, 0.0, 12.0, 3, -2139062144, 0);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v24, 1.0);
      (*(void (__cdecl **)(_DWORD, int, _DWORD, int, int))(g_pILTClient + 364))(*(this + 1748), v24, 0, v5, 24);
      if ( v24 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v24) )
        v24 = 0;
      v6 = 1;
      v25 = 5;
      v21 = 1;
      v7 = this + 1730;
      while ( *(_DWORD *)(v7[1] + 24) )
      {
        v8 = *(_DWORD *)(*v7 + 84);
        Render_DrawRotatedLine(COERCE_FLOAT(&v24), 0.0, 0.0, 63.0, 0.0, 3, -2139062144, 0);
        (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v24, 1.0);
        (*(void (__cdecl **)(_DWORD, int, _DWORD, int, _DWORD))(g_pILTClient + 364))(*(this + 1748), v24, 0, v8 + 7, 0);
        if ( v24 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v24) )
          v24 = 0;
        ++v7;
        if ( ++v21 >= 5 )
        {
          v9 = v25;
          goto LABEL_24;
        }
        v6 = v21;
      }
      v9 = v6 - 1;
LABEL_24:
      v10 = v9;
      v11 = (_DWORD *)*(this + v9 + 1730);
      v12 = v11[21];
      v13 = this + v10 + 1730;
      v14 = (*(int (__thiscall **)(_DWORD *))(*v11 + 16))(v11) / 2 + v12 - 40;
      Render_DrawRotatedLine(COERCE_FLOAT(&v24), 0.0, 0.0, 0.0, 12.0, 3, -2139062144, 0);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v24, 1.0);
      (*(void (__cdecl **)(_DWORD, int, _DWORD, int, int))(g_pILTClient + 364))(*(this + 1748), v24, 0, v14, 24);
      if ( v24 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v24) )
        v24 = 0;
      v15 = *(_DWORD *)(*(this + 1734) + 84) - *(_DWORD *)(*v13 + 84);
      v22 = (double)v15 + 118.0;
      Render_DrawRotatedLine(COERCE_FLOAT(&v24), 0.0, 0.0, v22, 0.0, 3, -2139062144, 0);
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v24, 1.0);
      (*(void (__cdecl **)(_DWORD, int, _DWORD, int, int))(g_pILTClient + 364))(*(this + 1748), v24, 0, 561 - v15, 35);
      if ( v24 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v24) )
        v24 = 0;
      v16 = this + 1740;
      v20 = 0.0;
      if ( *(_DWORD *)(*(this + 1740) + 24) )
      {
        Render_DrawRotatedLine(COERCE_FLOAT(&v24), 0.0, 0.0, 148.0, v20, 3, -2139062144, 0);
        (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v24, 1.0);
        (*(void (__cdecl **)(_DWORD, int, _DWORD, _DWORD, int))(g_pILTClient + 364))(*(this + 1748), v24, 0, 0, 35);
        if ( v24 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v24) )
          v24 = 0;
        v17 = *(_DWORD *)(*v16 + 84);
        v18 = (*(int (**)(void))(*(_DWORD *)*v16 + 16))() / 2 + v17 - 40;
        Render_DrawRotatedLine(COERCE_FLOAT(&v24), 0.0, 0.0, 0.0, 12.0, 3, -2139062144, 0);
        (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v24, 1.0);
        (*(void (__cdecl **)(_DWORD, int, _DWORD, int, int))(g_pILTClient + 364))(*(this + 1748), v24, 0, v18, 36);
        if ( v24 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v24) )
          v24 = 0;
        v23 = 3;
        do
        {
          if ( *(_DWORD *)(v16[1] + 24) )
          {
            v19 = *(_DWORD *)(*v16 + 84);
            Render_DrawRotatedLine(COERCE_FLOAT(&v24), 0.0, 0.0, 88.0, 0.0, 3, -2139062144, 0);
            (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v24, 1.0);
            (*(void (__cdecl **)(_DWORD, int, _DWORD, int, int))(g_pILTClient + 364))(
              *(this + 1748),
              v24,
              0,
              v19 + 7,
              70);
            if ( v24 )
            {
              if ( !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v24) )
                v24 = 0;
            }
          }
          ++v16;
          --v23;
        }
        while ( v23 );
      }
      else
      {
        Render_DrawRotatedLine(COERCE_FLOAT(&v24), 0.0, 0.0, 123.0, v20, 3, -2139062144, 0);
        (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v24, 1.0);
        (*(void (__cdecl **)(_DWORD, int, _DWORD, _DWORD, int))(g_pILTClient + 364))(*(this + 1748), v24, 0, 0, 35);
        if ( v24 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v24) )
          v24 = 0;
      }
      return (*(int (__cdecl **)(_DWORD))(g_pILTClient + 272))(*(this + 1748));
    }
  }
  return result;
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (65860070) --------------------------------------------------------
void __cdecl __noreturn sub_65860070(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65860120) --------------------------------------------------------
void *__cdecl sub_65860120(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 0x5C )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(92 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (658602B0) --------------------------------------------------------
double __thiscall sub_658602B0(int this)
{
  unsigned __int8 v1; // al

  v1 = *(_BYTE *)(this + 6);
  if ( v1 < 6u )
    return (float)((double)*(unsigned __int16 *)(this + 2 * v1 + 136) / 100.0);
  else
    return (float)((double)*(unsigned __int16 *)(this + 142) / 100.0);
}

//----- (65860630) --------------------------------------------------------
int __thiscall ProductionReq_AccumulateCosts(_DWORD *this, unsigned __int16 a2, int a3, int a4, int a5)
{
  int result; // eax
  bool v7; // bl
  unsigned int i; // edi
  char v9[84]; // [esp+18h] [ebp-58h] BYREF

  result = ItemTemplate_GetType(g_ItemTemplateById, a2);
  v7 = result == 17;
  for ( i = 0; i < (*(this + 4) - *(this + 3)) >> 2; ++i )
  {
    result = *(this + 3) + 4 * i;
    if ( *(_BYTE *)(result + 3) )
    {
      result = *(unsigned __int16 *)result;
      switch ( (__int16)result )
      {
        case 13:
          if ( v7 )
            goto LABEL_5;
          break;
        case 16:
        case 20:
          if ( !v7 )
          {
LABEL_5:
            LOBYTE(result) = SkillDefTable_CopyEntry(result, v9);
            if ( (_BYTE)result )
            {
              result = a4;
              goto LABEL_13;
            }
          }
          break;
        case 19:
          LOBYTE(result) = SkillDefTable_CopyEntry(result, v9);
          if ( (_BYTE)result )
          {
            result = a3;
            goto LABEL_13;
          }
          break;
        case 23:
          LOBYTE(result) = SkillDefTable_CopyEntry(result, v9);
          if ( (_BYTE)result )
          {
            result = a5;
LABEL_13:
            *(_DWORD *)result += (unsigned __int8)v9[81];
          }
          break;
        default:
          continue;
      }
    }
  }
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658608D0) --------------------------------------------------------
_DWORD *__thiscall sub_658608D0(_DWORD *this, _DWORD *a2, unsigned int *a3)
{
  int *v3; // edx
  int *v4; // eax
  int *v5; // ebx
  unsigned int v6; // edi
  unsigned int v7; // esi
  int *v8; // eax

  v3 = (int *)*(this + 1);
  v4 = (int *)v3[1];
  v5 = v3;
  if ( !*((_BYTE *)v4 + 17) )
  {
    v6 = *a3;
    do
    {
      v7 = v4[3];
      if ( v7 >= v6 )
      {
        if ( *((_BYTE *)v3 + 17) && v6 < v7 )
          v3 = v4;
        v5 = v4;
        v4 = (int *)*v4;
      }
      else
      {
        v4 = (int *)v4[2];
      }
    }
    while ( !*((_BYTE *)v4 + 17) );
  }
  if ( *((_BYTE *)v3 + 17) )
    v8 = *(int **)(*(this + 1) + 4);
  else
    v8 = (int *)*v3;
  while ( !*((_BYTE *)v8 + 17) )
  {
    if ( *a3 >= v8[3] )
    {
      v8 = (int *)v8[2];
    }
    else
    {
      v3 = v8;
      v8 = (int *)*v8;
    }
  }
  *a2 = v5;
  a2[1] = v3;
  return a2;
}

//----- (65860990) --------------------------------------------------------
char *__thiscall Packet_WriteU32_Compressed(char *this, int a2)
{
  char *v2; // esi
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  v2 = this + 12;
  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  ByteSwapCopy((int)&a2, (int)v4, 4u);
  return BitStream_WriteBitsCompressed(v2, v4, 0x20u, 1);
}

//----- (65860A30) --------------------------------------------------------
void __thiscall CWindowTerminalProduction_UpdateSelection(int this)
{
  unsigned __int16 v2; // ax
  char v3; // dl
  int v4; // eax
  int v5; // ecx
  int v6; // edi
  char v7; // dl
  int v8; // eax
  __int16 v9; // cx
  int v10; // edx
  int v11; // eax
  int v12; // ecx
  int v13; // edx
  int v14; // eax
  int v15; // ecx
  int v16; // ecx
  int (__thiscall *v17)(int, int); // eax
  _DWORD *v18; // eax
  int v19; // edx
  unsigned __int16 v20; // ax
  double SkillMultiplier; // st7
  bool v22; // zf
  char v23; // cl
  int v24; // eax
  char *v25; // eax
  int v26; // eax
  char *v27; // eax
  unsigned int v28; // edx
  int v29; // eax
  char *v30; // eax
  int v31; // eax
  char *v32; // eax
  int v33; // eax
  char *v34; // eax
  int v35; // eax
  char *v36; // eax
  int v37; // edx
  _DWORD *v38; // eax
  _DWORD *v39; // edi
  _BYTE v40[28]; // [esp-24h] [ebp-19Ch] BYREF
  int v41; // [esp-8h] [ebp-180h]
  __int64 v42; // [esp-4h] [ebp-17Ch]
  char v43[24]; // [esp+10h] [ebp-168h] BYREF
  unsigned __int16 v44; // [esp+28h] [ebp-150h]
  unsigned __int16 v45; // [esp+2Ah] [ebp-14Eh]
  unsigned __int16 v46; // [esp+2Ch] [ebp-14Ch]
  unsigned __int16 v47; // [esp+2Eh] [ebp-14Ah]
  unsigned __int16 v48; // [esp+30h] [ebp-148h]
  unsigned __int16 v49; // [esp+32h] [ebp-146h]
  unsigned __int16 v50; // [esp+34h] [ebp-144h]
  unsigned __int16 v51; // [esp+36h] [ebp-142h]
  unsigned __int16 v52; // [esp+38h] [ebp-140h]
  unsigned __int16 v53; // [esp+3Ah] [ebp-13Eh]
  int v54; // [esp+6Ch] [ebp-10Ch] BYREF
  __int16 v55; // [esp+70h] [ebp-108h]
  int v56; // [esp+74h] [ebp-104h]
  int v57; // [esp+78h] [ebp-100h]
  int v58; // [esp+7Ch] [ebp-FCh]
  int v59; // [esp+80h] [ebp-F8h]
  int v60; // [esp+84h] [ebp-F4h]
  char v61; // [esp+88h] [ebp-F0h]
  int v62; // [esp+8Ch] [ebp-ECh]
  bool v63; // [esp+90h] [ebp-E8h]
  char v64; // [esp+91h] [ebp-E7h]
  int v65; // [esp+94h] [ebp-E4h] BYREF
  _BYTE v66[28]; // [esp+98h] [ebp-E0h] BYREF
  __int16 v67; // [esp+B4h] [ebp-C4h] BYREF
  char v68; // [esp+B6h] [ebp-C2h]
  int v69; // [esp+B8h] [ebp-C0h]
  int v70; // [esp+BCh] [ebp-BCh]
  int v71; // [esp+C0h] [ebp-B8h]
  int v72; // [esp+C4h] [ebp-B4h]
  int v73; // [esp+C8h] [ebp-B0h]
  int v74; // [esp+CCh] [ebp-ACh]
  int v75; // [esp+D0h] [ebp-A8h]
  int v76; // [esp+D4h] [ebp-A4h]
  int v77; // [esp+D8h] [ebp-A0h]
  int v78; // [esp+DCh] [ebp-9Ch] BYREF
  int v79; // [esp+E0h] [ebp-98h] BYREF
  unsigned __int16 v80; // [esp+E4h] [ebp-94h]
  __int16 v81; // [esp+E6h] [ebp-92h]
  float v82; // [esp+E8h] [ebp-90h]
  float v83; // [esp+ECh] [ebp-8Ch]
  char v84; // [esp+F0h] [ebp-88h]
  bool v85; // [esp+F1h] [ebp-87h]
  char v86; // [esp+F2h] [ebp-86h]
  char v87; // [esp+F3h] [ebp-85h]
  int v88; // [esp+F4h] [ebp-84h]
  char v89; // [esp+F8h] [ebp-80h]
  unsigned int v90; // [esp+FCh] [ebp-7Ch]
  unsigned int v91; // [esp+100h] [ebp-78h]
  unsigned int Value; // [esp+104h] [ebp-74h]
  unsigned int v93; // [esp+108h] [ebp-70h]
  int v94; // [esp+10Ch] [ebp-6Ch] BYREF
  _BYTE *v95; // [esp+110h] [ebp-68h] BYREF
  int v96; // [esp+114h] [ebp-64h] BYREF
  int v97; // [esp+118h] [ebp-60h] BYREF
  int v98; // [esp+11Ch] [ebp-5Ch]
  __int16 v99; // [esp+120h] [ebp-58h]
  __int16 v100; // [esp+122h] [ebp-56h]
  char v101; // [esp+124h] [ebp-54h]
  char v102; // [esp+125h] [ebp-53h]
  int v103; // [esp+128h] [ebp-50h]
  int v104; // [esp+12Ch] [ebp-4Ch]
  int v105; // [esp+130h] [ebp-48h]
  char v106; // [esp+134h] [ebp-44h]
  char v107; // [esp+135h] [ebp-43h]
  char v108; // [esp+136h] [ebp-42h]
  int v109; // [esp+137h] [ebp-41h]
  int v110; // [esp+13Ch] [ebp-3Ch]
  int v111; // [esp+140h] [ebp-38h]
  char v112; // [esp+144h] [ebp-34h]
  char Buffer[32]; // [esp+148h] [ebp-30h] BYREF
  int v114; // [esp+174h] [ebp-4h]

  UiText_SetValueIfChanged(*(_DWORD *)(this + 7092), "0 UC", 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 7112), "0 UC", 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 7100), "0", 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 7104), "0 UC", 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 7116), "0 UC", 0, 0);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 7120), "0 UC", 0, 0);
  if ( !*(_WORD *)(this + 7196) )
    goto LABEL_48;
  v2 = *(_WORD *)(this + 7158);
  if ( !v2 )
    goto LABEL_48;
  if ( v2 >= 0xBC1u )
    goto LABEL_48;
  LOBYTE(v96) = *(_BYTE *)(this + 7182);
  if ( !ItemTemplate_CopyVariantByIndex(v2, v96, v43) )
    goto LABEL_48;
  v67 = 0;
  v3 = 1;
  v68 = 0;
  v69 = 0;
  v73 = 0;
  v70 = 0;
  v74 = 0;
  v71 = 0;
  v75 = 0;
  v72 = 0;
  v76 = 0;
  v77 = 0;
  if ( v44
    && v44 < 0xBC1u
    && (*(_WORD *)(this + 7200) != v44 || (unsigned __int16)(*(_WORD *)(this + 7202) * *(_DWORD *)(this + 7240)) < v45) )
  {
    v3 = 0;
  }
  if ( v46
    && v46 < 0xBC1u
    && (*(_WORD *)(this + 7244) != v46 || (unsigned __int16)(*(_WORD *)(this + 7246) * *(_DWORD *)(this + 7284)) < v47) )
  {
    v3 = 0;
  }
  if ( v48
    && v48 < 0xBC1u
    && (*(_WORD *)(this + 7288) != v48 || (unsigned __int16)(*(_WORD *)(this + 7290) * *(_DWORD *)(this + 7328)) < v49) )
  {
    v3 = 0;
  }
  if ( v50
    && v50 < 0xBC1u
    && (*(_WORD *)(this + 7332) != v50 || (unsigned __int16)(*(_WORD *)(this + 7334) * *(_DWORD *)(this + 7372)) < v51) )
  {
    v3 = 0;
  }
  if ( v52
    && v52 < 0xBC1u
    && (*(_WORD *)(this + 7376) != v52 || (unsigned __int16)(*(_WORD *)(this + 7378) * *(_DWORD *)(this + 7416)) < v53)
    || !v3 )
  {
    goto LABEL_48;
  }
  v4 = *(_DWORD *)(this + 7064);
  v5 = *(_DWORD *)(this + 7068);
  *(_DWORD *)(this + 7076) = *(_DWORD *)(this + 7060);
  *(_DWORD *)(this + 7088) = *(_DWORD *)(this + 7072);
  *(_DWORD *)(this + 7080) = v4;
  *(_DWORD *)(this + 7084) = v5;
  v6 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  v94 = v6;
  if ( !v6 )
    return;
  v98 = 0;
  v99 = 0;
  v7 = *(_BYTE *)(this + 7182);
  v100 = 0;
  v8 = *(unsigned __int16 *)(this + 7422);
  v9 = *(_WORD *)(this + 7158);
  v68 = v7;
  v10 = *(unsigned __int16 *)(this + 7466);
  v69 = v8;
  v11 = *(_DWORD *)(this + 7064);
  v67 = v9;
  v12 = *(_DWORD *)(this + 7060);
  v70 = v10;
  v13 = *(_DWORD *)(this + 7068);
  v74 = v11;
  v14 = *(unsigned __int16 *)(this + 7554);
  v73 = v12;
  v15 = *(unsigned __int16 *)(this + 7510);
  v75 = v13;
  v72 = v14;
  v71 = v15;
  v16 = *(_DWORD *)(this + 7072);
  LODWORD(v42) = &v67;
  v101 = 100;
  v102 = 0;
  v103 = 0;
  v104 = 0;
  v105 = 0;
  v107 = 0;
  v108 = 0;
  v106 = 0;
  v109 = 0;
  v110 = 0;
  v111 = 0;
  v112 = 0;
  v97 = 1;
  v76 = v16;
  if ( !ProductionRecipe_BuildFromVariant(&v97, v42) )
  {
LABEL_48:
    LODWORD(v42) = 0;
LABEL_49:
    UiItemSlot_SetItem(*(_DWORD *)(this + 6916), (unsigned __int16 *)v42);
    return;
  }
  v96 = v77;
  v17 = *(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88);
  v95 = 0;
  v78 = 0;
  v18 = (_DWORD *)v17(g_LTClient, 5);
  if ( v18 )
    ProductionReq_AccumulateCosts(v18, *(unsigned __int16 *)v43, (int)&v95, (int)&v96, (int)&v78);
  v19 = *(_DWORD *)(this + 7096);
  v82 = 0.0;
  v83 = 0.0;
  v81 = 0;
  v80 = 0;
  v84 = 0;
  v90 = 0;
  v91 = 0;
  Value = 0;
  v93 = 0;
  v85 = 0;
  v86 = 0;
  v87 = 0;
  v88 = 0;
  v89 = 0;
  v79 = 2;
  if ( *(_DWORD *)(v19 + 176) )
    v20 = atoi(*(const char **)(v19 + 176));
  else
    v20 = 0;
  v81 = v67;
  v80 = v20;
  v89 = v68;
  if ( *(_DWORD *)(this + 6368) )
    SkillMultiplier = sub_658602B0(this + 6368);
  else
    SkillMultiplier = Production_GetSkillMultiplier(this + 6524);
  v22 = *(_DWORD *)(this + 7148) == 0;
  v83 = SkillMultiplier;
  v23 = *(_BYTE *)(this + 7144);
  v85 = !v22;
  v86 = v23;
  v88 = v78;
  *(_DWORD *)(this + 7108) = v80;
  if ( ProductionCalcA(*(unsigned __int16 *)(v6 + 8), (int)&v79) )
  {
    if ( ItemTemplate_GetType(g_ItemTemplateById, v98) == 17 )
      HIWORD(v98) = v80;
    LODWORD(v42) = 0;
    v41 = 0;
    v95 = v40;
    String_FromU32(v40, Value);
    v24 = FormatString((int)v66, (int)"{0} UC");
    v114 = 0;
    v25 = (char *)std::string::c_str(v24);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 7092), v25, v41, (char *)v42);
    v114 = -1;
    std::string::~string(v66);
    LODWORD(v42) = 0;
    v41 = 0;
    v95 = v40;
    String_FromU32(v40, v93);
    v26 = FormatString((int)v66, (int)"{0} UC");
    v114 = 1;
    v27 = (char *)std::string::c_str(v26);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 7104), v27, v41, (char *)v42);
    v114 = -1;
    std::string::~string(v66);
    v28 = *(_DWORD *)(this + 7108) * (unsigned __int8)v43[3];
    LODWORD(v42) = 0;
    v41 = 0;
    v95 = v40;
    String_FromU32(v40, v28);
    v29 = FormatString((int)v66, (int)&unk_659C45C8);
    v114 = 2;
    v30 = (char *)std::string::c_str(v29);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 7100), v30, v41, (char *)v42);
    v114 = -1;
    std::string::~string(v66);
    LODWORD(v42) = 0;
    v41 = 0;
    v95 = v40;
    String_FromU32(v40, v90);
    v31 = FormatString((int)v66, (int)"{0} UC");
    v114 = 3;
    v32 = (char *)std::string::c_str(v31);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 7112), v32, v41, (char *)v42);
    v114 = -1;
    std::string::~string(v66);
    LODWORD(v42) = 0;
    v41 = 0;
    v95 = v40;
    String_FromU32(v40, v91);
    v33 = FormatString((int)v66, (int)"{0} UC");
    v114 = 4;
    v34 = (char *)std::string::c_str(v33);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 7116), v34, v41, (char *)v42);
    v114 = -1;
    std::string::~string(v66);
    LODWORD(v42) = 0;
    v41 = 0;
    v95 = v40;
    String_FromU32(v40, v90 + v91);
    v35 = FormatString((int)v66, (int)"{0} UC");
    v114 = 5;
    v36 = (char *)std::string::c_str(v35);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 7120), v36, v41, (char *)v42);
    v114 = -1;
    std::string::~string(v66);
    v60 = *(_DWORD *)(this + 7108);
    v55 = v67;
    v37 = *(unsigned __int16 *)(v94 + 8);
    v56 = 0;
    v57 = 0;
    v58 = 0;
    v59 = 0;
    v61 = 0;
    v62 = 0;
    v63 = 0;
    v54 = 2;
    v64 = v68;
    Production_GetRequirementValue(this + 6524, v37, 4u);
    v22 = *(_DWORD *)(this + 6368) == 0;
    v62 = v96;
    v63 = !v22;
    v96 = 0;
    StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v96);
    if ( ProductionCalcB(v96, (int)&v54) )
    {
      v38 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
      v39 = v38;
      if ( v38 )
      {
        ItemStatModifier_ProcessValue_ByItemTemplate(v38, v98, &v65);
        ItemStatModifier_AdjustAmmoItemId(v39, (unsigned __int16 *)&v97);
        if ( v60 )
        {
          unknown_libname_664(&v94);
          SharedMem_ReadWorldPosition(&v94);
          sub_65947820(&v94, v65);
          sub_65948390(Buffer, &v94);
          UiText_SetValueIfChanged(*(_DWORD *)(this + 7124), Buffer, 0, 0);
        }
        UiItemSlot_SetItem(*(_DWORD *)(this + 6916), 0);
        LODWORD(v42) = &v97;
        goto LABEL_49;
      }
    }
  }
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658612C0) --------------------------------------------------------
unsigned int __thiscall CWindowTerminalProduction_CalcMaxCraftCount(int this)
{
  unsigned int v2; // edi
  unsigned __int16 v3; // ax
  int v4; // ecx
  unsigned __int16 *v5; // edx
  unsigned __int16 v6; // ax
  double v7; // st7
  double v8; // st7
  char v10[92]; // [esp+8h] [ebp-68h] BYREF
  __int64 v11; // [esp+64h] [ebp-Ch]
  int v12; // [esp+6Ch] [ebp-4h]

  v2 = 10000;
  if ( *(unsigned __int16 *)(this + 7162) < 0x2710u )
    v2 = *(unsigned __int16 *)(this + 7162);
  v3 = *(_WORD *)(this + 7158);
  if ( !v3 )
    return 0;
  if ( v3 >= 0xBC1u )
    return 0;
  LOBYTE(v12) = *(_BYTE *)(this + 7182);
  if ( !ItemTemplate_CopyVariantByIndex(v3, v12, v10) )
    return 0;
  v4 = 0;
  v5 = (unsigned __int16 *)(this + 5568);
  do
  {
    v6 = *(_WORD *)&v10[4 * v4 + 24];
    if ( v6 && v6 < 0xBC1u && *(v5 - 20) == v6 )
    {
      v12 = *v5;
      v7 = (double)v12;
      v12 = *(unsigned __int16 *)&v10[4 * v4 + 26];
      v8 = v7 / (double)v12;
      v11 = (__int64)v8;
      if ( (unsigned int)(__int64)v8 < v2 )
        v2 = (__int64)v8;
    }
    ++v4;
    v5 += 22;
  }
  while ( v4 < 5 );
  return v2;
}

//----- (65861620) --------------------------------------------------------
char __thiscall sub_65861620(_DWORD *this, unsigned int a2)
{
  char *v4; // eax
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  if ( !a2 )
    return 0;
  if ( a2 > 0x2C8590B )
    sub_65860070(v5, v6);
  v4 = (char *)sub_65860120(a2);
  *(this + 1) = v4;
  *(this + 2) = v4;
  *(this + 3) = &v4[92 * a2];
  return 1;
}
// 65861649: variable 'v5' is possibly undefined
// 65861649: variable 'v6' is possibly undefined

//----- (65861680) --------------------------------------------------------
void __thiscall ProductionEntry_Write(char *this, char *a2)
{
  char *v3; // esi
  char *v4; // [esp-Ch] [ebp-1Ch]
  char v5[4]; // [esp+8h] [ebp-8h] BYREF
  int v6; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v6, (int)v5, 4u);
    v4 = v5;
  }
  else
  {
    v4 = (char *)&v6;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v4, 0x20u, 1);
  LOBYTE(a2) = *(this + 4);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  a2 = (char *)*((_DWORD *)this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v5, 4u);
    BitStream_WriteBitsCompressed(v3, v5, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  ItemStructAPlus_u32_write((unsigned __int16 *)this + 6, v3);
  BitStream_WriteU32_Compressed_thunk((int *)this + 15, v3);
}

//----- (65861730) --------------------------------------------------------
void __thiscall ProductionEntryList_Write(_DWORD *this, char *a2)
{
  int v2; // edi
  int v3; // esi
  char *v4; // [esp-Ch] [ebp-20h]
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  int v7; // [esp+10h] [ebp-4h] BYREF

  v2 = (*(this + 2) - *(this + 1)) >> 6;
  v7 = v2;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v4 = v6;
  }
  else
  {
    v4 = (char *)&v7;
  }
  BitStream_WriteBitsCompressed(a2, v4, 0x20u, 1);
  if ( v2 )
  {
    v3 = 0;
    do
    {
      ProductionEntry_Write((char *)(v3 + *(this + 1)), a2);
      v3 += 64;
      --v2;
    }
    while ( v2 );
  }
}

//----- (658617B0) --------------------------------------------------------
char __thiscall Packet_ID_PRODUCTION_write(int this)
{
  char result; // al
  char *v3; // ebx
  char v4; // al
  char *v5; // ecx
  char *v6; // ecx
  int *v7; // edi
  int v8; // esi
  int v9; // edi
  int v10; // [esp+4h] [ebp-8h]
  char v11[4]; // [esp+8h] [ebp-4h] BYREF

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    v11[0] = *(_BYTE *)(this + 1076);
    v3 = (char *)(this + 12);
    BitStream_WriteBitsCompressed((char *)(this + 12), v11, 8u, 1);
    v4 = *(_BYTE *)(this + 1076);
    if ( v4 )
    {
      if ( v4 == 2 )
        ProductionEntryList_Write((_DWORD *)(this + 1228), (char *)(this + 12));
      return 1;
    }
    else
    {
      v5 = (char *)(this + 12);
      if ( *(_BYTE *)(this + 1077) )
        BitStream_WriteBit1(v5);
      else
        BitStream_WriteBit0(v5);
      BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1220));
      v11[0] = *(_BYTE *)(this + 1224);
      BitStream_WriteBitsCompressed((char *)(this + 12), v11, 8u, 1);
      BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1096));
      v6 = (char *)(this + 12);
      if ( *(_BYTE *)(this + 1225) )
        BitStream_WriteBit1(v6);
      else
        BitStream_WriteBit0(v6);
      v7 = (int *)(this + 1080);
      v10 = 4;
      do
      {
        Packet_WriteU32_Compressed((char *)this, *v7++);
        --v10;
      }
      while ( v10 );
      v8 = this + 1100;
      v9 = 10;
      do
      {
        U16AndU32List_Write(v8, v3);
        v8 += 12;
        --v9;
      }
      while ( v9 );
      return 1;
    }
  }
  return result;
}

//----- (65861980) --------------------------------------------------------
void __cdecl sub_65861980(int *a1, int *a2, _DWORD *a3)
{
  int *v3; // ecx
  int **v4; // eax
  int *j; // eax
  int *i; // eax

  v3 = a1;
  while ( v3 != a2 )
  {
    ++*a3;
    if ( !*((_BYTE *)v3 + 17) )
    {
      v4 = (int **)v3[2];
      if ( *((_BYTE *)v4 + 17) )
      {
        for ( i = (int *)v3[1]; !*((_BYTE *)i + 17); i = (int *)i[1] )
        {
          if ( v3 != (int *)i[2] )
            break;
          v3 = i;
        }
        v3 = i;
      }
      else
      {
        v3 = (int *)v3[2];
        for ( j = *v4; !*((_BYTE *)j + 17); j = (int *)*j )
          v3 = j;
      }
    }
  }
}

//----- (65861A00) --------------------------------------------------------
int __thiscall CWindowTerminalProduction_OnUpdate(int this, int a2)
{
  _DWORD *v3; // edi
  int v4; // ebx
  int v5; // ecx
  unsigned int v6; // edi
  unsigned int v7; // eax
  int v8; // eax
  char *v9; // eax
  char v10; // bl
  int v11; // eax
  _WORD *v12; // ecx
  unsigned __int16 v13; // dx
  int v14; // eax
  int v15; // edx
  int v16; // ecx
  int v17; // edx
  unsigned int v18; // edi
  unsigned int i; // eax
  int CachedWindowById; // eax
  int v21; // ecx
  int v22; // eax
  _BYTE v24[28]; // [esp-24h] [ebp-26Ch] BYREF
  int v25; // [esp-8h] [ebp-250h]
  char *v26; // [esp-4h] [ebp-24Ch]
  _DWORD v27[106]; // [esp+10h] [ebp-238h] BYREF
  _DWORD v28[23]; // [esp+1B8h] [ebp-90h] BYREF
  _BYTE v29[28]; // [esp+214h] [ebp-34h] BYREF
  _BYTE *v30; // [esp+230h] [ebp-18h]
  unsigned int v31; // [esp+234h] [ebp-14h]
  char v32; // [esp+23Bh] [ebp-Dh]
  int v33; // [esp+244h] [ebp-4h]

  CWindowTerminalProduction_UpdateTabs((_DWORD *)this);
  LOBYTE(v31) = *(_BYTE *)(this + 7182);
  ItemTemplate_CopyVariantByIndex(*(_WORD *)(this + 7158), v31, (char *)v28);
  *(_DWORD *)(*(_DWORD *)(this + 7132) + 32) = 1;
  if ( (unsigned __int16)*(_DWORD *)(this + 7196) && !*(_DWORD *)(this + 7148) )
    *(_DWORD *)(*(_DWORD *)(this + 7132) + 32) = 0;
  v3 = (_DWORD *)(this + 7060);
  v4 = 4;
  do
  {
    if ( *v3 != v3[4] )
      CWindowTerminalProduction_UpdateSelection(this);
    ++v3;
    --v4;
  }
  while ( v4 );
  v5 = *(_DWORD *)(this + 7096);
  if ( *(_DWORD *)(v5 + 176) )
  {
    v6 = atoi(*(const char **)(v5 + 176));
    v31 = v6;
  }
  else
  {
    v31 = 0;
    v6 = 0;
  }
  if ( v6 != *(_DWORD *)(this + 7108) )
  {
    v7 = CWindowTerminalProduction_CalcMaxCraftCount(this);
    if ( v6 > v7 )
    {
      v26 = 0;
      v25 = 0;
      v30 = v24;
      String_FromU32(v24, v7);
      v8 = FormatString((int)v29, (int)&unk_659C45C8);
      v33 = 0;
      v9 = (char *)std::string::c_str(v8);
      UiText_SetValueIfChanged(*(_DWORD *)(this + 7096), v9, v25, v26);
      v33 = -1;
      std::string::~string(v29);
    }
    CWindowTerminalProduction_UpdateSelection(this);
  }
  v10 = 1;
  v11 = 0;
  v32 = 1;
  v12 = (_WORD *)(this + 7202);
  do
  {
    if ( (unsigned __int16)(LOWORD(v28[0]) - 1) <= 0xBBFu )
    {
      v13 = v28[v11 + 6];
      if ( v13 )
      {
        if ( v13 >= 0xBC1u )
          goto LABEL_22;
        if ( *(v12 - 1) != v13 )
        {
          v10 = 0;
          goto LABEL_30;
        }
        if ( (unsigned __int16)(*v12 * v12[19]) >= v31 * HIWORD(v28[v11 + 6]) )
        {
LABEL_22:
          v10 = v32;
        }
        else
        {
          v10 = 0;
          v32 = 0;
        }
      }
    }
    ++v11;
    v12 += 22;
  }
  while ( v11 < 5 );
  if ( v10 )
  {
    v14 = this + 7426;
    v15 = 4;
    do
    {
      v16 = *(_DWORD *)(v14 + 34);
      if ( (_WORD)v16 && (unsigned __int16)(v16 * *(_WORD *)v14) < v31 )
        v10 = 0;
      v14 += 44;
      --v15;
    }
    while ( v15 );
  }
LABEL_30:
  v17 = *(_DWORD *)(this + 7120);
  if ( *(_DWORD *)(v17 + 176) )
    v18 = atoi(*(const char **)(v17 + 176));
  else
    v18 = 0;
  if ( !v10 )
    goto LABEL_40;
  for ( i = 0; i < 0x35; v27[2 * i++ + 1] = 0 )
    v27[2 * i] = 0;
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 1, v27);
  if ( v27[8] < v18 || (*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 16) )
LABEL_40:
    *(_DWORD *)(*(_DWORD *)(this + 7128) + 32) = 0;
  else
    *(_DWORD *)(*(_DWORD *)(this + 7128) + 32) = 1;
  *(_DWORD *)(*(_DWORD *)(this + 7600) + 32) = *(float *)(this + 7604) <= ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient)
                                            && !(*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(
                                                  g_LTClient,
                                                  16);
  CachedWindowById = CWindowMgr_GetCachedWindowById((_DWORD *)dword_65ABF708, *(_DWORD *)(this + 4));
  if ( CachedWindowById )
  {
    v21 = *(_DWORD *)(this + 7596);
    if ( *(_DWORD *)(v21 + 36) )
      *(_DWORD *)(v21 + 92) = CachedWindowById;
    v22 = dword_65ABF708;
    *(_DWORD *)(dword_65ABF708 + 808) = -1;
    *(_DWORD *)(v22 + 812) = 0;
  }
  return CWindow_UpdateChildren((char *)this, a2);
}
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65861D10) --------------------------------------------------------
int __thiscall CWindowTerminalProduction_ResetUI(int *this)
{
  int *v1; // edi
  int v2; // ecx
  _DWORD *v3; // esi
  _DWORD *v4; // esi
  int *v5; // esi
  int v6; // eax
  _DWORD *v7; // esi
  unsigned __int16 v8; // cx
  __int16 v9; // dx
  int v10; // eax
  _DWORD *v11; // esi
  int *v12; // esi
  int v13; // eax
  bool v14; // cc
  char *v15; // edi
  int *v16; // esi
  int v17; // eax
  char *v18; // eax
  int v19; // eax
  char *v20; // eax
  int v21; // eax
  char *v22; // eax
  int v24[12]; // [esp-30h] [ebp-D8h] BYREF
  char v25[16]; // [esp+Ch] [ebp-9Ch] BYREF
  unsigned __int8 v26; // [esp+1Ch] [ebp-8Ch]
  _WORD v27[10]; // [esp+24h] [ebp-84h]
  char v28; // [esp+38h] [ebp-70h] BYREF
  int *v29; // [esp+68h] [ebp-40h]
  int v30; // [esp+6Ch] [ebp-3Ch]
  int i; // [esp+70h] [ebp-38h]
  _DWORD v32[12]; // [esp+74h] [ebp-34h] BYREF

  v24[11] = 0;
  v1 = this;
  v2 = *(this + 1773);
  v29 = v1;
  UiText_SetValueIfChanged(v2, "0 UC", 0, 0);
  UiText_SetValueIfChanged(v1[1774], "0", 0, 0);
  UiText_SetValueIfChanged(v1[1778], "0 UC", 0, 0);
  UiText_SetValueIfChanged(v1[1775], "0", 0, 0);
  UiText_SetValueIfChanged(v1[1776], "0 UC", 0, 0);
  UiText_SetValueIfChanged(v1[1779], "0 UC", 0, 0);
  UiText_SetValueIfChanged(v1[1780], "0 UC", 0, 0);
  UiText_SetValueIfChanged(v1[1781], (char *)byte_659A8B98, 0, 0);
  UiItemSlot_SetItem(v1[1729], 0);
  v3 = v1 + 1735;
  i = 5;
  do
  {
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*(v3 - 5) + 88))(*(v3 - 5), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*v3 + 88))(*v3, 0);
    ++v3;
    --i;
  }
  while ( i );
  v4 = v1 + 1744;
  i = 4;
  do
  {
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*(v4 - 4) + 88))(*(v4 - 4), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*v4 + 88))(*v4, 0);
    ++v4;
    --i;
  }
  while ( i );
  v5 = v1 + 1753;
  i = 4;
  do
  {
    UiText_SetValueIfChanged(*(v5 - 4), (char *)byte_659A8B98, 0, 0);
    UiText_SetValueIfChanged(*v5, (char *)byte_659A8B98, 0, 0);
    UiText_SetValueIfChanged(v5[4], (char *)byte_659A8B98, 0, 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*(v5 - 4) + 88))(*(v5 - 4), 0);
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)*v5 + 88))(*v5, 0);
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5[4] + 88))(v5[4], 0);
    (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v5[8] + 88))(v5[8], 0);
    ++v5;
    --i;
  }
  while ( i );
  v1[1765] = 0;
  v1[1769] = 0;
  v1[1766] = 0;
  v1[1770] = 0;
  v1[1767] = 0;
  v1[1771] = 0;
  v1[1768] = 0;
  v1[1772] = 0;
  v32[1] = 0;
  BYTE2(v32[7]) = 0;
  LOWORD(v32[7]) = 0;
  *(_DWORD *)((char *)&v32[7] + 3) = 0;
  if ( v1[1799] )
  {
    qmemcpy(&v32[1], v1 + 1789, 0x20u);
    v1 = v29;
  }
  if ( LOWORD(v32[1]) == 1280 && ItemTemplate_CopyVariantByIndex(HIWORD(v32[1]), BYTE2(v32[7]), v25) )
  {
    v6 = 0;
    v7 = v1 + 1730;
    v30 = 0;
    i = (int)(v1 + 1730);
    do
    {
      v8 = v27[2 * v6];
      if ( v8 && v8 < 0xBC1u )
      {
        (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*v7 + 88))(*v7, 1);
        (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)v7[5] + 88))(v7[5], 1);
        v32[2] = 655360000;
        v9 = v27[2 * v30 + 1];
        LOWORD(v32[1]) = v27[2 * v30];
        HIWORD(v32[1]) = v9;
        LOWORD(v32[3]) = 100;
        memset(&v32[4], 0, 19);
        memset(&v32[9], 0, 9);
        v32[0] = 1;
        qmemcpy(v24, v32, sizeof(v24));
        v7 = (_DWORD *)i;
        UiItemSlot_SetItemAndTooltip(
          *(_DWORD *)i,
          v24[0],
          v24[1],
          v24[2],
          v24[3],
          v24[4],
          v24[5],
          v24[6],
          v24[7],
          v24[8],
          v24[9],
          v24[10],
          v24[11]);
        v10 = *v7;
        v1 = v29;
        *(_DWORD *)(v10 + 168) = 0;
        *(_DWORD *)(v10 + 44) = 1;
        v6 = v30;
      }
      ++v6;
      ++v7;
      v30 = v6;
      i = (int)v7;
    }
    while ( v6 < 5 );
    v30 = 0;
    if ( v26 )
    {
      v11 = v1 + 1740;
      for ( i = (int)(v1 + 1740); ; v11 = (_DWORD *)i )
      {
        (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*v11 + 88))(*v11, 1);
        (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)v11[4] + 88))(v11[4], 1);
        v32[2] = 0x10000;
        v32[1] = 1281;
        LOWORD(v32[3]) = 100;
        memset(&v32[4], 0, 19);
        memset(&v32[9], 0, 9);
        v32[0] = 1;
        qmemcpy(v24, v32, sizeof(v24));
        v12 = (int *)i;
        UiItemSlot_SetItemAndTooltip(
          *(_DWORD *)i,
          v24[0],
          v24[1],
          v24[2],
          v24[3],
          v24[4],
          v24[5],
          v24[6],
          v24[7],
          v24[8],
          v24[9],
          v24[10],
          v24[11]);
        v13 = *v12;
        *(_DWORD *)(v13 + 168) = 0;
        *(_DWORD *)(v13 + 44) = 1;
        v14 = ++v30 < v26;
        i = (int)(v12 + 1);
        if ( !v14 )
          break;
      }
    }
    v15 = &v28;
    v16 = v29 + 1753;
    i = 4;
    do
    {
      if ( *v15 && (unsigned __int8)*v15 < 7u )
      {
        (*(void (__thiscall **)(_DWORD, int))(*(_DWORD *)*(v16 - 4) + 88))(*(v16 - 4), 1);
        v17 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, (unsigned __int8)*v15 + 17300);
        v30 = v17;
        if ( v17 )
          v18 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v17);
        else
          v18 = (char *)byte_659A8B98;
        UiText_SetValueIfChanged(*(v16 - 4), v18, 0, 0);
        if ( v30 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v30);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)*v16 + 88))(*v16, 1);
        v19 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                g_pILTClient,
                (unsigned __int8)v15[1] + 17501);
        v30 = v19;
        if ( v19 )
          v20 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v19);
        else
          v20 = (char *)byte_659A8B98;
        UiText_SetValueIfChanged(*v16, v20, 0, 0);
        if ( v30 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v30);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v16[4] + 88))(v16[4], 1);
        v21 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                g_pILTClient,
                (unsigned __int8)v15[2] + 17501);
        v30 = v21;
        if ( v21 )
          v22 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v21);
        else
          v22 = (char *)byte_659A8B98;
        UiText_SetValueIfChanged(v16[4], v22, 0, 0);
        if ( v30 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v30);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v16[8] + 88))(v16[8], 1);
        RangeBar_SetMinMax((int *)v16[8], (unsigned __int8)v15[4], (unsigned __int8)v15[3]);
        v16[12] = (unsigned __int8)v15[4] + ((unsigned __int8)v15[3] - (unsigned __int8)v15[4]) / 2;
      }
      ++v16;
      v15 += 12;
      --i;
    }
    while ( i );
    v1 = v29;
  }
  return sub_6585F910(v1);
}

//----- (658622F0) --------------------------------------------------------
unsigned int *__thiscall sub_658622F0(int ***this, unsigned int *a2)
{
  int *v3; // edi
  int *v4; // ebx
  int *v6; // [esp+Ch] [ebp-8h] BYREF
  int *v7; // [esp+10h] [ebp-4h] BYREF

  sub_658608D0(this, &v6, a2);
  v3 = v7;
  v4 = v6;
  a2 = 0;
  sub_65861980(v6, v7, &a2);
  RBTree_EraseRange(this, &v7, v4, v3);
  return a2;
}

//----- (658627F0) --------------------------------------------------------
int __thiscall sub_658627F0(int this, unsigned int a2)
{
  if ( sub_658622F0((int ***)(this + 32), &a2) )
    return *(_DWORD *)(this + 40) == 0;
  else
    return -1;
}

//----- (65862900) --------------------------------------------------------
int __thiscall Packet_ID_PRODUCTION_cleanup(_DWORD *this)
{
  void *v2; // eax

  v2 = (void *)*(this + 308);
  if ( v2 )
    operator delete(v2);
  *(this + 308) = 0;
  *(this + 309) = 0;
  *(this + 310) = 0;
  `eh vector destructor iterator'(this + 275, 0xCu, 10, j_LoginUI_SetPassword);
  *this = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 3));
}
// 65985B4A: using guessed type void __stdcall `eh vector destructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *));
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (658629B0) --------------------------------------------------------
void __thiscall CWindowTerminalProduction_DtorInternal(void **this)
{
  int v2; // eax

  *this = &CWindowTerminalProduction_vtbl;
  v2 = (int)*(this + 1748);
  if ( v2 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v2) )
    *(this + 1748) = 0;
  `eh vector destructor iterator'(this + 1789, 0x2Cu, 10, (void (__thiscall *)(void *))ItemMapContainer_Clear);
  GroupWindow_Dtor(this);
}
// 65985B4A: using guessed type void __stdcall `eh vector destructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *));
// 659CD69C: using guessed type int (__thiscall *CWindowTerminalProduction_vtbl)(void *, char);

//----- (65863130) --------------------------------------------------------
void **__thiscall CWindowTerminalProduction_dtor(void **this, char a2)
{
  CWindowTerminalProduction_DtorInternal(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (65863160) --------------------------------------------------------
void __thiscall CWindowTerminalProduction_PopulateItemList(_DWORD *this)
{
  _DWORD *v1; // esi
  int v2; // ebx
  void *v3; // edi
  unsigned __int16 v4; // ax
  unsigned int j; // esi
  const char *v6; // eax
  char *v7; // [esp+10h] [ebp-24h] BYREF
  void *v8; // [esp+14h] [ebp-20h]
  int v9; // [esp+18h] [ebp-1Ch]
  int v10; // [esp+1Ch] [ebp-18h]
  _DWORD *v11; // [esp+20h] [ebp-14h]
  int i; // [esp+24h] [ebp-10h]
  int v13; // [esp+30h] [ebp-4h]

  v1 = this;
  v11 = this;
  PtrVector_FreeAll_thunk((_DWORD *)*(this + 1783));
  v2 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v3 = v11;
  v4 = 0;
  v13 = 0;
  for ( i = 0; ; v4 = i )
  {
    if ( (unsigned __int16)(v4 - 1) > 0xBBFu )
    {
      v3 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1032);
      UiList_AddEntry((int **)v1[1783], v3, 11, v2, 0);
    }
    else
    {
      if ( ItemTemplate_GetType(g_ItemTemplateById, v4) != 17 || !ItemVariantList_CopyByItemId(i, &v7) )
        goto LABEL_15;
      for ( j = 0; j < (v9 - (int)v8) / 92; ++j )
      {
        v3 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v2 + 30000);
        UiList_AddEntry((int **)v11[1783], v3, 11, v2, j);
      }
      v1 = v11;
    }
    if ( v1[1787] == v2 )
    {
      if ( v3 )
        v6 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
      else
        v6 = byte_659A8B98;
      UiList_SetSelectionText(v1[1783], (int)v6, 1);
    }
LABEL_15:
    ++v2;
    if ( (unsigned __int16)++i >= 0xBC1u )
      break;
  }
  if ( v8 )
    operator delete(v8);
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65863320) --------------------------------------------------------
char *__thiscall Packet_ID_PRODUCTION_ctor(char *this)
{
  _DWORD v3[4]; // [esp+Ch] [ebp-10h] BYREF

  v3[0] = this;
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -101;
  v3[3] = 0;
  *(_DWORD *)this = &Packet_ID_PRODUCTION_vtbl;
  `eh vector constructor iterator'(
    this + 1100,
    0xCu,
    10,
    (void (__thiscall *)(void *))LoginPacket_InitPasswordPtr,
    j_LoginUI_SetPassword);
  *((_DWORD *)this + 308) = 0;
  *((_DWORD *)this + 309) = 0;
  *((_DWORD *)this + 310) = 0;
  sub_65862850(v3, 0, 0);
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *(this + 1225) = 0;
  *((_DWORD *)this + 274) = 0;
  *((_DWORD *)this + 305) = 0;
  *(this + 1224) = 0;
  *(this + 1077) = 0;
  *((_DWORD *)this + 270) = 0;
  *((_DWORD *)this + 271) = 0;
  *((_DWORD *)this + 272) = 0;
  *((_DWORD *)this + 273) = 0;
  return this;
}
// 65862850: using guessed type int __stdcall sub_65862850(_DWORD, _DWORD, _DWORD);
// 65985BAD: using guessed type void __stdcall `eh vector constructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *), void (__thiscall *)(void *));
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CD710: using guessed type int (__thiscall *Packet_ID_PRODUCTION_vtbl)(void *, char);

//----- (65863510) --------------------------------------------------------
_DWORD *__thiscall sub_65863510(_DWORD *this)
{
  *(this + 3) = 0;
  *((_WORD *)this + 8) = 0;
  *((_WORD *)this + 10) = 0;
  *((_WORD *)this + 9) = 0;
  *((_WORD *)this + 11) = 0;
  *((_BYTE *)this + 25) = 0;
  *(this + 7) = 0;
  *(this + 8) = 0;
  *(this + 9) = 0;
  *((_BYTE *)this + 41) = 0;
  *((_BYTE *)this + 42) = 0;
  *((_BYTE *)this + 40) = 0;
  *((_BYTE *)this + 24) = 100;
  *(_DWORD *)((char *)this + 43) = 0;
  *(this + 12) = 0;
  *(this + 13) = 0;
  *((_BYTE *)this + 56) = 0;
  unknown_libname_664(this + 15);
  *this = 0;
  *((_BYTE *)this + 4) = 0;
  *(this + 2) = 0;
  return this;
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);

//----- (65863700) --------------------------------------------------------
char *__usercall sub_65863700@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x40u);
      --v4;
      result += 64;
    }
    while ( v4 );
  }
  return result;
}

//----- (65863860) --------------------------------------------------------
unsigned int __thiscall sub_65863860(int this, int a2, unsigned int a3, const void *a4)
{
  int v5; // esi
  unsigned int v6; // edi
  unsigned int result; // eax
  int v8; // edx
  int v9; // ecx
  unsigned int v10; // ecx
  unsigned int v11; // edi
  void *v12; // eax
  int v13; // ecx
  int v14; // eax
  int v15; // eax
  int v16; // ecx
  int v17; // eax
  unsigned int v18; // esi
  char *v19; // esi
  unsigned int v20; // esi
  int v21; // eax
  unsigned int v22; // edi
  int v23; // esi
  int v24; // eax
  int v25; // [esp-4h] [ebp-74h]
  int v26; // [esp+0h] [ebp-70h] BYREF
  void *v27; // [esp+10h] [ebp-60h]
  const void *v28; // [esp+14h] [ebp-5Ch]
  int v29; // [esp+18h] [ebp-58h]
  _BYTE v30[64]; // [esp+1Ch] [ebp-54h] BYREF
  int *v31; // [esp+60h] [ebp-10h]
  int v32; // [esp+6Ch] [ebp-4h]

  v31 = &v26;
  v5 = *(_DWORD *)(this + 4);
  v28 = a4;
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 6;
  else
    v6 = 0;
  result = a3;
  if ( a3 )
  {
    v8 = *(_DWORD *)(this + 8);
    v9 = (v8 - v5) >> 6;
    v29 = *(_DWORD *)(this + 8);
    if ( 0x3FFFFFF - v9 < a3 )
      result = sub_65860420();
    v10 = result + v9;
    if ( v6 >= v10 )
    {
      qmemcpy(v30, v28, sizeof(v30));
      if ( (v8 - a2) >> 6 >= result )
      {
        v22 = result << 6;
        v23 = v8 - (result << 6);
        v24 = sub_65863830(this, v23, v8, v8);
        v25 = v29;
        *(_DWORD *)(this + 8) = v24;
        sub_658636D0(a2, v23, v25);
        return sub_658635A0(a2, a2 + v22, v30);
      }
      else
      {
        v20 = result << 6;
        sub_65863830(this, a2, v8, (result << 6) + a2);
        v21 = *(_DWORD *)(this + 8);
        v32 = 2;
        sub_658637C0(this, v21, a3 - ((v21 - a2) >> 6), v30);
        *(_DWORD *)(this + 8) += v20;
        return sub_658635A0(a2, *(_DWORD *)(this + 8) - v20, v30);
      }
    }
    else
    {
      if ( 0x3FFFFFF - (v6 >> 1) >= v6 )
        v11 = (v6 >> 1) + v6;
      else
        v11 = 0;
      if ( v11 < v10 )
        v11 = v10;
      v12 = (void *)sub_65860500(v11, 0, v26);
      v13 = *(_DWORD *)(this + 4);
      LOBYTE(v29) = 0;
      v27 = v12;
      v32 = 0;
      v14 = sub_65863620(v13, a2, v12, this, v29, v29);
      v15 = sub_658637C0(this, v14, a3, v28);
      v16 = *(_DWORD *)(this + 8);
      LOBYTE(v29) = 0;
      sub_65863620(a2, v16, v15, this, v29, v29);
      v17 = *(_DWORD *)(this + 4);
      v18 = ((*(_DWORD *)(this + 8) - v17) >> 6) + a3;
      if ( v17 )
        operator delete(*(void **)(this + 4));
      result = (unsigned int)v27;
      v19 = (char *)v27 + 64 * v18;
      *(_DWORD *)(this + 12) = (char *)v27 + 64 * v11;
      *(_DWORD *)(this + 8) = v19;
      *(_DWORD *)(this + 4) = result;
    }
  }
  return result;
}
// 658638D1: variable 'v9' is possibly undefined
// 658639A3: variable 'v8' is possibly undefined
// 65860420: using guessed type int sub_65860420(void);
// 65860500: using guessed type int __stdcall sub_65860500(_DWORD, _DWORD, _DWORD);
// 658635A0: using guessed type int __cdecl sub_658635A0(_DWORD, _DWORD, _DWORD);
// 65863620: using guessed type int __cdecl sub_65863620(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 658636D0: using guessed type int __cdecl sub_658636D0(_DWORD, _DWORD, _DWORD);
// 658637C0: using guessed type int __thiscall sub_658637C0(_DWORD, _DWORD, _DWORD, _DWORD);
// 65863830: using guessed type int __thiscall sub_65863830(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65863A60) --------------------------------------------------------
_DWORD *__thiscall Packet_ID_PRODUCTION_dtor(_DWORD *this, char a2)
{
  Packet_ID_PRODUCTION_cleanup(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (65863B50) --------------------------------------------------------
int __thiscall CWindowTerminalProduction_InitUI(unsigned int *this)
{
  _DWORD *v2; // eax
  int v3; // eax
  int v4; // edi
  char **v5; // ebx
  char *Scrollbar; // eax
  int v7; // edi
  char **v8; // ebx
  char *v9; // eax
  char *Container; // eax
  int v11; // edi
  const char *v12; // eax
  int *Min; // eax
  int *v14; // eax
  int *v15; // eax
  int *v16; // eax
  int v17; // edi
  const char *v18; // eax
  int v19; // edi
  const char *v20; // eax
  _DWORD *Full; // eax
  int v22; // edi
  const char *v23; // eax
  _DWORD *v24; // eax
  int v25; // edi
  const char *v26; // eax
  int v27; // edi
  const char *v28; // eax
  int v29; // edi
  const char *v30; // eax
  int v31; // edi
  const char *v32; // eax
  int v33; // edi
  const char *v34; // eax
  _DWORD *v35; // eax
  int v36; // edi
  const char *v37; // eax
  _DWORD *Base; // eax
  int *Extended; // eax
  int v40; // edi
  char v42; // [esp-8h] [ebp-78h]
  char v43; // [esp-8h] [ebp-78h]
  int *v44; // [esp+0h] [ebp-70h]
  int v45[4]; // [esp+18h] [ebp-58h] BYREF
  int v46[2]; // [esp+28h] [ebp-48h] BYREF
  int *v47; // [esp+30h] [ebp-40h] BYREF
  char v48[32]; // [esp+34h] [ebp-3Ch] BYREF
  int **v49; // [esp+54h] [ebp-1Ch] BYREF
  void *v50; // [esp+58h] [ebp-18h]
  int v51; // [esp+6Ch] [ebp-4h]

  v2 = UiWidget_CreateWithStyle(this, 5, 10, 5, 256);
  *(this + 1725) = (unsigned int)v2;
  v2[8] = 1;
  v3 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)*(this + 1725) + 16))(*(this + 1725));
  *(this + 1726) = (unsigned int)UiWidget_CreateWithStyle(this, 6, v3 + 11, 5, 257);
  UiWidget_CreateScrollbar(this, 9, 18, 742, 405, 0.5, 0);
  WindowMgr_CreateGroup(this, (void *)3);
  WindowMgr_CreateGroup(this, (void *)0x1B);
  WindowMgr_SelectGroup((int *)this, 3);
  UiWidget_CreateScrollbar(this, 75, 28, 610, 168, 0.5, 0);
  ItemsAddedEntry_Init(v48);
  v51 = 0;
  UiWidget_CreateScrollbar(this, 18, 28, 48, 48, 0.5, 0);
  v47 = 0;
  *(this + 1728) = (unsigned int)UiWidget_CreateContainer(this, 0, 0, 0, 18, 28, v48, 36, 14, 48, 48);
  v4 = 137;
  v5 = (char **)(this + 1730);
  do
  {
    Scrollbar = (char *)UiWidget_CreateScrollbar(this, v4, 52, 48, 48, 0.5, 0);
    v42 = (_BYTE)v47 + 37;
    v5[5] = Scrollbar;
    v47 = (int *)((char *)v47 + 1);
    *v5 = UiWidget_CreateContainer(this, 0, 0, 0, v4, 52, v48, v42, 14, 48, 48);
    v4 += 110;
    ++v5;
  }
  while ( v4 < 687 );
  v47 = 0;
  v7 = 162;
  v8 = (char **)(this + 1740);
  do
  {
    v9 = (char *)UiWidget_CreateScrollbar(this, v7, 124, 48, 48, 0.5, 0);
    v43 = (_BYTE)v47 + 42;
    v8[4] = v9;
    v47 = (int *)((char *)v47 + 1);
    *v8 = UiWidget_CreateContainer(this, 0, 0, 0, v7, 124, v48, v43, 14, 48, 48);
    v7 += 135;
    ++v8;
  }
  while ( v7 < 702 );
  UiWidget_CreateScrollbar(this, 694, 148, 48, 48, 0.5, 0);
  Container = UiWidget_CreateContainer(this, 0, 0, 0, 694, 148, v48, 0, 14, 48, 48);
  *(this + 1729) = (unsigned int)Container;
  *((_DWORD *)Container + 42) = 0;
  *((_DWORD *)Container + 11) = 0;
  UiWidget_CreateScrollbar(this, 18, 209, 450, 172, 0.5, 0);
  v11 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 760);
  if ( v11 )
    v12 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v11);
  else
    v12 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v12, 32, 450, 0, 0, 1, 18, 221, (int)&unk_65A5D8E8, 2, 0, 0, 0, 1);
  if ( v11 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v11);
  Min = UiWidget_CreateMin(this, (int)(this + 1765), 160, 55, 274);
  *(this + 1761) = (unsigned int)Min;
  RangeBar_SetMinMax(Min, -10, 10);
  *(this + 1749) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   32,
                                   160,
                                   10,
                                   0,
                                   1,
                                   55,
                                   258,
                                   (int)&unk_65A5D294,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  *(this + 1753) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   24,
                                   60,
                                   20,
                                   1,
                                   0,
                                   55,
                                   286,
                                   (int)&unk_65A5D294,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  *(this + 1757) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   24,
                                   60,
                                   20,
                                   1,
                                   0,
                                   159,
                                   286,
                                   (int)&unk_65A5D294,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  v14 = UiWidget_CreateMin(this, (int)(this + 1766), 160, 275, 274);
  *(this + 1762) = (unsigned int)v14;
  RangeBar_SetMinMax(v14, -10, 10);
  *(this + 1750) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   32,
                                   160,
                                   10,
                                   0,
                                   1,
                                   275,
                                   258,
                                   (int)&unk_65A5D294,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  *(this + 1754) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   24,
                                   60,
                                   20,
                                   1,
                                   0,
                                   275,
                                   286,
                                   (int)&unk_65A5D294,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  *(this + 1758) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   24,
                                   60,
                                   20,
                                   1,
                                   0,
                                   379,
                                   286,
                                   (int)&unk_65A5D294,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  v15 = UiWidget_CreateMin(this, (int)(this + 1767), 160, 55, 339);
  *(this + 1763) = (unsigned int)v15;
  RangeBar_SetMinMax(v15, -10, 10);
  *(this + 1751) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   32,
                                   160,
                                   10,
                                   0,
                                   1,
                                   55,
                                   323,
                                   (int)&unk_65A5D294,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  *(this + 1755) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   24,
                                   60,
                                   20,
                                   1,
                                   0,
                                   55,
                                   351,
                                   (int)&unk_65A5D294,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  *(this + 1759) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   24,
                                   60,
                                   20,
                                   1,
                                   0,
                                   159,
                                   351,
                                   (int)&unk_65A5D294,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  v16 = UiWidget_CreateMin(this, (int)(this + 1768), 160, 275, 339);
  *(this + 1764) = (unsigned int)v16;
  RangeBar_SetMinMax(v16, -10, 10);
  *(this + 1752) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   32,
                                   160,
                                   10,
                                   0,
                                   1,
                                   275,
                                   323,
                                   (int)&unk_65A5D294,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  *(this + 1756) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   24,
                                   60,
                                   20,
                                   1,
                                   0,
                                   275,
                                   351,
                                   (int)&unk_65A5D294,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  *(this + 1760) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   24,
                                   60,
                                   20,
                                   1,
                                   0,
                                   379,
                                   351,
                                   (int)&unk_65A5D294,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  v17 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 754);
  if ( v17 )
    v18 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v17);
  else
    v18 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v18, 16, 50, 0, 0, 1, 478, 215, (int)&unk_65A5D738, 2, 0, 0, 0, 1);
  if ( v17 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v17);
  UiWidget_CreateScrollbar(this, 638, 213, 104, 16, 0.5, 0);
  *(this + 1773) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   12,
                                   98,
                                   0,
                                   0,
                                   1,
                                   640,
                                   215,
                                   (int)&unk_65A5C6C4,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  v19 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 755);
  if ( v19 )
    v20 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v19);
  else
    v20 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v20, 16, 50, 0, 0, 1, 478, 237, (int)&unk_65A5D738, 2, 0, 0, 0, 1);
  if ( v19 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v19);
  UiWidget_CreateScrollbar(this, 638, 235, 104, 16, 0.5, 0);
  Full = UiWidget_CreateFull(this, 7, (int)byte_659A8B98, 12, 98, 0, 1, 1, 640, 237, (int)&unk_65A5C6C4, 2, 1, 0, 0, 1);
  *(this + 1774) = (unsigned int)Full;
  Full[117] = 3;
  v22 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1030);
  if ( v22 )
    v23 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v22);
  else
    v23 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v23, 32, 50, 0, 0, 1, 478, 259, (int)&unk_65A5D738, 2, 0, 0, 0, 1);
  if ( v22 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v22);
  UiWidget_CreateScrollbar(this, 638, 257, 104, 16, 0.5, 0);
  v24 = UiWidget_CreateFull(this, 0, (int)byte_659A8B98, 16, 98, 0, 0, 1, 640, 259, (int)&unk_65A5C6C4, 2, 0, 0, 0, 1);
  *(this + 1776) = (unsigned int)v24;
  v24[117] = 3;
  v25 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 886);
  if ( v25 )
    v26 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v25);
  else
    v26 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v26, 16, 50, 0, 0, 1, 478, 281, (int)&unk_65A5D738, 2, 0, 0, 0, 1);
  if ( v25 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v25);
  UiWidget_CreateScrollbar(this, 638, 279, 104, 16, 0.5, 0);
  *(this + 1775) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   12,
                                   98,
                                   0,
                                   0,
                                   1,
                                   640,
                                   281,
                                   (int)&unk_65A5C6C4,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  v27 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 756);
  if ( v27 )
    v28 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v27);
  else
    v28 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v28, 16, 50, 0, 0, 1, 478, 303, (int)&unk_65A5D738, 2, 0, 0, 0, 1);
  if ( v27 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v27);
  UiWidget_CreateScrollbar(this, 638, 301, 104, 16, 0.5, 0);
  *(this + 1778) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   12,
                                   98,
                                   0,
                                   0,
                                   1,
                                   640,
                                   303,
                                   (int)&unk_65A5C6C4,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  v29 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 757);
  if ( v29 )
    v30 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v29);
  else
    v30 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v30, 16, 50, 0, 0, 1, 478, 325, (int)&unk_65A5D738, 2, 0, 0, 0, 1);
  if ( v29 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v29);
  UiWidget_CreateScrollbar(this, 638, 323, 104, 16, 0.5, 0);
  *(this + 1779) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   12,
                                   98,
                                   0,
                                   0,
                                   1,
                                   640,
                                   325,
                                   (int)&unk_65A5C6C4,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  v31 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 758);
  if ( v31 )
    v32 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v31);
  else
    v32 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v32, 16, 50, 0, 0, 1, 478, 347, (int)&unk_65A5D738, 2, 0, 0, 0, 1);
  if ( v31 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v31);
  UiWidget_CreateScrollbar(this, 638, 345, 104, 16, 0.5, 0);
  *(this + 1780) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   12,
                                   98,
                                   0,
                                   0,
                                   1,
                                   640,
                                   347,
                                   (int)&unk_65A5C6C4,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  v33 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 759);
  if ( v33 )
    v34 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v33);
  else
    v34 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v34, 16, 50, 0, 0, 1, 478, 369, (int)&unk_65A5D738, 2, 0, 0, 0, 1);
  if ( v33 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v33);
  UiWidget_CreateScrollbar(this, 638, 367, 104, 16, 0.5, 0);
  *(this + 1781) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)byte_659A8B98,
                                   34,
                                   98,
                                   0,
                                   0,
                                   1,
                                   640,
                                   369,
                                   (int)&unk_65A5C6C4,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  v35 = UiWidget_CreateWithInput(this, 8, 550, 393, 35, 0);
  *(this + 1782) = (unsigned int)v35;
  v35[8] = 0;
  *(this + 1783) = (unsigned int)UiWidget_CreateWithInput(this, 10, 18, 393, 0, 2);
  CWindowTerminalProduction_PopulateItemList(this);
  v36 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1031);
  if ( v36 )
    v37 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v36);
  else
    v37 = byte_659A8B98;
  *(this + 1784) = (unsigned int)UiWidget_CreateFull(
                                   this,
                                   0,
                                   (int)v37,
                                   32,
                                   50,
                                   0,
                                   0,
                                   1,
                                   340,
                                   393,
                                   (int)&unk_65A5D738,
                                   2,
                                   0,
                                   0,
                                   0,
                                   1);
  if ( v36 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v36);
  Base = UiWidget_CreateBase(this, (unsigned int)(this + 1786), 1, 450, 392, 0);
  *(this + 1785) = (unsigned int)Base;
  Base[14] = 12;
  Base[52] = this;
  WindowMgr_SelectGroup((int *)this, 27);
  UiWidget_CreateScrollbar(this, 18, 33, 704, 360, 0.5, 0);
  v46[1] = 360;
  v45[0] = 0;
  v45[1] = 359;
  v45[2] = 20;
  v45[3] = -2;
  v46[0] = 724;
  Extended = UiWidget_CreateExtended(this, 0, v46, 18, 33, v45, 0x3Cu);
  *(this + 1899) = (unsigned int)Extended;
  Scrollbar_AddCallbackEntry(Extended, 4, 3, 54);
  Scrollbar_AddCallbackEntry((_DWORD *)*(this + 1899), 1, 55, 310);
  *(this + 1900) = (unsigned int)UiWidget_CreateWithInput(this, 9, 670, 402, 32, 0);
  v40 = GroupWindow_Initialize((int)this);
  CWindowTerminalProduction_ResetUI((int *)this);
  WindowMgr_SelectGroup((int *)this, 3);
  v44 = *(int **)v50;
  v51 = -1;
  RBTree_EraseRange(&v49, &v47, v44, (int *)v50);
  operator delete(v50);
  return v40;
}

//----- (658648E0) --------------------------------------------------------
_DWORD *__thiscall Packet_ID_PRODUCTION_read_entries(char **this, unsigned int *a2)
{
  _DWORD *result; // eax
  int v4; // ecx
  unsigned int v5; // eax
  char *v6; // esi
  char v7[4]; // [esp+Ch] [ebp-58h] BYREF
  char v8[4]; // [esp+10h] [ebp-54h] BYREF
  char *v9; // [esp+14h] [ebp-50h]
  unsigned int v10; // [esp+18h] [ebp-4Ch]
  unsigned int v11; // [esp+1Ch] [ebp-48h] BYREF
  char v12[4]; // [esp+20h] [ebp-44h] BYREF
  char v13[4]; // [esp+24h] [ebp-40h] BYREF
  char v14[4]; // [esp+28h] [ebp-3Ch] BYREF
  char v15[48]; // [esp+2Ch] [ebp-38h] BYREF

  v11 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v11);
  result = sub_65863510(v12);
  v10 = 0;
  if ( v11 )
  {
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v8, 0x20u, 1) )
          ByteSwapCopy((int)v8, (int)v12, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, v12, 0x20u, 1);
      }
      RakNet::BitStream::ReadCompressed(a2, v13, 8u, 1);
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(a2, v7, 0x20u, 1) )
          ByteSwapCopy((int)v7, (int)v14, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(a2, v14, 0x20u, 1);
      }
      ItemEntryWithId_Read(v15, a2);
      sub_65946F10();
      v4 = (int)*(this + 1);
      if ( v4 )
        v5 = (int)&(*(this + 3))[-v4] >> 6;
      else
        v5 = 0;
      v6 = *(this + 2);
      if ( (int)&v6[-v4] >> 6 >= v5 )
      {
        sub_65863860((int)this, (int)v6, 1u, v12);
      }
      else
      {
        LOBYTE(v9) = 0;
        sub_65863700(v9, v6, 1, v12);
        *(this + 2) = v6 + 64;
      }
      result = (_DWORD *)(v10 + 1);
      v10 = (unsigned int)result;
    }
    while ( (unsigned int)result < v11 );
  }
  return result;
}

//----- (65864A30) --------------------------------------------------------
char __thiscall Packet_ID_PRODUCTION_read(int this, int a2)
{
  char result; // al
  unsigned int *v4; // edi
  char v5; // bl
  char *v6; // ebx
  int *v7; // esi
  int v8; // ebx
  int v9; // [esp+Ch] [ebp+8h]

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    v4 = (unsigned int *)(this + 12);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    v5 = *(_BYTE *)(this + 1076);
    if ( v5 )
    {
      if ( v5 == 2 )
        Packet_ID_PRODUCTION_read_entries((char **)(this + 1228), (unsigned int *)(this + 12));
      return 1;
    }
    else
    {
      VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1077));
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1220));
      RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1224), 8u, 1);
      RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1096));
      VariableSizedPacket::ReadBit((unsigned int *)this, (bool *)(this + 1225));
      v6 = (char *)(this + 1080);
      v9 = 4;
      do
      {
        Read_u32c_alt((unsigned int *)(this + 12), v6);
        v6 += 4;
        --v9;
      }
      while ( v9 );
      v7 = (int *)(this + 1100);
      v8 = 10;
      do
      {
        Read_u32c_list_u16count(v7, v4);
        v7 += 3;
        --v8;
      }
      while ( v8 );
      return 1;
    }
  }
  return result;
}

//----- (65864B30) --------------------------------------------------------
void __thiscall sub_65864B30(int this)
{
  int v1; // esi
  bool v2; // zf
  unsigned int v3; // ebx
  char Dword_this; // al
  int v5; // eax
  int WindowById; // eax
  unsigned __int16 v7; // ax
  int *v8; // edi
  unsigned __int16 v9; // ax
  int v10; // esi
  int ***v11; // esi
  int v12; // eax
  char v13[92]; // [esp+10h] [ebp-C8h] BYREF
  _DWORD v14[9]; // [esp+6Ch] [ebp-6Ch] BYREF
  int v15; // [esp+90h] [ebp-48h]
  int v16; // [esp+94h] [ebp-44h]
  int v17; // [esp+98h] [ebp-40h]
  int **v18[11]; // [esp+9Ch] [ebp-3Ch] BYREF
  int v19; // [esp+D4h] [ebp-4h]

  v1 = this;
  v2 = *(_BYTE *)(this + 7144) == 0;
  v16 = this;
  if ( v2 )
    return;
  v3 = 0;
  if ( !*(_WORD *)(this + 7196) )
    return;
  v17 = 0;
  Dword_this = SharedMem_ReadDword_this(dword_65ABF73C, 0);
  if ( Production_IsValidTypeCombo(Dword_this, 3, 0) )
  {
    v5 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
LABEL_7:
    v17 = v5;
    goto LABEL_8;
  }
  WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
  if ( WindowById )
  {
    v5 = WindowById + 6440;
    goto LABEL_7;
  }
LABEL_8:
  v7 = *(_WORD *)(v1 + 7158);
  if ( v7 )
  {
    if ( v7 < 0xBC1u )
    {
      LOBYTE(v15) = *(_BYTE *)(v1 + 7182);
      if ( ItemTemplate_CopyVariantByIndex(v7, v15, v13) )
      {
        sub_65732490(v14);
        v19 = 0;
        v8 = (int *)(v1 + 6920);
        do
        {
          v9 = *(_WORD *)&v13[4 * v3 + 24];
          if ( v9 && v9 < 0xBC1u )
          {
            v10 = 44 * (unsigned __int8)(v3 + 37) + v1;
            if ( *(_WORD *)(v10 + 5612) )
            {
              sub_6593FC80(v17, v10 + 5572, 0);
              ItemStructA_Clear((char *)(v10 + 5572));
            }
            sub_6593EE50(v14);
            if ( (unsigned __int8)sub_65940BE0(v17, *(unsigned __int16 *)&v13[4 * v3 + 24], v14) )
            {
              ItemsAddedEntry_Init((char *)v18);
              LOBYTE(v19) = 1;
              sub_6593E080(v14, v18);
              v11 = (int ***)(v10 + 5572);
              ItemData_Copy(v11, (char *)v18);
              sub_65765A40(*v8, v11);
              v12 = *v8;
              *(_DWORD *)(v12 + 168) = 0;
              *(_DWORD *)(v12 + 44) = 0;
              *(float *)(*v8 + 320) = 1.0;
              sub_6593F3A0(v17, v18, 0);
              LOBYTE(v19) = 0;
              ItemMapContainer_Clear(v18);
            }
            v1 = v16;
          }
          ++v3;
          ++v8;
        }
        while ( v3 < 5 );
        CWindowTerminalProduction_UpdateSelection(v1);
        v19 = -1;
        sub_657324B0(v14);
      }
    }
  }
}
// 65732490: using guessed type int __thiscall sub_65732490(_DWORD);
// 657324B0: using guessed type int __thiscall sub_657324B0(_DWORD);
// 6593E080: using guessed type int __thiscall sub_6593E080(_DWORD, _DWORD);
// 6593F3A0: using guessed type int __thiscall sub_6593F3A0(_DWORD, _DWORD, _DWORD);
// 65940BE0: using guessed type int __thiscall sub_65940BE0(_DWORD, _DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65864D40) --------------------------------------------------------
void __thiscall HandlePacket_ID_6B_SubId44_InventoryUiRefresh(char *invState)
{
  char *v1; // edi
  int (__thiscall *v2)(int, _DWORD); // edx
  char Dword_this; // al
  int ****v4; // eax
  int WindowById; // eax
  unsigned __int16 v6; // ax
  char v7; // al
  int v8; // esi
  unsigned __int8 v9; // al
  int v10; // edi
  unsigned int v11; // edi
  int v12; // eax
  unsigned __int16 v13; // cx
  unsigned __int16 v14; // ax
  int v15; // edi
  __int16 v16; // ax
  char *v17; // edi
  int v18; // esi
  int v19; // eax
  int *v20; // ecx
  unsigned int v21; // edi
  int v22; // eax
  unsigned __int16 v23; // cx
  int *v24; // edi
  int v25; // ecx
  int *v26; // esi
  int v27; // eax
  bool v28; // cc
  int v29; // esi
  unsigned __int8 v30; // al
  int v31; // ecx
  _WORD v32[30]; // [esp+0h] [ebp-184h]
  int v33[12]; // [esp+3Ch] [ebp-148h] BYREF
  char v34[92]; // [esp+7Ch] [ebp-108h] BYREF
  int v35; // [esp+D8h] [ebp-ACh] BYREF
  int *v36; // [esp+DCh] [ebp-A8h]
  int v37; // [esp+E0h] [ebp-A4h]
  int v38; // [esp+E4h] [ebp-A0h] BYREF
  int *v39; // [esp+E8h] [ebp-9Ch]
  int v40; // [esp+ECh] [ebp-98h]
  int v41; // [esp+F0h] [ebp-94h]
  int ****v42; // [esp+F4h] [ebp-90h]
  int v43; // [esp+F8h] [ebp-8Ch]
  int *v44; // [esp+FCh] [ebp-88h] BYREF
  int ****v45; // [esp+100h] [ebp-84h]
  int v46; // [esp+104h] [ebp-80h]
  unsigned __int8 v47; // [esp+10Bh] [ebp-79h]
  int *v48; // [esp+10Ch] [ebp-78h]
  char *v49; // [esp+110h] [ebp-74h]
  unsigned int v50; // [esp+114h] [ebp-70h] BYREF
  char v51[2]; // [esp+118h] [ebp-6Ch] BYREF
  unsigned __int16 v52; // [esp+11Ah] [ebp-6Ah]
  _DWORD v53[12]; // [esp+144h] [ebp-40h] BYREF
  int v54; // [esp+180h] [ebp-4h]

  v1 = invState;
  v2 = *(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88);
  v49 = invState;
  v42 = (int ****)v2(g_LTClient, 0);
  if ( !v42 )
    return;
  v45 = 0;
  Dword_this = SharedMem_ReadDword_this(dword_65ABF73C, 0);
  if ( Production_IsValidTypeCombo(Dword_this, 3, 0) )
  {
    v4 = (int ****)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
  }
  else
  {
    WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
    if ( !WindowById )
      goto LABEL_7;
    v4 = (int ****)(WindowById + 6440);
  }
  v45 = v4;
LABEL_7:
  v6 = *((_WORD *)v1 + 3579);
  if ( !v6 )
    return;
  if ( v6 >= 0xBC1u )
    return;
  LOBYTE(v43) = v1[7182];
  if ( !ItemTemplate_CopyVariantByIndex(v6, v43, v34) )
    return;
  ItemStructA_InitAlt((char *)&v50);
  v7 = 1;
  v8 = (int)(v1 + 7200);
  v43 = 1;
  v46 = (int)(v1 + 7200);
  do
  {
    v9 = v7 + 36;
    v47 = v9;
    if ( (unsigned __int8)(v9 - 37) > 4u )
    {
      if ( (unsigned __int8)(v9 - 42) > 3u )
        goto LABEL_45;
      v21 = *((_DWORD *)v1 + 1777);
      v39 = LinkedListNode_Alloc56();
      v40 = 0;
      v54 = 1;
      sub_6593DB30((int ***)v8, &v38, 0);
      v22 = *v39;
      v48 = (int *)v22;
      if ( (int *)v22 != v39 )
      {
        while ( 1 )
        {
          v23 = *(_WORD *)(v22 + 18);
          if ( v23 > v21 )
            break;
          v21 -= v23;
          v44 = *(int **)(v22 + 8);
          sub_658622F0((int ***)(v8 + 32), (unsigned int *)&v44);
          if ( v21 )
          {
            v22 = *v48;
            v48 = (int *)v22;
            if ( (int *)v22 != v39 )
              continue;
          }
          goto LABEL_41;
        }
        if ( *(_WORD *)(v8 + 40) <= 1u )
        {
          Buff_ReduceDurationPercent(v8, v21);
        }
        else
        {
          ListNode_GetData(v8, &v50);
          sub_658627F0(v8, v50);
          Buff_ReduceDurationPercent((int)v51, v21);
          if ( v49[7144] )
            sub_6593FBB0(v45, (unsigned __int16 *)&v50);
          else
            sub_6593FBB0(v42, (unsigned __int16 *)&v50);
        }
      }
LABEL_41:
      v24 = (int *)&v49[4 * v47 + 6792];
      v25 = *v24;
      v44 = v24;
      sub_65765A40(v25, (_DWORD *)v8);
      if ( !*(_WORD *)(v8 + 40) )
      {
        UiItemSlot_SetItem(*v24, 0);
        v53[2] = 0x10000;
        v53[1] = 1281;
        LOWORD(v53[3]) = 100;
        memset(&v53[4], 0, 19);
        memset(&v53[9], 0, 9);
        v53[0] = 1;
        qmemcpy(v33, v53, sizeof(v33));
        v26 = v44;
        UiItemSlot_SetItemAndTooltip(
          *v44,
          v33[0],
          v33[1],
          v33[2],
          v33[3],
          v33[4],
          v33[5],
          v33[6],
          v33[7],
          v33[8],
          v33[9],
          v33[10],
          v33[11]);
        v27 = *v26;
        v8 = v46;
        *(_DWORD *)(v27 + 168) = 0;
        *(_DWORD *)(v27 + 44) = 1;
      }
      v20 = &v38;
    }
    else
    {
      v10 = (unsigned __int16)v32[2 * v9 + 1];
      v41 = v9;
      v11 = *((_DWORD *)v49 + 1777) * v10;
      v36 = LinkedListNode_Alloc56();
      v37 = 0;
      v54 = 0;
      sub_6593DB30((int ***)v8, &v35, 0);
      v12 = *v36;
      v48 = (int *)v12;
      if ( (int *)v12 != v36 )
      {
        while ( 1 )
        {
          v13 = *(_WORD *)(v12 + 14);
          if ( v13 > v11 )
            break;
          v11 -= v13;
          v44 = *(int **)(v12 + 8);
          sub_658622F0((int ***)(v8 + 32), (unsigned int *)&v44);
          if ( v11 )
          {
            v12 = *v48;
            v48 = (int *)v12;
            if ( (int *)v12 != v36 )
              continue;
          }
          goto LABEL_27;
        }
        if ( *(_WORD *)(v8 + 40) <= 1u )
        {
          v14 = *(_WORD *)(v8 + 2);
          if ( (unsigned __int16)v11 < v14 )
            *(_WORD *)(v8 + 2) = v14 - v11;
          else
            *(_WORD *)(v8 + 2) = 0;
        }
        else
        {
          ListNode_GetData(v8, &v50);
          sub_658627F0(v8, v50);
          if ( (unsigned __int16)v11 < v52 )
            v52 -= v11;
          else
            v52 = 0;
          if ( v49[7144] )
            sub_6593FBB0(v45, (unsigned __int16 *)&v50);
          else
            sub_6593FBB0(v42, (unsigned __int16 *)&v50);
        }
      }
LABEL_27:
      v15 = v41;
      sub_65765A40(*(_DWORD *)&v49[4 * v41 + 6772], (_DWORD *)v8);
      if ( !*(_WORD *)(v8 + 40) )
      {
        UiItemSlot_SetItem(*(_DWORD *)&v49[4 * v15 + 6772], 0);
        v16 = v32[2 * v15 + 1];
        LOWORD(v53[1]) = v32[2 * v15];
        HIWORD(v53[1]) = v16;
        v53[2] = 655360000;
        LOWORD(v53[3]) = 100;
        memset(&v53[4], 0, 19);
        memset(&v53[9], 0, 9);
        v53[0] = 1;
        qmemcpy(v33, v53, sizeof(v33));
        v17 = v49;
        v18 = v41;
        UiItemSlot_SetItemAndTooltip(
          *(_DWORD *)&v49[4 * v41 + 6772],
          v33[0],
          v33[1],
          v33[2],
          v33[3],
          v33[4],
          v33[5],
          v33[6],
          v33[7],
          v33[8],
          v33[9],
          v33[10],
          v33[11]);
        v19 = *(_DWORD *)&v17[4 * v18 + 6772];
        v8 = v46;
        *(_DWORD *)(v19 + 168) = 0;
        *(_DWORD *)(v19 + 44) = 1;
      }
      v20 = &v35;
    }
    v54 = -1;
    LinkedList_DestroyAll((int)v20);
    v1 = v49;
LABEL_45:
    v7 = v43 + 1;
    v8 += 44;
    v28 = ++v43 < 10;
    v46 = v8;
  }
  while ( v28 );
  if ( !*((_DWORD *)v1 + 1787) )
  {
    if ( *((_DWORD *)v1 + 1777) < (unsigned int)*((unsigned __int16 *)v1 + 3581) )
    {
      Buff_ReduceDurationPercent((int)(v1 + 7156), *((_DWORD *)v1 + 1777));
      sub_65765A40(*((_DWORD *)v1 + 1728), (_DWORD *)v1 + 1789);
      goto LABEL_63;
    }
    ItemStructA_Clear(v1 + 7156);
    UiItemSlot_SetItem(*((_DWORD *)v1 + 1728), 0);
    v46 = 1;
    v29 = (int)(v1 + 7200);
    while ( 2 )
    {
      if ( *(_WORD *)(v29 + 40) )
      {
        v33[11] = 0;
        v33[10] = v29;
        if ( v1[7144] )
        {
          sub_6593FC80((int)v45, v33[10], (int *)v33[11]);
          ItemStructA_Clear((char *)v29);
          *((_BYTE *)v45 + 32) = 1;
        }
        else
        {
          sub_6593FC80((int)v42, v33[10], (int *)v33[11]);
          ItemStructA_Clear((char *)v29);
          *((_BYTE *)v42 + 32) = 1;
        }
        v30 = v46 + 36;
        if ( (unsigned __int8)(v46 - 1) <= 4u )
        {
          v31 = *(_DWORD *)&v1[4 * v30 + 6772];
          goto LABEL_60;
        }
        if ( (unsigned __int8)(v46 - 6) <= 3u )
        {
          v31 = *(_DWORD *)&v1[4 * v30 + 6792];
          goto LABEL_60;
        }
        if ( !(_BYTE)v46 )
        {
          v31 = *((_DWORD *)v1 + 1728);
LABEL_60:
          UiItemSlot_SetItem(v31, 0);
        }
      }
      v29 += 44;
      if ( ++v46 >= 10 )
      {
        CWindowTerminalProduction_ResetUI((int *)v1);
        break;
      }
      continue;
    }
  }
LABEL_63:
  if ( v1[7144] )
    sub_65864B30((int)v1);
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65865340) --------------------------------------------------------
int __thiscall CWindowTerminalProduction_OnCommand(char *this, int a2, int a3, int a4)
{
  _DWORD *v6; // eax
  int v7; // eax
  int v8; // esi
  const char *v9; // eax
  __int16 v10; // dx
  char v11; // cl
  int v12; // edi
  char v13; // al
  int v14; // eax
  char *v15; // esi
  bool v16; // zf
  unsigned __int8 v17; // al
  int v18; // ecx
  int v19; // eax
  char *v20; // edi
  char *v21; // esi
  char v22; // al
  int v23; // eax
  char *v24; // esi
  unsigned __int8 v25; // al
  int v26; // ecx
  int v27; // ecx
  unsigned __int8 v28; // al
  int v29; // esi
  int v30; // ecx
  __int16 v31; // dx
  __int16 v32; // ax
  int v33; // eax
  char *v34; // edi
  unsigned __int8 v35; // al
  unsigned __int8 v36; // cl
  int v37; // ecx
  int *v38; // esi
  int v39; // esi
  int v40; // esi
  int v41; // ecx
  __int16 v42; // dx
  __int16 v43; // ax
  char *v44; // esi
  int v45; // edi
  char Dword_this; // al
  int WindowById; // eax
  char *i; // esi
  unsigned __int8 v49; // al
  int v50; // ecx
  int v51; // esi
  char *v52; // eax
  char v53; // al
  bool v54; // cc
  int v55; // eax
  int v56; // eax
  char v57; // cl
  int v58; // edx
  int j; // esi
  int v60; // edx
  int v61; // eax
  int v62; // eax
  double v63; // st7
  _WORD v64[30]; // [esp+0h] [ebp-AECh]
  int v65[12]; // [esp+3Ch] [ebp-AB0h] BYREF
  unsigned __int16 v66[46]; // [esp+7Ch] [ebp-A70h] BYREF
  char *v67; // [esp+D8h] [ebp-A14h]
  char *v68; // [esp+DCh] [ebp-A10h]
  char *v69; // [esp+E0h] [ebp-A0Ch]
  int v70; // [esp+E4h] [ebp-A08h]
  int v71; // [esp+E8h] [ebp-A04h]
  _DWORD v72[269]; // [esp+ECh] [ebp-A00h] BYREF
  char v73; // [esp+520h] [ebp-5CCh]
  _DWORD v74[269]; // [esp+5CCh] [ebp-520h] BYREF
  char v75; // [esp+A00h] [ebp-ECh]
  bool v76; // [esp+A01h] [ebp-EBh]
  int v77; // [esp+A04h] [ebp-E8h]
  int v78; // [esp+A08h] [ebp-E4h]
  int v79; // [esp+A0Ch] [ebp-E0h]
  int v80; // [esp+A10h] [ebp-DCh]
  int v81; // [esp+A14h] [ebp-D8h]
  _DWORD v82[31]; // [esp+A18h] [ebp-D4h] BYREF
  char v83; // [esp+A94h] [ebp-58h]
  char v84; // [esp+A95h] [ebp-57h]
  _DWORD v85[12]; // [esp+AACh] [ebp-40h] BYREF
  int v86; // [esp+AE8h] [ebp-4h]

  switch ( a2 )
  {
    case 4:
      v69 = (char *)(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
      if ( !v69 )
        return 1;
      v45 = 0;
      Dword_this = SharedMem_ReadDword_this(dword_65ABF73C, 0);
      if ( Production_IsValidTypeCombo(Dword_this, 3, 0) )
      {
        v45 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
      }
      else
      {
        WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
        if ( WindowById )
          v45 = WindowById + 6440;
      }
      if ( *((_DWORD *)this + 1787) )
        (*(void (__thiscall **)(char *, int, _DWORD, _DWORD))(*(_DWORD *)this + 4))(this, 11, 0, 0);
      v70 = 0;
      for ( i = this + 7156; ; i += 44 )
      {
        if ( *((_WORD *)i + 20) )
        {
          if ( *(this + 7144) && v70 )
          {
            sub_6593FC80(v45, (int)i, 0);
            ItemStructA_Clear(i);
            *(_BYTE *)(v45 + 32) = 1;
          }
          else
          {
            sub_6593FC80((int)v69, (int)i, 0);
            ItemStructA_Clear(i);
            v69[32] = 1;
          }
          v49 = v70 + 36;
          if ( (unsigned __int8)(v70 - 1) <= 4u )
          {
            v50 = *((_DWORD *)this + v49 + 1693);
LABEL_92:
            UiItemSlot_SetItem(v50, 0);
            goto LABEL_93;
          }
          if ( (unsigned __int8)(v70 - 6) <= 3u )
          {
            v50 = *((_DWORD *)this + v49 + 1698);
            goto LABEL_92;
          }
          if ( !(_BYTE)v70 )
          {
            v50 = *((_DWORD *)this + 1728);
            goto LABEL_92;
          }
        }
LABEL_93:
        if ( ++v70 >= 10 )
        {
          *(this + 7144) = 0;
          CWindowTerminalProduction_ResetUI((int *)this);
          SendPacket_ID_0xA5_Unknown();
          v65[11] = a4;
          v65[10] = a3;
          v65[9] = a2;
          return CWindow_HandleCommand(this, v65[9], v65[10], v65[11]);
        }
      }
    case 5:
      (*(void (__thiscall **)(char *, int, _DWORD, _DWORD))(*(_DWORD *)this + 4))(this, 9, 0, 0);
      WindowMgr_SelectGroup((int *)this, 3);
      return 1;
    case 6:
      (*(void (__thiscall **)(char *, int, _DWORD, _DWORD))(*(_DWORD *)this + 4))(this, 9, 0, 0);
      WindowMgr_SelectGroup((int *)this, 27);
      return 1;
    case 7:
      v6 = (_DWORD *)*((_DWORD *)this + 1774);
      if ( *(_DWORD **)(dword_65ABF708 + 4) == v6 )
        sub_65808DC0((int *)dword_65ABF708);
      else
        WindowMgr_SetFocusWindow((_DWORD *)dword_65ABF708, v6, (int)this);
      return 1;
    case 8:
      if ( (*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 16) )
        return 1;
      LOBYTE(v67) = *(this + 7182);
      if ( !ItemTemplate_CopyVariantByIndex(*((_WORD *)this + 3579), (unsigned __int8)v67, (char *)v66) )
        return 1;
      if ( *((_DWORD *)this + 1777) )
      {
        HIBYTE(v71) = sub_65933EC0(g_ItemTemplateById, v66[0]);
        v53 = SharedMem_ReadDword_this(dword_65ABF73C, 0);
        if ( IsValue2Or30_NotEqual(v53, 0) )
        {
          v54 = HIBYTE(v71) <= 1u;
        }
        else
        {
          v55 = SharedMem_ReadDword_this(dword_65ABF73C, 0);
          v54 = HIBYTE(v71) <= (unsigned __int8)byte_659E2954[60 * v55];
        }
        if ( v54 )
        {
          Packet_ID_PRODUCTION_ctor((char *)v74);
          v86 = 0;
          v56 = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
          v16 = *((_DWORD *)this + 1592) == 0;
          v57 = *(this + 7144);
          v58 = *((_DWORD *)this + 1777);
          v74[268] = v56;
          v75 = 0;
          v76 = !v16;
          v84 = v57;
          v81 = v58;
          for ( j = 0; j < 10; ++j )
          {
            if ( j || !*((_DWORD *)this + 1787) )
            {
              List_CopyEntriesLimited((int **)this + 11 * j + 1789, &v82[3 * j], 0);
            }
            else
            {
              v82[30] = *((_DWORD *)this + 1787);
              v83 = *(this + 7152);
            }
          }
          v60 = *((_DWORD *)this + 1766);
          v61 = *((_DWORD *)this + 1767);
          v77 = *((_DWORD *)this + 1765);
          v80 = *((_DWORD *)this + 1768);
          v78 = v60;
          v79 = v61;
          Packet_ID_PRODUCTION_write((int)v74);
          LTClient_SendPacket_BuildIfNeeded(v74, 2, 1, 3, 0);
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 16);
          v86 = -1;
          Packet_ID_PRODUCTION_cleanup(v74);
          return 1;
        }
        v65[11] = 5620;
      }
      else
      {
        v65[11] = 5429;
      }
      v51 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v65[11]);
      if ( v51 )
        v52 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v51);
      else
        v52 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v52, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v51 )
      {
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v51);
        return 1;
      }
      return 1;
    case 9:
      v62 = *((_DWORD *)this + 1510);
      if ( v62 && *(_DWORD *)(v62 + 4) == 27 )
      {
        if ( !(*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 16)
          && *((float *)this + 1901) <= ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient) )
        {
          Packet_ID_PRODUCTION_ctor((char *)v72);
          v86 = 1;
          v72[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
          v73 = 1;
          Packet_ID_PRODUCTION_write((int)v72);
          LTClient_SendPacket_BuildIfNeeded(v72, 2, 1, 3, 0);
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 16);
          v63 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
          v86 = -1;
          *((float *)this + 1901) = v63 + 5.0;
          Packet_ID_PRODUCTION_cleanup(v72);
          return 1;
        }
      }
      else
      {
        SendPacket_Storage_Request(dword_65ABF738);
        SendPacket_Storage_Open();
      }
      return 1;
    case 10:
      sub_65809DE0((int *)dword_65ABF708, (int)this, *((_DWORD **)this + 1783), 1, 1, 1);
      return 1;
    case 11:
      if ( a3 == *((_DWORD *)this + 1787) && (unsigned __int8)*(this + 7152) == a4 )
        return 1;
      *(this + 7152) = a4;
      v65[11] = (int)v66;
      LOBYTE(v65[10]) = 0;
      LOWORD(v65[9]) = a3;
      *((_DWORD *)this + 1787) = a3;
      if ( ItemTemplate_CopyVariantByIndex(v65[9], v65[10], (char *)v65[11]) )
        v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v66[0] + 30000);
      else
        v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1032);
      v8 = v7;
      if ( v7 )
        v9 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
      else
        v9 = byte_659A8B98;
      UiList_SetSelectionText(*((_DWORD *)this + 1783), (int)v9, 1);
      if ( v8 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v8);
      ItemStructA_Clear(this + 7156);
      ItemStructA_InitAlt((char *)v85);
      if ( *((_DWORD *)this + 1787) )
      {
        v10 = *((_WORD *)this + 3574);
        LOWORD(v85[1]) = 1280;
        v11 = *(this + 7152);
        HIWORD(v85[1]) = v10;
        v85[0] = 1;
        HIWORD(v85[2]) = 100;
        BYTE2(v85[7]) = v11;
      }
      ItemStructA_UpdateFrom((int **)this + 1789, (unsigned __int16 *)v85);
      v12 = 0;
      v68 = (char *)(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
      v13 = SharedMem_ReadDword_this(dword_65ABF73C, 0);
      if ( Production_IsValidTypeCombo(v13, 3, 0) )
      {
        v12 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
      }
      else
      {
        v14 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
        if ( v14 )
          v12 = v14 + 6440;
      }
      v70 = 1;
      v15 = this + 7200;
      do
      {
        if ( !*((_WORD *)v15 + 20) )
          goto LABEL_37;
        v16 = *(this + 7144) == 0;
        v65[11] = 0;
        v65[10] = (int)v15;
        if ( v16 )
        {
          sub_6593FC80((int)v68, v65[10], (int *)v65[11]);
          ItemStructA_Clear(v15);
          v68[32] = 1;
        }
        else
        {
          sub_6593FC80(v12, v65[10], (int *)v65[11]);
          ItemStructA_Clear(v15);
          *(_BYTE *)(v12 + 32) = 1;
        }
        v17 = v70 + 36;
        if ( (unsigned __int8)(v70 - 1) > 4u )
        {
          if ( (unsigned __int8)(v70 - 6) > 3u )
          {
            if ( (_BYTE)v70 )
              goto LABEL_37;
            v18 = *((_DWORD *)this + 1728);
          }
          else
          {
            v18 = *((_DWORD *)this + v17 + 1698);
          }
        }
        else
        {
          v18 = *((_DWORD *)this + v17 + 1693);
        }
        UiItemSlot_SetItem(v18, 0);
LABEL_37:
        v15 += 44;
        ++v70;
      }
      while ( v70 < 10 );
      qmemcpy(v65, v85, sizeof(v65));
      UiItemSlot_SetItemAndTooltip(
        *((_DWORD *)this + 1728),
        v65[0],
        v65[1],
        v65[2],
        v65[3],
        v65[4],
        v65[5],
        v65[6],
        v65[7],
        v65[8],
        v65[9],
        v65[10],
        v65[11]);
      v19 = *((_DWORD *)this + 1728);
      *(_DWORD *)(v19 + 168) = 0;
      *(_DWORD *)(v19 + 44) = 1;
      CWindowTerminalProduction_ResetUI((int *)this);
      if ( !*(this + 7144) )
        return 1;
      sub_65864B30((int)this);
      return 1;
    case 12:
      LOBYTE(v69) = *(this + 7182);
      if ( !ItemTemplate_CopyVariantByIndex(*((_WORD *)this + 3579), (unsigned __int8)v69, (char *)v66) )
        return 1;
      v20 = (char *)(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
      v69 = v20;
      if ( !v20 )
        return 1;
      v21 = 0;
      v68 = 0;
      v22 = SharedMem_ReadDword_this(dword_65ABF73C, 0);
      if ( Production_IsValidTypeCombo(v22, 3, 0) )
      {
        v21 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
      }
      else
      {
        v23 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
        if ( !v23 )
          goto LABEL_47;
        v21 = (char *)(v23 + 6440);
      }
      v68 = v21;
LABEL_47:
      v16 = *(this + 7144) == 0;
      v70 = 1;
      if ( !v16 )
      {
        v24 = this + 7200;
        v68 = this + 7200;
        while ( 1 )
        {
          if ( !*((_WORD *)v24 + 20) )
            goto LABEL_56;
          sub_6593FC80((int)v20, (int)v24, 0);
          ItemStructA_Clear(v24);
          HIBYTE(v71) = v70 + 36;
          v25 = v70 - 6;
          v20[32] = 1;
          if ( v25 <= 3u )
            break;
          v28 = HIBYTE(v71);
          if ( HIBYTE(v71) < 0x25u )
            goto LABEL_59;
          if ( HIBYTE(v71) <= 0x29u )
          {
            v29 = HIBYTE(v71);
            v30 = *((_DWORD *)this + HIBYTE(v71) + 1693);
            v67 = (char *)HIBYTE(v71);
            UiItemSlot_SetItem(v30, 0);
            ItemStructA_InitAlt((char *)v85);
            v31 = v64[2 * v29];
            v32 = v64[2 * v29 + 1];
            HIWORD(v85[2]) = 10000;
            LOWORD(v85[1]) = v31;
            v85[0] = 1;
            HIWORD(v85[1]) = v32;
            qmemcpy(v65, v85, sizeof(v65));
            v27 = *((_DWORD *)this + (_DWORD)v67 + 1693);
            goto LABEL_55;
          }
LABEL_57:
          if ( (unsigned __int8)(v28 - 37) <= 4u )
          {
            v33 = *((_DWORD *)this + v28 + 1693);
LABEL_61:
            *(_DWORD *)(v33 + 44) = 0;
            *(_DWORD *)(v33 + 168) = 0;
            goto LABEL_62;
          }
LABEL_59:
          if ( (unsigned __int8)(v28 - 42) <= 3u )
          {
            v33 = *((_DWORD *)this + v28 + 1698);
            goto LABEL_61;
          }
LABEL_62:
          v24 += 44;
          v54 = ++v70 < 10;
          v68 = v24;
          if ( !v54 )
          {
            sub_65864B30((int)this);
            return 1;
          }
        }
        v26 = *((_DWORD *)this + HIBYTE(v71) + 1698);
        v67 = this + 4 * HIBYTE(v71) + 6792;
        UiItemSlot_SetItem(v26, 0);
        ItemStructA_InitAlt((char *)v85);
        v85[1] = 1281;
        v85[0] = 1;
        HIWORD(v85[2]) = 1;
        qmemcpy(v65, v85, sizeof(v65));
        v27 = *(_DWORD *)v67;
LABEL_55:
        UiItemSlot_SetItemAndTooltip(
          v27,
          v65[0],
          v65[1],
          v65[2],
          v65[3],
          v65[4],
          v65[5],
          v65[6],
          v65[7],
          v65[8],
          v65[9],
          v65[10],
          v65[11]);
        v24 = v68;
        v20 = v69;
LABEL_56:
        v28 = HIBYTE(v71);
        goto LABEL_57;
      }
      v34 = this + 7200;
      v69 = this + 7200;
      break;
    default:
      v65[11] = a4;
      v65[10] = a3;
      v65[9] = a2;
      return CWindow_HandleCommand(this, v65[9], v65[10], v65[11]);
  }
  while ( 1 )
  {
    sub_6593FC80((int)v21, (int)v34, 0);
    ItemStructA_Clear(v34);
    v35 = v70 + 36;
    v36 = v70 - 6;
    v21[32] = 1;
    if ( v36 > 3u )
    {
      if ( (unsigned __int8)(v35 - 37) > 4u )
        goto LABEL_71;
      v40 = v35;
      v41 = *((_DWORD *)this + v35 + 1693);
      v67 = (char *)v35;
      UiItemSlot_SetItem(v41, 0);
      ItemStructA_InitAlt((char *)v85);
      v42 = v64[2 * v40];
      v43 = v64[2 * v40 + 1];
      HIWORD(v85[2]) = 10000;
      LOWORD(v85[1]) = v42;
      HIWORD(v85[1]) = v43;
      v85[0] = 1;
      qmemcpy(v65, v85, sizeof(v65));
      v44 = v67;
      UiItemSlot_SetItemAndTooltip(
        *((_DWORD *)this + (_DWORD)v67 + 1693),
        v65[0],
        v65[1],
        v65[2],
        v65[3],
        v65[4],
        v65[5],
        v65[6],
        v65[7],
        v65[8],
        v65[9],
        v65[10],
        v65[11]);
      v39 = *((_DWORD *)this + (_DWORD)v44 + 1693);
    }
    else
    {
      v37 = *((_DWORD *)this + v35 + 1698);
      v67 = this + 4 * v35 + 6792;
      UiItemSlot_SetItem(v37, 0);
      ItemStructA_InitAlt((char *)v85);
      v85[1] = 1281;
      HIWORD(v85[2]) = 1;
      v85[0] = 1;
      qmemcpy(v65, v85, sizeof(v65));
      v38 = (int *)v67;
      UiItemSlot_SetItemAndTooltip(
        *(_DWORD *)v67,
        v65[0],
        v65[1],
        v65[2],
        v65[3],
        v65[4],
        v65[5],
        v65[6],
        v65[7],
        v65[8],
        v65[9],
        v65[10],
        v65[11]);
      v39 = *v38;
    }
    *(_DWORD *)(v39 + 44) = 1;
    *(_DWORD *)(v39 + 168) = 1;
LABEL_71:
    v34 = v69 + 44;
    v54 = ++v70 < 10;
    v69 += 44;
    if ( !v54 )
    {
      CWindowTerminalProduction_UpdateSelection((int)this);
      return 1;
    }
    v21 = v68;
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658676B0) --------------------------------------------------------
int __cdecl RoundFloatToInt(float a1)
{
  double v1; // st7

  v1 = a1;
  if ( a1 >= 0.0 )
    return (int)(float)(v1 + 0.5);
  else
    return (int)(float)(v1 - 0.5);
}

//----- (658676F0) --------------------------------------------------------
char __cdecl Item_CalcRepairCosts(int __return_address, _DWORD *a2, int *a3)
{
  char v4; // al
  char result; // al
  int v6; // eax
  bool v7; // zf
  unsigned __int16 v8; // [esp+0h] [ebp-14h]
  double v9; // [esp+8h] [ebp-Ch]
  char v10; // [esp+Ch] [ebp-8h]
  int v11; // [esp+10h] [ebp-4h] BYREF
  char v12; // [esp+1Ch] [ebp+8h]
  float v13; // [esp+1Ch] [ebp+8h]
  float v14; // [esp+1Ch] [ebp+8h]
  float v15; // [esp+1Ch] [ebp+8h]

  v4 = *(_BYTE *)(__return_address + 13);
  v8 = *(_WORD *)(__return_address + 4);
  HIBYTE(v11) = 0;
  v12 = v4;
  v10 = sub_65933EC0(g_ItemTemplateById, v8);
  result = sub_65933B90(g_ItemTemplateById, *(_WORD *)(__return_address + 4), v10, v12, (_BYTE *)&v11 + 3);
  if ( result )
  {
    v9 = (double)*(unsigned __int16 *)(__return_address + 10);
    v13 = v9 / (double)(unsigned __int16)ItemTemplate_GetMaxDurability(*(_WORD *)(__return_address + 4)) * 100.0;
    if ( v13 < 100.0 )
    {
      v14 = 100.0 - v13;
      if ( v14 < 1.0 )
        v14 = 1.0;
      v6 = RoundFloatToInt(v14);
      v7 = HIBYTE(v11) == 0;
      *a3 = v6;
      if ( v7 )
      {
        v15 = v14 * 5.0;
        *a2 = RoundFloatToInt(v15);
      }
      return 1;
    }
    else
    {
      return 1;
    }
  }
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65867A00) --------------------------------------------------------
char __thiscall Packet_ID_REPAIR_ITEM_read(int this, int a2)
{
  char result; // al
  unsigned int v4; // eax

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1076));
    v4 = *(_DWORD *)(this + 20);
    if ( v4 + 1 <= *(_DWORD *)(this + 12) )
    {
      *(_BYTE *)(this + 1080) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + *(_DWORD *)(this + 24))) != 0;
      ++*(_DWORD *)(this + 20);
    }
    return 1;
  }
  return result;
}

//----- (65867B20) --------------------------------------------------------
void __cdecl sub_65867B20(int a1)
{
  int WindowById; // eax
  _DWORD v2[3]; // [esp+4h] [ebp-450h] BYREF
  _BYTE v3[1060]; // [esp+10h] [ebp-444h] BYREF
  int Dword_this; // [esp+434h] [ebp-20h]
  _BYTE v5[4]; // [esp+438h] [ebp-1Ch] BYREF
  _BYTE v6[8]; // [esp+43Ch] [ebp-18h] BYREF
  int v7; // [esp+450h] [ebp-4h]

  if ( a1 )
  {
    sub_658677F0(v2);
    v7 = 0;
    Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Cu);
    if ( WindowById )
      sub_65867AC0(WindowById, v5, v6);
    sub_65867A70(v2);
    LTClient_SendPacket_BuildIfNeeded(v2, 2, 1, 3, 0);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 0x80000);
    v7 = -1;
    v2[0] = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v3);
  }
}
// 658677F0: using guessed type int __thiscall sub_658677F0(_DWORD);
// 65867A70: using guessed type int __thiscall sub_65867A70(_DWORD);
// 65867AC0: using guessed type int __thiscall sub_65867AC0(_DWORD, _DWORD, _DWORD);
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65867C10) --------------------------------------------------------
int __thiscall ItemTransferUI_HandleAction(int this, int a2, int a3, int a4)
{
  int v5; // eax
  int v6; // esi
  char *v7; // eax
  int v9; // eax
  char *v10; // eax
  int v11; // edi
  int v12; // edi
  unsigned int v13; // [esp+Ch] [ebp-3Ch] BYREF
  char *v14; // [esp+10h] [ebp-38h] BYREF
  char v15[48]; // [esp+14h] [ebp-34h] BYREF

  switch ( a2 )
  {
    case 4:
      if ( *(_WORD *)(*(_DWORD *)(this + 6752) + 220) )
      {
        ItemStructA_InitAlt(v15);
        v11 = *(_DWORD *)(this + 6752);
        ListNode_GetData(v11 + 180, v15);
        UiItemSlot_SetItem(v11, 0);
        v12 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
        if ( v12 )
        {
          sub_6593FBB0((int ****)v12, (unsigned __int16 *)v15);
          *(_BYTE *)(v12 + 32) = 1;
        }
      }
      SendPacket_ID_0xA5_Unknown();
      return CWindow_HandleCommand((_BYTE *)this, a2, a3, a4);
    case 5:
      ItemStructA_InitAlt(v15);
      ListNode_GetData(*(_DWORD *)(this + 6752) + 180, v15);
      if ( !*(_DWORD *)v15 )
        return 1;
      v14 = 0;
      v13 = 0;
      if ( !Item_CalcRepairCosts((int)v15, &v14, (int *)&v13) )
        return 1;
      v5 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
      if ( !v5 )
        return 1;
      Production_ApplySkillModifiers(this + 6368, *(unsigned __int16 *)(v5 + 8), &v14);
      if ( *(_BYTE *)(this + 6776) )
      {
        if ( PlayerStats_GetStatValue(0x1Au) < v13 )
        {
          v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5531);
          if ( v6 )
          {
LABEL_8:
            v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
            goto LABEL_10;
          }
LABEL_9:
          v7 = (char *)byte_659A8B98;
LABEL_10:
          FriendList_AddEntry(dword_65ABF748, v7, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
          if ( !v6 )
            return 1;
LABEL_11:
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
          return 1;
        }
        v9 = (*(int (__cdecl **)(int, int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1880, v13);
      }
      else
      {
        if ( PlayerStats_GetStatValue(4u) < (unsigned int)v14 )
        {
          v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5531);
          if ( v6 )
            goto LABEL_8;
          goto LABEL_9;
        }
        v9 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1879, v14);
      }
      v6 = v9;
      if ( v9 )
        v10 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
      else
        v10 = (char *)byte_659A8B98;
      TooltipMgr_ShowTextTooltip((int *)dword_65ABF708, v10, (int)sub_65867B20, 0, 1, 0);
      if ( !v6 )
        return 1;
      goto LABEL_11;
    case 6:
      *(_BYTE *)(this + 6776) = 0;
      *(_BYTE *)(this + 6768) = 1;
      return 1;
    case 7:
      *(_BYTE *)(this + 6776) = 1;
      *(_BYTE *)(this + 6768) = 0;
      return 1;
    default:
      return CWindow_HandleCommand((_BYTE *)this, a2, a3, a4);
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (65867EF0) --------------------------------------------------------
int __thiscall ItemTransferUI_CreateWidgets(_DWORD *this)
{
  int v2; // edi
  const char *v3; // eax
  _DWORD *Base; // eax
  int v5; // edi
  const char *v6; // eax
  _DWORD *v7; // eax
  int v8; // esi
  int *v10; // [esp+0h] [ebp-54h]
  int *v11; // [esp+14h] [ebp-40h] BYREF
  char v12[32]; // [esp+18h] [ebp-3Ch] BYREF
  int **v13; // [esp+38h] [ebp-1Ch] BYREF
  void *v14; // [esp+3Ch] [ebp-18h]
  int v15; // [esp+50h] [ebp-4h]

  ItemsAddedEntry_Init(v12);
  v15 = 0;
  *(this + 1688) = UiWidget_CreateContainer(this, 0, 0, 0, 8, 6, v12, 55, 16, 48, 48);
  UiWidget_CreateScrollbar(this, 6, 4, 50, 50, 0.5, 0);
  v2 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 968);
  if ( v2 )
    v3 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v2);
  else
    v3 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v3, 16, 60, 0, 0, 1, 70, 10, (int)&unk_65A5C730, 2, 0, 0, 0, 1);
  if ( v2 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v2);
  UiWidget_CreateScrollbar(this, 114, 8, 81, 16, 0.5, 0);
  *(this + 1689) = UiWidget_CreateFull(this, 0, (int)"-", 16, 77, 0, 0, 1, 116, 10, (int)&unk_65A5C808, 2, 0, 0, 0, 1);
  Base = UiWidget_CreateBase(this, (unsigned int)(this + 1692), 1, 200, 8, 0);
  *(this + 1691) = Base;
  Base[14] = 6;
  Base[52] = this;
  v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 969);
  if ( v5 )
    v6 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
  else
    v6 = byte_659A8B98;
  UiWidget_CreateFull(this, 0, (int)v6, 16, 60, 0, 0, 1, 70, 36, (int)&unk_65A5C730, 2, 0, 0, 0, 1);
  if ( v5 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
  UiWidget_CreateScrollbar(this, 114, 34, 81, 16, 0.5, 0);
  *(this + 1690) = UiWidget_CreateFull(this, 0, (int)"-", 16, 77, 0, 0, 1, 116, 36, (int)&unk_65A5C808, 2, 0, 0, 0, 1);
  v7 = UiWidget_CreateBase(this, (unsigned int)(this + 1694), 1, 200, 34, 0);
  *(this + 1693) = v7;
  v7[14] = 7;
  v7[52] = this;
  *(this + 1695) = UiWidget_CreateWithInput(this, 5, 232, 21, 9005, 0);
  v8 = GroupWindow_Initialize((int)this);
  v10 = *(int **)v14;
  v15 = -1;
  RBTree_EraseRange(&v13, &v11, v10, (int *)v14);
  operator delete(v14);
  return v8;
}

//----- (658681A0) --------------------------------------------------------
char __thiscall ItemTransferUI_UpdateItemInfo(unsigned int *this, char *a2, int a3)
{
  int v4; // eax
  char *v5; // esi
  int v6; // esi
  int v7; // esi
  char *v8; // eax
  char Dword_this; // al
  int v11; // eax
  unsigned int *v12; // esi
  int v13; // eax
  unsigned int v14; // ebx
  double v15; // st7
  unsigned int v16; // ebx
  int v17; // eax
  char *v18; // eax
  unsigned int v19; // eax
  int v20; // eax
  char *v21; // eax
  _BYTE v22[24]; // [esp-24h] [ebp-E4h] BYREF
  int *v23; // [esp-Ch] [ebp-CCh]
  _DWORD *v24; // [esp-8h] [ebp-C8h]
  int v25; // [esp-4h] [ebp-C4h]
  _BYTE v26[28]; // [esp+10h] [ebp-B0h] BYREF
  _BYTE v27[28]; // [esp+2Ch] [ebp-94h] BYREF
  __int64 v28; // [esp+48h] [ebp-78h]
  int v29; // [esp+50h] [ebp-70h]
  int v30; // [esp+54h] [ebp-6Ch] BYREF
  int v31; // [esp+58h] [ebp-68h]
  char v32; // [esp+61h] [ebp-5Fh]
  int **v33[10]; // [esp+84h] [ebp-3Ch] BYREF
  __int16 v34; // [esp+ACh] [ebp-14h]
  int v35; // [esp+BCh] [ebp-4h]

  if ( !a2 || !a3 || (*(unsigned __int8 (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 1) )
    return 0;
  v4 = *((_DWORD *)a2 + 1);
  v5 = 0;
  if ( v4 == 25 )
  {
    v5 = a2;
  }
  else if ( v4 == 26 )
  {
    v5 = (char *)*((_DWORD *)a2 + 1567);
  }
  ItemsAddedEntry_Init((char *)v33);
  v35 = 0;
  if ( !v5
    || (ItemData_Copy(v33, v5 + 180), !v34)
    || !LOWORD(v33[0])
    || (v6 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0), *(_BYTE *)(a3 + 96) != 16)
    || (unsigned __int8)*((_DWORD *)a2 + 24) != 1
    || (unsigned __int8)(*(_BYTE *)(a3 + 100) - 52) > 5u )
  {
LABEL_21:
    v35 = -1;
    ItemMapContainer_Clear(v33);
    return 0;
  }
  ItemStructA_InitAlt((char *)&v30);
  ListNode_GetData((int)v33, &v30);
  LOBYTE(v29) = v32;
  BYTE4(v28) = sub_65933EC0(g_ItemTemplateById, v31);
  if ( !sub_65933B90(g_ItemTemplateById, v31, BYTE4(v28), v29, 0) )
  {
    v25 = 5529;
LABEL_16:
    v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v25);
    if ( v7 )
      v8 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
    else
      v8 = (char *)byte_659A8B98;
    FriendList_AddEntry(dword_65ABF748, v8, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
    if ( v7 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
    goto LABEL_21;
  }
  Dword_this = SharedMem_ReadDword_this(dword_65ABF73C, 0);
  if ( IsValue2Or30_NotEqual(Dword_this, 0) && (unsigned __int8)sub_65933EC0(g_ItemTemplateById, v31) > 1u )
  {
    v25 = 5579;
    goto LABEL_16;
  }
  v11 = *(this + 1688);
  if ( *(_WORD *)(v11 + 220) )
    sub_6593FC80(v6, v11 + 180, 0);
  UiItemSlot_SetItem(*(this + 1688), (unsigned __int16 *)&v30);
  sub_6593F010((_DWORD *)v6, v30, 0);
  *(_BYTE *)(v6 + 32) = 1;
  v25 = (int)(this + 1687);
  v12 = this + 1686;
  v24 = this + 1686;
  v23 = &v30;
  *(this + 1686) = 0;
  *(this + 1687) = 0;
  Item_CalcRepairCosts((int)v23, v24, (int *)v25);
  v13 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  if ( !v13 )
    goto LABEL_21;
  Production_ApplySkillModifiers((int)(this + 1592), *(unsigned __int16 *)(v13 + 8), (char **)this + 1686);
  if ( *v12 )
  {
    v14 = *v12;
    v25 = 0;
    v15 = Production_GetSkillMultiplier((int)(this + 1592)) * (double)v14;
    v24 = 0;
    v28 = (__int64)v15;
    HIDWORD(v28) = v22;
    v16 = (__int64)v15 + v14;
    *v12 = v16;
    String_FromU32(v22, v16);
    v17 = FormatString((int)v27, (int)&unk_659C45C8);
    LOBYTE(v35) = 1;
    v18 = (char *)std::string::c_str(v17);
    UiText_SetValueIfChanged(*(this + 1689), v18, (int)v24, (char *)v25);
    LOBYTE(v35) = 0;
    std::string::~string(v27);
  }
  else
  {
    UiText_SetValueIfChanged(*(this + 1689), "-", 0, 0);
  }
  v19 = *(this + 1687);
  v25 = 0;
  v24 = 0;
  if ( v19 )
  {
    HIDWORD(v28) = v22;
    String_FromU32(v22, v19);
    v20 = FormatString((int)v26, (int)&unk_659C45C8);
    LOBYTE(v35) = 2;
    v21 = (char *)std::string::c_str(v20);
    UiText_SetValueIfChanged(*(this + 1690), v21, (int)v24, (char *)v25);
    LOBYTE(v35) = 0;
    std::string::~string(v26);
  }
  else
  {
    UiText_SetValueIfChanged(*(this + 1690), "-", (int)v24, (char *)v25);
  }
  v35 = -1;
  ItemMapContainer_Clear(v33);
  return 1;
}
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65869110) --------------------------------------------------------
void __thiscall ProductionWindow_RefreshInputSlots(_DWORD *this)
{
  Inventory_ProcessItemSlots(*(this + 1717), (__int16 *)this + 3220, 0, 1);
}

//----- (65869130) --------------------------------------------------------
void __thiscall ProductionWindow_ClearAndRefresh(int *this)
{
  __int16 *v2; // edi

  v2 = (__int16 *)(this + 1592);
  sub_6593EE50(this + 1592);
  sub_6593EE50(this + 1601);
  Inventory_ProcessItemSlots(*(this + 1716), v2, 0, 1);
}

//----- (65869160) --------------------------------------------------------
void __thiscall sub_65869160(int this)
{
  int v2; // esi
  const char *v3; // eax

  v2 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
         g_pILTClient,
         *(unsigned __int8 *)(this + 7076) + 29900);
  if ( v2 )
    v3 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v2);
  else
    v3 = byte_659A8B98;
  UiList_SetSelectionText(*(_DWORD *)(this + 6940), (int)v3, 1);
  if ( v2 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v2);
}

//----- (65869540) --------------------------------------------------------
unsigned __int8 __thiscall ProductionWindow_HandleActionEvent(int this, unsigned __int8 a2)
{
  unsigned __int8 result; // al
  int v4; // ecx
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  _DWORD *v15; // eax
  int v16; // edx
  _DWORD *v17; // eax
  int v18; // edx
  int v19; // ecx
  _DWORD *v20; // eax
  int v21; // ecx
  int v22; // edx
  _DWORD *v23; // eax
  int v24; // edx
  _DWORD *v25; // eax
  int v26; // edx
  int v27; // ecx
  _DWORD *v28; // eax
  _DWORD *v29; // eax
  _DWORD *v30; // eax
  _DWORD *v31; // eax
  int v32; // ecx
  _DWORD *v33; // eax
  _DWORD *v34; // eax
  int v35; // eax
  _DWORD *v36; // eax
  _DWORD *v37; // eax
  _DWORD *v38; // eax
  _DWORD *v39; // eax
  _DWORD *v40; // eax
  int v41; // edx
  _DWORD *v42; // eax
  int v43; // edx
  _DWORD *v44; // eax
  int v45; // edx
  int v46; // ecx
  _DWORD *v47; // eax
  int v48; // edx
  int v49; // ecx
  _DWORD *v50; // eax
  _DWORD *v51; // eax
  _DWORD *v52; // eax
  _DWORD *v53; // eax
  int v54; // edx
  int v55; // ecx
  _DWORD *v56; // eax
  int v57; // edx
  _DWORD *v58; // eax
  int v59; // edx
  int v60; // ecx
  _DWORD *v61; // eax
  int v62; // edx
  int v63; // ecx
  _DWORD *v64; // eax
  int v65; // ecx
  int v66; // edx
  _DWORD *v67; // eax
  int v68; // ecx
  _DWORD *v69; // eax
  _DWORD *v70; // eax
  int v71; // eax
  int v72; // [esp+4h] [ebp-4h]
  int v73; // [esp+10h] [ebp+8h]

  result = a2;
  if ( *(_BYTE *)(this + 7096) != a2 )
  {
    v4 = *(_DWORD *)(this + 6976);
    *(_BYTE *)(this + 7096) = a2;
    UiText_SetValueIfChanged(v4, "10000", 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6964), "0", 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 7000), "100", 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6988), "0", 0, 0);
    sub_65869160(this);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6952), (char *)byte_659A8B98, 0, 0);
    v5 = *(_DWORD *)(this + 6876);
    *(_DWORD *)(v5 + 24) = 0;
    *(_DWORD *)(v5 + 200) = 0;
    v6 = *(_DWORD *)(this + 6880);
    *(_DWORD *)(v6 + 24) = 0;
    *(_DWORD *)(v6 + 200) = 0;
    v7 = *(_DWORD *)(this + 6884);
    *(_DWORD *)(v7 + 24) = 0;
    *(_DWORD *)(v7 + 200) = 0;
    v72 = 0;
    v73 = 0;
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6888) + 88))(*(_DWORD *)(this + 6888), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6860) + 88))(*(_DWORD *)(this + 6860), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6900) + 88))(*(_DWORD *)(this + 6900), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6892) + 88))(*(_DWORD *)(this + 6892), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6864) + 88))(*(_DWORD *)(this + 6864), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6868) + 88))(*(_DWORD *)(this + 6868), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6896) + 88))(*(_DWORD *)(this + 6896), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7104) + 88))(*(_DWORD *)(this + 7104), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7100) + 88))(*(_DWORD *)(this + 7100), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6928) + 88))(*(_DWORD *)(this + 6928), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6932) + 88))(*(_DWORD *)(this + 6932), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6936) + 88))(*(_DWORD *)(this + 6936), 0);
    v8 = *(_DWORD *)(this + 6940);
    *(_DWORD *)(v8 + 24) = 0;
    *(_DWORD *)(v8 + 200) = 0;
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6944) + 88))(*(_DWORD *)(this + 6944), 0);
    v9 = *(_DWORD *)(this + 6948);
    *(_DWORD *)(v9 + 24) = 0;
    *(_DWORD *)(v9 + 200) = 0;
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6952) + 88))(*(_DWORD *)(this + 6952), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6956) + 88))(*(_DWORD *)(this + 6956), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6960) + 88))(*(_DWORD *)(this + 6960), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6964) + 88))(*(_DWORD *)(this + 6964), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6968) + 88))(*(_DWORD *)(this + 6968), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6972) + 88))(*(_DWORD *)(this + 6972), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6976) + 88))(*(_DWORD *)(this + 6976), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6980) + 88))(*(_DWORD *)(this + 6980), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6984) + 88))(*(_DWORD *)(this + 6984), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6988) + 88))(*(_DWORD *)(this + 6988), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6992) + 88))(*(_DWORD *)(this + 6992), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6996) + 88))(*(_DWORD *)(this + 6996), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7000) + 88))(*(_DWORD *)(this + 7000), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7004) + 88))(*(_DWORD *)(this + 7004), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7008) + 88))(*(_DWORD *)(this + 7008), 0);
    v10 = *(_DWORD *)(this + 7012);
    *(_DWORD *)(v10 + 24) = 0;
    *(_DWORD *)(v10 + 196) = 0;
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7016) + 88))(*(_DWORD *)(this + 7016), 0);
    v11 = *(_DWORD *)(this + 7020);
    *(_DWORD *)(v11 + 24) = 0;
    *(_DWORD *)(v11 + 200) = 0;
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7024) + 88))(*(_DWORD *)(this + 7024), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7028) + 88))(*(_DWORD *)(this + 7028), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7032) + 88))(*(_DWORD *)(this + 7032), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7036) + 88))(*(_DWORD *)(this + 7036), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7040) + 88))(*(_DWORD *)(this + 7040), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7044) + 88))(*(_DWORD *)(this + 7044), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7048) + 88))(*(_DWORD *)(this + 7048), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7052) + 88))(*(_DWORD *)(this + 7052), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7056) + 88))(*(_DWORD *)(this + 7056), 0);
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 7060) + 88))(*(_DWORD *)(this + 7060), 0);
    v12 = *(_DWORD *)(this + 7064);
    *(_DWORD *)(v12 + 24) = 0;
    *(_DWORD *)(v12 + 200) = 0;
    v13 = *(_DWORD *)(this + 7068);
    *(_DWORD *)(v13 + 24) = 0;
    *(_DWORD *)(v13 + 200) = 0;
    v14 = *(_DWORD *)(this + 7072);
    *(_DWORD *)(v14 + 24) = 0;
    *(_DWORD *)(v14 + 200) = 0;
    switch ( *(_BYTE *)(this + 7096) )
    {
      case 2:
      case 0x18:
        InventoryUI_SetColumnCount(*(_DWORD *)(this + 6868), 144);
        TextInput_SetText(*(_DWORD **)(this + 6868), 596);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6868) + 108))(*(_DWORD *)(this + 6868), 480);
        v56 = *(_DWORD **)(this + 6868);
        v56[17] = v56[19] + 7;
        v57 = v56[20];
        v56[21] = 7;
        v56[22] = 17;
        v56[18] = v57 + 17;
        v58 = *(_DWORD **)(this + 6896);
        v59 = v58[19];
        v58[21] = 7;
        v60 = v58[20];
        v58[22] = 2;
        v58[17] = v59 + 7;
        v58[18] = v60 + 2;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6868) + 88))(*(_DWORD *)(this + 6868), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6896) + 88))(*(_DWORD *)(this + 6896), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7100) + 88))(*(_DWORD *)(this + 7100), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7104) + 88))(*(_DWORD *)(this + 7104), 1);
        v61 = *(_DWORD **)(this + 6872);
        v62 = v61[20];
        v63 = v61[19];
        v61[21] = 0;
        v61[22] = 502;
        v61[17] = v63;
        v61[18] = v62 + 502;
        return (unsigned __int8)GroupWindow_SetBackgroundImage(this, 999999999, 877, 520);
      case 3:
      case 6:
        v72 = 711;
        v73 = 335;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6860) + 108))(*(_DWORD *)(this + 6860), 288);
        TextInput_SetText(*(_DWORD **)(this + 6860), 452);
        v64 = *(_DWORD **)(this + 6900);
        v65 = v64[19];
        v66 = v64[20] + 2;
        v64[22] = 2;
        v64[18] = v66;
        v64[21] = 231;
        v64[17] = v65 + 231;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6888) + 88))(*(_DWORD *)(this + 6888), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6860) + 88))(*(_DWORD *)(this + 6860), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6900) + 88))(*(_DWORD *)(this + 6900), 1);
        v67 = *(_DWORD **)(this + 6872);
        v68 = v67[19];
        v67[18] = v67[20] + 312;
        v67[21] = 0;
        v67[22] = 312;
        v67[17] = v68;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6928) + 88))(*(_DWORD *)(this + 6928), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6932) + 88))(*(_DWORD *)(this + 6932), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6936) + 88))(*(_DWORD *)(this + 6936), 1);
        v69 = *(_DWORD **)(this + 6940);
        v69[6] = 1;
        v69[50] = 1;
        v69[8] = 1;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6944) + 88))(*(_DWORD *)(this + 6944), 1);
        v70 = *(_DWORD **)(this + 6948);
        v70[6] = 1;
        v70[50] = 1;
        v70[8] = 1;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6952) + 88))(*(_DWORD *)(this + 6952), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6956) + 88))(*(_DWORD *)(this + 6956), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6960) + 88))(*(_DWORD *)(this + 6960), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6964) + 88))(*(_DWORD *)(this + 6964), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6968) + 88))(*(_DWORD *)(this + 6968), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6972) + 88))(*(_DWORD *)(this + 6972), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6976) + 88))(*(_DWORD *)(this + 6976), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6980) + 88))(*(_DWORD *)(this + 6980), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6984) + 88))(*(_DWORD *)(this + 6984), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6988) + 88))(*(_DWORD *)(this + 6988), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6992) + 88))(*(_DWORD *)(this + 6992), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6996) + 88))(*(_DWORD *)(this + 6996), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7000) + 88))(*(_DWORD *)(this + 7000), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7004) + 88))(*(_DWORD *)(this + 7004), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7008) + 88))(*(_DWORD *)(this + 7008), 1);
        v71 = *(_DWORD *)(this + 7012);
        *(_DWORD *)(v71 + 24) = 1;
        *(_DWORD *)(v71 + 196) = 1;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7016) + 88))(*(_DWORD *)(this + 7016), 1);
        v39 = *(_DWORD **)(this + 7020);
        goto LABEL_7;
      case 5:
        v72 = 855;
        v73 = 520;
        InventoryUI_SetColumnCount(*(_DWORD *)(this + 6868), 164);
        TextInput_SetText(*(_DWORD **)(this + 6868), 184);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6868) + 108))(*(_DWORD *)(this + 6868), 288);
        v15 = *(_DWORD **)(this + 6868);
        v15[17] = v15[19] + 660;
        v16 = v15[20];
        v15[21] = 660;
        v15[22] = 17;
        v15[18] = v16 + 17;
        v17 = *(_DWORD **)(this + 6896);
        v18 = v17[19];
        v17[21] = 660;
        v19 = v17[20];
        v17[22] = 2;
        v17[17] = v18 + 660;
        v17[18] = v19 + 2;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6860) + 108))(*(_DWORD *)(this + 6860), 288);
        TextInput_SetText(*(_DWORD **)(this + 6860), 404);
        v20 = *(_DWORD **)(this + 6900);
        v21 = v20[19];
        v22 = v20[20];
        v20[21] = 183;
        v20[22] = 2;
        v20[18] = v22 + 2;
        v20[17] = v21 + 183;
        v23 = *(_DWORD **)(this + 6892);
        v23[17] = v23[19] + 252;
        v24 = v23[20];
        v23[21] = 252;
        v23[22] = 322;
        v23[18] = v24 + 322;
        v25 = *(_DWORD **)(this + 6864);
        v26 = v25[19] + 252;
        v25[21] = 252;
        v27 = v25[20];
        v25[22] = 338;
        v25[17] = v26;
        v25[18] = v27 + 338;
        TextInput_SetText(*(_DWORD **)(this + 6864), 596);
        v28 = *(_DWORD **)(this + 6876);
        v28[6] = 1;
        v28[50] = 1;
        v28[8] = 1;
        v29 = *(_DWORD **)(this + 6880);
        v29[6] = 1;
        v29[50] = 1;
        v29[8] = 1;
        v30 = *(_DWORD **)(this + 6884);
        v30[6] = 1;
        v30[50] = 1;
        v30[8] = 1;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6888) + 88))(*(_DWORD *)(this + 6888), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6860) + 88))(*(_DWORD *)(this + 6860), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6900) + 88))(*(_DWORD *)(this + 6900), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6864) + 88))(*(_DWORD *)(this + 6864), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6892) + 88))(*(_DWORD *)(this + 6892), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6868) + 88))(*(_DWORD *)(this + 6868), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6896) + 88))(*(_DWORD *)(this + 6896), 1);
        v31 = *(_DWORD **)(this + 6872);
        v32 = v31[19];
        v31[18] = v31[20] + 497;
        v31[21] = 0;
        v31[22] = 497;
        v31[17] = v32;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6928) + 88))(*(_DWORD *)(this + 6928), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6932) + 88))(*(_DWORD *)(this + 6932), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6936) + 88))(*(_DWORD *)(this + 6936), 1);
        v33 = *(_DWORD **)(this + 6940);
        v33[6] = 1;
        v33[50] = 1;
        v33[8] = 1;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6944) + 88))(*(_DWORD *)(this + 6944), 1);
        v34 = *(_DWORD **)(this + 6948);
        v34[6] = 1;
        v34[50] = 1;
        v34[8] = 1;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6952) + 88))(*(_DWORD *)(this + 6952), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6956) + 88))(*(_DWORD *)(this + 6956), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6960) + 88))(*(_DWORD *)(this + 6960), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6964) + 88))(*(_DWORD *)(this + 6964), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6968) + 88))(*(_DWORD *)(this + 6968), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6972) + 88))(*(_DWORD *)(this + 6972), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6976) + 88))(*(_DWORD *)(this + 6976), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6980) + 88))(*(_DWORD *)(this + 6980), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6984) + 88))(*(_DWORD *)(this + 6984), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6988) + 88))(*(_DWORD *)(this + 6988), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6992) + 88))(*(_DWORD *)(this + 6992), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6996) + 88))(*(_DWORD *)(this + 6996), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7000) + 88))(*(_DWORD *)(this + 7000), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7004) + 88))(*(_DWORD *)(this + 7004), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7008) + 88))(*(_DWORD *)(this + 7008), 1);
        v35 = *(_DWORD *)(this + 7012);
        *(_DWORD *)(v35 + 24) = 1;
        *(_DWORD *)(v35 + 196) = 1;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7016) + 88))(*(_DWORD *)(this + 7016), 1);
        v36 = *(_DWORD **)(this + 7020);
        v36[6] = 1;
        v36[50] = 1;
        v36[8] = 1;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7024) + 88))(*(_DWORD *)(this + 7024), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7028) + 88))(*(_DWORD *)(this + 7028), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7032) + 88))(*(_DWORD *)(this + 7032), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7036) + 88))(*(_DWORD *)(this + 7036), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7040) + 88))(*(_DWORD *)(this + 7040), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7044) + 88))(*(_DWORD *)(this + 7044), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7048) + 88))(*(_DWORD *)(this + 7048), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7052) + 88))(*(_DWORD *)(this + 7052), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7056) + 88))(*(_DWORD *)(this + 7056), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 7060) + 88))(*(_DWORD *)(this + 7060), 1);
        v37 = *(_DWORD **)(this + 7064);
        v37[6] = 1;
        v37[50] = 1;
        v37[8] = 1;
        v38 = *(_DWORD **)(this + 7068);
        v38[6] = 1;
        v38[50] = 1;
        v38[8] = 1;
        v39 = *(_DWORD **)(this + 7072);
LABEL_7:
        v39[8] = 1;
        v39[50] = 1;
        v39[6] = 1;
        goto LABEL_8;
      case 0x13:
        InventoryUI_SetColumnCount(*(_DWORD *)(this + 6868), 144);
        TextInput_SetText(*(_DWORD **)(this + 6868), 596);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6868) + 108))(*(_DWORD *)(this + 6868), 288);
        v40 = *(_DWORD **)(this + 6868);
        v40[17] = v40[19] + 7;
        v41 = v40[20];
        v40[21] = 7;
        v40[22] = 17;
        v40[18] = v41 + 17;
        v42 = *(_DWORD **)(this + 6896);
        v42[17] = v42[19] + 7;
        v43 = v42[20];
        v42[21] = 7;
        v42[22] = 2;
        v42[18] = v43 + 2;
        v44 = *(_DWORD **)(this + 6892);
        v45 = v44[19] + 7;
        v44[21] = 7;
        v46 = v44[20];
        v44[22] = 322;
        v44[17] = v45;
        v44[18] = v46 + 322;
        TextInput_SetText(*(_DWORD **)(this + 6864), 596);
        v47 = *(_DWORD **)(this + 6864);
        v48 = v47[19];
        v49 = v47[20];
        v47[21] = 7;
        v47[22] = 338;
        v47[17] = v48 + 7;
        v47[18] = v49 + 338;
        v50 = *(_DWORD **)(this + 6876);
        v50[6] = 1;
        v50[50] = 1;
        v50[8] = 1;
        v51 = *(_DWORD **)(this + 6880);
        v51[6] = 1;
        v51[50] = 1;
        v51[8] = 1;
        v52 = *(_DWORD **)(this + 6884);
        v52[6] = 1;
        v52[50] = 1;
        v52[8] = 1;
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6864) + 88))(*(_DWORD *)(this + 6864), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6892) + 88))(*(_DWORD *)(this + 6892), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6868) + 88))(*(_DWORD *)(this + 6868), 1);
        (*(void (__thiscall **)(_DWORD, int))(**(_DWORD **)(this + 6896) + 88))(*(_DWORD *)(this + 6896), 1);
        v53 = *(_DWORD **)(this + 6872);
        v54 = v53[20];
        v55 = v53[19];
        v53[21] = 0;
        v53[22] = 497;
        v53[17] = v55;
        v53[18] = v54 + 497;
        return (unsigned __int8)GroupWindow_SetBackgroundImage(this, 999999999, 610, 520);
      default:
LABEL_8:
        result = (unsigned __int8)GroupWindow_SetBackgroundImage(this, 999999999, v72, v73);
        break;
    }
  }
  return result;
}

//----- (6586A530) --------------------------------------------------------
char **__thiscall sub_6586A530(char **this, char **a2, char *a3, char *a4)
{
  char *v4; // edx
  char *v5; // ebx
  char **v6; // esi
  char *v7; // eax
  const void *v8; // esi
  void *v9; // edi

  v4 = a4;
  v5 = a3;
  v6 = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v7 = *(this + 2);
    if ( a4 != v7 )
    {
      do
      {
        v8 = v4;
        v9 = v5;
        v4 += 44;
        v5 += 44;
        qmemcpy(v9, v8, 0x2Cu);
      }
      while ( v4 != v7 );
      v6 = a2;
    }
    *(this + 2) = v5;
  }
  return v6;
}

//----- (6586B5F0) --------------------------------------------------------
int __thiscall MarketWindow_SendSearchRequest(int this)
{
  int result; // eax
  char *v3; // [esp+8h] [ebp-59Ch] BYREF
  _DWORD v4[269]; // [esp+Ch] [ebp-598h] BYREF
  char v5; // [esp+440h] [ebp-164h]
  int v6; // [esp+5A0h] [ebp-4h]

  result = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 2);
  if ( !(_BYTE)result )
  {
    ItemList_ClearAll(*(int **)(this + 7104));
    sub_6586A530(
      (char **)dword_65ABF734 + 471025,
      &v3,
      *((char **)dword_65ABF734 + 471026),
      *((char **)dword_65ABF734 + 471027));
    Packet_ID_MARKET_ctor((char *)v4);
    v5 = *(_BYTE *)(this + 7096) != 2 ? 25 : 4;
    v6 = 0;
    v4[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    Packet_ID_AC_write((int)v4);
    LTClient_SendPacket_BuildIfNeeded(v4, 2, 1, 3, 0);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 2);
    v6 = -1;
    return Packet_ID_AC_dtor((char *)v4);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6586D5E0) --------------------------------------------------------
void __thiscall MarketWindow_RequestItemDetails(int this)
{
  _DWORD *v2; // eax
  char v3; // al
  __int16 v4; // [esp+Ch] [ebp-34h] BYREF
  void *v5; // [esp+14h] [ebp-2Ch]
  int v6; // [esp+18h] [ebp-28h]
  int v7; // [esp+1Ch] [ebp-24h]
  int v8; // [esp+20h] [ebp-20h]
  int v9; // [esp+24h] [ebp-1Ch]
  int v10; // [esp+28h] [ebp-18h]
  char v11; // [esp+2Ch] [ebp-14h]
  int v12; // [esp+3Ch] [ebp-4h]

  v2 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
  v5 = 0;
  v6 = 0;
  v7 = 0;
  v4 = 0;
  v11 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v12 = 0;
  sub_659407D0(v2, (int)&v4, this + 7076);
  v3 = *(_BYTE *)(this + 7096);
  if ( v3 == 5 || v3 == 19 || v3 == 6 )
    Inventory_ProcessItemSlots(*(_DWORD *)(this + 6860), &v4, 38, 1);
  else
    Inventory_ProcessItemSlots(*(_DWORD *)(this + 6860), &v4, 2, 1);
  v12 = -1;
  if ( v5 )
  {
    ItemVector_DestroyRange((int)v5, v6);
    operator delete(v5);
  }
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65870630) --------------------------------------------------------
int __thiscall sub_65870630(int this)
{
  unsigned __int8 v2; // al
  int v3; // edi
  char *v4; // eax
  int result; // eax

  v2 = *(_BYTE *)(this + 6589);
  if ( v2 )
  {
    if ( *(_BYTE *)(this + 6588) > v2 )
      *(_BYTE *)(this + 6588) = v2;
    v3 = (*(int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
           g_pILTClient,
           4336,
           *(unsigned __int8 *)(this + 6588),
           v2);
    if ( v3 )
      v4 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
    else
      v4 = (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6576), v4, 0, 0);
    if ( v3 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v3);
    result = 1;
    *(_DWORD *)(*(_DWORD *)(this + 6580) + 32) = *(_BYTE *)(this + 6588) > 1u;
    *(_DWORD *)(*(_DWORD *)(this + 6584) + 32) = *(_BYTE *)(this + 6588) < *(_BYTE *)(this + 6589);
  }
  else
  {
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6576), (char *)byte_659A8B98, 0, 0);
    *(_DWORD *)(*(_DWORD *)(this + 6580) + 32) = 0;
    result = *(_DWORD *)(this + 6584);
    *(_DWORD *)(result + 32) = 0;
  }
  return result;
}

//----- (65870720) --------------------------------------------------------
int __thiscall sub_65870720(int this)
{
  unsigned __int8 v2; // al
  int v3; // edi
  char *v4; // eax
  int result; // eax

  v2 = *(_BYTE *)(this + 6609);
  if ( v2 )
  {
    if ( *(_BYTE *)(this + 6608) > v2 )
      *(_BYTE *)(this + 6608) = v2;
    v3 = (*(int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
           g_pILTClient,
           4336,
           *(unsigned __int8 *)(this + 6608),
           v2);
    if ( v3 )
      v4 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
    else
      v4 = (char *)byte_659A8B98;
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6596), v4, 0, 0);
    if ( v3 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v3);
    result = 1;
    *(_DWORD *)(*(_DWORD *)(this + 6600) + 32) = *(_BYTE *)(this + 6608) > 1u;
    *(_DWORD *)(*(_DWORD *)(this + 6604) + 32) = *(_BYTE *)(this + 6608) < *(_BYTE *)(this + 6609);
  }
  else
  {
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6596), (char *)byte_659A8B98, 0, 0);
    *(_DWORD *)(*(_DWORD *)(this + 6600) + 32) = 0;
    result = *(_DWORD *)(this + 6604);
    *(_DWORD *)(result + 32) = 0;
  }
  return result;
}

//----- (65870A20) --------------------------------------------------------
void __thiscall sub_65870A20(int this)
{
  unsigned __int16 *v2; // ecx
  int v3; // edi
  int IconHandle; // eax
  int v5; // edi
  char *v6; // eax
  int v7; // ecx
  unsigned __int16 v8; // ax
  unsigned int v9; // edi
  int v10; // eax
  char *v11; // eax
  double v12; // st7
  double v13; // st7
  int v14; // eax
  char *v15; // eax
  double v16; // st7
  unsigned __int16 v17; // ax
  int v18; // eax
  char *v19; // eax
  _BYTE v20[28]; // [esp-24h] [ebp-84h] BYREF
  int v21; // [esp-8h] [ebp-68h]
  char *v22; // [esp-4h] [ebp-64h]
  _BYTE v23[28]; // [esp+10h] [ebp-50h] BYREF
  _BYTE v24[28]; // [esp+2Ch] [ebp-34h] BYREF
  unsigned int Value[2]; // [esp+48h] [ebp-18h]
  int v26; // [esp+5Ch] [ebp-4h]

  if ( !*(_DWORD *)(this + 6784) || (v2 = *(unsigned __int16 **)(this + 6780)) == 0 || !ItemStructA_IsValid(v2) )
  {
    (*(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(this + 6612) + 128))(*(_DWORD *)(this + 6612), 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6616), (char *)byte_659A8B98, 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6624), (char *)byte_659A8B98, 0, 0);
    v22 = 0;
    v21 = 0;
LABEL_16:
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6644), (char *)byte_659A8B98, v21, v22);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6648), (char *)byte_659A8B98, 0, 0);
    v22 = 0;
    v21 = 0;
    goto LABEL_17;
  }
  v3 = **(_DWORD **)(this + 6612);
  IconHandle = ItemTemplate_GetIconHandle((int **)dword_65ABF748, **(_WORD **)(this + 6780));
  (*(void (__thiscall **)(_DWORD, int))(v3 + 128))(*(_DWORD *)(this + 6612), IconHandle);
  v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
         g_pILTClient,
         **(unsigned __int16 **)(this + 6780) + 30000);
  if ( v5 )
    v6 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
  else
    v6 = (char *)byte_659A8B98;
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6616), v6, 1, 0);
  if ( v5 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
  v7 = *(_DWORD *)(this + 6624);
  if ( *(_DWORD *)(v7 + 176) )
    v8 = atoi(*(const char **)(v7 + 176));
  else
    v8 = 0;
  v22 = 0;
  *(_WORD *)(this + 6710) = v8;
  v21 = 0;
  if ( !v8 )
    goto LABEL_16;
  v9 = *(_DWORD *)(*(_DWORD *)(this + 6784) + 24) * v8;
  Value[1] = (unsigned int)v20;
  String_FromU32(v20, v9);
  v10 = FormatString((int)v24, (int)"{0} <font size=10 color=FFD26400>UC");
  v26 = 0;
  v11 = (char *)std::string::c_str(v10);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6644), v11, v21, v22);
  v26 = -1;
  std::string::~string(v24);
  v12 = sub_658602B0(this + 6368) + 1.0;
  v22 = 0;
  v13 = v12 * (double)v9;
  v21 = 0;
  *(_QWORD *)Value = (__int64)v13;
  Value[1] = (unsigned int)v20;
  String_FromU32(v20, (__int64)v13);
  v14 = FormatString((int)v24, (int)"{0} <font size=10 color=FFD26400>UC");
  v26 = 1;
  v15 = (char *)std::string::c_str(v14);
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6648), v15, v21, v22);
  v26 = -1;
  std::string::~string(v24);
  v16 = sub_658602B0(this + 6368);
  v22 = 0;
  v21 = 0;
  if ( v16 > 0.0 )
  {
    v17 = sub_65870A00(this + 6368);
    Value[1] = (unsigned int)v20;
    String_FromU16(v20, v17);
    v18 = FormatString((int)v23, (int)"+ {0}%");
    v26 = 2;
    v19 = (char *)std::string::c_str(v18);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 6652), v19, v21, v22);
    v26 = -1;
    std::string::~string(v23);
    return;
  }
LABEL_17:
  UiText_SetValueIfChanged(*(_DWORD *)(this + 6652), (char *)byte_659A8B98, v21, v22);
}
// 65870A00: using guessed type int __thiscall sub_65870A00(_DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65ABF748: using guessed type int dword_65ABF748;

//----- (65871150) --------------------------------------------------------
void __thiscall sub_65871150(int this)
{
  int v2; // eax
  int v3; // ecx
  int v4; // eax
  int v5; // edx
  __int16 v6; // ax
  __int16 v7; // ax
  int v8; // ecx
  __int16 v9; // ax
  int v10; // edx

  if ( *(_DWORD *)(*(_DWORD *)(this + 6540) + 176) )
    v2 = atoi(*(const char **)(*(_DWORD *)(this + 6540) + 176));
  else
    v2 = 0;
  v3 = *(_DWORD *)(this + 6544);
  *(_DWORD *)(this + 6684) = v2;
  if ( *(_DWORD *)(v3 + 176) )
    v4 = atoi(*(const char **)(v3 + 176));
  else
    v4 = 0;
  v5 = *(_DWORD *)(this + 6556);
  *(_DWORD *)(this + 6688) = v4;
  if ( *(_DWORD *)(v5 + 176) )
    v6 = atoi(*(const char **)(v5 + 176));
  else
    v6 = 100;
  *(_WORD *)(this + 6692) = v6;
  if ( *(_DWORD *)(*(_DWORD *)(this + 6560) + 176) )
    v7 = atoi(*(const char **)(*(_DWORD *)(this + 6560) + 176));
  else
    v7 = 100;
  v8 = *(_DWORD *)(this + 6548);
  *(_WORD *)(this + 6694) = v7;
  if ( *(_DWORD *)(v8 + 176) )
    v9 = atoi(*(const char **)(v8 + 176));
  else
    v9 = 0;
  v10 = *(_DWORD *)(this + 6552);
  *(_WORD *)(this + 6696) = v9;
  if ( *(_DWORD *)(v10 + 176) )
    *(_WORD *)(this + 6698) = atoi(*(const char **)(v10 + 176));
  else
    *(_WORD *)(this + 6698) = 10000;
  JUMPOUT(0x65870D20);
}
// 65871230: control flows out of bounds to 65870D20

//----- (65871770) --------------------------------------------------------
void __thiscall sub_65871770(int this)
{
  char Dword_this; // al
  char IsValidTypeCombo; // bl
  void *v4; // edi
  const char *v5; // eax
  void *v6; // edi
  const char *v7; // eax
  void *v8; // edi
  int v9; // eax

  PtrVector_FreeAll_thunk(*(_DWORD **)(this + 6668));
  Dword_this = SharedMem_ReadDword_this(dword_65ABF73C, 0);
  IsValidTypeCombo = Production_IsValidTypeCombo(Dword_this, 3, 0);
  if ( !IsValidTypeCombo && *(_BYTE *)(this + 6672) == 2 )
    *(_BYTE *)(this + 6672) = 1;
  v4 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 22542);
  UiList_AddEntry(*(int ***)(this + 6668), v4, 31, 1, 0);
  if ( *(_BYTE *)(this + 6672) == 1 )
  {
    if ( v4 )
      v5 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
    else
      v5 = byte_659A8B98;
    UiList_SetSelectionText(*(_DWORD *)(this + 6668), (int)v5, 1);
  }
  if ( IsValidTypeCombo )
  {
    v6 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 22543);
    UiList_AddEntry(*(int ***)(this + 6668), v6, 31, 2, 0);
    if ( *(_BYTE *)(this + 6672) == 2 )
    {
      if ( v6 )
        v7 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
      else
        v7 = byte_659A8B98;
      UiList_SetSelectionText(*(_DWORD *)(this + 6668), (int)v7, 1);
    }
  }
  v8 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 22544);
  UiList_AddEntry(*(int ***)(this + 6668), v8, 31, 3, 0);
  if ( *(_BYTE *)(this + 6672) == 3 )
  {
    if ( v8 )
    {
      v9 = (*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
      UiList_SetSelectionText(*(_DWORD *)(this + 6668), v9, 1);
    }
    else
    {
      UiList_SetSelectionText(*(_DWORD *)(this + 6668), (int)byte_659A8B98, 1);
    }
  }
}

//----- (65873320) --------------------------------------------------------
int __thiscall TerminalShopUI_UpdateDisplay(int this, char a2)
{
  int result; // eax
  int Dword_this; // eax
  char v5; // dl
  double v6; // st7
  char *v7; // [esp+10h] [ebp-59Ch] BYREF
  _DWORD v8[269]; // [esp+14h] [ebp-598h] BYREF
  char v9; // [esp+448h] [ebp-164h]
  char v10; // [esp+46Ch] [ebp-140h]
  _BYTE v11[300]; // [esp+470h] [ebp-13Ch] BYREF
  int v12; // [esp+5A8h] [ebp-4h]

  result = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 2);
  if ( !(_BYTE)result )
  {
    sub_65871770(this);
    sub_65871150(this);
    ItemList_ClearAll(*(int **)(this + 6572));
    ItemList_ClearAll(*(int **)(this + 6592));
    sub_6584DE10((char **)(this + 6716), &v7, *(char **)(this + 6720), *(char **)(this + 6724));
    sub_6584E2D0((char *)(this + 6732));
    *(_DWORD *)(this + 6780) = 0;
    *(_DWORD *)(this + 6784) = 0;
    sub_65870A20(this);
    *(_BYTE *)(this + 6588) = 1;
    *(_BYTE *)(this + 6589) = 0;
    sub_65870630(this);
    *(_BYTE *)(this + 6608) = 1;
    *(_BYTE *)(this + 6609) = 0;
    sub_65870720(this);
    Packet_ID_MARKET_ctor((char *)v8);
    v12 = 0;
    v9 = 21;
    Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    v5 = *(_BYTE *)(this + 6708);
    v10 = a2;
    v8[268] = Dword_this;
    qmemcpy(v11, (const void *)(this + 6676), 0x20u);
    v11[32] = v5;
    Packet_ID_AC_write((int)v8);
    LTClient_SendPacket_BuildIfNeeded(v8, 2, 1, 3, 0);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 2);
    v6 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
    v12 = -1;
    *(float *)(this + 6712) = v6 + 2.5;
    return Packet_ID_AC_dtor((char *)v8);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65875140) --------------------------------------------------------
char __thiscall sub_65875140(char *this, char a2, char a3)
{
  int v3; // esi
  _BYTE *i; // eax
  char v5; // cl

  v3 = 0;
  for ( i = this + 6949; ; i += 8 )
  {
    v5 = *(i - 1);
    if ( v5 == a2 && *i == a3 )
      break;
    if ( v5 == a3 && *i == a2 )
      break;
    if ( (unsigned int)++v3 >= 0x20 )
      return 0;
  }
  return 1;
}

//----- (65875300) --------------------------------------------------------
double __thiscall ResourceArray_CountById(_DWORD *this, int a2)
{
  int v3; // edx
  unsigned int v4; // esi
  _DWORD *v5; // eax
  int v6; // ecx

  if ( !a2 )
    return 0.0;
  v3 = (*(this + 3) - *(this + 2)) >> 3;
  if ( !v3 )
    return 0.0;
  v4 = 0;
  v5 = (_DWORD *)(*(this + 2) + 4);
  v6 = (*(this + 3) - *(this + 2)) >> 3;
  do
  {
    if ( *v5 == a2 )
      ++v4;
    v5 += 2;
    --v6;
  }
  while ( v6 );
  if ( !v4 )
    return 0.0;
  return (float)((double)v4 / (double)(unsigned int)v3);
}

//----- (65875380) --------------------------------------------------------
int __thiscall ResourceArray_Clear(_DWORD *this, char a2)
{
  int v2; // esi
  int v3; // eax
  unsigned __int8 v4; // cl

  v2 = *(this + 1);
  v3 = (*(this + 2) - v2) / 60;
  v4 = 0;
  if ( !(_BYTE)v3 )
    return 0;
  while ( *(_BYTE *)(v2 + 60 * v4) != a2 )
  {
    if ( ++v4 >= (unsigned __int8)v3 )
      return 0;
  }
  return v2 + 60 * v4;
}

//----- (65875430) --------------------------------------------------------
int __thiscall MineralScanner_HandleScanResult(int **this)
{
  int **v1; // ebx
  int *v2; // ecx
  int result; // eax
  int v4; // esi
  unsigned int v5; // edi
  unsigned int v6; // edx
  int v7; // edi
  bool v8; // zf
  int v9; // edi
  int (__thiscall ***Simple)(_DWORD, int); // ebx
  int v11; // eax
  const char *v12; // eax
  int (__thiscall ***v13)(_DWORD, int); // esi
  int v14; // ecx
  int v15; // edx
  int v16; // esi
  unsigned int v17; // eax
  int v18; // ebx
  _BYTE *v19; // edi
  int v20; // esi
  int v21; // eax
  int v22; // eax
  int (__thiscall ***v23)(_DWORD, int); // esi
  int (__thiscall **v24)(_DWORD, int); // edx
  _DWORD *v25; // esi
  int v26; // ecx
  int v27; // ecx
  _BYTE v28[24]; // [esp-58h] [ebp-E4h] BYREF
  int v29; // [esp-40h] [ebp-CCh]
  _BYTE v30[28]; // [esp-3Ch] [ebp-C8h] BYREF
  int v31; // [esp-20h] [ebp-ACh]
  int v32; // [esp-1Ch] [ebp-A8h]
  int v33; // [esp-18h] [ebp-A4h]
  int v34; // [esp-14h] [ebp-A0h]
  int v35; // [esp-10h] [ebp-9Ch]
  void *v36; // [esp-Ch] [ebp-98h]
  int v37; // [esp-8h] [ebp-94h]
  int (__thiscall ***v38)(_DWORD, int); // [esp-4h] [ebp-90h]
  double v39; // [esp+0h] [ebp-8Ch]
  _BYTE v40[28]; // [esp+18h] [ebp-74h] BYREF
  _BYTE *v41; // [esp+34h] [ebp-58h]
  _DWORD v42[2]; // [esp+38h] [ebp-54h] BYREF
  int v43; // [esp+40h] [ebp-4Ch]
  int v44; // [esp+44h] [ebp-48h]
  int v45; // [esp+48h] [ebp-44h]
  unsigned int v46; // [esp+4Ch] [ebp-40h]
  int (__thiscall ***v47)(_DWORD, int); // [esp+50h] [ebp-3Ch]
  int v48; // [esp+54h] [ebp-38h]
  int v49; // [esp+58h] [ebp-34h]
  int v50; // [esp+5Ch] [ebp-30h]
  unsigned int v51; // [esp+60h] [ebp-2Ch]
  float v52; // [esp+64h] [ebp-28h]
  unsigned int **v53; // [esp+68h] [ebp-24h]
  char v54[16]; // [esp+6Ch] [ebp-20h] BYREF
  int v55; // [esp+88h] [ebp-4h]

  v1 = this;
  v2 = *(this + 1809);
  v53 = (unsigned int **)v1;
  ListBox_ClearItems(v2);
  result = ResourceArray_Clear(v1 + 1686, *((_BYTE *)v1 + 6792));
  v4 = result;
  v5 = 0;
  v48 = result;
  if ( result )
  {
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
    if ( result )
    {
      v42[0] = 1;
      v42[1] = 1;
      v43 = 0;
      v44 = 20;
      v6 = (int)((unsigned __int64)(780903145LL * (*(_DWORD *)(v4 + 28) - *(_DWORD *)(v4 + 24))) >> 32) >> 4;
      v46 = 0;
      if ( v6 + (v6 >> 31) )
      {
        v49 = 0;
        while ( 1 )
        {
          if ( v5 >= (*(_DWORD *)(v4 + 28) - *(_DWORD *)(v4 + 24)) / 88 )
            goto LABEL_29;
          v7 = *(_DWORD *)(v4 + 24);
          v8 = v49 + v7 == 0;
          v9 = v49 + v7;
          v45 = v9;
          if ( v8 )
            goto LABEL_29;
          Simple = UiWidget_CreateSimple(0, 0, 0, 0, 0, (*(_DWORD *)(v9 + 8) - *(_DWORD *)(v9 + 4)) / 52 != 0);
          if ( Simple )
            break;
LABEL_28:
          v1 = (int **)v53;
LABEL_29:
          v27 = *(_DWORD *)(v4 + 28) - *(_DWORD *)(v4 + 24);
          v49 += 88;
          v5 = v46 + 1;
          v46 = v5;
          if ( v5 >= v27 / 88 )
            goto LABEL_30;
        }
        v11 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                g_pILTClient,
                *(unsigned __int8 *)(v9 + 24) + 21600);
        v52 = *(float *)&v11;
        if ( v11 )
          v12 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v11);
        else
          v12 = byte_659A8B98;
        v13 = UiWidget_Create(v53, 0, (int)v12, 200, 410, 0, 0, 1, (int)&unk_65A5C730, 2, 0, 0, 0);
        if ( v52 != 0.0 )
          (*(void (__thiscall **)(int, float))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, COERCE_FLOAT(LODWORD(v52)));
        if ( v13 )
        {
          v14 = (int)v13[19] + 3;
          v15 = (int)(v13[20] + 1);
          *(_QWORD *)&v39 = (unsigned int)v13;
          v38 = Simple;
          v13[21] = (int (__thiscall **)(_DWORD, int))3;
          v13[22] = (int (__thiscall **)(_DWORD, int))4;
          v13[17] = (int (__thiscall **)(_DWORD, int))v14;
          v13[18] = (int (__thiscall **)(_DWORD, int))v15;
          Button_AddCallbacks((int)v38, SLODWORD(v39));
          ListBox_AddItem(v53[1809], (int)Simple);
          v16 = *(_DWORD *)(v9 + 4);
          v17 = (*(_DWORD *)(v9 + 8) - v16) / 52;
          v51 = 0;
          if ( v17 )
          {
            v50 = 0;
            if ( v51 >= v17 )
              goto LABEL_26;
            do
            {
              v18 = v50 + v16;
              if ( v50 + v16 )
              {
                if ( !*(_DWORD *)(v18 + 44) )
                {
                  v47 = UiWidget_CreateSimple(0, 0, 0, 0, (void *)1, 0);
                  if ( v47 )
                  {
                    LODWORD(v52) = *(unsigned __int16 *)(v18 + 40);
                    v52 = (double)SLODWORD(v52) / 10000.0;
                    sprintf(v54, "%.2f", v52 * 100.0);
                    v19 = UiWidget_CreateWithCallback(v53, 0, 0, 0);
                    if ( v19 )
                    {
                      v20 = (*(int (__cdecl **)(int, int, _DWORD))(g_pILTClient + 312))(237, 20, 0);
                      if ( v20 )
                      {
                        if ( v52 > 0.0 )
                        {
                          v43 = (int)(v52 * 237.0);
                          (*(void (__cdecl **)(int, _DWORD *, int))(g_pILTClient + 404))(v20, v42, -2141824657);
                        }
                        (*(void (__cdecl **)(int))(g_pILTClient + 272))(v20);
                        (*(void (__thiscall **)(_BYTE *, int))(*(_DWORD *)v19 + 128))(v19, v20);
                        v39 = 0.0;
                        v38 = 0;
                        v37 = 2;
                        v36 = &unk_65A5C730;
                        v35 = 1;
                        v34 = 0;
                        v33 = 0;
                        v32 = 410;
                        v31 = 200;
                        v52 = COERCE_FLOAT(v30);
                        v29 = v18 + 4;
                        v19[256] = 1;
                        String_AssignFromPtr(v30, v29);
                        v41 = v28;
                        v55 = 0;
                        String_AssignFromPtr(v28, (int)v54);
                        v55 = -1;
                        v21 = FormatString_Args((int)v40, (int)"{0}% - {1}");
                        v55 = 1;
                        v22 = std::string::c_str(v21);
                        v23 = UiWidget_Create(
                                v53,
                                0,
                                v22,
                                v31,
                                v32,
                                v33,
                                v34,
                                v35,
                                (int)v36,
                                v37,
                                (int)v38,
                                SLODWORD(v39),
                                SHIDWORD(v39));
                        v55 = -1;
                        std::string::~string(v40);
                        if ( v23 )
                        {
                          CWindow_SetOffset(v23, 3, 4);
                          v24 = (int (__thiscall **)(_DWORD, int))*(unsigned __int16 *)(v18 + 40);
                          *(_QWORD *)&v39 = (unsigned int)v23;
                          v23[126] = v24;
                          v23[125] = (int (__thiscall **)(_DWORD, int))1;
                          v25 = v47;
                          Button_AddCallbacks((int)v47, (int)v19);
                          ChatWindow_AddLine(v53[1809], v25);
                        }
                      }
                    }
                    v9 = v45;
                  }
                }
              }
LABEL_26:
              v16 = *(_DWORD *)(v9 + 4);
              v26 = *(_DWORD *)(v9 + 8);
              ++v51;
              v50 += 52;
            }
            while ( v51 < (v26 - v16) / 52 );
          }
        }
        v4 = v48;
        goto LABEL_28;
      }
LABEL_30:
      v1[1809][671] = 0;
      v1[1809][670] = 1;
      ListBox_RefreshDisplay(v1[1809]);
      return ListBox_Reset(v1[1809]);
    }
  }
  return result;
}
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;

//----- (658758C0) --------------------------------------------------------
void __thiscall MineralScanner_UpdateDisplay(_DWORD *this)
{
  _DWORD *v2; // edi
  int v3; // ebx
  int v4; // eax
  unsigned __int8 v5; // cl
  int v6; // eax
  unsigned __int8 v7; // cl
  int v8; // eax
  char v9; // di
  char v10; // bl
  int v11; // ebx
  _DWORD *v12; // edi
  int v13; // ebx
  int v14; // eax
  _DWORD *v15; // edi
  int v16; // ebx
  int v17; // ebx
  int *v18; // ecx
  double v19; // st7
  unsigned __int8 v20; // bl
  int v21; // eax
  _DWORD *v22; // edi
  float v23; // [esp+0h] [ebp-B8h]
  float v24; // [esp+4h] [ebp-B4h]
  float v25; // [esp+8h] [ebp-B0h]
  float v26; // [esp+Ch] [ebp-ACh]
  int v27; // [esp+30h] [ebp-88h]
  int v28; // [esp+34h] [ebp-84h]
  int v29; // [esp+40h] [ebp-78h]
  int v30; // [esp+48h] [ebp-70h]
  int v31; // [esp+50h] [ebp-68h]
  int v32; // [esp+58h] [ebp-60h]
  int v33; // [esp+5Ch] [ebp-5Ch]
  int v34; // [esp+68h] [ebp-50h]
  _DWORD v35[3]; // [esp+6Ch] [ebp-4Ch] BYREF
  int v36; // [esp+78h] [ebp-40h] BYREF
  int v37; // [esp+7Ch] [ebp-3Ch] BYREF
  int v38; // [esp+80h] [ebp-38h] BYREF
  void *v39; // [esp+84h] [ebp-34h]
  int v40; // [esp+88h] [ebp-30h]
  int v41; // [esp+8Ch] [ebp-2Ch]
  int v42; // [esp+90h] [ebp-28h]
  int v43; // [esp+94h] [ebp-24h]
  int v44; // [esp+98h] [ebp-20h]
  int v45; // [esp+9Ch] [ebp-1Ch]
  void *v46; // [esp+A0h] [ebp-18h]
  float v47; // [esp+A4h] [ebp-14h] BYREF
  char v48; // [esp+AAh] [ebp-Eh]
  unsigned __int8 v49; // [esp+ABh] [ebp-Dh]
  int v50; // [esp+B4h] [ebp-4h]

  v2 = this + 1738;
  v3 = 32;
  do
  {
    v4 = *v2;
    *((_BYTE *)v2 - 4) = 0;
    *((_BYTE *)v2 - 3) = 0;
    if ( v4 && !(*(int (__cdecl **)(int))(g_pILTClient + 316))(v4) )
      *v2 = 0;
    v2 += 2;
    --v3;
  }
  while ( v3 );
  v35[0] = -2144946758;
  v35[1] = -2143766523;
  v35[2] = -2135284186;
  v36 = -2134325048;
  v37 = -2131108096;
  v49 = 0;
  LOBYTE(v42) = SharedMem_ReadDword_this(dword_65ABF73C, 0);
  if ( sub_65955B80(v42) )
    LOBYTE(v42) = 5;
  v39 = 0;
  v40 = 0;
  v41 = 0;
  v5 = 0;
  v50 = 0;
  LOBYTE(v43) = 0;
  do
  {
    if ( (unsigned __int8)(v5 - 1) <= 0x1Eu )
    {
      v6 = *(this + v5 + 1699);
      if ( v6 )
      {
        if ( *(_DWORD *)(v6 + 24) )
        {
          LOBYTE(v45) = v5;
          if ( sub_65955B80(v43) )
            LOBYTE(v45) = 5;
          v7 = 0;
          LOBYTE(v44) = 0;
          while ( 1 )
          {
            if ( (unsigned __int8)(v7 - 1) > 0x1Eu )
              goto LABEL_36;
            v8 = *(this + v7 + 1699);
            if ( !v8 || !*(_DWORD *)(v8 + 24) )
              goto LABEL_36;
            LOBYTE(v46) = v7;
            if ( sub_65955B80(v44) )
              LOBYTE(v46) = 5;
            v9 = (char)v46;
            v10 = v45;
            if ( !sub_65875140((char *)this, v45, (char)v46) )
            {
              v47 = 0.0;
              StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v47);
              if ( sub_659565D0(v10, v9, LOBYTE(v47)) )
              {
                v48 = 1;
                goto LABEL_25;
              }
              DwordVector_CopyFrom((int)&v38, (int)(this + 1693));
              v47 = 0.0;
              StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v47);
              if ( sub_65956800(v10, v9, LOBYTE(v47), (int)&v38) )
              {
                v48 = 0;
LABEL_25:
                v11 = *(_DWORD *)(*(this + (unsigned __int8)v45 + 1699) + 84);
                v12 = this + (unsigned __int8)v45 + 1699;
                v28 = *(_DWORD *)(*(this + 1801) + 84);
                v32 = v11 + (*(int (__thiscall **)(_DWORD))(*(_DWORD *)*v12 + 16))(*v12) / 2 - v28;
                v13 = *(_DWORD *)(*v12 + 88);
                v30 = *(_DWORD *)(*(this + 1801) + 88);
                v14 = (*(int (__thiscall **)(_DWORD))(*(_DWORD *)*v12 + 20))(*v12);
                v15 = this + (unsigned __int8)v46 + 1699;
                v27 = v13 + v14 / 2 - v30;
                v16 = *(_DWORD *)(*v15 + 84);
                v33 = *(_DWORD *)(*(this + 1801) + 84);
                v29 = v16 + (*(int (__thiscall **)(_DWORD))(*(_DWORD *)*v15 + 16))(*v15) / 2 - v33;
                v17 = *(_DWORD *)(*v15 + 88);
                v31 = *(_DWORD *)(*(this + 1801) + 88);
                v34 = v17 + (*(int (__thiscall **)(_DWORD))(*(_DWORD *)*v15 + 20))(*v15) / 2 - v31;
                if ( v48 )
                {
                  if ( (_BYTE)v45 == 30 || (v18 = v35, (_BYTE)v46 == 30) )
                    v18 = &v36;
                }
                else
                {
                  v18 = &v37;
                }
                if ( (_BYTE)v42 == (_BYTE)v45 || (_BYTE)v42 == (_BYTE)v46 )
                  v19 = 0.69999999;
                else
                  v19 = 0.2;
                v20 = v49;
                v47 = v19;
                v21 = v49;
                *((_BYTE *)this + 8 * v49 + 6948) = v45;
                *((_BYTE *)this + 8 * v21 + 6949) = (_BYTE)v46;
                v22 = this + 2 * v21 + 1738;
                v26 = (float)v34;
                v25 = (float)v29;
                v24 = (float)v27;
                v23 = (float)v32;
                Render_DrawRotatedLine(*(float *)&v22, v23, v24, v25, v26, 2, *v18, 0);
                (*(void (__cdecl **)(_DWORD, float))(g_pILTClient + 412))(*v22, COERCE_FLOAT(LODWORD(v47)));
                v49 = v20 + 1;
                if ( (unsigned __int8)(v20 + 1) >= 0x20u )
                {
                  Vector_FreeBuffer((int)&v38);
                  return;
                }
              }
            }
            v7 = v44;
LABEL_36:
            LOBYTE(v44) = ++v7;
            if ( v7 >= 0x20u )
            {
              v5 = v43;
              break;
            }
          }
        }
      }
    }
    LOBYTE(v43) = ++v5;
  }
  while ( v5 < 0x20u );
  if ( v39 )
    operator delete(v39);
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (65875CB0) --------------------------------------------------------
void __thiscall MineralScanner_ProcessScanData(int this)
{
  _DWORD *v2; // ecx
  unsigned __int8 v3; // al
  void *v4; // esi
  const char *v5; // eax
  void *v6; // eax
  int v7; // esi
  int v8; // edi
  int v9; // esi
  const char *v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // esi
  int v14; // eax
  void *v15; // eax
  _BYTE v16[28]; // [esp-38h] [ebp-C0h] BYREF
  _BYTE v17[16]; // [esp-1Ch] [ebp-A4h] BYREF
  int v18; // [esp-Ch] [ebp-94h]
  int v19; // [esp-8h] [ebp-90h]
  int v20; // [esp-4h] [ebp-8Ch]
  _BYTE v21[28]; // [esp+10h] [ebp-78h] BYREF
  _BYTE v22[28]; // [esp+2Ch] [ebp-5Ch] BYREF
  _BYTE *v23; // [esp+48h] [ebp-40h]
  _BYTE *v24; // [esp+4Ch] [ebp-3Ch]
  int v25; // [esp+50h] [ebp-38h]
  int v26; // [esp+54h] [ebp-34h]
  bool v27; // [esp+5Bh] [ebp-2Dh]
  _BYTE v28[20]; // [esp+5Ch] [ebp-2Ch] BYREF
  int v29; // [esp+70h] [ebp-18h]
  int v30; // [esp+84h] [ebp-4h]

  v2 = *(_DWORD **)(this + 7240);
  *(_BYTE *)(this + 6793) = 0;
  PtrVector_FreeAll_thunk(v2);
  if ( (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2) )
  {
    v3 = *(_BYTE *)(this + 6792);
    if ( v3 )
    {
      if ( v3 < 0x20u )
      {
        *(_BYTE *)(this + 6793) = 0;
        v4 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 3249);
        UiList_AddEntry(*(int ***)(this + 7240), v4, 8, 0, 0);
        if ( v4 )
          v5 = (const char *)(*(int (__thiscall **)(int, void *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
        else
          v5 = byte_659A8B98;
        UiList_SetSelectionText(*(_DWORD *)(this + 7240), (int)v5, 1);
        v6 = (void *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 3247);
        UiList_AddEntry(*(int ***)(this + 7240), v6, 8, 25, 0);
        v27 = IsPlayerAlive();
        v7 = dword_659E2970[15 * *(unsigned __int8 *)(this + 6792)];
        v25 = 20 * *(unsigned __int8 *)(this + 6792) + 3250;
        std::string::string(v28);
        v30 = 0;
        if ( v7 > 0 )
        {
          v8 = 1;
          v26 = v7;
          do
          {
            v9 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v25 + v8 - 1);
            if ( v9 )
              v10 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
            else
              v10 = byte_659A8B98;
            v23 = v17;
            String_AssignFromPtr(v17, (int)v10);
            v24 = v16;
            LOBYTE(v30) = 1;
            sub_65941410(v16, v8);
            LOBYTE(v30) = 0;
            v11 = FormatString_Args((int)v22, (int)"{0} - {1}");
            LOBYTE(v30) = 2;
            std::string::operator=(v28, v11);
            LOBYTE(v30) = 0;
            std::string::~string(v22);
            if ( !v29 )
            {
              v24 = v17;
              sub_65941410(v17, v8);
              v12 = FormatString((int)v21, (int)&unk_659C45C8);
              LOBYTE(v30) = 3;
              std::string::operator=(v28, v12);
              LOBYTE(v30) = 0;
              std::string::~string(v21);
            }
            if ( !v27 )
              std::string::operator+=(v28, " (Full account only)");
            if ( v9 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v9);
            v13 = *(_DWORD *)g_pILTClient;
            v20 = 0;
            v19 = v8;
            v18 = 8;
            v14 = std::string::c_str(v28);
            v15 = (void *)(*(int (__thiscall **)(int, int))(v13 + 72))(g_pILTClient, v14);
            UiList_AddEntry(*(int ***)(this + 7240), v15, v18, v19, v20);
            ++v8;
            --v26;
          }
          while ( v26 );
        }
        v30 = -1;
        std::string::~string(v28);
      }
    }
  }
}
// 659A8274: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 659E2970: using guessed type int dword_659E2970[];
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65876BA0) --------------------------------------------------------
_DWORD *__thiscall Sub6Entry_Copy(_DWORD *this, int a2)
{
  *(_BYTE *)this = *(_BYTE *)a2;
  *(this + 1) = *(_DWORD *)(a2 + 4);
  *(this + 2) = *(_DWORD *)(a2 + 8);
  *((_WORD *)this + 6) = *(_WORD *)(a2 + 12);
  *((_BYTE *)this + 16) = *(_BYTE *)(a2 + 16);
  Vector88_CopyCtor(this + 5, a2 + 20);
  *((_BYTE *)this + 36) = *(_BYTE *)(a2 + 36);
  Pair8Vector_CopyCtor(this + 10, a2 + 40);
  *(this + 14) = *(_DWORD *)(a2 + 56);
  return this;
}

//----- (65876CA0) --------------------------------------------------------
_DWORD *__cdecl sub_65876CA0(int a1, int a2, _DWORD *a3)
{
  _DWORD *v3; // esi
  _DWORD v6[7]; // [esp+0h] [ebp-28h] BYREF
  int v7; // [esp+24h] [ebp-4h]

  v6[6] = v6;
  v3 = a3;
  v6[5] = a3;
  v7 = 0;
  while ( a1 != a2 )
  {
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
      Sub6Entry_Copy(v3, a1);
    v3 += 15;
    LOBYTE(v7) = 0;
    a1 += 60;
  }
  return v3;
}
// 65805F40: using guessed type int __thiscall sub_65805F40(_DWORD);

//----- (65876D70) --------------------------------------------------------
_DWORD *__thiscall MineralScanner_GetScanRadius(void *this, int a2, int a3, _DWORD *a4)
{
  return sub_65876CA0(a2, a3, a4);
}

//----- (65876DA0) --------------------------------------------------------
int __thiscall Sub6EntryList_Assign(int this, int a2)
{
  _BYTE *v5; // ebx
  unsigned int v6; // ecx
  _BYTE *v7; // eax
  unsigned int v8; // eax
  _DWORD *ScanRadius; // eax
  unsigned int v10; // [esp+14h] [ebp+8h]
  _BYTE *v11; // [esp+14h] [ebp+8h]

  if ( this != a2 )
  {
    v10 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 60;
    if ( !v10 )
    {
      Vector60_Compact((int *)this);
      return this;
    }
    v5 = *(_BYTE **)(this + 4);
    v6 = (*(_DWORD *)(this + 8) - (int)v5) / 60;
    if ( v10 <= v6 )
    {
      v7 = Vector60_FilterDefault(*(_BYTE **)(a2 + 4), *(_BYTE **)(a2 + 8), *(_BYTE **)(this + 4));
      Vector60_DestroyRange((int)v7, *(_DWORD *)(this + 8));
      *(_DWORD *)(this + 8) = *(_DWORD *)(this + 4) + 60 * ((*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 60);
      return this;
    }
    if ( v5 )
      v8 = (*(_DWORD *)(this + 12) - (int)v5) / 60;
    else
      v8 = 0;
    if ( v10 > v8 )
    {
      if ( v5 )
      {
        Vector60_DestroyWrapper((int)v5, *(_DWORD *)(this + 8));
        operator delete(*(void **)(this + 4));
      }
      if ( !Vector60_Reserve((_DWORD *)this, (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 60) )
        return this;
      ScanRadius = MineralScanner_GetScanRadius(
                     (void *)this,
                     *(_DWORD *)(a2 + 4),
                     *(_DWORD *)(a2 + 8),
                     *(_DWORD **)(this + 4));
    }
    else
    {
      v11 = (_BYTE *)(*(_DWORD *)(a2 + 4) + 60 * v6);
      Vector60_FilterDefault(*(_BYTE **)(a2 + 4), v11, v5);
      ScanRadius = MineralScanner_GetScanRadius((void *)this, (int)v11, *(_DWORD *)(a2 + 8), *(_DWORD **)(this + 8));
    }
    *(_DWORD *)(this + 8) = ScanRadius;
  }
  return this;
}

//----- (65877A40) --------------------------------------------------------
void __thiscall WorldSelect_HandleSubId6Payload(unsigned int this, _DWORD *a2)
{
  _DWORD *v3; // ebx
  unsigned __int8 v4; // bl
  unsigned int v5; // edi
  _DWORD *v6; // eax
  int v7; // eax
  int v8; // ebx
  int *v9; // edi
  int v10; // eax
  unsigned __int8 v11; // bl
  char Dword_this; // al
  _BYTE v13[4]; // [esp+10h] [ebp-2Ch] BYREF
  void *v14; // [esp+14h] [ebp-28h]
  int v15; // [esp+18h] [ebp-24h]
  int v16; // [esp+1Ch] [ebp-20h]
  int v17; // [esp+20h] [ebp-1Ch]
  int v18; // [esp+24h] [ebp-18h] BYREF
  int v19; // [esp+28h] [ebp-14h] BYREF
  int v20; // [esp+2Ch] [ebp-10h]
  int v21; // [esp+38h] [ebp-4h]
  char v22; // [esp+44h] [ebp+8h]

  v3 = (_DWORD *)(this + 6744);
  Sub6EntryList_Assign(this + 6744, (int)a2);
  v3[4] = a2[4];
  v3[5] = a2[5];
  v3[6] = a2[6];
  v17 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  if ( v17 )
  {
    UiText_SetValueIfChanged(*(_DWORD *)(this + 7224), (char *)byte_659A8B98, 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 7228), (char *)byte_659A8B98, 0, 0);
    UiText_SetValueIfChanged(*(_DWORD *)(this + 7232), (char *)byte_659A8B98, 0, 0);
    *(_BYTE *)(this + 6792) = 0;
    MineralScanner_ProcessScanData(this);
    MineralScanner_HandleScanResult((int **)this);
    *(_DWORD *)(this + 6788) = a2[5];
    if ( *(_DWORD *)(this + 6776) != *(_DWORD *)(this + 6780) )
      *(_DWORD *)(this + 6780) = *(_DWORD *)(this + 6776);
    v4 = 0;
    LOBYTE(v19) = 0;
    v20 = 0;
    v5 = this + 6796;
    do
    {
      v6 = *(_DWORD **)v5;
      if ( *(_DWORD *)v5 )
      {
        v6[6] = 1;
        v6[50] = 1;
        v6[8] = 1;
        if ( v4 == 30 || v4 == 5 )
          *(_DWORD *)(*(_DWORD *)v5 + 32) = 0;
        if ( !ResourceArray_Clear(a2, v19) && v4 != 5 )
        {
          v7 = *(_DWORD *)v5;
          *(_DWORD *)(v7 + 24) = 0;
          *(_DWORD *)(v7 + 200) = 0;
          v18 = v20;
          Vector_PushBackPtr((char **)(this + 6772), &v18);
        }
      }
      ++v20;
      ++v4;
      v5 += 4;
      LOBYTE(v19) = v4;
    }
    while ( v4 < 0x20u );
    v8 = 0;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    v21 = 0;
    v22 = 0;
    v20 = 0;
    v9 = (int *)(this + 6796);
    do
    {
      if ( *v9 && *(_DWORD *)(*v9 + 32) )
      {
        DwordVector_CopyFrom((int)v13, this + 6772);
        if ( v8 == SharedMem_ReadDword_this(dword_65ABF73C, 0) )
        {
          WeaponMgr_HandleInput(*v9, 6, this, 29, 0);
        }
        else
        {
          v10 = ResourceArray_Clear((_DWORD *)(this + 6744), v22);
          if ( v10 && ResourceArray_CountById((_DWORD *)(v10 + 36), *(unsigned __int16 *)(v17 + 8)) >= 0.75
            || (v19 = 0,
                StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v19),
                v11 = v19,
                Dword_this = SharedMem_ReadDword_this(dword_65ABF73C, 0),
                sub_65956800(Dword_this, v22, v11, (int)v13)) )
          {
            WeaponMgr_HandleInput(*v9, 6, this, 28, 0);
          }
          else
          {
            WeaponMgr_HandleInput(*v9, 6, this, 27, 0);
          }
        }
        v8 = v20;
        *(_DWORD *)(*v9 + 60) = v20;
      }
      ++v8;
      ++v9;
      ++v22;
      v20 = v8;
    }
    while ( (unsigned __int8)v22 < 0x20u );
    MineralScanner_UpdateDisplay((_DWORD *)this);
    if ( v14 )
      operator delete(v14);
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6587BBB0) --------------------------------------------------------
int __thiscall QuestUI_PopulateObjectiveList(int this, int a2, _DWORD *a3)
{
  int v4; // edi
  int v6; // eax
  char *v7; // eax
  char *v8; // eax
  int v9; // eax
  int v10; // edi
  int v11; // eax
  unsigned __int16 *v12; // esi
  unsigned __int16 v13; // ax
  int v14; // eax
  int v15; // edi
  _DWORD *v16; // esi
  void (__thiscall *v17)(_DWORD *, int); // edx
  _DWORD *v18; // ecx
  bool v19; // cf
  int v20; // ecx
  unsigned int i; // eax
  int v22; // edi
  _DWORD *v23; // esi
  int v24; // edx
  int v25; // ecx
  int v26; // edx
  int (__thiscall *v27)(_DWORD *); // eax
  _DWORD *v28; // esi
  int v29; // edi
  _DWORD *v30; // esi
  int v31; // edi
  _DWORD **v32; // [esp+8h] [ebp-10h]
  int v33; // [esp+Ch] [ebp-Ch]
  int v34; // [esp+10h] [ebp-8h]
  int v35; // [esp+14h] [ebp-4h]
  int v36; // [esp+14h] [ebp-4h]
  int v37; // [esp+20h] [ebp+8h]
  _DWORD **v38; // [esp+20h] [ebp+8h]
  char v39; // [esp+23h] [ebp+Bh]
  int v40; // [esp+24h] [ebp+Ch]
  int v41; // [esp+24h] [ebp+Ch]

  if ( a2 && a3 )
  {
    v4 = a3[26];
    if ( !v4 )
      return 0;
    if ( *(_BYTE *)(this + 6241) && *(_DWORD **)(this + 6372) == a3 )
      return 1;
    *(_DWORD *)(this + 6368) = a2;
    *(_DWORD *)(this + 6372) = a3;
    v6 = a3[28];
    *(_DWORD *)(this + 6380) = v6;
    if ( v6 )
    {
      if ( v6 == 1 )
      {
        ListWidget_CopyState(*(_DWORD **)(this + 6376), &unk_65A5D00C);
        v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
        UiText_SetValueIfChanged(*(_DWORD *)(this + 6376), v7, 1, 0);
        *(_DWORD *)(this + 8) = 0;
      }
    }
    else
    {
      ListWidget_CopyState(*(_DWORD **)(this + 6376), byte_65A5C4A8);
      v8 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
      UiText_SetValueIfChanged(*(_DWORD *)(this + 6376), v8, 1, 0);
      *(_DWORD *)(this + 8) = 7;
    }
    v9 = *(_DWORD *)(this + 6376);
    v34 = *(_DWORD *)(v9 + 348);
    v10 = *(_DWORD *)(v9 + 344) + 10;
    v37 = v10;
    v11 = (*(int (__thiscall **)(_DWORD *))(*a3 + 100))(a3);
    v12 = (unsigned __int16 *)v11;
    if ( v11 && (v13 = *(_WORD *)(v11 + 4)) != 0 && v13 < 0xBC1u )
    {
      v14 = ItemTemplateById_Get(g_ItemTemplateById, v12[2]);
      v33 = v14;
      if ( !v14 )
      {
LABEL_44:
        GroupWindow_SetBackgroundImage(this, 999999999, v10, v34);
        *(float *)(this + 6300) = 0.0;
        *(_BYTE *)(this + 6384) = 0;
        return 1;
      }
      v34 += 25;
      qmemcpy((void *)(this + 6388), v12, 0x30u);
      v40 = 6;
      v35 = v34 - 65;
      v15 = 0;
      v38 = (_DWORD **)(this + 6436);
      while ( 1 )
      {
        v16 = *v38;
        if ( *v38 )
        {
          v17 = *(void (__thiscall **)(_DWORD *, int))(*v16 + 88);
          v18 = *v38;
          if ( *(_BYTE *)(v15 + v14 + 56) )
          {
            v17(v18, 1);
            CWindow_SetOffset(v16, v40, v35);
            v40 += (*(int (__thiscall **)(_DWORD *))(*v16 + 16))(v16) + 3;
          }
          else
          {
            v17(v18, 0);
          }
        }
        ++v38;
        v19 = v15++ == -1;
        if ( !v19 && v15 != 1 )
          break;
        v14 = v33;
      }
      v36 = v35 + 24;
      v20 = v33;
      v41 = 6;
      v39 = 0;
      for ( i = 0; i < 0xB; ++i )
      {
        if ( !*(_BYTE *)(v33 + i + 59) )
          v39 = 1;
      }
      v22 = 0;
      v32 = (_DWORD **)(this + 6444);
      while ( 1 )
      {
        v23 = *v32;
        if ( *v32 )
        {
          if ( v39 && *(_BYTE *)(v20 + v22 + 59) )
          {
            (*(void (__thiscall **)(_DWORD *, int))(*v23 + 88))(v23, 1);
            v24 = v41 + v23[19];
            v23[21] = v41;
            v25 = v23[20];
            v23[17] = v24;
            v26 = *v23;
            v23[22] = v36;
            v27 = *(int (__thiscall **)(_DWORD *))(v26 + 16);
            v23[18] = v36 + v25;
            v41 += v27(v23) + 3;
          }
          else
          {
            (*(void (__thiscall **)(_DWORD *, _DWORD))(*v23 + 88))(v23, 0);
          }
        }
        ++v32;
        if ( (unsigned int)++v22 >= 0xB )
          break;
        v20 = v33;
      }
      v37 = 260;
    }
    else
    {
      v28 = (_DWORD *)(this + 6436);
      v29 = 2;
      do
      {
        if ( *v28 )
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*v28 + 88))(*v28, 0);
        ++v28;
        --v29;
      }
      while ( v29 );
      v30 = (_DWORD *)(this + 6440);
      v31 = 11;
      do
      {
        if ( *v30 )
          (*(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)*v30 + 88))(*v30, 0);
        ++v30;
        --v31;
      }
      while ( v31 );
    }
    v10 = v37;
    goto LABEL_44;
  }
  return 0;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6587DAA0) --------------------------------------------------------
int __thiscall QuestData_CopyObjectiveRange(_DWORD *this)
{
  int v1; // edx
  _DWORD *v2; // eax
  _DWORD *v3; // ecx
  int v4; // edx
  int result; // eax

  v1 = *(this + 1746);
  v2 = this + 1746;
  v3 = this + 1683;
  *v3 = v1;
  v4 = v2[1];
  result = v2[2];
  v3[1] = v4;
  v3[2] = result;
  return result;
}

//----- (65880370) --------------------------------------------------------
LONG __thiscall SetTargetId(int this, unsigned __int16 a2)
{
  return SharedMem_WriteDword_this((void *)(this + 4), 0xA5u, a2);
}

//----- (658803D0) --------------------------------------------------------
LONG __thiscall ClearTargetId(int this)
{
  return SharedMem_WriteDword_this((void *)(this + 4), 0xA5u, 0);
}

//----- (658804C0) --------------------------------------------------------
_DWORD *__cdecl sub_658804C0(_DWORD *a1)
{
  _DWORD *result; // eax
  int *v2; // ecx

  result = a1;
  v2 = (int *)*a1;
  if ( !*(_BYTE *)(*a1 + 45) )
  {
    do
    {
      result = v2;
      v2 = (int *)*v2;
    }
    while ( !*((_BYTE *)v2 + 45) );
  }
  return result;
}

//----- (65880570) --------------------------------------------------------
int __cdecl sub_65880570(int a1)
{
  int result; // eax
  int i; // ecx

  result = a1;
  for ( i = *(_DWORD *)(a1 + 8); !*(_BYTE *)(i + 45); i = *(_DWORD *)(i + 8) )
    result = i;
  return result;
}

//----- (65880740) --------------------------------------------------------
char *__thiscall Packet_0xA4_Ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *((_DWORD *)this + 268) = 0;
  *((_DWORD *)this + 269) = 0;
  *(this + 1081) = 0;
  *(this + 1064) = -92;
  *(_DWORD *)this = &off_659CDE90;
  *(this + 1080) = 1;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CDE90: using guessed type void *off_659CDE90;

//----- (658808E0) --------------------------------------------------------
int *__thiscall sub_658808E0(int *this)
{
  int *result; // eax
  int *v2; // edx

  result = (int *)*this;
  if ( !*(_BYTE *)(*this + 45) )
  {
    v2 = (int *)result[2];
    if ( *((_BYTE *)v2 + 45) )
    {
      for ( result = (int *)result[1]; !*((_BYTE *)result + 45); result = (int *)result[1] )
      {
        if ( *this != result[2] )
          break;
        *this = (int)result;
      }
      *this = (int)result;
    }
    else
    {
      result = (int *)*v2;
      if ( !*(_BYTE *)(*v2 + 45) )
      {
        do
        {
          v2 = result;
          result = (int *)*result;
        }
        while ( !*((_BYTE *)result + 45) );
      }
      *this = (int)v2;
    }
  }
  return result;
}

//----- (65880950) --------------------------------------------------------
int *__thiscall StringMap_FindLowerBound(int **this, int a2)
{
  int *result; // eax
  int v3; // esi
  int *v4; // edi

  result = *(this + 1);
  v3 = result[1];
  v4 = result;
  if ( !*(_BYTE *)(v3 + 45) )
  {
    do
    {
      if ( (unsigned __int8)std::operator<<char>(v3 + 12, a2) )
      {
        v3 = *(_DWORD *)(v3 + 8);
      }
      else
      {
        v4 = (int *)v3;
        v3 = *(_DWORD *)v3;
      }
    }
    while ( !*(_BYTE *)(v3 + 45) );
    return v4;
  }
  return result;
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);

//----- (658809D0) --------------------------------------------------------
_DWORD *__thiscall sub_658809D0(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  _DWORD *v4; // ecx

  result = *(_DWORD **)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *result;
  if ( !*(_BYTE *)(*result + 45) )
    *(_DWORD *)(*result + 4) = a2;
  result[1] = *(_DWORD *)(a2 + 4);
  v3 = *(this + 1);
  if ( a2 == *(_DWORD *)(v3 + 4) )
  {
    *(_DWORD *)(v3 + 4) = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  else
  {
    v4 = *(_DWORD **)(a2 + 4);
    if ( a2 == *v4 )
      *v4 = result;
    else
      v4[2] = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  return result;
}

//----- (65880A30) --------------------------------------------------------
int __thiscall sub_65880A30(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // esi
  int v4; // ecx
  _DWORD *v5; // ecx

  result = *a2;
  *a2 = *(_DWORD *)(*a2 + 8);
  v3 = *(_DWORD *)(result + 8);
  if ( !*(_BYTE *)(v3 + 45) )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(result + 4) = a2[1];
  v4 = *(this + 1);
  if ( a2 == *(_DWORD **)(v4 + 4) )
  {
    *(_DWORD *)(v4 + 4) = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  else
  {
    v5 = (_DWORD *)a2[1];
    if ( a2 == (_DWORD *)v5[2] )
      v5[2] = result;
    else
      *v5 = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  return result;
}

//----- (65880A90) --------------------------------------------------------
int __thiscall sub_65880A90(void *this)
{
  _DWORD *v1; // eax
  int result; // eax
  int v3; // edx

  v1 = *(_DWORD **)this;
  if ( *(_BYTE *)(*(_DWORD *)this + 45) )
  {
    result = v1[2];
    *(_DWORD *)this = result;
  }
  else
  {
    v3 = *v1;
    if ( *(_BYTE *)(*v1 + 45) )
    {
      for ( result = v1[1]; !*(_BYTE *)(result + 45); result = *(_DWORD *)(result + 4) )
      {
        if ( *(_DWORD *)this != *(_DWORD *)result )
          break;
        *(_DWORD *)this = result;
      }
      if ( !*(_BYTE *)(*(_DWORD *)this + 45) )
        *(_DWORD *)this = result;
    }
    else
    {
      for ( result = *(_DWORD *)(v3 + 8); !*(_BYTE *)(result + 45); result = *(_DWORD *)(result + 8) )
        v3 = result;
      *(_DWORD *)this = v3;
    }
  }
  return result;
}

//----- (65880D40) --------------------------------------------------------
unsigned int __thiscall FriendList_AddEntry(
        int this,
        char *Source,
        char a3,
        const char *a4,
        char a5,
        const char *a6,
        const char *a7,
        char a8,
        int a9,
        char a10,
        char a11)
{
  void *v11; // esi
  unsigned int result; // eax
  const char *v13; // eax
  const char *v14; // eax
  const char *v15; // eax
  unsigned int Dword_this; // eax
  unsigned int v17; // [esp+10h] [ebp-1E4h]
  int Src; // [esp+1Ch] [ebp-1D8h] BYREF
  char v19[20]; // [esp+20h] [ebp-1D4h] BYREF
  char Destination[404]; // [esp+34h] [ebp-1C0h] BYREF
  int v21; // [esp+1C8h] [ebp-2Ch]
  char v22[12]; // [esp+1CCh] [ebp-28h] BYREF
  int v23; // [esp+1D8h] [ebp-1Ch]
  char v24[10]; // [esp+1DCh] [ebp-18h] BYREF
  char v25; // [esp+1E6h] [ebp-Eh]
  char v26; // [esp+1E7h] [ebp-Dh]
  char v27; // [esp+1E8h] [ebp-Ch]
  __int16 v28; // [esp+1EAh] [ebp-Ah]
  _BOOL2 v29; // [esp+1ECh] [ebp-8h]
  __int16 v30; // [esp+1EEh] [ebp-6h]

  v11 = (void *)(this + 4);
  result = SharedMem_ReadDword_this((void *)(this + 4), 0xAAu);
  v17 = result;
  if ( result < 0x14 )
  {
    SharedMem_Lock();
    v28 = 0;
    Src = 0;
    v19[0] = 0;
    Destination[0] = 0;
    v21 = 0;
    v22[0] = 0;
    v23 = 0;
    v24[0] = 0;
    v25 = 0;
    v26 = 0;
    v27 = 0;
    v29 = 0;
    v30 = 0;
    v13 = Source;
    if ( !Source )
      v13 = byte_659A8B98;
    strncpy(Destination, v13, 0x191u);
    Destination[401] = 0;
    if ( a5 )
      SharedMem_WriteU8_std(0x9CFu, 1u);
    if ( a4 )
      strncpy(v19, a4, 0x13u);
    else
      strncpy(v19, byte_659CDE9C, 0x13u);
    v14 = a6;
    v19[19] = 0;
    if ( !a6 )
      v14 = byte_659A8B98;
    strncpy(v24, v14, 9u);
    v15 = a7;
    v24[9] = 0;
    if ( !a7 )
      v15 = byte_659A8B98;
    strncpy(v22, v15, 9u);
    v25 = a3;
    v23 = a9;
    v26 = a10;
    v22[9] = 0;
    v27 = a8;
    v29 = a11 != 0;
    Dword_this = SharedMem_ReadDword_this(v11, 0xAAu);
    if ( Dword_this < 0x14 )
      SharedMem_WriteBlock_std(117 * Dword_this + 171, &Src, (WorldLoginReturnAddrPacked)468);
    SharedMem_WriteU8_std(0xA9u, 1u);
    SharedMem_WriteDword_this(v11, 0xAAu, v17 + 1);
    return SharedMem_Unlock();
  }
  return result;
}

//----- (65881140) --------------------------------------------------------
char __thiscall Packet_ID_NAME_CHANGE_read(_DWORD *this, int a2)
{
  if ( !VariableSizedPacket::Read(this, a2) )
    return 0;
  RakNet::BitStream::ReadCompressed_T_uint(this + 3, (char *)this + 1072);
  if ( !(*(unsigned __int8 (__thiscall **)(int, _DWORD *, int, _DWORD *))(*(_DWORD *)g_LTClient + 56))(
          g_LTClient,
          this + 269,
          2048,
          this + 3) )
    return 0;
  VariableSizedPacket::ReadBit(this, (bool *)this + 1108);
  return 1;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (658811A0) --------------------------------------------------------
char __thiscall ChatPacket_WriteBody(int this)
{
  char result; // al
  char *v3; // ecx

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    (*(void (__thiscall **)(int, int, int, int))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 1076, 2048, this + 12);
    v3 = (char *)(this + 12);
    if ( *(_BYTE *)(this + 1108) )
      BitStream_WriteBit1(v3);
    else
      BitStream_WriteBit0(v3);
    return 1;
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65881200) --------------------------------------------------------
char __thiscall Packet_ID_USE_ITEM_read(int this, int a2)
{
  char result; // al
  unsigned int v4; // eax

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1076));
    v4 = *(_DWORD *)(this + 20);
    if ( v4 + 1 <= *(_DWORD *)(this + 12) )
    {
      *(_BYTE *)(this + 1080) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + *(_DWORD *)(this + 24))) != 0;
      ++*(_DWORD *)(this + 20);
    }
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1081), 8u, 1);
    return 1;
  }
  return result;
}

//----- (65881280) --------------------------------------------------------
char __thiscall Packet_0xA4_Write(int this)
{
  char result; // al
  char *v3; // ecx
  char v4[4]; // [esp+4h] [ebp-4h] BYREF

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1076));
    v3 = (char *)(this + 12);
    if ( *(_BYTE *)(this + 1080) )
      BitStream_WriteBit1(v3);
    else
      BitStream_WriteBit0(v3);
    v4[0] = *(_BYTE *)(this + 1081);
    BitStream_WriteBitsCompressed((char *)(this + 12), v4, 8u, 1);
    return 1;
  }
  return result;
}

//----- (65881390) --------------------------------------------------------
int __cdecl SendFriendRequest(int a1, char *Source)
{
  _DWORD v3[2]; // [esp+Ch] [ebp-468h] BYREF
  char v4; // [esp+14h] [ebp-460h]
  _BYTE v5[1044]; // [esp+18h] [ebp-45Ch] BYREF
  int v6; // [esp+42Ch] [ebp-48h]
  int v7; // [esp+430h] [ebp-44h]
  char v8; // [esp+434h] [ebp-40h]
  int Dword_this; // [esp+43Ch] [ebp-38h]
  char Destination[36]; // [esp+440h] [ebp-34h] BYREF
  int v11; // [esp+470h] [ebp-4h]

  v4 = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)v5);
  v6 = 0;
  v7 = 0;
  v8 = -114;
  v3[0] = &off_659CDE80;
  Destination[0] = 0;
  Dword_this = 0;
  Destination[32] = 0;
  v11 = 0;
  Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
  strncpy_s(Destination, 0x20u, Source, 0xFFFFFFFF);
  ChatPacket_WriteBody((int)v3);
  LTClient_SendPacket_BuildIfNeeded(v3, 2, 1, 3, 0);
  v11 = -1;
  v3[0] = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)v5);
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CDE80: using guessed type void *off_659CDE80;

//----- (65881480) --------------------------------------------------------
int __cdecl SendFriendInvite(int a1, char *Source)
{
  _DWORD v3[2]; // [esp+Ch] [ebp-468h] BYREF
  char v4; // [esp+14h] [ebp-460h]
  _BYTE v5[1044]; // [esp+18h] [ebp-45Ch] BYREF
  int v6; // [esp+42Ch] [ebp-48h]
  int v7; // [esp+430h] [ebp-44h]
  char v8; // [esp+434h] [ebp-40h]
  int Dword_this; // [esp+43Ch] [ebp-38h]
  char Destination[32]; // [esp+440h] [ebp-34h] BYREF
  char v11; // [esp+460h] [ebp-14h]
  int v12; // [esp+470h] [ebp-4h]

  v4 = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)v5);
  v6 = 0;
  v7 = 0;
  v8 = -114;
  v3[0] = &off_659CDE80;
  Destination[0] = 0;
  Dword_this = 0;
  v11 = 0;
  v12 = 0;
  Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
  strncpy_s(Destination, 0x20u, Source, 0xFFFFFFFF);
  v11 = 1;
  ChatPacket_WriteBody((int)v3);
  LTClient_SendPacket_BuildIfNeeded(v3, 2, 1, 3, 0);
  v12 = -1;
  v3[0] = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)v5);
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CDE80: using guessed type void *off_659CDE80;

//----- (65881570) --------------------------------------------------------
char __thiscall HandleItemUseRequest(void *this, int *a2)
{
  unsigned __int16 v2; // di
  int v4; // edi
  char *v5; // eax
  unsigned __int16 *v7; // esi
  int v8; // eax
  int v9; // esi
  char *v10; // eax
  _DWORD *v11; // eax
  int v12; // eax
  char *v13; // eax
  int v14; // esi
  char *v15; // eax
  char *v16; // eax
  int WindowById; // eax
  char v18; // [esp+10h] [ebp-498h]
  char v19; // [esp+14h] [ebp-494h]
  int v20; // [esp+18h] [ebp-490h] BYREF
  int v21; // [esp+1Ch] [ebp-48Ch] BYREF
  int v22; // [esp+20h] [ebp-488h]
  char v23[12]; // [esp+24h] [ebp-484h] BYREF
  _BYTE v24[1060]; // [esp+30h] [ebp-478h] BYREF
  int Dword_this; // [esp+454h] [ebp-54h]
  int v26; // [esp+458h] [ebp-50h]
  char v27[32]; // [esp+464h] [ebp-44h] BYREF
  char Destination[20]; // [esp+484h] [ebp-24h] BYREF
  int v29; // [esp+4A4h] [ebp-4h]

  v2 = *((_WORD *)a2 + 2);
  v22 = (int)this;
  if ( !ItemId_IsUsable(g_ItemTemplateById, v2) )
  {
    v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5441);
    if ( v4 )
      v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
    else
      v5 = (char *)byte_659A8B98;
    FriendList_AddEntry((int)this, v5, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
    if ( v4 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
    return 0;
  }
  v7 = (unsigned __int16 *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
  v19 = *((_BYTE *)a2 + 13) >= 2u;
  v20 = 0;
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 6, &v20);
  v18 = v20 == 1;
  v21 = 0;
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 5, &v21);
  if ( ItemTemplate_CanUse(g_ItemTemplateById, v2, *((_BYTE *)v7 + 12), *v7, v21, v18, v19) )
  {
    v11 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
    if ( !v11 )
      return 0;
    if ( !ItemStatModifier_MeetsReqFromDisplayName(v11, (int)a2) )
    {
      v8 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5445);
      goto LABEL_10;
    }
    if ( v2 <= 0x58u )
    {
      if ( v2 != 88 )
      {
        switch ( v2 )
        {
          case 'P':
            goto LABEL_31;
          case 'Q':
          case 'R':
          case 'S':
          case 'T':
          case 'U':
          case 'V':
            if ( (unsigned int)PlayerStats_GetStatValue(0) < g_StatScaleTable[0] )
              goto LABEL_36;
            v12 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5442);
            break;
          case 'W':
            if ( (unsigned int)PlayerStats_GetStatValue(3u) < 0x3E8 )
              goto LABEL_36;
            v12 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5443);
            break;
          default:
            goto LABEL_36;
        }
        goto LABEL_25;
      }
LABEL_31:
      if ( (unsigned int)PlayerStats_GetStatValue(2u) >= 0x3E8 )
      {
        v12 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5444);
LABEL_25:
        v9 = v12;
        if ( v12 )
          v13 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v12);
        else
          v13 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v13, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
        goto LABEL_14;
      }
      goto LABEL_36;
    }
    switch ( v2 )
    {
      case 0x708u:
        WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 9u);
        if ( WindowById )
        {
          PlayerInfo_LoadFromLTClient(WindowById);
          GameMode_SetModeFour((int *)dword_65ABF6F4, 9u);
        }
        return 1;
      case 0x709u:
        sub_657CC060(dword_65ABF748, Destination, (WorldLoginReturnAddrPacked)20);
        v14 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1902);
        if ( v14 )
        {
          v16 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v14);
          TooltipMgr_ShowItemTooltip((int *)dword_65ABF708, 0.0, v16, Destination, (int)SendFriendRequest, 0);
        }
        else
        {
          TooltipMgr_ShowItemTooltip(
            (int *)dword_65ABF708,
            0.0,
            (char *)byte_659A8B98,
            Destination,
            (int)SendFriendRequest,
            0);
        }
        break;
      case 0x70Bu:
        if ( !*(_WORD *)((*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2) + 8) )
        {
          v12 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5344);
          goto LABEL_25;
        }
        LoginWindow_GetCharNameField(dword_65ABF748, v27, (WorldLoginReturnAddrPacked)32);
        v14 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1903);
        if ( v14 )
          v15 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v14);
        else
          v15 = (char *)byte_659A8B98;
        TooltipMgr_ShowItemTooltip((int *)dword_65ABF708, COERCE_FLOAT(1), v15, v27, (int)SendFriendInvite, 0);
        break;
      default:
LABEL_36:
        Packet_0xA4_Ctor(v23);
        v29 = 0;
        Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
        v26 = *a2;
        Packet_0xA4_Write((int)v23);
        LTClient_SendPacket_BuildIfNeeded(v23, 2, 1, 3, 0);
        v29 = -1;
        *(_DWORD *)v23 = &vtbl_Packet_Unknown0;
        BitStream_FreeOwnedBuffer((int)v24);
        return 1;
    }
    if ( v14 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v14);
    return 1;
  }
  v8 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5303);
LABEL_10:
  v9 = v8;
  if ( v8 )
    v10 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
  else
    v10 = (char *)byte_659A8B98;
  FriendList_AddEntry(v22, v10, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
LABEL_14:
  if ( v9 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v9);
  return 0;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659E0CA8: using guessed type int g_StatScaleTable[];
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65881A00) --------------------------------------------------------
int __thiscall HandlePacket_ID_7D_WriteSharedMem_0x2BD0(char *shell, int payload)
{
  int shm0; // [esp+10h] [ebp-454h] BYREF
  int shm1; // [esp+14h] [ebp-450h]
  int shm2; // [esp+18h] [ebp-44Ch]
  void **pkt; // [esp+1Ch] [ebp-448h] BYREF
  char v7; // [esp+24h] [ebp-440h]
  unsigned int bitbuf[263]; // [esp+28h] [ebp-43Ch] BYREF
  char v9; // [esp+444h] [ebp-20h]
  char packetValue[8]; // [esp+44Ch] [ebp-18h] BYREF
  int v11; // [esp+460h] [ebp-4h]

  v7 = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)bitbuf);
  bitbuf[261] = 0;
  bitbuf[262] = 0;
  v9 = 125;
  pkt = &off_659CDE70;
  *(_DWORD *)packetValue = 0;
  v11 = 0;
  if ( VariableSizedPacket::Read(&pkt, payload) )
  {
    RakNet::BitStream::ReadCompressed_T_uint(bitbuf, packetValue);
    shm0 = 0;
    shm1 = 0;
    shm2 = 0;
    SharedMem_ReadBlock_std(11216, &shm0, (WorldLoginReturnAddrPacked)12);
    shm0 = *(_DWORD *)packetValue;
    shm2 = 1;
    shm1 = 0;
    SharedMem_WriteBlock_std(11216, &shm0, (WorldLoginReturnAddrPacked)12);
    v11 = -1;
    pkt = (void **)&vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)bitbuf);
    return 0;
  }
  else
  {
    v11 = -1;
    pkt = (void **)&vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)bitbuf);
    return 1;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CDE70: using guessed type void *off_659CDE70;

//----- (65881B40) --------------------------------------------------------
int *__thiscall StringMap_FindOrEnd(int **this, int *a2, int a3)
{
  int *LowerBound; // eax
  int v7; // [esp+18h] [ebp+Ch]

  LowerBound = StringMap_FindLowerBound(this, a3);
  v7 = (int)LowerBound;
  if ( LowerBound == *(this + 1) || (unsigned __int8)std::operator<<char>(a3, LowerBound + 3) )
  {
    *a2 = (int)*(this + 1);
    return a2;
  }
  else
  {
    *a2 = v7;
    return a2;
  }
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);

//----- (65881BE0) --------------------------------------------------------
int *__thiscall sub_65881BE0(int **this, int *a2, char a3, int *a4, int a5)
{
  int v6; // ecx
  int *v7; // eax
  int *v8; // eax
  int v9; // eax
  int *v10; // eax
  int v11; // esi
  int v12; // ecx
  int *v13; // edx
  int v14; // edx
  int v15; // edx
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-50h] BYREF
  _BYTE v18[28]; // [esp+38h] [ebp-28h] BYREF
  int v19; // [esp+5Ch] [ebp-4h]
  int v20; // [esp+74h] [ebp+14h]

  if ( (unsigned int)*(this + 2) >= 0x7FFFFFE )
  {
    std::string::string(v18, "map/set<T> too long");
    v19 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v18);
    pExceptionObject[0] = &off_659BFD28;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
  }
  v6 = sub_65880FF0(*(this + 1), a4, *(this + 1), a5, 0);
  v7 = *(this + 1);
  *(this + 2) = (int *)((char *)*(this + 2) + 1);
  v20 = v6;
  if ( a4 == v7 )
  {
    v7[1] = v6;
    **(this + 1) = v6;
    (*(this + 1))[2] = v6;
  }
  else if ( a3 )
  {
    *a4 = v6;
    v8 = *(this + 1);
    if ( a4 == (int *)*v8 )
      *v8 = v6;
  }
  else
  {
    a4[2] = v6;
    v9 = (int)*(this + 1);
    if ( a4 == *(int **)(v9 + 8) )
      *(_DWORD *)(v9 + 8) = v6;
  }
  v10 = (int *)(v6 + 4);
  v11 = v6;
  if ( !*(_BYTE *)(*(_DWORD *)(v6 + 4) + 44) )
  {
    do
    {
      v12 = *v10;
      v13 = *(int **)(*v10 + 4);
      if ( *v10 == *v13 )
      {
        v14 = v13[2];
        if ( *(_BYTE *)(v14 + 44) )
        {
          if ( v11 == *(_DWORD *)(v12 + 8) )
          {
            v11 = *v10;
            sub_658809D0(this, *v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 44) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 44) = 0;
          sub_65880A30(this, *(_DWORD **)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 44) = 1;
          *(_BYTE *)(v14 + 44) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 44) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      else
      {
        v15 = *v13;
        if ( *(_BYTE *)(v15 + 44) )
        {
          if ( v11 == *(_DWORD *)v12 )
          {
            v11 = *v10;
            sub_65880A30(this, (_DWORD *)*v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 44) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 44) = 0;
          sub_658809D0(this, *(_DWORD *)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 44) = 1;
          *(_BYTE *)(v15 + 44) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 44) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      v10 = (int *)(v11 + 4);
    }
    while ( !*(_BYTE *)(*(_DWORD *)(v11 + 4) + 44) );
    v6 = v20;
  }
  *(_BYTE *)((*(this + 1))[1] + 44) = 1;
  *a2 = v6;
  return a2;
}
// 65880FF0: using guessed type int __stdcall sub_65880FF0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (65881DB0) --------------------------------------------------------
_DWORD *__thiscall RBTree_EraseNode(_DWORD *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // ebx
  int v4; // edi
  _DWORD *v5; // eax
  _DWORD *v6; // edx
  int v7; // esi
  _DWORD *v8; // ecx
  int v9; // eax
  _DWORD *v10; // eax
  int v11; // ecx
  int v12; // ecx
  _DWORD *v13; // ecx
  char *v14; // ecx
  char *v15; // eax
  char v16; // dl
  _DWORD *i; // ecx
  _BYTE *v18; // eax
  int v19; // eax
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-5Ch] BYREF
  _BYTE v22[28]; // [esp+38h] [ebp-34h] BYREF
  int v23; // [esp+54h] [ebp-18h]
  void *v24; // [esp+58h] [ebp-14h]
  _DWORD *v25; // [esp+5Ch] [ebp-10h]
  int v26; // [esp+68h] [ebp-4h]

  v25 = this;
  v3 = (_DWORD *)a3;
  if ( *(_BYTE *)(a3 + 45) )
  {
    std::string::string(v22, "invalid map/set<T> iterator");
    v26 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v22);
    pExceptionObject[0] = &off_659BFD34;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVout_of_range_std__);
  }
  v24 = (void *)a3;
  sub_658808E0(&a3);
  if ( *(_BYTE *)(*v3 + 45) )
  {
    v4 = v3[2];
LABEL_8:
    v7 = v3[1];
    if ( !*(_BYTE *)(v4 + 45) )
      *(_DWORD *)(v4 + 4) = v7;
    v8 = v25;
    v9 = v25[1];
    if ( *(_DWORD **)(v9 + 4) == v3 )
    {
      *(_DWORD *)(v9 + 4) = v4;
    }
    else if ( *(_DWORD **)v7 == v3 )
    {
      *(_DWORD *)v7 = v4;
    }
    else
    {
      *(_DWORD *)(v7 + 8) = v4;
    }
    if ( *(_DWORD **)v8[1] == v3 )
    {
      if ( *(_BYTE *)(v4 + 45) )
      {
        v10 = (_DWORD *)v7;
      }
      else
      {
        v10 = sub_658804C0((_DWORD *)v4);
        v8 = v25;
      }
      *(_DWORD *)v8[1] = v10;
    }
    v11 = v8[1];
    v23 = v11;
    if ( *(_DWORD **)(v11 + 8) == v3 )
    {
      if ( *(_BYTE *)(v4 + 45) )
        *(_DWORD *)(v11 + 8) = v7;
      else
        *(_DWORD *)(v23 + 8) = sub_65880570(v4);
    }
    goto LABEL_36;
  }
  if ( *(_BYTE *)(v3[2] + 45) )
  {
    v4 = *v3;
    goto LABEL_8;
  }
  v5 = (_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 8);
  v6 = (_DWORD *)(a3 + 8);
  if ( (_DWORD *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*v3 + 4) = a3;
  *v5 = *v3;
  if ( v5 == (_DWORD *)v3[2] )
  {
    v7 = (int)v5;
  }
  else
  {
    v7 = v5[1];
    if ( !*(_BYTE *)(v4 + 45) )
      *(_DWORD *)(v4 + 4) = v7;
    *(_DWORD *)v7 = v4;
    *v6 = v3[2];
    *(_DWORD *)(v3[2] + 4) = v5;
  }
  v12 = v25[1];
  if ( *(_DWORD **)(v12 + 4) == v3 )
  {
    *(_DWORD *)(v12 + 4) = v5;
  }
  else
  {
    v13 = (_DWORD *)v3[1];
    if ( (_DWORD *)*v13 == v3 )
      *v13 = v5;
    else
      v13[2] = v5;
  }
  v5[1] = v3[1];
  v14 = (char *)(v3 + 11);
  v15 = (char *)(v5 + 11);
  if ( v15 != (char *)(v3 + 11) )
  {
    v16 = *v15;
    *v15 = *v14;
    *v14 = v16;
  }
LABEL_36:
  if ( *((_BYTE *)v24 + 44) == 1 )
  {
    for ( i = v25; v4 != *(_DWORD *)(i[1] + 4); v7 = *(_DWORD *)(v7 + 4) )
    {
      if ( *(_BYTE *)(v4 + 44) != 1 )
        break;
      v18 = *(_BYTE **)v7;
      if ( v4 == *(_DWORD *)v7 )
      {
        v18 = *(_BYTE **)(v7 + 8);
        if ( !v18[44] )
        {
          v18[44] = 1;
          *(_BYTE *)(v7 + 44) = 0;
          sub_658809D0(i, v7);
          v18 = *(_BYTE **)(v7 + 8);
          i = v25;
        }
        if ( v18[45] )
          goto LABEL_54;
        if ( *(_BYTE *)(*(_DWORD *)v18 + 44) != 1 || *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) != 1 )
        {
          if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v18 + 44) = 1;
            v18[44] = 0;
            sub_65880A30(i, v18);
            v18 = *(_BYTE **)(v7 + 8);
            i = v25;
          }
          v18[44] = *(_BYTE *)(v7 + 44);
          *(_BYTE *)(v7 + 44) = 1;
          *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) = 1;
          sub_658809D0(i, v7);
          break;
        }
      }
      else
      {
        if ( !v18[44] )
        {
          v18[44] = 1;
          *(_BYTE *)(v7 + 44) = 0;
          sub_65880A30(i, (_DWORD *)v7);
          v18 = *(_BYTE **)v7;
          i = v25;
        }
        if ( v18[45] )
          goto LABEL_54;
        if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) != 1 || *(_BYTE *)(*(_DWORD *)v18 + 44) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v18 + 44) == 1 )
          {
            *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) = 1;
            v18[44] = 0;
            sub_658809D0(i, (int)v18);
            v18 = *(_BYTE **)v7;
            i = v25;
          }
          v18[44] = *(_BYTE *)(v7 + 44);
          *(_BYTE *)(v7 + 44) = 1;
          *(_BYTE *)(*(_DWORD *)v18 + 44) = 1;
          sub_65880A30(i, (_DWORD *)v7);
          break;
        }
      }
      v18[44] = 0;
LABEL_54:
      v4 = v7;
    }
    *(_BYTE *)(v4 + 44) = 1;
  }
  std::string::~string((char *)v24 + 12);
  operator delete(v24);
  v19 = v25[2];
  if ( v19 )
    v25[2] = v19 - 1;
  *a2 = a3;
  return a2;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD34: using guessed type void *off_659BFD34;

//----- (65882140) --------------------------------------------------------
void __stdcall StringRBTree_DeleteNodes(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; !*((_BYTE *)i + 45); v1 = i )
  {
    StringRBTree_DeleteNodes((void **)i[2]);
    i = (void **)*i;
    std::string::~string(v1 + 3);
    operator delete(v1);
  }
}

//----- (65882190) --------------------------------------------------------
int __thiscall sub_65882190(int **this, int a2, int *a3)
{
  int v3; // ebx
  int *v4; // edi
  int v5; // esi
  char v6; // al
  int *v7; // esi
  int **v9; // [esp+Ch] [ebp-8h]
  char v10; // [esp+10h] [ebp-4h]

  v3 = (int)a3;
  v4 = *(this + 1);
  v5 = v4[1];
  v6 = 1;
  v9 = this;
  v10 = 1;
  if ( !*(_BYTE *)(v5 + 45) )
  {
    do
    {
      v4 = (int *)v5;
      v6 = std::operator<<char>(v3, v5 + 12);
      v10 = v6;
      if ( v6 )
        v5 = *(_DWORD *)v5;
      else
        v5 = *(_DWORD *)(v5 + 8);
    }
    while ( !*(_BYTE *)(v5 + 45) );
    this = v9;
  }
  v7 = v4;
  a3 = v4;
  if ( v6 )
  {
    if ( v4 == (int *)**(this + 1) )
    {
      *(_DWORD *)a2 = *sub_65881BE0(this, (int *)&a3, 1, v4, v3);
      *(_BYTE *)(a2 + 4) = 1;
      return a2;
    }
    sub_65880A90(&a3);
    v7 = a3;
  }
  if ( (unsigned __int8)std::operator<<char>(v7 + 3, v3) )
  {
    *(_DWORD *)a2 = *sub_65881BE0(v9, (int *)&a3, v10, v4, v3);
    *(_BYTE *)(a2 + 4) = 1;
  }
  else
  {
    *(_DWORD *)a2 = v7;
    *(_BYTE *)(a2 + 4) = 0;
  }
  return a2;
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);

//----- (65882320) --------------------------------------------------------
int *__thiscall sub_65882320(int **this, int *a2, int *a3, int *a4)
{
  int *v6; // eax
  int *v7; // edi
  int *v8; // ebx
  int *v9; // edi
  int **v10; // ecx
  int *v11; // eax
  int v12; // ecx
  int v13; // [esp-8h] [ebp-18h]
  char v14[8]; // [esp+8h] [ebp-8h] BYREF

  if ( !*(this + 2) )
  {
    sub_65881BE0(this, a2, 1, *(this + 1), (int)a4);
    return a2;
  }
  v6 = *(this + 1);
  v7 = a4;
  if ( a3 == (int *)*v6 )
  {
    if ( (unsigned __int8)std::operator<<char>(a4, a3 + 3) )
    {
      sub_65881BE0(this, a2, 1, a3, (int)v7);
      return a2;
    }
    goto LABEL_20;
  }
  if ( a3 == v6 )
  {
    if ( (unsigned __int8)std::operator<<char>(v6[2] + 12, a4) )
    {
      sub_65881BE0(this, a2, 0, (int *)(*(this + 1))[2], (int)v7);
      return a2;
    }
    goto LABEL_20;
  }
  if ( (unsigned __int8)std::operator<<char>(a4, a3 + 3) )
  {
    a4 = a3;
    sub_65880A90(&a4);
    v8 = a4;
    if ( (unsigned __int8)String_Compare((int)(a4 + 3), (int)v7) )
    {
      v13 = (int)v7;
      v9 = a2;
      v10 = this;
      if ( !*(_BYTE *)(v8[2] + 45) )
      {
        sub_65881BE0(this, a2, 1, a3, v13);
        return a2;
      }
      goto LABEL_18;
    }
  }
  if ( (unsigned __int8)std::operator<<char>(a3 + 3, v7) )
  {
    v8 = a3;
    a4 = a3;
    sub_658808E0((int *)&a4);
    v11 = a4;
    if ( a4 == *(this + 1) )
      goto LABEL_17;
    if ( (unsigned __int8)String_Compare((int)v7, (int)(a4 + 3)) )
    {
      v8 = a3;
      v11 = a4;
LABEL_17:
      v13 = (int)v7;
      v9 = a2;
      v10 = this;
      if ( !*(_BYTE *)(v8[2] + 45) )
      {
        sub_65881BE0(this, a2, 1, v11, v13);
        return a2;
      }
LABEL_18:
      sub_65881BE0(v10, v9, 0, v8, v13);
      return v9;
    }
  }
LABEL_20:
  v12 = *(_DWORD *)sub_65882190(this, (int)v14, v7);
  *a2 = v12;
  return a2;
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);

//----- (658824C0) --------------------------------------------------------
int **__thiscall StringRBTree_EraseRange(int ***this, int **a2, int *a3, int *a4)
{
  int v5; // eax
  int *v6; // ecx
  _DWORD *v7; // eax
  int v9; // edx
  int v10; // eax
  int *v11; // ecx
  int j; // eax
  int i; // eax
  int v14; // [esp+4h] [ebp-4h] BYREF

  v5 = (int)*(this + 1);
  v6 = a3;
  if ( a3 == *(int **)v5 && a4 == (int *)v5 )
  {
    StringRBTree_DeleteNodes(*(void ***)(v5 + 4));
    (*(this + 1))[1] = (int *)*(this + 1);
    v7 = *(this + 1);
    *(this + 2) = 0;
    *v7 = v7;
    (*(this + 1))[2] = (int *)*(this + 1);
    *a2 = **(this + 1);
    return a2;
  }
  else
  {
    for ( ; a3 != a4; v6 = a3 )
    {
      v9 = (int)v6;
      if ( !*((_BYTE *)v6 + 45) )
      {
        v10 = v6[2];
        if ( *(_BYTE *)(v10 + 45) )
        {
          for ( i = v6[1]; !*(_BYTE *)(i + 45); i = *(_DWORD *)(i + 4) )
          {
            if ( v6 != *(int **)(i + 8) )
              break;
            v6 = (int *)i;
          }
          a3 = (int *)i;
        }
        else
        {
          v11 = (int *)v6[2];
          for ( j = *(_DWORD *)v10; !*(_BYTE *)(j + 45); j = *(_DWORD *)j )
            v11 = (int *)j;
          a3 = v11;
        }
      }
      RBTree_EraseNode(this, &v14, v9);
    }
    *a2 = v6;
    return a2;
  }
}

//----- (65882580) --------------------------------------------------------
int *__thiscall StringMap_GetOrInsert(int **this, int a2)
{
  int v3; // ebx
  int *LowerBound; // edi
  int v5; // esi
  int v7[8]; // [esp+10h] [ebp-2Ch] BYREF
  int v8; // [esp+38h] [ebp-4h]

  v3 = a2;
  LowerBound = StringMap_FindLowerBound(this, a2);
  if ( LowerBound != *(this + 1) && !(unsigned __int8)std::operator<<char>(v3, LowerBound + 3) )
    return LowerBound + 10;
  std::string::string(v7, v3);
  v7[7] = 0;
  v8 = 0;
  v5 = *sub_65882320(this, &a2, LowerBound, v7);
  v8 = -1;
  std::string::~string(v7);
  return (int *)(v5 + 40);
}
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);
// 659A82A8: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (65882670) --------------------------------------------------------
int __thiscall ItemTemplate_GetIconHandle(int **this, unsigned __int16 __return_address)
{
  int v3; // esi
  int v4; // esi
  int v5; // eax
  bool v6; // zf
  int v7; // eax
  int v8; // eax
  int v10; // [esp+0h] [ebp-60h]
  _BYTE v11[28]; // [esp+14h] [ebp-4Ch] BYREF
  _BYTE v12[28]; // [esp+30h] [ebp-30h] BYREF
  int v13; // [esp+4Ch] [ebp-14h]
  int *v14; // [esp+50h] [ebp-10h] BYREF
  int v15; // [esp+5Ch] [ebp-4h]

  if ( __return_address && __return_address < 0xBC1u )
  {
    v3 = (int)*(this + __return_address + 8);
    if ( v3 )
    {
LABEL_15:
      (*(void (__cdecl **)(int, _DWORD))(g_pILTClient + 412))(v3, *((float *)dword_65ABF6F8 + 75));
      return v3;
    }
    if ( (unsigned __int16)(__return_address - 1) <= 0xBBFu )
    {
      v4 = g_ItemTemplateById[__return_address];
      v13 = v4;
      if ( v4 )
      {
        if ( *(_DWORD *)(v4 + 12) && strlen(*(const char **)(v4 + 12)) >= 2 )
        {
          v5 = std::string::string(v12, *(_DWORD *)(v4 + 12));
          v15 = 0;
          StringMap_FindOrEnd(this + 5, (int *)&v14, v5);
          v15 = -1;
          std::string::~string(v12);
          if ( v14 == *(this + 6) )
          {
            v6 = strstr(*(const char **)(v4 + 12), ".pcx") == 0;
            v10 = *(_DWORD *)(v4 + 12);
            if ( v6 )
              v7 = (*(int (__cdecl **)(int))(g_pILTClient + 292))(v10);
            else
              v7 = (*(int (__cdecl **)(int))(g_pILTClient + 288))(v10);
            v3 = v7;
            if ( v7 )
            {
              (*(void (__cdecl **)(int))(g_pILTClient + 272))(v7);
              v8 = std::string::string(v11, *(_DWORD *)(v13 + 12));
              v15 = 1;
              *StringMap_GetOrInsert(this + 5, v8) = v3;
              v15 = -1;
              std::string::~string(v11);
              *(this + __return_address + 8) = (int *)v3;
            }
          }
          else
          {
            v3 = v14[10];
            *(this + __return_address + 8) = (int *)v3;
          }
          goto LABEL_15;
        }
      }
    }
  }
  return 0;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65882870) --------------------------------------------------------
int __thiscall StringRBTree_Clear(int this)
{
  int *v3; // [esp+4h] [ebp-4h] BYREF

  StringRBTree_EraseRange((int ***)this, &v3, **(int ***)(this + 4), *(int **)(this + 4));
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return 0;
}

//----- (658828B0) --------------------------------------------------------
HANDLE __thiscall CInventoryClient_Clear(char *this)
{
  int *v2; // eax
  int *v3; // esi
  int **v4; // eax
  int *j; // eax
  int *i; // eax
  _DWORD *v7; // eax
  int *v9; // [esp-8h] [ebp-2Ch]
  int *v10; // [esp-4h] [ebp-28h]
  int *v11[2]; // [esp+10h] [ebp-14h] BYREF
  int v12; // [esp+20h] [ebp-4h]

  v11[1] = (int *)this;
  *(_DWORD *)this = &CInventoryClient_vtbl;
  v2 = (int *)*((_DWORD *)this + 6);
  v3 = (int *)*v2;
  v12 = 4;
  if ( v3 != v2 )
  {
    do
    {
      if ( v3[10] )
        (*(void (__cdecl **)(int))(g_pILTClient + 316))(v3[10]);
      if ( !*((_BYTE *)v3 + 45) )
      {
        v4 = (int **)v3[2];
        if ( *((_BYTE *)v4 + 45) )
        {
          for ( i = (int *)v3[1]; !*((_BYTE *)i + 45); i = (int *)i[1] )
          {
            if ( v3 != (int *)i[2] )
              break;
            v3 = i;
          }
          v3 = i;
        }
        else
        {
          v3 = (int *)v3[2];
          for ( j = *v4; !*((_BYTE *)j + 45); j = (int *)*j )
            v3 = j;
        }
      }
    }
    while ( v3 != *((int **)this + 6) );
  }
  StringRBTree_DeleteNodes(*(void ***)(*((_DWORD *)this + 6) + 4));
  *(_DWORD *)(*((_DWORD *)this + 6) + 4) = *((_DWORD *)this + 6);
  v7 = (_DWORD *)*((_DWORD *)this + 6);
  *((_DWORD *)this + 7) = 0;
  *v7 = v7;
  *(_DWORD *)(*((_DWORD *)this + 6) + 8) = *((_DWORD *)this + 6);
  v10 = (int *)*((_DWORD *)this + 6);
  v9 = (int *)*v10;
  LOBYTE(v12) = 3;
  StringRBTree_EraseRange((int ***)this + 5, v11, v9, v10);
  operator delete(*((void **)this + 6));
  *((_DWORD *)this + 6) = 0;
  *((_DWORD *)this + 7) = 0;
  LOBYTE(v12) = 2;
  SharedMem_Release();
  LOBYTE(v12) = 1;
  SharedMem_Release();
  LOBYTE(v12) = 0;
  SharedMem_Release();
  v12 = -1;
  return SharedMem_Release();
}
// 659CDEAC: using guessed type int (__thiscall *CInventoryClient_vtbl)(void *, char);

//----- (65882C90) --------------------------------------------------------
char *__thiscall CInventoryClient_dtor(char *this, char a2)
{
  CInventoryClient_Clear(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (65882CC0) --------------------------------------------------------
int __stdcall HandlePacket_ID_FRIENDS(int a1)
{
  int *WindowById; // eax
  int *v3; // eax
  char v4[12]; // [esp+Ch] [ebp-480h] BYREF
  _BYTE v5[1068]; // [esp+18h] [ebp-474h] BYREF
  char v6; // [esp+444h] [ebp-48h]
  _BYTE v7[4]; // [esp+468h] [ebp-24h] BYREF
  void *v8; // [esp+46Ch] [ebp-20h]
  int v9; // [esp+470h] [ebp-1Ch]
  int v10; // [esp+474h] [ebp-18h]
  int v11; // [esp+488h] [ebp-4h]

  Packet_ID_151_Ctor(v4);
  v11 = 0;
  if ( Packet_ID_FRIENDS_read((int)v4, a1) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 128);
    if ( v6 == 3 )
    {
      WindowById = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x11u);
      if ( WindowById )
        FriendListUI_PopulateList(WindowById, (int)v7);
    }
    else if ( v6 == 7 )
    {
      v3 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x12u);
      if ( v3 )
        RewardUI_DisplayItems(v3, (int)v7);
    }
    v11 = -1;
    if ( v8 )
      operator delete(v8);
    v8 = 0;
    v9 = 0;
    v10 = 0;
    *(_DWORD *)v4 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v5);
    return 0;
  }
  else
  {
    v11 = -1;
    if ( v8 )
      operator delete(v8);
    v8 = 0;
    v9 = 0;
    v10 = 0;
    *(_DWORD *)v4 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v5);
    return 1;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65884250) --------------------------------------------------------
void __stdcall sub_65884250(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; !*((_BYTE *)i + 29); v1 = i )
  {
    sub_65884250(i[2]);
    i = (void **)*i;
    operator delete(v1);
  }
}

//----- (658842A0) --------------------------------------------------------
_DWORD *ListNode_Alloc24()
{
  _DWORD *result; // eax

  result = operator new(0x18u);
  if ( result )
    *result = result;
  if ( result != (_DWORD *)-4 )
    result[1] = result;
  return result;
}

//----- (658842C0) --------------------------------------------------------
void __thiscall LinkedList_Clear(int this)
{
  _DWORD **v2; // ecx
  _DWORD *v3; // eax
  _DWORD *v4; // edi

  v2 = *(_DWORD ***)(this + 4);
  v3 = *v2;
  *v2 = v2;
  *(_DWORD *)(*(_DWORD *)(this + 4) + 4) = *(_DWORD *)(this + 4);
  *(_DWORD *)(this + 8) = 0;
  if ( v3 != *(_DWORD **)(this + 4) )
  {
    do
    {
      v4 = (_DWORD *)*v3;
      operator delete(v3);
      v3 = v4;
    }
    while ( v4 != *(_DWORD **)(this + 4) );
  }
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
}

//----- (65884330) --------------------------------------------------------
int __thiscall List_CheckSize(_DWORD *this, unsigned int a2)
{
  int v2; // eax
  int result; // eax
  _DWORD pExceptionObject[10]; // [esp+8h] [ebp-50h] BYREF
  _BYTE v5[28]; // [esp+30h] [ebp-28h] BYREF
  int v6; // [esp+54h] [ebp-4h]

  v2 = *(this + 2);
  if ( 0xFFFFFFF - v2 < a2 )
  {
    std::string::string(v5, "list<T> too long");
    v6 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v5);
    pExceptionObject[0] = &off_659BFD28;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
  }
  result = a2 + v2;
  *(this + 2) = result;
  return result;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (658843E0) --------------------------------------------------------
_DWORD *__thiscall sub_658843E0(_DWORD *this, _DWORD *a2, int a3)
{
  char *v3; // ebx
  char *v4; // edi
  _DWORD *v5; // eax
  _DWORD *v6; // edx
  char **v7; // esi
  _DWORD *v8; // ecx
  int v9; // eax
  int v10; // eax
  int v11; // ecx
  int v12; // ecx
  char **v13; // ecx
  char *v14; // ecx
  char *v15; // eax
  char v16; // dl
  _DWORD *i; // ecx
  char *v18; // eax
  int v19; // eax
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-5Ch] BYREF
  _BYTE v22[28]; // [esp+38h] [ebp-34h] BYREF
  int v23; // [esp+54h] [ebp-18h]
  void *v24; // [esp+58h] [ebp-14h]
  _DWORD *v25; // [esp+5Ch] [ebp-10h]
  int v26; // [esp+68h] [ebp-4h]

  v25 = this;
  v3 = (char *)a3;
  if ( *(_BYTE *)(a3 + 29) )
  {
    std::string::string(v22, "invalid map/set<T> iterator");
    v26 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v22);
    pExceptionObject[0] = &off_659BFD34;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVout_of_range_std__);
  }
  v24 = (void *)a3;
  sub_65883E50(&a3);
  if ( *(_BYTE *)(*(_DWORD *)v3 + 29) )
  {
    v4 = (_DWORD *)*((_DWORD *)v3 + 2);
LABEL_8:
    v7 = (char **)*((_DWORD *)v3 + 1);
    if ( !*((_BYTE *)v4 + 29) )
      v4[1] = v7;
    v8 = v25;
    v9 = v25[1];
    if ( *(char **)(v9 + 4) == v3 )
    {
      *(_DWORD *)(v9 + 4) = v4;
    }
    else if ( *v7 == v3 )
    {
      *v7 = (char *)v4;
    }
    else
    {
      v7[2] = (char *)v4;
    }
    if ( *(char **)v8[1] == v3 )
    {
      if ( *((_BYTE *)v4 + 29) )
      {
        v10 = (int)v7;
      }
      else
      {
        v10 = sub_658839F0((char *)v4);
        v8 = v25;
      }
      *(_DWORD *)v8[1] = v10;
    }
    v11 = v8[1];
    v23 = v11;
    if ( *(char **)(v11 + 8) == v3 )
    {
      if ( *((_BYTE *)v4 + 29) )
        *(_DWORD *)(v11 + 8) = v7;
      else
        *(_DWORD *)(v23 + 8) = sub_65883AD0((char *)v4);
    }
    goto LABEL_36;
  }
  if ( *(_BYTE *)(*((_DWORD *)v3 + 2) + 29) )
  {
    v4 = *(_DWORD **)v3;
    goto LABEL_8;
  }
  v5 = (_DWORD *)a3;
  v4 = *(_DWORD **)(a3 + 8);
  v6 = (_DWORD *)(a3 + 8);
  if ( (char *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = a3;
  *v5 = *(_DWORD *)v3;
  if ( v5 == *((_DWORD **)v3 + 2) )
  {
    v7 = (char **)v5;
  }
  else
  {
    v7 = (char **)v5[1];
    if ( !*((_BYTE *)v4 + 29) )
      v4[1] = v7;
    *v7 = (char *)v4;
    *v6 = *((_DWORD *)v3 + 2);
    *(_DWORD *)(*((_DWORD *)v3 + 2) + 4) = v5;
  }
  v12 = v25[1];
  if ( *(char **)(v12 + 4) == v3 )
  {
    *(_DWORD *)(v12 + 4) = v5;
  }
  else
  {
    v13 = (char **)*((_DWORD *)v3 + 1);
    if ( *v13 == v3 )
      *v13 = (char *)v5;
    else
      v13[2] = (char *)v5;
  }
  v5[1] = *((_DWORD *)v3 + 1);
  v14 = v3 + 28;
  v15 = (char *)(v5 + 7);
  if ( v15 != v3 + 28 )
  {
    v16 = *v15;
    *v15 = *v14;
    *v14 = v16;
  }
LABEL_36:
  if ( *((_BYTE *)v24 + 28) == 1 )
  {
    for ( i = v25; v4 != *(_DWORD **)(i[1] + 4); v7 = (char **)v7[1] )
    {
      if ( *((_BYTE *)v4 + 28) != 1 )
        break;
      v18 = *v7;
      if ( v4 == (_DWORD *)*v7 )
      {
        v18 = v7[2];
        if ( !v18[28] )
        {
          v18[28] = 1;
          *((_BYTE *)v7 + 28) = 0;
          sub_65883F70(v7);
          v18 = v7[2];
          i = v25;
        }
        if ( v18[29] )
          goto LABEL_54;
        if ( *(_BYTE *)(*(_DWORD *)v18 + 28) != 1 || *(_BYTE *)(*((_DWORD *)v18 + 2) + 28) != 1 )
        {
          if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 28) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v18 + 28) = 1;
            v18[28] = 0;
            sub_65883FD0(v18);
            v18 = v7[2];
          }
          v18[28] = *((_BYTE *)v7 + 28);
          *((_BYTE *)v7 + 28) = 1;
          *(_BYTE *)(*((_DWORD *)v18 + 2) + 28) = 1;
          sub_65883F70(v7);
          break;
        }
      }
      else
      {
        if ( !v18[28] )
        {
          v18[28] = 1;
          *((_BYTE *)v7 + 28) = 0;
          sub_65883FD0(v7);
          v18 = *v7;
          i = v25;
        }
        if ( v18[29] )
          goto LABEL_54;
        if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 28) != 1 || *(_BYTE *)(*(_DWORD *)v18 + 28) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v18 + 28) == 1 )
          {
            *(_BYTE *)(*((_DWORD *)v18 + 2) + 28) = 1;
            v18[28] = 0;
            sub_65883F70(v18);
            v18 = *v7;
          }
          v18[28] = *((_BYTE *)v7 + 28);
          *((_BYTE *)v7 + 28) = 1;
          *(_BYTE *)(*(_DWORD *)v18 + 28) = 1;
          sub_65883FD0(v7);
          break;
        }
      }
      v18[28] = 0;
LABEL_54:
      v4 = v7;
    }
    *((_BYTE *)v4 + 28) = 1;
  }
  operator delete(v24);
  v19 = v25[2];
  if ( v19 )
    v25[2] = v19 - 1;
  *a2 = a3;
  return a2;
}
// 658843E0: too many cbuild loops
// 658839F0: using guessed type int __cdecl sub_658839F0(_DWORD);
// 65883AD0: using guessed type int __cdecl sub_65883AD0(_DWORD);
// 65883E50: using guessed type int __thiscall sub_65883E50(_DWORD);
// 65883F70: using guessed type int __stdcall sub_65883F70(_DWORD);
// 65883FD0: using guessed type int __stdcall sub_65883FD0(_DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD34: using guessed type void *off_659BFD34;

//----- (658846A0) --------------------------------------------------------
_DWORD *ScaleNode_Alloc32()
{
  _DWORD *result; // eax

  result = operator new(0x20u);
  if ( result )
    *result = 0;
  if ( result != (_DWORD *)-4 )
    result[1] = 0;
  if ( result != (_DWORD *)-8 )
    result[2] = 0;
  *((_BYTE *)result + 28) = 1;
  *((_BYTE *)result + 29) = 0;
  return result;
}

//----- (658847D0) --------------------------------------------------------
int **__thiscall IntRBTree_FindUpperBound(int **this, int **a2, _DWORD *a3)
{
  int *v3; // edx
  int v4; // eax

  v3 = *(this + 1);
  v4 = v3[1];
  while ( !*(_BYTE *)(v4 + 29) )
  {
    if ( *(_DWORD *)(v4 + 12) >= *a3 )
    {
      v3 = (int *)v4;
      v4 = *(_DWORD *)v4;
    }
    else
    {
      v4 = *(_DWORD *)(v4 + 8);
    }
  }
  if ( v3 == *(this + 1) || *a3 < (unsigned int)v3[3] )
  {
    *a2 = *(this + 1);
    return a2;
  }
  else
  {
    *a2 = v3;
    return a2;
  }
}

//----- (658848D0) --------------------------------------------------------
int **__thiscall sub_658848D0(int ***this, int **a2, int *a3, int *a4)
{
  int v5; // eax
  int *v6; // ecx
  _DWORD *v7; // eax
  int v9; // edx
  int v10; // eax
  int *v11; // ecx
  int j; // eax
  int i; // eax
  int v14; // [esp+4h] [ebp-4h] BYREF

  v5 = (int)*(this + 1);
  v6 = a3;
  if ( a3 == *(int **)v5 && a4 == (int *)v5 )
  {
    sub_65884250(*(void ***)(v5 + 4));
    (*(this + 1))[1] = (int *)*(this + 1);
    v7 = *(this + 1);
    *(this + 2) = 0;
    *v7 = v7;
    (*(this + 1))[2] = (int *)*(this + 1);
    *a2 = **(this + 1);
    return a2;
  }
  else
  {
    for ( ; a3 != a4; v6 = a3 )
    {
      v9 = (int)v6;
      if ( !*((_BYTE *)v6 + 29) )
      {
        v10 = v6[2];
        if ( *(_BYTE *)(v10 + 29) )
        {
          for ( i = v6[1]; !*(_BYTE *)(i + 29); i = *(_DWORD *)(i + 4) )
          {
            if ( v6 != *(int **)(i + 8) )
              break;
            v6 = (int *)i;
          }
          a3 = (int *)i;
        }
        else
        {
          v11 = (int *)v6[2];
          for ( j = *(_DWORD *)v10; !*(_BYTE *)(j + 29); j = *(_DWORD *)j )
            v11 = (int *)j;
          a3 = v11;
        }
      }
      sub_658843E0(this, &v14, v9);
    }
    *a2 = v6;
    return a2;
  }
}

//----- (65884B70) --------------------------------------------------------
_DWORD *__stdcall ScaleNode_AllocWithData(int a1, int a2, _DWORD *a3)
{
  _DWORD *result; // eax

  result = operator new(0x18u);
  if ( result )
    *result = a1;
  if ( result != (_DWORD *)-4 )
    result[1] = a2;
  if ( result != (_DWORD *)-8 )
  {
    result[2] = *a3;
    result[3] = a3[1];
    result[4] = a3[2];
    result[5] = a3[3];
  }
  return result;
}

//----- (65884F00) --------------------------------------------------------
_DWORD *__thiscall sub_65884F00(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  _DWORD *v6; // eax
  _DWORD *v7; // esi
  int v8; // eax
  int v9; // ecx
  _BYTE v10[8]; // [esp+8h] [ebp-8h] BYREF

  if ( !*(this + 2) )
  {
    sub_658849C0(this, a2, 1, *(this + 1), a4);
    return a2;
  }
  v6 = (_DWORD *)*(this + 1);
  v7 = a4;
  if ( a3 == (_DWORD *)*v6 )
  {
    if ( *a4 < a3[3] )
    {
      sub_658849C0(this, a2, 1, a3, a4);
      return a2;
    }
    goto LABEL_22;
  }
  if ( a3 == v6 )
  {
    v8 = v6[2];
    if ( *(_DWORD *)(v8 + 12) < *a4 )
    {
      sub_658849C0(this, a2, 0, v8, a4);
      return a2;
    }
    goto LABEL_22;
  }
  if ( *a4 >= a3[3] || (a4 = a3, sub_65884050(&a4), a4[3] >= *v7) )
  {
    if ( a3[3] >= *v7 || (a4 = a3, sub_65883E50(&a4), a4 != (_DWORD *)*(this + 1)) && *v7 >= a4[3] )
    {
LABEL_22:
      v9 = *(_DWORD *)sub_65884D80(this, v10, v7);
      *a2 = v9;
      return a2;
    }
    if ( *(_BYTE *)(a3[2] + 29) )
      sub_658849C0(this, a2, 0, a3, v7);
    else
      sub_658849C0(this, a2, 1, a4, v7);
    return a2;
  }
  else
  {
    if ( *(_BYTE *)(a4[2] + 29) )
      sub_658849C0(this, a2, 0, a4, v7);
    else
      sub_658849C0(this, a2, 1, a3, v7);
    return a2;
  }
}
// 65883E50: using guessed type int __thiscall sub_65883E50(_DWORD);
// 65884050: using guessed type int __thiscall sub_65884050(_DWORD);
// 658849C0: using guessed type int __thiscall sub_658849C0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 65884D80: using guessed type int __thiscall sub_65884D80(_DWORD, _DWORD, _DWORD);

//----- (65885060) --------------------------------------------------------
int __thiscall ScaleRBTree_Clear(int this)
{
  int *v3; // [esp+4h] [ebp-4h] BYREF

  sub_658848D0((int ***)this, &v3, **(int ***)(this + 4), *(int **)(this + 4));
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return 0;
}

//----- (658850A0) --------------------------------------------------------
int __thiscall ScaleMgr_Clear(int this)
{
  int *v3; // [esp+4h] [ebp-4h] BYREF

  LinkedList_Clear(this + 12);
  sub_658848D0((int ***)this, &v3, **(int ***)(this + 4), *(int **)(this + 4));
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return 0;
}

//----- (65885110) --------------------------------------------------------
int *__thiscall IntRBTree_GetOrInsert(int **this, unsigned int *a2)
{
  int *v2; // edx
  int v3; // eax
  int v5; // [esp+4h] [ebp-10h] BYREF

  v2 = *(this + 1);
  v3 = v2[1];
  while ( !*(_BYTE *)(v3 + 29) )
  {
    if ( *(_DWORD *)(v3 + 12) >= *a2 )
    {
      v2 = (int *)v3;
      v3 = *(_DWORD *)v3;
    }
    else
    {
      v3 = *(_DWORD *)(v3 + 8);
    }
  }
  if ( v2 != *(this + 1) && *a2 >= v2[3] )
    return v2 + 4;
  v5 = *a2;
  return (int *)(*sub_65884F00(this, &a2, v2, &v5) + 16);
}

//----- (65885190) --------------------------------------------------------
_DWORD *__thiscall RBTree_Init(_DWORD *this)
{
  _DWORD *v2; // eax

  v2 = ScaleNode_Alloc32();
  *(this + 1) = v2;
  *((_BYTE *)v2 + 29) = 1;
  *(_DWORD *)(*(this + 1) + 4) = *(this + 1);
  *(_DWORD *)*(this + 1) = *(this + 1);
  *(_DWORD *)(*(this + 1) + 8) = *(this + 1);
  *(this + 2) = 0;
  *(this + 4) = ListNode_Alloc24();
  *(this + 5) = 0;
  return this;
}

//----- (65885210) --------------------------------------------------------
char __thiscall ScaleMgr_ApplyScale(int **this, int a2, float *a3)
{
  int v4; // edi
  float *v6; // eax
  float v7[3]; // [esp+8h] [ebp-1Ch] BYREF
  float v8; // [esp+14h] [ebp-10h] BYREF
  float v9; // [esp+18h] [ebp-Ch]
  float v10; // [esp+1Ch] [ebp-8h]
  float *v11; // [esp+20h] [ebp-4h] BYREF

  IntRBTree_FindUpperBound(this, (int **)&v11, &a2);
  v4 = a2;
  dword_65ABF6E8 = a2;
  if ( v11 == (float *)*(this + 1) )
  {
    if ( (*(int (__thiscall **)(int, int, float *))(*(_DWORD *)g_pILTClient + 360))(g_pILTClient, a2, &v8) )
      return 0;
    v6 = (float *)IntRBTree_GetOrInsert(this, (unsigned int *)&a2);
    *v6 = v8;
    v6[1] = v9;
    v6[2] = v10;
  }
  else
  {
    v8 = v11[4];
    v9 = v11[5];
    v10 = v11[6];
  }
  v7[0] = *a3 * v8;
  v7[1] = a3[1] * v9;
  v7[2] = a3[2] * v10;
  (*(void (__thiscall **)(int, int, float *))(*(_DWORD *)g_pILTClient + 364))(g_pILTClient, v4, v7);
  return 1;
}
// 65ABF6E8: using guessed type int dword_65ABF6E8;

//----- (658852D0) --------------------------------------------------------
char __thiscall MsgId_6A_Handler(int **this, int a2)
{
  int v3; // ebx
  char result; // al
  _DWORD *v5; // esi
  int v6; // edi
  _DWORD *v7; // ebx
  int v8; // [esp-8h] [ebp-30h]
  _DWORD v9[4]; // [esp+Ch] [ebp-1Ch] BYREF
  float v10[3]; // [esp+1Ch] [ebp-Ch] BYREF

  v3 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 32);
  (*(void (__thiscall **)(int, float *, int))(*(_DWORD *)a2 + 68))(a2, v10, 96);
  result = ScaleMgr_ApplyScale(this, v3, v10);
  if ( !result )
  {
    v5 = this + 3;
    *(float *)&v9[1] = v10[0];
    v6 = **(this + 4);
    *(float *)&v9[2] = v10[1];
    *(float *)&v9[3] = v10[2];
    v8 = *(_DWORD *)(v6 + 4);
    v9[0] = v3;
    v7 = ScaleNode_AllocWithData(v6, v8, v9);
    result = List_CheckSize(v5, 1u);
    *(_DWORD *)(v6 + 4) = v7;
    *(_DWORD *)v7[1] = v7;
  }
  return result;
}

//----- (65885360) --------------------------------------------------------
void __thiscall ScaleMgr_UpdateAll(float ***this)
{
  float ***v2; // eax
  float **v3; // esi
  float **v4; // ebx

  if ( *(this + 5) )
  {
    v2 = (float ***)*(this + 4);
    v3 = *v2;
    if ( *v2 != (float **)v2 )
    {
      do
      {
        v4 = (float **)*v3;
        if ( ScaleMgr_ApplyScale((int **)this, (int)v3[2], (float *)v3 + 3) )
        {
          if ( v3 != *(this + 4) )
          {
            *(_DWORD *)v3[1] = *v3;
            *((_DWORD *)*v3 + 1) = v3[1];
            operator delete(v3);
            *(this + 5) = (float **)((char *)*(this + 5) - 1);
          }
        }
        v3 = v4;
      }
      while ( v4 != *(this + 4) );
    }
  }
}

//----- (65885860) --------------------------------------------------------
float *__thiscall sub_65885860(float *this)
{
  *(this + 12) = 0.001;
  *(this + 11) = 0.0;
  *(this + 1) = 0.0;
  *(this + 2) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *((_BYTE *)this + 52) = 0;
  *(this + 14) = 0.0;
  *(this + 15) = 0.0;
  *(this + 16) = 0.0;
  *(this + 17) = 0.0;
  *(this + 18) = 0.0;
  *(this + 19) = 0.0;
  *(this + 20) = 0.0;
  *(_DWORD *)this = &off_659CDFBC;
  sub_658854D0(this + 21);
  *(this + 53) = 0.0;
  *(this + 66) = 0.0;
  *(this + 62) = 0.0;
  *(this + 52) = 0.0099999998;
  *(this + 63) = 0.0;
  *(this + 65) = 0.0;
  *((double *)this + 27) = 1000000.0;
  *(this + 64) = 0.0;
  *((_DWORD *)this + 51) = 1;
  *(this + 56) = 0.0;
  *(this + 57) = 0.0;
  *(this + 58) = 0.0;
  *(this + 59) = 0.0;
  *(this + 60) = 0.0;
  *(this + 61) = 0.0;
  *(this + 67) = 0.0;
  return this;
}
// 658854D0: using guessed type int __thiscall sub_658854D0(_DWORD);
// 659CDFBC: using guessed type void *off_659CDFBC;

//----- (658862F0) --------------------------------------------------------
_DWORD *__thiscall PlayerFactory_Ctor(_DWORD *this)
{
  sub_65970A10(this);
  *this = &off_659CE000;
  return this;
}
// 659CE000: using guessed type void *off_659CE000;

//----- (65886310) --------------------------------------------------------
_DWORD *__thiscall ObjectFactory_Ctor(_DWORD *this)
{
  sub_65970A10(this);
  *this = &off_659CE010;
  return this;
}
// 659CE010: using guessed type void *off_659CE010;

//----- (65886510) --------------------------------------------------------
float *Create_CClientSoundMgr()
{
  float *v0; // eax

  v0 = (float *)operator new(0x10u);
  if ( v0 )
    return Quaternion_SetZero(v0);
  else
    return 0;
}

//----- (65886660) --------------------------------------------------------
int sub_65886660()
{
  void *v0; // eax

  v0 = operator new(0x28u);
  if ( v0 )
    return sub_6578BA00(v0);
  else
    return 0;
}
// 6578BA00: using guessed type int __thiscall sub_6578BA00(_DWORD);

//----- (658867B0) --------------------------------------------------------
int sub_658867B0()
{
  void *v0; // eax

  v0 = operator new(0x18u);
  if ( v0 )
    return sub_65889D20(v0);
  else
    return 0;
}
// 65889D20: using guessed type int __thiscall sub_65889D20(_DWORD);

//----- (65886900) --------------------------------------------------------
int sub_65886900()
{
  void *v0; // eax

  v0 = operator new(0x38u);
  if ( v0 )
    return sub_658C2570(v0);
  else
    return 0;
}
// 658C2570: using guessed type int __thiscall sub_658C2570(_DWORD);

//----- (65886970) --------------------------------------------------------
int sub_65886970()
{
  void *v0; // eax

  v0 = operator new(0x38u);
  if ( v0 )
    return sub_65721D00(v0);
  else
    return 0;
}
// 65721D00: using guessed type int __thiscall sub_65721D00(_DWORD);

//----- (65886AC0) --------------------------------------------------------
int sub_65886AC0()
{
  void *v0; // eax

  v0 = operator new(8u);
  if ( v0 )
    return sub_65731B10(v0);
  else
    return 0;
}
// 65731B10: using guessed type int __thiscall sub_65731B10(_DWORD);

//----- (65886C10) --------------------------------------------------------
int sub_65886C10()
{
  void *v0; // eax

  v0 = operator new(4u);
  if ( v0 )
    return unknown_libname_129(v0);
  else
    return 0;
}
// 65745F20: using guessed type int __thiscall unknown_libname_129(_DWORD);

//----- (65886D60) --------------------------------------------------------
int sub_65886D60()
{
  void *v0; // eax

  v0 = operator new(1u);
  if ( v0 )
    return sub_658BD990(v0);
  else
    return 0;
}
// 658BD990: using guessed type int __thiscall sub_658BD990(_DWORD);

//----- (65886EB0) --------------------------------------------------------
int sub_65886EB0()
{
  void *v0; // eax

  v0 = operator new(0x3Cu);
  if ( v0 )
    return sub_658C4D30(v0);
  else
    return 0;
}
// 658C4D30: using guessed type int __thiscall sub_658C4D30(_DWORD);

//----- (65886F20) --------------------------------------------------------
int sub_65886F20()
{
  void *v0; // eax

  v0 = operator new(0x48u);
  if ( v0 )
    return sub_65771150(v0);
  else
    return 0;
}
// 65771150: using guessed type int __thiscall sub_65771150(_DWORD);

//----- (65886F90) --------------------------------------------------------
int sub_65886F90()
{
  void *v0; // eax

  v0 = operator new(0x5Cu);
  if ( v0 )
    return sub_6572AAF0(v0);
  else
    return 0;
}
// 6572AAF0: using guessed type int __thiscall sub_6572AAF0(_DWORD);

//----- (658870E0) --------------------------------------------------------
int sub_658870E0()
{
  void *v0; // eax

  v0 = operator new(0x2Cu);
  if ( v0 )
    return sub_6571D9A0(v0);
  else
    return 0;
}
// 6571D9A0: using guessed type int __thiscall sub_6571D9A0(_DWORD);

//----- (65887150) --------------------------------------------------------
int __cdecl sub_65887150(int (__thiscall ***a1)(_DWORD, int))
{
  int result; // eax

  if ( a1 )
    return (**a1)(a1, 1);
  return result;
}

//----- (65887170) --------------------------------------------------------
int __cdecl sub_65887170(int (__thiscall ***a1)(_DWORD, int))
{
  int result; // eax

  if ( a1 )
    return (**a1)(a1, 1);
  return result;
}

//----- (65887190) --------------------------------------------------------
int __cdecl sub_65887190(int (__thiscall ***a1)(_DWORD, int))
{
  int result; // eax

  if ( a1 )
    return (**a1)(a1, 1);
  return result;
}

//----- (658871B0) --------------------------------------------------------
int __cdecl sub_658871B0(int (__thiscall ***a1)(_DWORD, int))
{
  int result; // eax

  if ( a1 )
    return (**a1)(a1, 1);
  return result;
}

//----- (658871D0) --------------------------------------------------------
int __cdecl sub_658871D0(int (__thiscall ***a1)(_DWORD, int))
{
  int result; // eax

  if ( a1 )
    return (**a1)(a1, 1);
  return result;
}

//----- (658871F0) --------------------------------------------------------
int __cdecl sub_658871F0(int (__thiscall ***a1)(_DWORD, int))
{
  int result; // eax

  if ( a1 )
    return (**a1)(a1, 1);
  return result;
}

//----- (658876C0) --------------------------------------------------------
int __usercall CShell_InitManagers@<eax>(double a1@<st1>, double a2@<st0>, double a3@<st2>)
{
  void *v3; // esi
  char *Instance; // eax
  struct Concurrency::details::_TaskCollectionBase *Element; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  int v11; // [esp-4h] [ebp-1Ch]

  Timer_InitHighRes();
  EncVarMgr_SetInt((_DWORD *)g_pEncVarMgr, 0xAu, 0);
  TimeMgr_ResetSystemTime();
  v3 = dword_65ABF740;
  SharedMem_WriteDword_this(dword_65ABF740, 0x2BE2u, 0);
  SharedMem_WriteDword_this(v3, 0x2BE3u, 0);
  SharedMem_WriteDword_this(v3, 0x2BE4u, 0);
  SharedMem_WriteDword_this(v3, 0x1EA3Du, 0);
  PlayerObjectMgr_OnMessage((float *)dword_65ABF704, 0);
  if ( !CursorMgr_LoadCursors((_DWORD *)dword_65ABF6F4) )
  {
    (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR: Couldn't initialize InterfaceMgr!");
    return 0;
  }
  if ( CInterfaceResMgr_Init((int)dword_65ABF6F8) )
  {
    if ( CameraMgr_InitConsoleVars() )
    {
      if ( !PlayerMovement_Update((int *)dword_65ABF700, a2) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR:  Couldn't initialize cameras!");
        return 0;
      }
      CInterfaceMgr_Init(dword_65A60644, a2, a1, a3);
      if ( !ShutdownUI_CheckState((char *)dword_65ABF728, a2) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR:  Couldn't initialize profile manager!");
        return 0;
      }
      if ( !EquipSlotsWindow_ClearAll((_DWORD *)dword_65ABF708) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR:  Couldn't initialize WindowMgr!");
        return 0;
      }
      if ( !Panel_InitAll((_DWORD *)dword_65ABF70C) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR:  Couldn't initialize MenuMgr!");
        return 0;
      }
      if ( !LoadingScreen_Initialize((int *)dword_65ABF754) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR:  Couldn't initialize LoadingScreen!");
        return 0;
      }
      if ( !PlayerStats_Init(g_pPlayerStats) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR:  Couldn't initialize playerstats!");
        return 0;
      }
      AudioMgr_Initialize(dword_65ABF714, a2);
      if ( !CrosshairMgr_Init(dword_65ABF71C) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR:  Couldn't initialize crosshair manager!");
        return 0;
      }
      if ( !ShutdownUI_LoadTextures(dword_65ABF758) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR:  Couldn't initialize shutdown screen!");
        return 0;
      }
      Network_Initialize((int)dword_65ABF734);
      ClearTargetId(dword_65ABF748);
      if ( !WeaponSlot_ValidateAllSlots((char *)dword_65ABF730) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR: Couldn't initialize SFXMgr!");
        return 0;
      }
      v11 = g_pILTClient;
      Instance = (char *)ClientFXMgr_GetInstance();
      if ( !ClientFX_LoadAllFXFiles(Instance, v11) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR: Couldn't initialize FX database!");
        return 0;
      }
      if ( !ClientFXMgr_SetRenderMode(dword_65ABF72C, g_pILTClient, 1) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR: Couldn't initialize FX manager!");
        return 0;
      }
      Element = (struct Concurrency::details::_TaskCollectionBase *)IndexArray_GetElement(
                                                                      dword_65ABF6FC,
                                                                      *((_DWORD *)dword_65ABF700 + 1));
      Concurrency::details::ContextBase::SetExecutingCollection(dword_65ABF72C, Element);
      if ( !WeaponFire_ClearCurrentWeapon(dword_65ABF75C) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR: Couldn't initialize weapon manager!");
        return 0;
      }
      if ( !ShaderMgr_InitializeShaders((int *)dword_65ABF770) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR: Failed to initialize shader manager!");
        return 0;
      }
      if ( !DLL_Init((int *)dword_65ABF77C) )
      {
        (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR: Failed to initialize chromium embedded framework!");
        return 0;
      }
      byte_65A5A7E0 = 1;
      v7 = operator new(0xCu);
      if ( v7 )
        v8 = PlayerFactory_Ctor(v7);
      else
        v8 = 0;
      dword_65ABF774 = (int)v8;
      if ( v8 )
        Thread_StartWithPriority(v8, 0);
      byte_65A5A790 = 1;
      v9 = operator new(0xCu);
      if ( v9 )
        v10 = ObjectFactory_Ctor(v9);
      else
        v10 = 0;
      dword_65ABF778 = (int)v10;
      if ( v10 )
        Thread_StartWithPriority(v10, 0);
      return 1;
    }
    else
    {
      (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR:  Couldn't initialize CameraMgr!");
      return 0;
    }
  }
  else
  {
    (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR: Couldn't initialize InterfaceResMgr!");
    return 0;
  }
}
// 65A5A790: using guessed type char byte_65A5A790;
// 65A5A7E0: using guessed type char byte_65A5A7E0;
// 65A60644: using guessed type int dword_65A60644;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF70C: using guessed type int dword_65ABF70C;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65ABF774: using guessed type int dword_65ABF774;
// 65ABF778: using guessed type int dword_65ABF778;
// 65ABF77C: using guessed type int dword_65ABF77C;

//----- (65887B30) --------------------------------------------------------
void __cdecl sub_65887B30(void *a1)
{
  if ( a1 )
  {
    sub_6575EE50(a1);
    operator delete(a1);
  }
}
// 6575EE50: using guessed type int __thiscall sub_6575EE50(_DWORD);

//----- (65887B50) --------------------------------------------------------
void __cdecl sub_65887B50(void *a1)
{
  if ( a1 )
  {
    sub_65717F80(a1);
    operator delete(a1);
  }
}
// 65717F80: using guessed type int __thiscall sub_65717F80(_DWORD);

//----- (65887B70) --------------------------------------------------------
void __cdecl sub_65887B70(void *a1)
{
  if ( a1 )
  {
    sub_65714C10(a1);
    operator delete(a1);
  }
}
// 65714C10: using guessed type int __thiscall sub_65714C10(_DWORD);

//----- (65887B90) --------------------------------------------------------
void __cdecl sub_65887B90(void *a1)
{
  if ( a1 )
  {
    sub_658A1A90(a1);
    operator delete(a1);
  }
}
// 658A1A90: using guessed type int __thiscall sub_658A1A90(_DWORD);

//----- (65887BB0) --------------------------------------------------------
void __cdecl sub_65887BB0(void *a1)
{
  if ( a1 )
  {
    sub_658A9D00(a1);
    operator delete(a1);
  }
}
// 658A9D00: using guessed type int __thiscall sub_658A9D00(_DWORD);

//----- (65887BD0) --------------------------------------------------------
void __cdecl sub_65887BD0(void *a1)
{
  if ( a1 )
    operator delete(a1);
}

//----- (65887BF0) --------------------------------------------------------
void __cdecl sub_65887BF0(void *a1)
{
  if ( a1 )
  {
    sub_6574DD40(a1);
    operator delete(a1);
  }
}
// 6574DD40: using guessed type int __thiscall sub_6574DD40(_DWORD);

//----- (65887C10) --------------------------------------------------------
void __cdecl sub_65887C10(void *a1)
{
  if ( a1 )
  {
    j_PlayerModels_ClearAll(a1);
    operator delete(a1);
  }
}
// 6574CD80: using guessed type int __thiscall j_PlayerModels_ClearAll(_DWORD);

//----- (65887C30) --------------------------------------------------------
void __cdecl sub_65887C30(void *a1)
{
  if ( a1 )
  {
    nullsub_19(a1);
    operator delete(a1);
  }
}
// 658C2510: using guessed type int __thiscall nullsub_19(_DWORD);

//----- (65887C50) --------------------------------------------------------
void __cdecl sub_65887C50(void *a1)
{
  if ( a1 )
  {
    sub_65722820(a1);
    operator delete(a1);
  }
}
// 65722820: using guessed type int __thiscall sub_65722820(_DWORD);

//----- (65887C70) --------------------------------------------------------
void __cdecl sub_65887C70(void *a1)
{
  if ( a1 )
  {
    sub_65897D20(a1);
    operator delete(a1);
  }
}
// 65897D20: using guessed type int __thiscall sub_65897D20(_DWORD);

//----- (65887C90) --------------------------------------------------------
void __cdecl sub_65887C90(void *a1)
{
  if ( a1 )
  {
    j_SharedMem_Release(a1);
    operator delete(a1);
  }
}
// 65731290: using guessed type int __thiscall j_SharedMem_Release(_DWORD);

//----- (65887CB0) --------------------------------------------------------
void __cdecl sub_65887CB0(void *a1)
{
  if ( a1 )
  {
    sub_658C1810(a1);
    operator delete(a1);
  }
}
// 658C1810: using guessed type int __thiscall sub_658C1810(_DWORD);

//----- (65887CD0) --------------------------------------------------------
void __cdecl sub_65887CD0(void *a1)
{
  if ( a1 )
  {
    j_SharedMem_Release_0(a1);
    operator delete(a1);
  }
}
// 658C20D0: using guessed type int __thiscall j_SharedMem_Release_0(_DWORD);

//----- (65887CF0) --------------------------------------------------------
void __cdecl sub_65887CF0(void *a1)
{
  if ( a1 )
  {
    sub_65745F30(a1);
    operator delete(a1);
  }
}
// 65745F30: using guessed type int __thiscall sub_65745F30(_DWORD);

//----- (65887D10) --------------------------------------------------------
void __cdecl sub_65887D10(void *a1)
{
  if ( a1 )
  {
    nullsub_12(a1);
    operator delete(a1);
  }
}
// 658B2FB0: using guessed type int __thiscall nullsub_12(_DWORD);

//----- (65887D30) --------------------------------------------------------
void __cdecl sub_65887D30(void *a1)
{
  if ( a1 )
  {
    nullsub_17(a1);
    operator delete(a1);
  }
}
// 658BD9B0: using guessed type int __thiscall nullsub_17(_DWORD);

//----- (65887D50) --------------------------------------------------------
void __cdecl sub_65887D50(void *a1)
{
  if ( a1 )
  {
    sub_65765F80(a1);
    operator delete(a1);
  }
}
// 65765F80: using guessed type int __thiscall sub_65765F80(_DWORD);

//----- (65887D70) --------------------------------------------------------
void __cdecl sub_65887D70(void *a1)
{
  if ( a1 )
  {
    sub_6578E2D0(a1);
    operator delete(a1);
  }
}
// 6578E2D0: using guessed type int __thiscall sub_6578E2D0(_DWORD);

//----- (65887D90) --------------------------------------------------------
void __cdecl sub_65887D90(void *a1)
{
  if ( a1 )
  {
    j_SharedMem_Release_1(a1);
    operator delete(a1);
  }
}
// 658C4890: using guessed type int __thiscall j_SharedMem_Release_1(_DWORD);

//----- (65887DB0) --------------------------------------------------------
void __cdecl sub_65887DB0(void *a1)
{
  if ( a1 )
  {
    sub_657710A0(a1);
    operator delete(a1);
  }
}
// 657710A0: using guessed type int __thiscall sub_657710A0(_DWORD);

//----- (65887DD0) --------------------------------------------------------
void __cdecl sub_65887DD0(void *a1)
{
  if ( a1 )
  {
    sub_6572A580(a1);
    operator delete(a1);
  }
}
// 6572A580: using guessed type int __thiscall sub_6572A580(_DWORD);

//----- (65887DF0) --------------------------------------------------------
void __cdecl sub_65887DF0(void *a1)
{
  if ( a1 )
  {
    sub_65930630(a1);
    operator delete(a1);
  }
}
// 65930630: using guessed type int __thiscall sub_65930630(_DWORD);

//----- (65887E10) --------------------------------------------------------
void __cdecl sub_65887E10(void *a1)
{
  if ( a1 )
  {
    Concurrency::details::StructuredWorkStealingQueue<Concurrency::details::_UnrealizedChore,Concurrency::details::_CriticalNonReentrantLock>::Reinitialize(a1);
    operator delete(a1);
  }
}
// 658BC5F0: using guessed type int __thiscall Concurrency::details::StructuredWorkStealingQueue<Concurrency::details::_UnrealizedChore,Concurrency::details::_CriticalNonReentrantLock>::Reinitialize(_DWORD);

//----- (65887ED0) --------------------------------------------------------
void *Create_CharacterDataMgr()
{
  void *v0; // esi
  void *result; // eax

  v0 = operator new(0x2E40u);
  result = 0;
  if ( v0 )
  {
    PlayerData_Ctor((int)v0);
    return v0;
  }
  return result;
}

//----- (65887F30) --------------------------------------------------------
void __cdecl sub_65887F30(void *a1)
{
  if ( a1 )
  {
    nullsub_8(a1);
    operator delete(a1);
  }
}
// 65889F80: using guessed type int __thiscall nullsub_8(_DWORD);

//----- (65887F50) --------------------------------------------------------
void __cdecl sub_65887F50(void *a1)
{
  if ( a1 )
  {
    std::string::~string(a1);
    operator delete(a1);
  }
}

//----- (65887F70) --------------------------------------------------------
void __cdecl Delete_WeaponArrays(void *a1)
{
  if ( a1 )
  {
    `eh vector destructor iterator'(a1, 0x10u, 12, (void (__thiscall *)(void *))WeaponArray_FreeAll);
    operator delete(a1);
  }
}
// 65985B4A: using guessed type void __stdcall `eh vector destructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *));

//----- (65887FC0) --------------------------------------------------------
BOOL CShell_CreateGlobalObjects()
{
  int v0; // eax
  void *v2; // eax
  void *v3; // eax
  __packed *v4; // eax
  void *v5; // eax
  void *v6; // eax
  void *v7; // eax
  int v8; // eax
  void *v9; // eax
  char *v10; // eax

  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  g_pEncVarMgr = v0;
  if ( !v0 )
    return 0;
  dword_65ABF6F4 = Create_CGameClientShell();
  if ( !dword_65ABF6F4 )
    return 0;
  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  dword_65ABF6F8 = v2;
  if ( !v2 )
    return 0;
  dword_65ABF6FC = (void *)Create_CPlayerMgr();
  if ( !dword_65ABF6FC )
    return 0;
  dword_65ABF700 = Create_CClientSoundMgr();
  if ( !dword_65ABF700 )
    return 0;
  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  dword_65ABF704 = v3;
  if ( !v3 )
    return 0;
  dword_65ABF708 = Create_CInterfaceMgr();
  if ( !dword_65ABF708 )
    return 0;
  dword_65ABF70C = sub_65886660();
  if ( !dword_65ABF70C )
    return 0;
  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  g_pPlayerStats = v4;
  if ( !v4 )
    return 0;
  dword_65ABF714 = (void *)sub_65886740();
  if ( !dword_65ABF714 )
    return 0;
  dword_65ABF718 = (void *)sub_658867B0();
  if ( !dword_65ABF718 )
    return 0;
  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  dword_65ABF71C = v5;
  if ( !v5 )
    return 0;
  dword_65ABF720 = (void *)sub_65886890();
  if ( !dword_65ABF720 )
    return 0;
  dword_65ABF724 = (void *)sub_65886900();
  if ( !dword_65ABF724 )
    return 0;
  dword_65ABF728 = Create_CharacterDataMgr();
  if ( !dword_65ABF728 )
    return 0;
  dword_65ABF72C = (#167 *)sub_65886970();
  if ( !dword_65ABF72C )
    return 0;
  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  dword_65ABF730 = v6;
  if ( !v6 )
    return 0;
  dword_65ABF734 = (void *)sub_65886A50();
  if ( !dword_65ABF734 )
    return 0;
  dword_65ABF738 = (void *)sub_65886AC0();
  if ( !dword_65ABF738 )
    return 0;
  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  dword_65ABF73C = v7;
  if ( !v7 )
    return 0;
  dword_65ABF740 = (void *)sub_65886BA0();
  if ( !dword_65ABF740 )
    return 0;
  dword_65ABF744 = (void *)sub_65886C10();
  if ( !dword_65ABF744 )
    return 0;
  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  dword_65ABF748 = v8;
  if ( !v8 )
    return 0;
  dword_65ABF74C = (void *)sub_65886CF0();
  if ( !dword_65ABF74C )
    return 0;
  dword_65ABF750 = (void *)sub_65886D60();
  if ( !dword_65ABF750 )
    return 0;
  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  dword_65ABF754 = v9;
  if ( !v9 )
    return 0;
  dword_65ABF758 = (#177 *)sub_65886E40();
  if ( !dword_65ABF758 )
    return 0;
  dword_65ABF75C = (void *)sub_65886EB0();
  if ( !dword_65ABF75C )
    return 0;
  dword_65ABF760 = (void *)sub_65886F20();
  if ( !dword_65ABF760 )
    return 0;
  dword_65ABF764 = (void *)sub_65886F90();
  if ( !dword_65ABF764 )
    return 0;
  Concurrency::details::SchedulerBase::CheckStaticConstruction();
  dword_65ABF768 = v10;
  if ( !v10 )
    return 0;
  dword_65ABF770 = (void *)sub_65887070();
  if ( !dword_65ABF770 )
    return 0;
  dword_65ABF77C = sub_658870E0();
  return dword_65ABF77C != 0;
}
// 65887FC5: variable 'v0' is possibly undefined
// 65887FE4: variable 'v2' is possibly undefined
// 6588800E: variable 'v3' is possibly undefined
// 65888038: variable 'v4' is possibly undefined
// 6588806A: variable 'v5' is possibly undefined
// 658880C4: variable 'v6' is possibly undefined
// 658880FA: variable 'v7' is possibly undefined
// 65888130: variable 'v8' is possibly undefined
// 65888166: variable 'v9' is possibly undefined
// 658881C0: variable 'v10' is possibly undefined
// 65886740: using guessed type int sub_65886740(void);
// 65886890: using guessed type int sub_65886890(void);
// 65886A50: using guessed type int sub_65886A50(void);
// 65886BA0: using guessed type int sub_65886BA0(void);
// 65886CF0: using guessed type int sub_65886CF0(void);
// 65886E40: using guessed type int sub_65886E40(void);
// 65887070: using guessed type int sub_65887070(void);
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF70C: using guessed type int dword_65ABF70C;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65ABF77C: using guessed type int dword_65ABF77C;

//----- (65888200) --------------------------------------------------------
void CShell_DestroyGlobalObjects()
{
  if ( dword_65ABF6F4 )
  {
    sub_65887150((int (__thiscall ***)(_DWORD, int))dword_65ABF6F4);
    dword_65ABF6F4 = 0;
  }
  if ( dword_65ABF6F8 )
  {
    sub_65887B30(dword_65ABF6F8);
    dword_65ABF6F8 = 0;
  }
  if ( dword_65ABF6FC )
  {
    sub_65887B50(dword_65ABF6FC);
    dword_65ABF6FC = 0;
  }
  if ( dword_65ABF700 )
  {
    sub_65887B70(dword_65ABF700);
    dword_65ABF700 = 0;
  }
  if ( dword_65ABF704 )
  {
    sub_65887B90(dword_65ABF704);
    dword_65ABF704 = 0;
  }
  if ( dword_65ABF708 )
  {
    sub_65887170((int (__thiscall ***)(_DWORD, int))dword_65ABF708);
    dword_65ABF708 = 0;
  }
  if ( dword_65ABF70C )
  {
    sub_65887190((int (__thiscall ***)(_DWORD, int))dword_65ABF70C);
    dword_65ABF70C = 0;
  }
  if ( g_pPlayerStats )
  {
    sub_65887BB0(g_pPlayerStats);
    g_pPlayerStats = 0;
  }
  if ( dword_65ABF714 )
  {
    sub_65887BD0(dword_65ABF714);
    dword_65ABF714 = 0;
  }
  if ( dword_65ABF718 )
  {
    sub_65887F30(dword_65ABF718);
    dword_65ABF718 = 0;
  }
  if ( dword_65ABF71C )
  {
    sub_65887BF0(dword_65ABF71C);
    dword_65ABF71C = 0;
  }
  if ( dword_65ABF720 )
  {
    sub_65887C10(dword_65ABF720);
    dword_65ABF720 = 0;
  }
  if ( dword_65ABF724 )
  {
    sub_65887C30(dword_65ABF724);
    dword_65ABF724 = 0;
  }
  if ( dword_65ABF728 )
  {
    sub_65887F50(dword_65ABF728);
    dword_65ABF728 = 0;
  }
  if ( dword_65ABF72C )
  {
    sub_65887C50(dword_65ABF72C);
    dword_65ABF72C = 0;
  }
  if ( dword_65ABF730 )
  {
    Delete_WeaponArrays(dword_65ABF730);
    dword_65ABF730 = 0;
  }
  if ( dword_65ABF734 )
  {
    sub_65887C70(dword_65ABF734);
    dword_65ABF734 = 0;
  }
  if ( dword_65ABF738 )
  {
    sub_65887C90(dword_65ABF738);
    dword_65ABF738 = 0;
  }
  if ( dword_65ABF73C )
  {
    sub_65887CB0(dword_65ABF73C);
    dword_65ABF73C = 0;
  }
  if ( dword_65ABF740 )
  {
    sub_65887CD0(dword_65ABF740);
    dword_65ABF740 = 0;
  }
  if ( dword_65ABF744 )
  {
    sub_65887CF0(dword_65ABF744);
    dword_65ABF744 = 0;
  }
  if ( dword_65ABF748 )
  {
    sub_658871B0((int (__thiscall ***)(_DWORD, int))dword_65ABF748);
    dword_65ABF748 = 0;
  }
  if ( dword_65ABF74C )
  {
    sub_65887D10(dword_65ABF74C);
    dword_65ABF74C = 0;
  }
  if ( dword_65ABF750 )
  {
    sub_65887D30(dword_65ABF750);
    dword_65ABF750 = 0;
  }
  if ( dword_65ABF754 )
  {
    sub_65887D50(dword_65ABF754);
    dword_65ABF754 = 0;
  }
  if ( dword_65ABF758 )
  {
    sub_65887D70(dword_65ABF758);
    dword_65ABF758 = 0;
  }
  if ( dword_65ABF75C )
  {
    sub_65887D90(dword_65ABF75C);
    dword_65ABF75C = 0;
  }
  if ( dword_65ABF760 )
  {
    sub_65887DB0(dword_65ABF760);
    dword_65ABF760 = 0;
  }
  if ( dword_65ABF764 )
  {
    sub_65887DD0(dword_65ABF764);
    dword_65ABF764 = 0;
  }
  if ( dword_65ABF768 )
  {
    sub_65887DF0(dword_65ABF768);
    dword_65ABF768 = 0;
  }
  if ( dword_65ABF770 )
  {
    sub_65887E10(dword_65ABF770);
    dword_65ABF770 = 0;
  }
  if ( dword_65ABF77C )
  {
    sub_658871D0((int (__thiscall ***)(_DWORD, int))dword_65ABF77C);
    dword_65ABF77C = 0;
  }
  if ( g_pEncVarMgr )
  {
    sub_658871F0((int (__thiscall ***)(_DWORD, int))g_pEncVarMgr);
    g_pEncVarMgr = 0;
  }
  byte_65A5A7E0 = 0;
  if ( dword_65ABF774 )
  {
    (**(void (__thiscall ***)(int, int))dword_65ABF774)(dword_65ABF774, 1);
    dword_65ABF774 = 0;
  }
  byte_65A5A790 = 0;
  if ( dword_65ABF778 )
  {
    (**(void (__thiscall ***)(int, int))dword_65ABF778)(dword_65ABF778, 1);
    dword_65ABF778 = 0;
  }
  timeEndPeriod(1u);
  if ( lpFrequency )
  {
    operator delete(lpFrequency);
    lpFrequency = 0;
  }
}
// 65888200: could not find valid save-restore pair for ebx
// 65A5A790: using guessed type char byte_65A5A790;
// 65A5A7E0: using guessed type char byte_65A5A7E0;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF70C: using guessed type int dword_65ABF70C;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65ABF774: using guessed type int dword_65ABF774;
// 65ABF778: using guessed type int dword_65ABF778;
// 65ABF77C: using guessed type int dword_65ABF77C;

//----- (65889D80) --------------------------------------------------------
int __stdcall Music_SetVolume(float a1)
{
  unsigned int v1; // eax
  int result; // eax

  v1 = (__int64)a1;
  if ( v1 > 0x64 )
    v1 = 100;
  LODWORD(a1) = -4000 - (int)((double)v1 / 100.0 * -6000.0);
  if ( SLODWORD(a1) <= -4000 )
    a1 = NAN;
  result = *(_DWORD *)(dword_65ABF7F4 + 8);
  if ( result )
    return (*(int (__stdcall **)(int, void *, float *, int))(*(_DWORD *)result + 136))(result, &unk_659D6FAC, &a1, 4);
  return result;
}
// 659CE690: using guessed type double dbl_659CE690;
// 65ABF7F4: using guessed type int dword_65ABF7F4;

//----- (65889FE0) --------------------------------------------------------
void __thiscall sub_65889FE0(_DWORD *this, unsigned int a2)
{
  unsigned int v4; // eax
  int v5; // eax
  double v6; // st7
  int v7; // eax
  __int64 v8; // [esp-8h] [ebp-24h]
  __int64 v9; // [esp+14h] [ebp-8h] BYREF
  float v10; // [esp+24h] [ebp+8h]

  if ( *this )
  {
    if ( a2 <= 0x18 )
    {
      v4 = *(this + 1);
      if ( a2 != v4 )
      {
        if ( dword_65ABF790[a2] )
        {
          if ( v4 <= 0x18 )
          {
            v9 = 0;
            if ( (*(int (__stdcall **)(_DWORD, __int64 *))(**(_DWORD **)(dword_65ABF7F4 + 8) + 140))(
                   *(_DWORD *)(dword_65ABF7F4 + 8),
                   &v9) < 0 )
              return;
            v8 = v9 + 150000;
            LODWORD(v9) = v9 + 150000;
            v5 = 1 - *(this + 5);
            HIDWORD(v9) = HIDWORD(v8);
            sub_65889E10(this, v5, v8, HIDWORD(v8), 1, 3840);
            sub_65889E10(this, *(this + 5), v9, HIDWORD(v9), 0, 3840);
            if ( sub_6572F480(dword_65ABF790[a2], 0) < 0
              || (*(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)dword_65ABF790[a2] + 4))(
                   dword_65ABF790[a2],
                   128,
                   *((_DWORD *)&unk_65ABF7FC - *(this + 5))) < 0 )
            {
              return;
            }
            *(this + 5) = 1 - *(this + 5);
          }
          else
          {
            *(this + 5) = 0;
            sub_65889E10(this, 0, 0, 0, 1, 1);
            sub_65889E10(this, 1, 0, 0, 0, 1);
            if ( sub_6572F480(dword_65ABF790[a2], 0) < 0
              || (*(int (__thiscall **)(int, int, int))(*(_DWORD *)dword_65ABF790[a2] + 4))(
                   dword_65ABF790[a2],
                   128,
                   dword_65ABF7F8[0]) < 0 )
            {
              return;
            }
          }
          v10 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
          v6 = Rand_FloatInRange(flt_659CE504[4 * a2], flt_659CE508[4 * a2]);
          v7 = *(this + 1);
          *((float *)this + 2) = v6 + v10;
          if ( dword_65ABF790[v7] )
          {
            *(this + 3) = v7;
            *((float *)this + 4) = v10 + 2.5 + 1.0;
          }
          (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
            g_pILTClient,
            "Changed music intensity from %d to %d",
            v7,
            a2);
          *(this + 1) = a2;
        }
      }
    }
  }
}
// 6572F480: using guessed type int __thiscall sub_6572F480(_DWORD, _DWORD);
// 65889E10: using guessed type int __thiscall sub_65889E10(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 659CE504: using guessed type float flt_659CE504[];
// 659CE508: using guessed type float flt_659CE508[];
// 65ABF790: using guessed type int dword_65ABF790[];
// 65ABF7F4: using guessed type int dword_65ABF7F4;
// 65ABF7F8: using guessed type int dword_65ABF7F8[];

//----- (6588A1C0) --------------------------------------------------------
int __usercall sub_6588A1C0@<eax>(_DWORD *a1@<ecx>, double a2@<st0>)
{
  int v2; // edi
  BOOL *v3; // eax
  BOOL *v4; // eax
  int v5; // eax
  int v6; // ebx
  char *v7; // eax
  const char **v10; // ebx
  const char *v11; // eax
  const char *v12; // ecx
  unsigned int v13; // eax
  const char *v14; // esi
  char *v15; // edi
  _DWORD *v17; // esi
  int v18; // eax
  int **v20; // [esp+18h] [ebp-654h]
  float v21; // [esp+18h] [ebp-654h]
  _BYTE v22[52]; // [esp+1Ch] [ebp-650h] BYREF
  char Data[56]; // [esp+54h] [ebp-618h] BYREF
  int v24; // [esp+454h] [ebp-218h]
  char v25; // [esp+458h] [ebp-214h]
  char v26; // [esp+45Bh] [ebp-211h] BYREF
  char v27[56]; // [esp+45Ch] [ebp-210h] BYREF
  char v28; // [esp+55Bh] [ebp-111h] BYREF
  char v29[56]; // [esp+55Ch] [ebp-110h] BYREF
  char v30; // [esp+65Bh] [ebp-11h]
  int v31; // [esp+668h] [ebp-4h]

  v2 = 0;
  if ( *a1 )
    return 1;
  dword_65ABF790[0] = 0;
  dword_65ABF794 = 0;
  dword_65ABF798 = 0;
  dword_65ABF79C = 0;
  dword_65ABF7A0 = 0;
  dword_65ABF7A4 = 0;
  dword_65ABF7A8 = 0;
  dword_65ABF7AC = 0;
  dword_65ABF7B0 = 0;
  dword_65ABF7B4 = 0;
  dword_65ABF7B8 = 0;
  dword_65ABF7BC = 0;
  dword_65ABF7C0 = 0;
  dword_65ABF7C4 = 0;
  dword_65ABF7C8 = 0;
  dword_65ABF7CC = 0;
  dword_65ABF7D0 = 0;
  dword_65ABF7D4 = 0;
  dword_65ABF7D8 = 0;
  dword_65ABF7DC = 0;
  dword_65ABF7E0 = 0;
  dword_65ABF7E4 = 0;
  dword_65ABF7E8 = 0;
  dword_65ABF7EC = 0;
  dword_65ABF7F0 = 0;
  v3 = (BOOL *)operator new(0x50u);
  v31 = 0;
  if ( v3 )
    v4 = COM_Initialize(v3);
  else
    v4 = 0;
  v31 = -1;
  dword_65ABF7F4 = (int)v4;
  if ( v4 )
  {
    v5 = (*(int (__usercall **)@<eax>(int@<ecx>, double@<st0>))(*(_DWORD *)g_LTClient + 84))(g_LTClient, a2);
    if ( Sound_CreateDevice(dword_65ABF7F4, v5, 0, 0, 0) >= 0 )
    {
      v6 = *(_DWORD *)(dword_65ABF7F4 + 8);
      while ( (*(int (__stdcall **)(int, int, int, int, int *))(*(_DWORD *)v6 + 196))(v6, 8, 16, 1, &dword_65ABF7F8[v2]) >= 0
           && (*(int (__stdcall **)(int, _DWORD, int, _DWORD, void *, _DWORD, void *, int *))(*(_DWORD *)dword_65ABF7F8[v2]
                                                                                            + 12))(
                dword_65ABF7F8[v2],
                0,
                0x2000,
                0,
                &unk_659DB39C,
                0,
                &unk_659D6EAC,
                &dword_65ABF800[v2]) >= 0 )
      {
        if ( ++v2 >= 2 )
        {
          v25 = 0;
          v22[0] = 0;
          v22[20] = 0;
          Data[0] = 0;
          v24 = 59851;
          Registry_LoadPlayerSettings((__packed *)v22, v6, v2 * 4);
          strncpy(v27, Data, 0xFFu);
          v28 = 0;
          v7 = &v26;
          while ( *++v7 )
            ;
          strcpy(v7, "\\Resources\\Music\\");
          if ( Sound_Speak((_DWORD *)dword_65ABF7F4, v27) < 0 )
          {
            (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
              g_pILTClient,
              "CMusic::InitLevel failed! Could not set direct music search directory");
            return 0;
          }
          v29[0] = 0;
          v20 = (int **)dword_65ABF790;
          v10 = (const char **)&off_659CE500;
          do
          {
            strncpy(v29, v27, 0xFFu);
            v11 = *v10;
            v30 = 0;
            v12 = v11;
            v13 = strlen(v11) + 1;
            v14 = v12;
            v15 = &v28;
            while ( *++v15 )
              ;
            qmemcpy(v15, v14, v13);
            if ( Sound_LoadFile((int *)dword_65ABF7F4, v20, v29, 1, 0) < 0 )
            {
              (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
                g_pILTClient,
                "CMusic::Init failed! Couldn't load segment %s",
                v29);
              return 0;
            }
            ++v20;
            v10 += 4;
          }
          while ( (int)v10 < (int)&dbl_659CE690 );
          v17 = dword_65ABF714;
          v18 = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("MusicVolume");
          v17[72] = v18;
          if ( v18 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, v18);
          else
            a2 = 55.0;
          v21 = a2;
          Music_SetVolume(v21);
          *a1 = 1;
          sub_65889FE0(a1, 0);
          return 1;
        }
      }
    }
  }
  return 0;
}
// 659CE500: using guessed type char *off_659CE500;
// 659CE690: using guessed type double dbl_659CE690;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF790: using guessed type int dword_65ABF790[];
// 65ABF794: using guessed type int dword_65ABF794;
// 65ABF798: using guessed type int dword_65ABF798;
// 65ABF79C: using guessed type int dword_65ABF79C;
// 65ABF7A0: using guessed type int dword_65ABF7A0;
// 65ABF7A4: using guessed type int dword_65ABF7A4;
// 65ABF7A8: using guessed type int dword_65ABF7A8;
// 65ABF7AC: using guessed type int dword_65ABF7AC;
// 65ABF7B0: using guessed type int dword_65ABF7B0;
// 65ABF7B4: using guessed type int dword_65ABF7B4;
// 65ABF7B8: using guessed type int dword_65ABF7B8;
// 65ABF7BC: using guessed type int dword_65ABF7BC;
// 65ABF7C0: using guessed type int dword_65ABF7C0;
// 65ABF7C4: using guessed type int dword_65ABF7C4;
// 65ABF7C8: using guessed type int dword_65ABF7C8;
// 65ABF7CC: using guessed type int dword_65ABF7CC;
// 65ABF7D0: using guessed type int dword_65ABF7D0;
// 65ABF7D4: using guessed type int dword_65ABF7D4;
// 65ABF7D8: using guessed type int dword_65ABF7D8;
// 65ABF7DC: using guessed type int dword_65ABF7DC;
// 65ABF7E0: using guessed type int dword_65ABF7E0;
// 65ABF7E4: using guessed type int dword_65ABF7E4;
// 65ABF7E8: using guessed type int dword_65ABF7E8;
// 65ABF7EC: using guessed type int dword_65ABF7EC;
// 65ABF7F0: using guessed type int dword_65ABF7F0;
// 65ABF7F4: using guessed type int dword_65ABF7F4;
// 65ABF7F8: using guessed type int dword_65ABF7F8[];
// 65ABF800: using guessed type int dword_65ABF800[];

//----- (6588A920) --------------------------------------------------------
void __thiscall Music_CheckPlayState(_DWORD *this)
{
  int v1; // eax

  if ( *this )
  {
    v1 = *(this + 1);
    if ( !v1 || v1 == 24 )
      JUMPOUT(0x6588A6B0);
  }
}
// 6588A931: control flows out of bounds to 6588A6B0

//----- (6588AA00) --------------------------------------------------------
int __thiscall PlayerCharacter_Ctor(int this)
{
  CharacterInfo_Ctor((float *)this, 1);
  *(_DWORD *)this = &off_659CE768;
  CharacterAnimState_Init((float *)(this + 112));
  *(_DWORD *)(this + 720) = 0;
  *(_BYTE *)(this + 724) = 50;
  *(_BYTE *)(this + 725) = 0;
  *(_BYTE *)(this + 727) = 0;
  *(_WORD *)(this + 88) = 0;
  *(_BYTE *)(this + 90) = 1;
  return this;
}
// 659CE768: using guessed type void *off_659CE768;

//----- (6588AC10) --------------------------------------------------------
char __thiscall Mail_SaveToFile(
        int this,
        int a2,
        void *a3,
        WorldLoginReturnAddrPacked ElementCount,
        const char *a5,
        const char *a6)
{
  char Buffer[264]; // [esp+14h] [ebp-10Ch] BYREF

  if ( !*(_BYTE *)(this + 1884028) )
    return 0;
  sprintf(Buffer, "%s\\Inbox\\%u.fml", (const char *)(this + 1884029), a2);
  return SaveFileWithStrings(Buffer, a3, ElementCount, a5, a6);
}

//----- (6588AD10) --------------------------------------------------------
void __stdcall SharedMem_WriteUsername(char *Source)
{
  if ( Source )
    SharedMem_WriteString_std(11224, Source);
}

//----- (6588AD30) --------------------------------------------------------
void __stdcall SharedMem_WritePassword(char *Source)
{
  if ( Source )
    SharedMem_WriteString_std(126546, Source);
}

//----- (6588B1B0) --------------------------------------------------------
int sub_6588B1B0(int a1, char *Format, ...)
{
  int v2; // esi
  DWORD Time; // eax
  char Buffer[2024]; // [esp+4h] [ebp-7ECh] BYREF
  va_list va; // [esp+800h] [ebp+10h] BYREF

  va_start(va, Format);
  vsprintf(Buffer, Format, va);
  v2 = *(_DWORD *)g_pILTClient;
  Time = timeGetTime();
  return (*(int (**)(int, const char *, ...))(v2 + 28))(g_pILTClient, "%08u: ERR %s", Time, Buffer);
}

//----- (6588B280) --------------------------------------------------------
void __thiscall sub_6588B280(_BYTE *this)
{
  int v2; // eax

  if ( g_LTClient )
  {
    v2 = (*(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 28))(g_LTClient);
    if ( v2 )
    {
      if ( v2 != 73 )
        sub_6588B1B0((int)this, "Error: Network driver, disconnect failed!");
    }
    *(this + 4) = 0;
  }
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6588B2D0) --------------------------------------------------------
BOOL __thiscall SharedMem_CheckFlag(void *this, int a2)
{
  return (a2 & SharedMem_ReadDword_this(this, 0x1EA43u)) != 0;
}

//----- (6588B2F0) --------------------------------------------------------
LONG __thiscall SharedMem_SetFlag(void *this, int a2)
{
  int Dword_this; // eax

  Dword_this = SharedMem_ReadDword_this(this, 0x1EA43u);
  return SharedMem_WriteDword_this(this, 0x1EA43u, a2 | Dword_this);
}

//----- (6588B320) --------------------------------------------------------
LONG __thiscall SharedMem_ClearFlag(void *this, int a2)
{
  int Dword_this; // eax

  Dword_this = SharedMem_ReadDword_this(this, 0x1EA43u);
  return SharedMem_WriteDword_this(this, 0x1EA43u, ~a2 & Dword_this);
}

//----- (6588B360) --------------------------------------------------------
int sub_6588B360()
{
  int result; // eax

  if ( g_LTClient )
  {
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 14, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 16, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 19, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 20, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 15, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 18, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 21, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 95, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 22, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 23, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 24, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 28, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 29, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 30, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 26, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 109, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 111, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 112, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 115, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 123, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 125, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 107, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 129, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 130, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 136, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 138, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 140, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 142, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 143, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 144, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 146, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 147, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 151, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 153, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 155, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 156, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 157, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 159, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 162, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 163, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 164, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 166, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 168, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 169, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 170, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 154, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 165, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 172, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 173, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 174, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 175, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 176, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 177, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 178, 67);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 181, 67);
    return (*(int (__thiscall **)(int, int, int))(*(_DWORD *)g_LTClient + 20))(g_LTClient, 182, 67);
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6588BA80) --------------------------------------------------------
char __thiscall EquipSlotArray_SetSlot26to28(char *this, char a2, const void *a3)
{
  char *v3; // edi

  if ( (unsigned __int8)(a2 - 23) > 5u )
    return 0;
  v3 = this + 48 * (unsigned __int8)a2 - 1104;
  if ( *(_DWORD *)v3 )
    return 0;
  qmemcpy(v3, a3, 0x30u);
  *(this + 48 * (unsigned __int8)a2 - 1060) = a2;
  return 1;
}

//----- (6588BB30) --------------------------------------------------------
char __thiscall EquipSlotArray_GetSlot26to28(char *this, unsigned __int8 a2, int a3, char *a4)
{
  char *v4; // eax

  if ( (unsigned __int8)(a2 - 23) > 5u )
    return 0;
  v4 = this + 48 * a2 - 1104;
  if ( *(_DWORD *)v4 != a3 )
    return 0;
  if ( a4 )
    qmemcpy(a4, v4, 0x30u);
  ItemStructA_Init(v4);
  return 1;
}

//----- (6588BB80) --------------------------------------------------------
unsigned __int8 __thiscall EquipSlotArray_FindFreeSlot26(_DWORD *this)
{
  unsigned __int8 result; // al

  result = 26;
  while ( *(this + 12 * result - 276) )
  {
    if ( ++result >= 0x1Du )
      return 29;
  }
  return result;
}

//----- (6588BBA0) --------------------------------------------------------
char __thiscall EquipSlotArray_SetSlot5to16(char *this, unsigned __int8 a2, const void *a3)
{
  char *v3; // edi

  if ( (unsigned __int8)(a2 - 5) > 0xBu )
    return 0;
  v3 = this + 48 * a2 - 240;
  if ( *(_DWORD *)v3 )
    return 0;
  qmemcpy(v3, a3, 0x30u);
  return 1;
}

//----- (6588BBF0) --------------------------------------------------------
char __thiscall EquipSlotArray_GetSlot5to16(char *this, unsigned __int8 a2, int a3, char *a4)
{
  char *v4; // esi

  if ( (unsigned __int8)(a2 - 5) > 0xBu )
    return 0;
  v4 = this + 48 * a2 - 240;
  if ( *(_DWORD *)v4 != a3 )
    return 0;
  qmemcpy(a4, v4, 0x30u);
  return 1;
}

//----- (6588BC40) --------------------------------------------------------
char __thiscall EquipSlotArray_RemoveSlot5to16(char *this, unsigned __int8 a2, int a3, char *a4)
{
  char *v4; // eax

  if ( (unsigned __int8)(a2 - 5) > 0xBu )
    return 0;
  v4 = this + 48 * a2 - 240;
  if ( *(_DWORD *)v4 != a3 )
    return 0;
  if ( a4 )
    qmemcpy(a4, v4, 0x30u);
  ItemStructA_Init(v4);
  return 1;
}

//----- (6588BC90) --------------------------------------------------------
char __thiscall EquipSlotArray_ClearSlot5to16(char *this, unsigned __int8 a2, char *a3)
{
  char *v3; // eax

  if ( (unsigned __int8)(a2 - 5) > 0xBu )
    return 0;
  v3 = this + 48 * a2 - 240;
  v3[44] = 0;
  if ( a3 )
    qmemcpy(a3, v3, 0x30u);
  *(_DWORD *)v3 = 0;
  *((_WORD *)v3 + 2) = 0;
  *((_WORD *)v3 + 3) = 0;
  *((_WORD *)v3 + 4) = 0;
  *((_WORD *)v3 + 5) = 0;
  v3[12] = 100;
  v3[13] = 0;
  *((_DWORD *)v3 + 4) = 0;
  *((_DWORD *)v3 + 5) = 0;
  *((_DWORD *)v3 + 6) = 0;
  v3[29] = 0;
  v3[30] = 0;
  v3[28] = 0;
  *(_DWORD *)(v3 + 31) = 0;
  *((_DWORD *)v3 + 9) = 0;
  *((_DWORD *)v3 + 10) = 0;
  v3[44] = 0;
  return 1;
}

//----- (6588BD10) --------------------------------------------------------
char __thiscall EquipSlotArray_SetSlot1to3(char *this, unsigned __int8 a2, const void *a3)
{
  char *v3; // edi

  if ( (unsigned __int8)(a2 - 1) > 2u )
    return 0;
  v3 = this + 48 * a2 - 48;
  if ( *(_DWORD *)v3 )
    return 0;
  qmemcpy(v3, a3, 0x30u);
  return 1;
}

//----- (6588BD60) --------------------------------------------------------
char __thiscall EquipSlotArray_SwapSlot1to3(char *this, unsigned __int8 a2, unsigned __int8 a3)
{
  char *v3; // eax
  char *v4; // edx
  _BYTE v6[48]; // [esp+0h] [ebp-34h] BYREF

  if ( (unsigned __int8)(a2 - 1) > 2u )
    return 0;
  if ( (unsigned __int8)(a3 - 1) > 2u )
    return 0;
  v3 = this + 48 * a2 - 48;
  qmemcpy(v6, v3, sizeof(v6));
  v4 = this + 48 * a3 - 48;
  qmemcpy(v3, v4, 0x30u);
  qmemcpy(v4, v6, 0x30u);
  return 1;
}

//----- (6588BE10) --------------------------------------------------------
char __thiscall EquipSlotArray_GetSlot1to3(char *this, unsigned __int8 a2, int a3, char *a4)
{
  char *v4; // esi

  if ( (unsigned __int8)(a2 - 1) > 2u )
    return 0;
  v4 = this + 48 * a2 - 48;
  if ( *(_DWORD *)v4 != a3 )
    return 0;
  qmemcpy(a4, v4, 0x30u);
  return 1;
}

//----- (6588BE60) --------------------------------------------------------
char __thiscall EquipSlotArray_RemoveSlot1to3(char *this, unsigned __int8 a2, int a3, char *a4)
{
  char *v4; // eax

  if ( (unsigned __int8)(a2 - 1) > 2u )
    return 0;
  v4 = this + 48 * a2 - 48;
  if ( *(_DWORD *)v4 != a3 )
    return 0;
  if ( a4 )
    qmemcpy(a4, v4, 0x30u);
  ItemStructA_Init(v4);
  return 1;
}

//----- (6588BEB0) --------------------------------------------------------
char __thiscall EquipSlotArray_FindAndRemove1to3(_DWORD *this, int a2, char *a3)
{
  unsigned __int8 v4; // al
  unsigned __int8 v6; // cl
  _DWORD *v7; // eax

  v4 = 0;
  while ( *(this + 12 * v4) != a2 )
  {
    if ( ++v4 >= 3u )
      return 4;
  }
  if ( a3 )
    qmemcpy(a3, this + 12 * v4, 0x30u);
  v6 = v4;
  v7 = this + 12 * v4;
  *v7 = 0;
  *((_WORD *)v7 + 2) = 0;
  *((_WORD *)v7 + 3) = 0;
  *((_WORD *)v7 + 4) = 0;
  *((_WORD *)v7 + 5) = 0;
  *((_BYTE *)v7 + 12) = 100;
  *((_BYTE *)v7 + 13) = 0;
  v7[4] = 0;
  v7[5] = 0;
  v7[6] = 0;
  *((_BYTE *)v7 + 29) = 0;
  *((_BYTE *)v7 + 30) = 0;
  *((_BYTE *)v7 + 28) = 0;
  *(_DWORD *)((char *)v7 + 31) = 0;
  v7[9] = 0;
  v7[10] = 0;
  *((_BYTE *)v7 + 44) = 0;
  return v6 + 1;
}

//----- (6588BF50) --------------------------------------------------------
char *__thiscall EquipSlotArray_FindById1to3(_DWORD *this, int a2)
{
  unsigned __int8 v2; // dl
  char *result; // eax

  v2 = 0;
  while ( *(this + 12 * v2) != a2 )
  {
    if ( ++v2 >= 3u )
      return 0;
  }
  result = (char *)(this + 12 * v2);
  result[44] = v2 + 1;
  return result;
}

//----- (6588BFC0) --------------------------------------------------------
char __thiscall QuickSlot_SetItem(char *this, unsigned __int8 a2, __int16 a3)
{
  char *v3; // eax

  LOBYTE(v3) = a2;
  if ( (unsigned __int8)(a2 - 18) <= 3u )
  {
    v3 = this + 16 * a2 - 288;
    *((_WORD *)v3 + 2) = a3;
    *((_DWORD *)v3 + 2) = 0;
    v3[12] = 0;
  }
  return (char)v3;
}

//----- (6588BFF0) --------------------------------------------------------
char __thiscall QuickSlot_Swap(_WORD *this, unsigned __int8 a2, unsigned __int8 a3)
{
  _WORD *v3; // eax
  __int16 v4; // si
  _WORD *v5; // eax

  if ( (unsigned __int8)(a2 - 18) > 3u )
    return 0;
  if ( (unsigned __int8)(a3 - 18) > 3u )
    return 0;
  v3 = this + 8 * a2 - 144;
  v4 = *(this + 8 * a2 - 142);
  v3[2] = *(this + 8 * a3 - 142);
  *((_DWORD *)v3 + 2) = 0;
  *((_BYTE *)v3 + 12) = 0;
  v5 = this + 8 * a3 - 144;
  v5[2] = v4;
  *((_DWORD *)v5 + 2) = 0;
  *((_BYTE *)v5 + 12) = 0;
  return 1;
}

//----- (6588C1E0) --------------------------------------------------------
errno_t __thiscall PlayerInfo_SetName(char *this, char *Source)
{
  const char *v2; // eax

  v2 = Source;
  if ( !Source )
    v2 = byte_659A8B98;
  return strncpy_s(this + 12, 0x14u, v2, 0xFFFFFFFF);
}

//----- (6588C210) --------------------------------------------------------
errno_t __thiscall PlayerInfo_SetGuildName(char *this, char *Source)
{
  const char *v2; // eax

  v2 = Source;
  if ( !Source )
    v2 = byte_659A8B98;
  return strncpy_s(this + 32, 0x28u, v2, 0xFFFFFFFF);
}

//----- (6588C240) --------------------------------------------------------
errno_t __thiscall PlayerInfo_SetDescription(char *this, char *Source)
{
  const char *v2; // eax

  v2 = Source;
  if ( !Source )
    v2 = byte_659A8B98;
  return strncpy_s(this + 72, 0x800u, v2, 0xFFFFFFFF);
}

//----- (6588C320) --------------------------------------------------------
Packet_ID_WORLD_LOGIN_RETURN *__thiscall Packet_ID_WORLD_LOGIN_RETURN_Ctor(Packet_ID_WORLD_LOGIN_RETURN *this)
{
  this->vftable = &vtbl_Packet_Unknown0;
  this->_pad0[4] = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)&this->_pad0[8]);
  *(_DWORD *)&this->_pad0[1052] = 0;
  *(_DWORD *)&this->_pad0[1056] = 0;
  this->id = 115;
  this->vftable = &vtbl_Packet_ID_WORLD_LOGIN_RETURN;
  SystemAddress_SetUnassigned(&this->worldAddr);
  this->code = 0;
  this->flag = -1;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CE87C: using guessed type _UNKNOWN *vtbl_Packet_ID_WORLD_LOGIN_RETURN;

//----- (6588C480) --------------------------------------------------------
char __stdcall WriteStatGroup5(char Src)
{
  return StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 5, &Src);
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6588C4A0) --------------------------------------------------------
char __stdcall WriteStatGroup6(char Src)
{
  return StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 6, &Src);
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6588C4C0) --------------------------------------------------------
LONG __thiscall SharedMem_WritePlayerEntity(void *this, int a2)
{
  return SharedMem_WriteDword_this(this, 0x1DE7Eu, a2);
}

//----- (6588C570) --------------------------------------------------------
LONG __thiscall WorldLoginReturn_ScheduleRetry(float *this, float nextRetryAtTime)
{
  LONG ok; // eax

  ok = SharedMem_WriteDword_this(this, 0x1EEC0u, 1);
  *(this + 15) = nextRetryAtTime;
  return ok;
}

//----- (6588C910) --------------------------------------------------------
void __thiscall ItemSlotUI_Clear(int *this)
{
  int v2; // eax
  int v3; // ecx
  int v4; // ecx

  v2 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  if ( v2 )
    sub_6593FC80(v2, *(this + 1688) + 180, 0);
  UiItemSlot_SetItem(*(this + 1688), 0);
  v3 = *(this + 1689);
  *(this + 1686) = 0;
  UiText_SetValueIfChanged(v3, "-", 0, 0);
  v4 = *(this + 1690);
  *(this + 1687) = 0;
  UiText_SetValueIfChanged(v4, "-", 0, 0);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6588C990) --------------------------------------------------------
void __thiscall ItemSlotUI_GetAndClear(int *this, _WORD *a2)
{
  int v3; // ecx

  *a2 = *(_WORD *)(*(this + 1688) + 180);
  UiItemSlot_SetItem(*(this + 1688), 0);
  v3 = *(this + 1689);
  *(this + 1686) = 0;
  UiText_SetValueIfChanged(v3, "0", 0, 0);
}

//----- (6588C9E0) --------------------------------------------------------
int __thiscall Network_Initialize(int a1)
{
  int v4; // eax
  int v5; // esi
  unsigned int v6; // eax

  if ( !g_LTClient )
    return 1;
  v4 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 12))(
         g_LTClient,
         *((unsigned __int16 *)g_pPlayerStats + 540));
  v5 = v4;
  if ( v4 )
  {
    if ( v4 == 92 )
    {
      sub_6588B1B0(a1, "Error: Network driver already initialized!");
      return 92;
    }
    else
    {
      sub_6588B1B0(a1, "Error: Network driver, failed to initialize");
      return v5;
    }
  }
  else
  {
    sub_6588B360();
    v6 = _time64(0);
    srand(v6);
    dword_65A556A4 = 1000;
    return 0;
  }
}
// 65A556A4: using guessed type int dword_65A556A4;
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6588CA70) --------------------------------------------------------
void __thiscall Network_HandleDisconnect(_BYTE *this, int a2, int a3, char a4)
{
  float *Slot; // eax

  if ( dword_65ABF73C )
  {
    if ( *(_DWORD *)(dword_65ABF6F4 + 8) == 4 )
      GameMode_TrySetMode((int *)dword_65ABF6F4, 1);
    WorldLogin_StateTick((float *)dword_65ABF73C);
    sub_6588B280(this);
    if ( !*((_BYTE *)dword_65ABF704 + 876) )
    {
      Slot = (float *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
      if ( Slot )
        LoginUI_SetMessageText(Slot, 1803, "FF000000", a3, a4, 0);
      if ( SharedMem_ReadBool_std(0x8Cu) && SharedMem_ReadBool_std(0x55u) )
        LoginUI_ShowMessage(5);
      else
        GameMode_SetModeThree((int *)dword_65ABF6F4, 1u);
      SharedMem_WriteU8_std(0x74u, 0);
      SharedMem_WriteU8_std(0x75u, 0);
      SharedMem_WriteU8_std(0x76u, 0);
      SharedMem_WriteU8_std(0x79u, 0);
      if ( a2 == 2 )
        (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
          g_pILTClient,
          "Connection lost to world: %s",
          a3);
      else
        (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
          g_pILTClient,
          "Connection lost to master: %s",
          a3);
    }
  }
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF70C: using guessed type int dword_65ABF70C;

//----- (6588CC70) --------------------------------------------------------
int __thiscall Network_HandleRakNetMessage(_BYTE *this, char a2, int a3)
{
  int result; // eax
  float *Slot; // eax
  float *v6; // eax
  float *v7; // esi
  float *v8; // esi
  int v9; // eax
  float *v10; // esi
  int v11; // eax
  int v12; // eax
  int v13; // eax
  float *v14; // esi
  int v15; // eax
  float *v16; // esi
  float *v17; // esi
  int v18; // eax
  float *v19; // esi

  if ( !a3 )
    return 1;
  switch ( a2 )
  {
    case 15:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "ID_CONNECTION_ATTEMPT_FAILED");
      break;
    case 16:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "ID_ALREADY_CONNECTED");
      break;
    case 18:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "ID_NO_FREE_INCOMING_CONNECTIONS");
      break;
    case 19:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "ID_DISCONNECTION_NOTIFICATION");
      break;
    case 20:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "ID_CONNECTION_LOST");
      break;
    case 21:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "ID_RSA_PUBLIC_KEY_MISMATCH");
      break;
    case 22:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "ID_CONNECTION_BANNED");
      break;
    case 23:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "ID_INVALID_PASSWORD");
      break;
    case 24:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "ID_MODIFIED_PACKET");
      break;
    case 28:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "ID_REMOTE_DISCONNECTION_NOTIFICATION");
      break;
    case 29:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "ID_REMOTE_CONNECTION_LOST");
      break;
    case 30:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "ID_REMOTE_NEW_INCOMING_CONNECTION");
      break;
    case 95:
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "ID_INCOMPATIBLE_PROTOCOL_VERSION");
      break;
    default:
      break;
  }
  switch ( a2 )
  {
    case 14:
      Slot = (float *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
      if ( !Slot )
        return 1;
      if ( *(float **)(dword_65ABF70C + 4) != Slot )
        goto LABEL_53;
      LoginUI_SetMessageText(Slot, 4302, "FFFFFF00", 0, 0, 0);
      result = 0;
      break;
    case 15:
      v6 = (float *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
      v7 = v6;
      if ( !v6 )
        return 1;
      if ( *(float **)(dword_65ABF70C + 4) == v6 )
      {
        LoginUI_SetMessageText(v6, 1726, "FF000000", 0, 0, 0);
      }
      else
      {
        LoginUI_ShowMessage(5);
        LoginUI_SetMessageText(v7, 1736, "FF000000", 0, 0, 0);
      }
      result = 0;
      break;
    case 16:
      v8 = (float *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
      if ( !v8 )
        return 1;
      if ( *(float **)(dword_65ABF70C + 4) != v8 )
        LoginUI_ShowMessage(5);
      LoginUI_SetMessageText(v8, 1710, "FF000000", 0, 0, 0);
      result = 0;
      break;
    case 18:
      v9 = UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
      v10 = (float *)v9;
      if ( !v9 )
        return 1;
      if ( *(_DWORD *)(dword_65ABF70C + 4) != v9 )
        LoginUI_ShowMessage(5);
      LoginUI_SetMessageText(v10, 1727, "FF000000", 0, 0, 0);
      result = 0;
      break;
    case 19:
      if ( *(this + 6) )
        goto LABEL_53;
      v11 = (*(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 4))(g_LTClient);
      Network_HandleDisconnect(this, (v11 != 0) + 1, (int)"disconnection notification", 0);
      result = 0;
      break;
    case 20:
      v12 = (*(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 4))(g_LTClient);
      Network_HandleDisconnect(this, (v12 != 0) + 1, (int)"connection lost", 0);
      result = 0;
      break;
    case 21:
      v13 = UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
      v14 = (float *)v13;
      if ( !v13 )
        return 1;
      if ( *(_DWORD *)(dword_65ABF70C + 4) != v13 )
        LoginUI_ShowMessage(5);
      LoginUI_SetMessageText(v14, 1730, "FF000000", 0, 0, 0);
      result = 0;
      break;
    case 22:
      v15 = UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
      v16 = (float *)v15;
      if ( !v15 )
        return 1;
      if ( *(_DWORD *)(dword_65ABF70C + 4) != v15 )
        LoginUI_ShowMessage(5);
      LoginUI_SetMessageText(v16, 1728, "FF000000", 0, 0, 0);
      result = 0;
      break;
    case 23:
      v17 = (float *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
      if ( !v17 )
        return 1;
      if ( *(float **)(dword_65ABF70C + 4) != v17 )
        LoginUI_ShowMessage(5);
      LoginUI_SetMessageText(v17, 1729, "FF000000", 0, 0, 0);
      result = 0;
      break;
    case 95:
      v18 = UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
      v19 = (float *)v18;
      if ( !v18 )
        return 1;
      if ( *(_DWORD *)(dword_65ABF70C + 4) != v18 )
        LoginUI_ShowMessage(5);
      LoginUI_SetMessageText(v19, 1731, "FF000000", 0, 0, 0);
      goto LABEL_53;
    default:
LABEL_53:
      result = 0;
      break;
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF70C: using guessed type int dword_65ABF70C;

//----- (6588D110) --------------------------------------------------------
int __thiscall Network_CheckTimeoutCounter(_DWORD *this, int a2)
{
  int v4; // esi
  const char *v5; // eax

  if ( !a2 )
    return 1;
  if ( ++*(this + 471015) >= 0x32u )
  {
    v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5302);
    if ( v4 )
      v5 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
    else
      v5 = byte_659A8B98;
    Network_HandleDisconnect(this, 1, (int)v5, 1);
    if ( v4 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
  }
  return 0;
}

//----- (6588D190) --------------------------------------------------------
int __stdcall HandlePacket_Timestamp(int a1)
{
  _BYTE v2[8]; // [esp+4h] [ebp-42Ch] BYREF
  _DWORD v3[261]; // [esp+Ch] [ebp-424h] BYREF
  int v4; // [esp+42Ch] [ebp-4h]

  if ( !a1 )
    return 1;
  BitStream_InitFromBuffer((char *)v3, (void *)(*(_DWORD *)(a1 + 44) + 1), 8u, 0);
  v4 = 0;
  BitStream_ReadDouble(v3, v2);
  v4 = -1;
  BitStream_FreeOwnedBuffer((int)v3);
  return 0;
}

//----- (6588D320) --------------------------------------------------------
char __thiscall EquipSlot_UpdateDurability(_DWORD *this, int a2, int a3)
{
  char *v3; // eax

  v3 = EquipSlot_FindById(this, a2);
  if ( !v3 )
    return 0;
  *((_WORD *)v3 + 3) = *(_WORD *)(a3 + 6);
  *((_WORD *)v3 + 5) = *(_WORD *)(a3 + 10);
  return 1;
}

//----- (6588D350) --------------------------------------------------------
char __thiscall EquipSlot_RemoveAndCopy(_DWORD *this, int a2, char *a3)
{
  char *v3; // eax

  v3 = EquipSlot_FindById(this, a2);
  if ( !v3 || *(_DWORD *)v3 != a2 )
    return 0;
  if ( a3 )
    qmemcpy(a3, v3, 0x30u);
  *(_DWORD *)v3 = 0;
  *((_WORD *)v3 + 2) = 0;
  *((_WORD *)v3 + 3) = 0;
  *((_WORD *)v3 + 4) = 0;
  *((_WORD *)v3 + 5) = 0;
  v3[12] = 100;
  v3[13] = 0;
  *((_DWORD *)v3 + 4) = 0;
  *((_DWORD *)v3 + 5) = 0;
  *((_DWORD *)v3 + 6) = 0;
  v3[29] = 0;
  v3[30] = 0;
  v3[28] = 0;
  *(_DWORD *)(v3 + 31) = 0;
  *((_DWORD *)v3 + 9) = 0;
  *((_DWORD *)v3 + 10) = 0;
  v3[44] = 0;
  return 1;
}

//----- (6588D3C0) --------------------------------------------------------
char __thiscall EquipSlotArray_UpdateDurability(_DWORD *this, int a2, int a3)
{
  char *v3; // eax

  v3 = EquipSlotArray_FindById1to3(this, a2);
  if ( !v3 )
    return 0;
  *((_WORD *)v3 + 3) = *(_WORD *)(a3 + 6);
  *((_WORD *)v3 + 5) = *(_WORD *)(a3 + 10);
  return 1;
}

//----- (6588D3F0) --------------------------------------------------------
char __thiscall EquipSlotArray_GetItemCopy(_DWORD *this, int a2, char *a3)
{
  char *v3; // eax

  v3 = EquipSlotArray_FindById1to3(this, a2);
  if ( !v3 || !*(_DWORD *)v3 )
    return 0;
  qmemcpy(a3, v3, 0x30u);
  return 1;
}

//----- (6588D560) --------------------------------------------------------
_DWORD *__thiscall Packet_ID_LOGIN_REQUEST_RETURN_ScalarDeletingDtor(_DWORD *this, char a2)
{
  *this = &vtbl_Packet_Unknown0;
  BitStream_FreeOwnedBuffer((int)(this + 3));
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (6588D8B0) --------------------------------------------------------
int __thiscall Mail_InitUserFolder(char *this, const char *a2)
{
  char *v2; // esi
  unsigned int v3; // edi
  const char *v4; // esi
  int v7; // [esp+10h] [ebp-10Ch]
  char v8[260]; // [esp+14h] [ebp-108h] BYREF

  v2 = this;
  memset(v8, 0, sizeof(v8));
  v3 = 0;
  if ( strlen(a2) )
  {
    v4 = a2;
    v7 = v8 - a2;
    do
    {
      if ( isalnum(*v4) || isspace(*v4) )
        v4[v7] = *v4;
      else
        v4[v7] = 95;
      ++v3;
      ++v4;
    }
    while ( v3 < strlen(a2) );
    v2 = this;
  }
  v8[v3] = 0;
  sprintf(v2 + 1884029, "Mails\\%s", v8);
  v2[1884028] = 1;
  return Mailbox_LoadInbox((unsigned int *)v2);
}

//----- (6588D9C0) --------------------------------------------------------
int __stdcall LTClient_SendPacket_BuildIfNeeded(_DWORD *a1, int a2, int a3, int a4, int a5)
{
  int v5; // ecx

  v5 = g_LTClient;
  if ( g_LTClient && a1 )
  {
    if ( a1[3] )
      return (*(int (__thiscall **)(int, _DWORD *, int, int, int, int))(*(_DWORD *)v5 + 40))(v5, a1, a3, a4, a5, a2);
    if ( (*(unsigned __int8 (__thiscall **)(_DWORD *))(*a1 + 8))(a1) )
    {
      v5 = g_LTClient;
      return (*(int (__thiscall **)(int, _DWORD *, int, int, int, int))(*(_DWORD *)v5 + 40))(v5, a1, a3, a4, a5, a2);
    }
  }
  return 1;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6588DA20) --------------------------------------------------------
int __usercall HandlePacket_ID_LOGIN_TOKEN_CHECK@<eax>(int a1@<edx>, int a2)
{
  int *Slot; // eax
  Packet_ID_LOGIN_TOKEN_CHECK v4; // [esp+10h] [ebp-488h] BYREF
  int v5; // [esp+494h] [ebp-4h]

  v4.base[8] = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)&v4.base[12]);
  *(_DWORD *)&v4.base[1056] = 0;
  *(_DWORD *)&v4.base[1060] = 0;
  v4.base[1064] = 112;
  *(_DWORD *)v4.base = &vtbl_Packet_ID_LOGIN_TOKEN_CHECK;
  v4.fromServer = 0;
  v4.success = 0;
  v4.requestToken[0] = 0;
  v4.username[0] = 0;
  v5 = 0;
  if ( Packet_ID_LOGIN_TOKEN_CHECK_Read(&v4, a2)
    && (Slot = (int *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u)) != 0
    && v4.fromServer )
  {
    Login_SetTokenMode(Slot, v4.success, (char *)v4.username);
    v5 = -1;
    *(_DWORD *)v4.base = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)&v4.base[12]);
    return 0;
  }
  else
  {
    v5 = -1;
    *(_DWORD *)v4.base = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)&v4.base[12]);
    return 1;
  }
}
// 6588DA20: inconsistent function type and number of purged bytes
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659C8A5C: using guessed type int (__thiscall *vtbl_Packet_ID_LOGIN_TOKEN_CHECK)(void *, char);
// 65ABF70C: using guessed type int dword_65ABF70C;

//----- (6588DCE0) --------------------------------------------------------
char __thiscall Packet_ID_LOGIN_REQUEST_RETURN_Read(int this, int a2)
{
  char result; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1072), 8u, 1);
    return (*(unsigned __int8 (__thiscall **)(int, int, int, int))(*(_DWORD *)g_LTClient + 56))(
             g_LTClient,
             this + 1073,
             2048,
             this + 12) != 0;
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6588DDA0) --------------------------------------------------------
char __thiscall Packet_ID_WORLD_LOGIN_RETURN_Read(Packet_ID_WORLD_LOGIN_RETURN *this, int payload)
{
  char readOk; // al

  readOk = VariableSizedPacket::Read(this, payload);
  if ( readOk )
  {
    RakNet::BitStream::ReadCompressed((unsigned int *)&this->_pad0[8], (char *)&this->code, 8u, 1);
    RakNet::BitStream::ReadCompressed((unsigned int *)&this->_pad0[8], (char *)&this->flag, 8u, 1);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)&this->_pad0[8], (char *)&this->worldAddr);
    RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)&this->_pad0[8], (char *)&this->worldAddr.port_pad);
    return 1;
  }
  return readOk;
}

//----- (6588DE80) --------------------------------------------------------
char __thiscall Packet_ID_ITEMS_REMOVED_read(int this, int a2)
{
  char result; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    Read_u32c_list_u16count((int *)(this + 1080), (unsigned int *)(this + 12));
    return 1;
  }
  return result;
}

//----- (6588DED0) --------------------------------------------------------
char __thiscall Packet_ID_ITEM_REMOVED_read(int this, int a2)
{
  char result; // al
  unsigned int v4; // eax

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
    v4 = *(_DWORD *)(this + 20);
    if ( v4 + 1 <= *(_DWORD *)(this + 12) )
    {
      *(_BYTE *)(this + 1084) = ((unsigned __int8)(128 >> (v4 & 7)) & *(_BYTE *)((v4 >> 3) + *(_DWORD *)(this + 24))) != 0;
      ++*(_DWORD *)(this + 20);
    }
    return 1;
  }
  return result;
}

//----- (6588DFD0) --------------------------------------------------------
char __thiscall Packet_ID_ITEMS_ADDED_read(int this, int a2)
{
  char result; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1076), 8u, 1);
    if ( *(_BYTE *)(this + 1076) == 3 )
      RakNet::BitStream::ReadCompressed((unsigned int *)(this + 12), (char *)(this + 1077), 8u, 1);
    ItemList_Read((ItemsAddedPayload *)(this + 1080), (unsigned int *)(this + 12));
    return 1;
  }
  return result;
}

//----- (6588E100) --------------------------------------------------------
_DWORD *__stdcall ItemChangeEntry_Create(int a1, int a2, const void *a3)
{
  _DWORD *result; // eax

  result = operator new(0x38u);
  if ( result )
    *result = a1;
  if ( result != (_DWORD *)-4 )
    result[1] = a2;
  if ( result != (_DWORD *)-8 )
    qmemcpy(result + 2, a3, 0x30u);
  return result;
}

//----- (6588E140) --------------------------------------------------------
int __thiscall ItemChangeList_IncrementSize(_DWORD *this, unsigned int a2)
{
  int v2; // eax
  int result; // eax
  _DWORD pExceptionObject[10]; // [esp+8h] [ebp-50h] BYREF
  _BYTE v5[28]; // [esp+30h] [ebp-28h] BYREF
  int v6; // [esp+54h] [ebp-4h]

  v2 = *(this + 2);
  if ( 89478485 - v2 < a2 )
  {
    std::string::string(v5, "list<T> too long");
    v6 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v5);
    pExceptionObject[0] = &off_659BFD28;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
  }
  result = a2 + v2;
  *(this + 2) = result;
  return result;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (6588E1F0) --------------------------------------------------------
// ID 0x6D login response handler. Uses Packet_6D_Read -> Packet_InitBitStreamFromPayload + ReadBitsCompressed; no Read_u16c/u32c in this path.
int __stdcall HandlePacket_ID_LOGIN_REQUEST_RETURN(int a1)
{
  float *v2; // eax
  float *Slot; // eax
  float *pktBuf; // eax
  int (__thiscall **pktLoginResp)(void *, char); // [esp+Ch] [ebp-458h] BYREF
  char v6; // [esp+14h] [ebp-450h]
  _BYTE packetId[1044]; // [esp+18h] [ebp-44Ch] BYREF
  int loginStatus; // [esp+42Ch] [ebp-38h]
  int loginStatus2; // [esp+430h] [ebp-34h]
  char cleanupState; // [esp+434h] [ebp-30h]
  char v11; // [esp+43Ch] [ebp-28h]
  char v12; // [esp+43Dh] [ebp-27h]
  int v13; // [esp+460h] [ebp-4h]

  v6 = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)packetId);
  loginStatus = 0;
  loginStatus2 = 0;
  cleanupState = 109;
  pktLoginResp = &vtbl_Packet_ID_LOGIN_REQUEST_RETURN;
  v11 = 0;
  v12 = 0;
  v13 = 0;
  if ( Packet_ID_LOGIN_REQUEST_RETURN_Read((int)&pktLoginResp, a1) )
  {
    if ( v11 )
    {
      if ( v11 == 2 )
      {
        Slot = (float *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
        if ( Slot )
          LoginUI_SetMessageText(Slot, 1720, "FF000000", 0, 0, 0);
      }
      else if ( v11 == 3 )
      {
        v2 = (float *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
        if ( v2 )
          LoginUI_SetMessageText(v2, 1710, "FF000000", 0, 0, 0);
      }
    }
    else
    {
      pktBuf = (float *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
      if ( pktBuf )
        LoginUI_SetMessageText(pktBuf, 1711, "FF000000", 0, 0, 0);
    }
    v13 = -1;
    pktLoginResp = (int (__thiscall **)(void *, char))&vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)packetId);
    return 0;
  }
  else
  {
    v13 = -1;
    pktLoginResp = (int (__thiscall **)(void *, char))&vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)packetId);
    return 1;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CE86C: using guessed type int (__thiscall *vtbl_Packet_ID_LOGIN_REQUEST_RETURN)(void *, char);
// 65ABF70C: using guessed type int dword_65ABF70C;

//----- (6588E340) --------------------------------------------------------
// ID 0x73 handler. Packet_73_Read uses Read_u32c + Read_u16c.
int __stdcall HandlePacket_ID_WORLD_LOGIN_RETURN_73(int __return_address)
{
  int result; // eax
  float *loginStatusWidget; // ecx
  float retryAtTime; // [esp+Ch] [ebp-454h]
  Packet_ID_WORLD_LOGIN_RETURN pktWorldLoginReturn; // [esp+10h] [ebp-450h] BYREF
  int cleanupState; // [esp+45Ch] [ebp-4h]

  Packet_ID_WORLD_LOGIN_RETURN_Ctor(&pktWorldLoginReturn);
  cleanupState = 0;
  if ( Packet_ID_WORLD_LOGIN_RETURN_Read(&pktWorldLoginReturn, __return_address)
    && (loginStatusWidget = (float *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u)) != 0 )
  {
    switch ( pktWorldLoginReturn.code )
    {
      case 1u:
        LoginUI_SetMessageText(loginStatusWidget, 1725, "D2D2D200", 0, 0, 0);
        WorldLoginReturn_HandleAddress(
          dword_65ABF73C,
          pktWorldLoginReturn.flag,
          pktWorldLoginReturn.worldAddr.ip,
          pktWorldLoginReturn.worldAddr.port_pad);
        goto LABEL_14;
      case 2u:
        LoginUI_SetMessageText(loginStatusWidget, 1723, "FF000000", 0, 0, 0);
        goto LABEL_13;
      case 3u:
        LoginUI_SetMessageText(loginStatusWidget, 1734, "FF000000", 0, 0, 0);
        goto LABEL_13;
      case 4u:
        LoginUI_SetMessageText(loginStatusWidget, 1724, "FF000000", 0, 0, 0);
        goto LABEL_13;
      case 6u:
        LoginUI_SetMessageText(loginStatusWidget, 1735, "FF000000", 0, 0, 0);
        goto LABEL_13;
      case 7u:
        LoginUI_SetMessageText(loginStatusWidget, 1739, "FF000000", 0, 0, 0);
        goto LABEL_13;
      case 8u:
        retryAtTime = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient) + 5.0;
        WorldLoginReturn_ScheduleRetry((float *)dword_65ABF73C, retryAtTime);
        goto LABEL_14;
      default:
        LoginUI_SetMessageText(loginStatusWidget, 1722, "FF000000", 0, 0, 0);
        (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
          g_pILTClient,
          "--> Received unknown world login return code");
LABEL_13:
        LoginUI_ShowMessage(5);
LABEL_14:
        cleanupState = -1;
        pktWorldLoginReturn.vftable = &vtbl_Packet_Unknown0;
        BitStream_FreeOwnedBuffer((int)&pktWorldLoginReturn._pad0[8]);
        result = 0;
        break;
    }
  }
  else
  {
    cleanupState = -1;
    pktWorldLoginReturn.vftable = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)&pktWorldLoginReturn._pad0[8]);
    return 1;
  }
  return result;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65ABF70C: using guessed type int dword_65ABF70C;

//----- (6588E550) --------------------------------------------------------
int __stdcall HandlePacket_ID_ITEM_REMOVED(int a1)
{
  int Dword_this; // eax
  int v3; // esi
  int v4; // edi
  unsigned __int16 v5; // si
  bool v6; // bl
  int v7; // esi
  const char *v8; // eax
  int v9; // edi
  char *v10; // eax
  bool v11; // zf
  int v12; // esi
  unsigned __int16 v13; // si
  char EquipSlot; // al
  int v15; // esi
  const char *v16; // eax
  char *v17; // eax
  void **v18; // [esp+10h] [ebp-480h] BYREF
  char v19; // [esp+18h] [ebp-478h]
  _BYTE v20[1044]; // [esp+1Ch] [ebp-474h] BYREF
  int v21; // [esp+430h] [ebp-60h]
  int v22; // [esp+434h] [ebp-5Ch]
  char v23; // [esp+438h] [ebp-58h]
  int v24; // [esp+440h] [ebp-50h]
  char v25; // [esp+444h] [ebp-4Ch]
  int v26; // [esp+448h] [ebp-48h]
  char v27; // [esp+44Ch] [ebp-44h]
  char v28[4]; // [esp+450h] [ebp-40h] BYREF
  int v29; // [esp+454h] [ebp-3Ch]
  int v30; // [esp+48Ch] [ebp-4h]

  v19 = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)v20);
  v21 = 0;
  v22 = 0;
  v23 = -120;
  v18 = &off_659CE88C;
  v24 = 0;
  v25 = 0;
  v26 = 0;
  v27 = 1;
  v30 = 0;
  if ( !Packet_ID_ITEM_REMOVED_read((int)&v18, a1)
    || (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v24 != Dword_this) )
  {
    v30 = -1;
    v18 = (void **)&vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v20);
    return 1;
  }
  if ( v25 != 1 )
  {
    if ( v25 != 2 )
    {
      if ( v25 == 3 )
      {
        v3 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
        if ( sub_6593F010((_DWORD *)v3, v26, 0) )
          *(_BYTE *)(v3 + 32) = 1;
      }
      goto LABEL_39;
    }
    v4 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
    ItemStructA_InitAlt(v28);
    if ( (unsigned __int8)(EquipSlotArray_FindAndRemove1to3((_DWORD *)(v4 + 612), v26, v28) - 1) > 2u )
      goto LABEL_39;
    v5 = v29;
    if ( (unsigned __int16)(v29 - 1) > 0xBBFu )
      goto LABEL_39;
    v6 = ItemTemplate_GetType(g_ItemTemplateById, v29) == 4;
    if ( (unsigned __int16)SharedMem_ReadDword_this(dword_65ABF75C, 0x303Eu) == v5
      && (!v6 || !ItemsAddedPayload_GetVariantCountByTemplateId((_WORD *)v4, v5)) )
    {
      SharedMem_WriteU8_std(0x9Cu, 1u);
    }
    if ( v6 )
      goto LABEL_39;
    v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v5 + 30000);
    if ( v7 )
      v8 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
    else
      v8 = byte_659A8B98;
    v9 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4316, v8);
    if ( v9 )
      v10 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
    else
      v10 = (char *)byte_659A8B98;
    FriendList_AddEntry(dword_65ABF748, v10, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
    if ( v7 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
    v11 = v9 == 0;
LABEL_37:
    if ( !v11 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v9);
    goto LABEL_39;
  }
  v12 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  ItemStructA_InitAlt(v28);
  if ( EquipSlot_RemoveAndCopy((_DWORD *)(v12 + 36), v26, v28) )
  {
    v13 = v29;
    if ( (unsigned __int16)(v29 - 1) <= 0xBBFu )
    {
      EquipSlot = ItemTemplate_GetEquipSlot(g_ItemTemplateById, v29);
      SharedMem_ModifyU16_0x9D((char *)dword_65ABF748, EquipSlot);
      if ( v27 )
      {
        v15 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v13 + 30000);
        if ( v15 )
          v16 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v15);
        else
          v16 = byte_659A8B98;
        v9 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4316, v16);
        if ( v9 )
          v17 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
        else
          v17 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v17, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
        if ( v15 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v15);
        v11 = v9 == 0;
        goto LABEL_37;
      }
    }
  }
LABEL_39:
  v30 = -1;
  v18 = (void **)&vtbl_Packet_Unknown0;
  BitStream_FreeOwnedBuffer((int)v20);
  return 0;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CE88C: using guessed type void *off_659CE88C;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6588E8F0) --------------------------------------------------------
int __stdcall HandlePacket_NAME_CHANGE(int a1)
{
  int Dword_this; // eax
  int v3; // eax
  void **v4; // [esp+10h] [ebp-468h] BYREF
  char v5; // [esp+18h] [ebp-460h]
  _BYTE v6[1044]; // [esp+1Ch] [ebp-45Ch] BYREF
  int v7; // [esp+430h] [ebp-48h]
  int v8; // [esp+434h] [ebp-44h]
  char v9; // [esp+438h] [ebp-40h]
  int v10; // [esp+440h] [ebp-38h]
  char Source[32]; // [esp+444h] [ebp-34h] BYREF
  char v12; // [esp+464h] [ebp-14h]
  int v13; // [esp+474h] [ebp-4h]

  v5 = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)v6);
  v7 = 0;
  v8 = 0;
  v9 = -114;
  v4 = &off_659CDE80;
  Source[0] = 0;
  v10 = 0;
  v12 = 0;
  v13 = 0;
  if ( Packet_ID_NAME_CHANGE_read(&v4, a1) )
  {
    Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    if ( Dword_this == v10 )
    {
      if ( v12 )
        SharedMem_WriteString_std(11224, Source);
      else
        SharedMem_WriteString_std(11219, Source);
      v3 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
      if ( v3 )
        *(_BYTE *)(v3 + 48) = 1;
    }
    v13 = -1;
    v4 = (void **)&vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v6);
    return 0;
  }
  else
  {
    v13 = -1;
    v4 = (void **)&vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v6);
    return 1;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CDE80: using guessed type void *off_659CDE80;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (6588EA20) --------------------------------------------------------
int __stdcall HandlePacket_ID_UNLOAD_WEAPON(int a1)
{
  int Dword_this; // eax
  int v3; // esi
  char *v4; // eax
  int v5; // esi
  char v6[12]; // [esp+Ch] [ebp-4B0h] BYREF
  _BYTE v7[1060]; // [esp+18h] [ebp-4A4h] BYREF
  int itemKey; // [esp+43Ch] [ebp-80h]
  int playerId; // [esp+440h] [ebp-7Ch]
  char mode; // [esp+444h] [ebp-78h]
  unsigned __int16 itemEntry[26]; // [esp+448h] [ebp-74h] BYREF
  int itemEntryTemp; // [esp+47Ch] [ebp-40h] BYREF
  __int16 v13; // [esp+482h] [ebp-3Ah]
  int v14; // [esp+4B8h] [ebp-4h]

  LoginUI_SetFieldText(v6);
  v14 = 0;
  if ( !Packet_ID_UNLOAD_WEAPON_read((int)v6, a1) )
    goto LABEL_2;
  Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
  if ( Dword_this == playerId )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1);
    if ( mode == 2 )
    {
      v5 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
      if ( !v5 || !sub_6593FBB0((int ****)v5, itemEntry) )
      {
LABEL_2:
        v14 = -1;
        *(_DWORD *)v6 = &vtbl_Packet_Unknown0;
        BitStream_FreeOwnedBuffer((int)v7);
        return 1;
      }
      ItemStructA_InitAlt((char *)&itemEntryTemp);
      if ( EquipSlotArray_GetItemCopy((_DWORD *)(v5 + 612), itemKey, (char *)&itemEntryTemp) )
      {
        v13 = 0;
        EquipSlotArray_UpdateDurability((_DWORD *)(v5 + 612), itemEntryTemp, (int)&itemEntryTemp);
      }
      else if ( ItemsAddedPayload_FindEntryByVariantId((_WORD *)v5, itemKey, &itemEntryTemp) )
      {
        v13 = 0;
        sub_6593F010((_DWORD *)v5, itemEntryTemp, 0);
        sub_6593FBB0((int ****)v5, (unsigned __int16 *)&itemEntryTemp);
      }
      *(_BYTE *)(v5 + 32) = 1;
    }
    else if ( mode == 3 )
    {
      v3 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5339);
      if ( v3 )
        v4 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
      else
        v4 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v4, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v3 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v3);
    }
  }
  v14 = -1;
  *(_DWORD *)v6 = &vtbl_Packet_Unknown0;
  BitStream_FreeOwnedBuffer((int)v7);
  return 0;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (6588EC20) --------------------------------------------------------
int __stdcall HandlePacket_ID_MERGE_ITEMS(int a1)
{
  int Dword_this; // eax
  int v2; // esi
  char v3; // al
  int v5; // esi
  char *v6; // eax
  char v7[12]; // [esp+8h] [ebp-4B0h] BYREF
  _BYTE v8[1060]; // [esp+14h] [ebp-4A4h] BYREF
  int v9; // [esp+438h] [ebp-80h]
  char v10; // [esp+43Ch] [ebp-7Ch]
  int v11; // [esp+448h] [ebp-70h] BYREF
  unsigned __int16 v12; // [esp+44Ch] [ebp-6Ch]
  __int16 v13; // [esp+44Eh] [ebp-6Ah]
  __int16 v14; // [esp+452h] [ebp-66h]
  int v15[12]; // [esp+478h] [ebp-40h] BYREF
  int v16; // [esp+4B4h] [ebp-4h]

  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1);
  Packet_Unknown0_Ctor(v7);
  v16 = 0;
  if ( !Packet_ID_MERGE_ITEMS_read((int)v7, a1) )
    goto LABEL_16;
  Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
  if ( v9 != Dword_this || !v10 || !v11 || !v15[0] )
    goto LABEL_16;
  v2 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  if ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, v12) == 2
    || (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, v12) == 16
    || (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, v12) == 17
    || (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, v12) == 18 )
  {
    if ( v13 )
    {
      if ( !sub_6593F010((_DWORD *)v2, v11, 0)
        || !sub_6593FBB0((int ****)v2, (unsigned __int16 *)&v11)
        || !sub_6593F010((_DWORD *)v2, v15[0], 0)
        || !sub_6593FBB0((int ****)v2, (unsigned __int16 *)v15) )
      {
        goto LABEL_16;
      }
      goto LABEL_34;
    }
    goto LABEL_23;
  }
  if ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, v12) != 19 )
  {
    if ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, v12) != 5 )
      goto LABEL_16;
    if ( v14 )
    {
      if ( !sub_6593F010((_DWORD *)v2, v11, 0) || !sub_6593F010((_DWORD *)v2, v15[0], 0) )
        goto LABEL_16;
      goto LABEL_20;
    }
LABEL_23:
    if ( !sub_6593F010((_DWORD *)v2, v15[0], 0) || !sub_6593FBB0((int ****)v2, (unsigned __int16 *)v15) )
      goto LABEL_16;
LABEL_14:
    v3 = sub_6593F010((_DWORD *)v2, v11, 0);
    goto LABEL_15;
  }
  if ( !v14 )
  {
    if ( !sub_6593F010((_DWORD *)v2, v15[0], 0) || !sub_6593FBB0((int ****)v2, (unsigned __int16 *)v15) )
      goto LABEL_16;
    goto LABEL_14;
  }
  if ( !sub_6593F010((_DWORD *)v2, v11, 0)
    || !sub_6593FBB0((int ****)v2, (unsigned __int16 *)&v11)
    || !sub_6593F010((_DWORD *)v2, v15[0], 0) )
  {
    goto LABEL_16;
  }
LABEL_20:
  v3 = sub_6593FBB0((int ****)v2, (unsigned __int16 *)v15);
LABEL_15:
  if ( !v3 )
  {
LABEL_16:
    v16 = -1;
    *(_DWORD *)v7 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v8);
    return 1;
  }
LABEL_34:
  *(_BYTE *)(v2 + 32) = 1;
  v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1851);
  if ( v5 )
    v6 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
  else
    v6 = (char *)byte_659A8B98;
  FriendList_AddEntry(dword_65ABF748, v6, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
  if ( v5 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
  v16 = -1;
  *(_DWORD *)v7 = &vtbl_Packet_Unknown0;
  BitStream_FreeOwnedBuffer((int)v8);
  return 0;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6588EF60) --------------------------------------------------------
int __stdcall HandlePacket_SPLIT_CONTAINER(int a1)
{
  int Dword_this; // eax
  int (__stdcall *v3)(int); // edx
  int ****v4; // eax
  int ****v5; // esi
  char v6[12]; // [esp+Ch] [ebp-4E0h] BYREF
  _BYTE v7[1060]; // [esp+18h] [ebp-4D4h] BYREF
  int v8; // [esp+43Ch] [ebp-B0h]
  int v9; // [esp+440h] [ebp-ACh]
  int v10; // [esp+444h] [ebp-A8h]
  unsigned __int16 v11[26]; // [esp+448h] [ebp-A4h] BYREF
  int v12; // [esp+47Ch] [ebp-70h] BYREF
  __int16 v13; // [esp+480h] [ebp-6Ch]
  __int16 v14; // [esp+482h] [ebp-6Ah]
  __int16 v15; // [esp+484h] [ebp-68h]
  __int16 v16; // [esp+486h] [ebp-66h]
  char v17; // [esp+488h] [ebp-64h]
  char v18; // [esp+489h] [ebp-63h]
  int v19; // [esp+48Ch] [ebp-60h]
  int v20; // [esp+490h] [ebp-5Ch]
  int v21; // [esp+494h] [ebp-58h]
  char v22; // [esp+498h] [ebp-54h]
  char v23; // [esp+499h] [ebp-53h]
  char v24; // [esp+49Ah] [ebp-52h]
  int v25; // [esp+49Bh] [ebp-51h]
  int v26; // [esp+4A0h] [ebp-4Ch]
  int v27; // [esp+4A4h] [ebp-48h]
  char v28; // [esp+4A8h] [ebp-44h]
  int v29; // [esp+4ACh] [ebp-40h] BYREF
  __int16 v30; // [esp+4B0h] [ebp-3Ch]
  __int16 v31; // [esp+4B2h] [ebp-3Ah]
  __int16 v32; // [esp+4B4h] [ebp-38h]
  __int16 v33; // [esp+4B6h] [ebp-36h]
  char v34; // [esp+4B8h] [ebp-34h]
  char v35; // [esp+4B9h] [ebp-33h]
  int v36; // [esp+4BCh] [ebp-30h]
  int v37; // [esp+4C0h] [ebp-2Ch]
  int v38; // [esp+4C4h] [ebp-28h]
  char v39; // [esp+4C8h] [ebp-24h]
  char v40; // [esp+4C9h] [ebp-23h]
  char v41; // [esp+4CAh] [ebp-22h]
  int v42; // [esp+4CBh] [ebp-21h]
  int v43; // [esp+4D0h] [ebp-1Ch]
  int v44; // [esp+4D4h] [ebp-18h]
  char v45; // [esp+4D8h] [ebp-14h]
  int v46; // [esp+4E8h] [ebp-4h]

  sub_6580A6A0(v6);
  v46 = 0;
  if ( !Packet_ID_SPLIT_CONTAINER_read((int)v6, a1) )
    goto LABEL_2;
  Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
  if ( v8 != Dword_this )
    goto LABEL_2;
  SharedMem_ClearFlag(dword_65ABF734, 2);
  v13 = 0;
  v16 = 0;
  v14 = 0;
  v30 = 0;
  v32 = 0;
  v15 = 0;
  v31 = 0;
  v33 = 0;
  v12 = 0;
  v17 = 100;
  v18 = 0;
  v19 = 0;
  v20 = 0;
  v21 = 0;
  v23 = 0;
  v24 = 0;
  v22 = 0;
  v25 = 0;
  v26 = 0;
  v27 = 0;
  v28 = 0;
  v29 = 0;
  v34 = 100;
  v35 = 0;
  v36 = 0;
  v37 = 0;
  v38 = 0;
  v40 = 0;
  v41 = 0;
  v39 = 0;
  v42 = 0;
  v43 = 0;
  v44 = 0;
  v45 = 0;
  v3 = *(int (__stdcall **)(int))(*(_DWORD *)g_LTClient + 88);
  v4 = (int ****)(BYTE2(v10) == 6 ? v3(3) : v3(0));
  v5 = v4;
  if ( v4 )
  {
    sub_6593F8B0(v4, v9, v10, &v29, &v12);
    sub_6593FBB0(v5, (unsigned __int16 *)&v29);
    sub_6593FBB0(v5, v11);
    *((_BYTE *)v5 + 32) = 1;
    v46 = -1;
    *(_DWORD *)v6 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v7);
    return 0;
  }
  else
  {
LABEL_2:
    v46 = -1;
    *(_DWORD *)v6 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v7);
    return 1;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;

//----- (6588F110) --------------------------------------------------------
int __stdcall HandlePacket_ID_USE_ITEM(int a1)
{
  int Dword_this; // eax
  int v2; // esi
  char EntryByVariantId; // al
  int v5; // edi
  const char *v6; // eax
  int v7; // esi
  char *v8; // eax
  void **v9; // [esp+10h] [ebp-480h] BYREF
  char v10; // [esp+18h] [ebp-478h]
  _BYTE v11[1044]; // [esp+1Ch] [ebp-474h] BYREF
  int v12; // [esp+430h] [ebp-60h]
  int v13; // [esp+434h] [ebp-5Ch]
  char v14; // [esp+438h] [ebp-58h]
  int playerId; // [esp+440h] [ebp-50h]
  int itemKey; // [esp+444h] [ebp-4Ch]
  char useItemKey; // [esp+448h] [ebp-48h]
  int slotIndex; // [esp+449h] [ebp-47h]
  int itemEntry; // [esp+450h] [ebp-40h] BYREF
  unsigned __int16 itemId; // [esp+454h] [ebp-3Ch]
  __int16 v21; // [esp+456h] [ebp-3Ah]
  __int16 v22; // [esp+458h] [ebp-38h]
  __int16 v23; // [esp+45Ah] [ebp-36h]
  char v24; // [esp+45Ch] [ebp-34h]
  char v25; // [esp+45Dh] [ebp-33h]
  int v26; // [esp+460h] [ebp-30h]
  int v27; // [esp+464h] [ebp-2Ch]
  int v28; // [esp+468h] [ebp-28h]
  char v29; // [esp+46Ch] [ebp-24h]
  char v30; // [esp+46Dh] [ebp-23h]
  char v31; // [esp+46Eh] [ebp-22h]
  int v32; // [esp+46Fh] [ebp-21h]
  int v33; // [esp+474h] [ebp-1Ch]
  int v34; // [esp+478h] [ebp-18h]
  char v35; // [esp+47Ch] [ebp-14h]
  int v36; // [esp+48Ch] [ebp-4h]

  v10 = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)v11);
  v12 = 0;
  v13 = 0;
  v14 = -92;
  v9 = &off_659CDE90;
  playerId = 0;
  itemKey = 0;
  useItemKey = 1;
  LOBYTE(slotIndex) = 0;
  v36 = 0;
  if ( !Packet_ID_USE_ITEM_read((int)&v9, a1) )
    goto LABEL_8;
  Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
  if ( playerId != Dword_this )
    goto LABEL_8;
  v2 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  itemEntry = 0;
  itemId = 0;
  v21 = 0;
  v22 = 0;
  v23 = 0;
  v24 = 100;
  v25 = 0;
  v26 = 0;
  v27 = 0;
  v28 = 0;
  v30 = 0;
  v31 = 0;
  v29 = 0;
  v32 = 0;
  v33 = 0;
  v34 = 0;
  v35 = 0;
  if ( !(_BYTE)slotIndex )
  {
    if ( useItemKey )
    {
      if ( !sub_6593F010((_DWORD *)v2, itemKey, &itemEntry) )
        goto LABEL_8;
      *(_BYTE *)(v2 + 32) = 1;
      goto LABEL_12;
    }
    EntryByVariantId = ItemsAddedPayload_FindEntryByVariantId((_WORD *)v2, itemKey, &itemEntry);
    goto LABEL_7;
  }
  if ( !sub_6593F010((_DWORD *)v2, itemKey, &itemEntry) )
  {
LABEL_8:
    v36 = -1;
    v9 = (void **)&vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v11);
    return 1;
  }
  *(_BYTE *)(v2 + 32) = 1;
  if ( (unsigned __int8)(slotIndex - 23) <= 5u )
  {
    EntryByVariantId = EquipSlotArray_SetSlot26to28((char *)(v2 + 760), slotIndex, &itemEntry);
LABEL_7:
    if ( !EntryByVariantId )
      goto LABEL_8;
  }
LABEL_12:
  if ( itemId == 1802 || itemId == 1805 )
  {
    v9 = (void **)&vtbl_Packet_Unknown0;
  }
  else
  {
    v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, itemId + 30000);
    if ( v5 )
      v6 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
    else
      v6 = byte_659A8B98;
    v7 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4363, v6);
    if ( v7 )
      v8 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
    else
      v8 = (char *)byte_659A8B98;
    FriendList_AddEntry(dword_65ABF748, v8, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
    if ( v7 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
    if ( v5 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
    v9 = (void **)&vtbl_Packet_Unknown0;
  }
  v36 = -1;
  BitStream_FreeOwnedBuffer((int)v11);
  return 0;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CDE90: using guessed type void *off_659CDE90;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (6588F480) --------------------------------------------------------
int __stdcall HandlePacket_ID_A6(int a1)
{
  int result; // eax
  _WORD *v2; // edi
  unsigned __int16 v3; // si
  int v4; // edi
  const char *v5; // eax
  int v6; // esi
  char *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // esi
  int v10; // esi
  char *v11; // eax
  int v12; // eax
  int v13; // esi
  const char *v14; // eax
  char *v15; // eax
  int v16; // esi
  char *v17; // eax
  char *v18; // eax
  int WindowById; // eax
  int v20; // eax
  int v21; // eax
  int v22; // eax
  int v23; // eax
  int v24; // eax
  int v25; // eax
  int v26; // eax
  int v27; // eax
  int v28; // esi
  int v29; // eax
  _BYTE *v30; // esi
  unsigned __int16 v31; // ax
  const char *v32; // eax
  int v33; // eax
  int v34; // esi
  char *v35; // eax
  unsigned __int16 v36; // ax
  char *v37; // eax
  int v38; // [esp-4h] [ebp-4C4h]
  char v39; // [esp+Ch] [ebp-4B4h]
  char v40[12]; // [esp+10h] [ebp-4B0h] BYREF
  _BYTE v41[1068]; // [esp+1Ch] [ebp-4A4h] BYREF
  int v42; // [esp+448h] [ebp-78h]
  int v43; // [esp+44Ch] [ebp-74h]
  int v44; // [esp+450h] [ebp-70h]
  __int64 v45; // [esp+458h] [ebp-68h]
  _DWORD v46[12]; // [esp+460h] [ebp-60h] BYREF
  char v47[16]; // [esp+490h] [ebp-30h] BYREF
  char Buffer[16]; // [esp+4A0h] [ebp-20h] BYREF
  int v49; // [esp+4BCh] [ebp-4h]

  Packet_ID_152_Ctor(v40);
  v49 = 0;
  if ( Packet_ID_A6_read((int)v40, a1) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x10000);
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
    switch ( v41[1064] )
    {
      case 1:
        if ( SharedMem_ReadBool_std(0x1D699u)
          || SharedMem_ReadBool_std(0x1D698u)
          || SharedMem_ReadBool_std(0x1D69Bu)
          || SharedMem_ReadBool_std(0x1D69Au) )
        {
          v10 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4440);
          if ( v10 )
            v18 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v10);
          else
            v18 = (char *)byte_659A8B98;
          FriendList_AddEntry(dword_65ABF748, v18, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
          goto LABEL_107;
        }
        v2 = (_WORD *)(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
        if ( !v2 )
          goto LABEL_2;
        v3 = sub_65932450(g_ItemTemplateById, v44);
        if ( (unsigned __int16)(v3 - 1) > 0xBBFu )
          goto LABEL_40;
        ItemStructA_InitAlt((char *)v46);
        if ( ItemList_FindEntryById_CopyEntry(v2, v3, v46) )
        {
          v8 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
          v9 = v8;
          if ( !v8 )
            goto LABEL_2;
          if ( ItemStatModifier_MeetsReqFromDisplayName(v8, (int)v46) )
          {
            v12 = ItemStatModifier_FindById(v9, 18);
            if ( v12 && *(_BYTE *)(v12 + 4) >= (unsigned __int8)v43 )
            {
LABEL_40:
              byte_65ABF80C = v44;
              dword_65ABF808 = v42;
              v16 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1863);
              if ( v16 )
                v17 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v16);
              else
                v17 = (char *)byte_659A8B98;
              TooltipMgr_ShowTextTooltip((int *)dword_65ABF708, v17, (int)sub_6588F3A0, 0, 1, 0);
              if ( v16 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v16);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x50u);
            }
            else
            {
              sub_659480D0(v47, (unsigned __int8)v43);
              v13 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 17969);
              if ( v13 )
                v14 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v13);
              else
                v14 = byte_659A8B98;
              v4 = (*(int (__cdecl **)(int, int, const char *, char *))(*(_DWORD *)g_pILTClient + 64))(
                     g_pILTClient,
                     5662,
                     v14,
                     v47);
              if ( v13 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v13);
              if ( v4 )
                v15 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
              else
                v15 = (char *)byte_659A8B98;
              FriendList_AddEntry(dword_65ABF748, v15, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
              if ( v4 )
                goto LABEL_98;
            }
          }
          else
          {
            v10 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5445);
            if ( v10 )
              v11 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v10);
            else
              v11 = (char *)byte_659A8B98;
            FriendList_AddEntry(dword_65ABF748, v11, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
            if ( v10 )
              goto LABEL_108;
          }
        }
        else
        {
          v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v3 + 30000);
          if ( v4 )
            v5 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
          else
            v5 = byte_659A8B98;
          v6 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4420, v5);
          if ( v6 )
            v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
          else
            v7 = (char *)byte_659A8B98;
          FriendList_AddEntry(dword_65ABF748, v7, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
          if ( v6 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
          if ( v4 )
            goto LABEL_98;
        }
        goto LABEL_109;
      case 3:
        SharedMem_WriteU8_std(0x1EEC3u, 1u);
        if ( v45 )
        {
          WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Eu);
          if ( WindowById )
          {
            sub_657F2710(WindowById, v42, v44, v45, HIDWORD(v45), v43);
            GameMode_SetModeFour((int *)dword_65ABF6F4, 0x1Eu);
          }
        }
        else
        {
          v20 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Fu);
          if ( v20 )
          {
            sub_657F42B0(v20, v42, v44, v43);
            GameMode_SetModeFour((int *)dword_65ABF6F4, 0x1Fu);
          }
        }
        goto LABEL_109;
      case 4:
        sub_65947DB0(Buffer, HIWORD(v43));
        v21 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5451, Buffer);
        goto LABEL_103;
      case 5:
        v21 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5452);
        goto LABEL_103;
      case 7:
        v39 = 0;
        switch ( (char)v44 )
        {
          case 1:
          case 6:
          case 9:
          case 11:
            v39 = 1;
            break;
          default:
            break;
        }
        v22 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Eu);
        if ( v22 && *(_BYTE *)(v22 + 6241) )
          sub_657F11B0(v22, v39);
        v23 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Fu);
        if ( v23 && *(_BYTE *)(v23 + 6241) )
          sub_657F2910(v23, v39);
        if ( (unsigned __int8)v44 == 4 )
        {
          v24 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x29u);
        }
        else
        {
          if ( (unsigned __int8)v44 != 5 )
            goto LABEL_109;
          v24 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Au);
        }
        if ( v24 )
          (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v24 + 28))(v24, 0);
LABEL_109:
        v49 = -1;
        *(_DWORD *)v40 = &vtbl_Packet_Unknown0;
        BitStream_FreeOwnedBuffer((int)v41);
        result = 0;
        break;
      case 8:
        v21 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5453);
        goto LABEL_103;
      case 0xB:
        v25 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Eu);
        if ( v25 && *(_BYTE *)(v25 + 6241) )
          sub_657F1250(v25);
        v26 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Fu);
        if ( v26 && *(_BYTE *)(v26 + 6241) )
          sub_657F29B0(v26);
        goto LABEL_109;
      case 0xC:
        v27 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Eu);
        v28 = v27;
        if ( v27 && *(_BYTE *)(v27 + 6241) && *(_BYTE *)(v27 + 6376) == (_BYTE)v44 && *(_DWORD *)(v27 + 6372) == v42 )
        {
          SoundMgr_PlaySoundByIndex(dword_65ABF750, 0xAAu);
          sub_657F12E0(v28);
        }
        v29 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Fu);
        v30 = (_BYTE *)v29;
        if ( v29 && *(_BYTE *)(v29 + 6241) && *(_BYTE *)(v29 + 7440) == (_BYTE)v44 && *(_DWORD *)(v29 + 7436) == v42 )
        {
          SoundMgr_PlaySoundByIndex(dword_65ABF750, 0xAAu);
          MsgId_88_WindowClose(v30, 0);
        }
        goto LABEL_109;
      case 0xD:
        v31 = sub_65932450(g_ItemTemplateById, v44);
        v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v31 + 30000);
        if ( v4 )
          v32 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
        else
          v32 = byte_659A8B98;
        v33 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4420, v32);
        goto LABEL_92;
      case 0xE:
        v36 = sub_65932450(g_ItemTemplateById, v44);
        v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v36 + 30000);
        if ( v4 )
        {
          v38 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
          v33 = (*(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4424, v38);
        }
        else
        {
          v33 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(
                  g_pILTClient,
                  4424,
                  byte_659A8B98);
        }
LABEL_92:
        v34 = v33;
        if ( v33 )
          v35 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v33);
        else
          v35 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v35, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
        if ( v34 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v34);
        if ( v4 )
LABEL_98:
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
        goto LABEL_109;
      case 0xF:
        v21 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5547);
LABEL_103:
        v10 = v21;
        if ( v21 )
          v37 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v21);
        else
          v37 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v37, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
LABEL_107:
        if ( v10 )
LABEL_108:
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v10);
        goto LABEL_109;
      default:
        goto LABEL_109;
    }
  }
  else
  {
LABEL_2:
    v49 = -1;
    *(_DWORD *)v40 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v41);
    return 1;
  }
  return result;
}
// 657F11B0: using guessed type int __thiscall sub_657F11B0(_DWORD, _DWORD);
// 657F1250: using guessed type int __thiscall sub_657F1250(_DWORD);
// 657F12E0: using guessed type int __thiscall sub_657F12E0(_DWORD);
// 657F2710: using guessed type int __thiscall sub_657F2710(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 657F2910: using guessed type int __thiscall sub_657F2910(_DWORD, _DWORD);
// 657F29B0: using guessed type int __thiscall sub_657F29B0(_DWORD);
// 657F42B0: using guessed type int __thiscall sub_657F42B0(_DWORD, _DWORD, _DWORD, _DWORD);
// 6588F3A0: using guessed type int __cdecl sub_6588F3A0(int, int);
// 65932450: using guessed type int __thiscall sub_65932450(_DWORD, _DWORD);
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF808: using guessed type int dword_65ABF808;
// 65ABF80C: using guessed type char byte_65ABF80C;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6588FD60) --------------------------------------------------------
int __stdcall HandlePacket_REPAIR_ITEM(int a1)
{
  int Dword_this; // eax
  int *WindowById; // eax
  int v4; // esi
  int v5; // edi
  const char *v6; // eax
  int v7; // esi
  char *v8; // eax
  void **v9; // [esp+10h] [ebp-480h] BYREF
  char v10; // [esp+18h] [ebp-478h]
  _BYTE v11[1044]; // [esp+1Ch] [ebp-474h] BYREF
  int v12; // [esp+430h] [ebp-60h]
  int v13; // [esp+434h] [ebp-5Ch]
  char v14; // [esp+438h] [ebp-58h]
  int v15; // [esp+440h] [ebp-50h]
  int v16; // [esp+444h] [ebp-4Ch]
  char v17; // [esp+448h] [ebp-48h]
  int v18; // [esp+450h] [ebp-40h] BYREF
  int v19; // [esp+454h] [ebp-3Ch]
  __int16 v20; // [esp+458h] [ebp-38h]
  __int16 MaxDurability; // [esp+45Ah] [ebp-36h]
  char v22; // [esp+45Ch] [ebp-34h]
  char v23; // [esp+45Dh] [ebp-33h]
  int v24; // [esp+460h] [ebp-30h]
  int v25; // [esp+464h] [ebp-2Ch]
  int v26; // [esp+468h] [ebp-28h]
  char v27; // [esp+46Ch] [ebp-24h]
  char v28; // [esp+46Dh] [ebp-23h]
  char v29; // [esp+46Eh] [ebp-22h]
  int v30; // [esp+46Fh] [ebp-21h]
  int v31; // [esp+474h] [ebp-1Ch]
  int v32; // [esp+478h] [ebp-18h]
  char v33; // [esp+47Ch] [ebp-14h]
  int v34; // [esp+48Ch] [ebp-4h]

  v10 = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)v11);
  v12 = 0;
  v13 = 0;
  v14 = -83;
  v9 = &off_659CD820;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v34 = 0;
  if ( !Packet_ID_REPAIR_ITEM_read((int)&v9, a1) )
    goto LABEL_2;
  Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
  if ( v15 != Dword_this )
    goto LABEL_2;
  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x80000);
  WindowById = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Cu);
  if ( WindowById )
    ItemSlotUI_Clear(WindowById);
  v4 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  v20 = 0;
  v18 = 0;
  v19 = 0;
  MaxDurability = 0;
  v22 = 100;
  v23 = 0;
  v24 = 0;
  v25 = 0;
  v26 = 0;
  v28 = 0;
  v29 = 0;
  v27 = 0;
  v30 = 0;
  v31 = 0;
  v32 = 0;
  v33 = 0;
  if ( ItemsAddedPayload_FindEntryByVariantId((_WORD *)v4, v16, &v18) )
  {
    MaxDurability = ItemTemplate_GetMaxDurability(v19);
    if ( !v17 )
      ++v22;
    sub_659403B0((int ****)v4, &v18);
    *(_BYTE *)(v4 + 32) = 1;
    v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, (unsigned __int16)v19 + 30000);
    if ( v5 )
      v6 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
    else
      v6 = byte_659A8B98;
    v7 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4410, v6);
    if ( v7 )
      v8 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
    else
      v8 = (char *)byte_659A8B98;
    FriendList_AddEntry(dword_65ABF748, v8, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
    if ( v7 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
    if ( v5 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
    v34 = -1;
    v9 = (void **)&vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v11);
    return 0;
  }
  else
  {
LABEL_2:
    v34 = -1;
    v9 = (void **)&vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v11);
    return 1;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CD820: using guessed type void *off_659CD820;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (6588FFC0) --------------------------------------------------------
int __stdcall HandlePacket_ID_RECYCLE_ITEM(int a1)
{
  int Dword_this; // eax
  int *WindowById; // eax
  int v4; // edi
  const char *v5; // eax
  int v6; // esi
  char *v7; // eax
  int v8; // [esp+10h] [ebp-44Ch] BYREF
  void **v9; // [esp+14h] [ebp-448h] BYREF
  char v10; // [esp+1Ch] [ebp-440h]
  unsigned int v11[263]; // [esp+20h] [ebp-43Ch] BYREF
  char v12; // [esp+43Ch] [ebp-20h]
  int v13; // [esp+444h] [ebp-18h] BYREF
  int v14; // [esp+448h] [ebp-14h] BYREF
  int v15; // [esp+458h] [ebp-4h]

  v10 = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)v11);
  v11[261] = 0;
  v11[262] = 0;
  v12 = -82;
  v9 = &off_659CD798;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  if ( VariableSizedPacket::Read(&v9, a1)
    && (RakNet::BitStream::ReadCompressed_T_uint(v11, (char *)&v13),
        RakNet::BitStream::ReadCompressed_T_uint(v11, (char *)&v14),
        Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu),
        v13 == Dword_this) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x80000);
    v8 = 0;
    WindowById = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Du);
    if ( WindowById )
    {
      ItemSlotUI_GetAndClear(WindowById, &v8);
      if ( (unsigned __int16)(v8 - 1) <= 0xBBFu )
      {
        v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, (unsigned __int16)v8 + 30000);
        if ( v4 )
          v5 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
        else
          v5 = byte_659A8B98;
        v6 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4411, v5);
        if ( v6 )
          v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
        else
          v7 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v7, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
        if ( v6 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
        if ( v4 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
      }
    }
    v15 = -1;
    v9 = (void **)&vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v11);
    return 0;
  }
  else
  {
    v15 = -1;
    v9 = (void **)&vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v11);
    return 1;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CD798: using guessed type void *off_659CD798;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (658901F0) --------------------------------------------------------
int __stdcall HandlePacket_ID_B2(int a1)
{
  int Dword_this; // eax
  _BYTE *WindowById; // eax
  int v4; // esi
  char *v5; // eax
  void (__thiscall *v6)(int, int, int); // edx
  void (__thiscall *v7)(int, int, _DWORD); // eax
  int v8; // [esp-8h] [ebp-470h]
  int v9; // [esp+8h] [ebp-460h] BYREF
  int v10; // [esp+Ch] [ebp-45Ch] BYREF
  char v11[12]; // [esp+10h] [ebp-458h] BYREF
  _BYTE v12[1060]; // [esp+1Ch] [ebp-44Ch] BYREF
  int v13; // [esp+440h] [ebp-28h]
  char v14; // [esp+444h] [ebp-24h]
  unsigned __int8 v15; // [esp+450h] [ebp-18h]
  int v16; // [esp+464h] [ebp-4h]

  Packet_ID_B2_Ctor(v11);
  v16 = 0;
  if ( Packet_ID_B2_read((int)v11, a1)
    && (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v13 == Dword_this) )
  {
    if ( v14 == 4 )
    {
      WindowById = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
      if ( WindowById && WindowById[6241] )
        (*(void (__thiscall **)(_BYTE *, int, _DWORD, _DWORD))(*(_DWORD *)WindowById + 4))(WindowById, 5, 0, 0);
      v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1888);
      if ( v4 )
        v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
      else
        v5 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v5, 10, 0, 1, "FF000000", "FF000000", 0, 0, 0, 0);
      if ( v4 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
      GameMode_TrySetMode((int *)dword_65ABF6F4, 1);
      LTObject_Create(&v10);
      v6 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v10 + 36);
      LOBYTE(v16) = 1;
      v6(v10, 122, 8);
      (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)v10 + 36))(v10, v15, 8);
      v8 = *FXInstance_Clone(&v10, &v9);
      v7 = *(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 324);
      LOBYTE(v16) = 2;
      v7(g_pILTClient, v8, 0);
      LOBYTE(v16) = 1;
      if ( v9 )
        (*(void (__thiscall **)(int))(*(_DWORD *)v9 + 8))(v9);
      LOBYTE(v16) = 0;
      if ( v10 )
        (*(void (__thiscall **)(int))(*(_DWORD *)v10 + 8))(v10);
      v10 = 0;
    }
    v16 = -1;
    *(_DWORD *)v11 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v12);
    return 0;
  }
  else
  {
    v16 = -1;
    *(_DWORD *)v11 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v12);
    return 1;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (658905A0) --------------------------------------------------------
int **__thiscall sub_658905A0(int **this, int **a2, _DWORD *a3)
{
  int *v3; // edx
  int v4; // eax

  v3 = *(this + 1);
  v4 = v3[1];
  while ( !*(_BYTE *)(v4 + 17) )
  {
    if ( *(_DWORD *)(v4 + 12) >= *a3 )
    {
      v3 = (int *)v4;
      v4 = *(_DWORD *)v4;
    }
    else
    {
      v4 = *(_DWORD *)(v4 + 8);
    }
  }
  if ( v3 == *(this + 1) || *a3 < (unsigned int)v3[3] )
  {
    *a2 = *(this + 1);
    return a2;
  }
  else
  {
    *a2 = v3;
    return a2;
  }
}

//----- (658907A0) --------------------------------------------------------
bool __thiscall sub_658907A0(_DWORD *this, int a2, _DWORD *a3)
{
  int v3; // edi
  _DWORD *v4; // esi
  int **v5; // eax
  _DWORD *v6; // ecx
  bool result; // al
  int *v8; // [esp+8h] [ebp-4h] BYREF

  v3 = a2;
  v4 = (_DWORD *)(*(this + 1693) + 180);
  v5 = sub_658905A0((int **)(*(this + 1693) + 212), &v8, &a2);
  v6 = a3;
  result = *v5 != (int *)v4[9];
  if ( a3 )
  {
    *a3 = v3;
    qmemcpy(v6 + 1, v4, 0x20u);
  }
  return result;
}

//----- (65890890) --------------------------------------------------------
char *__thiscall sub_65890890(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -126;
  *(_DWORD *)this = &off_659CEB10;
  *((_DWORD *)this + 270) = LinkedListNode_Alloc56();
  *((_DWORD *)this + 271) = 0;
  *((_DWORD *)this + 268) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CEB10: using guessed type void *off_659CEB10;

//----- (65890990) --------------------------------------------------------
char __thiscall Packet_ID_ITEMS_CHANGED_read(_DWORD *this, int a2)
{
  _DWORD *v2; // esi
  char result; // al
  int v4; // edi
  _DWORD *v6; // [esp+8h] [ebp-3Ch]
  unsigned __int8 i; // [esp+Eh] [ebp-36h]
  unsigned __int8 v8; // [esp+Fh] [ebp-35h] BYREF
  int v9; // [esp+10h] [ebp-34h] BYREF
  unsigned __int16 v10; // [esp+14h] [ebp-30h] BYREF
  __int16 v11; // [esp+16h] [ebp-2Eh]
  __int16 v12; // [esp+18h] [ebp-2Ch]
  __int16 v13; // [esp+1Ah] [ebp-2Ah]
  char v14; // [esp+1Ch] [ebp-28h]
  char v15; // [esp+1Dh] [ebp-27h]
  int v16; // [esp+20h] [ebp-24h]
  int v17; // [esp+24h] [ebp-20h]
  int v18; // [esp+28h] [ebp-1Ch]
  char v19; // [esp+2Ch] [ebp-18h]
  char v20; // [esp+2Dh] [ebp-17h]
  char v21; // [esp+2Eh] [ebp-16h]
  int v22; // [esp+2Fh] [ebp-15h]
  int v23; // [esp+34h] [ebp-10h]
  int v24; // [esp+38h] [ebp-Ch]
  char v25; // [esp+3Ch] [ebp-8h]

  v2 = this;
  result = VariableSizedPacket::Read(this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint(v2 + 3, (char *)v2 + 1072);
    RakNet::BitStream::ReadCompressed(v2 + 3, (char *)&v8, 8u, 1);
    v9 = 0;
    v10 = 0;
    v11 = 0;
    v12 = 0;
    v13 = 0;
    v14 = 100;
    v15 = 0;
    v16 = 0;
    v17 = 0;
    v18 = 0;
    v20 = 0;
    v21 = 0;
    v19 = 0;
    v22 = 0;
    v23 = 0;
    v24 = 0;
    v25 = 0;
    for ( i = 0; i < v8; ++i )
    {
      v10 = 0;
      v13 = 0;
      v11 = 0;
      v9 = 0;
      v12 = 0;
      v14 = 100;
      v15 = 0;
      v16 = 0;
      v17 = 0;
      v18 = 0;
      v20 = 0;
      v21 = 0;
      v19 = 0;
      v22 = 0;
      v23 = 0;
      v24 = 0;
      v25 = 0;
      ItemEntryWithId_Read((char *)&v9, v2 + 3);
      if ( v9 )
      {
        if ( ItemStructA_IsValid(&v10) )
        {
          v4 = v2[270];
          v6 = ItemChangeEntry_Create(v4, *(_DWORD *)(v4 + 4), &v9);
          ItemChangeList_IncrementSize(v2 + 269, 1u);
          v2 = this;
          *(_DWORD *)(v4 + 4) = v6;
          *(_DWORD *)v6[1] = v6;
        }
      }
    }
    return 1;
  }
  return result;
}

//----- (65890B10) --------------------------------------------------------
char **__thiscall sub_65890B10(char **this, char **a2, char *a3, char *a4)
{
  char *v4; // edx
  char *v5; // ebx
  char **v6; // esi
  char *v7; // eax
  const void *v8; // esi
  void *v9; // edi

  v4 = a4;
  v5 = a3;
  v6 = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v7 = *(this + 2);
    if ( a4 != v7 )
    {
      do
      {
        v8 = v4;
        v9 = v5;
        v4 += 56;
        v5 += 56;
        qmemcpy(v9, v8, 0x38u);
      }
      while ( v4 != v7 );
      v6 = a2;
    }
    *(this + 2) = v5;
  }
  return v6;
}

//----- (65890B90) --------------------------------------------------------
int __stdcall HandlePacket_ID_ITEMS_CHANGED(int a1)
{
  int Dword_this; // eax
  int *i; // ebx
  int *entryPtr; // esi
  int v5; // eax
  int v6; // eax
  int v7; // edi
  int WindowById; // eax
  char pkt[12]; // [esp+10h] [ebp-480h] BYREF
  _BYTE bitstreamBuf[1060]; // [esp+1Ch] [ebp-474h] BYREF
  int playerId; // [esp+440h] [ebp-50h]
  _BYTE v12[4]; // [esp+444h] [ebp-4Ch] BYREF
  int **entryListHead; // [esp+448h] [ebp-48h]
  int itemEntryTemp[12]; // [esp+450h] [ebp-40h] BYREF
  int v15; // [esp+48Ch] [ebp-4h]

  sub_65890890(pkt);
  v15 = 0;
  if ( Packet_ID_ITEMS_CHANGED_read(pkt, a1)
    && (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), playerId == Dword_this) )
  {
    for ( i = *entryListHead; i != (int *)entryListHead; i = (int *)*i )
    {
      entryPtr = i + 2;
      switch ( ItemTemplate_GetType(g_ItemTemplateById, *((_WORD *)i + 6)) )
      {
        case 3:
          v5 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
          EquipSlotArray_UpdateDurability((_DWORD *)(v5 + 612), *entryPtr, (int)(i + 2));
          break;
        case 5:
        case 6:
          v6 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
          EquipSlot_UpdateDurability((_DWORD *)(v6 + 36), *entryPtr, (int)(i + 2));
          break;
        case 16:
        case 17:
        case 18:
        case 19:
          v7 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
          ItemStructA_InitAlt((char *)itemEntryTemp);
          if ( sub_6593F010((_DWORD *)v7, *entryPtr, itemEntryTemp) )
          {
            sub_6593FBB0((int ****)v7, (unsigned __int16 *)i + 4);
            *(_BYTE *)(v7 + 32) = 1;
            WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x40u);
            if ( WindowById )
              ItemDropUI_ShowNotification(
                WindowById,
                *((unsigned __int16 *)i + 6),
                COERCE_FLOAT(*((unsigned __int16 *)i + 7) - *(int *)((char *)&itemEntryTemp[1] + 2)));
          }
          break;
        default:
          continue;
      }
    }
    v15 = -1;
    LinkedList_DestroyAll((int)v12);
    *(_DWORD *)pkt = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)bitstreamBuf);
    return 0;
  }
  else
  {
    v15 = -1;
    LinkedList_DestroyAll((int)v12);
    *(_DWORD *)pkt = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)bitstreamBuf);
    return 1;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65890D70) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
// positive sp value has been detected, the output may be wrong!
int __thiscall sub_65890D70(char *this, int a2)
{
  int Dword_this; // eax
  int v3; // ebx
  unsigned __int16 *v4; // eax
  unsigned int v5; // edi
  int ****v6; // esi
  int v7; // eax
  int v8; // esi
  _DWORD *WindowById; // esi
  char *Armor; // eax
  char *v11; // eax
  _DWORD *v12; // esi
  _DWORD *v13; // eax
  __int16 v14; // ax
  unsigned __int16 v15; // cx
  char *v16; // ebx
  int ****v17; // eax
  char *v18; // ebx
  int v19; // esi
  unsigned __int8 v20; // si
  char *v21; // ebx
  __int16 v22; // ax
  bool v23; // zf
  char *v24; // ebx
  int ****v25; // eax
  int v26; // eax
  char *v27; // ebx
  int v28; // esi
  __int16 v29; // ax
  char v30; // bl
  char *v31; // ebx
  char *v32; // eax
  char *Accessory; // eax
  _WORD *v34; // esi
  unsigned __int16 RemainingCapacity; // ax
  unsigned __int16 v37; // [esp-1Ch] [ebp-558h]
  _WORD *v38; // [esp+40h] [ebp-4FCh]
  int v39[6]; // [esp+50h] [ebp-4ECh] BYREF
  _DWORD v40[7]; // [esp+68h] [ebp-4D4h] BYREF
  char v41[12]; // [esp+84h] [ebp-4B8h] BYREF
  int v42; // [esp+4B4h] [ebp-88h]
  char v43[4]; // [esp+4B8h] [ebp-84h] BYREF
  int v44; // [esp+4BCh] [ebp-80h]
  unsigned int v45; // [esp+4C0h] [ebp-7Ch]
  char v46; // [esp+4C4h] [ebp-78h]
  char v47; // [esp+4C5h] [ebp-77h]
  char v48[6]; // [esp+4C6h] [ebp-76h]
  int v49; // [esp+4CCh] [ebp-70h] BYREF
  __int16 v50; // [esp+4D0h] [ebp-6Ch]
  __int16 v51; // [esp+4D2h] [ebp-6Ah]
  unsigned __int16 v52; // [esp+4D6h] [ebp-66h]
  int v53; // [esp+4DCh] [ebp-60h]
  int v54[12]; // [esp+4FCh] [ebp-40h] BYREF
  int v55; // [esp+538h] [ebp-4h]

  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1);
  Packet_ID_MOVE_ITEMS_ctor(v41);
  v55 = 0;
  if ( !Packet_ID_MOVE_ITEMS_read((int)v41, a2)
    || (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v42 != Dword_this)
    || (unsigned __int8)(v46 - 1) > 0x10u )
  {
    JUMPOUT(0x65892506);
  }
  if ( (unsigned __int8)(v47 - 1) > 0x10u )
  {
LABEL_7:
    v54[8] = -1;
    LoginPacket_Dtor(v40);
  }
  else
  {
    v3 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
    switch ( v46 )
    {
      case 1:
        switch ( v47 )
        {
          case 2:
            if ( v45 != 1 )
              goto LABEL_7;
            ItemStructA_InitAlt((char *)&v49);
            if ( !ItemsAddedPayload_FindEntryByVariantId((_WORD *)v3, *(_DWORD *)(*(_DWORD *)v44 + 8), &v49) )
            {
              WindowById = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x22u);
              if ( WindowById )
              {
                if ( sub_658907A0(WindowById, *(_DWORD *)(*(_DWORD *)v44 + 8), &v49) )
                {
                  TradeWindow_ClearItemSlot((int)WindowById);
                  sub_6593FBB0((int ****)v3, (unsigned __int16 *)&v49);
                }
              }
            }
            SharedMem_ModifyU16_0x9D((char *)dword_65ABF748, v48[1]);
            if ( v48[1] != 12
              || v3 == -180
              || !*(_DWORD *)(v3 + 180)
              || ItemTemplate_GetType(g_ItemTemplateById, *(_WORD *)(v3 + 184)) == 6 )
            {
              goto LABEL_33;
            }
            qmemcpy(v54, (const void *)(v3 + 180), sizeof(v54));
            if ( !sub_6593FBB0((int ****)v3, (unsigned __int16 *)v54) || *(_DWORD *)(v3 + 180) != v54[0] )
              goto LABEL_40;
            ItemStructA_Init((char *)(v3 + 180));
LABEL_33:
            Armor = EquipSlots_GetArmor((char *)(v3 + 36), v48[1]);
            if ( Armor )
            {
              if ( *(_DWORD *)Armor )
              {
                qmemcpy(v54, Armor, sizeof(v54));
                if ( !sub_6593FBB0((int ****)v3, (unsigned __int16 *)v54)
                  || !EquipSlotArray_RemoveSlot5to16((char *)(v3 + 36), v48[1], v54[0], 0) )
                {
                  goto LABEL_40;
                }
              }
            }
            if ( !EquipSlotArray_SetSlot5to16((char *)(v3 + 36), v48[1], &v49) )
              goto LABEL_40;
            if ( !sub_6593F010((_DWORD *)v3, v49, 0) )
            {
              EquipSlotArray_RemoveSlot5to16((char *)(v3 + 36), v48[1], v49, 0);
LABEL_40:
              v54[8] = -1;
              LoginPacket_Dtor(v40);
              JUMPOUT(0x6589252F);
            }
LABEL_62:
            *(_BYTE *)(v3 + 32) = 1;
            break;
          case 3:
            if ( v45 != 1 )
              goto LABEL_7;
            ItemStructA_InitAlt((char *)v54);
            if ( !ItemsAddedPayload_FindEntryByVariantId((_WORD *)v3, *(_DWORD *)(*(_DWORD *)v44 + 8), v54)
              || !EquipSlotArray_SetSlot1to3((char *)(v3 + 612), v48[1], v54) )
            {
              goto LABEL_7;
            }
            if ( sub_6593F010((_DWORD *)v3, v54[0], 0) )
              goto LABEL_62;
            EquipSlotArray_RemoveSlot1to3((char *)(v3 + 612), v48[1], v54[0], 0);
            v55 = -1;
            LoginPacket_Dtor(v41);
            goto LABEL_137;
          case 4:
            if ( v45 != 1 )
              goto LABEL_7;
            ItemStructA_InitAlt((char *)&v49);
            if ( !ItemsAddedPayload_FindEntryByVariantId((_WORD *)v3, *(_DWORD *)(*(_DWORD *)v44 + 8), &v49) )
            {
              v12 = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x22u);
              if ( v12 )
              {
                if ( sub_658907A0(v12, *(_DWORD *)(*(_DWORD *)v44 + 8), &v49) )
                {
                  TradeWindow_ClearItemSlot((int)v12);
                  sub_6593FBB0((int ****)v3, (unsigned __int16 *)&v49);
                }
              }
            }
            v48[1] = EquipSlotArray_FindFreeSlot26((_DWORD *)(v3 + 760));
            v13 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
            if ( !v13 )
              goto LABEL_7;
            v39[0] = v52;
            ItemStatModifier_ProcessValue(v13, 0x18u, v39);
            v14 = LOWORD(v39[0]) - v52;
            v15 = v39[0];
            v39[0] -= v52;
            v51 = v14;
            v52 = v15;
            if ( !EquipSlotArray_SetSlot26to28((char *)(v3 + 760), v48[1], &v49) )
              goto LABEL_7;
            if ( sub_6593F010((_DWORD *)v3, v49, 0) )
              goto LABEL_62;
            EquipSlotArray_GetSlot26to28((char *)(v3 + 760), v48[1], v49, 0);
            v55 = -1;
            LoginPacket_Dtor(v41);
            goto LABEL_137;
          case 5:
            if ( v45 != 1 )
              goto LABEL_7;
            ItemStructA_InitAlt((char *)v54);
            if ( ItemsAddedPayload_FindEntryByVariantId((_WORD *)v3, *(_DWORD *)(*(_DWORD *)v44 + 8), v54) )
            {
              v11 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 1);
              QuickSlot_SetItem(v11, v48[1], v54[1]);
            }
            goto LABEL_138;
          case 6:
            if ( !v45 || !ItemsAddedPayload_InsertEntriesForVariantIdSet((_WORD *)v3, (int)v43, 0) )
              goto LABEL_7;
            v4 = (unsigned __int16 *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
            v5 = v45;
            v6 = (int ****)v4;
            if ( ItemsAddedPayload_GetRemainingCapacity(v4) >= v5 && sub_6593FFE0(v6, (_DWORD *)v3, (int)v43, 0) )
              goto LABEL_12;
            goto LABEL_40;
          case 8:
            if ( !v45 || !ItemsAddedPayload_InsertEntriesForVariantIdSet((_WORD *)v3, (int)v43, 0) )
              goto LABEL_7;
            if ( !sub_6593F120((_DWORD *)v3, (int)v43) )
              goto LABEL_122;
            goto LABEL_62;
          case 13:
            if ( v45 )
            {
              if ( ItemsAddedPayload_InsertEntriesForVariantIdSet((_WORD *)v3, (int)v43, 0) )
              {
                v8 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
                if ( v8 )
                {
                  unknown_libname_664(v39);
                  sub_65948510(v39);
                  sub_65947720(v39, 30);
                  if ( sub_65940180((int ****)(v8 + 6440), (_DWORD *)v3, (int)v43, v39[0], 0) )
                  {
                    *(_BYTE *)(v3 + 32) = 1;
                    JUMPOUT(0x65890F5E);
                  }
                }
              }
            }
            goto LABEL_7;
          default:
            goto LABEL_7;
        }
        goto LABEL_138;
      case 2:
        switch ( v47 )
        {
          case 1:
            if ( v45 != 1 )
              goto LABEL_7;
            ItemStructA_InitAlt((char *)v54);
            if ( !EquipSlotArray_GetSlot5to16((char *)(v3 + 36), v48[0], *(_DWORD *)(*(_DWORD *)v44 + 8), (char *)v54)
              || !sub_6593FBB0((int ****)v3, (unsigned __int16 *)v54)
              || !EquipSlotArray_RemoveSlot5to16((char *)(v3 + 36), v48[0], v54[0], 0) )
            {
              goto LABEL_7;
            }
            SharedMem_ModifyU16_0x9D((char *)dword_65ABF748, v48[0]);
            v37 = v54[1];
            *(_BYTE *)(v3 + 32) = 1;
            if ( sub_65934330(g_ItemTemplateById, v37) )
              JUMPOUT(0x658924E5);
            goto LABEL_138;
          case 6:
            if ( v45 != 1 )
              goto LABEL_7;
            ItemStructA_InitAlt((char *)v54);
            v16 = (char *)(v3 + 36);
            if ( !EquipSlotArray_GetSlot5to16(v16, v48[0], *(_DWORD *)(*(_DWORD *)v44 + 8), (char *)v54) )
              goto LABEL_7;
            v17 = (int ****)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
            if ( !sub_6593FBB0(v17, (unsigned __int16 *)v54) || !EquipSlotArray_RemoveSlot5to16(v16, v48[0], v54[0], 0) )
              goto LABEL_7;
            SharedMem_ModifyU16_0x9D((char *)dword_65ABF748, v48[0]);
            goto LABEL_13;
          case 8:
            if ( v45 != 1 )
              goto LABEL_7;
            ItemStructA_InitAlt((char *)v54);
            v20 = v48[0];
            v21 = (char *)(v3 + 36);
            if ( !EquipSlotArray_GetSlot5to16(v21, v48[0], *(_DWORD *)(*(_DWORD *)v44 + 8), (char *)v54)
              || !EquipSlotArray_RemoveSlot5to16(v21, v20, v54[0], 0) )
            {
              goto LABEL_7;
            }
            SharedMem_ModifyU16_0x9D((char *)dword_65ABF748, v48[0]);
            goto LABEL_138;
          case 13:
            if ( v45 != 1 )
              goto LABEL_7;
            ItemStructA_InitAlt((char *)v54);
            v18 = (char *)(v3 + 36);
            if ( !EquipSlotArray_GetSlot5to16(v18, v48[0], *(_DWORD *)(*(_DWORD *)v44 + 8), (char *)v54) )
              goto LABEL_7;
            v19 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
            if ( !v19 )
              goto LABEL_7;
            unknown_libname_664(v39);
            sub_65948510(v39);
            sub_65947720(v39, 30);
            v54[4] = v39[0];
            if ( !sub_6593FBB0((int ****)(v19 + 6440), (unsigned __int16 *)v54)
              || !EquipSlotArray_RemoveSlot5to16(v18, v48[0], v54[0], 0) )
            {
              goto LABEL_7;
            }
            SharedMem_ModifyU16_0x9D((char *)dword_65ABF748, v48[0]);
            ProductionWindow_RefreshInputSlots((_DWORD *)v19);
            goto LABEL_138;
          default:
            goto LABEL_7;
        }
      case 3:
        switch ( v47 )
        {
          case 1:
            if ( v45 != 1 )
              goto LABEL_7;
            ItemStructA_InitAlt((char *)v54);
            if ( !EquipSlotArray_GetSlot1to3((char *)(v3 + 612), v48[0], *(_DWORD *)(*(_DWORD *)v44 + 8), (char *)v54)
              || !sub_6593FBB0((int ****)v3, (unsigned __int16 *)v54)
              || !EquipSlotArray_RemoveSlot1to3((char *)(v3 + 612), v48[0], v54[0], 0) )
            {
              goto LABEL_7;
            }
            *(_BYTE *)(v3 + 32) = 1;
            goto LABEL_91;
          case 3:
            if ( !EquipSlotArray_SwapSlot1to3((char *)(v3 + 612), v48[0], v48[1]) )
              goto LABEL_7;
            v30 = *(_BYTE *)(v3 + 756);
            if ( v30 == v48[0] )
              goto LABEL_93;
            v23 = v30 == v48[1];
            break;
          case 6:
            if ( v45 != 1 )
              goto LABEL_7;
            ItemStructA_InitAlt((char *)v54);
            v24 = (char *)(v3 + 612);
            if ( !EquipSlotArray_GetSlot1to3(v24, v48[0], *(_DWORD *)(*(_DWORD *)v44 + 8), (char *)v54) )
              goto LABEL_7;
            v25 = (int ****)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
            if ( !sub_6593FBB0(v25, (unsigned __int16 *)v54) || !EquipSlotArray_RemoveSlot1to3(v24, v48[0], v54[0], 0) )
              goto LABEL_7;
            v26 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
            if ( v26 )
              MarketWindow_RequestItemDetails(v26);
            goto LABEL_91;
          case 8:
            if ( v45 != 1 )
              goto LABEL_7;
            ItemStructA_InitAlt((char *)v54);
            v31 = (char *)(v3 + 612);
            if ( !EquipSlotArray_GetSlot1to3(v31, v48[0], *(_DWORD *)(*(_DWORD *)v44 + 8), (char *)v54) )
              goto LABEL_7;
            if ( !EquipSlotArray_RemoveSlot1to3(v31, v48[0], v54[0], 0) )
              goto LABEL_122;
LABEL_91:
            v22 = SharedMem_ReadDword_this(dword_65ABF75C, 0x303Eu);
            v23 = v22 == LOWORD(v54[1]);
            break;
          case 13:
            if ( v45 != 1 )
              goto LABEL_7;
            ItemStructA_InitAlt((char *)&v49);
            v27 = (char *)(v3 + 612);
            if ( !EquipSlotArray_GetSlot1to3(v27, v48[0], *(_DWORD *)(*(_DWORD *)v44 + 8), (char *)&v49) )
              goto LABEL_7;
            v28 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
            if ( !v28 )
              goto LABEL_7;
            unknown_libname_664(v39);
            sub_65948510(v39);
            sub_65947720(v39, 30);
            v53 = v39[0];
            if ( !sub_6593FBB0((int ****)(v28 + 6440), (unsigned __int16 *)&v49)
              || !EquipSlotArray_RemoveSlot1to3(v27, v48[0], v49, 0) )
            {
              goto LABEL_7;
            }
            ProductionWindow_RefreshInputSlots((_DWORD *)v28);
            v29 = SharedMem_ReadDword_this(dword_65ABF75C, 0x303Eu);
            v23 = v29 == v50;
            break;
          default:
            goto LABEL_7;
        }
        if ( v23 )
LABEL_93:
          SharedMem_WriteU8_std(0x9Cu, 1u);
        goto LABEL_138;
      case 4:
        JUMPOUT(0x65892442);
      case 5:
        v32 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 1);
        if ( v47 != 5 )
        {
          Accessory = EquipSlots_GetAccessory(v32, v48[0]);
          *((_WORD *)Accessory + 2) = 0;
          *((_DWORD *)Accessory + 2) = 0;
          Accessory[12] = 0;
          goto LABEL_138;
        }
        if ( QuickSlot_Swap(v32, v48[0], v48[1]) )
LABEL_138:
          JUMPOUT(0x658919B0);
LABEL_122:
        v55 = -1;
        LoginPacket_Dtor(v41);
        break;
      case 6:
        switch ( v47 )
        {
          case 1:
            if ( !v45 )
              goto LABEL_7;
            v34 = (_WORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
            if ( !ItemsAddedPayload_InsertEntriesForVariantIdSet(v34, (int)v43, 0) )
              goto LABEL_7;
            StatGroup5_GetValue();
            RemainingCapacity = ItemsAddedPayload_GetRemainingCapacity((unsigned __int16 *)v3);
            if ( RemainingCapacity < v45 )
              goto LABEL_7;
            if ( !sub_6593FFE0((int ****)v3, v34, (int)v43, 0) )
              goto LABEL_122;
LABEL_12:
            *(_BYTE *)(v3 + 32) = 1;
LABEL_13:
            v7 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
            if ( v7 )
              MarketWindow_RequestItemDetails(v7);
            break;
          case 2:
            if ( v45 != 1 )
              goto LABEL_7;
            v38 = (_WORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
            ItemStructA_InitAlt((char *)v54);
            if ( !ItemsAddedPayload_FindEntryByVariantId(v38, *(_DWORD *)(*(_DWORD *)v44 + 8), v54) )
              goto LABEL_7;
            if ( ItemTemplate_GetType(g_ItemTemplateById, v54[1]) != 6 )
              JUMPOUT(0x658919C9);
            return sub_65891970((int)&v54[9], a2);
          case 3:
            JUMPOUT(0x65891C30);
          case 8:
            JUMPOUT(0x65891D8D);
          case 13:
            JUMPOUT(0x65891CE9);
          default:
            goto LABEL_7;
        }
        goto LABEL_138;
      case 11:
        JUMPOUT(0x65891DEC);
      case 13:
        JUMPOUT(0x658920F6);
      case 17:
        JUMPOUT(0x65892358);
      default:
        goto LABEL_7;
    }
  }
LABEL_137:
  JUMPOUT(0x6589252D);
}
// 65890E46: positive sp value 1C has been found
// 65890F5A: control flows out of bounds to 65890F5E
// 65890E2E: control flows out of bounds to 65891DEC
// 65890E2E: control flows out of bounds to 658920F6
// 65890E2E: control flows out of bounds to 65892358
// 65890E2E: control flows out of bounds to 65892442
// 6589188C: control flows out of bounds to 65891C30
// 6589188C: control flows out of bounds to 65891CE9
// 6589188C: control flows out of bounds to 65891D8D
// 65890E58: control flows out of bounds to 6589252D
// 65890ED2: control flows out of bounds to 658919B0
// 658910DE: control flows out of bounds to 6589252F
// 658913C5: control flows out of bounds to 658924E5
// 65890DD6: control flows out of bounds to 65892506
// 6589196B: control flows out of bounds to 658919C9
// 65890E53: bad sp value at call
// 658910D4: bad sp value at call
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65891970) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
int __userpurge sub_65891970@<eax>(int a1@<ebp>, int a2)
{
  int v2; // eax
  _BYTE v4[48]; // [esp-30h] [ebp-30h] BYREF

  *(_DWORD *)(a1 - 1276) = v4;
  sub_65941410(v4, 2124);
  v2 = FormatString(a1 - 1304, (int)"CNetworkMgrClient::HandlePacket_ID_MOVE_ITEMS: Line {0}");
  *(_BYTE *)(a1 - 4) = 1;
  Log_WriteErrorIfEnabled(v2);
  *(_BYTE *)(a1 - 4) = 0;
  std::string::~string((void *)(a1 - 1304));
  *(_DWORD *)(a1 - 4) = -1;
  LoginPacket_Dtor((_DWORD *)(a1 - 1208));
  return 0;
}
// 6589254A: positive sp value 30 has been found

//----- (65892690) --------------------------------------------------------
int __stdcall HandlePacket_ID_A8(int a1)
{
  _BYTE v2[1136]; // [esp+8h] [ebp-480h] BYREF
  int v3; // [esp+484h] [ebp-4h]

  sub_6584B750(v2);
  v3 = 0;
  if ( Packet_ID_CHEMICAL_LAB_read((int)v2, a1) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x2000000);
    SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    v3 = -1;
    sub_6584B8F0(v2);
    return 0;
  }
  else
  {
    v3 = -1;
    sub_6584B8F0(v2);
    return 1;
  }
}
// 6584B750: using guessed type int __thiscall sub_6584B750(_DWORD);
// 6584B8F0: using guessed type int __thiscall sub_6584B8F0(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65892AB0) --------------------------------------------------------
char *__thiscall sub_65892AB0(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -127;
  *(_DWORD *)this = &off_659CEB58;
  *((_DWORD *)this + 271) = LoginUI_GetPasswordPtr();
  *((_DWORD *)this + 272) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CEB58: using guessed type void *off_659CEB58;

//----- (65892D40) --------------------------------------------------------
int __stdcall HandlePacket_ID_ITEMS_REMOVED(int a1)
{
  int Dword_this; // eax
  int v2; // ebx
  int WindowById; // eax
  char *v4; // edi
  unsigned int i; // esi
  int v7; // esi
  int v8; // esi
  _DWORD *v9; // ebx
  unsigned __int16 v10; // si
  char EquipSlot; // al
  int v12; // esi
  const char *v13; // eax
  int v14; // edi
  char *v15; // eax
  int v16[3]; // [esp+10h] [ebp-498h] BYREF
  _DWORD *v17; // [esp+1Ch] [ebp-48Ch]
  char pkt[12]; // [esp+20h] [ebp-488h] BYREF
  unsigned int bitstreamBuf[265]; // [esp+2Ch] [ebp-47Ch] BYREF
  int playerId; // [esp+450h] [ebp-58h] BYREF
  char removeType[4]; // [esp+454h] [ebp-54h] BYREF
  int removedIdList; // [esp+458h] [ebp-50h] BYREF
  _DWORD *removedListHead; // [esp+45Ch] [ebp-4Ch]
  char itemEntryTemp[4]; // [esp+468h] [ebp-40h] BYREF
  int removedItemId; // [esp+46Ch] [ebp-3Ch]
  int v26; // [esp+4A4h] [ebp-4h]

  sub_65892AB0(pkt);
  v26 = 0;
  if ( VariableSizedPacket::Read(pkt, a1)
    && (RakNet::BitStream::ReadCompressed_T_uint(bitstreamBuf, (char *)&playerId),
        RakNet::BitStream::ReadCompressed(bitstreamBuf, removeType, 8u, 1),
        Read_u32c_list_u16count(&removedIdList, bitstreamBuf),
        Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu),
        playerId == Dword_this) )
  {
    switch ( removeType[0] )
    {
      case 1:
        v8 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
        ItemStructA_InitAlt(itemEntryTemp);
        v9 = (_DWORD *)*removedListHead;
        if ( (_DWORD *)*removedListHead != removedListHead )
        {
          v17 = (_DWORD *)(v8 + 36);
          do
          {
            if ( !EquipSlot_RemoveAndCopy(v17, v9[2], itemEntryTemp) )
              break;
            v10 = removedItemId;
            if ( (unsigned __int16)(removedItemId - 1) <= 0xBBFu )
            {
              EquipSlot = ItemTemplate_GetEquipSlot(g_ItemTemplateById, removedItemId);
              SharedMem_ModifyU16_0x9D((char *)dword_65ABF748, EquipSlot);
              v12 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v10 + 30000);
              if ( v12 )
                v13 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v12);
              else
                v13 = byte_659A8B98;
              v14 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4316, v13);
              if ( v14 )
                v15 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v14);
              else
                v15 = (char *)byte_659A8B98;
              FriendList_AddEntry(dword_65ABF748, v15, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
              if ( v12 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v12);
              if ( v14 )
                (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v14);
            }
            v9 = (_DWORD *)*v9;
          }
          while ( v9 != removedListHead );
        }
        break;
      case 3:
        v7 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
        if ( sub_6593F120((_DWORD *)v7, (int)&removedIdList) )
          *(_BYTE *)(v7 + 32) = 1;
        break;
      case 6:
        v2 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
        WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x23u);
        v4 = (char *)WindowById;
        if ( v2 )
        {
          if ( WindowById )
          {
            LinkedList_Init(v16);
            LOBYTE(v26) = 1;
            for ( i = 47; i < 0x33; ++i )
              LockWindow_ProcessInput(v4, i, 0, v16);
            sub_6593FE50((int ****)v2, (int)v16);
            sub_6593F120((_DWORD *)v2, (int)&removedIdList);
            *(_BYTE *)(v2 + 32) = 1;
            LinkedList_DestroyAll((int)v16);
          }
        }
        break;
    }
    v26 = -1;
    LoginUI_SetPassword((int)&removedIdList);
    *(_DWORD *)pkt = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)bitstreamBuf);
    return 0;
  }
  else
  {
    v26 = -1;
    LoginUI_SetPassword((int)&removedIdList);
    *(_DWORD *)pkt = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)bitstreamBuf);
    return 1;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65893060) --------------------------------------------------------
void __thiscall DynamicArray_FreeBuffer(int this)
{
  if ( *(_DWORD *)(this + 4) )
    operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
}

//----- (658931E0) --------------------------------------------------------
int __stdcall HandlePacket_ID_SKILLS(int a1)
{
  void *Dword_this; // eax
  int v3; // eax
  int WindowById; // eax
  void *v5[269]; // [esp+8h] [ebp-480h] BYREF
  char v6; // [esp+43Ch] [ebp-4Ch]
  _BYTE v7[56]; // [esp+440h] [ebp-48h] BYREF
  int v8; // [esp+484h] [ebp-4h]

  Packet_ID_SKILLS_ctor((char *)v5);
  v8 = 0;
  if ( Packet_ID_SKILLS_read((int)v5, a1)
    && (Dword_this = (void *)SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v5[268] == Dword_this) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x20000000);
    if ( v6 == 2 )
    {
      WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Du);
      if ( WindowById )
        SkillWindow_LoadSkill(WindowById, (int)v7);
    }
    else if ( v6 == 7 )
    {
      v3 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
      if ( v3 )
        SkillList_MergeFromList(v3, (int)v7);
    }
    v8 = -1;
    SkillWindow_Dtor(v5);
    return 0;
  }
  else
  {
    v8 = -1;
    SkillWindow_Dtor(v5);
    return 1;
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65893380) --------------------------------------------------------
char **__thiscall PathVector_Init(char **this)
{
  char *v3; // [esp+4h] [ebp-4h] BYREF

  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  sub_65890B10(this, &v3, 0, 0);
  return this;
}

//----- (65893460) --------------------------------------------------------
int (__thiscall ***__thiscall MailUI_AddFriendEntry(char *this, const void *a2))(_DWORD, int)
{
  int v4[9]; // [esp+Ch] [ebp-24h] BYREF

  UiText_SetValueIfChanged(*((_DWORD *)this + 1821), (char *)byte_659A8B98, 0, 0);
  qmemcpy(v4, a2, sizeof(v4));
  if ( !sub_6581B390((_DWORD *)this + 1758, v4[0]) )
    ItemVector36_PushBack((char **)this + 1758, (char *)v4);
  return sub_6585BC50((int)this);
}

//----- (658935F0) --------------------------------------------------------
bool __thiscall Packet_ID_LOGIN_RETURN_Read(Packet_ID_LOGIN_RETURN *this, int packet)
{
  bool ok; // al

  ok = VariableSizedPacket::Read(this, packet);
  if ( ok )
  {
    RakNet::BitStream::ReadCompressed((unsigned int *)&this->base[12], (char *)&this->status, 8u, 1);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)&this->base[12], (char *)&this->playerID);
    if ( this->playerID )
    {
      RakNet::BitStream::ReadCompressed((unsigned int *)&this->base[12], (char *)&this->accountType, 8u, 1);
      VariableSizedPacket::ReadBit((unsigned int *)this->base, (bool *)&this->field4_0x439);
      VariableSizedPacket::ReadBit((unsigned int *)this->base, (bool *)&this->field5_0x43A);
      RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)&this->base[12], (char *)&this->clientVersion);
      VariableSizedPacket::ReadBit((unsigned int *)this->base, (bool *)&this->isBanned);
      if ( this->isBanned
        && (!(*(unsigned __int8 (__thiscall **)(int, unsigned __int8 *, int, unsigned __int8 *))(*(_DWORD *)g_LTClient
                                                                                               + 56))(
               g_LTClient,
               this->banLength,
               2048,
               &this->base[12])
         || !(unsigned __int8)VariableSizedPacket::DecodeString((char *)this, (int)this->banReason)) )
      {
        return 0;
      }
      Read_Vector_U32_Compressed((int **)this + 308, (unsigned int *)&this->base[12]);
      if ( !(*(unsigned __int8 (__thiscall **)(int, char *, int, unsigned __int8 *))(*(_DWORD *)g_LTClient + 56))(
              g_LTClient,
              (char *)this + 1248,
              2048,
              &this->base[12]) )
        return 0;
      Models::Apartment::Read((char *)this + 2276, (unsigned int *)&this->base[12]);
      RakNet::BitStream::ReadCompressed((unsigned int *)&this->base[12], (char *)this + 2272, 8u, 1);
      RakNet::BitStream::ReadCompressed((unsigned int *)&this->base[12], (char *)this + 2940, 8u, 1);
    }
    return 1;
  }
  return ok;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65893740) --------------------------------------------------------
int __thiscall sub_65893740(_BYTE *this, int a2)
{
  void *v3; // eax
  int (*v4)(const char *const, const char *const, ...); // ebx
  int v5; // esi
  unsigned __int8 v6; // al
  int first_of; // eax
  int v8; // eax
  int v9; // eax
  int v10; // edx
  int v11; // eax
  int v12; // edi
  unsigned __int8 v13; // bl
  int v14; // eax
  int v15; // edi
  char *v16; // eax
  const char *v17; // ebx
  char *v18; // eax
  char *v19; // eax
  char *v20; // ecx
  int WindowById; // eax
  int v22; // edi
  const char *v23; // eax
  int v24; // edi
  unsigned __int8 v25; // bl
  const char *v26; // eax
  int v27; // edi
  char *v28; // eax
  int v29; // edi
  char *v30; // eax
  int v31; // edi
  char *v32; // eax
  int v33; // edi
  int v34; // eax
  int v35; // edx
  unsigned __int8 v36; // cl
  int v37; // eax
  int v38; // ebx
  char *v39; // eax
  const char *v40; // edi
  char *v41; // eax
  char *v42; // eax
  int v43; // eax
  const char *v44; // eax
  int v45; // eax
  int v46; // eax
  int v47; // eax
  int v48; // eax
  int v49; // eax
  int v50; // eax
  int v51; // eax
  int v52; // edx
  int v53; // eax
  int v54; // edi
  unsigned __int8 v55; // bl
  int v56; // eax
  int v57; // edi
  char *v58; // eax
  const char *v59; // ebx
  char *v60; // eax
  char *v61; // eax
  char *v62; // ecx
  int v63; // edi
  char *v64; // eax
  int v65; // eax
  int v66; // edi
  int v67; // eax
  int v68; // ebx
  int v69; // eax
  int v70; // ebx
  char *v71; // eax
  char *v72; // eax
  char *v73; // eax
  unsigned int v74; // eax
  int v75; // eax
  int v76; // ebx
  int v77; // edx
  int v78; // eax
  int v79; // edx
  int v80; // eax
  const char *v81; // eax
  int v82; // eax
  int v83; // eax
  int v84; // eax
  const char *v85; // eax
  char v86; // bl
  int v87; // eax
  int (__cdecl *v88)(int, int); // edx
  int v89; // eax
  int v90; // eax
  int v91; // ebx
  int v92; // edi
  int v93; // eax
  int v94; // edi
  char *v95; // eax
  char *v96; // eax
  char *v97; // eax
  int v98; // edi
  int v99; // ebx
  char *v100; // eax
  char *v101; // eax
  char *v102; // eax
  int v103; // edi
  int v104; // eax
  int v105; // edx
  int v106; // eax
  int v107; // eax
  const char *v108; // ebx
  int v109; // eax
  int v110; // edi
  const char *v111; // eax
  int v112; // edi
  unsigned __int8 v113; // bl
  const char *v114; // eax
  int v115; // edi
  char *v116; // eax
  int v117; // edi
  char *v118; // eax
  int v119; // edi
  char *v120; // eax
  int Dword_this; // eax
  int v122; // eax
  const char *v123; // eax
  int v124; // eax
  int v125; // eax
  int v126; // eax
  int v127; // eax
  int v128; // edx
  int v129; // eax
  int v130; // edi
  unsigned __int8 v131; // bl
  int v132; // eax
  int v133; // edi
  char *v134; // eax
  const char *v135; // ebx
  char *v136; // eax
  char *v137; // eax
  int v138; // eax
  int v139; // eax
  int v140; // eax
  int v141; // eax
  int v142; // eax
  int v143; // edx
  int v144; // eax
  int v145; // edi
  unsigned __int8 v146; // bl
  int v147; // eax
  int v148; // edi
  char *v149; // eax
  const char *v150; // ebx
  char *v151; // eax
  char *v152; // eax
  int v153; // eax
  const char *v154; // eax
  int v155; // eax
  int v156; // eax
  int v157; // eax
  int v158; // eax
  int v159; // eax
  int v160; // eax
  int v161; // eax
  int v162; // edx
  int v163; // eax
  int v164; // edi
  unsigned __int8 v165; // bl
  int v166; // eax
  int v167; // edi
  char *v168; // eax
  const char *v169; // ebx
  char *v170; // eax
  char *v171; // eax
  int v172; // edi
  int v173; // ebx
  char v174; // al
  int v175; // edi
  const char *v176; // eax
  int v177; // eax
  unsigned int v178; // edx
  int v179; // eax
  int v180; // eax
  int v181; // edx
  int v182; // eax
  int v183; // edi
  unsigned __int8 v184; // bl
  int v185; // eax
  int v186; // eax
  const char *v187; // ebx
  int v188; // edi
  char *v189; // eax
  char *v190; // eax
  char *v191; // eax
  int v192; // eax
  int v193; // edx
  int v194; // ebx
  int v195; // ecx
  int (__cdecl *v196)(int, int); // eax
  int v197; // edi
  unsigned __int8 v198; // cl
  int v199; // eax
  char *v200; // eax
  char *v201; // eax
  char *v202; // eax
  int v203; // edx
  char *v204; // eax
  char *v205; // eax
  char *v206; // eax
  int v207; // eax
  _BYTE *v208; // esi
  _DWORD v209[2]; // [esp-14h] [ebp-6D0h] BYREF
  int v210; // [esp-Ch] [ebp-6C8h]
  int v211; // [esp-8h] [ebp-6C4h]
  WorldLoginReturnAddrPacked v212; // [esp-4h] [ebp-6C0h]
  const char *v213; // [esp+0h] [ebp-6BCh]
  int v214; // [esp+4h] [ebp-6B8h]
  int v215; // [esp+8h] [ebp-6B4h]
  int v216; // [esp+Ch] [ebp-6B0h]
  _BYTE v217[28]; // [esp+18h] [ebp-6A4h] BYREF
  _BYTE v218[28]; // [esp+34h] [ebp-688h] BYREF
  _BYTE v219[28]; // [esp+50h] [ebp-66Ch] BYREF
  _BYTE v220[28]; // [esp+6Ch] [ebp-650h] BYREF
  _BYTE v221[28]; // [esp+88h] [ebp-634h] BYREF
  _BYTE v222[28]; // [esp+A4h] [ebp-618h] BYREF
  _BYTE v223[28]; // [esp+C0h] [ebp-5FCh] BYREF
  _BYTE v224[28]; // [esp+DCh] [ebp-5E0h] BYREF
  _BYTE v225[28]; // [esp+F8h] [ebp-5C4h] BYREF
  _BYTE v226[28]; // [esp+114h] [ebp-5A8h] BYREF
  _BYTE v227[28]; // [esp+130h] [ebp-58Ch] BYREF
  _DWORD v228[3]; // [esp+14Ch] [ebp-570h] BYREF
  char v229[4]; // [esp+158h] [ebp-564h] BYREF
  int v230; // [esp+15Ch] [ebp-560h]
  int v231; // [esp+160h] [ebp-55Ch]
  int v232; // [esp+168h] [ebp-554h] BYREF
  _BYTE *v233; // [esp+16Ch] [ebp-550h]
  const char *v234; // [esp+170h] [ebp-54Ch] BYREF
  int v235; // [esp+174h] [ebp-548h] BYREF
  const char *v236; // [esp+178h] [ebp-544h] BYREF
  const char *v237; // [esp+17Ch] [ebp-540h] BYREF
  int v238; // [esp+180h] [ebp-53Ch] BYREF
  int v239; // [esp+184h] [ebp-538h] BYREF
  unsigned int v240; // [esp+188h] [ebp-534h] BYREF
  int v241; // [esp+18Ch] [ebp-530h] BYREF
  unsigned int v242; // [esp+190h] [ebp-52Ch] BYREF
  const char *v243; // [esp+194h] [ebp-528h] BYREF
  int v244; // [esp+198h] [ebp-524h] BYREF
  unsigned int v245; // [esp+19Ch] [ebp-520h] BYREF
  int v246; // [esp+1A0h] [ebp-51Ch] BYREF
  int v247; // [esp+1A4h] [ebp-518h] BYREF
  int v248; // [esp+1A8h] [ebp-514h] BYREF
  int v249; // [esp+1ACh] [ebp-510h] BYREF
  int v250; // [esp+1B0h] [ebp-50Ch] BYREF
  int v251; // [esp+1B4h] [ebp-508h]
  const char *v252; // [esp+1B8h] [ebp-504h] BYREF
  unsigned __int8 v253; // [esp+1BEh] [ebp-4FEh]
  unsigned __int8 v254; // [esp+1BFh] [ebp-4FDh] BYREF
  const char *v255; // [esp+1C0h] [ebp-4FCh] BYREF
  unsigned int v256; // [esp+1C4h] [ebp-4F8h] BYREF
  unsigned int v257; // [esp+1C8h] [ebp-4F4h] BYREF
  const char *v258; // [esp+1CCh] [ebp-4F0h] BYREF
  void *v259[270]; // [esp+1D0h] [ebp-4ECh] BYREF
  int v260; // [esp+608h] [ebp-B4h]
  int v261; // [esp+60Ch] [ebp-B0h]
  char v262; // [esp+614h] [ebp-A8h]
  int v263[4]; // [esp+618h] [ebp-A4h] BYREF
  _BYTE v264[28]; // [esp+628h] [ebp-94h] BYREF
  _BYTE v265[20]; // [esp+644h] [ebp-78h] BYREF
  const char *v266; // [esp+658h] [ebp-64h]
  _BYTE v267[8]; // [esp+660h] [ebp-5Ch] BYREF
  char v268[16]; // [esp+668h] [ebp-54h] BYREF
  char v269[16]; // [esp+67Ch] [ebp-40h] BYREF
  char Buffer[4]; // [esp+68Ch] [ebp-30h] BYREF
  char v271[12]; // [esp+690h] [ebp-2Ch] BYREF
  int v272; // [esp+6B8h] [ebp-4h]

  v233 = this;
  sub_6583D9A0((char *)v259);
  v272 = 0;
  if ( Packet_ID_MAIL_read((int)v259, a2)
    && ((*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x4000),
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x4000000),
        v3 = (void *)SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu),
        v259[268] == v3) )
  {
    if ( v262 )
      NetworkMgr_AddPacketToQueue((char *)dword_65ABF73C, (int)v263);
    HIBYTE(v251) = (v261 - v260) / 2120;
    if ( HIBYTE(v251) )
    {
      v253 = 0;
      v4 = sscanf;
      do
      {
        if ( v253 < (unsigned int)((v261 - v260) / 2120) )
        {
          v5 = v260 + 2120 * v253;
          if ( v5 )
          {
            v239 = *(_DWORD *)(v5 + 8);
            v6 = *(_BYTE *)(v5 + 4);
            if ( v6 )
            {
              switch ( v6 )
              {
                case 1u:
                  if ( v4((const char *const)(v5 + 72), "%uX", &v244) != 1 )
                    goto LABEL_328;
                  std::string::string(v265, v5 + 72);
                  LOBYTE(v272) = 1;
                  std::string::string(v267);
                  v214 = (int)v266;
                  LOBYTE(v272) = 2;
                  first_of = std::string::find_first_of(v265, 88, 0);
                  v8 = std::string::substr(v265, v227, first_of + 1, v214);
                  LOBYTE(v272) = 3;
                  std::string::operator=(v267, v8);
                  LOBYTE(v272) = 2;
                  std::string::~string(v227);
                  v9 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                         g_pILTClient,
                         *(unsigned __int8 *)(v5 + 4) + 13100);
                  v10 = *(_DWORD *)g_pILTClient;
                  v258 = (const char *)v9;
                  v11 = (*(int (__cdecl **)(int, int))(v10 + 64))(g_pILTClient, *(unsigned __int8 *)(v5 + 4) + 13200);
                  v12 = *(_DWORD *)g_pILTClient;
                  v13 = *(_BYTE *)(v5 + 4);
                  v255 = (const char *)v11;
                  v14 = std::string::c_str(v267);
                  v15 = (*(int (__cdecl **)(int, int, int, _DWORD, int))(v12 + 64))(
                          g_pILTClient,
                          v13 + 13300,
                          v5 + 12,
                          (unsigned __int16)v244,
                          v14);
                  if ( v258 )
                    v16 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                    g_pILTClient,
                                    v258);
                  else
                    v16 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v16);
                  v17 = v255;
                  if ( v255 )
                    v18 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                    g_pILTClient,
                                    v255);
                  else
                    v18 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v18);
                  if ( v15 )
                    v19 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v15);
                  else
                    v19 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v19);
                  if ( v258 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v258);
                  if ( v17 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v17);
                  if ( v15 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v15);
                  LOBYTE(v272) = 1;
                  v20 = v267;
                  goto LABEL_29;
                case 2u:
                  if ( sub_65948020((const char *)(v5 + 72)) )
                  {
                    v63 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 853);
                    if ( v63 )
                      v64 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v63);
                    else
                      v64 = (char *)byte_659A8B98;
                    SharedMem_WritePassword(v64);
                    if ( v63 )
                      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v63);
                  }
                  else
                  {
                    SharedMem_WritePassword((char *)(v5 + 72));
                  }
                  v65 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
                  if ( v65 )
                    *(_BYTE *)(v65 + 48) = 1;
                  v66 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13100);
                  v67 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13200);
                  v68 = *(_DWORD *)g_pILTClient;
                  v257 = v67;
                  v69 = (*(int (__cdecl **)(int, int, int, int))(v68 + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13300,
                          v5 + 72,
                          v5 + 12);
                  goto LABEL_105;
                case 3u:
                case 4u:
                case 0x18u:
                case 0x19u:
                case 0x1Au:
                  v66 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v6 + 13100);
                  v75 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13200);
                  v76 = v5 + 72;
                  goto LABEL_118;
                case 5u:
                  v66 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v6 + 13100);
                  v78 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13200);
                  v79 = *(_DWORD *)g_pILTClient;
                  v257 = v78;
                  v69 = (*(int (__cdecl **)(int, int, int, int))(v79 + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13300,
                          v5 + 72,
                          v5 + 12);
                  goto LABEL_105;
                case 6u:
                  std::string::string(v267, v5 + 72);
                  LOBYTE(v272) = 5;
                  std::string::string(v271);
                  LOBYTE(v272) = 6;
                  std::string::string(v264);
                  LOBYTE(v272) = 7;
                  v43 = std::string::find_first_of(v267, 45, 0);
                  std::string::substr(v267, v265, 0, v43);
                  LOBYTE(v272) = 8;
                  if ( std::string::c_str(v265) )
                  {
                    v44 = (const char *)std::string::c_str(v265);
                    v256 = atoi(v44);
                  }
                  else
                  {
                    v256 = 0;
                  }
                  v45 = std::string::find_first_of(v267, 45, 0);
                  std::string::erase(v267, 0, v45 + 1);
                  v46 = std::string::find_first_of(v267, 45, 0);
                  v47 = std::string::substr(v267, v217, 0, v46);
                  LOBYTE(v272) = 9;
                  std::string::operator=(v265, v47);
                  LOBYTE(v272) = 8;
                  std::string::~string(v217);
                  std::string::operator=(v271, v265);
                  v48 = std::string::find_first_of(v267, 45, 0);
                  std::string::erase(v267, 0, v48 + 1);
                  v49 = std::string::find_first_of(v267, 45, 0);
                  v50 = std::string::substr(v267, v218, 0, v49);
                  LOBYTE(v272) = 10;
                  std::string::operator=(v265, v50);
                  LOBYTE(v272) = 8;
                  std::string::~string(v218);
                  std::string::operator=(v264, v265);
                  v51 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13100);
                  v52 = *(_DWORD *)g_pILTClient;
                  v258 = (const char *)v51;
                  v53 = (*(int (__cdecl **)(int, int))(v52 + 64))(g_pILTClient, *(unsigned __int8 *)(v5 + 4) + 13200);
                  v54 = *(_DWORD *)g_pILTClient;
                  v55 = *(_BYTE *)(v5 + 4);
                  v255 = (const char *)v53;
                  v214 = std::string::c_str(v264);
                  v213 = (const char *)v256;
                  v56 = std::string::c_str(v271);
                  v57 = (*(int (__cdecl **)(int, int, int))(v54 + 64))(g_pILTClient, v55 + 13300, v56);
                  if ( v258 )
                    v58 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                    g_pILTClient,
                                    v258);
                  else
                    v58 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v58);
                  v59 = v255;
                  if ( v255 )
                    v60 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                    g_pILTClient,
                                    v255);
                  else
                    v60 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v60);
                  if ( v57 )
                    v61 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v57);
                  else
                    v61 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v61);
                  if ( v258 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v258);
                  if ( v59 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v59);
                  if ( v57 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v57);
                  LOBYTE(v272) = 7;
                  std::string::~string(v265);
                  LOBYTE(v272) = 6;
                  std::string::~string(v264);
                  LOBYTE(v272) = 5;
                  v62 = v271;
                  goto LABEL_94;
                case 7u:
                case 8u:
                case 9u:
                  v254 = 0;
                  v256 = 0;
                  if ( v4((const char *const)(v5 + 72), "%uX%u", &v254, &v256) != 2 )
                    goto LABEL_328;
                  v33 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v254 + 3100);
                  v34 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13100);
                  v35 = *(_DWORD *)g_pILTClient;
                  v257 = v34;
                  v255 = (const char *)(*(int (__cdecl **)(int, int))(v35 + 64))(
                                         g_pILTClient,
                                         *(unsigned __int8 *)(v5 + 4) + 13200);
                  if ( v33 )
                    v258 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                           g_pILTClient,
                                           v33);
                  else
                    v258 = byte_659A8B98;
                  v36 = *(_BYTE *)(v5 + 4);
                  v37 = *(_DWORD *)g_pILTClient;
                  v214 = v256;
                  v38 = (*(int (__cdecl **)(int, int, const char *, unsigned int))(v37 + 64))(
                          g_pILTClient,
                          v36 + 13300,
                          v258,
                          v256);
                  if ( v33 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v33);
                  if ( v257 )
                    v39 = (char *)(*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 88))(
                                    g_pILTClient,
                                    v257);
                  else
                    v39 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v39);
                  v40 = v255;
                  if ( v255 )
                    v41 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                    g_pILTClient,
                                    v255);
                  else
                    v41 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v41);
                  if ( v38 )
                    v42 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v38);
                  else
                    v42 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v42);
                  if ( v257 )
                    (*(void (__thiscall **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v257);
                  if ( v40 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v40);
                  if ( v38 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v38);
                  goto LABEL_327;
                case 0xAu:
                  WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 6u);
                  if ( WindowById && !*(_BYTE *)(WindowById + 20455) )
                    goto LABEL_328;
                  v240 = 0;
                  v235 = 0;
                  v238 = 0;
                  v242 = 0;
                  v236 = 0;
                  v234 = 0;
                  if ( v4((const char *const)(v5 + 72), "%uX%uX%uX%uX%uX%u", &v240, &v235, &v238, &v242, &v236, &v234) != 6 )
                    goto LABEL_328;
                  v22 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v238 + 30000);
                  if ( v22 )
                    v23 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                          g_pILTClient,
                                          v22);
                  else
                    v23 = byte_659A8B98;
                  v255 = (const char *)v209;
                  String_AssignFromPtr(v209, (int)v23);
                  FormatString((int)v271, (int)"<font color='FFFFFF00'>{0} </font>");
                  LOBYTE(v272) = 4;
                  if ( v22 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v22);
                  v24 = *(_DWORD *)g_pILTClient;
                  v25 = *(_BYTE *)(v5 + 4);
                  v214 = (int)v236;
                  v213 = v234;
                  v212.flag_pad_ip0 = v242;
                  v211 = v235;
                  v210 = std::string::c_str(v271);
                  v209[1] = v5 + 12;
                  v26 = sub_65955B50(v240);
                  v27 = (*(int (__cdecl **)(int, int, const char *))(v24 + 64))(g_pILTClient, v25 + 13300, v26);
                  if ( v27 )
                    v28 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v27);
                  else
                    v28 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v28);
                  if ( v27 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v27);
                  v29 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13100);
                  if ( v29 )
                    v30 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v29);
                  else
                    v30 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v30);
                  if ( v29 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v29);
                  v31 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13200);
                  if ( v31 )
                    v32 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v31);
                  else
                    v32 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v32);
                  if ( v31 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v31);
                  goto LABEL_53;
                case 0xBu:
                  std::string::string(v267, v5 + 72);
                  LOBYTE(v272) = 11;
                  v80 = std::string::find_first_of(v267, 88, 0);
                  std::string::substr(v267, v265, 0, v80);
                  LOBYTE(v272) = 12;
                  if ( std::string::c_str(v265) )
                  {
                    v81 = (const char *)std::string::c_str(v265);
                    v250 = atoi(v81);
                  }
                  else
                  {
                    v250 = 0;
                  }
                  v82 = std::string::find_first_of(v267, 88, 0);
                  std::string::erase(v267, 0, v82 + 1);
                  v83 = std::string::find_first_of(v267, 88, 0);
                  v84 = std::string::substr(v267, v224, 0, v83);
                  LOBYTE(v272) = 13;
                  std::string::operator=(v265, v84);
                  LOBYTE(v272) = 12;
                  std::string::~string(v224);
                  if ( std::string::c_str(v265) )
                  {
                    v85 = (const char *)std::string::c_str(v265);
                    v86 = atoi(v85);
                  }
                  else
                  {
                    v86 = 0;
                  }
                  v87 = std::string::find_first_of(v267, 88, 0);
                  std::string::erase(v267, 0, v87 + 1);
                  v88 = *(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64);
                  if ( v86 == 2 )
                    v214 = 948;
                  else
                    v214 = 947;
                  v258 = (const char *)v88(g_pILTClient, v214);
                  v89 = std::string::find_first_of(v267, 88, 0);
                  v90 = std::string::substr(v267, v220, 0, v89);
                  LOBYTE(v272) = 14;
                  std::string::operator=(v265, v90);
                  LOBYTE(v272) = 12;
                  std::string::~string(v220);
                  v91 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13100);
                  v257 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13200);
                  if ( v258 )
                    v256 = (*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v258);
                  else
                    v256 = (unsigned int)byte_659A8B98;
                  v92 = *(_DWORD *)g_pILTClient;
                  v254 = *(_BYTE *)(v5 + 4);
                  v93 = std::string::c_str(v265);
                  v94 = (*(int (__cdecl **)(int, int, int, unsigned int, int))(v92 + 64))(
                          g_pILTClient,
                          v254 + 13300,
                          v250,
                          v256,
                          v93);
                  if ( v91 )
                    v95 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v91);
                  else
                    v95 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v95);
                  if ( v257 )
                    v96 = (char *)(*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 88))(
                                    g_pILTClient,
                                    v257);
                  else
                    v96 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v96);
                  if ( v94 )
                    v97 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v94);
                  else
                    v97 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v97);
                  if ( v91 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v91);
                  if ( v257 )
                    (*(void (__thiscall **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v257);
                  if ( v94 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v94);
                  if ( v258 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v258);
                  LOBYTE(v272) = 11;
                  v62 = v265;
LABEL_94:
                  std::string::~string(v62);
                  LOBYTE(v272) = 0;
                  std::string::~string(v267);
                  goto LABEL_327;
                case 0xCu:
                case 0xEu:
                  v98 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v6 + 13100);
                  v99 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13200);
                  v258 = (const char *)(*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                                         g_pILTClient,
                                         *(unsigned __int8 *)(v5 + 4) + 13300);
                  if ( v98 )
                    v100 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v98);
                  else
                    v100 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v100);
                  if ( v99 )
                    v101 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v99);
                  else
                    v101 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v101);
                  if ( v258 )
                    v102 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                     g_pILTClient,
                                     v258);
                  else
                    v102 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v102);
                  if ( v98 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v98);
                  if ( v99 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v99);
                  if ( v258 )
                    (*(void (__stdcall **)(const char *))(*(_DWORD *)g_pILTClient + 76))(v258);
                  goto LABEL_327;
                case 0xDu:
                  if ( v4((const char *const)(v5 + 72), "%u", &v232) != 1 )
                    goto LABEL_328;
                  v66 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13100);
                  v75 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13200);
                  v76 = v232;
LABEL_118:
                  v77 = *(_DWORD *)g_pILTClient;
                  v257 = v75;
                  v69 = (*(int (__cdecl **)(int, int, int))(v77 + 64))(
                          g_pILTClient,
                          *(unsigned __int8 *)(v5 + 4) + 13300,
                          v76);
LABEL_105:
                  v70 = v69;
                  if ( v66 )
                    v71 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v66);
                  else
                    v71 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v71);
                  if ( v257 )
                    v72 = (char *)(*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 88))(
                                    g_pILTClient,
                                    v257);
                  else
                    v72 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v72);
                  if ( v70 )
                    v73 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v70);
                  else
                    v73 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v73);
                  if ( v66 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v66);
                  v74 = v257;
                  goto LABEL_323;
                case 0xFu:
                  v258 = 0;
                  v257 = 0;
                  v255 = 0;
                  v252 = 0;
                  v249 = 0;
                  v250 = 0;
                  if ( v4(
                         (const char *const)(v5 + 72),
                         "%uX%uX%uX%uX%uX%uX%uX%u",
                         &v258,
                         &v257,
                         &v255,
                         &v252,
                         &v249,
                         &v250,
                         v215,
                         v216) != 6 )
                    goto LABEL_328;
                  unknown_libname_664(&v246);
                  v246 = v239;
                  sub_65947180(&v246, 1);
                  sub_65948350(Buffer, &v246);
                  sub_657CC060(dword_65ABF748, v268, (WorldLoginReturnAddrPacked)20);
                  if ( v257 )
                  {
                    v256 = v257;
                    sprintf(v269, "%.2f", (double)(unsigned int)v258 / (double)v257 * 100.0);
                  }
                  else
                  {
                    strncpy_s(v269, 0x10u, "0", 0xFFFFFFFF);
                  }
                  v103 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13100);
                  v104 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13200);
                  v210 = v250;
                  v105 = *(_DWORD *)g_pILTClient;
                  v256 = v104;
                  v106 = (*(int (__cdecl **)(int, int, char *, const char *, const char *, int, char *, const char *, unsigned int, char *, int))(v105 + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13300,
                           Buffer,
                           v255,
                           v252,
                           v249,
                           v268,
                           v258,
                           v257,
                           v269,
                           v250);
                  goto LABEL_311;
                case 0x10u:
                  v255 = 0;
                  if ( v4((const char *const)(v5 + 72), "%u", &v255) != 1 )
                    goto LABEL_328;
                  v103 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13100);
                  v107 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13200);
                  v108 = v255;
                  goto LABEL_310;
                case 0x11u:
                  v109 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 6u);
                  if ( v109 && !*(_BYTE *)(v109 + 20455) )
                    goto LABEL_328;
                  v245 = 0;
                  v241 = 0;
                  v237 = 0;
                  v243 = 0;
                  if ( v4((const char *const)(v5 + 72), "%uX%uX%uX%u", &v245, &v241, &v237, &v243) != 4 )
                    goto LABEL_328;
                  v110 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v241 + 30000);
                  if ( v110 )
                    v111 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                           g_pILTClient,
                                           v110);
                  else
                    v111 = byte_659A8B98;
                  v255 = (const char *)v209;
                  String_AssignFromPtr(v209, (int)v111);
                  FormatString((int)v271, (int)"<font color='FFFFFF00'>{0} </font>");
                  LOBYTE(v272) = 15;
                  if ( v110 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v110);
                  v112 = *(_DWORD *)g_pILTClient;
                  v113 = *(_BYTE *)(v5 + 4);
                  v214 = (int)v243;
                  v213 = v237;
                  v212.flag_pad_ip0 = std::string::c_str(v271);
                  v114 = sub_65955B50(v245);
                  v115 = (*(int (__cdecl **)(int, int, const char *))(v112 + 64))(g_pILTClient, v113 + 13300, v114);
                  if ( v115 )
                    v116 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v115);
                  else
                    v116 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v116);
                  if ( v115 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v115);
                  v117 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13100);
                  if ( v117 )
                    v118 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v117);
                  else
                    v118 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v118);
                  if ( v117 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v117);
                  v119 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13200);
                  if ( v119 )
                    v120 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v119);
                  else
                    v120 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v120);
                  if ( v119 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v119);
                  Dword_this = SharedMem_ReadDword_this(dword_65ABF73C, 0);
                  if ( v245 == Dword_this )
                    *((_BYTE *)dword_65ABF738 + 4) = 1;
LABEL_53:
                  LOBYTE(v272) = 0;
                  std::string::~string(v271);
                  goto LABEL_327;
                case 0x12u:
                case 0x13u:
                case 0x14u:
                case 0x15u:
                case 0x1Eu:
                  std::string::string(v265, v5 + 72);
                  LOBYTE(v272) = 16;
                  std::string::string(v271);
                  LOBYTE(v272) = 17;
                  v122 = std::string::find_first_of(v265, 45, 0);
                  std::string::substr(v265, v267, 0, v122);
                  LOBYTE(v272) = 18;
                  if ( std::string::c_str(v267) )
                  {
                    v123 = (const char *)std::string::c_str(v267);
                    v255 = (const char *)atoi(v123);
                  }
                  else
                  {
                    v255 = 0;
                  }
                  v124 = std::string::find_first_of(v265, 45, 0);
                  std::string::erase(v265, 0, v124 + 1);
                  v125 = std::string::find_first_of(v265, 45, 0);
                  v126 = std::string::substr(v265, v222, 0, v125);
                  LOBYTE(v272) = 19;
                  std::string::operator=(v267, v126);
                  LOBYTE(v272) = 18;
                  std::string::~string(v222);
                  std::string::operator=(v271, v267);
                  v127 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13100);
                  v128 = *(_DWORD *)g_pILTClient;
                  v258 = (const char *)v127;
                  v129 = (*(int (__cdecl **)(int, int))(v128 + 64))(g_pILTClient, *(unsigned __int8 *)(v5 + 4) + 13200);
                  v130 = *(_DWORD *)g_pILTClient;
                  v131 = *(_BYTE *)(v5 + 4);
                  v252 = (const char *)v129;
                  v132 = std::string::c_str(v271);
                  v133 = (*(int (__cdecl **)(int, int, const char *, int))(v130 + 64))(
                           g_pILTClient,
                           v131 + 13300,
                           v255,
                           v132);
                  if ( v258 )
                    v134 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                     g_pILTClient,
                                     v258);
                  else
                    v134 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v134);
                  v135 = v252;
                  if ( v252 )
                    v136 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                     g_pILTClient,
                                     v252);
                  else
                    v136 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v136);
                  if ( v133 )
                    v137 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v133);
                  else
                    v137 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v137);
                  if ( v258 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v258);
                  if ( v135 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v135);
                  if ( v133 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v133);
                  LOBYTE(v272) = 17;
                  std::string::~string(v267);
                  LOBYTE(v272) = 16;
                  v20 = v271;
                  goto LABEL_29;
                case 0x16u:
                  std::string::string(v265, v5 + 72);
                  LOBYTE(v272) = 20;
                  std::string::string(v264);
                  LOBYTE(v272) = 21;
                  std::string::string(v271);
                  LOBYTE(v272) = 22;
                  v138 = std::string::find_first_of(v265, 45, 0);
                  std::string::substr(v265, v267, 0, v138);
                  LOBYTE(v272) = 23;
                  std::string::operator=(v264, v267);
                  v139 = std::string::find_first_of(v265, 45, 0);
                  std::string::erase(v265, 0, v139 + 1);
                  v140 = std::string::find_first_of(v265, 45, 0);
                  v141 = std::string::substr(v265, v226, 0, v140);
                  LOBYTE(v272) = 24;
                  std::string::operator=(v267, v141);
                  LOBYTE(v272) = 23;
                  std::string::~string(v226);
                  std::string::operator=(v271, v267);
                  v142 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13100);
                  v143 = *(_DWORD *)g_pILTClient;
                  v258 = (const char *)v142;
                  v144 = (*(int (__cdecl **)(int, int))(v143 + 64))(g_pILTClient, *(unsigned __int8 *)(v5 + 4) + 13200);
                  v145 = *(_DWORD *)g_pILTClient;
                  v146 = *(_BYTE *)(v5 + 4);
                  v255 = (const char *)v144;
                  v214 = std::string::c_str(v271);
                  v147 = std::string::c_str(v264);
                  v148 = (*(int (__cdecl **)(int, int, int))(v145 + 64))(g_pILTClient, v146 + 13300, v147);
                  if ( v258 )
                    v149 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                     g_pILTClient,
                                     v258);
                  else
                    v149 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v149);
                  v150 = v255;
                  if ( v255 )
                    v151 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                     g_pILTClient,
                                     v255);
                  else
                    v151 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v151);
                  if ( v148 )
                    v152 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v148);
                  else
                    v152 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v152);
                  if ( v258 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v258);
                  if ( v150 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v150);
                  if ( v148 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v148);
                  LOBYTE(v272) = 22;
                  std::string::~string(v267);
                  LOBYTE(v272) = 21;
                  std::string::~string(v271);
                  LOBYTE(v272) = 20;
                  v20 = v264;
LABEL_29:
                  std::string::~string(v20);
                  LOBYTE(v272) = 0;
                  std::string::~string(v265);
                  goto LABEL_327;
                case 0x17u:
                  std::string::string(v267, v5 + 72);
                  LOBYTE(v272) = 25;
                  std::string::string(v264);
                  LOBYTE(v272) = 26;
                  std::string::string(v271);
                  LOBYTE(v272) = 27;
                  v153 = std::string::find_first_of(v267, 45, 0);
                  std::string::substr(v267, v265, 0, v153);
                  LOBYTE(v272) = 28;
                  if ( std::string::c_str(v265) )
                  {
                    v154 = (const char *)std::string::c_str(v265);
                    v255 = (const char *)atoi(v154);
                  }
                  else
                  {
                    v255 = 0;
                  }
                  v155 = std::string::find_first_of(v267, 45, 0);
                  std::string::erase(v267, 0, v155 + 1);
                  v156 = std::string::find_first_of(v267, 45, 0);
                  v157 = std::string::substr(v267, v225, 0, v156);
                  LOBYTE(v272) = 29;
                  std::string::operator=(v265, v157);
                  LOBYTE(v272) = 28;
                  std::string::~string(v225);
                  std::string::operator=(v264, v265);
                  v158 = std::string::find_first_of(v267, 45, 0);
                  std::string::erase(v267, 0, v158 + 1);
                  v159 = std::string::find_first_of(v267, 45, 0);
                  v160 = std::string::substr(v267, v223, 0, v159);
                  LOBYTE(v272) = 30;
                  std::string::operator=(v265, v160);
                  LOBYTE(v272) = 28;
                  std::string::~string(v223);
                  std::string::operator=(v271, v265);
                  v161 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13100);
                  v162 = *(_DWORD *)g_pILTClient;
                  v258 = (const char *)v161;
                  v163 = (*(int (__cdecl **)(int, int))(v162 + 64))(g_pILTClient, *(unsigned __int8 *)(v5 + 4) + 13200);
                  v164 = *(_DWORD *)g_pILTClient;
                  v165 = *(_BYTE *)(v5 + 4);
                  v252 = (const char *)v163;
                  v214 = (int)v255;
                  v213 = (const char *)std::string::c_str(v264);
                  v166 = std::string::c_str(v271);
                  v167 = (*(int (__cdecl **)(int, int, int))(v164 + 64))(g_pILTClient, v165 + 13300, v166);
                  if ( v258 )
                    v168 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                     g_pILTClient,
                                     v258);
                  else
                    v168 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v168);
                  v169 = v252;
                  if ( v252 )
                    v170 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                     g_pILTClient,
                                     v252);
                  else
                    v170 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v170);
                  if ( v167 )
                    v171 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v167);
                  else
                    v171 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v171);
                  if ( v258 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v258);
                  if ( v169 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v169);
                  if ( v167 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v167);
                  LOBYTE(v272) = 27;
                  std::string::~string(v265);
                  LOBYTE(v272) = 26;
                  std::string::~string(v271);
                  LOBYTE(v272) = 25;
                  std::string::~string(v264);
                  LOBYTE(v272) = 0;
                  std::string::~string(v267);
                  goto LABEL_327;
                case 0x1Bu:
                  PathVector_Init((char **)v229);
                  LOBYTE(v272) = 31;
                  sub_65971FC0((const char *)(v5 + 72), v229);
                  std::string::string(v265);
                  LOBYTE(v272) = 32;
                  LinkedList_Init(v228);
                  v172 = v230;
                  LOBYTE(v272) = 33;
                  v256 = 0;
                  if ( (v231 - v230) / 56 )
                  {
                    v173 = 0;
                    do
                    {
                      v174 = *(_BYTE *)(v172 + v173);
                      if ( v174 == 105 )
                      {
                        v175 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                                 g_pILTClient,
                                 *(unsigned __int16 *)(v172 + v173 + 8) + 30000);
                        if ( v175 )
                          v176 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                                 g_pILTClient,
                                                 v175);
                        else
                          v176 = byte_659A8B98;
                        v255 = (const char *)v209;
                        String_AssignFromPtr(v209, (int)v176);
                        v177 = FormatString((int)v221, (int)"{0}\r");
                        LOBYTE(v272) = 34;
                        std::string::operator+=(v265, v177);
                        LOBYTE(v272) = 33;
                        std::string::~string(v221);
                        if ( v175 )
                          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v175);
                      }
                      else if ( v174 == 99 )
                      {
                        v178 = *(_DWORD *)(v172 + v173 + 52);
                        v255 = (const char *)v209;
                        String_FromU32(v209, v178);
                        v179 = FormatString((int)v219, (int)"{0} UC\r");
                        LOBYTE(v272) = 35;
                        std::string::operator+=(v265, v179);
                        LOBYTE(v272) = 33;
                        std::string::~string(v219);
                      }
                      else
                      {
                        std::string::operator+=(v265, "Error: Please contact http://support.faceofmankind.com!\r");
                      }
                      v172 = v230;
                      ++v256;
                      v173 += 56;
                    }
                    while ( v256 < (v231 - v230) / 56 );
                  }
                  v180 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13100);
                  v181 = *(_DWORD *)g_pILTClient;
                  v255 = (const char *)v180;
                  v182 = (*(int (__cdecl **)(int, int))(v181 + 64))(g_pILTClient, *(unsigned __int8 *)(v5 + 4) + 13200);
                  v183 = *(_DWORD *)g_pILTClient;
                  v184 = *(_BYTE *)(v5 + 4);
                  v256 = v182;
                  v185 = std::string::c_str(v265);
                  v186 = (*(int (__cdecl **)(int, int, int))(v183 + 64))(g_pILTClient, v184 + 13300, v185);
                  v187 = v255;
                  v188 = v186;
                  if ( v255 )
                    v189 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                     g_pILTClient,
                                     v255);
                  else
                    v189 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v189);
                  if ( v256 )
                    v190 = (char *)(*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 88))(
                                     g_pILTClient,
                                     v256);
                  else
                    v190 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v190);
                  if ( v188 )
                    v191 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v188);
                  else
                    v191 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v191);
                  if ( v187 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v187);
                  if ( v256 )
                    (*(void (__thiscall **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v256);
                  if ( v188 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v188);
                  LinkedList_DestroyAll((int)v228);
                  LOBYTE(v272) = 31;
                  std::string::~string(v265);
                  LOBYTE(v272) = 0;
                  DynamicArray_FreeBuffer((int)v229);
                  goto LABEL_327;
                case 0x1Du:
                  v248 = 0;
                  v247 = 0;
                  if ( v4((const char *const)(v5 + 72), "%uX%u", &v248, &v247) != 2 || !v247 )
                    goto LABEL_328;
                  if ( !v248 )
                    v248 = 3;
                  v192 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13100);
                  v193 = *(_DWORD *)g_pILTClient;
                  v258 = (const char *)v192;
                  v257 = (*(int (__cdecl **)(int, int))(v193 + 64))(g_pILTClient, *(unsigned __int8 *)(v5 + 4) + 13200);
                  v194 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v248 + 1450);
                  v195 = *(_DWORD *)g_pILTClient;
                  v209[0] = v247 + 1450;
                  v196 = *(int (__cdecl **)(int, int))(v195 + 64);
                  v249 = v194;
                  v197 = v196(g_pILTClient, v247 + 1450);
                  if ( v197 )
                    v255 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                           g_pILTClient,
                                           v197);
                  else
                    v255 = byte_659A8B98;
                  if ( v194 )
                    v252 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                           g_pILTClient,
                                           v194);
                  else
                    v252 = byte_659A8B98;
                  v198 = *(_BYTE *)(v5 + 4);
                  v199 = *(_DWORD *)g_pILTClient;
                  v214 = (int)v255;
                  v70 = (*(int (__cdecl **)(int, int, const char *, const char *))(v199 + 64))(
                          g_pILTClient,
                          v198 + 13300,
                          v252,
                          v255);
                  if ( v258 )
                    v200 = (char *)(*(int (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 88))(
                                     g_pILTClient,
                                     v258);
                  else
                    v200 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v200);
                  if ( v257 )
                    v201 = (char *)(*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 88))(
                                     g_pILTClient,
                                     v257);
                  else
                    v201 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v201);
                  if ( v70 )
                    v202 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v70);
                  else
                    v202 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v202);
                  if ( v249 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v249);
                  if ( v197 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v197);
                  if ( v258 )
                    (*(void (__thiscall **)(int, const char *))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v258);
                  if ( v257 )
                    (*(void (__stdcall **)(unsigned int))(*(_DWORD *)g_pILTClient + 76))(v257);
                  break;
                default:
                  v103 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v6 + 13100);
                  v107 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13200);
                  v108 = (const char *)(v5 + 72);
LABEL_310:
                  v203 = *(_DWORD *)g_pILTClient;
                  v256 = v107;
                  v106 = (*(int (__cdecl **)(int, int, int, const char *))(v203 + 64))(
                           g_pILTClient,
                           *(unsigned __int8 *)(v5 + 4) + 13300,
                           v5 + 12,
                           v108);
LABEL_311:
                  v70 = v106;
                  if ( v103 )
                    v204 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v103);
                  else
                    v204 = (char *)byte_659A8B98;
                  PlayerInfo_SetName((char *)v5, v204);
                  if ( v256 )
                    v205 = (char *)(*(int (__thiscall **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 88))(
                                     g_pILTClient,
                                     v256);
                  else
                    v205 = (char *)byte_659A8B98;
                  PlayerInfo_SetGuildName((char *)v5, v205);
                  if ( v70 )
                    v206 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v70);
                  else
                    v206 = (char *)byte_659A8B98;
                  PlayerInfo_SetDescription((char *)v5, v206);
                  if ( v103 )
                    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v103);
                  v74 = v256;
LABEL_323:
                  if ( v74 )
                    (*(void (__stdcall **)(unsigned int))(*(_DWORD *)g_pILTClient + 76))(v74);
                  break;
              }
              if ( v70 )
                (*(void (__stdcall **)(int))(*(_DWORD *)g_pILTClient + 76))(v70);
            }
LABEL_327:
            v207 = *(_DWORD *)v5;
            v214 = v5 + 72;
            v213 = (const char *)(v5 + 32);
            v212.flag_pad_ip0 = v5 + 12;
            v208 = v233;
            Mail_SaveToFile((int)(v233 + 8), v207, &v239, v212, v213, (const char *)v214);
            v4 = sscanf;
            v208[1884028] = 1;
            v208[1884029] = 1;
          }
        }
LABEL_328:
        ++v253;
      }
      while ( v253 < HIBYTE(v251) );
    }
    v272 = -1;
    sub_6583D6A0(v259);
    return 0;
  }
  else
  {
    v272 = -1;
    sub_6583D6A0(v259);
    return 1;
  }
}
// 65893839: conditional instruction was optimized away because al.1!=0
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 659A8248: using guessed type int __thiscall std::string::find_first_of(_DWORD, _DWORD, _DWORD);
// 659A824C: using guessed type int __thiscall std::string::substr(_DWORD, _DWORD, _DWORD, _DWORD);
// 659A8250: using guessed type int __thiscall std::string::erase(_DWORD, _DWORD, _DWORD);
// 659A8274: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A8288: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (65895A00) --------------------------------------------------------
int __stdcall HandlePacket_ID_PRODUCTION(int a1)
{
  int Dword_this; // eax
  int WindowById; // eax
  _DWORD v4[269]; // [esp+8h] [ebp-4F0h] BYREF
  char v5; // [esp+43Ch] [ebp-BCh]
  _BYTE v6[20]; // [esp+4D4h] [ebp-24h] BYREF
  int v7; // [esp+4F4h] [ebp-4h]

  Packet_ID_PRODUCTION_ctor((char *)v4);
  v7 = 0;
  if ( Packet_ID_PRODUCTION_read((int)v4, a1)
    && v5 == 2
    && (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), Dword_this == v4[268]) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 16);
    WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x15u);
    if ( WindowById )
      sub_65861390(WindowById, v6);
    v7 = -1;
    Packet_ID_PRODUCTION_cleanup(v4);
    return 0;
  }
  else
  {
    v7 = -1;
    Packet_ID_PRODUCTION_cleanup(v4);
    return 1;
  }
}
// 65861390: using guessed type int __thiscall sub_65861390(_DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65895AF0) --------------------------------------------------------
int __stdcall HandlePacket_ID_MARKET(int a1)
{
  int Dword_this; // eax
  int WindowById; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // eax
  char v11[1072]; // [esp+8h] [ebp-598h] BYREF
  int v12; // [esp+438h] [ebp-168h]
  char v13; // [esp+43Ch] [ebp-164h]
  int v14; // [esp+460h] [ebp-140h]
  _DWORD v15[4]; // [esp+485h] [ebp-11Bh] BYREF
  _BYTE v16[48]; // [esp+498h] [ebp-108h] BYREF
  _BYTE v17[44]; // [esp+4C8h] [ebp-D8h] BYREF
  _BYTE v18[96]; // [esp+4F4h] [ebp-ACh] BYREF
  int v19; // [esp+554h] [ebp-4Ch]
  _BYTE v20[28]; // [esp+55Ch] [ebp-44h] BYREF
  _BYTE v21[24]; // [esp+578h] [ebp-28h] BYREF
  int v22; // [esp+59Ch] [ebp-4h]

  Packet_ID_MARKET_ctor(v11);
  v22 = 0;
  if ( Packet_ID_MARKET_read((int)v11, a1)
    && (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v12 == Dword_this) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2);
    switch ( v13 )
    {
      case 1:
        WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x16u);
        if ( WindowById )
          sub_6584FC80(WindowById, (char *)v15 + 3, v14, v15[0], v18);
        break;
      case 3:
        v4 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x16u);
        if ( v4 )
          sub_65850140(v4, v16, v14, v15[0], v18);
        break;
      case 5:
        v5 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
        if ( v5 )
          sub_6586B710(v5, v17);
        break;
      case 10:
        v6 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x26u);
        if ( v6 )
          sub_65858AF0(v6, v18, v19);
        GameMode_SetModeFour((int *)dword_65ABF6F4, 0x26u);
        break;
      case 13:
        v7 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x27u);
        if ( v7 )
          sub_65854B70(v7, v20, v14, v15[0]);
        break;
      case 19:
        v8 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x36u);
        if ( v8 )
          sub_65856FF0(v8, v21, v14, v15[0]);
        break;
      case 22:
        v9 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x46u);
        if ( v9 )
          sub_65872A80(v9, (char *)v15 + 3, v14, v15[0]);
        break;
      case 24:
        v10 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x46u);
        if ( v10 )
          sub_65872F30(v10, v16, v14, v15[0]);
        break;
      default:
        break;
    }
    v22 = -1;
    Packet_ID_AC_dtor(v11);
    return 0;
  }
  else
  {
    v22 = -1;
    Packet_ID_AC_dtor(v11);
    return 1;
  }
}
// 6584FC80: using guessed type int __thiscall sub_6584FC80(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 65850140: using guessed type int __thiscall sub_65850140(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 65854B70: using guessed type int __thiscall sub_65854B70(_DWORD, _DWORD, _DWORD, _DWORD);
// 65856FF0: using guessed type int __thiscall sub_65856FF0(_DWORD, _DWORD, _DWORD, _DWORD);
// 65858AF0: using guessed type int __thiscall sub_65858AF0(_DWORD, _DWORD, _DWORD);
// 6586B710: using guessed type int __thiscall sub_6586B710(_DWORD, _DWORD);
// 65872A80: using guessed type int __thiscall sub_65872A80(_DWORD, _DWORD, _DWORD, _DWORD);
// 65872F30: using guessed type int __thiscall sub_65872F30(_DWORD, _DWORD, _DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65895DA0) --------------------------------------------------------
int __stdcall HandlePacket_MINING(int a1)
{
  int Dword_this; // eax
  int *WindowById; // eax
  int *v4; // eax
  void *v5[3]; // [esp+Ch] [ebp-460h] BYREF
  _BYTE v6[1060]; // [esp+18h] [ebp-454h] BYREF
  int v7; // [esp+43Ch] [ebp-30h]
  char v8; // [esp+440h] [ebp-2Ch]
  _BYTE v9[4]; // [esp+44Ch] [ebp-20h] BYREF
  void *v10; // [esp+450h] [ebp-1Ch]
  int v11; // [esp+454h] [ebp-18h]
  int v12; // [esp+458h] [ebp-14h]
  int v13; // [esp+468h] [ebp-4h]

  Packet_ID_MINING_Ctor((char *)v5);
  v13 = 0;
  if ( Packet_ID_MINING_read((int)v5, a1) )
  {
    Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    if ( v7 == Dword_this )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4);
      if ( v8 == 1 )
      {
        WindowById = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 3u);
        if ( WindowById )
          StatusBar_UpdateDisplay(WindowById, (int)v9);
        v4 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x28u);
        if ( v4 )
          MineralScanner_UpdateTextPosition(v4);
      }
      v13 = -1;
      Packet_ID_MINING_free(v5);
      return 0;
    }
    else
    {
      v13 = -1;
      Packet_ID_MINING_free(v5);
      return 1;
    }
  }
  else
  {
    v13 = -1;
    if ( v10 )
      operator delete(v10);
    v10 = 0;
    v11 = 0;
    v12 = 0;
    v5[0] = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v6);
    return 1;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65895EE0) --------------------------------------------------------
int __stdcall HandlePacket_ID_AC(int a1)
{
  int Dword_this; // eax
  int v3; // eax
  int *v4; // eax
  int v5; // eax
  int WindowById; // eax
  _DWORD v7[3]; // [esp+Ch] [ebp-690h] BYREF
  _BYTE v8[1060]; // [esp+18h] [ebp-684h] BYREF
  int v9; // [esp+43Ch] [ebp-260h]
  char v10; // [esp+440h] [ebp-25Ch]
  int v11; // [esp+444h] [ebp-258h]
  __int16 v12; // [esp+458h] [ebp-244h]
  _BYTE v13[376]; // [esp+45Ch] [ebp-240h] BYREF
  _BYTE v14[4]; // [esp+5D4h] [ebp-C8h] BYREF
  void *v15; // [esp+5D8h] [ebp-C4h]
  int v16; // [esp+5DCh] [ebp-C0h]
  int v17; // [esp+5E0h] [ebp-BCh]
  int v18; // [esp+62Ch] [ebp-70h]
  unsigned int Value; // [esp+630h] [ebp-6Ch]
  int v20; // [esp+634h] [ebp-68h]
  int v21; // [esp+638h] [ebp-64h]
  int v22[12]; // [esp+63Ch] [ebp-60h] BYREF
  int v23; // [esp+66Ch] [ebp-30h] BYREF
  int v24; // [esp+698h] [ebp-4h]

  Packet_ID_DEPLOY_ITEM_ctor(v7);
  v24 = 0;
  if ( Packet_ID_DEPLOY_ITEM_read((int)v7, a1) )
  {
    Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    if ( v9 == Dword_this )
    {
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      if ( v10 == 3 )
      {
        switch ( v12 )
        {
          case 501:
            WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x4Fu);
            if ( WindowById )
              sub_6587D520(WindowById, v11, v23, v21, (char *)&v23 + 2);
            GameMode_SetModeFour((int *)dword_65ABF6F4, 0x4Fu);
            break;
          case 510:
            v3 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x29u);
            if ( v3 )
            {
              sub_657F7A10(v3, v11, v18, v13, v14, v20, Value);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x29u);
            }
            break;
          case 511:
            v4 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Au);
            if ( v4 )
            {
              StatWindow_SetPercentValue(v4, v11, Value, v20);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x2Au);
            }
            break;
          case 512:
            if ( CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Bu) )
              sub_65810E60(v11, v18, Value, (int)v22, v23);
            GameMode_SetModeFour((int *)dword_65ABF6F4, 0x2Bu);
            break;
          case 516:
            v5 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x44u);
            if ( v5 )
              sub_657D3B10(v5, v11, v18, v21, Value);
            GameMode_SetModeFour((int *)dword_65ABF6F4, 0x44u);
            break;
          default:
            break;
        }
      }
      v24 = -1;
      sub_657D4310(v7);
      return 0;
    }
    else
    {
      v24 = -1;
      sub_657D4310(v7);
      return 1;
    }
  }
  else
  {
    v24 = -1;
    if ( v15 )
      operator delete(v15);
    v15 = 0;
    v16 = 0;
    v17 = 0;
    v7[0] = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v8);
    return 1;
  }
}
// 657D3B10: using guessed type int __thiscall sub_657D3B10(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 657D4310: using guessed type int __thiscall sub_657D4310(_DWORD);
// 657D4360: using guessed type int __thiscall Packet_ID_DEPLOY_ITEM_ctor(_DWORD);
// 657F7A10: using guessed type int __thiscall sub_657F7A10(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 6587D520: using guessed type int __thiscall sub_6587D520(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65896270) --------------------------------------------------------
_DWORD *__thiscall sub_65896270(_DWORD *this, int a2)
{
  int v3; // edi
  int v5; // [esp-18h] [ebp-3Ch]
  int v6; // [esp-14h] [ebp-38h]
  int v7; // [esp-10h] [ebp-34h]
  _DWORD v8[9]; // [esp+0h] [ebp-24h] BYREF

  v8[5] = v8;
  v8[4] = this;
  v3 = a2;
  if ( Vector68_Reserve(this, (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 68) )
  {
    LOBYTE(a2) = 0;
    v7 = *(this + 1);
    v6 = *(_DWORD *)(v3 + 8);
    v5 = *(_DWORD *)(v3 + 4);
    v8[8] = 0;
    *(this + 2) = sub_65896160(v5, v6, v7, this, a2, a2);
  }
  return this;
}
// 6579B640: using guessed type int __thiscall sub_6579B640(_DWORD);
// 65896160: using guessed type int __cdecl sub_65896160(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (65896320) --------------------------------------------------------
Packet_ID_LOGIN_RETURN *__thiscall Packet_ID_LOGIN_RETURN_Ctor(Packet_ID_LOGIN_RETURN *this)
{
  *(_DWORD *)this->base = &vtbl_Packet_Unknown0;
  this->base[8] = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)&this->base[12]);
  *(_DWORD *)&this->base[1056] = 0;
  *(_DWORD *)&this->base[1060] = 0;
  this->base[1064] = 111;
  *(_DWORD *)this->base = &vtbl_Packet_ID_LOGIN_RETURN;
  *((_DWORD *)this + 309) = 0;
  *((_DWORD *)this + 310) = 0;
  *((_DWORD *)this + 311) = 0;
  CharacterData_Reset((int)this + 2276);
  this->clientVersion = 0;
  this->status = 0;
  this->playerID = 0;
  this->accountType = 1;
  this->field4_0x439 = 0;
  this->field5_0x43A = 0;
  this->isBanned = 0;
  this->banLength[0] = 0;
  *((_BYTE *)this + 1248) = 0;
  this->banReason[0] = 0;
  *((_BYTE *)this + 2272) = 0;
  *((_BYTE *)this + 2940) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CEC1C: using guessed type int (__thiscall *vtbl_Packet_ID_LOGIN_RETURN)(void *, char);

//----- (65896400) --------------------------------------------------------
char __thiscall Packet_ID_LOGIN_RETURN_Write(Packet_ID_LOGIN_RETURN *this)
{
  char result; // al
  char *v3; // ecx
  char *v4; // ecx
  char *v5; // ecx
  char v6[4]; // [esp+4h] [ebp-4h] BYREF

  result = Packet_WriteHeader((int)this);
  if ( result )
  {
    v6[0] = this->status;
    BitStream_WriteBitsCompressed((char *)&this->base[12], v6, 8u, 1);
    BitStream_Write_u32c((char *)this, this->playerID);
    if ( this->playerID )
    {
      v6[0] = this->accountType;
      BitStream_WriteBitsCompressed((char *)&this->base[12], v6, 8u, 1);
      v3 = (char *)&this->base[12];
      if ( this->field4_0x439 )
        BitStream_WriteBit1(v3);
      else
        BitStream_WriteBit0(v3);
      v4 = (char *)&this->base[12];
      if ( this->field5_0x43A )
        BitStream_WriteBit1(v4);
      else
        BitStream_WriteBit0(v4);
      BitStream_WriteUInt16Compressed((char *)this, this->clientVersion);
      v5 = (char *)&this->base[12];
      if ( this->isBanned )
        BitStream_WriteBit1(v5);
      else
        BitStream_WriteBit0(v5);
      if ( this->isBanned )
      {
        (*(void (__thiscall **)(int, unsigned __int8 *, int, unsigned __int8 *))(*(_DWORD *)g_LTClient + 52))(
          g_LTClient,
          this->banLength,
          2048,
          &this->base[12]);
        (*(void (__thiscall **)(int, unsigned __int8 *, int, unsigned __int8 *))(*(_DWORD *)g_LTClient + 52))(
          g_LTClient,
          this->banReason,
          2048,
          &this->base[12]);
      }
      Packet_ID_MAIL_write_idlist((_DWORD *)this + 308, (char *)&this->base[12]);
      (*(void (__thiscall **)(int, char *, int, unsigned __int8 *))(*(_DWORD *)g_LTClient + 52))(
        g_LTClient,
        (char *)this + 1248,
        2048,
        &this->base[12]);
      CharacterData_WriteToBitStream((char *)this + 2276, (unsigned int *)&this->base[12]);
      v6[0] = *((_BYTE *)this + 2272);
      BitStream_WriteBitsCompressed((char *)&this->base[12], v6, 8u, 1);
      v6[0] = *((_BYTE *)this + 2940);
      BitStream_WriteBitsCompressed((char *)&this->base[12], v6, 8u, 1);
    }
    return 1;
  }
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (65896560) --------------------------------------------------------
int __thiscall Packet_ID_LOGIN_RETURN_Dtor(void **this)
{
  CharSlot_FreeBuffers((int)(this + 569));
  if ( *(this + 309) )
    operator delete(*(this + 309));
  *(this + 309) = 0;
  *(this + 310) = 0;
  *(this + 311) = 0;
  *this = &vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 3));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (65896600) --------------------------------------------------------
char *__thiscall Packet_ID_VENDOR_Ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *(this + 1064) = -109;
  *(_DWORD *)this = &off_659CEC2C;
  *((_DWORD *)this + 272) = 0;
  *((_DWORD *)this + 273) = 0;
  *((_DWORD *)this + 274) = 0;
  *((_WORD *)this + 540) = 0;
  *(this + 1112) = 0;
  *((_DWORD *)this + 275) = 0;
  *((_DWORD *)this + 276) = 0;
  *((_DWORD *)this + 277) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *(this + 1077) = 0;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CEC2C: using guessed type void *off_659CEC2C;

//----- (65896730) --------------------------------------------------------
int __thiscall Packet_ID_VENDOR_Dtor(int *this)
{
  int v2; // eax
  _DWORD *v3; // esi

  v2 = *(this + 272);
  v3 = this + 271;
  if ( v2 )
  {
    ItemVector_DestroyRange(v2, *(this + 273));
    operator delete((void *)v3[1]);
  }
  v3[1] = 0;
  v3[2] = 0;
  v3[3] = 0;
  *this = (int)&vtbl_Packet_Unknown0;
  return BitStream_FreeOwnedBuffer((int)(this + 3));
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (65896900) --------------------------------------------------------
int __userpurge HandlePacket_ID_LOGIN_RETURN@<eax>(double a1@<st0>, int packet)
{
  int result; // eax
  float *loginUiSlot; // esi
  char noCharacter; // bl
  int Slot; // eax
  int msgId; // [esp-14h] [ebp-BB0h]
  unsigned __int8 *msgArg1; // [esp-Ch] [ebp-BA8h]
  unsigned __int8 *msgArg2; // [esp-Ch] [ebp-BA8h]
  unsigned __int8 *msgArg3; // [esp-4h] [ebp-BA0h]
  Packet_ID_LOGIN_RETURN pktLoginReturn; // [esp+Ch] [ebp-B90h] BYREF
  _BYTE v11[16]; // [esp+4DCh] [ebp-6C0h] BYREF
  char v12[1028]; // [esp+4ECh] [ebp-6B0h] BYREF
  int v13[167]; // [esp+8F0h] [ebp-2ACh] BYREF
  int v14; // [esp+B98h] [ebp-4h]

  Packet_ID_LOGIN_RETURN_Ctor(&pktLoginReturn);
  v14 = 0;
  if ( Packet_ID_LOGIN_RETURN_Read(&pktLoginReturn, packet)
    && (loginUiSlot = (float *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u)) != 0 )
  {
    noCharacter = 0;
    switch ( pktLoginReturn.status )
    {
      case 1u:
        goto LABEL_9;
      case 2u:
        msgArg3 = 0;
        msgArg1 = 0;
        msgId = 1708;
        goto LABEL_31;
      case 3u:
        LoginPanel_SetMode((int)loginUiSlot, 0);
        goto LABEL_32;
      case 4u:
        msgArg3 = 0;
        msgArg1 = 0;
        msgId = 1709;
        goto LABEL_31;
      case 5u:
        (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "NO CHARACTER");
        noCharacter = 1;
LABEL_9:
        LoginPanel_SetMode((int)loginUiSlot, 0);
        if ( pktLoginReturn.clientVersion <= 0x73Du )
        {
          Mail_InitUserFolder((char *)dword_65ABF734 + 8, (const char *)g_pPlayerStats);
          WriteStatGroup5(pktLoginReturn.accountType);
          WriteStatGroup6(pktLoginReturn.field4_0x439);
          SharedMem_WritePlayerEntity(g_pPlayerStats, pktLoginReturn.field5_0x43A != 0);
          NetworkMgr_AddPacketToQueue((char *)dword_65ABF73C, (int)v11);
          if ( noCharacter )
          {
            SharedMem_WriteU8_std(0x5Au, 1u);
            SharedMem_WriteDword_this(g_pPlayerStats, 0x5Bu, pktLoginReturn.playerID);
            GameMode_SetModeThree((int *)dword_65ABF6F4, 2u);
          }
          else
          {
            SharedMem_WriteU8_std(0x5Au, 0);
            SharedMem_WriteU8_std(0x54u, 1u);
            SharedMem_WriteDword_this(g_pPlayerStats, 0x5Bu, pktLoginReturn.playerID);
            LoginUI_SetMessageText(loginUiSlot, 4303, "00FF0000", 0, 0, 0);
            SharedMem_WriteDword_this(dword_65ABF73C, 1u, (unsigned __int8)v12[1024]);
            Slot = UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 3u);
            if ( !Slot )
              goto LABEL_2;
            WorldSelect_ApplyApartmentInfo(Slot, a1, *(float *)&v13[166], pktLoginReturn.accountType, (int)v13);
            GameMode_SetModeThree((int *)dword_65ABF6F4, 3u);
            if ( !sub_65948020(v12) )
              LoginField_QueueUpdate((int **)dword_65ABF708, 5, 6003, 1, (int)v12);
          }
        }
        else
        {
          msgArg3 = 0;
          msgArg1 = 0;
          msgId = 1720;
LABEL_31:
          LoginUI_SetMessageText(loginUiSlot, msgId, "FF000000", (int)msgArg1, 0, (int)msgArg3);
        }
LABEL_32:
        v14 = -1;
        Packet_ID_LOGIN_RETURN_Dtor((void **)&pktLoginReturn);
        result = 0;
        break;
      case 6u:
        msgArg3 = 0;
        msgArg1 = 0;
        msgId = 1706;
        goto LABEL_31;
      case 7u:
        if ( pktLoginReturn.banReason[0] )
          msgArg3 = pktLoginReturn.banReason;
        else
          msgArg3 = 0;
        msgArg1 = pktLoginReturn.banLength;
        msgId = 1718;
        goto LABEL_31;
      case 8u:
        if ( pktLoginReturn.banReason[0] )
          msgArg2 = pktLoginReturn.banReason;
        else
          msgArg2 = 0;
        LoginUI_SetMessageText(loginUiSlot, 1719, "FF000000", (int)msgArg2, 0, 0);
        goto LABEL_32;
      case 9u:
        msgArg3 = 0;
        msgArg1 = 0;
        msgId = 1732;
        goto LABEL_31;
      case 0xAu:
        msgArg3 = 0;
        msgArg1 = 0;
        msgId = 1707;
        goto LABEL_31;
      case 0xBu:
        msgArg3 = 0;
        msgArg1 = 0;
        msgId = 1700;
        goto LABEL_31;
      case 0xCu:
        msgArg3 = 0;
        msgArg1 = 0;
        msgId = 1699;
        goto LABEL_31;
      case 0xDu:
        msgArg3 = 0;
        msgArg1 = 0;
        msgId = 1741;
        goto LABEL_31;
      default:
        msgArg3 = 0;
        msgArg1 = 0;
        msgId = 1711;
        goto LABEL_31;
    }
  }
  else
  {
LABEL_2:
    v14 = -1;
    Packet_ID_LOGIN_RETURN_Dtor((void **)&pktLoginReturn);
    return 1;
  }
  return result;
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF70C: using guessed type int dword_65ABF70C;

//----- (65896CE0) --------------------------------------------------------
int __stdcall HandlePacket_ID_BACKPACK_CONTENTS(int a1)
{
  int Dword_this; // eax
  int WindowById; // eax
  int v4; // eax
  int v5; // esi
  char *v6; // eax
  int v7; // eax
  int v8; // esi
  char *v9; // eax
  int v10; // eax
  char *v11; // eax
  unsigned __int16 *v12; // eax
  char *v13; // eax
  int v14[269]; // [esp+8h] [ebp-480h] BYREF
  char v15; // [esp+43Ch] [ebp-4Ch]
  int v16; // [esp+440h] [ebp-48h]
  _WORD v17[18]; // [esp+444h] [ebp-44h] BYREF
  int v18; // [esp+468h] [ebp-20h]
  int v19; // [esp+484h] [ebp-4h]

  Packet_ID_146_Ctor((char *)v14);
  v19 = 0;
  if ( Packet_ID_BACKPACK_CONTENTS_read((int)v14, a1) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 512);
    Dword_this = SharedMem_ReadDword_this((void *)(dword_65ABF748 + 4), 0x2BE0u);
    if ( Dword_this == v16 )
    {
      switch ( v15 )
      {
        case 5:
          if ( !Player_IsInGameMode2() )
          {
            WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 7u);
            if ( WindowById )
              CraftingMgr_UpdateRecipe(WindowById, (int)v17);
            GameMode_SetModeFour((int *)dword_65ABF6F4, 7u);
          }
          break;
        case 6:
          v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1839);
          goto LABEL_10;
        case 7:
          v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1840);
          goto LABEL_35;
        case 8:
          v4 = (*(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1869, v18);
          goto LABEL_10;
        case 9:
          v8 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1852);
          if ( v8 )
            v9 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
          else
            v9 = (char *)byte_659A8B98;
          FriendList_AddEntry(dword_65ABF748, v9, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
          goto LABEL_22;
        case 10:
          v10 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1841);
          goto LABEL_26;
        case 11:
          v10 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1842);
LABEL_26:
          v8 = v10;
          if ( v10 )
            v11 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v10);
          else
            v11 = (char *)byte_659A8B98;
          FriendList_AddEntry(dword_65ABF748, v11, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
LABEL_22:
          if ( v8 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v8);
          SharedMem_SetCraftingFlag(1u);
          break;
        case 12:
          v12 = (unsigned __int16 *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 7u);
          if ( v12 )
            CraftingUI_HandleItemUpdate(v12, v17);
          break;
        case 13:
          v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1843);
LABEL_10:
          v5 = v4;
          if ( v4 )
            v6 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
          else
            v6 = (char *)byte_659A8B98;
          FriendList_AddEntry(dword_65ABF748, v6, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
          if ( v5 )
            goto LABEL_39;
          break;
        case 14:
          v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1844);
          goto LABEL_35;
        case 15:
          v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1845);
LABEL_35:
          v5 = v7;
          if ( v7 )
            v13 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
          else
            v13 = (char *)byte_659A8B98;
          FriendList_AddEntry(dword_65ABF748, v13, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
          if ( v5 )
LABEL_39:
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
          break;
        default:
          break;
      }
    }
    v19 = -1;
    Packet_ID_146_Dtor(v14);
    return 0;
  }
  else
  {
    v19 = -1;
    Packet_ID_146_Dtor(v14);
    return 1;
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (65897030) --------------------------------------------------------
int __stdcall HandlePacket_ID_ITEMS_ADDED(int a1)
{
  int Dword_this; // eax
  int v2; // esi
  int WindowById; // edi
  int **i; // esi
  int ****v6; // eax
  int v7; // esi
  int v8; // eax
  _DWORD *v9; // esi
  int v10; // eax
  _DWORD *v11; // edi
  int v12; // esi
  char *v13; // eax
  int v14; // esi
  char v15; // al
  int v16; // ebx
  int *j; // edi
  int v18; // eax
  int v19; // esi
  char *v20; // ebx
  int v21; // [esp+10h] [ebp-4BCh] BYREF
  int **v22; // [esp+14h] [ebp-4B8h]
  int v23; // [esp+1Ch] [ebp-4B0h]
  int v24; // [esp+20h] [ebp-4ACh] BYREF
  int ***v25; // [esp+24h] [ebp-4A8h]
  int v26; // [esp+28h] [ebp-4A4h]
  char v27[48]; // [esp+2Ch] [ebp-4A0h] BYREF
  char v28[1072]; // [esp+5Ch] [ebp-470h] BYREF
  int v29; // [esp+48Ch] [ebp-40h]
  char v30; // [esp+490h] [ebp-3Ch]
  char v31; // [esp+491h] [ebp-3Bh]
  _WORD v32[20]; // [esp+494h] [ebp-38h] BYREF
  int v33; // [esp+4C8h] [ebp-4h]

  Packet_ID_VENDOR_Ctor(v28);
  v33 = 0;
  if ( !Packet_ID_ITEMS_ADDED_read((int)v28, a1)
    || (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v29 != Dword_this) )
  {
LABEL_36:
    v33 = -1;
    Packet_ID_VENDOR_Dtor((int *)v28);
    return 1;
  }
  switch ( v30 )
  {
    case 1:
      v2 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
      if ( !sub_6593FD50((int ****)v2, v32) )
        goto LABEL_36;
      *(_BYTE *)(v2 + 32) = 1;
      WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x40u);
      if ( !WindowById )
        goto LABEL_48;
      IndexedArrayMgr_Ctor(&v24);
      LOBYTE(v33) = 1;
      sub_6593ED50(v32, &v24);
      if ( !v26 )
      {
        LOBYTE(v33) = 0;
        TreeMap_Destroy((int)&v24);
        goto LABEL_8;
      }
      for ( i = *v25; i != (int **)v25; i = (int **)*i )
        ItemDropUI_ShowNotification(
          WindowById,
          *((unsigned __int16 *)i + 4),
          COERCE_FLOAT(*((unsigned __int16 *)i + 5) * (_DWORD)i[12]));
      LOBYTE(v33) = 0;
      TreeMap_Destroy((int)&v24);
      goto LABEL_48;
    case 3:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2);
      if ( v31 == 1 )
      {
        v7 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
        if ( !v7 )
          goto LABEL_48;
        if ( sub_6593FD50((int ****)v7, v32) )
        {
LABEL_24:
          *(_BYTE *)(v7 + 32) = 1;
          goto LABEL_48;
        }
LABEL_8:
        v33 = -1;
        Packet_ID_VENDOR_Dtor((int *)v28);
        return 1;
      }
      if ( v31 != 2 )
      {
        if ( v31 != 3 )
          goto LABEL_48;
        v6 = (int ****)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
        v7 = (int)v6;
        if ( !v6 )
          goto LABEL_48;
        if ( !sub_6593FD50(v6, v32) )
          goto LABEL_8;
        goto LABEL_24;
      }
      v8 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
      v9 = (_DWORD *)v8;
      if ( !v8 || v8 == -6440 )
        goto LABEL_48;
      if ( !sub_6593FD50((int ****)(v8 + 6440), v32) )
        goto LABEL_8;
      ProductionWindow_RefreshInputSlots(v9);
LABEL_48:
      v33 = -1;
      Packet_ID_VENDOR_Dtor((int *)v28);
      return 0;
    case 4:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2);
      v10 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
      v11 = (_DWORD *)v10;
      if ( !v10 || v10 == -6440 )
        goto LABEL_48;
      if ( !sub_6593FD50((int ****)(v10 + 6440), v32) )
        goto LABEL_36;
      v12 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4337);
      if ( v12 )
        v13 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v12);
      else
        v13 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v13, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v12 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v12);
      MarketWindow_SendSearchRequest((int)v11);
      ProductionWindow_RefreshInputSlots(v11);
      goto LABEL_48;
    case 5:
      v14 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
      v15 = sub_6593FD50((int ****)v14, v32);
      goto LABEL_35;
    case 6:
      v14 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
      v15 = sub_6593FD50((int ****)v14, v32);
LABEL_35:
      if ( !v15 )
        goto LABEL_36;
      goto LABEL_41;
    case 7:
      v14 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
      if ( !sub_6593FD50((int ****)v14, v32) )
        goto LABEL_36;
      if ( ItemsAddedPayload_GetVariantCountByItemType(v32, 7) )
        EquipSlotArray_ClearSlot5to16((char *)(v14 + 36), 6u, 0);
LABEL_41:
      *(_BYTE *)(v14 + 32) = 1;
      goto LABEL_48;
    case 8:
      v16 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
      v23 = v16;
      if ( !v16 )
        goto LABEL_36;
      ItemStructA_InitAlt(v27);
      LinkedList_Init(&v21);
      LOBYTE(v33) = 2;
      sub_6593E110(v32, &v21);
      for ( j = *v22; j != (int *)v22; j = (int *)*j )
      {
        v18 = ItemTemplateById_Get(g_ItemTemplateById, *((_WORD *)j + 6));
        v19 = v18;
        if ( v18 )
        {
          v20 = (char *)(v16 + 36);
          EquipSlotArray_ClearSlot5to16(v20, *(_BYTE *)(v18 + 10), 0);
          EquipSlotArray_SetSlot5to16(v20, *(_BYTE *)(v19 + 10), j + 2);
          v16 = v23;
        }
      }
      *(_BYTE *)(v16 + 32) = 1;
      LinkedList_DestroyAll((int)&v21);
      goto LABEL_48;
    default:
      goto LABEL_48;
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658974B0) --------------------------------------------------------
int *__thiscall sub_658974B0(int *this, int a2)
{
  *(_WORD *)this = *(_WORD *)a2;
  ItemDataArray_Assign(this + 1, a2 + 4);
  *(this + 5) = *(_DWORD *)(a2 + 20);
  *(this + 6) = *(_DWORD *)(a2 + 24);
  *(this + 7) = *(_DWORD *)(a2 + 28);
  *((_BYTE *)this + 32) = *(_BYTE *)(a2 + 32);
  qmemcpy(this + 9, (const void *)(a2 + 36), 0x240u);
  qmemcpy(this + 153, (const void *)(a2 + 612), 0x94u);
  qmemcpy(this + 190, (const void *)(a2 + 760), 0x122u);
  ItemDataArray_Assign(this + 263, a2 + 1052);
  *(this + 267) = *(_DWORD *)(a2 + 1068);
  *(this + 268) = *(_DWORD *)(a2 + 1072);
  *(this + 269) = *(_DWORD *)(a2 + 1076);
  *((_BYTE *)this + 1080) = *(_BYTE *)(a2 + 1080);
  return this;
}

//----- (65897580) --------------------------------------------------------
int __stdcall HandlePacket_ID_A5(int a1)
{
  _DWORD *v2; // eax
  int WindowById; // eax
  int v4; // esi
  int v5; // esi
  int v6; // esi
  int v7; // ebx
  _DWORD *v8; // ebx
  int v9; // esi
  int v10; // ebx
  void (__thiscall *v11)(int, int, _DWORD, _DWORD); // eax
  int v12; // ebx
  void (__thiscall *v13)(int, int, _DWORD, _DWORD); // eax
  int *v14; // esi
  int v15; // esi
  int v16; // esi
  int v17; // esi
  int v18; // esi
  int v19; // eax
  _DWORD *v20; // eax
  int v21; // eax
  int v22; // eax
  int v23; // eax
  char v24[1080]; // [esp+10h] [ebp-678h] BYREF
  int v25; // [esp+448h] [ebp-240h]
  char v26; // [esp+450h] [ebp-238h]
  _BYTE v27[380]; // [esp+454h] [ebp-234h] BYREF
  _BYTE v28[88]; // [esp+5D0h] [ebp-B8h] BYREF
  _BYTE v29[16]; // [esp+628h] [ebp-60h] BYREF
  _BYTE v30[24]; // [esp+638h] [ebp-50h] BYREF
  _BYTE v31[40]; // [esp+650h] [ebp-38h] BYREF
  int v32; // [esp+684h] [ebp-4h]

  Packet_ID_A5_ctor(v24);
  v32 = 0;
  if ( Packet_ID_A5_read((int)v24, a1) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
    switch ( v24[1076] )
    {
      case 3:
        v2 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
        if ( !v2 )
          goto LABEL_2;
        ItemDataSmall_CopyFrom(v2, (int)v31);
        WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
        v4 = WindowById;
        if ( WindowById )
        {
          ProductionWindow_HandleActionEvent(WindowById, 6u);
          (*(void (__thiscall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v4 + 4))(v4, 5, 0, 0);
          GameMode_SetModeFour((int *)dword_65ABF6F4, 0x13u);
        }
        break;
      case 5:
        if ( !SharedMem_ReadBool_std(0x91u) )
        {
          switch ( v27[4] )
          {
            case 1:
              v5 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Cu);
              (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 16))(v5);
              sub_6588ACC0(v5);
              qmemcpy((void *)(v5 + 6368), v27, 0x178u);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x2Cu);
              break;
            case 2:
              v6 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x16u);
              (*(void (__thiscall **)(int))(*(_DWORD *)v6 + 16))(v6);
              sub_6588ACC0(v6);
              qmemcpy((void *)(v6 + 6368), v27, 0x178u);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x16u);
              break;
            case 3:
              v7 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
              (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 16))(v7);
              sub_6588ACC0(v7);
              ProductionWindow_HandleActionEvent(v7, 5u);
              qmemcpy((void *)(v7 + 6476), v27, 0x178u);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x13u);
              goto LABEL_12;
            case 4:
              v9 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x23u);
              (*(void (__thiscall **)(int))(*(_DWORD *)v9 + 16))(v9);
              sub_6588ACC0(v9);
              sub_6584A330(v9, v27);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x23u);
              break;
            case 5:
              v10 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Eu);
              (*(void (__thiscall **)(int))(*(_DWORD *)v10 + 16))(v10);
              sub_6588ACC0(v10);
              v11 = *(void (__thiscall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v10 + 4);
              qmemcpy((void *)(v10 + 6376), v27, 0x178u);
              v11(v10, 5, 0, 0);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x2Eu);
              break;
            case 6:
              v12 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Au);
              (*(void (__thiscall **)(int))(*(_DWORD *)v12 + 16))(v12);
              sub_6588ACC0(v12);
              v13 = *(void (__thiscall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v12 + 4);
              qmemcpy((void *)(v12 + 6368), v27, 0x178u);
              v13(v12, 5, 0, 0);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x3Au);
              break;
            case 7:
              v8 = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x22u);
              (*(void (__thiscall **)(_DWORD *))(*v8 + 16))(v8);
              sub_6588ACC0(v8);
              qmemcpy(v8 + 1592, v27, 0x178u);
              ItemTooltipUI_BuildContent(v8);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x22u);
              break;
            case 8:
              v14 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x15u);
              (*(void (__thiscall **)(int *))(*v14 + 16))(v14);
              sub_6588ACC0(v14);
              sub_6588C870(v14, v27);
              WindowMgr_SelectGroup(v14, 3);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x15u);
              (*(void (__thiscall **)(int *, int, _DWORD, _DWORD))(*v14 + 4))(v14, 5, 0, 0);
              break;
            case 9:
              v15 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x27u);
              (*(void (__thiscall **)(int))(*(_DWORD *)v15 + 16))(v15);
              sub_6588ACC0(v15);
              qmemcpy((void *)(v15 + 6368), v27, 0x178u);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x27u);
              break;
            case 0xB:
              v16 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Du);
              (*(void (__thiscall **)(int))(*(_DWORD *)v16 + 16))(v16);
              sub_6588ACC0(v16);
              qmemcpy((void *)(v16 + 6368), v27, 0x178u);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x2Du);
              break;
            case 0xC:
              v7 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x31u);
              (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 16))(v7);
              sub_6588ACC0(v7);
              qmemcpy((void *)(v7 + 6368), v27, 0x178u);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x31u);
LABEL_12:
              (*(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)v7 + 4))(v7, 5, 0);
              break;
            case 0xE:
              v17 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x36u);
              (*(void (__thiscall **)(int))(*(_DWORD *)v17 + 16))(v17);
              sub_6588ACC0(v17);
              qmemcpy((void *)(v17 + 6368), v27, 0x178u);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x36u);
              break;
            case 0xF:
              v18 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x49u);
              (*(void (__thiscall **)(int))(*(_DWORD *)v18 + 16))(v18);
              sub_6588ACC0(v18);
              qmemcpy((void *)(v18 + 6368), v27, 0x178u);
              GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
              GameMode_SetModeFour((int *)dword_65ABF6F4, 0x49u);
              break;
            default:
              break;
          }
          SharedMem_WriteU8_std(0x91u, 1u);
        }
        break;
      case 8:
        v19 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x20u);
        if ( v19 )
        {
          sub_6587EA60(v19, v27, v29, v28);
          GameMode_SetModeFour((int *)dword_65ABF6F4, 0x20u);
        }
        break;
      case 0xB:
        if ( v26 )
        {
          if ( v26 == 1 )
          {
            v20 = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x39u);
            if ( v20 )
            {
              v20[1592] = v25;
              (*(void (__thiscall **)(_DWORD *, int, _DWORD, _DWORD))(*v20 + 4))(v20, 5, 0, 0);
            }
            GameMode_SetModeFour((int *)dword_65ABF6F4, 0x39u);
          }
        }
        else
        {
          v21 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x34u);
          if ( v21 )
            *(_DWORD *)(v21 + 6372) = v25;
          GameMode_SetModeFour((int *)dword_65ABF6F4, 0x34u);
        }
        break;
      case 0xE:
        v22 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x39u);
        if ( v22 )
          sub_6585D9D0(v22, v30);
        break;
      case 0x10:
        v23 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Au);
        if ( v23 )
          sub_6585EE30(v23, v30, v29);
        break;
      default:
        break;
    }
    v32 = -1;
    TerminalWindow_ClearVectors(v24);
    return 0;
  }
  else
  {
LABEL_2:
    v32 = -1;
    TerminalWindow_ClearVectors(v24);
    return 1;
  }
}
// 6584A330: using guessed type int __thiscall sub_6584A330(_DWORD, _DWORD);
// 6585D9D0: using guessed type int __thiscall sub_6585D9D0(_DWORD, _DWORD);
// 6585EE30: using guessed type int __thiscall sub_6585EE30(_DWORD, _DWORD, _DWORD);
// 6587EA60: using guessed type int __thiscall sub_6587EA60(_DWORD, _DWORD, _DWORD, _DWORD);
// 6588ACC0: using guessed type int __thiscall sub_6588ACC0(_DWORD);
// 6588C870: using guessed type int __thiscall sub_6588C870(_DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65897C50) --------------------------------------------------------
char *__thiscall GuildMemberData_CopyFrom(char *this, int a2)
{
  *(_DWORD *)this = *(_DWORD *)a2;
  sub_65896270((_DWORD *)this + 1, a2 + 4);
  *(this + 20) = *(_BYTE *)(a2 + 20);
  Vector4_CopyCtor((_DWORD *)this + 6, a2 + 24);
  return this;
}

//----- (65897CC0) --------------------------------------------------------
void **__thiscall Packet_ID_LOGIN_RETURN_ScalarDeletingDtor(void **this, char a2)
{
  Packet_ID_LOGIN_RETURN_Dtor(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (65897CF0) --------------------------------------------------------
int *__thiscall Packet_ID_VENDOR_Dtor_Delete(int *this, char a2)
{
  Packet_ID_VENDOR_Dtor(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (65897F90) --------------------------------------------------------
int __thiscall HandlePacket_STORAGE(int this, int a2)
{
  int Dword_this; // eax
  int v5; // eax
  int v6; // edi
  int WindowById; // eax
  int v8; // esi
  int v9; // eax
  int v10; // eax
  _DWORD *v11; // ecx
  int v12; // eax
  int v13; // eax
  int v14; // esi
  int *v15; // eax
  int *v16; // esi
  int v17[271]; // [esp+10h] [ebp-8D8h] BYREF
  _BYTE v18[36]; // [esp+44Ch] [ebp-49Ch] BYREF
  _BYTE v19[40]; // [esp+470h] [ebp-478h] BYREF
  _BYTE v20[1088]; // [esp+498h] [ebp-450h] BYREF
  int v21; // [esp+8E4h] [ebp-4h]

  Packet_Storage_Ctor((char *)v17);
  v21 = 0;
  if ( Packet_ID_STORAGE_read((int)v17, a2)
    && (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v17[268] == Dword_this) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 32);
    switch ( v17[269] )
    {
      case 2:
        v5 = *(_DWORD *)(dword_65ABF708 + 20);
        if ( v5 && *(_DWORD *)(v5 + 96) == 6 )
          *(_DWORD *)(dword_65ABF708 + 20) = 0;
        v6 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
        ItemDataSmall_CopyFrom((_DWORD *)v6, (int)v18);
        WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
        v8 = WindowById;
        if ( WindowById )
        {
          *(_BYTE *)(WindowById + 6852) = v19[36];
          ItemDataSmall_CopyFrom((_DWORD *)(WindowById + 6440), (int)v19);
          *(_BYTE *)(v8 + 6472) = 1;
        }
        *(_BYTE *)(v6 + 32) = 1;
        break;
      case 5:
        v9 = *(_DWORD *)(dword_65ABF708 + 20);
        if ( v9 && *(_DWORD *)(v9 + 96) == 11 )
          *(_DWORD *)(dword_65ABF708 + 20) = 0;
        ItemDataSmall_CopyFrom((_DWORD *)(this + 1884064), (int)v18);
        *(_BYTE *)(this + 1884096) = 1;
        if ( (unsigned __int16)ItemsAddedPayload_GetUsedCount((unsigned __int16 *)(this + 1884064)) )
        {
          WindowMgr_ShowWindowById((int *)dword_65ABF708, 0x3Du);
        }
        else
        {
          v10 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Du);
          if ( v10 )
            (*(void (__thiscall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v10 + 4))(v10, 4, 0, 0);
        }
        break;
      case 7:
        v11 = (_DWORD *)dword_65ABF708;
        v12 = *(_DWORD *)(dword_65ABF708 + 20);
        if ( v12 && *(_DWORD *)(v12 + 96) == 6 )
        {
          *(_DWORD *)(dword_65ABF708 + 20) = 0;
          v11 = (_DWORD *)dword_65ABF708;
        }
        v13 = CWindowMgr_GetWindowById(v11, 0x43u);
        v14 = v13;
        if ( v13 )
        {
          sub_6593EE50((_DWORD *)(v13 + 6804));
          *(_BYTE *)(v14 + 6836) = 1;
          ItemDataSmall_CopyFrom((_DWORD *)(v14 + 6764), (int)v18);
          *(_BYTE *)(v14 + 6796) = 1;
        }
        break;
      case 9:
        v15 = (int *)(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
        v16 = v15;
        if ( v15 )
        {
          sub_658974B0(v15, (int)v20);
          *((_BYTE *)v16 + 32) = 1;
        }
        break;
      default:
        break;
    }
    v21 = -1;
    ItemListPacket_Dtor(v17);
    return 0;
  }
  else
  {
    v21 = -1;
    ItemListPacket_Dtor(v17);
    return 1;
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (658981F0) --------------------------------------------------------
int __stdcall HandlePacket_ID_B6(int a1)
{
  int Dword_this; // eax
  int WindowById; // esi
  int v4; // eax
  int v5; // ebx
  void (__thiscall *v6)(int); // eax
  int *v7; // ebx
  int v8; // esi
  char *v9; // eax
  int v10; // esi
  int v11; // eax
  char *v12; // eax
  int v13; // esi
  _DWORD *v14; // esi
  int v15; // esi
  int v16; // esi
  int v17; // esi
  unsigned int v18[39]; // [esp-9Ch] [ebp-69Ch] BYREF
  _BYTE v19[1072]; // [esp+10h] [ebp-5F0h] BYREF
  int v20; // [esp+440h] [ebp-1C0h]
  char v21; // [esp+444h] [ebp-1BCh]
  _BYTE v22[184]; // [esp+450h] [ebp-1B0h] BYREF
  _DWORD v23[39]; // [esp+508h] [ebp-F8h] BYREF
  _BYTE v24[32]; // [esp+5A4h] [ebp-5Ch] BYREF
  int v25; // [esp+5C4h] [ebp-3Ch]
  _BYTE v26[40]; // [esp+5C8h] [ebp-38h] BYREF
  int v27; // [esp+5FCh] [ebp-4h]

  sub_65847800(v19);
  v27 = 0;
  if ( !Packet_ID_B6_read((int)v19, a1)
    || (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v20 != Dword_this) )
  {
    v27 = -1;
    sub_65847750(v19);
    return 1;
  }
  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
  if ( v21 != 2 )
  {
    if ( v21 == 4 )
    {
      switch ( LOWORD(v23[1]) )
      {
        case 0x3E3:
        case 0x3E4:
        case 0x3E5:
        case 0x3E7:
          WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x45u);
          if ( WindowById )
          {
            sub_65879FD0(WindowById, v23, v25);
            (*(void (__thiscall **)(int))(*(_DWORD *)WindowById + 16))(WindowById);
            GameMode_SetModeFour((int *)dword_65ABF6F4, 0x45u);
          }
          break;
        case 0x3E6:
          v4 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x38u);
          v5 = v4;
          if ( v4 )
          {
            sub_65847320(v4, v26);
            v6 = *(void (__thiscall **)(int))(*(_DWORD *)v5 + 16);
            qmemcpy((void *)(v5 + 6368), v23, 0x9Cu);
            v6(v5);
            GameMode_SetModeFour((int *)dword_65ABF6F4, 0x38u);
          }
          break;
        default:
          goto LABEL_31;
      }
    }
    goto LABEL_31;
  }
  switch ( LOWORD(v23[1]) )
  {
    case 0x3E0:
      v16 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x4Bu);
      (*(void (__thiscall **)(int))(*(_DWORD *)v16 + 16))(v16);
      sub_6588ACC0(v16);
      sub_65879040(v16, v22, v24, v25);
      qmemcpy((void *)(v16 + 6584), v23, 0x9Cu);
      GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
      v18[38] = 75;
      goto LABEL_29;
    case 0x3E2:
      v17 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x47u);
      (*(void (__thiscall **)(int))(*(_DWORD *)v17 + 16))(v17);
      sub_6588ACC0(v17);
      sub_6587B070(v17, v22);
      qmemcpy((void *)(v17 + 6552), v23, 0x9Cu);
      GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
      v18[38] = 71;
      goto LABEL_29;
    case 0x3E3:
      v7 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x15u);
      (*(void (__thiscall **)(int *))(*v7 + 16))(v7);
      sub_6588ACC0(v7);
      qmemcpy(v18, v23, sizeof(v18));
      sub_6588C8E0(
        v7,
        v18[0],
        v18[1],
        v18[2],
        v18[3],
        v18[4],
        v18[5],
        v18[6],
        v18[7],
        v18[8],
        v18[9],
        v18[10],
        v18[11],
        v18[12],
        v18[13],
        v18[14],
        v18[15],
        v18[16],
        v18[17],
        v18[18],
        v18[19],
        v18[20],
        v18[21],
        v18[22],
        v18[23],
        v18[24],
        v18[25],
        v18[26],
        v18[27],
        v18[28],
        v18[29],
        v18[30],
        v18[31],
        v18[32],
        v18[33],
        v18[34],
        v18[35],
        v18[36],
        v18[37],
        v18[38]);
      WindowMgr_SelectGroup(v7, 3);
      GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
      GameMode_SetModeFour((int *)dword_65ABF6F4, 0x15u);
      (*(void (__thiscall **)(int *, int, _DWORD, _DWORD))(*v7 + 4))(v7, 5, 0, 0);
      goto LABEL_30;
    case 0x3E4:
      if ( sub_65948020((const char *)&v23[1] + 3) )
      {
        v8 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5630);
        if ( v8 )
          v9 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
        else
          v9 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v9, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
        if ( v8 )
LABEL_18:
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v8);
      }
      else
      {
        GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
        std::string::operator=(&unk_65ABF814, (char *)&v23[1] + 3);
        v10 = *(_DWORD *)g_pILTClient;
        v11 = std::string::c_str(&unk_65ABF814);
        v8 = (*(int (__cdecl **)(int, int, int))(v10 + 64))(g_pILTClient, 1900, v11);
        if ( v8 )
          v12 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
        else
          v12 = (char *)byte_659A8B98;
        TooltipMgr_ShowTextTooltip((int *)dword_65ABF708, v12, (int)sub_658903F0, 0, 1, 0);
        if ( v8 )
          goto LABEL_18;
      }
LABEL_31:
      v27 = -1;
      sub_65847750(v19);
      return 0;
    case 0x3E5:
      v13 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x46u);
      (*(void (__thiscall **)(int))(*(_DWORD *)v13 + 16))(v13);
      sub_6588ACC0(v13);
      qmemcpy((void *)(v13 + 6368), v23, 0x9Cu);
      GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
      v18[38] = 70;
      goto LABEL_29;
    case 0x3E6:
      v14 = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x37u);
      (*(void (__thiscall **)(_DWORD *))(*v14 + 16))(v14);
      sub_6588ACC0(v14);
      v14[1592] = v23[0];
      GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
      v18[38] = 55;
      goto LABEL_29;
    case 0x3E7:
      v15 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
      (*(void (__thiscall **)(int))(*(_DWORD *)v15 + 16))(v15);
      sub_6588ACC0(v15);
      (*(void (__thiscall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v15 + 4))(v15, 5, 0, 0);
      sub_6588C850(v15, v23[0]);
      ProductionWindow_HandleActionEvent(v15, 0x13u);
      GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
      v18[38] = 19;
LABEL_29:
      GameMode_SetModeFour((int *)dword_65ABF6F4, v18[38]);
LABEL_30:
      SharedMem_WriteU8_std(0x91u, 1u);
      goto LABEL_31;
    default:
      goto LABEL_31;
  }
}
// 65847320: using guessed type int __thiscall sub_65847320(_DWORD, _DWORD);
// 65847750: using guessed type int __thiscall sub_65847750(_DWORD);
// 65847800: using guessed type int __thiscall sub_65847800(_DWORD);
// 65879040: using guessed type int __thiscall sub_65879040(_DWORD, _DWORD, _DWORD, _DWORD);
// 65879FD0: using guessed type int __thiscall sub_65879FD0(_DWORD, _DWORD, _DWORD);
// 6587B070: using guessed type int __thiscall sub_6587B070(_DWORD, _DWORD);
// 6588ACC0: using guessed type int __thiscall sub_6588ACC0(_DWORD);
// 6588C850: using guessed type int __thiscall sub_6588C850(_DWORD, _DWORD);
// 6588C8E0: using guessed type int __thiscall sub_6588C8E0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 658903F0: using guessed type int __cdecl sub_658903F0(int, int);
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (65898700) --------------------------------------------------------
int __thiscall TradeData_CopyFrom(int this, int a2)
{
  *(_DWORD *)(this + 6688) = *(_DWORD *)a2;
  Vector68_Assign((int *)(this + 6692), (int *)(a2 + 4));
  *(_BYTE *)(this + 6708) = *(_BYTE *)(a2 + 20);
  return DwordVector_CopyFrom(this + 6712, a2 + 24);
}

//----- (65898840) --------------------------------------------------------
int __stdcall HandlePacket_ID_PLAYER2PLAYER(int a1)
{
  int Dword_this; // eax
  int v3; // esi
  char *v4; // eax
  char *v5; // eax
  char *v6; // eax
  char *v7; // eax
  int WindowById; // eax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int *v16; // eax
  int v17; // eax
  char *v18; // eax
  int *v19; // eax
  char *v20; // eax
  int v21[268]; // [esp+8h] [ebp-498h] BYREF
  int v22; // [esp+438h] [ebp-68h]
  int v23; // [esp+43Ch] [ebp-64h]
  char v24; // [esp+440h] [ebp-60h]
  char Source[23]; // [esp+441h] [ebp-5Fh] BYREF
  int v26; // [esp+458h] [ebp-48h]
  _BYTE v27[44]; // [esp+45Ch] [ebp-44h] BYREF
  int v28; // [esp+488h] [ebp-18h]
  int v29; // [esp+49Ch] [ebp-4h]

  Packet_ID_P2P_CtorWrapper(v21);
  v29 = 0;
  if ( Packet_ID_PLAYER2PLAYER_read((int)v21, a1)
    && ((*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x40000),
        Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu),
        v23 == Dword_this) )
  {
    if ( SharedMem_ReadBool_std(0x8Cu)
      && SharedMem_ReadBool_std(0x52u)
      && *(_DWORD *)dword_65ABF704
      && !SharedMem_ReadBool_std(0x53u) )
    {
      switch ( v24 )
      {
        case 1:
          if ( !v26 )
            goto LABEL_2;
          dword_65ABF810 = v26;
          v3 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1871, Source);
          if ( v3 )
            v4 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
          else
            v4 = (char *)byte_659A8B98;
          TooltipMgr_ShowTextTooltip((int *)dword_65ABF708, v4, (int)sub_65898740, 0, 1, 0);
          if ( *(_DWORD *)(dword_65ABF6F4 + 8) != 4 )
          {
            if ( v3 )
              v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
            else
              v5 = (char *)byte_659A8B98;
            FriendList_AddEntry(dword_65ABF748, v5, 10, 0, 1, "FFD26400", "FFED0000", 0, 0, 0, 0);
          }
          goto LABEL_18;
        case 2:
          v3 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5488, Source);
          if ( v3 )
            v6 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
          else
            v6 = (char *)byte_659A8B98;
          FriendList_AddEntry(dword_65ABF748, v6, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
          goto LABEL_18;
        case 3:
          v3 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4388, Source);
          if ( v3 )
            v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
          else
            v7 = (char *)byte_659A8B98;
          FriendList_AddEntry(dword_65ABF748, v7, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
          goto LABEL_18;
        case 4:
          WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
          if ( !WindowById )
            goto LABEL_2;
          sub_657CD1D0(WindowById, Source, v22);
          break;
        case 5:
          if ( !CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u) )
            goto LABEL_2;
          sub_657CC330(Source, v22);
          GameMode_SetModeFour((int *)dword_65ABF6F4, 0x35u);
          break;
        case 6:
          v9 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
          if ( !v9 )
            goto LABEL_2;
          sub_657CE040(v9, v27);
          break;
        case 7:
          v10 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
          if ( !v10 )
            goto LABEL_2;
          sub_657CE260(v10, v27);
          break;
        case 8:
          v11 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
          if ( !v11 )
            goto LABEL_2;
          sub_657CE140(v11, v27);
          break;
        case 9:
          v12 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
          if ( !v12 )
            goto LABEL_2;
          sub_657CE3D0(v12, v27);
          break;
        case 10:
          v13 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
          if ( !v13 )
            goto LABEL_2;
          sub_657CC2A0(v13, v28);
          break;
        case 11:
          v14 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
          if ( !v14 )
            goto LABEL_2;
          sub_657CC120(v14, 1);
          break;
        case 12:
          v15 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
          if ( !v15 )
            goto LABEL_2;
          sub_657CC120(v15, 0);
          break;
        case 14:
          v16 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
          if ( !v16 )
            goto LABEL_2;
          CharacterWindow_OnClose(v16, 1, 0);
          v17 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 6u);
          if ( !v17 || *(_BYTE *)(v17 + 20452) )
            break;
          v3 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4438);
          if ( v3 )
            v18 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
          else
            v18 = (char *)byte_659A8B98;
          FriendList_AddEntry(dword_65ABF748, v18, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
LABEL_18:
          if ( v3 )
LABEL_19:
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v3);
          break;
        case 15:
          v19 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
          if ( !v19 )
            goto LABEL_2;
          CharacterWindow_OnClose(v19, 0, 0);
          v3 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4439);
          if ( v3 )
            v20 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v3);
          else
            v20 = (char *)byte_659A8B98;
          FriendList_AddEntry(dword_65ABF748, v20, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
          if ( v3 )
            goto LABEL_19;
          break;
        default:
          goto LABEL_2;
      }
    }
    v29 = -1;
    sub_657CC6F0((int)v21);
    return 0;
  }
  else
  {
LABEL_2:
    v29 = -1;
    sub_657CC6F0((int)v21);
    return 1;
  }
}
// 657CC120: using guessed type int __thiscall sub_657CC120(_DWORD, _DWORD);
// 657CC2A0: using guessed type int __thiscall sub_657CC2A0(_DWORD, _DWORD);
// 657CD1D0: using guessed type int __thiscall sub_657CD1D0(_DWORD, _DWORD, _DWORD);
// 657CE040: using guessed type int __thiscall sub_657CE040(_DWORD, _DWORD);
// 657CE140: using guessed type int __thiscall sub_657CE140(_DWORD, _DWORD);
// 657CE260: using guessed type int __thiscall sub_657CE260(_DWORD, _DWORD);
// 657CE3D0: using guessed type int __thiscall sub_657CE3D0(_DWORD, _DWORD);
// 65898740: using guessed type int __cdecl sub_65898740(int, int);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF810: using guessed type int dword_65ABF810;

//----- (65898D70) --------------------------------------------------------
int __stdcall HandlePacket_ID_B1(int a1)
{
  int Dword_this; // eax
  int WindowById; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  _BYTE v8[1072]; // [esp+8h] [ebp-4A8h] BYREF
  int v9; // [esp+438h] [ebp-78h]
  char v10; // [esp+43Ch] [ebp-74h]
  _BYTE v11[26]; // [esp+470h] [ebp-40h] BYREF
  int v12; // [esp+48Ah] [ebp-26h]
  _BYTE v13[16]; // [esp+490h] [ebp-20h] BYREF
  int v14; // [esp+4ACh] [ebp-4h]

  sub_657B49A0(v8);
  v14 = 0;
  if ( Packet_ID_B1_read((int)v8, a1)
    && (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v9 == Dword_this) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x8000000);
    switch ( v10 )
    {
      case 2:
        WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x33u);
        if ( WindowById )
          sub_657B6FD0(WindowById, v11, v12);
        break;
      case 5:
        v4 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x33u);
        if ( v4 )
          sub_657B4000(v4, v11);
        break;
      case 9:
        v5 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x33u);
        if ( v5 )
          sub_657B4430(v5, v11);
        break;
      case 15:
        v6 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x33u);
        if ( v6 )
          sub_657B3550(v6, v13);
        break;
      case 17:
        v7 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x4Cu);
        if ( v7 )
          sub_65868770(v7, v13);
        GameMode_SetModeFour((int *)dword_65ABF6F4, 0x4Cu);
        break;
      default:
        break;
    }
    v14 = -1;
    sub_657B3E70(v8);
    return 0;
  }
  else
  {
    v14 = -1;
    sub_657B3E70(v8);
    return 1;
  }
}
// 657B3550: using guessed type int __thiscall sub_657B3550(_DWORD, _DWORD);
// 657B3E70: using guessed type int __thiscall sub_657B3E70(_DWORD);
// 657B4000: using guessed type int __thiscall sub_657B4000(_DWORD, _DWORD);
// 657B4430: using guessed type int __thiscall sub_657B4430(_DWORD, _DWORD);
// 657B49A0: using guessed type int __thiscall sub_657B49A0(_DWORD);
// 657B6FD0: using guessed type int __thiscall sub_657B6FD0(_DWORD, _DWORD, _DWORD);
// 65868770: using guessed type int __thiscall sub_65868770(_DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65898F30) --------------------------------------------------------
int __stdcall HandlePacket_ID_PLAYERFILE(int a1)
{
  int Dword_this; // eax
  int WindowById; // esi
  char v4[12]; // [esp+8h] [ebp-7B8h] BYREF
  _BYTE v5[1060]; // [esp+14h] [ebp-7ACh] BYREF
  int v6; // [esp+438h] [ebp-388h]
  int v7[80]; // [esp+444h] [ebp-37Ch] BYREF
  char v8[512]; // [esp+584h] [ebp-23Ch] BYREF
  _BYTE v9[44]; // [esp+784h] [ebp-3Ch] BYREF
  int v10; // [esp+7BCh] [ebp-4h]

  Packet_ID_PLAYERFILE_ctor(v4);
  v10 = 0;
  if ( Packet_ID_PLAYERFILE_read((int)v4, a1)
    && (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v6 == Dword_this) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x8000);
    WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Au);
    if ( WindowById )
    {
      TradeData_CopyFrom(WindowById, (int)v9);
      CharTransferUI_UpdateDisplay(WindowById, v7, v8);
    }
    v10 = -1;
    PacketData_ClearAll((int)v9);
    *(_DWORD *)v4 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v5);
    return 0;
  }
  else
  {
    v10 = -1;
    PacketData_ClearAll((int)v9);
    *(_DWORD *)v4 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v5);
    return 1;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65899050) --------------------------------------------------------
int __stdcall HandlePacket_ID_A9(int a1)
{
  int Dword_this; // eax
  int WindowById; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  _BYTE v8[1072]; // [esp+8h] [ebp-8B0h] BYREF
  int v9; // [esp+438h] [ebp-480h]
  char v10; // [esp+43Ch] [ebp-47Ch]
  int v11; // [esp+440h] [ebp-478h]
  _DWORD v12[59]; // [esp+444h] [ebp-474h] BYREF
  _BYTE v13[68]; // [esp+530h] [ebp-388h] BYREF
  char Source[32]; // [esp+574h] [ebp-344h] BYREF
  int v15; // [esp+594h] [ebp-324h]
  int v16; // [esp+598h] [ebp-320h]
  _BYTE v17[324]; // [esp+59Ch] [ebp-31Ch] BYREF
  _BYTE v18[16]; // [esp+6E0h] [ebp-1D8h] BYREF
  _BYTE v19[414]; // [esp+6F0h] [ebp-1C8h] BYREF
  int v20; // [esp+88Eh] [ebp-2Ah] BYREF
  int v21; // [esp+8B4h] [ebp-4h]

  sub_65817BB0(v8);
  v21 = 0;
  if ( Packet_ID_A9_read((int)v8, a1) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
    Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    if ( v9 == Dword_this )
    {
      switch ( v10 )
      {
        case 2:
        case 3:
          WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x24u);
          if ( WindowById )
            sub_6581DFB0(WindowById, v12, (int)v13, v15, v16);
          break;
        case 10:
          if ( CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x24u) )
            sub_6581DE00(v11, Source);
          break;
        case 11:
          v4 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x24u);
          if ( v4 )
            sub_6581E550(v4, v11, v17);
          break;
        case 14:
          v5 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x24u);
          if ( v5 )
            sub_65820610(v5, v18);
          break;
        case 18:
          v6 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x25u);
          if ( v6 )
            sub_65816B30(v6, v19);
          GameMode_SetModeFour((int *)dword_65ABF6F4, 0x25u);
          break;
        case 21:
          v7 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x24u);
          if ( v7 )
            sub_6581EC00(v7, (char *)&v20 + 2, v20);
          break;
        default:
          break;
      }
    }
    v21 = -1;
    sub_658179A0(v8);
    return 0;
  }
  else
  {
    v21 = -1;
    sub_658179A0(v8);
    return 1;
  }
}
// 65816B30: using guessed type int __thiscall sub_65816B30(_DWORD, _DWORD);
// 658179A0: using guessed type int __thiscall sub_658179A0(_DWORD);
// 65817BB0: using guessed type int __thiscall sub_65817BB0(_DWORD);
// 6581E550: using guessed type int __thiscall sub_6581E550(_DWORD, _DWORD, _DWORD);
// 6581EC00: using guessed type int __thiscall sub_6581EC00(_DWORD, _DWORD, _DWORD);
// 65820610: using guessed type int __thiscall sub_65820610(_DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65899270) --------------------------------------------------------
int __stdcall HandlePacket_ID_WORLD_SELECT_7B(int a1)
{
  int Dword_this; // eax
  unsigned int WindowById; // eax
  _DWORD pkt7B[269]; // [esp+8h] [ebp-490h] BYREF
  char pkt_subId; // [esp+43Ch] [ebp-5Ch]
  unsigned __int8 pkt_worldId; // [esp+43Dh] [ebp-5Bh]
  unsigned __int8 pkt_worldInst; // [esp+43Eh] [ebp-5Ah]
  _DWORD pkt_sub6Payload[8]; // [esp+468h] [ebp-30h] BYREF
  int dtorState; // [esp+494h] [ebp-4h]

  Packet_ID_WORLD_SELECT_Ctor((char *)pkt7B);
  dtorState = 0;
  if ( !Packet_ID_WORLD_SELECT_Read((int)pkt7B, a1) )
    goto LABEL_2;
  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x400000);
  Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
  if ( pkt7B[268] != Dword_this )
    goto LABEL_2;
  if ( pkt_subId != 4 )
  {
    if ( pkt_subId == 6 )
    {
      WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x31u);
      if ( WindowById )
        WorldSelect_HandleSubId6Payload(WindowById, pkt_sub6Payload);
      goto LABEL_9;
    }
LABEL_2:
    dtorState = -1;
    Packet_ID_7B_Dtor(pkt7B);
    return 1;
  }
  SharedMem_WriteDword_this(dword_65ABF73C, 0x1EEC1u, pkt_worldId);
  SharedMem_WriteDword_this(dword_65ABF73C, 0x1EEC2u, pkt_worldInst);
  SharedMem_WriteDword_this(dword_65ABF73C, 0x1EEC0u, 1);
  LoginUI_ShowMessage(11);
LABEL_9:
  dtorState = -1;
  Packet_ID_7B_Dtor(pkt7B);
  return 0;
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (658993B0) --------------------------------------------------------
int __stdcall HandlePacket_ID_FACTION(int a1)
{
  int Dword_this; // eax
  int WindowById; // eax
  int v3; // esi
  char v5[1072]; // [esp+8h] [ebp-17E0h] BYREF
  int v6; // [esp+438h] [ebp-13B0h]
  int v7; // [esp+17E4h] [ebp-4h]

  Packet_ID_FACTION_ctor(v5);
  v7 = 0;
  if ( (unsigned __int8)sub_657AACE0(v5, a1)
    && (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v6 == Dword_this)
    && ((*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096),
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x200000),
        (WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u)) != 0) )
  {
    v3 = sub_657E9880(WindowById, v5);
    v7 = -1;
    CharSelectPacket_Dtor(v5);
    return v3;
  }
  else
  {
    v7 = -1;
    CharSelectPacket_Dtor(v5);
    return 1;
  }
}
// 657AACE0: using guessed type int __thiscall sub_657AACE0(_DWORD, _DWORD);
// 657E9880: using guessed type int __thiscall sub_657E9880(_DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (658994B0) --------------------------------------------------------
int __stdcall HandlePacket_ID_AF(int a1)
{
  int Dword_this; // eax
  int WindowById; // eax
  unsigned int *v4; // eax
  int v5; // esi
  char *v6; // eax
  _DWORD *v7; // eax
  int v8; // eax
  int v9; // esi
  int v10[5]; // [esp-2Ch] [ebp-9C0h] BYREF
  char v11; // [esp-18h] [ebp-9ACh]
  int v12; // [esp-14h] [ebp-9A8h]
  int v13; // [esp-10h] [ebp-9A4h]
  int v14; // [esp-Ch] [ebp-9A0h]
  int v15; // [esp-8h] [ebp-99Ch]
  unsigned int v16; // [esp-4h] [ebp-998h]
  int *v17; // [esp+8h] [ebp-98Ch]
  _BYTE v18[1072]; // [esp+Ch] [ebp-988h] BYREF
  int v19; // [esp+43Ch] [ebp-558h]
  char v20; // [esp+440h] [ebp-554h]
  char v21[26]; // [esp+448h] [ebp-54Ch] BYREF
  char v22; // [esp+462h] [ebp-532h] BYREF
  int v23[171]; // [esp+664h] [ebp-330h] BYREF
  _BYTE v24[36]; // [esp+910h] [ebp-84h] BYREF
  _BYTE v25[36]; // [esp+934h] [ebp-60h] BYREF
  _BYTE v26[44]; // [esp+958h] [ebp-3Ch] BYREF
  int v27; // [esp+990h] [ebp-4h]

  sub_65843A40(v18);
  v27 = 0;
  if ( Packet_ID_AF_read((int)v18, a1)
    && (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v19 == Dword_this) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x20000);
    switch ( v20 )
    {
      case 3:
        WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Eu);
        if ( WindowById )
          TeamUI_ProcessInviteResponse(WindowById, (unsigned int)v21);
        break;
      case 4:
        v4 = (unsigned int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Eu);
        if ( v4 )
          TeamUI_ShowInviteDialog(v4, (unsigned int)v21);
        break;
      case 8:
        v5 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x30u);
        if ( v5 )
        {
          v16 = (unsigned int)&v22;
          v17 = v10;
          GuildMemberData_CopyFrom((char *)v10, (int)v26);
          MailUI_PopulateFromMailData(
            v5,
            (char *)v23,
            v10[0],
            v10[1],
            v10[2],
            v10[3],
            v10[4],
            v11,
            v12,
            v13,
            v14,
            v15,
            (char *)v16);
        }
        v16 = 48;
        goto LABEL_17;
      case 13:
        v6 = (char *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x30u);
        if ( v6 )
          MailUI_AddFriendEntry(v6, v24);
        break;
      case 15:
        v7 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
        if ( !v7 )
          goto LABEL_2;
        ItemDataSmall_CopyFrom(v7, (int)v25);
        v8 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
        v9 = v8;
        if ( v8 )
        {
          ProductionWindow_HandleActionEvent(v8, 6u);
          (*(void (__thiscall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v9 + 4))(v9, 5, 0, 0);
          v16 = 19;
LABEL_17:
          GameMode_SetModeFour((int *)dword_65ABF6F4, v16);
        }
        break;
      default:
        break;
    }
    v27 = -1;
    sub_65843B50(v18);
    return 0;
  }
  else
  {
LABEL_2:
    v27 = -1;
    sub_65843B50(v18);
    return 1;
  }
}
// 65843A40: using guessed type int __thiscall sub_65843A40(_DWORD);
// 65843B50: using guessed type int __thiscall sub_65843B50(_DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (658996D0) --------------------------------------------------------
int __stdcall HandlePacket_ID_B0(int a1)
{
  int Dword_this; // eax
  int v3; // eax
  int WindowById; // eax
  int v5[269]; // [esp+8h] [ebp-490h] BYREF
  char v6; // [esp+43Ch] [ebp-5Ch]
  int v7; // [esp+440h] [ebp-58h]
  _BYTE v8[16]; // [esp+448h] [ebp-50h] BYREF
  char v9[24]; // [esp+458h] [ebp-40h] BYREF
  _BYTE v10[24]; // [esp+470h] [ebp-28h] BYREF
  int v11; // [esp+494h] [ebp-4h]

  Packet_ID_B0_Ctor((char *)v5);
  v11 = 0;
  if ( Packet_ID_B0_read((int)v5, a1)
    && (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v5[268] == Dword_this) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x2000);
    switch ( v6 )
    {
      case 4:
        WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x32u);
        if ( WindowById )
          sub_657ABBA0(WindowById, v8);
        break;
      case 6:
        if ( CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Bu) )
          sub_657F5B10(v7, v9);
        break;
      case 9:
        v3 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Cu);
        if ( v3 )
          sub_657F66C0(v3, v10);
        SharedMem_ModifyU16_0x9D((char *)dword_65ABF748, 6);
        GameMode_SetModeFour((int *)dword_65ABF6F4, 0x3Cu);
        break;
    }
    v11 = -1;
    Packet_ID_B0_dtor(v5);
    return 0;
  }
  else
  {
    v11 = -1;
    Packet_ID_B0_dtor(v5);
    return 1;
  }
}
// 657ABBA0: using guessed type int __thiscall sub_657ABBA0(_DWORD, _DWORD);
// 657F66C0: using guessed type int __thiscall sub_657F66C0(_DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;

//----- (65899820) --------------------------------------------------------
int __stdcall HandlePacket_ID_B5(int a1)
{
  int Dword_this; // eax
  int WindowById; // eax
  unsigned int **v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  _BYTE v10[1072]; // [esp+8h] [ebp-E58h] BYREF
  int v11; // [esp+438h] [ebp-A28h]
  char v12; // [esp+43Ch] [ebp-A24h]
  _DWORD v13[49]; // [esp+444h] [ebp-A1Ch] BYREF
  _BYTE v14[16]; // [esp+508h] [ebp-958h] BYREF
  _BYTE v15[2324]; // [esp+518h] [ebp-948h] BYREF
  _BYTE v16[16]; // [esp+E2Ch] [ebp-34h] BYREF
  _BYTE v17[20]; // [esp+E3Ch] [ebp-24h] BYREF
  int v18; // [esp+E5Ch] [ebp-4h]

  sub_65825BE0(v10);
  v18 = 0;
  if ( Packet_ID_B5_read((int)v10, a1)
    && (Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu), v11 == Dword_this) )
  {
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x10000000);
    switch ( v12 )
    {
      case 1:
        WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Eu);
        if ( WindowById )
          sub_65828DA0(WindowById, v14);
        break;
      case 2:
        v4 = (unsigned int **)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Eu);
        if ( v4 )
          sub_65831390(v4, v13);
        break;
      case 3:
        v5 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Eu);
        if ( v5 )
          sub_658291C0(v5, v16);
        break;
      case 4:
        v6 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Eu);
        if ( v6 )
          sub_6582E790(v6, v15);
        break;
      case 7:
        v7 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x41u);
        if ( v7 )
          sub_65825700(v7, v16);
        GameMode_SetModeFour((int *)dword_65ABF6F4, 0x41u);
        break;
      case 11:
        v8 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x40u);
        if ( v8 )
          sub_65834550(v8, v16);
        sub_6572B090(dword_65ABF764, v17);
        break;
      case 13:
        v9 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x40u);
        if ( v9 )
          sub_65834600(v9, v16);
        break;
      default:
        break;
    }
    v18 = -1;
    sub_65826D80(v10);
    return 0;
  }
  else
  {
    v18 = -1;
    sub_65826D80(v10);
    return 1;
  }
}
// 6572B090: using guessed type int __thiscall sub_6572B090(_DWORD, _DWORD);
// 65825700: using guessed type int __thiscall sub_65825700(_DWORD, _DWORD);
// 65825BE0: using guessed type int __thiscall sub_65825BE0(_DWORD);
// 65826D80: using guessed type int __thiscall sub_65826D80(_DWORD);
// 65828DA0: using guessed type int __thiscall sub_65828DA0(_DWORD, _DWORD);
// 658291C0: using guessed type int __thiscall sub_658291C0(_DWORD, _DWORD);
// 6582E790: using guessed type int __thiscall sub_6582E790(_DWORD, _DWORD);
// 65834550: using guessed type int __thiscall sub_65834550(_DWORD, _DWORD);
// 65834600: using guessed type int __thiscall sub_65834600(_DWORD, _DWORD);
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (65899A40) --------------------------------------------------------
int __userpurge ClientShell_OnMessage_DispatchPacketId@<eax>(
        char *shell@<ecx>,
        double a2@<st0>,
        char pktId,
        int payload)
{
  int result; // eax

  if ( !payload )
    return 1;
  result = 0;
  switch ( pktId )
  {
    case 14:
    case 15:
    case 16:
    case 18:
    case 19:
    case 20:
    case 21:
    case 22:
    case 23:
    case 28:
    case 29:
    case 30:
    case 95:
      result = Network_HandleRakNetMessage(shell, pktId, payload);
      break;
    case 24:
      result = Network_CheckTimeoutCounter(shell, payload);
      break;
    case 26:
      result = HandlePacket_Timestamp(payload);
      break;
    case 107:
      result = Packet_Id107_DispatchSubId(dword_65ABF704, payload);
      break;
    case 109:
      result = HandlePacket_ID_LOGIN_REQUEST_RETURN(payload);
      break;
    case 111:
      result = HandlePacket_ID_LOGIN_RETURN(a2, payload);
      break;
    case 112:
      result = HandlePacket_ID_LOGIN_TOKEN_CHECK(payload, payload);
      break;
    case 115:
      result = HandlePacket_ID_WORLD_LOGIN_RETURN_73(payload);
      break;
    case 123:
      result = HandlePacket_ID_WORLD_SELECT_7B(payload);
      break;
    case 125:
      result = HandlePacket_ID_7D_WriteSharedMem_0x2BD0((char *)dword_65ABF748, payload);
      break;
    case -127:
      result = HandlePacket_ID_ITEMS_REMOVED(payload);
      break;
    case -126:
      result = HandlePacket_ID_ITEMS_CHANGED(payload);
      break;
    case -120:
      result = HandlePacket_ID_ITEM_REMOVED(payload);
      break;
    case -118:
      result = sub_65890D70(shell, payload);
      break;
    case -116:
      result = sub_65893740(shell, payload);
      break;
    case -114:
      result = HandlePacket_NAME_CHANGE(payload);
      break;
    case -113:
      result = HandlePacket_ID_UNLOAD_WEAPON(payload);
      break;
    case -112:
      result = HandlePacket_ID_MERGE_ITEMS(payload);
      break;
    case -110:
      HandlePacket_ID_BACKPACK_CONTENTS(payload);
      JUMPOUT(0x65899B9C);
    case -109:
      result = HandlePacket_ID_ITEMS_ADDED(payload);
      break;
    case -105:
      result = HandlePacket_ID_FRIENDS(payload);
      break;
    case -103:
      result = HandlePacket_STORAGE((int)shell, payload);
      break;
    case -102:
      result = HandlePacket_MINING(payload);
      break;
    case -101:
      result = HandlePacket_ID_PRODUCTION(payload);
      break;
    case -100:
      result = HandlePacket_ID_MARKET(payload);
      break;
    case -99:
      result = HandlePacket_ID_FACTION(payload);
      break;
    case -97:
      result = HandlePacket_ID_PLAYERFILE(payload);
      break;
    case -94:
      result = HandlePacket_SPLIT_CONTAINER(payload);
      break;
    case -93:
      result = HandlePacket_ID_SKILLS(payload);
      break;
    case -92:
      result = HandlePacket_ID_USE_ITEM(payload);
      break;
    case -91:
      result = HandlePacket_ID_A5(payload);
      break;
    case -90:
      result = HandlePacket_ID_A6(payload);
      break;
    case -88:
      result = HandlePacket_ID_A8(payload);
      break;
    case -87:
      result = HandlePacket_ID_A9(payload);
      break;
    case -86:
      result = HandlePacket_ID_PLAYER2PLAYER(payload);
      break;
    case -84:
      result = HandlePacket_ID_AC(payload);
      break;
    case -83:
      result = HandlePacket_REPAIR_ITEM(payload);
      break;
    case -82:
      result = HandlePacket_ID_RECYCLE_ITEM(payload);
      break;
    case -81:
      result = HandlePacket_ID_AF(payload);
      break;
    case -80:
      result = HandlePacket_ID_B0(payload);
      break;
    case -79:
      result = HandlePacket_ID_B1(payload);
      break;
    case -78:
      result = HandlePacket_ID_B2(payload);
      break;
    case -75:
      result = HandlePacket_ID_B5(payload);
      break;
    case -74:
      result = HandlePacket_ID_B6(payload);
      break;
    default:
      return result;
  }
  return result;
}
// 65899B9B: control flows out of bounds to 65899B9C
// 65ABF748: using guessed type int dword_65ABF748;

//----- (6589AB60) --------------------------------------------------------
void __thiscall Quaternion_Slerp(float *this, float *a2, float *a3, float a4)
{
  long double v5; // st7
  double v6; // st7
  float v7; // [esp+8h] [ebp-14h]
  float v8; // [esp+Ch] [ebp-10h]
  float v9; // [esp+10h] [ebp-Ch]
  float v10; // [esp+14h] [ebp-8h]
  float v11; // [esp+18h] [ebp-4h]
  float v12; // [esp+18h] [ebp-4h]
  float v13; // [esp+18h] [ebp-4h]
  float v14; // [esp+24h] [ebp+8h]
  float v15; // [esp+24h] [ebp+8h]
  float v16; // [esp+24h] [ebp+8h]
  float v17; // [esp+28h] [ebp+Ch]
  float v18; // [esp+28h] [ebp+Ch]
  float v19; // [esp+2Ch] [ebp+10h]
  float v20; // [esp+2Ch] [ebp+10h]
  float v21; // [esp+2Ch] [ebp+10h]

  v14 = *a2 * *a3 + a2[1] * a3[1] + a2[2] * a3[2] + a2[3] * a3[3];
  v5 = v14;
  if ( v14 >= 0.0 )
  {
    v7 = *a3;
    v8 = a3[1];
    v9 = a3[2];
    v10 = a3[3];
  }
  else
  {
    v15 = -v5;
    v7 = -*a3;
    v8 = -a3[1];
    v9 = -a3[2];
    v10 = -a3[3];
    v5 = v15;
  }
  if ( 1.0 - v5 <= 0.00009999999747378752 )
  {
    v6 = a4;
    v13 = 1.0 - a4;
  }
  else
  {
    v16 = acos(v5);
    v17 = sin(v16);
    v18 = 1.0 / v17;
    v11 = (1.0 - a4) * v16;
    v12 = sin(v11);
    v13 = v12 * v18;
    v19 = v16 * a4;
    v20 = sin(v19);
    v6 = v20 * v18;
  }
  v21 = v6;
  *this = *a2 * v13 + v21 * v7;
  *(this + 1) = v21 * v8 + v13 * a2[1];
  *(this + 2) = a2[2] * v13 + v21 * v9;
  *(this + 3) = v21 * v10 + v13 * a2[3];
}

//----- (6589AD30) --------------------------------------------------------
void __thiscall sub_6589AD30(int this)
{
  DWORD Time; // ecx
  _DWORD *v3; // edi
  double v4; // st7
  int v5; // ebx
  DWORD v6; // eax
  double v7; // st7
  float v8; // [esp+0h] [ebp-14h]
  float v9; // [esp+0h] [ebp-14h]
  float recoilScale; // [esp+10h] [ebp-4h]
  float v11; // [esp+10h] [ebp-4h]
  float v12; // [esp+10h] [ebp-4h]
  float v13; // [esp+10h] [ebp-4h]
  float v14; // [esp+10h] [ebp-4h]
  float v15; // [esp+10h] [ebp-4h]

  if ( !*(_DWORD *)(this + 4) )
    return;
  Time = timeGetTime();
  *(_DWORD *)(this + 12) = Time;
  recoilScale = g_pGameClientShell->recoilScale;
  if ( *(float *)(this + 40) < (double)*(float *)(this + 36) )
  {
    v11 = recoilScale * 90.0 + *(float *)(this + 40);
    *(float *)(this + 40) = v11;
    if ( *(float *)(this + 36) >= (double)v11 )
      goto LABEL_8;
    goto LABEL_7;
  }
  if ( *(float *)(this + 40) > (double)*(float *)(this + 36) )
  {
    v12 = *(float *)(this + 40) - recoilScale * 90.0;
    *(float *)(this + 40) = v12;
    if ( *(float *)(this + 36) > (double)v12 )
LABEL_7:
      *(float *)(this + 40) = *(float *)(this + 36);
  }
LABEL_8:
  v3 = (_DWORD *)(this + 16);
  v13 = ((double)Time - (double)*(unsigned int *)(this + 16)) * 0.001000000047497451;
  if ( *(_BYTE *)(this + 604) )
    goto LABEL_28;
  if ( Time >= *(_DWORD *)(this + 600) )
  {
    *(float *)(this + 596) = 0.0;
    *(_BYTE *)(this + 604) = 1;
  }
  if ( *(_BYTE *)(this + 604) )
  {
LABEL_28:
    if ( *(_BYTE *)(this + 605) )
    {
      v4 = 0.0;
      *(float *)(this + 596) = *(float *)(this + 596) - 90.0 * v13;
      if ( dword_65ABF834 && dword_65ABF830 )
      {
        v14 = ((double (__stdcall *)(int))*(_DWORD *)(*(_DWORD *)dword_65ABF834 + 92))(dword_65ABF830);
        v4 = 0.0;
      }
      else
      {
        v14 = 0.0;
      }
      if ( v14 >= (double)*(float *)(this + 596) )
      {
        v8 = v4;
        sub_657159F0(v8);
        *(float *)(this + 596) = v4;
        *(_BYTE *)(this + 604) = 0;
        *(_BYTE *)(this + 605) = 0;
        v5 = Rand_InRange(5000, 10000);
        v6 = timeGetTime();
        *v3 = *(_DWORD *)(this + 12);
        *(_DWORD *)(this + 600) = v6 + v5;
        return;
      }
    }
    else
    {
      v7 = 0.0;
      *(float *)(this + 596) = 90.0 * v13 + *(float *)(this + 596);
      if ( dword_65ABF840 && dword_65ABF83C )
      {
        v15 = ((double (__stdcall *)(int))*(_DWORD *)(*(_DWORD *)dword_65ABF840 + 92))(dword_65ABF83C);
        v7 = 0.0;
      }
      else
      {
        v15 = 0.0;
      }
      if ( v15 <= (double)*(float *)(this + 596) )
      {
        v9 = v7;
        sub_657159F0(v9);
        *(float *)(this + 596) = v7;
        *v3 = *(_DWORD *)(this + 12);
        *(_BYTE *)(this + 605) = 1;
        return;
      }
    }
  }
  *v3 = *(_DWORD *)(this + 12);
}
// 65ABF830: using guessed type int dword_65ABF830;
// 65ABF834: using guessed type int dword_65ABF834;
// 65ABF83C: using guessed type int dword_65ABF83C;
// 65ABF840: using guessed type int dword_65ABF840;

//----- (6589BAD0) --------------------------------------------------------
_DWORD *sub_6589BAD0()
{
  _DWORD *result; // eax

  result = operator new(0x18u);
  if ( result )
    *result = 0;
  if ( result != (_DWORD *)-4 )
    result[1] = 0;
  if ( result != (_DWORD *)-8 )
    result[2] = 0;
  *((_BYTE *)result + 20) = 1;
  *((_BYTE *)result + 21) = 0;
  return result;
}

//----- (6589C3E0) --------------------------------------------------------
int **__thiscall sub_6589C3E0(int ***this, int **a2, int *a3, int *a4)
{
  int v5; // eax
  int *v6; // ecx
  _DWORD *v7; // eax
  int *v9; // edx
  int **v10; // eax
  int *v11; // ecx
  int *j; // eax
  int *i; // eax
  _BYTE v14[4]; // [esp+4h] [ebp-4h] BYREF

  v5 = (int)*(this + 1);
  v6 = a3;
  if ( a3 == *(int **)v5 && a4 == (int *)v5 )
  {
    sub_6589BB80(*(void **)(v5 + 4));
    (*(this + 1))[1] = (int *)*(this + 1);
    v7 = *(this + 1);
    *(this + 2) = 0;
    *v7 = v7;
    (*(this + 1))[2] = (int *)*(this + 1);
    *a2 = **(this + 1);
    return a2;
  }
  else
  {
    for ( ; a3 != a4; v6 = a3 )
    {
      v9 = v6;
      if ( !*((_BYTE *)v6 + 21) )
      {
        v10 = (int **)v6[2];
        if ( *((_BYTE *)v10 + 21) )
        {
          for ( i = (int *)v6[1]; !*((_BYTE *)i + 21); i = (int *)i[1] )
          {
            if ( v6 != (int *)i[2] )
              break;
            v6 = i;
          }
          a3 = i;
        }
        else
        {
          v11 = (int *)v6[2];
          for ( j = *v10; !*((_BYTE *)j + 21); j = (int *)*j )
            v11 = j;
          a3 = v11;
        }
      }
      sub_6589B810(this, v14, v9);
    }
    *a2 = v6;
    return a2;
  }
}
// 6589B810: using guessed type int __thiscall sub_6589B810(_DWORD, _DWORD, _DWORD);

//----- (6589C6F0) --------------------------------------------------------
int __thiscall sub_6589C6F0(int *this)
{
  int result; // eax
  int v3; // [esp+4h] [ebp-4h] BYREF

  result = *(this + 1);
  if ( result )
  {
    v3 = -1;
    result = (*(int (__thiscall **)(int, int, const char *, int *))(*(_DWORD *)dword_65A5AA48 + 60))(
               dword_65A5AA48,
               result,
               "Torso_u_node",
               &v3);
    if ( !result )
    {
      result = v3;
      if ( v3 != -1 )
      {
        (*(void (__thiscall **)(int, _DWORD, int, int (__cdecl *)(int, int), _DWORD))(*(_DWORD *)dword_65A5AA48 + 120))(
          dword_65A5AA48,
          *(this + 1),
          v3,
          sub_6589C4B0,
          0);
        result = (*(int (__thiscall **)(int, _DWORD, int, int (__cdecl *)(int, int), int *))(*(_DWORD *)dword_65A5AA48
                                                                                           + 112))(
                   dword_65A5AA48,
                   *(this + 1),
                   v3,
                   sub_6589C4B0,
                   this);
        if ( !result )
          *(this + 8) = v3;
      }
    }
  }
  return result;
}
// 6589C4B0: using guessed type int __cdecl sub_6589C4B0(int, int);
// 65A5AA48: using guessed type int dword_65A5AA48;

//----- (6589C770) --------------------------------------------------------
DWORD __thiscall sub_6589C770(DWORD *this)
{
  DWORD result; // eax
  int v3; // edi
  int v4; // [esp+4h] [ebp-4h] BYREF

  result = *(this + 1);
  if ( result )
  {
    v4 = -1;
    result = (*(int (__thiscall **)(int, DWORD, const char *, int *))(*(_DWORD *)dword_65A5AA48 + 60))(
               dword_65A5AA48,
               result,
               "Eyelid_node",
               &v4);
    if ( !result )
    {
      result = v4;
      if ( v4 != -1 )
      {
        (*(void (__thiscall **)(int, _DWORD, int, int (__cdecl *)(int, int), _DWORD))(*(_DWORD *)dword_65A5AA48 + 120))(
          dword_65A5AA48,
          *(this + 1),
          v4,
          sub_6589C4B0,
          0);
        result = (*(int (__thiscall **)(int, _DWORD, int, int (__cdecl *)(int, int), DWORD *))(*(_DWORD *)dword_65A5AA48
                                                                                             + 112))(
                   dword_65A5AA48,
                   *(this + 1),
                   v4,
                   sub_6589C4B0,
                   this);
        if ( !result )
        {
          *(this + 148) = v4;
          v3 = Rand_InRange(5000, 10000);
          result = timeGetTime();
          *(this + 150) = result + v3;
        }
      }
    }
  }
  return result;
}
// 6589C4B0: using guessed type int __cdecl sub_6589C4B0(int, int);
// 65A5AA48: using guessed type int dword_65A5AA48;

//----- (6589C8E0) --------------------------------------------------------
int __thiscall AnimTree_ClearAll(int this)
{
  int *v3; // [esp+4h] [ebp-4h] BYREF

  sub_6589C3E0((int ***)this, &v3, **(int ***)(this + 4), *(int **)(this + 4));
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return 0;
}

//----- (6589C9B0) --------------------------------------------------------
int __thiscall sub_6589C9B0(int this)
{
  int result; // eax
  _BYTE v3[64]; // [esp+4h] [ebp-4Ch] BYREF
  int v4; // [esp+44h] [ebp-Ch] BYREF
  int v5; // [esp+48h] [ebp-8h] BYREF
  int v6; // [esp+4Ch] [ebp-4h] BYREF

  result = *(_DWORD *)(this + 4);
  if ( result )
  {
    v6 = -1;
    result = (*(int (__thiscall **)(int, int, const char *, int *))(*(_DWORD *)dword_65A5AA48 + 60))(
               dword_65A5AA48,
               result,
               "RightArmHand",
               &v6);
    if ( !result && v6 != -1 )
    {
      (*(void (__thiscall **)(int, _DWORD, const char *, int *))(*(_DWORD *)dword_65A5AA48 + 20))(
        dword_65A5AA48,
        *(_DWORD *)(this + 4),
        "RightHand",
        &v5);
      (*(void (__thiscall **)(int, _DWORD, int, _BYTE *, int, int))(*(_DWORD *)dword_65A5AA48 + 24))(
        dword_65A5AA48,
        *(_DWORD *)(this + 4),
        v5,
        v3,
        1,
        1);
      sub_6589B340(this + 60, v3);
      (*(void (__thiscall **)(int, _DWORD, const char *, int *))(*(_DWORD *)dword_65A5AA48 + 20))(
        dword_65A5AA48,
        *(_DWORD *)(this + 4),
        "PrM",
        &v5);
      (*(void (__thiscall **)(int, _DWORD, int, _BYTE *, int, int))(*(_DWORD *)dword_65A5AA48 + 24))(
        dword_65A5AA48,
        *(_DWORD *)(this + 4),
        v5,
        v3,
        1,
        1);
      sub_6589B340(this + 188, v3);
      v4 = 1;
      *(_DWORD *)sub_6589C820(this + 48, &v4) = this + 60;
      v4 = 2;
      *(_DWORD *)sub_6589C820(this + 48, &v4) = this + 60;
      v4 = 6;
      *(_DWORD *)sub_6589C820(this + 48, &v4) = this + 60;
      v4 = 10;
      *(_DWORD *)sub_6589C820(this + 48, &v4) = this + 60;
      v4 = 17;
      *(_DWORD *)sub_6589C820(this + 48, &v4) = this + 60;
      v4 = 18;
      *(_DWORD *)sub_6589C820(this + 48, &v4) = this + 60;
      v4 = 9;
      *(_DWORD *)sub_6589C820(this + 48, &v4) = this + 188;
      v4 = 15;
      *(_DWORD *)sub_6589C820(this + 48, &v4) = this + 188;
      (*(void (__thiscall **)(int, _DWORD, int, int (__cdecl *)(int, int), _DWORD))(*(_DWORD *)dword_65A5AA48 + 120))(
        dword_65A5AA48,
        *(_DWORD *)(this + 4),
        v6,
        sub_6589C4B0,
        0);
      result = (*(int (__thiscall **)(int, _DWORD, int, int (__cdecl *)(int, int), int))(*(_DWORD *)dword_65A5AA48 + 112))(
                 dword_65A5AA48,
                 *(_DWORD *)(this + 4),
                 v6,
                 sub_6589C4B0,
                 this);
      if ( !result )
      {
        *(_DWORD *)(this + 20) = v6;
        result = sub_65733190(this + 572);
        *(float *)(this + 580) = 1.0;
      }
    }
  }
  return result;
}
// 65733190: using guessed type int __thiscall sub_65733190(_DWORD);
// 6589B340: using guessed type int __thiscall sub_6589B340(_DWORD, _DWORD);
// 6589C4B0: using guessed type int __cdecl sub_6589C4B0(int, int);
// 6589C820: using guessed type int __thiscall sub_6589C820(_DWORD, _DWORD);
// 65A5AA48: using guessed type int dword_65A5AA48;

//----- (6589CBC0) --------------------------------------------------------
float *__thiscall CharacterAnimState_Init(float *this)
{
  float *v2; // edi
  _DWORD *v3; // eax

  *this = 1000.0;
  v2 = this + 12;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *(this + 1) = 0.0;
  *((_BYTE *)this + 8) = 0;
  *(this + 3) = 0.0;
  *(this + 11) = 1000.0;
  *(this + 4) = 0.0;
  *(this + 5) = NAN;
  *(this + 6) = NAN;
  *(this + 7) = NAN;
  *(this + 8) = NAN;
  v3 = sub_6589BAD0();
  *((_DWORD *)v2 + 1) = v3;
  *((_BYTE *)v3 + 21) = 1;
  *(float *)(*((_DWORD *)v2 + 1) + 4) = v2[1];
  **((float **)v2 + 1) = v2[1];
  *(float *)(*((_DWORD *)v2 + 1) + 8) = v2[1];
  v2[2] = 0.0;
  FloatObject_Ctor(this + 143);
  *(this + 149) = 0.0;
  *((_WORD *)this + 295) = 0;
  *((_BYTE *)this + 588) = 0;
  *(this + 148) = NAN;
  *(this + 150) = 0.0;
  *((_BYTE *)this + 604) = 0;
  *((_BYTE *)this + 605) = 0;
  return this;
}

//----- (6589CCA0) --------------------------------------------------------
int __thiscall CharacterAnimState_SetModel(int this, int __return_address)
{
  int result; // eax

  result = __return_address;
  if ( __return_address )
  {
    *(_DWORD *)(this + 4) = __return_address;
    *(_BYTE *)(this + 588) = 0;
    ConsoleVar_Init(&dword_65ABF830, g_pILTClient, "EyelidMin", 0, 0.0);
    ConsoleVar_Init(&dword_65ABF83C, g_pILTClient, "EyelidMax", 0, 15.0);
    ConsoleVar_Init(&dword_65ABF848, g_pILTClient, "AxisX", 0, 1.0);
    ConsoleVar_Init(&dword_65ABF854, g_pILTClient, "AxisY", 0, 0.0);
    ConsoleVar_Init(&dword_65ABF860, g_pILTClient, "AxisZ", 0, 0.0);
    sub_6589C6F0((int *)this);
    if ( *(_DWORD *)(this + 4) == *(_DWORD *)dword_65ABF704 )
      sub_6589C9B0(this);
    sub_6589C770((DWORD *)this);
    return 1;
  }
  return result;
}
// 65ABF830: using guessed type int dword_65ABF830;
// 65ABF83C: using guessed type int dword_65ABF83C;
// 65ABF848: using guessed type int dword_65ABF848;
// 65ABF854: using guessed type int dword_65ABF854;
// 65ABF860: using guessed type int dword_65ABF860;

//----- (6589CDD0) --------------------------------------------------------
int __thiscall sub_6589CDD0(int this)
{
  CharacterInfo_Ctor((float *)this, 5);
  *(_DWORD *)this = &off_659CECB0;
  *(_WORD *)(this + 88) = 0;
  *(_BYTE *)(this + 90) = 0;
  *(_BYTE *)(this + 112) = 0;
  return this;
}
// 659CECB0: using guessed type void *off_659CECB0;

//----- (6589D200) --------------------------------------------------------
float *__thiscall sub_6589D200(float *this)
{
  sub_6589D040();
  *(_DWORD *)this = &off_659CED44;
  sub_6589CE80(this + 60);
  *(this + 107) = 0.0;
  *((_DWORD *)this + 105) = 1;
  *(this + 106) = 0.0099999998;
  *(this + 109) = 0.0;
  return this;
}
// 6589CE80: using guessed type int __thiscall sub_6589CE80(_DWORD);
// 6589D040: using guessed type int sub_6589D040(void);
// 659CED44: using guessed type void *off_659CED44;

//----- (6589D9D0) --------------------------------------------------------
LONG __thiscall SharedMem_WriteTargetEntity(int this, int a2)
{
  return SharedMem_WriteDword_this((void *)(this + 4), 0x1EA44u, a2);
}

//----- (6589DDC0) --------------------------------------------------------
_DWORD *__cdecl sub_6589DDC0(_DWORD *a1)
{
  _DWORD *result; // eax
  int *v2; // ecx

  result = a1;
  v2 = (int *)*a1;
  if ( !*(_BYTE *)(*a1 + 21) )
  {
    do
    {
      result = v2;
      v2 = (int *)*v2;
    }
    while ( !*((_BYTE *)v2 + 21) );
  }
  return result;
}

//----- (6589DE50) --------------------------------------------------------
int __cdecl sub_6589DE50(int a1)
{
  int result; // eax
  int i; // ecx

  result = a1;
  for ( i = *(_DWORD *)(a1 + 8); !*(_BYTE *)(i + 21); i = *(_DWORD *)(i + 8) )
    result = i;
  return result;
}

//----- (6589DE70) --------------------------------------------------------
int __thiscall AnimTreeIter_Increment(int **this)
{
  int *v1; // eax
  int result; // eax
  int v3; // edx

  v1 = *this;
  if ( *((_BYTE *)*this + 21) )
  {
    result = v1[2];
    *this = (int *)result;
  }
  else
  {
    v3 = *v1;
    if ( *(_BYTE *)(*v1 + 21) )
    {
      for ( result = v1[1]; !*(_BYTE *)(result + 21); result = *(_DWORD *)(result + 4) )
      {
        if ( *this != *(int **)result )
          break;
        *this = (int *)result;
      }
      if ( !*((_BYTE *)*this + 21) )
        *this = (int *)result;
    }
    else
    {
      for ( result = *(_DWORD *)(v3 + 8); !*(_BYTE *)(result + 21); result = *(_DWORD *)(result + 8) )
        v3 = result;
      *this = (int *)v3;
    }
  }
  return result;
}

//----- (6589E070) --------------------------------------------------------
bool __thiscall SkillSlot_IsMaxLevel(int this)
{
  char v3[84]; // [esp+4h] [ebp-58h] BYREF

  return !SkillDefTable_CopyEntry(*(_WORD *)this, v3) || *(_BYTE *)(this + 2) >= v3[80];
}

//----- (6589E0F0) --------------------------------------------------------
int __cdecl Math_RoundFloat(float a1)
{
  double v1; // st7

  v1 = a1;
  if ( a1 >= 0.0 )
    return (int)(float)(v1 + 0.5);
  else
    return (int)(float)(v1 - 0.5);
}

//----- (6589E180) --------------------------------------------------------
char __thiscall ItemSlots_HasFireableTypeAllowlist(_WORD *this)
{
  unsigned __int8 v2; // bl
  char result; // al

  v2 = 0;
  while ( 1 )
  {
    result = ItemTemplate_IsFireableTypeAllowlist(g_ItemTemplateById, *(this + 24 * v2 + 2));
    if ( result )
      break;
    if ( ++v2 >= 3u )
      return result;
  }
  return 1;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6589E230) --------------------------------------------------------
BOOL __thiscall ByteArray4_Compare(_BYTE *this, _BYTE *a2)
{
  return *this == *a2 && *(this + 1) == a2[1] && *(this + 2) == a2[2] && *(this + 3) == a2[3];
}

//----- (6589E270) --------------------------------------------------------
int __thiscall CharacterStats_Init(_DWORD *this)
{
  *(_BYTE *)this = 0;
  *(this + 1) = 0;
  *(this + 6) = 0;
  *(this + 7) = 0;
  *((_BYTE *)this + 32) = 0;
  *(_DWORD *)((char *)this + 34) = 0;
  *(_DWORD *)((char *)this + 38) = 0;
  *(_DWORD *)((char *)this + 42) = 0;
  *(_DWORD *)((char *)this + 46) = 0;
  *(_DWORD *)((char *)this + 50) = 0;
  *(_DWORD *)((char *)this + 54) = 0;
  *(_DWORD *)((char *)this + 58) = 0;
  *(_DWORD *)((char *)this + 62) = 0;
  *(_DWORD *)((char *)this + 66) = 0;
  *(_DWORD *)((char *)this + 70) = 0;
  *(_DWORD *)((char *)this + 74) = 0;
  *(_DWORD *)((char *)this + 78) = 0;
  *((_WORD *)this + 48) = 0;
  *((_WORD *)this + 67) = 0;
  *(this + 21) = 0;
  *(this + 22) = 0;
  *(this + 23) = 0;
  *(this + 25) = 0;
  *(this + 26) = 0;
  *(this + 27) = 0;
  *(this + 28) = 0;
  *((_BYTE *)this + 116) = 0;
  *(this + 30) = 0;
  *((_BYTE *)this + 124) = 0;
  *(this + 32) = 0;
  *((_BYTE *)this + 132) = 0;
  *((_BYTE *)this + 133) = 0;
  *((_WORD *)this + 70) = 0;
  *((_WORD *)this + 71) = 0;
  *((_WORD *)this + 72) = 0;
  *((_WORD *)this + 75) = 0;
  *((_BYTE *)this + 148) = 0;
  *((_BYTE *)this + 149) = 0;
  *((_BYTE *)this + 152) = 0;
  *((_BYTE *)this + 184) = 0;
  *(this + 39) = 0;
  *((_BYTE *)this + 160) = 1;
  *((_BYTE *)this + 162) = 100;
  *((_BYTE *)this + 163) = 50;
  *((_BYTE *)this + 164) = 0;
  *(this + 42) = 0;
  *(this + 43) = 0;
  *((_BYTE *)this + 176) = 0;
  *(this + 45) = 0;
  *((_BYTE *)this + 161) = 100;
  *(this + 47) = 0;
  *(this + 48) = 0;
  *((_BYTE *)this + 200) = 0;
  return 100;
}

//----- (6589E3F0) --------------------------------------------------------
char *__thiscall Packet_ID_WEAPONFIRE_ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_WORD *)this + 538) = 0;
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *((_DWORD *)this + 268) = 0;
  *((_DWORD *)this + 270) = 0;
  *(this + 1064) = -121;
  *(_DWORD *)this = &Packet_ID_WEAPONFIRE_vtbl;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CEDA0: using guessed type _UNKNOWN *Packet_ID_WEAPONFIRE_vtbl;

//----- (6589E470) --------------------------------------------------------
char __stdcall EncVarMgr_WriteStatGroup2(char a1)
{
  return StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 2, &a1);
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6589E590) --------------------------------------------------------
char __stdcall EncVarMgr_WriteStatGroup3(char a1)
{
  return StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 3, &a1);
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6589E5B0) --------------------------------------------------------
char __stdcall EncVarMgr_WriteStatGroup4(char a1)
{
  return StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 4, &a1);
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6589E840) --------------------------------------------------------
unsigned __int8 __thiscall PlayerInput_UpdateAimVectors(_DWORD *this)
{
  unsigned __int8 result; // al
  _DWORD *v3; // edi
  int *UpVector; // eax
  int v5; // edx
  float v6; // [esp+Ch] [ebp-3Ch] BYREF
  float v7; // [esp+10h] [ebp-38h]
  float v8; // [esp+14h] [ebp-34h]
  float v9; // [esp+18h] [ebp-30h]
  float v10; // [esp+1Ch] [ebp-2Ch] BYREF
  float v11; // [esp+20h] [ebp-28h] BYREF
  float v12; // [esp+24h] [ebp-24h]
  float v13; // [esp+28h] [ebp-20h]
  float v14[3]; // [esp+2Ch] [ebp-1Ch] BYREF
  int v15[3]; // [esp+38h] [ebp-10h] BYREF
  float v16; // [esp+44h] [ebp-4h]

  result = dword_65ABF6F4;
  if ( *(_DWORD *)(dword_65ABF6F4 + 8) == 1 )
  {
    result = SharedMem_ReadBool_std(0x1D6A8u);
    if ( result )
    {
      (*(void (__cdecl **)(float *))(g_pILTClient + 28))(v14);
      v6 = 0.0;
      v7 = 0.0;
      v8 = 0.0;
      v9 = 1.0;
      if ( CameraState_IsActive(dword_65ABF724) )
      {
        v3 = dword_65ABF724;
        v10 = *((float *)dword_65ABF724 + 1);
        v11 = *((float *)dword_65ABF724 + 2);
        v12 = *((float *)dword_65ABF724 + 3);
        v13 = *((float *)dword_65ABF724 + 4);
        v6 = v10;
        v7 = v11;
        v8 = v12;
        v9 = v13;
      }
      else
      {
        (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 148))(g_pILTClient, *this, &v6);
        v3 = dword_65ABF724;
      }
      UpVector = (int *)Quat_GetUpVector(&v6, &v11);
      v15[0] = *UpVector;
      v15[1] = UpVector[1];
      v15[2] = UpVector[2];
      v16 = v14[0] * 45.0 * 3.141592741012573 / 180.0;
      Quat_RotateAroundAxis(&v6, (float *)v15, v16);
      if ( CameraState_IsActive(v3) )
      {
        return (unsigned __int8)CameraState_SetRotation((int)dword_65ABF724, &v6);
      }
      else
      {
        v10 = 0.0;
        v11 = 0.0;
        v5 = *this;
        v12 = 0.0;
        v13 = 1.0;
        (*(void (__thiscall **)(int, int, float *))(*(_DWORD *)g_pILTClient + 148))(g_pILTClient, v5, &v10);
        EncVarMgr_ValidateOrBumpCounter((_DWORD *)g_pEncVarMgr, 1, (int)&v10);
        EncVarMgr_SetVec4((_DWORD *)g_pEncVarMgr, 1u, &v6);
        (*(void (__cdecl **)(_DWORD, float *))(g_pILTClient + 552))(*this, &v6);
        return SharedMem_WriteVec4(0x1D6A0u, &v6);
      }
    }
  }
  return result;
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6589E9E0) --------------------------------------------------------
LONG __thiscall MsgId_70_Handler(_DWORD *this, float *a2)
{
  EncVarMgr_SetVec4((_DWORD *)g_pEncVarMgr, 1u, a2);
  (*(void (__cdecl **)(_DWORD, float *))(g_pILTClient + 552))(*this, a2);
  return SharedMem_WriteVec4(0x1D6A0u, a2);
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6589EA30) --------------------------------------------------------
char __thiscall PlayerInput_UpdatePitchFromMouse(float *this)
{
  double v2; // st7
  double Float_std; // st7
  char result; // al
  _BYTE v5[4]; // [esp+8h] [ebp-18h] BYREF
  float v6[2]; // [esp+Ch] [ebp-14h]
  int v7; // [esp+14h] [ebp-Ch] BYREF
  float v8; // [esp+18h] [ebp-8h]
  float v9; // [esp+1Ch] [ebp-4h] BYREF

  if ( *(_DWORD *)(dword_65ABF6F4 + 8) == 1 && SharedMem_ReadBool_std(0x1D6A8u) )
  {
    (*(void (__cdecl **)(_BYTE *))(g_pILTClient + 28))(v5);
    if ( (unsigned __int8)CVar_GetBoolDefault(dword_65ABF714, (int)"MouseInvertY", 0) )
      v2 = -1.0;
    else
      v2 = 1.0;
    v9 = v2;
    v8 = v6[0] * 22.5 * v9;
    if ( CameraState_IsActive(dword_65ABF724) )
    {
      v9 = *((float *)dword_65ABF724 + 5) + v8;
      if ( v9 > 50.0 )
        v9 = 50.0;
      if ( v9 < -50.0 )
        v9 = -50.0;
      CameraState_SetFOV((int)dword_65ABF724, &v9);
    }
    StatGroup_Read((_DWORD *)g_pEncVarMgr, 2, &v7);
    if ( !CameraState_IsActive(dword_65ABF724) || (v7 & 0x780) != 0 )
    {
      Float_std = SharedMem_ReadFloat_std(0x1D6A5u);
      v9 = Float_std + v8;
      if ( v9 > 50.0 )
        v9 = 50.0;
      if ( v9 < -50.0 )
        v9 = -50.0;
      SharedMem_WriteFloat(0x1D6A5u, v9);
    }
  }
  if ( SharedMem_ReadBool_std(0x1D699u)
    || SharedMem_ReadBool_std(0x1D698u)
    || SharedMem_ReadBool_std(0x1D69Bu)
    || SharedMem_ReadBool_std(0x1D69Au)
    || (result = SharedMem_ReadBool_std(0x1D69Cu)) != 0 )
  {
    result = SharedMem_WriteFloat(0x1D6A5u, 0.0);
    *(this + 53) = 0.0;
  }
  return result;
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6589EC60) --------------------------------------------------------
int __thiscall PlayerObject_UpdatePosition(_DWORD *this)
{
  int v2; // edx
  float v4[4]; // [esp+4h] [ebp-1Ch] BYREF
  float v5[3]; // [esp+14h] [ebp-Ch] BYREF

  sub_6589AD30((int)(this + 44));
  v4[0] = 0.0;
  v4[1] = 0.0;
  v4[2] = 0.0;
  v2 = *this;
  v4[3] = 1.0;
  (*(void (__thiscall **)(int, int, float *))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, v2, v5);
  (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 148))(g_pILTClient, *this, v4);
  return sub_6592E5D0((int)dword_65ABF768, v5, v4);
}

//----- (6589EDF0) --------------------------------------------------------
const char *__stdcall SoundDef_GetFootstepPath(char *Buffer, int a2, int a3, int a4, _BYTE *a5)
{
  const char *result; // eax
  char *v6; // esi
  unsigned int v7; // eax
  unsigned int v8; // esi

  result = (const char *)a3;
  *Buffer = 0;
  if ( a3 < 22 )
  {
    v6 = (char *)&unk_65A51198 + 80 * a3;
    if ( v6 )
    {
      v7 = a4 ? *((_DWORD *)v6 + 14) : *((_DWORD *)v6 + 13);
      result = (const char *)SoundDef_SelectRandomSound(v7);
      if ( result )
      {
        sprintf(Buffer, result, a2);
        if ( a4 )
          v8 = *((_DWORD *)v6 + 14);
        else
          v8 = *((_DWORD *)v6 + 13);
        result = (const char *)SoundDef_GetValidEntry(v8);
        if ( result )
        {
          *a5 = result[28];
          return a5;
        }
      }
    }
  }
  return result;
}

//----- (6589EEE0) --------------------------------------------------------
bool __thiscall WeaponSlot_MatchesAmmoType(_WORD *this, _WORD *a2)
{
  return a2[2] == *(this + 2) && a2[3] == *(this + 3) && a2[4] == *(this + 4);
}

//----- (6589EFD0) --------------------------------------------------------
int *__thiscall WeaponTree_Iter_Increment(int **this)
{
  int *result; // eax
  int *v2; // edx

  result = *this;
  if ( !*((_BYTE *)*this + 21) )
  {
    v2 = (int *)result[2];
    if ( *((_BYTE *)v2 + 21) )
    {
      for ( result = (int *)result[1]; !*((_BYTE *)result + 21); result = (int *)result[1] )
      {
        if ( *this != (int *)result[2] )
          break;
        *this = result;
      }
      *this = result;
    }
    else
    {
      result = (int *)*v2;
      if ( !*(_BYTE *)(*v2 + 21) )
      {
        do
        {
          v2 = result;
          result = (int *)*result;
        }
        while ( !*((_BYTE *)result + 21) );
      }
      *this = v2;
    }
  }
  return result;
}

//----- (6589F050) --------------------------------------------------------
_DWORD *__thiscall WeaponRBTree_FindRange(_DWORD *this, _DWORD *a2, unsigned int *a3)
{
  int *v3; // edx
  int *v4; // eax
  int *v5; // ebx
  unsigned int v6; // edi
  unsigned int v7; // esi
  int *v8; // eax

  v3 = (int *)*(this + 1);
  v4 = (int *)v3[1];
  v5 = v3;
  if ( !*((_BYTE *)v4 + 21) )
  {
    v6 = *a3;
    do
    {
      v7 = v4[3];
      if ( v7 >= v6 )
      {
        if ( *((_BYTE *)v3 + 21) && v6 < v7 )
          v3 = v4;
        v5 = v4;
        v4 = (int *)*v4;
      }
      else
      {
        v4 = (int *)v4[2];
      }
    }
    while ( !*((_BYTE *)v4 + 21) );
  }
  if ( *((_BYTE *)v3 + 21) )
    v8 = *(int **)(*(this + 1) + 4);
  else
    v8 = (int *)*v3;
  while ( !*((_BYTE *)v8 + 21) )
  {
    if ( *a3 >= v8[3] )
    {
      v8 = (int *)v8[2];
    }
    else
    {
      v3 = v8;
      v8 = (int *)*v8;
    }
  }
  *a2 = v5;
  a2[1] = v3;
  return a2;
}

//----- (6589F150) --------------------------------------------------------
_DWORD *__thiscall sub_6589F150(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  _DWORD *v4; // ecx

  result = *(_DWORD **)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *result;
  if ( !*(_BYTE *)(*result + 21) )
    *(_DWORD *)(*result + 4) = a2;
  result[1] = *(_DWORD *)(a2 + 4);
  v3 = *(this + 1);
  if ( a2 == *(_DWORD *)(v3 + 4) )
  {
    *(_DWORD *)(v3 + 4) = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  else
  {
    v4 = *(_DWORD **)(a2 + 4);
    if ( a2 == *v4 )
      *v4 = result;
    else
      v4[2] = result;
    *result = a2;
    *(_DWORD *)(a2 + 4) = result;
  }
  return result;
}

//----- (6589F1B0) --------------------------------------------------------
int __thiscall sub_6589F1B0(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // esi
  int v4; // ecx
  _DWORD *v5; // ecx

  result = *a2;
  *a2 = *(_DWORD *)(*a2 + 8);
  v3 = *(_DWORD *)(result + 8);
  if ( !*(_BYTE *)(v3 + 21) )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(result + 4) = a2[1];
  v4 = *(this + 1);
  if ( a2 == *(_DWORD **)(v4 + 4) )
  {
    *(_DWORD *)(v4 + 4) = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  else
  {
    v5 = (_DWORD *)a2[1];
    if ( a2 == (_DWORD *)v5[2] )
      v5[2] = result;
    else
      *v5 = result;
    *(_DWORD *)(result + 8) = a2;
    a2[1] = result;
  }
  return result;
}

//----- (6589F280) --------------------------------------------------------
char *__thiscall FlagByte4_WriteToStream(_BYTE *this, char *a2)
{
  if ( *this )
    BitStream_WriteBit1(a2);
  else
    BitStream_WriteBit0(a2);
  if ( *(this + 1) )
    BitStream_WriteBit1(a2);
  else
    BitStream_WriteBit0(a2);
  if ( *(this + 2) )
    BitStream_WriteBit1(a2);
  else
    BitStream_WriteBit0(a2);
  if ( *(this + 3) )
    return BitStream_WriteBit1(a2);
  else
    return BitStream_WriteBit0(a2);
}

//----- (6589F2F0) --------------------------------------------------------
int __thiscall WeaponFireEntry_Init(int this)
{
  SkillDef_InitDefaults((_WORD *)(this + 8));
  *(_DWORD *)(this + 34) = 0;
  *(_DWORD *)(this + 38) = 0;
  *(_DWORD *)(this + 42) = 0;
  *(_DWORD *)(this + 46) = 0;
  *(_DWORD *)(this + 50) = 0;
  *(_DWORD *)(this + 54) = 0;
  *(_DWORD *)(this + 58) = 0;
  *(_DWORD *)(this + 62) = 0;
  *(_DWORD *)(this + 66) = 0;
  *(_DWORD *)(this + 70) = 0;
  *(_DWORD *)(this + 74) = 0;
  *(_DWORD *)(this + 78) = 0;
  *(_BYTE *)(this + 82) = 0;
  *(_WORD *)(this + 142) = 0;
  *(_DWORD *)(this + 136) = 16;
  *(_WORD *)(this + 140) = 0;
  *(_WORD *)(this + 144) = 0;
  *(_BYTE *)(this + 196) = 0;
  *(_BYTE *)(this + 197) = 0;
  *(_BYTE *)(this + 198) = 0;
  *(_BYTE *)(this + 199) = 0;
  CharacterStats_Init((_DWORD *)this);
  *(_DWORD *)(this + 136) = 9;
  return this;
}

//----- (6589F380) --------------------------------------------------------
bool __thiscall WeaponFireEntry_Equals(int this, int a2)
{
  return *(_DWORD *)(this + 4) == *(_DWORD *)(a2 + 4)
      && *(_WORD *)(a2 + 12) == *(_WORD *)(this + 12)
      && *(_WORD *)(a2 + 14) == *(_WORD *)(this + 14)
      && *(_WORD *)(a2 + 16) == *(_WORD *)(this + 16)
      && *(_WORD *)(this + 20) == *(_WORD *)(a2 + 20)
      && *(_DWORD *)(this + 24) == *(_DWORD *)(a2 + 24)
      && *(_DWORD *)(this + 28) == *(_DWORD *)(a2 + 28)
      && *(_BYTE *)(this + 32) == *(_BYTE *)(a2 + 32)
      && U16Array20_Equals((unsigned __int16 *)(this + 34), a2 + 34)
      && *(_DWORD *)(this + 100) == *(_DWORD *)(a2 + 100)
      && *(_DWORD *)(this + 104) == *(_DWORD *)(a2 + 104)
      && *(_DWORD *)(this + 108) == *(_DWORD *)(a2 + 108)
      && *(_DWORD *)(this + 112) == *(_DWORD *)(a2 + 112)
      && *(_BYTE *)(this + 116) == *(_BYTE *)(a2 + 116)
      && *(_DWORD *)(this + 120) == *(_DWORD *)(a2 + 120)
      && *(_DWORD *)(this + 128) == *(_DWORD *)(a2 + 128)
      && *(_BYTE *)(this + 132) == *(_BYTE *)(a2 + 132)
      && *(_BYTE *)(this + 133) == *(_BYTE *)(a2 + 133)
      && *(_WORD *)(this + 134) == *(_WORD *)(a2 + 134)
      && WeaponSlot_MatchesAmmoType((_WORD *)(this + 136), (_WORD *)(a2 + 136))
      && *(_BYTE *)(this + 152) == *(_BYTE *)(a2 + 152)
      && *(_DWORD *)(this + 156) == *(_DWORD *)(a2 + 156)
      && *(_BYTE *)(this + 162) == *(_BYTE *)(a2 + 162)
      && *(_BYTE *)(this + 163) == *(_BYTE *)(a2 + 163)
      && *(_BYTE *)(this + 164) == *(_BYTE *)(a2 + 164)
      && *(_BYTE *)(this + 176) == *(_BYTE *)(a2 + 176)
      && *(_DWORD *)(this + 180) == *(_DWORD *)(a2 + 180)
      && *(_BYTE *)(this + 161) == *(_BYTE *)(a2 + 161)
      && ByteArray4_Compare((_BYTE *)(this + 196), (_BYTE *)(a2 + 196))
      && !_stricmp((const char *)(this + 200), (const char *)(a2 + 200));
}

//----- (6589F570) --------------------------------------------------------
bool __thiscall Packet_ID_UPDATE_read(_DWORD *this, int a2)
{
  return VariableSizedPacket::Read(this, a2) != 0;
}

//----- (6589F600) --------------------------------------------------------
int __thiscall PlayerMovementData_Init(float *this)
{
  int result; // eax

  *this = 0.0;
  *(this + 1) = 0.0;
  *(this + 2) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *(this + 12) = 1.0;
  *((_BYTE *)this + 44) = 0;
  *(this + 13) = 0.0;
  *(this + 14) = 0.0;
  *(this + 15) = 0.0;
  *(this + 16) = 0.0;
  *(this + 17) = 0.0;
  *(this + 18) = 0.0;
  *(this + 19) = 0.0;
  *(this + 20) = 0.80000001;
  *(this + 21) = 0.0;
  *(this + 22) = 0.0;
  *(this + 23) = 0.0;
  *(this + 24) = 0.0;
  *(this + 25) = 0.0;
  *(this + 26) = 0.0;
  *(this + 27) = 0.0;
  *(this + 28) = 0.0;
  *(this + 29) = 0.0;
  result = sub_65972370((_DWORD *)this + 30);
  *(this + 34) = 0.0;
  *((_BYTE *)this + 140) = 0;
  return result;
}

//----- (6589F680) --------------------------------------------------------
int __thiscall EntityQuery_GetSortedByDistance(_DWORD *this, int a2)
{
  return (*(int (__thiscall **)(_DWORD, int, int))(*(_DWORD *)*this + 44))(*this, a2, 96);
}

//----- (6589F6F0) --------------------------------------------------------
_DWORD *__cdecl sub_6589F6F0(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; ++result )
    *result = *a3;
  return result;
}

//----- (6589F740) --------------------------------------------------------
int __thiscall PlayerObjectMgr_OnMessage(float *this, int __return_address)
{
  int result; // eax

  if ( __return_address != *(_DWORD *)this )
  {
    PlayerMovementData_Init(this + 1);
    EncVarMgr_SetInt((_DWORD *)g_pEncVarMgr, 3u, 0);
    *(_DWORD *)this = __return_address;
  }
  CharacterAnimState_SetModel((int)(this + 44), __return_address);
  ConsoleVar_Init(dword_65ABF878, g_pILTClient, "SoundFilterInfo", 0, 1.0);
  result = *(_DWORD *)this;
  if ( *(_DWORD *)this )
  {
    EquipSlots_SetSlotInfo(dword_65ABF6FC, *((_DWORD *)dword_65ABF700 + 1), result, 0);
    (*(void (__thiscall **)(char *, _DWORD, const char *))(*(_DWORD *)&g_pGameClientShell[1]._pad0[24] + 4))(
      &g_pGameClientShell[1]._pad0[24],
      *(_DWORD *)this,
      "RightShoulder");
    return (*(int (__thiscall **)(int, _DWORD, int, int, int))(*(_DWORD *)dword_65A5AA40 + 84))(
             dword_65A5AA40,
             *(_DWORD *)this,
             3,
             2,
             2);
  }
  return result;
}
// 65A5AA40: using guessed type int dword_65A5AA40;
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65ABF878: using guessed type int dword_65ABF878[4];

//----- (6589F7F0) --------------------------------------------------------
char __thiscall Vehicle_ScanNearbyObjects(float *this)
{
  unsigned int v2; // eax
  int v3; // eax
  unsigned int v4; // ecx
  int v5; // edi
  _DWORD *v6; // ecx
  int v7; // edi
  int v8; // ecx
  double v9; // st7
  float v10; // eax
  float v11; // edx
  float v12; // edx
  float v13; // eax
  float v14; // eax
  float v15; // edx
  float v16; // eax
  float v17; // edx
  float v18; // edx
  float v19; // eax
  _BYTE v21[12]; // [esp+8h] [ebp-84h] BYREF
  _DWORD v22[10]; // [esp+14h] [ebp-78h] BYREF
  float v23; // [esp+3Ch] [ebp-50h]
  float v24; // [esp+40h] [ebp-4Ch]
  float v25; // [esp+44h] [ebp-48h]
  unsigned int v26; // [esp+48h] [ebp-44h]
  float v27; // [esp+4Ch] [ebp-40h]
  float v28; // [esp+50h] [ebp-3Ch]
  float v29; // [esp+54h] [ebp-38h]
  int Src; // [esp+58h] [ebp-34h] BYREF
  float v31; // [esp+5Ch] [ebp-30h]
  float v32; // [esp+60h] [ebp-2Ch]
  float v33; // [esp+64h] [ebp-28h]
  float v34; // [esp+68h] [ebp-24h]
  float v35; // [esp+6Ch] [ebp-20h]
  float v36; // [esp+70h] [ebp-1Ch]
  float v37; // [esp+74h] [ebp-18h]
  float v38; // [esp+78h] [ebp-14h]
  float v39; // [esp+7Ch] [ebp-10h]
  unsigned int i; // [esp+80h] [ebp-Ch]
  __int16 v41; // [esp+84h] [ebp-8h] BYREF
  int v42; // [esp+88h] [ebp-4h] BYREF

  PlayerMovementData_Init(this + 1);
  EncVarMgr_SetInt((_DWORD *)g_pEncVarMgr, 3u, 0);
  LOBYTE(v2) = SharedMem_ReadBool_std(0x55u);
  if ( (_BYTE)v2 )
  {
    (*(void (__thiscall **)(int, _DWORD, _BYTE *))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, *(_DWORD *)this, v21);
    memset(v22, 0, sizeof(v22));
    v3 = (*(int (__thiscall **)(int, _BYTE *, _DWORD *, int))(*(_DWORD *)dword_65A5A6E4 + 184))(
           dword_65A5A6E4,
           v21,
           v22,
           10);
    v4 = 0;
    v26 = v3;
    v42 = 0;
    for ( i = 0; v4 < v26; i = v4 )
    {
      v5 = v22[v4];
      if ( v5 )
      {
        v42 = 0;
        (*(void (__thiscall **)(int, int, int, int *))(*(_DWORD *)dword_65A5A6E8 + 76))(dword_65A5A6E8, v5, 2, &v42);
        if ( (v42 & 1) != 0 )
        {
          if ( (*(unsigned __int8 (__thiscall **)(int, int, __int16 *))(*(_DWORD *)dword_65A5A6E4 + 32))(
                 dword_65A5A6E4,
                 v5,
                 &v41) )
          {
            v2 = *((_DWORD *)this + 1);
            v6 = this + 1;
            if ( v2 >= 0xA )
              return v2;
            v6[v2 + 1] = v5;
            ++*v6;
            if ( v41 == 5 )
            {
              v7 = MsgId6B_LookupHandler((char *)dword_65ABF730, 0xAu, v5);
              if ( v7 )
              {
                EncVarMgr_SetInt((_DWORD *)g_pEncVarMgr, 3u, *(unsigned __int8 *)(v7 + 140));
                *(this + 31) = *(float *)(v7 + 141);
                *(this + 32) = *(float *)(v7 + 145);
                *(this + 33) = *(float *)(v7 + 149);
                *((_BYTE *)this + 136) = *(_BYTE *)(v7 + 153);
                *(this + 35) = *(float *)(v7 + 156);
                Src = *(unsigned __int8 *)(v7 + 140);
                StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 3, &Src);
                *((_BYTE *)this + 144) = 1;
              }
            }
            else
            {
              v8 = MsgId6B_LookupHandler((char *)dword_65ABF730, 8u, v5);
              if ( v8 || (v8 = MsgId6B_LookupHandler((char *)dword_65ABF730, 4u, v5)) != 0 )
              {
                *(this + 13) = *(float *)(v8 + 84) * *(this + 13);
                if ( *(float *)(v8 + 80) > (double)*(this + 14) )
                  *(this + 14) = *(float *)(v8 + 80);
                v9 = *(this + 15);
                v10 = *(float *)(v8 + 92);
                v37 = *(float *)(v8 + 88);
                v11 = *(float *)(v8 + 96);
                v38 = v10;
                *(this + 15) = v9 + v37;
                v39 = v11;
                *(this + 16) = *(this + 16) + v38;
                *(this + 17) = v39 + *(this + 17);
                v12 = *(float *)(v8 + 104);
                v23 = *(float *)(v8 + 100);
                v13 = *(float *)(v8 + 108);
                *(this + 18) = v23;
                v24 = v12;
                *(this + 19) = v12;
                v25 = v13;
                *(this + 20) = v13;
                *(this + 21) = *(float *)(v8 + 112);
                v14 = *(float *)(v8 + 120);
                v34 = *(float *)(v8 + 116);
                v15 = *(float *)(v8 + 124);
                *(this + 22) = v34;
                v35 = v14;
                *(this + 23) = v14;
                v36 = v15;
                *(this + 24) = v15;
                *((_BYTE *)this + 48) = *(_BYTE *)(v8 + 128);
                v16 = *(float *)(v8 + 72);
                v31 = *(float *)(v8 + 68);
                v17 = *(float *)(v8 + 76);
                *(this + 25) = v31;
                v32 = v16;
                *(this + 26) = v16;
                v33 = v17;
                *(this + 27) = v17;
                v18 = *(float *)(v8 + 60);
                v27 = *(float *)(v8 + 56);
                v19 = *(float *)(v8 + 64);
                *(this + 28) = v27;
                v28 = v18;
                *(this + 29) = v18;
                v29 = v19;
                *(this + 30) = v19;
              }
            }
          }
        }
      }
      v4 = i + 1;
    }
    LOBYTE(v2) = nullsub_11(this);
  }
  return v2;
}
// 6589ECD0: using guessed type int __thiscall nullsub_11(_DWORD);
// 65A5A6E4: using guessed type int dword_65A5A6E4;
// 65A5A6E8: using guessed type int dword_65A5A6E8;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (6589FAC0) --------------------------------------------------------
void __thiscall HumanDetection_ScanForHuman(int *this, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // eax
  int v8; // eax
  double v9; // st7
  double v10; // st7
  char v11; // bl
  int v12; // [esp+14h] [ebp-114h] BYREF
  int v13; // [esp+18h] [ebp-110h]
  char v14[4]; // [esp+1Ch] [ebp-10Ch] BYREF
  float v15; // [esp+20h] [ebp-108h]
  char Source[20]; // [esp+24h] [ebp-104h] BYREF

  Source[0] = 0;
  v6 = *(_DWORD *)(dword_65ABF6F4 + 8);
  if ( v6 == 1 || v6 == 4 )
  {
    v14[0] = 100;
    SoundDef_GetFootstepPath(Source, (int)"Human", a5, a6, v14);
    if ( !Source[0] )
    {
      v11 = v14[0];
LABEL_14:
      if ( v11 )
        SoundMgr_PlaySoundBySoundDef(dword_65ABF750, *this, 3u);
      return;
    }
    v8 = *this;
    v12 = 0;
    (*(void (__thiscall **)(int, int, int, int *))(*(_DWORD *)dword_65A5AA40 + 76))(dword_65A5AA40, v8, 2, &v12);
    v15 = 0.5;
    if ( (v12 & 0x200) != 0 )
    {
      v9 = 0.0;
    }
    else if ( (v12 & 0x40) != 0 )
    {
      v9 = 0.33000001;
    }
    else
    {
      if ( (v12 & 0x20) == 0 )
      {
LABEL_11:
        v10 = v15;
        LODWORD(v15) = (unsigned __int8)v14[0];
        v13 = (int)(v10 * (double)(unsigned __int8)v14[0]);
        v11 = v13;
        v14[0] = v13;
        if ( !(_BYTE)v13 )
          return;
        SoundMgr_PlaySoundAtPosition((float *)&a2, Source, 800.0, 2, v14[0]);
        goto LABEL_14;
      }
      v9 = 1.0;
    }
    v15 = v9;
    goto LABEL_11;
  }
}
// 65A5AA40: using guessed type int dword_65A5AA40;
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (6589FCF0) --------------------------------------------------------
void __stdcall sub_6589FCF0(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; !*((_BYTE *)i + 21); v1 = i )
  {
    sub_6589FCF0((void **)i[2]);
    i = (void **)*i;
    operator delete(v1);
  }
}

//----- (6589FD30) --------------------------------------------------------
_DWORD *__thiscall sub_6589FD30(_DWORD *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // ebx
  int v4; // edi
  _DWORD *v5; // eax
  _DWORD *v6; // edx
  int v7; // esi
  _DWORD *v8; // ecx
  int v9; // eax
  _DWORD *v10; // eax
  int v11; // ecx
  int v12; // ecx
  _DWORD *v13; // ecx
  char *v14; // ecx
  char *v15; // eax
  char v16; // dl
  _DWORD *i; // ecx
  _BYTE *v18; // eax
  int v19; // eax
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-5Ch] BYREF
  _BYTE v22[28]; // [esp+38h] [ebp-34h] BYREF
  int v23; // [esp+54h] [ebp-18h]
  void *v24; // [esp+58h] [ebp-14h]
  _DWORD *v25; // [esp+5Ch] [ebp-10h]
  int v26; // [esp+68h] [ebp-4h]

  v25 = this;
  v3 = (_DWORD *)a3;
  if ( *(_BYTE *)(a3 + 21) )
  {
    std::string::string(v22, "invalid map/set<T> iterator");
    v26 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v22);
    pExceptionObject[0] = &off_659BFD34;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVout_of_range_std__);
  }
  v24 = (void *)a3;
  WeaponTree_Iter_Increment((int **)&a3);
  if ( *(_BYTE *)(*v3 + 21) )
  {
    v4 = v3[2];
LABEL_8:
    v7 = v3[1];
    if ( !*(_BYTE *)(v4 + 21) )
      *(_DWORD *)(v4 + 4) = v7;
    v8 = v25;
    v9 = v25[1];
    if ( *(_DWORD **)(v9 + 4) == v3 )
    {
      *(_DWORD *)(v9 + 4) = v4;
    }
    else if ( *(_DWORD **)v7 == v3 )
    {
      *(_DWORD *)v7 = v4;
    }
    else
    {
      *(_DWORD *)(v7 + 8) = v4;
    }
    if ( *(_DWORD **)v8[1] == v3 )
    {
      if ( *(_BYTE *)(v4 + 21) )
      {
        v10 = (_DWORD *)v7;
      }
      else
      {
        v10 = sub_6589DDC0((_DWORD *)v4);
        v8 = v25;
      }
      *(_DWORD *)v8[1] = v10;
    }
    v11 = v8[1];
    v23 = v11;
    if ( *(_DWORD **)(v11 + 8) == v3 )
    {
      if ( *(_BYTE *)(v4 + 21) )
        *(_DWORD *)(v11 + 8) = v7;
      else
        *(_DWORD *)(v23 + 8) = sub_6589DE50(v4);
    }
    goto LABEL_36;
  }
  if ( *(_BYTE *)(v3[2] + 21) )
  {
    v4 = *v3;
    goto LABEL_8;
  }
  v5 = (_DWORD *)a3;
  v4 = *(_DWORD *)(a3 + 8);
  v6 = (_DWORD *)(a3 + 8);
  if ( (_DWORD *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*v3 + 4) = a3;
  *v5 = *v3;
  if ( v5 == (_DWORD *)v3[2] )
  {
    v7 = (int)v5;
  }
  else
  {
    v7 = v5[1];
    if ( !*(_BYTE *)(v4 + 21) )
      *(_DWORD *)(v4 + 4) = v7;
    *(_DWORD *)v7 = v4;
    *v6 = v3[2];
    *(_DWORD *)(v3[2] + 4) = v5;
  }
  v12 = v25[1];
  if ( *(_DWORD **)(v12 + 4) == v3 )
  {
    *(_DWORD *)(v12 + 4) = v5;
  }
  else
  {
    v13 = (_DWORD *)v3[1];
    if ( (_DWORD *)*v13 == v3 )
      *v13 = v5;
    else
      v13[2] = v5;
  }
  v5[1] = v3[1];
  v14 = (char *)(v3 + 5);
  v15 = (char *)(v5 + 5);
  if ( v15 != (char *)(v3 + 5) )
  {
    v16 = *v15;
    *v15 = *v14;
    *v14 = v16;
  }
LABEL_36:
  if ( *((_BYTE *)v24 + 20) == 1 )
  {
    for ( i = v25; v4 != *(_DWORD *)(i[1] + 4); v7 = *(_DWORD *)(v7 + 4) )
    {
      if ( *(_BYTE *)(v4 + 20) != 1 )
        break;
      v18 = *(_BYTE **)v7;
      if ( v4 == *(_DWORD *)v7 )
      {
        v18 = *(_BYTE **)(v7 + 8);
        if ( !v18[20] )
        {
          v18[20] = 1;
          *(_BYTE *)(v7 + 20) = 0;
          sub_6589F150(i, v7);
          v18 = *(_BYTE **)(v7 + 8);
          i = v25;
        }
        if ( v18[21] )
          goto LABEL_54;
        if ( *(_BYTE *)(*(_DWORD *)v18 + 20) != 1 || *(_BYTE *)(*((_DWORD *)v18 + 2) + 20) != 1 )
        {
          if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 20) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v18 + 20) = 1;
            v18[20] = 0;
            sub_6589F1B0(i, v18);
            v18 = *(_BYTE **)(v7 + 8);
            i = v25;
          }
          v18[20] = *(_BYTE *)(v7 + 20);
          *(_BYTE *)(v7 + 20) = 1;
          *(_BYTE *)(*((_DWORD *)v18 + 2) + 20) = 1;
          sub_6589F150(i, v7);
          break;
        }
      }
      else
      {
        if ( !v18[20] )
        {
          v18[20] = 1;
          *(_BYTE *)(v7 + 20) = 0;
          sub_6589F1B0(i, (_DWORD *)v7);
          v18 = *(_BYTE **)v7;
          i = v25;
        }
        if ( v18[21] )
          goto LABEL_54;
        if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 20) != 1 || *(_BYTE *)(*(_DWORD *)v18 + 20) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v18 + 20) == 1 )
          {
            *(_BYTE *)(*((_DWORD *)v18 + 2) + 20) = 1;
            v18[20] = 0;
            sub_6589F150(i, (int)v18);
            v18 = *(_BYTE **)v7;
            i = v25;
          }
          v18[20] = *(_BYTE *)(v7 + 20);
          *(_BYTE *)(v7 + 20) = 1;
          *(_BYTE *)(*(_DWORD *)v18 + 20) = 1;
          sub_6589F1B0(i, (_DWORD *)v7);
          break;
        }
      }
      v18[20] = 0;
LABEL_54:
      v4 = v7;
    }
    *(_BYTE *)(v4 + 20) = 1;
  }
  operator delete(v24);
  v19 = v25[2];
  if ( v19 )
    v25[2] = v19 - 1;
  *a2 = a3;
  return a2;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD34: using guessed type void *off_659BFD34;

//----- (658A0050) --------------------------------------------------------
_DWORD *__stdcall sub_658A0050(int a1, int a2, int a3, _DWORD *a4, char a5)
{
  _DWORD *result; // eax

  result = operator new(0x18u);
  if ( result )
  {
    *result = a1;
    result[2] = a3;
    result[1] = a2;
    result[3] = *a4;
    result[4] = a4[1];
    *((_BYTE *)result + 20) = a5;
    *((_BYTE *)result + 21) = 0;
  }
  return result;
}

//----- (658A00B0) --------------------------------------------------------
char *__thiscall WeaponFireEntry_type2_write(int this, char *a2)
{
  char *v3; // esi
  char *result; // eax
  __int16 v5; // bx
  char EquipSlot; // al
  char *v7; // [esp-Ch] [ebp-20h]
  unsigned __int16 v8; // [esp-8h] [ebp-1Ch]
  int v9; // [esp+8h] [ebp-Ch] BYREF
  _BYTE v10[4]; // [esp+Ch] [ebp-8h] BYREF
  int v11; // [esp+10h] [ebp-4h] BYREF

  v11 = *(_DWORD *)(this + 4);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v11, (int)v10, 4u);
    v7 = v10;
  }
  else
  {
    v7 = (char *)&v11;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v7, 0x20u, 1);
  Write_QuantVec3_And9((char *)(this + 8), v3);
  Write_BitfieldBlock_0x30((char *)(this + 34), v3);
  if ( *(_BYTE *)(this + 132) )
    result = BitStream_WriteBit1(v3);
  else
    result = BitStream_WriteBit0(v3);
  if ( !*(_BYTE *)(this + 132) )
  {
    v9 = *(_DWORD *)(this + 100) + 90;
    BitStream_WriteBits(v3, (char *)&v9, 8u, 1);
    if ( *(_DWORD *)(this + 104) == 16 )
    {
      BitStream_WriteBit0(v3);
    }
    else
    {
      BitStream_WriteBit1(v3);
      BitStream_WriteBits(v3, (char *)(this + 104), 0xCu, 1);
    }
    if ( *(_DWORD *)(this + 108) )
    {
      BitStream_WriteBit1(v3);
      BitStream_WriteBits(v3, (char *)(this + 108), 5u, 1);
    }
    else
    {
      BitStream_WriteBit0(v3);
    }
    if ( *(_WORD *)(this + 134) )
    {
      BitStream_WriteBit1(v3);
      BitStream_WriteU16C(v3, *(_WORD *)(this + 134));
      if ( *(_BYTE *)(this + 116) )
        BitStream_WriteBit1(v3);
      else
        BitStream_WriteBit0(v3);
      a2 = *(char **)(this + 120);
      if ( a2 )
      {
        BitStream_WriteBit1(v3);
        BitStream_WriteBits(v3, (char *)&a2, 7u, 1);
      }
      else
      {
        BitStream_WriteBit0(v3);
      }
      if ( *(_DWORD *)(this + 120) )
        Write_QuantVec3(this + 136, v3);
    }
    else
    {
      BitStream_WriteBit0(v3);
    }
    if ( *(_BYTE *)(this + 124) )
      BitStream_WriteBit1(v3);
    else
      BitStream_WriteBit0(v3);
    if ( *(_BYTE *)(this + 124) )
    {
      BitStream_WriteBits(v3, (char *)(this + 148), 4u, 1);
      BitStream_WriteBits(v3, (char *)(this + 149), 4u, 1);
    }
    a2 = *(char **)(this + 128);
    if ( a2 )
    {
      BitStream_WriteBit1(v3);
      BitStream_WriteBits(v3, (char *)&a2, 6u, 1);
    }
    else
    {
      BitStream_WriteBit0(v3);
    }
    if ( BitfieldBlock_0x30_HasExtra((_WORD *)(this + 34)) )
    {
      v5 = *(_WORD *)(this + 150);
      if ( v5 )
      {
        BitStream_WriteBit1(v3);
        Read_u16(v3, v5);
      }
      else
      {
        BitStream_WriteBit0(v3);
      }
      v8 = *(_WORD *)(this + 150);
      EquipSlot = ItemTemplate_GetEquipSlot(g_ItemTemplateById, 0x68u);
      if ( EquipSlotMask_HasSlot(EquipSlot, v8) )
        BitStream_WriteBits(v3, (char *)(this + 163), 7u, 1);
    }
    BitStream_WriteBits(v3, (char *)(this + 162), 8u, 1);
    BitStream_WriteBits(v3, (char *)(this + 176), 3u, 1);
    if ( *(_BYTE *)(this + 184) )
      BitStream_WriteBit1(v3);
    else
      BitStream_WriteBit0(v3);
    BitStream_WriteBits(v3, (char *)(this + 188), 0xAu, 1);
    BitStream_WriteBits(v3, (char *)(this + 192), 0xAu, 1);
    if ( *(_BYTE *)(this + 164) )
      return BitStream_WriteBit1(v3);
    else
      return BitStream_WriteBit0(v3);
  }
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658A0360) --------------------------------------------------------
char *__thiscall WeaponFireEntry_type3_write(int this, char *a2)
{
  char *v3; // edi
  char *result; // eax
  unsigned int v5; // eax
  char *v6; // [esp-Ch] [ebp-1Ch]
  _BYTE v7[4]; // [esp+8h] [ebp-8h] BYREF
  int v8; // [esp+Ch] [ebp-4h] BYREF

  v8 = *(_DWORD *)(this + 4);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v8, (int)v7, 4u);
    v6 = v7;
  }
  else
  {
    v6 = (char *)&v8;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v6, 0x20u, 1);
  v8 = *(unsigned __int16 *)(this + 96);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v8, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&v8, 0x10u, 1);
  }
  BitStream_WriteBits(v3, (char *)(this + 160), 3u, 1);
  LOBYTE(a2) = *(_BYTE *)(this + 161);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  Write_QuantVec3_And9((char *)(this + 8), v3);
  LOBYTE(a2) = *(_BYTE *)(this + 133);
  result = BitStream_WriteBits(v3, (char *)&a2, 8u, 1);
  if ( !*(_BYTE *)(this + 133) )
  {
    if ( *(_BYTE *)(this + 124) )
      BitStream_WriteBit1(v3);
    else
      BitStream_WriteBit0(v3);
    BitStream_WriteBits(v3, (char *)(this + 108), 5u, 1);
    BitStream_WriteBits(v3, (char *)(this + 112), 4u, 1);
    a2 = *(char **)(this + 128);
    if ( a2 )
    {
      BitStream_WriteBit1(v3);
      BitStream_WriteBits(v3, (char *)&a2, 6u, 1);
    }
    else
    {
      BitStream_WriteBit0(v3);
    }
    v5 = *(_DWORD *)(this + 128);
    if ( v5 >= 2 && v5 <= 4 )
      BitStream_WriteIntCompressed2(v3, *(_DWORD *)(this + 120));
    return BitStream_WriteBits(v3, (char *)(this + 188), 0xEu, 1);
  }
  return result;
}

//----- (658A04D0) --------------------------------------------------------
int __thiscall WeaponFireEntry_type4_write(int this, char *a2)
{
  char *v3; // esi
  int v4; // ebx
  int v5; // ebx
  int v6; // ebx
  char *v8; // [esp-Ch] [ebp-20h]
  _BYTE v9[4]; // [esp+Ch] [ebp-8h] BYREF
  int v10; // [esp+10h] [ebp-4h] BYREF

  v10 = *(_DWORD *)(this + 4);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v10, (int)v9, 4u);
    v8 = v9;
  }
  else
  {
    v8 = (char *)&v10;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v8, 0x20u, 1);
  v10 = *(unsigned __int16 *)(this + 134);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v10, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&v10, 0x10u, 1);
  }
  if ( *(_BYTE *)(this + 132) )
    BitStream_WriteBit1(v3);
  else
    BitStream_WriteBit0(v3);
  BitStream_WriteBits(v3, (char *)(this + 188), 0xEu, 1);
  FlagByte4_WriteToStream((_BYTE *)(this + 196), v3);
  Write_QuantVec3_And9((char *)(this + 8), v3);
  v4 = *(_DWORD *)(this + 84);
  if ( v4 )
  {
    BitStream_WriteBit1(v3);
    Read_u32(v3, v4);
  }
  else
  {
    BitStream_WriteBit0(v3);
  }
  v5 = *(_DWORD *)(this + 88);
  if ( v5 )
  {
    BitStream_WriteBit1(v3);
    Read_u32(v3, v5);
  }
  else
  {
    BitStream_WriteBit0(v3);
  }
  v6 = *(_DWORD *)(this + 92);
  if ( v6 )
  {
    BitStream_WriteBit1(v3);
    Read_u32(v3, v6);
  }
  else
  {
    BitStream_WriteBit0(v3);
  }
  return (*(int (__thiscall **)(int, int, int, char *))(*(_DWORD *)g_LTClient + 52))(g_LTClient, this + 200, 2048, v3);
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (658A0630) --------------------------------------------------------
char __thiscall Packet_ID_UPDATE_write(char *this)
{
  char v3[4]; // [esp+4h] [ebp-F0h] BYREF
  _BYTE v4[232]; // [esp+8h] [ebp-ECh] BYREF

  WeaponFireEntry_Init((int)v4);
  v3[0] = 0;
  BitStream_WriteBitsCompressed(this + 12, v3, 8u, 1);
  return 1;
}

//----- (658A0680) --------------------------------------------------------
char __thiscall Packet_ID_WEAPONFIRE_read(int this, int a2)
{
  char result; // al

  result = VariableSizedPacket::Read((_DWORD *)this, a2);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1072));
    RakNet::BitStream::ReadCompressed_T_ushort((unsigned int *)(this + 12), (char *)(this + 1076));
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)(this + 12), (char *)(this + 1080));
    return 1;
  }
  return result;
}

//----- (658A06D0) --------------------------------------------------------
char __thiscall Packet_ID_WEAPONFIRE_write(int this)
{
  char result; // al

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    BitStream_WriteUInt16Compressed((char *)this, *(_WORD *)(this + 1076));
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
    return 1;
  }
  return result;
}

//----- (658A0710) --------------------------------------------------------
int __cdecl sub_658A0710(unsigned int a1, int a2, float *a3, float *a4)
{
  int v4; // edi
  int v5; // esi
  int v6; // eax
  float *v8; // eax
  float *v9; // eax
  _DWORD v10[30]; // [esp+4h] [ebp-A8h] BYREF
  _BYTE v11[4]; // [esp+7Ch] [ebp-30h] BYREF
  float v12[3]; // [esp+80h] [ebp-2Ch] BYREF
  float v13; // [esp+8Ch] [ebp-20h]
  float v14; // [esp+90h] [ebp-1Ch]
  float v15; // [esp+94h] [ebp-18h]
  float v16; // [esp+98h] [ebp-14h]
  int v17; // [esp+A8h] [ebp-4h] BYREF

  if ( !a1 )
    return 0;
  v4 = a2;
  if ( !a2 )
    return 0;
  if ( (*(int (__thiscall **)(int, unsigned int, _DWORD *, int, unsigned int *, _BYTE *))(*(_DWORD *)dword_65A5A6E8 + 92))(
         dword_65A5A6E8,
         a1,
         v10,
         30,
         &a1,
         v11) )
  {
    return 0;
  }
  v5 = 0;
  if ( !a1 )
    return 0;
  while ( 1 )
  {
    v6 = v10[v5];
    if ( v6 )
    {
      if ( !(*(int (__thiscall **)(int, int, int, int *))(*(_DWORD *)dword_65A5AA48 + 20))(dword_65A5AA48, v6, v4, &v17) )
      {
        v13 = 0.0;
        v14 = 0.0;
        v15 = 0.0;
        v16 = 1.0;
        if ( !(*(int (__thiscall **)(int, _DWORD, int, float *, int))(*(_DWORD *)dword_65A5AA48 + 28))(
                dword_65A5AA48,
                v10[v5],
                v17,
                v12,
                1) )
          break;
      }
    }
    if ( ++v5 >= a1 )
      return 0;
  }
  v8 = a3;
  *a3 = v12[0];
  v8[1] = v12[1];
  v8[2] = v12[2];
  v9 = a4;
  *a4 = v13;
  v9[1] = v14;
  v9[2] = v15;
  v9[3] = v16;
  return 1;
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;
// 65A5AA48: using guessed type int dword_65A5AA48;

//----- (658A0890) --------------------------------------------------------
_DWORD *__cdecl sub_658A0890(int a1, int a2, _DWORD *a3)
{
  int v3; // ecx
  _DWORD *result; // eax
  int v5; // esi

  v3 = a2;
  for ( result = a3; v3 != a1; *result = v5 )
  {
    v5 = *(_DWORD *)(v3 - 4);
    v3 -= 4;
    --result;
  }
  return result;
}

//----- (658A08C0) --------------------------------------------------------
void __cdecl DwordArray_Fill(_DWORD *a1, int a2, _DWORD *a3)
{
  int i; // ecx

  for ( i = a2; i; ++a1 )
  {
    if ( a1 )
      *a1 = *a3;
    --i;
  }
}

//----- (658A0900) --------------------------------------------------------
int __thiscall SendPacket_WEAPONFIRE(_DWORD *this)
{
  int v2; // eax
  int v3; // edi
  unsigned __int16 Dword_this; // ax
  int result; // eax
  char v6[12]; // [esp+Ch] [ebp-450h] BYREF
  char v7[1060]; // [esp+18h] [ebp-444h] BYREF
  int v8; // [esp+43Ch] [ebp-20h]
  int v9; // [esp+440h] [ebp-1Ch]
  int v10; // [esp+444h] [ebp-18h]
  int v11; // [esp+458h] [ebp-4h]

  v2 = sub_658C5080(dword_65ABF75C);
  *(this + 202) = 2;
  v3 = v2;
  Dword_this = SharedMem_ReadDword_this(dword_65ABF75C, 0x303Eu);
  result = sub_659341E0(g_ItemTemplateById, Dword_this);
  if ( !(_BYTE)result )
  {
    Packet_ID_WEAPONFIRE_ctor(v6);
    v11 = 0;
    v8 = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    v10 = v3;
    LOWORD(v9) = SharedMem_ReadDword_this(dword_65ABF75C, 0x303Eu);
    if ( Packet_WriteHeader((int)v6) )
    {
      BitStream_Write_u32c(v6, v8);
      BitStream_WriteUInt16Compressed(v6, v9);
      BitStream_Write_u32c(v6, v10);
    }
    LTClient_SendPacket_BuildIfNeeded(v6, 2, 1, 1, 2);
    v11 = -1;
    *(_DWORD *)v6 = &vtbl_Packet_Unknown0;
    return BitStream_FreeOwnedBuffer((int)v7);
  }
  return result;
}
// 658C5080: using guessed type int __thiscall sub_658C5080(_DWORD);
// 659341E0: using guessed type int __thiscall sub_659341E0(_DWORD, _DWORD);
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658A0A40) --------------------------------------------------------
unsigned int __stdcall SendPacket_ID_0x71_UseItem(int a1, int a2)
{
  int v2; // esi
  char *v3; // eax
  unsigned int result; // eax
  int v5; // ecx
  void (__thiscall *v6)(int, int, int); // eax
  int (__thiscall *v7)(int, int, _DWORD); // eax
  int v8; // [esp-8h] [ebp-24h]
  int v9; // [esp+8h] [ebp-14h] BYREF
  int v10; // [esp+Ch] [ebp-10h] BYREF
  int v11; // [esp+18h] [ebp-4h]

  StatGroup_Read((_DWORD *)g_pEncVarMgr, 2, &v9);
  if ( (_BYTE)a2 || (v9 & 0x7A0) == 0 )
  {
    v10 = 0;
    if ( (*(int (__thiscall **)(int, int *))(*(_DWORD *)dword_65A5A6E8 + 36))(dword_65A5A6E8, &v10) )
    {
      v5 = 0;
      v10 = 0;
    }
    else
    {
      (*(void (__thiscall **)(int))(*(_DWORD *)v10 + 4))(v10);
      v5 = v10;
    }
    v6 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v5 + 36);
    v11 = 0;
    v6(v5, 113, 8);
    (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v10 + 36))(v10, a1, 32);
    v8 = *FXInstance_Clone(&v10, &a2);
    v7 = *(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 324);
    LOBYTE(v11) = 1;
    result = v7(g_pILTClient, v8, 0);
    LOBYTE(v11) = 0;
    if ( a2 )
      result = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 8))(a2);
    v11 = -1;
    if ( v10 )
      return (*(int (__thiscall **)(int))(*(_DWORD *)v10 + 8))(v10);
  }
  else
  {
    v2 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5301);
    if ( v2 )
      v3 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v2);
    else
      v3 = (char *)byte_659A8B98;
    result = FriendList_AddEntry(dword_65ABF748, v3, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
    if ( v2 )
      return (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v2);
  }
  return result;
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658A0BC0) --------------------------------------------------------
void __thiscall MsgId_83_LocalPlayerGate(float *this)
{
  bool v2; // zf
  unsigned int ActiveSoundId; // eax
  _BYTE v4[48]; // [esp+8h] [ebp-A4h] BYREF
  float v5[15]; // [esp+38h] [ebp-74h] BYREF
  float v6[4]; // [esp+74h] [ebp-38h] BYREF
  float v7; // [esp+84h] [ebp-28h] BYREF
  float v8; // [esp+88h] [ebp-24h]
  float v9; // [esp+8Ch] [ebp-20h]
  float v10; // [esp+90h] [ebp-1Ch]
  float v11; // [esp+94h] [ebp-18h] BYREF
  float v12; // [esp+98h] [ebp-14h]
  float v13; // [esp+9Ch] [ebp-10h]
  float v14; // [esp+A0h] [ebp-Ch]
  float v15; // [esp+A4h] [ebp-8h] BYREF
  float v16; // [esp+A8h] [ebp-4h]

  if ( *(_DWORD *)this )
  {
    v10 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
    if ( v10 - *(this + 43) > 0.05000000074505806 )
    {
      v2 = *((_BYTE *)this + 168) == 0;
      v6[0] = 0.0;
      v6[1] = 0.0;
      v6[2] = 0.0;
      *((_BYTE *)this + 168) = v2;
      v6[3] = 1.0;
      (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, *(_DWORD *)this, &v7);
      (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 148))(g_pILTClient, *(_DWORD *)this, v6);
      Quat_GetUpVector(v6, &v11);
      v5[6] = 0.0;
      v5[7] = 0.0;
      v5[8] = 0.0;
      v5[12] = 0.0;
      v5[11] = 0.0;
      v5[14] = 0.0;
      memset(v4, 0, sizeof(v4));
      v5[0] = v7;
      LODWORD(v5[9]) = 7;
      v5[1] = v8;
      v5[2] = v9;
      v14 = -v11;
      v15 = -v12;
      v16 = -v13;
      v11 = v14 * 70.0;
      v12 = v15 * 70.0;
      v13 = 70.0 * v16;
      v14 = v7 + v11;
      v15 = v8 + v12;
      v16 = v9 + v13;
      v5[3] = v14;
      v5[4] = v15;
      v5[5] = v16;
      v15 = *this;
      LODWORD(v5[13]) = &v15;
      v16 = 0.0;
      LODWORD(v5[10]) = Array_FindValue;
      if ( (*(unsigned __int8 (__cdecl **)(float *, _BYTE *))(g_pILTClient + 100))(v5, v4) )
      {
        ActiveSoundId = SoundDef_GetActiveSoundId((int)v4);
        HumanDetection_ScanForHuman(
          (int *)this,
          SLODWORD(v7),
          SLODWORD(v8),
          SLODWORD(v9),
          ActiveSoundId,
          *((unsigned __int8 *)this + 168));
        *(this + 43) = v10;
      }
    }
  }
}

//----- (658A0D70) --------------------------------------------------------
int __stdcall SendPacket_ID_0x7B_Sit(int a1)
{
  int v1; // ecx
  void (__thiscall *v2)(int, int, int); // eax
  int (__thiscall *v3)(int, int, _DWORD); // eax
  int result; // eax
  int v5; // [esp-8h] [ebp-1Ch]
  int v6; // [esp+4h] [ebp-10h] BYREF
  int v7; // [esp+10h] [ebp-4h]

  v6 = 0;
  if ( (*(int (__thiscall **)(int, int *))(*(_DWORD *)dword_65A5A6E8 + 36))(dword_65A5A6E8, &v6) )
  {
    v1 = 0;
    v6 = 0;
  }
  else
  {
    (*(void (__thiscall **)(int))(*(_DWORD *)v6 + 4))(v6);
    v1 = v6;
  }
  v2 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v1 + 36);
  v7 = 0;
  v2(v1, 123, 8);
  (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v6 + 36))(v6, a1, 32);
  v5 = *FXInstance_Clone(&v6, &a1);
  v3 = *(int (__thiscall **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 324);
  LOBYTE(v7) = 1;
  result = v3(g_pILTClient, v5, 0);
  LOBYTE(v7) = 0;
  if ( a1 )
    result = (*(int (__thiscall **)(int))(*(_DWORD *)a1 + 8))(a1);
  v7 = -1;
  if ( v6 )
    return (*(int (__thiscall **)(int))(*(_DWORD *)v6 + 8))(v6);
  return result;
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;

//----- (658A0FB0) --------------------------------------------------------
int **__thiscall IntRBTree_EraseRange(int ***this, int **a2, int *a3, int *a4)
{
  int v5; // eax
  int *v6; // ecx
  _DWORD *v7; // eax
  int v9; // edx
  int v10; // eax
  int *v11; // ecx
  int j; // eax
  int i; // eax
  int v14; // [esp+4h] [ebp-4h] BYREF

  v5 = (int)*(this + 1);
  v6 = a3;
  if ( a3 == *(int **)v5 && a4 == (int *)v5 )
  {
    sub_6589FCF0(*(void ***)(v5 + 4));
    (*(this + 1))[1] = (int *)*(this + 1);
    v7 = *(this + 1);
    *(this + 2) = 0;
    *v7 = v7;
    (*(this + 1))[2] = (int *)*(this + 1);
    *a2 = **(this + 1);
    return a2;
  }
  else
  {
    for ( ; a3 != a4; v6 = a3 )
    {
      v9 = (int)v6;
      if ( !*((_BYTE *)v6 + 21) )
      {
        v10 = v6[2];
        if ( *(_BYTE *)(v10 + 21) )
        {
          for ( i = v6[1]; !*(_BYTE *)(i + 21); i = *(_DWORD *)(i + 4) )
          {
            if ( v6 != *(int **)(i + 8) )
              break;
            v6 = (int *)i;
          }
          a3 = (int *)i;
        }
        else
        {
          v11 = (int *)v6[2];
          for ( j = *(_DWORD *)v10; !*(_BYTE *)(j + 21); j = *(_DWORD *)j )
            v11 = (int *)j;
          a3 = v11;
        }
      }
      sub_6589FD30(this, &v14, v9);
    }
    *a2 = v6;
    return a2;
  }
}

//----- (658A10E0) --------------------------------------------------------
int *__thiscall sub_658A10E0(int **this, int *a2, char a3, int *a4, _DWORD *a5)
{
  _DWORD *v6; // ecx
  int *v7; // eax
  int **v8; // eax
  int v9; // eax
  int *v10; // eax
  int v11; // esi
  int v12; // ecx
  int *v13; // edx
  int v14; // edx
  int v15; // edx
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-50h] BYREF
  _BYTE v18[28]; // [esp+38h] [ebp-28h] BYREF
  int v19; // [esp+5Ch] [ebp-4h]
  _DWORD *v20; // [esp+74h] [ebp+14h]

  if ( (unsigned int)*(this + 2) >= 0x1FFFFFFE )
  {
    std::string::string(v18, "map/set<T> too long");
    v19 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v18);
    pExceptionObject[0] = &off_659BFD28;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
  }
  v6 = sub_658A0050((int)*(this + 1), (int)a4, (int)*(this + 1), a5, 0);
  v7 = *(this + 1);
  *(this + 2) = (int *)((char *)*(this + 2) + 1);
  v20 = v6;
  if ( a4 == v7 )
  {
    v7[1] = (int)v6;
    **(this + 1) = (int)v6;
    (*(this + 1))[2] = (int)v6;
  }
  else if ( a3 )
  {
    *a4 = (int)v6;
    v8 = (int **)*(this + 1);
    if ( a4 == *v8 )
      *v8 = v6;
  }
  else
  {
    a4[2] = (int)v6;
    v9 = (int)*(this + 1);
    if ( a4 == *(int **)(v9 + 8) )
      *(_DWORD *)(v9 + 8) = v6;
  }
  v10 = v6 + 1;
  v11 = (int)v6;
  if ( !*(_BYTE *)(v6[1] + 20) )
  {
    do
    {
      v12 = *v10;
      v13 = *(int **)(*v10 + 4);
      if ( *v10 == *v13 )
      {
        v14 = v13[2];
        if ( *(_BYTE *)(v14 + 20) )
        {
          if ( v11 == *(_DWORD *)(v12 + 8) )
          {
            v11 = *v10;
            sub_6589F150(this, *v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 20) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 20) = 0;
          sub_6589F1B0(this, *(_DWORD **)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 20) = 1;
          *(_BYTE *)(v14 + 20) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 20) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      else
      {
        v15 = *v13;
        if ( *(_BYTE *)(v15 + 20) )
        {
          if ( v11 == *(_DWORD *)v12 )
          {
            v11 = *v10;
            sub_6589F1B0(this, (_DWORD *)*v10);
          }
          *(_BYTE *)(*(_DWORD *)(v11 + 4) + 20) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v11 + 4) + 4) + 20) = 0;
          sub_6589F150(this, *(_DWORD *)(*(_DWORD *)(v11 + 4) + 4));
        }
        else
        {
          *(_BYTE *)(v12 + 20) = 1;
          *(_BYTE *)(v15 + 20) = 1;
          *(_BYTE *)(*(_DWORD *)(*v10 + 4) + 20) = 0;
          v11 = *(_DWORD *)(*v10 + 4);
        }
      }
      v10 = (int *)(v11 + 4);
    }
    while ( !*(_BYTE *)(*(_DWORD *)(v11 + 4) + 20) );
    v6 = v20;
  }
  *(_BYTE *)((*(this + 1))[1] + 20) = 1;
  *a2 = (int)v6;
  return a2;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (658A12A0) --------------------------------------------------------
void __cdecl IntRBTree_CountRange(int *a1, int *a2, _DWORD *a3)
{
  int *v3; // ecx
  int v4; // eax
  int j; // eax
  int i; // eax

  v3 = a1;
  while ( v3 != a2 )
  {
    ++*a3;
    if ( !*((_BYTE *)v3 + 21) )
    {
      v4 = v3[2];
      if ( *(_BYTE *)(v4 + 21) )
      {
        for ( i = v3[1]; !*(_BYTE *)(i + 21); i = *(_DWORD *)(i + 4) )
        {
          if ( v3 != *(int **)(i + 8) )
            break;
          v3 = (int *)i;
        }
        v3 = (int *)i;
      }
      else
      {
        v3 = (int *)v3[2];
        for ( j = *(_DWORD *)v4; !*(_BYTE *)(j + 21); j = *(_DWORD *)j )
          v3 = (int *)j;
      }
    }
  }
}

//----- (658A1310) --------------------------------------------------------
char *__thiscall WeaponFireEntry_type1_write(int this, char *a2)
{
  char *v3; // esi
  int v4; // edi
  char *v6; // [esp-Ch] [ebp-1Ch]
  char v7[4]; // [esp+8h] [ebp-8h] BYREF
  int v8; // [esp+Ch] [ebp-4h] BYREF

  v8 = *(_DWORD *)(this + 24);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v8, (int)v7, 4u);
    v6 = v7;
  }
  else
  {
    v6 = (char *)&v8;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v6, 0x20u, 1);
  a2 = *(char **)(this + 28);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v7, 4u);
    BitStream_WriteBitsCompressed(v3, v7, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  LOBYTE(a2) = *(_BYTE *)(this + 32);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  v4 = *(_DWORD *)(this + 156);
  if ( v4 )
  {
    BitStream_WriteBit1(v3);
    Read_u32(v3, v4);
  }
  else
  {
    BitStream_WriteBit0(v3);
  }
  LOBYTE(a2) = *(_BYTE *)(this + 152);
  if ( (_BYTE)a2 )
  {
    BitStream_WriteBit1(v3);
    BitStream_WriteBits(v3, (char *)&a2, 3u, 1);
  }
  else
  {
    BitStream_WriteBit0(v3);
  }
  a2 = *(char **)(this + 180);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v7, 4u);
    BitStream_WriteBitsCompressed(v3, v7, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  return WeaponFireEntry_type2_write(this, v3);
}

//----- (658A1440) --------------------------------------------------------
char *__thiscall WeaponFireEntry_write(char *this, char *a2)
{
  char *result; // eax
  char v4[4]; // [esp+8h] [ebp-4h] BYREF

  v4[0] = *this;
  BitStream_WriteBitsCompressed(a2, v4, 8u, 1);
  result = (char *)((unsigned __int8)*this - 1);
  switch ( *this )
  {
    case 1:
      result = WeaponFireEntry_type1_write((int)this, a2);
      break;
    case 2:
      result = WeaponFireEntry_type2_write((int)this, a2);
      break;
    case 3:
      result = WeaponFireEntry_type3_write((int)this, a2);
      break;
    case 4:
      result = (char *)WeaponFireEntry_type4_write((int)this, a2);
      break;
    default:
      return result;
  }
  return result;
}

//----- (658A1690) --------------------------------------------------------
int __thiscall sub_658A1690(int **this, int a2, int *a3)
{
  int *v3; // ebx
  int *v5; // esi
  int v6; // eax
  bool v7; // cl
  unsigned int v8; // edx
  int *v9; // edx
  int v10; // edx
  char v12; // [esp+Ch] [ebp-4h]

  v3 = a3;
  v5 = *(this + 1);
  v6 = v5[1];
  v7 = 1;
  v12 = 1;
  if ( !*(_BYTE *)(v6 + 21) )
  {
    v8 = *a3;
    do
    {
      v5 = (int *)v6;
      v7 = v8 < *(_DWORD *)(v6 + 12);
      v12 = v7;
      if ( v8 >= *(_DWORD *)(v6 + 12) )
        v6 = *(_DWORD *)(v6 + 8);
      else
        v6 = *(_DWORD *)v6;
    }
    while ( !*(_BYTE *)(v6 + 21) );
  }
  v9 = v5;
  a3 = v5;
  if ( v7 )
  {
    if ( v5 == (int *)**(this + 1) )
    {
      v10 = *sub_658A10E0(this, (int *)&a3, 1, v5, v3);
      *(_BYTE *)(a2 + 4) = 1;
      *(_DWORD *)a2 = v10;
      return a2;
    }
    AnimTreeIter_Increment(&a3);
    v9 = a3;
  }
  if ( v9[3] >= (unsigned int)*v3 )
  {
    *(_BYTE *)(a2 + 4) = 0;
    *(_DWORD *)a2 = v9;
  }
  else
  {
    *(_DWORD *)a2 = *sub_658A10E0(this, (int *)&a3, v12, v5, v3);
    *(_BYTE *)(a2 + 4) = 1;
  }
  return a2;
}

//----- (658A1780) --------------------------------------------------------
_DWORD *__stdcall sub_658A1780(_DWORD *a1, int a2, _DWORD *a3)
{
  DwordArray_Fill(a1, a2, a3);
  return &a1[a2];
}

//----- (658A1830) --------------------------------------------------------
unsigned int *__thiscall IntRBTree_EraseByKey(int ***this, unsigned int *a2)
{
  int *v3; // edi
  int *v4; // ebx
  int *v6; // [esp+Ch] [ebp-8h] BYREF
  int *v7; // [esp+10h] [ebp-4h] BYREF

  WeaponRBTree_FindRange(this, &v6, a2);
  v3 = v7;
  v4 = v6;
  a2 = 0;
  IntRBTree_CountRange(v6, v7, &a2);
  IntRBTree_EraseRange(this, &v7, v4, v3);
  return a2;
}

//----- (658A18C0) --------------------------------------------------------
int *__thiscall IntRBTree_InsertHint(int **this, int *a2, int *a3, int *a4)
{
  int *v6; // eax
  int *v7; // esi
  int *v8; // eax
  int v9; // ecx
  _BYTE v10[8]; // [esp+8h] [ebp-8h] BYREF

  if ( !*(this + 2) )
  {
    sub_658A10E0(this, a2, 1, *(this + 1), a4);
    return a2;
  }
  v6 = *(this + 1);
  v7 = a4;
  if ( a3 == (int *)*v6 )
  {
    if ( *a4 < (unsigned int)a3[3] )
    {
      sub_658A10E0(this, a2, 1, a3, a4);
      return a2;
    }
    goto LABEL_22;
  }
  if ( a3 == v6 )
  {
    v8 = (int *)v6[2];
    if ( v8[3] < (unsigned int)*a4 )
    {
      sub_658A10E0(this, a2, 0, v8, a4);
      return a2;
    }
    goto LABEL_22;
  }
  if ( *a4 >= (unsigned int)a3[3] || (a4 = a3, AnimTreeIter_Increment(&a4), a4[3] >= (unsigned int)*v7) )
  {
    if ( a3[3] >= (unsigned int)*v7
      || (a4 = a3, WeaponTree_Iter_Increment(&a4), a4 != *(this + 1)) && *v7 >= (unsigned int)a4[3] )
    {
LABEL_22:
      v9 = *(_DWORD *)sub_658A1690(this, (int)v10, v7);
      *a2 = v9;
      return a2;
    }
    if ( *(_BYTE *)(a3[2] + 21) )
      sub_658A10E0(this, a2, 0, a3, v7);
    else
      sub_658A10E0(this, a2, 1, a4, v7);
    return a2;
  }
  else
  {
    if ( *(_BYTE *)(a4[2] + 21) )
      sub_658A10E0(this, a2, 0, a4, v7);
    else
      sub_658A10E0(this, a2, 1, a3, v7);
    return a2;
  }
}

//----- (658A1A20) --------------------------------------------------------
_DWORD *__stdcall sub_658A1A20(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return DwordArray_CopyRange(a1, a2, a3);
}

//----- (658A1B30) --------------------------------------------------------
unsigned int *__thiscall MsgId_77_NoPayload(int ***this, unsigned int a2)
{
  return IntRBTree_EraseByKey(this + 211, &a2);
}

//----- (658A1B80) --------------------------------------------------------
int *__thiscall IntRBTree_FindOrInsert(int **this, int *a2)
{
  int *v2; // edx
  int v3; // eax
  int v5[2]; // [esp+8h] [ebp-8h] BYREF

  v2 = *(this + 1);
  v3 = v2[1];
  while ( !*(_BYTE *)(v3 + 21) )
  {
    if ( *(_DWORD *)(v3 + 12) >= (unsigned int)*a2 )
    {
      v2 = (int *)v3;
      v3 = *(_DWORD *)v3;
    }
    else
    {
      v3 = *(_DWORD *)(v3 + 8);
    }
  }
  if ( v2 != *(this + 1) && *a2 >= (unsigned int)v2[3] )
    return v2 + 4;
  v5[0] = *a2;
  a2 = 0;
  v5[1] = 0;
  return (int *)(*IntRBTree_InsertHint(this, (int *)&a2, v2, v5) + 16);
}

//----- (658A1C00) --------------------------------------------------------
void __thiscall DwordVector_InsertN(int this, _DWORD *a2, unsigned int a3, unsigned int *a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  int v7; // ebx
  _DWORD *v8; // edi
  int v9; // eax
  unsigned int v10; // ecx
  _DWORD *v11; // eax
  _DWORD *v12; // edi
  _DWORD *v13; // eax
  _DWORD *v14; // eax
  _DWORD *v15; // ecx
  int v16; // eax
  int v17; // ebx
  unsigned int *v18; // eax
  unsigned int *v19; // eax
  _DWORD *v20; // ebx
  _DWORD *v21; // [esp-20h] [ebp-48h]
  _DWORD *v22; // [esp-Ch] [ebp-34h]
  int v23; // [esp-8h] [ebp-30h]
  int v24[5]; // [esp+0h] [ebp-28h] BYREF
  unsigned int v25; // [esp+14h] [ebp-14h]
  int *v26; // [esp+18h] [ebp-10h]
  int v27; // [esp+24h] [ebp-4h]

  v26 = v24;
  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 2;
  else
    v6 = 0;
  v7 = a3;
  if ( a3 )
  {
    v8 = *(_DWORD **)(this + 8);
    v9 = ((int)v8 - v5) >> 2;
    if ( 0x3FFFFFFF - v9 < a3 )
      VectorTooLong_ThrowException(v24[0], v24[1]);
    if ( v6 >= v9 + a3 )
    {
      if ( v8 - a2 >= a3 )
      {
        v19 = (unsigned int *)(4 * a3);
        v20 = &v8[-a3];
        a3 = *a4;
        a4 = v19;
        *(_DWORD *)(this + 8) = sub_658A1A20(v20, v8, v8);
        sub_658A0890((int)a2, (int)v20, v8);
        sub_6589F6F0(a2, (unsigned int *)((char *)a4 + (_DWORD)a2), &a3);
      }
      else
      {
        a3 = *a4;
        a4 = (unsigned int *)(4 * v7);
        sub_658A1A20(a2, v8, &a2[v7]);
        v23 = v7 - ((*(_DWORD *)(this + 8) - (int)a2) >> 2);
        v22 = *(_DWORD **)(this + 8);
        v27 = 2;
        sub_658A1780(v22, v23, &a3);
        v18 = a4;
        *(_DWORD *)(this + 8) += a4;
        sub_6589F6F0(a2, (_DWORD *)(*(_DWORD *)(this + 8) - (_DWORD)v18), &a3);
      }
    }
    else
    {
      if ( 0x3FFFFFFF - (v6 >> 1) >= v6 )
      {
        v10 = (v6 >> 1) + v6;
        v25 = v10;
      }
      else
      {
        v25 = 0;
        v10 = 0;
      }
      if ( v10 < v9 + a3 )
      {
        v25 = v9 + a3;
        v10 = v9 + a3;
      }
      v11 = SafeArrayAlloc(v10);
      LOBYTE(a3) = 0;
      v12 = v11;
      v21 = *(_DWORD **)(this + 4);
      v24[4] = (int)v11;
      v27 = 0;
      v13 = DwordArray_CopyRange(v21, a2, v11);
      v14 = sub_658A1780(v13, v7, a4);
      v15 = *(_DWORD **)(this + 8);
      LOBYTE(a4) = 0;
      DwordArray_CopyRange(a2, v15, v14);
      v16 = *(_DWORD *)(this + 4);
      v17 = ((*(_DWORD *)(this + 8) - v16) >> 2) + v7;
      if ( v16 )
        operator delete(*(void **)(this + 4));
      *(_DWORD *)(this + 12) = &v12[v25];
      *(_DWORD *)(this + 8) = &v12[v17];
      *(_DWORD *)(this + 4) = v12;
    }
  }
}

//----- (658A1F80) --------------------------------------------------------
int *__thiscall MsgId_77_WithPayload(int **this, int a2, int *a3)
{
  int v3; // esi
  int *result; // eax

  v3 = *a3;
  result = IntRBTree_FindOrInsert(this + 211, &a2);
  *result = v3;
  return result;
}

//----- (658A1FF0) --------------------------------------------------------
char __thiscall FactionPerks_ActivatePerk(char **this, int a2, char a3)
{
  _WORD *v4; // edi
  char v5; // bl
  _WORD *v6; // eax
  int v7; // eax
  char **v9; // edi
  unsigned int v10; // edx
  char v11; // cl
  int v12; // eax
  _DWORD *v13; // esi
  unsigned int v14; // eax
  _BYTE v15[44]; // [esp-1Ch] [ebp-B0h] BYREF
  _BYTE v16[28]; // [esp+10h] [ebp-84h] BYREF
  _BYTE *v17; // [esp+2Ch] [ebp-68h]
  char v18[8]; // [esp+30h] [ebp-64h] BYREF
  int v19; // [esp+38h] [ebp-5Ch]
  int v20; // [esp+90h] [ebp-4h]

  v4 = WordArray_FindById(this, a2);
  if ( !v4 )
    return 0;
  v5 = a3;
  if ( a3 )
  {
    if ( SkillArray_HasSkillOfType(this, a2) )
      return 0;
  }
  else
  {
    if ( !SkillDefTable_CopyEntry(a2, v18) )
      return 0;
    if ( (unsigned int)(v19 - 1) <= 0x26 )
    {
      v6 = WordArray_FindById(this, v19);
      if ( !v6 )
      {
        v17 = v15;
        sub_65941410(v15, 3185);
        v7 = FormatString((int)v16, (int)"FactionPerks::ActivatePerk: Line {0}");
        v20 = 0;
        Log_WriteErrorIfEnabled(v7);
        v20 = -1;
        std::string::~string(v16);
        return 0;
      }
      if ( !*((_BYTE *)v6 + 3) )
        return 0;
    }
  }
  *((_BYTE *)v4 + 3) = v5 == 0;
  if ( !v5 )
  {
    v9 = this + 6;
    v10 = 0;
    v11 = 1;
    if ( !((*(this + 8) - *(this + 7)) >> 2) )
      goto LABEL_18;
    v12 = *(this + 8) - *(this + 7);
    v13 = *(this + 7);
    v14 = v12 >> 2;
    do
    {
      if ( *v13 == a2 )
        v11 = 0;
      ++v10;
      ++v13;
    }
    while ( v10 < v14 );
    if ( v11 )
LABEL_18:
      Vector_PushBackPtr(v9, &a2);
  }
  return 1;
}

//----- (658A2130) --------------------------------------------------------
void __thiscall sub_658A2130(_DWORD *this, unsigned int *a2)
{
  int v3; // ecx
  unsigned int v4; // eax
  _DWORD *v5; // edi

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) >> 2;
  else
    v4 = 0;
  v5 = (_DWORD *)*(this + 2);
  if ( ((int)v5 - v3) >> 2 >= v4 )
  {
    DwordVector_InsertN((int)this, v5, 1u, a2);
  }
  else
  {
    DwordArray_Fill(v5, 1, a2);
    *(this + 2) = v5 + 1;
  }
}

//----- (658A21A0) --------------------------------------------------------
int __thiscall WeaponFireEntry_pick_list_entry(_DWORD *this)
{
  _DWORD *v2; // edi
  _DWORD *v4; // eax
  int v5; // ecx
  int *v6; // eax
  int *v7; // esi
  bool v8; // bl
  unsigned __int16 Dword_this; // ax
  int **v10; // eax
  int *j; // eax
  int *i; // eax
  int v13; // ecx
  int v14; // esi
  char v15[4]; // [esp+10h] [ebp-24h] BYREF
  _DWORD *v16; // [esp+14h] [ebp-20h]
  int v17; // [esp+18h] [ebp-1Ch]
  int v18; // [esp+1Ch] [ebp-18h]
  _DWORD *v19; // [esp+20h] [ebp-14h]
  _DWORD *v20; // [esp+24h] [ebp-10h]
  int v21; // [esp+30h] [ebp-4h]

  v19 = this;
  v2 = 0;
  if ( !*(this + 213) )
    return 0;
  v4 = (_DWORD *)(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  v5 = 0;
  v20 = v4;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v6 = (int *)*(this + 212);
  v7 = (int *)*v6;
  v21 = 0;
  if ( v7 != v6 )
  {
    do
    {
      v8 = *((_BYTE *)v7 + 19) != 0;
      if ( *((_BYTE *)v7 + 16)
        && (ItemList_HasFireableTypeAllowlist(v20) || ItemSlots_HasFireableTypeAllowlist((_WORD *)v20 + 306)) )
      {
        v8 = 1;
      }
      if ( *((_BYTE *)v7 + 17) && SharedMem_ReadBool_std(0x1EEC3u) )
        v8 = 1;
      if ( *((_BYTE *)v7 + 18)
        && (Dword_this = SharedMem_ReadDword_this(dword_65ABF75C, 0x303Eu),
            ItemTemplate_IsFireableTypeAllowlist(g_ItemTemplateById, Dword_this))
        || v8 )
      {
        IntVector_PushN((int **)v15, v7[3], 1);
      }
      if ( !*((_BYTE *)v7 + 21) )
      {
        v10 = (int **)v7[2];
        if ( *((_BYTE *)v10 + 21) )
        {
          for ( i = (int *)v7[1]; !*((_BYTE *)i + 21); i = (int *)i[1] )
          {
            if ( v7 != (int *)i[2] )
              break;
            v7 = i;
          }
          v7 = i;
        }
        else
        {
          v7 = (int *)v7[2];
          for ( j = *v10; !*((_BYTE *)j + 21); j = (int *)*j )
            v7 = j;
        }
      }
    }
    while ( v7 != (int *)v19[212] );
    v5 = v17;
    v2 = v16;
  }
  v13 = (v5 - (int)v2) >> 2;
  if ( v13 )
    v14 = v2[RandInRange_Int(0, v13 - 1)];
  else
    v14 = 0;
  if ( v2 )
    operator delete(v2);
  return v14;
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658A2340) --------------------------------------------------------
void __thiscall FactionPerks_AddPerkCount(char *this, int a2)
{
  __int16 v2; // bx
  _WORD *v4; // eax
  _WORD *v5; // edi

  v2 = a2;
  v4 = WordArray_FindById(this, a2);
  v5 = v4;
  if ( v4 )
  {
    if ( !SkillSlot_IsMaxLevel((int)v4) )
      ++*((_BYTE *)v5 + 2);
  }
  else
  {
    LOWORD(a2) = v2;
    HIWORD(a2) = 1;
    sub_658A2130((_DWORD *)this + 2, (unsigned int *)&a2);
  }
}

//----- (658A2390) --------------------------------------------------------
int __thiscall WeaponFireEntry_build_from_state(_DWORD *this, int a2)
{
  int Dword_this; // eax
  int v4; // ebx
  int v5; // edx
  double v6; // st7
  int v7; // eax
  double v8; // st7
  int v9; // eax
  double v10; // st7
  unsigned int v11; // eax
  unsigned int v12; // eax
  void *v13; // esi
  BOOL v14; // eax
  int v15; // eax
  double v16; // st7
  int v17; // eax
  double v18; // st7
  char v19; // al
  _DWORD *v20; // ecx
  int result; // eax
  float v22[4]; // [esp+10h] [ebp-3Ch] BYREF
  char v23[4]; // [esp+20h] [ebp-2Ch] BYREF
  float v24; // [esp+24h] [ebp-28h]
  float v25[3]; // [esp+2Ch] [ebp-20h] BYREF
  float v26; // [esp+38h] [ebp-14h] BYREF
  float v27; // [esp+3Ch] [ebp-10h]
  float v28; // [esp+40h] [ebp-Ch]
  _DWORD *v29; // [esp+44h] [ebp-8h]
  int v30; // [esp+48h] [ebp-4h]

  v29 = this;
  Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
  v4 = a2;
  *(_DWORD *)(a2 + 4) = Dword_this;
  a2 = 0;
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 8, &a2);
  *(_DWORD *)(v4 + 180) = a2;
  (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, *this, v25);
  v22[0] = 0.0;
  v22[1] = 0.0;
  v22[2] = 0.0;
  v5 = *this;
  v22[3] = 1.0;
  (*(void (__thiscall **)(int, int, float *))(*(_DWORD *)g_pILTClient + 148))(g_pILTClient, v5, v22);
  (*(void (__thiscall **)(int, float *, char *))(*(_DWORD *)dword_65A5AA40 + 28))(dword_65A5AA40, v22, v23);
  v6 = v25[1];
  *(_WORD *)(v4 + 12) = (int)v25[0];
  v7 = (int)v6;
  v8 = v25[2];
  *(_WORD *)(v4 + 14) = v7;
  v9 = (int)v8;
  v10 = v24 + 3.141592741012573;
  *(_WORD *)(v4 + 16) = v9;
  v30 = (int)(v10 * 57.29578018188477);
  *(_WORD *)(v4 + 20) = v30;
  if ( SharedMem_ReadDword_this(dword_65ABF73C, 0) == 4 )
  {
    *(_DWORD *)(v4 + 24) = SharedMem_ReadDword_this(dword_65ABF73C, 0x77u);
    *(_DWORD *)(v4 + 28) = 0;
    *(_BYTE *)(v4 + 32) = 0;
  }
  else if ( SharedMem_ReadDword_this(dword_65ABF73C, 0) == 30 )
  {
    *(_DWORD *)(v4 + 24) = *(unsigned __int16 *)((*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(
                                                   g_LTClient,
                                                   2)
                                               + 8);
    *(_DWORD *)(v4 + 28) = 0;
    *(_BYTE *)(v4 + 32) = 0;
  }
  else
  {
    if ( SharedMem_ReadDword_this(dword_65ABF73C, 0) == 31 )
    {
      v11 = 0;
      *(_DWORD *)(v4 + 24) = 0;
    }
    else
    {
      *(_DWORD *)(v4 + 24) = PackVec3i16_ToPacked1000(COERCE_FLOAT(v4 + 8), 1);
      v11 = PackVec3i16_ToPacked1000(COERCE_FLOAT(v4 + 8), 2);
    }
    *(_DWORD *)(v4 + 28) = v11;
    *(_BYTE *)(v4 + 32) = EncVarMgr_GetInt((_DWORD *)g_pEncVarMgr, 3u);
  }
  *(_DWORD *)(v4 + 100) = (int)SharedMem_ReadFloat_std(0x1D6A5u);
  StatGroup_Read((_DWORD *)g_pEncVarMgr, 2, (_BYTE *)(v4 + 104));
  *(_BYTE *)(v4 + 132) = SharedMem_ReadDword_this(g_pPlayerStats, 0x1CEC2u) == 2;
  *(_DWORD *)(v4 + 108) = SharedMem_ReadDword_this(dword_65ABF73C, 0x8Fu);
  *(_DWORD *)(v4 + 128) = SharedMem_ReadDword_this(g_pPlayerStats, 0x1D6A4u);
  if ( SharedMem_ReadBool_std(0x8Du) )
  {
    *(_DWORD *)(v4 + 128) = 63;
    v12 = *(this + 203);
    if ( v12 < 0x1E )
    {
      *(this + 203) = v12 + 1;
    }
    else
    {
      *(this + 203) = 0;
      SharedMem_WriteU8_std(0x8Du, 0);
    }
  }
  else
  {
    *(this + 203) = 0;
  }
  if ( SharedMem_ReadBool_std(0x1EEC3u) )
    *(_DWORD *)(v4 + 128) = 61;
  if ( StatGroup_CheckLevelThreshold() )
    *(_DWORD *)(v4 + 128) = 62;
  v13 = dword_65ABF75C;
  v14 = SharedMem_ReadDword_this(dword_65ABF75C, 0x3042u) == 1
     || SharedMem_ReadDword_this(v13, 0x3041u) == 1
     || SharedMem_ReadDword_this(v13, 0x3041u) == 2;
  *(_BYTE *)(v4 + 116) = v14;
  *(_WORD *)(v4 + 134) = SharedMem_ReadDword_this(dword_65ABF75C, 0x303Eu);
  v15 = *(this + 202);
  if ( v15 )
  {
    *(this + 202) = v15 - 1;
    *(_DWORD *)(v4 + 120) = SharedMem_ReadDword_this(dword_65ABF75C, 0x3046u);
    v26 = *((float *)dword_65ABF75C + 8);
    v27 = *((float *)dword_65ABF75C + 9);
    v28 = *((float *)dword_65ABF75C + 10);
    if ( !Vec3_IsWithinBounds_511(&v26) )
      Vec3_ScaleToLength(&v26, 511.0);
    v16 = v27;
    *(_WORD *)(v4 + 140) = (int)v26;
    v17 = (int)v16;
    v18 = v28;
    *(_WORD *)(v4 + 142) = v17;
    *(_WORD *)(v4 + 144) = (int)v18;
  }
  else
  {
    *(_DWORD *)(v4 + 120) = 0;
  }
  qmemcpy(
    (void *)(v4 + 34),
    (const void *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2),
    0x32u);
  *(_WORD *)(v4 + 150) = SharedMem_ReadU16_std(0x1D69Fu);
  *(_BYTE *)(v4 + 163) = LTClient_SendMessage((int)"ShieldSetting", 50);
  v19 = SharedMem_ReadDword_this((void *)(dword_65ABF748 + 4), 0xA7u);
  v20 = v29;
  *(_BYTE *)(v4 + 152) = v19;
  *(_DWORD *)(v4 + 156) = WeaponFireEntry_pick_list_entry(v20);
  result = SharedMem_ReadDword_this(g_pPlayerStats, 0x1EA3Eu);
  *(_BYTE *)(v4 + 176) = result;
  return result;
}
// 65A5AA40: using guessed type int dword_65A5AA40;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658A27A0) --------------------------------------------------------
char __thiscall SendPacket_UPDATE(_DWORD *this, int a2, int a3)
{
  char result; // al
  _BYTE *StructE8; // eax
  char v6[8]; // [esp+10h] [ebp-530h] BYREF
  char v7; // [esp+18h] [ebp-528h]
  char v8[1044]; // [esp+1Ch] [ebp-524h] BYREF
  int v9; // [esp+430h] [ebp-110h]
  int v10; // [esp+434h] [ebp-10Ch]
  char v11; // [esp+438h] [ebp-108h]
  unsigned __int8 v12; // [esp+440h] [ebp-100h]
  char v13; // [esp+441h] [ebp-FFh]
  char v14[120]; // [esp+448h] [ebp-F8h] BYREF
  int v15; // [esp+4C0h] [ebp-80h]
  int v16; // [esp+4C8h] [ebp-78h]
  int v17; // [esp+53Ch] [ebp-4h]

  result = SharedMem_ReadBool_std(0x55u);
  if ( result )
  {
    WeaponFireEntry_Init((int)v14);
    v14[0] = 1;
    WeaponFireEntry_build_from_state(this, (int)v14);
    Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)v8);
    v9 = 0;
    v10 = 0;
    v11 = 126;
    *(_DWORD *)v6 = &Packet_ID_UPDATE_vtbl;
    v12 = 0;
    v13 = 0;
    v7 = 25;
    v17 = 0;
    Packet_WriteHeader((int)v6);
    StructE8 = EncVarMgr_GetStructE8((_DWORD *)g_pEncVarMgr, 0xEu);
    if ( !WeaponFireEntry_Equals((int)v14, (int)StructE8)
      || a2
      || (unsigned int)(a3 - *(this + 201)) >= 0x29A
      || v15
      || v16
      || StatGroup_CheckLevelThreshold()
      || SharedMem_ReadBool_std(0x94u)
      || SharedMem_ReadDword_this((void *)(dword_65ABF748 + 4), 0xA7u) )
    {
      if ( v12 < 0xAu )
      {
        WeaponFireEntry_write(v14, v8);
        ++v12;
      }
      EncVarSlotArray_SetByIndex((_DWORD *)g_pEncVarMgr, 0xEu, v14);
      *(this + 201) = a3;
    }
    if ( v12 )
    {
      Packet_ID_UPDATE_write(v6);
      LTClient_SendPacket_BuildIfNeeded(v6, 2, 1, 1, 2);
    }
    v17 = -1;
    *(_DWORD *)v6 = &vtbl_Packet_Unknown0;
    return BitStream_FreeOwnedBuffer((int)v8);
  }
  return result;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659CED90: using guessed type _UNKNOWN *Packet_ID_UPDATE_vtbl;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658A2980) --------------------------------------------------------
void __thiscall PlayerController_EnterVehicle(int this, char a2)
{
  DWORD Time; // eax
  int v4; // ecx
  void (__thiscall *v5)(int, int, int); // eax
  void (__thiscall *v6)(int, int, _DWORD); // eax
  char *v7; // ecx
  _DWORD *v8; // eax
  char *v9; // esi
  int v10; // ecx
  void (__thiscall *v11)(int, int, int); // eax
  void (__thiscall *v12)(int, int, _DWORD); // eax
  char *v13; // esi
  _DWORD *v14; // eax
  double v15; // st7
  int v16; // ecx
  int v17; // [esp+0h] [ebp-34h]
  int v18; // [esp+0h] [ebp-34h]
  int v20; // [esp+1Ch] [ebp-18h] BYREF
  int v21; // [esp+20h] [ebp-14h] BYREF
  int v22; // [esp+24h] [ebp-10h] BYREF
  int v23; // [esp+30h] [ebp-4h]

  if ( SharedMem_ReadBool_std(0x55u) )
  {
    Time = timeGetTime();
    SendPacket_UPDATE((_DWORD *)this, 3, Time);
    *(_DWORD *)(this + 808) = 0;
  }
  v21 = 0;
  if ( (*(int (__thiscall **)(int, int *))(*(_DWORD *)dword_65A5A6E8 + 36))(dword_65A5A6E8, &v21) )
  {
    v4 = 0;
    v21 = 0;
  }
  else
  {
    (*(void (__thiscall **)(int))(*(_DWORD *)v21 + 4))(v21);
    v4 = v21;
  }
  v5 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v4 + 36);
  v23 = 0;
  v5(v4, 121, 8);
  v17 = *FXInstance_Clone(&v21, &v20);
  v6 = *(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 324);
  LOBYTE(v23) = 1;
  v6(g_pILTClient, v17, 0);
  LOBYTE(v23) = 0;
  if ( v20 )
    (*(void (__thiscall **)(int))(*(_DWORD *)v20 + 8))(v20);
  v7 = (char *)dword_65ABF714;
  v8 = (char *)dword_65ABF714 + 284;
  if ( *((_DWORD *)dword_65ABF714 + 71) != 1 )
  {
    *v8 = 1;
    if ( *v8 != 2 )
    {
      v9 = v7 + 292;
      sprintf(v7 + 292, "+%s %f", "CameraMode", 1.0);
      (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v9);
    }
  }
  v22 = 0;
  if ( (*(int (__thiscall **)(int, int *))(*(_DWORD *)dword_65A5A6E8 + 36))(dword_65A5A6E8, &v22) )
  {
    v10 = 0;
    v22 = 0;
  }
  else
  {
    (*(void (__thiscall **)(int))(*(_DWORD *)v22 + 4))(v22);
    v10 = v22;
  }
  v11 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v10 + 36);
  LOBYTE(v23) = 2;
  v11(v10, 128, 8);
  (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v22 + 36))(v22, 2, 8);
  (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v22 + 36))(v22, 1, 32);
  v18 = *FXInstance_Clone(&v22, &v20);
  v12 = *(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 324);
  LOBYTE(v23) = 3;
  v12(g_pILTClient, v18, 0);
  LOBYTE(v23) = 2;
  if ( v20 )
    (*(void (__thiscall **)(int))(*(_DWORD *)v20 + 8))(v20);
  v13 = (char *)dword_65ABF714 + 292;
  sprintf((char *const)dword_65ABF714 + 292, "+%s %d", "CrouchLock", 0);
  (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v13);
  SharedMem_WriteU8_std(0x1D698u, 0);
  SharedMem_WriteU8_std(0x1D699u, 0);
  SharedMem_WriteU8_std(0x1D69Au, 0);
  SharedMem_WriteU8_std(0x1D69Bu, 0);
  v20 = 0;
  StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 2, &v20);
  SharedMem_WriteU8_std(0x9Cu, 1u);
  SharedMem_WriteU16_std(0x9Du, 0);
  if ( *((_DWORD *)dword_65ABF6FC + 11) )
    *((_DWORD *)dword_65ABF6FC + 11) = 0;
  if ( SharedMem_ReadBool_std(0x1D6A9u) )
    SharedMem_WriteU8_std(0x1D6A9u, 0);
  if ( SharedMem_ReadBool_std(0x1EEC4u) )
    SharedMem_WriteU8_std(0x1EEC4u, 0);
  if ( SharedMem_ReadBool_std(0x1EEBEu) )
    SharedMem_WriteU8_std(0x1EEBEu, 0);
  (*(void (__thiscall **)(char *))(*(_DWORD *)&g_pGameClientShell[1]._pad0[24] + 20))(&g_pGameClientShell[1]._pad0[24]);
  *(_DWORD *)(dword_65ABF6F4 + 12) = 0;
  v14 = (_DWORD *)dword_65ABF6F4;
  *(float *)(dword_65ABF6F4 + 68) = 11.0;
  v14[15] = 0;
  v14[16] = 1;
  v14[19] = 0;
  *(_BYTE *)(this + 876) = a2;
  v15 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  v16 = v22;
  LOBYTE(v23) = 0;
  *(float *)(this + 872) = v15 + 10.0;
  if ( v16 )
    (*(void (__thiscall **)(int))(*(_DWORD *)v16 + 8))(v16);
  v22 = 0;
  v23 = -1;
  if ( v21 )
    (*(void (__thiscall **)(int))(*(_DWORD *)v21 + 8))(v21);
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658A2CE0) --------------------------------------------------------
void __thiscall PlayerInput_UpdateAndSend(int this)
{
  HWND v2; // esi
  int v3; // ebx
  double v4; // st7
  BOOL v5; // ecx
  BOOL v6; // eax
  BOOL v7; // esi
  DWORD Time; // eax
  float Src; // [esp+8h] [ebp-Ch] BYREF
  float v10; // [esp+Ch] [ebp-8h] BYREF
  char v11; // [esp+13h] [ebp-1h]

  v2 = (HWND)(*(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 84))(g_LTClient);
  if ( Win32_GetActiveWindow() == v2 )
  {
    v3 = 0;
    if ( SharedMem_ReadBool_std(0x1D699u)
      || SharedMem_ReadBool_std(0x1D698u)
      || SharedMem_ReadBool_std(0x1D69Au)
      || (v11 = 0, SharedMem_ReadBool_std(0x1D69Bu)) )
    {
      v11 = 1;
    }
    if ( !SharedMem_ReadBool_std(0x94u) )
    {
      if ( (unsigned __int8)CVar_GetBoolDefault(dword_65ABF714, (int)"RunLock", 1u) )
        v3 = 16;
      if ( (unsigned __int8)CVar_GetBoolDefault(dword_65ABF714, (int)"CrouchLock", 0) )
        v3 |= 0x20u;
      if ( SharedMem_ReadBool_std(0x1D698u) )
        v3 |= 0x80u;
      if ( SharedMem_ReadBool_std(0x1D699u) )
        v3 |= 0x100u;
      if ( SharedMem_ReadBool_std(0x1D69Au) )
        v3 |= 0x200u;
      if ( SharedMem_ReadBool_std(0x1D69Bu) )
        v3 |= 0x400u;
    }
    if ( !SharedMem_ReadBool_std(0x94u) && *(_DWORD *)(dword_65ABF6F4 + 8) != 4 )
    {
      if ( (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(1) )
        v3 |= 1u;
      if ( (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(2) )
        v3 |= 2u;
      if ( (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(3) )
        v3 |= 4u;
      if ( (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(4) )
        v3 |= 8u;
      if ( (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(7) )
        v3 |= 0x40u;
      if ( !*(_DWORD *)g_pGameClientShell[1]._pad0 )
      {
        if ( (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(15) )
          v3 |= 0x4000u;
        if ( (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(16) )
          v3 |= 0x8000u;
      }
      if ( (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(8) )
        v3 ^= 0x20u;
      if ( (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(5)
        && !v11
        && ((*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(1)
         || (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(2)
         || (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(3)
         || (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(4)
         || (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(7)) )
      {
        v3 |= 0x800u;
      }
      if ( (v3 & 1) != 0 && (v3 & 2) != 0 )
        v3 &= 0xFFFFFFFC;
      if ( (v3 & 4) != 0 && (v3 & 8) != 0 )
        v3 &= 0xFFFFFFF3;
      if ( (unsigned int)PlayerStats_GetStatValue(1u) < 0x3E8 )
        *(_BYTE *)(this + 856) = 1;
      if ( SharedMem_ReadBool_std(0x3044u) )
        v3 &= 0xFFFFF7BF;
      if ( StatGroup_CheckLevelThreshold() || (v3 & 0x780) != 0 )
        v3 &= 0xFFFF3F90;
      if ( (v3 & 0x20) != 0 )
        v3 &= ~0x40u;
      if ( *(_BYTE *)(this + 856) )
      {
        if ( (v3 & 0x800) != 0 )
          v3 &= ~0x800u;
        else
          *(_BYTE *)(this + 856) = 0;
      }
      if ( (v3 & 0x40) != 0 )
      {
        if ( v11
          || (v10 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient),
              *(float *)(this + 164) + 1.0 > v10)
          || (unsigned int)PlayerStats_GetStatValue(1u) < 0x7D0 )
        {
          v3 &= ~0x40u;
        }
        else
        {
          v4 = v10;
          *(float *)(this + 164) = v10;
          *(float *)(dword_65ABF6F4 + 180) = v4 + 1.0;
        }
      }
      if ( (v3 & 0x20) != 0 )
        v3 &= 0xFFFFF7EF;
    }
    v10 = (double)(unsigned int)PlayerStats_GetStatValue(0xBu) / 1000.0;
    if ( v10 >= 0.05000000074505806 )
    {
      if ( v10 > 1.5 )
        v10 = 1.5;
    }
    else
    {
      v10 = 0.050000001;
    }
    Src = v10;
    StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 4, &Src);
    if ( v10 < 0.5 )
      v3 &= 0xFFFFF7AF;
    Src = *(float *)&v3;
    StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 2, &Src);
    PlayerInput_UpdateAimVectors((_DWORD *)this);
    PlayerInput_UpdatePitchFromMouse((float *)this);
    if ( SharedMem_ReadDword_this(g_pPlayerStats, 0x1CEC2u) == 1 )
    {
      v5 = (v3 & 0x4000) != 0 && *(_DWORD *)(dword_65ABF6F4 + 8) != 4;
      v6 = (v3 & 0x8000) != 0 && *(_DWORD *)(dword_65ABF6F4 + 8) != 4;
      v7 = (v3 & 0x800) != 0 && *(_DWORD *)(dword_65ABF6F4 + 8) != 4;
      v10 = *(float *)&v7;
      WeaponFire_UpdateTick((int)dword_65ABF75C, v5, v6, &v10, 0);
      if ( v7 && v10 == 0.0 )
        *(_BYTE *)(this + 856) = 1;
    }
    else
    {
      Src = 0.0;
      WeaponFire_UpdateTick((int)dword_65ABF75C, 0, 0, &Src, 1);
    }
    if ( (v3 & 0x40) != 0 )
    {
      Time = timeGetTime();
      SendPacket_UPDATE((_DWORD *)this, 2, Time);
    }
  }
}
// 658A2CE0: too many cbuild loops
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658A3430) --------------------------------------------------------
void __cdecl SendPacket_ID_FACTION_WithData(int a1)
{
  _DWORD v1[269]; // [esp+4h] [ebp-17E0h] BYREF
  char v2; // [esp+438h] [ebp-13ACh]
  int v3; // [esp+D64h] [ebp-A80h]
  int v4; // [esp+1078h] [ebp-76Ch]
  char v5; // [esp+179Ch] [ebp-48h]
  int v6; // [esp+17E0h] [ebp-4h]

  if ( dword_65ABF86C && dword_65ABF874 )
  {
    if ( a1 )
    {
      Packet_ID_FACTION_ctor((char *)v1);
      v6 = 0;
      v1[268] = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
      v4 = dword_65ABF86C;
      v2 = 68;
      v3 = dword_65ABF874;
      v5 = dword_65ABF870;
      GamePacket_WriteAllFields((int)v1);
      LTClient_SendPacket_BuildIfNeeded(v1, 1, 1, 3, 0);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 4096);
      v6 = -1;
      CharSelectPacket_Dtor((char *)v1);
    }
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF86C: using guessed type int dword_65ABF86C;
// 65ABF870: using guessed type int dword_65ABF870;
// 65ABF874: using guessed type int dword_65ABF874;

//----- (658A3550) --------------------------------------------------------
int __thiscall Packet_Id107_DispatchSubId(void *this, int payload)
{
  int v4; // esi
  char *v5; // eax
  int v6; // esi
  char *v7; // eax
  void *WindowById; // eax
  int v9; // esi
  char *v10; // eax
  int (__cdecl *v11)(int, int, int); // edx
  int v12; // eax
  int v13; // esi
  char *v14; // eax
  int *v15; // eax
  int v16; // esi
  char *v17; // eax
  int v18; // esi
  char *v19; // eax
  int v20; // eax
  int v21; // esi
  char *v22; // eax
  int v23; // eax
  int v24; // eax
  const char *v25; // eax
  int v26; // esi
  char *v27; // eax
  char *v28; // eax
  int v29; // esi
  char *v30; // eax
  int v31; // esi
  char *v32; // eax
  int v33; // esi
  char *v34; // eax
  int v35; // esi
  char *v36; // eax
  int v37; // esi
  char *v38; // eax
  void *v39; // eax
  int v40; // esi
  char *v41; // eax
  int v42; // esi
  char *v43; // eax
  int v44; // esi
  char *v45; // eax
  char *v46; // edi
  char *v47; // esi
  int v48; // esi
  char *v49; // eax
  int v50; // esi
  char *v51; // eax
  int v52; // eax
  int v53; // esi
  char *v54; // eax
  int v55; // esi
  char *v56; // eax
  _BYTE *v57; // eax
  int v58; // eax
  int v59; // esi
  char *v60; // eax
  int v61; // eax
  int v62; // eax
  int v63; // esi
  char *v64; // eax
  _BYTE *v65; // eax
  int v66; // eax
  int (__cdecl *v67)(int, _DWORD); // edx
  int v68; // eax
  int v69; // esi
  char *v70; // eax
  int v71; // esi
  char *v72; // eax
  int v73; // eax
  int v74; // esi
  char *v75; // eax
  int v76; // esi
  char *v77; // eax
  int (__cdecl *v78)(int, _DWORD); // edx
  int v79; // esi
  char *v80; // eax
  _DWORD *v81; // ecx
  int v82; // eax
  int v83; // eax
  bool v84; // cf
  int (__cdecl *v85)(int, int, int, _DWORD); // edx
  int v86; // esi
  char *v87; // eax
  int v88; // esi
  char *v89; // eax
  int v90; // eax
  int v91; // esi
  char *v92; // eax
  int v93; // esi
  int v94; // esi
  const char *v95; // eax
  int v96; // edi
  char *v97; // eax
  int v98; // esi
  char *v99; // eax
  int v100; // esi
  char *v101; // eax
  unsigned __int8 v102; // al
  int v103; // esi
  char *v104; // eax
  int v105; // esi
  char *v106; // eax
  int v107; // esi
  char *v108; // eax
  int v109; // eax
  int v110; // esi
  char *v111; // eax
  _BYTE *v112; // eax
  int v113; // esi
  char *v114; // eax
  int *v115; // eax
  int v116; // eax
  int v117; // eax
  int *v118; // eax
  int v119; // eax
  int v120; // eax
  int v121; // esi
  char *v122; // eax
  char **v123; // eax
  int v124; // esi
  char *v125; // eax
  int *v126; // eax
  int v127; // esi
  char *v128; // eax
  int v129; // esi
  char *v130; // eax
  int v131; // ebx
  _DWORD **v132; // eax
  int v133; // eax
  int v134; // esi
  char *v135; // eax
  int v136; // eax
  int v137; // esi
  int StatValue; // eax
  int v139; // edi
  const char *v140; // eax
  int v141; // esi
  char *v142; // eax
  int v143; // esi
  char *v144; // eax
  int v145; // esi
  char *v146; // eax
  int (__cdecl *v147)(int, _DWORD); // edx
  int v148; // edi
  int (__cdecl *v149)(int, _DWORD); // edx
  const char *v150; // eax
  int v151; // esi
  char *v152; // eax
  int v153; // esi
  char *v154; // eax
  int v155; // esi
  char *v156; // eax
  int v157; // esi
  char *v158; // eax
  int v159; // esi
  char *v160; // eax
  int v161; // esi
  char *v162; // eax
  int v163; // esi
  char *v164; // eax
  _DWORD *v165; // eax
  int v166; // esi
  char *v167; // eax
  char *v168; // eax
  int v169; // esi
  char *v170; // eax
  int v171; // esi
  char *v172; // eax
  _BYTE *v173; // eax
  _BYTE *v174; // eax
  int v175; // esi
  char *v176; // eax
  _BYTE *v177; // eax
  int v178; // esi
  char *v179; // eax
  _BYTE *v180; // eax
  int **v181; // eax
  int v182; // esi
  char *v183; // eax
  char **v184; // eax
  int v185; // eax
  int v186; // esi
  char *v187; // eax
  int *v188; // eax
  int v189; // esi
  char *v190; // eax
  int *v191; // eax
  int v192; // esi
  char *v193; // eax
  int v194; // esi
  char *v195; // eax
  _DWORD *v196; // esi
  char *v197; // eax
  int v198; // esi
  char *v199; // eax
  char *v200; // eax
  char *v201; // eax
  _DWORD *v202; // eax
  int v203; // esi
  char *v204; // eax
  _DWORD *v205; // eax
  int v206; // ecx
  int v207; // esi
  const char *v208; // eax
  int v209; // edi
  char *v210; // eax
  int Dword_this; // eax
  _DWORD *v212; // eax
  int v213; // esi
  int *v214; // eax
  int *v215; // eax
  int *v216; // eax
  int v217; // esi
  char *v218; // eax
  int v219; // eax
  int v220; // esi
  char *v221; // eax
  _DWORD *v222; // eax
  int v223; // esi
  char *v224; // eax
  int v225; // eax
  int v226; // esi
  char *v227; // eax
  int v228; // esi
  char *v229; // eax
  int v230; // eax
  int v231; // esi
  char *v232; // eax
  int v233; // eax
  int v234; // esi
  char *v235; // eax
  _BYTE *v236; // eax
  int v237; // esi
  char *v238; // eax
  int v239; // esi
  char *v240; // eax
  int v241; // edi
  int v242; // ebx
  const char *v243; // esi
  const char *v244; // eax
  int v245; // eax
  int v246; // esi
  char *v247; // eax
  int v248; // ebx
  const char *v249; // esi
  const char *v250; // eax
  int v251; // ebx
  const char *v252; // esi
  const char *v253; // eax
  int v254; // esi
  int v255; // eax
  char *v256; // eax
  int v257; // esi
  const char *v258; // eax
  int v259; // eax
  int v260; // esi
  int v261; // eax
  int v262; // esi
  char *v263; // eax
  int v264; // eax
  int v265; // edx
  void (__thiscall *v266)(int, _DWORD, _DWORD); // eax
  int v267; // edx
  int v268; // eax
  int v269; // esi
  char *v270; // eax
  int v271; // esi
  char *v272; // eax
  int v273; // eax
  char *v274; // eax
  char *v275; // eax
  int v276; // esi
  const char *v277; // eax
  int v278; // edi
  char *v279; // eax
  char *v280; // eax
  int v281; // esi
  char *v282; // eax
  int v283; // esi
  char *v284; // eax
  int v285; // esi
  const char *v286; // eax
  int v287; // esi
  const char *v288; // eax
  int v289; // esi
  const char *v290; // eax
  int v291; // esi
  const char *v292; // eax
  int v293; // eax
  _QWORD *v294; // esi
  char *v295; // eax
  int v296; // esi
  char *v297; // eax
  int v298; // esi
  char *v299; // eax
  int (__cdecl *v300)(int, _DWORD); // edx
  int v301; // esi
  char *v302; // eax
  int (__cdecl *v303)(int, _DWORD); // edx
  int v304; // esi
  char *v305; // eax
  char *v306; // eax
  char **v307; // eax
  int *v308; // eax
  int v309; // esi
  char *v310; // eax
  int *v311; // eax
  int *v312; // esi
  int v313; // esi
  char *v314; // eax
  int *v315; // eax
  int *v316; // esi
  int v317; // esi
  char *v318; // eax
  int v319; // eax
  int **v320; // eax
  int v321; // esi
  char *v322; // eax
  int v323; // eax
  int v324; // esi
  const char *v325; // eax
  char *v326; // eax
  int v327; // eax
  int v328; // eax
  int v329; // esi
  int v330; // edi
  const char *v331; // ebx
  const char *v332; // eax
  int v333; // ebx
  char *v334; // eax
  int v335; // eax
  int v336; // esi
  void *v337; // eax
  float **v338; // eax
  int v339; // eax
  int v340; // eax
  int v341; // esi
  char *v342; // eax
  _DWORD *v343; // eax
  int v344; // esi
  int v345; // edi
  int v346; // [esp-10h] [ebp-804h] BYREF
  const char *v347; // [esp-Ch] [ebp-800h]
  const char *v348; // [esp-8h] [ebp-7FCh]
  const char *v349; // [esp-4h] [ebp-7F8h]
  int v350; // [esp+0h] [ebp-7F4h]
  float v351[6]; // [esp+4h] [ebp-7F0h]
  _BYTE v352[12]; // [esp+1Ch] [ebp-7D8h] BYREF
  int v353[31]; // [esp+98h] [ebp-75Ch] BYREF
  _BYTE v354[28]; // [esp+114h] [ebp-6E0h] BYREF
  _BYTE v355[28]; // [esp+130h] [ebp-6C4h] BYREF
  float v356[3]; // [esp+14Ch] [ebp-6A8h] BYREF
  int v357; // [esp+158h] [ebp-69Ch] BYREF
  int v358; // [esp+15Ch] [ebp-698h] BYREF
  int v359; // [esp+160h] [ebp-694h] BYREF
  int v360; // [esp+164h] [ebp-690h] BYREF
  float v361; // [esp+168h] [ebp-68Ch]
  struct Packet_Id107 v362; // [esp+16Ch] [ebp-688h] BYREF
  _BYTE v363[28]; // [esp+72Ch] [ebp-C8h] BYREF
  char v364[28]; // [esp+748h] [ebp-ACh] BYREF
  char v365[12]; // [esp+764h] [ebp-90h] BYREF
  char v366[12]; // [esp+7A4h] [ebp-50h] BYREF
  char v367[12]; // [esp+7C4h] [ebp-30h] BYREF
  int v368; // [esp+7F0h] [ebp-4h]

  Packet_Id107_Init(&v362);
  v368 = 0;
  if ( !Packet_ID_107_Read(&v362, payload) )
  {
    v368 = -1;
    *(_DWORD *)v362._pad0 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)&v362._pad0[12]);
    return 1;
  }
  switch ( v362.subId )
  {
    case 1u:
      v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5585);
      if ( v4 )
        v25 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
      else
        v25 = byte_659A8B98;
      Network_HandleDisconnect(dword_65ABF734, 1, (int)v25, 1);
      goto LABEL_13;
    case 2u:
      PlayerController_EnterVehicle((int)this, 0);
      goto LABEL_1213;
    case 3u:
      LODWORD(v351[1]) = 5316;
      goto LABEL_64;
    case 4u:
      FriendList_AddEntry(dword_65ABF748, "Cloning complete.", 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      SharedMem_SetFlag_0x94(0);
      LODWORD(v351[1]) = 15;
      goto LABEL_180;
    case 5u:
      LODWORD(v351[1]) = 5340;
      goto LABEL_64;
    case 6u:
      if ( SharedMem_IsValidWorldId(dword_65ABF740) )
        Inventory_CheckSlotAvailable(dword_65ABF740, 0, 0x2Bu);
      v40 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4321);
      if ( v40 )
        v41 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v40);
      else
        v41 = (char *)byte_659A8B98;
      v351[1] = 0.0;
      v351[0] = 0.0;
      v350 = 0;
      v349 = 0;
      v348 = "FFED0000";
      v347 = "00FF0000";
      goto LABEL_135;
    case 7u:
      v40 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5336);
      if ( v40 )
      {
        v41 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v40);
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "FFED0000";
      }
      else
      {
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "FFED0000";
        v41 = (char *)byte_659A8B98;
      }
      v347 = "FF000000";
LABEL_135:
      FriendList_AddEntry(
        dword_65ABF748,
        v41,
        10,
        0,
        1,
        v347,
        v348,
        (char)v349,
        v350,
        SLOBYTE(v351[0]),
        SLOBYTE(v351[1]));
      if ( v40 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v40);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x1000000);
      goto LABEL_1213;
    case 8u:
      v50 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1850);
      if ( v50 )
        v51 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v50);
      else
        v51 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v51, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v50 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v50);
      goto LABEL_147;
    case 9u:
      switch ( *(unsigned int *)((char *)&v362.optA + 2) )
      {
        case 1u:
          LODWORD(v351[1]) = 5343;
          break;
        case 2u:
          LODWORD(v351[1]) = 5344;
          break;
        case 3u:
          LODWORD(v351[1]) = 5342;
          break;
        default:
          LODWORD(v351[1]) = 5341;
          break;
      }
      goto LABEL_64;
    case 0xAu:
      v44 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1846);
      if ( v44 )
        v45 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v44);
      else
        v45 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v45, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v44 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v44);
      v46 = (char *)dword_65ABF734 + 8;
      v47 = (char *)dword_65ABF734 + 948840;
      unknown_libname_664(&v359);
      SharedMem_ReadWorldPosition(&v359);
      *(_DWORD *)v47 = v359;
      sprintf(
        v47 + 2112,
        "Mails\\%s\\Outbox\\%u.fml",
        (const char *)g_pPlayerStats,
        *(unsigned int *)((char *)&v362.optC + 2));
      SaveFileWithStrings(v47 + 2112, v47, (WorldLoginReturnAddrPacked)(v47 + 4), v47 + 24, v47 + 64);
      v46[1884022] = 1;
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x4000);
      goto LABEL_1213;
    case 0xBu:
      LODWORD(v351[1]) = 1847;
      goto LABEL_162;
    case 0xCu:
      LODWORD(v351[1]) = 1848;
      goto LABEL_162;
    case 0xDu:
      LODWORD(v351[1]) = 1899;
LABEL_162:
      v48 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v48 )
        v49 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v48);
      else
        v49 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v49, 10, 0, 1, "FF000000", "FF000000", 0, 0, 0, 0);
      if ( v48 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v48);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x4000);
      goto LABEL_1213;
    case 0xEu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x4000000);
      goto LABEL_1213;
    case 0xFu:
      v42 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1849);
      if ( v42 )
        v43 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v42);
      else
        v43 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v43, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v42 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v42);
LABEL_147:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1);
      SoundMgr_PlaySoundByIndex(dword_65ABF750, 0x3Cu);
      goto LABEL_1213;
    case 0x10u:
      SendPacket_ID_0x7B_Sit(*(int *)((char *)&v362.optC + 2));
      goto LABEL_1213;
    case 0x12u:
      WriteStatGroup5(SBYTE2(v362.optA));
      goto LABEL_1213;
    case 0x13u:
      LODWORD(v351[1]) = 5347;
      goto LABEL_7;
    case 0x14u:
      LODWORD(v351[1]) = 5515;
      goto LABEL_7;
    case 0x15u:
      LODWORD(v351[1]) = 5514;
      goto LABEL_7;
    case 0x16u:
      LODWORD(v351[1]) = 5348;
      goto LABEL_64;
    case 0x17u:
      LODWORD(v351[1]) = 4324;
      goto LABEL_18;
    case 0x18u:
      LODWORD(v351[1]) = 5349;
      goto LABEL_64;
    case 0x19u:
      LODWORD(v351[1]) = 4323;
LABEL_18:
      v6 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v6 )
        v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
      else
        v7 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v7, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v6 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
      WindowById = (void *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x11u);
      if ( WindowById )
        Widget_SendMessage5(WindowById);
      goto LABEL_1213;
    case 0x1Au:
      LODWORD(v351[1]) = 5615;
      goto LABEL_64;
    case 0x1Bu:
      LODWORD(v351[1]) = 4461;
      goto LABEL_117;
    case 0x1Cu:
      LODWORD(v351[1]) = 5616;
      goto LABEL_64;
    case 0x1Du:
      LODWORD(v351[1]) = 4462;
LABEL_117:
      v37 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v37 )
        v38 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v37);
      else
        v38 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v38, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v37 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v37);
      v39 = (void *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x12u);
      if ( v39 )
        CraftingMgr_NotifyUpdate(v39);
      goto LABEL_1213;
    case 0x1Eu:
      v9 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5355);
      if ( v9 )
        v10 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v9);
      else
        v10 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v10, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v9 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v9);
      goto LABEL_113;
    case 0x1Fu:
      v11 = *(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64);
      if ( *(unsigned int *)((char *)&v362.optA + 2) )
        v12 = v11(g_pILTClient, 4326, 30);
      else
        v12 = ((int (__cdecl *)(int, int))v11)(g_pILTClient, 4463);
      v13 = v12;
      if ( v12 )
        v14 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v12);
      else
        v14 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v14, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v13 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v13);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 64);
      v15 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
      if ( v15 )
        goto LABEL_40;
      goto LABEL_1213;
    case 0x20u:
      v16 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
              g_pILTClient,
              5356,
              *(unsigned int *)((char *)&v362.optA + 2));
      if ( v16 )
        v17 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v16);
      else
        v17 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v17, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v16 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v16);
      goto LABEL_113;
    case 0x21u:
      v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5352);
      if ( v18 )
        v19 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v18);
      else
        v19 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v19, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v18 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v18);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 64);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2);
      goto LABEL_1213;
    case 0x22u:
      v35 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5361);
      if ( v35 )
        v36 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v35);
      else
        v36 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v36, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v35 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v35);
      goto LABEL_113;
    case 0x23u:
      v33 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
              g_pILTClient,
              5362,
              *(unsigned int *)((char *)&v362.optA + 2));
      if ( v33 )
        v34 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v33);
      else
        v34 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v34, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v33 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v33);
LABEL_113:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 64);
      goto LABEL_1213;
    case 0x24u:
      v31 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4328);
      if ( v31 )
        v32 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v31);
      else
        v32 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v32, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v31 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v31);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 64);
      v15 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
      if ( v15 )
LABEL_40:
        ProductionWindow_ClearAndRefresh(v15);
      goto LABEL_1213;
    case 0x25u:
      LODWORD(v351[1]) = &v362.strA[126];
      LODWORD(v351[0]) = 4329;
      goto LABEL_54;
    case 0x26u:
      LODWORD(v351[1]) = 5363;
      goto LABEL_64;
    case 0x27u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 16);
      LODWORD(v351[1]) = 5430;
      goto LABEL_64;
    case 0x28u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 16);
      LODWORD(v351[1]) = 5431;
      goto LABEL_64;
    case 0x29u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 16);
      LODWORD(v351[1]) = 5364;
      goto LABEL_64;
    case 0x2Au:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 16);
      LODWORD(v351[1]) = 5365;
      goto LABEL_64;
    case 0x2Bu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 16);
      LODWORD(v351[1]) = 5366;
      goto LABEL_64;
    case 0x2Cu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 16);
      v26 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5367);
      if ( v26 )
        v27 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v26);
      else
        v27 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v27, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v26 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v26);
      v28 = (char *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x15u);
      if ( v28 )
        HandlePacket_ID_6B_SubId44_InventoryUiRefresh(v28);
      goto LABEL_1213;
    case 0x2Du:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 16);
      LODWORD(v351[1]) = 5428;
      goto LABEL_64;
    case 0x2Eu:
      v113 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               5377,
               *(unsigned int *)((char *)&v362.optA + 2));
      if ( v113 )
        v114 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v113);
      else
        v114 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v114, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v113 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v113);
      goto LABEL_189;
    case 0x2Fu:
      LODWORD(v351[1]) = 5357;
      goto LABEL_220;
    case 0x30u:
      LODWORD(v351[1]) = 5370;
      goto LABEL_220;
    case 0x31u:
      LODWORD(v351[1]) = 5371;
      goto LABEL_220;
    case 0x32u:
      LODWORD(v351[1]) = 5468;
      goto LABEL_220;
    case 0x33u:
      LODWORD(v351[1]) = 5466;
      goto LABEL_220;
    case 0x34u:
      LODWORD(v351[1]) = 5467;
      goto LABEL_220;
    case 0x35u:
      LODWORD(v351[1]) = 5372;
      goto LABEL_220;
    case 0x36u:
      LODWORD(v351[1]) = 5621;
      goto LABEL_220;
    case 0x37u:
      v55 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4330);
      if ( v55 )
        v56 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v55);
      else
        v56 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v56, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v55 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v55);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2);
      v57 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x17u);
      if ( v57 && v57[6241] )
        (*(void (__thiscall **)(_BYTE *, int, _DWORD, _DWORD))(*(_DWORD *)v57 + 4))(v57, 4, 0, 0);
      v58 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x13u);
      if ( v58 )
        MarketWindow_SendSearchRequest(v58);
      goto LABEL_1213;
    case 0x38u:
    case 0x39u:
      v29 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5369);
      if ( v29 )
        v30 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v29);
      else
        v30 = (char *)byte_659A8B98;
      v351[1] = 0.0;
      v351[0] = 0.0;
      v350 = 0;
      v349 = 0;
      v348 = "FFED0000";
      v347 = "FFED0000";
      goto LABEL_92;
    case 0x3Au:
      LODWORD(v351[1]) = 5613;
      goto LABEL_183;
    case 0x3Bu:
      LODWORD(v351[1]) = 5516;
LABEL_183:
      v53 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v53 )
        v54 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v53);
      else
        v54 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v54, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v53 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v53);
      if ( *(unsigned int *)((char *)&v362.optA + 2) == 1 )
        goto LABEL_189;
      goto LABEL_1213;
    case 0x3Cu:
      v59 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4331);
      if ( v59 )
        v60 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v59);
      else
        v60 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v60, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v59 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v59);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2);
      if ( *(unsigned int *)((char *)&v362.optA + 2) == 1 )
      {
        v61 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x16u);
        if ( v61 )
          ProductionUI_UpdateDisplay(v61, 0);
      }
      else if ( *(unsigned int *)((char *)&v362.optB + 2) == 2 )
      {
        v62 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x46u);
        if ( v62 )
          TerminalShopUI_UpdateDisplay(v62, 0);
      }
      goto LABEL_1213;
    case 0x3Du:
      switch ( *(unsigned int *)((char *)&v362.optC + 2) )
      {
        case 1u:
          LODWORD(v351[1]) = 5378;
          break;
        case 2u:
          LODWORD(v351[1]) = 5379;
          break;
        case 3u:
          LODWORD(v351[1]) = 5380;
          break;
        case 4u:
          LODWORD(v351[1]) = 5382;
          break;
        case 5u:
          LODWORD(v351[1]) = 5383;
          break;
        default:
          LODWORD(v351[1]) = 5381;
          break;
      }
      goto LABEL_64;
    case 0x3Eu:
      LODWORD(v351[1]) = 5665;
      goto LABEL_220;
    case 0x3Fu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v115 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
      if ( v115 )
        WindowMgr_SelectAndNotify_44(v115);
      LODWORD(v351[1]) = 4338;
      goto LABEL_412;
    case 0x40u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v118 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
      if ( v118 )
        WindowMgr_SelectAndNotify_44(v118);
      SharedMem_WriteUsername((char *)byte_659A8B98);
      SharedMem_WritePassword((char *)byte_659A8B98);
      PacketData_InitFieldsExt((int)v352);
      SharedMem_WritePlayerBlock(v352);
      v119 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
      if ( v119 )
      {
        *(_WORD *)(v119 + 8) = 0;
        *(_BYTE *)(v119 + 48) = 1;
      }
      LODWORD(v351[1]) = 4339;
      goto LABEL_423;
    case 0x41u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5385;
LABEL_412:
      v116 = g_pILTClient;
      goto LABEL_413;
    case 0x42u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v121 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4340);
      if ( v121 )
        v122 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v121);
      else
        v122 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v122, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v121 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v121);
      v123 = (char **)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
      if ( v123 )
        CharWindow_SelectPlayer(v123, *(int *)((char *)&v362.optC + 2));
      goto LABEL_1213;
    case 0x43u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5387;
      goto LABEL_64;
    case 0x44u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5388;
      goto LABEL_64;
    case 0x45u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5402;
      goto LABEL_64;
    case 0x46u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v124 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4341);
      if ( v124 )
        v125 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v124);
      else
        v125 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v125, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v124 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v124);
      v126 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
      if ( v126 )
        DialogUI_ClearText(v126);
      goto LABEL_1213;
    case 0x47u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5389;
      goto LABEL_64;
    case 0x48u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5390;
      goto LABEL_64;
    case 0x49u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5391;
      goto LABEL_64;
    case 0x4Au:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 4342;
      goto LABEL_450;
    case 0x4Bu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5392;
      goto LABEL_64;
    case 0x4Cu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v129 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4343);
      if ( v129 )
        v130 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v129);
      else
        v130 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v130, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v129 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v129);
      v131 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x19u);
      PacketData_InitFieldsExt((int)v353);
      if ( v131 )
      {
        qmemcpy(v353, (const void *)(v131 + 6420), sizeof(v353));
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v131 + 28))(v131, 0);
      }
      v132 = (_DWORD **)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
      if ( v132 )
        CharacterPreview_ApplyData(v132, v353);
      goto LABEL_1213;
    case 0x4Du:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5393;
      goto LABEL_64;
    case 0x4Eu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5394;
      goto LABEL_64;
    case 0x4Fu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5395;
      goto LABEL_64;
    case 0x50u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 4344;
      goto LABEL_450;
    case 0x51u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5396;
      goto LABEL_64;
    case 0x52u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 4345;
LABEL_450:
      v127 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v127 )
        v128 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v127);
      else
        v128 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v128, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v127 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v127);
      LODWORD(v351[1]) = 24;
      goto LABEL_286;
    case 0x53u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 4346;
      goto LABEL_473;
    case 0x54u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5397;
      goto LABEL_64;
    case 0x55u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5398;
      goto LABEL_64;
    case 0x56u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5399;
      goto LABEL_64;
    case 0x57u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5400;
      goto LABEL_64;
    case 0x58u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5401;
      goto LABEL_64;
    case 0x59u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5404;
      goto LABEL_64;
    case 0x5Au:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5403;
      goto LABEL_64;
    case 0x5Bu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v163 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4347);
      if ( v163 )
        v164 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v163);
      else
        v164 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v164, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v163 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v163);
      v165 = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
      if ( v165 )
        GuildUI_ClearSelectedMember(v165);
      goto LABEL_1213;
    case 0x5Cu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5405;
      goto LABEL_64;
    case 0x5Du:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x8000);
      goto LABEL_604;
    case 0x5Eu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5520;
      goto LABEL_64;
    case 0x5Fu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x200000);
      LODWORD(v351[1]) = 5521;
      goto LABEL_64;
    case 0x60u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x200000);
      LODWORD(v351[1]) = 5658;
      goto LABEL_64;
    case 0x61u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5408;
      goto LABEL_64;
    case 0x62u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5409;
      goto LABEL_64;
    case 0x63u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5410;
      goto LABEL_64;
    case 0x64u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v166 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4348);
      if ( v166 )
        v167 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v166);
      else
        v167 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v167, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v166 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v166);
      v168 = (char *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
      if ( v168 )
        CharWindow_RefreshList(v168);
      goto LABEL_1213;
    case 0x65u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 4349;
      goto LABEL_473;
    case 0x66u:
      v169 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5411);
      if ( v169 )
        v170 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v169);
      else
        v170 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v170, 10, 0, 1, "FF000000", "FF000000", 0, 0, 0, 0);
      if ( v169 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v169);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x8000);
      goto LABEL_1213;
    case 0x67u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x8000);
      LODWORD(v351[1]) = 4350;
      goto LABEL_473;
    case 0x68u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v171 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4351);
      if ( v171 )
        v172 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v171);
      else
        v172 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v172, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v171 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v171);
      v173 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
      if ( v173 )
        GuildMgr_ToggleRankFlag(v173, *(int *)((char *)&v362.optC + 2), *(unsigned int *)((char *)&v362.optA + 2) == 0);
      goto LABEL_1213;
    case 0x69u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5412;
      goto LABEL_7;
    case 0x6Au:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x200000);
      LODWORD(v351[1]) = 5413;
      goto LABEL_64;
    case 0x6Bu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x200000);
      LODWORD(v351[1]) = 4359;
      goto LABEL_473;
    case 0x6Cu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x200000);
      LODWORD(v351[1]) = 4360;
      goto LABEL_473;
    case 0x6Du:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x200000);
      LODWORD(v351[1]) = 5414;
      goto LABEL_64;
    case 0x6Eu:
      v178 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5416);
      if ( v178 )
        v179 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v178);
      else
        v179 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v179, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v178 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v178);
      v180 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Cu);
      if ( v180 )
      {
        SetByte6408(v180, 0);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      }
      goto LABEL_1213;
    case 0x6Fu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      v174 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Cu);
      if ( v174 )
        SetByte6408(v174, 1);
      goto LABEL_1213;
    case 0x70u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      v175 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5415);
      if ( v175 )
        v176 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v175);
      else
        v176 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v176, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v175 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v175);
      v177 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Cu);
      if ( v177 )
        SetByte6408(v177, 0);
      goto LABEL_1213;
    case 0x71u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      LODWORD(v351[1]) = 4361;
      goto LABEL_473;
    case 0x72u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      LODWORD(v351[1]) = 5417;
      goto LABEL_64;
    case 0x73u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      v182 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4362);
      if ( v182 )
        v183 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v182);
      else
        v183 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v183, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v182 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v182);
      v184 = (char **)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
      if ( v184 )
        PlayerList_FindAndSelect(v184, *(int *)((char *)&v362.optC + 2));
      goto LABEL_1213;
    case 0x74u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      LODWORD(v351[1]) = 5423;
      goto LABEL_64;
    case 0x75u:
      SharedMem_ClearFlag(dword_65ABF734, 2);
      LODWORD(v351[1]) = 5432;
      goto LABEL_64;
    case 0x76u:
    case 0x77u:
    case 0x78u:
    case 0x79u:
    case 0x7Au:
    case 0x7Bu:
    case 0x7Cu:
      v181 = (int **)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Du);
      if ( v181 )
        SkillWindow_HandleInput(v181, v362.subId, *(int *)((char *)&v362.optC + 2));
      goto LABEL_1213;
    case 0x7Du:
      LODWORD(v351[1]) = 5436;
      goto LABEL_673;
    case 0x7Eu:
      LODWORD(v351[1]) = 5687;
      goto LABEL_64;
    case 0x7Fu:
      LODWORD(v351[1]) = 5437;
      goto LABEL_64;
    case 0x80u:
      LODWORD(v351[1]) = 5445;
      goto LABEL_64;
    case 0x81u:
      LODWORD(v351[1]) = 5440;
      goto LABEL_64;
    case 0x82u:
      v120 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               5439,
               *(unsigned int *)((char *)&v362.optA + 2));
      goto LABEL_424;
    case 0x83u:
      LODWORD(v351[1]) = 5438;
      goto LABEL_64;
    case 0x84u:
    case 0x101u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      LODWORD(v351[1]) = 5447;
      goto LABEL_64;
    case 0x85u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      v23 = g_pILTClient;
      if ( *(unsigned int *)((char *)&v362.optC + 2) )
      {
        v24 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                g_pILTClient,
                5645,
                *(unsigned int *)((char *)&v362.optC + 2));
        goto LABEL_66;
      }
      LODWORD(v351[1]) = 5454;
      goto LABEL_65;
    case 0x86u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      LODWORD(v351[1]) = 5589;
      goto LABEL_64;
    case 0x87u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v192 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5455);
      if ( v192 )
        v193 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v192);
      else
        v193 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v193, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v192 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v192);
      LODWORD(v351[1]) = 33;
LABEL_716:
      v52 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, LODWORD(v351[1]));
      if ( v52 )
        goto LABEL_181;
      goto LABEL_1213;
    case 0x88u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v194 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4368);
      if ( v194 )
        v195 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v194);
      else
        v195 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v195, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v194 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v194);
      v196 = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x21u);
      if ( v196 )
      {
        v197 = (char *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
        if ( v197 )
          GuildNotes_SetMemberNote(v197, SBYTE2(v362.optA), *(char **)(v196[1838] + 176));
        (*(void (__thiscall **)(_DWORD *, _DWORD))(*v196 + 28))(v196, 0);
      }
      goto LABEL_1213;
    case 0x89u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5509;
      goto LABEL_64;
    case 0x8Au:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v201 = (char *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
      if ( v201 )
        GuildMgr_RemoveMemberByIndex(v201, SBYTE2(v362.optA));
      goto LABEL_1213;
    case 0x8Bu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5458;
      goto LABEL_64;
    case 0x8Cu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5459;
      goto LABEL_64;
    case 0x8Du:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v202 = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x21u);
      if ( v202 )
        ItemWindow_OnConfirm(v202);
      goto LABEL_1213;
    case 0x8Eu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5508;
      goto LABEL_64;
    case 0x8Fu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v198 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4399);
      if ( v198 )
        v199 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v198);
      else
        v199 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v199, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v198 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v198);
      v200 = (char *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x18u);
      if ( v200 )
        GuildMgr_AddMemberBankPoints(v200, SBYTE2(v362.optA), *(int *)((char *)&v362.optC + 2));
      goto LABEL_1213;
    case 0x90u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 32);
      v203 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4369);
      if ( v203 )
        v204 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v203);
      else
        v204 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v204, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v203 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v203);
      v205 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 3);
      if ( v205 )
      {
        v206 = *(unsigned int *)((char *)&v362.optC + 2);
        if ( *(unsigned int *)((char *)&v362.optC + 2) > v205[5] )
        {
          v205[5] = *(unsigned int *)((char *)&v362.optC + 2);
          v206 = *(unsigned int *)((char *)&v362.optC + 2);
        }
        v205[7] = v206;
        v205[6] = *(unsigned int *)((char *)&v362.optD + 2);
      }
      goto LABEL_1213;
    case 0x91u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 32);
      LODWORD(v351[1]) = 5462;
      goto LABEL_64;
    case 0x92u:
      v207 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned int *)((char *)&v362.optA + 2) + 21600);
      if ( v207 )
        v208 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v207);
      else
        v208 = byte_659A8B98;
      v209 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4370, v208);
      if ( v207 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v207);
      if ( v209 )
        v210 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v209);
      else
        v210 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v210, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
      if ( v209 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v209);
      Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
      if ( *(unsigned int *)((char *)&v362.optC + 2) == Dword_this )
      {
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
        v212 = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x20u);
        if ( v212 )
          QuestData_CopyObjectiveRange(v212);
      }
      goto LABEL_1213;
    case 0x93u:
    case 0x94u:
    case 0x95u:
    case 0x96u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x2000000);
      if ( v362.subId == 148 )
      {
        v213 = 5467;
      }
      else if ( v362.subId == 150 )
      {
        v213 = 5324;
      }
      else
      {
        v213 = (v362.subId != 149) + 1867;
      }
      v214 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x23u);
      if ( v214 )
        LockWindow_ShowMessage(v214, v213);
      goto LABEL_1213;
    case 0x97u:
      v215 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x23u);
      if ( v215 )
        LockWindow_TryUnlock(v215);
      goto LABEL_1213;
    case 0x98u:
      v216 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x23u);
      if ( !v216 )
      {
        v368 = -1;
        Packet_Unknown0_Dtor(&v362);
        return 0;
      }
      LockWindow_ShowMessage(v216, 1866);
      goto LABEL_1213;
    case 0x99u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5482;
      goto LABEL_64;
    case 0x9Au:
      v186 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5483);
      if ( v186 )
      {
        v187 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v186);
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
      }
      else
      {
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v187 = (char *)byte_659A8B98;
      }
      v348 = "FF000000";
      goto LABEL_691;
    case 0x9Bu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5484;
      goto LABEL_64;
    case 0x9Cu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5485;
      goto LABEL_64;
    case 0x9Du:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5486;
      goto LABEL_64;
    case 0x9Eu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5487;
      goto LABEL_64;
    case 0x9Fu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 4385;
      goto LABEL_473;
    case 0xA0u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 4386;
      goto LABEL_473;
    case 0xA1u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      v226 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4387);
      if ( v226 )
        v227 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v226);
      else
        v227 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v227, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v226 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v226);
      goto LABEL_820;
    case 0xA2u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5490;
      goto LABEL_64;
    case 0xA3u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5492;
      goto LABEL_64;
    case 0xA4u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5496;
      goto LABEL_64;
    case 0xA5u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5497;
      goto LABEL_64;
    case 0xA6u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      v217 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4389);
      if ( v217 )
        v218 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v217);
      else
        v218 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v218, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
      if ( v217 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v217);
      SharedMem_WriteTargetEntity(dword_65ABF748, 0);
      v219 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x24u);
      if ( v219 )
        CraftWindow_StartCrafting(v219);
      goto LABEL_1213;
    case 0xA7u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      v24 = (*(int (__cdecl **)(int, int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5498, 1);
      goto LABEL_66;
    case 0xA8u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      v223 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4390);
      if ( v223 )
        v224 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v223);
      else
        v224 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v224, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v223 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v223);
      v225 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x24u);
      if ( v225 )
        CraftWindow_BeginProduction(v225);
      goto LABEL_1213;
    case 0xA9u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      v220 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4391);
      if ( v220 )
        v221 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v220);
      else
        v221 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v221, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v220 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v220);
      SharedMem_WriteTargetEntity(dword_65ABF748, 0);
      v222 = (_DWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x24u);
      if ( v222 )
        CraftWindow_OnClickConfirm(v222);
      goto LABEL_1213;
    case 0xAAu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      v228 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4392);
      if ( v228 )
        v229 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v228);
      else
        v229 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v229, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v228 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v228);
      v230 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x24u);
      if ( v230 )
        CraftWindow_OnRecipeSelect(v230, *(int *)((char *)&v362.optC + 2));
      goto LABEL_1213;
    case 0xABu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5499;
      goto LABEL_64;
    case 0xACu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      v231 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5500);
      if ( v231 )
        v232 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v231);
      else
        v232 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v232, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v231 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v231);
      v233 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x24u);
      if ( v233 )
        CraftWindow_OnRecipeSelect(v233, *(int *)((char *)&v362.optC + 2));
      SharedMem_WriteTargetEntity(dword_65ABF748, 0);
      goto LABEL_1213;
    case 0xADu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      v234 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4393);
      if ( v234 )
        v235 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v234);
      else
        v235 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v235, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v234 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v234);
      v236 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x24u);
      if ( v236 )
        CraftWindow_OnClickCancel(v236);
LABEL_820:
      SharedMem_WriteTargetEntity(dword_65ABF748, *(int *)((char *)&v362.optC + 2));
      goto LABEL_1213;
    case 0xAEu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5501;
      goto LABEL_64;
    case 0xAFu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      v237 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4394);
      if ( v237 )
        v238 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v237);
      else
        v238 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v238, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v237 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v237);
      LODWORD(v351[1]) = 37;
      goto LABEL_286;
    case 0xB0u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      v239 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4395);
      if ( v239 )
        v240 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v239);
      else
        v240 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v240, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v239 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v239);
      LODWORD(v351[1]) = 36;
      goto LABEL_286;
    case 0xB1u:
      v241 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned int *)((char *)&v362.optA + 2) + 3100);
      v242 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned int *)((char *)&v362.optB + 2) + 21600);
      v361 = *(float *)&v242;
      sub_659483E0(v367, *(char **)((char *)&v362.optC + 2));
      if ( v241 )
        v243 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v241);
      else
        v243 = byte_659A8B98;
      if ( v242 )
        v244 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v242);
      else
        v244 = byte_659A8B98;
      LODWORD(v351[1]) = v367;
      LODWORD(v351[0]) = &v362.strB[126];
      v350 = (int)&v362.strA[126];
      v349 = v243;
      v348 = v244;
      v347 = (const char *)4396;
      goto LABEL_866;
    case 0xB2u:
      v241 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned int *)((char *)&v362.optA + 2) + 3100);
      v248 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned int *)((char *)&v362.optB + 2) + 21600);
      v361 = *(float *)&v248;
      sub_659483E0(v366, *(char **)((char *)&v362.optC + 2));
      if ( v241 )
        v249 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v241);
      else
        v249 = byte_659A8B98;
      if ( v248 )
        v250 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v248);
      else
        v250 = byte_659A8B98;
      LODWORD(v351[1]) = v366;
      LODWORD(v351[0]) = &v362.strB[126];
      v350 = (int)&v362.strA[126];
      v349 = v249;
      v348 = v250;
      v347 = (const char *)4397;
LABEL_866:
      v245 = (*(int (__cdecl **)(int, const char *, const char *, const char *, int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               v347,
               v348,
               v349,
               v350,
               LODWORD(v351[0]),
               LODWORD(v351[1]));
      goto LABEL_867;
    case 0xB3u:
      v241 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned int *)((char *)&v362.optA + 2) + 3100);
      v251 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned int *)((char *)&v362.optB + 2) + 21600);
      v361 = *(float *)&v251;
      if ( v241 )
        v252 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v241);
      else
        v252 = byte_659A8B98;
      if ( v251 )
        v253 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v251);
      else
        v253 = byte_659A8B98;
      v245 = (*(int (__cdecl **)(int, int, const char *, const char *, char *, char *))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               4398,
               v253,
               v252,
               &v362.strA[126],
               &v362.strB[126]);
LABEL_867:
      v246 = v245;
      if ( v245 )
        v247 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v245);
      else
        v247 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v247, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
      if ( v246 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v246);
      if ( v241 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v241);
      if ( v361 != 0.0 )
        (*(void (__thiscall **)(int, float))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, COERCE_FLOAT(LODWORD(v361)));
      goto LABEL_1213;
    case 0xB4u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x200000);
      LODWORD(v351[1]) = 5502;
      goto LABEL_64;
    case 0xB5u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x200000);
      if ( CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x1Bu) )
        WorldMap_ShowTooltip(*(int *)((char *)&v362.optC + 2), *(unsigned int *)((char *)&v362.optD + 2));
      goto LABEL_1213;
    case 0xB6u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x200000);
      LODWORD(v351[1]) = 5503;
      goto LABEL_64;
    case 0xB7u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x200000);
      LODWORD(v351[1]) = 5504;
      goto LABEL_64;
    case 0xB8u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5506;
      goto LABEL_64;
    case 0xB9u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 4402;
      goto LABEL_473;
    case 0xBAu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5456;
      goto LABEL_64;
    case 0xBBu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5511;
      goto LABEL_64;
    case 0xBCu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      v185 = (*(int (__cdecl **)(int, int, unsigned int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               5512,
               *(unsigned int *)((char *)&v362.optD + 2) * *(unsigned int *)((char *)&v362.optB + 2),
               *(unsigned int *)((char *)&v362.optB + 2));
      goto LABEL_674;
    case 0xBDu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5513;
      goto LABEL_64;
    case 0xBEu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      dword_65ABF870 = *(unsigned int *)((char *)&v362.optA + 2);
      dword_65ABF86C = *(unsigned int *)((char *)&v362.optD + 2);
      dword_65ABF874 = *(unsigned int *)((char *)&v362.optC + 2);
      v254 = *(_DWORD *)g_pILTClient;
      v351[1] = *(float *)((char *)&v362.optB + 2);
      if ( *(unsigned int *)((char *)&v362.optA + 2) == 1 )
        v255 = (*(int (__cdecl **)(int, int, unsigned int, _DWORD))(v254 + 64))(
                 g_pILTClient,
                 1877,
                 *(unsigned int *)((char *)&v362.optD + 2) * *(unsigned int *)((char *)&v362.optB + 2),
                 LODWORD(v351[1]));
      else
        v255 = (*(int (__cdecl **)(int, int, unsigned int, _DWORD))(v254 + 64))(
                 g_pILTClient,
                 1876,
                 *(unsigned int *)((char *)&v362.optD + 2) * *(unsigned int *)((char *)&v362.optB + 2),
                 LODWORD(v351[1]));
      if ( v255 )
        v256 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v255);
      else
        v256 = (char *)byte_659A8B98;
      TooltipMgr_ShowTextTooltip((int *)dword_65ABF708, v256, (int)SendPacket_ID_FACTION_WithData, 0, 1, 0);
      goto LABEL_1213;
    case 0xBFu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 4403;
      goto LABEL_473;
    case 0xC0u:
      v63 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4404);
      if ( v63 )
        v64 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v63);
      else
        v64 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v64, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v63 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v63);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2);
      v65 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x26u);
      if ( v65 )
        EquipWindow_ConfirmAction(v65);
      goto LABEL_1213;
    case 0xC1u:
      LODWORD(v351[1]) = 5407;
LABEL_220:
      v29 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v29 )
      {
        v30 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v29);
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "FFED0000";
      }
      else
      {
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "FFED0000";
        v30 = (char *)byte_659A8B98;
      }
      v347 = "FF000000";
LABEL_92:
      FriendList_AddEntry(
        dword_65ABF748,
        v30,
        10,
        0,
        1,
        v347,
        v348,
        (char)v349,
        v350,
        SLOBYTE(v351[0]),
        SLOBYTE(v351[1]));
      if ( v29 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v29);
LABEL_189:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2);
      goto LABEL_1213;
    case 0xC2u:
LABEL_604:
      LODWORD(v351[1]) = 5407;
      goto LABEL_64;
    case 0xC3u:
      LODWORD(v351[1]) = 5518;
      goto LABEL_64;
    case 0xC4u:
      SharedMem_WritePassword(&v362.strA[126]);
      goto LABEL_1213;
    case 0xC5u:
      goto LABEL_226;
    case 0xC6u:
      LODWORD(v351[1]) = 5524;
      goto LABEL_230;
    case 0xC7u:
      v69 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4406);
      if ( v69 )
      {
        v70 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v69);
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "FFED0000";
      }
      else
      {
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "FFED0000";
        v70 = (char *)byte_659A8B98;
      }
      v347 = "00FF0000";
      goto LABEL_236;
    case 0xC8u:
      LODWORD(v351[1]) = 5454;
      goto LABEL_230;
    case 0xC9u:
      LODWORD(v351[1]) = 5595;
      goto LABEL_230;
    case 0xCAu:
      v71 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4407);
      if ( v71 )
        v72 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v71);
      else
        v72 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v72, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v71 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v71);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      switch ( *(unsigned int *)((char *)&v362.optA + 2) )
      {
        case 0x1FEu:
          goto LABEL_252;
        case 0x1FFu:
          goto LABEL_254;
        case 0x200u:
          goto LABEL_262;
        case 0x204u:
          goto LABEL_255;
        default:
          goto LABEL_1213;
      }
      goto LABEL_1213;
    case 0xCBu:
      v74 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4469);
      if ( v74 )
        v75 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v74);
      else
        v75 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v75, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v74 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v74);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      switch ( *(unsigned int *)((char *)&v362.optA + 2) )
      {
        case 0x1FEu:
LABEL_252:
          v73 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x29u);
          if ( v73 )
            (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v73 + 28))(v73, 0);
          goto LABEL_254;
        case 0x1FFu:
          goto LABEL_254;
        case 0x200u:
          goto LABEL_262;
        case 0x204u:
          goto LABEL_255;
        default:
          goto LABEL_1213;
      }
      goto LABEL_1213;
    case 0xCCu:
      v76 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5454);
      if ( v76 )
        v77 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v76);
      else
        v77 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v77, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v76 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v76);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      switch ( *(unsigned int *)((char *)&v362.optA + 2) )
      {
        case 0x1FEu:
          LODWORD(v351[1]) = 41;
          goto LABEL_716;
        case 0x1FFu:
LABEL_254:
          LODWORD(v351[1]) = 42;
          goto LABEL_716;
        case 0x200u:
LABEL_262:
          LODWORD(v351[1]) = 43;
          goto LABEL_716;
        case 0x204u:
LABEL_255:
          LODWORD(v351[1]) = 68;
          goto LABEL_180;
        default:
          goto LABEL_1213;
      }
      goto LABEL_1213;
    case 0xCDu:
      v78 = *(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64);
      if ( *(unsigned int *)((char *)&v362.optB + 2) == 1 )
        LODWORD(v351[1]) = 4409;
      else
        LODWORD(v351[1]) = 4408;
      v79 = v78(g_pILTClient, LODWORD(v351[1]));
      if ( v79 )
        v80 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v79);
      else
        v80 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v80, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v79 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v79);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      switch ( *(unsigned int *)((char *)&v362.optA + 2) )
      {
        case 0x1F5u:
          LODWORD(v351[1]) = 79;
          goto LABEL_286;
        case 0x1FEu:
          LODWORD(v351[1]) = 41;
          goto LABEL_286;
        case 0x1FFu:
          v81 = (_DWORD *)dword_65ABF708;
          LODWORD(v351[1]) = 42;
          if ( *(unsigned int *)((char *)&v362.optB + 2) != 1 )
            goto LABEL_287;
          v82 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, LODWORD(v351[1]));
          if ( v82 )
            *(_DWORD *)(v82 + 6372) = 0;
          break;
        case 0x200u:
          LODWORD(v351[1]) = 43;
          goto LABEL_286;
        case 0x204u:
          LODWORD(v351[1]) = 68;
          goto LABEL_286;
        default:
          goto LABEL_1213;
      }
      goto LABEL_1213;
    case 0xCEu:
      v66 = g_pILTClient;
      v67 = *(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64);
      if ( *(unsigned int *)((char *)&v362.optA + 2) == 1 )
        LODWORD(v351[1]) = 5442;
      else
        LODWORD(v351[1]) = 5525;
      goto LABEL_231;
    case 0xCFu:
      v110 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4409);
      if ( v110 )
        v111 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v110);
      else
        v111 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v111, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
      if ( v110 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v110);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      v112 = (_BYTE *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Au);
      if ( v112 && v112[6241] )
        (*(void (__thiscall **)(_BYTE *, int, int, _DWORD))(*(_DWORD *)v112 + 4))(v112, 4, 1, 0);
      goto LABEL_1213;
    case 0xD0u:
      LODWORD(v351[1]) = 5530;
      goto LABEL_230;
    case 0xD1u:
      if ( *(unsigned int *)((char *)&v362.optA + 2) )
      {
        v84 = (unsigned int)StatGroup5_GetValue() < 2;
        v85 = *(int (__cdecl **)(int, int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64);
        LODWORD(v351[1]) = 50000;
        if ( v84 )
          v68 = v85(g_pILTClient, 5666, 10000, LODWORD(v351[1]));
        else
          v68 = ((int (__cdecl *)(int, int, _DWORD))v85)(g_pILTClient, 5667, LODWORD(v351[1]));
      }
      else
      {
        LODWORD(v351[1]) = 5532;
LABEL_230:
        v66 = g_pILTClient;
        v67 = *(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64);
LABEL_231:
        v68 = v67(v66, LODWORD(v351[1]));
      }
      v69 = v68;
      if ( v68 )
        v70 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v68);
      else
        v70 = (char *)byte_659A8B98;
      v351[1] = 0.0;
      v351[0] = 0.0;
      v350 = 0;
      v349 = 0;
      v348 = "FFED0000";
      v347 = "FF000000";
LABEL_236:
      FriendList_AddEntry(
        dword_65ABF748,
        v70,
        10,
        0,
        1,
        v347,
        v348,
        (char)v349,
        v350,
        SLOBYTE(v351[0]),
        SLOBYTE(v351[1]));
LABEL_237:
      if ( v69 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v69);
LABEL_1207:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      goto LABEL_1213;
    case 0xD2u:
      v86 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4416);
      if ( v86 )
        v87 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v86);
      else
        v87 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v87, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v86 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v86);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x20000);
      LODWORD(v351[1]) = 46;
      goto LABEL_286;
    case 0xD3u:
      LODWORD(v351[1]) = 5533;
      goto LABEL_305;
    case 0xD4u:
      LODWORD(v351[1]) = 5650;
      goto LABEL_305;
    case 0xD5u:
      LODWORD(v351[1]) = 5651;
      goto LABEL_305;
    case 0xD6u:
      if ( *(unsigned int *)((char *)&v362.optA + 2) == 1 )
        v90 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5534);
      else
        v90 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5535);
      v88 = v90;
      if ( v90 )
      {
        v89 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v90);
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
      }
      else
      {
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v89 = (char *)byte_659A8B98;
      }
      v348 = "FF000000";
      goto LABEL_309;
    case 0xD7u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x20000);
      SharedMem_WriteDword_0x77(dword_65ABF73C, *(int *)((char *)&v362.optC + 2));
      SharedMem_WriteDword_0x78(dword_65ABF73C, *(int *)((char *)&v362.optB + 2));
      *((_DWORD *)dword_65ABF73C + 14) = *(unsigned int *)((char *)&v362.optA + 2);
      LoginUI_ShowMessage(6);
      goto LABEL_1213;
    case 0xD8u:
      v91 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5536);
      if ( v91 )
        v92 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v91);
      else
        v92 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v92, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v91 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v91);
      goto LABEL_372;
    case 0xD9u:
      v103 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5537);
      if ( v103 )
        v104 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v103);
      else
        v104 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v104, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v103 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v103);
      goto LABEL_372;
    case 0xDAu:
      v107 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4417);
      if ( v107 )
        v108 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v107);
      else
        v108 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v108, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v107 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v107);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x20000);
      v109 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x30u);
      MailUI_CopyFromInputFields(v109);
      goto LABEL_1213;
    case 0xDBu:
      v100 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4418);
      if ( v100 )
        v101 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v100);
      else
        v101 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v101, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v100 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v100);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x20000);
      if ( SharedMem_ReadBool_std(0x76u) && !SharedMem_ReadBool_std(0x79u) && !SharedMem_ReadBool_std(0x75u) )
      {
        sub_65822890();
        SharedMem_WriteWorldInst_0x1EEC2(dword_65ABF73C, 0);
        v102 = SharedMem_ReadDword_this(dword_65ABF73C, 1u);
        SharedMem_WriteWorldId_0x1EEC1(dword_65ABF73C, v102);
        SharedMem_WriteWorldLoginState_0x1EEC0(dword_65ABF73C, 1u);
        LoginUI_ShowMessage(8);
      }
      goto LABEL_1213;
    case 0xDCu:
      LODWORD(v351[1]) = 5539;
      goto LABEL_305;
    case 0xDDu:
      LODWORD(v351[1]) = 5664;
      goto LABEL_305;
    case 0xDEu:
      v105 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4419);
      if ( v105 )
        v106 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v105);
      else
        v106 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v106, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v105 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v105);
LABEL_372:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x20000);
      LODWORD(v351[1]) = 48;
LABEL_180:
      v52 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, LODWORD(v351[1]));
      if ( v52 )
LABEL_181:
        (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v52 + 28))(v52, 0);
      goto LABEL_1213;
    case 0xDFu:
      LODWORD(v351[1]) = 5540;
      goto LABEL_305;
    case 0xE0u:
      LODWORD(v351[1]) = 5542;
LABEL_305:
      v88 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v88 )
        v89 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v88);
      else
        v89 = (char *)byte_659A8B98;
      v351[1] = 0.0;
      v351[0] = 0.0;
      v350 = 0;
      v349 = 0;
      v348 = "FFED0000";
LABEL_309:
      FriendList_AddEntry(
        dword_65ABF748,
        v89,
        10,
        0,
        1,
        "FF000000",
        v348,
        (char)v349,
        v350,
        SLOBYTE(v351[0]),
        SLOBYTE(v351[1]));
      if ( v88 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v88);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x20000);
      goto LABEL_1213;
    case 0xE1u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x400000);
      if ( SharedMem_ReadDword_this(dword_65ABF73C, 0) != 30
        || (v93 = SharedMem_ReadDword_this(dword_65ABF73C, 1u), v93 == SharedMem_ReadDword_this(dword_65ABF73C, 0)) )
      {
        v94 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 30985);
        if ( v94 )
          v95 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v94);
        else
          v95 = byte_659A8B98;
        v96 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5543, v95);
        if ( v94 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v94);
        if ( v96 )
          v97 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v96);
        else
          v97 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v97, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
        if ( v96 )
LABEL_342:
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v96);
      }
      else
      {
        TravelMgr_HandleAction((float *)dword_65ABF73C, 10);
      }
      goto LABEL_1213;
    case 0xE2u:
      v98 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5544);
      if ( v98 )
        v99 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v98);
      else
        v99 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v99, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v98 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v98);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x400000);
      goto LABEL_1213;
    case 0xE3u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x400000);
      v134 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4421);
      if ( v134 )
        v135 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v134);
      else
        v135 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v135, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v134 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v134);
      SoundMgr_PlaySoundByIndex(dword_65ABF750, 0x188u);
      v136 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x31u);
      if ( v136 )
        (*(void (__thiscall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v136 + 4))(v136, 4, 0, 0);
      goto LABEL_1213;
    case 0xE4u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x400000);
      if ( PlayerStats_GetStatValue(7u) )
      {
        v137 = *(_DWORD *)g_pILTClient;
        StatValue = PlayerStats_GetStatValue(7u);
        v139 = (*(int (__cdecl **)(int, int))(v137 + 64))(g_pILTClient, StatValue + 3100);
        if ( v139 )
          v140 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v139);
        else
          v140 = byte_659A8B98;
        v4 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5681, v140);
        if ( v139 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v139);
      }
      else
      {
        LODWORD(v351[1]) = 5545;
LABEL_64:
        v23 = g_pILTClient;
LABEL_65:
        v24 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)v23 + 64))(v23, LODWORD(v351[1]));
LABEL_66:
        v4 = v24;
      }
      if ( v4 )
      {
        v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
      }
      else
      {
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v5 = (char *)byte_659A8B98;
      }
      v348 = "FFED0000";
LABEL_11:
      v347 = "FF000000";
      goto LABEL_12;
    case 0xE5u:
      LODWORD(v351[1]) = 5546;
      goto LABEL_495;
    case 0xE6u:
      v141 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4422);
      if ( v141 )
      {
        v142 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v141);
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "FFED0000";
      }
      else
      {
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "FFED0000";
        v142 = (char *)byte_659A8B98;
      }
      v347 = "00FF0000";
      goto LABEL_499;
    case 0xE7u:
      SharedMem_WriteWorldId_0x1EEC1(dword_65ABF73C, 4u);
      SharedMem_WriteWorldLoginState_0x1EEC0(dword_65ABF73C, 1u);
      SharedMem_WriteDword_0x77(dword_65ABF73C, *(int *)((char *)&v362.optC + 2));
      SharedMem_WriteDword_0x78(dword_65ABF73C, *(int *)((char *)&v362.optB + 2));
      *((_DWORD *)dword_65ABF73C + 14) = *(unsigned int *)((char *)&v362.optA + 2);
      LoginUI_ShowMessage(7);
      goto LABEL_1213;
    case 0xE8u:
      LODWORD(v351[1]) = 5550;
      goto LABEL_503;
    case 0xE9u:
      LODWORD(v351[1]) = 5551;
      goto LABEL_503;
    case 0xEAu:
      LODWORD(v351[1]) = 5552;
      goto LABEL_503;
    case 0xEBu:
      LODWORD(v351[1]) = 5553;
      goto LABEL_503;
    case 0xECu:
      v145 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4425);
      if ( v145 )
        v146 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v145);
      else
        v146 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v146, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v145 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v145);
      goto LABEL_580;
    case 0xEDu:
      LODWORD(v351[1]) = 5554;
      goto LABEL_503;
    case 0xEEu:
      LODWORD(v351[1]) = 5556;
      goto LABEL_503;
    case 0xEFu:
      v161 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4426);
      if ( v161 )
        v162 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v161);
      else
        v162 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v162, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v161 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v161);
      goto LABEL_580;
    case 0xF0u:
      LODWORD(v351[1]) = 5557;
      goto LABEL_503;
    case 0xF1u:
      if ( *(int *)((char *)&v362.optA + 2) < 2 )
      {
        v147 = *(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64);
        if ( *(unsigned int *)((char *)&v362.optA + 2) == 1 )
          LODWORD(v351[1]) = 18033;
        else
          LODWORD(v351[1]) = 18030;
        v148 = v147(g_pILTClient, LODWORD(v351[1]));
        if ( v148 )
          LODWORD(v351[1]) = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v148);
        else
          LODWORD(v351[1]) = byte_659A8B98;
        LODWORD(v351[0]) = 5558;
        goto LABEL_538;
      }
      if ( *(int *)((char *)&v362.optA + 2) < 4 )
      {
        v149 = *(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64);
        if ( *(unsigned int *)((char *)&v362.optA + 2) == 3 )
          LODWORD(v351[1]) = 18031;
        else
          LODWORD(v351[1]) = 18032;
        v148 = v149(g_pILTClient, LODWORD(v351[1]));
        if ( v148 )
          v150 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v148);
        else
          v150 = byte_659A8B98;
        LODWORD(v351[1]) = v150;
        LODWORD(v351[0]) = 5577;
LABEL_538:
        v143 = (*(int (__cdecl **)(int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
                 g_pILTClient,
                 LODWORD(v351[0]),
                 LODWORD(v351[1]));
        if ( v148 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v148);
        goto LABEL_504;
      }
      LODWORD(v351[1]) = 5559;
LABEL_503:
      v143 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
LABEL_504:
      if ( v143 )
        v144 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v143);
      else
        v144 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v144, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v143 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v143);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x8000000);
LABEL_1213:
      v368 = -1;
      *(_DWORD *)v362._pad0 = &vtbl_Packet_Unknown0;
      BitStream_FreeOwnedBuffer((int)&v362._pad0[12]);
      return 0;
    case 0xF2u:
      v151 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4427);
      if ( v151 )
        v152 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v151);
      else
        v152 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v152, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v151 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v151);
      goto LABEL_580;
    case 0xF3u:
      LODWORD(v351[1]) = 5560;
      goto LABEL_503;
    case 0xF4u:
      v153 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4428);
      if ( v153 )
        v154 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v153);
      else
        v154 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v154, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v153 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v153);
      goto LABEL_580;
    case 0xF5u:
      LODWORD(v351[1]) = 5561;
      goto LABEL_503;
    case 0xF6u:
      v155 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4429);
      if ( v155 )
        v156 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v155);
      else
        v156 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v156, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v155 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v155);
      goto LABEL_580;
    case 0xF7u:
      LODWORD(v351[1]) = 5562;
      goto LABEL_503;
    case 0xF8u:
      v157 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4430);
      if ( v157 )
        v158 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v157);
      else
        v158 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v158, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v157 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v157);
      goto LABEL_580;
    case 0xF9u:
      LODWORD(v351[1]) = 5563;
      goto LABEL_503;
    case 0xFAu:
      v159 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4431);
      if ( v159 )
        v160 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v159);
      else
        v160 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v160, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v159 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v159);
LABEL_580:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x8000000);
      LODWORD(v351[1]) = 51;
      goto LABEL_286;
    case 0xFBu:
      LODWORD(v351[1]) = 5564;
      goto LABEL_64;
    case 0xFCu:
      LODWORD(v351[1]) = 5565;
      goto LABEL_64;
    case 0xFDu:
      LODWORD(v351[1]) = 5566;
      goto LABEL_64;
    case 0xFEu:
      LODWORD(v351[1]) = 5567;
      goto LABEL_64;
    case 0xFFu:
    case 0x100u:
      LODWORD(v351[1]) = 5568;
      goto LABEL_64;
    case 0x102u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      v120 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               4433,
               *(unsigned int *)((char *)&v362.optA + 2));
      goto LABEL_424;
    case 0x103u:
      LODWORD(v351[1]) = 5570;
      goto LABEL_687;
    case 0x104u:
      LODWORD(v351[1]) = 5571;
      goto LABEL_687;
    case 0x105u:
      v188 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
      if ( !v188 )
      {
        v368 = -1;
        Packet_Unknown0_Dtor(&v362);
        return 1;
      }
      CharacterWindow_OnClose(v188, 1, 0);
      LODWORD(v351[1]) = 5572;
LABEL_687:
      v186 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v186 )
        v187 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v186);
      else
        v187 = (char *)byte_659A8B98;
      v351[1] = 0.0;
      v351[0] = 0.0;
      v350 = 0;
      v349 = 0;
      v348 = "FFED0000";
LABEL_691:
      FriendList_AddEntry(
        dword_65ABF748,
        v187,
        10,
        0,
        1,
        "FF000000",
        v348,
        (char)v349,
        v350,
        SLOBYTE(v351[0]),
        SLOBYTE(v351[1]));
      if ( v186 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v186);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x40000);
      goto LABEL_1213;
    case 0x106u:
      LODWORD(v351[1]) = 5573;
      goto LABEL_687;
    case 0x107u:
      v189 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5574);
      if ( v189 )
        v190 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v189);
      else
        v190 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v190, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v189 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v189);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x40000);
      v191 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u);
      if ( v191 )
        sub_657CC0F0(v191);
      goto LABEL_1213;
    case 0x108u:
      LODWORD(v351[1]) = 5581;
LABEL_7:
      v4 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v4 )
        v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
      else
        v5 = (char *)byte_659A8B98;
      v351[1] = 0.0;
      v351[0] = 0.0;
      v350 = 0;
      v349 = 0;
      v348 = "FF000000";
      goto LABEL_11;
    case 0x109u:
      if ( SharedMem_ReadBool_std(0x54u) && SharedMem_ReadBool_std(0x55u) )
      {
        LoginField_QueueUpdate((int **)dword_65ABF708, 2, 1801, *(_DWORD *)(dword_65ABF6F4 + 8), 0);
        GameMode_SetModeFour((int *)dword_65ABF6F4, 0x5Bu);
        sub_65809040((_DWORD *)dword_65ABF708);
      }
      else
      {
LABEL_226:
        if ( *(_DWORD *)dword_65ABF754 == 2 )
          FadeEffect_SetActive((float *)dword_65ABF754, 0);
        TravelMgr_HandleAction((float *)dword_65ABF73C, 1);
      }
      goto LABEL_1213;
    case 0x10Au:
      LODWORD(v351[1]) = 4464;
      goto LABEL_906;
    case 0x10Bu:
      LODWORD(v351[1]) = 4465;
LABEL_906:
      v4 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v4 )
      {
        v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "00FF0000";
      }
      else
      {
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "00FF0000";
        v5 = (char *)byte_659A8B98;
      }
      v347 = "00FF0000";
      goto LABEL_12;
    case 0x10Cu:
      if ( *(unsigned int *)((char *)&v362.optA + 2) - 1 > 0x1E )
      {
        v133 = (*(int (__cdecl **)(int, int, const char *))(*(_DWORD *)g_pILTClient + 64))(
                 g_pILTClient,
                 4436,
                 "INVALID");
LABEL_474:
        v4 = v133;
        if ( v133 )
        {
          v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v133);
          v351[1] = 0.0;
          v351[0] = 0.0;
          v350 = 0;
          v349 = 0;
          v348 = "FFED0000";
        }
        else
        {
          v351[1] = 0.0;
          v351[0] = 0.0;
          v350 = 0;
          v349 = 0;
          v348 = "FFED0000";
          v5 = (char *)byte_659A8B98;
        }
        v347 = "00FF0000";
LABEL_12:
        FriendList_AddEntry(
          dword_65ABF748,
          v5,
          10,
          0,
          1,
          v347,
          v348,
          (char)v349,
          v350,
          SLOBYTE(v351[0]),
          SLOBYTE(v351[1]));
LABEL_13:
        if ( v4 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v4);
      }
      else
      {
        v257 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
                 g_pILTClient,
                 *(unsigned int *)((char *)&v362.optA + 2) + 3100);
        std::string::string(v363);
        LOBYTE(v368) = 1;
        if ( v257 )
          v258 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v257);
        else
          v258 = byte_659A8B98;
        std::string::operator=(v363, v258);
        if ( v257 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v257);
        if ( *(unsigned int *)((char *)&v362.optC + 2) )
        {
          v361 = COERCE_FLOAT(&v346);
          String_FromU32(&v346, *(unsigned int *)((char *)&v362.optC + 2));
          v259 = FormatString((int)v354, (int)" - {0}");
          LOBYTE(v368) = 2;
          std::string::operator+=(v363, v259);
          LOBYTE(v368) = 1;
          std::string::~string(v354);
        }
        v260 = *(_DWORD *)g_pILTClient;
        v261 = std::string::c_str(v363);
        v262 = (*(int (__cdecl **)(int, int, int))(v260 + 64))(g_pILTClient, 4436, v261);
        if ( v262 )
          v263 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v262);
        else
          v263 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v263, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
        if ( v262 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v262);
        LOBYTE(v368) = 0;
        std::string::~string(v363);
      }
      goto LABEL_1213;
    case 0x10Du:
      if ( *(unsigned int *)((char *)&v362.optA + 2) )
      {
        SharedMem_WriteWorldId_0x1EEC1(dword_65ABF73C, BYTE2(v362.optA));
        SharedMem_WriteWorldInst_0x1EEC2(dword_65ABF73C, 0);
        SharedMem_WriteWorldLoginState_0x1EEC0(dword_65ABF73C, 1u);
        LoginUI_ShowMessage(11);
      }
      else
      {
        v361 = (double)*(unsigned int *)((char *)&v362.optD + 2) - 64000.0;
        v351[1] = v361;
        v361 = (double)*(unsigned int *)((char *)&v362.optC + 2) - 64000.0;
        v351[0] = v361;
        v361 = (double)*(int *)((char *)&v362.optB + 2) - 64000.0;
        Vector3_Set(v356, v361, v351[0], v351[1]);
        LTObject_Create(&v360);
        LOBYTE(v368) = 3;
        FXInstance_WriteUInt8(&v360, 0x8Du);
        EntityQuery_GetSortedByDistance(&v360, (int)v356);
        v264 = *FXInstance_Clone(&v360, &v358);
        v265 = *(_DWORD *)g_pILTClient;
        v351[1] = 0.0;
        LODWORD(v351[0]) = v264;
        v266 = *(void (__thiscall **)(int, _DWORD, _DWORD))(v265 + 324);
        LOBYTE(v368) = 4;
        v266(g_pILTClient, LODWORD(v351[0]), 0);
        LOBYTE(v368) = 3;
        FXInstance_Release(&v358);
        LOBYTE(v368) = 0;
        FXInstance_ReleaseAndClear(&v360);
      }
      goto LABEL_1213;
    case 0x10Eu:
      SharedMem_WriteWorldId_0x1EEC1(dword_65ABF73C, 4u);
      SharedMem_WriteWorldInst_0x1EEC2(dword_65ABF73C, 0);
      SharedMem_WriteWorldLoginState_0x1EEC0(dword_65ABF73C, 1u);
      SharedMem_WriteDword_0x77(dword_65ABF73C, *(int *)((char *)&v362.optC + 2));
      SharedMem_WriteDword_0x78(dword_65ABF73C, *(int *)((char *)&v362.optB + 2));
      *((_DWORD *)dword_65ABF73C + 14) = *(unsigned int *)((char *)&v362.optA + 2);
      LoginUI_ShowMessage(13);
      goto LABEL_1213;
    case 0x10Fu:
      v267 = *(_DWORD *)g_pILTClient;
      if ( *(unsigned int *)((char *)&v362.optA + 2) )
      {
        v351[1] = *(float *)((char *)&v362.optA + 2);
        LODWORD(v351[0]) = 4437;
      }
      else
      {
        LODWORD(v351[1]) = 2000;
        LODWORD(v351[0]) = 4481;
      }
      v21 = (*(int (__cdecl **)(int, _DWORD, _DWORD))(v267 + 64))(g_pILTClient, LODWORD(v351[0]), LODWORD(v351[1]));
      if ( v21 )
      {
        v22 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v21);
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
      }
      else
      {
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v22 = (char *)byte_659A8B98;
      }
      v348 = "00FF0000";
      goto LABEL_59;
    case 0x110u:
      v357 = *(_DWORD *)&v362.strA[126];
      v268 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x37u);
      if ( v268 )
        LockWindow_SetPinDigits(v268, *(int *)((char *)&v362.optC + 2), &v357);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      goto LABEL_1213;
    case 0x111u:
      LODWORD(v351[1]) = 5586;
      goto LABEL_941;
    case 0x112u:
      LODWORD(v351[1]) = 5588;
      goto LABEL_941;
    case 0x113u:
      LODWORD(v351[1]) = 5587;
      goto LABEL_941;
    case 0x114u:
      v351[1] = *(float *)((char *)&v362.optC + 2);
      LODWORD(v351[0]) = 4443;
LABEL_54:
      v20 = (*(int (__cdecl **)(int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
              g_pILTClient,
              LODWORD(v351[0]),
              LODWORD(v351[1]));
      goto LABEL_55;
    case 0x115u:
      v271 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4444);
      if ( v271 )
        v272 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v271);
      else
        v272 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v272, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v271 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v271);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      v273 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x38u);
      if ( v273 )
        ShopWindow_SetTimer(v273, *(int *)((char *)&v362.optC + 2));
      goto LABEL_1213;
    case 0x116u:
      v4 = (*(int (__cdecl **)(int, int, char *, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
             g_pILTClient,
             4445,
             &v362.strA[126],
             *(unsigned int *)((char *)&v362.optA + 2),
             *(unsigned int *)((char *)&v362.optB + 2));
      if ( v4 )
        v274 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
      else
        v274 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v274, 0, 0, 1, "00D4FF00", "FFED0000", 0, 0, 0, 0);
      goto LABEL_13;
    case 0x117u:
      v21 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
              g_pILTClient,
              5590,
              *(unsigned int *)((char *)&v362.optA + 2));
      if ( v21 )
        v275 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v21);
      else
        v275 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v275, 0, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      goto LABEL_61;
    case 0x118u:
      v276 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 18009);
      if ( v276 )
        v277 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v276);
      else
        v277 = byte_659A8B98;
      LODWORD(v351[1]) = v277;
      LODWORD(v351[0]) = 5592;
      goto LABEL_969;
    case 0x119u:
      LODWORD(v351[1]) = 5663;
      goto LABEL_978;
    case 0x11Au:
      LODWORD(v351[1]) = 5680;
LABEL_978:
      v69 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v69 )
        v280 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v69);
      else
        v280 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v280, 0, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      goto LABEL_237;
    case 0x11Bu:
      v276 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 18009);
      if ( v276 )
        LODWORD(v351[1]) = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v276);
      else
        LODWORD(v351[1]) = byte_659A8B98;
      LODWORD(v351[0]) = 5593;
LABEL_969:
      v278 = (*(int (__cdecl **)(int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               LODWORD(v351[0]),
               LODWORD(v351[1]));
      if ( v276 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v276);
      if ( v278 )
        v279 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v278);
      else
        v279 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v279, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v278 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v278);
      goto LABEL_1207;
    case 0x11Cu:
      LODWORD(v351[1]) = 5594;
      goto LABEL_230;
    case 0x11Du:
      LODWORD(v351[1]) = 5596;
      goto LABEL_64;
    case 0x11Eu:
      LODWORD(v351[1]) = 5597;
      goto LABEL_941;
    case 0x11Fu:
      LODWORD(v351[1]) = 5598;
LABEL_941:
      v269 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v269 )
        v270 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v269);
      else
        v270 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v270, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v269 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v269);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      goto LABEL_1213;
    case 0x120u:
      v281 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4446);
      if ( v281 )
        v282 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v281);
      else
        v282 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v282, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v281 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v281);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      LODWORD(v351[1]) = 57;
      goto LABEL_286;
    case 0x121u:
      LODWORD(v351[1]) = 4447;
      goto LABEL_473;
    case 0x122u:
      LODWORD(v351[1]) = 4488;
      goto LABEL_473;
    case 0x123u:
      LODWORD(v351[1]) = 5599;
      goto LABEL_687;
    case 0x124u:
      LODWORD(v351[1]) = 5617;
      goto LABEL_687;
    case 0x125u:
      v283 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4448);
      if ( v283 )
        v284 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v283);
      else
        v284 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v284, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v283 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v283);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      LODWORD(v351[1]) = 58;
      goto LABEL_286;
    case 0x126u:
      LODWORD(v351[1]) = 4449;
      goto LABEL_473;
    case 0x127u:
      LODWORD(v351[1]) = 5601;
      goto LABEL_495;
    case 0x128u:
      LODWORD(v351[1]) = 5682;
LABEL_495:
      v141 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v141 )
        v142 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v141);
      else
        v142 = (char *)byte_659A8B98;
      v351[1] = 0.0;
      v351[0] = 0.0;
      v350 = 0;
      v349 = 0;
      v348 = "FFED0000";
      v347 = "FF000000";
LABEL_499:
      FriendList_AddEntry(
        dword_65ABF748,
        v142,
        10,
        0,
        1,
        v347,
        v348,
        (char)v349,
        v350,
        SLOBYTE(v351[0]),
        SLOBYTE(v351[1]));
      if ( v141 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v141);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x2000);
      goto LABEL_1213;
    case 0x129u:
      v285 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5602);
      if ( v285 )
        v286 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v285);
      else
        v286 = byte_659A8B98;
      std::string::string(v364, v286);
      LOBYTE(v368) = 5;
      if ( v285 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v285);
      if ( *(unsigned int *)((char *)&v362.optA + 2) <= 5 )
      {
        v287 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
                 g_pILTClient,
                 *(unsigned int *)((char *)&v362.optA + 2) + 50516);
        if ( v287 )
          v288 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v287);
        else
          v288 = byte_659A8B98;
        std::string::operator=(v364, v288);
        if ( v287 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v287);
        if ( *(unsigned int *)((char *)&v362.optB + 2) - 1 <= 0x1E )
        {
          v289 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
                   g_pILTClient,
                   *(unsigned int *)((char *)&v362.optB + 2) + 3100);
          if ( v289 )
            v290 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v289);
          else
            v290 = byte_659A8B98;
          std::string::operator=(v364, v290);
          if ( v289 )
            (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v289);
          if ( *(unsigned int *)((char *)&v362.optC + 2) )
          {
            v291 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
                     g_pILTClient,
                     *(unsigned int *)((char *)&v362.optC + 2) + 14000);
            v292 = v291
                 ? (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v291)
                 : byte_659A8B98;
            v361 = COERCE_FLOAT(&v346);
            String_AssignFromPtr(&v346, (int)v292);
            v293 = FormatString((int)v355, (int)" - {0}");
            LOBYTE(v368) = 6;
            std::string::operator+=(v364, v293);
            LOBYTE(v368) = 5;
            std::string::~string(v355);
            if ( v291 )
              (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v291);
          }
        }
      }
      v294 = (_QWORD *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Bu);
      if ( v294 )
      {
        v295 = (char *)std::string::c_str(v364);
        UiTimer_SetTextAndDelay(v294, v295);
      }
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x2000);
      LOBYTE(v368) = 0;
      std::string::~string(v364);
      goto LABEL_1213;
    case 0x12Au:
      v296 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5603);
      if ( v296 )
        v297 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v296);
      else
        v297 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v297, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v296 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v296);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      goto LABEL_1213;
    case 0x12Bu:
      v298 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4450);
      if ( v298 )
        v299 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v298);
      else
        v299 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v299, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v298 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v298);
      goto LABEL_1065;
    case 0x12Cu:
      v300 = *(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64);
      if ( *(unsigned int *)((char *)&v362.optA + 2) == 1 )
        LODWORD(v351[1]) = 5635;
      else
        LODWORD(v351[1]) = 5634;
      v301 = v300(g_pILTClient, LODWORD(v351[1]));
      if ( v301 )
        v302 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v301);
      else
        v302 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v302, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v301 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v301);
      goto LABEL_1065;
    case 0x12Du:
      v303 = *(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64);
      if ( *(unsigned int *)((char *)&v362.optA + 2) == 1 )
        LODWORD(v351[1]) = 4472;
      else
        LODWORD(v351[1]) = 4471;
      v304 = v303(g_pILTClient, LODWORD(v351[1]));
      if ( v304 )
        v305 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v304);
      else
        v305 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v305, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v304 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v304);
LABEL_1065:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 24;
      goto LABEL_286;
    case 0x12Eu:
      if ( *(unsigned int *)((char *)&v362.optD + 2) == 2 || *(unsigned int *)((char *)&v362.optD + 2) == 1 )
      {
        v307 = (char **)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 5);
        if ( v307 )
          FactionPerks_ActivatePerk(
            v307,
            *(int *)((char *)&v362.optC + 2),
            *(unsigned int *)((char *)&v362.optD + 2) == 2);
      }
      else
      {
        v306 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 5);
        if ( v306 )
          FactionPerks_AddPerkCount(v306, *(int *)((char *)&v362.optC + 2));
      }
      goto LABEL_1213;
    case 0x12Fu:
      v308 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x40u);
      if ( v308 )
        sub_65832C20(v308, *(int *)((char *)&v362.optC + 2), *(int *)((char *)&v362.optD + 2));
      goto LABEL_1213;
    case 0x130u:
      LODWORD(v351[1]) = 5604;
      goto LABEL_673;
    case 0x131u:
      LODWORD(v351[1]) = 5605;
      goto LABEL_64;
    case 0x132u:
      v309 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4453);
      if ( v309 )
        v310 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v309);
      else
        v310 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v310, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v309 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v309);
      v311 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Eu);
      v312 = v311;
      if ( v311 )
      {
        WindowMgr_SelectGroup(v311, 60);
        (*(void (__thiscall **)(int *, int, _DWORD, _DWORD))(*v312 + 4))(v312, 5, 0, 0);
      }
      goto LABEL_1213;
    case 0x133u:
      LODWORD(v351[1]) = 4454;
      goto LABEL_473;
    case 0x134u:
      LODWORD(v351[1]) = 5606;
      goto LABEL_64;
    case 0x135u:
      LODWORD(v351[1]) = 5607;
      goto LABEL_64;
    case 0x136u:
      v313 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4455);
      if ( v313 )
        v314 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v313);
      else
        v314 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v314, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v313 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v313);
      v315 = (int *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Eu);
      v316 = v315;
      if ( v315 )
      {
        WindowMgr_SelectGroup(v315, 61);
        (*(void (__thiscall **)(int *, int, _DWORD, _DWORD))(*v316 + 4))(v316, 5, 0, 0);
      }
      goto LABEL_1213;
    case 0x137u:
      LODWORD(v351[1]) = 4456;
      goto LABEL_473;
    case 0x138u:
      LODWORD(v351[1]) = 5608;
      goto LABEL_64;
    case 0x139u:
      LODWORD(v351[1]) = 5619;
      goto LABEL_64;
    case 0x13Au:
      LODWORD(v351[1]) = 4457;
      goto LABEL_1097;
    case 0x13Bu:
      LODWORD(v351[1]) = 4458;
      goto LABEL_1097;
    case 0x13Cu:
      LODWORD(v351[1]) = 4459;
      goto LABEL_1097;
    case 0x13Du:
      LODWORD(v351[1]) = 4460;
LABEL_1097:
      v317 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      if ( v317 )
        v318 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v317);
      else
        v318 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v318, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
      if ( v317 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v317);
      LODWORD(v351[1]) = 62;
LABEL_286:
      v81 = (_DWORD *)dword_65ABF708;
LABEL_287:
      v83 = CWindowMgr_GetWindowById(v81, LODWORD(v351[1]));
      if ( v83 )
        (*(void (__thiscall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v83 + 4))(v83, 5, 0, 0);
      goto LABEL_1213;
    case 0x13Eu:
      v319 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Eu);
      if ( v319 )
        sub_65827530(v319, *(int *)((char *)&v362.optC + 2), &v362.strA[126]);
      goto LABEL_1213;
    case 0x13Fu:
      v320 = (int **)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x3Eu);
      if ( v320 )
        ProductionWindow_AddToQueue(v320, *(int *)((char *)&v362.optC + 2), (int)&v362.strA[126]);
      goto LABEL_1213;
    case 0x140u:
      LODWORD(v351[1]) = 5609;
      goto LABEL_64;
    case 0x141u:
      v321 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5610);
      if ( v321 )
        v322 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v321);
      else
        v322 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v322, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v321 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v321);
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x10000000);
      goto LABEL_1213;
    case 0x142u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5614;
      goto LABEL_64;
    case 0x144u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 1024);
      LODWORD(v351[1]) = 5618;
      goto LABEL_64;
    case 0x145u:
      v323 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0);
      if ( v323 )
        CharSelectUI_DisplayCharacter(v323, *(int *)((char *)&v362.optC + 2), &v362.strA[126], (int *)&v362.strA[2]);
      goto LABEL_1213;
    case 0x146u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      LODWORD(v351[1]) = 5624;
      goto LABEL_64;
    case 0x147u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      LODWORD(v351[1]) = 5625;
      goto LABEL_64;
    case 0x148u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      LODWORD(v351[1]) = 5626;
      goto LABEL_64;
    case 0x149u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      LODWORD(v351[1]) = 5627;
      goto LABEL_64;
    case 0x14Au:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      LODWORD(v351[1]) = 5628;
      goto LABEL_64;
    case 0x14Bu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 8);
      LODWORD(v351[1]) = 5657;
      goto LABEL_64;
    case 0x14Cu:
      v324 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned int *)((char *)&v362.optC + 2) + 14000);
      if ( v324 )
        v325 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v324);
      else
        v325 = byte_659A8B98;
      v351[1] = *(float *)((char *)&v362.optD + 2);
      LODWORD(v351[0]) = v325;
      v350 = 4467;
      goto LABEL_1131;
    case 0x14Du:
      v324 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned int *)((char *)&v362.optC + 2) + 14000);
      if ( v324 )
      {
        v327 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v324);
        v351[1] = *(float *)((char *)&v362.optD + 2);
        LODWORD(v351[0]) = v327;
      }
      else
      {
        v351[1] = *(float *)((char *)&v362.optD + 2);
        LODWORD(v351[0]) = byte_659A8B98;
      }
      v350 = 4468;
LABEL_1131:
      v96 = (*(int (__cdecl **)(int, int, _DWORD, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
              g_pILTClient,
              v350,
              LODWORD(v351[0]),
              LODWORD(v351[1]));
      if ( v324 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v324);
      if ( v96 )
        v326 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v96);
      else
        v326 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v326, 10, 0, 1, "FFD26400", "FFED0000", 0, 0, 0, 0);
      if ( v96 )
        goto LABEL_342;
      goto LABEL_1213;
    case 0x14Eu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      LODWORD(v351[1]) = 5629;
      goto LABEL_64;
    case 0x14Fu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      LODWORD(v351[1]) = 4470;
      goto LABEL_473;
    case 0x150u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      LODWORD(v351[1]) = 5631;
      goto LABEL_64;
    case 0x151u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      LODWORD(v351[1]) = 5637;
      goto LABEL_64;
    case 0x152u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      LODWORD(v351[1]) = 5647;
      goto LABEL_64;
    case 0x153u:
      v328 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x48u);
      if ( v328 )
        TradeWindow_SetState(
          v328,
          *(int *)((char *)&v362.optD + 2),
          *(unsigned int *)((char *)&v362.optB + 2) == 1,
          *(unsigned int *)((char *)&v362.optC + 2) == 1,
          SBYTE2(v362.optA));
      GameMode_SetModeFour((int *)dword_65ABF6F4, 0x48u);
      goto LABEL_1213;
    case 0x154u:
      LODWORD(v351[1]) = 5640;
LABEL_673:
      v185 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      goto LABEL_674;
    case 0x155u:
      v185 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               5641,
               *(unsigned int *)((char *)&v362.optC + 2));
      goto LABEL_674;
    case 0x156u:
      LODWORD(v351[1]) = 4474;
      goto LABEL_473;
    case 0x157u:
      LODWORD(v351[1]) = 4475;
      goto LABEL_473;
    case 0x158u:
      v185 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               5644,
               *(unsigned int *)((char *)&v362.optC + 2));
      goto LABEL_674;
    case 0x159u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      LODWORD(v351[1]) = 4476;
      goto LABEL_473;
    case 0x15Au:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      LODWORD(v351[1]) = 5646;
      goto LABEL_64;
    case 0x15Bu:
      sub_659483E0(v365, *(char **)((char *)&v362.optC + 2));
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      v185 = (*(int (__cdecl **)(int, int, char *))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5648, v365);
LABEL_674:
      v21 = v185;
      if ( v185 )
      {
        v22 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v185);
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "FFED0000";
      }
      else
      {
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "FFED0000";
        v22 = (char *)byte_659A8B98;
      }
      v347 = "FF000000";
      goto LABEL_60;
    case 0x15Cu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 2048);
      LODWORD(v351[1]) = 5649;
      goto LABEL_64;
    case 0x15Du:
      SharedMem_WriteUsername(&v362.strA[126]);
      goto LABEL_1213;
    case 0x15Eu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x8000000);
      LODWORD(v351[1]) = 5654;
      goto LABEL_64;
    case 0x15Fu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 0x8000000);
      v20 = (*(int (__cdecl **)(int, int, char *, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
              g_pILTClient,
              4477,
              &v362.strA[126],
              *(unsigned int *)((char *)&v362.optC + 2));
LABEL_55:
      v21 = v20;
      if ( v20 )
        v22 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v20);
      else
        v22 = (char *)byte_659A8B98;
      v351[1] = 0.0;
      v351[0] = 0.0;
      v350 = 0;
      v349 = 0;
      v348 = "FFED0000";
LABEL_59:
      v347 = "00FF0000";
      goto LABEL_60;
    case 0x160u:
      v329 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned int *)((char *)&v362.optA + 2) + 3100);
      v330 = (*(int (__cdecl **)(int, unsigned int))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               *(unsigned int *)((char *)&v362.optB + 2) + 14000);
      if ( v330 )
        v331 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v330);
      else
        v331 = byte_659A8B98;
      if ( v329 )
        v332 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v329);
      else
        v332 = byte_659A8B98;
      v333 = (*(int (__cdecl **)(int, int, char *, const char *, const char *))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               4478,
               &v362.strA[126],
               v332,
               v331);
      if ( v329 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v329);
      if ( v330 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v330);
      if ( v333 )
        v334 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v333);
      else
        v334 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v334, 2, 0, 1, "FFD26400", "FFED0000", 0, 0, 0, 0);
      if ( v333 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v333);
      goto LABEL_1213;
    case 0x161u:
      v335 = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x4Du);
      v336 = v335;
      if ( v335 )
      {
        ChatInput_SetNameAndFocus(v335, &v362.strA[126], *(int *)((char *)&v362.optC + 2));
        (*(void (__thiscall **)(int))(*(_DWORD *)v336 + 16))(v336);
        (*(void (__thiscall **)(int, int))(*(_DWORD *)v336 + 28))(v336, 1);
      }
      goto LABEL_1213;
    case 0x162u:
      v337 = (void *)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x4Du);
      if ( v337 )
        ChatInput_ClearAndReset(v337);
      goto LABEL_1213;
    case 0x163u:
      v338 = (float **)CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x40u);
      if ( v338 )
        BroadcastUI_ShowLevelMessage(v338, *(int *)((char *)&v362.optC + 2), BYTE2(v362.optA));
      goto LABEL_1213;
    case 0x164u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5669;
      goto LABEL_64;
    case 0x165u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5670;
      goto LABEL_64;
    case 0x166u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 4482;
      goto LABEL_473;
    case 0x167u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5671;
      goto LABEL_64;
    case 0x168u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 4483;
      goto LABEL_473;
    case 0x169u:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5672;
      goto LABEL_64;
    case 0x16Au:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 4484;
LABEL_473:
      v133 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
      goto LABEL_474;
    case 0x16Bu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5673;
      goto LABEL_64;
    case 0x16Cu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5674;
      goto LABEL_64;
    case 0x16Du:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5675;
      goto LABEL_64;
    case 0x16Eu:
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 76))(g_LTClient, 4096);
      LODWORD(v351[1]) = 5678;
      goto LABEL_64;
    case 0x16Fu:
      v339 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
      if ( v339 )
      {
        *(_WORD *)(v339 + 10) = 0;
        LODWORD(v351[1]) = 4485;
LABEL_423:
        v120 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, LODWORD(v351[1]));
LABEL_424:
        v21 = v120;
        if ( v120 )
        {
          v22 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v120);
          v351[1] = 0.0;
          v351[0] = 0.0;
          v350 = 0;
          v349 = 0;
          v348 = "FFED0000";
        }
        else
        {
          v351[1] = 0.0;
          v351[0] = 0.0;
          v350 = 0;
          v349 = 0;
          v348 = "FFED0000";
          v22 = (char *)byte_659A8B98;
        }
        v347 = "FFED0000";
LABEL_60:
        FriendList_AddEntry(
          dword_65ABF748,
          v22,
          10,
          0,
          1,
          v347,
          v348,
          (char)v349,
          v350,
          SLOBYTE(v351[0]),
          SLOBYTE(v351[1]));
LABEL_61:
        if ( v21 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v21);
      }
      goto LABEL_1213;
    case 0x170u:
      v340 = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 2);
      if ( !v340 )
        goto LABEL_1213;
      *(_WORD *)(v340 + 10) = HIWORD(v362.optA);
      v116 = g_pILTClient;
      if ( *(unsigned int *)((char *)&v362.optA + 2) )
      {
        v117 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4486);
      }
      else
      {
        LODWORD(v351[1]) = 4487;
LABEL_413:
        v117 = (*(int (__cdecl **)(int, _DWORD))(*(_DWORD *)v116 + 64))(v116, LODWORD(v351[1]));
      }
      v4 = v117;
      if ( v117 )
      {
        v5 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v117);
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "FFED0000";
      }
      else
      {
        v351[1] = 0.0;
        v351[0] = 0.0;
        v350 = 0;
        v349 = 0;
        v348 = "FFED0000";
        v5 = (char *)byte_659A8B98;
      }
      v347 = "FFED0000";
      goto LABEL_12;
    case 0x171u:
      LODWORD(v351[1]) = 5677;
      goto LABEL_64;
    case 0x172u:
      FriendList_AddEntry(dword_65ABF748, &v362.strA[126], 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
      goto LABEL_1213;
    case 0x173u:
      v341 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 64))(
               g_pILTClient,
               5683,
               *(unsigned int *)((char *)&v362.optA + 2));
      if ( v341 )
        v342 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v341);
      else
        v342 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v342, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v341 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v341);
      goto LABEL_1207;
    case 0x174u:
      LODWORD(v351[1]) = 5684;
      goto LABEL_230;
    case 0x175u:
      LODWORD(v351[1]) = 5685;
      goto LABEL_230;
    case 0x176u:
      LODWORD(v351[1]) = 5686;
      goto LABEL_230;
    case 0x177u:
      v343 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
      v344 = (int)v343;
      if ( v343 )
      {
        v361 = (double)(unsigned int)ItemStatModifier_CalcAggregateValue(v343) * 0.8999999761581421;
        v345 = Math_RoundFloat(v361);
        SkillList_ResetState(v344);
        *(_DWORD *)(v344 + 32) = v345;
      }
      goto LABEL_1213;
    default:
      goto LABEL_1213;
  }
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);
// 659A8288: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF86C: using guessed type int dword_65ABF86C;
// 65ABF870: using guessed type int dword_65ABF870;
// 65ABF874: using guessed type int dword_65ABF874;

//----- (658A9B10) --------------------------------------------------------
_BYTE *__thiscall PlayerStats_ResetAll(_BYTE *this)
{
  _DWORD var14[5]; // [esp+14h] [ebp-10h] BYREF

  SharedMem_Map_Init(this);
  var14[3] = 0;
  *(this + 1084) = 0;
  *this = 0;
  *(this + 20) = 0;
  *(this + 56) = 0;
  *((_DWORD *)this + 270) = 59851;
  SharedMem_WriteDword_this(this, 0x5Bu, 0);
  SharedMem_WriteDword_this(this, 0x1CEC2u, 0);
  SharedMem_WriteDword_std(0x1D6A7u, 0);
  var14[0] = 0;
  StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 2, var14);
  var14[0] = 0;
  StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 7, var14);
  SharedMem_WriteFloat(0x1D2ADu, 0.0);
  SharedMem_WriteU8_std(0x1D698u, 0);
  SharedMem_WriteU8_std(0x1D699u, 0);
  SharedMem_WriteU8_std(0x1D69Au, 0);
  SharedMem_WriteU8_std(0x1D69Bu, 0);
  SharedMem_WriteFloat(0x1D6A5u, 0.0);
  SharedMem_WriteFloat(0x1D6A6u, 250.0);
  SharedMem_WriteU8_std(0x1D69Du, 0);
  SharedMem_WriteU8_std(0x1D69Eu, 0);
  SharedMem_WriteU16_std(0x1D69Fu, 0);
  SharedMem_WriteDword_this(this, 0x1D6A4u, 0);
  SharedMem_WriteU8_std(0x1D6A8u, 1u);
  SharedMem_WriteU8_std(0x1D69Cu, 0);
  var14[0] = 1;
  StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 5, var14);
  var14[0] = 0;
  StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 6, var14);
  SharedMem_WriteDword_this(this, 0x1EA3Eu, 0);
  SharedMem_WriteU8_std(0x1D6A9u, 0);
  SharedMem_WriteU8_std(0x1EEBEu, 0);
  SharedMem_WriteDword_this(this, 0x1EEBFu, 0);
  SharedMem_WriteU8_std(0x1EEC4u, 0);
  SharedMem_WriteU8_std(0x1EEC3u, 0);
  return this;
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658A9D80) --------------------------------------------------------
void __thiscall PlayerStats_SetStatValue(void *this, unsigned __int8 a2, unsigned int a3)
{
  int v3; // esi
  unsigned int i; // eax
  _DWORD Src[107]; // [esp+4h] [ebp-1ACh] BYREF

  Src[106] = this;
  if ( a2 < 0x35u )
  {
    v3 = a3;
    if ( PlayerStats_GetStatValue(a2) != a3 )
    {
      if ( a3 > g_StatScaleTable[a2] )
        v3 = g_StatScaleTable[a2];
      for ( i = 0; i < 0x35; ++i )
      {
        Src[2 * i] = 0;
        Src[2 * i + 1] = 0;
      }
      StatGroup_Read((_DWORD *)g_pEncVarMgr, 1, Src);
      Src[2 * a2] = v3;
      Src[2 * a2 + 1] = v3 ^ *(_DWORD *)SharedMem_ReadDword_std(0x1D6A7u);
      StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 1, Src);
    }
  }
}
// 659E0CA8: using guessed type int g_StatScaleTable[];
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658A9E30) --------------------------------------------------------
int __thiscall PlayerStats_Init(void *this)
{
  int v1; // esi
  int i; // edi
  _DWORD *v3; // eax
  int j; // edi
  unsigned __int8 v5; // bl
  void *v7[100]; // [esp+Ch] [ebp-198h]
  void *v8; // [esp+19Ch] [ebp-8h]
  int v9; // [esp+1A0h] [ebp-4h]

  v8 = this;
  v1 = Rand_InRange(0, 100);
  for ( i = 0; i < v1; ++i )
    v7[i] = operator new(4u);
  v3 = operator new(4u);
  if ( v3 )
    *v3 = 57005 * v1;
  else
    v3 = 0;
  SharedMem_WriteDword_std(0x1D6A7u, (int)v3);
  for ( j = 0; j < v1; ++j )
    operator delete(v7[j]);
  v5 = 0;
  LOBYTE(v9) = 0;
  do
  {
    PlayerStats_SetStatValue(v8, v9, 0);
    LOBYTE(v9) = ++v5;
  }
  while ( v5 < 0x35u );
  return 1;
}

//----- (658ACBD0) --------------------------------------------------------
int __thiscall sub_658ACBD0(_DWORD *this, int a2)
{
  *(this + 4) = a2;
  *(this + 2) = this + 1;
  *(this + 1) = this + 1;
  *this = 0;
  *(this + 3) = 0;
  *(this + 5) = 0;
  return 1;
}

//----- (658ACC00) --------------------------------------------------------
_DWORD *__thiscall sub_658ACC00(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // edx
  int v4; // edx
  int v5; // ecx
  _DWORD *v6; // ecx

  result = 0;
  if ( !*this )
    return result;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      v4 = *(this + 5);
      if ( !v4 )
        goto LABEL_10;
      v3 = *(_DWORD *)(v4 + 4);
    }
    else
    {
      if ( a2 != 3 )
        goto LABEL_10;
      v3 = *(this + 1);
    }
  }
  else
  {
    v3 = *(this + 2);
  }
  *(this + 5) = v3;
LABEL_10:
  v5 = *(this + 5);
  if ( v5 )
  {
    v6 = (_DWORD *)(v5 + 8);
    if ( *v6 )
      return v6;
  }
  return result;
}

//----- (658ACFD0) --------------------------------------------------------
int __thiscall sub_658ACFD0(_DWORD *this, int a2)
{
  *(this + 4) = a2;
  *(this + 2) = this + 1;
  *(this + 1) = this + 1;
  *this = 0;
  *(this + 3) = 0;
  *(this + 5) = 0;
  return 1;
}

//----- (658ADBD0) --------------------------------------------------------
_DWORD *sub_658ADBD0()
{
  _DWORD *result; // eax

  result = operator new(0x10u);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  result[3] = 0;
  return result;
}

//----- (658AE1C0) --------------------------------------------------------
_DWORD *__thiscall sub_658AE1C0(_DWORD *this)
{
  _DWORD *v2; // esi

  v2 = this + 1;
  *(this + 2) = this + 1;
  *(this + 1) = this + 1;
  *this = 0;
  if ( !dword_65A5A704 && !dword_65A5A708 )
    dword_65A5A708 = sub_658ADBD0();
  ++dword_65A5A704;
  *(this + 4) = 0;
  *(this + 5) = 0;
  v2[1] = v2;
  *v2 = v2;
  *this = 0;
  *(this + 3) = 0;
  return this;
}
// 65A5A704: using guessed type int dword_65A5A704;

//----- (658AE300) --------------------------------------------------------
_DWORD *__thiscall sub_658AE300(_DWORD *this)
{
  _DWORD *v2; // esi

  v2 = this + 1;
  *(this + 2) = this + 1;
  *(this + 1) = this + 1;
  *this = 0;
  if ( !dword_65A5A704 && !dword_65A5A708 )
    dword_65A5A708 = sub_658ADBD0();
  ++dword_65A5A704;
  *(this + 4) = 0;
  *(this + 5) = 0;
  v2[1] = v2;
  *v2 = v2;
  *this = 0;
  *(this + 3) = 0;
  return this;
}
// 65A5A704: using guessed type int dword_65A5A704;

//----- (658AFF70) --------------------------------------------------------
_DWORD *__thiscall sub_658AFF70(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  _DWORD *v4; // ecx

  result = (_DWORD *)sub_658AFDB0(dword_65A5A708, 0, 1);
  if ( result )
  {
    *result = this + 1;
    result[2] = a2;
    v4 = (_DWORD *)*(this + 2);
    result[1] = v4;
    *v4 = result;
    *(_DWORD *)(*result + 4) = result;
    ++*this;
  }
  return result;
}
// 658AFDB0: using guessed type int __thiscall sub_658AFDB0(_DWORD, _DWORD, _DWORD);

//----- (658B03A0) --------------------------------------------------------
float *__thiscall sub_658B03A0(float *this)
{
  _DWORD *v2; // eax
  _DWORD *v3; // eax

  *(this + 12) = 0.001;
  *(this + 11) = 0.0;
  *(this + 2) = 0.0;
  *(this + 1) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *((_BYTE *)this + 52) = 0;
  *(_DWORD *)this = &off_659CEECC;
  *(this + 17) = 0.0;
  *(this + 18) = 0.0;
  *(this + 19) = 0.0;
  *(this + 20) = 1.0;
  *(this + 14) = 0.0;
  *(this + 15) = 0.0;
  *(this + 16) = 0.0;
  *(this + 17) = 0.0;
  *(this + 18) = 0.0;
  *(this + 19) = 0.0;
  *(this + 20) = 1.0;
  *(this + 21) = 0.0;
  *(this + 22) = 0.0;
  if ( !dword_65A5A7E8 )
  {
    v2 = operator new(0x18u);
    if ( v2 )
      v3 = sub_658AE300(v2);
    else
      v3 = 0;
    dword_65A5A7E8 = v3;
    sub_658ACFD0(v3, 0);
  }
  sub_658AFF70(dword_65A5A7E8, (int)this);
  return this;
}
// 659CEECC: using guessed type void *off_659CEECC;

//----- (658B0490) --------------------------------------------------------
void __cdecl sub_658B0490(void *a1)
{
  if ( a1 )
  {
    sub_658AFE30(a1);
    operator delete(a1);
  }
}
// 658AFE30: using guessed type int __thiscall sub_658AFE30(_DWORD);

//----- (658B0730) --------------------------------------------------------
void __thiscall sub_658B0730(_DWORD *this, int a2, char a3)
{
  int v4; // edi
  int v5; // eax
  _BYTE v6[8]; // [esp+8h] [ebp-8h] BYREF

  if ( a2 )
  {
    sub_658AD960(v6, a2);
    if ( sub_658ADA00(v6) )
    {
      if ( a3 )
        sub_658B0590(a2);
      v4 = sub_658ACCB0(v6);
      v5 = sub_658ACCC0(v6);
      sub_658ACD10(v4, v5);
      --*(this + 3);
      if ( sub_658ACCE0(v4) )
        sub_658AD9B0(this, v4);
    }
  }
}
// 658ACCB0: using guessed type int __thiscall sub_658ACCB0(_DWORD);
// 658ACCC0: using guessed type int __thiscall sub_658ACCC0(_DWORD);
// 658ACCE0: using guessed type int __thiscall sub_658ACCE0(_DWORD);
// 658ACD10: using guessed type int __thiscall sub_658ACD10(_DWORD, _DWORD);
// 658AD960: using guessed type int __stdcall sub_658AD960(_DWORD, _DWORD);
// 658AD9B0: using guessed type int __thiscall sub_658AD9B0(_DWORD, _DWORD);
// 658ADA00: using guessed type int __thiscall sub_658ADA00(_DWORD);
// 658B0590: using guessed type int __thiscall sub_658B0590(_DWORD);

//----- (658B0AD0) --------------------------------------------------------
_DWORD *__thiscall sub_658B0AD0(_DWORD *this)
{
  _DWORD *v2; // eax
  _DWORD *v3; // esi

  if ( *(this + 4) )
    sub_658B0840();
  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    do
    {
      if ( v2 == this + 1 )
        break;
      v3 = (_DWORD *)v2[1];
      *(_DWORD *)(*v2 + 4) = v3;
      *(_DWORD *)v2[1] = *v2;
      v2[1] = v2;
      *v2 = v2;
      --*this;
      sub_658AE420(dword_65A5A708, v2, 1);
      v2 = v3;
    }
    while ( v3 );
  }
  *(this + 2) = this + 1;
  *(this + 1) = this + 1;
  *this = 0;
  return this + 1;
}
// 658AE420: using guessed type int __thiscall sub_658AE420(_DWORD, _DWORD, _DWORD);
// 658B0840: using guessed type int sub_658B0840(void);

//----- (658B0C40) --------------------------------------------------------
void __thiscall sub_658B0C40(char *this)
{
  char *v1; // edi
  int *i; // esi

  v1 = this + 248;
  for ( i = sub_658ACC00((_DWORD *)this + 62, 0); i; i = sub_658ACC00(v1, 1) )
  {
    if ( *i )
    {
      sub_658B0730(dword_65ABF9B4, *i, 1);
      *i = 0;
    }
  }
  sub_658B0AD0(v1);
}
// 65ABF9B4: using guessed type _DWORD dword_65ABF9B4[5];

//----- (658B0C90) --------------------------------------------------------
void __thiscall sub_658B0C90(_DWORD *this)
{
  sub_658B0AD0(this);
  if ( !--dword_65A5A704 )
  {
    if ( dword_65A5A708 )
    {
      sub_658B0490(dword_65A5A708);
      dword_65A5A708 = 0;
    }
  }
}
// 65A5A704: using guessed type int dword_65A5A704;

//----- (658B0CC0) --------------------------------------------------------
float *__thiscall ServerMenuMgr_Ctor(float *this)
{
  sub_658B03A0(this);
  *(_DWORD *)this = &off_659CEF08;
  CameraTransform_Ctor((_DWORD *)this + 23);
  sub_658AE1C0((_DWORD *)this + 62);
  *(this + 68) = 0.0;
  sub_658ACBD0((_DWORD *)this + 62, 0);
  *(this + 69) = 0.0;
  return this;
}
// 659CEF08: using guessed type void *off_659CEF08;

//----- (658B0D60) --------------------------------------------------------
void __thiscall ServerMenuMgr_Dtor(char *this)
{
  *(_DWORD *)this = &off_659CEF08;
  sub_658B0C40(this);
  sub_658B0C90((_DWORD *)this + 62);
  *((_DWORD *)this + 23) = &off_659C0D14;
  JUMPOUT(0x658B0630);
}
// 658B0D83: control flows out of bounds to 658B0630
// 659C0D14: using guessed type void *off_659C0D14;
// 659CEF08: using guessed type void *off_659CEF08;

//----- (658B1C00) --------------------------------------------------------
_DWORD *RBTreeNode_Alloc48()
{
  _DWORD *result; // eax

  result = operator new(0x30u);
  if ( result )
    *result = 0;
  if ( result != (_DWORD *)-4 )
    result[1] = 0;
  if ( result != (_DWORD *)-8 )
    result[2] = 0;
  *((_BYTE *)result + 44) = 1;
  *((_BYTE *)result + 45) = 0;
  return result;
}

//----- (658B20B0) --------------------------------------------------------
_DWORD *__thiscall sub_658B20B0(_DWORD *this, _DWORD *a2, int a3)
{
  char *v3; // ebx
  char *v4; // edi
  _DWORD *v5; // eax
  _DWORD *v6; // edx
  char **v7; // esi
  _DWORD *v8; // ecx
  int v9; // eax
  int v10; // eax
  int v11; // ecx
  int v12; // ecx
  char **v13; // ecx
  char *v14; // ecx
  char *v15; // eax
  char v16; // dl
  _DWORD *i; // ecx
  char *v18; // eax
  int v19; // eax
  _DWORD pExceptionObject[10]; // [esp+10h] [ebp-5Ch] BYREF
  _BYTE v22[28]; // [esp+38h] [ebp-34h] BYREF
  int v23; // [esp+54h] [ebp-18h]
  void *v24; // [esp+58h] [ebp-14h]
  _DWORD *v25; // [esp+5Ch] [ebp-10h]
  int v26; // [esp+68h] [ebp-4h]

  v25 = this;
  v3 = (char *)a3;
  if ( *(_BYTE *)(a3 + 45) )
  {
    std::string::string(v22, "invalid map/set<T> iterator");
    v26 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v22);
    pExceptionObject[0] = &off_659BFD34;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVout_of_range_std__);
  }
  v24 = (void *)a3;
  sub_658B18A0(&a3);
  if ( *(_BYTE *)(*(_DWORD *)v3 + 45) )
  {
    v4 = (_DWORD *)*((_DWORD *)v3 + 2);
LABEL_8:
    v7 = (char **)*((_DWORD *)v3 + 1);
    if ( !*((_BYTE *)v4 + 45) )
      v4[1] = v7;
    v8 = v25;
    v9 = v25[1];
    if ( *(char **)(v9 + 4) == v3 )
    {
      *(_DWORD *)(v9 + 4) = v4;
    }
    else if ( *v7 == v3 )
    {
      *v7 = (char *)v4;
    }
    else
    {
      v7[2] = (char *)v4;
    }
    if ( *(char **)v8[1] == v3 )
    {
      if ( *((_BYTE *)v4 + 45) )
      {
        v10 = (int)v7;
      }
      else
      {
        v10 = sub_658B1610((char *)v4);
        v8 = v25;
      }
      *(_DWORD *)v8[1] = v10;
    }
    v11 = v8[1];
    v23 = v11;
    if ( *(char **)(v11 + 8) == v3 )
    {
      if ( *((_BYTE *)v4 + 45) )
        *(_DWORD *)(v11 + 8) = v7;
      else
        *(_DWORD *)(v23 + 8) = sub_658B1730((char *)v4);
    }
    goto LABEL_36;
  }
  if ( *(_BYTE *)(*((_DWORD *)v3 + 2) + 45) )
  {
    v4 = *(_DWORD **)v3;
    goto LABEL_8;
  }
  v5 = (_DWORD *)a3;
  v4 = *(_DWORD **)(a3 + 8);
  v6 = (_DWORD *)(a3 + 8);
  if ( (char *)a3 == v3 )
    goto LABEL_8;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = a3;
  *v5 = *(_DWORD *)v3;
  if ( v5 == *((_DWORD **)v3 + 2) )
  {
    v7 = (char **)v5;
  }
  else
  {
    v7 = (char **)v5[1];
    if ( !*((_BYTE *)v4 + 45) )
      v4[1] = v7;
    *v7 = (char *)v4;
    *v6 = *((_DWORD *)v3 + 2);
    *(_DWORD *)(*((_DWORD *)v3 + 2) + 4) = v5;
  }
  v12 = v25[1];
  if ( *(char **)(v12 + 4) == v3 )
  {
    *(_DWORD *)(v12 + 4) = v5;
  }
  else
  {
    v13 = (char **)*((_DWORD *)v3 + 1);
    if ( *v13 == v3 )
      *v13 = (char *)v5;
    else
      v13[2] = (char *)v5;
  }
  v5[1] = *((_DWORD *)v3 + 1);
  v14 = v3 + 44;
  v15 = (char *)(v5 + 11);
  if ( v15 != v3 + 44 )
  {
    v16 = *v15;
    *v15 = *v14;
    *v14 = v16;
  }
LABEL_36:
  if ( *((_BYTE *)v24 + 44) == 1 )
  {
    for ( i = v25; v4 != *(_DWORD **)(i[1] + 4); v7 = (char **)v7[1] )
    {
      if ( *((_BYTE *)v4 + 44) != 1 )
        break;
      v18 = *v7;
      if ( v4 == (_DWORD *)*v7 )
      {
        v18 = v7[2];
        if ( !v18[44] )
        {
          v18[44] = 1;
          *((_BYTE *)v7 + 44) = 0;
          sub_658B1990(v7);
          v18 = v7[2];
          i = v25;
        }
        if ( v18[45] )
          goto LABEL_54;
        if ( *(_BYTE *)(*(_DWORD *)v18 + 44) != 1 || *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) != 1 )
        {
          if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) == 1 )
          {
            *(_BYTE *)(*(_DWORD *)v18 + 44) = 1;
            v18[44] = 0;
            sub_658B16B0(v18);
            v18 = v7[2];
          }
          v18[44] = *((_BYTE *)v7 + 44);
          *((_BYTE *)v7 + 44) = 1;
          *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) = 1;
          sub_658B1990(v7);
          break;
        }
      }
      else
      {
        if ( !v18[44] )
        {
          v18[44] = 1;
          *((_BYTE *)v7 + 44) = 0;
          sub_658B16B0(v7);
          v18 = *v7;
          i = v25;
        }
        if ( v18[45] )
          goto LABEL_54;
        if ( *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) != 1 || *(_BYTE *)(*(_DWORD *)v18 + 44) != 1 )
        {
          if ( *(_BYTE *)(*(_DWORD *)v18 + 44) == 1 )
          {
            *(_BYTE *)(*((_DWORD *)v18 + 2) + 44) = 1;
            v18[44] = 0;
            sub_658B1990(v18);
            v18 = *v7;
          }
          v18[44] = *((_BYTE *)v7 + 44);
          *((_BYTE *)v7 + 44) = 1;
          *(_BYTE *)(*(_DWORD *)v18 + 44) = 1;
          sub_658B16B0(v7);
          break;
        }
      }
      v18[44] = 0;
LABEL_54:
      v4 = v7;
    }
    *((_BYTE *)v4 + 44) = 1;
  }
  std::string::~string((char *)v24 + 12);
  operator delete(v24);
  v19 = v25[2];
  if ( v19 )
    v25[2] = v19 - 1;
  *a2 = a3;
  return a2;
}
// 658B20B0: too many cbuild loops
// 658B1610: using guessed type int __cdecl sub_658B1610(_DWORD);
// 658B16B0: using guessed type int __stdcall sub_658B16B0(_DWORD);
// 658B1730: using guessed type int __cdecl sub_658B1730(_DWORD);
// 658B18A0: using guessed type int __thiscall sub_658B18A0(_DWORD);
// 658B1990: using guessed type int __stdcall sub_658B1990(_DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD34: using guessed type void *off_659BFD34;

//----- (658B2370) --------------------------------------------------------
void __stdcall sub_658B2370(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; !*((_BYTE *)i + 45); v1 = i )
  {
    sub_658B2370(i[2]);
    i = (void **)*i;
    std::string::~string(v1 + 3);
    operator delete(v1);
  }
}

//----- (658B2670) --------------------------------------------------------
int **__thiscall sub_658B2670(int ***this, int **a2, int *a3, int *a4)
{
  int v5; // eax
  int *v6; // ecx
  _DWORD *v7; // eax
  int v9; // edx
  int v10; // eax
  int *v11; // ecx
  int j; // eax
  int i; // eax
  int v14; // [esp+4h] [ebp-4h] BYREF

  v5 = (int)*(this + 1);
  v6 = a3;
  if ( a3 == *(int **)v5 && a4 == (int *)v5 )
  {
    sub_658B2370(*(void ***)(v5 + 4));
    (*(this + 1))[1] = (int *)*(this + 1);
    v7 = *(this + 1);
    *(this + 2) = 0;
    *v7 = v7;
    (*(this + 1))[2] = (int *)*(this + 1);
    *a2 = **(this + 1);
    return a2;
  }
  else
  {
    for ( ; a3 != a4; v6 = a3 )
    {
      v9 = (int)v6;
      if ( !*((_BYTE *)v6 + 45) )
      {
        v10 = v6[2];
        if ( *(_BYTE *)(v10 + 45) )
        {
          for ( i = v6[1]; !*(_BYTE *)(i + 45); i = *(_DWORD *)(i + 4) )
          {
            if ( v6 != *(int **)(i + 8) )
              break;
            v6 = (int *)i;
          }
          a3 = (int *)i;
        }
        else
        {
          v11 = (int *)v6[2];
          for ( j = *(_DWORD *)v10; !*(_BYTE *)(j + 45); j = *(_DWORD *)j )
            v11 = (int *)j;
          a3 = v11;
        }
      }
      sub_658B20B0(this, &v14, v9);
    }
    *a2 = v6;
    return a2;
  }
}

//----- (658B2AA0) --------------------------------------------------------
int __thiscall AESContext_ClearTree(int this)
{
  int *v3; // [esp+4h] [ebp-4h] BYREF

  sub_658B2670((int ***)this, &v3, **(int ***)(this + 4), *(int **)(this + 4));
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  return 0;
}

//----- (658B2BA0) --------------------------------------------------------
_DWORD *__thiscall AESContext_Ctor(_DWORD *this)
{
  void **v2; // ebx
  _DWORD *v3; // eax

  v2 = (void **)(this + 44);
  unknown_libname_648(this + 44);
  v3 = RBTreeNode_Alloc48();
  *(this + 46) = v3;
  *((_BYTE *)v3 + 45) = 1;
  *(_DWORD *)(*(this + 46) + 4) = *(this + 46);
  *(_DWORD *)*(this + 46) = *(this + 46);
  *(_DWORD *)(*(this + 46) + 8) = *(this + 46);
  *(this + 47) = 0;
  *(_BYTE *)this = -73;
  *((_BYTE *)this + 1) = 104;
  *((_BYTE *)this + 2) = 24;
  *((_BYTE *)this + 3) = -38;
  *((_BYTE *)this + 4) = 30;
  *((_BYTE *)this + 5) = -109;
  *((_BYTE *)this + 6) = 0;
  *((_BYTE *)this + 7) = -91;
  *((_BYTE *)this + 8) = 71;
  *((_BYTE *)this + 9) = 56;
  *((_BYTE *)this + 10) = 20;
  *((_BYTE *)this + 11) = 103;
  *((_BYTE *)this + 12) = 14;
  *((_BYTE *)this + 13) = -110;
  *((_BYTE *)this + 14) = 98;
  *((_BYTE *)this + 15) = -40;
  *((_BYTE *)this + 16) = -98;
  *((_BYTE *)this + 17) = 74;
  *((_BYTE *)this + 18) = 117;
  *((_BYTE *)this + 19) = -35;
  *((_BYTE *)this + 20) = 74;
  *((_BYTE *)this + 21) = -87;
  *((_BYTE *)this + 22) = 98;
  *((_BYTE *)this + 23) = 106;
  *((_BYTE *)this + 24) = -105;
  *((_BYTE *)this + 25) = 40;
  *((_BYTE *)this + 26) = 20;
  *((_BYTE *)this + 27) = 120;
  *((_BYTE *)this + 28) = 78;
  *((_BYTE *)this + 29) = -100;
  *((_BYTE *)this + 30) = -77;
  *((_BYTE *)this + 31) = 35;
  *((_BYTE *)this + 32) = -81;
  *((_BYTE *)this + 33) = -28;
  *((_BYTE *)this + 34) = 20;
  *((_BYTE *)this + 35) = -122;
  *((_BYTE *)this + 36) = 74;
  *((_BYTE *)this + 37) = 106;
  *((_BYTE *)this + 38) = -94;
  *((_BYTE *)this + 39) = -100;
  *((_BYTE *)this + 40) = -50;
  *((_BYTE *)this + 41) = 94;
  *((_BYTE *)this + 42) = 85;
  *((_BYTE *)this + 43) = -3;
  *((_BYTE *)this + 44) = 74;
  *((_BYTE *)this + 45) = -88;
  *((_BYTE *)this + 46) = -11;
  *((_BYTE *)this + 47) = -41;
  *((_BYTE *)this + 48) = -18;
  *((_BYTE *)this + 49) = 78;
  *((_BYTE *)this + 50) = -53;
  *((_BYTE *)this + 51) = -3;
  *((_BYTE *)this + 52) = 74;
  *((_BYTE *)this + 53) = -83;
  *((_BYTE *)this + 54) = 19;
  *((_BYTE *)this + 55) = -100;
  *((_BYTE *)this + 56) = 39;
  *((_BYTE *)this + 57) = 54;
  *((_BYTE *)this + 58) = 45;
  *((_BYTE *)this + 59) = 120;
  *((_BYTE *)this + 60) = 126;
  *((_BYTE *)this + 61) = -100;
  *((_BYTE *)this + 62) = 71;
  *((_BYTE *)this + 63) = 95;
  *((_BYTE *)this + 64) = 39;
  *((_BYTE *)this + 65) = 94;
  *((_BYTE *)this + 66) = 20;
  *((_BYTE *)this + 67) = -14;
  *((_BYTE *)this + 68) = 90;
  *((_BYTE *)this + 69) = -107;
  *((_BYTE *)this + 70) = -94;
  *((_BYTE *)this + 71) = 24;
  *((_BYTE *)this + 72) = 103;
  *((_BYTE *)this + 73) = 100;
  *((_BYTE *)this + 74) = 45;
  *((_BYTE *)this + 75) = 120;
  *((_BYTE *)this + 76) = 126;
  *((_BYTE *)this + 77) = -100;
  *((_BYTE *)this + 78) = 71;
  *((_BYTE *)this + 79) = 37;
  *((_BYTE *)this + 80) = 64;
  *((_BYTE *)this + 81) = -114;
  *((_BYTE *)this + 82) = -39;
  *((_BYTE *)this + 83) = -35;
  *((_BYTE *)this + 84) = -55;
  *((_BYTE *)this + 85) = -119;
  *((_BYTE *)this + 86) = 96;
  *((_BYTE *)this + 87) = 106;
  *((_BYTE *)this + 88) = -121;
  *((_BYTE *)this + 89) = 78;
  *((_BYTE *)this + 90) = 21;
  *((_BYTE *)this + 91) = -2;
  *((_BYTE *)this + 92) = 90;
  *((_BYTE *)this + 93) = -94;
  *((_BYTE *)this + 94) = 66;
  *((_BYTE *)this + 95) = -91;
  *((_BYTE *)this + 96) = 71;
  *((_BYTE *)this + 97) = 56;
  *((_BYTE *)this + 98) = 20;
  *((_BYTE *)this + 99) = 103;
  *((_BYTE *)this + 100) = 89;
  *((_BYTE *)this + 101) = -87;
  *((_BYTE *)this + 102) = -63;
  *((_BYTE *)this + 103) = 29;
  *((_BYTE *)this + 104) = 71;
  *((_BYTE *)this + 105) = 78;
  *((_BYTE *)this + 106) = -13;
  *((_BYTE *)this + 107) = -14;
  *((_BYTE *)this + 108) = -106;
  *((_BYTE *)this + 109) = -106;
  *((_BYTE *)this + 110) = -11;
  *((_BYTE *)this + 111) = -41;
  *((_BYTE *)this + 112) = -18;
  *((_BYTE *)this + 113) = 78;
  *((_BYTE *)this + 114) = -53;
  *((_BYTE *)this + 115) = 107;
  *((_BYTE *)this + 116) = 62;
  *((_BYTE *)this + 117) = -100;
  *((_BYTE *)this + 118) = -94;
  *((_BYTE *)this + 119) = 28;
  *((_BYTE *)this + 120) = 45;
  *((_BYTE *)this + 121) = -114;
  *((_BYTE *)this + 122) = 53;
  *((_BYTE *)this + 123) = 121;
  *((_BYTE *)this + 124) = 58;
  *((_BYTE *)this + 125) = -105;
  *((_BYTE *)this + 126) = 98;
  *((_BYTE *)this + 127) = -91;
  *((_BYTE *)this + 128) = 71;
  *((_BYTE *)this + 129) = 56;
  *((_BYTE *)this + 130) = 20;
  *((_BYTE *)this + 131) = 103;
  *((_BYTE *)this + 132) = -51;
  *((_BYTE *)this + 133) = -126;
  *((_BYTE *)this + 134) = 32;
  *((_BYTE *)this + 135) = -107;
  *((_BYTE *)this + 136) = 95;
  *((_BYTE *)this + 137) = 78;
  *((_BYTE *)this + 138) = -44;
  *((_BYTE *)this + 139) = 0x80;
  *((_BYTE *)this + 140) = 34;
  *((_BYTE *)this + 141) = -77;
  *((_BYTE *)this + 142) = -11;
  *((_BYTE *)this + 143) = -41;
  *((_BYTE *)this + 144) = -18;
  *((_BYTE *)this + 145) = 78;
  *((_BYTE *)this + 146) = -53;
  *((_BYTE *)this + 147) = 106;
  *((_BYTE *)this + 148) = -39;
  *((_BYTE *)this + 149) = -126;
  *((_BYTE *)this + 150) = -47;
  *((_BYTE *)this + 151) = -42;
  *((_BYTE *)this + 152) = 71;
  *((_BYTE *)this + 153) = 100;
  *((_BYTE *)this + 154) = -15;
  *((_BYTE *)this + 155) = -35;
  *((_BYTE *)this + 156) = 74;
  *((_BYTE *)this + 157) = -87;
  *((_BYTE *)this + 158) = 98;
  *((_BYTE *)this + 159) = 49;
  *((_BYTE *)this + 160) = 56;
  *((_BYTE *)this + 161) = 70;
  *((_BYTE *)this + 162) = -44;
  *((_BYTE *)this + 163) = 120;
  *((_BYTE *)this + 164) = 93;
  *((_BYTE *)this + 165) = -106;
  *((_BYTE *)this + 166) = 114;
  *((_BYTE *)this + 167) = 41;
  *((_BYTE *)this + 168) = 0x80;
  *((_BYTE *)this + 169) = 70;
  *((_BYTE *)this + 170) = 53;
  *((_BYTE *)this + 171) = 127;
  *((_BYTE *)this + 172) = 58;
  *((_BYTE *)this + 173) = -105;
  *((_BYTE *)this + 174) = 82;
  *((_BYTE *)this + 175) = 49;
  sub_6593A400(v2);
  return this;
}
// 6593A110: using guessed type int __thiscall unknown_libname_648(_DWORD);

//----- (658B3000) --------------------------------------------------------
void __userpurge MsgId_6C_ResourceHandler(_BYTE *a1@<ecx>, int a2@<edi>, int a3)
{
  unsigned int v3; // ebx
  va_list v4; // edi
  int (__thiscall *v5)(int, int); // edx
  _BYTE *v6; // edi
  int v7; // eax
  int v8; // ebx
  char *v9; // eax
  _BYTE *v10; // edx
  char v11; // cl
  unsigned int v12; // edx
  int v13; // esi
  int v14; // eax
  const char *v15; // eax
  _DWORD v17[10]; // [esp+Ch] [ebp-1044h] BYREF
  _BYTE *v18; // [esp+34h] [ebp-101Ch]
  unsigned int v19; // [esp+38h] [ebp-1018h]
  int v20; // [esp+3Ch] [ebp-1014h]
  HINSTANCE hInstance; // [esp+40h] [ebp-1010h] BYREF
  _DWORD *Arguments; // [esp+44h] [ebp-100Ch] BYREF
  unsigned int v23; // [esp+48h] [ebp-1008h]
  _WORD Buffer[1024]; // [esp+4Ch] [ebp-1004h] BYREF
  _WORD Source[1024]; // [esp+84Ch] [ebp-804h] BYREF

  v3 = 0;
  v18 = a1;
  if ( a3 )
  {
    v20 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a3 + 60))(a3, 32);
    v4 = (va_list)(*(int (__thiscall **)(int, int))(*(_DWORD *)a3 + 60))(a3, 32);
    v5 = *(int (__thiscall **)(int, int))(*(_DWORD *)a3 + 60);
    Arguments = v4;
    v19 = v5(a3, 32);
    memset(v17, 0, sizeof(v17));
    v23 = 0;
    if ( v19 )
    {
      v6 = v18;
      while ( 2 )
      {
        switch ( (*(int (__thiscall **)(int, int))(*(_DWORD *)a3 + 60))(a3, 32) )
        {
          case 0:
            (*(void (__thiscall **)(int, _BYTE *, int))(*(_DWORD *)a3 + 76))(a3, v6, 1024);
            v17[v3] = v6;
            goto LABEL_13;
          case 1:
          case 2:
            v17[v3] = (*(int (__thiscall **)(int, int))(*(_DWORD *)a3 + 60))(a3, 32);
            goto LABEL_13;
          case 3:
            v7 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a3 + 60))(a3, 32);
            v8 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v7);
            if ( v8 )
            {
              v9 = (char *)(*(int (__thiscall **)(int, int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8, a2);
              v10 = v6;
              do
              {
                v11 = *v9;
                *v10++ = *v9++;
              }
              while ( v11 );
              a2 = v8;
              (*(void (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient);
              v17[v23] = v6;
            }
            else
            {
              v12 = v23;
              *v6 = 0;
              v17[v12] = v6;
            }
            v3 = v23;
LABEL_13:
            ++v3;
            v6 += 1024;
            v23 = v3;
            if ( v3 < v19 )
              continue;
            v4 = (va_list)Arguments;
            break;
          default:
            (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
              g_pILTClient,
              "Invalid resource parameter specified");
            return;
        }
        break;
      }
    }
    memset(Source, 0, sizeof(Source));
    (*(void (__cdecl **)(const char *, HINSTANCE *))(g_pILTClient + 784))("cres_hinstance", &hInstance);
    if ( hInstance )
    {
      Arguments = v17;
      memset(Buffer, 0, sizeof(Buffer));
      if ( LoadStringA(hInstance, (UINT)v4, (LPSTR)Buffer, 2048) )
        FormatMessageA(0x400u, Buffer, (DWORD)v4, 0, (LPSTR)Source, 0x800u, (va_list *)&Arguments);
    }
    if ( strlen((const char *)Source) )
    {
      switch ( v20 )
      {
        case 0:
          (*(void (__cdecl **)(int, _WORD *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, Source);
          break;
        case 1:
          SharedMem_WriteDword_this(dword_65ABF73C, 0x7Bu, (int)v4);
          SharedMem_WriteString_std(124, (char *)byte_659A8B98);
          break;
        case 2:
          SharedMem_WriteDword_this(dword_65ABF73C, 0x5Du, (int)v4);
          SharedMem_WriteString_std(94, (char *)byte_659A8B98);
          break;
        case 3:
        case 4:
        case 12:
        case 13:
          return;
        case 5:
          if ( (*(int (__cdecl **)(int, va_list))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v4) )
          {
            v13 = *(_DWORD *)g_pILTClient;
            v14 = (*(int (__cdecl **)(int, va_list))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v4);
            v15 = (const char *)(*(int (__thiscall **)(int, int))(v13 + 88))(g_pILTClient, v14);
          }
          else
          {
            v15 = byte_659A8B98;
          }
          (*(void (__cdecl **)(const char *))(g_pILTClient + 148))(v15);
          break;
        case 6:
        case 9:
          FriendList_AddEntry(dword_65ABF748, (char *)Source, 10, 0, 1, "FFED0000", "FFED0000", 0, 0, 0, 0);
          break;
        case 7:
          FriendList_AddEntry(dword_65ABF748, (char *)Source, 10, 0, 1, "00FF0000", "FFED0000", 0, 0, 0, 0);
          break;
        case 8:
          FriendList_AddEntry(dword_65ABF748, (char *)Source, 10, 0, 1, "00B2FF00", "FFED0000", 0, 0, 0, 0);
          break;
        case 10:
          FriendList_AddEntry(dword_65ABF748, (char *)Source, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
          break;
        default:
          (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
            g_pILTClient,
            "Resource message with invalid destination encountered");
          break;
      }
    }
    else
    {
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "Invalid resource IDS specified");
    }
  }
}
// 658B3000: could not find valid save-restore pair for edi
// 65ABF748: using guessed type int dword_65ABF748;

//----- (658B47F0) --------------------------------------------------------
_DWORD *RBTreeNode_Alloc12()
{
  _DWORD *result; // eax

  result = operator new(0xCu);
  if ( result )
    *result = result;
  if ( result != (_DWORD *)-4 )
    result[1] = result;
  return result;
}

//----- (658B5910) --------------------------------------------------------
float *__thiscall sub_658B5910(float *this)
{
  char *v2; // edi
  int v3; // eax

  *(this + 12) = 0.001;
  *(this + 11) = 0.0;
  *(this + 2) = 0.0;
  *(this + 1) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *((_BYTE *)this + 52) = 0;
  v2 = (char *)(this + 42);
  *(_DWORD *)this = &off_659CF1F0;
  v3 = sub_658B4CA0(this + 42);
  *((_DWORD *)v2 + 1) = v3;
  *(_BYTE *)(v3 + 17) = 1;
  *(_DWORD *)(*((_DWORD *)v2 + 1) + 4) = *((_DWORD *)v2 + 1);
  **((_DWORD **)v2 + 1) = *((_DWORD *)v2 + 1);
  *(_DWORD *)(*((_DWORD *)v2 + 1) + 8) = *((_DWORD *)v2 + 1);
  *((_DWORD *)v2 + 2) = 0;
  *(this + 16) = 0.0;
  *(this + 15) = 0.0;
  *(this + 17) = NAN;
  *(this + 14) = 0.0;
  *(this + 27) = 0.0;
  *((_BYTE *)this + 112) = 1;
  *(this + 18) = 64.0;
  *(this + 36) = 0.0;
  *(this + 19) = 64.0;
  *(this + 40) = 0.0;
  *(this + 41) = 0.0;
  *(this + 20) = 1.0;
  *((_BYTE *)this + 140) = 1;
  *(this + 21) = 30.0;
  *(this + 22) = 90.0;
  *(this + 23) = 10.0;
  *(this + 24) = 0.5;
  *(this + 25) = 1024.0;
  *(this + 26) = 1048576.0;
  *(this + 39) = 0.0;
  *(this + 38) = 0.0;
  *(this + 37) = 0.0;
  return this;
}
// 658B4CA0: using guessed type int __thiscall sub_658B4CA0(_DWORD);
// 659CF1F0: using guessed type void *off_659CF1F0;

//----- (658B5F60) --------------------------------------------------------
float *__thiscall WeaponSlotBase_Ctor(float *this)
{
  CharacterInfo_Ctor(this, 2);
  *(_DWORD *)this = &off_659CF228;
  *((_WORD *)this + 44) = 0;
  *((_BYTE *)this + 90) = 3;
  *((_BYTE *)this + 52) = 0;
  *((_WORD *)this + 56) = 0;
  return this;
}
// 659CF228: using guessed type void *off_659CF228;

//----- (658B5FD0) --------------------------------------------------------
int __stdcall sub_658B5FD0(unsigned __int8 a1)
{
  if ( a1 >= 0xCu )
    return 0;
  else
    return a1;
}

//----- (658B5FF0) --------------------------------------------------------
int __stdcall sub_658B5FF0(unsigned __int8 a1)
{
  if ( a1 >= 0xCu )
    return 0;
  else
    return dword_65A55AA8[a1];
}
// 65A55AA8: using guessed type int dword_65A55AA8[12];

//----- (658B6320) --------------------------------------------------------
int __cdecl sub_658B6320(int (__thiscall ***a1)(_DWORD, int))
{
  int result; // eax

  if ( a1 )
    return (**a1)(a1, 1);
  return result;
}

//----- (658B6340) --------------------------------------------------------
int __cdecl sub_658B6340(int (__thiscall ***a1)(_DWORD, int))
{
  int result; // eax

  if ( a1 )
    return (**a1)(a1, 1);
  return result;
}

//----- (658B6360) --------------------------------------------------------
int __thiscall sub_658B6360(void *this)
{
  return *(_DWORD *)this;
}

//----- (658B6370) --------------------------------------------------------
int __thiscall sub_658B6370(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6380) --------------------------------------------------------
BOOL __thiscall sub_658B6380(_DWORD *this)
{
  return *this == -1;
}

//----- (658B6390) --------------------------------------------------------
BOOL __thiscall sub_658B6390(_DWORD *this)
{
  return *this == 0;
}

//----- (658B63A0) --------------------------------------------------------
BOOL __thiscall sub_658B63A0(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (658B63C0) --------------------------------------------------------
_DWORD *__thiscall sub_658B63C0(_DWORD *this, char a2)
{
  *this &= ~(1 << a2);
  return this;
}

//----- (658B63E0) --------------------------------------------------------
int __thiscall sub_658B63E0(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6400) --------------------------------------------------------
int __thiscall sub_658B6400(void *this)
{
  return *(_DWORD *)this;
}

//----- (658B6410) --------------------------------------------------------
int __thiscall sub_658B6410(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6420) --------------------------------------------------------
BOOL __thiscall sub_658B6420(_DWORD *this)
{
  return *this == -1;
}

//----- (658B6430) --------------------------------------------------------
BOOL __thiscall sub_658B6430(_DWORD *this)
{
  return *this == 0;
}

//----- (658B6440) --------------------------------------------------------
BOOL __thiscall sub_658B6440(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (658B6460) --------------------------------------------------------
_DWORD *__thiscall sub_658B6460(_DWORD *this, char a2)
{
  *this &= ~(1 << a2);
  return this;
}

//----- (658B6480) --------------------------------------------------------
int __thiscall sub_658B6480(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B64A0) --------------------------------------------------------
int __thiscall sub_658B64A0(void *this)
{
  return *(_DWORD *)this;
}

//----- (658B64B0) --------------------------------------------------------
int __thiscall sub_658B64B0(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B64C0) --------------------------------------------------------
BOOL __thiscall sub_658B64C0(_DWORD *this)
{
  return *this == -1;
}

//----- (658B64D0) --------------------------------------------------------
BOOL __thiscall sub_658B64D0(_DWORD *this)
{
  return *this == 0;
}

//----- (658B64E0) --------------------------------------------------------
BOOL __thiscall sub_658B64E0(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (658B6500) --------------------------------------------------------
_DWORD *__thiscall sub_658B6500(_DWORD *this, char a2)
{
  *this &= ~(1 << a2);
  return this;
}

//----- (658B6520) --------------------------------------------------------
int __thiscall sub_658B6520(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6540) --------------------------------------------------------
int __thiscall sub_658B6540(void *this)
{
  return *(_DWORD *)this;
}

//----- (658B6550) --------------------------------------------------------
int __thiscall sub_658B6550(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6560) --------------------------------------------------------
BOOL __thiscall sub_658B6560(_DWORD *this)
{
  return *this == -1;
}

//----- (658B6570) --------------------------------------------------------
BOOL __thiscall sub_658B6570(_DWORD *this)
{
  return *this == 0;
}

//----- (658B6580) --------------------------------------------------------
BOOL __thiscall sub_658B6580(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (658B65A0) --------------------------------------------------------
_DWORD *__thiscall sub_658B65A0(_DWORD *this, char a2)
{
  *this &= ~(1 << a2);
  return this;
}

//----- (658B65C0) --------------------------------------------------------
int __thiscall sub_658B65C0(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B65E0) --------------------------------------------------------
int __thiscall sub_658B65E0(void *this)
{
  return *(_DWORD *)this;
}

//----- (658B65F0) --------------------------------------------------------
int __thiscall sub_658B65F0(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6600) --------------------------------------------------------
BOOL __thiscall sub_658B6600(_DWORD *this)
{
  return *this == -1;
}

//----- (658B6610) --------------------------------------------------------
BOOL __thiscall sub_658B6610(_DWORD *this)
{
  return *this == 0;
}

//----- (658B6620) --------------------------------------------------------
BOOL __thiscall sub_658B6620(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (658B6640) --------------------------------------------------------
_DWORD *__thiscall sub_658B6640(_DWORD *this, char a2)
{
  *this &= ~(1 << a2);
  return this;
}

//----- (658B6660) --------------------------------------------------------
int __thiscall sub_658B6660(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6680) --------------------------------------------------------
int __thiscall sub_658B6680(void *this)
{
  return *(_DWORD *)this;
}

//----- (658B6690) --------------------------------------------------------
int __thiscall sub_658B6690(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B66A0) --------------------------------------------------------
BOOL __thiscall sub_658B66A0(_DWORD *this)
{
  return *this == -1;
}

//----- (658B66B0) --------------------------------------------------------
BOOL __thiscall sub_658B66B0(_DWORD *this)
{
  return *this == 0;
}

//----- (658B66C0) --------------------------------------------------------
BOOL __thiscall SoundPool1_HasBit(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (658B66E0) --------------------------------------------------------
_DWORD *__thiscall sub_658B66E0(_DWORD *this, char a2)
{
  *this &= ~(1 << a2);
  return this;
}

//----- (658B6700) --------------------------------------------------------
int __thiscall SoundPool1_GetNext(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6720) --------------------------------------------------------
int __thiscall sub_658B6720(void *this)
{
  return *(_DWORD *)this;
}

//----- (658B6730) --------------------------------------------------------
int __thiscall sub_658B6730(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6740) --------------------------------------------------------
BOOL __thiscall SoundPool1_IsEmpty(_DWORD *this)
{
  return *this == -1;
}

//----- (658B6750) --------------------------------------------------------
BOOL __thiscall sub_658B6750(_DWORD *this)
{
  return *this == 0;
}

//----- (658B6760) --------------------------------------------------------
BOOL __thiscall SoundPool2_HasBit(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (658B6780) --------------------------------------------------------
_DWORD *__thiscall sub_658B6780(_DWORD *this, char a2)
{
  *this &= ~(1 << a2);
  return this;
}

//----- (658B67A0) --------------------------------------------------------
int __thiscall SoundPool2_GetNext(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B67C0) --------------------------------------------------------
int __thiscall sub_658B67C0(void *this)
{
  return *(_DWORD *)this;
}

//----- (658B67D0) --------------------------------------------------------
int __thiscall sub_658B67D0(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B67E0) --------------------------------------------------------
BOOL __thiscall SoundPool2_IsEmpty(_DWORD *this)
{
  return *this == -1;
}

//----- (658B67F0) --------------------------------------------------------
BOOL __thiscall sub_658B67F0(_DWORD *this)
{
  return *this == 0;
}

//----- (658B6800) --------------------------------------------------------
BOOL __thiscall SoundPool3_HasBit(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (658B6820) --------------------------------------------------------
_DWORD *__thiscall sub_658B6820(_DWORD *this, char a2)
{
  *this &= ~(1 << a2);
  return this;
}

//----- (658B6840) --------------------------------------------------------
int __thiscall SoundPool3_GetNext(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6860) --------------------------------------------------------
int __thiscall sub_658B6860(void *this)
{
  return *(_DWORD *)this;
}

//----- (658B6870) --------------------------------------------------------
int __thiscall sub_658B6870(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6880) --------------------------------------------------------
BOOL __thiscall SoundPool3_IsEmpty(_DWORD *this)
{
  return *this == -1;
}

//----- (658B6890) --------------------------------------------------------
BOOL __thiscall sub_658B6890(_DWORD *this)
{
  return *this == 0;
}

//----- (658B68A0) --------------------------------------------------------
BOOL __thiscall SoundPool4_HasBit(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (658B68C0) --------------------------------------------------------
_DWORD *__thiscall sub_658B68C0(_DWORD *this, char a2)
{
  *this &= ~(1 << a2);
  return this;
}

//----- (658B68E0) --------------------------------------------------------
int __thiscall SoundPool4_GetNext(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6900) --------------------------------------------------------
int __thiscall sub_658B6900(void *this)
{
  return *(_DWORD *)this;
}

//----- (658B6910) --------------------------------------------------------
int __thiscall sub_658B6910(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B6920) --------------------------------------------------------
BOOL __thiscall SoundPool4_IsEmpty(_DWORD *this)
{
  return *this == -1;
}

//----- (658B6930) --------------------------------------------------------
BOOL __thiscall sub_658B6930(_DWORD *this)
{
  return *this == 0;
}

//----- (658B6940) --------------------------------------------------------
BOOL __thiscall SoundPool5_HasBit(_DWORD *this, char a2)
{
  return (*this & (1 << a2)) != 0;
}

//----- (658B6960) --------------------------------------------------------
_DWORD *__thiscall sub_658B6960(_DWORD *this, char a2)
{
  *this &= ~(1 << a2);
  return this;
}

//----- (658B6980) --------------------------------------------------------
int __thiscall SoundPool5_GetNext(_DWORD *this)
{
  return *(this + 1);
}

//----- (658B69A0) --------------------------------------------------------
int __thiscall sub_658B69A0(void *this, unsigned int a2)
{
  if ( a2 < (unsigned int)this + 12 || a2 >= (unsigned int)this + 46732 )
    return 32;
  else
    return ((int)(a2 - (_DWORD)this - 12) >> 2) / 365;
}

//----- (658B69F0) --------------------------------------------------------
int __thiscall sub_658B69F0(void *this, int a2)
{
  return (int)this + 1460 * a2 + 12;
}

//----- (658B6A10) --------------------------------------------------------
int __thiscall sub_658B6A10(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (658B6A40) --------------------------------------------------------
int __thiscall sub_658B6A40(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (658B6A60) --------------------------------------------------------
int __thiscall sub_658B6A60(_DWORD *this)
{
  return *(this + 2);
}

//----- (658B6A70) --------------------------------------------------------
int __thiscall sub_658B6A70(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (658B6A90) --------------------------------------------------------
int __thiscall sub_658B6A90(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B6AD0) --------------------------------------------------------
int __thiscall sub_658B6AD0(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( v3 )
      *(_DWORD *)(v3 + 4) = this;
    *(this + 1) = a2;
    *(this + 2) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(a2 + 8) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B6B10) --------------------------------------------------------
_DWORD *__thiscall sub_658B6B10(_DWORD *this, int a2, int a3)
{
  *this = a2;
  *(this + 1) = a3;
  return this;
}

//----- (658B6B30) --------------------------------------------------------
int __thiscall sub_658B6B30(void *this, unsigned int a2)
{
  if ( a2 < (unsigned int)this + 12 || a2 >= (unsigned int)this + 14860 )
    return 32;
  else
    return ((int)(a2 - (_DWORD)this - 12) >> 2) / 116;
}

//----- (658B6B80) --------------------------------------------------------
int __thiscall sub_658B6B80(void *this, int a2)
{
  return (int)this + 464 * a2 + 12;
}

//----- (658B6BA0) --------------------------------------------------------
int __thiscall sub_658B6BA0(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (658B6BD0) --------------------------------------------------------
int __thiscall sub_658B6BD0(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (658B6BF0) --------------------------------------------------------
int __thiscall sub_658B6BF0(_DWORD *this)
{
  return *(this + 2);
}

//----- (658B6C00) --------------------------------------------------------
int __thiscall sub_658B6C00(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (658B6C20) --------------------------------------------------------
int __thiscall sub_658B6C20(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B6C60) --------------------------------------------------------
int __thiscall sub_658B6C60(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( v3 )
      *(_DWORD *)(v3 + 4) = this;
    *(this + 1) = a2;
    *(this + 2) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(a2 + 8) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B6CA0) --------------------------------------------------------
_DWORD *__thiscall sub_658B6CA0(_DWORD *this, int a2, int a3)
{
  *this = a2;
  *(this + 1) = a3;
  return this;
}

//----- (658B6CC0) --------------------------------------------------------
int __thiscall sub_658B6CC0(void *this, unsigned int a2)
{
  if ( a2 < (unsigned int)this + 12 || a2 >= (unsigned int)this + 4492 )
    return 32;
  else
    return ((int)(a2 - (_DWORD)this - 12) >> 2) / 35;
}

//----- (658B6D10) --------------------------------------------------------
int __thiscall sub_658B6D10(void *this, int a2)
{
  return (int)this + 140 * a2 + 12;
}

//----- (658B6D30) --------------------------------------------------------
int __thiscall sub_658B6D30(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (658B6D60) --------------------------------------------------------
int __thiscall sub_658B6D60(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (658B6D80) --------------------------------------------------------
int __thiscall sub_658B6D80(_DWORD *this)
{
  return *(this + 2);
}

//----- (658B6D90) --------------------------------------------------------
int __thiscall sub_658B6D90(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (658B6DB0) --------------------------------------------------------
int __thiscall sub_658B6DB0(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B6DF0) --------------------------------------------------------
int __thiscall sub_658B6DF0(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( v3 )
      *(_DWORD *)(v3 + 4) = this;
    *(this + 1) = a2;
    *(this + 2) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(a2 + 8) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B6E30) --------------------------------------------------------
_DWORD *__thiscall sub_658B6E30(_DWORD *this, int a2, int a3)
{
  *this = a2;
  *(this + 1) = a3;
  return this;
}

//----- (658B6E50) --------------------------------------------------------
int __thiscall sub_658B6E50(void *this, unsigned int a2)
{
  if ( a2 < (unsigned int)this + 12 || a2 >= (unsigned int)this + 4492 )
    return 32;
  else
    return ((int)(a2 - (_DWORD)this - 12) >> 2) / 35;
}

//----- (658B6EA0) --------------------------------------------------------
int __thiscall sub_658B6EA0(void *this, int a2)
{
  return (int)this + 140 * a2 + 12;
}

//----- (658B6EC0) --------------------------------------------------------
int __thiscall sub_658B6EC0(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (658B6EF0) --------------------------------------------------------
int __thiscall sub_658B6EF0(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (658B6F10) --------------------------------------------------------
int __thiscall sub_658B6F10(_DWORD *this)
{
  return *(this + 2);
}

//----- (658B6F20) --------------------------------------------------------
int __thiscall sub_658B6F20(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (658B6F40) --------------------------------------------------------
int __thiscall sub_658B6F40(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B6F80) --------------------------------------------------------
int __thiscall sub_658B6F80(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( v3 )
      *(_DWORD *)(v3 + 4) = this;
    *(this + 1) = a2;
    *(this + 2) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(a2 + 8) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B6FC0) --------------------------------------------------------
_DWORD *__thiscall sub_658B6FC0(_DWORD *this, int a2, int a3)
{
  *this = a2;
  *(this + 1) = a3;
  return this;
}

//----- (658B6FE0) --------------------------------------------------------
int __thiscall sub_658B6FE0(void *this, unsigned int a2)
{
  if ( a2 < (unsigned int)this + 12 || a2 >= (unsigned int)this + 8972 )
    return 32;
  else
    return ((int)(a2 - (_DWORD)this - 12) >> 2) / 70;
}

//----- (658B7030) --------------------------------------------------------
int __thiscall sub_658B7030(void *this, int a2)
{
  return (int)this + 280 * a2 + 12;
}

//----- (658B7050) --------------------------------------------------------
int __thiscall sub_658B7050(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (658B7080) --------------------------------------------------------
int __thiscall sub_658B7080(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (658B70A0) --------------------------------------------------------
int __thiscall sub_658B70A0(_DWORD *this)
{
  return *(this + 2);
}

//----- (658B70B0) --------------------------------------------------------
int __thiscall sub_658B70B0(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (658B70D0) --------------------------------------------------------
int __thiscall sub_658B70D0(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B7110) --------------------------------------------------------
int __thiscall sub_658B7110(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( v3 )
      *(_DWORD *)(v3 + 4) = this;
    *(this + 1) = a2;
    *(this + 2) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(a2 + 8) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B7150) --------------------------------------------------------
_DWORD *__thiscall sub_658B7150(_DWORD *this, int a2, int a3)
{
  *this = a2;
  *(this + 1) = a3;
  return this;
}

//----- (658B7170) --------------------------------------------------------
int __thiscall sub_658B7170(void *this, unsigned int a2)
{
  if ( a2 < (unsigned int)this + 12 || a2 >= (unsigned int)this + 3596 )
    return 32;
  else
    return ((int)(a2 - (_DWORD)this - 12) >> 2) / 28;
}

//----- (658B71C0) --------------------------------------------------------
int __thiscall sub_658B71C0(void *this, int a2)
{
  return (int)this + 112 * a2 + 12;
}

//----- (658B71E0) --------------------------------------------------------
int __thiscall sub_658B71E0(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (658B7210) --------------------------------------------------------
int __thiscall sub_658B7210(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (658B7230) --------------------------------------------------------
int __thiscall sub_658B7230(_DWORD *this)
{
  return *(this + 2);
}

//----- (658B7240) --------------------------------------------------------
int __thiscall sub_658B7240(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (658B7260) --------------------------------------------------------
int __thiscall sub_658B7260(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B72A0) --------------------------------------------------------
int __thiscall sub_658B72A0(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( v3 )
      *(_DWORD *)(v3 + 4) = this;
    *(this + 1) = a2;
    *(this + 2) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(a2 + 8) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B72E0) --------------------------------------------------------
_DWORD *__thiscall sub_658B72E0(_DWORD *this, int a2, int a3)
{
  *this = a2;
  *(this + 1) = a3;
  return this;
}

//----- (658B7300) --------------------------------------------------------
int __thiscall sub_658B7300(void *this, unsigned int a2)
{
  if ( a2 < (unsigned int)this + 12 || a2 >= (unsigned int)this + 31884 )
    return 32;
  else
    return ((int)(a2 - (_DWORD)this - 12) >> 2) / 249;
}

//----- (658B7350) --------------------------------------------------------
int __thiscall sub_658B7350(void *this, int a2)
{
  return (int)this + 996 * a2 + 12;
}

//----- (658B7370) --------------------------------------------------------
int __thiscall sub_658B7370(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (658B73A0) --------------------------------------------------------
int __thiscall sub_658B73A0(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (658B73C0) --------------------------------------------------------
int __thiscall sub_658B73C0(_DWORD *this)
{
  return *(this + 2);
}

//----- (658B73D0) --------------------------------------------------------
int __thiscall sub_658B73D0(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (658B73F0) --------------------------------------------------------
int __thiscall sub_658B73F0(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B7430) --------------------------------------------------------
int __thiscall sub_658B7430(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( v3 )
      *(_DWORD *)(v3 + 4) = this;
    *(this + 1) = a2;
    *(this + 2) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(a2 + 8) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B7470) --------------------------------------------------------
_DWORD *__thiscall sub_658B7470(_DWORD *this, int a2, int a3)
{
  *this = a2;
  *(this + 1) = a3;
  return this;
}

//----- (658B7490) --------------------------------------------------------
int __thiscall sub_658B7490(void *this, unsigned int a2)
{
  if ( a2 < (unsigned int)this + 12 || a2 >= (unsigned int)this + 15628 )
    return 32;
  else
    return ((int)(a2 - (_DWORD)this - 12) >> 2) / 122;
}

//----- (658B74D0) --------------------------------------------------------
int __thiscall sub_658B74D0(void *this, int a2)
{
  return (int)this + 488 * a2 + 12;
}

//----- (658B74F0) --------------------------------------------------------
int __thiscall sub_658B74F0(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (658B7520) --------------------------------------------------------
int __thiscall sub_658B7520(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (658B7540) --------------------------------------------------------
int __thiscall sub_658B7540(_DWORD *this)
{
  return *(this + 2);
}

//----- (658B7550) --------------------------------------------------------
int __thiscall sub_658B7550(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (658B7570) --------------------------------------------------------
int __thiscall FXNode3_InsertBefore(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B75B0) --------------------------------------------------------
int __thiscall sub_658B75B0(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( v3 )
      *(_DWORD *)(v3 + 4) = this;
    *(this + 1) = a2;
    *(this + 2) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(a2 + 8) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B75F0) --------------------------------------------------------
_DWORD *__thiscall sub_658B75F0(_DWORD *this, int a2, int a3)
{
  *this = a2;
  *(this + 1) = a3;
  return this;
}

//----- (658B7610) --------------------------------------------------------
int __thiscall sub_658B7610(void *this, unsigned int a2)
{
  if ( a2 < (unsigned int)this + 12 || a2 >= (unsigned int)this + 5772 )
    return 32;
  else
    return ((int)(a2 - (_DWORD)this - 12) >> 2) / 45;
}

//----- (658B7660) --------------------------------------------------------
int __thiscall FXPool4_GetSlotOffset(void *this, int a2)
{
  return (int)this + 180 * a2 + 12;
}

//----- (658B7680) --------------------------------------------------------
int __thiscall FXPool4_FindHighestBit(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (658B76B0) --------------------------------------------------------
int __thiscall FXPool4_FindFirstZeroBit(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (658B76D0) --------------------------------------------------------
int __thiscall sub_658B76D0(_DWORD *this)
{
  return *(this + 2);
}

//----- (658B76E0) --------------------------------------------------------
int __thiscall FXNode4_Unlink(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (658B7700) --------------------------------------------------------
int __thiscall FXNode4_InsertBefore(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B7740) --------------------------------------------------------
int __thiscall sub_658B7740(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( v3 )
      *(_DWORD *)(v3 + 4) = this;
    *(this + 1) = a2;
    *(this + 2) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(a2 + 8) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B7780) --------------------------------------------------------
_DWORD *__thiscall sub_658B7780(_DWORD *this, int a2, int a3)
{
  *this = a2;
  *(this + 1) = a3;
  return this;
}

//----- (658B77A0) --------------------------------------------------------
int __thiscall sub_658B77A0(void *this, unsigned int a2)
{
  if ( a2 < (unsigned int)this + 12 || a2 >= (unsigned int)this + 5132 )
    return 32;
  else
    return ((int)(a2 - (_DWORD)this - 12) >> 2) / 40;
}

//----- (658B77E0) --------------------------------------------------------
int __thiscall FXPool5_GetSlotOffset(void *this, int a2)
{
  return (int)this + 160 * a2 + 12;
}

//----- (658B7800) --------------------------------------------------------
int __thiscall FXPool5_FindHighestBit(int *this)
{
  int v1; // ecx
  int result; // eax
  unsigned int i; // edx

  v1 = *this;
  result = 31;
  for ( i = 0x80000000; (v1 & i) == 0; i >>= 1 )
  {
    if ( !--result )
      return v1 != 1 ? 0x20 : 0;
  }
  return result;
}

//----- (658B7830) --------------------------------------------------------
int __thiscall FXPool5_FindFirstZeroBit(int *this)
{
  int v1; // ecx
  __int64 v2; // rax

  v1 = *this;
  v2 = 0x100000000LL;
  do
  {
    if ( (v1 & HIDWORD(v2)) == 0 )
      break;
    LODWORD(v2) = v2 + 1;
    HIDWORD(v2) *= 2;
  }
  while ( (unsigned int)v2 < 0x20 );
  return v2;
}

//----- (658B7850) --------------------------------------------------------
int __thiscall sub_658B7850(_DWORD *this)
{
  return *(this + 2);
}

//----- (658B7860) --------------------------------------------------------
int __thiscall FXNode5_Unlink(_DWORD *this)
{
  int v1; // eax
  int result; // eax

  v1 = *(this + 2);
  if ( v1 )
    *(_DWORD *)(v1 + 4) = *(this + 1);
  result = *(this + 1);
  if ( result )
    *(_DWORD *)(result + 8) = *(this + 2);
  return result;
}

//----- (658B7880) --------------------------------------------------------
int __thiscall FXNode5_InsertBefore(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 8) = this;
    *(this + 1) = *(_DWORD *)(a2 + 4);
    *(this + 2) = a2;
    *(_DWORD *)(a2 + 4) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B78C0) --------------------------------------------------------
int __thiscall sub_658B78C0(_DWORD *this, int a2)
{
  int result; // eax
  int v3; // edx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( v3 )
      *(_DWORD *)(v3 + 4) = this;
    *(this + 1) = a2;
    *(this + 2) = *(_DWORD *)(a2 + 8);
    *(_DWORD *)(a2 + 8) = this;
  }
  else
  {
    *(this + 1) = 0;
    *(this + 2) = 0;
  }
  return result;
}

//----- (658B7900) --------------------------------------------------------
_DWORD *__thiscall sub_658B7900(_DWORD *this, int a2, int a3)
{
  *this = a2;
  *(this + 1) = a3;
  return this;
}

//----- (658B7B10) --------------------------------------------------------
void *__cdecl ArrayAlloc_DwordArray(int a1)
{
  return operator new[](4 * a1);
}

//----- (658B7B40) --------------------------------------------------------
void *__cdecl ArrayAlloc_DwordArray2(int a1)
{
  return operator new[](4 * a1);
}

//----- (658B7BB0) --------------------------------------------------------
char *__thiscall WeaponInstance_Ctor(char *this)
{
  float *v2; // ecx
  int v3; // edx
  char *v4; // eax

  *((_DWORD *)this + 1) = 0;
  *(_DWORD *)this = &off_659CF268;
  std::string::string(this + 84);
  std::string::string(this + 112);
  std::string::string(this + 188);
  *((float *)this + 2) = 0.0;
  *((float *)this + 3) = 0.0;
  v2 = (float *)(this + 280);
  *((float *)this + 4) = 0.0;
  v3 = 4;
  *((float *)this + 5) = 0.0;
  *((float *)this + 6) = 0.0;
  *((float *)this + 7) = 0.0;
  *((float *)this + 8) = 0.0;
  *((float *)this + 9) = 0.0;
  *((float *)this + 10) = 0.0;
  *((float *)this + 11) = 0.0;
  *((_DWORD *)this + 43) = 1;
  *((float *)this + 12) = 0.0;
  *((_DWORD *)this + 44) = 1;
  *((float *)this + 13) = 0.0;
  *((_DWORD *)this + 36) = 0;
  *((float *)this + 14) = 0.0;
  *((_DWORD *)this + 37) = 0;
  *((float *)this + 15) = 0.0;
  *((_DWORD *)this + 38) = 0;
  *((float *)this + 16) = 0.0;
  *(this + 156) = 0;
  *((float *)this + 17) = 0.0;
  *((_DWORD *)this + 41) = 0;
  *((float *)this + 18) = 0.0;
  *((_DWORD *)this + 42) = 0;
  *((_DWORD *)this + 45) = 0;
  *((float *)this + 19) = 0.5;
  *((_DWORD *)this + 46) = 0;
  v4 = this + 246;
  *((float *)this + 20) = 1.33;
  *((float *)this + 35) = 0.0;
  *(_DWORD *)(this + 157) = 0;
  *(this + 236) = 0;
  *((float *)this + 54) = 0.99000001;
  *((float *)this + 55) = 1.0;
  *((float *)this + 56) = 40.0;
  *((float *)this + 57) = 10.0;
  *((float *)this + 58) = 10.0;
  do
  {
    *((_WORD *)v4 - 4) = 0;
    *(_WORD *)v4 = 0;
    *((_WORD *)v4 + 4) = 0;
    *((_WORD *)v4 + 8) = 0;
    *((_WORD *)v4 + 12) = 0;
    *v2 = 0.0;
    v4 += 2;
    ++v2;
    --v3;
  }
  while ( v3 );
  *((_DWORD *)this + 74) = 0;
  return this;
}
// 659CF268: using guessed type void *off_659CF268;

//----- (658B7D30) --------------------------------------------------------
void __thiscall WeaponInstance_Dtor(_DWORD *this)
{
  std::string::~string(this + 47);
  std::string::~string(this + 28);
  std::string::~string(this + 21);
  *this = &off_659C0D14;
}
// 659C0D14: using guessed type void *off_659C0D14;

//----- (658B7DA0) --------------------------------------------------------
float *__thiscall WeaponRecoilData_Ctor(float *this)
{
  *(this + 1) = 0.0;
  *(_DWORD *)this = &off_659CF278;
  *(this + 2) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = NAN;
  *(this + 6) = 0.0;
  *(this + 14) = 0.0;
  *(this + 7) = 0.0;
  *((_BYTE *)this + 60) = 0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *(this + 11) = 0.0;
  *(this + 12) = 0.5;
  *(this + 13) = 0.0;
  return this;
}
// 659CF278: using guessed type void *off_659CF278;

//----- (658B7E00) --------------------------------------------------------
bool __stdcall SoundPool_CheckTypeValid(int a1, unsigned __int8 a2)
{
  unsigned int v2; // eax
  int v3; // edx

  v2 = sub_658B5FD0(a2);
  return v2 <= 0xB && FXPool_InsertOrReplace((unsigned int *)(v3 + 16 * v2), a1) != 0;
}
// 658B7E1C: variable 'v3' is possibly undefined

//----- (658B7E40) --------------------------------------------------------
void __thiscall SoundPool_UpdateAllTimers(int *this)
{
  signed int v2; // ebx
  unsigned int i; // esi
  int v4; // ecx
  bool v5; // zf
  int v6; // eax
  int v7; // ecx
  int v8; // eax
  int v9; // [esp+10h] [ebp-8h]
  float v10; // [esp+14h] [ebp-4h]

  v10 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
  v9 = 12;
  do
  {
    v2 = *(this + 2);
    for ( i = 0; (int)i < v2; ++i )
    {
      v4 = *this;
      if ( *this && i < *(this + 2) && *(_DWORD *)(v4 + 4 * i) && *(float *)(*(_DWORD *)(v4 + 4 * i) + 4) <= (double)v10 )
      {
        v5 = (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(v4 + 4 * i) + 20))(*(_DWORD *)(v4 + 4 * i)) == 0;
        v6 = *this;
        if ( v5 )
        {
          if ( v6 && i < *(this + 2) )
            FXPool_FindAndRelease(this, *(_DWORD *)(v6 + 4 * i));
          else
            FXPool_FindAndRelease(this, 0);
        }
        else
        {
          if ( v6 && i < *(this + 2) )
            v7 = *(_DWORD *)(v6 + 4 * i);
          else
            v7 = 0;
          if ( v6 && i < *(this + 2) )
            v8 = *(_DWORD *)(v6 + 4 * i);
          else
            v8 = 0;
          *(float *)(v8 + 4) = *(float *)(v7 + 48) + v10;
        }
      }
    }
    this += 4;
    --v9;
  }
  while ( v9 );
}

//----- (658B7F80) --------------------------------------------------------
void __thiscall SoundPool_ReleaseAll(_DWORD *this)
{
  int v2; // ebx
  unsigned int i; // esi
  int v4; // eax
  int v5; // [esp+Ch] [ebp-4h]

  v5 = 12;
  do
  {
    v2 = *(this + 2);
    for ( i = 0; (int)i < v2; ++i )
    {
      if ( *this && i < *(this + 2) )
        v4 = *(_DWORD *)(*this + 4 * i);
      else
        v4 = 0;
      FXPool_FindAndRelease(this, v4);
    }
    this += 4;
    --v5;
  }
  while ( v5 );
}

//----- (658B7FD0) --------------------------------------------------------
int __thiscall MsgId6B_LookupHandler(char *this, unsigned __int8 a2, int a3)
{
  int v3; // eax
  int v4; // esi
  char *v5; // ecx
  unsigned int v6; // eax
  int v7; // edx
  int v8; // edx

  if ( a2 >= 0xCu )
    return 0;
  v3 = 16 * a2;
  v4 = *(_DWORD *)(this + v3 + 8);
  v5 = this + v3;
  v6 = 0;
  if ( v4 <= 0 )
    return 0;
  while ( 1 )
  {
    v7 = *(_DWORD *)v5;
    if ( *(_DWORD *)v5 && v6 < v4 && *(_DWORD *)(v7 + 4 * v6) )
    {
      v8 = v7 && v6 < v4 ? *(_DWORD *)(v7 + 4 * v6) : 0;
      if ( *(_DWORD *)(v8 + 16) == a3 )
        break;
    }
    if ( (int)++v6 >= v4 )
      return 0;
  }
  if ( *(_DWORD *)v5 && v6 < v4 )
    return *(_DWORD *)(*(_DWORD *)v5 + 4 * v6);
  else
    return 0;
}

//----- (658B8040) --------------------------------------------------------
void __thiscall MsgId_6B_Handler(char *this, int a2)
{
  int v4; // eax
  int v5; // eax
  unsigned __int8 v6; // [esp+10h] [ebp+8h]

  if ( a2 )
  {
    v6 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 8);
    v4 = (*(int (__thiscall **)(int))(*(_DWORD *)a2 + 100))(a2);
    if ( v6 < 0xCu )
    {
      if ( v4 )
      {
        v5 = MsgId6B_LookupHandler(this, v6, v4);
        if ( v5 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)v5 + 44))(v5, a2);
      }
    }
  }
}

//----- (658B8270) --------------------------------------------------------
void __thiscall FXArray_Delete(void **this)
{
  if ( *((_BYTE *)this + 12) )
    operator delete[](*this);
  *this = 0;
  *(this + 1) = 0;
  *(this + 2) = 0;
}

//----- (658B82A0) --------------------------------------------------------
_DWORD *__thiscall FXPool1_FindFX(int *this, _DWORD *a2, unsigned int a3)
{
  _DWORD *v3; // esi
  unsigned int v4; // edi

  v3 = (_DWORD *)*this;
  v4 = 0;
  if ( *this )
  {
    do
    {
      v4 = sub_658B69A0(v3, a3);
      if ( v4 < 0x20 )
        break;
      v3 = (_DWORD *)sub_658B63E0(v3);
    }
    while ( v3 );
  }
  sub_658B6B10(a2, (int)v3, v4);
  return a2;
}

//----- (658B82F0) --------------------------------------------------------
int __thiscall FXPool1_MoveToFreeList(int *this, _DWORD *a2)
{
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx
  int result; // eax

  v3 = (_DWORD *)*this;
  if ( a2 == v3 )
    *this = sub_658B63E0(v3);
  v4 = (_DWORD *)*(this + 1);
  if ( a2 == v4 )
    *(this + 1) = sub_658B6A60(v4);
  sub_658B6A70(a2);
  result = sub_658B6AD0(a2, *(this + 2));
  *(this + 2) = (int)a2;
  return result;
}

//----- (658B8340) --------------------------------------------------------
BOOL __thiscall FXPool1_HasSlot(unsigned int *this)
{
  _DWORD *v2; // ecx
  BOOL result; // eax
  unsigned int v4; // eax

  v2 = (_DWORD *)*this;
  result = v2 && (v4 = *(this + 1), v4 < 0x20) && sub_658B63A0(v2, v4);
  return result;
}

//----- (658B8360) --------------------------------------------------------
int __thiscall FXPool1_AllocSlot(int *this, int a2)
{
  int v3; // eax

  v3 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( sub_658B63A0(this, 31) || sub_658B63E0(this) )
        return 0;
      if ( sub_658B6390(this) )
        v3 = 0;
      else
        v3 = sub_658B6A10(this) + 1;
    }
  }
  else
  {
    if ( sub_658B6380(this) )
      return 0;
    v3 = sub_658B6A40(this);
  }
  *this |= 1 << v3;
  return sub_658B69F0(this, v3);
}

//----- (658B83E0) --------------------------------------------------------
_DWORD *__thiscall FXPool2_FindFX(int *this, _DWORD *a2, unsigned int a3)
{
  _DWORD *v3; // esi
  unsigned int v4; // edi

  v3 = (_DWORD *)*this;
  v4 = 0;
  if ( *this )
  {
    do
    {
      v4 = sub_658B6B30(v3, a3);
      if ( v4 < 0x20 )
        break;
      v3 = (_DWORD *)sub_658B6480(v3);
    }
    while ( v3 );
  }
  sub_658B6CA0(a2, (int)v3, v4);
  return a2;
}

//----- (658B8430) --------------------------------------------------------
int __thiscall FXPool2_MoveToFreeList(int *this, _DWORD *a2)
{
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx
  int result; // eax

  v3 = (_DWORD *)*this;
  if ( a2 == v3 )
    *this = sub_658B6480(v3);
  v4 = (_DWORD *)*(this + 1);
  if ( a2 == v4 )
    *(this + 1) = sub_658B6BF0(v4);
  sub_658B6C00(a2);
  result = sub_658B6C60(a2, *(this + 2));
  *(this + 2) = (int)a2;
  return result;
}

//----- (658B8480) --------------------------------------------------------
BOOL __thiscall FXPool2_HasSlot(unsigned int *this)
{
  _DWORD *v2; // ecx
  BOOL result; // eax
  unsigned int v4; // eax

  v2 = (_DWORD *)*this;
  result = v2 && (v4 = *(this + 1), v4 < 0x20) && sub_658B6440(v2, v4);
  return result;
}

//----- (658B84A0) --------------------------------------------------------
int __thiscall FXPool2_AllocSlot(int *this, int a2)
{
  int v3; // eax

  v3 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( sub_658B6440(this, 31) || sub_658B6480(this) )
        return 0;
      if ( sub_658B6430(this) )
        v3 = 0;
      else
        v3 = sub_658B6BA0(this) + 1;
    }
  }
  else
  {
    if ( sub_658B6420(this) )
      return 0;
    v3 = sub_658B6BD0(this);
  }
  *this |= 1 << v3;
  return sub_658B6B80(this, v3);
}

//----- (658B8520) --------------------------------------------------------
_DWORD *__thiscall FXPool3_FindFX(int *this, _DWORD *a2, unsigned int a3)
{
  _DWORD *v3; // esi
  unsigned int v4; // edi

  v3 = (_DWORD *)*this;
  v4 = 0;
  if ( *this )
  {
    do
    {
      v4 = sub_658B6CC0(v3, a3);
      if ( v4 < 0x20 )
        break;
      v3 = (_DWORD *)sub_658B6520(v3);
    }
    while ( v3 );
  }
  sub_658B6E30(a2, (int)v3, v4);
  return a2;
}

//----- (658B8570) --------------------------------------------------------
int __thiscall FXPool3_MoveToFreeList(int *this, _DWORD *a2)
{
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx
  int result; // eax

  v3 = (_DWORD *)*this;
  if ( a2 == v3 )
    *this = sub_658B6520(v3);
  v4 = (_DWORD *)*(this + 1);
  if ( a2 == v4 )
    *(this + 1) = sub_658B6D80(v4);
  sub_658B6D90(a2);
  result = sub_658B6DF0(a2, *(this + 2));
  *(this + 2) = (int)a2;
  return result;
}

//----- (658B85C0) --------------------------------------------------------
BOOL __thiscall FXPool3_HasSlot(unsigned int *this)
{
  _DWORD *v2; // ecx
  BOOL result; // eax
  unsigned int v4; // eax

  v2 = (_DWORD *)*this;
  result = v2 && (v4 = *(this + 1), v4 < 0x20) && sub_658B64E0(v2, v4);
  return result;
}

//----- (658B85E0) --------------------------------------------------------
int __thiscall FXPool3_AllocSlot(int *this, int a2)
{
  int v3; // eax

  v3 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( sub_658B64E0(this, 31) || sub_658B6520(this) )
        return 0;
      if ( sub_658B64D0(this) )
        v3 = 0;
      else
        v3 = sub_658B6D30(this) + 1;
    }
  }
  else
  {
    if ( sub_658B64C0(this) )
      return 0;
    v3 = sub_658B6D60(this);
  }
  *this |= 1 << v3;
  return sub_658B6D10(this, v3);
}

//----- (658B8660) --------------------------------------------------------
_DWORD *__thiscall FXPool4_FindFX(int *this, _DWORD *a2, unsigned int a3)
{
  _DWORD *v3; // esi
  unsigned int v4; // edi

  v3 = (_DWORD *)*this;
  v4 = 0;
  if ( *this )
  {
    do
    {
      v4 = sub_658B6E50(v3, a3);
      if ( v4 < 0x20 )
        break;
      v3 = (_DWORD *)sub_658B65C0(v3);
    }
    while ( v3 );
  }
  sub_658B6FC0(a2, (int)v3, v4);
  return a2;
}

//----- (658B86B0) --------------------------------------------------------
int __thiscall FXPool4_MoveToFreeList(int *this, _DWORD *a2)
{
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx
  int result; // eax

  v3 = (_DWORD *)*this;
  if ( a2 == v3 )
    *this = sub_658B65C0(v3);
  v4 = (_DWORD *)*(this + 1);
  if ( a2 == v4 )
    *(this + 1) = sub_658B6F10(v4);
  sub_658B6F20(a2);
  result = sub_658B6F80(a2, *(this + 2));
  *(this + 2) = (int)a2;
  return result;
}

//----- (658B8700) --------------------------------------------------------
BOOL __thiscall FXPool4_HasSlot(unsigned int *this)
{
  _DWORD *v2; // ecx
  BOOL result; // eax
  unsigned int v4; // eax

  v2 = (_DWORD *)*this;
  result = v2 && (v4 = *(this + 1), v4 < 0x20) && sub_658B6580(v2, v4);
  return result;
}

//----- (658B8720) --------------------------------------------------------
int __thiscall FXPool4_AllocSlot(int *this, int a2)
{
  int v3; // eax

  v3 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( sub_658B6580(this, 31) || sub_658B65C0(this) )
        return 0;
      if ( sub_658B6570(this) )
        v3 = 0;
      else
        v3 = sub_658B6EC0(this) + 1;
    }
  }
  else
  {
    if ( sub_658B6560(this) )
      return 0;
    v3 = sub_658B6EF0(this);
  }
  *this |= 1 << v3;
  return sub_658B6EA0(this, v3);
}

//----- (658B87A0) --------------------------------------------------------
_DWORD *__thiscall FXPool5_FindFX(int *this, _DWORD *a2, unsigned int a3)
{
  _DWORD *v3; // esi
  unsigned int v4; // edi

  v3 = (_DWORD *)*this;
  v4 = 0;
  if ( *this )
  {
    do
    {
      v4 = sub_658B6FE0(v3, a3);
      if ( v4 < 0x20 )
        break;
      v3 = (_DWORD *)sub_658B6660(v3);
    }
    while ( v3 );
  }
  sub_658B7150(a2, (int)v3, v4);
  return a2;
}

//----- (658B87F0) --------------------------------------------------------
int __thiscall FXPool5_MoveToFreeList(int *this, _DWORD *a2)
{
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx
  int result; // eax

  v3 = (_DWORD *)*this;
  if ( a2 == v3 )
    *this = sub_658B6660(v3);
  v4 = (_DWORD *)*(this + 1);
  if ( a2 == v4 )
    *(this + 1) = sub_658B70A0(v4);
  sub_658B70B0(a2);
  result = sub_658B7110(a2, *(this + 2));
  *(this + 2) = (int)a2;
  return result;
}

//----- (658B8840) --------------------------------------------------------
BOOL __thiscall FXPool5_HasSlot(unsigned int *this)
{
  _DWORD *v2; // ecx
  BOOL result; // eax
  unsigned int v4; // eax

  v2 = (_DWORD *)*this;
  result = v2 && (v4 = *(this + 1), v4 < 0x20) && sub_658B6620(v2, v4);
  return result;
}

//----- (658B8860) --------------------------------------------------------
int __thiscall FXPool5_AllocSlot(int *this, int a2)
{
  int v3; // eax

  v3 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( sub_658B6620(this, 31) || sub_658B6660(this) )
        return 0;
      if ( sub_658B6610(this) )
        v3 = 0;
      else
        v3 = sub_658B7050(this) + 1;
    }
  }
  else
  {
    if ( sub_658B6600(this) )
      return 0;
    v3 = sub_658B7080(this);
  }
  *this |= 1 << v3;
  return sub_658B7030(this, v3);
}

//----- (658B88E0) --------------------------------------------------------
_DWORD *__thiscall SoundPool1_FindFX(_DWORD *this, _DWORD *a2, unsigned int a3)
{
  _DWORD *Next; // esi
  unsigned int v4; // edi

  Next = (_DWORD *)*this;
  v4 = 0;
  if ( *this )
  {
    do
    {
      v4 = sub_658B7170(Next, a3);
      if ( v4 < 0x20 )
        break;
      Next = (_DWORD *)SoundPool1_GetNext(Next);
    }
    while ( Next );
  }
  sub_658B72E0(a2, (int)Next, v4);
  return a2;
}

//----- (658B8930) --------------------------------------------------------
int __thiscall SoundPool1_MoveToFreeList(int *this, _DWORD *a2)
{
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx
  int result; // eax

  v3 = (_DWORD *)*this;
  if ( a2 == v3 )
    *this = SoundPool1_GetNext(v3);
  v4 = (_DWORD *)*(this + 1);
  if ( a2 == v4 )
    *(this + 1) = sub_658B7230(v4);
  sub_658B7240(a2);
  result = sub_658B72A0(a2, *(this + 2));
  *(this + 2) = (int)a2;
  return result;
}

//----- (658B8980) --------------------------------------------------------
BOOL __thiscall SoundPool1_ValidateSlot(_DWORD *this)
{
  _DWORD *v2; // ecx
  BOOL result; // eax
  unsigned int v4; // eax

  v2 = (_DWORD *)*this;
  result = v2 && (v4 = *(this + 1), v4 < 0x20) && SoundPool1_HasBit(v2, v4);
  return result;
}

//----- (658B89A0) --------------------------------------------------------
int __thiscall SoundPool1_AllocSlot(int *this, int a2)
{
  int v3; // eax

  v3 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( SoundPool1_HasBit(this, 31) || SoundPool1_GetNext(this) )
        return 0;
      if ( sub_658B66B0(this) )
        v3 = 0;
      else
        v3 = sub_658B71E0(this) + 1;
    }
  }
  else
  {
    if ( sub_658B66A0(this) )
      return 0;
    v3 = sub_658B7210(this);
  }
  *this |= 1 << v3;
  return sub_658B71C0(this, v3);
}

//----- (658B8A20) --------------------------------------------------------
_DWORD *__thiscall SoundPool2_FindFX(_DWORD *this, _DWORD *a2, unsigned int a3)
{
  _DWORD *Next; // esi
  unsigned int v4; // edi

  Next = (_DWORD *)*this;
  v4 = 0;
  if ( *this )
  {
    do
    {
      v4 = sub_658B7300(Next, a3);
      if ( v4 < 0x20 )
        break;
      Next = (_DWORD *)SoundPool2_GetNext(Next);
    }
    while ( Next );
  }
  sub_658B7470(a2, (int)Next, v4);
  return a2;
}

//----- (658B8A70) --------------------------------------------------------
int __thiscall SoundPool2_MoveToFreeList(int *this, _DWORD *a2)
{
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx
  int result; // eax

  v3 = (_DWORD *)*this;
  if ( a2 == v3 )
    *this = SoundPool2_GetNext(v3);
  v4 = (_DWORD *)*(this + 1);
  if ( a2 == v4 )
    *(this + 1) = sub_658B73C0(v4);
  sub_658B73D0(a2);
  result = sub_658B7430(a2, *(this + 2));
  *(this + 2) = (int)a2;
  return result;
}

//----- (658B8AC0) --------------------------------------------------------
BOOL __thiscall SoundPool2_ValidateSlot(_DWORD *this)
{
  _DWORD *v2; // ecx
  BOOL result; // eax
  unsigned int v4; // eax

  v2 = (_DWORD *)*this;
  result = v2 && (v4 = *(this + 1), v4 < 0x20) && SoundPool2_HasBit(v2, v4);
  return result;
}

//----- (658B8AE0) --------------------------------------------------------
int __thiscall SoundPool2_AllocSlot(int *this, int a2)
{
  int v3; // eax

  v3 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( SoundPool2_HasBit(this, 31) || SoundPool2_GetNext(this) )
        return 0;
      if ( sub_658B6750(this) )
        v3 = 0;
      else
        v3 = sub_658B7370(this) + 1;
    }
  }
  else
  {
    if ( SoundPool1_IsEmpty(this) )
      return 0;
    v3 = sub_658B73A0(this);
  }
  *this |= 1 << v3;
  return sub_658B7350(this, v3);
}

//----- (658B8B60) --------------------------------------------------------
_DWORD *__thiscall SoundPool3_FindFX(_DWORD *this, _DWORD *a2, unsigned int a3)
{
  _DWORD *Next; // esi
  unsigned int v4; // edi

  Next = (_DWORD *)*this;
  v4 = 0;
  if ( *this )
  {
    do
    {
      v4 = sub_658B7490(Next, a3);
      if ( v4 < 0x20 )
        break;
      Next = (_DWORD *)SoundPool3_GetNext(Next);
    }
    while ( Next );
  }
  sub_658B75F0(a2, (int)Next, v4);
  return a2;
}

//----- (658B8BB0) --------------------------------------------------------
int __thiscall SoundPool3_MoveToFreeList(int *this, _DWORD *a2)
{
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx
  int result; // eax

  v3 = (_DWORD *)*this;
  if ( a2 == v3 )
    *this = SoundPool3_GetNext(v3);
  v4 = (_DWORD *)*(this + 1);
  if ( a2 == v4 )
    *(this + 1) = sub_658B7540(v4);
  sub_658B7550(a2);
  result = sub_658B75B0(a2, *(this + 2));
  *(this + 2) = (int)a2;
  return result;
}

//----- (658B8C00) --------------------------------------------------------
BOOL __thiscall SoundPool3_ValidateSlot(_DWORD *this)
{
  _DWORD *v2; // ecx
  BOOL result; // eax
  unsigned int v4; // eax

  v2 = (_DWORD *)*this;
  result = v2 && (v4 = *(this + 1), v4 < 0x20) && SoundPool3_HasBit(v2, v4);
  return result;
}

//----- (658B8C20) --------------------------------------------------------
int __thiscall SoundPool3_AllocSlot(int *this, int a2)
{
  int v3; // eax

  v3 = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( SoundPool3_HasBit(this, 31) || SoundPool3_GetNext(this) )
        return 0;
      if ( sub_658B67F0(this) )
        v3 = 0;
      else
        v3 = sub_658B74F0(this) + 1;
    }
  }
  else
  {
    if ( SoundPool2_IsEmpty(this) )
      return 0;
    v3 = sub_658B7520(this);
  }
  *this |= 1 << v3;
  return sub_658B74D0(this, v3);
}

//----- (658B8CA0) --------------------------------------------------------
_DWORD *__thiscall SoundPool4_FindFX(_DWORD *this, _DWORD *a2, unsigned int a3)
{
  _DWORD *Next; // esi
  unsigned int v4; // edi

  Next = (_DWORD *)*this;
  v4 = 0;
  if ( *this )
  {
    do
    {
      v4 = sub_658B7610(Next, a3);
      if ( v4 < 0x20 )
        break;
      Next = (_DWORD *)SoundPool4_GetNext(Next);
    }
    while ( Next );
  }
  sub_658B7780(a2, (int)Next, v4);
  return a2;
}

//----- (658B8CF0) --------------------------------------------------------
int __thiscall SoundPool4_MoveToFreeList(int *this, _DWORD *a2)
{
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx
  int result; // eax

  v3 = (_DWORD *)*this;
  if ( a2 == v3 )
    *this = SoundPool4_GetNext(v3);
  v4 = (_DWORD *)*(this + 1);
  if ( a2 == v4 )
    *(this + 1) = sub_658B76D0(v4);
  FXNode4_Unlink(a2);
  result = sub_658B7740(a2, *(this + 2));
  *(this + 2) = (int)a2;
  return result;
}

//----- (658B8D40) --------------------------------------------------------
BOOL __thiscall SoundPool4_ValidateSlot(_DWORD *this)
{
  _DWORD *v2; // ecx
  BOOL result; // eax
  unsigned int v4; // eax

  v2 = (_DWORD *)*this;
  result = v2 && (v4 = *(this + 1), v4 < 0x20) && SoundPool4_HasBit(v2, v4);
  return result;
}

//----- (658B8D60) --------------------------------------------------------
int __thiscall SoundPool4_AllocSlot(int *this, int a2)
{
  int FirstZeroBit; // eax

  FirstZeroBit = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( SoundPool4_HasBit(this, 31) || SoundPool4_GetNext(this) )
        return 0;
      if ( sub_658B6890(this) )
        FirstZeroBit = 0;
      else
        FirstZeroBit = FXPool4_FindHighestBit(this) + 1;
    }
  }
  else
  {
    if ( SoundPool3_IsEmpty(this) )
      return 0;
    FirstZeroBit = FXPool4_FindFirstZeroBit(this);
  }
  *this |= 1 << FirstZeroBit;
  return FXPool4_GetSlotOffset(this, FirstZeroBit);
}

//----- (658B8DE0) --------------------------------------------------------
_DWORD *__thiscall SoundPool5_FindFX(_DWORD *this, _DWORD *a2, unsigned int a3)
{
  _DWORD *Next; // esi
  unsigned int v4; // edi

  Next = (_DWORD *)*this;
  v4 = 0;
  if ( *this )
  {
    do
    {
      v4 = sub_658B77A0(Next, a3);
      if ( v4 < 0x20 )
        break;
      Next = (_DWORD *)SoundPool5_GetNext(Next);
    }
    while ( Next );
  }
  sub_658B7900(a2, (int)Next, v4);
  return a2;
}

//----- (658B8E30) --------------------------------------------------------
int __thiscall SoundPool5_MoveToFreeList(int *this, _DWORD *a2)
{
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx
  int result; // eax

  v3 = (_DWORD *)*this;
  if ( a2 == v3 )
    *this = SoundPool5_GetNext(v3);
  v4 = (_DWORD *)*(this + 1);
  if ( a2 == v4 )
    *(this + 1) = sub_658B7850(v4);
  FXNode5_Unlink(a2);
  result = sub_658B78C0(a2, *(this + 2));
  *(this + 2) = (int)a2;
  return result;
}

//----- (658B8E80) --------------------------------------------------------
BOOL __thiscall SoundPool5_ValidateSlot(_DWORD *this)
{
  _DWORD *v2; // ecx
  BOOL result; // eax
  unsigned int v4; // eax

  v2 = (_DWORD *)*this;
  result = v2 && (v4 = *(this + 1), v4 < 0x20) && SoundPool5_HasBit(v2, v4);
  return result;
}

//----- (658B8EA0) --------------------------------------------------------
int __thiscall SoundPool5_AllocSlot(int *this, int a2)
{
  int FirstZeroBit; // eax

  FirstZeroBit = 32;
  if ( a2 )
  {
    if ( a2 == 1 )
    {
      if ( SoundPool5_HasBit(this, 31) || SoundPool5_GetNext(this) )
        return 0;
      if ( sub_658B6930(this) )
        FirstZeroBit = 0;
      else
        FirstZeroBit = FXPool5_FindHighestBit(this) + 1;
    }
  }
  else
  {
    if ( SoundPool4_IsEmpty(this) )
      return 0;
    FirstZeroBit = FXPool5_FindFirstZeroBit(this);
  }
  *this |= 1 << FirstZeroBit;
  return FXPool5_GetSlotOffset(this, FirstZeroBit);
}

//----- (658B8F50) --------------------------------------------------------
_DWORD *SoundPool_AllocSoundNode_XL()
{
  _DWORD *result; // eax

  result = operator new(0xB68Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (658B8FA0) --------------------------------------------------------
_DWORD *SoundPool_AllocSoundNode_Large()
{
  _DWORD *result; // eax

  result = operator new(0x3A0Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (658B8FF0) --------------------------------------------------------
_DWORD *SoundPool_AllocSoundNode_Medium()
{
  _DWORD *result; // eax

  result = operator new(0x118Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (658B9040) --------------------------------------------------------
_DWORD *SoundPool_AllocSoundNode_Small()
{
  _DWORD *result; // eax

  result = operator new(0x118Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (658B9090) --------------------------------------------------------
_DWORD *SoundPool_AllocSoundNode_Tiny()
{
  _DWORD *result; // eax

  result = operator new(0x230Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (658B90E0) --------------------------------------------------------
_DWORD *FXPool_AllocFXNode_Large()
{
  _DWORD *result; // eax

  result = operator new(0xE0Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (658B9130) --------------------------------------------------------
_DWORD *FXPool_AllocFXNode_Medium()
{
  _DWORD *result; // eax

  result = operator new(0x7C8Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (658B9180) --------------------------------------------------------
_DWORD *FXPool_AllocFXNode_Small()
{
  _DWORD *result; // eax

  result = operator new(0x3D0Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (658B91D0) --------------------------------------------------------
_DWORD *FXPool_AllocFXNode_Tiny()
{
  _DWORD *result; // eax

  result = operator new(0x168Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (658B9220) --------------------------------------------------------
_DWORD *FXPool_AllocFXNode_Mini()
{
  _DWORD *result; // eax

  result = operator new(0x140Cu);
  if ( !result )
    return 0;
  *result = 0;
  result[1] = 0;
  result[2] = 0;
  return result;
}

//----- (658B9240) --------------------------------------------------------
int __thiscall SoundPool_Initialize(void *this, unsigned int a2)
{
  int v4; // eax
  void *v5; // eax
  void *v6; // eax
  void *v7; // [esp-Ch] [ebp-10h]
  size_t v8; // [esp-4h] [ebp-8h]

  if ( *(_DWORD *)this )
    return 0;
  v4 = a2;
  if ( a2 >= 0x3E8 )
    v4 = 1000;
  *((_DWORD *)this + 2) = v4;
  v5 = ArrayAlloc_DwordArray(v4);
  *(_DWORD *)this = v5;
  if ( !v5 )
    return 0;
  v6 = ArrayAlloc_DwordArray2(*((_DWORD *)this + 2));
  *((_DWORD *)this + 1) = v6;
  if ( !v6 )
    return 0;
  v8 = 4 * *((_DWORD *)this + 2);
  v7 = *(void **)this;
  *((_DWORD *)this + 3) = 0;
  memset(v7, 0, v8);
  memset(*((void **)this + 1), 0, 4 * *((_DWORD *)this + 2));
  return 1;
}

//----- (658B92F0) --------------------------------------------------------
_DWORD *__thiscall WeaponBaseState_Ctor(_DWORD *this)
{
  *this = &off_659CF288;
  *(this + 1) = 0;
  *((_BYTE *)this + 32) = 0;
  *(this + 9) = 0;
  *((float *)this + 2) = 0.0;
  *((float *)this + 3) = 0.0;
  *((float *)this + 4) = 0.0;
  *((float *)this + 5) = 0.0;
  *((float *)this + 6) = 0.0;
  *((float *)this + 7) = 0.0;
  *((float *)this + 10) = 0.0;
  *((float *)this + 11) = 0.0;
  *((float *)this + 12) = 0.0;
  *((float *)this + 13) = 0.80000001;
  *((float *)this + 14) = 0.0;
  *((float *)this + 15) = 0.0;
  *((float *)this + 16) = 0.0;
  *((float *)this + 17) = 0.0;
  *((float *)this + 18) = 0.0;
  *((float *)this + 19) = 0.0;
  *((float *)this + 20) = 0.0;
  *((float *)this + 21) = 0.0;
  *((float *)this + 22) = 0.0;
  return this;
}
// 659CF288: using guessed type void *off_659CF288;

//----- (658B9380) --------------------------------------------------------
_DWORD *__thiscall WeaponMeleeState_Ctor(_DWORD *this)
{
  *(this + 1) = 0;
  *((_BYTE *)this + 32) = 0;
  *(this + 9) = 0;
  *((float *)this + 2) = 0.0;
  *((float *)this + 3) = 0.0;
  *((float *)this + 4) = 0.0;
  *((float *)this + 5) = 0.0;
  *((float *)this + 6) = 0.0;
  *((float *)this + 7) = 0.0;
  *((float *)this + 10) = 0.0;
  *((float *)this + 11) = 0.0;
  *((float *)this + 12) = 0.0;
  *((float *)this + 13) = 0.80000001;
  *((float *)this + 14) = 0.0;
  *((float *)this + 15) = 0.0;
  *((float *)this + 16) = 0.0;
  *((float *)this + 17) = 0.0;
  *((float *)this + 18) = 0.0;
  *((float *)this + 19) = 0.0;
  *this = &off_659CF298;
  *((float *)this + 20) = 0.0;
  *(this + 23) = 0;
  *((float *)this + 21) = 0.0;
  *((float *)this + 22) = 0.0;
  *((float *)this + 24) = 0.0;
  *((float *)this + 25) = 0.0;
  *((float *)this + 26) = 0.0;
  *((float *)this + 27) = 0.0;
  *((float *)this + 28) = 0.0;
  return this;
}
// 659CF298: using guessed type void *off_659CF298;

//----- (658B9420) --------------------------------------------------------
_DWORD *__thiscall WeaponRangedState_Ctor(_DWORD *this)
{
  *(this + 1) = 0;
  *((_BYTE *)this + 32) = 0;
  *(this + 9) = 0;
  *((float *)this + 2) = 0.0;
  *((float *)this + 3) = 0.0;
  *((float *)this + 4) = 0.0;
  *((float *)this + 5) = 0.0;
  *((float *)this + 6) = 0.0;
  *((float *)this + 7) = 0.0;
  *((float *)this + 10) = 0.0;
  *((float *)this + 11) = 0.0;
  *((float *)this + 12) = 0.0;
  *((float *)this + 13) = 0.80000001;
  *((float *)this + 14) = 0.0;
  *((float *)this + 15) = 0.0;
  *((float *)this + 16) = 0.0;
  *((float *)this + 17) = 0.0;
  *((float *)this + 18) = 0.0;
  *((float *)this + 19) = 0.0;
  *this = &off_659CF2B4;
  *((float *)this + 20) = 0.0;
  *((_BYTE *)this + 92) = 0;
  *((float *)this + 21) = 0.0;
  *((float *)this + 22) = 0.0;
  *(_DWORD *)((char *)this + 93) = 0;
  *(_DWORD *)((char *)this + 97) = 0;
  *(_DWORD *)((char *)this + 101) = 0;
  *(this + 27) = 0;
  return this;
}
// 659CF2B4: using guessed type void *off_659CF2B4;

//----- (658B94C0) --------------------------------------------------------
float *__thiscall ParticleFX_Ctor(float *this)
{
  *(this + 12) = 0.001;
  *(this + 11) = 0.0;
  *(this + 1) = 0.0;
  *(this + 2) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *((_BYTE *)this + 52) = 0;
  *(_DWORD *)this = &off_659CF2C8;
  FogSettings_Ctor(this + 14);
  *(this + 33) = 0.0;
  *(this + 34) = 0.0;
  return this;
}
// 659CF2C8: using guessed type void *off_659CF2C8;

//----- (658B9680) --------------------------------------------------------
float *__thiscall LightInstance_Ctor(float *this)
{
  *(this + 12) = 0.001;
  *(this + 11) = 0.0;
  *(this + 1) = 0.0;
  *(this + 2) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *((_BYTE *)this + 52) = 0;
  *(_DWORD *)this = &off_659CF300;
  *(this + 14) = 1.0;
  *(this + 15) = 1.0;
  *(this + 16) = 1.0;
  *(this + 17) = 0.0;
  *(this + 18) = 0.0;
  *(this + 19) = 0.0;
  *(this + 26) = 0.0;
  *(this + 20) = 100.0;
  *(this + 21) = 300.0;
  *(this + 22) = 1.0;
  *(this + 23) = 1.0;
  *(this + 24) = 1.0;
  *(this + 25) = 1.0;
  *(this + 27) = 0.0;
  return this;
}
// 659CF300: using guessed type void *off_659CF300;

//----- (658B9770) --------------------------------------------------------
float *__thiscall LightFX_Ctor(float *this)
{
  float *v2; // ecx
  _WORD *v3; // eax
  int v4; // edi

  *(this + 12) = 0.001;
  *(this + 11) = 0.0;
  *(this + 2) = 0.0;
  *(this + 1) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *((_BYTE *)this + 52) = 0;
  *(_DWORD *)this = &off_659CF338;
  *(this + 14) = 0.0;
  *(this + 15) = 0.0;
  *(this + 16) = 0.0;
  *((_BYTE *)this + 68) = 0;
  *(this + 21) = 0.0;
  *(this + 22) = 0.0;
  *(this + 23) = 0.0;
  *((_BYTE *)this + 96) = 0;
  `eh vector constructor iterator'(
    this + 25,
    0x10u,
    2,
    (void (__thiscall *)(void *))Concurrency::details::TaskStack::TaskStack,
    (void (__thiscall *)(void *))FXArray_Delete);
  std::string::string(this + 214);
  std::string::string(this + 221);
  std::string::string(this + 228);
  *(this + 197) = 0.0;
  *(this + 241) = 0.0;
  *(this + 196) = 0.0;
  *(this + 195) = 0.0;
  *(this + 198) = 255.0;
  *(this + 199) = 255.0;
  *(this + 200) = 255.0;
  *(this + 201) = 255.0;
  *(this + 202) = 255.0;
  *(this + 203) = 255.0;
  *(this + 204) = 15.0;
  *(this + 205) = 25.0;
  *(this + 207) = 25.0;
  *(this + 206) = 15.0;
  *(this + 208) = 10.0;
  *(this + 209) = 10.0;
  *(this + 210) = 0.0;
  *(this + 211) = 0.0;
  *(this + 212) = 0.5;
  *(this + 213) = 1.33;
  *(this + 235) = 0.69999999;
  *(this + 18) = 0.0;
  *(this + 163) = 0.99000001;
  *((_DWORD *)this + 19) = 1;
  *((_DWORD *)this + 20) = 1;
  *(this + 164) = 1.0;
  *((_DWORD *)this + 236) = 16;
  *((_DWORD *)this + 237) = 16;
  *(this + 165) = 40.0;
  *((_BYTE *)this + 956) = 1;
  *((_DWORD *)this + 244) = 1;
  *(this + 166) = 10.0;
  *((_DWORD *)this + 245) = 1;
  *(this + 167) = 10.0;
  *(this + 238) = 0.0;
  *((_BYTE *)this + 957) = 50;
  *((_BYTE *)this + 958) = 10;
  *((_BYTE *)this + 959) = 30;
  *((_BYTE *)this + 960) = 20;
  *(this + 242) = 0.0;
  *(this + 243) = 0.0;
  *(this + 246) = 0.0;
  *(this + 247) = 0.0;
  *(this + 33) = 0.0;
  *((_BYTE *)this + 672) = 0;
  v2 = this + 183;
  v3 = (_WORD *)this + 341;
  v4 = 4;
  do
  {
    *(v3 - 4) = 0;
    *v3 = 0;
    v3[4] = 0;
    v3[8] = 0;
    v3[12] = 0;
    *(v2 - 4) = 0.0;
    *v2 = 0.0;
    v2[4] = 0.0;
    v2[8] = 0.0;
    ++v3;
    ++v2;
    --v4;
  }
  while ( v4 );
  *(this + 248) = 0.0;
  return this;
}
// 65985BAD: using guessed type void __stdcall `eh vector constructor iterator'(void *, unsigned int, _DWORD, void (__thiscall *)(void *), void (__thiscall *)(void *));
// 659CF338: using guessed type void *off_659CF338;

//----- (658B9B40) --------------------------------------------------------
char *__thiscall FXBase_Ctor(char *this)
{
  BeamFX_Ctor((float *)this);
  *(_DWORD *)this = &off_659CF370;
  *(this + 140) = 0;
  Concurrency::details::TaskStack::TaskStack((#178 *)(this + 141));
  *((_DWORD *)this + 39) = 0;
  return this;
}
// 659CF370: using guessed type void *off_659CF370;

//----- (658B9CC0) --------------------------------------------------------
int __thiscall WeaponSlot_ValidateAllSlots(char *this)
{
  int v1; // esi
  unsigned int v3; // eax

  v1 = 0;
  while ( 1 )
  {
    v3 = sub_658B5FF0(v1);
    if ( !SoundPool_Initialize(this, v3) )
      break;
    ++v1;
    this += 16;
    if ( v1 >= 12 )
      return 1;
  }
  return 0;
}

//----- (658B9D00) --------------------------------------------------------
void __thiscall WeaponMgr_ShutdownAndReset(int *this)
{
  SoundPool_UpdateAllTimers(this);
  JUMPOUT(0x658B8190);
}
// 658B9D0B: control flows out of bounds to 658B8190

//----- (658B9D20) --------------------------------------------------------
int __thiscall WeaponMgr_ClearAllSlots(_DWORD *this)
{
  _DWORD *v2; // esi
  float *v3; // edi
  int v4; // ebx

  SoundPool_ReleaseAll(this);
  v2 = this + 48;
  v3 = (float *)(this + 302);
  v4 = 100;
  do
  {
    if ( *v2 )
      sub_658B6340((int (__thiscall ***)(_DWORD, int))*v2);
    if ( v2[1] )
      sub_658B6340((int (__thiscall ***)(_DWORD, int))v2[1]);
    *v2 = 0;
    v2[1] = 0;
    *(v3 - 2) = 0.0;
    *(v3 - 1) = 0.0;
    *v3 = 0.0;
    v3 += 3;
    v2 += 2;
    --v4;
  }
  while ( v4 );
  memset(this + 250, 0, 0xC8u);
  *(this + 248) = 0;
  *(this + 249) = 0;
  return 0;
}

//----- (658B9DC0) --------------------------------------------------------
void __thiscall FXPool1_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3)
{
  _DWORD *v4; // edi
  char v5; // al
  unsigned int v6[2]; // [esp+8h] [ebp-8h] BYREF

  if ( a2 )
  {
    FXPool1_FindFX(this, v6, (unsigned int)a2);
    if ( FXPool1_HasSlot(v6) )
    {
      if ( a3 )
        (**a2)(a2, 0);
      v4 = (_DWORD *)sub_658B6360(v6);
      v5 = sub_658B6370(v6);
      sub_658B63C0(v4, v5);
      --*(this + 3);
      if ( sub_658B6390(v4) )
        FXPool1_MoveToFreeList(this, v4);
    }
  }
}

//----- (658B9E30) --------------------------------------------------------
void __thiscall FXPool2_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3)
{
  _DWORD *v4; // edi
  char v5; // al
  unsigned int v6[2]; // [esp+8h] [ebp-8h] BYREF

  if ( a2 )
  {
    FXPool2_FindFX(this, v6, (unsigned int)a2);
    if ( FXPool2_HasSlot(v6) )
    {
      if ( a3 )
        (**a2)(a2, 0);
      v4 = (_DWORD *)sub_658B6400(v6);
      v5 = sub_658B6410(v6);
      sub_658B6460(v4, v5);
      --*(this + 3);
      if ( sub_658B6430(v4) )
        FXPool2_MoveToFreeList(this, v4);
    }
  }
}

//----- (658B9EA0) --------------------------------------------------------
void __thiscall FXPool3_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3)
{
  _DWORD *v4; // edi
  char v5; // al
  unsigned int v6[2]; // [esp+8h] [ebp-8h] BYREF

  if ( a2 )
  {
    FXPool3_FindFX(this, v6, (unsigned int)a2);
    if ( FXPool3_HasSlot(v6) )
    {
      if ( a3 )
        (**a2)(a2, 0);
      v4 = (_DWORD *)sub_658B64A0(v6);
      v5 = sub_658B64B0(v6);
      sub_658B6500(v4, v5);
      --*(this + 3);
      if ( sub_658B64D0(v4) )
        FXPool3_MoveToFreeList(this, v4);
    }
  }
}

//----- (658B9F10) --------------------------------------------------------
void __thiscall FXPool4_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3)
{
  _DWORD *v4; // edi
  char v5; // al
  unsigned int v6[2]; // [esp+8h] [ebp-8h] BYREF

  if ( a2 )
  {
    FXPool4_FindFX(this, v6, (unsigned int)a2);
    if ( FXPool4_HasSlot(v6) )
    {
      if ( a3 )
        (**a2)(a2, 0);
      v4 = (_DWORD *)sub_658B6540(v6);
      v5 = sub_658B6550(v6);
      sub_658B65A0(v4, v5);
      --*(this + 3);
      if ( sub_658B6570(v4) )
        FXPool4_MoveToFreeList(this, v4);
    }
  }
}

//----- (658B9F80) --------------------------------------------------------
void __thiscall FXPool5_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3)
{
  _DWORD *v4; // edi
  char v5; // al
  unsigned int v6[2]; // [esp+8h] [ebp-8h] BYREF

  if ( a2 )
  {
    FXPool5_FindFX(this, v6, (unsigned int)a2);
    if ( FXPool5_HasSlot(v6) )
    {
      if ( a3 )
        (**a2)(a2, 0);
      v4 = (_DWORD *)sub_658B65E0(v6);
      v5 = sub_658B65F0(v6);
      sub_658B6640(v4, v5);
      --*(this + 3);
      if ( sub_658B6610(v4) )
        FXPool5_MoveToFreeList(this, v4);
    }
  }
}

//----- (658B9FF0) --------------------------------------------------------
void __thiscall FXPool6_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3)
{
  _DWORD *v4; // edi
  char v5; // al
  _DWORD v6[2]; // [esp+8h] [ebp-8h] BYREF

  if ( a2 )
  {
    SoundPool1_FindFX(this, v6, (unsigned int)a2);
    if ( SoundPool1_ValidateSlot(v6) )
    {
      if ( a3 )
        (**a2)(a2, 0);
      v4 = (_DWORD *)sub_658B6680(v6);
      v5 = sub_658B6690(v6);
      sub_658B66E0(v4, v5);
      --*(this + 3);
      if ( sub_658B66B0(v4) )
        SoundPool1_MoveToFreeList(this, v4);
    }
  }
}

//----- (658BA060) --------------------------------------------------------
void __thiscall FXPool7_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3)
{
  _DWORD *v4; // edi
  char v5; // al
  _DWORD v6[2]; // [esp+8h] [ebp-8h] BYREF

  if ( a2 )
  {
    SoundPool2_FindFX(this, v6, (unsigned int)a2);
    if ( SoundPool2_ValidateSlot(v6) )
    {
      if ( a3 )
        (**a2)(a2, 0);
      v4 = (_DWORD *)sub_658B6720(v6);
      v5 = sub_658B6730(v6);
      sub_658B6780(v4, v5);
      --*(this + 3);
      if ( sub_658B6750(v4) )
        SoundPool2_MoveToFreeList(this, v4);
    }
  }
}

//----- (658BA0D0) --------------------------------------------------------
void __thiscall FXPool8_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3)
{
  _DWORD *v4; // edi
  char v5; // al
  _DWORD v6[2]; // [esp+8h] [ebp-8h] BYREF

  if ( a2 )
  {
    SoundPool3_FindFX(this, v6, (unsigned int)a2);
    if ( SoundPool3_ValidateSlot(v6) )
    {
      if ( a3 )
        (**a2)(a2, 0);
      v4 = (_DWORD *)sub_658B67C0(v6);
      v5 = sub_658B67D0(v6);
      sub_658B6820(v4, v5);
      --*(this + 3);
      if ( sub_658B67F0(v4) )
        SoundPool3_MoveToFreeList(this, v4);
    }
  }
}

//----- (658BA140) --------------------------------------------------------
void __thiscall FXPool9_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3)
{
  _DWORD *v4; // edi
  char v5; // al
  _DWORD v6[2]; // [esp+8h] [ebp-8h] BYREF

  if ( a2 )
  {
    SoundPool4_FindFX(this, v6, (unsigned int)a2);
    if ( SoundPool4_ValidateSlot(v6) )
    {
      if ( a3 )
        (**a2)(a2, 0);
      v4 = (_DWORD *)sub_658B6860(v6);
      v5 = sub_658B6870(v6);
      sub_658B68C0(v4, v5);
      --*(this + 3);
      if ( sub_658B6890(v4) )
        SoundPool4_MoveToFreeList(this, v4);
    }
  }
}

//----- (658BA1B0) --------------------------------------------------------
void __thiscall FXPool10_ReleaseSlot(int *this, void (__thiscall ***a2)(_DWORD, _DWORD), char a3)
{
  _DWORD *v4; // edi
  char v5; // al
  _DWORD v6[2]; // [esp+8h] [ebp-8h] BYREF

  if ( a2 )
  {
    SoundPool5_FindFX(this, v6, (unsigned int)a2);
    if ( SoundPool5_ValidateSlot(v6) )
    {
      if ( a3 )
        (**a2)(a2, 0);
      v4 = (_DWORD *)sub_658B6900(v6);
      v5 = sub_658B6910(v6);
      sub_658B6960(v4, v5);
      --*(this + 3);
      if ( sub_658B6930(v4) )
        SoundPool5_MoveToFreeList(this, v4);
    }
  }
}

//----- (658BA2C0) --------------------------------------------------------
_DWORD *__thiscall FXList1_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = sub_658B63E0(v2);
    sub_658B6A70(v3);
  }
  else
  {
    v3 = SoundPool_AllocSoundNode_XL();
  }
  sub_658B6A90(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (658BA350) --------------------------------------------------------
_DWORD *__thiscall FXList2_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = sub_658B6480(v2);
    sub_658B6C00(v3);
  }
  else
  {
    v3 = SoundPool_AllocSoundNode_Large();
  }
  sub_658B6C20(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (658BA3E0) --------------------------------------------------------
_DWORD *__thiscall FXList3_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = sub_658B6520(v2);
    sub_658B6D90(v3);
  }
  else
  {
    v3 = SoundPool_AllocSoundNode_Medium();
  }
  sub_658B6DB0(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (658BA470) --------------------------------------------------------
_DWORD *__thiscall FXList4_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = sub_658B65C0(v2);
    sub_658B6F20(v3);
  }
  else
  {
    v3 = SoundPool_AllocSoundNode_Small();
  }
  sub_658B6F40(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (658BA500) --------------------------------------------------------
_DWORD *__thiscall FXList5_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = sub_658B6660(v2);
    sub_658B70B0(v3);
  }
  else
  {
    v3 = SoundPool_AllocSoundNode_Tiny();
  }
  sub_658B70D0(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (658BA590) --------------------------------------------------------
_DWORD *__thiscall SoundList1_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = SoundPool1_GetNext(v2);
    sub_658B7240(v3);
  }
  else
  {
    v3 = FXPool_AllocFXNode_Large();
  }
  sub_658B7260(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (658BA620) --------------------------------------------------------
_DWORD *__thiscall SoundList2_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = SoundPool2_GetNext(v2);
    sub_658B73D0(v3);
  }
  else
  {
    v3 = FXPool_AllocFXNode_Medium();
  }
  sub_658B73F0(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (658BA6B0) --------------------------------------------------------
_DWORD *__thiscall SoundList3_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = SoundPool3_GetNext(v2);
    sub_658B7550(v3);
  }
  else
  {
    v3 = FXPool_AllocFXNode_Small();
  }
  FXNode3_InsertBefore(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (658BA740) --------------------------------------------------------
_DWORD *__thiscall SoundList4_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = SoundPool4_GetNext(v2);
    FXNode4_Unlink(v3);
  }
  else
  {
    v3 = FXPool_AllocFXNode_Tiny();
  }
  FXNode4_InsertBefore(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (658BA7D0) --------------------------------------------------------
_DWORD *__thiscall SoundList5_AllocNode(int *this)
{
  _DWORD *v2; // ecx
  _DWORD *v3; // edi
  bool v4; // zf
  _DWORD *result; // eax

  v2 = (_DWORD *)*(this + 2);
  if ( v2 )
  {
    v3 = v2;
    *(this + 2) = SoundPool5_GetNext(v2);
    FXNode5_Unlink(v3);
  }
  else
  {
    v3 = FXPool_AllocFXNode_Mini();
  }
  FXNode5_InsertBefore(v3, *(this + 1));
  v4 = *this == 0;
  *(this + 1) = (int)v3;
  result = v3;
  if ( v4 )
    *this = (int)v3;
  return result;
}

//----- (658BA830) --------------------------------------------------------
float *__thiscall SkyFX_Ctor(float *this)
{
  BeamFX_Ctor(this);
  *(this + 37) = 0.0;
  *(_DWORD *)this = &off_659CF3A8;
  *((_DWORD *)this + 35) = 1;
  *(this + 38) = 1000.0;
  *(this + 36) = 0.0;
  *((double *)this + 20) = 1.0;
  *(this + 42) = 0.0;
  *(this + 43) = 0.0;
  *(this + 44) = 0.0;
  *(this + 45) = 0.0;
  *(this + 46) = 0.0;
  *(this + 47) = 0.0;
  *(this + 48) = 0.0;
  *(this + 49) = 0.0;
  *(this + 50) = 0.0;
  *(this + 51) = 0.75;
  *(this + 52) = 0.0;
  sub_65885860(this + 54);
  return this;
}
// 659CF3A8: using guessed type void *off_659CF3A8;

//----- (658BAA30) --------------------------------------------------------
void __cdecl FXMgr_ReturnToPool(int (__thiscall ***a1)(_DWORD, int))
{
  if ( a1 )
  {
    switch ( ((int (__thiscall *)(int (__thiscall ***)(_DWORD, int)))(*a1)[12])(a1) )
    {
      case 1:
        FXPool1_ReleaseSlot(dword_65AC02E4, (void (__thiscall ***)(_DWORD, _DWORD))a1, 1);
        break;
      case 2:
        FXPool2_ReleaseSlot(dword_65AC02F4, (void (__thiscall ***)(_DWORD, _DWORD))a1, 1);
        break;
      case 3:
        FXPool3_ReleaseSlot(dword_65AC0304, (void (__thiscall ***)(_DWORD, _DWORD))a1, 1);
        break;
      case 4:
        FXPool4_ReleaseSlot(dword_65AC0314, (void (__thiscall ***)(_DWORD, _DWORD))a1, 1);
        break;
      case 5:
        FXPool5_ReleaseSlot(dword_65AC0324, (void (__thiscall ***)(_DWORD, _DWORD))a1, 1);
        break;
      case 6:
        FXPool6_ReleaseSlot(dword_65AC0334, (void (__thiscall ***)(_DWORD, _DWORD))a1, 1);
        break;
      case 7:
        FXPool7_ReleaseSlot(dword_65AC0344, (void (__thiscall ***)(_DWORD, _DWORD))a1, 1);
        break;
      case 8:
        FXPool8_ReleaseSlot(dword_65AC0354, (void (__thiscall ***)(_DWORD, _DWORD))a1, 1);
        break;
      case 9:
        FXPool9_ReleaseSlot(dword_65AC0364, (void (__thiscall ***)(_DWORD, _DWORD))a1, 1);
        break;
      case 10:
        FXPool10_ReleaseSlot(dword_65AC0374, (void (__thiscall ***)(_DWORD, _DWORD))a1, 1);
        break;
      default:
        sub_658B6320(a1);
        break;
    }
  }
}
// 65AC02E4: using guessed type int dword_65AC02E4[4];
// 65AC02F4: using guessed type int dword_65AC02F4[4];
// 65AC0304: using guessed type int dword_65AC0304[4];
// 65AC0314: using guessed type int dword_65AC0314[4];
// 65AC0324: using guessed type int dword_65AC0324[4];
// 65AC0334: using guessed type int dword_65AC0334[4];
// 65AC0344: using guessed type int dword_65AC0344[4];
// 65AC0354: using guessed type int dword_65AC0354[4];
// 65AC0364: using guessed type int dword_65AC0364[4];
// 65AC0374: using guessed type int dword_65AC0374[4];

//----- (658BB000) --------------------------------------------------------
int *__thiscall FXPool_AllocLargeFX(int *this, int a2, int a3)
{
  int *v4; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  float *v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (v4 = (int *)*(this + 1)) == 0 || sub_658B63A0(v4, 31) )
    {
LABEL_10:
      result = FXList1_AllocNode(this);
      v4 = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    v4 = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( sub_658B6380(v4) )
    {
      v4 = (int *)sub_658B63E0(v4);
      if ( !v4 )
        goto LABEL_10;
    }
  }
  if ( !v4 )
    goto LABEL_10;
LABEL_11:
  v6 = FXPool1_AllocSlot(v4, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = (float *)std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(1460, this, v6);
  if ( v8 )
    CharacterModel2_Ctor(v8);
  return (int *)v7;
}
// 658B63F0: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (658BB100) --------------------------------------------------------
int *__thiscall FXPool_AllocMediumFX(int *this, int a2, int a3)
{
  int *v4; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  float *v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (v4 = (int *)*(this + 1)) == 0 || sub_658B6440(v4, 31) )
    {
LABEL_10:
      result = FXList2_AllocNode(this);
      v4 = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    v4 = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( sub_658B6420(v4) )
    {
      v4 = (int *)sub_658B6480(v4);
      if ( !v4 )
        goto LABEL_10;
    }
  }
  if ( !v4 )
    goto LABEL_10;
LABEL_11:
  v6 = FXPool2_AllocSlot(v4, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = (float *)std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(464, this, v6);
  if ( v8 )
    sub_6589D200(v8);
  return (int *)v7;
}
// 658B6490: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (658BB200) --------------------------------------------------------
int *__thiscall FXPool_AllocSmallFX(int *this, int a2, int a3)
{
  int *v4; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  float *v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (v4 = (int *)*(this + 1)) == 0 || sub_658B64E0(v4, 31) )
    {
LABEL_10:
      result = FXList3_AllocNode(this);
      v4 = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    v4 = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( sub_658B64C0(v4) )
    {
      v4 = (int *)sub_658B6520(v4);
      if ( !v4 )
        goto LABEL_10;
    }
  }
  if ( !v4 )
    goto LABEL_10;
LABEL_11:
  v6 = FXPool3_AllocSlot(v4, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = (float *)std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(140, this, v6);
  if ( v8 )
    ParticleFX_Ctor(v8);
  return (int *)v7;
}
// 658B6530: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (658BB2B0) --------------------------------------------------------
int *__thiscall FXPool_AllocBaseFX(int *this, int a2, int a3)
{
  int *v4; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  float *v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (v4 = (int *)*(this + 1)) == 0 || sub_658B6580(v4, 31) )
    {
LABEL_10:
      result = FXList4_AllocNode(this);
      v4 = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    v4 = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( sub_658B6560(v4) )
    {
      v4 = (int *)sub_658B65C0(v4);
      if ( !v4 )
        goto LABEL_10;
    }
  }
  if ( !v4 )
    goto LABEL_10;
LABEL_11:
  v6 = FXPool4_AllocSlot(v4, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = (float *)std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(140, this, v6);
  if ( v8 )
    BeamFX_Ctor(v8);
  return (int *)v7;
}
// 658B65D0: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (658BB3B0) --------------------------------------------------------
int *__thiscall FXPool_AllocServerMenuFX(int *this, int a2, int a3)
{
  int *v4; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  float *v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (v4 = (int *)*(this + 1)) == 0 || sub_658B6620(v4, 31) )
    {
LABEL_10:
      result = FXList5_AllocNode(this);
      v4 = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    v4 = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( sub_658B6600(v4) )
    {
      v4 = (int *)sub_658B6660(v4);
      if ( !v4 )
        goto LABEL_10;
    }
  }
  if ( !v4 )
    goto LABEL_10;
LABEL_11:
  v6 = FXPool5_AllocSlot(v4, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = (float *)std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(280, this, v6);
  if ( v8 )
    ServerMenuMgr_Ctor(v8);
  return (int *)v7;
}
// 658B6670: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (658BB4B0) --------------------------------------------------------
int *__thiscall WeaponPool_GetOrCreateType6(int *this, int a2, int a3)
{
  int *Next; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  float *v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (Next = (int *)*(this + 1)) == 0 || SoundPool1_HasBit(Next, 31) )
    {
LABEL_10:
      result = SoundList1_AllocNode(this);
      Next = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    Next = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( sub_658B66A0(Next) )
    {
      Next = (int *)SoundPool1_GetNext(Next);
      if ( !Next )
        goto LABEL_10;
    }
  }
  if ( !Next )
    goto LABEL_10;
LABEL_11:
  v6 = SoundPool1_AllocSlot(Next, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = (float *)std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(112, this, v6);
  if ( v8 )
    LightInstance_Ctor(v8);
  return (int *)v7;
}
// 658B6710: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (658BB560) --------------------------------------------------------
int *__thiscall WeaponPool_GetOrCreateType7(int *this, int a2, int a3)
{
  int *Next; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  float *v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (Next = (int *)*(this + 1)) == 0 || SoundPool2_HasBit(Next, 31) )
    {
LABEL_10:
      result = SoundList2_AllocNode(this);
      Next = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    Next = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( SoundPool1_IsEmpty(Next) )
    {
      Next = (int *)SoundPool2_GetNext(Next);
      if ( !Next )
        goto LABEL_10;
    }
  }
  if ( !Next )
    goto LABEL_10;
LABEL_11:
  v6 = SoundPool2_AllocSlot(Next, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = (float *)std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(996, this, v6);
  if ( v8 )
    LightFX_Ctor(v8);
  return (int *)v7;
}
// 658B67B0: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (658BB660) --------------------------------------------------------
int *__thiscall WeaponPool_GetOrCreateType8(int *this, int a2, int a3)
{
  int *Next; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  float *v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (Next = (int *)*(this + 1)) == 0 || SoundPool3_HasBit(Next, 31) )
    {
LABEL_10:
      result = SoundList3_AllocNode(this);
      Next = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    Next = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( SoundPool2_IsEmpty(Next) )
    {
      Next = (int *)SoundPool3_GetNext(Next);
      if ( !Next )
        goto LABEL_10;
    }
  }
  if ( !Next )
    goto LABEL_10;
LABEL_11:
  v6 = SoundPool3_AllocSlot(Next, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = (float *)std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(488, this, v6);
  if ( v8 )
    SkyFX_Ctor(v8);
  return (int *)v7;
}
// 658B6850: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (658BB760) --------------------------------------------------------
int *__thiscall WeaponPool_GetOrCreateType9(int *this, int a2, int a3)
{
  int *Next; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  float *v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (Next = (int *)*(this + 1)) == 0 || SoundPool4_HasBit(Next, 31) )
    {
LABEL_10:
      result = SoundList4_AllocNode(this);
      Next = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    Next = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( SoundPool3_IsEmpty(Next) )
    {
      Next = (int *)SoundPool4_GetNext(Next);
      if ( !Next )
        goto LABEL_10;
    }
  }
  if ( !Next )
    goto LABEL_10;
LABEL_11:
  v6 = SoundPool4_AllocSlot(Next, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = (float *)std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(180, this, v6);
  if ( v8 )
    sub_658B5910(v8);
  return (int *)v7;
}
// 658B68F0: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (658BB860) --------------------------------------------------------
int *__thiscall WeaponPool_GetOrCreateType10(int *this, int a2, int a3)
{
  int *Next; // esi
  int *result; // eax
  int v6; // eax
  int v7; // esi
  char *v8; // eax

  if ( a2 )
  {
    if ( a2 != 1 || (Next = (int *)*(this + 1)) == 0 || SoundPool5_HasBit(Next, 31) )
    {
LABEL_10:
      result = SoundList5_AllocNode(this);
      Next = result;
      if ( !result )
        return result;
      goto LABEL_11;
    }
  }
  else
  {
    Next = (int *)*this;
    if ( !*this )
      goto LABEL_10;
    while ( SoundPool4_IsEmpty(Next) )
    {
      Next = (int *)SoundPool5_GetNext(Next);
      if ( !Next )
        goto LABEL_10;
    }
  }
  if ( !Next )
    goto LABEL_10;
LABEL_11:
  v6 = SoundPool5_AllocSlot(Next, a2);
  v7 = v6;
  if ( v6 )
    ++*(this + 3);
  v8 = (char *)std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(160, this, v6);
  if ( v8 )
    FXBase_Ctor(v8);
  return (int *)v7;
}
// 658B6990: using guessed type int __cdecl std::_Unchecked<std::_Vector_val<std::_Simple_types<void *>>>(_DWORD, _DWORD, _DWORD);

//----- (658BB950) --------------------------------------------------------
int *__thiscall WeaponFactory_CreateByType(void *this, unsigned __int8 a2, int a3, int a4, int a5)
{
  int *Type6; // eax
  int *v6; // esi
  int v7; // eax

  switch ( a2 )
  {
    case 1u:
      Type6 = FXPool_AllocLargeFX(dword_65AC02E4, 0, 1);
      goto LABEL_12;
    case 2u:
      Type6 = FXPool_AllocMediumFX(dword_65AC02F4, 0, 1);
      goto LABEL_12;
    case 3u:
      Type6 = FXPool_AllocSmallFX(dword_65AC0304, 0, 1);
      goto LABEL_12;
    case 4u:
      Type6 = FXPool_AllocBaseFX(dword_65AC0314, 0, 1);
      goto LABEL_12;
    case 5u:
      Type6 = FXPool_AllocServerMenuFX(dword_65AC0324, 0, 1);
      goto LABEL_12;
    case 6u:
      Type6 = WeaponPool_GetOrCreateType6(dword_65AC0334, 0, 1);
      goto LABEL_12;
    case 7u:
      Type6 = WeaponPool_GetOrCreateType7(dword_65AC0344, 0, 1);
      goto LABEL_12;
    case 8u:
      Type6 = WeaponPool_GetOrCreateType8(dword_65AC0354, 0, 1);
      goto LABEL_12;
    case 9u:
      Type6 = WeaponPool_GetOrCreateType9(dword_65AC0364, 0, 1);
      goto LABEL_12;
    case 0xAu:
      Type6 = WeaponPool_GetOrCreateType10(dword_65AC0374, 0, 1);
LABEL_12:
      v6 = Type6;
      if ( !Type6 )
        return 0;
      if ( a3 )
      {
        v7 = (*(int (__thiscall **)(int *, int))(*Type6 + 12))(Type6, a3);
      }
      else
      {
        if ( !a4 )
          goto LABEL_16;
        v7 = (*(int (__thiscall **)(int *, int, int))(*Type6 + 16))(Type6, a5, a4);
      }
      if ( v7
        && (*(int (__thiscall **)(int *, int))(*v6 + 8))(v6, g_pILTClient)
        && SoundPool_CheckTypeValid((int)v6, a2) )
      {
        return v6;
      }
LABEL_16:
      FXMgr_ReturnToPool((int (__thiscall ***)(_DWORD, int))v6);
      return 0;
    default:
      return 0;
  }
}
// 65AC02E4: using guessed type int dword_65AC02E4[4];
// 65AC02F4: using guessed type int dword_65AC02F4[4];
// 65AC0304: using guessed type int dword_65AC0304[4];
// 65AC0314: using guessed type int dword_65AC0314[4];
// 65AC0324: using guessed type int dword_65AC0324[4];
// 65AC0334: using guessed type int dword_65AC0334[4];
// 65AC0344: using guessed type int dword_65AC0344[4];
// 65AC0354: using guessed type int dword_65AC0354[4];
// 65AC0364: using guessed type int dword_65AC0364[4];
// 65AC0374: using guessed type int dword_65AC0374[4];

//----- (658BBAE0) --------------------------------------------------------
void __thiscall Msg2_PreDispatch(void *this, int a2, int *a3)
{
  void (__thiscall *v4)(int *, float *, int); // edx
  int v5; // eax
  int (__thiscall *v6)(int *, int); // edx
  unsigned __int16 v7; // ax
  unsigned __int16 v8; // ax
  int v9; // ecx
  unsigned __int16 (__thiscall *v10)(int *, int); // eax
  int v11; // ecx
  unsigned __int16 (__thiscall *v12)(int *, int); // eax
  int v13; // ecx
  int (__thiscall *v14)(int *, int); // eax
  int v15; // eax
  int v16; // edx
  int v17; // eax
  int v18; // edx
  int v19; // eax
  int v20; // edx
  int v21; // eax
  int v22; // edx
  int v23; // eax
  int v24; // edx
  int v25; // eax
  int v26; // edx
  char v27; // al
  int v28; // edx
  char v29; // al
  int v30; // edx
  char v31; // al
  int v32; // edx
  char v33; // al
  int v34; // edx
  char v35; // al
  int v36; // edx
  unsigned int i; // edi
  int v38; // eax
  int v39; // edx
  __int16 v40; // ax
  int v41; // edx
  __int16 v42; // ax
  int v43; // edx
  __int16 v44; // ax
  int v45; // edx
  __int16 v46; // ax
  int v47; // edx
  int *v48; // eax
  void (__thiscall *v49)(int *, float *, int); // edx
  int v50; // eax
  int (__thiscall *v51)(int *, int); // edx
  float v52[3]; // [esp+10h] [ebp-2CCh] BYREF
  float v53[3]; // [esp+1Ch] [ebp-2C0h] BYREF
  int v54; // [esp+28h] [ebp-2B4h]
  _DWORD v55[5]; // [esp+2Ch] [ebp-2B0h] BYREF
  float v56[3]; // [esp+40h] [ebp-29Ch] BYREF
  float v57[13]; // [esp+4Ch] [ebp-290h] BYREF
  _BYTE v58[28]; // [esp+80h] [ebp-25Ch] BYREF
  _BYTE v59[28]; // [esp+9Ch] [ebp-240h] BYREF
  float Float; // [esp+B8h] [ebp-224h]
  int v61; // [esp+BCh] [ebp-220h]
  int v62; // [esp+C0h] [ebp-21Ch]
  int v63; // [esp+C4h] [ebp-218h]
  char v64; // [esp+C8h] [ebp-214h]
  char v65; // [esp+C9h] [ebp-213h]
  char v66; // [esp+CAh] [ebp-212h]
  char v67; // [esp+CBh] [ebp-211h]
  char v68; // [esp+CCh] [ebp-210h]
  BOOL v69; // [esp+D0h] [ebp-20Ch]
  BOOL v70; // [esp+D4h] [ebp-208h]
  BOOL v71; // [esp+D8h] [ebp-204h]
  BOOL v72; // [esp+DCh] [ebp-200h]
  BOOL v73; // [esp+E0h] [ebp-1FCh]
  BOOL v74; // [esp+E4h] [ebp-1F8h]
  _BYTE v75[28]; // [esp+E8h] [ebp-1F4h] BYREF
  float v76; // [esp+104h] [ebp-1D8h]
  float v77; // [esp+108h] [ebp-1D4h]
  float v78; // [esp+10Ch] [ebp-1D0h]
  float v79; // [esp+110h] [ebp-1CCh]
  float v80; // [esp+114h] [ebp-1C8h]
  char v81; // [esp+118h] [ebp-1C4h]
  _WORD v82[29]; // [esp+11Ah] [ebp-1C2h]
  int v83; // [esp+154h] [ebp-188h]
  int v84; // [esp+158h] [ebp-184h] BYREF
  _DWORD v85[5]; // [esp+15Ch] [ebp-180h] BYREF
  _DWORD v86[7]; // [esp+170h] [ebp-16Ch] BYREF
  float v87[15]; // [esp+18Ch] [ebp-150h] BYREF
  bool v88; // [esp+1C8h] [ebp-114h]
  _BYTE v89[256]; // [esp+1CCh] [ebp-110h] BYREF
  int v90; // [esp+2D8h] [ebp-4h]

  LOBYTE(v54) = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 8);
  switch ( (char)v54 )
  {
    case 2:
    case 3:
    case 5:
    case 6:
      WeaponFactory_CreateByType(this, v54, 0, (int)a3, a2);
      break;
    case 4:
      WeaponBaseState_Ctor(v86);
      v90 = 0;
      BitStream_ReadStruct92((int)v86, a3);
      WeaponFactory_CreateByType(this, v54, (int)v86, 0, 0);
      break;
    case 7:
      WeaponInstance_Ctor((char *)v55);
      v4 = *(void (__thiscall **)(int *, float *, int))(*a3 + 68);
      v90 = 1;
      v55[1] = a2;
      v4(a3, v52, 96);
      v5 = *a3;
      *(float *)&v55[2] = v52[0];
      v6 = *(int (__thiscall **)(int *, int))(v5 + 60);
      *(float *)&v55[3] = v52[1];
      *(float *)&v55[4] = v52[2];
      v7 = v6(a3, 16);
      Color565_ToRGB(v7, v56);
      v8 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 16);
      Color565_ToRGB(v8, v57);
      v57[3] = Msg_ReadFloat(a3);
      v57[4] = Msg_ReadFloat(a3);
      v57[5] = Msg_ReadFloat(a3);
      v57[6] = Msg_ReadFloat(a3);
      v57[7] = Msg_ReadFloat(a3);
      v57[8] = Msg_ReadFloat(a3);
      v57[9] = Msg_ReadFloat(a3);
      v57[10] = Msg_ReadFloat(a3);
      Float = Msg_ReadFloat(a3);
      v77 = Msg_ReadFloat(a3);
      v76 = Msg_ReadFloat(a3);
      v78 = Msg_ReadFloat(a3);
      v79 = Msg_ReadFloat(a3);
      v80 = Msg_ReadFloat(a3);
      v57[11] = Msg_ReadFloat(a3);
      v57[12] = Msg_ReadFloat(a3);
      (*(void (__thiscall **)(int *, _BYTE *, int))(*a3 + 76))(a3, v89, 256);
      std::string::operator=(v58, v89);
      (*(void (__thiscall **)(int *, _BYTE *, int))(*a3 + 76))(a3, v89, 256);
      std::string::operator=(v59, v89);
      (*(void (__thiscall **)(int *, _BYTE *, int))(*a3 + 76))(a3, v89, 256);
      std::string::operator=(v75, v89);
      v9 = (*(unsigned __int16 (__thiscall **)(int *, int))(*a3 + 60))(a3, 16);
      v10 = *(unsigned __int16 (__thiscall **)(int *, int))(*a3 + 60);
      v61 = v9;
      v11 = v10(a3, 16);
      v12 = *(unsigned __int16 (__thiscall **)(int *, int))(*a3 + 60);
      v62 = v11;
      v13 = v12(a3, 16);
      v14 = *(int (__thiscall **)(int *, int))(*a3 + 60);
      v63 = v13;
      v15 = v14(a3, 1);
      v16 = *a3;
      v69 = v15 != 0;
      v17 = (*(int (__thiscall **)(int *, int))(v16 + 60))(a3, 1);
      v18 = *a3;
      v70 = v17 != 0;
      v19 = (*(int (__thiscall **)(int *, int))(v18 + 60))(a3, 1);
      v20 = *a3;
      v71 = v19 != 0;
      v21 = (*(int (__thiscall **)(int *, int))(v20 + 60))(a3, 1);
      v22 = *a3;
      v72 = v21 != 0;
      v23 = (*(int (__thiscall **)(int *, int))(v22 + 60))(a3, 1);
      v24 = *a3;
      v73 = v23 != 0;
      v25 = (*(int (__thiscall **)(int *, int))(v24 + 60))(a3, 1);
      v26 = *a3;
      v74 = v25 != 0;
      v27 = (*(int (__thiscall **)(int *, int))(v26 + 60))(a3, 8);
      v28 = *a3;
      v64 = v27;
      v29 = (*(int (__thiscall **)(int *, int))(v28 + 60))(a3, 8);
      v30 = *a3;
      v65 = v29;
      v31 = (*(int (__thiscall **)(int *, int))(v30 + 60))(a3, 8);
      v32 = *a3;
      v66 = v31;
      v33 = (*(int (__thiscall **)(int *, int))(v32 + 60))(a3, 8);
      v34 = *a3;
      v67 = v33;
      v35 = (*(int (__thiscall **)(int *, int))(v34 + 60))(a3, 8);
      v36 = *a3;
      v68 = v35;
      v81 = (*(int (__thiscall **)(int *, int))(v36 + 60))(a3, 8);
      for ( i = 0; i < 4; ++i )
      {
        v38 = (*(int (__thiscall **)(int *, int))(*a3 + 60))(a3, 32);
        v39 = *a3;
        *(_DWORD *)&v82[2 * i + 21] = v38;
        v40 = (*(int (__thiscall **)(int *, int))(v39 + 60))(a3, 16);
        v41 = *a3;
        v82[i + 16] = v40;
        v42 = (*(int (__thiscall **)(int *, int))(v41 + 60))(a3, 16);
        v43 = *a3;
        v82[i] = v42;
        v44 = (*(int (__thiscall **)(int *, int))(v43 + 60))(a3, 16);
        v45 = *a3;
        v82[i + 4] = v44;
        v46 = (*(int (__thiscall **)(int *, int))(v45 + 60))(a3, 16);
        v47 = *a3;
        v82[i + 8] = v46;
        v82[i + 12] = (*(int (__thiscall **)(int *, int))(v47 + 60))(a3, 16);
      }
      v83 = (*(int (__thiscall **)(int *))(*a3 + 100))(a3);
      WeaponFactory_CreateByType(this, v54, (int)v55, 0, 0);
      v90 = -1;
      WeaponInstance_Dtor(v55);
      break;
    case 8:
      WeaponMeleeState_Ctor(&v84);
      v90 = 2;
      BitStream_ReadStruct116((int)&v84, a3);
      v48 = &v84;
      goto LABEL_10;
    case 9:
      WeaponRecoilData_Ctor(v87);
      v49 = *(void (__thiscall **)(int *, float *, int))(*a3 + 68);
      v90 = 3;
      LODWORD(v87[1]) = a2;
      v49(a3, v53, 96);
      v50 = *a3;
      v87[2] = v53[0];
      v51 = *(int (__thiscall **)(int *, int))(v50 + 60);
      v87[3] = v53[1];
      v87[4] = v53[2];
      LODWORD(v87[5]) = v51(a3, 32);
      v87[6] = Msg_ReadFloat(a3);
      v87[7] = Msg_ReadFloat(a3);
      v87[8] = Msg_ReadFloat(a3);
      v87[9] = Msg_ReadFloat(a3);
      v87[10] = Msg_ReadFloat(a3);
      v87[11] = Msg_ReadFloat(a3);
      v87[12] = Msg_ReadFloat(a3);
      v87[13] = Msg_ReadFloat(a3);
      LODWORD(v87[14]) = (*(int (__thiscall **)(int *))(*a3 + 80))(a3);
      v88 = (*(unsigned __int8 (__thiscall **)(int *, int))(*a3 + 60))(a3, 8) != 0;
      WeaponFactory_CreateByType(this, v54, (int)v87, 0, 0);
      break;
    case 10:
      WeaponRangedState_Ctor(v85);
      v90 = 4;
      PacketData_ReadPlayerStruct((int)v85, a2, a3);
      v48 = v85;
LABEL_10:
      WeaponFactory_CreateByType(this, v54, (int)v48, 0, 0);
      break;
    default:
      return;
  }
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (658BC170) --------------------------------------------------------
int __thiscall ShaderMgr_QueryShaderVersion(void *this)
{
  bool v1; // zf
  void (__cdecl *v2)(int, const char *); // edx
  void (__cdecl *v3)(int, const char *); // edx
  void (__cdecl *v4)(int, const char *); // edx
  void (__cdecl *v5)(int, const char *); // edx
  void (__cdecl *v6)(int, const char *); // edx
  void (__cdecl *v7)(int, const char *); // edx
  void (__cdecl *v8)(int, const char *); // edx
  void (__cdecl *v9)(int, const char *); // edx
  void (__stdcall *v10)(int, const char *); // edx
  unsigned int v12; // [esp+0h] [ebp-8h] BYREF
  unsigned int v13; // [esp+4h] [ebp-4h]

  v12 = 0;
  v13 = 0;
  v1 = (*(int (__cdecl **)(unsigned int *))(g_pILTClient + 788))(&v12) == 0;
  v2 = *(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28);
  if ( v1 )
  {
    v2(g_pILTClient, word_659C0C8C);
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "QueryGraphicDevice:");
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "-------------------------------------");
    v3 = *(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28);
    if ( v13 >= 0xFFFF0100 )
    {
      v3(g_pILTClient, "Graphic device supports Pixel Shader version 1.0 or greater.");
      dword_65AC0384 = 1;
    }
    else
    {
      v3(g_pILTClient, "Warning: Pixel Shader version less than 1.0!");
    }
    v4 = *(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28);
    if ( v13 >= 0xFFFF0101 )
    {
      v4(g_pILTClient, "Graphic device supports Pixel Shader version 1.1 or greater.");
      dword_65AC0384 = 1;
      dword_65AC0388 = 1;
    }
    else
    {
      v4(g_pILTClient, "Warning: Pixel Shader version less than 1.1!");
    }
    v5 = *(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28);
    if ( v13 >= 0xFFFF0200 )
    {
      v5(g_pILTClient, "Graphic device supports Pixel Shader version 2.0 or greater.");
      dword_65AC0384 = 2;
    }
    else
    {
      v5(g_pILTClient, "Warning: Pixel Shader version less than 2.0!");
    }
    v6 = *(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28);
    if ( v13 >= 0xFFFF0300 )
    {
      v6(g_pILTClient, "Graphic device supports Pixel Shader version 3.0 or greater.");
      dword_65AC0384 = 3;
    }
    else
    {
      v6(g_pILTClient, "Warning: Pixel Shader version less than 3.0!");
    }
    v7 = *(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28);
    if ( v12 >= 0xFFFE0100 )
      v7(g_pILTClient, "Graphic device supports Vertex Shader version 1.0 or greater.");
    else
      v7(g_pILTClient, "Warning: Vertex Shader version less than 1.0!");
    v8 = *(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28);
    if ( v12 >= 0xFFFE0101 )
    {
      v8(g_pILTClient, "Graphic device supports Vertex Shader version 1.1 or greater.");
      dword_65AC038C = 1;
      dword_65AC0390 = 1;
    }
    else
    {
      v8(g_pILTClient, "Warning: Vertex Shader version less than 1.1!");
    }
    v9 = *(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28);
    if ( v12 >= 0xFFFE0200 )
    {
      v9(g_pILTClient, "Graphic device supports Vertex Shader version 2.0 or greater.");
      dword_65AC038C = 2;
    }
    else
    {
      v9(g_pILTClient, "Warning: Vertex Shader version less than 2.0!");
    }
    v10 = *(void (__stdcall **)(int, const char *))(*(_DWORD *)g_pILTClient + 28);
    if ( v12 >= 0xFFFE0300 )
    {
      v10(g_pILTClient, "Graphic device supports Vertex Shader version 3.0 or greater.");
      dword_65AC038C = 3;
    }
    else
    {
      v10(g_pILTClient, "Warning: Vertex Shader version less than 3.0!");
    }
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "-------------------------------------");
    return 0;
  }
  else
  {
    v2(g_pILTClient, "Error: Could not query the device caps!");
    return 1;
  }
}
// 65AC0384: using guessed type int dword_65AC0384;
// 65AC0388: using guessed type int dword_65AC0388;
// 65AC038C: using guessed type int dword_65AC038C;
// 65AC0390: using guessed type int dword_65AC0390;

//----- (658BC390) --------------------------------------------------------
int __stdcall ShaderMgr_LoadShader(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // edi
  void (*v6)(int, const char *, ...); // edx
  int v7; // esi
  _BYTE v9[132]; // [esp+Ch] [ebp-88h] BYREF

  v5 = (*(int (__thiscall **)(int, int, int, int, int, int))(*(_DWORD *)dword_65A5AA54 + 12))(
         dword_65A5AA54,
         a1,
         a2,
         a3,
         a4,
         a5);
  v6 = *(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28);
  if ( v5 )
  {
    v6(g_pILTClient, "(*!!!*) Effect Shader %s failed to load!!!", a1);
  }
  else
  {
    v6(g_pILTClient, "Effect Shader %s is good...", a1);
    v7 = (*(int (__thiscall **)(int, int))(*(_DWORD *)dword_65A5AA54 + 16))(dword_65A5AA54, a2);
    if ( v7 )
    {
      if ( !(*(int (__thiscall **)(int, _BYTE *))(*(_DWORD *)v7 + 52))(v7, v9) )
      {
        (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
          g_pILTClient,
          "    Found valid technique: %s",
          v9);
        if ( !(*(int (__thiscall **)(int, _BYTE *))(*(_DWORD *)v7 + 44))(v7, v9) )
          (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
            g_pILTClient,
            "    Using technique: %s",
            v9);
      }
    }
  }
  return v5;
}
// 65A5AA54: using guessed type int dword_65A5AA54;

//----- (658BC480) --------------------------------------------------------
int __stdcall ShaderMgr_LoadShaderFallback(int a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // edi
  void (*v7)(int, const char *, ...); // edx
  int v8; // eax

  v6 = (*(int (__thiscall **)(int, int, int, int, int, int))(*(_DWORD *)dword_65A5AA54 + 12))(
         dword_65A5AA54,
         a1,
         a3,
         a4,
         a5,
         a6);
  v7 = *(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28);
  if ( v6 )
  {
    v7(g_pILTClient, "(*!!!*) Effect Shader %s failed to load!!!", a1);
  }
  else
  {
    v7(g_pILTClient, "Effect Shader %s is good...", a1);
    v8 = (*(int (__thiscall **)(int, int))(*(_DWORD *)dword_65A5AA54 + 16))(dword_65A5AA54, a3);
    if ( v8 && !(*(int (__thiscall **)(int, int))(*(_DWORD *)v8 + 44))(v8, a2) )
    {
      (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "    Using technique: %s", a2);
      return 0;
    }
  }
  return v6;
}
// 65A5AA54: using guessed type int dword_65A5AA54;

//----- (658BC520) --------------------------------------------------------
int __thiscall ScreenEffect_GetSaturation(int *this, float a2)
{
  int result; // eax
  int v4; // esi

  result = IndexArray_GetElement(dword_65ABF6FC, *((_DWORD *)dword_65ABF700 + 1));
  *this = result;
  if ( LOBYTE(a2) )
  {
    result = (*(int (__thiscall **)(int, int))(*(_DWORD *)dword_65A5AA54 + 16))(dword_65A5AA54, 50);
    v4 = result;
    if ( result )
    {
      result = (*(int (__cdecl **)(const char *))(g_pILTClient + 248))("saturate");
      if ( result )
      {
        ((double (__thiscall *)(int, int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 92))(g_pILTClient, result);
        return (*(int (__stdcall **)(const char *))(*(_DWORD *)v4 + 8))("fSaturate");
      }
    }
  }
  return result;
}
// 65A5AA54: using guessed type int dword_65A5AA54;

//----- (658BC5B0) --------------------------------------------------------
char __thiscall ScreenEffect_SetEnabled(int this)
{
  bool v1; // zf
  char result; // al

  v1 = *(_DWORD *)(this + 8) == 0;
  result = 1;
  *(_BYTE *)(this + 19) = 1;
  *(_BYTE *)(this + 18) = 1;
  if ( v1 )
    JUMPOUT(0x65717030);
  return result;
}
// 658BC5C4: control flows out of bounds to 65717030

//----- (658BC600) --------------------------------------------------------
int __thiscall ShaderMgr_InitializeShaders(int *this)
{
  bool v2; // zf
  void (__cdecl *v3)(int, const char *, int); // edx

  (*(void (__thiscall **)(int))(*(_DWORD *)dword_65A5AA54 + 4))(dword_65A5AA54);
  *(this + 3) = (*(int (__thiscall **)(int))(*(_DWORD *)g_pILTClient + 196))(g_pILTClient);
  v2 = (*(int (__thiscall **)(int, int))(*(_DWORD *)dword_65A5AA54 + 20))(dword_65A5AA54, 1) == 0;
  v3 = *(void (__cdecl **)(int, const char *, int))(*(_DWORD *)g_pILTClient + 28);
  if ( v2 )
    v3(g_pILTClient, "SUCCESS: Effect Pool %d Created!", 1);
  else
    v3(g_pILTClient, "FAILURE: Effect Pool %d Creation Failed!", 1);
  ShaderMgr_LoadShader((int)"Shaders\\World\\BumpReflect.fx", 24, (int)&unk_65A55C38, 56, -1);
  ShaderMgr_LoadShader((int)"Shaders\\World\\ParallaxMap.fx", 25, (int)&unk_65A55C38, 56, 1);
  if ( LTClient_SendMessage((int)"UseRefractFallback", 0) )
    ShaderMgr_LoadShaderFallback((int)"Shaders\\World\\refract.fx", (int)"Fallback", 26, (int)&unk_65A55C38, 56, 1);
  else
    ShaderMgr_LoadShader((int)"Shaders\\World\\refract.fx", 26, (int)&unk_65A55C38, 56, 1);
  if ( LTClient_SendMessage((int)"UsePlasmaFallback", 0) )
    ShaderMgr_LoadShaderFallback((int)"Shaders\\World\\PlasmaField.fx", (int)"Fallback", 27, (int)&unk_65A55C38, 56, 1);
  else
    ShaderMgr_LoadShader((int)"Shaders\\World\\PlasmaField.fx", 27, (int)&unk_65A55C38, 56, 1);
  if ( LTClient_SendMessage((int)"UseWaterFallback", 0) )
    ShaderMgr_LoadShaderFallback((int)"Shaders\\World\\Water.fx", (int)"Fallback", 28, (int)&unk_65A55C38, 56, 1);
  else
    ShaderMgr_LoadShader((int)"Shaders\\World\\Water.fx", 28, (int)&unk_65A55C38, 56, 1);
  if ( LTClient_SendMessage((int)"UsePlasmaRigidFallback", 0) )
    ShaderMgr_LoadShaderFallback(
      (int)"Shaders\\Models\\PlasmaFieldRigid.fx",
      (int)"Fallback",
      51,
      (int)&unk_65A55C90,
      48,
      1);
  else
    ShaderMgr_LoadShader((int)"Shaders\\Models\\PlasmaFieldRigid.fx", 51, (int)&unk_65A55C90, 48, 1);
  ShaderMgr_LoadShader((int)"Shaders\\Models\\rigid_parallax.fx", 36, (int)&unk_65A55C90, 48, 1);
  ShaderMgr_LoadShader((int)"Shaders\\Models\\skel_3weights_parallax.fx", 37, (int)&unk_65A55CE8, 56, 1);
  if ( LTClient_SendMessage((int)"UseRefractPGFallback", 0) )
    ShaderMgr_LoadShaderFallback(
      (int)"Shaders\\PolyGrid\\refract_pg.fx",
      (int)"Fallback",
      34,
      (int)&unk_65A55DD0,
      56,
      1);
  else
    ShaderMgr_LoadShader((int)"Shaders\\PolyGrid\\refract_pg.fx", 34, (int)&unk_65A55DD0, 56, 1);
  if ( LTClient_SendMessage((int)"UseRefractSprFallback", 0) )
    ShaderMgr_LoadShaderFallback(
      (int)"Shaders\\Sprite\\refract_spr.fx",
      (int)"Fallback",
      35,
      (int)&unk_65A55E08,
      32,
      -1);
  else
    ShaderMgr_LoadShader((int)"Shaders\\Sprite\\refract_spr.fx", 35, (int)&unk_65A55E08, 32, -1);
  ShaderMgr_LoadShader((int)"Shaders\\Global\\sharedglobals.fx", 50, 0, 0, 1);
  ShaderMgr_QueryShaderVersion(this);
  if ( (*(int (__thiscall **)(int, _DWORD, _DWORD, int, _DWORD, int))(*(_DWORD *)dword_65A5AA54 + 24))(
         dword_65A5AA54,
         *(_DWORD *)&Data,
         *(_DWORD *)&dword_65A55604,
         1,
         0,
         1) )
  {
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "Failed to create rendertarget");
    return 0;
  }
  else
  {
    *this = IndexArray_GetElement(dword_65ABF6FC, *((_DWORD *)dword_65ABF700 + 1));
    return 1;
  }
}
// 65A5AA54: using guessed type int dword_65A5AA54;

//----- (658BD9C0) --------------------------------------------------------
void SoundMgr_QueuePlaySound()
{
  JUMPOUT(0x65930370);
}
// 658BD9CA: control flows out of bounds to 65930370

//----- (658BD9E0) --------------------------------------------------------
int __stdcall SoundDef_SelectRandomSound(unsigned int __return_address)
{
  int *Entry; // eax
  int *v3; // edi
  int v4; // edx
  unsigned int v5; // esi
  unsigned int v6; // ecx
  int *v7; // eax
  double v8; // st7
  float *v9; // eax
  unsigned int v10; // edx
  double v11; // st7
  int v12; // eax
  unsigned int v13; // esi
  unsigned int v14; // ecx
  double v15; // st7
  float *i; // edx
  double v17; // st6
  double v18; // st6
  float v19; // [esp+0h] [ebp-4h]
  float v20; // [esp+Ch] [ebp+8h]
  float v21; // [esp+Ch] [ebp+8h]
  float v22; // [esp+Ch] [ebp+8h]
  float v23; // [esp+Ch] [ebp+8h]
  float v24; // [esp+Ch] [ebp+8h]

  if ( __return_address == -1 )
    return 0;
  Entry = SoundDefTable_GetEntry(__return_address);
  v3 = Entry;
  v4 = Entry[31];
  if ( !v4 )
    return 0;
  if ( v4 == 1 )
    return Entry[12];
  v5 = 0;
  v20 = 0.0;
  if ( v4 >= 4 )
  {
    v6 = ((unsigned int)(v4 - 4) >> 2) + 1;
    v7 = Entry + 13;
    v5 = 4 * v6;
    do
    {
      v8 = *((float *)v7 - 2);
      v7 += 8;
      --v6;
      v21 = v8 + v20;
      v22 = v21 + *((float *)v7 - 8);
      v23 = v22 + *((float *)v7 - 6);
      v20 = v23 + *((float *)v7 - 4);
    }
    while ( v6 );
  }
  if ( v5 < v4 )
  {
    v9 = (float *)&v3[2 * v5 + 11];
    v10 = v4 - v5;
    do
    {
      v11 = *v9;
      v9 += 2;
      --v10;
      v20 = v11 + v20;
    }
    while ( v10 );
  }
  v12 = Rand_InRangeOrNeg1((int)v20);
  v13 = v3[31];
  v14 = 0;
  v24 = 0.0;
  if ( !v13 )
    return v3[2 * v13 + 10];
  v19 = (float)v12;
  v15 = v19;
  for ( i = (float *)(v3 + 11); ; i += 2 )
  {
    v17 = v24;
    if ( v24 <= v15 && *i + v17 > v15 )
      break;
    v18 = v17 + *i;
    ++v14;
    v24 = v18;
    if ( v14 >= v13 )
      return v3[2 * v13 + 10];
  }
  return v3[2 * v14 + 12];
}
// 658BD9E0: could not find valid save-restore pair for esi

//----- (658BDB00) --------------------------------------------------------
int *__stdcall SoundDef_GetValidEntry(unsigned int a1)
{
  int *Entry; // eax

  if ( a1 == -1 )
    return 0;
  Entry = SoundDefTable_GetEntry(a1);
  return Entry[31] != 0 ? Entry : 0;
}

//----- (658BDB80) --------------------------------------------------------
void __thiscall SoundMgr_PlaySoundByIndex(void *this, unsigned int __saved_registers)
{
  int *Entry; // esi
  const char *v3; // eax
  char v4[296]; // [esp+14h] [ebp-14Ch] BYREF
  float v5; // [esp+13Ch] [ebp-24h]
  float v6; // [esp+140h] [ebp-20h]
  int v7; // [esp+144h] [ebp-1Ch]
  int v8; // [esp+148h] [ebp-18h]
  int v9; // [esp+14Ch] [ebp-14h]
  int v10; // [esp+150h] [ebp-10h]
  int v11; // [esp+154h] [ebp-Ch]
  int v12; // [esp+158h] [ebp-8h]

  Entry = SoundDefTable_GetEntry(__saved_registers);
  if ( *((float *)Entry + 6) >= 1.0 || *((float *)Entry + 6) >= Rand_FloatInRange(0.0, 1.0) )
  {
    v10 = 0;
    v11 = 0;
    v12 = 0;
    CameraEffects_Reset((float *)v4);
    v3 = (const char *)SoundDef_SelectRandomSound(__saved_registers);
    if ( v3 )
    {
      strncpy(v4, v3, 0x103u);
      v4[259] = 0;
      v9 = Entry[8];
      v5 = (double)*((unsigned __int8 *)Entry + 28) / 100.0;
      v6 = *((float *)Entry + 5);
      v8 = 1;
      v7 = Entry[9];
      SoundMgr_QueuePlaySound();
    }
  }
}

//----- (658BDC90) --------------------------------------------------------
void __thiscall SoundMgr_PlaySoundAtObject(void *this, int a2, char *Source, float a4, int a5)
{
  char Destination[260]; // [esp+10h] [ebp-14Ch] BYREF
  _BYTE v6[28]; // [esp+114h] [ebp-48h] BYREF
  float v7; // [esp+130h] [ebp-2Ch]
  float v8; // [esp+134h] [ebp-28h]
  float v9; // [esp+138h] [ebp-24h]
  float v10; // [esp+13Ch] [ebp-20h]
  int v11; // [esp+148h] [ebp-14h]
  int v12; // [esp+14Ch] [ebp-10h]
  int v13; // [esp+150h] [ebp-Ch]
  int v14; // [esp+154h] [ebp-8h]

  if ( Source )
  {
    if ( a2 )
    {
      v12 = 0;
      v13 = 0;
      v14 = 0;
      CameraEffects_Reset((float *)Destination);
      strncpy(Destination, Source, 0x103u);
      v8 = a4;
      v11 = a5;
      v7 = a4 * 0.1000000014901161;
      Destination[259] = 0;
      v9 = 1.0;
      v10 = 1.0;
      (*(void (__thiscall **)(int, int, _BYTE *))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, a2, v6);
      SoundMgr_QueuePlaySound();
    }
  }
}

//----- (658BDD60) --------------------------------------------------------
void __stdcall SoundDef_PlayWithParams(int __saved_registers, int __return_address)
{
  const char *v2; // eax
  int v3; // ecx
  int v4; // eax
  char v5[4]; // [esp+1Ch] [ebp-14Ch] BYREF
  char v6; // [esp+11Fh] [ebp-49h]
  _BYTE v7[24]; // [esp+120h] [ebp-48h] BYREF
  int v8; // [esp+138h] [ebp-30h]
  float v9; // [esp+13Ch] [ebp-2Ch]
  float v10; // [esp+140h] [ebp-28h]
  float v11; // [esp+144h] [ebp-24h]
  float v12; // [esp+148h] [ebp-20h]
  float v13; // [esp+14Ch] [ebp-1Ch]
  int v14; // [esp+154h] [ebp-14h]
  int v15; // [esp+158h] [ebp-10h]
  int v16; // [esp+15Ch] [ebp-Ch]
  int v17; // [esp+160h] [ebp-8h]

  if ( __return_address
    && (*(float *)(__return_address + 24) >= 1.0 || *(float *)(__return_address + 24) >= Rand_FloatInRange(0.0, 1.0)) )
  {
    v15 = 0;
    v16 = 0;
    v17 = 0;
    CameraEffects_Reset((float *)v5);
    v2 = (const char *)SoundDef_SelectRandomSound(*(_DWORD *)__return_address);
    if ( v2 )
    {
      strncpy(v5, v2, 0x103u);
      v3 = *(unsigned __int8 *)(__return_address + 28);
      v10 = *(float *)(__return_address + 16);
      v9 = *(float *)(__return_address + 12);
      v4 = *(_DWORD *)(__return_address + 32);
      v6 = 0;
      v14 = v4;
      v11 = (double)v3 / 100.0;
      v12 = *(float *)(__return_address + 20);
      v13 = *(float *)(__return_address + 36);
      if ( LODWORD(v13) )
      {
        v8 = 0;
        (*(void (__thiscall **)(int, int, _BYTE *))(*(_DWORD *)g_pILTClient + 152))(g_pILTClient, __saved_registers, v7);
      }
      else
      {
        v8 = __saved_registers;
      }
      SoundMgr_QueuePlaySound();
    }
  }
}

//----- (658BDE90) --------------------------------------------------------
void __stdcall SoundMgr_PlaySoundAtPosition(float *a1, char *Source, float a3, int a4, char a5)
{
  char Destination[260]; // [esp+10h] [ebp-14Ch] BYREF
  float v6; // [esp+114h] [ebp-48h]
  float v7; // [esp+118h] [ebp-44h]
  float v8; // [esp+11Ch] [ebp-40h]
  float v9; // [esp+130h] [ebp-2Ch]
  float v10; // [esp+134h] [ebp-28h]
  float v11; // [esp+138h] [ebp-24h]
  float v12; // [esp+13Ch] [ebp-20h]
  int v13; // [esp+148h] [ebp-14h]
  int v14; // [esp+14Ch] [ebp-10h]
  int v15; // [esp+150h] [ebp-Ch]
  int v16; // [esp+154h] [ebp-8h]

  if ( Source )
  {
    v14 = 0;
    v15 = 0;
    v16 = 0;
    CameraEffects_Reset((float *)Destination);
    strncpy(Destination, Source, 0x103u);
    v9 = 0.1000000014901161 * a3;
    v13 = a4;
    v10 = a3;
    Destination[259] = 0;
    v11 = (double)(unsigned __int8)a5 / 100.0;
    v6 = *a1;
    v7 = a1[1];
    v8 = a1[2];
    v12 = 1.0;
    SoundMgr_QueuePlaySound();
  }
}

//----- (658BE160) --------------------------------------------------------
void __thiscall SoundMgr_PlaySoundBySoundDef(void *this, int a2, unsigned int a3)
{
  int *Entry; // eax

  if ( a2 )
  {
    Entry = SoundDefTable_GetEntry(a3);
    SoundDef_PlayWithParams(a2, (int)Entry);
  }
}

//----- (658BE1A0) --------------------------------------------------------
unsigned int __thiscall FXPool_InsertOrReplace(unsigned int *this, int a2)
{
  int v3; // edi
  unsigned int v4; // eax
  unsigned int v5; // ecx
  unsigned int result; // eax
  unsigned int v7; // edi
  unsigned int *v8; // edx
  unsigned int v9; // [esp+8h] [ebp-4h]

  v3 = 0;
  if ( !*this || !*(this + 1) )
    return 0;
  v4 = 0;
  if ( !*(this + 2) )
    goto LABEL_11;
  do
  {
    if ( *(_DWORD *)(*this + 4 * v4) )
    {
      ++*(_DWORD *)(*(this + 1) + 4 * v4);
    }
    else if ( !v3 )
    {
      *(_DWORD *)(*this + 4 * v4) = a2;
      *(_DWORD *)(*(this + 1) + 4 * v4) = 0;
      v3 = 1;
    }
    ++v4;
  }
  while ( v4 < *(this + 2) );
  if ( v3 )
  {
    ++*(this + 3);
    return 1;
  }
  else
  {
LABEL_11:
    v5 = *(this + 2);
    result = 0;
    if ( v5 )
    {
      v7 = 0;
      v9 = 0;
      v8 = (unsigned int *)*(this + 1);
      do
      {
        if ( *v8 > v9 )
        {
          v7 = result;
          v9 = *v8;
        }
        ++result;
        ++v8;
      }
      while ( result < v5 );
      FXMgr_ReturnToPool(*(int (__thiscall ****)(_DWORD, int))(*this + 4 * v7));
      *(_DWORD *)(*this + 4 * v7) = a2;
      *(_DWORD *)(*(this + 1) + 4 * v7) = 0;
      return 1;
    }
  }
  return result;
}
// 658BE1E6: conditional instruction was optimized away because edx.4==0

//----- (658BE270) --------------------------------------------------------
int __thiscall FXPool_FindAndRelease(_DWORD *this, int a2)
{
  _DWORD *v3; // ecx
  int v4; // edi
  _DWORD *i; // eax

  if ( !a2 )
    return 0;
  v3 = (_DWORD *)*this;
  if ( !*this )
    return 0;
  v4 = 0;
  if ( !*(this + 2) )
    return 0;
  for ( i = v3; *i != a2; ++i )
  {
    if ( (unsigned int)++v4 >= *(this + 2) )
      return 0;
  }
  FXMgr_ReturnToPool((int (__thiscall ***)(_DWORD, int))v3[v4]);
  *(_DWORD *)(*this + 4 * v4) = 0;
  *(_DWORD *)(*(this + 1) + 4 * v4) = 0;
  --*(this + 3);
  return 1;
}

//----- (658BE2E0) --------------------------------------------------------
void __cdecl ArrayDelete_Wrapper1(void *a1)
{
  operator delete[](a1);
}

//----- (658BE2F0) --------------------------------------------------------
void __cdecl ArrayDelete_Wrapper2(void *a1)
{
  operator delete[](a1);
}

//----- (658BE300) --------------------------------------------------------
void __thiscall WeaponArray_FreeAll(void **this)
{
  unsigned int v2; // edi

  if ( *this )
  {
    v2 = 0;
    if ( *(this + 2) )
    {
      do
      {
        if ( *((_DWORD *)*this + v2) )
          FXMgr_ReturnToPool(*((int (__thiscall ****)(_DWORD, int))*this + v2));
        ++v2;
      }
      while ( v2 < (unsigned int)*(this + 2) );
    }
    ArrayDelete_Wrapper1(*this);
    *this = 0;
  }
  if ( *(this + 1) )
  {
    ArrayDelete_Wrapper2(*(this + 1));
    *(this + 1) = 0;
  }
}

//----- (658BFAC0) --------------------------------------------------------
char TimeMgr_ResetSystemTime()
{
  struct _SYSTEMTIME SystemTime; // [esp+0h] [ebp-18h] BYREF
  struct _FILETIME SystemTimeAsFileTime; // [esp+10h] [ebp-8h] BYREF

  GetSystemTime(&SystemTime);
  GetSystemTimeAsFileTime(&SystemTimeAsFileTime);
  EncVarMgr_SetInt((_DWORD *)g_pEncVarMgr, 0xCu, 0);
  EncVarMgr_SetInt((_DWORD *)g_pEncVarMgr, 0xBu, 0);
  return EncVarMgr_SetFloat((_DWORD *)g_pEncVarMgr, 13, 0.0);
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658BFC00) --------------------------------------------------------
char AntiCheat_CheckVMware()
{
  char Str[260]; // [esp+1Ch] [ebp-120h] BYREF
  int v2; // [esp+138h] [ebp-4h]

  __indword(0x5658u);
  v2 = -2;
  strstr(Str, "C:\\InsideTm\\");
  __asm { vpcext  7, 0Bh }
  return 1;
}
// 658BFD3D: conditional instruction was optimized away because %var_121.1==0
// 658BFD46: conditional instruction was optimized away because %var_122.1==1

//----- (658BFD80) --------------------------------------------------------
LONG __thiscall PlayerStats_SetTargetAndRefresh(void *this, int a2, char a3)
{
  LONG result; // eax

  result = SharedMem_WriteDword_this(this, 0x90u, a2);
  if ( a3 )
    return LoadingScreen_Render(dword_65ABF754);
  return result;
}

//----- (658BFE00) --------------------------------------------------------
Packet_ID_WORLD_LOGIN *__thiscall Packet_ID_WORLD_LOGIN_Ctor(Packet_ID_WORLD_LOGIN *this)
{
  this->vftable = &vtbl_Packet_Unknown0;
  this->_pad0[4] = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)&this->_pad0[8]);
  *(_DWORD *)&this->_pad0[1052] = 0;
  *(_DWORD *)&this->_pad0[1056] = 0;
  this->worldInst = 0;
  this->playerId = 0;
  this->worldConst = 0;
  this->id = 114;
  this->vftable = &vtbl_Packet_ID_WORLD_LOGIN;
  this->worldId = -1;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659D03E4: using guessed type _UNKNOWN *vtbl_Packet_ID_WORLD_LOGIN;

//----- (658BFEE0) --------------------------------------------------------
char __stdcall StatGroup_SetStatGroup8(char a1)
{
  return StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 8, &a1);
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658BFFA0) --------------------------------------------------------
int __thiscall GameState_ShowTravelMessage(void *this)
{
  unsigned __int8 Dword_this; // al
  int v3; // eax
  int v4; // eax
  int v5; // esi
  const char *v6; // eax
  int result; // eax

  *((_BYTE *)dword_65ABF734 + 6) = 1;
  Dword_this = SharedMem_ReadDword_this(this, 0x1EEC1u);
  if ( Dword_this == 4 )
  {
    v3 = SharedMem_ReadDword_this(dword_65ABF73C, 0x78u);
    v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, v3 + 10500);
  }
  else
  {
    v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, Dword_this + 3100);
  }
  v5 = v4;
  GameMode_TrySetMode((int *)dword_65ABF6F4, 2);
  PlayerStats_SetTargetAndRefresh(this, 0, 1);
  if ( v5 )
    v6 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
  else
    v6 = byte_659A8B98;
  result = FadeEffect_Show((float *)dword_65ABF754, v6);
  if ( v5 )
    return (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
  return result;
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (658C0050) --------------------------------------------------------
LONG __usercall PlayerController_OnDeath@<eax>(_BYTE *this@<ecx>, double a2@<st1>)
{
  char *v3; // esi
  int Src; // [esp+8h] [ebp-4h] BYREF

  (*(void (**)(void))(g_pILTClient + 428))();
  ++*(_DWORD *)(dword_65ABF6F4 + 140);
  (*(void (__cdecl **)(int))(g_pILTClient + 424))(1);
  v3 = (char *)dword_65ABF714 + 292;
  sprintf((char *const)dword_65ABF714 + 292, "+%s %d", "CrouchLock", 0);
  (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v3);
  SharedMem_WriteU8_std(0x1D698u, 0);
  SharedMem_WriteU8_std(0x1D699u, 0);
  SharedMem_WriteU8_std(0x1D69Au, 0);
  SharedMem_WriteU8_std(0x1D69Bu, 0);
  SharedMem_WriteU8_std(0x73u, 1u);
  Src = 0;
  StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 2, &Src);
  WindowMgr_CloseAllInputFocused((_BYTE **)dword_65ABF708);
  SharedMem_WriteU8_std(0x3044u, 0);
  Music_CheckPlayState(dword_65ABF718);
  if ( SharedMem_ReadDword_this(this, 0) != 30 )
    CameraMgr_GetCameraMode((int)dword_65ABF714, a2, COERCE_FLOAT(1));
  if ( SharedMem_ReadDword_this(this, 0) == 31 )
  {
    SharedMem_WriteU8_std(0x5Au, 1u);
    GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
  }
  *(this + 52) = 0;
  return SharedMem_WriteU8_std(0x52u, 1u);
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658C01B0) --------------------------------------------------------
char __thiscall PlayerController_OnRespawn(int *this)
{
  char *v2; // esi
  int Dword_this; // [esp-4h] [ebp-Ch]
  int Src; // [esp+4h] [ebp-4h] BYREF

  if ( SharedMem_ReadDword_this(this, 0) == 4 )
  {
    SharedMem_WriteDword_this(this, 1u, *(this + 14));
  }
  else if ( SharedMem_ReadDword_this(this, 0) )
  {
    Dword_this = SharedMem_ReadDword_this(this, 0);
    SharedMem_WriteDword_this(this, 1u, Dword_this);
  }
  else
  {
    SharedMem_WriteDword_this(this, 1u, 1);
  }
  SharedMem_WriteU8_std(0x52u, 0);
  SharedMem_WriteU8_std(0x76u, 0);
  SharedMem_WriteString_std(3, (char *)byte_659A8B98);
  SharedMem_WriteString_std(19, (char *)byte_659A8B98);
  WeaponMgr_ClearAllSlots(dword_65ABF730);
  WeaponZoom_Reset_Thunk((int)dword_65ABF75C);
  (*(void (__thiscall **)(char *))(*(_DWORD *)&g_pGameClientShell[1]._pad0[24] + 20))(&g_pGameClientShell[1]._pad0[24]);
  HUD_ResetAndUpdateWindowMgr((_DWORD *)dword_65ABF6F4);
  if ( !SharedMem_ReadBool_std(0x74u) && !SharedMem_ReadBool_std(0x75u) )
    SharedMem_WriteDword_this(this, 0, 255);
  PlayerModels_ClearAll(dword_65ABF720);
  SharedMem_WriteU8_std(0x95u, 0);
  v2 = (char *)dword_65ABF714 + 292;
  sprintf((char *const)dword_65ABF714 + 292, "+%s %d", "CrouchLock", 0);
  (*(void (__cdecl **)(char *))(g_pILTClient + 520))(v2);
  SharedMem_WriteU8_std(0x1D698u, 0);
  SharedMem_WriteU8_std(0x1D699u, 0);
  SharedMem_WriteU8_std(0x1D69Au, 0);
  SharedMem_WriteU8_std(0x1D69Bu, 0);
  Src = 0;
  StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 2, &Src);
  return EncVarMgr_SetInt((_DWORD *)g_pEncVarMgr, 0xAu, 0);
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658C0340) --------------------------------------------------------
void __thiscall WorldLogin_LoadApartmentWorld(void *this)
{
  unsigned __int8 apartmentId; // bl
  int stringHandle; // esi
  const char *apartmentNameStr; // eax
  char *worldPathCStr; // eax
  char *apartmentFolderName; // [esp-4h] [ebp-3Ch]
  int worldDisplayName; // [esp-4h] [ebp-3Ch]
  _BYTE worldPath[28]; // [esp+Ch] [ebp-2Ch] BYREF
  int dtorState; // [esp+34h] [ebp-4h]

  if ( SharedMem_ReadBool_std(0x54u) )
  {
    apartmentId = SharedMem_ReadDword_this(this, 0x78u);
    if ( (unsigned __int8)(apartmentId - 1) <= 0x17u )
    {
      SharedMem_WriteU8_std(0x74u, 1u);
      std::string::string(worldPath, "worlds\\apartments\\");
      apartmentFolderName = (char *)g_ApartmentWorldTable[6 * apartmentId];
      dtorState = 0;
      std::string::operator+=(worldPath, apartmentFolderName);
      stringHandle = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, apartmentId + 10500);
      if ( stringHandle )
        apartmentNameStr = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(
                                           g_pILTClient,
                                           stringHandle);
      else
        apartmentNameStr = byte_659A8B98;
      worldDisplayName = (int)apartmentNameStr;
      worldPathCStr = (char *)std::string::c_str(worldPath);
      WorldLogin_LoadWorldFromPath(worldPathCStr, worldDisplayName);
      if ( stringHandle )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, stringHandle);
      dtorState = -1;
      std::string::~string(worldPath);
    }
  }
}
// 659A8274: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 659E2178: using guessed type char (*g_ApartmentWorldTable[2])[4];
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (658C04B0) --------------------------------------------------------
char Login_SendRequest_Throttled()
{
  int Int; // eax
  double v2; // st7
  DWORD Time; // eax
  struct _SYSTEMTIME SystemTime; // [esp+8h] [ebp-5F0h] BYREF
  struct _FILETIME SystemTimeAsFileTime; // [esp+18h] [ebp-5E0h] BYREF
  float Float; // [esp+20h] [ebp-5D8h]
  float v7; // [esp+24h] [ebp-5D4h]
  struct Packet_Id107 v8; // [esp+28h] [ebp-5D0h] BYREF
  int v9; // [esp+5F4h] [ebp-4h]

  GetSystemTime(&SystemTime);
  GetSystemTimeAsFileTime(&SystemTimeAsFileTime);
  if ( ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 104))(g_pILTClient) <= 0.067000002 )
  {
    if ( EncVarMgr_GetInt((_DWORD *)g_pEncVarMgr, 0xBu) )
    {
      Int = EncVarMgr_GetInt((_DWORD *)g_pEncVarMgr, 0xCu);
      v7 = (double)(SystemTimeAsFileTime.dwLowDateTime - Int) / 10000000.0;
      v7 = 1.0 - v7;
      v7 = fabs(v7);
      v7 = v7 * 100.0;
      if ( v7 > 33.0 )
        v7 = 33.0;
      Float = EncVarMgr_GetFloat((_DWORD *)g_pEncVarMgr, 0xDu);
      if ( v7 <= 10.0 )
        v2 = Float - 10.0;
      else
        v2 = v7 + Float;
      Float = v2;
      if ( Float < 0.0 )
        Float = 0.0;
      if ( Float >= 100.0 )
      {
        Packet_Id107_Init(&v8);
        v9 = 0;
        v8.subId = 1;
        *(unsigned int *)((char *)&v8.optA + 2) = 1;
        *(unsigned int *)((char *)&v8.optC + 2) = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
        LTClient_SendPacket_BuildIfNeeded(&v8, 2, 1, 3, 0);
        Float = 0.0;
        v9 = -1;
        *(_DWORD *)v8._pad0 = &vtbl_Packet_Unknown0;
        BitStream_FreeOwnedBuffer((int)&v8._pad0[12]);
      }
      EncVarMgr_SetFloat((_DWORD *)g_pEncVarMgr, 13, Float);
    }
    EncVarMgr_SetInt((_DWORD *)g_pEncVarMgr, 0xCu, SystemTimeAsFileTime.dwLowDateTime);
    Time = timeGetTime();
    return EncVarMgr_SetInt((_DWORD *)g_pEncVarMgr, 0xBu, Time);
  }
  else
  {
    EncVarMgr_SetInt((_DWORD *)g_pEncVarMgr, 0xBu, 0);
    return EncVarMgr_SetFloat((_DWORD *)g_pEncVarMgr, 13, 0.0);
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658C0820) --------------------------------------------------------
void __thiscall AntiCheat_PeriodicCheck(float *this)
{
  struct Packet_Id107 v2; // [esp+8h] [ebp-5D0h] BYREF
  int v3; // [esp+5D4h] [ebp-4h]

  if ( SharedMem_ReadBool_std(0x54u)
    && *(this + 16) <= ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient) )
  {
    if ( AntiCheat_CheckVMware() )
    {
      Packet_Id107_Init(&v2);
      v3 = 0;
      v2.subId = 1;
      *(unsigned int *)((char *)&v2.optA + 2) = 21;
      *(unsigned int *)((char *)&v2.optC + 2) = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
      LTClient_SendPacket_BuildIfNeeded(&v2, 2, 1, 3, 0);
      v3 = -1;
      *(_DWORD *)v2._pad0 = &vtbl_Packet_Unknown0;
      BitStream_FreeOwnedBuffer((int)&v2._pad0[12]);
    }
    *(this + 16) = ((double (*)(void))*(_DWORD *)(g_pILTClient + 500))() + 300.0;
  }
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;

//----- (658C0980) --------------------------------------------------------
char __thiscall Packet_ID_WORLD_LOGIN_Read(Packet_ID_WORLD_LOGIN *this, int payload)
{
  char result; // al

  result = VariableSizedPacket::Read(this, payload);
  if ( result )
  {
    RakNet::BitStream::ReadCompressed((unsigned int *)&this->_pad0[8], (char *)&this->worldId, 8u, 1);
    RakNet::BitStream::ReadCompressed((unsigned int *)&this->_pad0[8], (char *)&this->worldInst, 8u, 1);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)&this->_pad0[8], (char *)&this->playerId);
    RakNet::BitStream::ReadCompressed_T_uint((unsigned int *)&this->_pad0[8], (char *)&this->worldConst);
    return 1;
  }
  return result;
}

//----- (658C09F0) --------------------------------------------------------
char __thiscall Packet_ID_WORLD_LOGIN_Write(Packet_ID_WORLD_LOGIN *this)
{
  char writeOk; // al
  unsigned __int8 tmpByte8[4]; // [esp+4h] [ebp-4h] BYREF

  writeOk = Packet_WriteHeader((int)this);
  if ( writeOk )
  {
    tmpByte8[0] = this->worldId;
    BitStream_WriteBitsCompressed((char *)&this->_pad0[8], (char *)tmpByte8, 8u, 1);
    tmpByte8[0] = this->worldInst;
    BitStream_WriteBitsCompressed((char *)&this->_pad0[8], (char *)tmpByte8, 8u, 1);
    BitStream_Write_u32c((char *)this, this->playerId);
    BitStream_Write_u32c((char *)this, this->worldConst);
    return 1;
  }
  return writeOk;
}

//----- (658C0A60) --------------------------------------------------------
int __stdcall LoginUI_ShowMessage(int a1)
{
  int v1; // ecx
  void (__thiscall *v2)(int, int, int); // eax
  int (__thiscall *v3)(int, int, int); // eax
  int result; // eax
  int v5; // [esp-8h] [ebp-1Ch]
  int v6; // [esp+4h] [ebp-10h] BYREF
  int v7; // [esp+10h] [ebp-4h]

  v6 = 0;
  if ( (*(int (__thiscall **)(int, int *))(*(_DWORD *)dword_65A5A6E8 + 36))(dword_65A5A6E8, &v6) )
  {
    v1 = 0;
    v6 = 0;
  }
  else
  {
    (*(void (__thiscall **)(int))(*(_DWORD *)v6 + 4))(v6);
    v1 = v6;
  }
  v2 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v1 + 36);
  v7 = 0;
  v2(v1, 111, 8);
  (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)v6 + 36))(v6, 0, 32);
  (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v6 + 36))(v6, a1, 32);
  v5 = *FXInstance_Clone(&v6, &a1);
  v3 = *(int (__thiscall **)(int, int, int))(*(_DWORD *)g_pILTClient + 324);
  LOBYTE(v7) = 1;
  result = v3(g_pILTClient, v5, 1);
  LOBYTE(v7) = 0;
  if ( a1 )
    result = (*(int (__thiscall **)(int))(*(_DWORD *)a1 + 8))(a1);
  v7 = -1;
  if ( v6 )
    return (*(int (__thiscall **)(int))(*(_DWORD *)v6 + 8))(v6);
  return result;
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;

//----- (658C0B40) --------------------------------------------------------
int SendPacket_ID_0x6F_RequestRespawn()
{
  int v0; // ecx
  void (__thiscall *v1)(int, int, int); // eax
  int (__thiscall *v2)(int, int, int); // eax
  int result; // eax
  int v4; // [esp-8h] [ebp-20h]
  int v5; // [esp+4h] [ebp-14h] BYREF
  int v6; // [esp+8h] [ebp-10h] BYREF
  int v7; // [esp+14h] [ebp-4h]

  v6 = 0;
  if ( (*(int (__thiscall **)(int, int *))(*(_DWORD *)dword_65A5A6E8 + 36))(dword_65A5A6E8, &v6) )
  {
    v0 = 0;
    v6 = 0;
  }
  else
  {
    (*(void (__thiscall **)(int))(*(_DWORD *)v6 + 4))(v6);
    v0 = v6;
  }
  v1 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v0 + 36);
  v7 = 0;
  v1(v0, 111, 8);
  (*(void (__thiscall **)(int, int, int))(*(_DWORD *)v6 + 36))(v6, 4, 32);
  v4 = *FXInstance_Clone(&v6, &v5);
  v2 = *(int (__thiscall **)(int, int, int))(*(_DWORD *)g_pILTClient + 324);
  LOBYTE(v7) = 1;
  result = v2(g_pILTClient, v4, 1);
  LOBYTE(v7) = 0;
  if ( v5 )
    result = (*(int (__thiscall **)(int))(*(_DWORD *)v5 + 8))(v5);
  v7 = -1;
  if ( v6 )
    return (*(int (__thiscall **)(int))(*(_DWORD *)v6 + 8))(v6);
  return result;
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;

//----- (658C0C10) --------------------------------------------------------
bool __thiscall WorldLogin_StateTick(float *this)
{
  bool result; // al
  char v3[8]; // [esp+Ch] [ebp-448h] BYREF
  char v4; // [esp+14h] [ebp-440h]
  _BYTE v5[1044]; // [esp+18h] [ebp-43Ch] BYREF
  int v6; // [esp+42Ch] [ebp-28h]
  int v7; // [esp+430h] [ebp-24h]
  char v8; // [esp+434h] [ebp-20h]
  int Dword_this; // [esp+43Ch] [ebp-18h]
  int v10; // [esp+450h] [ebp-4h]

  result = SharedMem_ReadBool_std(0x54u);
  if ( result )
  {
    (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(g_pILTClient, "Logging out");
    *(this + 15) = 0.0;
    v4 = 0;
    Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)v5);
    v6 = 0;
    v7 = 0;
    v8 = 113;
    *(_DWORD *)v3 = &off_659D03D4;
    Dword_this = 0;
    v10 = 0;
    Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
    if ( Packet_WriteHeader((int)v3) )
      BitStream_Write_u32c(v3, Dword_this);
    LTClient_SendPacket_BuildIfNeeded(v3, 1, 1, 3, 0);
    sub_658079C0((_DWORD **)dword_65ABF708);
    EquipSlotsWindow_RefreshSlots((_BYTE **)dword_65ABF708);
    *(_DWORD *)(dword_65ABF6F4 + 80) = *(_DWORD *)(dword_65ABF6F4 + 84);
    SharedMem_WriteDword_this(g_pPlayerStats, 0x1EA3Eu, 0);
    SharedMem_WriteU8_std(0x54u, 0);
    v10 = -1;
    *(_DWORD *)v3 = &vtbl_Packet_Unknown0;
    BitStream_FreeOwnedBuffer((int)v5);
    return 1;
  }
  return result;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659D03D4: using guessed type void *off_659D03D4;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (658C0D60) --------------------------------------------------------
int __thiscall WorldLoginReturn_HandleAddress(
        void *this,
        unsigned __int8 addrFlag,
        unsigned int worldIp,
        unsigned __int16 worldPort)
{
  float *loginStatusWidget; // eax

  if ( SystemAddress_Equals_CS((SystemAddress6 *)&worldIp, &g_SystemAddress_Unassigned2) )
  {
    LoginUI_ShowMessage(5);
    loginStatusWidget = (float *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
    if ( loginStatusWidget )
      LoginUI_SetMessageText(loginStatusWidget, 1722, "FF000000", 0, 0, 0);
    return (*(int (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
             g_pILTClient,
             "--> Unknown world login address");
  }
  else
  {                                             // g_LTClient->ConnectToWorld(SystemAddress*) [vtbl+0x18]; returns success/fail
    if ( (*(int (__thiscall **)(int, unsigned int *))(*(_DWORD *)g_LTClient + 24))(g_LTClient, &worldIp) )
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "Failed to connect to world!");
    return SharedMem_WriteDword_this(this, 0x1EEC0u, 2);
  }
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF70C: using guessed type int dword_65ABF70C;

//----- (658C0E10) --------------------------------------------------------
int __thiscall WorldLogin_StateMachineTick(float *this)
{
  int worldLoginStateMinus1; // eax
  int worldLoginStateMinus2; // eax
  unsigned __int8 worldIdValue; // al
  int worldIdIndex; // ebx
  int worldNameTableIndex; // edi
  int ltClientVtable; // ebx
  int worldPathCStr; // eax
  char *worldPathPtr; // eax
  char *worldFolderName; // [esp-4h] [ebp-508h]
  char *worldDisplayName; // [esp-4h] [ebp-508h]
  char *worldDisplayName2; // [esp-4h] [ebp-508h]
  unsigned __int8 worldIdByte; // [esp+17h] [ebp-4EDh]
  Packet_ID_WORLD_LOGIN pktWorldLogin; // [esp+18h] [ebp-4ECh] BYREF
  char worldPath[28]; // [esp+458h] [ebp-ACh] BYREF
  int dtorState; // [esp+500h] [ebp-4h]
  int savedregs; // [esp+504h] [ebp+0h] BYREF

  worldLoginStateMinus1 = (unsigned __int8)SharedMem_ReadDword_this(this, 0x1EEC0u) - 1;
  if ( worldLoginStateMinus1 )
  {
    worldLoginStateMinus2 = worldLoginStateMinus1 - 1;
    if ( worldLoginStateMinus2 )
    {
      if ( worldLoginStateMinus2 == 1 )
      {
        worldIdValue = SharedMem_ReadDword_this(this, 0x1EEC1u);
        worldIdIndex = worldIdValue;
        worldIdByte = worldIdValue;
        SharedMem_WriteDword_this(dword_65ABF73C, 0, worldIdValue);
        if ( worldIdByte == 4 )
        {
          WorldLogin_LoadApartmentWorld(dword_65ABF73C);
        }
        else
        {
          std::string::string(worldPath, "worlds\\");
          worldNameTableIndex = 15 * worldIdIndex;
          worldFolderName = (char *)g_WorldTable[15 * worldIdIndex];
          dtorState = 1;
          std::string::operator+=(worldPath, worldFolderName);
          ltClientVtable = *(_DWORD *)g_pILTClient;
          worldDisplayName = (char *)off_659E2984[worldNameTableIndex];
          worldPathCStr = std::string::c_str(worldPath);
          (*(void (**)(int, const char *, ...))(ltClientVtable + 28))(
            g_pILTClient,
            "Loading world [%s] [%s]",
            worldPathCStr,
            worldDisplayName);
          worldDisplayName2 = (char *)off_659E2984[worldNameTableIndex];
          worldPathPtr = (char *)std::string::c_str(worldPath);
          WorldLogin_LoadWorldFromPath(worldPathPtr, (int)worldDisplayName2);
          dtorState = -1;
          std::string::~string(worldPath);
        }
        SharedMem_WriteDword_this(this, 0x1EEC1u, 0);
        SharedMem_WriteDword_this(this, 0x1EEC2u, 0);
        SharedMem_WriteDword_this(this, 0x1EEC0u, 0);
      }
    }
    else if ( (*(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 8))(g_LTClient) )// g_LTClient->IsConnected? [vtbl+0x08] gate before state=3
    {
      *((_BYTE *)dword_65ABF734 + 6) = 0;
      SharedMem_WriteDword_this(this, 0x1EEC0u, 3);
    }
LABEL_14:
    JUMPOUT(0x658C1099);
  }
  if ( (*(int (__thiscall **)(int))(*(_DWORD *)g_LTClient + 8))(g_LTClient)
    || SharedMem_ReadBool_std(0x55u)
    || *(this + 15) > ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient) )
  {
    goto LABEL_14;
  }
  SharedMem_WriteWorldLoginState_0x1EEC0(this, 2u);
  Packet_ID_WORLD_LOGIN_Ctor(&pktWorldLogin);
  dtorState = 0;
  pktWorldLogin.playerId = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
  pktWorldLogin.worldId = SharedMem_ReadDword_this(this, 0x1EEC1u);
  pktWorldLogin.worldInst = SharedMem_ReadDword_this(this, 0x1EEC2u);
  pktWorldLogin.worldConst = 1293394;
  Packet_ID_WORLD_LOGIN_Write(&pktWorldLogin);
  LTClient_SendPacket_BuildIfNeeded(&pktWorldLogin, 1, 1, 3, 0);
  return Login_OnSubmit(
           g_pILTClient,
           *(void (__cdecl **)(int, void *))(*(_DWORD *)g_pILTClient + 28),
           (int)&savedregs,
           this);
}
// 658C0F66: control flows out of bounds to 658C1099
// 659A8274: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 659E2980: using guessed type char (*g_WorldTable[3])[4];
// 659E2984: using guessed type char (*off_659E2984[2])[4];
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF6F4: using guessed type int dword_65ABF6F4;

//----- (658C1072) --------------------------------------------------------
// positive sp value has been detected, the output may be wrong!
void __usercall Login_OnSubmit(int a1@<eax>, void (__cdecl *a2)(int, void *)@<edx>, int a3@<ebp>, _BYTE *a4@<esi>)
{
  int WindowById; // eax
  int Dword_this; // edi
  float *Slot; // eax
  int v7; // edi
  int v8; // ebx
  int v9; // edx
  int Int; // edi

  a2(a1, &loc_659D045C);
  *(_DWORD *)(a3 - 4) = -1;
  *(_DWORD *)(a3 - 1260) = &vtbl_Packet_Unknown0;
  BitStream_FreeOwnedBuffer(a3 - 1248);
  if ( SharedMem_ReadBool_std(0x7Au) )
  {
    WindowMgr_CloseAllInputFocused((_BYTE **)dword_65ABF708);
    SharedMem_WriteU8_std(0x7Au, 0);
  }
  if ( SharedMem_ReadBool_std(0x94u) )
  {
    WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0xFu);
    if ( WindowById )
    {
      if ( !*(_BYTE *)(WindowById + 6241) )
        GameMode_SetModeFour((int *)dword_65ABF6F4, 0xFu);
    }
  }
  Dword_this = SharedMem_ReadDword_this(a4, 0x5Cu);
  if ( Dword_this )
  {
    LoginUI_ShowMessage(5);
    Slot = (float *)UiWidget_GetSlot((_DWORD *)dword_65ABF70C, 1u);
    if ( Slot )
      LoginUI_SetMessageText(Slot, Dword_this, "FF000000", 0, 0, 0);
    SharedMem_WriteDword_this(a4, 0x5Cu, 0);
  }
  v7 = SharedMem_ReadDword_this(a4, 0x5Du);
  v8 = SharedMem_ReadDword_this(a4, 0x7Bu);
  if ( !v7 || *(_DWORD *)dword_65ABF754 == 2 )
  {
    if ( v8 )
    {
      *(_BYTE *)(a3 - 80) = 0;
      Ui_ReadFieldTextById(a4, 124, (char *)(a3 - 80), 0x40u);
      if ( !*(_BYTE *)(CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x5Bu) + 6241) )
      {
        v9 = 3;
        if ( v8 == 1801 )
          v9 = 2;
        if ( strlen((const char *)(a3 - 80)) )
        {
          LoginField_QueueUpdate((int **)dword_65ABF708, v9, v8, *(_DWORD *)(dword_65ABF6F4 + 8), a3 - 80);
          SharedMem_WriteString_std(124, (char *)byte_659A8B98);
        }
        else
        {
          LoginField_QueueUpdate((int **)dword_65ABF708, v9, v8, *(_DWORD *)(dword_65ABF6F4 + 8), 0);
        }
        GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
        GameMode_SetModeFour((int *)dword_65ABF6F4, 0x5Bu);
      }
      SharedMem_WriteDword_this(a4, 0x7Bu, 0);
    }
  }
  else
  {
    if ( !*(_BYTE *)(CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x5Bu) + 6241)
      && (v7 != 1889 || !*(_BYTE *)(CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x35u) + 6241)) )
    {
      *(_BYTE *)(a3 - 144) = 0;
      Ui_ReadFieldTextById(a4, 94, (char *)(a3 - 144), 0x40u);
      if ( strlen((const char *)(a3 - 144)) )
      {
        LoginField_QueueUpdate((int **)dword_65ABF708, 4, v7, *(_DWORD *)(dword_65ABF6F4 + 8), a3 - 144);
        SharedMem_WriteString_std(94, (char *)byte_659A8B98);
      }
      else
      {
        LoginField_QueueUpdate((int **)dword_65ABF708, 4, v7, *(_DWORD *)(dword_65ABF6F4 + 8), 0);
      }
      GameMode_SetModeFour((int *)dword_65ABF6F4, 0x5Bu);
    }
    SharedMem_WriteDword_this(a4, 0x5Du, 0);
  }
  if ( SharedMem_ReadBool_std(0x6Eu) )
  {
    *((_BYTE *)dword_65ABF71C + 132) = 0;
    SharedMem_WriteU8_std(0x6Eu, 0);
  }
  if ( SharedMem_ReadBool_std(0x6Fu) )
  {
    WeaponFire_Holster(dword_65ABF75C);
    SharedMem_WriteU8_std(0x6Fu, 0);
  }
  if ( EncVarMgr_GetInt((_DWORD *)g_pEncVarMgr, 0xAu) )
  {
    Int = EncVarMgr_GetInt((_DWORD *)g_pEncVarMgr, 0xBu);
    if ( timeGetTime() - Int > 0x3E8 )
      Login_SendRequest_Throttled();
  }
  AntiCheat_PeriodicCheck((float *)a4);
  if ( !a4[52] )
  {
    if ( PlayerStats_GetStatValue(7u) )
      a4[52] = 1;
  }
}
// 658C13A9: positive sp value 18 has been found
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;
// 65ABF70C: using guessed type int dword_65ABF70C;
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658C13B0) --------------------------------------------------------
int __thiscall TravelMgr_HandleAction(float *this, int a2)
{
  int result; // eax
  int WindowById; // eax

  switch ( a2 )
  {
    case 1:
      if ( WorldLogin_StateTick(this) )
        Sleep(0x1F4u);
      result = (*(int (**)(void))(g_pILTClient + 144))();
      break;
    case 2:
      WorldLogin_StateTick(this);
      Sleep(0x7D0u);
      result = (*(int (**)(void))(g_pILTClient + 144))();
      break;
    case 3:
      WorldLogin_StateTick(this);
      result = GameMode_SetModeThree((int *)dword_65ABF6F4, 1u);
      break;
    case 6:
      LoginField_QueueUpdate((int **)dword_65ABF708, 6, 1884, *(_DWORD *)(dword_65ABF6F4 + 8), 0);
      GameMode_SetModeFour((int *)dword_65ABF6F4, 0x5Bu);
      result = sub_65809040((_DWORD *)dword_65ABF708);
      break;
    case 10:
      WindowById = CWindowMgr_GetWindowById((_DWORD *)dword_65ABF708, 0x2Fu);
      sub_65822FF0(WindowById);
      GameMode_TrySetMode((int *)dword_65ABF6F4, 4);
      result = GameMode_SetModeFour((int *)dword_65ABF6F4, 0x2Fu);
      break;
    case 11:
      result = GameState_ShowTravelMessage(this);
      break;
    default:
      result = (*(int (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
                 g_pILTClient,
                 "TravelMgrClient received unknown action %u",
                 a2);
      break;
  }
  return result;
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (658C1530) --------------------------------------------------------
_BYTE *__thiscall GameState_Ctor(_BYTE *this)
{
  int v3; // [esp+18h] [ebp-10h] BYREF
  int v4; // [esp+24h] [ebp-4h]

  SharedMem_Map_Init(this);
  v4 = 0;
  *((_DWORD *)this + 10) = RBTreeNode_Alloc12();
  *((_DWORD *)this + 11) = 0;
  *((_DWORD *)this + 18) = 0;
  *((_DWORD *)this + 19) = 0;
  *((_DWORD *)this + 20) = 0;
  AESContext_Ctor((_DWORD *)this + 21);
  LOBYTE(v4) = 3;
  *this = 0;
  SharedMem_WriteDword_this(this, 0, 255);
  SharedMem_WriteDword_this(this, 1u, 255);
  SharedMem_WriteString_std(3, (char *)dword_659BFDB4);
  SharedMem_WriteString_std(19, (char *)byte_659A8B98);
  SharedMem_WriteU8_std(0x52u, 0);
  SharedMem_WriteU8_std(0x53u, 0);
  SharedMem_WriteU8_std(0x54u, 0);
  SharedMem_WriteU8_std(0x55u, 0);
  SharedMem_WriteU8_std(0x5Au, 0);
  SharedMem_WriteDword_this(this, 0x5Cu, 0);
  SharedMem_WriteDword_this(this, 0x5Du, 0);
  SharedMem_WriteString_std(94, (char *)byte_659A8B98);
  SharedMem_WriteU8_std(0x6Eu, 0);
  SharedMem_WriteU8_std(0x6Fu, 0);
  SharedMem_WriteU8_std(0x8Eu, 0);
  SharedMem_WriteU8_std(0x70u, 0);
  SharedMem_WriteU8_std(0x71u, 0);
  SharedMem_WriteU8_std(0x72u, 0);
  SharedMem_WriteU8_std(0x73u, 1u);
  SharedMem_WriteFloat(0x1D2ADu, 500.0);
  SharedMem_WriteU8_std(0x74u, 0);
  SharedMem_WriteU8_std(0x75u, 0);
  SharedMem_WriteU8_std(0x76u, 0);
  SharedMem_WriteDword_this(this, 0x77u, 0);
  SharedMem_WriteDword_this(this, 0x78u, 0);
  *((_DWORD *)this + 14) = 1;
  SharedMem_WriteU8_std(0x79u, 0);
  SharedMem_WriteU8_std(0x7Au, 0);
  SharedMem_WriteDword_this(this, 0x7Bu, 0);
  SharedMem_WriteString_std(124, (char *)byte_659A8B98);
  SharedMem_WriteU8_std(0x8Cu, 0);
  SharedMem_WriteU8_std(0x91u, 0);
  SharedMem_WriteU8_std(0x92u, 0);
  SharedMem_WriteU8_std(0x93u, 0);
  SharedMem_WriteU8_std(0x94u, 0);
  SharedMem_WriteU8_std(0x95u, 0);
  SharedMem_WriteU8_std(0x96u, 0);
  SharedMem_WriteU8_std(0x97u, 0);
  SharedMem_WriteDword_this(this, 0x8Fu, 0);
  SharedMem_WriteU8_std(0x98u, 0);
  SharedMem_WriteU8_std(0x99u, 0);
  SharedMem_WriteU8_std(0x9Au, 1u);
  SharedMem_WriteU8_std(0x8Du, 0);
  SharedMem_WriteU8_std(0x1EA46u, 0);
  SharedMem_WriteU8_std(0x1EA47u, 1u);
  v3 = 0;
  StatGroup_WriteByIndex((unsigned int **)g_pEncVarMgr, 8, &v3);
  PlayerStats_SetTargetAndRefresh(this, 0, 0);
  SharedMem_WriteDword_this(this, 0x1EEC1u, 0);
  SharedMem_WriteDword_this(this, 0x1EEC2u, 0);
  *((float *)this + 15) = 0.0;
  *((float *)this + 16) = 0.0;
  *(this + 52) = 0;
  SharedMem_WriteDword_this(this, 0x1EEC0u, 0);
  return this;
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658C18A0) --------------------------------------------------------
int __thiscall TravelMgrClient_OnMessage(float *this, int a2)
{
  int v3; // eax
  int v4; // eax
  int result; // eax
  int v6; // edi
  int v7; // esi
  const char *v8; // eax
  int v9; // esi
  unsigned int v10; // [esp+10h] [ebp-108h]
  char v11; // [esp+14h] [ebp-104h] BYREF
  char v12[255]; // [esp+15h] [ebp-103h] BYREF

  v3 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 32);
  switch ( v3 )
  {
    case 0:
      v4 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 32);
      result = TravelMgr_HandleAction(this, v4);
      break;
    case 2:
      v10 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 32);
      (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "World loading took %.2f seconds",
        (double)v10 * 0.001000000047497451);
      result = SendPacket_ID_0x6F_RequestRespawn();
      break;
    case 3:
      v6 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 32);
      v11 = 0;
      memset(v12, 0, sizeof(v12));
      (*(void (__thiscall **)(int, char *, int))(*(_DWORD *)a2 + 76))(a2, &v11, 256);
      (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "Loading world %s failed with error code %u",
        &v11,
        v6);
      v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5314);
      if ( v7 )
        v8 = (const char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
      else
        v8 = byte_659A8B98;
      result = (*(int (__cdecl **)(const char *))(g_pILTClient + 148))(v8);
      if ( v7 )
        result = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
      break;
    case 5:
      v10 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 32);
      (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "World starting took %.2f seconds",
        (double)v10 * 0.001000000047497451);
      LoginUI_ShowMessage(9);
      result = nullsub_6(dword_65ABF6F4, 0);
      break;
    case 6:
      v9 = (*(int (__thiscall **)(int, int))(*(_DWORD *)a2 + 60))(a2, 32);
      v11 = 0;
      memset(v12, 0, sizeof(v12));
      Ui_ReadFieldTextById(this, 3, &v11, 0x100u);
      (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "Running world %s failed with error code %u",
        &v11,
        v9);
      result = (*(int (__cdecl **)(const char *))(g_pILTClient + 148))("Error running world");
      break;
    case 7:
      result = GetWindow35();
      break;
    default:
      result = (*(int (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
                 g_pILTClient,
                 "TravelMgrClient received unknown message type %u",
                 v3);
      break;
  }
  return result;
}
// 65758250: using guessed type int __thiscall nullsub_6(_DWORD, _DWORD);
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (658C1B90) --------------------------------------------------------
LONG __thiscall NetworkMgr_AddPacketToQueue(char *this, int a2)
{
  SharedMem_Lock();
  DwordVector_CopyFrom((int)(this + 68), a2);
  return SharedMem_Unlock();
}

//----- (658C2010) --------------------------------------------------------
// bad sp value at call has been detected, the output may be wrong!
int SendPacket_ID_0xA5_Unknown()
{
  _DWORD v1[268]; // [esp+4h] [ebp-678h] BYREF
  int v2; // [esp+678h] [ebp-4h]

  SharedMem_WriteU8_std(0x91u, 0);
  Packet_ID_A5_ctor((char *)v1);
  v2 = 0;
  SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
  GuildPacket_WriteBody((int)v1);
  LTClient_SendPacket_BuildIfNeeded(v1, 2, 1, 3, 0);
  v2 = -1;
  return TerminalWindow_ClearVectors((char *)v1);
}
// 658C2079: bad sp value at call
// 658C2093: bad sp value at call
// 658C20A5: bad sp value at call

//----- (658C20E0) --------------------------------------------------------
unsigned int __thiscall SharedMem_UpdateTargetSlot(void *this, int a2)
{
  int Dword_this; // ebx
  unsigned int result; // eax
  int v5; // esi

  Dword_this = SharedMem_ReadDword_this(this, 0x2BE3u);
  result = a2;
  v5 = 0;
  if ( a2 )
  {
    v5 = a2;
  }
  else
  {
    result = SharedMem_ReadDword_this(this, 0x2BE2u);
    if ( result < 0x41 )
    {
      result = SharedMem_ReadDword_this(this, 0x2BE2u);
      v5 = result + 1;
    }
  }
  if ( Dword_this != v5 )
    return SharedMem_WriteDword_this(this, 0x2BE3u, v5);
  return result;
}

//----- (658C21B0) --------------------------------------------------------
bool __thiscall Inventory_CheckSlotAvailable(void *this, char a2, unsigned __int8 a3)
{
  unsigned int Dword_this; // eax

  Dword_this = SharedMem_ReadDword_this(this, 0x2BE2u);
  if ( a2 )
  {
    if ( a2 == 1 )
      return Dword_this < 0x28;
    return 1;
  }
  if ( Dword_this >= a3 && Dword_this <= a3 )
  {
    SharedMem_UpdateTargetSlot(this, 0);
    return 1;
  }
  return 0;
}

//----- (658C22D0) --------------------------------------------------------
float *__thiscall Transform_CopyQuatAndPos(float *this, float *a2, float *a3)
{
  *a2 = *this;
  a2[1] = *(this + 1);
  a2[2] = *(this + 2);
  a2[3] = *(this + 3);
  *a3 = *(this + 4);
  a3[1] = *(this + 5);
  a3[2] = *(this + 6);
  return a3;
}

//----- (658C2330) --------------------------------------------------------
void __cdecl SendPacket_ID_0x90_Position(int a1, int a2)
{
  int v2; // ecx
  void (__thiscall *v3)(int, int, int); // eax
  void (__thiscall *v4)(int, int, int); // eax
  int v5; // [esp-8h] [ebp-38h]
  float v6[4]; // [esp+4h] [ebp-2Ch] BYREF
  float v7[3]; // [esp+14h] [ebp-1Ch] BYREF
  int v8; // [esp+20h] [ebp-10h] BYREF
  int v9; // [esp+2Ch] [ebp-4h]

  if ( a1 || a2 )
  {
    v6[0] = 0.0;
    v6[1] = 0.0;
    v6[2] = 0.0;
    v6[3] = 1.0;
    Transform_CopyQuatAndPos((float *)dword_65ABF740, v6, v7);
    MsgId_70_Handler(dword_65ABF704, v6);
    a1 = 0;
    if ( (*(int (__thiscall **)(int, int *))(*(_DWORD *)dword_65A5A6E8 + 36))(dword_65A5A6E8, &a1) )
    {
      v2 = 0;
      a1 = 0;
    }
    else
    {
      (*(void (__thiscall **)(int))(*(_DWORD *)a1 + 4))(a1);
      v2 = a1;
    }
    v3 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v2 + 36);
    v9 = 0;
    v3(v2, 144, 8);
    (*(void (__thiscall **)(int, float *, int))(*(_DWORD *)a1 + 44))(a1, v7, 96);
    (*(void (__thiscall **)(int, float *, int))(*(_DWORD *)a1 + 44))(a1, v6, 128);
    v5 = *FXInstance_Clone(&a1, &v8);
    v4 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)g_pILTClient + 324);
    LOBYTE(v9) = 1;
    v4(g_pILTClient, v5, 1);
    LOBYTE(v9) = 0;
    if ( v8 )
      (*(void (__thiscall **)(int))(*(_DWORD *)v8 + 8))(v8);
    v9 = -1;
    if ( a1 )
      (*(void (__thiscall **)(int))(*(_DWORD *)a1 + 8))(a1);
  }
}
// 65A5A6E8: using guessed type int dword_65A5A6E8;

//----- (658C2460) --------------------------------------------------------
int __thiscall MsgId_8F_Handler(float *this, float a2, float a3, float a4, float a5, float a6, float a7, float a8)
{
  int v8; // esi
  char *v9; // eax

  *this = a2;
  *(this + 1) = a3;
  *(this + 2) = a4;
  *(this + 3) = a5;
  *(this + 4) = a6;
  *(this + 5) = a7;
  *(this + 6) = a8;
  v8 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 1812);
  if ( v8 )
    v9 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v8);
  else
    v9 = (char *)byte_659A8B98;
  TooltipMgr_ShowTextTooltip((int *)dword_65ABF708, v9, (int)SendPacket_ID_0x90_Position, 0, 1, 0);
  if ( v8 )
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v8);
  return GameMode_SetModeFour((int *)dword_65ABF6F4, 0x50u);
}
// 65ABF6F4: using guessed type int dword_65ABF6F4;
// 65ABF708: using guessed type int dword_65ABF708;

//----- (658C2520) --------------------------------------------------------
float *__thiscall CameraState_SetFOV(int this, float *a2)
{
  float *result; // eax

  if ( !*(_DWORD *)(this + 24) )
  {
    *(float *)(this + 20) = *a2;
    return a2;
  }
  return result;
}

//----- (658C2540) --------------------------------------------------------
BOOL __thiscall CameraState_IsActive(_DWORD *this)
{
  return *this && EquipSlots_GetItemId(dword_65ABF6FC, *((_DWORD *)dword_65ABF700 + 1));
}

//----- (658C25D0) --------------------------------------------------------
void __thiscall CameraState_UpdateLerp(float *this)
{
  BOOL v2; // ebx
  BOOL v3; // edi
  double v4; // st7
  int v5[4]; // [esp+10h] [ebp-14h] BYREF
  float Float_std; // [esp+20h] [ebp-4h]

  if ( !EquipSlots_GetItemId(dword_65ABF6FC, *((_DWORD *)dword_65ABF700 + 1)) )
    return;
  v2 = SharedMem_ReadBool_std(0x1D699u)
    || SharedMem_ReadBool_std(0x1D698u)
    || SharedMem_ReadBool_std(0x1D69Au)
    || SharedMem_ReadBool_std(0x1D69Bu);
  v3 = (*(unsigned __int8 (__cdecl **)(int))(g_pILTClient + 516))(41) || v2;
  if ( WeaponZoom_IsActive() )
    v3 = 0;
  if ( *((_DWORD *)dword_65ABF714 + 71) && !v2 || !v3 )
  {
    if ( *(_DWORD *)this )
    {
      if ( *((_DWORD *)this + 6) )
      {
LABEL_21:
        Float_std = (((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient) - *(this + 8))
                  / 0.6000000238418579;
        v4 = Float_std;
        *(this + 7) = Float_std;
        if ( v4 > 1.0 )
          *(this + 7) = 1.0;
        if ( *(this + 7) >= 1.0 )
        {
          *this = 0.0;
          *(this + 6) = 0.0;
        }
        else
        {
          Float_std = SharedMem_ReadFloat_std(0x1D6A5u);
          *(this + 5) = (1.0 - *(this + 7)) * *(this + 13) + *(this + 7) * Float_std;
          *(float *)v5 = 0.0;
          *(float *)&v5[1] = 0.0;
          *(float *)&v5[2] = 0.0;
          *(float *)&v5[3] = 1.0;
          (*(void (__thiscall **)(int, _DWORD, int *))(*(_DWORD *)g_pILTClient + 148))(
            g_pILTClient,
            *(_DWORD *)dword_65ABF704,
            v5);
          Quaternion_Slerp(this + 1, this + 9, (float *)v5, *(this + 7));
        }
        return;
      }
      *((_DWORD *)this + 6) = 1;
      *(this + 8) = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
      *(this + 9) = *(this + 1);
      *(this + 10) = *(this + 2);
      *(this + 11) = *(this + 3);
      *(this + 12) = *(this + 4);
      *(this + 13) = *(this + 5);
    }
    if ( !*((_DWORD *)this + 6) )
      return;
    goto LABEL_21;
  }
  if ( !*(_DWORD *)this )
  {
    (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 148))(
      g_pILTClient,
      *(_DWORD *)dword_65ABF704,
      this + 1);
    *(this + 5) = SharedMem_ReadFloat_std(0x1D6A5u);
  }
  *(_DWORD *)this = v3;
  *(this + 6) = 0.0;
}

//----- (658C27F0) --------------------------------------------------------
float *__thiscall CameraState_SetRotation(int this, float *a2)
{
  float *result; // eax

  if ( !*(_DWORD *)(this + 24) )
  {
    *(float *)(this + 4) = *a2;
    *(float *)(this + 8) = a2[1];
    *(float *)(this + 12) = a2[2];
    *(float *)(this + 16) = a2[3];
    return a2;
  }
  return result;
}

//----- (658C2820) --------------------------------------------------------
float *__thiscall CameraParams_Init(float *this)
{
  *(this + 1) = 0.0;
  *(this + 3) = 0.0;
  *(_DWORD *)this = 20;
  *(this + 4) = 0.0;
  *(this + 2) = 0.0;
  *(this + 5) = 0.0;
  *((_DWORD *)this + 7) = 3;
  *(this + 8) = 0.0;
  *(this + 6) = 1.0;
  *((_DWORD *)this + 12) = 1;
  *(this + 13) = 0.0;
  *(this + 10) = 0.0;
  *(this + 11) = 0.0;
  *(this + 14) = 0.0;
  *((_BYTE *)this + 64) = 0;
  *(this + 15) = 0.0;
  *((_BYTE *)this + 65) = 0;
  *(this + 9) = 0.0;
  *((_BYTE *)this + 66) = 0;
  *(this + 17) = 0.0;
  return this;
}

//----- (658C2880) --------------------------------------------------------
float *__thiscall CameraParams_Reset(float *this)
{
  *(this + 13) = 0.0;
  *(this + 2) = 0.0;
  *this = 0.0;
  *(this + 1) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *(this + 11) = 0.0;
  *(this + 12) = 0.0;
  *(this + 14) = 0.0;
  return this;
}

//----- (658C29D0) --------------------------------------------------------
float *__thiscall EncVarSlot_SetVec4(int this, float *a2)
{
  float *v3; // eax
  float *result; // eax
  float *v5; // esi

  v3 = (float *)(*(_DWORD *)(this + 12) + RandInRange_Int(0, 15984));
  *(_DWORD *)(this + 8) = v3;
  *v3 = *a2;
  v3[1] = a2[1];
  v3[2] = a2[2];
  v3[3] = a2[3];
  StatBlob_Encode(*(_BYTE **)(this + 8), 0x10u);
  result = *(float **)(this + 8);
  *(_BYTE *)(this + 1) = 1;
  v5 = *(float **)(this + 4);
  *v5 = *result;
  v5[1] = result[1];
  v5[2] = result[2];
  v5[3] = result[3];
  return result;
}

//----- (658C2AF0) --------------------------------------------------------
int __thiscall StatSlot_EncodeAndCopy(int this, _DWORD *a2)
{
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  _DWORD *v5; // esi
  int result; // eax

  v3 = (_DWORD *)(*(_DWORD *)(this + 12) + RandInRange_Int(0, 11988));
  *(_DWORD *)(this + 8) = v3;
  *v3 = *a2;
  v3[1] = a2[1];
  v3[2] = a2[2];
  StatBlob_Encode(*(_BYTE **)(this + 8), 0xCu);
  v4 = *(_DWORD **)(this + 8);
  *(_BYTE *)(this + 1) = 1;
  v5 = *(_DWORD **)(this + 4);
  *v5 = *v4;
  v5[1] = v4[1];
  result = v4[2];
  v5[2] = result;
  return result;
}

//----- (658C2B80) --------------------------------------------------------
int __thiscall EncVarSlot_SetStructE8(int this, const void *a2)
{
  void *v3; // edi
  int result; // eax
  const void *v5; // esi
  void *v6; // edi

  v3 = (void *)(RandInRange_Int(0, 231768) + *(_DWORD *)(this + 12));
  *(_DWORD *)(this + 8) = v3;
  qmemcpy(v3, a2, 0xE8u);
  result = StatBlob_Encode(*(_BYTE **)(this + 8), 0xE8u);
  v5 = *(const void **)(this + 8);
  v6 = *(void **)(this + 4);
  *(_BYTE *)(this + 1) = 1;
  qmemcpy(v6, v5, 0xE8u);
  return result;
}

//----- (658C2C00) --------------------------------------------------------
int __thiscall StatBlob_WriteEncoded(int this, const void *a2)
{
  void *v3; // edi
  int result; // eax
  const void *v5; // esi
  void *v6; // edi

  v3 = (void *)(RandInRange_Int(0, 59940) + *(_DWORD *)(this + 12));
  *(_DWORD *)(this + 8) = v3;
  qmemcpy(v3, a2, 0x3Cu);
  result = StatBlob_Encode(*(_BYTE **)(this + 8), 0x3Cu);
  v5 = *(const void **)(this + 8);
  v6 = *(void **)(this + 4);
  *(_BYTE *)(this + 1) = 1;
  qmemcpy(v6, v5, 0x3Cu);
  return result;
}

//----- (658C2C70) --------------------------------------------------------
bool __thiscall EncVarSlot_ValidateCopies(_DWORD *this)
{
  int v2; // eax
  _BYTE *v3; // ecx
  unsigned int v4; // edi
  unsigned __int8 *v5; // ecx
  unsigned __int8 *v6; // esi
  unsigned int v7; // edx

  v2 = *(this + 1);
  if ( !v2 )
    return 0;
  v3 = (_BYTE *)*(this + 2);
  if ( !v3 )
    return 0;
  *(this + 4) = v2;
  switch ( *(_BYTE *)this )
  {
    case 0:
    case 1:
      v4 = 4;
      goto LABEL_10;
    case 2:
      v4 = 16;
      goto LABEL_10;
    case 3:
      v4 = 76;
      goto LABEL_10;
    case 4:
      v4 = 12;
      goto LABEL_10;
    case 5:
      v4 = 232;
      goto LABEL_10;
    case 6:
      v4 = 60;
LABEL_10:
      if ( !*((_BYTE *)this + 1) )
      {
        StatBlob_Encode(v3, v4);
        *((_BYTE *)this + 1) = 1;
      }
      v5 = (unsigned __int8 *)*(this + 2);
      v6 = (unsigned __int8 *)*(this + 1);
      v7 = v4;
      break;
    default:
      return 0;
  }
  while ( *(_DWORD *)v6 == *(_DWORD *)v5 )
  {
    v7 -= 4;
    v5 += 4;
    v6 += 4;
    if ( v7 < 4 )
    {
      if ( !v7 )
        return 1;
      break;
    }
  }
  return *v6 == *v5 && (v7 <= 1 || v6[1] == v5[1] && (v7 <= 2 || v6[2] == v5[2] && v7 <= 3));
}
// 658C2CE7: conditional instruction was optimized away because edi.4 is in (==4|==C|==10|==3C|==4C|==E8)

//----- (658C2DF0) --------------------------------------------------------
WorldLoginReturnAddrPacked *__thiscall StatGroup_Init(
        WorldLoginReturnAddrPacked *this,
        size_t a2,
        size_t a3,
        size_t a4)
{
  int v5; // edi
  _BYTE *v6; // eax
  _BYTE *v7; // eax
  unsigned int v9; // [esp-4h] [ebp-20h]
  unsigned int v10; // [esp-4h] [ebp-20h]

  SharedMem_Map_Init(this);
  this->flag_pad_ip0 = a2;
  *((_DWORD *)this + 1) = a3;
  *((_DWORD *)this + 2) = a4;
  *((_DWORD *)this + 3) = 0;
  v5 = RandInRange_Int(0, 999);
  SharedMem_WriteDword_this(this, this->flag_pad_ip0 + *((_DWORD *)this + 1), v5);
  SharedMem_Memset(this, this->flag_pad_ip0, 0, *(this + 2));
  SharedMem_Memset(this, ++v5 * *((_DWORD *)this + 1) + this->flag_pad_ip0 + 1, 0, *(this + 2));
  v9 = *((_DWORD *)this + 2);
  SharedMem_GetPtr(this, this->flag_pad_ip0);
  StatBlob_Encode(v6, v9);
  v10 = *((_DWORD *)this + 2);
  SharedMem_GetPtr(this, v5 * *((_DWORD *)this + 1) + this->flag_pad_ip0 + 1);
  StatBlob_Encode(v7, v10);
  return this;
}
// 658C2E97: variable 'v6' is possibly undefined
// 658C2EB8: variable 'v7' is possibly undefined

//----- (658C2F50) --------------------------------------------------------
BOOL __thiscall StatGroup_ValidateCopies(unsigned int *this)
{
  int Dword_this; // ebx
  int v3; // edx
  unsigned int v4; // edi
  unsigned int v5; // ebx
  unsigned int v6; // eax
  unsigned __int8 *v7; // eax
  unsigned __int8 *v8; // ebx
  unsigned __int8 *v9; // eax

  Dword_this = SharedMem_ReadDword_this(this, *(this + 1) + *this);
  SharedMem_GetPtr(this, *this);
  v3 = *this;
  v4 = *(this + 2);
  v5 = *(this + 1) * (Dword_this + 1);
  *(this + 3) = v6;
  SharedMem_GetPtr(this, v5 + v3 + 1);
  v8 = v7;
  SharedMem_GetPtr(this, *this);
  if ( v4 < 4 )
  {
LABEL_4:
    if ( !v4 )
      return 1;
  }
  else
  {
    while ( *(_DWORD *)v9 == *(_DWORD *)v8 )
    {
      v4 -= 4;
      v8 += 4;
      v9 += 4;
      if ( v4 < 4 )
        goto LABEL_4;
    }
  }
  return *v9 == *v8 && (v4 <= 1 || v9[1] == v8[1] && (v4 <= 2 || v9[2] == v8[2] && v4 <= 3));
}
// 658C2F76: variable 'v6' is possibly undefined
// 658C2F8A: variable 'v7' is possibly undefined
// 658C2F96: variable 'v9' is possibly undefined

//----- (658C3040) --------------------------------------------------------
char __thiscall EncVarMgr_SetInt(_DWORD *this, unsigned __int8 a2, int a3)
{
  int v3; // eax
  int v4; // esi
  _DWORD *v5; // eax
  int *v6; // ecx
  int *v7; // edx

  LOBYTE(v3) = a2;
  if ( a2 < 0x16u )
  {
    v4 = *(this + a2 + 1);
    v5 = (_DWORD *)(*(_DWORD *)(v4 + 12) + RandInRange_Int(0, 3996));
    *(_DWORD *)(v4 + 8) = v5;
    *v5 = a3;
    StatBlob_Encode(*(_BYTE **)(v4 + 8), 4u);
    v6 = *(int **)(v4 + 8);
    v7 = *(int **)(v4 + 4);
    *(_BYTE *)(v4 + 1) = 1;
    v3 = *v6;
    *v7 = *v6;
  }
  return v3;
}

//----- (658C3090) --------------------------------------------------------
char __thiscall EncVarMgr_SetFloat(_DWORD *this, char a2, float a3)
{
  float *v3; // eax
  int v4; // esi
  float *v5; // eax
  float *v6; // ecx

  LOBYTE(v3) = a2;
  if ( (unsigned __int8)a2 < 0x16u )
  {
    v4 = *(this + (unsigned __int8)a2 + 1);
    v5 = (float *)(*(_DWORD *)(v4 + 12) + RandInRange_Int(0, 3996));
    *(_DWORD *)(v4 + 8) = v5;
    *v5 = a3;
    StatBlob_Encode(*(_BYTE **)(v4 + 8), 4u);
    v3 = *(float **)(v4 + 8);
    v6 = *(float **)(v4 + 4);
    *(_BYTE *)(v4 + 1) = 1;
    *v6 = *v3;
  }
  return (char)v3;
}

//----- (658C30E0) --------------------------------------------------------
unsigned __int8 __thiscall EncVarMgr_SetVec4(_DWORD *this, unsigned __int8 a2, float *a3)
{
  unsigned __int8 result; // al

  result = a2;
  if ( a2 < 0x16u )
    return (unsigned __int8)EncVarSlot_SetVec4(*(this + a2 + 1), a3);
  return result;
}

//----- (658C3120) --------------------------------------------------------
unsigned __int8 __thiscall StatContainer_GetSlotValue(_DWORD *this, unsigned __int8 a2, _DWORD *a3)
{
  unsigned __int8 result; // al

  result = a2;
  if ( a2 < 0x16u )
    return StatSlot_EncodeAndCopy(*(this + a2 + 1), a3);
  return result;
}

//----- (658C3140) --------------------------------------------------------
unsigned __int8 __thiscall EncVarSlotArray_SetByIndex(_DWORD *this, unsigned __int8 a2, const void *a3)
{
  unsigned __int8 result; // al

  result = a2;
  if ( a2 < 0x16u )
    return EncVarSlot_SetStructE8(*(this + a2 + 1), a3);
  return result;
}

//----- (658C3160) --------------------------------------------------------
unsigned __int8 __thiscall StatGroup_WriteGroup(_DWORD *this, unsigned __int8 a2, const void *a3)
{
  unsigned __int8 result; // al

  result = a2;
  if ( a2 < 0x16u )
    return StatBlob_WriteEncoded(*(this + a2 + 1), a3);
  return result;
}

//----- (658C3180) --------------------------------------------------------
int __thiscall EncVarMgr_GetInt(_DWORD *this, unsigned __int8 a2)
{
  int v3; // esi
  _BYTE *v4; // edi

  if ( a2 >= 0x16u )
    return 0;
  v3 = *(this + a2 + 1);
  v4 = *(_BYTE **)(v3 + 8);
  if ( *(_BYTE *)(v3 + 1) )
  {
    StatBlob_Decode(v4, 4u);
    *(_BYTE *)(v3 + 1) = 0;
  }
  return *(_DWORD *)v4;
}

//----- (658C31C0) --------------------------------------------------------
double __thiscall EncVarMgr_GetFloat(_DWORD *this, unsigned __int8 a2)
{
  int v3; // esi
  _BYTE *v4; // edi

  if ( a2 >= 0x16u )
    return 0.0;
  v3 = *(this + a2 + 1);
  v4 = *(_BYTE **)(v3 + 8);
  if ( *(_BYTE *)(v3 + 1) )
  {
    StatBlob_Decode(v4, 4u);
    *(_BYTE *)(v3 + 1) = 0;
  }
  return *(float *)v4;
}

//----- (658C3260) --------------------------------------------------------
_BYTE *__thiscall StatContainer_GetDecodedBlob(_DWORD *this, unsigned __int8 a2)
{
  int v2; // esi
  _BYTE *v3; // edi

  v2 = *(this + a2 + 1);
  v3 = *(_BYTE **)(v2 + 8);
  if ( *(_BYTE *)(v2 + 1) )
  {
    StatBlob_Decode(v3, 0xCu);
    *(_BYTE *)(v2 + 1) = 0;
  }
  return v3;
}

//----- (658C3290) --------------------------------------------------------
_BYTE *__thiscall EncVarMgr_GetStructE8(_DWORD *this, unsigned __int8 a2)
{
  int v2; // esi
  _BYTE *v3; // edi

  v2 = *(this + a2 + 1);
  v3 = *(_BYTE **)(v2 + 8);
  if ( *(_BYTE *)(v2 + 1) )
  {
    StatBlob_Decode(v3, 0xE8u);
    *(_BYTE *)(v2 + 1) = 0;
  }
  return v3;
}

//----- (658C32C0) --------------------------------------------------------
_BYTE *__thiscall StatGroup_GetPtr(_DWORD *this, unsigned __int8 a2)
{
  int v2; // esi
  _BYTE *v3; // edi

  v2 = *(this + a2 + 1);
  v3 = *(_BYTE **)(v2 + 8);
  if ( *(_BYTE *)(v2 + 1) )
  {
    StatBlob_Decode(v3, 0x3Cu);
    *(_BYTE *)(v2 + 1) = 0;
  }
  return v3;
}

//----- (658C32F0) --------------------------------------------------------
int __thiscall StatGroup_Read(_DWORD *this, char a2, _BYTE *a3)
{
  WorldLoginReturnAddrPacked *v3; // esi
  int Dword_this; // eax

  v3 = (WorldLoginReturnAddrPacked *)*(this + (unsigned __int8)a2 + 23);
  Dword_this = SharedMem_ReadDword_this(v3, v3->flag_pad_ip0 + v3[1].flag_pad_ip0);
  SharedMem_ReadBlock(v3, v3[1].flag_pad_ip0 * (Dword_this + 1) + v3->flag_pad_ip0 + 1, a3, v3[2]);
  return StatBlob_Decode(a3, v3[2].flag_pad_ip0);
}

//----- (658C3420) --------------------------------------------------------
char __thiscall EncVarMgr_ValidateOrBumpCounter(_DWORD *this, char a2, int a3)
{
  char result; // al
  _DWORD **v5; // edi
  int Int; // eax
  int v7; // eax

  result = a2;
  if ( (unsigned __int8)a2 < 0x16u )
  {
    v5 = (_DWORD **)(this + (unsigned __int8)a2 + 1);
    (*v5)[4] = 0;
    result = EncVarSlot_ValidateCopies(*v5);
    if ( !result )
    {
      Int = EncVarMgr_GetInt(this, 0);
      result = EncVarMgr_SetInt(this, 0, Int + 1);
    }
    if ( !(*v5)[4] )
    {
      v7 = EncVarMgr_GetInt(this, 0);
      return EncVarMgr_SetInt(this, 0, v7 + 1);
    }
  }
  return result;
}

//----- (658C3650) --------------------------------------------------------
void *__thiscall EncVarSlot_InitByType(void *this, void *a2)
{
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  float *v5; // eax
  float *v6; // eax
  float *v7; // eax
  int v8; // eax
  float *v9; // ecx
  float *v10; // eax
  float *v11; // eax
  float *v12; // ecx
  float *v13; // eax
  float *v14; // eax
  int v15; // eax
  const void *v16; // esi
  void *v17; // edi
  int v18; // ecx
  float *v19; // eax
  _DWORD *v20; // eax
  _DWORD *v21; // ecx
  _DWORD *v22; // eax
  _DWORD *v23; // ecx
  void *v24; // eax
  int v25; // eax
  int v26; // eax
  const void *v27; // esi
  void *v28; // edi
  float *v29; // eax
  float *v30; // eax
  int v31; // eax
  const void *v32; // esi
  void *v33; // edi

  *(_BYTE *)this = (_BYTE)a2;
  *((_DWORD *)this + 4) = 0;
  *((_BYTE *)this + 1) = 1;
  *((_DWORD *)this + 3) = 0;
  switch ( (char)a2 )
  {
    case 0:
      *((_DWORD *)this + 3) = operator new[](0xFA0u);
      v3 = operator new(4u);
      if ( v3 )
        *v3 = 0;
      else
        v3 = 0;
      *((_DWORD *)this + 1) = v3;
      v4 = (_DWORD *)(*((_DWORD *)this + 3) + RandInRange_Int(0, 3996));
      *((_DWORD *)this + 2) = v4;
      *v4 = 0;
      StatBlob_Encode(*((_BYTE **)this + 2), 4u);
      **((_DWORD **)this + 1) = **((_DWORD **)this + 2);
      return this;
    case 1:
      *((_DWORD *)this + 3) = operator new[](0xFA0u);
      v5 = (float *)operator new(4u);
      if ( v5 )
        *v5 = 0.0;
      else
        v5 = 0;
      *((_DWORD *)this + 1) = v5;
      v6 = (float *)(*((_DWORD *)this + 3) + RandInRange_Int(0, 3996));
      *((_DWORD *)this + 2) = v6;
      *v6 = 0.0;
      StatBlob_Encode(*((_BYTE **)this + 2), 4u);
      **((float **)this + 1) = **((float **)this + 2);
      return this;
    case 2:
      *((_DWORD *)this + 3) = operator new[](0x3E80u);
      v7 = (float *)operator new(0x10u);
      if ( v7 )
      {
        *v7 = 0.0;
        v7[1] = 0.0;
        v7[2] = 0.0;
        v7[3] = 1.0;
      }
      else
      {
        v7 = 0;
      }
      *((_DWORD *)this + 1) = v7;
      v8 = RandInRange_Int(0, 15984);
      v9 = (float *)*((_DWORD *)this + 1);
      v10 = (float *)(*((_DWORD *)this + 3) + v8);
      *((_DWORD *)this + 2) = v10;
      *v10 = *v9;
      v10[1] = v9[1];
      v10[2] = v9[2];
      v10[3] = v9[3];
      StatBlob_Encode(*((_BYTE **)this + 2), 0x10u);
      v11 = (float *)*((_DWORD *)this + 2);
      v12 = (float *)*((_DWORD *)this + 1);
      *v12 = *v11;
      v12[1] = v11[1];
      v12[2] = v11[2];
      v12[3] = v11[3];
      return this;
    case 3:
      *((_DWORD *)this + 3) = operator new[](0x128E0u);
      v13 = (float *)operator new(0x4Cu);
      if ( v13 )
        v14 = CameraParams_Init(v13);
      else
        v14 = 0;
      *((_DWORD *)this + 1) = v14;
      v15 = RandInRange_Int(0, 75924);
      v16 = (const void *)*((_DWORD *)this + 1);
      v17 = (void *)(v15 + *((_DWORD *)this + 3));
      *((_DWORD *)this + 2) = v17;
      qmemcpy(v17, v16, 0x4Cu);
      StatBlob_Encode(*((_BYTE **)this + 2), 0x4Cu);
      v18 = 19;
      goto LABEL_30;
    case 4:
      *((_DWORD *)this + 3) = operator new[](0x2EE0u);
      v19 = (float *)operator new(0xCu);
      if ( v19 )
      {
        *v19 = 0.0;
        v19[1] = 0.0;
        v19[2] = 0.0;
      }
      else
      {
        v19 = 0;
      }
      *((_DWORD *)this + 1) = v19;
      v20 = (_DWORD *)(*((_DWORD *)this + 3) + RandInRange_Int(0, 11988));
      v21 = (_DWORD *)*((_DWORD *)this + 1);
      *((_DWORD *)this + 2) = v20;
      *v20 = *v21;
      v20[1] = v21[1];
      v20[2] = v21[2];
      StatBlob_Encode(*((_BYTE **)this + 2), 0xCu);
      v22 = (_DWORD *)*((_DWORD *)this + 2);
      v23 = (_DWORD *)*((_DWORD *)this + 1);
      *v23 = *v22;
      v23[1] = v22[1];
      v23[2] = v22[2];
      return this;
    case 5:
      *((_DWORD *)this + 3) = operator new[](0x38A40u);
      v24 = operator new(0xE8u);
      if ( v24 )
        v25 = WeaponFireEntry_Init((int)v24);
      else
        v25 = 0;
      *((_DWORD *)this + 1) = v25;
      v26 = RandInRange_Int(0, 231768);
      v27 = (const void *)*((_DWORD *)this + 1);
      v28 = (void *)(v26 + *((_DWORD *)this + 3));
      *((_DWORD *)this + 2) = v28;
      qmemcpy(v28, v27, 0xE8u);
      StatBlob_Encode(*((_BYTE **)this + 2), 0xE8u);
      v18 = 58;
      goto LABEL_30;
    case 6:
      *((_DWORD *)this + 3) = operator new[](0xEA60u);
      v29 = (float *)operator new(0x3Cu);
      if ( v29 )
        v30 = CameraParams_Reset(v29);
      else
        v30 = 0;
      *((_DWORD *)this + 1) = v30;
      v31 = RandInRange_Int(0, 59940);
      v32 = (const void *)*((_DWORD *)this + 1);
      v33 = (void *)(v31 + *((_DWORD *)this + 3));
      *((_DWORD *)this + 2) = v33;
      qmemcpy(v33, v32, 0x3Cu);
      StatBlob_Encode(*((_BYTE **)this + 2), 0x3Cu);
      v18 = 15;
LABEL_30:
      qmemcpy(*((void **)this + 1), *((const void **)this + 2), 4 * v18);
      break;
    default:
      return this;
  }
  return this;
}

//----- (658C3A20) --------------------------------------------------------
BOOL __thiscall StatGroup_Write(WorldLoginReturnAddrPacked *this, void *Src)
{
  int v3; // edi
  _BYTE *v4; // eax
  _BYTE *v5; // eax
  unsigned int v7; // [esp-4h] [ebp-10h]
  unsigned int v8; // [esp-4h] [ebp-10h]

  v3 = RandInRange_Int(0, 999);
  SharedMem_WriteDword_this(this, *((_DWORD *)this + 1) + this->flag_pad_ip0, v3);
  SharedMem_WriteBlock(this, this->flag_pad_ip0, Src, *(this + 2));
  SharedMem_WriteBlock(this, ++v3 * *((_DWORD *)this + 1) + this->flag_pad_ip0 + 1, Src, *(this + 2));
  v7 = *((_DWORD *)this + 2);
  SharedMem_GetPtr(this, this->flag_pad_ip0);
  StatBlob_Encode(v4, v7);
  v8 = *((_DWORD *)this + 2);
  SharedMem_GetPtr(this, v3 * *((_DWORD *)this + 1) + this->flag_pad_ip0 + 1);
  StatBlob_Encode(v5, v8);
  return StatGroup_ValidateCopies(&this->flag_pad_ip0);
}
// 658C3A82: variable 'v4' is possibly undefined
// 658C3AA3: variable 'v5' is possibly undefined

//----- (658C3BD0) --------------------------------------------------------
char __thiscall StatGroup_WriteByIndex(unsigned int **this, char a2, void *Src)
{
  char result; // al

  result = a2;
  if ( (unsigned __int8)a2 < 9u )
    return StatGroup_Write((WorldLoginReturnAddrPacked *)*(this + (unsigned __int8)a2 + 23), Src);
  return result;
}

//----- (658C3E50) --------------------------------------------------------
char __thiscall StatGroupMgr_InitGroups(_DWORD *this)
{
  int v2; // ebx
  int i; // edi
  void *v4; // eax
  void *v5; // eax
  void *v6; // eax
  void *v7; // eax
  void *v8; // eax
  void *v9; // eax
  void *v10; // eax
  void *v11; // eax
  void *v12; // eax
  void *v13; // eax
  void *v14; // eax
  void *v15; // eax
  void *v16; // eax
  void *v17; // eax
  void *v18; // eax
  void *v19; // eax
  void *v20; // eax
  void *v21; // eax
  void *v22; // eax
  void *v23; // eax
  void *v24; // eax
  void *v25; // eax
  void *v26; // eax
  void *v27; // eax
  void *v28; // eax
  void *v29; // eax
  void *v30; // eax
  void *v31; // eax
  void *v32; // eax
  void *v33; // eax
  void *v34; // eax
  void *v35; // eax
  void *v36; // eax
  void *v37; // eax
  void *v38; // eax
  void *v39; // eax
  void *v40; // eax
  void *v41; // eax
  void *v42; // eax
  void *v43; // eax
  void *v44; // eax
  void *v45; // eax
  void *v46; // eax
  void *v47; // eax
  WorldLoginReturnAddrPacked *v48; // eax
  WorldLoginReturnAddrPacked *v49; // eax
  WorldLoginReturnAddrPacked *v50; // eax
  WorldLoginReturnAddrPacked *v51; // eax
  WorldLoginReturnAddrPacked *v52; // eax
  WorldLoginReturnAddrPacked *v53; // eax
  WorldLoginReturnAddrPacked *v54; // eax
  WorldLoginReturnAddrPacked *v55; // eax
  WorldLoginReturnAddrPacked *v56; // eax
  WorldLoginReturnAddrPacked *v57; // eax
  WorldLoginReturnAddrPacked *v58; // eax
  WorldLoginReturnAddrPacked *v59; // eax
  WorldLoginReturnAddrPacked *v60; // eax
  WorldLoginReturnAddrPacked *v61; // eax
  WorldLoginReturnAddrPacked *v62; // eax
  WorldLoginReturnAddrPacked *v63; // eax
  WorldLoginReturnAddrPacked *v64; // eax
  WorldLoginReturnAddrPacked *v65; // eax
  int v66; // edi
  int v67; // eax
  _DWORD *v68; // esi
  void *v69; // eax
  int v70; // edx
  unsigned int v71; // ecx
  char *v72; // edi
  char result; // al
  void *v74[100]; // [esp+10h] [ebp-1A4h]
  int v75; // [esp+1A0h] [ebp-14h]
  void *v76; // [esp+1A4h] [ebp-10h] BYREF
  int v77; // [esp+1B0h] [ebp-4h]

  v2 = Rand_InRange(5, 100);
  for ( i = 0; i < v2; ++i )
    v74[i] = operator new(4u);
  v4 = operator new(0x14u);
  v76 = v4;
  v77 = 0;
  if ( v4 )
    v5 = EncVarSlot_InitByType(v4, 0);
  else
    v5 = 0;
  v77 = -1;
  *(this + 1) = v5;
  v6 = operator new(0x14u);
  v76 = v6;
  v77 = 1;
  if ( v6 )
    v7 = EncVarSlot_InitByType(v6, (void *)2);
  else
    v7 = 0;
  v77 = -1;
  *(this + 2) = v7;
  v8 = operator new(0x14u);
  v76 = v8;
  v77 = 2;
  if ( v8 )
    v9 = EncVarSlot_InitByType(v8, (void *)6);
  else
    v9 = 0;
  v77 = -1;
  *(this + 3) = v9;
  v10 = operator new(0x14u);
  v76 = v10;
  v77 = 3;
  if ( v10 )
    v11 = EncVarSlot_InitByType(v10, 0);
  else
    v11 = 0;
  v77 = -1;
  *(this + 4) = v11;
  v12 = operator new(0x14u);
  v76 = v12;
  v77 = 4;
  if ( v12 )
    v13 = EncVarSlot_InitByType(v12, (void *)4);
  else
    v13 = 0;
  v77 = -1;
  *(this + 5) = v13;
  v14 = operator new(0x14u);
  v76 = v14;
  v77 = 5;
  if ( v14 )
    v15 = EncVarSlot_InitByType(v14, (void *)4);
  else
    v15 = 0;
  v77 = -1;
  *(this + 6) = v15;
  v16 = operator new(0x14u);
  v76 = v16;
  v77 = 6;
  if ( v16 )
    v17 = EncVarSlot_InitByType(v16, (void *)1);
  else
    v17 = 0;
  v77 = -1;
  *(this + 7) = v17;
  v18 = operator new(0x14u);
  v76 = v18;
  v77 = 7;
  if ( v18 )
    v19 = EncVarSlot_InitByType(v18, (void *)1);
  else
    v19 = 0;
  v77 = -1;
  *(this + 8) = v19;
  v20 = operator new(0x14u);
  v76 = v20;
  v77 = 8;
  if ( v20 )
    v21 = EncVarSlot_InitByType(v20, (void *)1);
  else
    v21 = 0;
  v77 = -1;
  *(this + 9) = v21;
  v22 = operator new(0x14u);
  v76 = v22;
  v77 = 9;
  if ( v22 )
    v23 = EncVarSlot_InitByType(v22, 0);
  else
    v23 = 0;
  v77 = -1;
  *(this + 10) = v23;
  v24 = operator new(0x14u);
  v76 = v24;
  v77 = 10;
  if ( v24 )
    v25 = EncVarSlot_InitByType(v24, 0);
  else
    v25 = 0;
  v77 = -1;
  *(this + 11) = v25;
  v26 = operator new(0x14u);
  v76 = v26;
  v77 = 11;
  if ( v26 )
    v27 = EncVarSlot_InitByType(v26, 0);
  else
    v27 = 0;
  v77 = -1;
  *(this + 12) = v27;
  v28 = operator new(0x14u);
  v76 = v28;
  v77 = 12;
  if ( v28 )
    v29 = EncVarSlot_InitByType(v28, 0);
  else
    v29 = 0;
  v77 = -1;
  *(this + 13) = v29;
  v30 = operator new(0x14u);
  v76 = v30;
  v77 = 13;
  if ( v30 )
    v31 = EncVarSlot_InitByType(v30, (void *)1);
  else
    v31 = 0;
  v77 = -1;
  *(this + 14) = v31;
  v32 = operator new(0x14u);
  v76 = v32;
  v77 = 14;
  if ( v32 )
    v33 = EncVarSlot_InitByType(v32, (void *)5);
  else
    v33 = 0;
  v77 = -1;
  *(this + 15) = v33;
  v34 = operator new(0x14u);
  v76 = v34;
  v77 = 15;
  if ( v34 )
    v35 = EncVarSlot_InitByType(v34, (void *)1);
  else
    v35 = 0;
  v77 = -1;
  *(this + 16) = v35;
  v36 = operator new(0x14u);
  v76 = v36;
  v77 = 16;
  if ( v36 )
    v37 = EncVarSlot_InitByType(v36, (void *)4);
  else
    v37 = 0;
  v77 = -1;
  *(this + 17) = v37;
  v38 = operator new(0x14u);
  v76 = v38;
  v77 = 17;
  if ( v38 )
    v39 = EncVarSlot_InitByType(v38, (void *)4);
  else
    v39 = 0;
  v77 = -1;
  *(this + 18) = v39;
  v40 = operator new(0x14u);
  v76 = v40;
  v77 = 18;
  if ( v40 )
    v41 = EncVarSlot_InitByType(v40, (void *)4);
  else
    v41 = 0;
  v77 = -1;
  *(this + 19) = v41;
  v42 = operator new(0x14u);
  v76 = v42;
  v77 = 19;
  if ( v42 )
    v43 = EncVarSlot_InitByType(v42, (void *)4);
  else
    v43 = 0;
  v77 = -1;
  *(this + 20) = v43;
  v44 = operator new(0x14u);
  v76 = v44;
  v77 = 20;
  if ( v44 )
    v45 = EncVarSlot_InitByType(v44, (void *)4);
  else
    v45 = 0;
  v77 = -1;
  *(this + 21) = v45;
  v46 = operator new(0x14u);
  v76 = v46;
  v77 = 21;
  if ( v46 )
    v47 = EncVarSlot_InitByType(v46, (void *)4);
  else
    v47 = 0;
  v77 = -1;
  *(this + 22) = v47;
  v48 = (WorldLoginReturnAddrPacked *)operator new(0x10u);
  v76 = v48;
  v77 = 22;
  if ( v48 )
    v49 = StatGroup_Init(v48, 0x1E653u, 1u, 2u);
  else
    v49 = 0;
  v77 = -1;
  *(this + 23) = v49;
  v50 = (WorldLoginReturnAddrPacked *)operator new(0x10u);
  v76 = v50;
  v77 = 23;
  if ( v50 )
    v51 = StatGroup_Init(v50, 0x3047u, 0x6Au, 0x1A8u);
  else
    v51 = 0;
  v77 = -1;
  *(this + 24) = v51;
  v52 = (WorldLoginReturnAddrPacked *)operator new(0x10u);
  v76 = v52;
  v77 = 24;
  if ( v52 )
    v53 = StatGroup_Init(v52, 0x1D2AEu, 1u, 4u);
  else
    v53 = 0;
  v77 = -1;
  *(this + 25) = v53;
  v54 = (WorldLoginReturnAddrPacked *)operator new(0x10u);
  v76 = v54;
  v77 = 25;
  if ( v54 )
    v55 = StatGroup_Init(v54, 0x1DE7Fu, 1u, 4u);
  else
    v55 = 0;
  v77 = -1;
  *(this + 26) = v55;
  v56 = (WorldLoginReturnAddrPacked *)operator new(0x10u);
  v76 = v56;
  v77 = 26;
  if ( v56 )
    v57 = StatGroup_Init(v56, 0x1E269u, 1u, 4u);
  else
    v57 = 0;
  v77 = -1;
  *(this + 27) = v57;
  v58 = (WorldLoginReturnAddrPacked *)operator new(0x10u);
  v76 = v58;
  v77 = 27;
  if ( v58 )
    v59 = StatGroup_Init(v58, 0x1D6AAu, 1u, 4u);
  else
    v59 = 0;
  v77 = -1;
  *(this + 28) = v59;
  v60 = (WorldLoginReturnAddrPacked *)operator new(0x10u);
  v76 = v60;
  v77 = 28;
  if ( v60 )
    v61 = StatGroup_Init(v60, 0x1DA94u, 1u, 4u);
  else
    v61 = 0;
  v77 = -1;
  *(this + 29) = v61;
  v62 = (WorldLoginReturnAddrPacked *)operator new(0x10u);
  v76 = v62;
  v77 = 29;
  if ( v62 )
    v63 = StatGroup_Init(v62, 0x1CEC3u, 1u, 4u);
  else
    v63 = 0;
  v77 = -1;
  *(this + 30) = v63;
  v64 = (WorldLoginReturnAddrPacked *)operator new(0x10u);
  v76 = v64;
  v77 = 30;
  if ( v64 )
    v65 = StatGroup_Init(v64, 0x1EA48u, 1u, 4u);
  else
    v65 = 0;
  v77 = -1;
  v66 = 0;
  for ( *(this + 31) = v65; v66 < v2; ++v66 )
    operator delete(v74[v66]);
  v67 = Rand_InRange(20, 100);
  if ( v67 <= 0 )
    return 1;
  v68 = this + 32;
  v75 = v67;
  do
  {
    v69 = (void *)Rand_InRange(50, 1000);
    v70 = v68[1];
    v76 = v69;
    if ( v70 )
      v71 = (v68[3] - v70) >> 2;
    else
      v71 = 0;
    v72 = (char *)v68[2];
    if ( (int)&v72[-v70] >> 2 >= v71 )
    {
      Vector_InsertN((int)v68, v72, 1u, (unsigned int)&v76);
    }
    else
    {
      *(_DWORD *)v72 = v69;
      v68[2] = v72 + 4;
    }
    result = 1;
    --v75;
  }
  while ( v75 );
  return result;
}

//----- (658C44E0) --------------------------------------------------------
_DWORD *__thiscall EncVarMgr_Ctor(_DWORD *this)
{
  _DWORD *v2; // esi
  _BYTE *v3; // eax
  _BYTE *v4; // eax

  v2 = this + 1;
  SharedMem_Map_Init(this + 1);
  *this = &off_659D05C8;
  *(this + 33) = 0;
  *(this + 34) = 0;
  *(this + 35) = 0;
  v3 = operator new(1u);
  if ( v3 )
  {
    *v3 = 0;
    dword_65AC0DF0 = (int)v3;
  }
  else
  {
    dword_65AC0DF0 = 0;
  }
  v4 = operator new(1u);
  if ( v4 )
  {
    *v4 = 0;
    dword_65AC0DF4 = (int)v4;
  }
  else
  {
    dword_65AC0DF4 = 0;
  }
  *v2 = 0;
  v2[1] = 0;
  v2[2] = 0;
  v2[3] = 0;
  v2[4] = 0;
  v2[5] = 0;
  v2[6] = 0;
  v2[7] = 0;
  v2[8] = 0;
  v2[9] = 0;
  v2[10] = 0;
  v2[11] = 0;
  v2[12] = 0;
  v2[13] = 0;
  v2[14] = 0;
  v2[15] = 0;
  v2[16] = 0;
  v2[17] = 0;
  v2[18] = 0;
  v2[19] = 0;
  v2[20] = 0;
  v2[21] = 0;
  *(this + 23) = 0;
  *(this + 24) = 0;
  *(this + 25) = 0;
  *(this + 26) = 0;
  *(this + 27) = 0;
  *(this + 28) = 0;
  *(this + 29) = 0;
  *(this + 30) = 0;
  *(this + 31) = 0;
  if ( !StatGroupMgr_InitGroups(this) )
    (*(void (__cdecl **)(const char *))(g_pILTClient + 148))("ERROR: Failed to initialize game!");
  return this;
}
// 659D05C8: using guessed type void *off_659D05C8;
// 65AC0DF0: using guessed type int dword_65AC0DF0;
// 65AC0DF4: using guessed type int dword_65AC0DF4;

//----- (658C4760) --------------------------------------------------------
float *__thiscall BeamFX_Ctor(float *this)
{
  *(this + 12) = 0.001;
  *(this + 11) = 0.0;
  *(this + 1) = 0.0;
  *(this + 2) = 0.0;
  *(this + 3) = 0.0;
  *(this + 4) = 0.0;
  *(this + 5) = 0.0;
  *(this + 6) = 0.0;
  *(this + 7) = 0.0;
  *(this + 8) = 0.0;
  *(this + 9) = 0.0;
  *(this + 10) = 0.0;
  *((_BYTE *)this + 52) = 0;
  *(_DWORD *)this = &off_659D05F4;
  *(this + 14) = 255.0;
  *(this + 15) = 255.0;
  *(this + 16) = 255.0;
  *(this + 17) = 0.0;
  *(this + 18) = 0.0;
  *(this + 19) = 0.0;
  *(this + 20) = 0.0;
  *(this + 21) = 5.0;
  *(this + 22) = 0.0;
  *(this + 23) = 0.0;
  *(this + 24) = 0.0;
  *(this + 25) = 0.0;
  *(this + 26) = 0.0;
  *(this + 27) = 0.0;
  *(this + 28) = 0.80000001;
  *(this + 29) = 0.0;
  *(this + 30) = 0.0;
  *(this + 31) = 0.0;
  *((_BYTE *)this + 128) = 0;
  *(this + 33) = 0.0;
  return this;
}
// 659D05F4: using guessed type void *off_659D05F4;

//----- (658C4850) --------------------------------------------------------
LONG __stdcall SharedMem_WriteU8_0xA6(unsigned __int8 a1)
{
  return SharedMem_WriteU8_std(0xA6u, a1);
}

//----- (658C48A0) --------------------------------------------------------
void __thiscall WeaponZoom_Reset(int this)
{
  if ( 1.0 != *(float *)(this + 8) )
  {
    *(float *)(this + 8) = 1.0;
    ModelAnim_PlaySequence(*((_DWORD *)dword_65ABF700 + 1), 1.0, 0);
    SoundMgr_PlaySoundByIndex(dword_65ABF750, 0x68u);
    *(_DWORD *)(this + 16) = 0;
    EncVarMgr_SetInt((_DWORD *)g_pEncVarMgr, 9u, 0);
  }
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658C4910) --------------------------------------------------------
LONG __thiscall WeaponFire_SetState(void *this, int a2)
{
  return SharedMem_WriteDword_this(this, 0x3041u, a2);
}

//----- (658C4930) --------------------------------------------------------
void __thiscall WeaponZoom_Update(int this)
{
  double v2; // st7
  float v3; // [esp+4h] [ebp-4h]

  if ( *(_DWORD *)(this + 16) )
  {
    v3 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 104))(g_pILTClient) * 20.0
       + *(float *)(this + 8);
    *(float *)(this + 8) = v3;
    if ( *(float *)(this + 12) < (double)v3 )
    {
      v2 = *(float *)(this + 12);
      *(_DWORD *)(this + 16) = 0;
      *(float *)(this + 8) = v2;
    }
    ModelAnim_PlaySequence(*((_DWORD *)dword_65ABF700 + 1), *(float *)(this + 8), 0);
  }
}

//----- (658C49A0) --------------------------------------------------------
char __thiscall WeaponZoom_ResetIfActive(int this)
{
  int Int; // eax

  Int = EncVarMgr_GetInt((_DWORD *)g_pEncVarMgr, 9u);
  if ( Int )
  {
    *(float *)(this + 8) = 1.0;
    ModelAnim_PlaySequence(*((_DWORD *)dword_65ABF700 + 1), 1.0, 0);
    MotionBlur_Apply(g_pGameClientShell, 1.0, -15329770, 1);
    SoundMgr_PlaySoundByIndex(dword_65ABF750, 0x68u);
    *((_BYTE *)dword_65ABF71C + 132) = 0;
    LOBYTE(Int) = EncVarMgr_SetInt((_DWORD *)g_pEncVarMgr, 9u, 0);
    *(_DWORD *)(this + 16) = 0;
  }
  return Int;
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658C4A20) --------------------------------------------------------
bool __stdcall Vec3_IsWithinBounds_511(float *a1)
{
  return *a1 <= 511.0 && a1[1] <= 511.0 && a1[2] <= 511.0 && *a1 >= -511.0 && a1[1] >= -511.0 && a1[2] >= -511.0;
}

//----- (658C4A90) --------------------------------------------------------
BOOL WeaponZoom_IsActive()
{
  return EncVarMgr_GetInt((_DWORD *)g_pEncVarMgr, 9u) == 1;
}
// 65ABF76C: using guessed type int g_pEncVarMgr;

//----- (658C4AF0) --------------------------------------------------------
char *__thiscall Packet_ID_RELOAD_ctor(char *this)
{
  *(_DWORD *)this = &vtbl_Packet_Unknown0;
  *(this + 8) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)(this + 12));
  *((_DWORD *)this + 264) = 0;
  *((_DWORD *)this + 265) = 0;
  *((_DWORD *)this + 268) = 0;
  *(this + 1076) = 0;
  *((_DWORD *)this + 270) = 0;
  *((_DWORD *)this + 271) = 0;
  *(this + 1064) = -111;
  *(_DWORD *)this = &off_659D063C;
  return this;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 659D063C: using guessed type void *off_659D063C;

//----- (658C4B50) --------------------------------------------------------
void __thiscall WeaponFire_SetNextFireTimePlus20(float *this)
{
  *(this + 220) = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient) + 20.0;
}

//----- (658C4E60) --------------------------------------------------------
int __thiscall WeaponFire_ResetStateAndAim(int this)
{
  SharedMem_WriteDword_this((void *)this, 0x3040u, 0);
  WeaponFire_SetState((void *)this, 0);
  SharedMem_WriteDword_this((void *)this, 0x3042u, -1);
  *(_WORD *)(this + 4) = 0;
  *(float *)(this + 32) = 0.0;
  *(float *)(this + 36) = 0.0;
  *(float *)(this + 40) = 0.0;
  return 0;
}

//----- (658C4EA0) --------------------------------------------------------
LONG __thiscall WeaponFire_QueueState(int *this, int a2, int a3)
{
  LONG result; // eax
  int Dword_this; // eax

  result = SharedMem_ReadDword_this(this, 0x3041u);
  if ( a2 != result )
  {
    result = SharedMem_ReadDword_this(this, 0x3042u);
    if ( a2 != result )
    {
      Dword_this = SharedMem_ReadDword_this(this, 0x3041u);
      SharedMem_WriteDword_this(this, 0x3040u, Dword_this);
      if ( a3 )
      {
        SharedMem_WriteDword_this(this, 0x3042u, a2);
        result = a3 + timeGetTime();
        *this = result;
      }
      else
      {
        WeaponFire_SetState(this, a2);
        return SharedMem_WriteDword_this(this, 0x3042u, -1);
      }
    }
  }
  return result;
}

//----- (658C4FB0) --------------------------------------------------------
LONG __thiscall WeaponFire_PlayEquipSfxAndQueueState4(void *this)
{
  unsigned __int16 Dword_this; // ax
  int v3; // eax

  Dword_this = SharedMem_ReadDword_this(this, 0x303Eu);
  if ( (unsigned __int16)(Dword_this - 1) <= 0xBBFu )
  {
    v3 = g_ItemTemplateById[Dword_this];
    if ( v3 )
      SoundMgr_PlaySoundByIndex(dword_65ABF750, *(unsigned __int16 *)(v3 + 112));
  }
  return WeaponFire_QueueState((int *)this, 4, 0);
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658C5000) --------------------------------------------------------
LONG __thiscall Weapon_StopFire(int *this)
{
  WeaponFire_QueueState(this, 5, 0);
  WeaponZoom_Reset((int)this);
  return SharedMem_WriteU8_std(0x3044u, 0);
}

//----- (658C5030) --------------------------------------------------------
float *__stdcall WeaponFire_GetAimVectors(float *a1, float *a2)
{
  float *v2; // eax
  float *result; // eax

  v2 = (float *)dword_65ABF6FC;
  *a1 = *((float *)dword_65ABF6FC + 16);
  v2 += 16;
  a1[1] = v2[1];
  a1[2] = v2[2];
  result = (float *)((char *)dword_65ABF6FC + 76);
  *a2 = *((float *)dword_65ABF6FC + 19);
  a2[1] = result[1];
  a2[2] = result[2];
  a2[3] = result[3];
  return result;
}

//----- (658C5120) --------------------------------------------------------
int __thiscall WeaponFire_SetCurrentWeaponId(void *this, unsigned __int16 a2)
{
  SharedMem_WriteDword_this(this, 0x303Eu, a2);
  if ( a2 )
  {
    WeaponFire_PlayEquipSfxAndQueueState4(this);
  }
  else
  {
    WeaponZoom_Reset_Thunk((int)this);
    WeaponFire_ResetStateAndAim((int)this);
  }
  return 1;
}

//----- (658C5170) --------------------------------------------------------
LONG __thiscall WeaponFire_SetCurrentWeaponIdAndFlag(void *this, unsigned __int16 a2)
{
  LONG result; // eax

  result = WeaponFire_SetCurrentWeaponId(this, a2);
  if ( result )
  {
    SharedMem_WriteDword_this(this, 0x3045u, a2);
    return SharedMem_WriteU8_std(0x3043u, 1u);
  }
  return result;
}

//----- (658C51B0) --------------------------------------------------------
bool __thiscall WeaponFire_IsDistanceSqBelowThreshold(void *this, float a2, float a3, float a4)
{
  unsigned int Dword_this; // ecx
  double v6; // st7
  double v7; // st7
  float v9; // [esp+4h] [ebp-Ch] BYREF
  float v10; // [esp+8h] [ebp-8h]
  float v11; // [esp+Ch] [ebp-4h]
  float v12; // [esp+20h] [ebp+10h]
  float v13; // [esp+20h] [ebp+10h]

  SharedMem_ReadVec3(this, 0x1EA3Fu, &v9);
  Dword_this = SharedMem_ReadDword_this(this, 0x1EA42u);
  v12 = (a3 - v10) * (a3 - v10) + (a2 - v9) * (a2 - v9) + (a4 - v11) * (a4 - v11);
  v6 = v12;
  if ( v12 >= 0.0 )
    v7 = v6 + 0.5;
  else
    v7 = v6 - 0.5;
  v13 = v7;
  return (unsigned int)(__int64)v13 < Dword_this;
}

//----- (658C52E0) --------------------------------------------------------
char __thiscall Packet_ID_RELOAD_write(int this)
{
  char result; // al
  char *v3; // ecx

  result = Packet_WriteHeader(this);
  if ( result )
  {
    BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1072));
    v3 = (char *)(this + 12);
    if ( *(_BYTE *)(this + 1076) )
      BitStream_WriteBit1(v3);
    else
      BitStream_WriteBit0(v3);
    if ( !*(_BYTE *)(this + 1076) )
    {
      BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1080));
      BitStream_Write_u32c((char *)this, *(_DWORD *)(this + 1084));
    }
    return 1;
  }
  return result;
}

//----- (658C5340) --------------------------------------------------------
int __thiscall WeaponFire_ClearCurrentWeapon(void *this)
{
  WeaponFire_SetCurrentWeaponId(this, 0);
  return 1;
}

//----- (658C5350) --------------------------------------------------------
char __thiscall WeaponFire_TryReload(_DWORD *this)
{
  unsigned int Int; // eax
  int v3; // edi
  int v4; // eax
  int v5; // esi
  int v6; // esi
  char *v7; // eax
  int v8; // esi
  char *v9; // eax
  char v11[12]; // [esp+14h] [ebp-480h] BYREF
  _BYTE v12[1060]; // [esp+20h] [ebp-474h] BYREF
  int Dword_this; // [esp+444h] [ebp-50h]
  char v14; // [esp+448h] [ebp-4Ch]
  _DWORD v15[12]; // [esp+454h] [ebp-40h] BYREF
  int v16; // [esp+490h] [ebp-4h]

  LOWORD(Int) = SharedMem_ReadDword_this(this, 0x303Eu);
  if ( (unsigned __int16)(Int - 1) <= 0xBBFu )
  {
    v3 = g_ItemTemplateById[(unsigned __int16)Int];
    if ( v3 )
    {
      if ( *(_BYTE *)(v3 + 8) == 3 && !*(_BYTE *)(v3 + 88) )
      {
        LOWORD(Int) = *(_WORD *)(v3 + 100);
        if ( (_WORD)Int )
        {
          if ( (unsigned __int16)Int < 0xBC1u )
          {
            LOBYTE(Int) = SharedMem_ReadBool_std(0x3044u);
            if ( !(_BYTE)Int )
            {
              LOBYTE(Int) = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 0x1000000);
              if ( !(_BYTE)Int
                && (SharedMem_ReadDword_this(this, 0x3041u) == 1 || (Int = SharedMem_ReadDword_this(this, 0x3041u)) == 0) )
              {
                Int = EncVarMgr_GetInt((_DWORD *)g_pEncVarMgr, 9u);
                if ( !Int && !*(this + 4) )
                {
                  Int = SharedMem_ReadDword_this(dword_65ABF73C, 0x8Fu);
                  if ( Int <= 2 || Int == 18 || Int == 20 )
                  {
                    if ( StatGroup_CheckLevelThreshold() )
                    {
                      v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5335);
LABEL_27:
                      v8 = v4;
                      if ( v4 )
                        v9 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v4);
                      else
                        v9 = (char *)byte_659A8B98;
                      LOBYTE(Int) = FriendList_AddEntry(
                                      dword_65ABF748,
                                      v9,
                                      10,
                                      0,
                                      1,
                                      "FF000000",
                                      "FFED0000",
                                      0,
                                      0,
                                      0,
                                      0);
                      if ( v8 )
                        LOBYTE(Int) = (*(char (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(
                                        g_pILTClient,
                                        v8);
                      return Int;
                    }
                    v5 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
                    if ( EquipSlots_GetWeapon((void *)(v5 + 612), *(_BYTE *)(v5 + 756)) )
                    {
                      ItemStructA_InitAlt((char *)v15);
                      if ( ItemList_FindEntryById_CopyEntry((_WORD *)v5, *(_WORD *)(v3 + 100), v15)
                        && ItemSlot_GetItemId((unsigned __int16 *)v15) )
                      {
                        SoundMgr_PlaySoundByIndex(dword_65ABF750, *(unsigned __int16 *)(v3 + 118));
                        SendPacket_ID_0x71_UseItem(1, 1);
                        Packet_ID_RELOAD_ctor(v11);
                        v16 = 0;
                        Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
                        v14 = 1;
                        Packet_ID_RELOAD_write((int)v11);
                        LTClient_SendPacket_BuildIfNeeded(v11, 2, 1, 3, 0);
                        WeaponFire_QueueState(this, 3, 0);
                        v16 = -1;
                        *(_DWORD *)v11 = &vtbl_Packet_Unknown0;
                        LOBYTE(Int) = BitStream_FreeOwnedBuffer((int)v12);
                        return Int;
                      }
                      v4 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5338);
                      goto LABEL_27;
                    }
                    v6 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5337);
                    if ( v6 )
                      v7 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v6);
                    else
                      v7 = (char *)byte_659A8B98;
                    LOBYTE(Int) = FriendList_AddEntry(dword_65ABF748, v7, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
                    if ( v6 )
                      LOBYTE(Int) = (*(char (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v6);
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  return Int;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658C5680) --------------------------------------------------------
char __thiscall WeaponFire_SwitchWeapon(_WORD *this, unsigned __int16 a2)
{
  __int16 Dword_this; // bx

  Dword_this = SharedMem_ReadDword_this(this, 0x303Eu);
  if ( Dword_this == a2 || a2 && !ItemTemplate_IsType3or4(g_ItemTemplateById, a2) )
    return 0;
  if ( Dword_this )
  {
    *(this + 2) = a2;
    Weapon_StopFire((int *)this);
  }
  else
  {
    WeaponFire_SetCurrentWeaponIdAndFlag(this, a2);
  }
  return 1;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658C56F0) --------------------------------------------------------
int __thiscall WeaponFire_Holster(_WORD *this)
{
  unsigned __int16 Dword_this; // ax
  int v3; // eax
  int result; // eax

  Dword_this = SharedMem_ReadDword_this(this, 0x303Eu);
  if ( (unsigned __int16)(Dword_this - 1) <= 0xBBFu )
  {
    v3 = g_ItemTemplateById[Dword_this];
    if ( v3 )
      SoundMgr_PlaySoundByIndex(dword_65ABF750, *(unsigned __int16 *)(v3 + 114));
  }
  if ( SharedMem_ReadDword_this(this, 0x3042u) == 1
    || SharedMem_ReadDword_this(this, 0x3041u) == 1
    || SharedMem_ReadDword_this(this, 0x3041u) == 2 )
  {
    WeaponFire_QueueState((int *)this, 0, 0);
  }
  SharedMem_WriteU8_std(0x6Eu, 1u);
  SharedMem_WriteDword_this((void *)(dword_65ABF748 + 4), 0xA5u, 0);
  SharedMem_WriteU8_std(0xA6u, 0);
  WeaponFire_SwitchWeapon(this, 0);
  result = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  *(_BYTE *)(result + 756) = 0;
  return result;
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658C57D0) --------------------------------------------------------
void *__thiscall WeaponFire_GetMuzzleFlashPos(void *this, float *a2)
{
  void *result; // eax
  unsigned int v3; // esi
  float v4[4]; // [esp+0h] [ebp-10h] BYREF

  result = (void *)SharedMem_ReadDword_this(this, 0x303Eu);
  if ( (_WORD)result )
  {
    result = dword_65ABF704;
    if ( dword_65ABF704 )
    {
      v3 = *(_DWORD *)dword_65ABF704;
      if ( *(_DWORD *)dword_65ABF704 )
      {
        result = (void *)sub_658A0710(v3, (int)"Flash", a2, v4);
        if ( result )
          return (void *)(*(int (__thiscall **)(int, unsigned int, float *))(*(_DWORD *)g_pILTClient + 152))(
                           g_pILTClient,
                           v3,
                           a2);
      }
    }
  }
  return result;
}

//----- (658C5830) --------------------------------------------------------
void __thiscall SendPacket_ID_0x66_WeaponFire(int this)
{
  unsigned __int16 Dword_this; // di
  void (__thiscall *v3)(int, int, int); // eax
  unsigned __int8 v4; // al
  unsigned __int16 v5; // ax
  bool v6; // bl
  void (__thiscall *v7)(int, int, _DWORD); // eax
  int v8; // [esp-8h] [ebp-6Ch]
  float v9[4]; // [esp+10h] [ebp-54h] BYREF
  float v10[3]; // [esp+20h] [ebp-44h] BYREF
  float v11[3]; // [esp+2Ch] [ebp-38h] BYREF
  float v12; // [esp+38h] [ebp-2Ch] BYREF
  float v13; // [esp+3Ch] [ebp-28h]
  float v14; // [esp+40h] [ebp-24h]
  int v15; // [esp+44h] [ebp-20h] BYREF
  float v16; // [esp+48h] [ebp-1Ch]
  float v17; // [esp+4Ch] [ebp-18h]
  float v18; // [esp+50h] [ebp-14h]
  int v19; // [esp+54h] [ebp-10h] BYREF
  int v20; // [esp+60h] [ebp-4h]

  Dword_this = SharedMem_ReadDword_this((void *)this, 0x303Eu);
  if ( Dword_this && g_pGameClientShell && g_pILTClient )
  {
    v9[0] = 0.0;
    v9[1] = 0.0;
    v9[2] = 0.0;
    v9[3] = 1.0;
    WeaponFire_GetAimVectors(v11, v9);
    WeaponFire_GetMuzzleFlashPos((void *)this, v10);
    (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 152))(
      g_pILTClient,
      *(_DWORD *)dword_65ABF704,
      &v12);
    v13 = v13 + 40.0;
    v18 = v12 + *(float *)(this + 32);
    v17 = *(float *)(this + 36) + v13;
    v16 = *(float *)(this + 40) + v14;
    v11[0] = v18;
    v11[1] = v17;
    v11[2] = v16;
    LTObject_Create(&v19);
    v3 = *(void (__thiscall **)(int, int, int))(*(_DWORD *)v19 + 36);
    v20 = 0;
    v3(v19, 102, 8);
    (*(void (__thiscall **)(int, float *, int))(*(_DWORD *)v19 + 44))(v19, v10, 96);
    (*(void (__thiscall **)(int, float *, int))(*(_DWORD *)v19 + 44))(v19, v11, 96);
    (*(void (__thiscall **)(int, float *, int))(*(_DWORD *)v19 + 44))(v19, v9, 128);
    v4 = Rand_InRange(2, 255);
    (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)v19 + 36))(v19, v4, 8);
    (*(void (__thiscall **)(int, _DWORD, int))(*(_DWORD *)v19 + 36))(v19, Dword_this, 16);
    v5 = *(_WORD *)(this + 44);
    v6 = !v5 || v5 >= 0xBC1u;
    (*(void (__thiscall **)(int, bool, int))(*(_DWORD *)v19 + 36))(v19, v6, 1);
    v8 = *FXInstance_Clone(&v19, &v15);
    v7 = *(void (__thiscall **)(int, int, _DWORD))(*(_DWORD *)g_pILTClient + 324);
    LOBYTE(v20) = 1;
    v7(g_pILTClient, v8, 0);
    LOBYTE(v20) = 0;
    if ( v15 )
      (*(void (__thiscall **)(int))(*(_DWORD *)v15 + 8))(v15);
    if ( v6 )
    {
      Item_ApplyConsumable(Dword_this);
      if ( Dword_this != 21 && Dword_this != 24 && Dword_this != 25 && Dword_this != 29 && Dword_this != 31 )
        WeaponFire_SetNextFireTimePlus20((float *)dword_65ABF704);
    }
    v20 = -1;
    if ( v19 )
      (*(void (__thiscall **)(int))(*(_DWORD *)v19 + 8))(v19);
  }
}

//----- (658C5A50) --------------------------------------------------------
__int16 __thiscall Item_GetWeaponFireDelayStat(_WORD *this, __int16 a2, _DWORD *a3)
{
  char *v3; // eax
  int v5; // eax
  __int16 v6; // di
  char *v7; // [esp+Ch] [ebp-1Ch] BYREF
  void *v8; // [esp+10h] [ebp-18h]
  int v9; // [esp+14h] [ebp-14h]
  int v10; // [esp+18h] [ebp-10h]
  int v11; // [esp+24h] [ebp-4h]

  v3 = CharSlots_FindByIdAndSetActive(this, a2);
  if ( !v3 )
    return 10000;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  Item_CollectStatById((int)v3, a3, &v7, 36);
  v5 = ItemStatList_FindById(&v7, 36);
  if ( v5 )
    v6 = *(_WORD *)(v5 + 4);
  else
    v6 = 10000;
  if ( v8 )
    operator delete(v8);
  return v6;
}

//----- (658C5B40) --------------------------------------------------------
int Player_GetCurrentWeaponFireDelayStat()
{
  int v0; // esi
  _DWORD *v1; // eax
  unsigned __int8 v2; // dl

  v0 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
  v1 = (_DWORD *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 4);
  if ( v0 && v1 && (v2 = *(_BYTE *)(v0 + 756)) != 0 && v2 < 4u )
    return (unsigned __int16)Item_GetWeaponFireDelayStat((_WORD *)(v0 + 612), *(_WORD *)(48 * v2 + v0 + 612 - 44), v1);
  else
    return 10000;
}
// 65A5AA4C: using guessed type int g_LTClient;

//----- (658C5BA0) --------------------------------------------------------
unsigned int __thiscall WeaponFire_UseAmmoItem(_DWORD *this)
{
  unsigned int result; // eax
  int v2; // esi
  int v3; // ebx
  int *Weapon; // edi
  int v5; // esi
  char *v6; // eax
  int v7; // esi
  char *v8; // eax
  int v9; // esi
  char v11[12]; // [esp+18h] [ebp-480h] BYREF
  _BYTE v12[1060]; // [esp+24h] [ebp-474h] BYREF
  int Dword_this; // [esp+448h] [ebp-50h]
  int v14; // [esp+450h] [ebp-48h]
  int v15; // [esp+454h] [ebp-44h]
  char v16[48]; // [esp+458h] [ebp-40h] BYREF
  int v17; // [esp+494h] [ebp-4h]

  result = (unsigned __int16)SharedMem_ReadDword_this(this, 0x303Eu);
  if ( (unsigned __int16)(result - 1) <= 0xBBFu )
  {
    result = (unsigned __int16)result;
    v2 = g_ItemTemplateById[(unsigned __int16)result];
    if ( v2 )
    {
      if ( *(_BYTE *)(v2 + 8) == 3 && !*(_BYTE *)(v2 + 88) )
      {
        result = *(unsigned __int16 *)(v2 + 100);
        if ( (_WORD)result )
        {
          if ( (unsigned __int16)result < 0xBC1u )
          {
            result = (*(int (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 68))(g_LTClient, 0x1000000);
            if ( !(_BYTE)result )
            {
              v3 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
              Weapon = (int *)EquipSlots_GetWeapon((void *)(v3 + 612), *(_BYTE *)(v3 + 756));
              if ( Weapon )
              {
                ItemStructA_InitAlt(v16);
                if ( ItemList_FindEntryById_CopyEntry((_WORD *)v3, *(_WORD *)(v2 + 100), v16)
                  && ItemSlot_GetItemId((unsigned __int16 *)v16) )
                {
                  Packet_ID_RELOAD_ctor(v11);
                  v17 = 0;
                  Dword_this = SharedMem_ReadDword_this(g_pPlayerStats, 0x5Bu);
                  v14 = *Weapon;
                  v15 = *(_DWORD *)v16;
                  Packet_ID_RELOAD_write((int)v11);
                  LTClient_SendPacket_BuildIfNeeded(v11, 2, 1, 3, 0);
                  (*(void (__thiscall **)(int, int))(*(_DWORD *)g_LTClient + 72))(g_LTClient, 0x1000000);
                  SoundMgr_PlaySoundByIndex(dword_65ABF750, *(unsigned __int16 *)(v2 + 112));
                  v9 = 1000 - (unsigned __int16)Player_GetCurrentWeaponFireDelayStat();
                  *(this + 5) = v9 + timeGetTime();
                  v17 = -1;
                  *(_DWORD *)v11 = &vtbl_Packet_Unknown0;
                  return BitStream_FreeOwnedBuffer((int)v12);
                }
                else
                {
                  v7 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5338);
                  if ( v7 )
                    v8 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v7);
                  else
                    v8 = (char *)byte_659A8B98;
                  result = FriendList_AddEntry(dword_65ABF748, v8, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
                  if ( v7 )
                    return (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v7);
                }
              }
              else
              {
                v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5337);
                if ( v5 )
                  v6 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
                else
                  v6 = (char *)byte_659A8B98;
                result = FriendList_AddEntry(dword_65ABF748, v6, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
                if ( v5 )
                  return (*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
              }
            }
          }
        }
      }
    }
  }
  return result;
}
// 659BFD98: using guessed type _UNKNOWN *vtbl_Packet_Unknown0;
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658C5F40) --------------------------------------------------------
int __thiscall WeaponFire_TryFire(int this, char a2)
{
  bool v3; // bl
  DWORD Time; // esi
  int v5; // eax
  int v6; // esi
  int Dword_this; // eax
  int v8; // ebx
  int v9; // eax
  int Weapon; // eax
  unsigned __int16 v11; // ax
  int v12; // esi
  char *v13; // eax
  int v14; // esi
  char *v15; // eax
  _WORD *v16; // eax
  char v17; // al
  int v18; // esi
  char *v19; // eax
  float v21; // [esp+Ch] [ebp-6Ch] BYREF
  float v22; // [esp+10h] [ebp-68h]
  float v23; // [esp+14h] [ebp-64h]
  float v24; // [esp+18h] [ebp-60h]
  float v25; // [esp+1Ch] [ebp-5Ch] BYREF
  float v26; // [esp+20h] [ebp-58h]
  float v27; // [esp+24h] [ebp-54h]
  float v28; // [esp+28h] [ebp-50h] BYREF
  float v29; // [esp+2Ch] [ebp-4Ch]
  float v30; // [esp+30h] [ebp-48h]
  int v31; // [esp+34h] [ebp-44h]
  int v32; // [esp+38h] [ebp-40h]
  DWORD v33; // [esp+3Ch] [ebp-3Ch]
  bool v34; // [esp+42h] [ebp-36h]
  char v35; // [esp+43h] [ebp-35h]
  _DWORD v36[12]; // [esp+44h] [ebp-34h] BYREF

  v35 = 1;
  v34 = 1;
  v3 = 1;
  Time = timeGetTime();
  v33 = Time;
  if ( a2 )
  {
    v5 = *(unsigned __int16 *)(this + 44);
    v31 = v5;
    if ( !(_WORD)v5 )
      return 0;
    if ( !g_pGameClientShell )
      return 0;
    if ( !g_pILTClient )
      return 0;
    v6 = ItemTemplateById_Get(g_ItemTemplateById, v5);
    v32 = v6;
    if ( !v6 )
      return 0;
  }
  else
  {
    Dword_this = (unsigned __int16)SharedMem_ReadDword_this((void *)this, 0x303Eu);
    v31 = Dword_this;
    if ( !(_WORD)Dword_this )
      return 0;
    if ( !g_pGameClientShell )
      return 0;
    if ( !g_pILTClient )
      return 0;
    v8 = ItemTemplateById_Get(g_ItemTemplateById, Dword_this);
    v32 = v8;
    if ( !v8 || CameraState_IsActive(dword_65ABF724) )
      return 0;
    v9 = (*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
    Weapon = EquipSlots_GetWeapon((void *)(v9 + 612), *(_BYTE *)(v9 + 756));
    if ( Weapon && *(_WORD *)(Weapon + 6) >= *(_WORD *)(v8 + 52)
      || *(_BYTE *)(v8 + 88)
      || (v11 = *(_WORD *)(v8 + 100)) == 0
      || (v35 = 0, v11 >= 0xBC1u) )
    {
      v35 = 1;
    }
    v34 = Time > *(_DWORD *)(this + 20)
       && Time - *(_DWORD *)(this + 20) >= (unsigned __int16)Player_GetCurrentWeaponFireDelayStat();
    v3 = *((_DWORD *)dword_65ABF714 + 71) < 2u;
    v6 = v32;
  }
  if ( ((_WORD)v31 == 16 || (_WORD)v31 == 28 || (_WORD)v31 == 33) && !EncVarMgr_GetInt((_DWORD *)g_pEncVarMgr, 9u) )
  {
    if ( v35 )
    {
      if ( v33 - *(_DWORD *)(this + 24) >= 0x7D0 && *(unsigned __int16 *)(v6 + 116) != -1 )
      {
        v12 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5315);
        if ( v12 )
          v13 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v12);
        else
          v13 = (char *)byte_659A8B98;
        FriendList_AddEntry(dword_65ABF748, v13, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
        if ( v12 )
          (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v12);
        SoundMgr_PlaySoundByIndex(dword_65ABF750, *(unsigned __int16 *)(v32 + 116));
        *(_DWORD *)(this + 24) = v33;
      }
      WeaponFire_SetState((void *)this, 1);
      return 0;
    }
LABEL_46:
    WeaponFire_SetState((void *)this, 1);
    if ( !v35 && v34 )
    {
      ItemStructA_InitAlt((char *)v36);
      v16 = (_WORD *)(*(int (__thiscall **)(int, _DWORD))(*(_DWORD *)g_LTClient + 88))(g_LTClient, 0);
      if ( ItemList_FindEntryById_CopyEntry(v16, *(_WORD *)(v6 + 100), v36) )
      {
        if ( WeaponZoom_IsActive() )
        {
          WeaponZoom_ResetIfActive(this);
          *(_DWORD *)&g_pGameClientShell[1]._pad0[16] = 1;
        }
        else
        {
          WeaponFire_TryReload((_DWORD *)this);
        }
      }
      else if ( v33 - *(_DWORD *)(this + 24) >= 0x7D0 && *(unsigned __int16 *)(v6 + 116) != -1 )
      {
        SoundMgr_PlaySoundByIndex(dword_65ABF750, *(unsigned __int16 *)(v6 + 116));
        *(_DWORD *)(this + 24) = v33;
      }
    }
    return 0;
  }
  if ( !v35 || !v34 )
    goto LABEL_46;
  if ( !v3 )
  {
    if ( v33 - *(_DWORD *)(this + 28) >= 0x7D0 )
    {
      v14 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5300);
      if ( v14 )
        v15 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v14);
      else
        v15 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v15, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
      if ( v14 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v14);
      v6 = v32;
      *(_DWORD *)(this + 28) = v33;
    }
    goto LABEL_46;
  }
  WeaponFire_GetAimVectors(&v25, &v21);
  v28 = v25;
  v29 = v26;
  v30 = v27;
  if ( *(_DWORD *)dword_65ABF704 )
    (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 152))(
      g_pILTClient,
      *(_DWORD *)dword_65ABF704,
      &v28);
  v17 = SharedMem_ReadDword_this(dword_65ABF73C, 0);
  if ( IsValue2Or30_NotEqual(v17, 0) && !ItemTemplate_IsNotFireableTypeAllowlist(g_ItemTemplateById, v31)
    || WeaponFire_IsDistanceSqBelowThreshold(dword_65ABF75C, v28, v29, v30) )
  {
    if ( v33 - *(_DWORD *)(this + 28) >= 0x7D0 )
    {
      v18 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4300);
      if ( v18 )
        v19 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v18);
      else
        v19 = (char *)byte_659A8B98;
      FriendList_AddEntry(dword_65ABF748, v19, 10, 0, 1, "FFD26400", "FFED0000", 0, 0, 0, 0);
      if ( v18 )
        (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v18);
      *(_DWORD *)(this + 28) = v33;
    }
    return 0;
  }
  if ( !a2 )
  {
    v29 = v29 + 40.0;
    v22 = v25 - v28;
    v23 = v26 - v29;
    v24 = v27 - v30;
    *(float *)(this + 32) = v22;
    *(float *)(this + 36) = v23;
    *(float *)(this + 40) = v24;
    SendPacket_WEAPONFIRE(dword_65ABF704);
    *(_DWORD *)(this + 20) = v33;
  }
  return 1;
}
// 65A5AA4C: using guessed type int g_LTClient;
// 65ABF748: using guessed type int dword_65ABF748;
// 65ABF76C: using guessed type int g_pEncVarMgr;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658C6460) --------------------------------------------------------
int __thiscall WeaponFire_Update(int this)
{
  unsigned __int16 Dword_this; // di
  int v3; // eax
  DWORD Time; // ebx
  int v5; // edi
  char *v6; // eax
  char v8; // al
  char *v9; // eax
  int v10; // edi
  char *v11; // eax
  float v12; // [esp+Ch] [ebp-2Ch] BYREF
  float v13; // [esp+10h] [ebp-28h]
  float v14; // [esp+14h] [ebp-24h]
  float v15; // [esp+18h] [ebp-20h]
  float v16; // [esp+1Ch] [ebp-1Ch] BYREF
  float v17; // [esp+20h] [ebp-18h]
  float v18; // [esp+24h] [ebp-14h]
  float v19; // [esp+28h] [ebp-10h] BYREF
  float v20; // [esp+2Ch] [ebp-Ch]
  float v21; // [esp+30h] [ebp-8h]
  DWORD v22; // [esp+34h] [ebp-4h]

  Dword_this = SharedMem_ReadDword_this((void *)this, 0x303Eu);
  if ( !Dword_this )
    return 0;
  if ( !g_pGameClientShell )
    return 0;
  if ( !g_pILTClient )
    return 0;
  if ( (unsigned __int16)(Dword_this - 1) > 0xBBFu )
    return 0;
  v3 = g_ItemTemplateById[Dword_this];
  if ( !v3 || !*(_BYTE *)(v3 + 88) )
    return 0;
  if ( *((_DWORD *)dword_65ABF714 + 71) == 2 )
  {
    Time = timeGetTime();
    if ( Time - *(_DWORD *)(this + 28) < 0x7D0 )
      return 0;
    v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 5300);
    if ( v5 )
      v6 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
    else
      v6 = (char *)byte_659A8B98;
    FriendList_AddEntry(dword_65ABF748, v6, 10, 0, 1, "FF000000", "FFED0000", 0, 0, 0, 0);
    goto LABEL_13;
  }
  Time = timeGetTime();
  v22 = Time;
  if ( Time - *(_DWORD *)(this + 20) < (unsigned __int16)Player_GetCurrentWeaponFireDelayStat() )
    return 0;
  WeaponFire_GetAimVectors(&v16, &v12);
  v19 = v16;
  v20 = v17;
  v21 = v18;
  if ( *(_DWORD *)dword_65ABF704 )
  {
    (*(void (__thiscall **)(int, _DWORD, float *))(*(_DWORD *)g_pILTClient + 152))(
      g_pILTClient,
      *(_DWORD *)dword_65ABF704,
      &v19);
    Time = v22;
  }
  v8 = SharedMem_ReadDword_this(dword_65ABF73C, 0);
  if ( IsValue2Or30_NotEqual(v8, 0) && !ItemTemplate_IsNotFireableTypeAllowlist(g_ItemTemplateById, Dword_this) )
  {
    if ( Time - *(_DWORD *)(this + 28) < 0x7D0 )
      return 0;
    v5 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4300);
    if ( v5 )
      v9 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v5);
    else
      v9 = (char *)byte_659A8B98;
    FriendList_AddEntry(dword_65ABF748, v9, 10, 0, 1, "FFD26400", "FFED0000", 0, 0, 0, 0);
LABEL_13:
    if ( v5 )
      (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v5);
LABEL_15:
    *(_DWORD *)(this + 28) = Time;
    return 0;
  }
  if ( WeaponFire_IsDistanceSqBelowThreshold(dword_65ABF75C, v19, v20, v21) )
  {
    if ( Time - *(_DWORD *)(this + 28) < 0x7D0 )
      return 0;
    v10 = (*(int (__cdecl **)(int, int))(*(_DWORD *)g_pILTClient + 64))(g_pILTClient, 4300);
    if ( v10 )
      v11 = (char *)(*(int (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 88))(g_pILTClient, v10);
    else
      v11 = (char *)byte_659A8B98;
    FriendList_AddEntry(dword_65ABF748, v11, 10, 0, 1, "FFD26400", "FFED0000", 0, 0, 0, 0);
    if ( !v10 )
      goto LABEL_15;
    (*(void (__thiscall **)(int, int))(*(_DWORD *)g_pILTClient + 76))(g_pILTClient, v10);
    *(_DWORD *)(this + 28) = Time;
    return 0;
  }
  else if ( ItemTemplate_GetType(g_ItemTemplateById, Dword_this) == 4 )
  {
    SetTargetId(dword_65ABF748, Dword_this);
    SharedMem_WriteU8_0xA6(1u);
    WeaponFire_SetNextFireTimePlus20((float *)dword_65ABF704);
    *(_DWORD *)(this + 20) = Time;
    WeaponFire_SetState((void *)this, 0);
    return 0;
  }
  else
  {
    if ( Dword_this != 5 )
      return 0;
    v20 = v20 + 40.0;
    v13 = v16 - v19;
    v14 = v17 - v20;
    v15 = v18 - v21;
    *(float *)(this + 32) = v13;
    *(float *)(this + 36) = v14;
    *(float *)(this + 40) = v15;
    SendPacket_WEAPONFIRE(dword_65ABF704);
    WeaponFire_SetNextFireTimePlus20((float *)dword_65ABF704);
    *(_DWORD *)(this + 20) = Time;
    WeaponFire_SetState((void *)this, 0);
    return 1;
  }
}
// 65ABF748: using guessed type int dword_65ABF748;
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658C67C0) --------------------------------------------------------
int __thiscall WeaponFire_HandleState(unsigned __int16 *this, int a2, int a3)
{
  int Dword_this; // edi
  DWORD Time; // ebx
  int v6; // eax
  unsigned __int16 v7; // ax
  int v8; // eax
  bool Bool_std; // bl
  unsigned int v11; // eax

  Dword_this = SharedMem_ReadDword_this(this, 0x3041u);
  Time = timeGetTime();
  if ( SharedMem_ReadDword_this(this, 0x3042u) != -1 && Time >= *(_DWORD *)this )
  {
    SharedMem_WriteDword_this(this, 0x3040u, Dword_this);
    v6 = SharedMem_ReadDword_this(this, 0x3042u);
    WeaponFire_SetState(this, v6);
    SharedMem_WriteDword_this(this, 0x3042u, -1);
  }
  switch ( Dword_this )
  {
    case 0:
      if ( !a2 )
        goto LABEL_10;
      v7 = SharedMem_ReadDword_this(this, 0x303Eu);
      v8 = ItemTemplateById_Get(g_ItemTemplateById, v7);
      if ( v8 && *(_BYTE *)(v8 + 88) )
        return WeaponFire_Update((int)this);
      WeaponFire_QueueState((int *)this, 1, 1000);
LABEL_10:
      if ( !WeaponZoom_IsActive() )
        return 0;
      WeaponZoom_ResetIfActive((int)this);
      return 0;
    case 1:
      if ( !a2 )
        return 0;
      return WeaponFire_TryFire((int)this, 0);
    case 3:
      Bool_std = SharedMem_ReadBool_std(0x3044u);
      v11 = SharedMem_ReadDword_this(this, 0x3040u);
      if ( v11 < 2 )
      {
        if ( Bool_std )
          return 0;
        WeaponFire_QueueState((int *)this, v11, 0);
      }
      else if ( v11 == 6 )
      {
        if ( Bool_std )
          return 0;
        WeaponFire_QueueState((int *)this, 4, 0);
      }
      else if ( Bool_std )
      {
        return 0;
      }
      if ( StatGroup_CheckLevelThreshold() )
        return 0;
      WeaponFire_UseAmmoItem(this);
      return 0;
    case 4:
      WeaponFire_QueueState((int *)this, 0, 500);
      return 0;
    case 5:
      WeaponFire_SetCurrentWeaponIdAndFlag(this, *(this + 2));
      return 0;
    default:
      return 0;
  }
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (658C6A40) --------------------------------------------------------
void __thiscall WeaponFire_UpdateTick(int this, int a2, int a3, _DWORD *a4, int a5)
{
  int v6; // ebx
  int v7; // eax
  int v8; // eax
  unsigned __int16 v9; // ax
  __int16 *v10; // eax
  __int16 *v11; // edi
  unsigned __int16 v12; // ax
  double v13; // st7
  bool v14; // cf
  int v15; // [esp-8h] [ebp-18h]
  __int16 Dword_this; // [esp+Ch] [ebp-4h]
  float v17; // [esp+18h] [ebp+8h]

  v6 = 0;
  Dword_this = SharedMem_ReadDword_this((void *)this, 0x303Eu);
  if ( Dword_this
    && SharedMem_ReadDword_std(0x303Fu)
    && !SharedMem_ReadBool_std(0x3044u)
    && !CameraState_IsActive(dword_65ABF724) )
  {
    v6 = a3;
  }
  else
  {
    a2 = 0;
  }
  if ( !*a4 )
    goto LABEL_18;
  if ( SharedMem_ReadDword_this((void *)this, 0x3041u) != 6 )
  {
    if ( PlayerStats_GetStatValue(1u) )
    {
      WeaponFire_QueueState((int *)this, 6, 0);
      goto LABEL_20;
    }
    goto LABEL_17;
  }
  if ( *a4 )
  {
    if ( !PlayerStats_GetStatValue(1u) )
    {
      v7 = SharedMem_ReadDword_this((void *)this, 0x3040u);
      WeaponFire_QueueState((int *)this, v7, 0);
      *a4 = 0;
    }
    if ( a2 || v6 )
    {
      v8 = SharedMem_ReadDword_this((void *)this, 0x3040u);
      WeaponFire_QueueState((int *)this, v8, 0);
LABEL_17:
      *a4 = 0;
    }
  }
  else
  {
LABEL_18:
    if ( SharedMem_ReadDword_this((void *)this, 0x3041u) == 6 )
    {
      v15 = SharedMem_ReadDword_this((void *)this, 0x3040u);
      WeaponFire_QueueState((int *)this, v15, 0);
    }
  }
LABEL_20:
  if ( a5 )
  {
    SharedMem_WriteDword_this((void *)this, 0x3040u, 0);
    WeaponFire_SetState((void *)this, 0);
    SharedMem_WriteDword_this((void *)this, 0x3042u, -1);
    *(_DWORD *)(this + 16) = 0;
  }
  else if ( WeaponFire_HandleState((unsigned __int16 *)this, a2, v6) )
  {
    SendPacket_ID_0x66_WeaponFire(this);
    v9 = *(_WORD *)(this + 44);
    if ( !v9 || v9 >= 0xBC1u )
    {
      v10 = EquipSlotTable_Find(Dword_this);
      v11 = v10;
      if ( v10 )
      {
        *(_WORD *)(this + 44) = Dword_this;
        *(float *)(this + 52) = *((float *)v10 + 2);
        *(float *)(this + 48) = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient)
                              + *(float *)(this + 52);
        *(_DWORD *)(this + 56) = *((_DWORD *)v11 + 1);
      }
      else
      {
        *(_WORD *)(this + 44) = 0;
      }
    }
  }
  v12 = *(_WORD *)(this + 44);
  if ( v12 )
  {
    if ( v12 < 0xBC1u )
    {
      v17 = ((double (__thiscall *)(int))*(_DWORD *)(*(_DWORD *)g_pILTClient + 100))(g_pILTClient);
      if ( *(float *)(this + 48) <= (double)v17 )
      {
        if ( WeaponFire_TryFire(this, 1) )
          SendPacket_ID_0x66_WeaponFire(this);
        v13 = *(float *)(this + 52);
        v14 = --*(_DWORD *)(this + 56) == 0;
        *(float *)(this + 48) = v13 + *(float *)(this + 48);
        if ( v14 )
          *(_WORD *)(this + 44) = 0;
      }
    }
  }
  WeaponZoom_Update(this);
}

//----- (658C8290) --------------------------------------------------------
int sub_658C8290()
{
  return sub_658C8070(0);
}
// 658C8070: using guessed type int __stdcall sub_658C8070(_DWORD);

//----- (658C8710) --------------------------------------------------------
int __cdecl sub_658C8710(int a1, char *Format, int a3)
{
  return sub_658C82A0(Format, (int)&a3);
}

//----- (658C8E80) --------------------------------------------------------
int __thiscall BitStream_FreeOwnedBuffer(int this)
{
  int result; // eax

  result = this;
  if ( *(_BYTE *)(this + 16) )
  {
    if ( *(_DWORD *)(this + 4) > 0x2000u )
      return off_65A560C8(*(void **)(this + 12));
  }
  return result;
}
// 65A560C8: using guessed type int (__cdecl *off_65A560C8)(void *Block);

//----- (658C92D0) --------------------------------------------------------
char *__thiscall BitStream_WriteBit0(char *this)
{
  sub_658C9BD0(this, 1);
  if ( (*(_DWORD *)this & 7) == 0 )
    *(_BYTE *)((*(_DWORD *)this >> 3) + *((_DWORD *)this + 3)) = 0;
  ++*(_DWORD *)this;
  return this;
}

//----- (658C9310) --------------------------------------------------------
char *__thiscall BitStream_WriteBit1(char *this)
{
  int v3; // [esp+8h] [ebp-4h]

  sub_658C9BD0(this, 1);
  v3 = *(_DWORD *)this & 7;
  if ( v3 )
    *(_BYTE *)((*(_DWORD *)this >> 3) + *((_DWORD *)this + 3)) = (128 >> v3)
                                                               | *(_BYTE *)(*((_DWORD *)this + 3)
                                                                          + (*(_DWORD *)this >> 3));
  else
    *(_BYTE *)((*(_DWORD *)this >> 3) + *((_DWORD *)this + 3)) = 0x80;
  ++*(_DWORD *)this;
  return this;
}

//----- (658C9390) --------------------------------------------------------
bool __thiscall RakNet::BitStream::ReadBit(_DWORD *this)
{
  bool v2; // [esp+7h] [ebp-1h]

  v2 = ((128 >> (*(this + 2) & 7)) & *(unsigned __int8 *)(*(this + 3) + (*(this + 2) >> 3))) != 0;
  ++*(this + 2);
  return v2;
}

//----- (658C96C0) --------------------------------------------------------
char *__thiscall BitStream_WriteBits(char *this, char *a2, unsigned int a3, char a4)
{
  char *result; // eax
  unsigned __int8 v6; // [esp+Bh] [ebp-9h]
  char *v7; // [esp+Ch] [ebp-8h]
  int v8; // [esp+10h] [ebp-4h]

  sub_658C9BD0(this, a3);
  v8 = *(_DWORD *)this & 7;
  result = a2;
  v7 = a2;
  while ( a3 )
  {
    v6 = *v7++;
    if ( a3 < 8 && a4 )
      v6 <<= 8 - a3;
    if ( v8 )
    {
      *(_BYTE *)((*(_DWORD *)this >> 3) + *((_DWORD *)this + 3)) = ((int)v6 >> v8)
                                                                 | *(_BYTE *)(*((_DWORD *)this + 3)
                                                                            + (*(_DWORD *)this >> 3));
      if ( 8 - v8 < a3 )
        *(_BYTE *)(*((_DWORD *)this + 3) + (*(_DWORD *)this >> 3) + 1) = v6 << (8 - v8);
    }
    else
    {
      *(_BYTE *)((*(_DWORD *)this >> 3) + *((_DWORD *)this + 3)) = v6;
    }
    if ( a3 < 8 )
    {
      result = (char *)(a3 + *(_DWORD *)this);
      *(_DWORD *)this = result;
      a3 = 0;
    }
    else
    {
      result = this;
      *(_DWORD *)this += 8;
      a3 -= 8;
    }
  }
  return result;
}
// 658C9775: conditional instruction was optimized away because %var_4.4 is in (1..7)

//----- (658C9810) --------------------------------------------------------
char *__thiscall BitStream_WriteBitsCompressed(char *this, char *a2, unsigned int a3, char a4)
{
  char v6; // [esp+Bh] [ebp-5h]
  unsigned int v7; // [esp+Ch] [ebp-4h]

  v7 = (a3 >> 3) - 1;
  if ( a4 )
    v6 = 0;
  else
    v6 = -1;
  while ( v7 )
  {
    if ( a2[v7] != v6 )
    {
      BitStream_WriteBit(this, 0);
      return BitStream_WriteBits(this, a2, 8 * v7 + 8, 1);
    }
    BitStream_WriteBit(this, 1);
    --v7;
  }
  if ( (!a4 || (*a2 & 0xF0) != 0) && (a4 || (*a2 & 0xF0) != 0xF0) )
  {
    BitStream_WriteBit(this, 0);
    return BitStream_WriteBits(this, a2, 8u, 1);
  }
  else
  {
    BitStream_WriteBit(this, 1);
    return BitStream_WriteBits(this, a2, 4u, 1);
  }
}

//----- (658C9930) --------------------------------------------------------
char __thiscall BitStream_ReadBits(_DWORD *this, void *a2, unsigned int a3, char a4)
{
  int v6; // [esp+8h] [ebp-8h]
  int v7; // [esp+Ch] [ebp-4h]

  if ( !a3 )
    return 0;
  if ( a3 + *(this + 2) > *this )
    return 0;
  v7 = 0;
  memset(a2, 0, (a3 + 7) >> 3);
  v6 = *(this + 2) & 7;
  while ( a3 )
  {
    *((_BYTE *)a2 + v7) |= *(_BYTE *)(*(this + 3) + (*(this + 2) >> 3)) << v6;
    if ( v6 && a3 > 8 - v6 )
      *((_BYTE *)a2 + v7) |= (int)*(unsigned __int8 *)(*(this + 3) + (*(this + 2) >> 3) + 1) >> (8 - v6);
    if ( a3 < 8 )
    {
      if ( (int)(a3 - 8) >= 0 )
      {
        *(this + 2) += 8;
      }
      else
      {
        if ( a4 )
          *((_BYTE *)a2 + v7) >>= 8 - a3;
        *(this + 2) += a3;
      }
      ++v7;
      a3 = 0;
    }
    else
    {
      a3 -= 8;
      *(this + 2) += 8;
      ++v7;
    }
  }
  return 1;
}

//----- (658C9AA0) --------------------------------------------------------
bool __thiscall RakNet::BitStream::ReadCompressed(unsigned int *this, char *a2, unsigned int a3, char a4)
{
  bool v6; // [esp+4h] [ebp-8h] BYREF
  bool v7; // [esp+5h] [ebp-7h] BYREF
  char v8; // [esp+6h] [ebp-6h]
  char v9; // [esp+7h] [ebp-5h]
  unsigned int v10; // [esp+8h] [ebp-4h]

  v10 = (a3 >> 3) - 1;
  if ( a4 )
  {
    v9 = 0;
    v8 = 0;
  }
  else
  {
    v9 = -1;
    v8 = -16;
  }
  while ( v10 )
  {
    if ( !BitStream_ReadBit_Out(this, &v6) )
      return 0;
    if ( !v6 )
      return BitStream_ReadBits(this, a2, 8 * v10 + 8, 1) != 0;
    a2[v10--] = v9;
  }
  if ( *(this + 2) + 1 > *this )
    return 0;
  if ( !BitStream_ReadBit_Out(this, &v7) )
    return 0;
  if ( v7 )
  {
    if ( !BitStream_ReadBits(this, &a2[v10], 4u, 1) )
      return 0;
    a2[v10] |= v8;
  }
  else if ( !BitStream_ReadBits(this, &a2[v10], 8u, 1) )
  {
    return 0;
  }
  return 1;
}

//----- (658CA080) --------------------------------------------------------
unsigned int __cdecl ByteSwapCopy(int a1, int a2, unsigned int a3)
{
  unsigned int result; // eax
  unsigned int i; // [esp+0h] [ebp-4h]

  for ( i = 0; i < a3; ++i )
  {
    *(_BYTE *)(i + a2) = *(_BYTE *)(a1 + a3 - i - 1);
    result = i + 1;
  }
  return result;
}

//----- (658CA120) --------------------------------------------------------
BOOL __cdecl Net_IsBigEndian()
{
  return sub_658CA150() == 0;
}

//----- (658CA270) --------------------------------------------------------
unsigned __int64 Packet_GetHeaderTokenU64()
{
  return sub_658CA290() / 0x3E8uLL;
}
// 658CA290: using guessed type __int64 sub_658CA290(void);

//----- (658CA410) --------------------------------------------------------
bool __thiscall SystemAddress_Equals_CS(SystemAddress6 *this, SystemAddress6 *other)
{
  return this->ip == other->ip && this->port == other->port;
}

//----- (658CA5D0) --------------------------------------------------------
_WORD *__thiscall SystemAddress_SetUnassigned(_WORD *this)
{
  SystemAddress_Copy(this, (int)&g_SystemAddress_Unassigned);
  return this;
}

//----- (658CE330) --------------------------------------------------------
int __thiscall StringCompressor_GenerateTreeFromStrings(void *this, int a2, unsigned int a3, char a4)
{
  int result; // eax
  _DWORD *v6; // [esp+4h] [ebp-40Ch] BYREF
  _DWORD v7[257]; // [esp+8h] [ebp-408h] BYREF
  unsigned int i; // [esp+40Ch] [ebp-4h]

  result = sub_658CE9B0(this, &a4);
  if ( (_BYTE)result )
  {
    v6 = *(_DWORD **)sub_658CE860(this, &a4);
    result = sub_658CEBA0(v6, "..\\..\\Source\\StringCompressor.cpp", 328);
  }
  if ( a3 )
  {
    memset(v7, 0, 0x400u);
    for ( i = 0; i < a3; ++i )
      ++v7[*(unsigned __int8 *)(i + a2)];
    v6 = (_DWORD *)sub_658CEB10("..\\..\\Source\\StringCompressor.cpp", 345);
    HuffmanEncodingTree_GenerateFromFrequencyTable(v6, (int)v7);
    return sub_658CE8F0(this, &a4, &v6);
  }
  return result;
}
// 658CE860: using guessed type int __thiscall sub_658CE860(_DWORD, _DWORD);
// 658CE8F0: using guessed type int __thiscall sub_658CE8F0(_DWORD, _DWORD, _DWORD);
// 658CE9B0: using guessed type int __thiscall sub_658CE9B0(_DWORD, _DWORD);
// 658CEB10: using guessed type int __cdecl sub_658CEB10(_DWORD, _DWORD);
// 658CEBA0: using guessed type int __cdecl sub_658CEBA0(_DWORD, _DWORD, _DWORD);

//----- (658CE4C0) --------------------------------------------------------
char *__thiscall StringCompressor_EncodeString(void *this, char *Str, int a3, char *a4, char a5)
{
  char *result; // eax
  char *v6; // eax
  unsigned int v7; // [esp-8h] [ebp-43Ch]
  char **v9; // [esp+4h] [ebp-430h]
  char v10[1048]; // [esp+8h] [ebp-42Ch] BYREF
  int v11; // [esp+420h] [ebp-14h]
  size_t v12; // [esp+424h] [ebp-10h]
  int v13; // [esp+430h] [ebp-4h]

  result = (char *)sub_658CE9B0(this, &a5);
  if ( (_BYTE)result )
  {
    v9 = *(char ***)sub_658CE860(this, &a5);
    if ( Str )
    {
      Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)v10);
      v13 = 0;
      if ( a3 > 0 && (int)strlen(Str) >= a3 )
        v12 = a3 - 1;
      else
        v12 = strlen(Str);
      HuffmanEncodingTree_EncodeArray(v9, (int)Str, v12, v10);
      v11 = sub_6588D230(v10);
      Read_u32(a4, v11);
      v7 = v11;
      v6 = (char *)unknown_libname_533(v10);
      BitStream_WriteBits(a4, v6, v7, 1);
      v13 = -1;
      return (char *)BitStream_FreeOwnedBuffer((int)v10);
    }
    else
    {
      return Read_u32(a4, 0);
    }
  }
  return result;
}
// 6588D230: using guessed type int __thiscall sub_6588D230(_DWORD);
// 658CA210: using guessed type int __thiscall unknown_libname_533(_DWORD);
// 658CE860: using guessed type int __thiscall sub_658CE860(_DWORD, _DWORD);
// 658CE9B0: using guessed type int __thiscall sub_658CE9B0(_DWORD, _DWORD);

//----- (658CE5E0) --------------------------------------------------------
char __thiscall StringCompressor_DecodeString(void *this, _BYTE *a2, signed int a3, unsigned int *a4, char a5)
{
  unsigned int v6; // eax
  int *v8; // [esp+4h] [ebp-Ch]
  unsigned int v9; // [esp+8h] [ebp-8h] BYREF
  signed int v10; // [esp+Ch] [ebp-4h]

  if ( !(unsigned __int8)sub_658CE9B0(this, &a5) )
    return 0;
  if ( a3 <= 0 )
    return 0;
  v8 = *(int **)sub_658CE860(this, &a5);
  *a2 = 0;
  if ( !RakNet::BitStream::ReadCompressed_T_uint(a4, (char *)&v9) )
    return 0;
  v6 = sub_658CA230(a4);
  if ( v6 < v9 )
    return 0;
  v10 = HuffmanEncodingTree_DecodeArray(v8, a4, v9, a3, (int)a2);
  if ( v10 >= a3 )
    a2[a3 - 1] = 0;
  else
    a2[v10] = 0;
  return 1;
}
// 658CA230: using guessed type int __thiscall sub_658CA230(_DWORD);
// 658CE860: using guessed type int __thiscall sub_658CE860(_DWORD, _DWORD);
// 658CE9B0: using guessed type int __thiscall sub_658CE9B0(_DWORD, _DWORD);

//----- (658CE6C0) --------------------------------------------------------
char __thiscall StringCompressor_DecodeString_ToStdString(
        void *this,
        int a2,
        WorldLoginReturnAddrPacked Size,
        unsigned int *a4,
        char a5)
{
  void *v6; // esp
  int v7; // [esp+0h] [ebp-10h] BYREF
  void *v8; // [esp+4h] [ebp-Ch]
  void *Block; // [esp+8h] [ebp-8h]
  char v10; // [esp+Fh] [ebp-1h]

  v8 = this;
  if ( (int)Size.flag_pad_ip0 > 0 )
  {
    if ( (int)Size.flag_pad_ip0 >= 0x100000 )
    {
      Block = (void *)off_65A560C0(Size.flag_pad_ip0, "..\\..\\Source\\StringCompressor.cpp", 492);
      v10 = StringCompressor_DecodeString(v8, Block, Size.flag_pad_ip0, a4, a5);
      sub_658CB2F0((char *)Block);
      off_65A560C8(Block);
    }
    else
    {
      v6 = alloca(Size.flag_pad_ip0);
      v7 = (int)&v7;
      Block = &v7;
      v10 = StringCompressor_DecodeString(v8, &v7, Size.flag_pad_ip0, a4, a5);
      sub_658CB2F0((char *)Block);
    }
    return v10;
  }
  else
  {
    sub_658CCAA0(a2);
    return 1;
  }
}
// 658CCAA0: using guessed type int __thiscall sub_658CCAA0(_DWORD);
// 65A560C0: using guessed type int (__cdecl *off_65A560C0)(_DWORD, _DWORD, _DWORD);
// 65A560C8: using guessed type int (__cdecl *off_65A560C8)(void *Block);

//----- (658E0410) --------------------------------------------------------
int __thiscall HuffmanEncodingTree_FreeMemory(_DWORD *this)
{
  int result; // eax
  int i; // [esp+4h] [ebp-24h]
  int v4; // [esp+8h] [ebp-20h]
  _BYTE v5[16]; // [esp+Ch] [ebp-1Ch] BYREF
  int v6; // [esp+24h] [ebp-4h]

  result = (int)this;
  if ( *this )
  {
    sub_658E0C00(v5);
    v6 = 0;
    sub_658E0C70(v5, this);
    while ( sub_658E0E30(v5) )
    {
      v4 = sub_658E0DD0(v5);
      if ( *(_DWORD *)(v4 + 8) )
        sub_658E0C70(v5, v4 + 8);
      if ( *(_DWORD *)(v4 + 12) )
        sub_658E0C70(v5, v4 + 12);
      sub_658E0E70(v4, "..\\..\\Source\\DS_HuffmanEncodingTree.cpp", 49);
    }
    for ( i = 0; i < 256; ++i )
      off_65A560C8((void *)*(this + 2 * i + 1));
    *this = 0;
    v6 = -1;
    return sub_658E0C40(v5);
  }
  return result;
}
// 658E0C00: using guessed type int __thiscall sub_658E0C00(_DWORD);
// 658E0C40: using guessed type int __thiscall sub_658E0C40(_DWORD);
// 658E0C70: using guessed type int __thiscall sub_658E0C70(_DWORD, _DWORD);
// 658E0DD0: using guessed type int __thiscall sub_658E0DD0(_DWORD);
// 658E0E30: using guessed type int __thiscall sub_658E0E30(_DWORD);
// 658E0E70: using guessed type int __cdecl sub_658E0E70(_DWORD, _DWORD, _DWORD);
// 65A560C8: using guessed type int (__cdecl *off_65A560C8)(void *Block);

//----- (658E0510) --------------------------------------------------------
int __thiscall HuffmanEncodingTree_GenerateFromFrequencyTable(_DWORD *this, int a2)
{
  unsigned __int8 v3; // al
  int v6; // [esp+4h] [ebp-94Ch]
  int v7; // [esp+8h] [ebp-948h]
  int v8; // [esp+Ch] [ebp-944h]
  _DWORD *v9; // [esp+Ch] [ebp-944h]
  _BYTE v10[12]; // [esp+10h] [ebp-940h] BYREF
  int v11; // [esp+1Ch] [ebp-934h]
  int i; // [esp+20h] [ebp-930h]
  _DWORD v13[256]; // [esp+24h] [ebp-92Ch]
  char v14[1052]; // [esp+424h] [ebp-52Ch] BYREF
  unsigned __int16 v15; // [esp+840h] [ebp-110h]
  _BYTE v16[256]; // [esp+844h] [ebp-10Ch]
  int v17; // [esp+94Ch] [ebp-4h]

  sub_658E0BE0(v10);
  v17 = 0;
  HuffmanEncodingTree_FreeMemory(this);
  for ( i = 0; i < 256; ++i )
  {
    v8 = sub_658E1320("..\\..\\Source\\DS_HuffmanEncodingTree.cpp", 75);
    *(_DWORD *)(v8 + 8) = 0;
    *(_DWORD *)(v8 + 12) = 0;
    *(_BYTE *)v8 = i;
    *(_DWORD *)(v8 + 4) = *(_DWORD *)(a2 + 4 * i);
    if ( !*(_DWORD *)(v8 + 4) )
      *(_DWORD *)(v8 + 4) = 1;
    v13[i] = v8;
    sub_658E0B40(this, v8, v10);
  }
  while ( 1 )
  {
    sub_658E1220(v10);
    v7 = sub_658E11F0(v10);
    v6 = sub_658E11F0(v10);
    v9 = (_DWORD *)sub_658E1320("..\\..\\Source\\DS_HuffmanEncodingTree.cpp", 101);
    v9[2] = v7;
    v9[3] = v6;
    v9[1] = *(_DWORD *)(v6 + 4) + *(_DWORD *)(v7 + 4);
    *(_DWORD *)(v7 + 16) = v9;
    *(_DWORD *)(v6 + 16) = v9;
    if ( !unknown_libname_554(v10) )
      break;
    sub_658E0B40(this, v9, v10);
  }
  *this = v9;
  *(_DWORD *)(*this + 16) = 0;
  Concurrency::details::UMSThreadProxy::~UMSThreadProxy((#179 *)v14);
  LOBYTE(v17) = 1;
  for ( i = 0; i < 256; ++i )
  {
    v15 = 0;
    v11 = v13[i];
    do
    {
      v16[v15++] = *(_DWORD *)(*(_DWORD *)(v11 + 16) + 8) != v11;
      v11 = *(_DWORD *)(v11 + 16);
    }
    while ( v11 != *this );
    while ( v15-- )
    {
      if ( v16[v15] )
        BitStream_WriteBit1(v14);
      else
        BitStream_WriteBit0(v14);
    }
    v3 = sub_658C9F40(v14, this + 2 * i + 1);
    *((_WORD *)this + 4 * i + 4) = v3;
    sub_658C8EC0(v14);
  }
  LOBYTE(v17) = 0;
  BitStream_FreeOwnedBuffer((int)v14);
  v17 = -1;
  return sub_658E1270(v10);
}
// 658C8EC0: using guessed type int __thiscall sub_658C8EC0(_DWORD);
// 658C9F40: using guessed type int __thiscall sub_658C9F40(_DWORD, _DWORD);
// 658E0B40: using guessed type int __thiscall sub_658E0B40(_DWORD, _DWORD, _DWORD);
// 658E0BE0: using guessed type int __thiscall sub_658E0BE0(_DWORD);
// 658E11C0: using guessed type int __thiscall unknown_libname_554(_DWORD);
// 658E11F0: using guessed type int __thiscall sub_658E11F0(_DWORD);
// 658E1220: using guessed type int __thiscall sub_658E1220(_DWORD);
// 658E1270: using guessed type int __thiscall sub_658E1270(_DWORD);
// 658E1320: using guessed type int __cdecl sub_658E1320(_DWORD, _DWORD);

//----- (658E08A0) --------------------------------------------------------
char *__thiscall HuffmanEncodingTree_EncodeArray(char **this, int a2, unsigned int a3, char *a4)
{
  unsigned int v4; // eax
  char *result; // eax
  unsigned int v6; // et2
  unsigned __int8 v8; // [esp+7h] [ebp-5h]
  unsigned int i; // [esp+8h] [ebp-4h]
  unsigned int j; // [esp+8h] [ebp-4h]

  for ( i = 0; i < a3; ++i )
    BitStream_WriteBits(
      a4,
      *(this + 2 * *(unsigned __int8 *)(i + a2) + 1),
      *((unsigned __int16 *)this + 4 * *(unsigned __int8 *)(i + a2) + 4),
      0);
  v4 = sub_6588D230(a4);
  v6 = v4 % 8;
  result = (char *)(v4 / 8);
  if ( v6 )
  {
    result = (char *)(8 - sub_6588D230(a4) % 8u);
    v8 = (unsigned __int8)result;
    for ( j = 0; j < 0x100; ++j )
    {
      result = (char *)this;
      if ( *((unsigned __int16 *)this + 4 * j + 4) > (int)v8 )
        return BitStream_WriteBits(a4, *(this + 2 * j + 1), v8, 0);
    }
  }
  return result;
}
// 6588D230: using guessed type int __thiscall sub_6588D230(_DWORD);

//----- (658E0980) --------------------------------------------------------
unsigned int __thiscall HuffmanEncodingTree_DecodeArray(
        int *this,
        _DWORD *a2,
        unsigned int a3,
        unsigned int a4,
        int a5)
{
  unsigned int i; // [esp+4h] [ebp-Ch]
  int v8; // [esp+8h] [ebp-8h]
  unsigned int v9; // [esp+Ch] [ebp-4h]

  v9 = 0;
  v8 = *this;
  for ( i = 0; i < a3; ++i )
  {
    if ( RakNet::BitStream::ReadBit(a2) )
      v8 = *(_DWORD *)(v8 + 12);
    else
      v8 = *(_DWORD *)(v8 + 8);
    if ( !*(_DWORD *)(v8 + 8) && !*(_DWORD *)(v8 + 12) )
    {
      if ( v9 < a4 )
        *(_BYTE *)(v9 + a5) = *(_BYTE *)v8;
      ++v9;
      v8 = *this;
    }
  }
  return v9;
}

//----- (658FE020) --------------------------------------------------------
void (__thiscall ***__cdecl CEF_CreateHandler(int a1))(_DWORD)
{
  _DWORD *v2; // eax
  _DWORD *v3; // esi
  int v4; // ecx

  if ( !a1 )
    return 0;
  v2 = operator new(0x34u);
  if ( v2 )
    v3 = CEF_App_Ctor(v2, a1);
  else
    v3 = 0;
  (*(void (__thiscall **)(_DWORD *))*v3)(v3);
  v4 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
  (*(void (__thiscall **)(int))(*(_DWORD *)v4 + 4))(v4);
  return (void (__thiscall ***)(_DWORD))(v3 + 2);
}
// 658FE0A4: conditional instruction was optimized away because %arg_0.4!=0

//----- (658FE7D0) --------------------------------------------------------
bool __cdecl CEF_Initialize(int a1, int a2, int a3, int a4)
{
  int v4; // ecx
  int v6; // edi
  int v7; // esi
  void (__thiscall ***Handler)(_DWORD); // eax
  bool v9; // bl
  int v10; // ecx
  int v11; // [esp-8h] [ebp-28h] BYREF
  int v12; // [esp-4h] [ebp-24h]
  int *v13; // [esp+10h] [ebp-10h]
  int v14; // [esp+1Ch] [ebp-4h]

  v14 = 0;
  if ( !strcmp((const char *)cef_api_hash(0), "fcdffdfb7ef63f8a88d18623b49981fe62ec6d75") )
  {
    if ( a2 )
      v6 = a2 + 4;
    else
      v6 = 0;
    if ( a1 )
      v7 = a1 + 4;
    else
      v7 = 0;
    v12 = a4;
    v11 = a3;
    v13 = &v11;
    if ( a3 )
      (**(void (__thiscall ***)(int, int, int))(*(_DWORD *)(*(_DWORD *)(a3 + 4) + 4) + a3 + 4))(
        *(_DWORD *)(*(_DWORD *)(a3 + 4) + 4) + a3 + 4,
        v11,
        v12);
    Handler = CEF_CreateHandler(v11);
    v9 = cef_initialize(v7, v6, Handler) != 0;
    v14 = -1;
    if ( a3 )
    {
      v10 = *(_DWORD *)(*(_DWORD *)(a3 + 4) + 4) + a3 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v10 + 4))(v10);
    }
    return v9;
  }
  else
  {
    v14 = -1;
    if ( a3 )
    {
      v4 = *(_DWORD *)(*(_DWORD *)(a3 + 4) + 4) + a3 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v4 + 4))(v4);
    }
    return 0;
  }
}
// 659A8720: using guessed type int __cdecl cef_initialize(_DWORD, _DWORD, _DWORD);
// 659A8724: using guessed type int __cdecl cef_api_hash(_DWORD);

//----- (658FF990) --------------------------------------------------------
void (__thiscall ***__cdecl CEF_CreateBrowserSettings(int a1))(_DWORD)
{
  _DWORD *v2; // eax
  _DWORD *v3; // esi
  int v4; // ecx

  if ( !a1 )
    return 0;
  v2 = operator new(0x58u);
  if ( v2 )
    v3 = CEF_Client_Ctor(v2, a1);
  else
    v3 = 0;
  (*(void (__thiscall **)(_DWORD *))*v3)(v3);
  v4 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
  (*(void (__thiscall **)(int))(*(_DWORD *)v4 + 4))(v4);
  return (void (__thiscall ***)(_DWORD))(v3 + 2);
}
// 658FFA14: conditional instruction was optimized away because %arg_0.4!=0

//----- (658FFD20) --------------------------------------------------------
int __cdecl CEF_PrepareRequestContext(int a1)
{
  int result; // eax
  int v2; // ecx
  int v3; // esi
  int v4; // ecx

  result = a1;
  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 12);
    if ( *(_DWORD *)(v2 + 4) )
    {
      (*(void (__stdcall **)(int))(v2 + 4))(v2);
      result = a1;
    }
    v3 = *(_DWORD *)(a1 + 12);
    if ( result )
    {
      v4 = *(_DWORD *)(*(_DWORD *)(result + 4) + 4) + result + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v4 + 4))(v4);
    }
    return v3;
  }
  return result;
}

//----- (658FFFC0) --------------------------------------------------------
LONG __thiscall COMRef_AddRef(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (658FFFD0) --------------------------------------------------------
LONG __thiscall COMRef_Release(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (658FFFE0) --------------------------------------------------------
LONG __thiscall COMRef_AddRef2(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (658FFFF0) --------------------------------------------------------
_DWORD *__thiscall sub_658FFFF0(_DWORD *this, int a2, int a3)
{
  _DWORD *result; // eax
  int v4; // ecx
  int v5; // ecx
  int v6; // ecx

  result = this;
  if ( a3 )
  {
    *(this + 1) = &unk_659D91AC;
    *(this + 5) = &off_659C0330;
  }
  v4 = *(this + 1);
  *result = &off_659D9038;
  *(_DWORD *)((char *)result + *(_DWORD *)(v4 + 4) + 4) = &off_659D9028;
  v5 = result[1];
  *result = &off_659D90C8;
  *(_DWORD *)((char *)result + *(_DWORD *)(v5 + 4) + 4) = off_659D90B8;
  *(_DWORD *)((char *)result + *(_DWORD *)(result[1] + 4)) = *(_DWORD *)(result[1] + 4) - 16;
  result[2] = 0;
  v6 = result[1];
  result[3] = a2;
  *result = &off_659D9158;
  *(_DWORD *)((char *)result + *(_DWORD *)(v6 + 4) + 4) = off_659D9148;
  *(_DWORD *)((char *)result + *(_DWORD *)(result[1] + 4)) = *(_DWORD *)(result[1] + 4) - 16;
  return result;
}
// 659C0330: using guessed type void *off_659C0330;
// 659D9028: using guessed type _UNKNOWN *off_659D9028;
// 659D9038: using guessed type _UNKNOWN *off_659D9038;
// 659D90B8: using guessed type int (*off_659D90B8[2])();
// 659D90C8: using guessed type _UNKNOWN *off_659D90C8;
// 659D9148: using guessed type int (*off_659D9148[2])();
// 659D9158: using guessed type _UNKNOWN *off_659D9158;

//----- (65900590) --------------------------------------------------------
int *__cdecl CEF_CreateBrowserRef(int *a1, int a2)
{
  _DWORD *v3; // eax
  _DWORD *v4; // esi
  int v5; // ecx

  if ( a2 )
  {
    v3 = operator new(0x18u);
    if ( v3 )
      v4 = sub_658FFFF0(v3, a2, 1);
    else
      v4 = 0;
    if ( v4 )
      (**(void (__thiscall ***)(int))((char *)v4 + *(_DWORD *)(v4[1] + 4) + 4))((int)v4 + *(_DWORD *)(v4[1] + 4) + 4);
    v5 = v4[3];
    if ( *(_DWORD *)(v5 + 8) )
      (*(void (__stdcall **)(int))(v5 + 8))(v5);
    *a1 = (int)v4;
    (**(void (__thiscall ***)(int))((char *)v4 + *(_DWORD *)(v4[1] + 4) + 4))((int)v4 + *(_DWORD *)(v4[1] + 4) + 4);
    (*(void (__thiscall **)(int))(*(_DWORD *)((char *)v4 + *(_DWORD *)(v4[1] + 4) + 4) + 4))((int)v4 + *(_DWORD *)(v4[1] + 4) + 4);
    return a1;
  }
  else
  {
    *a1 = 0;
    return a1;
  }
}

//----- (659008D0) --------------------------------------------------------
int *__cdecl CEF_CreateBrowserSync(int *a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // edi
  int v7; // esi
  void (__thiscall ***v8)(_DWORD, int, _DWORD, int, int); // ecx
  void (__thiscall ***BrowserSettings)(_DWORD); // eax
  int browser_sync; // eax
  int v11; // ecx
  int v12; // ecx
  int v14; // [esp-10h] [ebp-2Ch]
  int v15; // [esp-4h] [ebp-20h]
  int v16; // [esp-4h] [ebp-20h]

  if ( a5 )
    v6 = a5 + 4;
  else
    v6 = 0;
  if ( a2 )
    v7 = a2 + 4;
  else
    v7 = 0;
  v15 = a6;
  if ( a6 )
    (**(void (__thiscall ***)(int, int))(*(_DWORD *)(*(_DWORD *)(a6 + 4) + 4) + a6 + 4))(
      *(_DWORD *)(*(_DWORD *)(a6 + 4) + 4) + a6 + 4,
      a6);
  v16 = CEF_PrepareRequestContext(v15);
  v14 = a3;
  if ( a3 )
  {
    v8 = (void (__thiscall ***)(_DWORD, int, _DWORD, int, int))(*(_DWORD *)(*(_DWORD *)(a3 + 4) + 4) + a3 + 4);
    (**v8)(v8, a3, *(_DWORD *)(a4 + 4), v6, v16);
  }
  BrowserSettings = CEF_CreateBrowserSettings(v14);
  browser_sync = cef_browser_host_create_browser_sync(v7, BrowserSettings);
  CEF_CreateBrowserRef(a1, browser_sync);
  if ( a3 )
  {
    v11 = *(_DWORD *)(*(_DWORD *)(a3 + 4) + 4) + a3 + 4;
    (*(void (__thiscall **)(int))(*(_DWORD *)v11 + 4))(v11);
  }
  if ( a6 )
  {
    v12 = *(_DWORD *)(*(_DWORD *)(a6 + 4) + 4) + a6 + 4;
    (*(void (__thiscall **)(int))(*(_DWORD *)v12 + 4))(v12);
  }
  return a1;
}
// 65900943: variable 'v15' is possibly undefined
// 65900976: variable 'v14' is possibly undefined
// 659A86E0: using guessed type int __cdecl cef_browser_host_create_browser_sync(_DWORD, _DWORD);

//----- (65900D00) --------------------------------------------------------
int __stdcall sub_65900D00(int a1)
{
  int result; // eax

  result = a1;
  if ( a1 )
    return (***(int (__thiscall ****)(_DWORD))(a1 + 36))(*(_DWORD *)(a1 + 36));
  return result;
}

//----- (65900D20) --------------------------------------------------------
int __stdcall sub_65900D20(int a1)
{
  int result; // eax

  result = a1;
  if ( a1 )
    return (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 36) + 4))(*(_DWORD *)(a1 + 36));
  return result;
}

//----- (65900D40) --------------------------------------------------------
int __stdcall sub_65900D40(int a1)
{
  int result; // eax

  result = a1;
  if ( a1 )
    return (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 36) + 8))(*(_DWORD *)(a1 + 36));
  return result;
}

//----- (65900EE0) --------------------------------------------------------
LONG __thiscall CEF_AddRefAndIncrement(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 48) + 4) + 4)
                                     + *(_DWORD *)(this + 48)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65901530) --------------------------------------------------------
LONG __thiscall CEF_COMAddRef1(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65901540) --------------------------------------------------------
LONG __thiscall CEF_COMRelease1(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (65901550) --------------------------------------------------------
LONG __thiscall CEF_COMAddRef2(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (659017E0) --------------------------------------------------------
int __stdcall sub_659017E0(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65900DD0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 8);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_659010B0();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65900DD0: using guessed type int __cdecl sub_65900DD0(_DWORD, _DWORD);
// 659010B0: using guessed type int sub_659010B0(void);

//----- (659018C0) --------------------------------------------------------
int __stdcall sub_659018C0(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65900DD0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 12);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_65900F50();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65900DD0: using guessed type int __cdecl sub_65900DD0(_DWORD, _DWORD);
// 65900F50: using guessed type int sub_65900F50(void);

//----- (659019A0) --------------------------------------------------------
int __stdcall sub_659019A0(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65900DD0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 16);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_65901000();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65900DD0: using guessed type int __cdecl sub_65900DD0(_DWORD, _DWORD);
// 65901000: using guessed type int sub_65901000(void);

//----- (65901DF0) --------------------------------------------------------
int __stdcall sub_65901DF0(int a1, int a2, _BYTE *a3)
{
  int result; // eax
  _BYTE *v4; // edi
  void (__thiscall ***v5)(_DWORD, void ***); // esi
  void (__thiscall *v6)(_DWORD, void ***); // eax
  _BYTE v7[16]; // [esp+0h] [ebp-28h] BYREF
  void **v8; // [esp+10h] [ebp-18h] BYREF
  void *v9; // [esp+14h] [ebp-14h]
  char v10; // [esp+18h] [ebp-10h]
  int v11; // [esp+24h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v4 = a3;
    if ( a3 )
    {
      v5 = *(void (__thiscall ****)(_DWORD, void ***))sub_65900DD0(&a1, a1);
      a3 = v7;
      v11 = 0;
      sub_65901AB0(v7, v4);
      LOBYTE(v11) = 1;
      v8 = &off_659C0678;
      v9 = 0;
      v10 = 0;
      if ( a2 )
        sub_659014C0(&v8, a2, 0);
      LOBYTE(v11) = 2;
      v6 = **v5;
      LOBYTE(v11) = 3;
      v6(v5, &v8);
      LOBYTE(v11) = 0;
      v8 = &off_659C0678;
      if ( v9 )
      {
        if ( v10 )
        {
          cef_string_utf16_clear(v9);
          operator delete(v9);
        }
        v9 = 0;
        v10 = 0;
      }
      result = a1;
      v11 = -1;
      if ( a1 )
        return (*(int (__thiscall **)(int))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4) + 4))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4);
    }
  }
  return result;
}
// 65900DD0: using guessed type int __cdecl sub_65900DD0(_DWORD, _DWORD);
// 659014C0: using guessed type int __thiscall sub_659014C0(_DWORD, _DWORD, _DWORD);
// 65901AB0: using guessed type int __cdecl sub_65901AB0(_DWORD, _DWORD);
// 659A8794: using guessed type int __cdecl cef_string_utf16_clear(_DWORD);
// 659C0678: using guessed type void *off_659C0678;

//----- (65901EF0) --------------------------------------------------------
int __stdcall sub_65901EF0(int a1, _DWORD *a2)
{
  int result; // eax
  _DWORD *v3; // edi
  int v4; // esi
  int v5; // ecx
  _DWORD v6[4]; // [esp-4h] [ebp-1Ch] BYREF
  int v7; // [esp+14h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v3 = a2;
    if ( a2 )
    {
      v4 = *(_DWORD *)sub_65900DD0(&a1, a1);
      a2 = v6;
      v7 = 0;
      sub_65901B90(v6, v3);
      (*(void (__thiscall **)(int, _DWORD))(*(_DWORD *)v4 + 4))(v4, v6[0]);
      result = a1;
      v7 = -1;
      if ( a1 )
      {
        v5 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
        return (*(int (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
      }
    }
  }
  return result;
}
// 65900DD0: using guessed type int __cdecl sub_65900DD0(_DWORD, _DWORD);
// 65901B90: using guessed type int __cdecl sub_65901B90(_DWORD, _DWORD);

//----- (65901F90) --------------------------------------------------------
_DWORD *__thiscall CEF_App_Ctor(_DWORD *this, int a2)
{
  *(this + 1) = 0;
  *(this + 12) = a2;
  *(this + 11) = this;
  *(this + 2) = 36;
  *(this + 3) = sub_65900D00;
  *(this + 4) = sub_65900D20;
  *(this + 5) = sub_65900D40;
  *this = &off_659D937C;
  *(this + 6) = sub_65901DF0;
  *(this + 7) = sub_65901EF0;
  *(this + 8) = sub_659017E0;
  *(this + 9) = sub_659018C0;
  *(this + 10) = sub_659019A0;
  return this;
}
// 659D937C: using guessed type int (*off_659D937C)();

//----- (659021F0) --------------------------------------------------------
LONG __thiscall sub_659021F0(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (659026A0) --------------------------------------------------------
LONG __thiscall CEF_Handler1_AddRef(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65902DD0) --------------------------------------------------------
LONG __thiscall CEF_Handler2_AddRef(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (659031C0) --------------------------------------------------------
LONG __thiscall CEF_COM1_AddRef(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (659031D0) --------------------------------------------------------
LONG __thiscall CEF_COM1_Release(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (659031E0) --------------------------------------------------------
LONG __thiscall CEF_COM2_AddRef(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (659031F0) --------------------------------------------------------
LONG __thiscall CEF_COM2_Release(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (65903B70) --------------------------------------------------------
LONG __thiscall CEF_Handler3_AddRef(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65904500) --------------------------------------------------------
LONG __thiscall CEF_Handler4_AddRef(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65904970) --------------------------------------------------------
LONG __thiscall CEF_COM3_AddRef(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65905C90) --------------------------------------------------------
LONG __thiscall CEF_Handler5_AddRef(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65905ED0) --------------------------------------------------------
LONG __thiscall CEF_COM4_AddRef(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (659064C0) --------------------------------------------------------
LONG __thiscall CEF_Handler6_AddRef(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65906B90) --------------------------------------------------------
int __stdcall sub_65906B90(int a1)
{
  int result; // eax

  result = a1;
  if ( a1 )
    return (***(int (__thiscall ****)(_DWORD))(a1 + 72))(*(_DWORD *)(a1 + 72));
  return result;
}

//----- (65906BB0) --------------------------------------------------------
int __stdcall sub_65906BB0(int a1)
{
  int result; // eax

  result = a1;
  if ( a1 )
    return (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 72) + 4))(*(_DWORD *)(a1 + 72));
  return result;
}

//----- (65906BD0) --------------------------------------------------------
int __stdcall sub_65906BD0(int a1)
{
  int result; // eax

  result = a1;
  if ( a1 )
    return (*(int (__thiscall **)(_DWORD))(**(_DWORD **)(a1 + 72) + 8))(*(_DWORD *)(a1 + 72));
  return result;
}

//----- (65906DF0) --------------------------------------------------------
LONG __thiscall CEF_Handler7_AddRef(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 84) + 4) + 4)
                                     + *(_DWORD *)(this + 84)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65907920) --------------------------------------------------------
LONG __thiscall CEF_COM5_AddRef(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65907A70) --------------------------------------------------------
int __stdcall sub_65907A70(int a1)
{
  int result; // eax
  void (__thiscall ****v2)(_DWORD, int *); // eax
  void (__thiscall ***v3)(_DWORD, int *); // ecx
  void (__thiscall *v4)(_DWORD, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = (void (__thiscall ****)(_DWORD, int *))sub_65906CE0(&v9, a1);
    v3 = *v2;
    v4 = ***v2;
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_65906E60();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 65906E60: using guessed type int sub_65906E60(void);

//----- (65907B50) --------------------------------------------------------
int __stdcall sub_65907B50(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65906CE0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 4);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_65906F10();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 65906F10: using guessed type int sub_65906F10(void);

//----- (65907C30) --------------------------------------------------------
int __stdcall sub_65907C30(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65906CE0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 8);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_65906FC0();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 65906FC0: using guessed type int sub_65906FC0(void);

//----- (65907D10) --------------------------------------------------------
int __stdcall sub_65907D10(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65906CE0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 12);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_65907070();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 65907070: using guessed type int sub_65907070(void);

//----- (65907DF0) --------------------------------------------------------
int __stdcall sub_65907DF0(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65906CE0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 16);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_65907120();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 65907120: using guessed type int sub_65907120(void);

//----- (65907ED0) --------------------------------------------------------
int __stdcall sub_65907ED0(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65906CE0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 20);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_659071D0();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 659071D0: using guessed type int sub_659071D0(void);

//----- (65907FB0) --------------------------------------------------------
int __stdcall sub_65907FB0(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65906CE0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 24);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_65907280();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 65907280: using guessed type int sub_65907280(void);

//----- (65908090) --------------------------------------------------------
int __stdcall sub_65908090(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65906CE0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 28);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_65907330();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 65907330: using guessed type int sub_65907330(void);

//----- (65908170) --------------------------------------------------------
int __stdcall sub_65908170(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65906CE0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 32);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_659073E0();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 659073E0: using guessed type int sub_659073E0(void);

//----- (65908250) --------------------------------------------------------
int __stdcall sub_65908250(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65906CE0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 36);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_65907490();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 65907490: using guessed type int sub_65907490(void);

//----- (65908330) --------------------------------------------------------
int __stdcall sub_65908330(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65906CE0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 40);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_65907540();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 65907540: using guessed type int sub_65907540(void);

//----- (65908410) --------------------------------------------------------
int __stdcall sub_65908410(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65906CE0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 44);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_659075F0();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 659075F0: using guessed type int sub_659075F0(void);

//----- (659084F0) --------------------------------------------------------
int __stdcall sub_659084F0(int a1)
{
  int result; // eax
  int v2; // eax
  int v3; // ecx
  void (__thiscall *v4)(int, int *); // edx
  int v5; // ecx
  int v6; // esi
  int v7; // ecx
  _DWORD v8[4]; // [esp-4h] [ebp-20h] BYREF
  int v9; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+18h] [ebp-4h]

  result = a1;
  if ( a1 )
  {
    v2 = sub_65906CE0(&v9, a1);
    v3 = *(_DWORD *)v2;
    v4 = *(void (__thiscall **)(int, int *))(**(_DWORD **)v2 + 48);
    v10 = 0;
    v4(v3, &a1);
    LOBYTE(v10) = 2;
    if ( v9 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(v9 + 4) + 4) + v9 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v5 + 4))(v5);
    }
    v8[0] = a1;
    v8[3] = v8;
    if ( a1 )
      (**(void (__thiscall ***)(int, _DWORD))(*(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4))(
        *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4,
        v8[0]);
    v6 = sub_659076A0();
    v10 = -1;
    if ( a1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
      (*(void (__thiscall **)(int))(*(_DWORD *)v7 + 4))(v7);
    }
    return v6;
  }
  return result;
}
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 659076A0: using guessed type int sub_659076A0(void);

//----- (65908770) --------------------------------------------------------
int __stdcall sub_65908770(int a1, _DWORD *a2, int a3, int *a4)
{
  int v5; // ebx
  int *v6; // edi
  int v7; // esi
  int v8; // ecx
  int (__thiscall *v9)(int, int, int, _DWORD); // edx
  unsigned __int8 v10; // bl
  int v11; // ecx
  int v12; // [esp-Ch] [ebp-28h] BYREF
  int v13; // [esp-8h] [ebp-24h]
  _DWORD v14[5]; // [esp-4h] [ebp-20h] BYREF
  int v15; // [esp+18h] [ebp-4h]

  if ( !a1 )
    return 0;
  v5 = (int)a2;
  if ( !a2 )
    return 0;
  v6 = a4;
  if ( !a4 )
    return 0;
  v7 = *(_DWORD *)sub_65906CE0(&a1, a1);
  a2 = v14;
  v15 = 0;
  sub_659085D0(v14, v6);
  v13 = a3;
  v12 = v8;
  a4 = &v12;
  LOBYTE(v15) = 1;
  CEF_CreateBrowserRef(&v12, v5);
  v9 = *(int (__thiscall **)(int, int, int, _DWORD))(*(_DWORD *)v7 + 52);
  LOBYTE(v15) = 0;
  v10 = v9(v7, v12, v13, v14[0]);
  v15 = -1;
  if ( a1 )
  {
    v11 = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) + a1 + 4;
    (*(void (__thiscall **)(int))(*(_DWORD *)v11 + 4))(v11);
  }
  return v10;
}
// 659087E9: variable 'v8' is possibly undefined
// 65906CE0: using guessed type int __cdecl sub_65906CE0(_DWORD, _DWORD);
// 659085D0: using guessed type int __cdecl sub_659085D0(_DWORD, _DWORD);

//----- (65908850) --------------------------------------------------------
_DWORD *__thiscall CEF_Client_Ctor(_DWORD *this, int a2)
{
  _DWORD *v3; // edi

  *(this + 1) = 0;
  v3 = this + 2;
  *(this + 21) = a2;
  *(this + 20) = this;
  memset(this + 2, 0, 0x48u);
  *v3 = 72;
  *(this + 3) = sub_65906B90;
  *(this + 4) = sub_65906BB0;
  *(this + 5) = sub_65906BD0;
  *this = &off_659D9A7C;
  *(this + 6) = sub_65907A70;
  *(this + 7) = sub_65907B50;
  *(this + 8) = sub_65907C30;
  *(this + 9) = sub_65907D10;
  *(this + 10) = sub_65907DF0;
  *(this + 11) = sub_65907ED0;
  *(this + 12) = sub_65907FB0;
  *(this + 13) = sub_65908090;
  *(this + 14) = sub_65908170;
  *(this + 15) = sub_65908250;
  *(this + 16) = sub_65908330;
  *(this + 17) = sub_65908410;
  *(this + 18) = sub_659084F0;
  *(this + 19) = sub_65908770;
  return this;
}
// 659D9A7C: using guessed type int (*off_659D9A7C)();

//----- (65908DD0) --------------------------------------------------------
LONG __thiscall CEF_Handler8_AddRef(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65909060) --------------------------------------------------------
LONG __thiscall CEF_COM6_AddRef(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65909070) --------------------------------------------------------
LONG __thiscall CEF_COM6_Release(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (6590E080) --------------------------------------------------------
LONG __thiscall CEF_Handler9_AddRef(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 40) + 4) + 4)
                                     + *(_DWORD *)(this + 40)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (6590E2C0) --------------------------------------------------------
LONG __thiscall CEF_COM7_AddRef(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (6590EDA0) --------------------------------------------------------
LONG __thiscall sub_6590EDA0(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 72) + 4) + 4)
                                     + *(_DWORD *)(this + 72)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (6590F510) --------------------------------------------------------
LONG __thiscall sub_6590F510(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (6590F520) --------------------------------------------------------
LONG __thiscall sub_6590F520(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (6590F530) --------------------------------------------------------
LONG __thiscall sub_6590F530(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (6590F540) --------------------------------------------------------
LONG __thiscall sub_6590F540(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (6590F550) --------------------------------------------------------
LONG __thiscall sub_6590F550(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (6590F560) --------------------------------------------------------
LONG __thiscall sub_6590F560(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (6590F570) --------------------------------------------------------
LONG __thiscall sub_6590F570(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (6590F580) --------------------------------------------------------
LONG __thiscall sub_6590F580(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (65910C40) --------------------------------------------------------
LONG __thiscall sub_65910C40(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 36) + 4) + 4)
                                     + *(_DWORD *)(this + 36)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65910F00) --------------------------------------------------------
bool __thiscall sub_65910F00(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (65911D20) --------------------------------------------------------
LONG __thiscall sub_65911D20(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 52) + 4) + 4)
                                     + *(_DWORD *)(this + 52)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (659121F0) --------------------------------------------------------
LONG __thiscall sub_659121F0(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65912200) --------------------------------------------------------
LONG __thiscall sub_65912200(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65912DE0) --------------------------------------------------------
bool __thiscall sub_65912DE0(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (65913890) --------------------------------------------------------
bool __thiscall sub_65913890(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (65913DD0) --------------------------------------------------------
LONG __thiscall sub_65913DD0(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65914750) --------------------------------------------------------
bool __thiscall sub_65914750(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (65914E10) --------------------------------------------------------
LONG __thiscall sub_65914E10(int this)
{
  (***(void (__thiscall ****)(_DWORD))(this + 28))(*(_DWORD *)(this + 28));
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65916970) --------------------------------------------------------
LONG __thiscall sub_65916970(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 40) + 4) + 4)
                                     + *(_DWORD *)(this + 40)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65916D60) --------------------------------------------------------
LONG __thiscall sub_65916D60(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65916D70) --------------------------------------------------------
LONG __thiscall sub_65916D70(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (65916D80) --------------------------------------------------------
LONG __thiscall sub_65916D80(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65916D90) --------------------------------------------------------
LONG __thiscall sub_65916D90(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (65917930) --------------------------------------------------------
LONG __thiscall sub_65917930(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65917B70) --------------------------------------------------------
LONG __thiscall sub_65917B70(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (659181E0) --------------------------------------------------------
LONG __thiscall sub_659181E0(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 48) + 4) + 4)
                                     + *(_DWORD *)(this + 48)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65918CE0) --------------------------------------------------------
LONG __thiscall sub_65918CE0(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 36) + 4) + 4)
                                     + *(_DWORD *)(this + 36)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65919290) --------------------------------------------------------
LONG __thiscall sub_65919290(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (659192A0) --------------------------------------------------------
LONG __thiscall sub_659192A0(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (659192B0) --------------------------------------------------------
LONG __thiscall sub_659192B0(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (659192C0) --------------------------------------------------------
LONG __thiscall sub_659192C0(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (659192D0) --------------------------------------------------------
LONG __thiscall sub_659192D0(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (659192E0) --------------------------------------------------------
LONG __thiscall sub_659192E0(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (6591A0A0) --------------------------------------------------------
LONG __thiscall sub_6591A0A0(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (6591A2E0) --------------------------------------------------------
LONG __thiscall sub_6591A2E0(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (6591A8D0) --------------------------------------------------------
LONG __thiscall sub_6591A8D0(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 40) + 4) + 4)
                                     + *(_DWORD *)(this + 40)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (6591AE60) --------------------------------------------------------
LONG __thiscall sub_6591AE60(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 36) + 4) + 4)
                                     + *(_DWORD *)(this + 36)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (6591B0A0) --------------------------------------------------------
LONG __thiscall sub_6591B0A0(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (6591B890) --------------------------------------------------------
LONG __thiscall sub_6591B890(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 44) + 4) + 4)
                                     + *(_DWORD *)(this + 44)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (6591BAD0) --------------------------------------------------------
LONG __thiscall sub_6591BAD0(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (6591C430) --------------------------------------------------------
LONG __thiscall sub_6591C430(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 36) + 4) + 4)
                                     + *(_DWORD *)(this + 36)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (6591CB20) --------------------------------------------------------
LONG __thiscall sub_6591CB20(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 48) + 4) + 4)
                                     + *(_DWORD *)(this + 48)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (6591D4B0) --------------------------------------------------------
LONG __thiscall sub_6591D4B0(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 44) + 4) + 4)
                                     + *(_DWORD *)(this + 44)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (6591DEC0) --------------------------------------------------------
LONG __thiscall sub_6591DEC0(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 64) + 4) + 4)
                                     + *(_DWORD *)(this + 64)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (6591F9D0) --------------------------------------------------------
LONG __thiscall sub_6591F9D0(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 72) + 4) + 4)
                                     + *(_DWORD *)(this + 72)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (6591FFA0) --------------------------------------------------------
LONG __thiscall sub_6591FFA0(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (6591FFB0) --------------------------------------------------------
LONG __thiscall sub_6591FFB0(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (6591FFC0) --------------------------------------------------------
LONG __thiscall sub_6591FFC0(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (6591FFD0) --------------------------------------------------------
LONG __thiscall sub_6591FFD0(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65921470) --------------------------------------------------------
bool __thiscall sub_65921470(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (65921880) --------------------------------------------------------
LONG __thiscall sub_65921880(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65921AE0) --------------------------------------------------------
bool __thiscall sub_65921AE0(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (65922570) --------------------------------------------------------
LONG __thiscall sub_65922570(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65922580) --------------------------------------------------------
LONG __thiscall sub_65922580(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (65922590) --------------------------------------------------------
LONG __thiscall sub_65922590(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (659225A0) --------------------------------------------------------
LONG __thiscall sub_659225A0(_DWORD *this)
{
  char *v1; // edi
  int v2; // eax
  char *v3; // esi
  LONG v4; // edi

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  v3 = v1 - 20;
  if ( *(_DWORD *)(v2 + 8) )
    (*(void (__stdcall **)(int))(v2 + 8))(v2);
  v4 = InterlockedDecrement((volatile LONG *)v1 - 3);
  if ( !v4 && v3 )
    (*(void (__thiscall **)(char *, int))(*(_DWORD *)&v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4] + 12))(
      &v3[*(_DWORD *)(*((_DWORD *)v3 + 1) + 4) + 4],
      1);
  return v4;
}

//----- (65923070) --------------------------------------------------------
int __thiscall sub_65923070(_DWORD *this)
{
  int v1; // eax

  v1 = *(this + 3);
  if ( *(_DWORD *)v1 >= 0x14u && *(_DWORD *)(v1 + 16) )
    return (*(int (__stdcall **)(_DWORD))(v1 + 16))(*(this + 3));
  else
    return 0;
}

//----- (659236E0) --------------------------------------------------------
LONG __thiscall sub_659236E0(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65924820) --------------------------------------------------------
LONG __thiscall sub_65924820(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65925270) --------------------------------------------------------
bool __thiscall sub_65925270(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (65925580) --------------------------------------------------------
LONG __thiscall sub_65925580(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (659258F0) --------------------------------------------------------
int __thiscall sub_659258F0(int *this)
{
  int result; // eax

  result = *(this + 3);
  if ( *(_DWORD *)result >= 0x14u )
  {
    if ( *(_DWORD *)(result + 16) )
      return (*(int (__stdcall **)(_DWORD))(result + 16))(*(this + 3));
  }
  return result;
}

//----- (65925930) --------------------------------------------------------
bool __thiscall sub_65925930(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (65925F60) --------------------------------------------------------
LONG __thiscall sub_65925F60(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (659262B0) --------------------------------------------------------
LONG __thiscall sub_659262B0(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65926480) --------------------------------------------------------
bool __thiscall sub_65926480(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (65926E40) --------------------------------------------------------
LONG __thiscall sub_65926E40(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (65928180) --------------------------------------------------------
LONG __thiscall sub_65928180(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 36) + 4) + 4)
                                     + *(_DWORD *)(this + 36)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (65928500) --------------------------------------------------------
int __thiscall sub_65928500(_DWORD *this)
{
  int v1; // eax

  v1 = *(this + 3);
  if ( *(_DWORD *)v1 >= 0x14u && *(_DWORD *)(v1 + 16) )
    return (*(int (__stdcall **)(_DWORD))(v1 + 16))(*(this + 3));
  else
    return 0;
}

//----- (65928BD0) --------------------------------------------------------
bool __thiscall sub_65928BD0(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (65929A30) --------------------------------------------------------
bool __thiscall sub_65929A30(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (6592A0A0) --------------------------------------------------------
int __thiscall sub_6592A0A0(int *this)
{
  int result; // eax

  result = *(this + 3);
  if ( *(_DWORD *)result >= 0x14u )
  {
    if ( *(_DWORD *)(result + 16) )
      return (*(int (__stdcall **)(_DWORD))(result + 16))(*(this + 3));
  }
  return result;
}

//----- (6592A0C0) --------------------------------------------------------
bool __thiscall sub_6592A0C0(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (6592A890) --------------------------------------------------------
bool __thiscall sub_6592A890(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (6592A9C0) --------------------------------------------------------
bool __thiscall sub_6592A9C0(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (6592B5F0) --------------------------------------------------------
LONG __thiscall sub_6592B5F0(int this)
{
  void (__thiscall ***v2)(_DWORD); // ecx

  v2 = (void (__thiscall ***)(_DWORD))(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 32) + 4) + 4)
                                     + *(_DWORD *)(this + 32)
                                     + 4);
  (**v2)(v2);
  return InterlockedIncrement((volatile LONG *)(this + 4));
}

//----- (6592B830) --------------------------------------------------------
LONG __thiscall sub_6592B830(_DWORD *this)
{
  char *v1; // esi
  int v2; // eax

  v1 = (char *)this - *(this - 1);
  v2 = *((_DWORD *)v1 - 2);
  if ( *(_DWORD *)(v2 + 4) )
    (*(void (__stdcall **)(int))(v2 + 4))(v2);
  return InterlockedIncrement((volatile LONG *)v1 - 3);
}

//----- (6592BC40) --------------------------------------------------------
int __thiscall sub_6592BC40(_DWORD *this)
{
  int v1; // eax

  v1 = *(this + 3);
  if ( *(_DWORD *)v1 >= 0x14u && *(_DWORD *)(v1 + 16) )
    return (*(int (__stdcall **)(_DWORD))(v1 + 16))(*(this + 3));
  else
    return 0;
}

//----- (6592C770) --------------------------------------------------------
bool __thiscall sub_6592C770(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (6592CA80) --------------------------------------------------------
bool __thiscall sub_6592CA80(_DWORD *this)
{
  _DWORD *v1; // eax

  v1 = (_DWORD *)*(this + 3);
  return *v1 >= 0x14u && v1[4] && ((int (__stdcall *)(_DWORD))v1[4])(*(this + 3)) != 0;
}

//----- (6592D440) --------------------------------------------------------
int __thiscall sub_6592D440(_BYTE *this, float a2)
{
  int result; // eax

  if ( *(this + 3432) )
    return alListenerf(4106, LODWORD(a2));
  return result;
}
// 659A8590: using guessed type int __cdecl alListenerf(_DWORD, _DWORD);

//----- (6592E5D0) --------------------------------------------------------
int __thiscall sub_6592E5D0(int this, float *a2, float *a3)
{
  float *v4; // ebx
  int result; // eax
  float v7; // [esp+4h] [ebp-Ch]
  float v8; // [esp+4h] [ebp-Ch]
  float v9; // [esp+8h] [ebp-8h]
  float v10; // [esp+8h] [ebp-8h]
  float v11; // [esp+Ch] [ebp-4h]
  float v12; // [esp+Ch] [ebp-4h]

  if ( *(_BYTE *)(this + 3432) )
  {
    v4 = (float *)(this + 3460);
    *(float *)(this + 3460) = *a2;
    *(float *)(this + 3464) = a2[1];
    *(float *)(this + 3468) = a2[2];
    alListenerfv(4100, this + 3460);
    *(float *)(this + 3440) = *a2;
    *(float *)(this + 3444) = a2[1];
    *(float *)(this + 3448) = a2[2];
    v7 = (a3[2] * *a3 + a3[3] * a3[1]) * 2.0;
    v9 = (a3[2] * a3[1] - *a3 * a3[3]) * 2.0;
    v11 = 1.0 - (a3[1] * a3[1] + *a3 * *a3) * 2.0;
    *v4 = v7;
    *(float *)(this + 3464) = v9;
    *(float *)(this + 3468) = v11;
    v8 = 1.0 - (a3[2] * a3[2] + a3[1] * a3[1]) * 2.0;
    v10 = (a3[2] * a3[3] + *a3 * a3[1]) * 2.0;
    v12 = 2.0 * (a3[2] * *a3 - a3[3] * a3[1]);
    *(float *)(this + 3472) = v8;
    *(float *)(this + 3476) = v10;
    *(float *)(this + 3480) = v12;
    return alListenerfv(4111, this + 3460);
  }
  return result;
}
// 659A8568: using guessed type int __cdecl alListenerfv(_DWORD, _DWORD);

//----- (65930760) --------------------------------------------------------
char __thiscall sub_65930760(char *Destination, int Source, int a3)
{
  const char *v5; // eax
  const char *v6; // eax
  int v7; // edi
  int String; // ebx
  int v9; // eax
  void (__cdecl *ProcAddress)(void *, int, _DWORD, int *, int); // edi

  if ( *(Destination + 3432) )
    return 1;
  sub_6592DED0();
  v5 = (const char *)Source;
  if ( !Source )
    v5 = byte_659A8B98;
  strncpy(Destination, v5, 0xFFu);
  *(Destination + 255) = 0;
  if ( !(unsigned __int8)sub_6592D3C0(Destination, Destination) )
    *Destination = 0;
  if ( !strlen(Destination) )
  {
    v6 = (const char *)*((_DWORD *)Destination + 64);
    if ( !v6 )
      v6 = byte_659A8B98;
    strncpy(Destination, v6, 0xFFu);
    *(Destination + 255) = 0;
  }
  (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
    g_pILTClient,
    "SoundMgr: Using sound device '%s'",
    Destination);
  v7 = alcOpenDevice(Destination);
  if ( v7 )
  {
    String = alcGetString(0, 785);
    v9 = alcCaptureOpenDevice(String, 22050, 4353, 4410);
    *((_DWORD *)Destination + 834) = v9;
    if ( !v9 )
      (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "SoundMgr: Couldn't open capture sound device '%s'",
        String);
    Source = alcCreateContext(v7, 0);
    if ( Source )
    {
      alcGetError(v7);
      alcMakeContextCurrent(Source);
      if ( alcGetError(v7) )
      {
        (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
          g_pILTClient,
          "SoundMgr: Failed to make context current");
        return 0;
      }
      else
      {
        alGetError();
        alcGetError(v7);
        alListenerf(4106, 1.0);
        alDistanceModel(53250);
        if ( alGetError() )
        {
          (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
            g_pILTClient,
            "SoundMgr: Failed to set distance model");
          return 0;
        }
        else
        {
          *((_DWORD *)Destination + 859) = 0;
          if ( a3 )
          {
            if ( (unsigned __int8)alIsExtensionPresent("EAX2.0") == 1 )
            {
              *((_DWORD *)Destination + 859) = 2;
            }
            else if ( (unsigned __int8)alIsExtensionPresent("EAX") == 1 )
            {
              *((_DWORD *)Destination + 859) = 1;
            }
            if ( *((_DWORD *)Destination + 859) )
            {
              ProcAddress = (void (__cdecl *)(void *, int, _DWORD, int *, int))alGetProcAddress("EAXSet");
              if ( ProcAddress )
              {
                Source = -10000;
                ProcAddress(&unk_659DC228, 2, 0, &Source, 4);
                a3 = 0;
                ProcAddress(&unk_659DC228, 11, 0, &a3, 4);
              }
            }
          }
          sub_65931980(Destination);
          sub_659302E0(Destination);
          *(Destination + 3432) = 1;
          return 1;
        }
      }
    }
    else
    {
      (*(void (__cdecl **)(int, const char *))(*(_DWORD *)g_pILTClient + 28))(
        g_pILTClient,
        "SoundMgr: Couldn't create audio context");
      return 0;
    }
  }
  else
  {
    (*(void (**)(int, const char *, ...))(*(_DWORD *)g_pILTClient + 28))(
      g_pILTClient,
      "SoundMgr: Couldn't open sound device '%s'",
      Destination);
    return 0;
  }
}
// 6592D3C0: using guessed type int __thiscall sub_6592D3C0(_DWORD, _DWORD);
// 6592DED0: using guessed type int sub_6592DED0(void);
// 659302E0: using guessed type int __thiscall sub_659302E0(_DWORD);
// 65931980: using guessed type int __thiscall sub_65931980(_DWORD);
// 659A851C: using guessed type int __cdecl alcOpenDevice(_DWORD);
// 659A8520: using guessed type int __cdecl alcCaptureOpenDevice(_DWORD, _DWORD, _DWORD, _DWORD);
// 659A8524: using guessed type int __cdecl alcCreateContext(_DWORD, _DWORD);
// 659A8528: using guessed type int __cdecl alcGetError(_DWORD);
// 659A852C: using guessed type int __cdecl alDistanceModel(_DWORD);
// 659A8530: using guessed type int __cdecl alIsExtensionPresent(_DWORD);
// 659A8534: using guessed type int __cdecl alGetProcAddress(_DWORD);
// 659A854C: using guessed type int __cdecl alcMakeContextCurrent(_DWORD);
// 659A8560: using guessed type int alGetError(void);
// 659A8570: using guessed type int __cdecl alcGetString(_DWORD, _DWORD);
// 659A8590: using guessed type int __cdecl alListenerf(_DWORD, _DWORD);

//----- (65932300) --------------------------------------------------------
int __stdcall ItemTemplate_GetMaxDurability(unsigned __int16 a1)
{
  int result; // eax

  if ( a1 <= 0x3D8u )
  {
    if ( a1 == 984 )
      return 14000;
    if ( a1 == 22 || a1 == 36 )
      return 65000;
    return 10000;
  }
  if ( a1 > 0x500u )
  {
    if ( a1 != 1281 )
      return 10000;
    return 100;
  }
  if ( a1 == 1280 )
    return 100;
  switch ( a1 )
  {
    case 0x3DAu:
    case 0x3DBu:
      result = 28000;
      break;
    case 0x3DCu:
      result = 32500;
      break;
    case 0x3E0u:
      return 65000;
    case 0x3E2u:
      result = 35000;
      break;
    default:
      return 10000;
  }
  return result;
}

//----- (659323C0) --------------------------------------------------------
bool __stdcall EquipSlotMask_HasSlot(char a1, unsigned __int16 a2)
{
  return (unsigned __int8)(a1 - 5) <= 0xBu && (a2 & (1 << (a1 - 4))) != 0;
}

//----- (65932400) --------------------------------------------------------
_WORD *__stdcall sub_65932400(char a1, char a2, _WORD *a3)
{
  _WORD *result; // eax
  int v4; // edx

  result = a3;
  v4 = 1 << (a1 - 4);
  if ( a2 )
    *a3 |= v4;
  else
    *a3 &= ~(_WORD)v4;
  return result;
}

//----- (65932430) --------------------------------------------------------
char __stdcall sub_65932430(unsigned __int16 a1)
{
  char v2[92]; // [esp+0h] [ebp-5Ch] BYREF

  return ItemTemplate_CopyVariantByIndex(a1, 0, v2);
}

//----- (659324C0) --------------------------------------------------------
double __stdcall Item_GetQualityScale(unsigned __int16 a1, unsigned __int8 a2)
{
  bool v2; // zf

  if ( a1 > 0x136u )
  {
    if ( a1 > 0x1BEu )
    {
      if ( (unsigned int)a1 - 989 > 1 )
        return 1.0;
      goto LABEL_15;
    }
    if ( a1 == 446 || a1 == 360 )
      goto LABEL_15;
    v2 = a1 == 410;
  }
  else
  {
    if ( a1 == 310 )
      goto LABEL_15;
    if ( a1 > 0xD2u )
    {
      v2 = a1 == 260;
    }
    else
    {
      if ( a1 == 210 || a1 == 1 )
        goto LABEL_15;
      v2 = a1 == 110;
    }
  }
  if ( !v2 )
    return 1.0;
LABEL_15:
  if ( a2 < 3u )
    return 1.0;
  return 0.25;
}

//----- (65932540) --------------------------------------------------------
char __stdcall sub_65932540(int a1, int a2, int a3, int a4, int a5)
{
  return 0;
}

//----- (65932750) --------------------------------------------------------
int __stdcall sub_65932750(unsigned __int16 a1)
{
  int result; // eax

  if ( a1 > 0xBA4u )
  {
    switch ( a1 )
    {
      case 0xBA5u:
      case 0xBA6u:
LABEL_51:
        result = 26;
        break;
      case 0xBA7u:
      case 0xBA8u:
LABEL_50:
        result = 6;
        break;
      default:
LABEL_52:
        result = 47;
        break;
    }
  }
  else if ( a1 == 2980 )
  {
    return 46;
  }
  else
  {
    switch ( a1 )
    {
      case 0x6Eu:
      case 0xD2u:
      case 0x104u:
      case 0x136u:
      case 0x168u:
      case 0x19Au:
      case 0x1BDu:
        result = 0;
        break;
      case 0x6Fu:
      case 0xD3u:
      case 0x105u:
      case 0x137u:
      case 0x169u:
      case 0x19Bu:
      case 0x1BEu:
        result = 1;
        break;
      case 0x70u:
      case 0xD4u:
      case 0x106u:
      case 0x138u:
      case 0x16Au:
      case 0x19Cu:
      case 0x1BFu:
        result = 2;
        break;
      case 0x71u:
      case 0xD5u:
      case 0x107u:
      case 0x139u:
      case 0x16Bu:
      case 0x19Du:
      case 0x1C0u:
        result = 17;
        break;
      case 0x72u:
      case 0xD6u:
      case 0x108u:
      case 0x13Au:
      case 0x16Cu:
      case 0x19Eu:
      case 0x1C1u:
        result = 18;
        break;
      case 0x73u:
      case 0x91u:
      case 0xD7u:
      case 0x109u:
      case 0x13Bu:
      case 0x16Du:
      case 0x19Fu:
      case 0x1C2u:
        result = 19;
        break;
      case 0x74u:
      case 0xD8u:
      case 0x10Au:
      case 0x13Cu:
      case 0x16Eu:
      case 0x1A0u:
      case 0x1C3u:
        result = 20;
        break;
      case 0x75u:
      case 0xD9u:
      case 0x10Bu:
      case 0x13Du:
      case 0x16Fu:
      case 0x1A1u:
      case 0x1C4u:
        result = 12;
        break;
      case 0x76u:
      case 0xDAu:
      case 0x10Cu:
      case 0x13Eu:
      case 0x170u:
      case 0x1A2u:
      case 0x1C5u:
        result = 13;
        break;
      case 0x77u:
      case 0x92u:
      case 0xDBu:
      case 0x10Du:
      case 0x13Fu:
      case 0x171u:
      case 0x1A3u:
      case 0x1C6u:
        result = 14;
        break;
      case 0x78u:
      case 0xDCu:
      case 0x10Eu:
      case 0x140u:
      case 0x172u:
      case 0x1A4u:
      case 0x1C7u:
        result = 15;
        break;
      case 0x79u:
      case 0xDDu:
      case 0x10Fu:
      case 0x141u:
      case 0x173u:
      case 0x1A5u:
      case 0x1C8u:
        result = 37;
        break;
      case 0x7Au:
      case 0xDEu:
      case 0x110u:
      case 0x142u:
      case 0x174u:
      case 0x1A6u:
      case 0x1C9u:
        result = 38;
        break;
      case 0x7Bu:
      case 0x93u:
      case 0xDFu:
      case 0x111u:
      case 0x143u:
      case 0x175u:
      case 0x1A7u:
      case 0x1CAu:
        result = 39;
        break;
      case 0x7Cu:
      case 0xE0u:
      case 0x112u:
      case 0x144u:
      case 0x176u:
      case 0x1A8u:
      case 0x1CBu:
        result = 40;
        break;
      case 0x7Du:
      case 0xE1u:
      case 0x113u:
      case 0x145u:
      case 0x177u:
      case 0x1A9u:
      case 0x1CCu:
        result = 27;
        break;
      case 0x7Eu:
      case 0xE2u:
      case 0x114u:
      case 0x146u:
      case 0x178u:
      case 0x1AAu:
      case 0x1CDu:
        result = 28;
        break;
      case 0x7Fu:
      case 0x94u:
      case 0xE3u:
      case 0x115u:
      case 0x147u:
      case 0x179u:
      case 0x1ABu:
      case 0x1CEu:
        result = 29;
        break;
      case 0x80u:
      case 0xE4u:
      case 0x116u:
      case 0x148u:
      case 0x17Au:
      case 0x1ACu:
      case 0x1CFu:
        result = 30;
        break;
      case 0x81u:
      case 0xE5u:
      case 0x117u:
      case 0x149u:
      case 0x17Bu:
      case 0x1ADu:
      case 0x1D0u:
        result = 32;
        break;
      case 0x82u:
      case 0xE6u:
      case 0x118u:
      case 0x14Au:
      case 0x17Cu:
      case 0x1AEu:
      case 0x1D1u:
        result = 33;
        break;
      case 0x83u:
      case 0x95u:
      case 0xE7u:
      case 0x119u:
      case 0x14Bu:
      case 0x17Du:
      case 0x1AFu:
      case 0x1D2u:
        result = 34;
        break;
      case 0x84u:
      case 0xE8u:
      case 0x11Au:
      case 0x14Cu:
      case 0x17Eu:
      case 0x1B0u:
      case 0x1D3u:
        result = 35;
        break;
      case 0x85u:
      case 0xE9u:
      case 0x11Bu:
      case 0x14Du:
      case 0x17Fu:
      case 0x1B1u:
      case 0x1D4u:
        result = 7;
        break;
      case 0x86u:
      case 0xEAu:
      case 0x11Cu:
      case 0x14Eu:
      case 0x180u:
      case 0x1B2u:
      case 0x1D5u:
        result = 8;
        break;
      case 0x87u:
      case 0x96u:
      case 0xEBu:
      case 0x11Du:
      case 0x14Fu:
      case 0x181u:
      case 0x1B3u:
      case 0x1D6u:
        result = 9;
        break;
      case 0x88u:
      case 0xECu:
      case 0x11Eu:
      case 0x150u:
      case 0x182u:
      case 0x1B4u:
      case 0x1D7u:
        result = 10;
        break;
      case 0x89u:
      case 0xEDu:
      case 0x11Fu:
      case 0x151u:
      case 0x183u:
      case 0x1B5u:
      case 0x1D8u:
        result = 42;
        break;
      case 0x8Au:
      case 0xEEu:
      case 0x120u:
      case 0x152u:
      case 0x184u:
      case 0x1B6u:
      case 0x1D9u:
        result = 43;
        break;
      case 0x8Bu:
      case 0x97u:
      case 0xEFu:
      case 0x121u:
      case 0x153u:
      case 0x185u:
      case 0x1B7u:
      case 0x1DAu:
        result = 44;
        break;
      case 0x8Cu:
      case 0xF0u:
      case 0x122u:
      case 0x154u:
      case 0x186u:
      case 0x1B8u:
      case 0x1DBu:
        result = 45;
        break;
      case 0x8Du:
      case 0xF1u:
      case 0x123u:
      case 0x155u:
      case 0x187u:
      case 0x1B9u:
      case 0x1DCu:
        result = 22;
        break;
      case 0x8Eu:
      case 0xF2u:
      case 0x124u:
      case 0x156u:
      case 0x188u:
      case 0x1BAu:
      case 0x1DDu:
        result = 23;
        break;
      case 0x8Fu:
      case 0x98u:
      case 0xF3u:
      case 0x125u:
      case 0x157u:
      case 0x189u:
      case 0x1BBu:
      case 0x1DEu:
        result = 24;
        break;
      case 0x90u:
      case 0xF4u:
      case 0x126u:
      case 0x158u:
      case 0x18Au:
      case 0x1BCu:
      case 0x1DFu:
        result = 25;
        break;
      case 0x99u:
      case 0xF5u:
      case 0x127u:
      case 0x159u:
      case 0x18Bu:
      case 0x1E1u:
        result = 3;
        break;
      case 0x9Au:
      case 0xF6u:
      case 0x128u:
      case 0x15Au:
      case 0x18Cu:
      case 0x1E0u:
      case 0x1E2u:
        result = 4;
        break;
      case 0x9Bu:
      case 0x9Cu:
      case 0xCDu:
      case 0xCEu:
      case 0xFFu:
      case 0x100u:
      case 0x131u:
      case 0x132u:
      case 0x163u:
      case 0x164u:
      case 0x195u:
      case 0x196u:
      case 0x1E3u:
      case 0x1E4u:
      case 0x1E5u:
      case 0x1E6u:
        result = 5;
        break;
      case 0x9Du:
      case 0xF7u:
      case 0x129u:
      case 0x15Bu:
      case 0x18Du:
      case 0x1E7u:
      case 0x1E8u:
        result = 21;
        break;
      case 0x9Eu:
      case 0xF8u:
      case 0x12Au:
      case 0x15Cu:
      case 0x18Eu:
      case 0x1E9u:
      case 0x1EAu:
        result = 16;
        break;
      case 0x9Fu:
      case 0xF9u:
      case 0x12Bu:
      case 0x15Du:
      case 0x18Fu:
      case 0x1EBu:
      case 0x1ECu:
        result = 41;
        break;
      case 0xC8u:
      case 0xFAu:
      case 0x12Cu:
      case 0x15Eu:
      case 0x190u:
      case 0x1EDu:
      case 0x1EEu:
        result = 31;
        break;
      case 0xC9u:
      case 0xFBu:
      case 0x12Du:
      case 0x15Fu:
      case 0x191u:
      case 0x1EFu:
      case 0x1F0u:
        result = 36;
        break;
      case 0xCAu:
      case 0xFCu:
      case 0x12Eu:
      case 0x160u:
      case 0x192u:
      case 0x1F1u:
      case 0x1F2u:
        result = 11;
        break;
      case 0xCBu:
      case 0xFDu:
      case 0x12Fu:
      case 0x161u:
      case 0x193u:
      case 0x1F3u:
        return 46;
      case 0xCCu:
      case 0xFEu:
      case 0x130u:
      case 0x162u:
      case 0x194u:
        goto LABEL_51;
      case 0xCFu:
      case 0x101u:
      case 0x133u:
      case 0x165u:
      case 0x197u:
        goto LABEL_50;
      default:
        goto LABEL_52;
    }
  }
  return result;
}

//----- (65932BA0) --------------------------------------------------------
char __stdcall sub_65932BA0(int a1)
{
  char result; // al

  switch ( a1 )
  {
    case 0:
    case 6:
    case 7:
    case 12:
    case 17:
    case 22:
    case 27:
    case 32:
    case 37:
    case 42:
      result = 1;
      break;
    case 1:
    case 8:
    case 13:
    case 18:
    case 23:
    case 28:
    case 33:
    case 38:
    case 43:
      result = 2;
      break;
    case 2:
    case 9:
    case 14:
    case 19:
    case 24:
    case 29:
    case 34:
    case 39:
    case 44:
      result = 3;
      break;
    case 3:
    case 10:
    case 15:
    case 20:
    case 25:
    case 30:
    case 35:
    case 40:
    case 45:
      result = 4;
      break;
    case 4:
    case 5:
    case 11:
    case 16:
    case 21:
    case 26:
    case 31:
    case 36:
    case 41:
    case 46:
      result = 5;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (65932C30) --------------------------------------------------------
int __stdcall sub_65932C30(int a1)
{
  int result; // eax

  switch ( a1 )
  {
    case 0:
    case 1:
    case 2:
    case 3:
    case 4:
    case 5:
    case 6:
      result = 37;
      break;
    case 7:
    case 8:
    case 9:
    case 10:
    case 11:
    case 27:
    case 28:
    case 29:
    case 30:
    case 31:
      result = 3;
      break;
    case 12:
    case 13:
    case 14:
    case 15:
    case 16:
    case 32:
    case 33:
    case 34:
    case 35:
    case 36:
      result = 4;
      break;
    case 17:
    case 18:
    case 19:
    case 20:
    case 21:
    case 37:
    case 38:
    case 39:
    case 40:
    case 41:
      result = 5;
      break;
    case 22:
    case 23:
    case 24:
    case 25:
    case 26:
    case 42:
    case 43:
    case 44:
    case 45:
    case 46:
      result = 6;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (65932E80) --------------------------------------------------------
int __thiscall sub_65932E80(_DWORD *this, __int16 a2)
{
  int result; // eax

  BYTE1(result) = HIBYTE(a2);
  *(_WORD *)this = a2;
  *(this + 1) = 10;
  *(this + 3) = 300;
  *((_BYTE *)this + 17) = 100;
  LOBYTE(result) = 0;
  *((_BYTE *)this + 2) = 0;
  *((_BYTE *)this + 16) = 0;
  *((_BYTE *)this + 3) = 1;
  *(this + 2) = 1;
  *((_BYTE *)this + 22) = 1;
  *((_WORD *)this + 9) = 100;
  *((_WORD *)this + 10) = 10000;
  *((_WORD *)this + 12) = 0;
  *((_WORD *)this + 14) = 0;
  *((_WORD *)this + 13) = 0;
  *((_WORD *)this + 15) = 0;
  *((_WORD *)this + 16) = 0;
  *((_WORD *)this + 17) = 0;
  *((_WORD *)this + 18) = 0;
  *((_WORD *)this + 19) = 0;
  *((_WORD *)this + 20) = 0;
  *((_WORD *)this + 21) = 0;
  *((float *)this + 13) = 0.0;
  *((_BYTE *)this + 44) = 0;
  *((_BYTE *)this + 56) = 0;
  *((_BYTE *)this + 45) = 0;
  *((_BYTE *)this + 46) = 0;
  *((_BYTE *)this + 47) = 0;
  *((_BYTE *)this + 48) = 0;
  *((_BYTE *)this + 57) = 0;
  *((_BYTE *)this + 58) = 0;
  *((_BYTE *)this + 59) = 0;
  *((_BYTE *)this + 60) = 0;
  *((float *)this + 16) = 0.0;
  *((_BYTE *)this + 68) = 0;
  *((_BYTE *)this + 69) = 0;
  *((_BYTE *)this + 70) = 0;
  *((_BYTE *)this + 71) = 0;
  *((_BYTE *)this + 72) = 0;
  *((float *)this + 19) = 0.0;
  *((_BYTE *)this + 80) = 0;
  *((_BYTE *)this + 81) = 0;
  *((_BYTE *)this + 82) = 0;
  *((_BYTE *)this + 83) = 0;
  *((_BYTE *)this + 84) = 0;
  *((float *)this + 22) = 0.0;
  return result;
}

//----- (65933030) --------------------------------------------------------
char __thiscall ItemTemplate_IsFireableTypeAllowlist(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax
  char v3; // cl
  char v5; // al

  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu )
  {
    v2 = *(this + a2);
    if ( v2 )
    {
      v3 = *(_BYTE *)(v2 + 8);
      if ( v3 == 3 || v3 == 4 )
      {
        v5 = *(_BYTE *)(v2 + 9);
        if ( v5 != 18 && v5 != 22 && v5 != 20 && v5 != 38 )
          return 1;
      }
      else if ( *(_BYTE *)(v2 + 9) == 15 || *(_WORD *)v2 == 993 )
      {
        return 1;
      }
    }
  }
  return 0;
}

//----- (659330C0) --------------------------------------------------------
__int16 __thiscall ItemTemplate_GetAmmoItemId(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax

  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu && (v2 = *(this + a2)) != 0 )
    return *(_WORD *)(v2 + 48);
  else
    return 0;
}

//----- (659330F0) --------------------------------------------------------
int __thiscall ItemTemplate_GetType(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax

  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu && (v2 = *(this + a2)) != 0 )
    return *(unsigned __int8 *)(v2 + 8);
  else
    return 0;
}

//----- (65933120) --------------------------------------------------------
int __thiscall ItemTemplate_GetEquipSlot(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax

  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu && (v2 = *(this + a2)) != 0 )
    return *(unsigned __int8 *)(v2 + 10);
  else
    return 0;
}

//----- (65933150) --------------------------------------------------------
char __thiscall sub_65933150(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax
  int v3; // eax
  char result; // al

  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu && (v2 = *(this + a2)) != 0 )
    v3 = *(unsigned __int8 *)(v2 + 8);
  else
    v3 = 0;
  switch ( v3 )
  {
    case 2:
    case 5:
    case 16:
    case 17:
    case 18:
    case 19:
      result = 1;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (659331C0) --------------------------------------------------------
bool __thiscall sub_659331C0(_DWORD *this, unsigned __int16 a2, char a3)
{
  int v3; // eax
  char v4; // al
  bool result; // al

  result = (unsigned __int16)(a2 - 1) <= 0xBBFu
        && (v3 = *(this + a2)) != 0
        && ((v4 = *(_BYTE *)(v3 + 8), v4 == 13) || v4 == 14)
        && !a3;
  return result;
}

//----- (65933200) --------------------------------------------------------
bool __stdcall sub_65933200(__int16 a1, unsigned __int8 a2, unsigned __int8 a3)
{
  return (a1 != 24 && a1 != 25 && a1 != 31 || a2 > 1u || Item_ValidateSlotForType(13, a3))
      && (a1 != 32 || a2 > 1u || Item_ValidateSlotForType(13, a3));
}

//----- (65933270) --------------------------------------------------------
bool __thiscall sub_65933270(_DWORD *this, unsigned __int16 a2, int a3)
{
  int v3; // eax
  int v4; // eax

  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu && (v3 = *(this + a2)) != 0 )
    v4 = *(unsigned __int8 *)(v3 + 8);
  else
    v4 = 0;
  switch ( v4 )
  {
    case 6:
    case 7:
    case 11:
    case 12:
    case 13:
    case 14:
    case 15:
    case 23:
      return 1;
    default:
      return a2 >= 0x3CDu && (a2 <= 0x3CFu || a2 == 985);
  }
}

//----- (659332F0) --------------------------------------------------------
bool __thiscall ItemTemplate_IsNotFireableTypeAllowlist(_DWORD *this, unsigned __int16 a2)
{
  return ItemTemplate_IsFireableTypeAllowlist(this, a2) == 0;
}

//----- (65933310) --------------------------------------------------------
char __stdcall sub_65933310(unsigned __int16 a1, unsigned __int16 a2, unsigned __int16 a3, unsigned __int8 a4)
{
  int v4; // eax
  unsigned int v5; // eax
  char result; // al

  if ( a4 >= 2u )
    return 0;
  if ( (unsigned __int16)(a1 - 1) > 0xBBFu )
    return 0;
  v4 = g_ItemTemplateById[a1];
  if ( !v4 )
    return 0;
  v5 = *(unsigned __int8 *)(v4 + 8);
  if ( v5 < 0x10 )
    return 0;
  if ( v5 <= 0x12 )
  {
    result = 1;
    if ( a2 > 1u )
      return result;
    return 0;
  }
  if ( v5 != 19 )
    return 0;
  result = 1;
  if ( a3 <= 1u )
    return 0;
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65933490) --------------------------------------------------------
bool __stdcall sub_65933490(unsigned __int16 a1)
{
  int v1; // ecx
  int v2; // eax
  bool result; // al

  result = 1;
  if ( (unsigned __int16)(a1 - 1) > 0xBBFu || (v1 = g_ItemTemplateById[a1]) == 0 || *(_BYTE *)(v1 + 8) != 21 )
  {
    if ( (unsigned __int16)(a1 - 1) > 0xBBFu )
      return 0;
    v2 = g_ItemTemplateById[a1];
    if ( !v2 || *(_BYTE *)(v2 + 8) != 22 )
      return 0;
  }
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65933530) --------------------------------------------------------
unsigned __int16 __thiscall sub_65933530(
        _DWORD *this,
        unsigned __int16 a2,
        unsigned __int8 a3,
        unsigned __int16 a4,
        char a5,
        __int16 a6)
{
  unsigned __int16 result; // ax
  int v7; // eax
  unsigned __int16 v8; // [esp+10h] [ebp+Ch]

  if ( a2 <= 0x101u )
  {
    if ( a2 != 257 )
    {
      switch ( a2 )
      {
        case 0x18u:
        case 0x20u:
          if ( a3 > 1u )
            goto LABEL_10;
          result = 0;
          break;
        case 0x23u:
        case 0xCFu:
          return 0;
        default:
          goto LABEL_10;
      }
      return result;
    }
    return 0;
  }
  if ( a2 > 0x197u )
  {
    if ( (unsigned int)a2 - 2983 <= 1 )
      return 0;
  }
  else if ( a2 == 407 || a2 == 307 || a2 == 357 )
  {
    return 0;
  }
LABEL_10:
  v8 = a4;
  if ( a2 == 24 || a2 == 25 || a2 == 31 )
  {
    if ( (_BYTE)a6 )
      return 0;
    v8 = (int)((double)a4 * 1.600000023841858);
  }
  else
  {
    if ( (unsigned __int16)(a2 - 1) > 0xBBFu )
      return 3 * a4;
    v7 = *(this + a2);
    if ( !v7 )
      return 3 * a4;
    if ( *(_BYTE *)(v7 + 8) == 3 )
    {
      if ( (_BYTE)a6 )
        v8 = (int)((double)a4 * 0.1000000014901161);
      else
        v8 = 5 * a4;
    }
  }
  if ( a5 )
    v8 >>= 1;
  if ( !v8 )
    return 1;
  return v8;
}

//----- (65933880) --------------------------------------------------------
bool __thiscall sub_65933880(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax

  return (unsigned __int16)(a2 - 1) <= 0xBBFu && (v2 = *(this + a2)) != 0 && *(_DWORD *)(v2 + 80) >= 0x3B9AC9FFu;
}

//----- (659338C0) --------------------------------------------------------
char __thiscall sub_659338C0(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax

  if ( (unsigned __int16)(a2 - 1) > 0xBBFu || (v2 = *(this + a2)) == 0 || *(_DWORD *)(v2 + 80) < 0x3B9AC9FFu )
  {
    if ( a2 > 0x3FAu )
    {
      if ( a2 > 0x722u )
      {
        if ( a2 > 0x7B0u )
        {
          switch ( a2 )
          {
            case 0x80Cu:
            case 0x80Du:
            case 0x80Eu:
            case 0x80Fu:
            case 0x810u:
            case 0x870u:
            case 0x871u:
            case 0x872u:
            case 0x873u:
            case 0x874u:
            case 0x875u:
            case 0x876u:
            case 0x877u:
            case 0x878u:
            case 0x879u:
            case 0x87Au:
            case 0x87Bu:
            case 0x87Cu:
              return 1;
            default:
              return 0;
          }
        }
        if ( a2 < 0x7AEu )
        {
          switch ( a2 )
          {
            case 0x726u:
            case 0x727u:
            case 0x728u:
            case 0x7A8u:
            case 0x7A9u:
            case 0x7AAu:
              return 1;
            default:
              return 0;
          }
        }
      }
      else if ( a2 < 0x71Cu )
      {
        switch ( a2 )
        {
          case 0x3FCu:
          case 0x3FDu:
          case 0x3FEu:
          case 0x401u:
          case 0x402u:
          case 0x403u:
          case 0x404u:
          case 0x405u:
          case 0x409u:
          case 0x40Au:
          case 0x40Bu:
          case 0x40Cu:
          case 0x40Du:
          case 0x40Eu:
          case 0x40Fu:
          case 0x422u:
          case 0x424u:
          case 0x425u:
          case 0x426u:
          case 0x427u:
          case 0x428u:
          case 0x429u:
          case 0x42Eu:
          case 0x42Fu:
          case 0x430u:
          case 0x431u:
          case 0x432u:
          case 0x433u:
          case 0x434u:
          case 0x435u:
          case 0x436u:
          case 0x437u:
          case 0x44Au:
          case 0x44Cu:
          case 0x44Du:
          case 0x44Eu:
          case 0x451u:
          case 0x452u:
          case 0x453u:
          case 0x454u:
          case 0x455u:
          case 0x456u:
          case 0x472u:
          case 0x474u:
          case 0x475u:
          case 0x476u:
          case 0x478u:
          case 0x479u:
          case 0x47Au:
          case 0x47Bu:
          case 0x47Cu:
          case 0x47Du:
            return 1;
          default:
            return 0;
        }
      }
    }
    else if ( a2 != 1018 && (a2 < 0xC4u || a2 > 0xC5u) )
    {
      return 0;
    }
  }
  return 1;
}

//----- (65933B90) --------------------------------------------------------
char __thiscall sub_65933B90(_DWORD *this, unsigned __int16 a2, unsigned __int8 a3, char a4, _BYTE *a5)
{
  int v5; // ecx

  if ( (unsigned __int16)(a2 - 1) > 0xBBFu )
    return 0;
  v5 = *(this + a2);
  if ( !v5 )
    return 0;
  if ( (a2 == 24 || a2 == 25 || a2 == 31) && a3 <= 1u )
    return 0;
  if ( a2 == 32 && a3 <= 1u || a4 )
    return 0;
  if ( *(_BYTE *)(v5 + 8) == 3 || *(_BYTE *)(v5 + 8) == 5 )
    return 1;
  if ( *(_BYTE *)(v5 + 8) != 6 )
    return 0;
  if ( a5 )
    *a5 = 1;
  return 1;
}

//----- (65933DC0) --------------------------------------------------------
unsigned __int16 __thiscall sub_65933DC0(
        _DWORD *this,
        unsigned __int16 a2,
        char a3,
        int a4,
        char a5,
        char a6,
        unsigned __int8 a7)
{
  unsigned __int16 v7; // di
  char v8; // cl
  unsigned int v9; // ebx
  int v10; // esi
  char v11; // al
  char v14; // [esp+1Bh] [ebp+Bh]

  v7 = a2;
  if ( a2 >= 0xBC1u || !a2 )
    v7 = 3008;
  v8 = a3;
  v14 = a3;
  if ( a3 == 11 )
  {
    v14 = 13;
    v9 = 0;
  }
  else
  {
    if ( a3 == 12 )
      v14 = 14;
    v9 = 0;
  }
  while ( v9 < 0x9C4 )
  {
    --v7;
    ++v9;
    if ( !v7 )
      v7 = 3008;
    v10 = *(this + v7);
    if ( v10 )
    {
      v11 = *(_BYTE *)(v10 + 8);
      if ( (v11 == v8 || v11 == v14) && (!a6 || *(_BYTE *)(v10 + 10) == a6) && *(_BYTE *)(v10 + a4 + 56) )
      {
        if ( (Item_ValidateSlotForType(43, a7)
           || (unsigned __int16)(v7 - 1) > 0xBBFu
           || *(_DWORD *)(v10 + 80) < 0x3B9AC9FFu)
          && (!a5 || !sub_659338C0(g_ItemTemplateById, v7)) )
        {
          return v7;
        }
        v8 = a3;
      }
    }
  }
  return 0;
}
// 65933E71: conditional instruction was optimized away because esi.4!=0
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65933EC0) --------------------------------------------------------
char __thiscall sub_65933EC0(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax
  int v4; // eax

  if ( (unsigned __int16)(a2 - 1) > 0xBBFu )
    return 1;
  v2 = *(this + a2);
  if ( !v2 )
    return 1;
  if ( *(_BYTE *)(v2 + 8) != 5 )
    return *(_BYTE *)(v2 + 2);
  v4 = sub_65932750(a2);
  return sub_65932BA0(v4);
}

//----- (65933F80) --------------------------------------------------------
char *__cdecl sub_65933F80(char *a1, char *a2, const void *a3)
{
  char *result; // eax
  void *v4; // edi

  for ( result = a1; result != a2; result += 92 )
  {
    v4 = result;
    qmemcpy(v4, a3, 0x5Cu);
  }
  return result;
}

//----- (65934000) --------------------------------------------------------
char *__cdecl sub_65934000(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 92 )
  {
    if ( result )
      qmemcpy(result, v3, 0x5Cu);
    v3 += 92;
  }
  return result;
}

//----- (65934070) --------------------------------------------------------
_DWORD *__cdecl sub_65934070(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; result += 2 )
  {
    *result = *a3;
    result[1] = a3[1];
  }
  return result;
}

//----- (659340F0) --------------------------------------------------------
_DWORD *__cdecl sub_659340F0(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 2 )
  {
    if ( result )
    {
      *result = *v3;
      result[1] = v3[1];
    }
    v3 += 2;
  }
  return result;
}

//----- (65934120) --------------------------------------------------------
bool __thiscall ItemTemplate_IsType3or4(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax
  int v3; // eax
  bool result; // al

  result = 0;
  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu )
  {
    v2 = *(this + a2);
    if ( v2 )
    {
      v3 = *(unsigned __int8 *)(v2 + 8);
      if ( v3 == 3 || v3 == 4 )
        return 1;
    }
  }
  return result;
}

//----- (65934160) --------------------------------------------------------
bool __thiscall sub_65934160(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax

  return (unsigned __int16)(a2 - 1) <= 0xBBFu && (v2 = *(this + a2)) != 0 && *(_BYTE *)(v2 + 8) == 5;
}

//----- (659341A0) --------------------------------------------------------
bool __thiscall sub_659341A0(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax

  return (unsigned __int16)(a2 - 1) <= 0xBBFu && (v2 = *(this + a2)) != 0 && *(_BYTE *)(v2 + 8) == 7;
}

//----- (65934270) --------------------------------------------------------
bool __thiscall sub_65934270(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax
  int v3; // eax
  bool result; // al

  result = 0;
  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu )
  {
    v2 = *(this + a2);
    if ( v2 )
    {
      v3 = *(unsigned __int8 *)(v2 + 8);
      if ( v3 == 11 || v3 == 13 )
        return 1;
    }
  }
  return result;
}

//----- (659342B0) --------------------------------------------------------
bool __thiscall sub_659342B0(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax
  int v3; // eax
  bool result; // al

  result = 0;
  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu )
  {
    v2 = *(this + a2);
    if ( v2 )
    {
      v3 = *(unsigned __int8 *)(v2 + 8);
      if ( v3 == 12 || v3 == 14 )
        return 1;
    }
  }
  return result;
}

//----- (659342F0) --------------------------------------------------------
bool __thiscall sub_659342F0(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax

  return (unsigned __int16)(a2 - 1) <= 0xBBFu && (v2 = *(this + a2)) != 0 && *(_BYTE *)(v2 + 8) == 15;
}

//----- (65934330) --------------------------------------------------------
bool __thiscall sub_65934330(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax
  int v3; // eax
  bool result; // al

  result = 0;
  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu )
  {
    v2 = *(this + a2);
    if ( v2 )
    {
      v3 = *(unsigned __int8 *)(v2 + 8);
      if ( v3 == 6 || v3 == 23 )
        return 1;
    }
  }
  return result;
}

//----- (65934370) --------------------------------------------------------
bool __stdcall sub_65934370(unsigned __int16 a1)
{
  int v1; // eax
  bool result; // al

  result = 0;
  if ( (unsigned __int16)(a1 - 1) <= 0xBBFu )
  {
    v1 = g_ItemTemplateById[a1];
    if ( v1 )
    {
      if ( *(_BYTE *)(v1 + 8) == 6 )
        return 1;
    }
  }
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (659343B0) --------------------------------------------------------
int __thiscall ItemTemplate_GetSubType(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax
  int v4; // eax

  if ( (unsigned __int16)(a2 - 1) > 0xBBFu )
    return 0;
  v2 = *(this + a2);
  if ( !v2 )
    return 0;
  if ( *(_BYTE *)(v2 + 8) != 5 )
    return *(unsigned __int8 *)(v2 + 9);
  v4 = sub_65932750(a2);
  return sub_65932C30(v4);
}

//----- (65934400) --------------------------------------------------------
bool __thiscall ItemTemplate_CanUse(
        _DWORD *this,
        unsigned __int16 a2,
        unsigned __int8 a3,
        unsigned int a4,
        unsigned __int8 a5,
        char a6,
        char a7)
{
  int v8; // eax
  int v9; // esi

  if ( (unsigned __int16)(a2 - 1) > 0xBBFu || a4 >= 2 )
    return 0;
  v8 = ItemTemplateById_Get(this, a2);
  v9 = v8;
  return v8
      && *(_BYTE *)(v8 + a4 + 56)
      && (a6 || !sub_659331C0(this, a2, a7))
      && (Item_ValidateSlotForType(43, a5) || *(_BYTE *)(a3 + v9 + 58) && !sub_65933880(this, a2));
}

//----- (65934490) --------------------------------------------------------
char __thiscall ItemTemplate_IsRangedOrAmmoType(_DWORD *this, unsigned __int16 a2)
{
  int v2; // ecx
  char result; // al

  switch ( a2 )
  {
    case 0x18u:
      return 1;
    case 0x19u:
      return 1;
    case 0x1Fu:
      return 1;
  }
  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu )
  {
    v2 = *(this + a2);
    if ( v2 )
    {
      if ( *(_BYTE *)(v2 + 8) == 4 )
        return 1;
    }
  }
  switch ( a2 )
  {
    case 5u:
    case 7u:
    case 8u:
    case 0xDu:
    case 0xEu:
    case 0x20u:
      return 1;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (65934520) --------------------------------------------------------
bool __thiscall sub_65934520(_DWORD *this, int a2, int a3)
{
  unsigned __int16 v3; // dx
  int v4; // eax

  v3 = *(_WORD *)(a3 + 4);
  return ((unsigned __int16)(v3 - 1) > 0xBBFu || (v4 = *(this + v3)) == 0 || *(_DWORD *)(v4 + 80) < 0x3B9AC9FFu)
      && !*(_BYTE *)(a3 + 13)
      && !*(_BYTE *)(a3 + 44)
      && v3 != 980;
}

//----- (65934580) --------------------------------------------------------
bool __thiscall sub_65934580(_DWORD *this, int a2)
{
  unsigned __int16 v2; // dx
  int v3; // eax
  bool result; // al
  int v5; // eax

  v2 = *(_WORD *)(a2 + 4);
  result = 0;
  if ( ((unsigned __int16)(v2 - 1) > 0xBBFu || (v3 = *(this + v2)) == 0 || *(_DWORD *)(v3 + 80) < 0x3B9AC9FFu)
    && *(_BYTE *)(a2 + 13) < 3u
    && (unsigned __int16)(v2 - 1) <= 0xBBFu )
  {
    v5 = g_ItemTemplateById[v2];
    if ( v5 )
    {
      if ( *(_BYTE *)(v5 + 8) == 3 )
        return 1;
    }
  }
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65934600) --------------------------------------------------------
bool __thiscall sub_65934600(_DWORD *this, unsigned __int16 a2)
{
  int v2; // eax
  int v3; // ecx
  bool result; // al

  result = (unsigned __int16)(a2 - 1) <= 0xBBFu
        && (v2 = *(this + a2)) != 0
        && ((v3 = *(unsigned __int8 *)(v2 + 8), v3 == 3) || v3 == 4)
        && *(_BYTE *)(v2 + 8) != 4
        && !*(_BYTE *)(v2 + 88)
        && a2 != 24
        && a2 != 25
        && a2 != 31
        && a2 != 32;
  return result;
}
// 6593462E: conditional instruction was optimized away because eax.4!=0
// 6593463B: conditional instruction was optimized away because eax.4!=0

//----- (659346B0) --------------------------------------------------------
char *__cdecl sub_659346B0(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax

  v3 = a2;
  result = a3;
  while ( v3 != a1 )
  {
    v3 -= 92;
    result -= 92;
    qmemcpy(result, v3, 0x5Cu);
  }
  return result;
}

//----- (659346E0) --------------------------------------------------------
char *__usercall sub_659346E0@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x5Cu);
      --v4;
      result += 92;
    }
    while ( v4 );
  }
  return result;
}

//----- (65934760) --------------------------------------------------------
_DWORD *__cdecl sub_65934760(int a1, int a2, _DWORD *a3)
{
  int v3; // ecx
  _DWORD *result; // eax
  int v5; // esi

  v3 = a2;
  for ( result = a3; v3 != a1; result[1] = *(_DWORD *)(v3 + 4) )
  {
    v5 = *(_DWORD *)(v3 - 8);
    v3 -= 8;
    result -= 2;
    *result = v5;
  }
  return result;
}

//----- (65934790) --------------------------------------------------------
void __cdecl sub_65934790(_DWORD *a1, int a2, _DWORD *a3)
{
  int i; // ecx

  for ( i = a2; i; a1 += 2 )
  {
    if ( a1 )
    {
      *a1 = *a3;
      a1[1] = a3[1];
    }
    --i;
  }
}

//----- (659347F0) --------------------------------------------------------
bool __stdcall sub_659347F0(unsigned __int16 a1)
{
  int v1; // eax
  int v2; // eax
  int v3; // eax
  bool result; // al

  result = 0;
  if ( (unsigned __int16)(a1 - 1) <= 0xBBFu )
  {
    v1 = g_ItemTemplateById[a1];
    if ( v1 )
    {
      if ( *(_BYTE *)(v1 + 8) == 5 )
      {
        v2 = sub_65932750(a1);
        v3 = sub_65932C30(v2);
      }
      else
      {
        v3 = *(unsigned __int8 *)(v1 + 9);
      }
      if ( v3 == 36 )
        return 1;
    }
  }
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65934840) --------------------------------------------------------
bool __thiscall ItemId_IsUsable(_DWORD *this, unsigned __int16 a2)
{
  int v3; // eax
  unsigned int v4; // eax
  bool result; // al

  result = (unsigned __int16)(a2 - 542) <= 5u
        || sub_659347F0(a2)
        || (unsigned __int16)(a2 - 1) <= 0xBBFu
        && (v3 = *(this + a2)) != 0
        && ((v4 = *(unsigned __int8 *)(v3 + 8), v4 == 1) || v4 > 7 && v4 <= 9)
        || (unsigned int)a2 - 1800 <= 8;
  return result;
}

//----- (65934970) --------------------------------------------------------
char *__stdcall sub_65934970(char *a1, int a2, char *a3)
{
  sub_659346E0(a3, a1, a2, a3);
  return &a1[92 * a2];
}

//----- (659349E0) --------------------------------------------------------
_DWORD *__stdcall sub_659349E0(_DWORD *a1, int a2, _DWORD *a3)
{
  sub_65934790(a1, a2, a3);
  return &a1[2 * a2];
}

//----- (65934A50) --------------------------------------------------------
char *__stdcall sub_65934A50(char *a1, char *a2, char *a3)
{
  return sub_65934000(a1, a2, a3);
}

//----- (65934A80) --------------------------------------------------------
_DWORD *__stdcall sub_65934A80(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return sub_659340F0(a1, a2, a3);
}

//----- (65934AB0) --------------------------------------------------------
int __thiscall sub_65934AB0(char **this, int a2, unsigned int a3, void *a4)
{
  __int64 v5; // rax
  unsigned int v6; // esi
  int v8; // eax
  unsigned int v9; // esi
  char *v10; // eax
  char *v11; // ecx
  char *v12; // eax
  char *v13; // eax
  _BYTE *v14; // eax
  int v15; // edi
  char *v16; // edi
  char *v17; // eax
  char *v19; // [esp-Ch] [ebp-8Ch]
  int v20; // [esp-8h] [ebp-88h]
  char *v21; // [esp-4h] [ebp-84h]
  int v22[4]; // [esp+0h] [ebp-80h] BYREF
  char v23[92]; // [esp+10h] [ebp-70h] BYREF
  char *v24; // [esp+6Ch] [ebp-14h]
  int *v25; // [esp+70h] [ebp-10h]
  int v26; // [esp+7Ch] [ebp-4h]
  char *v27; // [esp+8Ch] [ebp+Ch]

  v25 = v22;
  LODWORD(v5) = *(this + 1);
  if ( (_DWORD)v5 )
  {
    v5 = 2987803337LL * (int)&(*(this + 3))[-v5];
    v6 = (SHIDWORD(v5) >> 6) + (HIDWORD(v5) >> 31);
  }
  else
  {
    v6 = 0;
  }
  if ( a3 )
  {
    v24 = *(this + 2);
    v8 = (v24 - *(this + 1)) / 92;
    if ( 46684427 - v8 < a3 )
      sub_65860070(v22[0], v22[1]);
    if ( v6 >= v8 + a3 )
    {
      qmemcpy(v23, a4, sizeof(v23));
      if ( (int)&v24[-a2] / 92 >= a3 )
      {
        v16 = &v24[-92 * a3];
        v17 = sub_65934A50(v16, v24, v24);
        v21 = v24;
        *(this + 2) = v17;
        sub_659346B0((char *)a2, v16, v21);
        LODWORD(v5) = sub_65933F80((char *)a2, (char *)(a2 + 92 * a3), v23);
      }
      else
      {
        sub_65934A50((char *)a2, v24, (char *)(92 * a3 + a2));
        v20 = a3 - (int)&(*(this + 2))[-a2] / 92;
        v19 = *(this + 2);
        v26 = 2;
        sub_65934970(v19, v20, v23);
        *(this + 2) += 92 * a3;
        LODWORD(v5) = sub_65933F80((char *)a2, &(*(this + 2))[-92 * a3], v23);
      }
    }
    else
    {
      if ( 46684427 - (v6 >> 1) >= v6 )
        v9 = (v6 >> 1) + v6;
      else
        v9 = 0;
      if ( v9 < v8 + a3 )
        v9 = v8 + a3;
      v10 = (char *)sub_65860120(v9);
      v11 = *(this + 1);
      LOBYTE(v24) = 0;
      v27 = v10;
      v26 = 0;
      v12 = sub_65934000(v11, (char *)a2, v10);
      v13 = sub_65934970(v12, a3, (char *)a4);
      sub_65934000((char *)a2, *(this + 2), v13);
      v14 = *(this + 1);
      v15 = (*(this + 2) - v14) / 92 + a3;
      if ( v14 )
        operator delete(v14);
      *(this + 3) = &v27[92 * v9];
      *(this + 2) = &v27[92 * v15];
      *(this + 1) = v27;
      LODWORD(v5) = v27;
    }
  }
  return v5;
}

//----- (65934D20) --------------------------------------------------------
void __thiscall sub_65934D20(int this, char *a2, unsigned int a3, int *a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  char *v7; // edi
  int v8; // eax
  unsigned int v9; // ecx
  char *v10; // edi
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  int v13; // eax
  int v14; // ebx
  int v15; // edx
  void *v16; // edx
  char *v17; // ebx
  _DWORD *v18; // [esp-20h] [ebp-4Ch]
  _DWORD *v19; // [esp-Ch] [ebp-38h]
  int v20; // [esp-8h] [ebp-34h]
  int v21[4]; // [esp+0h] [ebp-2Ch] BYREF
  int v22; // [esp+10h] [ebp-1Ch] BYREF
  void *v23; // [esp+14h] [ebp-18h]
  unsigned int v24; // [esp+18h] [ebp-14h]
  int *v25; // [esp+1Ch] [ebp-10h]
  int v26; // [esp+28h] [ebp-4h]

  v25 = v21;
  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 3;
  else
    v6 = 0;
  if ( a3 )
  {
    v7 = *(char **)(this + 8);
    v8 = (int)&v7[-v5] >> 3;
    if ( 0x1FFFFFFF - v8 < a3 )
      Vector8_ThrowLengthError(v21[0], v21[1]);
    if ( v6 >= v8 + a3 )
    {
      if ( (v7 - a2) >> 3 >= a3 )
      {
        v16 = (void *)a4[1];
        v17 = &v7[-8 * a3];
        v22 = *a4;
        v23 = v16;
        *(_DWORD *)(this + 8) = sub_65934A80(v17, v7, v7);
        sub_65934760((int)a2, (int)v17, v7);
        sub_65934070(a2, &a2[8 * a3], &v22);
      }
      else
      {
        v15 = *a4;
        v23 = (void *)a4[1];
        v22 = v15;
        sub_65934A80(a2, v7, &a2[8 * a3]);
        v20 = a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 3);
        v19 = *(_DWORD **)(this + 8);
        v26 = 2;
        sub_659349E0(v19, v20, &v22);
        *(_DWORD *)(this + 8) += 8 * a3;
        sub_65934070(a2, (_DWORD *)(*(_DWORD *)(this + 8) - 8 * a3), &v22);
      }
    }
    else
    {
      if ( 0x1FFFFFFF - (v6 >> 1) >= v6 )
      {
        v9 = (v6 >> 1) + v6;
        v24 = v9;
      }
      else
      {
        v24 = 0;
        v9 = 0;
      }
      if ( v9 < v8 + a3 )
      {
        v24 = v8 + a3;
        v9 = v8 + a3;
      }
      v10 = (char *)SafeNew8Array_CheckOverflow(v9);
      v18 = *(_DWORD **)(this + 4);
      v23 = v10;
      v26 = 0;
      v11 = sub_659340F0(v18, a2, v10);
      v12 = sub_659349E0(v11, a3, a4);
      sub_659340F0(a2, *(_DWORD **)(this + 8), v12);
      v13 = *(_DWORD *)(this + 4);
      v14 = ((*(_DWORD *)(this + 8) - v13) >> 3) + a3;
      if ( v13 )
        operator delete(*(void **)(this + 4));
      *(_DWORD *)(this + 12) = &v10[8 * v24];
      *(_DWORD *)(this + 8) = &v10[8 * v14];
      *(_DWORD *)(this + 4) = v10;
    }
  }
}

//----- (65934F50) --------------------------------------------------------
_DWORD *__thiscall sub_65934F50(char **this, _DWORD *a2, int a3, void *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = (int)*(this + 1);
  if ( (int)&(*(this + 2))[-v5] / 92 )
    v6 = (a3 - v5) / 92;
  else
    v6 = 0;
  sub_65934AB0(this, a3, 1u, a4);
  *a2 = &(*(this + 1))[92 * v6];
  return a2;
}

//----- (65935010) --------------------------------------------------------
int __thiscall sub_65935010(_DWORD *this, _DWORD *a2, char a3, int a4, char a5)
{
  int v5; // edi
  int v6; // eax
  int v7; // edx
  unsigned int v8; // eax
  char *v9; // ecx
  int result; // eax
  int v12; // [esp+10h] [ebp-4h] BYREF

  v5 = 1;
  v12 = 1;
  do
  {
    v6 = *(this + (unsigned __int16)v5);
    if ( v6 && *(_BYTE *)(v6 + 8) == a3 && (!a5 || *(_BYTE *)(v6 + 10) == a5) && *(_BYTE *)(v6 + a4 + 56) )
    {
      v7 = a2[1];
      if ( v7 )
        v8 = (a2[3] - v7) >> 1;
      else
        v8 = 0;
      v9 = (char *)a2[2];
      if ( (int)&v9[-v7] >> 1 >= v8 )
      {
        WordVector_InsertAt(a2, v9, 1u, (unsigned int)&v12);
      }
      else
      {
        *(_WORD *)v9 = v5;
        a2[2] = v9 + 2;
      }
    }
    ++v5;
    result = 3009;
    v12 = v5;
  }
  while ( (unsigned __int16)v5 < 0xBC1u );
  return result;
}

//----- (65938680) --------------------------------------------------------
char *__thiscall sub_65938680(char **this, char *a2)
{
  int v3; // eax
  unsigned int v4; // esi
  char *v5; // ebx
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 92;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - *(this + 1)) / 92 >= v4 )
    return (char *)sub_65934F50(this, &a2, (int)v5, a2);
  result = sub_659346E0(a2, v5, 1, a2);
  *(this + 2) = v5 + 92;
  return result;
}

//----- (65938710) --------------------------------------------------------
void __thiscall sub_65938710(char **this, int *a2)
{
  int v3; // ecx
  unsigned int v4; // eax
  char *v5; // edi

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] >> 3;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] >> 3 >= v4 )
  {
    sub_65934D20((int)this, v5, 1u, a2);
  }
  else
  {
    sub_65934790(v5, 1, a2);
    *(this + 2) = v5 + 8;
  }
}

//----- (65938820) --------------------------------------------------------
__int16 __thiscall sub_65938820(int *this, int a2)
{
  int v2; // edi
  int *v3; // esi
  int v4; // ebx
  int v5; // eax
  char v6; // cl
  _DWORD *v7; // esi
  int v8; // eax
  int v9; // edi
  int *v11; // [esp+10h] [ebp-1Ch] BYREF
  void *v12; // [esp+14h] [ebp-18h]
  int v13; // [esp+18h] [ebp-14h]
  int v14; // [esp+1Ch] [ebp-10h]
  int v15; // [esp+28h] [ebp-4h]

  v12 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v2 = 610;
  v3 = this + 610;
  v4 = 2399;
  do
  {
    v5 = *v3;
    if ( *v3 )
    {
      v6 = *(_BYTE *)(v5 + 8);
      if ( v6 == 11 || v6 == 13 )
      {
        if ( *(_BYTE *)(v5 + a2 + 56) )
          IntVector_PushN(&v11, v2, 1);
      }
    }
    ++v2;
    ++v3;
    --v4;
  }
  while ( v4 );
  v7 = v12;
  v8 = (v13 - (int)v12) >> 2;
  if ( v8 )
    v9 = v7[RandInRange_Int(0, v8 - 1)];
  else
    LOWORD(v9) = 0;
  if ( v7 )
    operator delete(v7);
  return v9;
}

//----- (659388F0) --------------------------------------------------------
__int16 __thiscall sub_659388F0(int *this, int a2)
{
  int v2; // edi
  int *v3; // esi
  int v4; // ebx
  int v5; // eax
  char v6; // cl
  _DWORD *v7; // esi
  int v8; // eax
  int v9; // edi
  int *v11; // [esp+10h] [ebp-1Ch] BYREF
  void *v12; // [esp+14h] [ebp-18h]
  int v13; // [esp+18h] [ebp-14h]
  int v14; // [esp+1Ch] [ebp-10h]
  int v15; // [esp+28h] [ebp-4h]

  v12 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v2 = 700;
  v3 = this + 700;
  v4 = 2309;
  do
  {
    v5 = *v3;
    if ( *v3 )
    {
      v6 = *(_BYTE *)(v5 + 8);
      if ( v6 == 12 || v6 == 14 )
      {
        if ( *(_BYTE *)(v5 + a2 + 56) )
          IntVector_PushN(&v11, v2, 1);
      }
    }
    ++v2;
    ++v3;
    --v4;
  }
  while ( v4 );
  v7 = v12;
  v8 = (v13 - (int)v12) >> 2;
  if ( v8 )
    v9 = v7[RandInRange_Int(0, v8 - 1)];
  else
    LOWORD(v9) = 0;
  if ( v7 )
    operator delete(v7);
  return v9;
}

//----- (659389C0) --------------------------------------------------------
__int16 __thiscall sub_659389C0(int *this, int a2)
{
  int v2; // edi
  int *v3; // esi
  int v4; // ebx
  int v5; // eax
  _DWORD *v6; // esi
  int v7; // eax
  int v8; // edi
  int *v10; // [esp+10h] [ebp-1Ch] BYREF
  void *v11; // [esp+14h] [ebp-18h]
  int v12; // [esp+18h] [ebp-14h]
  int v13; // [esp+1Ch] [ebp-10h]
  int v14; // [esp+28h] [ebp-4h]

  v11 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v2 = 500;
  v3 = this + 500;
  v4 = 2509;
  do
  {
    v5 = *v3;
    if ( *v3 && *(_BYTE *)(v5 + 8) == 15 && *(_BYTE *)(v5 + a2 + 56) )
      IntVector_PushN(&v10, v2, 1);
    ++v2;
    ++v3;
    --v4;
  }
  while ( v4 );
  v6 = v11;
  v7 = (v12 - (int)v11) >> 2;
  if ( v7 )
    v8 = v6[RandInRange_Int(0, v7 - 1)];
  else
    LOWORD(v8) = 0;
  if ( v6 )
    operator delete(v6);
  return v8;
}

//----- (65938FC0) --------------------------------------------------------
char __thiscall sub_65938FC0(_DWORD *this, unsigned __int16 a2, char **a3)
{
  int v4; // edi
  int v6; // eax
  char v7; // al
  int v8; // ecx
  char v9; // bl
  __int16 v10; // ax
  int v11; // eax
  __int16 v12; // ax
  int v13; // [esp+Ch] [ebp-5Ch] BYREF
  int v14; // [esp+10h] [ebp-58h]
  int v15; // [esp+14h] [ebp-54h]
  int v16; // [esp+18h] [ebp-50h]
  char v17; // [esp+1Ch] [ebp-4Ch]
  char v18; // [esp+22h] [ebp-46h]
  __int16 v19; // [esp+24h] [ebp-44h]
  __int16 v20; // [esp+26h] [ebp-42h]
  char v21; // [esp+38h] [ebp-30h]
  char v22; // [esp+39h] [ebp-2Fh]
  char v23; // [esp+3Ah] [ebp-2Eh]
  char v24; // [esp+3Bh] [ebp-2Dh]
  float v25; // [esp+40h] [ebp-28h]
  char v26; // [esp+44h] [ebp-24h]
  char v27; // [esp+45h] [ebp-23h]
  char v28; // [esp+46h] [ebp-22h]
  char v29; // [esp+47h] [ebp-21h]
  float v30; // [esp+4Ch] [ebp-1Ch]
  char v31; // [esp+73h] [ebp+Bh]

  v4 = sub_65932750(a2);
  if ( v4 >= 47 )
    return 0;
  sub_65932E80(&v13, a2);
  if ( (unsigned __int16)(a2 - 1) <= 0xBBFu && (v6 = *(this + a2)) != 0 )
    v7 = *(_BYTE *)(v6 + 10);
  else
    v7 = 0;
  v8 = 5;
  if ( v7 == 10 || v7 == 11 )
    v8 = 10;
  v9 = 0;
  v31 = 1;
  switch ( v4 )
  {
    case 0:
      v16 = 60;
      v19 = 1212;
      v18 = 1;
      v31 = 0;
      v14 = 500 / v8;
      v15 = 500 / v8;
      goto LABEL_40;
    case 1:
      v16 = 120;
      v14 = 700 / v8;
      v15 = 500 / v8;
      v10 = 1206;
      goto LABEL_13;
    case 2:
      v16 = 180;
      v18 = 1;
      v31 = 0;
      v14 = 1000 / v8;
      v19 = 1236;
      v15 = 1100 / v8;
      v11 = 20;
      goto LABEL_41;
    case 3:
      v16 = 240;
      v14 = 1400 / v8;
      v15 = 1100 / v8;
      v10 = 1210;
LABEL_13:
      v19 = v10;
      v11 = 10;
      v18 = 1;
      v31 = 0;
      goto LABEL_41;
    case 4:
    case 5:
      v16 = 300;
      v18 = 0;
      v31 = 0;
      v14 = 2400 / v8;
      v19 = 1211;
      v15 = 1400 / v8;
      v11 = 20;
      goto LABEL_41;
    case 6:
      v16 = 60;
      v31 = 0;
      v14 = 500 / v8;
      v15 = 500 / v8;
      v12 = 1212;
      goto LABEL_38;
    case 7:
    case 17:
      v16 = 60;
      v19 = 1212;
      v18 = 1;
      v14 = 400 / v8;
      v15 = 400 / v8;
      v11 = 10;
      goto LABEL_41;
    case 8:
    case 18:
      v16 = 120;
      v18 = 1;
      v14 = 550 / v8;
      v15 = 450 / v8;
      v19 = 1206;
      v11 = 10;
      goto LABEL_41;
    case 9:
    case 19:
      v16 = 180;
      v18 = 1;
      v14 = 700 / v8;
      v19 = 1236;
      v15 = 600 / v8;
      v11 = 20;
      goto LABEL_41;
    case 10:
    case 20:
      v16 = 240;
      v18 = 1;
      v14 = 900 / v8;
      v15 = 1300 / v8;
      v19 = 1210;
      v11 = 10;
      goto LABEL_41;
    case 11:
    case 21:
      v16 = 300;
      v19 = 1211;
      v18 = 1;
      v14 = 1100 / v8;
      v15 = 1100 / v8;
      v11 = 20;
      goto LABEL_41;
    case 12:
    case 22:
      v16 = 60;
      v18 = 1;
      v14 = 600 / v8;
      v15 = 800 / v8;
      v19 = 1212;
      v11 = 20;
      goto LABEL_41;
    case 13:
    case 23:
      v16 = 120;
      v18 = 1;
      v14 = 800 / v8;
      v19 = 1206;
      v15 = 1000 / v8;
      v11 = 20;
      goto LABEL_41;
    case 14:
    case 24:
      v16 = 180;
      v18 = 1;
      v14 = 1200 / v8;
      v15 = 1000 / v8;
      v12 = 1236;
      goto LABEL_39;
    case 15:
    case 25:
      v16 = 240;
      v18 = 1;
      v14 = 1700 / v8;
      v19 = 1210;
      v15 = 1500 / v8;
      v11 = 20;
      goto LABEL_41;
    case 16:
    case 26:
      v16 = 300;
      v18 = 1;
      v14 = 2300 / v8;
      v15 = 1400 / v8;
      v12 = 1211;
      goto LABEL_39;
    case 27:
    case 37:
      v16 = 60;
      v19 = 1212;
      v18 = 0;
      v14 = 400 / v8;
      v15 = 400 / v8;
      v11 = 10;
      goto LABEL_41;
    case 28:
    case 38:
      v16 = 120;
      v18 = 0;
      v14 = 550 / v8;
      v15 = 450 / v8;
      v19 = 1206;
      v11 = 10;
      goto LABEL_41;
    case 29:
    case 39:
      v16 = 180;
      v18 = 0;
      v14 = 700 / v8;
      v19 = 1236;
      v15 = 600 / v8;
      v11 = 20;
      goto LABEL_41;
    case 30:
    case 40:
      v16 = 240;
      v18 = 0;
      v14 = 900 / v8;
      v15 = 1300 / v8;
      v19 = 1210;
      v11 = 10;
      goto LABEL_41;
    case 31:
    case 41:
      v16 = 300;
      v19 = 1211;
      v18 = 0;
      v14 = 1100 / v8;
      v15 = 1100 / v8;
      v11 = 20;
      goto LABEL_41;
    case 32:
    case 42:
      v16 = 60;
      v18 = 0;
      v14 = 600 / v8;
      v15 = 800 / v8;
      v19 = 1212;
      v11 = 20;
      goto LABEL_41;
    case 33:
    case 43:
      v16 = 120;
      v18 = 0;
      v14 = 800 / v8;
      v19 = 1206;
      v15 = 1000 / v8;
      v11 = 20;
      goto LABEL_41;
    case 34:
    case 44:
      v16 = 180;
      v14 = 1200 / v8;
      v15 = 1000 / v8;
      v12 = 1236;
      goto LABEL_38;
    case 35:
    case 45:
      v16 = 240;
      v18 = 0;
      v14 = 1700 / v8;
      v19 = 1210;
      v15 = 1500 / v8;
      v11 = 20;
      goto LABEL_41;
    case 36:
    case 46:
      v16 = 300;
      v14 = 2300 / v8;
      v15 = 1400 / v8;
      v12 = 1211;
LABEL_38:
      v18 = 0;
LABEL_39:
      v19 = v12;
LABEL_40:
      v11 = 30;
LABEL_41:
      v9 = 1;
      v20 = v11 / v8;
      break;
    default:
      break;
  }
  sub_65938680(a3, (char *)&v13);
  v25 = 0.1;
  v14 *= 2;
  v15 *= 2;
  v16 *= 2;
  v21 = 3;
  v22 = 5;
  v23 = 6;
  v24 = 6;
  if ( v31 )
  {
    v30 = 0.1;
    v26 = 4;
    v27 = 7;
    v28 = 8;
    v29 = 6;
    v17 = 1;
    sub_65938680(a3, (char *)&v13);
  }
  return v9;
}

//----- (65939640) --------------------------------------------------------
char *__thiscall sub_65939640(char **this, char a2, int a3)
{
  char *v4; // ebx
  _BYTE *v5; // edi
  unsigned int v6; // ecx
  unsigned int v7; // eax
  _BYTE *v8; // ebx
  unsigned int v9; // eax
  int v11[2]; // [esp+Ch] [ebp-8h] BYREF

  v4 = *(this + 2);
  v5 = *(this + 1);
  v6 = (v4 - v5) >> 3;
  v7 = 0;
  if ( v6 )
  {
    v8 = v5;
    while ( *v8 != a2 )
    {
      ++v7;
      v8 += 8;
      if ( v7 >= (*(this + 2) - v5) >> 3 )
      {
        v4 = *(this + 2);
        goto LABEL_6;
      }
    }
    *(_DWORD *)&v5[8 * v7 + 4] += a3;
    return &(*(this + 1))[8 * v7];
  }
  else
  {
LABEL_6:
    LOBYTE(v11[0]) = a2;
    v11[1] = a3;
    if ( v5 )
      v9 = (*(this + 3) - v5) >> 3;
    else
      v9 = 0;
    if ( v6 >= v9 )
    {
      sub_65934D20((int)this, v4, 1u, v11);
    }
    else
    {
      sub_65934790(v4, 1, v11);
      *(this + 2) = v4 + 8;
    }
    return &(*(this + 1))[8 * ((*(this + 2) - *(this + 1)) >> 3) - 8];
  }
}

//----- (65939710) --------------------------------------------------------
char __stdcall Item_AddArmorBaseStats(unsigned __int16 a1, char **a2)
{
  unsigned __int16 v2; // dx
  int v3; // ecx
  int v4; // edi
  char result; // al
  int v6; // eax
  char v7; // al
  int v8; // esi
  int v9; // esi
  int v10; // esi
  int v11; // esi
  int v12; // esi
  int v13; // esi
  int v14; // esi
  char **v15; // ebx
  int v16; // edi

  v4 = sub_65932750(a1);
  if ( v4 >= 47 )
    return 0;
  if ( (unsigned __int16)(v2 - 1) <= 0xBBFu && (v6 = *(_DWORD *)(v3 + 4 * v2)) != 0 )
    v7 = *(_BYTE *)(v6 + 10);
  else
    v7 = 0;
  v8 = 5;
  if ( v7 == 10 || v7 == 11 )
    v8 = 10;
  switch ( v4 )
  {
    case 0:
      sub_65939640(a2, 11, -100 / v8);
      sub_65939640(a2, 39, 10000 / v8);
      v9 = 340 / v8;
      sub_65939640(a2, 18, v9);
      sub_65939640(a2, 19, v9);
      sub_65939640(a2, 20, v9);
      sub_65939640(a2, 21, v9);
      return 1;
    case 1:
      sub_65939640(a2, 11, -100 / v8);
      sub_65939640(a2, 39, 10000 / v8);
      v10 = 350 / v8;
      sub_65939640(a2, 18, v10);
      sub_65939640(a2, 19, v10);
      sub_65939640(a2, 20, v10);
      sub_65939640(a2, 21, v10);
      return 1;
    case 2:
      sub_65939640(a2, 11, -100 / v8);
      sub_65939640(a2, 39, 10000 / v8);
      v11 = 360 / v8;
      sub_65939640(a2, 18, v11);
      sub_65939640(a2, 19, v11);
      sub_65939640(a2, 20, v11);
      sub_65939640(a2, 21, v11);
      return 1;
    case 3:
      sub_65939640(a2, 11, -100 / v8);
      sub_65939640(a2, 39, 10000 / v8);
      v12 = 370 / v8;
      sub_65939640(a2, 18, v12);
      sub_65939640(a2, 19, v12);
      sub_65939640(a2, 20, v12);
      sub_65939640(a2, 21, v12);
      return 1;
    case 4:
    case 5:
      sub_65939640(a2, 11, -100 / v8);
      sub_65939640(a2, 39, 10000 / v8);
      v13 = 380 / v8;
      sub_65939640(a2, 18, v13);
      sub_65939640(a2, 19, v13);
      sub_65939640(a2, 20, v13);
      sub_65939640(a2, 21, v13);
      return 1;
    case 6:
      sub_65939640(a2, 11, -100 / v8);
      sub_65939640(a2, 39, 12500 / v8);
      v14 = 220 / v8;
      sub_65939640(a2, 18, v14);
      sub_65939640(a2, 19, v14);
      sub_65939640(a2, 20, v14);
      sub_65939640(a2, 21, v14);
      return 1;
    case 7:
    case 17:
    case 27:
    case 37:
      v15 = a2;
      sub_65939640(a2, 11, -50 / v8);
      sub_65939640(a2, 39, 7500 / v8);
      if ( v4 == 17 || v4 == 37 )
      {
        sub_65939640(a2, 18, 190 / v8);
        v16 = 255 / v8;
        sub_65939640(a2, 19, 255 / v8);
      }
      else
      {
        v16 = 255 / v8;
        sub_65939640(a2, 18, 255 / v8);
        sub_65939640(a2, 19, 190 / v8);
      }
      goto LABEL_57;
    case 8:
    case 18:
    case 28:
    case 38:
      v15 = a2;
      sub_65939640(a2, 11, -50 / v8);
      sub_65939640(a2, 39, 7500 / v8);
      if ( v4 == 17 || v4 == 37 )
      {
        sub_65939640(a2, 18, 200 / v8);
        v16 = 275 / v8;
        sub_65939640(a2, 19, 275 / v8);
      }
      else
      {
        v16 = 275 / v8;
        sub_65939640(a2, 18, 275 / v8);
        sub_65939640(a2, 19, 200 / v8);
      }
      goto LABEL_57;
    case 9:
    case 19:
    case 29:
    case 39:
      v15 = a2;
      sub_65939640(a2, 11, -50 / v8);
      sub_65939640(a2, 39, 7500 / v8);
      if ( v4 == 19 || v4 == 39 )
      {
        sub_65939640(a2, 18, 210 / v8);
        v16 = 295 / v8;
        sub_65939640(a2, 19, 295 / v8);
      }
      else
      {
        v16 = 295 / v8;
        sub_65939640(a2, 18, 295 / v8);
        sub_65939640(a2, 19, 210 / v8);
      }
      goto LABEL_57;
    case 10:
    case 20:
    case 30:
    case 40:
      v15 = a2;
      sub_65939640(a2, 11, -50 / v8);
      sub_65939640(a2, 39, 7500 / v8);
      if ( v4 == 20 || v4 == 40 )
      {
        sub_65939640(a2, 18, 220 / v8);
        v16 = 325 / v8;
        sub_65939640(a2, 19, 325 / v8);
      }
      else
      {
        v16 = 325 / v8;
        sub_65939640(a2, 18, 325 / v8);
        sub_65939640(a2, 19, 220 / v8);
      }
      goto LABEL_57;
    case 11:
    case 21:
    case 31:
    case 41:
      v15 = a2;
      sub_65939640(a2, 11, -50 / v8);
      sub_65939640(a2, 39, 7500 / v8);
      if ( v4 == 21 || v4 == 41 )
      {
        sub_65939640(a2, 18, 230 / v8);
        v16 = 345 / v8;
        sub_65939640(a2, 19, 345 / v8);
      }
      else
      {
        v16 = 345 / v8;
        sub_65939640(a2, 18, 345 / v8);
        sub_65939640(a2, 19, 230 / v8);
      }
      goto LABEL_57;
    case 12:
    case 22:
    case 32:
    case 42:
      v15 = a2;
      sub_65939640(a2, 11, -150 / v8);
      sub_65939640(a2, 39, 14000 / v8);
      if ( v4 == 22 || v4 == 42 )
      {
        sub_65939640(a2, 18, 375 / v8);
        v16 = 420 / v8;
        sub_65939640(a2, 19, 420 / v8);
      }
      else
      {
        v16 = 420 / v8;
        sub_65939640(a2, 18, 420 / v8);
        sub_65939640(a2, 19, 375 / v8);
      }
      goto LABEL_57;
    case 13:
    case 23:
    case 33:
    case 43:
      v15 = a2;
      sub_65939640(a2, 11, -150 / v8);
      sub_65939640(a2, 39, 14000 / v8);
      if ( v4 == 23 || v4 == 43 )
      {
        sub_65939640(a2, 18, 385 / v8);
        v16 = 440 / v8;
        sub_65939640(a2, 19, 440 / v8);
      }
      else
      {
        v16 = 440 / v8;
        sub_65939640(a2, 18, 440 / v8);
        sub_65939640(a2, 19, 385 / v8);
      }
      goto LABEL_57;
    case 14:
    case 24:
    case 34:
    case 44:
      v15 = a2;
      sub_65939640(a2, 11, -150 / v8);
      sub_65939640(a2, 39, 14000 / v8);
      if ( v4 == 24 || v4 == 44 )
      {
        sub_65939640(a2, 18, 395 / v8);
        v16 = 460 / v8;
        sub_65939640(a2, 19, 460 / v8);
      }
      else
      {
        v16 = 460 / v8;
        sub_65939640(a2, 18, 460 / v8);
        sub_65939640(a2, 19, 395 / v8);
      }
      goto LABEL_57;
    case 15:
    case 25:
    case 35:
    case 45:
      v15 = a2;
      sub_65939640(a2, 11, -150 / v8);
      sub_65939640(a2, 39, 14000 / v8);
      if ( v4 == 25 || v4 == 45 )
      {
        sub_65939640(a2, 18, 405 / v8);
        v16 = 480 / v8;
        sub_65939640(a2, 19, 480 / v8);
      }
      else
      {
        v16 = 480 / v8;
        sub_65939640(a2, 18, 480 / v8);
        sub_65939640(a2, 19, 405 / v8);
      }
      goto LABEL_57;
    case 16:
    case 26:
    case 36:
    case 46:
      v15 = a2;
      sub_65939640(a2, 11, -150 / v8);
      sub_65939640(a2, 39, 14000 / v8);
      if ( v4 == 26 || v4 == 46 )
      {
        sub_65939640(a2, 18, 415 / v8);
        v16 = 500 / v8;
        sub_65939640(a2, 19, 500 / v8);
      }
      else
      {
        v16 = 500 / v8;
        sub_65939640(a2, 18, 500 / v8);
        sub_65939640(a2, 19, 415 / v8);
      }
LABEL_57:
      sub_65939640(v15, 20, v16);
      sub_65939640(v15, 21, v16);
      result = 1;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}
// 6593972C: variable 'v2' is possibly undefined
// 6593973C: variable 'v3' is possibly undefined

//----- (6593A000) --------------------------------------------------------
const char *__cdecl sub_6593A000(char a1)
{
  const char *result; // eax

  result = "Models/Characters/f_Average.ltb";
  if ( !a1 )
    return "Models/Characters/m_Average.ltb";
  return result;
}

//----- (6593A2D0) --------------------------------------------------------
int __thiscall sub_6593A2D0(_DWORD *this, char *a2, unsigned int a3, unsigned int *a4)
{
  int v5; // eax
  unsigned int v6; // ecx
  char *v7; // esi
  char v8; // bl
  int v9; // edx
  unsigned __int64 v10; // kr00_8
  int v11; // [esp+0h] [ebp-38h] BYREF
  __int64 v12; // [esp+10h] [ebp-28h]
  _DWORD *v13; // [esp+18h] [ebp-20h]
  int pExceptionObject; // [esp+1Ch] [ebp-1Ch] BYREF
  int v15; // [esp+20h] [ebp-18h]
  char *v16; // [esp+24h] [ebp-14h]
  int *v17; // [esp+28h] [ebp-10h]
  int v18; // [esp+34h] [ebp-4h]

  v17 = &v11;
  v13 = this;
  *a4 = -1;
  v12 = 0;
  v15 = 0;
  v18 = 0;
  if ( !*this )
  {
    pExceptionObject = 0;
    CxxThrowException(&pExceptionObject, (_ThrowInfo *)&_TI1H);
  }
  v5 = a3;
  v16 = a2;
  if ( a3 >= 0x1000 )
LABEL_5:
    v5 = 4096;
  while ( v5 )
  {
    v6 = *a4;
    v7 = v16;
    do
    {
      v8 = *v7++;
      v6 = *(_DWORD *)(*v13 + 4 * (unsigned __int8)(v8 ^ v6)) ^ (v6 >> 8);
    }
    while ( &v16[v5] != v7 );
    *a4 = v6;
    v9 = v5 + v12;
    v16 += v5;
    v10 = (unsigned int)v5 + v12 + 4096;
    v12 += (unsigned int)v5;
    if ( a3 >= v10 )
      goto LABEL_5;
    v5 = a3 - v9;
  }
  *a4 = ~*a4;
  return v15;
}

//----- (6593A400) --------------------------------------------------------
unsigned int __thiscall sub_6593A400(void **this)
{
  int i; // ecx
  unsigned int v3; // eax
  unsigned int v4; // eax
  unsigned int v5; // eax
  unsigned int v6; // eax
  unsigned int v7; // eax
  unsigned int v8; // eax
  unsigned int v9; // eax
  unsigned int result; // eax

  if ( *this )
  {
    operator delete(*this);
    *this = 0;
  }
  *this = operator new[](0x400u);
  for ( i = 0; i < 256; ++i )
  {
    v3 = (unsigned int)i >> 1;
    if ( (i & 1) != 0 )
      v3 ^= 0xEDB88320;
    if ( (v3 & 1) != 0 )
      v4 = (v3 >> 1) ^ 0xEDB88320;
    else
      v4 = v3 >> 1;
    if ( (v4 & 1) != 0 )
      v5 = (v4 >> 1) ^ 0xEDB88320;
    else
      v5 = v4 >> 1;
    if ( (v5 & 1) != 0 )
      v6 = (v5 >> 1) ^ 0xEDB88320;
    else
      v6 = v5 >> 1;
    if ( (v6 & 1) != 0 )
      v7 = (v6 >> 1) ^ 0xEDB88320;
    else
      v7 = v6 >> 1;
    if ( (v7 & 1) != 0 )
      v8 = (v7 >> 1) ^ 0xEDB88320;
    else
      v8 = v7 >> 1;
    if ( (v8 & 1) != 0 )
      v9 = (v8 >> 1) ^ 0xEDB88320;
    else
      v9 = v8 >> 1;
    if ( (v9 & 1) != 0 )
      result = (v9 >> 1) ^ 0xEDB88320;
    else
      result = v9 >> 1;
    *((_DWORD *)*this + i) = result;
  }
  return result;
}

//----- (6593A4C0) --------------------------------------------------------
int __thiscall sub_6593A4C0(int this)
{
  std::string::string((void *)this);
  *(_BYTE *)(this + 28) = 0;
  *(_BYTE *)(this + 29) = 0;
  *(_DWORD *)(this + 32) = 0;
  return this;
}

//----- (6593A4E0) --------------------------------------------------------
int __thiscall sub_6593A4E0(int this, int a2, char a3, char a4, int a5)
{
  std::string::string((void *)this);
  *(_BYTE *)(this + 28) = a3;
  *(_BYTE *)(this + 29) = a4;
  *(_DWORD *)(this + 32) = a5;
  std::string::operator=(this, a2);
  return this;
}
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (6593A550) --------------------------------------------------------
int __thiscall sub_6593A550(_BYTE *this, int a2)
{
  int result; // eax
  ItemsAddedEntry Buffer; // [esp+8h] [ebp-108h] BYREF

  result = std::string::empty();
  if ( !(_BYTE)result )
    return std::string::operator=(a2, this);
  if ( *(this + 28) )
  {
    GetSystemDirectoryA((LPSTR)&Buffer, 0x104u);
    return std::string::operator=(a2, &Buffer);
  }
  else if ( *(this + 29) )
  {
    GetWindowsDirectoryA((LPSTR)&Buffer, 0x104u);
    return std::string::operator=(a2, &Buffer);
  }
  return result;
}
// 659A8234: using guessed type int std::string::empty(void);
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (6593A7A0) --------------------------------------------------------
int __thiscall sub_6593A7A0(_DWORD *this, int a2)
{
  void *v2; // eax
  _DWORD *v3; // esi
  int v5; // [esp+4h] [ebp-4h] BYREF

  v2 = (void *)*(this + 1);
  v3 = this + 1;
  v5 = 0;
  if ( v2 )
  {
    operator delete[](v2);
    *v3 = 0;
  }
  return (sub_65972850(v3, &v5, a2) != -1) - 1;
}
// 65972850: using guessed type int __cdecl sub_65972850(_DWORD, _DWORD, _DWORD);

//----- (6593A7F0) --------------------------------------------------------
int __thiscall sub_6593A7F0(HMODULE *this)
{
  HMODULE ModuleHandleA; // eax
  _DWORD *v3; // ecx
  int v5; // ecx

  ModuleHandleA = GetModuleHandleA(0);
  *this = ModuleHandleA;
  if ( *(_WORD *)ModuleHandleA != 23117
    || (v3 = (_DWORD *)((char *)ModuleHandleA + *((_DWORD *)ModuleHandleA + 15)), *v3 != 17744) )
  {
    v3 = 0;
  }
  *(this + 2) = (HMODULE)v3;
  if ( !v3 )
    return -1;
  if ( v3[29] < 2u )
    return -1;
  v5 = v3[32];
  if ( !v5 )
    return -1;
  *(this + 3) = (HMODULE)((char *)ModuleHandleA + v5);
  return 0;
}

//----- (6593A9E0) --------------------------------------------------------
int __thiscall sub_6593A9E0(_DWORD *this, _DWORD *a2, _DWORD *a3, int a4)
{
  int v5; // eax
  int v7; // ecx
  int v8; // eax
  int v9; // [esp+4h] [ebp-4h] BYREF

  v9 = 0;
  if ( a4 )
  {
    if ( a4 == 1 && sub_6593A620(this, &v9, *this, *(this + 2)) != -1 )
    {
      v5 = v9;
      *a2 = *this + *(_DWORD *)(v9 + 12);
      *a3 = *(_DWORD *)(v5 + 8);
      return 0;
    }
    return -1;
  }
  v7 = *(this + 1);
  if ( *(_WORD *)v7 != 23117
    || *(_DWORD *)(v7 + *(_DWORD *)(v7 + 60)) != 17744
    || sub_6593A620(this, &v9, v7, v7 + *(_DWORD *)(v7 + 60)) == -1 )
  {
    return -1;
  }
  v8 = v9;
  *a2 = *(this + 1) + *(_DWORD *)(v9 + 20);
  *a3 = *(_DWORD *)(v8 + 8);
  return 0;
}
// 6593A620: using guessed type int __thiscall sub_6593A620(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6593AA90) --------------------------------------------------------
int __thiscall sub_6593AA90(_DWORD *this, _DWORD *a2, int a3)
{
  _DWORD *v3; // eax
  int v5; // ecx

  if ( a3 )
  {
    if ( a3 == 1 )
    {
      v3 = (_DWORD *)*(this + 2);
LABEL_4:
      *a2 = v3[13];
      return 0;
    }
  }
  else
  {
    v5 = *(this + 1);
    if ( *(_WORD *)v5 == 23117 )
    {
      v3 = (_DWORD *)(v5 + *(_DWORD *)(v5 + 60));
      if ( *v3 == 17744 )
        goto LABEL_4;
    }
  }
  return -1;
}

//----- (6593BE20) --------------------------------------------------------
_DWORD *__thiscall sub_6593BE20(_DWORD *this, int a2, int a3)
{
  _DWORD *result; // eax
  int *v4; // eax
  int v5; // esi
  _BYTE *v6; // edi
  int *v7; // eax
  char *v8; // edx
  int v9; // eax
  int v10; // edi
  int *v11; // esi
  _WORD *v12; // eax
  int v13; // esi
  int *v14; // eax
  char *v15; // esi
  char *v16; // edi
  int v17; // esi
  int v18; // edi
  int *v19; // esi
  _DWORD *v20; // edi
  bool v21; // zf
  int v22; // [esp+10h] [ebp-F8h] BYREF
  char v23[8]; // [esp+18h] [ebp-F0h] BYREF
  char v24[8]; // [esp+20h] [ebp-E8h] BYREF
  char v25[8]; // [esp+28h] [ebp-E0h] BYREF
  _BYTE v26[28]; // [esp+30h] [ebp-D8h] BYREF
  __int16 v27; // [esp+4Ch] [ebp-BCh]
  int v28; // [esp+50h] [ebp-B8h]
  _BYTE v29[28]; // [esp+54h] [ebp-B4h] BYREF
  char v30[4]; // [esp+70h] [ebp-98h] BYREF
  void *v31; // [esp+74h] [ebp-94h]
  char *v32; // [esp+78h] [ebp-90h]
  int v33; // [esp+7Ch] [ebp-8Ch]
  char v34[4]; // [esp+80h] [ebp-88h] BYREF
  int v35; // [esp+84h] [ebp-84h]
  int v36; // [esp+88h] [ebp-80h]
  int v37; // [esp+8Ch] [ebp-7Ch]
  int v38; // [esp+90h] [ebp-78h]
  int v39; // [esp+94h] [ebp-74h] BYREF
  int v40; // [esp+98h] [ebp-70h]
  char *v41; // [esp+9Ch] [ebp-6Ch]
  int v42; // [esp+A0h] [ebp-68h]
  int v43; // [esp+A4h] [ebp-64h]
  int v44; // [esp+A8h] [ebp-60h]
  _DWORD *v45; // [esp+ACh] [ebp-5Ch]
  _DWORD *v46; // [esp+B0h] [ebp-58h]
  _WORD *v47; // [esp+B4h] [ebp-54h] BYREF
  _BYTE v48[28]; // [esp+B8h] [ebp-50h] BYREF
  _BYTE v49[28]; // [esp+D4h] [ebp-34h] BYREF
  __int16 v50; // [esp+F0h] [ebp-18h]
  int v51; // [esp+F4h] [ebp-14h]
  int v52; // [esp+104h] [ebp-4h]

  v43 = a2;
  result = (_DWORD *)*(this + 3);
  v45 = this;
  v44 = a3;
  v46 = result;
  if ( result[4] )
  {
    while ( 1 )
    {
      std::string::string(v48, *this + result[3]);
      v52 = 0;
      v4 = (int *)std::string::begin(v48, v24);
      v5 = *v4;
      v6 = (_BYTE *)v4[1];
      v7 = (int *)std::string::end(v48, v25);
      v8 = (char *)v7[1];
      v40 = *v7;
      v41 = v8;
      v9 = std::string::begin(v48, v23);
      LOBYTE(v38) = 0;
      String_TransformRange(&v22, *(_DWORD *)v9, *(char **)(v9 + 4), v40, v41, v5, v6, toupper);
      v10 = *(_DWORD *)(v44 + 4);
      v11 = *(int **)(v10 + 4);
      v12 = (_WORD *)v10;
      v47 = (_WORD *)v10;
      if ( !*((_BYTE *)v11 + 77) )
      {
        do
        {
          if ( (unsigned __int8)std::operator<<char>(v11 + 3, v48) )
          {
            v11 = (int *)v11[2];
          }
          else
          {
            v47 = v11;
            v11 = (int *)*v11;
          }
        }
        while ( !*((_BYTE *)v11 + 77) );
        v12 = v47;
      }
      v13 = v44;
      v47 = v12;
      if ( v12 == *(_WORD **)(v44 + 4) || (unsigned __int8)std::operator<<char>(v48, v12 + 6) )
      {
        v39 = *(_DWORD *)(v13 + 4);
        v14 = &v39;
      }
      else
      {
        v14 = (int *)&v47;
      }
      if ( *v14 != v10 )
      {
        v35 = 0;
        v36 = 0;
        v37 = 0;
        LOBYTE(v52) = 1;
        std::string::string(v29, v48);
        LOBYTE(v52) = 2;
        sub_6593B120(v30, v34);
        LOBYTE(v52) = 3;
        sub_6593BD90(v43, v29);
        v15 = (char *)v31;
        LOBYTE(v52) = 4;
        if ( v31 )
        {
          v16 = v32;
          if ( v31 != v32 )
          {
            do
            {
              std::string::~string(v15);
              v15 += 36;
            }
            while ( v15 != v16 );
            v15 = (char *)v31;
          }
          operator delete(v15);
        }
        v31 = 0;
        v32 = 0;
        v33 = 0;
        LOBYTE(v52) = 1;
        std::string::~string(v29);
        v17 = v46[4];
        v18 = *v46;
        v42 = *(_DWORD *)(v43 + 8) - 16;
        v19 = (int *)(*v45 + v17);
        v20 = (_DWORD *)(*v45 + v18);
        LOBYTE(v52) = 0;
        v35 = 0;
        v36 = 0;
        v37 = 0;
        while ( *v19 )
        {
          std::string::string(v49);
          v50 = 0;
          v51 = 0;
          v21 = *v46 == 0;
          LOBYTE(v52) = 5;
          if ( v21 )
          {
            std::string::operator=(v49, byte_659A8B98);
            v50 = 0;
          }
          else
          {
            v47 = (_WORD *)(*v20 + *v45);
            std::string::operator=(v49, v47 + 1);
            v50 = *v47;
          }
          v51 = *v19;
          std::string::string(v26, v49);
          v27 = v50;
          v28 = v51;
          LOBYTE(v52) = 6;
          sub_6593B690(v42, v26);
          LOBYTE(v52) = 5;
          std::string::~string(v26);
          ++v20;
          ++v19;
          LOBYTE(v52) = 0;
          std::string::~string(v49);
        }
      }
      v52 = -1;
      std::string::~string(v48);
      result = v46 + 5;
      v46 = result;
      if ( !result[4] )
        break;
      result = v46;
      this = v45;
    }
  }
  return result;
}
// 6593B120: using guessed type int __thiscall sub_6593B120(_DWORD, _DWORD);
// 6593B690: using guessed type int __thiscall sub_6593B690(_DWORD, _DWORD);
// 6593BD90: using guessed type int __thiscall sub_6593BD90(_DWORD, _DWORD);
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A8290: using guessed type int __thiscall std::string::begin(_DWORD, _DWORD);
// 659A8294: using guessed type int __thiscall std::string::end(_DWORD, _DWORD);
// 659A8298: using guessed type int __cdecl std::operator<<char>(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A8: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (6593C190) --------------------------------------------------------
void __thiscall sub_6593C190(int this, unsigned int *bs)
{
  ItemsAddedPayload_Write((ItemsAddedPayload *)this, bs);
  sub_659757F0((unsigned __int16 *)(this + 36), (char *)bs);
  sub_659755C0((unsigned __int16 *)(this + 612), (char *)bs);
  sub_65975A20((unsigned __int16 *)(this + 760), (char *)bs);
  ItemsAddedPayload_Write((ItemsAddedPayload *)(this + 1048), bs);
}

//----- (6593C1E0) --------------------------------------------------------
void __thiscall Packet_ID_STORAGE_read_structA(char *this, unsigned int *bs)
{
  ItemList_Read((ItemsAddedPayload *)this, bs);
  Packet_ID_STORAGE_structA_read_blockA_12(this + 36, bs);
  Packet_ID_STORAGE_structA_read_blockB_3(this + 612, bs);
  Packet_ID_STORAGE_structA_read_blockC_6(this + 760, bs);
  ItemList_Read((ItemsAddedPayload *)(this + 1048), bs);
}

//----- (6593C420) --------------------------------------------------------
unsigned int __thiscall sub_6593C420(char *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // edi
  char *v4; // esi
  _DWORD *v5; // eax
  int v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  unsigned int result; // eax
  int v10; // [esp+Ch] [ebp-8h]
  int v11; // [esp+Ch] [ebp-8h]
  int v12; // [esp+Ch] [ebp-8h]
  unsigned int v13; // [esp+10h] [ebp-4h]

  v3 = a2;
  v13 = 0;
  v4 = this + 8;
  do
  {
    if ( v13 < 3 )
    {
      a2 = (_DWORD *)*((_DWORD *)v4 - 2);
      v10 = v3[1];
      a2 = ListNode_Create3(v10, *(_DWORD *)(v10 + 4), &a2);
      List_IncSizeChecked(v3, 1u);
      v5 = a2;
      *(_DWORD *)(v10 + 4) = a2;
      *(_DWORD *)v5[1] = v5;
      *((_DWORD *)v4 - 2) = 0;
      *((_WORD *)v4 - 2) = 0;
      *((_WORD *)v4 - 1) = 0;
      *(_WORD *)v4 = 0;
      *((_WORD *)v4 + 1) = 0;
LABEL_6:
      v4[4] = 100;
      v4[5] = 0;
      *((_DWORD *)v4 + 2) = 0;
      *((_DWORD *)v4 + 3) = 0;
      *((_DWORD *)v4 + 4) = 0;
      v4[21] = 0;
      v4[22] = 0;
      v4[20] = 0;
      *(_DWORD *)(v4 + 23) = 0;
      *((_DWORD *)v4 + 7) = 0;
      *((_DWORD *)v4 + 8) = 0;
      v4[36] = 0;
      goto LABEL_8;
    }
    Buff_ReduceDurationPercent((int)(v4 - 4), 1u);
    if ( !*((_WORD *)v4 + 1) )
    {
      v6 = v3[1];
      a2 = (_DWORD *)*((_DWORD *)v4 - 2);
      v11 = v6;
      a2 = ListNode_Create3(v6, *(_DWORD *)(v6 + 4), &a2);
      List_IncSizeChecked(v3, 1u);
      v7 = a2;
      *(_DWORD *)(v11 + 4) = a2;
      *(_DWORD *)v7[1] = v7;
      *((_DWORD *)v4 - 2) = 0;
      *((_WORD *)v4 - 2) = 0;
      *((_WORD *)v4 - 1) = 0;
      *(_WORD *)v4 = 0;
      *((_WORD *)v4 + 1) = 0;
      goto LABEL_6;
    }
    v12 = a3[1];
    a2 = ItemChangeEntry_Create(v12, *(_DWORD *)(v12 + 4), v4 - 8);
    ItemChangeList_IncrementSize(a3, 1u);
    v8 = a2;
    *(_DWORD *)(v12 + 4) = a2;
    *(_DWORD *)v8[1] = v8;
LABEL_8:
    result = v13 + 1;
    v4 += 48;
    v13 = result;
  }
  while ( result < 6 );
  return result;
}

//----- (6593C560) --------------------------------------------------------
void __thiscall sub_6593C560(_DWORD *this, int a2, int ****a3, _DWORD *a4, _DWORD *a5, int a6)
{
  _DWORD *v7; // esi
  int v8; // esi
  unsigned __int16 v9; // bx
  unsigned __int16 v10; // ax
  int v11; // edi
  _DWORD *v12; // ebx
  unsigned __int8 v13; // al
  int v14; // edi
  _DWORD *v15; // ebx
  unsigned __int8 v16; // al
  char *v17; // eax
  void **v18; // eax
  void *v19; // ecx
  void **v20; // esi
  unsigned __int16 v21; // [esp-4h] [ebp-48h]
  char v22[4]; // [esp+10h] [ebp-34h] BYREF
  void *v23; // [esp+14h] [ebp-30h]
  int v24; // [esp+18h] [ebp-2Ch]
  int v25; // [esp+1Ch] [ebp-28h] BYREF
  int v26; // [esp+20h] [ebp-24h]
  int v27; // [esp+24h] [ebp-20h]
  _DWORD *v28; // [esp+28h] [ebp-1Ch]
  void **v29; // [esp+2Ch] [ebp-18h]
  int ****v30; // [esp+30h] [ebp-14h]
  char v31; // [esp+36h] [ebp-Eh]
  char v32; // [esp+37h] [ebp-Dh]
  int v33; // [esp+40h] [ebp-4h]

  v30 = (int ****)this;
  v23 = LinkedListNode_Alloc56();
  v24 = 0;
  v33 = 0;
  sub_6593E110(this, (int *)v22);
  sub_65975900((_BYTE *)this + 36, v22);
  sub_659756D0((_BYTE *)this + 612, v22);
  v7 = this + 190;
  v28 = v7;
  sub_65975B30(v7, v22);
  v29 = *(void ***)v23;
  if ( v29 != v23 )
  {
    while ( 1 )
    {
      v8 = (int)(v29 + 2);
      if ( v29 != (void **)-8 )
      {
        v31 = 0;
        v32 = 0;
        if ( sub_65934580(g_ItemTemplateById, (int)(v29 + 2)) )
        {
          v9 = *(_WORD *)(v8 + 10);
          v21 = *(_WORD *)(v8 + 4);
          LOBYTE(v27) = *(_BYTE *)(v8 + 13) != 0;
          LOBYTE(v26) = sub_65933EC0(g_ItemTemplateById, v21);
          v10 = sub_65933530(g_ItemTemplateById, *(_WORD *)(v8 + 4), v26, v9, v27, 1);
          if ( v10 )
          {
            Buff_ReduceDurationPercent(v8 + 4, v10);
            if ( *(_WORD *)(v8 + 10) )
            {
              v31 = 1;
            }
            else
            {
              v11 = a4[1];
              v25 = *(_DWORD *)v8;
              v12 = ListNode_Create3(v11, *(_DWORD *)(v11 + 4), &v25);
              List_IncSizeChecked(a4, 1u);
              *(_DWORD *)(v11 + 4) = v12;
              *(_DWORD *)v12[1] = v12;
              v32 = 1;
            }
          }
        }
        if ( sub_65934520(g_ItemTemplateById, a2, v8) )
        {
          if ( !v32 )
            sub_6593FBB0(a3, (unsigned __int16 *)v8);
        }
        else if ( !v32 )
        {
          if ( v31 )
          {
            v14 = a5[1];
            v15 = ItemChangeEntry_Create(v14, *(_DWORD *)(v14 + 4), (const void *)v8);
            ItemChangeList_IncrementSize(a5, 1u);
            *(_DWORD *)(v14 + 4) = v15;
            *(_DWORD *)v15[1] = v15;
            v16 = *(_BYTE *)(v8 + 44);
            if ( v16 && v16 < 4u )
            {
              v17 = EquipSlotArray_FindById1to3(v30 + 153, *(_DWORD *)v8);
              if ( v17 )
              {
                *((_WORD *)v17 + 3) = *(_WORD *)(v8 + 6);
                *((_WORD *)v17 + 5) = *(_WORD *)(v8 + 10);
              }
            }
            else if ( v16 < 5u || v16 >= 0x11u )
            {
              if ( v16 < 0x17u || v16 >= 0x1Du )
                sub_659403B0(v30, (int *)v8);
              else
                BuffSlots_UpdateFromSource(v28, *(_DWORD *)v8, v8);
            }
            else
            {
              EquipSlot_UpdateDurability(v30 + 9, *(_DWORD *)v8, v8);
            }
          }
          goto LABEL_34;
        }
        v13 = *(_BYTE *)(v8 + 44);
        if ( v13 && v13 < 4u )
        {
          EquipSlotArray_FindAndRemove1to3(v30 + 153, *(_DWORD *)v8, 0);
        }
        else if ( v13 < 5u || v13 >= 0x11u )
        {
          if ( v13 < 0x17u || v13 >= 0x1Du )
            sub_6593F010(v30, *(_DWORD *)v8, 0);
          else
            BuffSlots_RemoveAndClear(v28, *(_DWORD *)v8, 0);
        }
        else
        {
          EquipSlot_RemoveAndCopy(v30 + 9, *(_DWORD *)v8, 0);
        }
      }
LABEL_34:
      v29 = (void **)*v29;
      if ( v29 == v23 )
      {
        v7 = v28;
        break;
      }
    }
  }
  sub_6593C420((char *)v7, a4, a5);
  v18 = *(void ***)v23;
  *(_DWORD *)v23 = v23;
  *((_DWORD *)v23 + 1) = v23;
  v19 = v23;
  v24 = 0;
  if ( v18 != v23 )
  {
    do
    {
      v20 = (void **)*v18;
      operator delete(v18);
      v19 = v23;
      v18 = v20;
    }
    while ( v20 != v23 );
  }
  operator delete(v19);
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6593CB30) --------------------------------------------------------
char __thiscall ItemList_HasFireableTypeAllowlist(_DWORD *this)
{
  unsigned __int16 v2; // bx
  unsigned __int16 v3; // si

  v2 = (*(this + 3) - *(this + 2)) / 44;
  v3 = 0;
  if ( !v2 )
    return 0;
  while ( !ItemTemplate_IsFireableTypeAllowlist(g_ItemTemplateById, *(_WORD *)(44 * v3 + *(this + 2))) )
  {
    if ( ++v3 >= v2 )
      return 0;
  }
  return 1;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6593CDF0) --------------------------------------------------------
void __thiscall ItemsAddedEntry_Write(ItemsAddedEntry *this, unsigned int *bs)
{
  unsigned int *v2; // edi
  _DWORD *head; // eax
  _DWORD *v5; // esi
  int **v6; // eax
  int *j; // eax
  int i; // eax
  int nodeCount_low; // [esp+Ch] [ebp-4h] BYREF

  v2 = bs;
  ItemStructA_write(&this->item.templateId, (char *)bs);
  nodeCount_low = LOWORD(this->variantIdSet.nodeCount);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&nodeCount_low, (int)&bs, 2u);
    BitStream_WriteBitsCompressed((char *)v2, (char *)&bs, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed((char *)v2, (char *)&nodeCount_low, 0x10u, 1);
  }
  head = this->variantIdSet.head;
  v5 = (_DWORD *)*head;
  if ( (_DWORD *)*head != head )
  {
    do
    {
      bs = (unsigned int *)v5[3];
      if ( Net_IsBigEndian() )
      {
        ByteSwapCopy((int)&bs, (int)&nodeCount_low, 4u);
        BitStream_WriteBitsCompressed((char *)v2, (char *)&nodeCount_low, 0x20u, 1);
      }
      else
      {
        BitStream_WriteBitsCompressed((char *)v2, (char *)&bs, 0x20u, 1);
      }
      if ( !*((_BYTE *)v5 + 17) )
      {
        v6 = (int **)v5[2];
        if ( *((_BYTE *)v6 + 17) )
        {
          for ( i = v5[1]; !*(_BYTE *)(i + 17); i = *(_DWORD *)(i + 4) )
          {
            if ( v5 != *(_DWORD **)(i + 8) )
              break;
            v5 = (_DWORD *)i;
          }
          v5 = (_DWORD *)i;
        }
        else
        {
          v5 = (_DWORD *)v5[2];
          for ( j = *v6; !*((_BYTE *)j + 17); j = (int *)*j )
            v5 = j;
        }
      }
    }
    while ( v5 != this->variantIdSet.head );
  }
}

//----- (6593CEE0) --------------------------------------------------------
int __thiscall ItemsAddedPayload_GetUsedCount(unsigned __int16 *this)
{
  unsigned __int16 v1; // dx
  int v2; // esi
  __int16 v3; // dx
  _WORD *v4; // eax
  int v6; // [esp+0h] [ebp-4h]

  v1 = (__int16)(*(this + 6) - *(this + 4)) / 44;
  v6 = 0;
  if ( v1 )
  {
    v2 = v1;
    v3 = 0;
    v4 = (_WORD *)(*((_DWORD *)this + 2) + 40);
    do
    {
      v3 += *v4;
      v4 += 22;
      --v2;
    }
    while ( v2 );
    LOWORD(v6) = v3;
  }
  return v6 + *this;
}

//----- (6593CF40) --------------------------------------------------------
__int16 __thiscall ItemsAddedPayload_GetVariantCountByItemType(_WORD *this, char a2)
{
  unsigned __int16 v3; // ax
  int v4; // esi
  __int16 v5; // bx
  int v7; // [esp+Ch] [ebp-4h]

  v3 = (__int16)(*(this + 6) - *(this + 4)) / 44;
  v4 = 0;
  if ( !v3 )
    return 0;
  v7 = v3;
  v5 = 0;
  do
  {
    if ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, *(_WORD *)(v4 + *((_DWORD *)this + 2))) == a2 )
      v5 += *(_WORD *)(v4 + *((_DWORD *)this + 2) + 40);
    v4 += 44;
    --v7;
  }
  while ( v7 );
  return v5;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6593D020) --------------------------------------------------------
__int16 __thiscall ItemsAddedPayload_GetVariantCountByTemplateId(_WORD *this, __int16 a2)
{
  unsigned __int16 v2; // ax
  _WORD *v3; // ecx
  int v4; // edx
  __int16 result; // ax

  v2 = (__int16)(*(this + 6) - *(this + 4)) / 44;
  if ( !v2 )
    return 0;
  v3 = (_WORD *)*((_DWORD *)this + 2);
  v4 = v2;
  result = 0;
  do
  {
    if ( *v3 == a2 )
      result += v3[20];
    v3 += 22;
    --v4;
  }
  while ( v4 );
  return result;
}

//----- (6593D120) --------------------------------------------------------
unsigned int __thiscall ItemsAddedPayload_GetRemainingCapacity(unsigned __int16 *this)
{
  unsigned __int16 UsedCount; // ax
  unsigned __int16 *v2; // ecx
  int v3; // edx
  unsigned int v4; // ecx
  unsigned int v5; // eax

  UsedCount = ItemsAddedPayload_GetUsedCount(this);
  v3 = *v2;
  v4 = *((_DWORD *)v2 + 5);
  v5 = v3 + UsedCount;
  if ( v4 <= v5 )
    return 0;
  else
    return v4 - v5;
}
// 6593D125: variable 'v2' is possibly undefined

//----- (6593D1A0) --------------------------------------------------------
int __thiscall ItemsAddedPayload_FindEntryByItemStructA(_DWORD *this, int a2)
{
  unsigned __int16 v2; // bx
  unsigned __int16 v3; // di
  int v5; // [esp+Ch] [ebp-4h]

  v2 = (*(this + 3) - *(this + 2)) / 44;
  v3 = 0;
  if ( !v2 )
    return 0;
  v5 = *(this + 2);
  while ( !ItemStructA_Equals((_WORD *)(v5 + 44 * v3), a2) )
  {
    if ( ++v3 >= v2 )
      return 0;
  }
  return v5 + 44 * v3;
}

//----- (6593D2C0) --------------------------------------------------------
void __thiscall ItemsAddedPayload_Write(ItemsAddedPayload *this, unsigned int *bs)
{
  unsigned int *v3; // esi
  int v4; // ebx
  int v5; // edi
  char *p_baseUsedCount; // [esp-Ch] [ebp-24h]
  int baseUsedCount; // [esp+10h] [ebp-8h] BYREF
  _BYTE v9[4]; // [esp+14h] [ebp-4h] BYREF

  baseUsedCount = this->baseUsedCount;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&baseUsedCount, (int)v9, 2u);
    p_baseUsedCount = v9;
  }
  else
  {
    p_baseUsedCount = (char *)&baseUsedCount;
  }
  v3 = bs;
  BitStream_WriteBitsCompressed((char *)bs, p_baseUsedCount, 0x10u, 1);
  bs = (unsigned int *)this->capacity;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&bs, (int)&baseUsedCount, 4u);
    BitStream_WriteBitsCompressed((char *)v3, (char *)&baseUsedCount, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed((char *)v3, (char *)&bs, 0x20u, 1);
  }
  bs = (unsigned int *)this->unk24;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&bs, (int)&baseUsedCount, 4u);
    BitStream_WriteBitsCompressed((char *)v3, (char *)&baseUsedCount, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed((char *)v3, (char *)&bs, 0x20u, 1);
  }
  bs = (unsigned int *)this->unk28;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&bs, (int)&baseUsedCount, 4u);
    BitStream_WriteBitsCompressed((char *)v3, (char *)&baseUsedCount, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed((char *)v3, (char *)&bs, 0x20u, 1);
  }
  LOWORD(v4) = this->entries.end - this->entries.begin;
  baseUsedCount = (unsigned __int16)v4;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&baseUsedCount, (int)&bs, 2u);
    BitStream_WriteBitsCompressed((char *)v3, (char *)&bs, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed((char *)v3, (char *)&baseUsedCount, 0x10u, 1);
  }
  if ( (_WORD)v4 )
  {
    v5 = 0;
    v4 = (unsigned __int16)v4;
    do
    {
      ItemsAddedEntry_Write(&this->entries.begin[v5++], v3);
      --v4;
    }
    while ( v4 );
  }
}

//----- (6593D460) --------------------------------------------------------
int __thiscall sub_6593D460(_DWORD *this, unsigned int a2)
{
  int v2; // eax
  int result; // eax
  _DWORD pExceptionObject[10]; // [esp+8h] [ebp-50h] BYREF
  _BYTE v5[28]; // [esp+30h] [ebp-28h] BYREF
  int v6; // [esp+54h] [ebp-4h]

  v2 = *(this + 2);
  if ( 97612893 - v2 < a2 )
  {
    std::string::string(v5, "list<T> too long");
    v6 = 0;
    FoMException_Ctor((std::exception *)pExceptionObject, (int)v5);
    pExceptionObject[0] = &off_659BFD28;
    CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
  }
  result = a2 + v2;
  *(this + 2) = result;
  return result;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (6593D4F0) --------------------------------------------------------
char *__thiscall U16AndU32List_Write(int this, char *a2)
{
  char *v3; // esi
  char *result; // eax
  _DWORD *v5; // edi
  char *v6; // [esp-Ch] [ebp-20h]
  int v7; // [esp+Ch] [ebp-8h] BYREF
  _BYTE v8[4]; // [esp+10h] [ebp-4h] BYREF

  v7 = *(unsigned __int16 *)(this + 8);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v8, 2u);
    v6 = v8;
  }
  else
  {
    v6 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v6, 0x10u, 1);
  result = *(char **)(this + 4);
  v5 = *(_DWORD **)result;
  if ( *(char **)result != result )
  {
    do
    {
      a2 = (char *)v5[2];
      if ( Net_IsBigEndian() )
      {
        ByteSwapCopy((int)&a2, (int)&v7, 4u);
        result = BitStream_WriteBitsCompressed(v3, (char *)&v7, 0x20u, 1);
      }
      else
      {
        result = BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
      }
      v5 = (_DWORD *)*v5;
    }
    while ( v5 != *(_DWORD **)(this + 4) );
  }
  return result;
}

//----- (6593D590) --------------------------------------------------------
char __thiscall ItemList_FindEntryById_CopyEntry(_WORD *this, __int16 a2, _DWORD *a3)
{
  unsigned __int16 v3; // dx
  unsigned __int16 v4; // ax
  int v5; // esi
  _WORD *v6; // ecx
  int v8; // eax

  v3 = (__int16)(*(this + 6) - *(this + 4)) / 44;
  v4 = 0;
  if ( !v3 )
    return 0;
  v5 = *((_DWORD *)this + 2);
  while ( 1 )
  {
    v6 = (_WORD *)(v5 + 44 * v4);
    if ( *v6 == a2 )
    {
      if ( v6[20] )
        break;
    }
    if ( ++v4 >= v3 )
      return 0;
  }
  v8 = v5 + 44 * v4;
  if ( !*(_DWORD *)(v8 + 40) )
    return 0;
  qmemcpy(a3 + 1, (const void *)v8, 0x20u);
  *a3 = *(_DWORD *)(**(_DWORD **)(v8 + 36) + 12);
  return 1;
}

//----- (6593D7B0) --------------------------------------------------------
char __thiscall Read_u32c_list_u16count(int *this, unsigned int *a2)
{
  unsigned int *v2; // esi
  int v4; // eax
  int v5; // esi
  _DWORD *v6; // edi
  int v7; // eax
  char v9[4]; // [esp+Ch] [ebp-10h] BYREF
  int v10; // [esp+10h] [ebp-Ch]
  int v11; // [esp+14h] [ebp-8h] BYREF
  int v12; // [esp+18h] [ebp-4h] BYREF

  v2 = a2;
  v11 = 0;
  LOBYTE(v4) = RakNet::BitStream::ReadCompressed_T_ushort(a2, (char *)&v11);
  v12 = 0;
  v10 = 0;
  if ( (_WORD)v11 )
  {
    while ( 1 )
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, v9, 0x20u, 1) )
          ByteSwapCopy((int)v9, (int)&v12, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v12, 0x20u, 1);
      }
      v5 = *(this + 1);
      v6 = ListNode_Create3(v5, *(_DWORD *)(v5 + 4), &v12);
      List_IncSizeChecked(this, 1u);
      v7 = v10;
      *(_DWORD *)(v5 + 4) = v6;
      v4 = v7 + 1;
      *(_DWORD *)v6[1] = v6;
      v10 = v4;
      if ( (unsigned __int16)v4 >= (unsigned __int16)v11 )
        break;
      v2 = a2;
    }
  }
  return v4;
}

//----- (6593D9A0) --------------------------------------------------------
int __thiscall sub_6593D9A0(_WORD *this, __int16 a2, _DWORD *a3)
{
  _WORD *v3; // eax
  _DWORD *v4; // ecx
  _DWORD *v5; // eax
  int v6; // esi
  _DWORD *v7; // edi
  _WORD *v8; // ecx
  int v10; // [esp-8h] [ebp-54h]
  int v11; // [esp-4h] [ebp-50h]
  int v12; // [esp+Ch] [ebp-40h] BYREF
  int v13; // [esp+10h] [ebp-3Ch]
  _WORD *v14; // [esp+14h] [ebp-38h]
  int v15; // [esp+18h] [ebp-34h] BYREF
  _BYTE v16[32]; // [esp+1Ch] [ebp-30h] BYREF
  int v17; // [esp+3Ch] [ebp-10h]
  int v18; // [esp+40h] [ebp-Ch]
  char v19; // [esp+44h] [ebp-8h]

  v3 = this;
  v14 = this;
  if ( !a2 )
    a2 = *(this + 20);
  v15 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  qmemcpy(v16, this, sizeof(v16));
  if ( !a2 )
    return *((_DWORD *)v3 + 10) == 0;
  while ( 1 )
  {
    v4 = (_DWORD *)*((_DWORD *)v3 + 9);
    v5 = (_DWORD *)*v4;
    v13 = (int)v5;
    if ( v5 == v4 )
      break;
    v6 = a3[1];
    v10 = *(_DWORD *)(v6 + 4);
    v15 = v5[3];
    v7 = ItemChangeEntry_Create(v6, v10, &v15);
    ItemChangeList_IncrementSize(a3, 1u);
    v11 = v13;
    v8 = v14;
    *(_DWORD *)(v6 + 4) = v7;
    *(_DWORD *)v7[1] = v7;
    RBTree_EraseNode2((_DWORD *)v8 + 8, &v12, v11);
    --a2;
    v3 = v14;
    if ( !a2 )
      return *((_DWORD *)v3 + 10) == 0;
  }
  return -1;
}

//----- (6593DB30) --------------------------------------------------------
int *__thiscall sub_6593DB30(int ***this, int *a2, int *a3)
{
  int *result; // eax
  int **v4; // edx
  int *v5; // esi
  int v6; // edi
  _DWORD *v7; // ebx
  int v8; // eax
  int v10; // [esp+10h] [ebp-34h] BYREF
  _BYTE v11[32]; // [esp+14h] [ebp-30h] BYREF
  int v12; // [esp+34h] [ebp-10h]
  int v13; // [esp+38h] [ebp-Ch]
  char v14; // [esp+3Ch] [ebp-8h]

  result = a2;
  v10 = 0;
  *(_DWORD *)&v11[27] = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v4 = *(this + 9);
  qmemcpy(v11, this, sizeof(v11));
  v5 = *v4;
  if ( *v4 != (int *)v4 )
  {
    while ( 1 )
    {
      v6 = result[1];
      v10 = v5[3];
      v7 = ItemChangeEntry_Create(v6, *(_DWORD *)(v6 + 4), &v10);
      ItemChangeList_IncrementSize(a2, 1u);
      result = a3;
      *(_DWORD *)(v6 + 4) = v7;
      *(_DWORD *)v7[1] = v7;
      if ( (_WORD)a3 )
      {
        result = (int *)((char *)a3 + 0xFFFF);
        a3 = result;
        if ( !(_WORD)result )
          break;
      }
      if ( !*((_BYTE *)v5 + 17) )
      {
        v8 = v5[2];
        if ( *(_BYTE *)(v8 + 17) )
        {
          for ( result = (int *)v5[1]; !*((_BYTE *)result + 17); result = (int *)result[1] )
          {
            if ( v5 != (int *)result[2] )
              break;
            v5 = result;
          }
          v5 = result;
        }
        else
        {
          v5 = (int *)v5[2];
          for ( result = *(int **)v8; !*((_BYTE *)result + 17); result = (int *)*result )
            v5 = result;
        }
      }
      if ( v5 == (int *)*(this + 9) )
        break;
      result = a2;
    }
  }
  return result;
}

//----- (6593DC30) --------------------------------------------------------
int *__thiscall List_CopyEntriesLimited(int **this, _DWORD *a2, int *a3)
{
  int *result; // eax
  int *v4; // esi
  int v5; // edi
  _DWORD *v6; // ebx
  int v7; // eax

  result = *(this + 9);
  v4 = (int *)*result;
  if ( (int *)*result != result )
  {
    do
    {
      v5 = a2[1];
      v6 = ListNode_Create3(v5, *(_DWORD *)(v5 + 4), v4 + 3);
      List_IncSizeChecked(a2, 1u);
      *(_DWORD *)(v5 + 4) = v6;
      *(_DWORD *)v6[1] = v6;
      result = a3;
      if ( (_WORD)a3 )
      {
        result = (int *)((char *)a3 + 0xFFFF);
        a3 = result;
        if ( !(_WORD)result )
          break;
      }
      if ( !*((_BYTE *)v4 + 17) )
      {
        v7 = v4[2];
        if ( *(_BYTE *)(v7 + 17) )
        {
          for ( result = (int *)v4[1]; !*((_BYTE *)result + 17); result = (int *)result[1] )
          {
            if ( v4 != (int *)result[2] )
              break;
            v4 = result;
          }
          v4 = result;
        }
        else
        {
          v4 = (int *)v4[2];
          for ( result = *(int **)v7; !*((_BYTE *)result + 17); result = (int *)*result )
            v4 = result;
        }
      }
    }
    while ( v4 != *(this + 9) );
  }
  return result;
}

//----- (6593DE50) --------------------------------------------------------
char __thiscall ItemsAddedPayload_FindEntryByVariantId(_WORD *this, int a2, _DWORD *a3)
{
  _WORD *v3; // edi
  _DWORD *v4; // ebx
  int **v5; // esi
  bool v6; // al
  unsigned __int16 v8; // [esp+Ch] [ebp-10h]
  int v10; // [esp+14h] [ebp-8h] BYREF
  int v11; // [esp+18h] [ebp-4h]

  v3 = this;
  v8 = (__int16)(*(this + 6) - *(this + 4)) / 44;
  v11 = 0;
  if ( !v8 )
    return 0;
  v4 = a3;
  v10 = a2;
  while ( 1 )
  {
    v5 = (int **)(*((_DWORD *)v3 + 2) + 44 * (unsigned __int16)v11);
    v6 = *sub_658905A0(v5 + 8, &a3, &v10) != v5[9];
    if ( v4 )
    {
      *v4 = a2;
      qmemcpy(v4 + 1, v5, 0x20u);
      v3 = this;
    }
    if ( v6 )
      break;
    if ( (unsigned __int16)++v11 >= v8 )
      return 0;
  }
  return 1;
}

//----- (6593DF00) --------------------------------------------------------
char __thiscall ItemsAddedPayload_InsertEntriesForVariantIdSet(_WORD *this, int a2, _DWORD *a3)
{
  _DWORD *v3; // eax
  _DWORD *v4; // esi
  _DWORD *v5; // edi
  int v7; // edi
  _DWORD *v8; // [esp+Ch] [ebp-40h]
  _WORD *v9; // [esp+10h] [ebp-3Ch]
  int v10; // [esp+18h] [ebp-34h] BYREF
  __int16 v11; // [esp+1Ch] [ebp-30h]
  __int16 v12; // [esp+1Eh] [ebp-2Eh]
  __int16 v13; // [esp+20h] [ebp-2Ch]
  __int16 v14; // [esp+22h] [ebp-2Ah]
  char v15; // [esp+24h] [ebp-28h]
  char v16; // [esp+25h] [ebp-27h]
  int v17; // [esp+28h] [ebp-24h]
  int v18; // [esp+2Ch] [ebp-20h]
  int v19; // [esp+30h] [ebp-1Ch]
  char v20; // [esp+34h] [ebp-18h]
  char v21; // [esp+35h] [ebp-17h]
  char v22; // [esp+36h] [ebp-16h]
  int v23; // [esp+37h] [ebp-15h]
  int v24; // [esp+3Ch] [ebp-10h]
  int v25; // [esp+40h] [ebp-Ch]
  char v26; // [esp+44h] [ebp-8h]

  v11 = 0;
  v13 = 0;
  v3 = *(_DWORD **)(a2 + 4);
  v4 = (_DWORD *)*v3;
  v5 = a3;
  v9 = this;
  v10 = 0;
  v12 = 0;
  v14 = 0;
  v15 = 100;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  v21 = 0;
  v22 = 0;
  v20 = 0;
  v23 = 0;
  v24 = 0;
  v25 = 0;
  v26 = 0;
  if ( v4 == v3 )
    return 1;
  while ( v5 )
  {
    if ( !ItemsAddedPayload_FindEntryByVariantId(this, v4[2], &v10) )
      return 0;
    v7 = v5[1];
    v8 = ItemChangeEntry_Create(v7, *(_DWORD *)(v7 + 4), &v10);
    ItemChangeList_IncrementSize(a3, 1u);
    *(_DWORD *)(v7 + 4) = v8;
    v5 = a3;
    *(_DWORD *)v8[1] = v8;
LABEL_8:
    v4 = (_DWORD *)*v4;
    if ( v4 == *(_DWORD **)(a2 + 4) )
      return 1;
    this = v9;
  }
  if ( ItemsAddedPayload_FindEntryByVariantId(this, v4[2], 0) )
    goto LABEL_8;
  return 0;
}

//----- (6593E110) --------------------------------------------------------
int *__thiscall sub_6593E110(_WORD *this, int *a2)
{
  int *result; // eax
  int v4; // esi
  int v5; // ebx

  result = (int *)(unsigned __int16)((__int16)(*(this + 6) - *(this + 4)) / 44);
  if ( (_WORD)result )
  {
    v4 = 0;
    v5 = (unsigned __int16)result;
    do
    {
      result = sub_6593DB30((int ***)(v4 + *((_DWORD *)this + 2)), a2, 0);
      v4 += 44;
      --v5;
    }
    while ( v5 );
  }
  return result;
}

//----- (6593E160) --------------------------------------------------------
int *__thiscall sub_6593E160(_WORD *this, _DWORD *a2)
{
  int *result; // eax
  int v4; // esi
  int v5; // ebx

  result = (int *)(unsigned __int16)((__int16)(*(this + 6) - *(this + 4)) / 44);
  if ( (_WORD)result )
  {
    v4 = 0;
    v5 = (unsigned __int16)result;
    do
    {
      result = List_CopyEntriesLimited((int **)(v4 + *((_DWORD *)this + 2)), a2, 0);
      v4 += 44;
      --v5;
    }
    while ( v5 );
  }
  return result;
}

//----- (6593E3B0) --------------------------------------------------------
char __thiscall ItemsAddedEntry_Read(ItemsAddedEntry *this, unsigned int *bs)
{
  unsigned int *v2; // esi
  int v4; // edi
  char result; // al
  _BYTE variantInsertResult[8]; // [esp+Ch] [ebp-14h] BYREF
  unsigned int *variantIdPtr; // [esp+14h] [ebp-Ch] BYREF
  char variantIdBuf[4]; // [esp+18h] [ebp-8h] BYREF
  int variantCount; // [esp+1Ch] [ebp-4h] BYREF

  v2 = bs;
  ItemStructA_Read((char *)this, bs);
  v4 = 0;
  variantCount = 0;
  result = RakNet::BitStream::ReadCompressed_T_ushort(v2, (char *)&variantCount);
  bs = 0;
  if ( (_WORD)variantCount )
  {
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, variantIdBuf, 0x20u, 1) )
          ByteSwapCopy((int)variantIdBuf, (int)&bs, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&bs, 0x20u, 1);
      }
      result = (char)bs;
      variantIdPtr = bs;
      if ( bs )
        result = ItemsAddedEntry_InsertVariantId((int **)&this->variantIdSet, (int)variantInsertResult, &variantIdPtr);
      ++v4;
    }
    while ( (unsigned __int16)v4 < (unsigned __int16)variantCount );
  }
  return result;
}

//----- (6593E450) --------------------------------------------------------
char __thiscall sub_6593E450(int **this, int **a2, int *a3)
{
  int *v4; // edi
  _DWORD *v5; // edi
  _DWORD *v6; // esi
  int **v7; // ebx
  int v9; // [esp+10h] [ebp-20h] BYREF
  _DWORD *PasswordPtr; // [esp+14h] [ebp-1Ch]
  int v11; // [esp+18h] [ebp-18h]
  _BYTE v12[8]; // [esp+1Ch] [ebp-14h] BYREF
  int v13; // [esp+2Ch] [ebp-4h]

  if ( (unsigned __int16)a2[10] && ItemStructA_IsValid((unsigned __int16 *)a2) && ItemStructA_Equals(this, (int)a2) )
  {
    v4 = a3;
    if ( !(_WORD)a3 )
      v4 = (int *)*((unsigned __int16 *)a2 + 20);
    PasswordPtr = LoginUI_GetPasswordPtr();
    v11 = 0;
    v13 = 0;
    List_CopyEntriesLimited(a2, &v9, v4);
    v5 = PasswordPtr;
    v6 = (_DWORD *)*PasswordPtr;
    if ( (_DWORD *)*PasswordPtr == PasswordPtr )
    {
LABEL_10:
      LoginUI_SetPassword((int)&v9);
      return 1;
    }
    v7 = this + 8;
    while ( *(_BYTE *)(ItemsAddedEntry_InsertVariantId(v7, (int)v12, v6 + 2) + 4) )
    {
      v6 = (_DWORD *)*v6;
      if ( v6 == v5 )
        goto LABEL_10;
    }
    LoginUI_SetPassword((int)&v9);
  }
  return 0;
}

//----- (6593E860) --------------------------------------------------------
_DWORD *__stdcall sub_6593E860(int a1, int a2, int a3)
{
  _DWORD *v3; // esi
  int v5; // [esp+0h] [ebp-24h] BYREF
  void *v6; // [esp+10h] [ebp-14h]
  int *v7; // [esp+14h] [ebp-10h]
  int v8; // [esp+20h] [ebp-4h]

  v7 = &v5;
  v3 = operator new(0x34u);
  v6 = v3;
  v8 = 0;
  if ( v3 )
    *v3 = a1;
  if ( v3 != (_DWORD *)-4 )
    v3[1] = a2;
  sub_65754C40(v3 + 2, a3);
  return v3;
}
// 65754C40: using guessed type int __cdecl sub_65754C40(_DWORD, _DWORD);

//----- (6593E900) --------------------------------------------------------
void __cdecl sub_6593E900(int ***a1, int a2, char *a3)
{
  int ***v3; // ebx
  _DWORD v4[8]; // [esp+0h] [ebp-2Ch] BYREF
  int v5; // [esp+28h] [ebp-4h]

  v4[7] = v4;
  v3 = a1;
  v4[6] = a1;
  v5 = 0;
  while ( a2 )
  {
    v4[5] = v3;
    v4[4] = v3;
    LOBYTE(v5) = 1;
    if ( v3 )
    {
      qmemcpy(v3, a3, 0x20u);
      StringMap_CopyFrom(v3 + 8, (int)(a3 + 32));
    }
    --a2;
    v3 += 11;
    LOBYTE(v5) = 0;
  }
}
// 65732320: using guessed type int __thiscall sub_65732320(_DWORD, _DWORD);

//----- (6593E9B0) --------------------------------------------------------
char __thiscall ItemStatList_AddOrAccumulate2(char **this, int *a2)
{
  int *v2; // esi
  int v4; // edi
  unsigned int v5; // eax
  unsigned int v6; // edx
  _BYTE *v7; // esi
  int v8; // [esp+4h] [ebp-4h]

  v2 = a2;
  v8 = a2[1];
  if ( !v8 )
    return 0;
  v4 = (int)*(this + 1);
  v5 = (int)&(*(this + 2))[-v4] >> 3;
  v6 = 0;
  if ( v5 )
  {
    v7 = *(this + 1);
    while ( *v7 != *(_BYTE *)a2 )
    {
      ++v6;
      v7 += 8;
      if ( v6 >= v5 )
      {
        v2 = a2;
        goto LABEL_8;
      }
    }
    *(_DWORD *)(v4 + 8 * v6 + 4) += v8;
    return 1;
  }
  else
  {
LABEL_8:
    sub_65938710(this, v2);
    return 1;
  }
}

//----- (6593EA20) --------------------------------------------------------
unsigned int __thiscall ItemStatList_AddFromList2(char **this, int a2)
{
  int v3; // ecx
  unsigned int result; // eax
  unsigned int i; // esi

  v3 = *(_DWORD *)(a2 + 4);
  result = (*(_DWORD *)(a2 + 8) - v3) >> 3;
  for ( i = 0; i < result; result = (*(_DWORD *)(a2 + 8) - v3) >> 3 )
  {
    ItemStatList_AddOrAccumulate2(this, (int *)(v3 + 8 * i));
    v3 = *(_DWORD *)(a2 + 4);
    ++i;
  }
  return result;
}
// 6593EA3E: conditional instruction was optimized away because eax.4!=0

//----- (6593EA70) --------------------------------------------------------
void __thiscall ItemList_AccumulateStat39Lists(_DWORD *this, char **a2, _DWORD *a3)
{
  int v4; // ecx
  _WORD *v5; // eax
  unsigned int v6; // esi
  _BYTE *v7; // edx
  unsigned int v8; // eax
  int v9; // ecx
  int *v10; // eax
  int v11; // ecx
  char *v12; // [esp+18h] [ebp-58h] BYREF
  void *v13; // [esp+1Ch] [ebp-54h]
  _BYTE *v14; // [esp+20h] [ebp-50h]
  int v15; // [esp+24h] [ebp-4Ch]
  unsigned int v16; // [esp+28h] [ebp-48h]
  int v17; // [esp+2Ch] [ebp-44h]
  int v18; // [esp+30h] [ebp-40h] BYREF
  _DWORD v19[10]; // [esp+34h] [ebp-3Ch] BYREF
  char v20; // [esp+5Ch] [ebp-14h]
  int v21; // [esp+6Ch] [ebp-4h]

  v18 = 0;
  v19[0] = 0;
  v19[1] = 0;
  LOWORD(v19[2]) = 100;
  memset(&v19[3], 0, 19);
  v19[8] = 0;
  v19[9] = 0;
  v20 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  v4 = *(this + 3) - *(this + 2);
  v21 = 0;
  v16 = 0;
  if ( v4 / 44 )
  {
    v17 = 0;
    do
    {
      v5 = (_WORD *)(v17 + *(this + 2));
      qmemcpy(v19, v5, 0x20u);
      v6 = 0;
      if ( v5[20] )
      {
        do
        {
          Item_CollectStatById((int)&v18, a3, &v12, 39);
          ++v6;
        }
        while ( v6 < *(unsigned __int16 *)(v17 + *(this + 2) + 40) );
      }
      v7 = v13;
      v8 = (v14 - (_BYTE *)v13) >> 3;
      v9 = 0;
      if ( v8 )
      {
        while ( *((_BYTE *)v13 + 8 * v9) != 39 )
        {
          if ( ++v9 >= v8 )
            goto LABEL_14;
        }
        v10 = (int *)((char *)v13 + 8 * v9);
        if ( v10 )
        {
          if ( v10[1] > 0 )
          {
            ItemStatList_AddFromList2(a2, (int)&v12);
            v7 = v13;
          }
          if ( v7 != v14 )
            v14 = v7;
        }
      }
LABEL_14:
      v11 = *(this + 3) - *(this + 2);
      v17 += 44;
      ++v16;
    }
    while ( v16 < v11 / 44 );
    if ( v13 )
      operator delete(v13);
  }
}

//----- (6593ED50) --------------------------------------------------------
int __thiscall sub_6593ED50(_WORD *this, _DWORD *a2)
{
  int result; // eax
  int v4; // esi
  _DWORD *v5; // edi
  bool v6; // zf
  _WORD *v7; // [esp+0h] [ebp-8h]
  int v8; // [esp+4h] [ebp-4h]
  int v9; // [esp+10h] [ebp+8h]

  result = (unsigned __int16)((__int16)(*(this + 6) - *(this + 4)) / 44);
  v7 = this;
  if ( (_WORD)result )
  {
    v9 = 0;
    v8 = (unsigned __int16)result;
    while ( 1 )
    {
      v4 = a2[1];
      v5 = sub_6593E860(v4, *(_DWORD *)(v4 + 4), v9 + *((_DWORD *)this + 2));
      result = sub_6593D460(a2, 1u);
      v9 += 44;
      v6 = v8-- == 1;
      *(_DWORD *)(v4 + 4) = v5;
      *(_DWORD *)v5[1] = v5;
      if ( v6 )
        break;
      this = v7;
    }
  }
  return result;
}

//----- (6593EE50) --------------------------------------------------------
void __thiscall sub_6593EE50(_DWORD *this)
{
  char *v1; // eax
  _DWORD *v2; // esi
  int ***v3; // ecx
  int ***v4; // edi

  v1 = (char *)*(this + 3);
  v2 = this + 1;
  v3 = (int ***)*(this + 2);
  if ( v3 != (int ***)v1 )
  {
    v4 = ItemDataArray_Copy(v1, v1, v3);
    ItemVector_DestroyRange((int)v4, v2[2]);
    v2[2] = v4;
  }
}

//----- (6593F010) --------------------------------------------------------
char __thiscall sub_6593F010(_DWORD *this, int a2, _DWORD *a3)
{
  int v3; // ebx
  int v4; // esi
  _DWORD *v6; // eax
  int *v7; // edi
  _DWORD *v8; // esi
  int *v9; // [esp+8h] [ebp-10h] BYREF
  int *v10; // [esp+Ch] [ebp-Ch] BYREF
  _DWORD *v11; // [esp+10h] [ebp-8h]
  int v12; // [esp+14h] [ebp-4h] BYREF

  v3 = *(this + 2);
  v4 = *(this + 3);
  v11 = this;
  if ( v3 == v4 )
    return 0;
  v12 = a2;
  while ( *sub_658905A0((int **)(v3 + 32), &v10, &v12) == *(int **)(v3 + 36) )
  {
    v3 += 44;
    if ( v3 == v4 )
      return 0;
  }
  v6 = a3;
  if ( a3 )
  {
    qmemcpy(a3 + 1, (const void *)v3, 0x20u);
    *v6 = a2;
  }
  sub_658608D0((_DWORD *)(v3 + 32), &v9, (unsigned int *)&a2);
  v7 = v10;
  a2 = 0;
  sub_65861980(v9, v10, &a2);
  RBTree_EraseRange((int ***)(v3 + 32), &a3, v9, v7);
  if ( !a2 )
    return 0;
  if ( *(_DWORD *)(v3 + 40) == 0 )
  {
    LOBYTE(a2) = 0;
    v8 = v11 + 1;
    ItemDataArray_Copy((char *)(v3 + 44), (char *)v11[3], (int ***)v3);
    ItemVector_DestroyRange(v8[2] - 44, v8[2]);
    v8[2] -= 44;
  }
  return 1;
}
// 6593F0CA: conditional instruction was optimized away because eax.4<2u

//----- (6593F120) --------------------------------------------------------
char __thiscall sub_6593F120(_DWORD *this, int a2)
{
  _DWORD *v2; // eax
  _DWORD *v3; // edx
  unsigned int v4; // ebx
  int v5; // edi
  int v6; // esi
  int ***v7; // esi
  int *v8; // ebx
  _DWORD *v9; // esi
  int *v11; // [esp+Ch] [ebp-24h] BYREF
  int *v12; // [esp+10h] [ebp-20h]
  char v13[4]; // [esp+14h] [ebp-1Ch] BYREF
  int *v14; // [esp+18h] [ebp-18h] BYREF
  int v15; // [esp+1Ch] [ebp-14h]
  _DWORD *v16; // [esp+20h] [ebp-10h]
  unsigned int v17; // [esp+24h] [ebp-Ch] BYREF
  _DWORD *v18; // [esp+28h] [ebp-8h]
  int v19; // [esp+2Ch] [ebp-4h]

  v2 = *(_DWORD **)(a2 + 4);
  v3 = (_DWORD *)*v2;
  v16 = this;
  v19 = 0;
  v18 = v3;
  if ( v3 != v2 )
  {
    while ( 1 )
    {
      v4 = v18[2];
      if ( v4 )
      {
        v5 = *(this + 2);
        v6 = *(this + 3);
        if ( v5 != v6 )
        {
          v17 = v18[2];
          while ( *sub_658905A0((int **)(v5 + 32), &v14, &v17) == *(int **)(v5 + 36) )
          {
            v5 += 44;
            if ( v5 == v6 )
              goto LABEL_9;
          }
          v19 = v5;
        }
LABEL_9:
        if ( !v19 )
          return 0;
        v7 = (int ***)(v19 + 32);
        v17 = v4;
        sub_658608D0((_DWORD *)(v19 + 32), &v11, &v17);
        v8 = v12;
        v17 = 0;
        sub_65861980(v11, v12, &v17);
        RBTree_EraseRange(v7, (int **)v13, v11, v8);
        if ( !v17 )
          return 0;
        if ( *(_DWORD *)(v19 + 40) == 0 )
        {
          LOBYTE(v15) = 0;
          v9 = v16 + 1;
          ItemDataArray_Copy((char *)(v5 + 44), (char *)v16[3], (int ***)v5);
          ItemVector_DestroyRange(v9[2] - 44, v9[2]);
          v9[2] -= 44;
        }
      }
      v18 = (_DWORD *)*v18;
      if ( v18 == *(_DWORD **)(a2 + 4) )
        return 1;
      this = v16;
    }
  }
  return 1;
}
// 6593F1E7: conditional instruction was optimized away because eax.4<2u

//----- (6593F8B0) --------------------------------------------------------
char __thiscall sub_6593F8B0(_DWORD *this, int a2, int a3, _DWORD *a4, _WORD *a5)
{
  int v6; // eax
  unsigned __int16 *v7; // esi

  v6 = sub_6593E000(a2);
  v7 = (unsigned __int16 *)v6;
  if ( !v6 )
    return 0;
  if ( !sub_65933310(*(_WORD *)v6, *(_WORD *)(v6 + 2), *(_WORD *)(v6 + 6), *(_BYTE *)(v6 + 9)) )
    return 0;
  if ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, *v7) == 19 )
  {
    if ( v7[3] > (unsigned __int16)a3 )
    {
      sub_6593F010(this, a2, a4);
      Buff_ReduceDurationPercent((int)(a4 + 1), a3);
      qmemcpy(a5 + 2, a4 + 1, 0x20u);
      a5[5] = a3;
      return 1;
    }
    return 0;
  }
  if ( v7[1] <= (unsigned __int16)a3 )
    return 0;
  sub_6593F010(this, a2, a4);
  sub_65860220(a4, a3);
  qmemcpy(a5 + 2, a4 + 1, 0x20u);
  a5[3] = a3;
  return 1;
}
// 65860220: using guessed type int __thiscall sub_65860220(_DWORD, _DWORD);
// 6593E000: using guessed type int __stdcall sub_6593E000(_DWORD);
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6593FAC0) --------------------------------------------------------
_DWORD *__thiscall sub_6593FAC0(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 44 )
    v6 = (a3 - v5) / 44;
  else
    v6 = 0;
  sub_6593F5E0(this, a3, 1, a4);
  *a2 = *(this + 1) + 44 * v6;
  return a2;
}
// 6593F5E0: using guessed type int __thiscall sub_6593F5E0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6593FB20) --------------------------------------------------------
void __thiscall ItemsAddedEntryVec_Push(int ****this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  int ***v5; // edi

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = ((int)*(this + 3) - v3) / 44;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( ((int)v5 - v3) / 44 >= v4 )
  {
    sub_6593FAC0(this, &a2, (int)v5, (int)a2);
  }
  else
  {
    sub_6593E900(v5, 1, a2);
    *(this + 2) = v5 + 11;
  }
}

//----- (6593FBB0) --------------------------------------------------------
bool __thiscall sub_6593FBB0(int ****this, unsigned __int16 *a2)
{
  int **EntryByItemStructA; // eax
  int *v5[11]; // [esp+10h] [ebp-3Ch] BYREF
  int v6; // [esp+48h] [ebp-4h]

  if ( !*(_DWORD *)a2 || !ItemStructA_IsValid(a2 + 2) )
    return 0;
  EntryByItemStructA = (int **)ItemsAddedPayload_FindEntryByItemStructA(this, (int)(a2 + 2));
  if ( EntryByItemStructA )
    return ItemStructA_UpdateFrom(EntryByItemStructA, a2);
  ItemsAddedEntry_Init((char *)v5);
  v6 = 0;
  if ( !ItemStructA_UpdateFrom(v5, a2) )
  {
    v6 = -1;
    ItemMapContainer_Clear((int ***)v5);
    return 0;
  }
  ItemsAddedEntryVec_Push(this + 1, (char *)v5);
  v6 = -1;
  ItemMapContainer_Clear((int ***)v5);
  return 1;
}

//----- (6593FC80) --------------------------------------------------------
char __thiscall sub_6593FC80(int this, int a2, int *a3)
{
  int **EntryByItemStructA; // eax
  int *v6[11]; // [esp+10h] [ebp-3Ch] BYREF
  int v7; // [esp+48h] [ebp-4h]

  EntryByItemStructA = (int **)ItemsAddedPayload_FindEntryByItemStructA((_DWORD *)this, a2);
  if ( EntryByItemStructA )
    return sub_6593E450(EntryByItemStructA, (int **)a2, a3);
  if ( (_WORD)a3 && (unsigned __int16)a3 < *(_WORD *)(a2 + 40) )
  {
    sub_657CC7B0(v6, a2);
    v7 = 0;
    if ( sub_6593E450(v6, (int **)a2, a3) )
    {
      ItemsAddedEntryVec_Push((int ****)(this + 4), (char *)v6);
      v7 = -1;
      ItemMapContainer_Clear((int ***)v6);
      return 1;
    }
    else
    {
      v7 = -1;
      ItemMapContainer_Clear((int ***)v6);
      return 0;
    }
  }
  else
  {
    ItemsAddedEntryVec_Push((int ****)(this + 4), (char *)a2);
    return 1;
  }
}
// 657CC7B0: using guessed type int __thiscall sub_657CC7B0(_DWORD, _DWORD);

//----- (6593FD50) --------------------------------------------------------
char __thiscall sub_6593FD50(int ****this, _WORD *a2)
{
  int **v3; // edi
  int **EntryByItemStructA; // eax
  void **v6; // [esp+10h] [ebp-1Ch] BYREF
  void *v7; // [esp+14h] [ebp-18h]
  int v8; // [esp+18h] [ebp-14h]
  int v9; // [esp+28h] [ebp-4h]

  v7 = ListNode_AllocNew();
  v8 = 0;
  v9 = 0;
  sub_6593ED50(a2, &v6);
  if ( !v8 || (v3 = *(int ***)v7, *(void **)v7 == v7) )
  {
LABEL_7:
    v9 = -1;
    TreeMap_ClearAll(&v6);
    operator delete(v7);
    return 1;
  }
  while ( 1 )
  {
    EntryByItemStructA = (int **)ItemsAddedPayload_FindEntryByItemStructA(this, (int)(v3 + 2));
    if ( EntryByItemStructA )
      break;
    ItemsAddedEntryVec_Push(this + 1, (char *)v3 + 8);
LABEL_6:
    v3 = (int **)*v3;
    if ( v3 == v7 )
      goto LABEL_7;
  }
  if ( sub_6593E450(EntryByItemStructA, v3 + 2, 0) )
    goto LABEL_6;
  v9 = -1;
  TreeMap_ClearAll(&v6);
  operator delete(v7);
  return 0;
}

//----- (6593FE50) --------------------------------------------------------
char __thiscall sub_6593FE50(int ****this, int a2)
{
  unsigned __int16 **v2; // eax
  unsigned __int16 *v3; // esi

  v2 = *(unsigned __int16 ***)(a2 + 4);
  v3 = *v2;
  if ( *v2 == (unsigned __int16 *)v2 )
    return 1;
  while ( sub_6593FBB0(this, v3 + 4) )
  {
    v3 = *(unsigned __int16 **)v3;
    if ( v3 == *(unsigned __int16 **)(a2 + 4) )
      return 1;
  }
  return 0;
}

//----- (6593FE90) --------------------------------------------------------
void __thiscall sub_6593FE90(int ****this, _WORD *a2, int a3)
{
  int v3; // edi
  _DWORD *v4; // esi
  _DWORD *v5; // ebx
  _DWORD *v6; // eax
  _DWORD *v7; // edi
  int v9; // [esp+18h] [ebp-4Ch] BYREF
  void *PasswordPtr; // [esp+1Ch] [ebp-48h]
  int v11; // [esp+20h] [ebp-44h]
  int v12; // [esp+24h] [ebp-40h] BYREF
  __int16 v13; // [esp+28h] [ebp-3Ch]
  __int16 v14; // [esp+2Ah] [ebp-3Ah]
  __int16 v15; // [esp+2Ch] [ebp-38h]
  __int16 v16; // [esp+2Eh] [ebp-36h]
  char v17; // [esp+30h] [ebp-34h]
  char v18; // [esp+31h] [ebp-33h]
  int v19; // [esp+34h] [ebp-30h]
  int v20; // [esp+38h] [ebp-2Ch]
  int v21; // [esp+3Ch] [ebp-28h]
  char v22; // [esp+40h] [ebp-24h]
  char v23; // [esp+41h] [ebp-23h]
  char v24; // [esp+42h] [ebp-22h]
  int v25; // [esp+43h] [ebp-21h]
  int v26; // [esp+48h] [ebp-1Ch]
  int v27; // [esp+4Ch] [ebp-18h]
  char v28; // [esp+50h] [ebp-14h]
  int v29; // [esp+60h] [ebp-4h]

  v3 = a3;
  if ( (_WORD)a3 )
  {
    PasswordPtr = LoginUI_GetPasswordPtr();
    v11 = 0;
    v29 = 0;
    sub_6593E160(a2, &v9);
    if ( v11 )
    {
      v4 = PasswordPtr;
      v12 = 0;
      v13 = 0;
      v14 = 0;
      v15 = 0;
      v16 = 0;
      v17 = 100;
      v18 = 0;
      v19 = 0;
      v20 = 0;
      v21 = 0;
      v23 = 0;
      v24 = 0;
      v22 = 0;
      v25 = 0;
      v26 = 0;
      v27 = 0;
      v28 = 0;
      v5 = *(_DWORD **)PasswordPtr;
      if ( *(void **)PasswordPtr != PasswordPtr )
      {
        do
        {
          if ( !sub_6593F010(a2, v5[2], &v12) )
            break;
          if ( v12 != v5[2] )
            break;
          if ( !sub_6593FBB0(this, (unsigned __int16 *)&v12) )
            break;
          v3 += 0xFFFF;
          if ( !(_WORD)v3 )
            break;
          v5 = (_DWORD *)*v5;
        }
        while ( v5 != v4 );
      }
      v6 = (_DWORD *)*v4;
      *v4 = v4;
      v4[1] = v4;
      if ( v6 != v4 )
      {
        do
        {
          v7 = (_DWORD *)*v6;
          operator delete(v6);
          v6 = v7;
        }
        while ( v7 != v4 );
      }
      operator delete(v4);
    }
    else
    {
      LoginUI_SetPassword((int)&v9);
    }
  }
}

//----- (6593FFE0) --------------------------------------------------------
char __thiscall sub_6593FFE0(int ****this, _DWORD *a2, int a3, char *a4)
{
  int v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // esi
  int v8; // eax
  _BYTE *v9; // ecx
  int v10; // eax
  _BYTE v11[44]; // [esp-1Ch] [ebp-B0h] BYREF
  _BYTE v12[28]; // [esp+10h] [ebp-84h] BYREF
  _BYTE v13[28]; // [esp+2Ch] [ebp-68h] BYREF
  _DWORD *v14; // [esp+48h] [ebp-4Ch]
  int ****v15; // [esp+4Ch] [ebp-48h]
  char *v16; // [esp+50h] [ebp-44h]
  int v17; // [esp+54h] [ebp-40h] BYREF
  __int16 v18; // [esp+58h] [ebp-3Ch]
  __int16 v19; // [esp+5Ah] [ebp-3Ah]
  __int16 v20; // [esp+5Ch] [ebp-38h]
  __int16 v21; // [esp+5Eh] [ebp-36h]
  char v22; // [esp+60h] [ebp-34h]
  char v23; // [esp+61h] [ebp-33h]
  int v24; // [esp+64h] [ebp-30h]
  int v25; // [esp+68h] [ebp-2Ch]
  int v26; // [esp+6Ch] [ebp-28h]
  _WORD v27[4]; // [esp+70h] [ebp-24h]
  int v28; // [esp+78h] [ebp-1Ch]
  int v29; // [esp+7Ch] [ebp-18h]
  char v30; // [esp+80h] [ebp-14h]
  int v31; // [esp+90h] [ebp-4h]

  v14 = a2;
  v4 = *(_DWORD *)(a3 + 8);
  v15 = this;
  v16 = a4;
  if ( !v4 )
    return 0;
  v19 = 0;
  v5 = *(_DWORD **)(a3 + 4);
  v17 = 0;
  v18 = 0;
  v20 = 0;
  v21 = 0;
  v22 = 100;
  v23 = 0;
  v24 = 0;
  v25 = 0;
  v26 = 0;
  LOBYTE(v27[1]) = 0;
  v27[0] = 0;
  *(_DWORD *)((char *)&v27[1] + 1) = 0;
  v28 = 0;
  v29 = 0;
  v30 = 0;
  v6 = (_DWORD *)*v5;
  if ( (_DWORD *)*v5 == v5 )
    return 1;
  while ( 1 )
  {
    if ( !sub_6593F010(v14, v6[2], &v17) )
    {
      v16 = v11;
      sub_65941410(v11, 1209);
      v8 = FormatString((int)v13, (int)"ItemList::MoveFromList: Line {0}");
      v31 = 0;
LABEL_11:
      Log_WriteErrorIfEnabled(v8);
      v9 = v13;
      goto LABEL_12;
    }
    if ( v17 != v6[2] )
    {
      v16 = v11;
      sub_65941410(v11, 1214);
      v8 = FormatString((int)v13, (int)"ItemList::MoveFromList: Line {0}");
      v31 = 1;
      goto LABEL_11;
    }
    if ( !sub_6593FBB0(v15, (unsigned __int16 *)&v17) )
      break;
    if ( v16 )
      sub_65890750(&v17);
    v6 = (_DWORD *)*v6;
    if ( v6 == *(_DWORD **)(a3 + 4) )
      return 1;
  }
  v16 = v11;
  sub_65941410(v11, 1220);
  v10 = FormatString((int)v12, (int)"ItemList::MoveFromList: Line {0}");
  v31 = 2;
  Log_WriteErrorIfEnabled(v10);
  v9 = v12;
LABEL_12:
  v31 = -1;
  std::string::~string(v9);
  return 0;
}
// 65890750: using guessed type int __stdcall sub_65890750(_DWORD);

//----- (65940180) --------------------------------------------------------
char __thiscall sub_65940180(int ****this, _DWORD *a2, int a3, int a4, _BYTE *a5)
{
  int v5; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // esi
  int v9; // eax
  _BYTE *v10; // ecx
  int v11; // eax
  _BYTE v12[44]; // [esp-1Ch] [ebp-B0h] BYREF
  _BYTE v13[28]; // [esp+10h] [ebp-84h] BYREF
  _BYTE v14[28]; // [esp+2Ch] [ebp-68h] BYREF
  _DWORD *v15; // [esp+48h] [ebp-4Ch]
  int ****v16; // [esp+4Ch] [ebp-48h]
  _BYTE *v17; // [esp+50h] [ebp-44h]
  int v18; // [esp+54h] [ebp-40h] BYREF
  __int16 v19; // [esp+58h] [ebp-3Ch]
  __int16 v20; // [esp+5Ah] [ebp-3Ah]
  __int16 v21; // [esp+5Ch] [ebp-38h]
  __int16 v22; // [esp+5Eh] [ebp-36h]
  char v23; // [esp+60h] [ebp-34h]
  char v24; // [esp+61h] [ebp-33h]
  int v25; // [esp+64h] [ebp-30h]
  int v26; // [esp+68h] [ebp-2Ch]
  int v27; // [esp+6Ch] [ebp-28h]
  _WORD v28[4]; // [esp+70h] [ebp-24h]
  int v29; // [esp+78h] [ebp-1Ch]
  int v30; // [esp+7Ch] [ebp-18h]
  char v31; // [esp+80h] [ebp-14h]
  int v32; // [esp+90h] [ebp-4h]

  v15 = a2;
  v5 = *(_DWORD *)(a3 + 8);
  v16 = this;
  v17 = a5;
  if ( !v5 )
    return 0;
  v20 = 0;
  v6 = *(_DWORD **)(a3 + 4);
  v18 = 0;
  v19 = 0;
  v21 = 0;
  v22 = 0;
  v23 = 100;
  v24 = 0;
  v25 = 0;
  v26 = 0;
  v27 = 0;
  LOBYTE(v28[1]) = 0;
  v28[0] = 0;
  *(_DWORD *)((char *)&v28[1] + 1) = 0;
  v29 = 0;
  v30 = 0;
  v31 = 0;
  v7 = (_DWORD *)*v6;
  if ( (_DWORD *)*v6 == v6 )
    return 1;
  while ( 1 )
  {
    if ( !sub_6593F010(v15, v7[2], &v18) )
    {
      v17 = v12;
      sub_65941410(v12, 1244);
      v9 = FormatString((int)v14, (int)"ItemList::MoveFromList: Line {0}");
      v32 = 0;
LABEL_11:
      Log_WriteErrorIfEnabled(v9);
      v10 = v14;
      goto LABEL_12;
    }
    if ( v18 != v7[2] )
    {
      v17 = v12;
      sub_65941410(v12, 1249);
      v9 = FormatString((int)v14, (int)"ItemList::MoveFromList: Line {0}");
      v32 = 1;
      goto LABEL_11;
    }
    v25 = a4;
    if ( !sub_6593FBB0(v16, (unsigned __int16 *)&v18) )
      break;
    if ( v17 )
      sub_65890750(&v18);
    v7 = (_DWORD *)*v7;
    if ( v7 == *(_DWORD **)(a3 + 4) )
      return 1;
  }
  v17 = v12;
  sub_65941410(v12, 1258);
  v11 = FormatString((int)v13, (int)"ItemList::MoveFromList: Line {0}");
  v32 = 2;
  Log_WriteErrorIfEnabled(v11);
  v10 = v13;
LABEL_12:
  v32 = -1;
  std::string::~string(v10);
  return 0;
}
// 65890750: using guessed type int __stdcall sub_65890750(_DWORD);

//----- (659403B0) --------------------------------------------------------
char __thiscall sub_659403B0(int ****this, int *a2)
{
  if ( !sub_6593F010(this, *a2, 0) )
    return 0;
  sub_6593FBB0(this, (unsigned __int16 *)a2);
  return 1;
}

//----- (659404E0) --------------------------------------------------------
void __thiscall ItemList_Read(ItemsAddedPayload *this, unsigned int *bs)
{
  _DWORD *head; // eax
  void ***v4; // edi
  void ***v5; // esi
  int *v6; // [esp-8h] [ebp-64h]
  int ****entriesVecPtr; // [esp+14h] [ebp-48h] BYREF
  int entryIndex; // [esp+18h] [ebp-44h]
  int entryCount; // [esp+1Ch] [ebp-40h] BYREF
  ItemsAddedEntry entryTemp; // [esp+20h] [ebp-3Ch] BYREF
  int v11; // [esp+58h] [ebp-4h]

  RakNet::BitStream::ReadCompressed_T_ushort(bs, (char *)this);
  RakNet::BitStream::ReadCompressed_T_uint(bs, (char *)&this->capacity);
  RakNet::BitStream::ReadCompressed_T_uint(bs, (char *)&this->unk24);
  RakNet::BitStream::ReadCompressed_T_uint(bs, (char *)&this->unk28);
  entryCount = 0;
  RakNet::BitStream::ReadCompressed_T_ushort(bs, (char *)&entryCount);
  ItemsAddedEntry_Init((char *)&entryTemp);
  v11 = 0;
  entryIndex = 0;
  if ( (_WORD)entryCount )
  {
    entriesVecPtr = (int ****)&this->entries;
    do
    {
      entryTemp.item.stackCount = 0;
      head = entryTemp.variantIdSet.head;
      entryTemp.item.templateId = 0;
      entryTemp.item.ammoOverrideId = 0;
      entryTemp.item.durabilityCur = 0;
      entryTemp.item.durabilityLossPct = 100;
      entryTemp.item.bindState = 0;
      memset(&entryTemp.item.identityKeyA, 0, 19);
      v4 = (void ***)*((_DWORD *)entryTemp.variantIdSet.head + 1);
      v5 = v4;
      if ( !*((_BYTE *)v4 + 17) )
      {
        do
        {
          RBTree_DeleteSubtree(v5[2]);
          v5 = (void ***)*v5;
          operator delete(v4);
          v4 = v5;
        }
        while ( !*((_BYTE *)v5 + 17) );
        head = entryTemp.variantIdSet.head;
      }
      head[1] = head;
      entryTemp.variantIdSet.nodeCount = 0;
      *(_DWORD *)entryTemp.variantIdSet.head = entryTemp.variantIdSet.head;
      *((_DWORD *)entryTemp.variantIdSet.head + 2) = entryTemp.variantIdSet.head;
      ItemsAddedEntry_Read(&entryTemp, bs);
      ItemsAddedEntryVec_Push(entriesVecPtr, (char *)&entryTemp);
      ++entryIndex;
    }
    while ( (unsigned __int16)entryIndex < (unsigned __int16)entryCount );
  }
  v6 = *(int **)entryTemp.variantIdSet.head;
  v11 = -1;
  RBTree_EraseRange((int ***)&entryTemp.variantIdSet, (int **)&entriesVecPtr, v6, (int *)entryTemp.variantIdSet.head);
  operator delete(entryTemp.variantIdSet.head);
}

//----- (659407D0) --------------------------------------------------------
int __thiscall sub_659407D0(_DWORD *this, int a2, int a3)
{
  int result; // eax
  int v5; // ebx
  int v6; // eax
  float v7; // ecx
  __int16 v8; // di
  unsigned __int16 *v9; // eax
  int **v10; // edi
  int **EntryByItemStructA; // eax
  float v12; // [esp+14h] [ebp-2Ch]
  int v13; // [esp+18h] [ebp-28h]
  int v14; // [esp+1Ch] [ebp-24h]
  int v15; // [esp+20h] [ebp-20h]
  unsigned int i; // [esp+24h] [ebp-1Ch]
  char v17; // [esp+2Fh] [ebp-11h]

  v17 = sub_6593C900();
  result = 780903145 * (*(this + 3) - *(this + 2));
  v5 = 0;
  for ( i = 0; i < (*(this + 3) - *(this + 2)) / 44; ++i )
  {
    if ( !v17 )
      goto LABEL_4;
    v6 = *(this + 2);
    LODWORD(v7) = *(unsigned __int16 *)(v6 + v5 + 6);
    v8 = *(_WORD *)(v6 + v5 + 2);
    v9 = (unsigned __int16 *)(v5 + v6);
    LOBYTE(v15) = *((_BYTE *)v9 + 9) >= 2u;
    v12 = v7;
    v14 = *v9;
    LOBYTE(v13) = ItemTemplate_GetType(g_ItemTemplateById, *v9);
    if ( (unsigned __int8)sub_6593C960(v13, v14, v12, v8, v15) )
    {
LABEL_4:
      v10 = (int **)(v5 + *(this + 2));
      EntryByItemStructA = (int **)ItemsAddedPayload_FindEntryByItemStructA((_DWORD *)a2, (int)v10);
      if ( EntryByItemStructA )
        sub_6593E450(EntryByItemStructA, v10, 0);
      else
        ItemsAddedEntryVec_Push((int ****)(a2 + 4), (char *)v10);
    }
    result = 780903145 * (*(this + 3) - *(this + 2));
    v5 += 44;
  }
  return result;
}
// 65940880: variable 'v13' is possibly undefined
// 65940880: variable 'v15' is possibly undefined
// 6593C900: using guessed type int sub_6593C900(void);
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65941410) --------------------------------------------------------
void *__thiscall sub_65941410(void *this, int Value)
{
  char Buffer[4]; // [esp+Ch] [ebp-24h] BYREF
  int v5; // [esp+10h] [ebp-20h]
  int v6; // [esp+14h] [ebp-1Ch]
  int v7; // [esp+18h] [ebp-18h]
  int v8; // [esp+1Ch] [ebp-14h]
  int v9; // [esp+2Ch] [ebp-4h]

  std::string::string(this);
  v9 = 0;
  *(_DWORD *)Buffer = 0;
  v5 = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  if ( !_itoa_s(Value, Buffer, 0x14u, 10) )
    std::string::operator=(this, Buffer);
  return this;
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (659414A0) --------------------------------------------------------
void *__thiscall String_FromU32(void *this, unsigned int Value)
{
  char Buffer[4]; // [esp+Ch] [ebp-24h] BYREF
  int v5; // [esp+10h] [ebp-20h]
  int v6; // [esp+14h] [ebp-1Ch]
  int v7; // [esp+18h] [ebp-18h]
  int v8; // [esp+1Ch] [ebp-14h]
  int v9; // [esp+2Ch] [ebp-4h]

  std::string::string(this);
  v9 = 0;
  *(_DWORD *)Buffer = 0;
  v5 = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  if ( !_ultoa_s(Value, Buffer, 0x14u, 10) )
    std::string::operator=(this, Buffer);
  return this;
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (65941530) --------------------------------------------------------
void *__thiscall String_FromU16(void *this, unsigned __int16 a2)
{
  char Buffer[4]; // [esp+Ch] [ebp-24h] BYREF
  int v5; // [esp+10h] [ebp-20h]
  int v6; // [esp+14h] [ebp-1Ch]
  int v7; // [esp+18h] [ebp-18h]
  int v8; // [esp+1Ch] [ebp-14h]
  int v9; // [esp+2Ch] [ebp-4h]

  std::string::string(this);
  v9 = 0;
  *(_DWORD *)Buffer = 0;
  v5 = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  if ( !_ultoa_s(a2, Buffer, 0x14u, 10) )
    std::string::operator=(this, Buffer);
  return this;
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (659415C0) --------------------------------------------------------
void *__thiscall String_FromU8(void *this, unsigned __int8 a2)
{
  char Buffer[4]; // [esp+Ch] [ebp-24h] BYREF
  int v5; // [esp+10h] [ebp-20h]
  int v6; // [esp+14h] [ebp-1Ch]
  int v7; // [esp+18h] [ebp-18h]
  int v8; // [esp+1Ch] [ebp-14h]
  int v9; // [esp+2Ch] [ebp-4h]

  std::string::string(this);
  v9 = 0;
  *(_DWORD *)Buffer = 0;
  v5 = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  if ( !_ultoa_s(a2, Buffer, 0x14u, 10) )
    std::string::operator=(this, Buffer);
  return this;
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (65941650) --------------------------------------------------------
void *__thiscall sub_65941650(void *this, unsigned int *a2)
{
  unsigned int v3; // ecx
  unsigned int v4; // edx
  char Buffer[4]; // [esp+10h] [ebp-38h] BYREF
  int v7; // [esp+14h] [ebp-34h]
  int v8; // [esp+18h] [ebp-30h]
  int v9; // [esp+1Ch] [ebp-2Ch]
  int v10; // [esp+20h] [ebp-28h]
  int v11; // [esp+24h] [ebp-24h]
  int v12; // [esp+28h] [ebp-20h]
  int v13; // [esp+2Ch] [ebp-1Ch]
  int v14; // [esp+30h] [ebp-18h]
  int v15; // [esp+34h] [ebp-14h]
  int v16; // [esp+44h] [ebp-4h]

  std::string::string(this);
  v3 = a2[1];
  v4 = *a2;
  v16 = 0;
  *(_DWORD *)Buffer = 0;
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v15 = 0;
  if ( !_i64toa_s(__SPAIR64__(v3, v4), Buffer, 0x28u, 10) )
    std::string::operator=(this, Buffer);
  return this;
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (659417B0) --------------------------------------------------------
void *__thiscall sub_659417B0(void *this, float a2)
{
  _DWORD v4[2]; // [esp+Ch] [ebp-30h] BYREF
  char Buffer[4]; // [esp+14h] [ebp-28h]
  int v6; // [esp+18h] [ebp-24h]
  int v7; // [esp+1Ch] [ebp-20h]
  int v8; // [esp+20h] [ebp-1Ch]
  int v9; // [esp+24h] [ebp-18h]
  int v10; // [esp+28h] [ebp-14h]
  int v11; // [esp+38h] [ebp-4h]

  std::string::string(this);
  v11 = 0;
  v4[0] = 0;
  v4[1] = 0;
  *(_DWORD *)Buffer = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  v9 = 0;
  LOWORD(v10) = 0;
  if ( sprintf_s((char *const)v4, 0x1Eu, "%f", a2) != -1 )
    std::string::operator=(this, v4);
  return this;
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (65941A10) --------------------------------------------------------
void *__thiscall String_AssignFromPtr(void *this, int a2)
{
  std::string::string(this);
  std::string::operator=(this, a2);
  return this;
}
// 659A828C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);

//----- (659445A0) --------------------------------------------------------
int __cdecl sub_659445A0(int a1, int a2, int a3)
{
  int v3; // edi
  unsigned int v4; // ebx
  int v5; // edi
  int v6; // edi
  int v7; // eax
  int v9; // [esp+18h] [ebp-30h]
  int v10[7]; // [esp+1Ch] [ebp-2Ch] BYREF
  int v11; // [esp+44h] [ebp-4h]

  v3 = a1;
  v4 = 0;
  if ( (*(_DWORD *)(a3 + 8) - *(_DWORD *)(a3 + 4)) / 28 )
  {
    v9 = 0;
    do
    {
      v5 = 0;
      sub_65942630((int)v10, v4);
      v11 = 0;
      if ( std::string::npos )
      {
        do
        {
          v6 = std::string::find(a2, v10, v5);
          if ( std::string::npos == v6 )
            break;
          v7 = std::string::size(v10);
          std::string::erase(a2, v6, v7);
          if ( (*(_DWORD *)(a3 + 8) - *(_DWORD *)(a3 + 4)) / 28 > v4 )
          {
            std::string::insert(a2, v6, v9 + *(_DWORD *)(a3 + 4));
            if ( (*(_DWORD *)(a3 + 8) - *(_DWORD *)(a3 + 4)) / 28 > v4 )
              continue;
          }
          sub_659431D0();
          JUMPOUT(0x65944731);
          v5 = std::string::size(*(_DWORD *)(a3 + 4) + v9) + v6;
        }
        while ( std::string::npos != v5 );
      }
      v11 = -1;
      std::string::~string(v10);
      v9 += 28;
      ++v4;
    }
    while ( v4 < (*(_DWORD *)(a3 + 8) - *(_DWORD *)(a3 + 4)) / 28 );
    v3 = a1;
  }
  std::string::string(v3, a2);
  return v3;
}
// 6594472C: control flows out of bounds to 65944731
// 659431D0: using guessed type int sub_659431D0(void);
// 659A81E4: using guessed type int __thiscall std::string::find(_DWORD, _DWORD, _DWORD);
// 659A81E8: using guessed type int __thiscall std::string::insert(_DWORD, _DWORD, _DWORD);
// 659A8244: using guessed type int __thiscall std::string::size(_DWORD);
// 659A8250: using guessed type int __thiscall std::string::erase(_DWORD, _DWORD, _DWORD);
// 659A82A8: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (65945080) --------------------------------------------------------
int __thiscall sub_65945080(int this)
{
  char *v2; // esi
  int result; // eax
  char *i; // edi

  v2 = *(char **)(this + 4);
  result = 0;
  if ( v2 )
  {
    for ( i = *(char **)(this + 8); v2 != i; v2 += 28 )
      std::string::~string(v2);
    operator delete(*(void **)(this + 4));
    result = 0;
  }
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  return result;
}

//----- (65945170) --------------------------------------------------------
int __thiscall sub_65945170(_DWORD *this, int a2)
{
  int v3; // eax
  unsigned int v4; // esi
  int v5; // ebx
  int result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 28;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - *(this + 1)) / 28 >= v4 )
    return sub_65945010(this, &a2, v5, a2);
  result = sub_659442A0(v5, 1, a2, this, a2, 0);
  *(this + 2) = v5 + 28;
  return result;
}
// 659442A0: using guessed type int __cdecl sub_659442A0(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 65945010: using guessed type int __thiscall sub_65945010(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65946080) --------------------------------------------------------
int FormatString(int a1, int a2, ...)
{
  _DWORD v3[4]; // [esp+10h] [ebp-40h] BYREF
  int v4; // [esp+20h] [ebp-30h]
  _BYTE v5[28]; // [esp+24h] [ebp-2Ch] BYREF
  int v6; // [esp+4Ch] [ebp-4h]
  va_list va; // [esp+60h] [ebp+10h] BYREF

  va_start(va, a2);
  v4 = 0;
  v6 = 1;
  std::string::string(v5, a2);
  memset(&v3[1], 0, 12);
  LOBYTE(v6) = 3;
  sub_65945170(v3, (int)va);
  sub_659445A0(a1, (int)v5, (int)v3);
  v4 = 1;
  LOBYTE(v6) = 2;
  sub_65945080((int)v3);
  LOBYTE(v6) = 1;
  std::string::~string(v5);
  LOBYTE(v6) = 0;
  std::string::~string(va);
  return a1;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (65946140) --------------------------------------------------------
int FormatString_Args(int a1, int a2, ...)
{
  _DWORD v3[4]; // [esp+10h] [ebp-40h] BYREF
  int v4; // [esp+20h] [ebp-30h]
  _BYTE v5[28]; // [esp+24h] [ebp-2Ch] BYREF
  int v6; // [esp+4Ch] [ebp-4h]
  int v7; // [esp+60h] [ebp+10h] BYREF
  va_list va; // [esp+60h] [ebp+10h]
  int v9; // [esp+64h] [ebp+14h]
  int v10; // [esp+68h] [ebp+18h]
  int v11; // [esp+6Ch] [ebp+1Ch]
  int v12; // [esp+70h] [ebp+20h]
  int v13; // [esp+74h] [ebp+24h]
  int v14; // [esp+78h] [ebp+28h]
  va_list va1; // [esp+7Ch] [ebp+2Ch] BYREF

  va_start(va1, a2);
  va_start(va, a2);
  v7 = va_arg(va1, _DWORD);
  v9 = va_arg(va1, _DWORD);
  v10 = va_arg(va1, _DWORD);
  v11 = va_arg(va1, _DWORD);
  v12 = va_arg(va1, _DWORD);
  v13 = va_arg(va1, _DWORD);
  v14 = va_arg(va1, _DWORD);
  v4 = 0;
  v6 = 2;
  std::string::string(v5, a2);
  memset(&v3[1], 0, 12);
  LOBYTE(v6) = 4;
  sub_65945170(v3, (int)va);
  sub_65945170(v3, (int)va1);
  sub_659445A0(a1, (int)v5, (int)v3);
  v4 = 1;
  LOBYTE(v6) = 3;
  sub_65945080((int)v3);
  LOBYTE(v6) = 2;
  std::string::~string(v5);
  LOBYTE(v6) = 1;
  std::string::~string(va);
  LOBYTE(v6) = 0;
  std::string::~string(va1);
  return a1;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (65946220) --------------------------------------------------------
int sub_65946220(int a1, int a2, ...)
{
  _DWORD v3[4]; // [esp+10h] [ebp-40h] BYREF
  int v4; // [esp+20h] [ebp-30h]
  _BYTE v5[28]; // [esp+24h] [ebp-2Ch] BYREF
  int v6; // [esp+4Ch] [ebp-4h]
  int v7; // [esp+60h] [ebp+10h] BYREF
  va_list va; // [esp+60h] [ebp+10h]
  int v9; // [esp+64h] [ebp+14h]
  int v10; // [esp+68h] [ebp+18h]
  int v11; // [esp+6Ch] [ebp+1Ch]
  int v12; // [esp+70h] [ebp+20h]
  int v13; // [esp+74h] [ebp+24h]
  int v14; // [esp+78h] [ebp+28h]
  int v15; // [esp+7Ch] [ebp+2Ch] BYREF
  va_list va1; // [esp+7Ch] [ebp+2Ch]
  int v17; // [esp+80h] [ebp+30h]
  int v18; // [esp+84h] [ebp+34h]
  int v19; // [esp+88h] [ebp+38h]
  int v20; // [esp+8Ch] [ebp+3Ch]
  int v21; // [esp+90h] [ebp+40h]
  int v22; // [esp+94h] [ebp+44h]
  va_list va2; // [esp+98h] [ebp+48h] BYREF

  va_start(va2, a2);
  va_start(va1, a2);
  va_start(va, a2);
  v7 = va_arg(va1, _DWORD);
  v9 = va_arg(va1, _DWORD);
  v10 = va_arg(va1, _DWORD);
  v11 = va_arg(va1, _DWORD);
  v12 = va_arg(va1, _DWORD);
  v13 = va_arg(va1, _DWORD);
  v14 = va_arg(va1, _DWORD);
  va_copy(va2, va1);
  v15 = va_arg(va2, _DWORD);
  v17 = va_arg(va2, _DWORD);
  v18 = va_arg(va2, _DWORD);
  v19 = va_arg(va2, _DWORD);
  v20 = va_arg(va2, _DWORD);
  v21 = va_arg(va2, _DWORD);
  v22 = va_arg(va2, _DWORD);
  v4 = 0;
  v6 = 3;
  std::string::string(v5, a2);
  memset(&v3[1], 0, 12);
  LOBYTE(v6) = 5;
  sub_65945170(v3, (int)va);
  sub_65945170(v3, (int)va1);
  sub_65945170(v3, (int)va2);
  sub_659445A0(a1, (int)v5, (int)v3);
  v4 = 1;
  LOBYTE(v6) = 4;
  sub_65945080((int)v3);
  LOBYTE(v6) = 3;
  std::string::~string(v5);
  LOBYTE(v6) = 2;
  std::string::~string(va);
  LOBYTE(v6) = 1;
  std::string::~string(va1);
  LOBYTE(v6) = 0;
  std::string::~string(va2);
  return a1;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (65946F00) --------------------------------------------------------
void __thiscall BitStream_WriteU32_Compressed_thunk(int *this, char *a2)
{
  BitStream_WriteU32_Compressed(this, a2);
}

//----- (65946F10) --------------------------------------------------------
void sub_65946F10()
{
  JUMPOUT(0x65975E10);
}
// 65946F14: control flows out of bounds to 65975E10

//----- (65947090) --------------------------------------------------------
int __thiscall sub_65947090(int *this, int a2, char a3, char a4, char a5, char a6, char a7)
{
  int result; // eax

  result = a7 & 0x3F
         | ((a6 & 0x3F | ((a5 & 0x1F | (32 * (a4 & 0x1F | (32 * (a3 & 0xF | (16 * (a2 - 4))))))) << 6)) << 6);
  *this = result;
  return result;
}

//----- (659470E0) --------------------------------------------------------
unsigned int __thiscall sub_659470E0(unsigned int *this, int a2)
{
  int v3; // ebx
  unsigned int v4; // esi
  unsigned int result; // eax
  unsigned int v6; // ebx

  v3 = (*this >> 22) & 0xF;
  v4 = a2 + ((*this >> 17) & 0x1F);
  result = sub_65946FD0(v3);
  if ( v4 <= result )
  {
    *this ^= (*this ^ (v4 << 17)) & 0x3E0000;
  }
  else
  {
    v6 = v3 + 1;
    *this ^= (*this ^ ((v4 - result) << 17)) & 0x3E0000;
    result = *this;
    if ( v6 <= 0xC )
    {
      *this = result ^ (result ^ (v6 << 22)) & 0x3C00000;
    }
    else
    {
      result = ((result & 0xFC000000) + 0x4000000) & 0xFC000000 | result & 0x3FFFFF | 0x400000;
      *this = result;
    }
  }
  return result;
}
// 65946FD0: using guessed type int __stdcall sub_65946FD0(_DWORD);

//----- (65947180) --------------------------------------------------------
int __thiscall sub_65947180(_DWORD *this, int a2)
{
  int v3; // ebx
  int result; // eax
  int v5; // ecx
  int v6; // eax
  int v7; // esi

  v3 = ((*this >> 17) & 0x1F) - a2;
  result = (*this >> 26) + 2500;
  v5 = result;
  if ( v3 >= 1 )
  {
    *this ^= (*this ^ (v3 << 17)) & 0x3E0000;
  }
  else
  {
    v6 = ((*this >> 22) & 0xF) - 1;
    if ( ((*this >> 22) & 0xF) == 1 )
    {
      --v5;
      v6 = 12;
    }
    v7 = *this & 0x3FFFFF | ((v6 & 0xF | (16 * (v5 - 4))) << 22);
    *this = v7;
    result = ((v3 + sub_65946FD0(v6)) << 17) & 0x3E0000;
    *this = result | v7 & 0xFFC1FFFF;
  }
  return result;
}
// 65946FD0: using guessed type int __stdcall sub_65946FD0(_DWORD);

//----- (65947520) --------------------------------------------------------
char __thiscall sub_65947520(unsigned int *this, unsigned int *a2, unsigned int a3)
{
  unsigned int v3; // edx
  unsigned int v4; // ecx
  unsigned int v6; // eax
  int v7; // esi
  int v8; // edi
  int v9; // ebx
  int v10; // edx
  int v11; // ecx
  int v12; // eax
  int v13; // eax
  int v14; // esi
  int v15; // esi
  int v16; // [esp+8h] [ebp-Ch]
  int v17; // [esp+20h] [ebp+Ch]

  v3 = a3;
  v4 = *this;
  if ( a3 == v4 )
    return 0;
  if ( a3 <= v4 )
  {
    v6 = a3;
    v3 = v4;
  }
  else
  {
    v6 = v4;
  }
  v7 = ((v3 >> 17) & 0x1F) - ((v6 >> 17) & 0x1F);
  v8 = ((v3 >> 12) & 0x1F) - ((v6 >> 12) & 0x1F);
  v9 = ((v3 >> 6) & 0x3F) - ((v6 >> 6) & 0x3F);
  v10 = (v3 & 0x3F) - (v6 & 0x3F);
  v11 = v7;
  v16 = v10;
  v17 = v10;
  if ( v7 < 0 )
  {
    v12 = sub_65946FD0((v6 >> 22) & 0xF);
    v10 = v16;
    v11 = v7 + v12;
  }
  v13 = v8;
  if ( v8 < 0 )
    v13 = v8;
  v14 = v9;
  if ( v9 < 0 )
    v14 = v9;
  if ( v17 < 0 )
    v17 = v10;
  v15 = v17 + 60 * (v14 + 60 * (v13 + 24 * v11));
  *a2 = *a2 & 0xFFC00000
      | ((unsigned __int8)(v15 % 86400 % 3600) + 4 * ((char)(v15 % 86400 % 3600) / 60)) & 0x3F
      | ((((char)(v15 % 86400 % 3600) / 60) & 0x3F | (((v15 % 86400 / 3600) & 0x1F | (32 * ((v15 / 86400) & 0x1F))) << 6)) << 6);
  return 1;
}
// 65946FD0: using guessed type int __stdcall sub_65946FD0(_DWORD);

//----- (65947720) --------------------------------------------------------
int __thiscall sub_65947720(int *this, int a2)
{
  int v2; // esi
  unsigned int v3; // eax
  int result; // eax

  v2 = *this;
  v3 = a2 + (((unsigned int)*this >> 6) & 0x3F);
  if ( v3 <= 0x3B )
  {
    result = v2 ^ ((unsigned __int16)v2 ^ (unsigned __int16)((_WORD)v3 << 6)) & 0xFC0;
    *this = result;
  }
  else
  {
    *this = v2 ^ ((unsigned __int16)v2 ^ (((v3 - 60) % 0x3C) << 6)) & 0xFC0;
    return sub_65947680((v3 - 60) / 0x3C + 1);
  }
  return result;
}
// 65947680: using guessed type int __stdcall sub_65947680(_DWORD);

//----- (65947820) --------------------------------------------------------
int __thiscall sub_65947820(int *this, int a2)
{
  int v2; // edi
  unsigned int v3; // esi
  int result; // eax

  v2 = *this;
  v3 = a2 + (*this & 0x3F);
  if ( v3 <= 0x3B )
  {
    *this = v2 ^ ((unsigned __int8)v3 ^ (unsigned __int8)v2) & 0x3F;
  }
  else
  {
    *this = v2 ^ ((unsigned __int8)v2 ^ (unsigned __int8)(v3 + 4 * (v3 / 0x3C))) & 0x3F;
    return sub_65947720(this, v3 / 0x3C);
  }
  return result;
}

//----- (65947A40) --------------------------------------------------------
int __cdecl RandInRange_Int(int a1, int a2)
{
  int result; // eax

  result = a1 - (int)((double)rand() / -32767.0 * (double)(a2 - a1 + 1));
  if ( result > a2 )
    return a2;
  return result;
}

//----- (65947AC0) --------------------------------------------------------
bool __cdecl sub_65947AC0(float a1)
{
  return a1 >= (double)rand() / 32767.0;
}

//----- (65947CD0) --------------------------------------------------------
int __cdecl sub_65947CD0(float a1)
{
  double v1; // st7

  v1 = a1;
  if ( a1 >= 0.0 )
    return (int)(float)(v1 + 0.5);
  else
    return (int)(float)(v1 - 0.5);
}

//----- (65947DF0) --------------------------------------------------------
int __cdecl FormatDuration_MinSec(char *Buffer, unsigned int a2)
{
  if ( a2 > 0x3C && 60 * (a2 / 0x3C) == a2 )
    return sprintf(Buffer, "%um", a2 / 0x3C);
  else
    return sprintf(Buffer, "%us", a2);
}

//----- (65947EB0) --------------------------------------------------------
int __cdecl sub_65947EB0(char *Buffer, unsigned int a2)
{
  return sprintf(Buffer, "%02u:%02u:%02u", a2 / 0xE10, a2 % 0xE10 / 0x3C, a2 % 0xE10 % 0x3C);
}

//----- (65947F70) --------------------------------------------------------
int __cdecl sub_65947F70(char *Buffer, unsigned int a2)
{
  if ( a2 < 0xE10 )
  {
    if ( a2 < 0x3C )
      return sprintf(Buffer, "%02us", a2);
    else
      return sprintf(Buffer, "%umin", a2 / 0x3C);
  }
  else if ( a2 == 3600 * (a2 / 0xE10) )
  {
    return sprintf(Buffer, "%uh", a2 / 0xE10);
  }
  else
  {
    return sprintf(Buffer, "%.1fh", (double)a2 / 3600.0);
  }
}

//----- (65948020) --------------------------------------------------------
char __cdecl sub_65948020(const char *a1)
{
  unsigned int v1; // eax
  int v2; // ecx

  if ( !a1 )
    return 1;
  v1 = strlen(a1);
  if ( !v1 )
    return 1;
  v2 = 0;
  while ( a1[v2] == 32 )
  {
    if ( ++v2 >= v1 )
      return 1;
  }
  return 0;
}

//----- (659480D0) --------------------------------------------------------
char __cdecl sub_659480D0(char *Buffer, unsigned int a2)
{
  _DWORD v3[10]; // [esp+0h] [ebp-90h]
  _DWORD v4[10]; // [esp+28h] [ebp-68h]
  _DWORD v5[10]; // [esp+50h] [ebp-40h]
  _DWORD v6[6]; // [esp+78h] [ebp-18h]

  v5[0] = byte_659A8B98;
  v5[1] = "I";
  v5[2] = "II";
  v5[3] = "III";
  v5[4] = "IV";
  v5[5] = "V";
  v5[6] = "VI";
  v5[7] = "VII";
  v5[8] = "VIII";
  v5[9] = "IX";
  v4[0] = byte_659A8B98;
  v4[1] = "X";
  v4[2] = "XX";
  v4[3] = "XXX";
  v4[4] = "XL";
  v4[5] = "L";
  v4[6] = "LX";
  v4[7] = "LXX";
  v4[8] = "LXXX";
  v4[9] = "XC";
  v3[0] = byte_659A8B98;
  v3[1] = "C";
  v3[2] = "CC";
  v3[3] = "CCC";
  v3[4] = "CD";
  v3[5] = "D";
  v3[6] = "DC";
  v3[7] = "DCC";
  v3[8] = "DCCC";
  v3[9] = "CM";
  v6[0] = byte_659A8B98;
  v6[1] = "M";
  v6[2] = "MM";
  v6[3] = "MMM";
  v6[4] = "MMMM";
  v6[5] = "MMMMM";
  if ( a2 > 0x1388 )
    return 0;
  sprintf(
    Buffer,
    "%s%s%s%s",
    (const char *)v6[a2 / 0x3E8],
    (const char *)v3[a2 % 0x3E8 / 0x64],
    (const char *)v4[a2 % 0x3E8 % 0x64 / 0xA],
    (const char *)v5[a2 % 0x3E8 % 0x64 % 0xA]);
  return 1;
}

//----- (65948350) --------------------------------------------------------
int __cdecl sub_65948350(char *Buffer, _DWORD *a2)
{
  return sprintf(Buffer, "%02u.%02u.%u", (*a2 >> 17) & 0x1F, (*a2 >> 22) & 0xF, (*a2 >> 26) + 2500);
}

//----- (65948390) --------------------------------------------------------
int __cdecl sub_65948390(char *Buffer, _DWORD *a2)
{
  return sprintf(
           Buffer,
           "%02u.%02u.%u / %02u:%02u",
           (*a2 >> 17) & 0x1F,
           (*a2 >> 22) & 0xF,
           (*a2 >> 26) + 2500,
           (*a2 >> 12) & 0x1F,
           (*a2 >> 6) & 0x3F);
}

//----- (659483E0) --------------------------------------------------------
int __cdecl sub_659483E0(char *Buffer, char *Buffera)
{
  char *v3; // [esp+0h] [ebp-4h] BYREF

  unknown_libname_664(&v3);
  v3 = Buffera;
  return sprintf(
           Buffer,
           "%02u.%02u.%u / %02u:%02u",
           ((unsigned int)Buffera >> 17) & 0x1F,
           ((unsigned int)Buffera >> 22) & 0xF,
           ((unsigned int)Buffera >> 26) + 2500,
           ((unsigned int)Buffera >> 12) & 0x1F,
           ((unsigned int)Buffera >> 6) & 0x3F);
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);

//----- (65948440) --------------------------------------------------------
int __cdecl sub_65948440(int *a1, _BYTE *a2, _BYTE *a3)
{
  int result; // eax
  struct tm Tm; // [esp+4h] [ebp-2Ch] BYREF
  __time64_t Time; // [esp+28h] [ebp-8h] BYREF

  Time = 0;
  _time64(&Time);
  _gmtime64_s(&Tm, &Time);
  if ( Tm.tm_mday == (((unsigned int)*a1 >> 17) & 0x1F) )
  {
    *a2 = 0;
  }
  else
  {
    *a1 ^= (*a1 ^ (Tm.tm_mday << 17)) & 0x3E0000;
    *a2 = 1;
  }
  if ( Tm.tm_mon + 1 == (((unsigned int)*a1 >> 22) & 0xF) )
  {
    *a3 = 0;
  }
  else
  {
    *a1 ^= (*a1 ^ ((Tm.tm_mon + 1) << 22)) & 0x3C00000;
    *a3 = 1;
  }
  result = Tm.tm_sec & 0x3F
         | ((Tm.tm_min & 0x3F | ((Tm.tm_hour & 0x1F) << 6)) << 6)
         | *a1 & 0x3FE0000
         | ((Tm.tm_year - 4) << 26);
  *a1 = result;
  return result;
}

//----- (65948510) --------------------------------------------------------
int __cdecl sub_65948510(int *a1)
{
  int v1; // ecx
  __int16 v3; // [esp+0h] [ebp-2h] BYREF

  v3 = HIWORD(v1);
  return sub_65948440(a1, &v3, (_BYTE *)&v3 + 1);
}
// 65948513: variable 'v1' is possibly undefined

//----- (65948530) --------------------------------------------------------
int sub_65948530()
{
  int v1; // [esp+0h] [ebp-8h] BYREF
  char v2; // [esp+6h] [ebp-2h] BYREF
  char v3; // [esp+7h] [ebp-1h] BYREF

  unknown_libname_664(&v1);
  sub_65948440(&v1, &v2, &v3);
  return v1;
}
// 65946F90: using guessed type int __thiscall unknown_libname_664(_DWORD);

//----- (65948560) --------------------------------------------------------
int __cdecl sub_65948560(int *a1)
{
  int *v1; // esi
  int result; // eax
  char v3; // [esp+7h] [ebp-1h] BYREF

  v1 = a1;
  result = sub_65948440(a1, &v3, (_BYTE *)&a1 + 3);
  *v1 &= 0xFFFE003F;
  return result;
}

//----- (65948590) --------------------------------------------------------
int __thiscall sub_65948590(_BYTE *this)
{
  *(_DWORD *)this = 0;
  *(this + 4) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 4) = 0;
  *(this + 12) = 0;
  *(this + 13) = 0;
  *(this + 14) = 0;
  return 0;
}

//----- (659485E0) --------------------------------------------------------
void __thiscall ItemStatEntry_UndoPct13(int this)
{
  unsigned __int8 v1; // dl
  unsigned int v2; // eax

  v1 = *(_BYTE *)(this + 13);
  if ( v1 )
  {
    v2 = *(_DWORD *)(this + 8);
    if ( v2 )
      *(_DWORD *)(this + 8) = (__int64)((double)v2 / (1.0 - (double)v1 / 100.0));
    *(_BYTE *)(this + 13) = 0;
  }
}

//----- (65948640) --------------------------------------------------------
void __thiscall ItemStatEntry_UndoPct14(int this)
{
  unsigned __int8 v1; // dl
  unsigned int v2; // eax

  v1 = *(_BYTE *)(this + 14);
  if ( v1 )
  {
    v2 = *(_DWORD *)(this + 8);
    if ( v2 )
      *(_DWORD *)(this + 8) = (__int64)((double)v2 / (1.0 - (double)v1 / 100.0));
    *(_BYTE *)(this + 14) = 0;
  }
}

//----- (659486A0) --------------------------------------------------------
unsigned int __thiscall ItemStatEntry_GetValue_NoPct(int this)
{
  unsigned __int8 v1; // dl
  unsigned int result; // eax
  unsigned __int8 v3; // cl

  v1 = *(_BYTE *)(this + 13);
  result = *(_DWORD *)(this + 8);
  if ( v1 )
    result = (__int64)((double)result / (1.0 - (double)v1 / 100.0));
  v3 = *(_BYTE *)(this + 14);
  if ( v3 )
    return (__int64)((double)result / (1.0 - (double)v3 / 100.0));
  return result;
}

//----- (65948750) --------------------------------------------------------
int __stdcall ItemStatModifierTable_CountByGroup(int a1)
{
  unsigned int v1; // esi
  int v2; // edi
  char *Entry; // eax

  v1 = 0;
  v2 = 0;
  do
  {
    Entry = ItemStatModifierTable_GetEntry(v1);
    if ( Entry && Entry[74] && *((_DWORD *)Entry + 1) == a1 )
      ++v2;
    ++v1;
  }
  while ( v1 < 0x74 );
  return v2;
}

//----- (65948790) --------------------------------------------------------
char *__thiscall ItemStatModifierTable_GetBaseValueWithListPct(
        unsigned __int8 *this,
        int a2,
        int a3,
        char **a4,
        unsigned __int8 *a5,
        unsigned __int8 *a6)
{
  char *result; // eax
  char *v8; // edx
  unsigned __int8 v9; // al
  int v10; // edx
  unsigned __int8 v11; // al
  unsigned __int8 v12; // al
  unsigned __int8 v13; // al

  result = ItemStatModifierTable_GetEntry(a2);
  v8 = result;
  if ( result )
  {
    *a4 = (char *)*((_DWORD *)result + 29);
    v9 = *(this + 36);
    *a5 = v9;
    *a4 = (char *)(__int64)((1.0 - (double)v9 / 100.0) * (double)(unsigned int)*a4);
    v10 = *((_DWORD *)v8 + 1);
    result = (char *)(v10 - 2);
    switch ( v10 )
    {
      case 2:
      case 5:
        v11 = *(this + 37);
        *a6 = v11;
        result = (char *)(__int64)((1.0 - (double)v11 / 100.0) * (double)(unsigned int)*a4);
        *a4 = result;
        break;
      case 3:
      case 4:
        v13 = *(this + 39);
        *a6 = v13;
        result = (char *)(__int64)((1.0 - (double)v13 / 100.0) * (double)(unsigned int)*a4);
        *a4 = result;
        break;
      case 6:
      case 7:
        v12 = *(this + 38);
        *a6 = v12;
        result = (char *)(__int64)((1.0 - (double)v12 / 100.0) * (double)(unsigned int)*a4);
        *a4 = result;
        break;
      default:
        return result;
    }
  }
  return result;
}

//----- (65948920) --------------------------------------------------------
int __stdcall ItemTemplate_GetType_ById(unsigned __int16 a1, int a2)
{
  return ItemTemplate_GetType(g_ItemTemplateById, a1);
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (659489A0) --------------------------------------------------------
int __thiscall ModifierEntry_CountFromPtrs(_DWORD *this, _DWORD *a2)
{
  return (*this - *a2) / 20;
}

//----- (659489C0) --------------------------------------------------------
_DWORD *__thiscall ModifierEntry_AdvancePtr(_DWORD *this, int a2)
{
  *this += 20 * a2;
  return this;
}

//----- (659489E0) --------------------------------------------------------
_DWORD *__cdecl ModifierEntry_FillRange(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; result += 5 )
  {
    *result = *a3;
    result[1] = a3[1];
    result[2] = a3[2];
    result[3] = a3[3];
    result[4] = a3[4];
  }
  return result;
}

//----- (65948A30) --------------------------------------------------------
_DWORD *__cdecl ModifierEntry_MoveBackward(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax
  int v5; // esi

  v3 = a2;
  for ( result = a3; v3 != a1; result[4] = v3[4] )
  {
    v5 = *(v3 - 5);
    v3 -= 5;
    result -= 5;
    *result = v5;
    result[1] = v3[1];
    result[2] = v3[2];
    result[3] = v3[3];
  }
  return result;
}

//----- (65948A70) --------------------------------------------------------
int __thiscall ItemStatEntry_ScaleByFloatCeil(int *this, float a2)
{
  int *v2; // esi
  int result; // eax
  float v4; // [esp+Ch] [ebp+8h]
  float v5; // [esp+Ch] [ebp+8h]

  v2 = this + 1;
  v4 = (double)*(this + 1) * a2;
  v5 = ceil(v4);
  result = (int)v5;
  *v2 = result;
  return result;
}

//----- (65948AC0) --------------------------------------------------------
char __thiscall sub_65948AC0(_BYTE *this, char a2)
{
  *(this + 12) = a2;
  return a2;
}

//----- (65948AF0) --------------------------------------------------------
_BYTE *__thiscall sub_65948AF0(_BYTE *this)
{
  *(_DWORD *)this = 0;
  *(this + 4) = 0;
  *((_DWORD *)this + 2) = 0;
  *((_DWORD *)this + 4) = 0;
  *(this + 12) = 0;
  *(this + 13) = 0;
  *(this + 14) = 0;
  return this;
}

//----- (65948B10) --------------------------------------------------------
unsigned __int8 __thiscall ItemStatEntry_ApplyPct13(int this, unsigned __int8 *a2)
{
  unsigned int v2; // edx
  unsigned __int8 result; // al
  double v4; // st7

  if ( *(_BYTE *)(this + 13) )
    ItemStatEntry_UndoPct13(this);
  v2 = *(_DWORD *)(this + 8);
  result = *a2;
  *(_BYTE *)(this + 13) = *a2;
  if ( v2 )
  {
    v4 = (1.0 - (double)result / 100.0) * (double)v2;
    *(_DWORD *)(this + 8) = (__int64)v4;
    return BYTE2(v2);
  }
  return result;
}
// 65948B24: variable 'this' is possibly undefined

//----- (65948B80) --------------------------------------------------------
unsigned __int8 __thiscall ItemStatEntry_ApplyPct14(int this, unsigned __int8 *a2)
{
  unsigned int v2; // edx
  unsigned __int8 result; // al
  double v4; // st7

  if ( *(_BYTE *)(this + 14) )
    ItemStatEntry_UndoPct14(this);
  v2 = *(_DWORD *)(this + 8);
  result = *a2;
  *(_BYTE *)(this + 14) = *a2;
  if ( v2 )
  {
    v4 = (1.0 - (double)result / 100.0) * (double)v2;
    *(_DWORD *)(this + 8) = (__int64)v4;
    return BYTE2(v2);
  }
  return result;
}
// 65948B94: variable 'this' is possibly undefined

//----- (65948BF0) --------------------------------------------------------
int __thiscall ItemStatModifier_FindById(_DWORD *this, int a2)
{
  int v2; // edi
  int v3; // esi
  unsigned int v4; // eax
  _DWORD *i; // ecx

  v2 = *(this + 1);
  v3 = 0;
  v4 = (*(this + 2) - v2) / 20;
  if ( !v4 )
    return 0;
  for ( i = (_DWORD *)*(this + 1); *i != a2; i += 5 )
  {
    if ( ++v3 >= v4 )
      return 0;
  }
  return v2 + 20 * v3;
}

//----- (65948C40) --------------------------------------------------------
bool __thiscall ItemStatModifier_HasMinLevel(_DWORD *this, int a2, unsigned __int8 a3)
{
  int v3; // eax

  v3 = ItemStatModifier_FindById(this, a2);
  return v3 && *(_BYTE *)(v3 + 4) >= a3;
}

//----- (65948C70) --------------------------------------------------------
bool __thiscall ItemStatModifier_MeetsRequiredLevel(_DWORD *this, int a2)
{
  char *Entry; // ebx
  int v4; // eax
  bool result; // al

  Entry = ItemStatModifierTable_GetEntry(a2);
  result = 0;
  if ( Entry )
  {
    v4 = ItemStatModifier_FindById(this, a2);
    if ( v4 )
    {
      if ( *(_BYTE *)(v4 + 4) >= (unsigned __int8)Entry[9] )
        return 1;
    }
  }
  return result;
}

//----- (65948CF0) --------------------------------------------------------
int __thiscall ItemStatModifier_CountByGroup(_DWORD *this, int a2)
{
  int v3; // esi
  unsigned int v4; // ebx
  char *Entry; // eax
  int v7; // [esp+Ch] [ebp-8h]
  int v8; // [esp+10h] [ebp-4h]

  v3 = *(this + 1);
  v4 = 0;
  v8 = 0;
  if ( !((*(this + 2) - v3) / 20) )
    return 0;
  v7 = 0;
  do
  {
    Entry = ItemStatModifierTable_GetEntry(*(_DWORD *)(v7 + v3));
    if ( Entry && Entry[74] && *((_DWORD *)Entry + 1) == a2 )
      ++v8;
    v3 = *(this + 1);
    v7 += 20;
    ++v4;
  }
  while ( v4 < (*(this + 2) - v3) / 20 );
  return v8;
}

//----- (65948D80) --------------------------------------------------------
char __thiscall ItemStatModifier_HasLevelAbove(_DWORD *this, unsigned int a2)
{
  int v2; // edi
  int v3; // esi
  unsigned int v4; // eax
  unsigned __int8 *i; // ecx

  v2 = *(this + 1);
  v3 = 0;
  v4 = (*(this + 2) - v2) / 20;
  if ( !v4 )
    return 0;
  for ( i = (unsigned __int8 *)(v2 + 12); *i <= a2; i += 20 )
  {
    if ( ++v3 >= v4 )
      return 0;
  }
  return 1;
}

//----- (65948DD0) --------------------------------------------------------
int __thiscall sub_65948DD0(_DWORD *this)
{
  int v1; // esi
  int v2; // edi
  int v3; // eax
  int v4; // ecx

  v1 = *(this + 1);
  v2 = 0;
  v3 = (*(this + 2) - v1) / 20;
  if ( v3 )
  {
    v4 = v1 + 8;
    do
    {
      if ( *(_BYTE *)(v4 + 4) )
        v2 += *(_DWORD *)v4;
      v4 += 20;
      --v3;
    }
    while ( v3 );
  }
  return v2;
}

//----- (65948E10) --------------------------------------------------------
unsigned int __thiscall ItemStatModifier_GetMaxLevel(_DWORD *this)
{
  int v1; // esi
  unsigned int v2; // edi
  int v3; // eax
  unsigned __int8 *v4; // edx

  v1 = *(this + 1);
  v2 = 0;
  v3 = (*(this + 2) - v1) / 20;
  if ( v3 )
  {
    v4 = (unsigned __int8 *)(v1 + 12);
    do
    {
      if ( *v4 > v2 )
        v2 = *v4;
      v4 += 20;
      --v3;
    }
    while ( v3 );
  }
  return v2;
}

//----- (65948E50) --------------------------------------------------------
unsigned int __thiscall SkillList_DecrementPendingLevels(_DWORD *this)
{
  int v1; // esi
  unsigned int v2; // edi
  unsigned int result; // eax
  int v4; // ebx
  char v5; // al

  v1 = *(this + 1);
  v2 = 0;
  result = (*(this + 2) - v1) / 20;
  if ( result )
  {
    v4 = 0;
    do
    {
      v5 = *(_BYTE *)(v4 + v1 + 12);
      if ( v5 )
        *(_BYTE *)(v4 + v1 + 12) = v5 - 1;
      v1 = *(this + 1);
      ++v2;
      result = (*(this + 2) - v1) / 20;
      v4 += 20;
    }
    while ( v2 < result );
  }
  return result;
}

//----- (65948EB0) --------------------------------------------------------
unsigned int __thiscall ItemStatList_SetPct13All(int this, unsigned __int8 *a2)
{
  unsigned int v2; // edi
  unsigned int result; // eax
  int v4; // ebx
  int v5; // edx
  unsigned __int8 v6; // al
  int v7; // edx
  unsigned int v8; // esi
  unsigned int v9; // esi
  unsigned __int8 v10; // al

  *(_BYTE *)(this + 36) = *a2;
  v2 = 0;
  result = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20;
  if ( result )
  {
    v4 = 0;
    do
    {
      v5 = *(_DWORD *)(this + 4);
      v6 = *(_BYTE *)(v5 + v4 + 13);
      v7 = v4 + v5;
      if ( v6 )
      {
        v8 = *(_DWORD *)(v7 + 8);
        if ( v8 )
          *(_DWORD *)(v7 + 8) = (__int64)((double)v8 / (1.0 - (double)v6 / 100.0));
        *(_BYTE *)(v7 + 13) = 0;
      }
      v9 = *(_DWORD *)(v7 + 8);
      v10 = *a2;
      *(_BYTE *)(v7 + 13) = *a2;
      if ( v9 )
        *(_DWORD *)(v7 + 8) = (__int64)((1.0 - (double)v10 / 100.0) * (double)v9);
      ++v2;
      result = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20;
      v4 += 20;
    }
    while ( v2 < result );
  }
  return result;
}

//----- (65948FC0) --------------------------------------------------------
unsigned int __thiscall ItemStatList_ClearPct13All(int this)
{
  unsigned int v1; // esi
  bool v2; // zf
  unsigned int result; // eax
  int v4; // ebx
  int v5; // edx
  unsigned __int8 v6; // al
  int v7; // edx
  unsigned int v8; // edi

  v1 = 0;
  v2 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20 == 0;
  result = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20;
  *(_BYTE *)(this + 36) = 0;
  if ( !v2 )
  {
    v4 = 0;
    do
    {
      v5 = *(_DWORD *)(this + 4);
      v6 = *(_BYTE *)(v5 + v4 + 13);
      v7 = v4 + v5;
      if ( v6 )
      {
        v8 = *(_DWORD *)(v7 + 8);
        if ( v8 )
          *(_DWORD *)(v7 + 8) = (__int64)((double)v8 / (1.0 - (double)v6 / 100.0));
        *(_BYTE *)(v7 + 13) = 0;
      }
      ++v1;
      result = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20;
      v4 += 20;
    }
    while ( v1 < result );
  }
  return result;
}

//----- (65949080) --------------------------------------------------------
unsigned int __thiscall ItemStatList_ClearPct14All(int this)
{
  unsigned int v1; // esi
  bool v2; // zf
  unsigned int result; // eax
  int v4; // ebx
  int v5; // edx
  unsigned __int8 v6; // al
  int v7; // edx
  unsigned int v8; // edi

  v1 = 0;
  v2 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20 == 0;
  result = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20;
  *(_BYTE *)(this + 37) = 0;
  *(_BYTE *)(this + 38) = 0;
  *(_BYTE *)(this + 39) = 0;
  if ( !v2 )
  {
    v4 = 0;
    do
    {
      v5 = *(_DWORD *)(this + 4);
      v6 = *(_BYTE *)(v5 + v4 + 14);
      v7 = v4 + v5;
      if ( v6 )
      {
        v8 = *(_DWORD *)(v7 + 8);
        if ( v8 )
          *(_DWORD *)(v7 + 8) = (__int64)((double)v8 / (1.0 - (double)v6 / 100.0));
        *(_BYTE *)(v7 + 14) = 0;
      }
      ++v1;
      result = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20;
      v4 += 20;
    }
    while ( v1 < result );
  }
  return result;
}

//----- (65949140) --------------------------------------------------------
int __thiscall ItemStatModifier_CalcAggregateValue(_DWORD *this)
{
  int v2; // esi
  int v3; // ebx
  char *Entry; // eax
  unsigned __int8 v5; // dl
  int v6; // ecx
  unsigned int v8; // [esp+Ch] [ebp-Ch]
  int v9; // [esp+10h] [ebp-8h]
  int v10; // [esp+14h] [ebp-4h]

  v2 = *(this + 1);
  v9 = *(this + 8);
  v8 = 0;
  if ( !((*(this + 2) - v2) / 20) )
    return *(this + 8);
  v10 = 0;
  do
  {
    v3 = v10 + v2;
    if ( v10 + v2 )
    {
      Entry = ItemStatModifierTable_GetEntry(*(_DWORD *)v3);
      if ( Entry )
      {
        v5 = *(_BYTE *)(v3 + 4);
        v6 = 0;
        if ( v5 )
          v6 = *((_DWORD *)Entry + 29);
        if ( v5 > 1u )
          v6 += *((_DWORD *)Entry + 30);
        if ( v5 > 2u )
          v6 += *((_DWORD *)Entry + 31);
        if ( v5 > 3u )
          v6 += *((_DWORD *)Entry + 32);
        if ( v5 > 4u )
          v6 += *((_DWORD *)Entry + 33);
        if ( v5 > 5u )
          v6 += *((_DWORD *)Entry + 34);
        if ( v5 > 6u )
          v6 += *((_DWORD *)Entry + 35);
        if ( v5 > 7u )
          v6 += *((_DWORD *)Entry + 36);
        if ( v5 > 8u )
          v6 += *((_DWORD *)Entry + 37);
        if ( v5 > 9u )
          v6 += *((_DWORD *)Entry + 38);
        if ( v5 < (unsigned __int8)Entry[9] )
          v6 += *(_DWORD *)&Entry[4 * v5 + 116] - *(_DWORD *)(v3 + 8);
        v9 += v6;
      }
    }
    v2 = *(this + 1);
    v10 += 20;
    ++v8;
  }
  while ( v8 < (*(this + 2) - v2) / 20 );
  return v9;
}

//----- (65949260) --------------------------------------------------------
char __thiscall ItemStatModifier_DecrementLevel(_DWORD *this, int a2)
{
  int v3; // eax
  int v4; // ebx
  int v6; // edi
  unsigned int v7; // ecx
  unsigned __int8 *v8; // edx
  int v9; // edi
  char v10; // al
  unsigned __int8 v11; // [esp+17h] [ebp+Bh]

  v3 = ItemStatModifier_FindById(this, a2);
  v4 = v3;
  if ( !v3 )
    return 0;
  v11 = *(_BYTE *)(v3 + 12);
  if ( v11 == 1 )
    return 0;
  v6 = *(this + 1);
  v7 = 0;
  if ( (*(this + 2) - v6) / 20 )
  {
    v8 = (unsigned __int8 *)(v6 + 12);
    while ( *v8 != v11 - 1 )
    {
      ++v7;
      v8 += 20;
      if ( v7 >= (*(this + 2) - v6) / 20 )
        goto LABEL_11;
    }
    v9 = v6 + 20 * v7;
    if ( v9 )
      ++*(_BYTE *)(v9 + 12);
LABEL_11:
    v4 = v3;
  }
  v10 = *(_BYTE *)(v4 + 12);
  if ( v10 )
    *(_BYTE *)(v4 + 12) = v10 - 1;
  return 1;
}

//----- (659492F0) --------------------------------------------------------
char __thiscall ItemStatModifier_IncrementLevel(_DWORD *this, int a2)
{
  int v3; // eax
  unsigned int v5; // esi
  int v6; // ebx
  int v7; // esi
  unsigned int v8; // eax
  unsigned __int8 *i; // ecx
  int v10; // ecx
  char v11; // al
  int v12; // [esp+Ch] [ebp+8h]

  v3 = ItemStatModifier_FindById(this, a2);
  v12 = v3;
  if ( !v3 )
    return 0;
  v5 = *(unsigned __int8 *)(v3 + 12);
  if ( v5 >= ItemStatModifier_GetMaxLevel(this) )
    return 0;
  v6 = *(this + 1);
  v7 = 0;
  v8 = (*(this + 2) - v6) / 20;
  if ( v8 )
  {
    for ( i = (unsigned __int8 *)(v6 + 12); *i != *(unsigned __int8 *)(v12 + 12) + 1; i += 20 )
    {
      if ( ++v7 >= v8 )
      {
        ++*(_BYTE *)(v12 + 12);
        return 1;
      }
    }
    v10 = v6 + 20 * v7;
    if ( v10 )
    {
      v11 = *(_BYTE *)(v10 + 12);
      if ( v11 )
        *(_BYTE *)(v10 + 12) = v11 - 1;
    }
  }
  ++*(_BYTE *)(v12 + 12);
  return 1;
}

//----- (659493A0) --------------------------------------------------------
char __thiscall ItemStatModifier_ResetLevelAndReindex(int this, int a2)
{
  int v3; // eax
  int v4; // ebx
  unsigned int v6; // edi
  int v7; // ebx
  int v8; // edx
  unsigned __int8 v9; // al
  int v10; // [esp+10h] [ebp+8h]

  v3 = ItemStatModifier_FindById((_DWORD *)this, a2);
  v4 = v3;
  v10 = v3;
  if ( !v3 || !*(_BYTE *)(v3 + 12) )
    return 0;
  v6 = 0;
  if ( (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20 )
  {
    v7 = 0;
    do
    {
      v8 = *(_DWORD *)(this + 4);
      v9 = *(_BYTE *)(v8 + v7 + 12);
      if ( v9 > *(_BYTE *)(v10 + 12) )
      {
        if ( v9 )
          *(_BYTE *)(v8 + v7 + 12) = v9 - 1;
      }
      ++v6;
      v7 += 20;
    }
    while ( v6 < (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20 );
    v4 = v10;
  }
  *(_BYTE *)(this + 40) = 1;
  *(_BYTE *)(v4 + 12) = 0;
  return 1;
}

//----- (65949440) --------------------------------------------------------
char *__thiscall ItemStatEntry_ApplyModifier(_DWORD *this, int __return_address, int *a3, int a4)
{
  char *result; // eax
  char *v5; // esi
  float v6; // [esp+18h] [ebp+10h]

  result = (char *)ItemStatModifier_FindById(this, a4);
  v5 = result;
  if ( result )
  {
    if ( result[4] )
    {
      result = ItemStatModifierTable_GetEntry(a4);
      if ( result )
      {
        if ( a4 == 25 && *(_BYTE *)a3 == 32 )
        {
          v6 = (double)(unsigned int)ItemStatModifier_GetValue(*result, v5[4]) / 100.0;
          return (char *)ItemStatEntry_ScaleByFloatCeil(a3, v6);
        }
      }
    }
  }
  return result;
}

//----- (659494C0) --------------------------------------------------------
void __thiscall ItemStatModifier_ProcessValue(_DWORD *this, unsigned __int8 __return_address, int *a3)
{
  int v3; // eax
  char v4; // al
  double v5; // st7
  int *v6; // esi
  int v7; // eax
  int v8; // eax
  int v9; // [esp-18h] [ebp-50h] BYREF
  _BYTE v10[28]; // [esp+10h] [ebp-28h] BYREF
  int v11; // [esp+34h] [ebp-4h]
  float v12; // [esp+44h] [ebp+Ch]

  v3 = ItemStatModifier_FindById(this, __return_address);
  if ( v3 )
  {
    v4 = *(_BYTE *)(v3 + 4);
    if ( v4 )
    {
      switch ( __return_address )
      {
        case 0x18u:
          *a3 += ItemStatModifier_GetValue(__return_address, v4);
          return;
        case 0x38u:
          v6 = a3;
          v12 = ((double)(unsigned int)ItemStatModifier_GetValue(__return_address, v4) / 100.0 + 1.0) * (double)*a3;
          v7 = (int)Float_Ceil(v12);
          goto LABEL_8;
        case 0x3Cu:
        case 0x3Du:
        case 0x3Eu:
        case 0x3Fu:
        case 0x40u:
        case 0x41u:
        case 0x42u:
        case 0x43u:
        case 0x46u:
        case 0x49u:
        case 0x4Au:
        case 0x53u:
        case 0x54u:
        case 0x55u:
        case 0x56u:
        case 0x57u:
        case 0x58u:
        case 0x59u:
        case 0x5Au:
        case 0x5Bu:
        case 0x5Cu:
        case 0x5Du:
        case 0x5Eu:
        case 0x5Fu:
        case 0x60u:
        case 0x61u:
        case 0x62u:
        case 0x63u:
        case 0x68u:
        case 0x69u:
        case 0x6Au:
        case 0x6Bu:
        case 0x6Du:
        case 0x6Eu:
        case 0x6Fu:
          *a3 = (int)((1.0 - (double)(unsigned int)ItemStatModifier_GetValue(__return_address, v4) / 100.0) * (double)*a3);
          return;
        case 0x44u:
        case 0x45u:
          v5 = (double)(unsigned int)ItemStatModifier_GetValue(__return_address, v4) / 100.0;
          goto LABEL_7;
        case 0x4Bu:
          v5 = (double)(unsigned int)ItemStatModifier_GetValue(__return_address, v4) / 1000.0;
LABEL_7:
          v6 = a3;
          v7 = (int)((v5 + 1.0) * (double)*a3);
LABEL_8:
          *v6 = v7;
          break;
        default:
          String_FromU8(&v9, __return_address);
          v8 = FormatString((int)v10, (int)"ProcessValue - Skill {0} not handled!");
          v11 = 0;
          Log_WriteErrorIfEnabled(v8);
          v11 = -1;
          std::string::~string(v10);
          break;
      }
    }
  }
}

//----- (65949710) --------------------------------------------------------
void __thiscall ItemStatModifier_ProcessValue_ByItemTemplate(_DWORD *this, unsigned __int16 a2, int *a3)
{
  switch ( ItemTemplate_GetType(g_ItemTemplateById, a2) )
  {
    case 6:
      ItemStatModifier_ProcessValue(this, 0x6Au, a3);
      break;
    case 20:
      ItemStatModifier_ProcessValue(this, 0x6Bu, a3);
      break;
    case 21:
    case 22:
      ItemStatModifier_ProcessValue(this, 0x6Du, a3);
      break;
    default:
      switch ( ItemTemplate_GetSubType(g_ItemTemplateById, a2) )
      {
        case 1:
          ItemStatModifier_ProcessValue(this, 0x68u, a3);
          break;
        case 2:
          ItemStatModifier_ProcessValue(this, 0x69u, a3);
          break;
        case 3:
          ItemStatModifier_ProcessValue(this, 0x60u, a3);
          break;
        case 4:
          ItemStatModifier_ProcessValue(this, 0x62u, a3);
          break;
        case 5:
          ItemStatModifier_ProcessValue(this, 0x61u, a3);
          break;
        case 6:
          ItemStatModifier_ProcessValue(this, 0x63u, a3);
          break;
        case 7:
          if ( a2 == 990 )
          {
            ItemStatModifier_ProcessValue(this, 0x6Eu, a3);
          }
          else if ( a2 == 989 )
          {
            ItemStatModifier_ProcessValue(this, 0x6Fu, a3);
          }
          break;
        case 9:
          ItemStatModifier_ProcessValue(this, 0x53u, a3);
          break;
        case 10:
          ItemStatModifier_ProcessValue(this, 0x55u, a3);
          break;
        case 11:
          ItemStatModifier_ProcessValue(this, 0x54u, a3);
          break;
        case 12:
          ItemStatModifier_ProcessValue(this, 0x56u, a3);
          break;
        case 13:
          ItemStatModifier_ProcessValue(this, 0x57u, a3);
          break;
        case 14:
          ItemStatModifier_ProcessValue(this, 0x58u, a3);
          break;
        case 16:
          ItemStatModifier_ProcessValue(this, 0x59u, a3);
          break;
        case 17:
          ItemStatModifier_ProcessValue(this, 0x5Bu, a3);
          break;
        case 18:
          ItemStatModifier_ProcessValue(this, 0x5Cu, a3);
          break;
        case 19:
          ItemStatModifier_ProcessValue(this, 0x5Au, a3);
          break;
        case 20:
          ItemStatModifier_ProcessValue(this, 0x5Du, a3);
          break;
        case 21:
          ItemStatModifier_ProcessValue(this, 0x5Eu, a3);
          break;
        case 26:
          ItemStatModifier_ProcessValue(this, 0x3Cu, a3);
          break;
        case 27:
          ItemStatModifier_ProcessValue(this, 0x3Du, a3);
          break;
        case 28:
          ItemStatModifier_ProcessValue(this, 0x3Eu, a3);
          break;
        case 29:
          ItemStatModifier_ProcessValue(this, 0x3Fu, a3);
          break;
        case 30:
          ItemStatModifier_ProcessValue(this, 0x40u, a3);
          break;
        case 31:
          ItemStatModifier_ProcessValue(this, 0x41u, a3);
          break;
        case 32:
          ItemStatModifier_ProcessValue(this, 0x42u, a3);
          break;
        case 33:
          ItemStatModifier_ProcessValue(this, 0x43u, a3);
          break;
        case 34:
          ItemStatModifier_ProcessValue(this, 0x49u, a3);
          break;
        case 35:
          ItemStatModifier_ProcessValue(this, 0x46u, a3);
          break;
        case 37:
          ItemStatModifier_ProcessValue(this, 0x5Fu, a3);
          break;
        default:
          return;
      }
      break;
  }
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65949AB0) --------------------------------------------------------
unsigned __int16 *__thiscall ItemStatModifier_AdjustAmmoItemId(_DWORD *this, unsigned __int16 *a2)
{
  unsigned __int16 *v2; // esi
  int v4; // eax
  unsigned __int16 *result; // eax
  unsigned __int16 AmmoItemId; // ax
  unsigned __int8 v7; // [esp-8h] [ebp-10h]

  v2 = a2;
  v4 = ItemTemplate_GetSubType(g_ItemTemplateById, a2[2]) - 23;
  if ( v4 )
  {
    result = (unsigned __int16 *)(v4 - 1);
    if ( result )
      return result;
    AmmoItemId = v2[4];
    if ( !AmmoItemId )
      AmmoItemId = ItemTemplate_GetAmmoItemId(g_ItemTemplateById, v2[2]);
    v7 = 69;
  }
  else
  {
    AmmoItemId = v2[4];
    if ( !AmmoItemId )
      AmmoItemId = ItemTemplate_GetAmmoItemId(g_ItemTemplateById, v2[2]);
    v7 = 68;
  }
  a2 = (unsigned __int16 *)AmmoItemId;
  ItemStatModifier_ProcessValue(this, v7, (int *)&a2);
  result = a2;
  v2[4] = (unsigned __int16)a2;
  v2[3] = (unsigned __int16)result;
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65949B40) --------------------------------------------------------
bool __thiscall ItemStatModifier_MeetsReqFromDisplayName(_DWORD *this, int a2)
{
  __int16 *DisplayName; // eax
  __int16 *v4; // esi
  bool result; // al
  int v6; // eax

  DisplayName = ItemId_GetDisplayName(*(_WORD *)(a2 + 4));
  v4 = DisplayName;
  result = 1;
  if ( DisplayName )
  {
    v6 = ItemStatModifier_FindById(this, *((_DWORD *)DisplayName + 1));
    if ( !v6 || *(_BYTE *)(v6 + 4) < *((_BYTE *)v4 + 8) )
      return 0;
  }
  return result;
}

//----- (65949B90) --------------------------------------------------------
bool __thiscall ItemStatModifier_MeetsReqFromTemplateTable(_DWORD *this, unsigned __int16 a2)
{
  __int16 *Entry; // eax
  __int16 *v4; // esi
  bool result; // al
  int v6; // eax

  Entry = ItemStatReqTable_FindEntry(a2);
  v4 = Entry;
  result = 1;
  if ( Entry )
  {
    v6 = ItemStatModifier_FindById(this, *((_DWORD *)Entry + 1));
    if ( !v6 || *(_BYTE *)(v6 + 4) < *((_BYTE *)v4 + 8) )
      return 0;
  }
  return result;
}

//----- (65949BD0) --------------------------------------------------------
char __thiscall ItemStatModifier_MeetsPrereqs(_DWORD *this, int a2)
{
  char *Entry; // eax
  int v5; // edi
  char *i; // esi
  int v7; // eax

  Entry = ItemStatModifierTable_GetEntry(a2);
  if ( !Entry )
    return 0;
  v5 = 0;
  for ( i = Entry + 76; ; i += 8 )
  {
    if ( *(int *)i > 0 && *(int *)i < 116 )
    {
      if ( ItemStatModifierTable_GetEntry(*(_DWORD *)i) )
      {
        v7 = ItemStatModifier_FindById(this, *(_DWORD *)i);
        if ( !v7 || *(_BYTE *)(v7 + 4) < (unsigned __int8)i[4] )
          break;
      }
    }
    if ( (unsigned int)++v5 >= 5 )
      return 1;
  }
  return 0;
}

//----- (65949C70) --------------------------------------------------------
_DWORD *__thiscall ModifierEntry_AdvancePtr2(_DWORD *this, int a2)
{
  *this += 20 * a2;
  return this;
}

//----- (65949C90) --------------------------------------------------------
_DWORD *__cdecl ModifierEntry_FillRange2(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return ModifierEntry_FillRange(a1, a2, a3);
}

//----- (65949CA0) --------------------------------------------------------
_DWORD *__cdecl ModifierEntry_MoveBackward2(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return ModifierEntry_MoveBackward(a1, a2, a3);
}

//----- (65949CD0) --------------------------------------------------------
unsigned __int8 __thiscall ItemStatEntry_RecalcValue(unsigned __int8 *this)
{
  unsigned __int8 result; // al
  unsigned __int8 v3; // [esp+7h] [ebp-1h] BYREF

  *((_DWORD *)this + 2) = ItemStatModifierTable_GetLevelValue(*(_DWORD *)this, *(this + 4));
  if ( *(this + 13) )
  {
    v3 = *(this + 13);
    *(this + 13) = 0;
    ItemStatEntry_ApplyPct13((int)this, &v3);
  }
  result = *(this + 14);
  if ( result )
  {
    v3 = *(this + 14);
    *(this + 14) = 0;
    return ItemStatEntry_ApplyPct14((int)this, &v3);
  }
  return result;
}

//----- (65949D30) --------------------------------------------------------
char *__thiscall ItemStatEntry_WriteToBitStream(_BYTE *this, char *a2)
{
  char *v3; // esi
  char *v5; // [esp-Ch] [ebp-1Ch]
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v7 = *(_DWORD *)this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    v5 = v6;
  }
  else
  {
    v5 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  LOBYTE(a2) = *(this + 4);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  a2 = (char *)*((_DWORD *)this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v6, 4u);
    BitStream_WriteBitsCompressed(v3, v6, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  LOBYTE(a2) = *(this + 12);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *(this + 13);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *(this + 14);
  return BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
}

//----- (65949E10) --------------------------------------------------------
bool __thiscall ItemStatEntry_ReadFromBitStream(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed(a2, this + 4, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 8);
  RakNet::BitStream::ReadCompressed(a2, this + 12, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 13, 8u, 1);
  return RakNet::BitStream::ReadCompressed(a2, this + 14, 8u, 1);
}

//----- (65949E70) --------------------------------------------------------
char __thiscall ItemStatEntry_UpdateProgress(int this, unsigned int a2, unsigned int *a3)
{
  unsigned int v4; // edx
  int v6; // ecx
  bool v7; // zf
  unsigned int v8; // edx
  unsigned int v9; // ecx

  v4 = *(_DWORD *)(this + 16);
  if ( v4 >= a2 )
    return 1;
  if ( *(_BYTE *)(this + 12) != 1 )
  {
    *(_DWORD *)(this + 16) = 0;
    return 1;
  }
  if ( !v4 )
    goto LABEL_4;
  v6 = a2 - v4;
  if ( a2 - v4 > *(_DWORD *)(this + 8) )
    v6 = *(_DWORD *)(this + 8);
  v7 = *(_DWORD *)(this + 8) == v6;
  *(_DWORD *)(this + 8) -= v6;
  v8 = *(_DWORD *)(this + 8);
  if ( !v7 )
  {
    v9 = *a3;
    if ( *a3 )
    {
      if ( v8 <= v9 )
      {
        *a3 = v9 - v8;
        *(_DWORD *)(this + 8) = 0;
      }
      else
      {
        *(_DWORD *)(this + 8) = v8 - v9;
        *a3 = 0;
      }
    }
  }
  if ( *(_DWORD *)(this + 8) )
  {
LABEL_4:
    *(_DWORD *)(this + 16) = a2;
    return 1;
  }
  else
  {
    ++*(_BYTE *)(this + 4);
    ItemStatEntry_RecalcValue((unsigned __int8 *)this);
    *(_DWORD *)(this + 16) = 0;
    return 0;
  }
}

//----- (65949F00) --------------------------------------------------------
char __thiscall ItemStatEntry_ConsumeProgress(int this, unsigned int *a2)
{
  unsigned int v2; // edx
  int v3; // eax

  if ( *(_BYTE *)(this + 12) != 1 )
    return 0;
  v2 = *(_DWORD *)(this + 8);
  v3 = *a2;
  if ( *a2 < v2 )
  {
    *(_DWORD *)(this + 8) = v2 - v3;
    *a2 = 0;
    return 0;
  }
  else
  {
    *a2 = v3 - v2;
    ++*(_BYTE *)(this + 4);
    ItemStatEntry_RecalcValue((unsigned __int8 *)this);
    return 1;
  }
}

//----- (65949F50) --------------------------------------------------------
char *__thiscall ItemStatList_WriteToBitStream(int this, char *a2)
{
  char *v2; // esi
  int v4; // ebx
  char *result; // eax
  int v6; // ebx
  char *v7; // [esp+Ch] [ebp-Ch]
  char v8[4]; // [esp+10h] [ebp-8h] BYREF
  char v9[4]; // [esp+14h] [ebp-4h] BYREF

  v2 = a2;
  v9[0] = *(_BYTE *)(this + 36);
  BitStream_WriteBitsCompressed(a2, v9, 8u, 1);
  LOBYTE(a2) = *(_BYTE *)(this + 37);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *(_BYTE *)(this + 38);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *(_BYTE *)(this + 39);
  BitStream_WriteBitsCompressed(v2, (char *)&a2, 8u, 1);
  a2 = *(char **)(this + 32);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v8, 4u);
    BitStream_WriteBitsCompressed(v2, v8, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  v4 = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20;
  v7 = (char *)v4;
  a2 = (char *)v4;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v8, 4u);
    result = BitStream_WriteBitsCompressed(v2, v8, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(v2, (char *)&a2, 0x20u, 1);
  }
  if ( v4 )
  {
    v6 = 0;
    a2 = v7;
    do
    {
      result = ItemStatEntry_WriteToBitStream((_BYTE *)(v6 + *(_DWORD *)(this + 4)), v2);
      v6 += 20;
      --a2;
    }
    while ( a2 );
  }
  return result;
}

//----- (6594A070) --------------------------------------------------------
int __thiscall SkillList_UpdateProgress(int this, unsigned int *a2)
{
  int v3; // edi
  int i; // ebx
  int v5; // ecx

  v3 = 0;
  if ( !((*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20) )
    return 0;
  for ( i = 0; ; i += 20 )
  {
    v5 = i + *(_DWORD *)(this + 4);
    if ( *(_BYTE *)(v5 + 12) == 1 )
      *(_BYTE *)(this + 40) = 1;
    if ( !ItemStatEntry_UpdateProgress(v5, *a2, (unsigned int *)(this + 32)) )
      break;
    if ( ++v3 >= (unsigned int)((*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20) )
      return 0;
  }
  SkillList_DecrementPendingLevels((_DWORD *)this);
  return *(_DWORD *)(*(_DWORD *)(this + 4) + 20 * v3);
}

//----- (6594A100) --------------------------------------------------------
void __thiscall ItemStatModifier_ProcessValue_Indirect(_DWORD *this, unsigned __int8 a2, _DWORD *a3)
{
  _DWORD *v3; // esi

  v3 = a3;
  a3 = (_DWORD *)*a3;
  ItemStatModifier_ProcessValue(this, a2, (int *)&a3);
  *v3 = a3;
}

//----- (6594A130) --------------------------------------------------------
bool __thiscall ItemStatModifier_MeetsReqFromItemId(_DWORD *this, int a2)
{
  __int16 *Entry; // eax
  __int16 *v4; // esi
  bool result; // al
  int v6; // eax

  Entry = ItemStatReqTable_FindEntry(*(_WORD *)(a2 + 4));
  v4 = Entry;
  result = 1;
  if ( Entry )
  {
    v6 = ItemStatModifier_FindById(this, *((_DWORD *)Entry + 1));
    if ( !v6 || *(_BYTE *)(v6 + 4) < *((_BYTE *)v4 + 8) )
      return 0;
  }
  return result;
}

//----- (6594A180) --------------------------------------------------------
unsigned int __thiscall SkillList_RecalcPctBucketsAndApply(int this, int a2)
{
  unsigned int v3; // eax
  int v4; // ebx
  unsigned int v5; // ebx
  unsigned int result; // eax
  int v7; // esi
  int v8; // esi
  unsigned __int8 v9; // cl
  unsigned int v10; // eax
  char *Entry; // eax
  unsigned __int8 *v12; // eax
  int i; // [esp+18h] [ebp-5Ch]
  int v14; // [esp+18h] [ebp-5Ch]
  char v15[81]; // [esp+1Ch] [ebp-58h] BYREF
  char v16; // [esp+6Dh] [ebp-7h]

  *(_BYTE *)(this + 37) = 0;
  *(_BYTE *)(this + 38) = 0;
  *(_BYTE *)(this + 39) = 0;
  v3 = 0;
  for ( i = 0;
        (unsigned __int16)i < (unsigned int)((*(_DWORD *)(a2 + 16) - *(_DWORD *)(a2 + 12)) >> 2);
        v3 = (unsigned __int16)i )
  {
    if ( v3 < (*(_DWORD *)(a2 + 16) - *(_DWORD *)(a2 + 12)) >> 2 )
    {
      v4 = *(_DWORD *)(a2 + 12) + 4 * v3;
      if ( v4 )
      {
        if ( *(_BYTE *)(v4 + 3) && SkillDefTable_CopyEntry(*(_WORD *)v4, v15) )
        {
          switch ( *(_WORD *)v4 )
          {
            case 6:
            case 7:
            case 9:
            case 0xB:
              *(_BYTE *)(this + 37) += v16;
              break;
            case 0xE:
            case 0xF:
            case 0x12:
            case 0x16:
              *(_BYTE *)(this + 38) += v16;
              break;
            case 0x1A:
            case 0x1B:
            case 0x1F:
            case 0x20:
              *(_BYTE *)(this + 39) += v16;
              break;
            default:
              break;
          }
        }
      }
    }
    ++i;
  }
  v5 = 0;
  result = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20;
  if ( result )
  {
    v14 = 0;
    do
    {
      v7 = *(_DWORD *)(this + 4);
      if ( v5 < (*(_DWORD *)(this + 8) - v7) / 20 )
      {
        v8 = v14 + v7;
        if ( v8 )
        {
          v9 = *(_BYTE *)(v8 + 14);
          if ( v9 )
          {
            v10 = *(_DWORD *)(v8 + 8);
            if ( v10 )
              *(_DWORD *)(v8 + 8) = (__int64)((double)v10 / (1.0 - (double)v9 / 100.0));
            *(_BYTE *)(v8 + 14) = 0;
          }
          Entry = ItemStatModifierTable_GetEntry(*(_DWORD *)v8);
          if ( Entry )
          {
            switch ( *((_DWORD *)Entry + 1) )
            {
              case 2:
              case 5:
                v12 = (unsigned __int8 *)(this + 37);
                goto LABEL_24;
              case 3:
              case 4:
                v12 = (unsigned __int8 *)(this + 39);
                goto LABEL_24;
              case 6:
              case 7:
                v12 = (unsigned __int8 *)(this + 38);
LABEL_24:
                ItemStatEntry_ApplyPct14(v8, v12);
                break;
              default:
                break;
            }
          }
        }
      }
      v14 += 20;
      ++v5;
      result = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20;
    }
    while ( v5 < result );
  }
  return result;
}

//----- (6594A380) --------------------------------------------------------
_DWORD *__thiscall ModifierEntry_AdvancePtr3(_DWORD *this, _DWORD *a2, int a3)
{
  *a2 = *this + 20 * a3;
  return a2;
}

//----- (6594A3A0) --------------------------------------------------------
_DWORD *__cdecl ModifierEntry_MoveBackward3(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return ModifierEntry_MoveBackward(a1, a2, a3);
}

//----- (6594A3D0) --------------------------------------------------------
void __cdecl ModifierEntry_FillN(_DWORD *a1, int a2, _DWORD *a3)
{
  int i; // ecx

  for ( i = a2; i; a1 += 5 )
  {
    if ( a1 )
    {
      *a1 = *a3;
      a1[1] = a3[1];
      a1[2] = a3[2];
      a1[3] = a3[3];
      a1[4] = a3[4];
    }
    --i;
  }
}

//----- (6594A420) --------------------------------------------------------
void __cdecl ModifierEntry_FillN2(_DWORD *a1, int a2, _DWORD *a3)
{
  ModifierEntry_FillN(a1, a2, a3);
}

//----- (6594A450) --------------------------------------------------------
_DWORD *__stdcall ModifierEntry_FillN_ReturnEnd(_DWORD *a1, int a2, _DWORD *a3)
{
  ModifierEntry_FillN(a1, a2, a3);
  return &a1[5 * a2];
}

//----- (6594A490) --------------------------------------------------------
_DWORD *__cdecl ModifierEntry_CopyRange(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return CopyArray20(a1, a2, a3);
}

//----- (6594A4C0) --------------------------------------------------------
_DWORD *__thiscall ModifierEntry_EraseAt(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  Array20_CopyRange(a3 + 5, (_DWORD *)*(this + 2), a3);
  *(this + 2) -= 20;
  *a2 = a3;
  return a2;
}

//----- (6594A500) --------------------------------------------------------
_DWORD *__cdecl ModifierEntry_CopyRange2(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return CopyArray20(a1, a2, a3);
}

//----- (6594A530) --------------------------------------------------------
_DWORD *__thiscall ModifierEntry_CopyRange3(void *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  return CopyArray20(a2, a3, a4);
}

//----- (6594A560) --------------------------------------------------------
_DWORD *__thiscall SkillList_ResetState(int this)
{
  _DWORD *result; // eax
  _DWORD *v3; // ecx
  int v4; // edi

  result = *(_DWORD **)(this + 8);
  v3 = *(_DWORD **)(this + 4);
  if ( v3 != result )
  {
    result = Array20_CopyRange(result, result, v3);
    *(_DWORD *)(this + 8) = result;
  }
  *(_BYTE *)(this + 40) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 44) = -1;
  *(_BYTE *)(this + 36) = 0;
  *(_BYTE *)(this + 37) = 0;
  *(_BYTE *)(this + 38) = 0;
  *(_BYTE *)(this + 39) = 0;
  v4 = *(_DWORD *)(this + 20);
  if ( v4 != *(_DWORD *)(this + 24) )
  {
    *(_DWORD *)(this + 24) = v4;
    return 0;
  }
  return result;
}

//----- (6594A5F0) --------------------------------------------------------
void __thiscall SkillList_InsertRange(int this, char *a2, unsigned int a3, int *a4)
{
  int v5; // ecx
  char *v7; // ebx
  int v8; // eax
  unsigned int v9; // eax
  unsigned int v10; // edx
  unsigned int v11; // ecx
  char *v12; // eax
  _DWORD *v13; // ecx
  _DWORD *v14; // eax
  _DWORD *v15; // eax
  int v16; // ebx
  int v17; // edi
  int v18; // edx
  int v19; // edx
  int v20; // ecx
  int v21; // edx
  _DWORD *v22; // [esp-Ch] [ebp-48h]
  int v23; // [esp-8h] [ebp-44h]
  int v24[4]; // [esp+0h] [ebp-3Ch] BYREF
  int v25; // [esp+10h] [ebp-2Ch] BYREF
  int v26; // [esp+14h] [ebp-28h]
  int v27; // [esp+18h] [ebp-24h]
  int v28; // [esp+1Ch] [ebp-20h]
  int v29; // [esp+20h] [ebp-1Ch]
  int v30; // [esp+24h] [ebp-18h]
  unsigned int v31; // [esp+28h] [ebp-14h]
  int *v32; // [esp+2Ch] [ebp-10h]
  int v33; // [esp+38h] [ebp-4h]
  char *v34; // [esp+48h] [ebp+Ch]

  v32 = v24;
  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v31 = (*(_DWORD *)(this + 12) - v5) / 20;
  else
    v31 = 0;
  if ( a3 )
  {
    v7 = *(char **)(this + 8);
    v8 = (int)&v7[-v5] / 20;
    if ( 214748364 - v8 < a3 )
      sub_6583E940(v24[0], v24[1]);
    v9 = a3 + v8;
    if ( v31 >= v9 )
    {
      if ( (v7 - a2) / 20 >= a3 )
      {
        v19 = a4[1];
        v25 = *a4;
        v20 = a4[2];
        v26 = v19;
        v21 = a4[3];
        v29 = a4[4];
        v27 = v20;
        v28 = v21;
        *(_DWORD *)(this + 8) = ModifierEntry_CopyRange3((void *)this, &v7[-20 * a3], v7, v7);
        ModifierEntry_MoveBackward3(a2, &v7[-20 * a3], v7);
        ModifierEntry_FillRange(a2, &a2[20 * a3], &v25);
      }
      else
      {
        v25 = *a4;
        v26 = a4[1];
        v27 = a4[2];
        v18 = a4[3];
        v29 = a4[4];
        v28 = v18;
        ModifierEntry_CopyRange3((void *)this, a2, v7, &a2[20 * a3]);
        v23 = a3 - (*(_DWORD *)(this + 8) - (int)a2) / 20;
        v22 = *(_DWORD **)(this + 8);
        v33 = 2;
        ModifierEntry_FillN_ReturnEnd(v22, v23, &v25);
        *(_DWORD *)(this + 8) += 20 * a3;
        ModifierEntry_FillRange(a2, (_DWORD *)(*(_DWORD *)(this + 8) - 20 * a3), &v25);
      }
    }
    else
    {
      v10 = v31 >> 1;
      if ( 214748364 - (v31 >> 1) >= v31 )
      {
        v11 = v10 + v31;
        v31 += v10;
      }
      else
      {
        v31 = 0;
        v11 = 0;
      }
      if ( v11 < v9 )
      {
        v31 = v9;
        v11 = v9;
      }
      v12 = (char *)SafeNew20Array_CheckOverflow(v11);
      v13 = *(_DWORD **)(this + 4);
      LOBYTE(v30) = 0;
      v34 = v12;
      v33 = 0;
      v14 = CopyArray20(v13, a2, v12);
      v15 = ModifierEntry_FillN_ReturnEnd(v14, a3, a4);
      CopyArray20(a2, *(_DWORD **)(this + 8), v15);
      v16 = *(_DWORD *)(this + 4);
      v17 = (*(_DWORD *)(this + 8) - v16) / 20 + a3;
      if ( v16 )
        operator delete(*(void **)(this + 4));
      *(_DWORD *)(this + 12) = &v34[20 * v31];
      *(_DWORD *)(this + 8) = &v34[20 * v17];
      *(_DWORD *)(this + 4) = v34;
    }
  }
}

//----- (6594A8A0) --------------------------------------------------------
_DWORD *__thiscall SkillList_Init(_DWORD *this)
{
  *(this + 1) = 0;
  *(this + 2) = 0;
  *(this + 3) = 0;
  *(this + 5) = 0;
  *(this + 6) = 0;
  *(this + 7) = 0;
  SkillList_ResetState((int)this);
  return this;
}

//----- (6594A900) --------------------------------------------------------
char *__thiscall SkillList_RemoveInvalidAndRefund(int this)
{
  int v1; // ebx
  int *v2; // esi
  char *result; // eax
  char *v4; // ecx
  int v5; // edx
  unsigned int v6; // eax
  char *v7; // esi
  int *v8; // ecx
  char *v9; // edx
  int v10; // eax
  int v11; // esi
  int v12; // edi
  int v13; // edx
  _DWORD *v14; // ecx
  unsigned int v15; // edx
  int v16; // eax
  int v17; // eax
  unsigned int v18; // edx
  char *v19; // esi
  int *v20; // ecx
  char *v21; // edx
  int v22; // [esp+8h] [ebp-18h]
  int v24; // [esp+10h] [ebp-10h] BYREF
  int *v25; // [esp+14h] [ebp-Ch]
  int *v26; // [esp+18h] [ebp-8h]
  int v27; // [esp+1Ch] [ebp-4h]

  v1 = this;
  v2 = *(int **)(this + 4);
  result = 0;
  v27 = 0;
  v25 = v2;
  if ( v2 == *(int **)(this + 8) )
  {
    *(_DWORD *)(this + 32) = *(_DWORD *)(this + 32);
  }
  else
  {
    v26 = v2;
    do
    {
      result = ItemStatModifierTable_GetEntry(*v2);
      v4 = result;
      v24 = (int)result;
      if ( result )
      {
        if ( result[74] )
        {
          v2 += 5;
          v26 += 5;
          v25 = v2;
        }
        else
        {
          v10 = *((unsigned __int8 *)v26 + 4);
          v11 = 0;
          v27 += *(_DWORD *)&v4[4 * v10 + 116] - v26[2];
          v12 = 0;
          v13 = 0;
          if ( v10 >= 2 )
          {
            v14 = v4 + 120;
            v15 = ((unsigned int)(v10 - 2) >> 1) + 1;
            v22 = 2 * v15;
            do
            {
              v11 += *(v14 - 1);
              v12 += *v14;
              v14 += 2;
              --v15;
            }
            while ( v15 );
            v4 = (char *)v24;
            v13 = v22;
          }
          v1 = this;
          if ( v13 < v10 )
            v27 += *(_DWORD *)&v4[4 * v13 + 116];
          v16 = *v25;
          v27 += v12 + v11;
          v24 = v16;
          v17 = *(_DWORD *)(this + 20);
          if ( v17 )
            v18 = (*(_DWORD *)(this + 28) - v17) >> 2;
          else
            v18 = 0;
          v19 = *(char **)(this + 24);
          if ( (int)&v19[-v17] >> 2 >= v18 )
          {
            Vector_InsertN(this + 16, v19, 1u, (unsigned int)&v24);
          }
          else
          {
            *(_DWORD *)v19 = v24;
            *(_DWORD *)(this + 24) = v19 + 4;
          }
          v20 = v26;
          v21 = *(char **)(this + 8);
          result = (char *)(v26 + 5);
          if ( v26 + 5 != (int *)v21 )
          {
            do
            {
              *v20 = *(_DWORD *)result;
              v20[1] = *((_DWORD *)result + 1);
              v20[2] = *((_DWORD *)result + 2);
              v20[3] = *((_DWORD *)result + 3);
              v20[4] = *((_DWORD *)result + 4);
              result += 20;
              v20 += 5;
            }
            while ( result != v21 );
          }
          *(_DWORD *)(this + 8) -= 20;
          v2 = v25;
          *(_BYTE *)(this + 40) = 1;
        }
      }
      else
      {
        v5 = *(_DWORD *)(v1 + 20);
        v24 = *v2;
        if ( v5 )
          v6 = (*(_DWORD *)(v1 + 28) - v5) >> 2;
        else
          v6 = 0;
        v7 = *(char **)(v1 + 24);
        if ( (int)&v7[-v5] >> 2 >= v6 )
        {
          Vector_InsertN(v1 + 16, v7, 1u, (unsigned int)&v24);
        }
        else
        {
          *(_DWORD *)v7 = v24;
          *(_DWORD *)(v1 + 24) = v7 + 4;
        }
        v8 = v26;
        v9 = *(char **)(v1 + 8);
        result = (char *)(v26 + 5);
        if ( v26 + 5 != (int *)v9 )
        {
          do
          {
            *v8 = *(_DWORD *)result;
            v8[1] = *((_DWORD *)result + 1);
            v8[2] = *((_DWORD *)result + 2);
            v8[3] = *((_DWORD *)result + 3);
            v8[4] = *((_DWORD *)result + 4);
            result += 20;
            v8 += 5;
          }
          while ( result != v9 );
        }
        *(_DWORD *)(v1 + 8) -= 20;
        v2 = v25;
        *(_BYTE *)(v1 + 40) = 1;
      }
    }
    while ( v2 != *(int **)(v1 + 8) );
    *(_DWORD *)(v1 + 32) += v27;
  }
  return result;
}

//----- (6594AAE0) --------------------------------------------------------
int __thiscall SkillList_ConsumePointsAndLevel(int this, unsigned int *a2, _DWORD *a3)
{
  int v4; // ebx
  int result; // eax
  int v6; // esi
  unsigned int v7; // eax
  int v8; // ecx
  int v9; // ecx
  unsigned int v10; // eax
  char *v11; // edx
  int v12; // [esp+8h] [ebp-8h] BYREF
  unsigned __int8 v13; // [esp+Fh] [ebp-1h] BYREF

  v4 = 0;
  result = (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20;
  if ( !result )
    return result;
  v12 = 0;
  while ( 1 )
  {
    v6 = v12 + *(_DWORD *)(this + 4);
    if ( *(_BYTE *)(v6 + 12) == 1 )
      break;
LABEL_6:
    v8 = *(_DWORD *)(this + 8) - *(_DWORD *)(this + 4);
    v12 += 20;
    result = 1717986919 * v8;
    if ( ++v4 >= (unsigned int)(v8 / 20) )
      return result;
  }
  v7 = *(_DWORD *)(v6 + 8);
  if ( *a2 < v7 )
  {
    *(_DWORD *)(v6 + 8) = v7 - *a2;
    *a2 = 0;
    goto LABEL_6;
  }
  *a2 -= v7;
  *(_DWORD *)(v6 + 8) = ItemStatModifierTable_GetLevelValue(*(_DWORD *)v6, ++*(_BYTE *)(v6 + 4));
  if ( *(_BYTE *)(v6 + 13) )
  {
    v13 = *(_BYTE *)(v6 + 13);
    *(_BYTE *)(v6 + 13) = 0;
    ItemStatEntry_ApplyPct13(v6, &v13);
  }
  if ( *(_BYTE *)(v6 + 14) )
  {
    v13 = *(_BYTE *)(v6 + 14);
    *(_BYTE *)(v6 + 14) = 0;
    ItemStatEntry_ApplyPct14(v6, &v13);
  }
  SkillList_DecrementPendingLevels((_DWORD *)this);
  v9 = a3[1];
  v12 = *(_DWORD *)(*(_DWORD *)(this + 4) + 20 * v4);
  if ( v9 )
    v10 = (a3[3] - v9) >> 2;
  else
    v10 = 0;
  v11 = (char *)a3[2];
  if ( (int)&v11[-v9] >> 2 >= v10 )
  {
    Vector_InsertN((int)a3, v11, 1u, (unsigned int)&v12);
  }
  else
  {
    *(_DWORD *)v11 = v12;
    a3[2] = v11 + 4;
  }
  result = 1717986919 * (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4));
  if ( (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20 )
  {
    result = (int)a2;
    if ( *a2 )
      result = SkillList_ConsumePointsAndLevel(this, a2, a3);
  }
  *(_BYTE *)(this + 40) = 1;
  return result;
}

//----- (6594AC30) --------------------------------------------------------
_DWORD *__thiscall SkillList_InsertAt(_DWORD *this, _DWORD *a2, char *a3, int *a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 20 )
    v6 = (int)&a3[-v5] / 20;
  else
    v6 = 0;
  SkillList_InsertRange((int)this, a3, 1u, a4);
  *a2 = *(this + 1) + 20 * v6;
  return a2;
}

//----- (6594ACA0) --------------------------------------------------------
void __thiscall Packet_ID_SKILLS_read_list_insert(char **this, int *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 20;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 20 >= v4 )
  {
    SkillList_InsertAt(this, &a2, v5, a2);
  }
  else
  {
    ModifierEntry_FillN(v5, 1, a2);
    *(this + 2) = v5 + 20;
  }
}

//----- (6594AD30) --------------------------------------------------------
void __thiscall Packet_ID_SKILLS_read_list(char *this, unsigned int *a2)
{
  unsigned int *v2; // esi
  unsigned int v4; // ebx
  int v5; // [esp+Ch] [ebp-1Ch] BYREF
  char v6[4]; // [esp+10h] [ebp-18h] BYREF
  int v7; // [esp+14h] [ebp-14h] BYREF
  char v8; // [esp+18h] [ebp-10h] BYREF
  char v9; // [esp+19h] [ebp-Fh] BYREF
  char v10[2]; // [esp+1Ah] [ebp-Eh] BYREF
  int v11; // [esp+1Ch] [ebp-Ch]
  char v12[4]; // [esp+20h] [ebp-8h] BYREF
  char v13[4]; // [esp+24h] [ebp-4h] BYREF

  v2 = a2;
  RakNet::BitStream::ReadCompressed(a2, this + 36, 8u, 1);
  RakNet::BitStream::ReadCompressed(v2, this + 37, 8u, 1);
  RakNet::BitStream::ReadCompressed(v2, this + 38, 8u, 1);
  RakNet::BitStream::ReadCompressed(v2, this + 39, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(v2, this + 32);
  v4 = 0;
  a2 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(v2, (char *)&a2);
  v5 = 0;
  v6[0] = 0;
  v7 = 0;
  v11 = 0;
  v8 = 0;
  v9 = 0;
  v10[0] = 0;
  if ( a2 )
  {
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, v13, 0x20u, 1) )
          ByteSwapCopy((int)v13, (int)&v5, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v5, 0x20u, 1);
      }
      RakNet::BitStream::ReadCompressed(v2, v6, 8u, 1);
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, v12, 0x20u, 1) )
          ByteSwapCopy((int)v12, (int)&v7, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v7, 0x20u, 1);
      }
      RakNet::BitStream::ReadCompressed(v2, &v8, 8u, 1);
      RakNet::BitStream::ReadCompressed(v2, &v9, 8u, 1);
      RakNet::BitStream::ReadCompressed(v2, v10, 8u, 1);
      Packet_ID_SKILLS_read_list_insert((char **)this, &v5);
      ++v4;
    }
    while ( v4 < (unsigned int)a2 );
  }
}

//----- (6594AE80) --------------------------------------------------------
int __thiscall SkillList_GetOrAddEntry(int this, int a2)
{
  int v2; // edi
  int result; // eax
  int v5; // ecx
  int v6; // [esp+Ch] [ebp-1Ch] BYREF
  char v7; // [esp+10h] [ebp-18h]
  char *v8; // [esp+14h] [ebp-14h]
  char v9; // [esp+18h] [ebp-10h]
  char v10; // [esp+19h] [ebp-Fh]
  char v11; // [esp+1Ah] [ebp-Eh]
  int v12; // [esp+1Ch] [ebp-Ch]
  char *v13; // [esp+20h] [ebp-8h] BYREF
  unsigned __int8 v14; // [esp+27h] [ebp-1h] BYREF

  v2 = a2;
  result = ItemStatModifier_FindById((_DWORD *)this, a2);
  if ( !result )
  {
    v12 = 0;
    v9 = 0;
    v10 = 0;
    v11 = 0;
    v6 = v2;
    v7 = 0;
    v13 = 0;
    HIBYTE(a2) = 0;
    v14 = 0;
    ItemStatModifierTable_GetBaseValueWithListPct(
      (unsigned __int8 *)this,
      v2,
      0,
      &v13,
      (unsigned __int8 *)&a2 + 3,
      &v14);
    v8 = v13;
    if ( HIBYTE(a2) )
      ItemStatEntry_ApplyPct13((int)&v6, (unsigned __int8 *)&a2 + 3);
    if ( v14 )
      ItemStatEntry_ApplyPct14((int)&v6, &v14);
    Packet_ID_SKILLS_read_list_insert((char **)this, &v6);
    v5 = *(_DWORD *)(this + 4);
    *(_BYTE *)(this + 40) = 1;
    return v5 + 20 * ((*(_DWORD *)(this + 8) - v5) / 20) - 20;
  }
  return result;
}

//----- (6594AF30) --------------------------------------------------------
char __thiscall SkillList_AddEntryIfMissing(int this, int *a2)
{
  if ( !*a2 || (unsigned int)*a2 >= 0x74 || ItemStatModifier_FindById((_DWORD *)this, *a2) )
    return 0;
  Packet_ID_SKILLS_read_list_insert((char **)this, a2);
  *(_BYTE *)(this + 40) = 1;
  return 1;
}

//----- (6594AF70) --------------------------------------------------------
char __thiscall SkillList_MergeFromList(int this, int a2)
{
  int v3; // edi
  unsigned int v4; // eax
  _DWORD *v5; // ebx
  unsigned int v6; // edi
  int v7; // eax
  unsigned __int8 v8; // dl
  unsigned int v10; // [esp+Ch] [ebp-10h]
  int v11; // [esp+10h] [ebp-Ch]
  unsigned int v12; // [esp+14h] [ebp-8h]
  int v13; // [esp+18h] [ebp-4h]

  *(_BYTE *)(this + 40) = 1;
  v3 = *(_DWORD *)(a2 + 4);
  v4 = (*(_DWORD *)(a2 + 8) - v3) / 20;
  v12 = 0;
  if ( v4 )
  {
    v11 = 0;
    do
    {
      if ( v12 < v4 )
        v13 = v3 + v11;
      else
        v13 = 0;
      v5 = *(_DWORD **)(this + 4);
      v10 = *(_DWORD *)v13;
      v6 = 0;
      if ( !((*(_DWORD *)(this + 8) - (int)v5) / 20) )
        goto LABEL_9;
      while ( *v5 != v10 )
      {
        ++v6;
        v5 += 5;
        if ( v6 >= (*(_DWORD *)(this + 8) - *(_DWORD *)(this + 4)) / 20 )
          goto LABEL_9;
      }
      v7 = *(_DWORD *)(this + 4) + 20 * v6;
      if ( v7 )
      {
        v8 = *(_BYTE *)(v13 + 4);
        if ( *(_BYTE *)(v7 + 4) <= v8 )
        {
          *(_BYTE *)(v7 + 4) = v8;
          *(_DWORD *)(v7 + 8) = *(_DWORD *)(v13 + 8);
        }
      }
      else
      {
LABEL_9:
        if ( !v10 || v10 >= 0x74 || ItemStatModifier_FindById((_DWORD *)this, v10) )
          return 0;
        Packet_ID_SKILLS_read_list_insert((char **)this, (int *)v13);
        *(_BYTE *)(this + 40) = 1;
      }
      v3 = *(_DWORD *)(a2 + 4);
      v11 += 20;
      v4 = (*(_DWORD *)(a2 + 8) - v3) / 20;
      ++v12;
    }
    while ( v12 < v4 );
  }
  return 1;
}

//----- (6594B0A0) --------------------------------------------------------
char __thiscall SkillList_QueueLevelIncrease(_DWORD *this, int a2)
{
  int v3; // esi
  char *Entry; // eax

  v3 = ItemStatModifier_FindById(this, a2);
  if ( !v3 )
  {
    if ( !ItemStatModifier_MeetsPrereqs(this, a2) )
      return 0;
    v3 = SkillList_GetOrAddEntry((int)this, a2);
    if ( !v3 )
      return 0;
  }
  if ( *(_BYTE *)(v3 + 12) )
    return 0;
  Entry = ItemStatModifierTable_GetEntry(*(_DWORD *)v3);
  if ( Entry )
  {
    if ( *(_BYTE *)(v3 + 4) >= (unsigned __int8)Entry[9] )
      return 0;
  }
  *(_BYTE *)(v3 + 12) = ItemStatModifier_GetMaxLevel(this) + 1;
  return 1;
}

//----- (6594B410) --------------------------------------------------------
char __cdecl ItemVariant_ComputeScalePair(
        unsigned __int8 a1,
        float a2,
        unsigned __int8 a3,
        float a4,
        float *a5,
        float *a6)
{
  double v6; // st7
  double v7; // st6
  double v8; // st5
  double v9; // st5
  float v11; // [esp+10h] [ebp+Ch]
  float v12; // [esp+14h] [ebp+10h]
  float v13; // [esp+14h] [ebp+10h]
  int v14; // [esp+14h] [ebp+10h]

  v11 = (double)(LOBYTE(a2) - a3) * 0.5 + (double)a3;
  v6 = (double)a1;
  v7 = v11;
  v12 = v6 / v11;
  v8 = v12;
  if ( v12 < 1.0 )
    v9 = 1.0 - v8;
  else
    v9 = v8 - 1.0;
  v13 = v9;
  *(float *)&v14 = v13 * a4;
  if ( v6 <= v7 )
  {
    if ( v6 >= v7 )
    {
      return 0;
    }
    else
    {
      *a6 = 1.0 - *(float *)&v14;
      *a5 = *(float *)&v14 + 1.0;
      return 1;
    }
  }
  else
  {
    *a6 = *(float *)&v14 + 1.0;
    *a5 = 1.0 - *(float *)&v14;
    return 1;
  }
}

//----- (6594B6A0) --------------------------------------------------------
int __thiscall SkillEntry_ApplyPctToByte12(_BYTE *this, int __return_address)
{
  *(this + 12) = (int)((1.0 - (double)__return_address / 100.0) * (double)(unsigned __int8)*(this + 12));
  return 3072;
}

//----- (6594B6F0) --------------------------------------------------------
__int16 __thiscall ItemStatEntry_ScaleField3(_WORD *this, float a2)
{
  __int16 result; // ax

  result = *(this + 3) + (int)((double)(unsigned __int16)*(this + 3) * a2);
  *(this + 3) = result;
  return result;
}

//----- (6594BB70) --------------------------------------------------------
char *__cdecl sub_6594BB70(char *a1, char *a2, char *a3)
{
  char *v3; // edx
  char *result; // eax
  const void *v5; // esi
  void *v6; // edi

  v3 = a1;
  result = a3;
  while ( v3 != a2 )
  {
    v5 = v3;
    v6 = result;
    v3 += 92;
    result += 92;
    qmemcpy(v6, v5, 0x5Cu);
  }
  return result;
}

//----- (6594BC20) --------------------------------------------------------
_BYTE *__cdecl sub_6594BC20(_BYTE *a1, _BYTE *a2, _BYTE *a3)
{
  _BYTE *result; // eax

  for ( result = a1; result != a2; ++result )
    *result = *a3;
  return result;
}

//----- (6594BD70) --------------------------------------------------------
int __cdecl sub_6594BD70(void *Source, int a2, int a3)
{
  if ( a2 - (int)Source > 0 )
    memmove_s((void *const)(a3 - (a2 - (_DWORD)Source)), a2 - (_DWORD)Source, Source, a2 - (_DWORD)Source);
  return a3 - (a2 - (_DWORD)Source);
}

//----- (6594BE20) --------------------------------------------------------
char *__stdcall sub_6594BE20(char *a1, char *a2, char *a3)
{
  return sub_65934000(a1, a2, a3);
}

//----- (6594C1A0) --------------------------------------------------------
char **__thiscall sub_6594C1A0(char **this, char **a2, char *a3, char *a4)
{
  char *v4; // edx
  char *v5; // ebx
  char **v6; // esi
  char *v7; // eax
  const void *v8; // esi
  void *v9; // edi

  v4 = a4;
  v5 = a3;
  v6 = a2;
  *a2 = a3;
  if ( a3 != a4 )
  {
    v7 = *(this + 2);
    if ( a4 != v7 )
    {
      do
      {
        v8 = v4;
        v9 = v5;
        v4 += 92;
        v5 += 92;
        qmemcpy(v9, v8, 0x5Cu);
      }
      while ( v4 != v7 );
      v6 = a2;
    }
    *(this + 2) = v5;
  }
  return v6;
}

//----- (6594C290) --------------------------------------------------------
int __stdcall sub_6594C290(_BYTE *Source, _BYTE *a2, void *Destination)
{
  if ( a2 != Source )
    memmove_s(Destination, a2 - Source, Source, a2 - Source);
  return (int)Destination + a2 - Source;
}

//----- (6594C3E0) --------------------------------------------------------
_BYTE *__stdcall sub_6594C3E0(_BYTE *a1, int a2, _BYTE *a3)
{
  int v3; // eax
  _BYTE *i; // ecx

  v3 = a2;
  for ( i = a1; v3; ++i )
  {
    *i = *a3;
    --v3;
  }
  return &a1[a2];
}

//----- (6594C410) --------------------------------------------------------
unsigned int __thiscall ByteVector_Insert(char **this, char *Source, unsigned int a3, _BYTE *a4)
{
  int v5; // ecx
  unsigned int result; // eax
  _BYTE *v8; // ebx
  unsigned int v9; // ecx
  unsigned int v10; // eax
  char *v11; // eax
  char *v12; // ecx
  char *v13; // ebx
  _BYTE *v14; // eax
  rsize_t v15; // ecx
  _BYTE *v16; // eax
  char *v17; // edi
  int v18; // [esp-4h] [ebp-10h]
  int v19; // [esp+0h] [ebp-Ch]
  unsigned int v20; // [esp+8h] [ebp-4h]
  char *v21; // [esp+18h] [ebp+Ch]

  v5 = (int)*(this + 1);
  if ( v5 )
    result = (unsigned int)&(*(this + 3))[-v5];
  else
    result = 0;
  if ( a3 )
  {
    v8 = *(this + 2);
    if ( v5 - (int)v8 - 1 < a3 )
      Vector_ThrowLengthError(v18, v19);
    v9 = (unsigned int)&v8[a3 - v5];
    if ( result >= v9 )
    {
      HIBYTE(a4) = *a4;
      if ( v8 - Source >= a3 )
      {
        *(this + 2) = (char *)sub_6594C290(&v8[-a3], v8, v8);
        sub_6594BD70(Source, (int)&v8[-a3], (int)v8);
        return (unsigned int)sub_6594BC20(Source, &Source[a3], (_BYTE *)&a4 + 3);
      }
      else
      {
        sub_6594C290(Source, v8, &Source[a3]);
        sub_6594C3E0(*(this + 2), a3 + Source - *(this + 2), (_BYTE *)&a4 + 3);
        *(this + 2) += a3;
        return (unsigned int)sub_6594BC20(Source, &(*(this + 2))[-a3], (_BYTE *)&a4 + 3);
      }
    }
    else
    {
      if ( -1 - (result >> 1) >= result )
      {
        v10 = (result >> 1) + result;
        v20 = v10;
      }
      else
      {
        v20 = 0;
        v10 = 0;
      }
      if ( v10 < v9 )
      {
        v20 = v9;
        v10 = v9;
      }
      v11 = (char *)SafeNewArray_CheckOverflow(v10);
      v12 = *(this + 1);
      v13 = v11;
      v21 = &v11[Source - v12];
      if ( Source != v12 )
        memmove_s(v11, Source - v12, v12, Source - v12);
      v14 = sub_6594C3E0(v21, a3, a4);
      v15 = *(this + 2) - Source;
      if ( v15 )
        memmove_s(v14, v15, Source, v15);
      v16 = *(this + 1);
      v17 = (char *)(*(this + 2) - v16 + a3);
      if ( v16 )
        operator delete(v16);
      *(this + 1) = v13;
      *(this + 3) = &v13[v20];
      *(this + 2) = &v17[(_DWORD)v13];
      return v20;
    }
  }
  return result;
}
// 6594C440: variable 'v18' is possibly undefined
// 6594C440: variable 'v19' is possibly undefined

//----- (6594C5A0) --------------------------------------------------------
char **__thiscall VariantList_Assign(char **this, unsigned int a2)
{
  unsigned int v2; // edi
  _BYTE *v5; // ebx
  unsigned int v6; // ecx
  unsigned int v7; // eax
  char *v8; // edx
  char *v9; // ecx
  char *v10; // [esp-10h] [ebp-1Ch]

  v2 = a2;
  if ( this != (char **)a2 )
  {
    a2 = (*(_DWORD *)(a2 + 8) - *(_DWORD *)(a2 + 4)) / 92;
    if ( !a2 )
    {
      sub_6594C1A0(this, (char **)&a2, *(this + 1), *(this + 2));
      return this;
    }
    v5 = *(this + 1);
    v6 = (*(this + 2) - v5) / 92;
    if ( a2 <= v6 )
    {
      sub_6594BB70(*(char **)(v2 + 4), *(char **)(v2 + 8), *(this + 1));
      *(this + 2) = &(*(this + 1))[92 * ((*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 92)];
      return this;
    }
    if ( v5 )
      v7 = (*(this + 3) - v5) / 92;
    else
      v7 = 0;
    if ( a2 > v7 )
    {
      if ( v5 )
        operator delete(v5);
      if ( !sub_65861620(this, (*(_DWORD *)(v2 + 8) - *(_DWORD *)(v2 + 4)) / 92) )
        return this;
      v8 = *(this + 1);
      v9 = *(char **)(v2 + 4);
    }
    else
    {
      v10 = *(char **)(v2 + 4);
      a2 = (unsigned int)&v10[92 * v6];
      sub_6594BB70(v10, (char *)a2, v5);
      v8 = *(this + 2);
      v9 = (char *)a2;
    }
    *(this + 2) = sub_6594BE20(v9, *(char **)(v2 + 8), v8);
  }
  return this;
}

//----- (6594C6F0) --------------------------------------------------------
void __thiscall sub_6594C6F0(int *this, int *a2)
{
  int *v2; // eax
  int *v3; // edx
  int v4; // edi
  int *v5; // eax
  int *v6; // edx
  int v7; // edi
  int *v8; // eax
  int *v9; // ecx
  int v10; // edx

  if ( this != a2 )
  {
    v2 = a2 + 1;
    v3 = this + 1;
    if ( this + 1 != a2 + 1 )
    {
      v4 = *v3;
      *v3 = *v2;
      *v2 = v4;
    }
    v5 = a2 + 2;
    v6 = this + 2;
    if ( this + 2 != a2 + 2 )
    {
      v7 = *v6;
      *v6 = *v5;
      *v5 = v7;
    }
    v8 = a2 + 3;
    v9 = this + 3;
    if ( v9 != a2 + 3 )
    {
      v10 = *v9;
      *v9 = *v8;
      *v8 = v10;
    }
  }
}

//----- (6594C7B0) --------------------------------------------------------
char __cdecl ItemVariantList_CopyByItemId(unsigned __int16 a1, char **a2)
{
  _DWORD *v2; // ecx

  if ( (unsigned __int16)(a1 - 1) > 0xBBFu )
    return 0;
  v2 = &dword_65ACAC58[4 * a1];
  if ( !((v2[2] - v2[1]) / 92) )
    return 0;
  VariantList_Assign(a2, (unsigned int)v2);
  return 1;
}
// 65ACAC58: using guessed type _DWORD dword_65ACAC58[12038];

//----- (6594C840) --------------------------------------------------------
void sub_6594C840()
{
  char *v0; // esi
  int v1; // edi
  unsigned __int16 v2; // si
  int *v3; // edi
  char *v4; // [esp+10h] [ebp-1Ch] BYREF
  void *v5; // [esp+14h] [ebp-18h]
  int v6; // [esp+18h] [ebp-14h]
  int v7; // [esp+1Ch] [ebp-10h]
  int v8; // [esp+28h] [ebp-4h]

  if ( !byte_65ACAC50 )
  {
    v0 = (char *)&unk_659DD0F8;
    v1 = 159;
    do
    {
      if ( v0 && *(_WORD *)v0 && *(_WORD *)v0 < 0xBC1u && !sub_65934160(g_ItemTemplateById, *(_WORD *)v0) )
        sub_65938680((char **)&dword_65ACAC58[4 * *(unsigned __int16 *)v0], v0);
      v0 += 92;
      --v1;
    }
    while ( v1 );
    v5 = 0;
    v6 = 0;
    v7 = 0;
    v8 = 0;
    v2 = 0;
    v3 = dword_65ACAC58;
    do
    {
      if ( sub_65934160(g_ItemTemplateById, v2) && sub_65938FC0(g_ItemTemplateById, v2, &v4) )
        sub_6594C6F0(v3, (int *)&v4);
      ++v2;
      v3 += 4;
    }
    while ( v2 < 0xBC1u );
    byte_65ACAC50 = 1;
    if ( v5 )
      operator delete(v5);
  }
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];
// 65ACAC50: using guessed type char byte_65ACAC50;
// 65ACAC58: using guessed type _DWORD dword_65ACAC58[12038];

//----- (6594C940) --------------------------------------------------------
char __cdecl ItemTemplate_CopyVariantByIndex(unsigned __int16 a1, unsigned __int8 a2, char *a3)
{
  _DWORD *v3; // ecx
  void *v4; // ebx
  unsigned __int8 v5; // al
  char *v7; // [esp+10h] [ebp-1Ch] BYREF
  void *v8; // [esp+14h] [ebp-18h]
  int v9; // [esp+18h] [ebp-14h]
  int v10; // [esp+1Ch] [ebp-10h]
  int v11; // [esp+28h] [ebp-4h]

  v8 = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  if ( (unsigned __int16)(a1 - 1) > 0xBBFu )
    return 0;
  v3 = &dword_65ACAC58[4 * a1];
  if ( !((v3[2] - v3[1]) / 92) )
    return 0;
  VariantList_Assign(&v7, (unsigned int)v3);
  v4 = v8;
  v5 = a2;
  if ( a2 >= (unsigned int)((v9 - (int)v8) / 92) )
    v5 = 0;
  qmemcpy(a3, (char *)v8 + 92 * v5, 0x5Cu);
  if ( v4 )
    operator delete(v4);
  return 1;
}
// 65ACAC58: using guessed type _DWORD dword_65ACAC58[12038];

//----- (6594CB00) --------------------------------------------------------
char __cdecl ProductionRecipe_BuildFromVariant(_WORD *a1, __int64 a2)
{
  int v2; // ebx
  unsigned __int16 v3; // ax
  int v5; // edi
  __int16 v6; // ax
  char v7; // dl
  __int16 v8; // cx
  int v9; // eax
  unsigned int *v10; // ebx
  unsigned int v11; // eax
  char *v12; // eax
  char v13; // cl
  char v14; // dl
  bool v15; // bl
  char v16; // cl
  char v17; // cl
  char v18; // cl
  char v19; // cl
  unsigned __int8 v20; // cl
  bool v21; // cc
  int v22; // ebx
  char *v23; // esi
  unsigned __int8 *v24; // edi
  double v25; // st7
  unsigned __int16 v26; // [esp+18h] [ebp-68h] BYREF
  char v27; // [esp+1Ah] [ebp-66h]
  char v28; // [esp+29h] [ebp-57h]
  __int16 v29; // [esp+2Ah] [ebp-56h]
  int v30; // [esp+2Ch] [ebp-54h]
  char v31; // [esp+44h] [ebp-3Ch] BYREF
  int v32; // [esp+74h] [ebp-Ch]
  float v33; // [esp+78h] [ebp-8h] BYREF
  int v34; // [esp+7Ch] [ebp-4h]

  v2 = a2;
  v3 = *(_WORD *)a2;
  if ( !*(_WORD *)a2 || v3 >= 0xBC1u || !ItemTemplate_CopyVariantByIndex(v3, *(_BYTE *)(a2 + 2), (char *)&v26) )
    return 0;
  if ( (unsigned __int16)(v26 - 1) > 0xBBFu )
    return 0;
  v5 = g_ItemTemplateById[v26];
  if ( !v5 )
    return 0;
  v6 = *(_WORD *)v5;
  v7 = v27;
  a1[5] = v30;
  v8 = v29;
  a1[2] = v6;
  *((_BYTE *)a1 + 13) = v7;
  LOWORD(v9) = v8;
  if ( !v8 )
    v9 = *(_DWORD *)(v5 + 48);
  a1[3] = v9;
  if ( *(_BYTE *)(v5 + 8) == 2 )
  {
    a1[4] = v8;
  }
  else if ( *(_BYTE *)(v5 + 8) == 22 )
  {
    a1[4] = *(_WORD *)(v5 + 48);
    a1[3] = v8;
  }
  *((_BYTE *)a1 + 12) = v28;
  *((_BYTE *)a1 + 30) = *(_BYTE *)(v2 + 2);
  if ( *(_BYTE *)(v2 + 2) )
    *((_BYTE *)a1 + 29) = 1;
  v10 = (unsigned int *)(v2 + 4);
  v34 = 0;
  v33 = *(float *)&v10;
  do
  {
    v11 = *v10;
    if ( !*v10 )
      goto LABEL_48;
    if ( v11 >= 0x10 )
      goto LABEL_48;
    v12 = (char *)&unk_659E0BA0 + 16 * v11;
    if ( !v12 )
      goto LABEL_48;
    v13 = v12[9];
    v14 = 0;
    v15 = 0;
    if ( v13 && (unsigned __int8)v13 < 0x19u )
    {
      v14 = 1;
      v15 = v13 == *(_BYTE *)(v5 + 8);
    }
    v16 = v12[10];
    if ( v16 )
    {
      if ( (unsigned __int8)v16 < 0x19u )
      {
        v14 = 1;
        if ( v16 == *(_BYTE *)(v5 + 8) )
          v15 = 1;
      }
    }
    v17 = v12[11];
    if ( v17 )
    {
      if ( (unsigned __int8)v17 < 0x19u )
      {
        v14 = 1;
        if ( v17 == *(_BYTE *)(v5 + 8) )
          v15 = 1;
      }
    }
    v18 = v12[12];
    if ( v18 )
    {
      if ( (unsigned __int8)v18 < 0x19u )
      {
        v14 = 1;
        if ( v18 == *(_BYTE *)(v5 + 8) )
          v15 = 1;
      }
    }
    v19 = v12[13];
    if ( v19 && (unsigned __int8)v19 < 0x19u )
    {
      if ( v19 != *(_BYTE *)(v5 + 8) )
        goto LABEL_40;
    }
    else if ( v14 )
    {
LABEL_40:
      if ( !v15 )
        return 0;
    }
    v20 = v12[8];
    if ( *((_BYTE *)a1 + 29) < v20 )
      *((_BYTE *)a1 + 29) = v20;
    switch ( v12[1] )
    {
      case 0:
        *(_DWORD *)(a2 + 36) += *((_DWORD *)v12 + 1);
        break;
      case 1:
        SkillEntry_ApplyPctToByte12(a1, *((_DWORD *)v12 + 1));
        break;
      case 2:
        *((_BYTE *)a1 + 28) += v12[4];
        break;
      case 3:
        *(float *)&v32 = (double)*((int *)v12 + 1) / 100.0;
        ItemStatEntry_ScaleField3(a1, *(float *)&v32);
        a1[4] = a1[3];
        break;
      default:
        break;
    }
LABEL_48:
    v10 = (unsigned int *)(LODWORD(v33) + 4);
    v21 = ++v34 < 4;
    LODWORD(v33) += 4;
  }
  while ( v21 );
  v22 = 0;
  v23 = &v31;
  v24 = (unsigned __int8 *)(a2 + 20);
  do
  {
    if ( *v23 && (unsigned __int8)*v23 < 7u )
    {
      if ( (unsigned __int8)v22 < 4u )
        *((_BYTE *)a1 + (unsigned __int8)v22 + 31) = *v24;
      *(float *)&a2 = 0.0;
      v33 = 0.0;
      ItemVariant_ComputeScalePair(*v24, COERCE_FLOAT(v23[3]), v23[4], 0.25, (float *)&a2, &v33);
      if ( *v23 == 5 )
      {
        if ( v23[1] == 10 )
        {
          v25 = *(float *)&a2;
          LODWORD(a2) = (unsigned __int16)a1[5];
          v32 = (int)(v25 * (double)(int)a2);
          a1[5] = v32;
        }
        else if ( v23[2] == 10 )
        {
          LODWORD(a2) = (unsigned __int16)a1[5];
          v32 = (int)(v33 * (double)(int)a2);
          a1[5] = v32;
        }
      }
    }
    ++v22;
    v24 += 4;
    v23 += 12;
  }
  while ( v22 < 4 );
  return 1;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6594CFF0) --------------------------------------------------------
char __cdecl Item_FormatStatValue(float a1, int a2, char *Buffer, char *a4)
{
  char v4; // bl
  double v5; // st7
  double v6; // st6
  int v8; // [esp-4h] [ebp-8h]
  float v9; // [esp+Ch] [ebp+8h]
  float v10; // [esp+Ch] [ebp+8h]
  float v11; // [esp+Ch] [ebp+8h]

  v4 = 0;
  switch ( LOBYTE(a1) )
  {
    case 0:
    case 2:
    case 3:
    case 0x22:
      v9 = (double)a2 / (double)(unsigned int)g_StatScaleTable[LOBYTE(a1)] * 100.0;
      v5 = v9;
      if ( v9 < 20.0 )
      {
        v4 = 2;
        goto LABEL_7;
      }
      v6 = 80.0;
      goto LABEL_5;
    case 1:
    case 0x2E:
      sprintf(Buffer, "%.1fs", (double)a2 / 1000.0);
      goto LABEL_9;
    case 4:
    case 0x1A:
      if ( a2 < 1000 )
        v4 = 2;
      goto LABEL_45;
    case 5:
    case 6:
      sprintf(Buffer, "%i", a2);
      goto LABEL_9;
    case 0xB:
      v10 = (double)a2 * 0.1000000014901161;
      v5 = v10;
      if ( v10 >= 60.0 )
      {
        v6 = 90.0;
LABEL_5:
        if ( v6 <= v5 )
          v4 = 1;
      }
      else
      {
        v4 = 2;
      }
LABEL_7:
      sprintf(Buffer, "%.1f%%", v5);
      goto LABEL_46;
    case 0xC:
    case 0xD:
    case 0xE:
    case 0xF:
    case 0x10:
    case 0x1D:
      if ( a2 > 1 )
        v4 = 2;
      sprintf(Buffer, "%.1f", (double)a2 / (double)(unsigned int)g_StatScaleTable[LOBYTE(a1)] * 100.0);
      goto LABEL_46;
    case 0x11:
      v11 = (double)a2 / 3000.0 * 100.0;
      if ( v11 < 10.0 )
      {
        v4 = 1;
        sprintf(Buffer, "%.1f%%", v11);
        goto LABEL_46;
      }
      if ( v11 >= 25.0 )
        v4 = 2;
      goto LABEL_16;
    case 0x12:
    case 0x13:
    case 0x14:
    case 0x15:
      if ( a2 >= 100 )
        v4 = a2 >= 400;
      else
        v4 = 2;
LABEL_45:
      sprintf(Buffer, "%i", a2);
      goto LABEL_46;
    case 0x16:
    case 0x18:
    case 0x19:
      v11 = (double)a2 / (double)(unsigned int)g_StatScaleTable[LOBYTE(a1)] * 100.0;
      if ( v11 >= 0.30000001 )
      {
        v4 = v11 >= 10.0;
LABEL_16:
        sprintf(Buffer, "%.1f%%", v11);
      }
      else
      {
        v4 = 2;
        sprintf(Buffer, "%.1f%%", v11);
      }
LABEL_46:
      if ( v4 == 1 )
      {
        strcpy(a4, "00FF0000");
        return 1;
      }
      else if ( v4 == 2 )
      {
        strcpy(a4, "FF000000");
        return 1;
      }
      else
      {
LABEL_9:
        strcpy(a4, "D8EAFF00");
        return 1;
      }
    case 0x17:
      sprintf(Buffer, "%.3fs", (double)a2 / 1000.0);
      goto LABEL_9;
    case 0x1E:
    case 0x20:
    case 0x21:
      if ( a2 > 0 )
        v4 = 2;
      sprintf(Buffer, "%.1f%%", (double)a2 / (double)(unsigned int)g_StatScaleTable[LOBYTE(a1)] * 100.0);
      goto LABEL_46;
    case 0x1F:
      if ( a2 > 0 )
        v4 = 2;
      sprintf(Buffer, "%.1fs", (double)a2 / 1000.0);
      goto LABEL_46;
    case 0x23:
      if ( a2 <= 500 )
      {
        if ( a2 < 200 )
          v4 = 2;
      }
      else
      {
        v4 = 1;
      }
      sprintf(Buffer, "%im", a2 / 100);
      goto LABEL_46;
    case 0x24:
      if ( a2 <= 700 )
        v4 = a2 < 300;
      else
        v4 = 2;
      sprintf(Buffer, "%.1f Seconds", (double)a2 / 1000.0);
      goto LABEL_46;
    case 0x27:
      if ( (unsigned int)a2 < 0x37EF )
      {
        v4 = (unsigned int)a2 <= 0x1BF7;
        v8 = a2;
      }
      else
      {
        v8 = a2;
        v4 = 2;
      }
      sprintf(Buffer, "%ig", v8);
      goto LABEL_46;
    default:
      return 0;
  }
}
// 659E0CA8: using guessed type int g_StatScaleTable[];

//----- (6594D620) --------------------------------------------------------
void __cdecl __noreturn StdVector_ThrowLengthError(int a1, int a2)
{
  _DWORD pExceptionObject[10]; // [esp+4h] [ebp-50h] BYREF
  _BYTE v3[28]; // [esp+2Ch] [ebp-28h] BYREF
  int v4; // [esp+50h] [ebp-4h]

  std::string::string(v3, "vector<T> too long");
  v4 = 0;
  FoMException_Ctor((std::exception *)pExceptionObject, (int)v3);
  pExceptionObject[0] = &off_659BFD28;
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI3_AVlength_error_std__);
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659BFD28: using guessed type void *off_659BFD28;

//----- (6594D6E0) --------------------------------------------------------
void *__cdecl StdVector_Alloc8(unsigned int a1)
{
  unsigned int v1; // ecx
  _DWORD pExceptionObject[3]; // [esp+0h] [ebp-Ch] BYREF

  v1 = a1;
  if ( a1 )
  {
    if ( 0xFFFFFFFF / a1 < 8 )
    {
      a1 = 0;
      std::exception::exception((std::exception *)pExceptionObject, (const char *const *)&a1);
      pExceptionObject[0] = &off_659BFD10;
      CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI2_AVbad_alloc_std__);
    }
  }
  else
  {
    v1 = 0;
  }
  return operator new(8 * v1);
}
// 659A841C: using guessed type _DWORD __thiscall std::exception::exception(std::exception *__hidden this, const char *const *);
// 659BFD10: using guessed type void *off_659BFD10;

//----- (6594D800) --------------------------------------------------------
char __cdecl Item_FormatStatLine(unsigned __int8 a1, int a2, int a3, char *Buffer, char *a5, unsigned __int16 a6)
{
  char result; // al
  int v7; // eax
  int v8; // ecx
  char v9; // bl
  int v10; // eax
  double v11; // st7
  int v12; // [esp+1Ch] [ebp-4h]
  float v13; // [esp+2Ch] [ebp+Ch]
  float v14; // [esp+2Ch] [ebp+Ch]

  if ( !a2 )
    return 0;
  v7 = a1;
  v8 = a2 - a3;
  v9 = 0;
  v12 = a2 - a3;
  switch ( a1 )
  {
    case 0u:
    case 2u:
    case 3u:
    case 0x16u:
    case 0x18u:
    case 0x19u:
    case 0x22u:
      if ( a2 >= 0 )
        v9 = a2 > 0;
      else
        v9 = 2;
      if ( !v8 )
        goto LABEL_12;
      v10 = g_StatScaleTable[a1];
      v11 = (double)v10;
      goto LABEL_9;
    case 1u:
      if ( a2 <= 0 )
        v9 = 2;
      else
        v9 = 1;
      if ( v8 )
        goto LABEL_107;
      goto LABEL_108;
    case 6u:
    case 0x11u:
      if ( a2 >= 0 )
        v9 = 2;
      else
        v9 = 1;
      if ( !v8 )
        goto LABEL_12;
      v10 = g_StatScaleTable[a1];
      v11 = (double)v10;
      goto LABEL_9;
    case 0xBu:
      if ( a2 >= 0 )
        v9 = a2 > 0;
      else
        v9 = 2;
      if ( v8 )
        sprintf(Buffer, "%.1f%% (%+.1f%%)", 0.1000000014901161 * (double)a3, (double)v12 * 0.1000000014901161);
      else
        sprintf(Buffer, "%.1f%%", (double)a2 * 0.1000000014901161);
      goto LABEL_109;
    case 0xCu:
    case 0xDu:
    case 0xEu:
    case 0xFu:
    case 0x10u:
    case 0x1Du:
      if ( ItemTemplateById_Get(g_ItemTemplateById, a6) && ItemTemplate_IsType3or4(g_ItemTemplateById, a6) )
      {
        if ( a2 >= 0 )
          v9 = a2 > 0;
        else
          v9 = 2;
        if ( v12 )
          sprintf(Buffer, "%.1f (%+.1f)", 0.1000000014901161 * (double)a3, (double)v12 * 0.1000000014901161);
        else
          sprintf(Buffer, "%.1f", (double)a2 * 0.1000000014901161);
      }
      else
      {
        if ( a2 >= 0 )
          v9 = 2;
        else
          v9 = 1;
        v7 = a1;
        if ( v12 )
        {
          v10 = g_StatScaleTable[a1];
          v11 = (double)v10;
LABEL_9:
          if ( v10 < 0 )
            v11 = v11 + 4294967300.0;
          v13 = v11;
          sprintf(Buffer, "%.1f%% (%+.1f%%)", 100.0 * ((double)a3 / v13), (double)v12 / v13 * 100.0);
        }
        else
        {
LABEL_12:
          sprintf(Buffer, "%.1f%%", (double)a2 / (double)(unsigned int)g_StatScaleTable[v7] * 100.0);
        }
      }
      goto LABEL_109;
    case 0x12u:
    case 0x13u:
    case 0x14u:
    case 0x15u:
      if ( a2 >= 0 )
        v9 = a2 > 0;
      else
        v9 = 2;
      if ( v8 )
        sprintf(Buffer, "%d (%+d)", a3, a2 - a3);
      else
        sprintf(Buffer, "%d", a2);
      goto LABEL_109;
    case 0x17u:
      if ( a2 <= 0 )
        v9 = 2;
      else
        v9 = 1;
      if ( v8 )
        sprintf(Buffer, "%.3fs (%+.3fs)", (double)a3 / 1000.0, (double)v12 / 1000.0);
      else
        sprintf(Buffer, "%.3fs", (double)a2 / 1000.0);
      goto LABEL_109;
    case 0x1Eu:
    case 0x20u:
    case 0x21u:
      if ( a2 >= 0 )
        v9 = 2;
      else
        v9 = 1;
      if ( v8 )
      {
        v14 = (float)(unsigned int)g_StatScaleTable[a1];
        sprintf(Buffer, "%.1f%% (%+.1f%%)", 100.0 * ((double)a3 / v14), (double)v12 / v14 * 100.0);
      }
      else
      {
        sprintf(Buffer, "%.1f%%", (double)a2 / (double)(unsigned int)g_StatScaleTable[a1] * 100.0);
      }
      goto LABEL_109;
    case 0x1Fu:
      if ( a2 > 0 )
        goto LABEL_105;
      v9 = a2 < 0;
      goto LABEL_106;
    case 0x23u:
      if ( a2 <= 500 )
      {
        if ( a2 < 200 )
          v9 = 2;
      }
      else
      {
        v9 = 1;
      }
      if ( v8 )
        sprintf(Buffer, "%dm (%+dm)", a3 / 100, v8 / 100);
      else
        sprintf(Buffer, "%dm", a2 / 100);
      goto LABEL_109;
    case 0x24u:
      if ( a2 <= 700 )
        v9 = a2 < 300;
      else
        v9 = 2;
      if ( v8 )
        sprintf(Buffer, "%.2f Seconds (%+.2f)", (double)a3 / 1000.0, (double)v12 / 1000.0);
      else
        sprintf(Buffer, "%.2f Seconds", (double)a2 / 1000.0);
      goto LABEL_109;
    case 0x27u:
      if ( v8 )
        sprintf(Buffer, "%ig (%+dg)", a3, v8);
      else
        sprintf(Buffer, "%ig", a2);
      goto LABEL_78;
    case 0x28u:
      if ( a2 <= 0 )
        v9 = 2;
      else
        v9 = 1;
      if ( v8 )
        goto LABEL_89;
      goto LABEL_95;
    case 0x29u:
      if ( a2 <= 0 )
        v9 = 2;
      else
        v9 = 1;
      if ( v8 )
LABEL_89:
        sprintf(Buffer, "%.1f (%+.1f)", (double)a3 / 1000.0, (double)v12 / 1000.0);
      else
LABEL_95:
        sprintf(Buffer, "%.1f", (double)a2 / 1000.0);
      goto LABEL_109;
    case 0x2Au:
    case 0x2Bu:
      sprintf(Buffer, "%s", "On");
      goto LABEL_78;
    case 0x2Cu:
      if ( a2 <= 0 )
        v9 = 2;
      else
        v9 = 1;
      if ( v8 )
        sprintf(Buffer, "%im (%+dm)", a3 / 100, v8 / 100);
      else
        sprintf(Buffer, "%im", a2 / 100);
      goto LABEL_109;
    case 0x2Du:
      if ( a2 <= 0 )
LABEL_105:
        v9 = 2;
      else
        v9 = 1;
LABEL_106:
      if ( v8 )
        goto LABEL_107;
      goto LABEL_108;
    case 0x2Eu:
      if ( a2 <= 0 )
        v9 = 2;
      else
        v9 = 1;
      if ( v8 )
LABEL_107:
        sprintf(Buffer, "%.1fs (%+.1fs)", (double)a3 / 1000.0, (double)v12 / 1000.0);
      else
LABEL_108:
        sprintf(Buffer, "%.1fs", (double)a2 / 1000.0);
LABEL_109:
      if ( v9 == 1 )
      {
        strcpy(a5, "00FF0000");
        result = 1;
      }
      else if ( v9 == 2 )
      {
        strcpy(a5, "FF000000");
        result = 1;
      }
      else
      {
LABEL_78:
        strcpy(a5, "D8EAFF00");
        result = 1;
      }
      break;
    default:
      result = 0;
      break;
  }
  return result;
}
// 6594D8DB: conditional instruction was optimized away because %arg_4_1.4<0
// 6594D939: conditional instruction was optimized away because %arg_4_1.4<0
// 6594DA29: conditional instruction was optimized away because %arg_4_1.4>=1
// 6594DBA4: conditional instruction was optimized away because %arg_4_1.4>=1
// 6594DBD0: conditional instruction was optimized away because %arg_4_1.4>=1
// 6594DCD3: conditional instruction was optimized away because %arg_4_1.4<0
// 6594DD31: conditional instruction was optimized away because %arg_4_1.4<0
// 6594DD8B: conditional instruction was optimized away because %arg_4_1.4<0
// 6594DE0F: conditional instruction was optimized away because %arg_4_1.4<0
// 6594DE6F: conditional instruction was optimized away because %arg_4_1.4<0
// 659E0CA8: using guessed type int g_StatScaleTable[];
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6594E090) --------------------------------------------------------
_DWORD *__cdecl StatEntry_FillRange(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; result += 2 )
  {
    *result = *a3;
    result[1] = a3[1];
  }
  return result;
}

//----- (6594E120) --------------------------------------------------------
_DWORD *__cdecl StatEntry_CopyRange(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // ecx
  _DWORD *result; // eax

  v3 = a1;
  for ( result = a3; v3 != a2; result += 2 )
  {
    if ( result )
    {
      *result = *v3;
      result[1] = v3[1];
    }
    v3 += 2;
  }
  return result;
}

//----- (6594E1E0) --------------------------------------------------------
_DWORD *__cdecl StatEntry_MoveBackward(int a1, int a2, _DWORD *a3)
{
  int v3; // ecx
  _DWORD *result; // eax
  int v5; // esi

  v3 = a2;
  for ( result = a3; v3 != a1; result[1] = *(_DWORD *)(v3 + 4) )
  {
    v5 = *(_DWORD *)(v3 - 8);
    v3 -= 8;
    result -= 2;
    *result = v5;
  }
  return result;
}

//----- (6594E210) --------------------------------------------------------
void __cdecl StatEntry_FillN(_DWORD *a1, int a2, _DWORD *a3)
{
  int i; // ecx

  for ( i = a2; i; a1 += 2 )
  {
    if ( a1 )
    {
      *a1 = *a3;
      a1[1] = a3[1];
    }
    --i;
  }
}

//----- (6594E300) --------------------------------------------------------
_DWORD *__stdcall StatEntry_FillN_ReturnEnd(_DWORD *a1, int a2, _DWORD *a3)
{
  StatEntry_FillN(a1, a2, a3);
  return &a1[2 * a2];
}

//----- (6594E3B0) --------------------------------------------------------
_DWORD *__stdcall StatEntry_CopyRange2(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return StatEntry_CopyRange(a1, a2, a3);
}

//----- (6594E410) --------------------------------------------------------
void __thiscall ItemStatList_InsertEntries(int this, char *a2, unsigned int a3, int *a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  char *v7; // edi
  int v8; // eax
  unsigned int v9; // ecx
  char *v10; // edi
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  int v13; // eax
  int v14; // ebx
  int v15; // edx
  void *v16; // edx
  char *v17; // ebx
  _DWORD *v18; // [esp-20h] [ebp-4Ch]
  _DWORD *v19; // [esp-Ch] [ebp-38h]
  int v20; // [esp-8h] [ebp-34h]
  int v21[4]; // [esp+0h] [ebp-2Ch] BYREF
  int v22; // [esp+10h] [ebp-1Ch] BYREF
  void *v23; // [esp+14h] [ebp-18h]
  unsigned int v24; // [esp+18h] [ebp-14h]
  int *v25; // [esp+1Ch] [ebp-10h]
  int v26; // [esp+28h] [ebp-4h]

  v25 = v21;
  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 3;
  else
    v6 = 0;
  if ( a3 )
  {
    v7 = *(char **)(this + 8);
    v8 = (int)&v7[-v5] >> 3;
    if ( 0x1FFFFFFF - v8 < a3 )
      StdVector_ThrowLengthError(v21[0], v21[1]);
    if ( v6 >= v8 + a3 )
    {
      if ( (v7 - a2) >> 3 >= a3 )
      {
        v16 = (void *)a4[1];
        v17 = &v7[-8 * a3];
        v22 = *a4;
        v23 = v16;
        *(_DWORD *)(this + 8) = StatEntry_CopyRange2(v17, v7, v7);
        StatEntry_MoveBackward((int)a2, (int)v17, v7);
        StatEntry_FillRange(a2, &a2[8 * a3], &v22);
      }
      else
      {
        v15 = *a4;
        v23 = (void *)a4[1];
        v22 = v15;
        StatEntry_CopyRange2(a2, v7, &a2[8 * a3]);
        v20 = a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 3);
        v19 = *(_DWORD **)(this + 8);
        v26 = 2;
        StatEntry_FillN_ReturnEnd(v19, v20, &v22);
        *(_DWORD *)(this + 8) += 8 * a3;
        StatEntry_FillRange(a2, (_DWORD *)(*(_DWORD *)(this + 8) - 8 * a3), &v22);
      }
    }
    else
    {
      if ( 0x1FFFFFFF - (v6 >> 1) >= v6 )
      {
        v9 = (v6 >> 1) + v6;
        v24 = v9;
      }
      else
      {
        v24 = 0;
        v9 = 0;
      }
      if ( v9 < v8 + a3 )
      {
        v24 = v8 + a3;
        v9 = v8 + a3;
      }
      v10 = (char *)StdVector_Alloc8(v9);
      v18 = *(_DWORD **)(this + 4);
      v23 = v10;
      v26 = 0;
      v11 = StatEntry_CopyRange(v18, a2, v10);
      v12 = StatEntry_FillN_ReturnEnd(v11, a3, a4);
      StatEntry_CopyRange(a2, *(_DWORD **)(this + 8), v12);
      v13 = *(_DWORD *)(this + 4);
      v14 = ((*(_DWORD *)(this + 8) - v13) >> 3) + a3;
      if ( v13 )
        operator delete(*(void **)(this + 4));
      *(_DWORD *)(this + 12) = &v10[8 * v24];
      *(_DWORD *)(this + 8) = &v10[8 * v14];
      *(_DWORD *)(this + 4) = v10;
    }
  }
}

//----- (6594E690) --------------------------------------------------------
void __thiscall ItemStatList_PushEntry(char **this, int *a2)
{
  int v3; // ecx
  unsigned int v4; // eax
  char *v5; // edi

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] >> 3;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] >> 3 >= v4 )
  {
    ItemStatList_InsertEntries((int)this, v5, 1u, a2);
  }
  else
  {
    StatEntry_FillN(v5, 1, a2);
    *(this + 2) = v5 + 8;
  }
}

//----- (6594E700) --------------------------------------------------------
void ItemBaseStatTable_Init()
{
  int *v0; // esi
  int v1; // edi
  unsigned __int16 v2; // ax

  if ( !byte_65AD7270 )
  {
    v0 = (int *)&unk_659E0E90;
    v1 = 411;
    do
    {
      v2 = *(_WORD *)v0;
      if ( (unsigned __int16)(*(_WORD *)v0 - 1) <= 0xBBFu )
      {
        if ( *((_BYTE *)v0 + 2) == 34 )
          ItemStatList_InsertEntries((int)&unk_65AD7278 + 16 * v2, (char *)g_ItemBaseStatListBeginById[4 * v2], 1u, v0);
        else
          ItemStatList_PushEntry((char **)&unk_65AD7278 + 4 * v2, v0);
      }
      v0 += 2;
      --v1;
    }
    while ( v1 );
    byte_65AD7270 = 1;
  }
}
// 65AD7270: using guessed type char byte_65AD7270;
// 65AD727C: using guessed type int g_ItemBaseStatListBeginById[];

//----- (6594E770) --------------------------------------------------------
void __cdecl ItemBaseStatList_Copy(unsigned __int16 a1, char **a2)
{
  int v2; // edi
  int *v3; // esi

  if ( (unsigned __int16)(a1 - 1) <= 0xBBFu )
  {
    v2 = 4 * a1;
    v3 = (int *)g_ItemBaseStatListBeginById[v2];
    if ( v3 != (int *)g_ItemBaseStatListEndById[v2] )
    {
      do
      {
        ItemStatList_PushEntry(a2, v3);
        v3 += 2;
      }
      while ( v3 != (int *)g_ItemBaseStatListEndById[4 * a1] );
    }
  }
}
// 65AD727C: using guessed type int g_ItemBaseStatListBeginById[];
// 65AD7280: using guessed type int g_ItemBaseStatListEndById[415];

//----- (6594E7C0) --------------------------------------------------------
char *__thiscall ItemStatList_AddOrAccumulate(char **this, int a2)
{
  int v2; // ebx
  int v3; // edx
  _BYTE *v6; // edi
  unsigned int v7; // eax
  unsigned int v8; // ecx
  int v9; // ecx
  int v10[2]; // [esp+8h] [ebp-8h] BYREF

  v2 = a2;
  v3 = *(_DWORD *)(a2 + 4);
  if ( !v3 )
    return 0;
  v6 = *(this + 1);
  v7 = (*(this + 2) - v6) >> 3;
  v8 = 0;
  if ( v7 )
  {
    while ( *v6 != *(_BYTE *)(a2 + 2) )
    {
      ++v8;
      v6 += 8;
      if ( v8 >= v7 )
      {
        v2 = a2;
        goto LABEL_7;
      }
    }
    v9 = 8 * v8;
    *(_DWORD *)&(*(this + 1))[v9 + 4] += v3;
    return &(*(this + 1))[v9];
  }
  else
  {
LABEL_7:
    LOBYTE(v10[0]) = *(_BYTE *)(v2 + 2);
    v10[1] = v3;
    sub_65938710(this, v10);
    return &(*(this + 1))[8 * ((*(this + 2) - *(this + 1)) >> 3) - 8];
  }
}

//----- (6594E850) --------------------------------------------------------
char *__cdecl Item_AppendBaseStatsFromTable(char *a1, char **a2)
{
  char *result; // eax
  int v3; // edi
  int v4; // esi

  result = a1;
  if ( (unsigned __int16)((_WORD)a1 - 1) <= 0xBBFu )
  {
    v3 = 4 * (unsigned __int16)a1;
    v4 = g_ItemBaseStatListBeginById[v3];
    if ( v4 != g_ItemBaseStatListEndById[v3] )
    {
      do
      {
        result = ItemStatList_AddOrAccumulate(a2, v4);
        v4 += 8;
      }
      while ( v4 != g_ItemBaseStatListEndById[4 * (unsigned __int16)a1] );
    }
  }
  return result;
}
// 65AD727C: using guessed type int g_ItemBaseStatListBeginById[];
// 65AD7280: using guessed type int g_ItemBaseStatListEndById[415];

//----- (6594E8A0) --------------------------------------------------------
void __cdecl Item_CollectStatsForTooltip(int __return_address, _DWORD *a2, char **a3)
{
  int v3; // ebx
  unsigned int v4; // esi
  int *v5; // edx
  unsigned int v6; // ecx
  double v7; // st7
  int *v8; // edi
  _DWORD *v9; // eax
  float v10; // [esp+0h] [ebp-48h]
  char *v11; // [esp+14h] [ebp-34h] BYREF
  void *v12; // [esp+18h] [ebp-30h]
  void *v13; // [esp+1Ch] [ebp-2Ch]
  int v14; // [esp+20h] [ebp-28h]
  int v15; // [esp+24h] [ebp-24h] BYREF
  void *v16; // [esp+28h] [ebp-20h]
  void *v17; // [esp+2Ch] [ebp-1Ch]
  int v18; // [esp+30h] [ebp-18h]
  unsigned int v19; // [esp+34h] [ebp-14h]
  float QualityScale; // [esp+38h] [ebp-10h]
  int v21; // [esp+44h] [ebp-4h]

  v3 = *(unsigned __int16 *)(__return_address + 4);
  if ( (unsigned __int16)(v3 - 1) <= 0xBBFu )
  {
    v4 = 0;
    v12 = 0;
    v13 = 0;
    v14 = 0;
    v21 = 0;
    if ( ItemTemplate_GetType(g_ItemTemplateById, v3) == 5 )
      Item_AddArmorBaseStats(v3, &v11);
    else
      Item_AppendBaseStatsFromTable((char *)v3, &v11);
    v16 = 0;
    v17 = 0;
    v18 = 0;
    LOBYTE(v21) = 1;
    Item_CollectStatModifiers(v3, &v15);
    LOBYTE(v19) = *(_BYTE *)(__return_address + 13);
    QualityScale = Item_GetQualityScale(v3, v19);
    v5 = (int *)v12;
    v6 = 0;
    v19 = 0;
    if ( ((_BYTE *)v13 - (_BYTE *)v12) >> 3 )
    {
      v7 = QualityScale;
      do
      {
        v8 = &v5[2 * v6];
        if ( v8 )
        {
          if ( v7 < 1.0 && *(_BYTE *)v8 == 39 )
          {
            v10 = v7;
            ItemStatEntry_ScaleByFloatCeil(&v5[2 * v6], v10);
          }
          v9 = v16;
          if ( ((_BYTE *)v17 - (_BYTE *)v16) >> 2 )
          {
            do
            {
              ItemStatEntry_ApplyModifier(a2, v3, v8, v9[v4]);
              v9 = v16;
              ++v4;
            }
            while ( v4 < ((_BYTE *)v17 - (_BYTE *)v16) >> 2 );
          }
          Item_ApplyQualityAndVariantToStat(__return_address, (char *)v8);
          ItemStatList_AddOrAccumulate2(a3, v8);
          v7 = QualityScale;
          v5 = (int *)v12;
          v6 = v19;
          v4 = 0;
        }
        v19 = ++v6;
      }
      while ( v6 < ((_BYTE *)v13 - (_BYTE *)v5) >> 3 );
    }
    if ( v16 )
    {
      operator delete(v16);
      v5 = (int *)v12;
    }
    v16 = 0;
    v17 = 0;
    v18 = 0;
    if ( v5 )
      operator delete(v5);
  }
}
// 6594E96B: conditional instruction was optimized away because eax.4!=0
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6594EBE0) --------------------------------------------------------
char __cdecl Item_AppendBaseStatsByType(char *a1, char **a2)
{
  char result; // al

  result = (_BYTE)a1 - 1;
  if ( (unsigned __int16)((_WORD)a1 - 1) <= 0xBBFu )
  {
    if ( ItemTemplate_GetType(g_ItemTemplateById, (unsigned __int16)a1) == 5 )
      return Item_AddArmorBaseStats((unsigned __int16)a1, a2);
    else
      return (unsigned __int8)Item_AppendBaseStatsFromTable(a1, a2);
  }
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6594EC30) --------------------------------------------------------
void __cdecl Item_CollectResistanceAmpStats(
        char **__saved_registers,
        int __return_address,
        _DWORD *a3,
        unsigned __int8 a4)
{
  unsigned int v4; // esi
  _DWORD *v5; // edi
  _DWORD *v6; // eax
  int v7; // [esp+18h] [ebp-30h] BYREF
  void *v8; // [esp+1Ch] [ebp-2Ch]
  int v9; // [esp+20h] [ebp-28h]
  void *v10; // [esp+24h] [ebp-24h]
  int v11; // [esp+28h] [ebp-20h] BYREF
  int v12; // [esp+2Ch] [ebp-1Ch]
  float QualityScale; // [esp+30h] [ebp-18h]
  float v14; // [esp+34h] [ebp-14h]
  float v15; // [esp+38h] [ebp-10h]
  int v16; // [esp+44h] [ebp-4h]

  if ( *(_WORD *)(__return_address + 4) == 104 )
  {
    v15 = (double)a4 * 0.009999999776482582;
    if ( v15 >= 0.0 )
    {
      if ( v15 > 1.0 )
        v15 = 1.0;
    }
    else
    {
      v15 = 0.0;
    }
    LOBYTE(v14) = *(_BYTE *)(__return_address + 13);
    QualityScale = Item_GetQualityScale(0x68u, LOBYTE(v14));
    v4 = 0;
    v8 = 0;
    v9 = 0;
    v10 = 0;
    v16 = 0;
    Item_CollectStatModifiers(0x68u, &v7);
    LOBYTE(v11) = 0;
    v12 = 0;
    if ( g_ResistanceAmpStatListBegin != g_ResistanceAmpStatListEnd )
    {
      v5 = (_DWORD *)(g_ResistanceAmpStatListBegin + 4);
      do
      {
        v6 = v8;
        LOBYTE(v11) = *((_BYTE *)v5 - 2);
        v12 = *v5;
        if ( (v9 - (int)v8) >> 2 )
        {
          do
          {
            ItemStatEntry_ApplyModifier(a3, 104, &v11, v6[v4]);
            v6 = v8;
            ++v4;
          }
          while ( v4 < (v9 - (int)v8) >> 2 );
        }
        Item_ApplyQualityAndVariantToStat(__return_address, (char *)&v11);
        if ( (_BYTE)v11 == 18 )
        {
          v14 = (double)v12 * v15;
          v14 = ceil(v14);
          v12 = (int)v14;
        }
        else if ( (_BYTE)v11 == 19 )
        {
          v14 = 1.0 - v15;
          v14 = v14 * (double)v12;
          v14 = ceil(v14);
          v12 = (int)v14;
        }
        else if ( QualityScale < 1.0 && (_BYTE)v11 == 39 )
        {
          v14 = QualityScale * (double)v12;
          v14 = ceil(v14);
          v12 = (int)v14;
        }
        ItemStatList_AddOrAccumulate2(__saved_registers, &v11);
        v5 += 2;
        v4 = 0;
      }
      while ( v5 - 1 != (_DWORD *)g_ResistanceAmpStatListEnd );
    }
    if ( v8 )
      operator delete(v8);
  }
}
// 65AD78FC: using guessed type int g_ResistanceAmpStatListBegin;
// 65AD7900: using guessed type int g_ResistanceAmpStatListEnd;

//----- (6594EE40) --------------------------------------------------------
void __cdecl Item_CollectStatById(int __return_address, _DWORD *a2, char **a3, char a4)
{
  int v4; // ebx
  int *v5; // esi
  unsigned int v6; // ecx
  double v7; // st7
  int *v8; // edi
  _DWORD *v9; // eax
  unsigned int i; // esi
  float v11; // [esp-4h] [ebp-48h]
  char *v12; // [esp+10h] [ebp-34h] BYREF
  void *v13; // [esp+14h] [ebp-30h]
  void *v14; // [esp+18h] [ebp-2Ch]
  int v15; // [esp+1Ch] [ebp-28h]
  int v16; // [esp+20h] [ebp-24h] BYREF
  void *v17; // [esp+24h] [ebp-20h]
  void *v18; // [esp+28h] [ebp-1Ch]
  int v19; // [esp+2Ch] [ebp-18h]
  unsigned int v20; // [esp+30h] [ebp-14h]
  float QualityScale; // [esp+34h] [ebp-10h]
  int v22; // [esp+40h] [ebp-4h]

  v4 = *(unsigned __int16 *)(__return_address + 4);
  if ( (unsigned __int16)(v4 - 1) <= 0xBBFu )
  {
    v13 = 0;
    v14 = 0;
    v15 = 0;
    v22 = 0;
    if ( ItemTemplate_GetType(g_ItemTemplateById, v4) == 5 )
      Item_AddArmorBaseStats(v4, &v12);
    else
      Item_AppendBaseStatsFromTable((char *)v4, &v12);
    v17 = 0;
    v18 = 0;
    v19 = 0;
    LOBYTE(v22) = 1;
    Item_CollectStatModifiers(v4, &v16);
    LOBYTE(v20) = *(_BYTE *)(__return_address + 13);
    QualityScale = Item_GetQualityScale(v4, v20);
    v5 = (int *)v13;
    v6 = 0;
    v20 = 0;
    if ( ((_BYTE *)v14 - (_BYTE *)v13) >> 3 )
    {
      v7 = QualityScale;
      do
      {
        v8 = &v5[2 * v6];
        if ( v8 && *(_BYTE *)v8 == a4 )
        {
          if ( v7 < 1.0 && *(_BYTE *)v8 == 39 )
          {
            v11 = v7;
            ItemStatEntry_ScaleByFloatCeil(&v5[2 * v6], v11);
          }
          v9 = v17;
          for ( i = 0; i < ((_BYTE *)v18 - (_BYTE *)v17) >> 2; ++i )
          {
            ItemStatEntry_ApplyModifier(a2, v4, v8, v9[i]);
            v9 = v17;
          }
          Item_ApplyQualityAndVariantToStat(__return_address, (char *)v8);
          ItemStatList_AddOrAccumulate2(a3, v8);
          v7 = QualityScale;
          v5 = (int *)v13;
          v6 = v20;
        }
        v20 = ++v6;
      }
      while ( v6 < ((_BYTE *)v14 - (_BYTE *)v5) >> 3 );
    }
    if ( v17 )
    {
      operator delete(v17);
      v5 = (int *)v13;
    }
    v17 = 0;
    v18 = 0;
    v19 = 0;
    if ( v5 )
      operator delete(v5);
  }
}
// 6594EF0B: conditional instruction was optimized away because eax.4!=0
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6594EFE0) --------------------------------------------------------
void __cdecl Item_CollectStatList(int a1, _DWORD *a2, char **a3)
{
  unsigned __int16 v3; // di
  unsigned int v4; // esi
  int v5; // eax
  int v6; // ebx
  int *v7; // edi
  _DWORD *v8; // eax
  int v9; // [esp+10h] [ebp-24h] BYREF
  void *v10; // [esp+14h] [ebp-20h]
  int v11; // [esp+18h] [ebp-1Ch]
  int v12; // [esp+1Ch] [ebp-18h]
  int v13; // [esp+20h] [ebp-14h]
  int i; // [esp+24h] [ebp-10h]
  int v15; // [esp+30h] [ebp-4h]

  v3 = *(_WORD *)(a1 + 4);
  v13 = v3;
  if ( (unsigned __int16)(v3 - 1) <= 0xBBFu )
  {
    LOBYTE(i) = *(_BYTE *)(a1 + 13);
    Item_GetQualityScale(v3, i);
    v4 = 0;
    v10 = 0;
    v11 = 0;
    v12 = 0;
    v15 = 0;
    Item_CollectStatModifiers(v3, &v9);
    v5 = 16 * v3;
    v6 = *(int *)((char *)g_ItemBaseStatListBeginById + v5);
    for ( i = v5; v6 != *(int *)((char *)g_ItemBaseStatListEndById + v5); v6 += 8 )
    {
      switch ( *(_BYTE *)(v6 + 2) )
      {
        case 0xB:
        case 0x11:
        case 0x12:
        case 0x13:
        case 0x14:
        case 0x15:
        case 0x23:
          v7 = (int *)ItemStatList_AddOrAccumulate(a3, v6);
          v8 = v10;
          if ( (v11 - (int)v10) >> 2 )
          {
            do
            {
              ItemStatEntry_ApplyModifier(a2, v13, v7, v8[v4]);
              v8 = v10;
              ++v4;
            }
            while ( v4 < (v11 - (int)v10) >> 2 );
          }
          Item_ApplyQualityAndVariantToStat(a1, (char *)v7);
          v5 = i;
          v4 = 0;
          break;
        default:
          continue;
      }
    }
    if ( v10 )
      operator delete(v10);
  }
}
// 65AD727C: using guessed type int g_ItemBaseStatListBeginById[];
// 65AD7280: using guessed type int g_ItemBaseStatListEndById[415];

//----- (6594F180) --------------------------------------------------------
_DWORD *__thiscall Log_Init(_DWORD *this)
{
  *this = &off_659E1C68;
  *(this + 1) = 0;
  std::string::string(this + 2, "default.log");
  std::string::string(this + 9);
  return this;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659E1C68: using guessed type void *off_659E1C68;

//----- (6594F1F0) --------------------------------------------------------
bool __thiscall Log_Open(_DWORD *this, int a2)
{
  _DWORD *v3; // edi
  const char *v4; // eax
  FILE *v5; // eax

  v3 = this + 2;
  std::string::operator=(this + 2, a2);
  v4 = (const char *)std::string::c_str(v3);
  v5 = fopen(v4, "a");
  *(this + 1) = v5;
  return v5 != 0;
}
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (6594F470) --------------------------------------------------------
void __thiscall Log_Write(FILE **this, const char *a2, int a3, char a4)
{
  struct tm *v5; // edi
  const char *v6; // eax
  FILE *v7; // eax
  bool v8; // bl
  int v9; // edi
  const char *v10; // eax
  const char *v11; // eax
  const char *v12; // [esp-4h] [ebp-E0h]
  _BYTE v13[28]; // [esp+10h] [ebp-CCh] BYREF
  __time64_t Time; // [esp+2Ch] [ebp-B0h] BYREF
  const char *v15; // [esp+34h] [ebp-A8h]
  int v16; // [esp+38h] [ebp-A4h]
  char Buffer[80]; // [esp+3Ch] [ebp-A0h] BYREF
  char v18[64]; // [esp+8Ch] [ebp-50h] BYREF
  int v19; // [esp+D8h] [ebp-4h]

  v15 = a2;
  v16 = a3;
  _time64(&Time);
  v5 = _localtime64(&Time);
  strftime(Buffer, 0x50u, "%y/%m/%d %H:%M:%S", v5);
  strftime(v18, 0x40u, "log/%y_%m_%d.log", v5);
  if ( *(this + 1) && !strcmp((const char *)std::string::c_str(this + 2), v18) )
    goto LABEL_6;
  if ( *(this + 1) )
  {
    fclose(*(this + 1));
    *(this + 1) = 0;
  }
  std::string::string(v13, v18);
  v19 = 1;
  std::string::operator=(this + 2, v13);
  v6 = (const char *)std::string::c_str(this + 2);
  v7 = fopen(v6, "a");
  *(this + 1) = v7;
  v8 = v7 == 0;
  v19 = -1;
  std::string::~string(v13);
  if ( !v8 )
  {
LABEL_6:
    if ( a4 )
    {
      v9 = v16;
      v10 = (const char *)std::string::data(v16);
      fprintf(*(this + 1), "%s\n", v10);
    }
    else
    {
      v11 = (const char *)std::string::data(v16);
      fprintf(*(this + 1), "%s [%s]: %s\n", Buffer, v15, v11);
      v9 = v16;
    }
    fflush(*(this + 1));
    v12 = (const char *)std::string::data(v9);
    if ( a4 )
      printf("%s\n", v12);
    else
      printf("[%s]: %s\n", v15, v12);
  }
}
// 659A81D4: using guessed type int __thiscall std::string::data(_DWORD);
// 659A829C: using guessed type int __thiscall std::string::operator=(_DWORD, _DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);

//----- (6594F6B0) --------------------------------------------------------
void __cdecl sub_6594F6B0(int a1)
{
  if ( dword_65AE2E90 )
    Log_Write((FILE **)dword_65AE2E90, "INFO", a1, 0);
}
// 65AE2E90: using guessed type int dword_65AE2E90;

//----- (6594F710) --------------------------------------------------------
void __cdecl Log_WriteErrorIfEnabled(int a1)
{
  if ( dword_65AE2E90 )
    Log_Write((FILE **)dword_65AE2E90, "ERROR", a1, 0);
}
// 65AE2E90: using guessed type int dword_65AE2E90;

//----- (6594F960) --------------------------------------------------------
const char *__cdecl Color_GetARGBHexByCode(char a1)
{
  if ( a1 != 1 )
  {
    if ( a1 == 2 )
      return "00FF0000";
    if ( a1 == 3 )
      return "00B2FF00";
  }
  return "FF000000";
}

//----- (6594F990) --------------------------------------------------------
char *__cdecl sub_6594F990(unsigned __int16 a1)
{
  if ( a1 < 0xEu )
    return (char *)&unk_659E1D18 + 12 * a1;
  else
    return 0;
}

//----- (659500C0) --------------------------------------------------------
bool __stdcall sub_659500C0(int a1, char a2)
{
  int v2; // eax

  v2 = sub_65950030(a1);
  return v2 && ((1 << a2) & *(_DWORD *)(v2 + 4)) != 0;
}
// 65950030: using guessed type int __stdcall sub_65950030(_DWORD);

//----- (65950D30) --------------------------------------------------------
char *__thiscall sub_65950D30(int *this, char *a2)
{
  char *v3; // esi
  int v4; // ebx
  char *result; // eax
  int v6; // edi
  char *v7; // [esp-Ch] [ebp-24h]
  char v9[4]; // [esp+10h] [ebp-8h] BYREF
  int v10; // [esp+14h] [ebp-4h] BYREF

  v10 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v10, (int)v9, 4u);
    v7 = v9;
  }
  else
  {
    v7 = (char *)&v10;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v7, 0x20u, 1);
  a2 = (char *)*(this + 1);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v9, 4u);
    BitStream_WriteBitsCompressed(v3, v9, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*(this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v9, 4u);
    BitStream_WriteBitsCompressed(v3, v9, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*(this + 3);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v9, 4u);
    BitStream_WriteBitsCompressed(v3, v9, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*(this + 4);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v9, 4u);
    BitStream_WriteBitsCompressed(v3, v9, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*(this + 5);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v9, 4u);
    BitStream_WriteBitsCompressed(v3, v9, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  LOBYTE(a2) = *((_BYTE *)this + 32) - *((_BYTE *)this + 28);
  LOBYTE(v4) = (_BYTE)a2;
  result = BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  if ( (_BYTE)v4 )
  {
    v6 = 0;
    v4 = (unsigned __int8)v4;
    do
    {
      LOBYTE(a2) = *(_BYTE *)(v6 + *(this + 7));
      result = BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
      ++v6;
      --v4;
    }
    while ( v4 );
  }
  return result;
}

//----- (65950EF0) --------------------------------------------------------
int __stdcall sub_65950EF0(int a1, _DWORD *a2)
{
  int result; // eax

  result = sub_65950030(a1);
  if ( result )
  {
    *a2 = *(_DWORD *)(result + 4);
    return (int)a2;
  }
  else
  {
    *a2 = 0;
  }
  return result;
}
// 65950030: using guessed type int __stdcall sub_65950030(_DWORD);

//----- (659510B0) --------------------------------------------------------
char *__thiscall sub_659510B0(int *this, char *a2)
{
  char *v3; // ebx
  unsigned int v4; // edi
  char *result; // eax
  unsigned int i; // esi
  char *v7; // [esp-Ch] [ebp-24h]
  char v9[4]; // [esp+10h] [ebp-8h] BYREF
  int v10; // [esp+14h] [ebp-4h] BYREF

  v10 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v10, (int)v9, 4u);
    v7 = v9;
  }
  else
  {
    v7 = (char *)&v10;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v7, 0x20u, 1);
  BitStream_WriteU32_Compressed_thunk(this + 1, v3);
  v4 = (*(this + 4) - *(this + 3)) >> 2;
  a2 = (char *)v4;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)v9, 4u);
    result = BitStream_WriteBitsCompressed(v3, v9, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  for ( i = 0; i < v4; ++i )
    result = (char *)sub_65950FE0(*(this + 3) + 4 * i, v3);
  return result;
}
// 65950FE0: using guessed type int __thiscall sub_65950FE0(_DWORD, _DWORD);

//----- (65951DA0) --------------------------------------------------------
unsigned __int8 __thiscall Packet_ID_FACTION_read_blockA_struct_4C0(char *this, unsigned int *a2)
{
  unsigned int *v2; // edi
  unsigned __int8 result; // al
  char *v5; // esi
  int v6; // eax
  unsigned int v7; // edx
  char *v8; // ecx
  unsigned __int8 v9; // [esp+Eh] [ebp-2h]
  unsigned __int8 v10; // [esp+Fh] [ebp-1h] BYREF

  v2 = a2;
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  RakNet::BitStream::ReadCompressed_T_uint(v2, this + 4);
  RakNet::BitStream::ReadCompressed_T_uint(v2, this + 8);
  RakNet::BitStream::ReadCompressed_T_uint(v2, this + 12);
  RakNet::BitStream::ReadCompressed_T_uint(v2, this + 16);
  RakNet::BitStream::ReadCompressed_T_uint(v2, this + 20);
  v10 = 0;
  result = RakNet::BitStream::ReadCompressed(v2, (char *)&v10, 8u, 1);
  HIBYTE(a2) = 0;
  v9 = 0;
  if ( v10 )
  {
    v5 = this + 24;
    do
    {
      RakNet::BitStream::ReadCompressed(v2, (char *)&a2 + 3, 8u, 1);
      v6 = *((_DWORD *)v5 + 1);
      if ( v6 )
        v7 = *((_DWORD *)v5 + 3) - v6;
      else
        v7 = 0;
      v8 = (char *)*((_DWORD *)v5 + 2);
      if ( (unsigned int)&v8[-v6] >= v7 )
      {
        ByteVector_Insert((char **)v5, v8, 1u, (_BYTE *)&a2 + 3);
      }
      else
      {
        *v8 = HIBYTE(a2);
        *((_DWORD *)v5 + 2) = v8 + 1;
      }
      result = v9 + 1;
      v9 = result;
    }
    while ( result < v10 );
  }
  return result;
}

//----- (659528D0) --------------------------------------------------------
char __thiscall sub_659528D0(_DWORD *this, int a2, _BYTE *a3)
{
  int v4; // eax
  unsigned __int8 v5; // cl
  int v6; // edi

  v4 = (*(this + 3) - *(this + 2)) / 68;
  v5 = 0;
  if ( !(_BYTE)v4 )
    return 0;
  v6 = *(this + 2);
  while ( *(_BYTE *)(v6 + 68 * v5) != *(_BYTE *)a2 )
  {
    if ( ++v5 >= (unsigned __int8)((*(this + 3) - v6) / 68) )
      return 0;
  }
  if ( a3 )
  {
    if ( strcmp((const char *)(v6 + 68 * v5 + 1), (const char *)(a2 + 1)) )
      *a3 = 1;
  }
  sub_659527E0(*(this + 2) + 68 * v5, a2);
  return 1;
}
// 659527E0: using guessed type int __thiscall sub_659527E0(_DWORD, _DWORD);

//----- (659529B0) --------------------------------------------------------
char __thiscall sub_659529B0(_DWORD *this, char a2, int a3, _BYTE *a4)
{
  int v5; // esi
  _BYTE *v6; // eax
  unsigned int v8; // esi
  _BYTE *v9; // eax

  *a4 = 0;
  if ( a2 )
  {
    v5 = (unsigned __int8)a3 - 1;
    if ( (unsigned __int8)a3 != 1 )
    {
      while ( 1 )
      {
        v6 = (_BYTE *)sub_657D7190(this, v5);
        if ( v6 )
          break;
        if ( !--v5 )
          return 0;
      }
      *a4 = *v6;
      goto LABEL_12;
    }
    return 0;
  }
  v8 = (unsigned __int8)a3 + 1;
  if ( v8 > 0x1E )
    return 0;
  while ( 1 )
  {
    v9 = (_BYTE *)sub_657D7190(this, v8);
    if ( v9 )
      break;
    if ( ++v8 > 0x1E )
      return 0;
  }
  *a4 = *v9;
LABEL_12:
  if ( !*a4 || (_BYTE)a3 == *a4 )
    return 0;
  return sub_65951F90(this, a3, (unsigned __int8)*a4);
}
// 65951F90: using guessed type int __thiscall sub_65951F90(_DWORD, _DWORD, _DWORD);

//----- (65952A40) --------------------------------------------------------
unsigned int __thiscall sub_65952A40(_DWORD *this, char a2, char a3)
{
  _DWORD *v3; // ebx
  unsigned int result; // eax
  int v5; // esi
  int v6; // edx
  unsigned int v7; // esi
  _BYTE *v8; // edi
  int v9; // eax
  unsigned int v10; // esi
  _BYTE *v11; // edi
  _BYTE *v12; // esi
  int v13; // [esp+14h] [ebp-Ch]
  unsigned __int8 v14; // [esp+1Fh] [ebp-1h]
  _BYTE *v15; // [esp+2Ch] [ebp+Ch]

  v3 = this;
  result = (*(this + 3) - *(this + 2)) / 68;
  v14 = 0;
  if ( result )
  {
    v5 = 0;
    v13 = ~(1 << a3);
    do
    {
      v6 = v3[2] + 68 * v5;
      v7 = 0;
      if ( (*(_DWORD *)(v6 + 44) - *(_DWORD *)(v6 + 40)) >> 3 )
      {
        v8 = *(_BYTE **)(v6 + 40);
        while ( *v8 != a2 )
        {
          ++v7;
          v8 += 8;
          if ( v7 >= (*(_DWORD *)(v6 + 44) - *(_DWORD *)(v6 + 40)) >> 3 )
            goto LABEL_9;
        }
        v9 = *(_DWORD *)(v6 + 40) + 8 * v7;
        if ( !v9 )
        {
LABEL_9:
          v3 = this;
          goto LABEL_10;
        }
        *(_DWORD *)(v9 + 4) &= v13;
        v3 = this;
      }
      else
      {
LABEL_10:
        v10 = 0;
        if ( (*(_DWORD *)(v6 + 44) - *(_DWORD *)(v6 + 40)) >> 3 )
        {
          v15 = *(_BYTE **)(v6 + 40);
          v11 = v15;
          while ( *v11 != a2 )
          {
            ++v10;
            v11 += 8;
            if ( v10 >= (*(_DWORD *)(v6 + 44) - *(_DWORD *)(v6 + 40)) >> 3 )
              goto LABEL_19;
          }
          v12 = &v15[8 * v10];
          if ( v12 )
            *((_DWORD *)v12 + 1) = 0;
        }
      }
LABEL_19:
      v5 = ++v14;
      result = (v3[3] - v3[2]) / 68;
    }
    while ( v14 < result );
  }
  return result;
}
// 657A64C0: using guessed type int __stdcall sub_657A64C0(_DWORD);

//----- (65952B70) --------------------------------------------------------
char __thiscall Packet_ID_FACTION_read_block_1318(char *this, unsigned int *a2)
{
  unsigned int *v2; // esi
  unsigned int v4; // eax
  char *v5; // ebx
  unsigned int v6; // eax
  bool v7; // zf
  int v8; // ecx
  unsigned int v9; // eax
  _DWORD *v10; // edi
  unsigned int v12; // [esp+10h] [ebp-Ch]
  unsigned int v13; // [esp+14h] [ebp-8h] BYREF
  unsigned int v14; // [esp+18h] [ebp-4h] BYREF

  v2 = a2;
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  sub_65946F10();
  v13 = 0;
  LOBYTE(v4) = RakNet::BitStream::ReadCompressed_T_uint(v2, (char *)&v13);
  v14 = 0x10000;
  v12 = 0;
  if ( v13 )
  {
    v5 = this + 8;
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, (char *)&a2, 0x10u, 1) )
          ByteSwapCopy((int)&a2, (int)&v14, 2u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v14, 0x10u, 1);
      }
      RakNet::BitStream::ReadCompressed(v2, (char *)&v14 + 2, 8u, 1);
      v6 = v2[2];
      if ( v6 + 1 <= *v2 )
      {
        v7 = ((unsigned __int8)(128 >> (v6 & 7)) & *(_BYTE *)((v6 >> 3) + v2[3])) == 0;
        v2[2] = v6 + 1;
        HIBYTE(v14) = !v7;
      }
      v8 = *((_DWORD *)v5 + 1);
      if ( v8 )
        v9 = (*((_DWORD *)v5 + 3) - v8) >> 2;
      else
        v9 = 0;
      v10 = (_DWORD *)*((_DWORD *)v5 + 2);
      if ( ((int)v10 - v8) >> 2 >= v9 )
      {
        DwordVector_InsertN((int)v5, v10, 1u, &v14);
      }
      else
      {
        DwordArray_Fill(v10, 1, &v14);
        *((_DWORD *)v5 + 2) = v10 + 1;
      }
      v4 = v12 + 1;
      v12 = v4;
    }
    while ( v4 < v13 );
  }
  return v4;
}

//----- (65954750) --------------------------------------------------------
bool __thiscall ItemStructA_IsValid(unsigned __int16 *this)
{
  return *(this + 3) && (unsigned __int16)(*this - 1) <= 0xBBFu && g_ItemTemplateById[*this];
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65954780) --------------------------------------------------------
char __thiscall ItemVariant_ApplyStatDelta(unsigned __int16 *this, float a2, float a3, int *a4)
{
  int SubType; // eax
  int *v6; // ecx
  int *v7; // ecx
  int *v8; // edi
  float v10; // [esp+Ch] [ebp+8h]

  LOBYTE(SubType) = LOBYTE(a2) - 1;
  switch ( LOBYTE(a2) )
  {
    case 1:
      v6 = a4;
      if ( *(_BYTE *)a4 == 36 )
        goto LABEL_46;
      break;
    case 2:
      v7 = a4;
      LOBYTE(SubType) = *(_BYTE *)a4;
      if ( *(_BYTE *)a4 == 12
        || (_BYTE)SubType == 13
        || (_BYTE)SubType == 14
        || (_BYTE)SubType == 15
        || (_BYTE)SubType == 16
        || (_BYTE)SubType == 29
        || !(_BYTE)SubType
        || (_BYTE)SubType == 3
        || (_BYTE)SubType == 2 )
      {
        goto LABEL_15;
      }
      break;
    case 3:
      v7 = a4;
      if ( *(_BYTE *)a4 == 35 )
        goto LABEL_15;
      break;
    case 4:
      v6 = a4;
      if ( *(_BYTE *)a4 == 17 )
        goto LABEL_46;
      break;
    case 5:
      v7 = a4;
      LOBYTE(SubType) = *(_BYTE *)a4;
      if ( *(_BYTE *)a4 == 18 || (_BYTE)SubType == 19 || (_BYTE)SubType == 21 || (_BYTE)SubType == 20 )
        goto LABEL_15;
      break;
    case 6:
      v6 = a4;
      if ( *(_BYTE *)a4 == 11 )
        goto LABEL_46;
      break;
    case 7:
      v8 = a4;
      if ( *(_BYTE *)a4 == 18 )
      {
        if ( ItemTemplate_GetSubType(g_ItemTemplateById, *(this + 2)) == 4 )
          goto LABEL_34;
        SubType = ItemTemplate_GetSubType(g_ItemTemplateById, *(this + 2));
        if ( SubType == 3 )
          goto LABEL_34;
      }
      if ( *(_BYTE *)a4 == 19 )
        goto LABEL_34;
      break;
    case 8:
      v8 = a4;
      if ( *(_BYTE *)a4 == 19
        && (ItemTemplate_GetSubType(g_ItemTemplateById, *(this + 2)) == 4
         || (SubType = ItemTemplate_GetSubType(g_ItemTemplateById, *(this + 2)), SubType == 3))
        || *(_BYTE *)a4 == 18 )
      {
LABEL_34:
        LOBYTE(SubType) = ItemStatEntry_ScaleByFloatCeil(v8, a3);
      }
      break;
    case 9:
      v7 = a4;
      LOBYTE(SubType) = *(_BYTE *)a4;
      if ( *(_BYTE *)a4 == 22 || (_BYTE)SubType == 25 || (_BYTE)SubType == 24 || (_BYTE)SubType == 23 )
        goto LABEL_15;
      break;
    case 0xB:
      v7 = a4;
      LOBYTE(SubType) = *(_BYTE *)a4;
      if ( *(_BYTE *)a4 == 11 || (_BYTE)SubType == 18 || (_BYTE)SubType == 19 || (_BYTE)SubType == 22 )
LABEL_15:
        LOBYTE(SubType) = ItemStatEntry_ScaleByFloatCeil(v7, a3);
      break;
    case 0xC:
      v6 = a4;
      if ( *(_BYTE *)a4 == 32 )
      {
LABEL_46:
        v10 = 1.0 - a3 + 1.0;
        LOBYTE(SubType) = ItemStatEntry_ScaleByFloatCeil(v6, v10);
      }
      break;
    default:
      return SubType;
  }
  return SubType;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (659549F0) --------------------------------------------------------
char __thiscall Item_ApplyQualityAndVariantToStat(int this, char *a2)
{
  unsigned __int8 v3; // al
  int *v4; // ecx
  char v5; // al
  char v6; // al
  char v7; // al
  char result; // al
  int v9; // ebx
  char *v10; // esi
  unsigned __int16 v11; // [esp+10h] [ebp-70h]
  float v12[11]; // [esp+18h] [ebp-68h] BYREF
  char v13; // [esp+44h] [ebp-3Ch] BYREF
  int v14; // [esp+74h] [ebp-Ch] BYREF
  int v15; // [esp+78h] [ebp-8h] BYREF
  char v16[4]; // [esp+7Ch] [ebp-4h]

  v3 = *(_BYTE *)(this + 28);
  if ( v3 )
  {
    *(_DWORD *)v16 = v3;
    v11 = *(_WORD *)(this + 4);
    *(float *)v16 = (double)v3 / 100.0 + 1.0;
    switch ( (unsigned __int8)ItemTemplate_GetType(g_ItemTemplateById, v11) )
    {
      case 1u:
        v7 = *a2;
        if ( *a2 == 22 || v7 == 23 || v7 == 24 || v7 == 25 )
        {
          v4 = (int *)a2;
          goto LABEL_22;
        }
        break;
      case 3u:
      case 4u:
        v4 = (int *)a2;
        v5 = *a2;
        if ( *a2 == 12 || v5 == 13 || v5 == 14 || v5 == 15 || v5 == 16 || v5 == 29 )
          goto LABEL_22;
        break;
      case 5u:
        v6 = *a2;
        if ( *a2 == 18 || v6 == 19 || v6 == 21 || v6 == 20 )
        {
          v4 = (int *)a2;
          goto LABEL_22;
        }
        break;
      case 6u:
        v4 = (int *)a2;
        if ( *a2 != 32 && *a2 != 39 )
LABEL_22:
          ItemStatEntry_ScaleByFloatCeil(v4, *(float *)v16);
        break;
      default:
        break;
    }
  }
  result = *(_BYTE *)(this + 30);
  if ( result )
  {
    v16[0] = *(_BYTE *)(this + 30);
    result = ItemTemplate_CopyVariantByIndex(*(_WORD *)(this + 4), v16[0], (char *)v12);
    if ( result )
    {
      v9 = 0;
      v10 = &v13;
      do
      {
        result = *v10;
        if ( *v10 && (unsigned __int8)result < 7u )
        {
          if ( (unsigned __int8)v9 < 4u )
            v16[0] = *(_BYTE *)((unsigned __int8)v9 + this + 31);
          else
            v16[0] = 0;
          result = ItemVariant_ComputeScalePair(
                     v16[0],
                     COERCE_FLOAT(v10[3]),
                     v10[4],
                     *((float *)v10 + 2),
                     (float *)&v14,
                     (float *)&v15);
          if ( result )
          {
            ItemVariant_ApplyStatDelta((unsigned __int16 *)this, COERCE_FLOAT(v10[2]), *(float *)&v15, (int *)a2);
            result = ItemVariant_ApplyStatDelta(
                       (unsigned __int16 *)this,
                       COERCE_FLOAT(v10[1]),
                       *(float *)&v14,
                       (int *)a2);
          }
        }
        ++v9;
        v10 += 12;
      }
      while ( v9 < 4 );
    }
  }
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65954D40) --------------------------------------------------------
char *__thiscall ItemStructA_write(unsigned __int16 *this, char *a2)
{
  char *v3; // esi
  int i; // edi
  char *result; // eax
  char *v6; // [esp-Ch] [ebp-20h]
  int v7; // [esp+Ch] [ebp-8h] BYREF
  _BYTE v8[4]; // [esp+10h] [ebp-4h] BYREF

  v7 = *this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v8, 2u);
    v6 = v8;
  }
  else
  {
    v6 = (char *)&v7;
  }
  v3 = a2;
  BitStream_WriteBitsCompressed(a2, v6, 0x10u, 1);
  v7 = *(this + 1);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&v7, 0x10u, 1);
  }
  v7 = *(this + 2);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&v7, 0x10u, 1);
  }
  v7 = *(this + 3);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)&a2, 2u);
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x10u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&v7, 0x10u, 1);
  }
  LOBYTE(a2) = *((_BYTE *)this + 8);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *((_BYTE *)this + 9);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  a2 = (char *)*((_DWORD *)this + 3);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)&v7, 4u);
    BitStream_WriteBitsCompressed(v3, (char *)&v7, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*((_DWORD *)this + 4);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)&v7, 4u);
    BitStream_WriteBitsCompressed(v3, (char *)&v7, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  a2 = (char *)*((_DWORD *)this + 5);
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&a2, (int)&v7, 4u);
    BitStream_WriteBitsCompressed(v3, (char *)&v7, 0x20u, 1);
  }
  else
  {
    BitStream_WriteBitsCompressed(v3, (char *)&a2, 0x20u, 1);
  }
  LOBYTE(a2) = *((_BYTE *)this + 26);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *((_BYTE *)this + 25);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  LOBYTE(a2) = *((_BYTE *)this + 24);
  BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  for ( i = 0; i < 4; ++i )
  {
    LOBYTE(a2) = *((_BYTE *)this + i + 27);
    result = BitStream_WriteBitsCompressed(v3, (char *)&a2, 8u, 1);
  }
  return result;
}

//----- (65954F80) --------------------------------------------------------
bool __thiscall ItemStructA_Read(char *this, unsigned int *a2)
{
  int i; // ebx
  bool result; // al

  RakNet::BitStream::ReadCompressed_T_ushort(a2, this);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 2);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 4);
  RakNet::BitStream::ReadCompressed_T_ushort(a2, this + 6);
  RakNet::BitStream::ReadCompressed(a2, this + 8, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 9, 8u, 1);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 12);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 16);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 20);
  RakNet::BitStream::ReadCompressed(a2, this + 26, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 25, 8u, 1);
  RakNet::BitStream::ReadCompressed(a2, this + 24, 8u, 1);
  for ( i = 0; i < 4; ++i )
    result = RakNet::BitStream::ReadCompressed(a2, this + i + 27, 8u, 1);
  return result;
}

//----- (65955040) --------------------------------------------------------
char *__thiscall ItemStructAPlus_u32_write(unsigned __int16 *this, char *a2)
{
  char *v4; // [esp-Ch] [ebp-1Ch]
  _BYTE v5[4]; // [esp+8h] [ebp-8h] BYREF
  int v6; // [esp+Ch] [ebp-4h] BYREF

  v6 = *(_DWORD *)this;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v6, (int)v5, 4u);
    v4 = v5;
  }
  else
  {
    v4 = (char *)&v6;
  }
  BitStream_WriteBitsCompressed(a2, v4, 0x20u, 1);
  return ItemStructA_write(this + 2, a2);
}

//----- (659550A0) --------------------------------------------------------
bool __thiscall ItemEntryWithId_Read(char *this, unsigned int *a2)
{
  RakNet::BitStream::ReadCompressed_T_uint(a2, this);
  return ItemStructA_Read(this + 4, a2);
}

//----- (65955B50) --------------------------------------------------------
const char *__cdecl sub_65955B50(unsigned int a1)
{
  if ( a1 >= 0x20 )
    return "invalid world";
  else
    return (const char *)off_659E2984[15 * a1];
}
// 659E2984: using guessed type char (*off_659E2984[2])[4];

//----- (65955B80) --------------------------------------------------------
char __cdecl sub_65955B80(char a1)
{
  char result; // al

  switch ( a1 )
  {
    case 1:
    case 2:
    case 3:
    case 5:
    case 7:
    case 9:
    case 10:
    case 18:
      result = 1;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (65955CF0) --------------------------------------------------------
bool __cdecl IsValue2Or30_NotEqual(char a1, char a2)
{
  return a1 != a2 && (a1 == 2 || a1 == 30);
}

//----- (65955D10) --------------------------------------------------------
double __cdecl ScaleFactor_ByTypeAndMode(char a1, char a2)
{
  double v2; // st7
  float v4; // [esp+0h] [ebp-4h]

  v4 = 1.0;
  if ( a2 == 7 )
  {
    v2 = 1.2;
  }
  else
  {
    if ( a2 != 11 )
      goto LABEL_6;
    v2 = 0.5;
  }
  v4 = v2;
LABEL_6:
  if ( a1 == 2 )
    return (float)(v4 - 0.5);
  return v4;
}

//----- (65955D60) --------------------------------------------------------
char __cdecl SkillType_UsesMultiplier(char a1)
{
  char result; // al

  switch ( a1 )
  {
    case 2:
    case 6:
    case 9:
    case 11:
    case 15:
      result = 0;
      break;
    default:
      result = 1;
      break;
  }
  return result;
}

//----- (65955DA0) --------------------------------------------------------
bool __cdecl TypeHashMatchesTable(char a1, int a2)
{
  bool result; // al

  switch ( a1 )
  {
    case 1:
      result = a2 == 527866044;
      break;
    case 2:
      result = a2 == -1538152155;
      break;
    case 3:
      result = a2 == 380093763;
      break;
    case 6:
      result = a2 == -1797738553;
      break;
    case 7:
      result = a2 == -1126982430;
      break;
    case 9:
      result = a2 == 599230207;
      break;
    case 10:
      result = a2 == 368860519;
      break;
    case 11:
      result = a2 == -691085372;
      break;
    case 12:
      result = a2 == 1009619790;
      break;
    case 14:
      result = a2 == 1193964343;
      break;
    case 16:
      result = a2 == -1301415707;
      break;
    case 18:
      result = a2 == 1706154954;
      break;
    case 19:
      result = a2 == 27128991;
      break;
    case 21:
      result = a2 == -1653586053;
      break;
    case 24:
      result = a2 == 1560701257;
      break;
    case 25:
      result = a2 == 1753036636;
      break;
    case 26:
      result = a2 == -244297042;
      break;
    case 29:
      result = a2 == 202119501;
      break;
    case 30:
      result = a2 == 288509712;
      break;
    default:
      result = 1;
      break;
  }
  return result;
}

//----- (65955F40) --------------------------------------------------------
unsigned int __cdecl PackVec3_ToPacked1000(float a1, float a2, float a3, int a4)
{
  double v4; // st7
  double v5; // st6
  int v6; // esi
  int v7; // edi
  int v8; // ecx

  if ( (_BYTE)a4 == 1 )
  {
    v4 = a1;
    v5 = 0.001953125;
  }
  else
  {
    if ( (_BYTE)a4 != 2 )
    {
      v6 = a4;
      v7 = a4;
      v8 = a4;
      return (v8 + 500) % 0x3E8u + 1000 * ((v7 + 500) % 0x3E8u + 1000 * ((v6 + 500) % 0x3E8u));
    }
    v4 = a1;
    v5 = 0.0009765625;
  }
  v6 = (int)(v4 * v5);
  v7 = (int)(a2 * v5);
  v8 = (int)(v5 * a3);
  return (v8 + 500) % 0x3E8u + 1000 * ((v7 + 500) % 0x3E8u + 1000 * ((v6 + 500) % 0x3E8u));
}

//----- (65955FE0) --------------------------------------------------------
char __cdecl Type14_ValidateIdRange(int a1, char a2, unsigned int a3)
{
  if ( a2 != 14 )
    return 1;
  switch ( a1 )
  {
    case 135:
    case 137:
    case 138:
    case 139:
    case 140:
      if ( a3 >= 0xA )
        return 1;
      break;
    case 141:
    case 142:
    case 143:
    case 144:
    case 145:
    case 146:
    case 147:
    case 148:
    case 149:
    case 150:
    case 151:
    case 152:
    case 153:
    case 154:
      return 0;
    default:
      return 1;
  }
  return 0;
}

//----- (65956050) --------------------------------------------------------
double __thiscall Vec3s_GetX_A(__int16 *this)
{
  return (double)*(this + 2);
}

//----- (65956070) --------------------------------------------------------
double __thiscall Vec3s_GetY_A(__int16 *this)
{
  return (double)*(this + 3);
}

//----- (65956090) --------------------------------------------------------
double __thiscall Vec3s_GetZ_A(__int16 *this)
{
  return (double)*(this + 4);
}

//----- (659560B0) --------------------------------------------------------
double __thiscall Vec3s_GetX_B(__int16 *this)
{
  return (double)*(this + 2);
}

//----- (659560D0) --------------------------------------------------------
double __thiscall Vec3s_GetY_B(__int16 *this)
{
  return (double)*(this + 3);
}

//----- (659560F0) --------------------------------------------------------
double __thiscall Vec3s_GetZ_B(__int16 *this)
{
  return (double)*(this + 4);
}

//----- (65956110) --------------------------------------------------------
int __cdecl RoundFloatToInt2(float a1)
{
  double v1; // st7

  v1 = a1;
  if ( a1 >= 0.0 )
    return (int)(float)(v1 + 0.5);
  else
    return (int)(float)(v1 - 0.5);
}

//----- (65956150) --------------------------------------------------------
char __cdecl Production_IsValidTypeCombo(char a1, char a2, unsigned __int8 a3)
{
  char result; // al

  if ( a1 && (a1 == 2 || a1 == 30) && a3 > 1u )
    return 0;
  switch ( a1 )
  {
    case 1:
      switch ( a2 )
      {
        case 2:
        case 3:
        case 7:
        case 9:
        case 12:
          goto LABEL_7;
        default:
          return 0;
      }
    case 2:
      switch ( a2 )
      {
        case 1:
        case 3:
        case 4:
        case 5:
        case 7:
        case 8:
        case 9:
        case 11:
        case 12:
        case 14:
          goto LABEL_7;
        default:
          return 0;
      }
    case 3:
      switch ( a2 )
      {
        case 1:
        case 3:
        case 7:
        case 12:
          goto LABEL_7;
        default:
          return 0;
      }
    case 6:
      switch ( a2 )
      {
        case 3:
        case 6:
        case 7:
        case 11:
        case 12:
          goto LABEL_7;
        default:
          return 0;
      }
    case 7:
      switch ( a2 )
      {
        case 1:
        case 3:
        case 7:
        case 12:
          goto LABEL_7;
        default:
          return 0;
      }
    case 9:
      switch ( a2 )
      {
        case 3:
        case 7:
        case 11:
        case 12:
          goto LABEL_7;
        default:
          return 0;
      }
    case 10:
      switch ( a2 )
      {
        case 3:
        case 4:
        case 7:
        case 8:
        case 12:
        case 15:
          goto LABEL_7;
        default:
          return 0;
      }
    case 11:
      switch ( a2 )
      {
        case 3:
        case 4:
        case 5:
        case 7:
        case 8:
        case 9:
        case 12:
        case 15:
          goto LABEL_7;
        default:
          return 0;
      }
    case 12:
      switch ( a2 )
      {
        case 1:
        case 2:
        case 3:
        case 5:
        case 7:
        case 8:
        case 12:
          goto LABEL_7;
        default:
          return 0;
      }
    case 14:
      switch ( a2 )
      {
        case 3:
        case 6:
        case 11:
        case 12:
          goto LABEL_7;
        default:
          return 0;
      }
    case 16:
      switch ( a2 )
      {
        case 3:
        case 4:
        case 5:
        case 7:
        case 12:
          goto LABEL_7;
        default:
          return 0;
      }
    case 18:
      switch ( a2 )
      {
        case 3:
        case 7:
        case 11:
        case 12:
          goto LABEL_7;
        default:
          return 0;
      }
    case 19:
      switch ( a2 )
      {
        case 3:
        case 5:
        case 7:
        case 8:
        case 11:
        case 12:
          goto LABEL_7;
        default:
          return 0;
      }
    case 21:
      switch ( a2 )
      {
        case 2:
        case 3:
        case 4:
        case 7:
        case 12:
        case 15:
          goto LABEL_7;
        default:
          return 0;
      }
    case 24:
      switch ( a2 )
      {
        case 1:
        case 3:
        case 5:
        case 7:
        case 9:
        case 12:
          goto LABEL_7;
        default:
          return 0;
      }
    case 25:
      switch ( a2 )
      {
        case 3:
        case 5:
        case 7:
        case 9:
        case 11:
        case 12:
          goto LABEL_7;
        default:
          return 0;
      }
    case 26:
      switch ( a2 )
      {
        case 1:
        case 2:
        case 3:
        case 5:
        case 7:
        case 9:
        case 12:
        case 15:
          goto LABEL_7;
        default:
          return 0;
      }
    case 29:
      switch ( a2 )
      {
        case 3:
        case 7:
        case 11:
        case 12:
LABEL_7:
          result = 1;
          break;
        default:
          return 0;
      }
      return result;
    case 30:
      if ( a2 != 3 )
        return 0;
      result = 1;
      break;
    default:
      return 0;
  }
  return result;
}

//----- (65956590) --------------------------------------------------------
unsigned int __cdecl PackVec3i16_ToPacked1000(float a1, int a2)
{
  float v3; // [esp-10h] [ebp-10h]
  float v4; // [esp-Ch] [ebp-Ch]
  float v5; // [esp-8h] [ebp-8h]

  v5 = (float)*(__int16 *)(LODWORD(a1) + 8);
  v4 = (float)*(__int16 *)(LODWORD(a1) + 6);
  v3 = (float)*(__int16 *)(LODWORD(a1) + 4);
  return PackVec3_ToPacked1000(v3, v4, v5, a2);
}

//----- (659565D0) --------------------------------------------------------
char __cdecl sub_659565D0(char a1, char a2, unsigned __int8 a3)
{
  char v3; // dl
  unsigned __int8 v4; // cl
  int v5; // eax
  char *v6; // ecx

  if ( !Item_ValidateSlotForType(44, a3) && a2 != 4 && a2 != 31 && a1 && a1 != 4 && a1 != 31 )
  {
    sub_65955B80(a1);
    if ( sub_65955B80(a2) )
      v3 = 5;
    if ( v4 != v3 )
    {
      v5 = 0;
      v6 = (char *)&unk_659E30D4 + 16 * v4;
      while ( v6[v5] != v3 )
      {
        if ( ++v5 >= 10 )
          return 0;
      }
    }
  }
  return 1;
}
// 65956629: variable 'v4' is possibly undefined
// 65956629: variable 'v3' is possibly undefined

//----- (65956720) --------------------------------------------------------
int __cdecl sub_65956720(char a1, float a2, int a3, _DWORD *a4)
{
  int v4; // edx
  int v5; // ecx
  double v6; // st7
  float v8; // [esp+14h] [ebp+Ch]
  int v9; // [esp+18h] [ebp+10h]
  float v10; // [esp+1Ch] [ebp+14h]

  v4 = 100 * a3;
  v5 = (*a4 >> 17) & 0x1F;
  if ( (double)v5 > 30.0 )
    v5 = 30;
  *(float *)&v9 = 1.0;
  if ( LOBYTE(a2) == 7 )
  {
    v6 = 1.2;
  }
  else
  {
    if ( LOBYTE(a2) != 11 )
      goto LABEL_8;
    v6 = 0.5;
  }
  *(float *)&v9 = v6;
LABEL_8:
  if ( a1 == 2 )
    *(float *)&v9 = *(float *)&v9 - 0.5;
  v10 = (1.0 - (double)(unsigned int)v5 / 15.0) * -0.2000000029802322;
  v8 = *(float *)&v9 + v10;
  return (__int64)(v8 * (double)(unsigned int)v4);
}

//----- (65956800) --------------------------------------------------------
char __cdecl sub_65956800(char a1, char a2, unsigned __int8 a3, int a4)
{
  unsigned int i; // ebx
  _DWORD *v5; // eax
  _DWORD *v6; // ecx
  int v7; // ecx
  _DWORD *v8; // ecx
  unsigned int v9; // eax

  if ( !sub_659565D0(a1, a2, a3) )
  {
    LOBYTE(i) = a1;
    do
    {
      v5 = *(_DWORD **)(a4 + 4);
      v6 = *(_DWORD **)(a4 + 8);
      if ( v5 != v6 )
      {
        while ( *v5 != (unsigned __int8)i )
        {
          if ( ++v5 == v6 )
            goto LABEL_10;
        }
        v7 = v6 - (v5 + 1);
        if ( v7 > 0 )
          memmove_s(v5, 4 * v7, v5 + 1, 4 * v7);
        *(_DWORD *)(a4 + 8) -= 4;
      }
LABEL_10:
      for ( i = 0; ; ++i )
      {
        if ( i >= 0x20 )
          return 0;
        if ( sub_659565D0(a1, i, a3) )
        {
          v8 = *(_DWORD **)(a4 + 4);
          v9 = 0;
          if ( (*(_DWORD *)(a4 + 8) - (int)v8) >> 2 )
            break;
        }
LABEL_16:
        ;
      }
      while ( *v8 != i )
      {
        ++v9;
        ++v8;
        if ( v9 >= (*(_DWORD *)(a4 + 8) - *(_DWORD *)(a4 + 4)) >> 2 )
          goto LABEL_16;
      }
      a1 = i;
    }
    while ( !sub_659565D0(i, a2, a3) );
  }
  return 1;
}

//----- (65956D30) --------------------------------------------------------
char __thiscall MarkupTokenizer_NextNonWhitespace(int this)
{
  char result; // al

  while ( 1 )
  {
    result = *(_BYTE *)(this + 2328);
    if ( result )
      *(_BYTE *)(this + 2328) = 0;
    else
      result = (***(int (__thiscall ****)(_DWORD))(this + 2324))(*(_DWORD *)(this + 2324));
    if ( !result )
      break;
    if ( result > 32 || result != 32 && result != 9 && result != 10 && result != 13 && result != 12 )
      return result;
  }
  return 0;
}

//----- (65956D80) --------------------------------------------------------
int __thiscall MarkupTokenizer_NextToken(_BYTE *this)
{
  char NonWhitespace; // al
  char v3; // al
  int v5; // ecx
  char v6; // al
  char v7; // al
  char v8; // al
  int v9; // ecx
  char v10; // al
  int v11; // ecx
  int v12; // ecx
  char v13; // al
  int v14; // ecx
  char v15; // al
  int v16; // ecx
  bool v17; // [esp-1h] [ebp-5h]

  NonWhitespace = MarkupTokenizer_NextNonWhitespace((int)this);
  if ( NonWhitespace == 62 )
  {
    *(_DWORD *)this = &loc_65957090;
    v15 = *(this + 2328);
    if ( v15 )
      *(this + 2328) = 0;
    else
      v15 = (***((int (__thiscall ****)(_DWORD))this + 581))(*((_DWORD *)this + 581));
    *((_DWORD *)this + 514) = 0;
    if ( !v15 )
      return 0;
    if ( v15 == 60 )
    {
      v13 = *(this + 2328);
      *((_DWORD *)this + 547) = 0;
      if ( v13 )
        *(this + 2328) = 0;
      else
        v13 = (***((int (__thiscall ****)(_DWORD))this + 581))(*((_DWORD *)this + 581));
      v17 = v13 == 47;
      if ( v13 == 47 )
      {
        v13 = *(this + 2328);
        if ( v13 )
          *(this + 2328) = 0;
        else
          v13 = (***((int (__thiscall ****)(_DWORD))this + 581))(*((_DWORD *)this + 581));
      }
      if ( !v13 )
        return -1;
      while ( v13 > 32 || v13 != 32 && v13 != 9 && v13 != 10 && v13 != 13 && v13 != 12 )
      {
        if ( v13 == 47 || v13 == 62 )
          goto LABEL_85;
        v14 = *((_DWORD *)this + 547);
        if ( v14 < 127 )
        {
          *(this + v14 + 2060) = v13;
          ++*((_DWORD *)this + 547);
        }
        v13 = *(this + 2328);
        if ( v13 )
          *(this + 2328) = 0;
        else
          v13 = (***((int (__thiscall ****)(_DWORD))this + 581))(*((_DWORD *)this + 581));
        if ( !v13 )
          return -1;
      }
      v13 = MarkupTokenizer_NextNonWhitespace((int)this);
LABEL_85:
      if ( v13 )
      {
        if ( v17 )
        {
          return v13 != 62 ? -1 : 2;
        }
        else
        {
          *(this + 2328) = v13;
          *(_DWORD *)this = MarkupTokenizer_NextToken;
          return 1;
        }
      }
      else
      {
        return -1;
      }
    }
    else
    {
      while ( 1 )
      {
        v16 = *((_DWORD *)this + 514);
        if ( v16 < 2047 )
        {
          *(this + v16 + 8) = v15;
          ++*((_DWORD *)this + 514);
        }
        v15 = (***((int (__thiscall ****)(_DWORD))this + 581))(*((_DWORD *)this + 581));
        if ( !v15 )
          break;
        if ( v15 == 60 )
        {
          *(this + 2328) = 60;
          return 4;
        }
      }
      *(this + 2328) = 0;
      return 4;
    }
  }
  if ( NonWhitespace == 47 )
  {
    v3 = *(this + 2328);
    if ( v3 )
      *(this + 2328) = 0;
    else
      v3 = (***((int (__thiscall ****)(_DWORD))this + 581))(*((_DWORD *)this + 581));
    if ( v3 == 62 )
    {
      *(_DWORD *)this = &loc_65957090;
      return 2;
    }
    else
    {
      *(this + 2328) = v3;
      return -1;
    }
  }
  *((_DWORD *)this + 580) = 0;
  *((_DWORD *)this + 514) = 0;
  if ( NonWhitespace == 61 )
  {
LABEL_26:
    v6 = MarkupTokenizer_NextNonWhitespace((int)this);
    if ( v6 == 34 )
    {
      while ( 1 )
      {
        v7 = *(this + 2328);
        if ( v7 )
          *(this + 2328) = 0;
        else
          v7 = (***((int (__thiscall ****)(_DWORD))this + 581))(*((_DWORD *)this + 581));
        if ( !v7 )
          break;
        if ( v7 == 34 )
          return 3;
        v9 = *((_DWORD *)this + 514);
        if ( v9 < 2047 )
        {
          *(this + v9 + 8) = v7;
          ++*((_DWORD *)this + 514);
        }
      }
    }
    else
    {
      if ( v6 != 39 )
      {
        while ( v6 > 32 || v6 != 32 && v6 != 9 && v6 != 10 && v6 != 13 && v6 != 12 )
        {
          if ( v6 == 62 )
            goto LABEL_59;
          v12 = *((_DWORD *)this + 514);
          if ( v12 < 2047 )
          {
            *(this + v12 + 8) = v6;
            ++*((_DWORD *)this + 514);
          }
          v6 = *(this + 2328);
          if ( v6 )
            *(this + 2328) = 0;
          else
            v6 = (***((int (__thiscall ****)(_DWORD))this + 581))(*((_DWORD *)this + 581));
          if ( !v6 )
            return -1;
        }
        return 3;
      }
      while ( 1 )
      {
        v10 = *(this + 2328);
        if ( v10 )
          *(this + 2328) = 0;
        else
          v10 = (***((int (__thiscall ****)(_DWORD))this + 581))(*((_DWORD *)this + 581));
        if ( !v10 )
          break;
        if ( v10 == 39 )
          return 3;
        v11 = *((_DWORD *)this + 514);
        if ( v11 < 2047 )
        {
          *(this + v11 + 8) = v10;
          ++*((_DWORD *)this + 514);
        }
      }
    }
    return -1;
  }
  while ( 1 )
  {
    if ( !NonWhitespace )
      return 0;
    if ( NonWhitespace == 62 )
    {
LABEL_59:
      *(this + 2328) = 62;
      return 3;
    }
    if ( NonWhitespace <= 32
      && (NonWhitespace == 32 || NonWhitespace == 9 || NonWhitespace == 10 || NonWhitespace == 13 || NonWhitespace == 12) )
    {
      break;
    }
    if ( NonWhitespace == 60 )
      return -1;
    v5 = *((_DWORD *)this + 580);
    if ( v5 < 127 )
    {
      *(this + v5 + 2192) = NonWhitespace;
      ++*((_DWORD *)this + 580);
    }
    NonWhitespace = *(this + 2328);
    if ( NonWhitespace )
      *(this + 2328) = 0;
    else
      NonWhitespace = (***((int (__thiscall ****)(_DWORD))this + 581))(*((_DWORD *)this + 581));
    if ( NonWhitespace == 61 )
      goto LABEL_26;
  }
  v8 = MarkupTokenizer_NextNonWhitespace((int)this);
  if ( v8 == 61 )
    goto LABEL_26;
  *(this + 2328) = v8;
  return 3;
}
// 65956D80: could not find valid save-restore pair for ebp

//----- (659575B0) --------------------------------------------------------
char __thiscall BitfieldBlock_0x30_HasExtra(_WORD *this)
{
  int v1; // eax

  v1 = 11;
  while ( !*(this + v1) )
  {
    if ( (unsigned int)++v1 > 0x13 )
      return 0;
  }
  return 1;
}

//----- (659575D0) --------------------------------------------------------
char *__thiscall Write_BitfieldBlock_0x30(char *this, char *a2)
{
  int v3; // eax

  BitStream_WriteBits(a2, this, 1u, 1);
  BitStream_WriteBits(a2, this + 2, 1u, 1);
  BitStream_WriteBits(a2, this + 4, 5u, 1);
  BitStream_WriteBits(a2, this + 6, 5u, 1);
  BitStream_WriteBits(a2, this + 8, 0x20u, 1);
  BitStream_WriteBits(a2, this + 10, 5u, 1);
  BitStream_WriteBits(a2, this + 12, 6u, 1);
  BitStream_WriteBits(a2, this + 14, 4u, 1);
  BitStream_WriteBits(a2, this + 16, 0xCu, 1);
  BitStream_WriteBits(a2, this + 18, 0xCu, 1);
  BitStream_WriteBits(a2, this + 20, 0xCu, 1);
  v3 = 11;
  while ( !*((_WORD *)this + v3) )
  {
    if ( (unsigned int)++v3 > 0x13 )
    {
      BitStream_WriteBit0(a2);
      goto LABEL_5;
    }
  }
  BitStream_WriteBit1(a2);
  BitStream_WriteBits(a2, this + 22, 0xCu, 1);
  BitStream_WriteBits(a2, this + 24, 0xCu, 1);
  BitStream_WriteBits(a2, this + 26, 0xCu, 1);
  BitStream_WriteBits(a2, this + 28, 0xCu, 1);
  BitStream_WriteBits(a2, this + 30, 0xCu, 1);
  BitStream_WriteBits(a2, this + 32, 0xCu, 1);
  BitStream_WriteBits(a2, this + 34, 0xCu, 1);
  BitStream_WriteBits(a2, this + 36, 0xCu, 1);
  BitStream_WriteBits(a2, this + 38, 0xCu, 1);
LABEL_5:
  BitStream_WriteBits(a2, this + 40, 1u, 1);
  BitStream_WriteBits(a2, this + 42, 1u, 1);
  BitStream_WriteBits(a2, this + 44, 1u, 1);
  return BitStream_WriteBits(a2, this + 46, 1u, 1);
}

//----- (65957770) --------------------------------------------------------
char __thiscall Read_BitfieldBlock_0x30(char *this, _DWORD *a2)
{
  BitStream_ReadBits(a2, this, 1u, 1);
  BitStream_ReadBits(a2, this + 2, 1u, 1);
  BitStream_ReadBits(a2, this + 4, 5u, 1);
  BitStream_ReadBits(a2, this + 6, 5u, 1);
  BitStream_ReadBits(a2, this + 8, 0x20u, 1);
  BitStream_ReadBits(a2, this + 10, 5u, 1);
  BitStream_ReadBits(a2, this + 12, 6u, 1);
  BitStream_ReadBits(a2, this + 14, 4u, 1);
  BitStream_ReadBits(a2, this + 16, 0xCu, 1);
  BitStream_ReadBits(a2, this + 18, 0xCu, 1);
  BitStream_ReadBits(a2, this + 20, 0xCu, 1);
  if ( RakNet::BitStream::ReadBit(a2) )
  {
    BitStream_ReadBits(a2, this + 22, 0xCu, 1);
    BitStream_ReadBits(a2, this + 24, 0xCu, 1);
    BitStream_ReadBits(a2, this + 26, 0xCu, 1);
    BitStream_ReadBits(a2, this + 28, 0xCu, 1);
    BitStream_ReadBits(a2, this + 30, 0xCu, 1);
    BitStream_ReadBits(a2, this + 32, 0xCu, 1);
    BitStream_ReadBits(a2, this + 34, 0xCu, 1);
    BitStream_ReadBits(a2, this + 36, 0xCu, 1);
    BitStream_ReadBits(a2, this + 38, 0xCu, 1);
  }
  BitStream_ReadBits(a2, this + 40, 1u, 1);
  BitStream_ReadBits(a2, this + 42, 1u, 1);
  BitStream_ReadBits(a2, this + 44, 1u, 1);
  return BitStream_ReadBits(a2, this + 46, 1u, 1);
}

//----- (65957920) --------------------------------------------------------
char __thiscall U16Array20_Equals(unsigned __int16 *this, int a2)
{
  unsigned int v2; // eax
  int v3; // esi

  v2 = 0;
  v3 = a2 - (_DWORD)this;
  while ( *this == *(unsigned __int16 *)((char *)this + v3) )
  {
    ++v2;
    ++this;
    if ( v2 > 0x13 )
      return 1;
  }
  return 0;
}
// 65957933: conditional instruction was optimized away because eax.4<14u

//----- (659579A0) --------------------------------------------------------
int __thiscall sub_659579A0(_WORD *this)
{
  *(this + 11) = 0;
  *(this + 12) = 0;
  *(this + 13) = 0;
  *(this + 14) = 0;
  *(this + 15) = 0;
  *(this + 16) = 0;
  *(this + 17) = 0;
  *(this + 18) = 0;
  *(this + 19) = 0;
  return 0;
}

//----- (65957A10) --------------------------------------------------------
int __thiscall Production_GetRequirementValue(int this, int a2, unsigned __int8 a3)
{
  char *VariantEntry; // eax
  int v6; // esi
  char *v7; // esi
  char *v8; // eax

  VariantEntry = PersonalityTable_GetVariantEntry(*(_BYTE *)(this + 4), *(_BYTE *)(this + 12));
  if ( !VariantEntry )
    return 0;
  if ( a3 == 1 )
  {
    v6 = *(_DWORD *)(this + 16);
    if ( !v6 || v6 != a2 )
      return 0;
  }
  else if ( a3 <= 1u || a3 > 5u )
  {
    return 0;
  }
  v7 = 0;
  if ( VariantEntry[4] == a3 )
    v7 = VariantEntry + 4;
  if ( VariantEntry[12] == a3 )
    v7 = VariantEntry + 12;
  v8 = VariantEntry + 20;
  if ( *v8 == a3 )
    v7 = v8;
  if ( !v7 )
    return 0;
  return *((_DWORD *)v7 + 1);
}

//----- (65957E30) --------------------------------------------------------
char __thiscall Production_ApplySkillModifiers(int this, int a2, char **a3)
{
  int v4; // eax
  char *VariantEntry; // eax
  char *v7; // ecx
  char *v8; // eax
  unsigned __int8 v9; // al
  int v11; // [esp+1Ch] [ebp+Ch]
  float v12; // [esp+1Ch] [ebp+Ch]

  v4 = *(_DWORD *)(this + 16);
  if ( v4 && a2 == v4 )
  {
    VariantEntry = PersonalityTable_GetVariantEntry(*(_BYTE *)(this + 4), *(_BYTE *)(this + 12));
    if ( !VariantEntry )
      return (char)VariantEntry;
    v7 = 0;
    if ( VariantEntry[4] == 1 )
      v7 = VariantEntry + 4;
    if ( VariantEntry[12] == 1 )
      v7 = VariantEntry + 12;
    v8 = VariantEntry + 20;
    if ( *v8 == 1 )
      v7 = v8;
    if ( v7 )
      *a3 = (char *)(__int64)((1.0 - (double)*((int *)v7 + 1) / 100.0) * (double)(unsigned int)*a3);
  }
  LOBYTE(VariantEntry) = SkillType_UsesMultiplier(*(_BYTE *)(this + 4));
  if ( (_BYTE)VariantEntry )
  {
    v9 = *(_BYTE *)(this + 5);
    if ( v9 < 6u )
      v11 = *(unsigned __int16 *)(this + 2 * v9 + 364);
    else
      v11 = *(unsigned __int16 *)(this + 370);
    v12 = (double)v11 / 100.0;
    VariantEntry = (char *)(__int64)((v12 + 1.0) * (double)(unsigned int)*a3);
    *a3 = VariantEntry;
  }
  return (char)VariantEntry;
}

//----- (65957F50) --------------------------------------------------------
double __thiscall Production_GetSkillMultiplier(int this)
{
  unsigned __int8 v1; // al

  v1 = *(_BYTE *)(this + 5);
  if ( v1 < 6u )
    return (float)((double)*(unsigned __int16 *)(this + 2 * v1 + 364) / 100.0);
  else
    return (float)((double)*(unsigned __int16 *)(this + 370) / 100.0);
}

//----- (6595A690) --------------------------------------------------------
_DWORD *__cdecl sub_6595A690(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *result; // eax

  for ( result = a1; result != a2; result += 2 )
  {
    *result = *a3;
    result[1] = a3[1];
  }
  return result;
}

//----- (6595A960) --------------------------------------------------------
_DWORD *__cdecl sub_6595A960(int a1, int a2, _DWORD *a3)
{
  int v3; // ecx
  _DWORD *result; // eax
  int v5; // esi

  v3 = a2;
  for ( result = a3; v3 != a1; result[1] = *(_DWORD *)(v3 + 4) )
  {
    v5 = *(_DWORD *)(v3 - 8);
    v3 -= 8;
    result -= 2;
    *result = v5;
  }
  return result;
}

//----- (6595A990) --------------------------------------------------------
void __cdecl U32Pair_FillN(_DWORD *a1, int a2, _DWORD *a3)
{
  int i; // ecx

  for ( i = a2; i; a1 += 2 )
  {
    if ( a1 )
    {
      *a1 = *a3;
      a1[1] = a3[1];
    }
    --i;
  }
}

//----- (6595A9C0) --------------------------------------------------------
char *__thiscall sub_6595A9C0(_DWORD *this, char *a2)
{
  unsigned int v2; // edi
  char *result; // eax
  unsigned int i; // esi
  char *v5; // [esp-Ch] [ebp-24h]
  _BYTE v7[4]; // [esp+10h] [ebp-8h] BYREF
  unsigned int v8; // [esp+14h] [ebp-4h] BYREF

  v2 = (*(this + 2) - *(this + 1)) >> 3;
  v8 = v2;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v8, (int)v7, 4u);
    v5 = v7;
  }
  else
  {
    v5 = (char *)&v8;
  }
  result = BitStream_WriteBitsCompressed(a2, v5, 0x20u, 1);
  for ( i = 0; i < v2; ++i )
    result = (char *)sub_6595A870(*(this + 1) + 8 * i, a2);
  return result;
}
// 6595A870: using guessed type int __thiscall sub_6595A870(_DWORD, _DWORD);

//----- (6595ABD0) --------------------------------------------------------
_DWORD *__stdcall sub_6595ABD0(_DWORD *a1, int a2, _DWORD *a3)
{
  U32Pair_FillN(a1, a2, a3);
  return &a1[2 * a2];
}

//----- (6595AE10) --------------------------------------------------------
_DWORD *__stdcall sub_6595AE10(_DWORD *a1, _DWORD *a2, _DWORD *a3)
{
  return CopyArray8(a1, a2, a3);
}

//----- (6595AE90) --------------------------------------------------------
void __thiscall U32PairList_InsertRange(int this, char *a2, unsigned int a3, int *a4)
{
  int v5; // edx
  unsigned int v6; // ecx
  char *v7; // edi
  int v8; // eax
  unsigned int v9; // ecx
  char *Checked2; // edi
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  int v13; // eax
  int v14; // ebx
  int v15; // edx
  void *v16; // edx
  char *v17; // ebx
  _DWORD *v18; // [esp-20h] [ebp-4Ch]
  _DWORD *v19; // [esp-Ch] [ebp-38h]
  int v20; // [esp-8h] [ebp-34h]
  int v21[4]; // [esp+0h] [ebp-2Ch] BYREF
  int v22; // [esp+10h] [ebp-1Ch] BYREF
  void *v23; // [esp+14h] [ebp-18h]
  unsigned int v24; // [esp+18h] [ebp-14h]
  int *v25; // [esp+1Ch] [ebp-10h]
  int v26; // [esp+28h] [ebp-4h]

  v25 = v21;
  v5 = *(_DWORD *)(this + 4);
  if ( v5 )
    v6 = (*(_DWORD *)(this + 12) - v5) >> 3;
  else
    v6 = 0;
  if ( a3 )
  {
    v7 = *(char **)(this + 8);
    v8 = (int)&v7[-v5] >> 3;
    if ( 0x1FFFFFFF - v8 < a3 )
      Vector_ThrowLengthError_v4(v21[0], v21[1]);
    if ( v6 >= v8 + a3 )
    {
      if ( (v7 - a2) >> 3 >= a3 )
      {
        v16 = (void *)a4[1];
        v17 = &v7[-8 * a3];
        v22 = *a4;
        v23 = v16;
        *(_DWORD *)(this + 8) = sub_6595AE10(v17, v7, v7);
        sub_6595A960((int)a2, (int)v17, v7);
        sub_6595A690(a2, &a2[8 * a3], &v22);
      }
      else
      {
        v15 = *a4;
        v23 = (void *)a4[1];
        v22 = v15;
        sub_6595AE10(a2, v7, &a2[8 * a3]);
        v20 = a3 - ((*(_DWORD *)(this + 8) - (int)a2) >> 3);
        v19 = *(_DWORD **)(this + 8);
        v26 = 2;
        sub_6595ABD0(v19, v20, &v22);
        *(_DWORD *)(this + 8) += 8 * a3;
        sub_6595A690(a2, (_DWORD *)(*(_DWORD *)(this + 8) - 8 * a3), &v22);
      }
    }
    else
    {
      if ( 0x1FFFFFFF - (v6 >> 1) >= v6 )
      {
        v9 = (v6 >> 1) + v6;
        v24 = v9;
      }
      else
      {
        v24 = 0;
        v9 = 0;
      }
      if ( v9 < v8 + a3 )
      {
        v24 = v8 + a3;
        v9 = v8 + a3;
      }
      Checked2 = (char *)Vector8_AllocateChecked2(v9);
      v18 = *(_DWORD **)(this + 4);
      v23 = Checked2;
      v26 = 0;
      v11 = CopyArray8(v18, a2, Checked2);
      v12 = sub_6595ABD0(v11, a3, a4);
      CopyArray8(a2, *(_DWORD **)(this + 8), v12);
      v13 = *(_DWORD *)(this + 4);
      v14 = ((*(_DWORD *)(this + 8) - v13) >> 3) + a3;
      if ( v13 )
        operator delete(*(void **)(this + 4));
      *(_DWORD *)(this + 12) = &Checked2[8 * v24];
      *(_DWORD *)(this + 8) = &Checked2[8 * v14];
      *(_DWORD *)(this + 4) = Checked2;
    }
  }
}

//----- (6595B1D0) --------------------------------------------------------
char __thiscall Packet_ID_MARKET_read_listE(char **this, unsigned int *a2)
{
  unsigned int *v2; // ebx
  unsigned int v4; // eax
  int v5; // ecx
  unsigned int v6; // eax
  char *v7; // esi
  char v9[4]; // [esp+Ch] [ebp-18h] BYREF
  int v10; // [esp+10h] [ebp-14h] BYREF
  int v11; // [esp+14h] [ebp-10h]
  char v12[4]; // [esp+18h] [ebp-Ch] BYREF
  unsigned int v13; // [esp+1Ch] [ebp-8h]
  unsigned int v14; // [esp+20h] [ebp-4h] BYREF

  v2 = a2;
  v14 = 0;
  LOBYTE(v4) = RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v14);
  *(_WORD *)v9 = 0;
  v10 = 0;
  v13 = 0;
  if ( v14 )
  {
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, (char *)&a2, 0x10u, 1) )
          ByteSwapCopy((int)&a2, (int)v9, 2u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, v9, 0x10u, 1);
      }
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, v12, 0x20u, 1) )
          ByteSwapCopy((int)v12, (int)&v10, 4u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v10, 0x20u, 1);
      }
      v5 = (int)*(this + 1);
      if ( v5 )
        v6 = (int)&(*(this + 3))[-v5] >> 3;
      else
        v6 = 0;
      v7 = *(this + 2);
      if ( (int)&v7[-v5] >> 3 >= v6 )
      {
        U32PairList_InsertRange((int)this, v7, 1u, (int *)v9);
      }
      else
      {
        LOBYTE(v11) = 0;
        U32Pair_FillN(v7, 1, v9);
        *(this + 2) = v7 + 8;
      }
      v4 = v13 + 1;
      v13 = v4;
    }
    while ( v4 < v14 );
  }
  return v4;
}

//----- (6595B880) --------------------------------------------------------
char __thiscall MarketFilter_MatchesItem(unsigned __int8 *this, char a2, unsigned __int16 *a3, _DWORD *a4)
{
  unsigned __int16 v5; // ax

  if ( *this && *this < 0x19u && *this != ItemTemplate_GetType(g_ItemTemplateById, *a3) )
    return 0;
  v5 = *((_WORD *)this + 1);
  if ( v5 )
  {
    if ( v5 < 0xBC1u && v5 != *a3 )
      return 0;
  }
  if ( *(this + 4) && !ItemStatModifier_MeetsReqFromTemplateTable(a4, *a3)
    || *(this + 1) && *(this + 1) != sub_65933EC0(g_ItemTemplateById, *a3) )
  {
    return 0;
  }
  if ( *(this + 5) )
  {
    if ( !a2 )
      return 0;
  }
  else if ( a2 )
  {
    return 0;
  }
  return 1;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6595BF00) --------------------------------------------------------
void __cdecl sub_6595BF00(int a1, int a2, int a3)
{
  int i; // ecx

  for ( i = a2; i; a1 += 6 )
  {
    if ( a1 )
    {
      *(_DWORD *)a1 = *(_DWORD *)a3;
      *(_WORD *)(a1 + 4) = *(_WORD *)(a3 + 4);
    }
    --i;
  }
}

//----- (6595BF30) --------------------------------------------------------
char *__thiscall sub_6595BF30(_DWORD *this, char *a2)
{
  int v3; // edi
  char *result; // eax
  int v5; // esi
  char v6[4]; // [esp+8h] [ebp-8h] BYREF
  int v7; // [esp+Ch] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 6;
  v7 = v3;
  if ( Net_IsBigEndian() )
  {
    ByteSwapCopy((int)&v7, (int)v6, 4u);
    result = BitStream_WriteBitsCompressed(a2, v6, 0x20u, 1);
  }
  else
  {
    result = BitStream_WriteBitsCompressed(a2, (char *)&v7, 0x20u, 1);
  }
  if ( v3 )
  {
    v5 = 0;
    do
    {
      result = (char *)sub_6595BDC0(v5 + *(this + 1), a2);
      v5 += 6;
      --v3;
    }
    while ( v3 );
  }
  return result;
}
// 6595BDC0: using guessed type int __thiscall sub_6595BDC0(_DWORD, _DWORD);

//----- (6595C6C0) --------------------------------------------------------
_DWORD *__thiscall sub_6595C6C0(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 6 )
    v6 = (a3 - v5) / 6;
  else
    v6 = 0;
  sub_6595C400(a3, (void *)1, a4);
  *a2 = *(this + 1) + 6 * v6;
  return a2;
}

//----- (6595C720) --------------------------------------------------------
void __thiscall MarketListD_Insert(int *this, int a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  int v5; // edi

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 6;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - v3) / 6 >= v4 )
  {
    sub_6595C6C0(this, &a2, v5, a2);
  }
  else
  {
    sub_6595BF00(v5, 1, a2);
    *(this + 2) = v5 + 6;
  }
}

//----- (6595C7B0) --------------------------------------------------------
void __thiscall Packet_ID_MARKET_read_listD(int *this, unsigned int *a2)
{
  unsigned int *v2; // esi
  unsigned int v4; // ebx
  __int16 v5; // [esp+Ch] [ebp-10h] BYREF
  char v6[2]; // [esp+Eh] [ebp-Eh] BYREF
  char v7[4]; // [esp+10h] [ebp-Ch] BYREF
  unsigned int v8; // [esp+14h] [ebp-8h] BYREF
  char v9[4]; // [esp+18h] [ebp-4h] BYREF

  v2 = a2;
  v4 = 0;
  v8 = 0;
  RakNet::BitStream::ReadCompressed_T_uint(a2, (char *)&v8);
  v5 = 0;
  v6[0] = 0;
  *(_WORD *)v7 = 0;
  if ( v8 )
  {
    do
    {
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, (char *)&a2, 0x10u, 1) )
          ByteSwapCopy((int)&a2, (int)&v5, 2u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, (char *)&v5, 0x10u, 1);
      }
      RakNet::BitStream::ReadCompressed(v2, v6, 8u, 1);
      if ( Net_IsBigEndian() )
      {
        if ( RakNet::BitStream::ReadCompressed(v2, v9, 0x10u, 1) )
          ByteSwapCopy((int)v9, (int)v7, 2u);
      }
      else
      {
        RakNet::BitStream::ReadCompressed(v2, v7, 0x10u, 1);
      }
      MarketListD_Insert(this, (int)&v5);
      ++v4;
    }
    while ( v4 < v8 );
  }
}

//----- (6595FF80) --------------------------------------------------------
bool __thiscall ItemStructAPlus_u32_u32_u32_read(char *this, unsigned int *a2)
{
  ItemStructA_Read(this, a2);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 32);
  RakNet::BitStream::ReadCompressed_T_uint(a2, this + 36);
  return RakNet::BitStream::ReadCompressed_T_uint(a2, this + 40);
}

//----- (65960100) --------------------------------------------------------
char *__usercall sub_65960100@<eax>(char *result@<eax>, char *a2, int a3, const void *a4)
{
  int v4; // edx

  v4 = a3;
  if ( a3 )
  {
    result = a2;
    do
    {
      if ( result )
        qmemcpy(result, a4, 0x2Cu);
      --v4;
      result += 44;
    }
    while ( v4 );
  }
  return result;
}

//----- (659601C0) --------------------------------------------------------
char *__thiscall sub_659601C0(_DWORD *this, char *a2)
{
  int v3; // ebx
  char *result; // eax
  int v5; // edi
  char v6[4]; // [esp+8h] [ebp-4h] BYREF

  v3 = (*(this + 2) - *(this + 1)) / 44;
  v6[0] = (char)(*((_BYTE *)this + 8) - *((_BYTE *)this + 4)) / 44;
  result = BitStream_WriteBitsCompressed(a2, v6, 8u, 1);
  if ( (_BYTE)v3 )
  {
    v5 = 0;
    v3 = (unsigned __int8)v3;
    do
    {
      result = (char *)sub_6595FEA0(v5 + *(this + 1), a2);
      v5 += 44;
      --v3;
    }
    while ( v3 );
  }
  return result;
}
// 6595FEA0: using guessed type int __thiscall sub_6595FEA0(_DWORD, _DWORD);

//----- (65966880) --------------------------------------------------------
_DWORD *__thiscall sub_65966880(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 44 )
    v6 = (a3 - v5) / 44;
  else
    v6 = 0;
  sub_65965E20(this, a3, 1, a4);
  *a2 = *(this + 1) + 44 * v6;
  return a2;
}
// 65965E20: using guessed type int __thiscall sub_65965E20(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65967630) --------------------------------------------------------
char *__thiscall sub_65967630(char **this, char *a2)
{
  int v3; // ebx
  unsigned int v4; // ecx
  char *v5; // edi
  char *result; // eax

  v3 = (int)*(this + 1);
  if ( v3 )
    v4 = (int)&(*(this + 3))[-v3] / 44;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (int)&v5[-v3] / 44 >= v4 )
    return (char *)sub_65966880(this, &a2, (int)v5, (int)a2);
  result = sub_65960100(a2, v5, 1, a2);
  *(this + 2) = v5 + 44;
  return result;
}

//----- (65967840) --------------------------------------------------------
unsigned __int8 __thiscall Packet_ID_MARKET_read_listA(char **this, unsigned int *a2)
{
  unsigned __int8 result; // al
  char v4[4]; // [esp+Ch] [ebp-40h] BYREF
  char v5[4]; // [esp+10h] [ebp-3Ch] BYREF
  char v6[6]; // [esp+14h] [ebp-38h] BYREF
  unsigned __int8 i; // [esp+1Ah] [ebp-32h]
  unsigned __int8 v8; // [esp+1Bh] [ebp-31h] BYREF
  __int16 v9; // [esp+1Ch] [ebp-30h] BYREF
  __int16 v10; // [esp+1Eh] [ebp-2Eh]
  __int16 v11; // [esp+20h] [ebp-2Ch]
  __int16 v12; // [esp+22h] [ebp-2Ah]
  char v13; // [esp+24h] [ebp-28h]
  char v14; // [esp+25h] [ebp-27h]
  int v15; // [esp+28h] [ebp-24h]
  int v16; // [esp+2Ch] [ebp-20h]
  int v17; // [esp+30h] [ebp-1Ch]
  char v18; // [esp+34h] [ebp-18h]
  char v19; // [esp+35h] [ebp-17h]
  char v20; // [esp+36h] [ebp-16h]
  int v21; // [esp+37h] [ebp-15h]
  int v22; // [esp+3Ch] [ebp-10h] BYREF
  int v23; // [esp+40h] [ebp-Ch] BYREF
  int v24; // [esp+44h] [ebp-8h] BYREF

  v8 = 0;
  RakNet::BitStream::ReadCompressed(a2, (char *)&v8, 8u, 1);
  result = 0;
  v9 = 0;
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v13 = 100;
  v14 = 0;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v19 = 0;
  v20 = 0;
  v18 = 0;
  v21 = 0;
  v22 = 999999999;
  v23 = 0;
  v24 = 0;
  for ( i = 0; result < v8; i = result )
  {
    v11 = 0;
    v9 = 0;
    v10 = 0;
    v12 = 0;
    v13 = 100;
    v14 = 0;
    v15 = 0;
    v16 = 0;
    v17 = 0;
    v19 = 0;
    v20 = 0;
    v18 = 0;
    v21 = 0;
    v22 = 999999999;
    v23 = 0;
    v24 = 0;
    ItemStructA_Read((char *)&v9, a2);
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(a2, v6, 0x20u, 1) )
        ByteSwapCopy((int)v6, (int)&v22, 4u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(a2, (char *)&v22, 0x20u, 1);
    }
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(a2, v4, 0x20u, 1) )
        ByteSwapCopy((int)v4, (int)&v23, 4u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(a2, (char *)&v23, 0x20u, 1);
    }
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(a2, v5, 0x20u, 1) )
        ByteSwapCopy((int)v5, (int)&v24, 4u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(a2, (char *)&v24, 0x20u, 1);
    }
    sub_65967630(this, (char *)&v9);
    result = i + 1;
  }
  return result;
}

//----- (6596AC60) --------------------------------------------------------
char __cdecl ProductionCalcA(int a1, int a2)
{
  unsigned int v3; // eax
  double v4; // st7
  double v6; // st7
  unsigned int v7; // eax
  double v8; // st7
  int v9; // edx
  int v10; // ecx
  unsigned int v11; // eax
  int v12; // ecx
  char v13[4]; // [esp+4h] [ebp-64h] BYREF
  unsigned int v14; // [esp+8h] [ebp-60h]
  int v15; // [esp+Ch] [ebp-5Ch]
  __int64 v16; // [esp+60h] [ebp-8h]
  float v17; // [esp+74h] [ebp+Ch]
  float v18; // [esp+74h] [ebp+Ch]
  float v19; // [esp+74h] [ebp+Ch]

  if ( *(_DWORD *)a2 != 2 )
  {
    if ( *(_DWORD *)a2 == 3 )
    {
      v6 = (double)*(unsigned __int16 *)(a2 + 4);
      v18 = 5.0 * v6;
      v19 = v18 - v6 * (v6 * 1.5 / 10000.0);
      v16 = (__int64)(v19 * (1.0 - *(float *)(a2 + 8)));
      v7 = v16;
      *(_DWORD *)(a2 + 28) = v16;
      v8 = *(float *)(a2 + 12) * (double)v7;
      v16 = (__int64)v8;
      *(_DWORD *)(a2 + 32) = (__int64)v8;
      return 1;
    }
    if ( *(_DWORD *)a2 == 4 )
    {
      v17 = ((double)*(unsigned __int8 *)(a2 + 16) * 0.2000000029802322 + 0.800000011920929)
          * ((double)*(unsigned __int16 *)(a2 + 4)
           * 10.0);
      v16 = (__int64)(v17 * (1.0 - *(float *)(a2 + 8)));
      v3 = v16;
      *(_DWORD *)(a2 + 28) = v16;
      v4 = *(float *)(a2 + 12) * (double)v3;
      v16 = (__int64)v4;
      *(_DWORD *)(a2 + 32) = (__int64)v4;
      return 1;
    }
    return 0;
  }
  if ( !ItemTemplate_CopyVariantByIndex(*(_WORD *)(a2 + 6), *(_BYTE *)(a2 + 24), v13) )
    return 0;
  if ( *(_BYTE *)(a2 + 17) )
  {
    v16 = (__int64)((double)v14 * 1.5 * (double)*(unsigned __int16 *)(a2 + 4));
    *(_DWORD *)(a2 + 40) += v16;
  }
  if ( *(_BYTE *)(a2 + 18) )
    *(_DWORD *)(a2 + 40) += 5 * *(unsigned __int16 *)(a2 + 4);
  v9 = *(_DWORD *)(a2 + 40);
  v10 = v15 * *(unsigned __int16 *)(a2 + 4);
  *(_DWORD *)(a2 + 36) = v15;
  v11 = v10 + v9;
  v12 = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(a2 + 28) = v11;
  if ( v12 )
  {
    v16 = (__int64)((1.0 - (double)v12 / 100.0) * (double)v11);
    *(_DWORD *)(a2 + 28) = v16;
  }
  v16 = (__int64)(*(float *)(a2 + 12) * (double)*(unsigned int *)(a2 + 28));
  *(_DWORD *)(a2 + 32) = v16;
  return 1;
}

//----- (6596AEC0) --------------------------------------------------------
double __cdecl sub_6596AEC0(char a1, __int16 a2)
{
  double result; // st7

  switch ( a1 )
  {
    case 2:
      switch ( a2 )
      {
        case 1152:
        case 1154:
        case 1155:
        case 1157:
        case 1158:
        case 1159:
        case 1170:
        case 1174:
          goto LABEL_3;
        default:
          goto LABEL_14;
      }
    case 6:
    case 25:
      if ( a2 == 1172 )
        return 0.60000002;
      if ( a2 != 1176 )
        goto LABEL_14;
LABEL_18:
      result = 0.5;
      break;
    case 9:
      switch ( a2 )
      {
        case 1151:
        case 1152:
        case 1154:
        case 1155:
        case 1157:
        case 1158:
        case 1159:
        case 1170:
        case 1174:
          goto LABEL_3;
        case 1166:
        case 1173:
          goto LABEL_5;
        case 1167:
        case 1171:
          goto LABEL_18;
        default:
          goto LABEL_14;
      }
    case 14:
      switch ( a2 )
      {
        case 1163:
          goto LABEL_18;
        case 1164:
          result = 0.40000001;
          break;
        case 1169:
LABEL_5:
          result = 0.30000001;
          break;
        default:
LABEL_14:
          result = 0.0;
          break;
      }
      break;
    case 19:
      switch ( a2 )
      {
        case 1152:
        case 1154:
        case 1155:
        case 1157:
        case 1158:
        case 1159:
        case 1170:
        case 1174:
        case 1177:
          goto LABEL_3;
        case 1165:
          goto LABEL_5;
        case 1168:
          result = 0.69999999;
          break;
        default:
          goto LABEL_14;
      }
      return result;
    case 29:
      switch ( a2 )
      {
        case 1152:
        case 1154:
        case 1155:
        case 1157:
        case 1158:
        case 1159:
        case 1170:
        case 1174:
          result = 0.02;
          break;
        case 1153:
          goto LABEL_18;
        case 1156:
LABEL_3:
          result = 0.2;
          break;
        case 1161:
          return 0.60000002;
        default:
          goto LABEL_14;
      }
      return result;
    default:
      goto LABEL_14;
  }
  return result;
}

//----- (6596B550) --------------------------------------------------------
char __cdecl ProductionCalcB(unsigned __int8 a1, int a2)
{
  unsigned int v3; // eax
  int v4; // eax
  unsigned int v6; // eax
  int v7; // ecx
  int *v8; // edi
  double v9; // st7
  double X; // [esp+Ch] [ebp-68h] BYREF
  int v11; // [esp+1Ch] [ebp-58h]
  __int64 v12; // [esp+6Ch] [ebp-8h]
  float v13; // [esp+80h] [ebp+Ch]
  float v14; // [esp+80h] [ebp+Ch]
  float v15; // [esp+80h] [ebp+Ch]
  unsigned __int16 v16; // [esp+82h] [ebp+Eh]

  if ( *(_DWORD *)a2 != 2 )
  {
    if ( *(_DWORD *)a2 == 4 )
    {
      v3 = *(_DWORD *)(a2 + 24);
      v13 = (double)v3 * 10.0;
      if ( v3 > 0xA )
        v13 = v13 - 0.25 * v13 / 90.0 * (double)(v3 - 10);
      if ( a1 >= 2u )
        v13 = v13 * 0.8999999761581421;
      HIDWORD(v12) = *(_DWORD *)(a2 + 32);
      if ( HIDWORD(v12) )
        v13 = (1.0 - (double)SHIDWORD(v12) / 100.0) * v13;
      if ( *(_BYTE *)(a2 + 28) )
        v13 = v13 * 0.800000011920929;
      v12 = (__int64)v13;
      v4 = v12;
      *(_DWORD *)(a2 + 40) = v12;
      if ( !v4 )
      {
        *(_DWORD *)(a2 + 40) = 10;
        return 1;
      }
      return 1;
    }
    return 0;
  }
  if ( !ItemTemplate_CopyVariantByIndex(*(_WORD *)(a2 + 4), *(_BYTE *)(a2 + 37), (char *)&X + 4) )
    return 0;
  v6 = *(_DWORD *)(a2 + 24);
  v7 = v11 * v6;
  v8 = (int *)(a2 + 40);
  v16 = (v11 * v6) >> 16;
  *(_DWORD *)(a2 + 40) = v11 * v6;
  if ( v6 > 0xA )
  {
    v16 = HIWORD(v6);
    v12 = (__int64)((double)v7 * 0.25 / 90.0 * ((double)v6 - 10.0));
    *v8 = v7 - v12;
  }
  HIDWORD(v12) = *(_DWORD *)(a2 + 32);
  if ( HIDWORD(v12) )
  {
    v9 = (double)SHIDWORD(v12) / 100.0;
    HIDWORD(v12) = v16 | 0xC00;
    v12 = (__int64)((1.0 - v9) * (double)*v8);
    *v8 = v12;
  }
  if ( a1 >= 2u )
  {
    v14 = (double)*v8 * 0.8999999761581421;
    v15 = ceil(v14);
    *v8 = (int)v15;
  }
  if ( *v8 <= 0 )
    *v8 = 1;
  if ( *(_BYTE *)(a2 + 36) )
    *v8 *= 2;
  return 1;
}

//----- (6596BE40) --------------------------------------------------------
char *__thiscall Write_QuantVec3_And9(char *this, char *a2)
{
  Write_QuantVec3((int)this, a2);
  return BitStream_WriteBits(a2, this + 12, 9u, 1);
}

//----- (6596BE70) --------------------------------------------------------
char __thiscall Read_QuantVec3_9bit(int this, _DWORD *a2)
{
  Read_QuantVec3(a2);
  return BitStream_ReadBits(a2, (void *)(this + 12), 9u, 1);
}
// 65972500: using guessed type int __stdcall Read_QuantVec3(_DWORD);

//----- (6596C0F0) --------------------------------------------------------
_WORD *__thiscall SkillDef_InitDefaults(_WORD *this)
{
  *(_DWORD *)this = 16;
  *(this + 2) = 0;
  *(this + 3) = 0;
  *(this + 4) = 0;
  *(this + 6) = 0;
  return this;
}

//----- (6596C410) --------------------------------------------------------
char __cdecl SkillDefTable_CopyEntry(unsigned __int16 a1, char *a2)
{
  if ( (unsigned __int16)(a1 - 1) > 0x26u )
    return 0;
  qmemcpy(a2, (char *)&unk_659E3500 + 84 * a1, 0x54u);
  return 1;
}

//----- (6596EC60) --------------------------------------------------------
_DWORD *__cdecl Sub6Entry_InitArray(_DWORD *a1, int a2, int a3)
{
  _DWORD *v3; // esi
  _DWORD *result; // eax
  _DWORD v6[7]; // [esp+0h] [ebp-28h] BYREF
  int v7; // [esp+24h] [ebp-4h]

  v6[6] = v6;
  v3 = a1;
  v6[5] = a1;
  v7 = 0;
  while ( a2 )
  {
    v6[4] = v3;
    LOBYTE(v7) = 1;
    if ( v3 )
      result = Sub6Entry_Copy(v3, a3);
    --a2;
    v3 += 15;
    LOBYTE(v7) = 0;
  }
  return result;
}
// 65805F40: using guessed type int __thiscall sub_65805F40(_DWORD);

//----- (6596F1E0) --------------------------------------------------------
_DWORD *__thiscall sub_6596F1E0(_DWORD *this, _DWORD *a2, int a3, int a4)
{
  int v5; // esi
  int v6; // esi

  v5 = *(this + 1);
  if ( (*(this + 2) - v5) / 60 )
    v6 = (a3 - v5) / 60;
  else
    v6 = 0;
  sub_6596EEE0(this, a3, 1, a4);
  *a2 = *(this + 1) + 60 * v6;
  return a2;
}
// 6596EEE0: using guessed type int __thiscall sub_6596EEE0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (6596F250) --------------------------------------------------------
_DWORD *__thiscall Sub6EntryList_Push(_DWORD *this, int a2)
{
  int v3; // eax
  unsigned int v4; // esi
  _DWORD *v5; // ebx
  _DWORD *result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 60;
  else
    v4 = 0;
  v5 = (_DWORD *)*(this + 2);
  if ( ((int)v5 - *(this + 1)) / 60 >= v4 )
    return sub_6596F1E0(this, &a2, (int)v5, a2);
  result = Sub6Entry_InitArray(v5, 1, a2);
  *(this + 2) = v5 + 15;
  return result;
}

//----- (6596F2E0) --------------------------------------------------------
void __thiscall Packet_ID_7B_ReadSubId6List(char *this, unsigned int *bs)
{
  unsigned int *bs_ptr; // esi
  unsigned __int8 entry_idx; // bl
  char *tmp_u32_ptr; // edi
  char *tmp_u32_ptr2; // ebx
  char *tmp_u32_ptr3; // edi
  char entry_key[4]; // [esp+10h] [ebp-54h] BYREF
  int entry_mask; // [esp+14h] [ebp-50h] BYREF
  char entry_u16_a[4]; // [esp+18h] [ebp-4Ch] BYREF
  char entry_u16_b[4]; // [esp+1Ch] [ebp-48h] BYREF
  char faction_listB[4]; // [esp+20h] [ebp-44h] BYREF
  void *tmp_vec; // [esp+28h] [ebp-3Ch]
  int tmp_vec_len; // [esp+2Ch] [ebp-38h]
  char faction_listC[8]; // [esp+34h] [ebp-30h] BYREF
  void *tmp_vec2; // [esp+3Ch] [ebp-28h]
  int tmp_len2; // [esp+40h] [ebp-24h]
  int tmp_len3; // [esp+44h] [ebp-20h]
  char *self_ptr; // [esp+4Ch] [ebp-18h]
  char tmp_u16buf[7]; // [esp+50h] [ebp-14h] BYREF
  unsigned __int8 entry_count; // [esp+57h] [ebp-Dh] BYREF
  int i; // [esp+60h] [ebp-4h]

  self_ptr = this;
  bs_ptr = bs;
  entry_count = 0;
  RakNet::BitStream::ReadCompressed(bs, (char *)&entry_count, 8u, 1);
  Sub6Entry_Init((int)entry_key);
  entry_idx = 0;
  for ( i = 0; entry_idx < entry_count; ++entry_idx )
  {
    RakNet::BitStream::ReadCompressed(bs_ptr, entry_key, 8u, 1);
    BitStream_ReadBits(bs_ptr, &entry_mask, 0x20u, 1);
    entry_mask = ~entry_mask;
    if ( Net_IsBigEndian() )
    {
      if ( BitStream_ReadBits(bs_ptr, &bs, 0x10u, 1) )
        ByteSwapCopy((int)&bs, (int)entry_u16_a, 2u);
    }
    else
    {
      BitStream_ReadBits(bs_ptr, entry_u16_a, 0x10u, 1);
    }
    if ( Net_IsBigEndian() )
    {
      if ( RakNet::BitStream::ReadCompressed(bs_ptr, tmp_u16buf, 0x10u, 1) )
        ByteSwapCopy((int)tmp_u16buf, (int)entry_u16_b, 2u);
    }
    else
    {
      RakNet::BitStream::ReadCompressed(bs_ptr, entry_u16_b, 0x10u, 1);
    }
    Packet_ID_FACTION_read_listB_entry(faction_listB, bs_ptr);
    Packet_ID_FACTION_read_listC_entry(faction_listC, bs_ptr);
    Sub6EntryList_Push(this, (int)entry_key);
    Sub6Entry_Reset(entry_key);
  }
  tmp_u32_ptr = this + 16;
  if ( Net_IsBigEndian() )
  {
    if ( RakNet::BitStream::ReadCompressed(bs_ptr, (char *)&bs, 0x20u, 1) )
      ByteSwapCopy((int)&bs, (int)tmp_u32_ptr, 4u);
  }
  else
  {
    RakNet::BitStream::ReadCompressed(bs_ptr, tmp_u32_ptr, 0x20u, 1);
  }
  tmp_u32_ptr2 = self_ptr;
  tmp_u32_ptr3 = self_ptr + 24;
  if ( Net_IsBigEndian() )
  {
    if ( RakNet::BitStream::ReadCompressed(bs_ptr, (char *)&bs, 0x20u, 1) )
      ByteSwapCopy((int)&bs, (int)tmp_u32_ptr3, 4u);
  }
  else
  {
    RakNet::BitStream::ReadCompressed(bs_ptr, tmp_u32_ptr3, 0x20u, 1);
  }
  if ( Net_IsBigEndian() )
  {
    if ( RakNet::BitStream::ReadCompressed(bs_ptr, (char *)&bs, 0x20u, 1) )
      ByteSwapCopy((int)&bs, (int)(tmp_u32_ptr2 + 20), 4u);
  }
  else
  {
    RakNet::BitStream::ReadCompressed(bs_ptr, tmp_u32_ptr2 + 20, 0x20u, 1);
  }
  if ( tmp_vec2 )
    operator delete(tmp_vec2);
  tmp_vec2 = 0;
  tmp_len2 = 0;
  tmp_len3 = 0;
  if ( tmp_vec )
  {
    PacketArray88_DestroyRange((int)tmp_vec, tmp_vec_len);
    operator delete(tmp_vec);
  }
}

//----- (6596F510) --------------------------------------------------------
char *__cdecl ItemStatModifierTable_GetEntry(int a1)
{
  if ( (unsigned int)(a1 - 1) > 0x72 )
    return 0;
  else
    return (char *)&unk_659E4250 + 156 * a1;
}

//----- (6596F530) --------------------------------------------------------
int __cdecl ItemStatModifierTable_GetLevelValue(int a1, unsigned __int8 a2)
{
  char *v2; // eax

  if ( (unsigned int)(a1 - 1) <= 0x72 && (v2 = (char *)&unk_659E4250 + 156 * a1) != 0 && a2 < (unsigned __int8)v2[9] )
    return *(_DWORD *)&v2[4 * a2 + 116];
  else
    return 0;
}

//----- (6596F570) --------------------------------------------------------
int __cdecl ItemStatModifier_GetValue(char a1, char a2)
{
  int result; // eax

  switch ( a1 )
  {
    case 18:
      switch ( a2 )
      {
        case 1:
          goto LABEL_3;
        case 2:
          goto LABEL_24;
        case 3:
          goto LABEL_16;
        case 4:
          goto LABEL_46;
        case 5:
          goto LABEL_25;
        default:
          goto LABEL_52;
      }
    case 24:
      switch ( a2 )
      {
        case 1:
          goto LABEL_3;
        case 2:
          goto LABEL_24;
        case 3:
          goto LABEL_16;
        case 4:
          goto LABEL_46;
        default:
          goto LABEL_52;
      }
    case 25:
      switch ( a2 )
      {
        case 1:
          result = 99;
          break;
        case 2:
          result = 98;
          break;
        case 3:
          result = 97;
          break;
        case 4:
          result = 96;
          break;
        case 5:
          result = 95;
          break;
        case 6:
          result = 94;
          break;
        case 7:
          result = 92;
          break;
        case 8:
          result = 90;
          break;
        case 9:
          result = 88;
          break;
        case 10:
          result = 86;
          break;
        default:
          goto LABEL_52;
      }
      return result;
    case 56:
      switch ( a2 )
      {
        case 2:
          goto LABEL_16;
        case 3:
          goto LABEL_17;
        case 4:
          goto LABEL_18;
        case 5:
          result = 12;
          break;
        case 6:
          goto LABEL_38;
        case 7:
          result = 18;
          break;
        case 8:
          result = 22;
          break;
        case 9:
          result = 26;
          break;
        case 10:
          goto LABEL_44;
        default:
          goto LABEL_52;
      }
      return result;
    case 57:
      switch ( a2 )
      {
        case 1:
          goto LABEL_3;
        case 2:
          goto LABEL_24;
        case 3:
          goto LABEL_16;
        case 4:
          goto LABEL_46;
        case 5:
          goto LABEL_25;
        default:
          goto LABEL_52;
      }
    case 58:
      switch ( a2 )
      {
        case 1:
LABEL_3:
          result = 1;
          break;
        case 2:
          goto LABEL_24;
        case 3:
          goto LABEL_16;
        case 4:
          goto LABEL_46;
        case 5:
          goto LABEL_25;
        default:
          goto LABEL_52;
      }
      return result;
    case 60:
    case 61:
    case 62:
    case 63:
    case 64:
    case 65:
    case 66:
    case 67:
    case 70:
    case 73:
    case 74:
    case 83:
    case 84:
    case 85:
    case 86:
    case 87:
    case 88:
    case 89:
    case 90:
    case 91:
    case 92:
    case 93:
    case 94:
    case 95:
    case 96:
    case 97:
    case 98:
    case 99:
    case 104:
    case 105:
    case 106:
    case 107:
    case 109:
    case 110:
    case 111:
      switch ( a2 )
      {
        case 1:
LABEL_24:
          result = 2;
          break;
        case 2:
LABEL_16:
          result = 3;
          break;
        case 3:
LABEL_25:
          result = 5;
          break;
        case 4:
          result = 7;
          break;
        case 5:
LABEL_18:
          result = 9;
          break;
        case 6:
          result = 11;
          break;
        case 7:
          result = 13;
          break;
        case 8:
          goto LABEL_38;
        case 9:
          result = 17;
          break;
        case 10:
          goto LABEL_30;
        default:
          goto LABEL_52;
      }
      return result;
    case 68:
    case 69:
      switch ( a2 )
      {
        case 1:
LABEL_46:
          result = 4;
          break;
        case 2:
LABEL_17:
          result = 6;
          break;
        case 3:
          result = 8;
          break;
        case 4:
          result = 10;
          break;
        case 5:
          goto LABEL_38;
        case 6:
LABEL_30:
          result = 20;
          break;
        default:
          goto LABEL_52;
      }
      return result;
    case 75:
      switch ( a2 )
      {
        case 1:
          result = 100;
          break;
        case 2:
          result = 125;
          break;
        case 3:
          result = 150;
          break;
        case 4:
          result = 175;
          break;
        case 5:
          result = 200;
          break;
        default:
          goto LABEL_52;
      }
      return result;
    case 79:
      if ( a2 != 1 )
        goto LABEL_52;
LABEL_38:
      result = 15;
      break;
    case 80:
      if ( a2 != 1 )
        goto LABEL_52;
      result = 25000;
      break;
    case 81:
      if ( a2 != 1 )
        goto LABEL_52;
      result = 1;
      break;
    case 82:
      if ( a2 != 1 )
        goto LABEL_52;
LABEL_44:
      result = 30;
      break;
    default:
LABEL_52:
      result = 0;
      break;
  }
  return result;
}

//----- (6596F900) --------------------------------------------------------
__int16 *__cdecl ItemId_GetDisplayName(unsigned __int16 a1)
{
  char SubType; // bl
  char Type; // al
  int v3; // esi
  unsigned int v4; // ecx
  char v5; // dl
  char v6; // dl

  if ( (unsigned __int16)(a1 - 1) > 0xBBFu )
    return 0;
  SubType = ItemTemplate_GetSubType(g_ItemTemplateById, a1);
  Type = ItemTemplate_GetType(g_ItemTemplateById, a1);
  v3 = 0;
  v4 = 0;
  while ( word_659E8908[v4] != a1 )
  {
    v5 = byte_659E890B[v4 * 2];
    if ( v5 )
    {
      if ( (unsigned __int8)v5 < 0x27u && v5 == SubType )
        break;
    }
    v6 = byte_659E890A[v4 * 2];
    if ( v6 )
    {
      if ( (unsigned __int8)v6 < 0x19u && v6 == Type )
        break;
    }
    v4 += 6;
    ++v3;
    if ( v4 >= 78 )
      return 0;
  }
  return &word_659E8908[6 * v3];
}
// 659E8908: using guessed type __int16 word_659E8908[];
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6596F990) --------------------------------------------------------
__int16 *__cdecl ItemStatReqTable_FindEntry(unsigned __int16 a1)
{
  char SubType; // bl
  char Type; // al
  int v3; // esi
  unsigned int v4; // ecx
  char v5; // dl
  char v6; // dl

  if ( (unsigned __int16)(a1 - 1) > 0xBBFu )
    return 0;
  SubType = ItemTemplate_GetSubType(g_ItemTemplateById, a1);
  Type = ItemTemplate_GetType(g_ItemTemplateById, a1);
  v3 = 0;
  v4 = 0;
  while ( word_659E89A8[v4] != a1 )
  {
    v5 = byte_659E89AB[v4 * 2];
    if ( v5 )
    {
      if ( (unsigned __int8)v5 < 0x27u && v5 == SubType )
        break;
    }
    v6 = byte_659E89AA[v4 * 2];
    if ( v6 )
    {
      if ( (unsigned __int8)v6 < 0x19u && v6 == Type )
        break;
    }
    v4 += 6;
    ++v3;
    if ( v4 >= 162 )
      return 0;
  }
  return &word_659E89A8[6 * v3];
}
// 659E89A8: using guessed type __int16 word_659E89A8[];
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6596FA20) --------------------------------------------------------
char __cdecl Item_CollectStatModifiers(unsigned __int16 a1, _DWORD *a2)
{
  unsigned __int16 v2; // bx
  char *v3; // esi
  char v4; // al
  unsigned __int8 v5; // al
  int v6; // edx
  unsigned int v7; // eax
  char *v8; // ecx
  int v10; // [esp+4h] [ebp-Ch]
  int v11; // [esp+8h] [ebp-8h] BYREF
  char Type; // [esp+Dh] [ebp-3h]
  char SubType; // [esp+Eh] [ebp-2h]
  char v14; // [esp+Fh] [ebp-1h]

  v2 = a1;
  if ( (unsigned __int16)(a1 - 1) > 0xBBFu )
    return 0;
  v14 = 0;
  Type = ItemTemplate_GetType(g_ItemTemplateById, a1);
  SubType = ItemTemplate_GetSubType(g_ItemTemplateById, a1);
  v3 = (char *)&g_ItemStatModifierTable;
  v10 = 14;
  do
  {
    if ( *((_WORD *)v3 - 1) == v2
      || (v4 = v3[1]) != 0 && (unsigned __int8)v4 < 0x27u && v4 == SubType
      || (v5 = *v3) != 0 && v5 < 0x19u && v5 == Type )
    {
      v11 = *(_DWORD *)(v3 + 2);
      v6 = a2[1];
      if ( v6 )
        v7 = (a2[3] - v6) >> 2;
      else
        v7 = 0;
      v8 = (char *)a2[2];
      if ( (int)&v8[-v6] >> 2 >= v7 )
      {
        Vector_InsertN((int)a2, v8, 1u, (unsigned int)&v11);
      }
      else
      {
        *(_DWORD *)v8 = v11;
        a2[2] = v8 + 4;
      }
      v2 = a1;
      v14 = 1;
    }
    v3 += 8;
    --v10;
  }
  while ( v10 );
  return v14;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (6596FB00) --------------------------------------------------------
int EntryTable_GetCount45()
{
  return 45;
}

//----- (6596FB10) --------------------------------------------------------
char **__cdecl EntryTable_GetByTypeIndex(unsigned __int16 a1, unsigned __int8 a2)
{
  unsigned int v2; // ecx
  char **result; // eax

  if ( a2 >= 0x2Du )
    return 0;
  v2 = dword_659E9E90[3 * a2];
  result = &off_659E9E88[3 * a2];
  switch ( v2 )
  {
    case 0u:
      if ( a1 != 11 )
        return 0;
      break;
    case 1u:
      if ( (unsigned __int16)(a1 - 12) > 0x27u )
        return 0;
      break;
    case 2u:
      if ( a1 < 0x34u )
        return 0;
      break;
    case 0x74u:
      if ( (unsigned __int16)(a1 - 114) > 0xAu )
        return 0;
      break;
    default:
      if ( v2 < 0xA || v2 != a1 )
        return 0;
      break;
  }
  return result;
}
// 659E9E88: using guessed type char *off_659E9E88[2];
// 659E9E90: using guessed type int dword_659E9E90[];

//----- (6596FC10) --------------------------------------------------------
const char *__cdecl Personality_GetName(char a1)
{
  const char *result; // eax

  switch ( a1 )
  {
    case 1:
      result = "Rude";
      break;
    case 2:
      result = "Paranoid";
      break;
    case 3:
      result = "Funny / Sarcastic";
      break;
    default:
      result = "Neutral";
      break;
  }
  return result;
}

//----- (6596FEA0) --------------------------------------------------------
int __thiscall U16Entry12_FindById(_DWORD *this, __int16 a2)
{
  int v2; // edi
  int v3; // esi
  unsigned int v4; // eax
  _WORD *i; // ecx

  v2 = *(this + 1);
  v3 = 0;
  v4 = (*(this + 2) - v2) / 12;
  if ( !v4 )
    return 0;
  for ( i = (_WORD *)*(this + 1); *i != a2; i += 6 )
  {
    if ( ++v3 >= v4 )
      return 0;
  }
  return v2 + 12 * v3;
}

//----- (65970590) --------------------------------------------------------
int __thiscall U16Entry12_SetValueById(_DWORD *this, __int16 a2, unsigned __int8 a3, unsigned __int16 a4)
{
  int result; // eax
  int v6; // ecx
  __int16 v7; // [esp+8h] [ebp-10h] BYREF
  int v8; // [esp+Ah] [ebp-Eh]
  int v9; // [esp+Eh] [ebp-Ah]
  unsigned __int16 v10; // [esp+12h] [ebp-6h]

  result = U16Entry12_FindById(this, a2);
  if ( result )
  {
    if ( a3 && a3 <= 5u )
    {
      *(_WORD *)(result + 2 * a3) = a4;
    }
    else
    {
      v6 = (a4 << 16) | a4;
      *(_DWORD *)(result + 2) = v6;
      *(_DWORD *)(result + 6) = v6;
      *(_WORD *)(result + 10) = a4;
    }
  }
  else
  {
    v8 = 0;
    v9 = 0;
    v10 = 0;
    v7 = a2;
    if ( a3 && a3 <= 5u )
    {
      *(&v7 + a3) = a4;
    }
    else
    {
      v8 = (a4 << 16) | a4;
      v9 = v8;
      v10 = a4;
    }
    return sub_657C9970(this, (int)&v7);
  }
  return result;
}

//----- (65970690) --------------------------------------------------------
unsigned int __thiscall U16Entry12_SetValueForItemType(_DWORD *this, char a2, unsigned __int8 a3, unsigned __int16 a4)
{
  unsigned int result; // eax
  __int16 v5; // si
  int v6; // eax
  int v7; // eax
  int v8; // ecx
  unsigned int v10; // [esp+10h] [ebp-14h]
  __int16 v11; // [esp+14h] [ebp-10h] BYREF
  int v12; // [esp+16h] [ebp-Eh]
  int v13; // [esp+1Ah] [ebp-Ah]
  unsigned __int16 v14; // [esp+1Eh] [ebp-6h]

  v12 = 0;
  v13 = 0;
  v14 = 0;
  LOWORD(result) = 0;
  v11 = 0;
  v10 = 0;
  do
  {
    v5 = result;
    if ( (unsigned __int16)(result - 1) <= 0xBBFu )
    {
      v6 = g_ItemTemplateById[(unsigned __int16)result];
      if ( v6 )
      {
        if ( *(_BYTE *)(v6 + 8) == a2 )
        {
          v7 = U16Entry12_FindById(this, v5);
          if ( v7 )
          {
            if ( a3 && a3 <= 5u )
            {
              *(_WORD *)(v7 + 2 * a3) = a4;
            }
            else
            {
              v8 = (a4 << 16) | a4;
              *(_DWORD *)(v7 + 2) = v8;
              *(_DWORD *)(v7 + 6) = v8;
              *(_WORD *)(v7 + 10) = a4;
            }
          }
          else
          {
            v11 = v5;
            if ( a3 && a3 <= 5u )
            {
              *(&v11 + a3) = a4;
            }
            else
            {
              v12 = (a4 << 16) | a4;
              v13 = v12;
              v14 = a4;
            }
            sub_657C9970(this, (int)&v11);
          }
        }
      }
    }
    result = v10 + 1;
    v10 = result;
  }
  while ( result < 0xBC1 );
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (659707B0) --------------------------------------------------------
int __thiscall U16Entry12_SetValueForAllItems(_DWORD *this, unsigned __int8 a2, unsigned __int16 a3)
{
  unsigned int i; // edi
  int result; // eax
  int v6; // [esp+Ch] [ebp-14h] BYREF
  __int16 v7; // [esp+10h] [ebp-10h] BYREF
  int v8; // [esp+12h] [ebp-Eh]
  int v9; // [esp+16h] [ebp-Ah]
  unsigned __int16 v10; // [esp+1Ah] [ebp-6h]

  Array12_EraseAndShift(this, &v6, (_DWORD *)*(this + 1), (_DWORD *)*(this + 2));
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v10 = 0;
  for ( i = 0; i < 0xBC1; ++i )
  {
    result = (unsigned __int16)i;
    if ( (unsigned __int16)(i - 1) <= 0xBBFu && g_ItemTemplateById[(unsigned __int16)i] )
    {
      v7 = i;
      if ( a2 && a2 <= 5u )
      {
        *(&v7 + a2) = a3;
      }
      else
      {
        v8 = (a3 << 16) | a3;
        v9 = v8;
        v10 = a3;
      }
      result = sub_657C9970(this, (int)&v7);
    }
  }
  return result;
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65970890) --------------------------------------------------------
unsigned int __thiscall U16Entry12_ApplyToGroup(char *this, unsigned __int8 a2, int a3, int a4, int a5, int a6)
{
  char *v7; // ecx
  unsigned int result; // eax
  unsigned int i; // esi

  if ( a2 < 6u && (v7 = this + 16 * a2) != 0 )
  {
    if ( (unsigned __int16)(a4 - 1) > 0xBBFu )
    {
      if ( (unsigned __int8)(a3 - 1) > 0x17u )
        return U16Entry12_SetValueForAllItems(v7, a5, a6);
      else
        return U16Entry12_SetValueForItemType(v7, a3, a5, a6);
    }
    else
    {
      return U16Entry12_SetValueById(v7, a4, a5, a6);
    }
  }
  else
  {
    for ( i = 0; i < 6; ++i )
      result = U16Entry12_ApplyToGroup(this, i, a3, a4, a5, a6);
  }
  return result;
}

//----- (65970930) --------------------------------------------------------
char *__cdecl PersonalityTable_GetEntry(unsigned __int8 a1)
{
  if ( (unsigned __int8)(a1 - 1) > 0xEu )
    return 0;
  else
    return &aT[84 * a1];
}

//----- (65970950) --------------------------------------------------------
char *__cdecl PersonalityTable_GetVariantEntry(unsigned __int8 a1, unsigned __int8 a2)
{
  if ( (unsigned __int8)(a1 - 1) <= 0xEu && a2 <= 3u && a2 )
    return &aFunnySarcastic[84 * a1 + 12 + 28 * a2];
  else
    return 0;
}

//----- (65970990) --------------------------------------------------------
double __cdecl Personality_GetWeight(char a1)
{
  double result; // st7

  switch ( a1 )
  {
    case 1:
    case 2:
    case 6:
    case 7:
    case 12:
    case 14:
      result = 0.1;
      break;
    case 3:
      result = 0.30000001;
      break;
    case 4:
      result = 0.25;
      break;
    case 5:
    case 8:
    case 9:
      result = 0.60000002;
      break;
    case 11:
      result = 0.69999999;
      break;
    default:
      result = 0.5;
      break;
  }
  return result;
}

//----- (65970A10) --------------------------------------------------------
_DWORD *__thiscall sub_65970A10(_DWORD *this)
{
  *this = &off_659EA8A4;
  *(this + 1) = 0;
  *(this + 2) = 0;
  return this;
}
// 659EA8A4: using guessed type void *off_659EA8A4;

//----- (65970A80) --------------------------------------------------------
unsigned int __stdcall sub_65970A80(_DWORD *a1)
{
  if ( a1 && a1[1] )
  {
    (*(void (**)(void))(*a1 + 8))();
    _endthreadex(0);
  }
  return 0;
}

//----- (65970AE0) --------------------------------------------------------
void *__thiscall Thread_StartWithPriority(void *ArgList, int nPriority)
{
  void *result; // eax

  result = (void *)_beginthreadex(
                     0,
                     0,
                     (_beginthreadex_proc_type)sub_65970A80,
                     ArgList,
                     4u,
                     (unsigned int *)ArgList + 2);
  *((_DWORD *)ArgList + 1) = result;
  if ( result )
  {
    SetThreadPriority(result, nPriority);
    if ( (*(unsigned __int8 (__thiscall **)(void *))(*(_DWORD *)ArgList + 4))(ArgList) )
      ResumeThread(*((HANDLE *)ArgList + 1));
    return (void *)*((_DWORD *)ArgList + 1);
  }
  return result;
}

//----- (65970C50) --------------------------------------------------------
char Timer_InitHighRes()
{
  double *v0; // eax
  LARGE_INTEGER *v2; // eax
  LARGE_INTEGER v3; // st7
  int v4; // eax
  _BYTE *v5; // ecx
  _BYTE v6[12]; // [esp-1Ch] [ebp-74h] BYREF
  LONGLONG v7; // [esp-10h] [ebp-68h]
  __int64 v8; // [esp-8h] [ebp-60h]
  _BYTE v9[28]; // [esp+4h] [ebp-54h] BYREF
  _BYTE v10[28]; // [esp+20h] [ebp-38h] BYREF
  __int64 v11; // [esp+3Ch] [ebp-1Ch] BYREF
  LONGLONG QuadPart; // [esp+44h] [ebp-14h]
  int v13; // [esp+54h] [ebp-4h]

  if ( !lpFrequency )
  {
    v0 = (double *)operator new(0x20u);
    if ( v0 )
    {
      *(_DWORD *)v0 = 0;
      v0[2] = 0.0;
      *((_DWORD *)v0 + 1) = 0;
      v0[1] = 0.0;
      *((_BYTE *)v0 + 24) = 0;
    }
    else
    {
      v0 = 0;
    }
    lpFrequency = (LARGE_INTEGER *)v0;
    if ( !v0 )
      return 0;
    timeBeginPeriod(1u);
    if ( QueryPerformanceFrequency(lpFrequency) )
    {
      v2 = lpFrequency;
      QuadPart = lpFrequency->QuadPart;
      v8 = 1000000;
      *(double *)&v3.QuadPart = 1.0 / (double)QuadPart;
      v7 = QuadPart;
      LOBYTE(lpFrequency[3].LowPart) = 1;
      v2[2] = v3;
      HIDWORD(QuadPart) = v6;
      v11 = v7 / v8;
      sub_65941650(v6, (unsigned int *)&v11);
      v4 = FormatString((int)v9, (int)"Timer: QPC available, Frequency = {0} MHz");
      v13 = 0;
      sub_6594F6B0(v4);
      v5 = v9;
    }
    else
    {
      *(double *)&lpFrequency[2].QuadPart = 0.001;
      std::string::string(v10, "Timer: QPC not available, using a standard timer resolution of 1 ms");
      v13 = 1;
      sub_6594F6B0((int)v10);
      v5 = v10;
    }
    v13 = -1;
    std::string::~string(v5);
  }
  return 1;
}
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);

//----- (65970DE0) --------------------------------------------------------
int __thiscall sub_65970DE0(_DWORD *this)
{
  *(_BYTE *)this = 0;
  *(this + 13) = 0;
  *(this + 1) = 0;
  *((_WORD *)this + 4) = 0;
  *((_WORD *)this + 5) = 0;
  *((_WORD *)this + 6) = 0;
  *((_WORD *)this + 7) = 0;
  *((_BYTE *)this + 16) = 100;
  *((_BYTE *)this + 17) = 0;
  *(this + 5) = 0;
  *(this + 6) = 0;
  *(this + 7) = 0;
  *((_BYTE *)this + 33) = 0;
  *((_BYTE *)this + 34) = 0;
  *((_BYTE *)this + 32) = 0;
  *(_DWORD *)((char *)this + 35) = 0;
  *(this + 10) = 0;
  *(this + 11) = 0;
  *((_BYTE *)this + 48) = 0;
  return 0;
}

//----- (65971200) --------------------------------------------------------
_DWORD *__thiscall sub_65971200(_DWORD *this)
{
  *(_BYTE *)this = 0;
  *(this + 13) = 0;
  *(this + 1) = 0;
  *((_WORD *)this + 4) = 0;
  *((_WORD *)this + 5) = 0;
  *((_WORD *)this + 6) = 0;
  *((_WORD *)this + 7) = 0;
  *((_BYTE *)this + 17) = 0;
  *(this + 5) = 0;
  *(this + 6) = 0;
  *(this + 7) = 0;
  *((_BYTE *)this + 33) = 0;
  *((_BYTE *)this + 34) = 0;
  *((_BYTE *)this + 32) = 0;
  *((_BYTE *)this + 16) = 100;
  *(_DWORD *)((char *)this + 35) = 0;
  *(this + 10) = 0;
  *(this + 11) = 0;
  *((_BYTE *)this + 48) = 0;
  return this;
}

//----- (65971EA0) --------------------------------------------------------
int __thiscall sub_65971EA0(_DWORD *this, int a2)
{
  int v3; // eax
  unsigned int v4; // esi
  int v5; // ebx
  int result; // eax

  v3 = *(this + 1);
  if ( v3 )
    v4 = (*(this + 3) - v3) / 56;
  else
    v4 = 0;
  v5 = *(this + 2);
  if ( (v5 - *(this + 1)) / 56 >= v4 )
    return sub_65971DD0(this, &a2, v5, a2);
  result = sub_65971590(v5, 1, a2, this, a2, 0);
  *(this + 2) = v5 + 56;
  return result;
}
// 65971590: using guessed type int __cdecl sub_65971590(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 65971DD0: using guessed type int __thiscall sub_65971DD0(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (65971FC0) --------------------------------------------------------
void __cdecl sub_65971FC0(const char *a1, _DWORD *a2)
{
  int v2; // eax
  int v3; // esi
  const char *v4; // eax
  const char *v5; // eax
  const char *v6; // eax
  const char *v7; // eax
  const char *v8; // eax
  const char *v9; // eax
  const char *v10; // eax
  const char *v11; // eax
  int v12; // eax
  _BYTE v13[28]; // [esp+10h] [ebp-8Ch] BYREF
  unsigned int v14; // [esp+2Ch] [ebp-70h]
  _DWORD *v15; // [esp+30h] [ebp-6Ch]
  char v16; // [esp+37h] [ebp-65h]
  char v17[28]; // [esp+38h] [ebp-64h] BYREF
  char v18[4]; // [esp+54h] [ebp-48h] BYREF
  int v19; // [esp+58h] [ebp-44h]
  int v20; // [esp+5Ch] [ebp-40h]
  __int16 v21; // [esp+60h] [ebp-3Ch]
  __int16 v22; // [esp+62h] [ebp-3Ah]
  char v23; // [esp+64h] [ebp-38h]
  char v24; // [esp+65h] [ebp-37h]
  int v25; // [esp+68h] [ebp-34h]
  int v26; // [esp+6Ch] [ebp-30h]
  int v27; // [esp+70h] [ebp-2Ch]
  char v28; // [esp+74h] [ebp-28h]
  char v29; // [esp+75h] [ebp-27h]
  char v30; // [esp+76h] [ebp-26h]
  int v31; // [esp+77h] [ebp-25h]
  int v32; // [esp+7Ch] [ebp-20h]
  int v33; // [esp+80h] [ebp-1Ch]
  char v34; // [esp+84h] [ebp-18h]
  int v35; // [esp+88h] [ebp-14h]
  int v36; // [esp+98h] [ebp-4h]

  v15 = a2;
  if ( a1 && !sub_65948020(a1) )
  {
    v14 = strlen(a1);
    sub_65971200(v18);
    v16 = 0;
    std::string::string(v17);
    v3 = 0;
    v36 = 0;
    if ( v14 )
    {
      while ( 1 )
      {
        LOBYTE(v2) = a1[v3];
        if ( !(_BYTE)v2 )
          goto LABEL_29;
        if ( (_BYTE)v2 == 105 || (_BYTE)v2 == 99 )
        {
          if ( v3 )
            sub_65971EA0(v15, (int)v18);
          v20 = 0;
          v22 = 0;
          v16 = 0;
          v35 = 0;
          v19 = 0;
          v21 = 0;
          v23 = 100;
          v24 = 0;
          v25 = 0;
          v26 = 0;
          v27 = 0;
          v29 = 0;
          v30 = 0;
          v28 = 0;
          v31 = 0;
          v32 = 0;
          v33 = 0;
          v34 = 0;
          v2 = std::string::clear(v17);
          v18[0] = a1[v3];
          goto LABEL_28;
        }
        if ( v18[0] == 99 )
          break;
        if ( v18[0] == 105 )
        {
          if ( (_BYTE)v2 == 45 )
          {
            switch ( v16 )
            {
              case 0:
                v4 = (const char *)std::string::c_str(v17);
                LOWORD(v20) = atoi(v4);
                if ( ItemTemplateById_Get(g_ItemTemplateById, v20) )
                  goto LABEL_23;
                std::string::string(v13, "ParseMarketplaceItems: Invalid Item!");
                LOBYTE(v36) = 1;
                Log_WriteErrorIfEnabled((int)v13);
                LOBYTE(v36) = 0;
                std::string::~string(v13);
                v2 = sub_65970DE0(v18);
                break;
              case 1:
                v5 = (const char *)std::string::c_str(v17);
                HIWORD(v20) = atoi(v5);
                v2 = std::string::clear(v17);
                ++v16;
                break;
              case 2:
                v6 = (const char *)std::string::c_str(v17);
                v21 = atoi(v6);
                v2 = std::string::clear(v17);
                ++v16;
                break;
              case 3:
                v7 = (const char *)std::string::c_str(v17);
                v22 = atoi(v7);
                v2 = std::string::clear(v17);
                ++v16;
                break;
              case 4:
                v8 = (const char *)std::string::c_str(v17);
                v23 = atoi(v8);
                v2 = std::string::clear(v17);
                ++v16;
                break;
              case 5:
                v9 = (const char *)std::string::c_str(v17);
                v24 = atoi(v9);
                v2 = std::string::clear(v17);
                ++v16;
                break;
              case 6:
                v10 = (const char *)std::string::c_str(v17);
                v26 = atoi(v10);
                goto LABEL_23;
              default:
                goto LABEL_23;
            }
            goto LABEL_28;
          }
          goto LABEL_24;
        }
LABEL_28:
        if ( ++v3 >= v14 )
          goto LABEL_29;
      }
      if ( (_BYTE)v2 == 45 )
      {
        if ( !v16 )
        {
          v11 = (const char *)std::string::c_str(v17);
          v12 = atoi(v11);
          v35 += v12;
        }
LABEL_23:
        v2 = std::string::clear(v17);
        ++v16;
        goto LABEL_28;
      }
LABEL_24:
      v2 = std::string::operator+=(v17, v2);
      goto LABEL_28;
    }
LABEL_29:
    if ( v18[0] == 105 || v18[0] == 99 )
      sub_65971EA0(v15, (int)v18);
    v36 = -1;
    std::string::~string(v17);
  }
}
// 6597221C: variable 'v2' is possibly undefined
// 659A8198: using guessed type int __thiscall std::string::operator+=(_DWORD, _DWORD);
// 659A8254: using guessed type int __thiscall std::string::clear(_DWORD);
// 659A82A0: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 659A82A4: using guessed type int __thiscall std::string::c_str(_DWORD);
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65972370) --------------------------------------------------------
int __thiscall sub_65972370(_DWORD *this)
{
  *this = 0;
  *(this + 1) = 0;
  *(this + 2) = 0;
  *((_BYTE *)this + 12) = 0;
  return 0;
}

//----- (65972420) --------------------------------------------------------
char *__thiscall Write_QuantVec3(int this, char *a2)
{
  int v3; // ecx
  int v5; // [esp+8h] [ebp-Ch] BYREF
  int v6; // [esp+Ch] [ebp-8h] BYREF
  int v7; // [esp+10h] [ebp-4h] BYREF

  v3 = *(_DWORD *)this;
  if ( v3 < 16 )
  {
    v7 = abs16(*(_WORD *)(this + 4));
    v6 = abs16(*(_WORD *)(this + 6));
    v5 = abs16(*(_WORD *)(this + 8));
    BitStream_WriteBits(a2, (char *)&v7, v3, 1);
    BitStream_WriteBits(a2, (char *)&v6, *(_DWORD *)this, 1);
    BitStream_WriteBits(a2, (char *)&v5, *(_DWORD *)this, 1);
    if ( *(__int16 *)(this + 4) >= 0 )
      BitStream_WriteBit0(a2);
    else
      BitStream_WriteBit1(a2);
    if ( *(__int16 *)(this + 6) >= 0 )
      BitStream_WriteBit0(a2);
    else
      BitStream_WriteBit1(a2);
    if ( *(__int16 *)(this + 8) >= 0 )
      return BitStream_WriteBit0(a2);
    else
      return BitStream_WriteBit1(a2);
  }
  else
  {
    sub_6580EE30(a2, *(unsigned __int16 *)(this + 4));
    sub_6580EE30(a2, *(unsigned __int16 *)(this + 6));
    return (char *)sub_6580EE30(a2, *(unsigned __int16 *)(this + 8));
  }
}
// 6580EE30: using guessed type int __cdecl sub_6580EE30(_DWORD, _DWORD);

//----- (65972620) --------------------------------------------------------
int __cdecl StatBlob_Decode(_BYTE *a1, unsigned int a2)
{
  unsigned int i; // ecx
  unsigned int v4; // ecx
  _BYTE *v5; // eax
  unsigned int v6; // ecx
  _BYTE *v7; // eax
  unsigned int v8; // ecx
  _BYTE *v9; // eax
  unsigned int v10; // ecx
  _BYTE *v11; // eax
  unsigned int v12; // ecx
  _BYTE *v13; // eax
  unsigned int v14; // ecx
  _BYTE *v15; // eax
  unsigned int v16; // ecx
  _BYTE *v17; // eax

  for ( i = 0; i < a2; a1 = v17 + 1 )
  {
    *a1 = (__ROR1__(*a1, 3) - 18) ^ 0xB3;
    v4 = i + 1;
    v5 = a1 + 1;
    if ( v4 >= a2 )
      break;
    *v5 = (__ROR1__(*v5, 1) + 109) ^ 0xF1;
    v6 = v4 + 1;
    v7 = v5 + 1;
    if ( v6 >= a2 )
      break;
    *v7 = (__ROL1__(*v7, 3) - 79) ^ 0x34;
    v8 = v6 + 1;
    v9 = v7 + 1;
    if ( v8 >= a2 )
      break;
    *v9 = (__ROL1__(*v9, 1) - 16) ^ 0x85;
    v10 = v8 + 1;
    v11 = v9 + 1;
    if ( v10 >= a2 )
      break;
    *v11 = (__ROR1__(*v11, 2) + 88) ^ 0x8F;
    v12 = v10 + 1;
    v13 = v11 + 1;
    if ( v12 >= a2 )
      break;
    *v13 = (*v13 - 52) ^ 0xD;
    v14 = v12 + 1;
    v15 = v13 + 1;
    if ( v14 >= a2 )
      break;
    *v15 = (__ROR1__(*v15, 4) - 125) ^ 0xCC;
    v16 = v14 + 1;
    v17 = v15 + 1;
    if ( v16 >= a2 )
      break;
    *v17 = (__ROL1__(*v17, 2) + 43) ^ 0xEF;
    i = v16 + 1;
  }
  return 0;
}

//----- (659726E0) --------------------------------------------------------
int __cdecl StatBlob_Encode(_BYTE *a1, unsigned int a2)
{
  unsigned int v2; // ecx
  _BYTE *i; // eax
  unsigned int v4; // ecx
  _BYTE *v5; // eax
  unsigned int v6; // ecx
  _BYTE *v7; // eax
  unsigned int v8; // ecx
  _BYTE *v9; // eax
  unsigned int v10; // ecx
  _BYTE *v11; // eax
  unsigned int v12; // ecx
  _BYTE *v13; // eax
  unsigned int v14; // ecx
  _BYTE *v15; // eax
  unsigned int v16; // ecx
  _BYTE *v17; // eax

  v2 = 1;
  *a1 = __ROL1__((*a1 ^ 0xB3) + 18, 3);
  for ( i = a1 + 1; v2 < a2; i = v17 + 1 )
  {
    *i = __ROL1__((*i ^ 0xF1) - 109, 1);
    v4 = v2 + 1;
    v5 = i + 1;
    if ( v4 >= a2 )
      break;
    *v5 = __ROR1__((*v5 ^ 0x34) + 79, 3);
    v6 = v4 + 1;
    v7 = v5 + 1;
    if ( v6 >= a2 )
      break;
    *v7 = __ROR1__((*v7 ^ 0x85) + 16, 1);
    v8 = v6 + 1;
    v9 = v7 + 1;
    if ( v8 >= a2 )
      break;
    *v9 = __ROL1__((*v9 ^ 0x8F) - 88, 2);
    v10 = v8 + 1;
    v11 = v9 + 1;
    if ( v10 >= a2 )
      break;
    *v11 = (*v11 ^ 0xD) + 52;
    v12 = v10 + 1;
    v13 = v11 + 1;
    if ( v12 >= a2 )
      break;
    *v13 = __ROL1__((*v13 ^ 0xCC) + 125, 4);
    v14 = v12 + 1;
    v15 = v13 + 1;
    if ( v14 >= a2 )
      break;
    *v15 = __ROR1__((*v15 ^ 0xEF) - 43, 2);
    v16 = v14 + 1;
    v17 = v15 + 1;
    if ( v16 >= a2 )
      break;
    *v17 = __ROL1__((*v17 ^ 0xB3) + 18, 3);
    v2 = v16 + 1;
  }
  return 0;
}

//----- (65972AD0) --------------------------------------------------------
void __thiscall Init_BitstreamTables(_DWORD *this)
{
  *(this + 1) = &unk_659FE000;
  *(this + 2) = &unk_659FE090;
  *(this + 3) = &unk_659FE120;
  *(this + 4) = &unk_659FE1B0;
  *(this + 5) = &unk_659FE240;
  *(this + 6) = &unk_659FE2D0;
  *(this + 7) = &unk_659FE360;
  *(this + 8) = &unk_659FE3F0;
  *(this + 9) = &unk_659FE480;
  *(this + 10) = &unk_659FE510;
  *(this + 11) = &unk_659FE5A0;
  *(this + 12) = &unk_659FE630;
  *(this + 13) = &unk_659FE6C0;
  *(this + 14) = &unk_659FE750;
  *(this + 15) = &unk_659FE7E0;
  *(this + 16) = &unk_659FE870;
  *(this + 17) = &unk_659FE900;
  *(this + 18) = &unk_659FE990;
  *(this + 19) = &unk_659FEA20;
  *(this + 20) = &unk_659FEAB0;
  *(this + 21) = &unk_659FEB40;
  *(this + 22) = &unk_659FEBD0;
  *(this + 23) = &unk_659FEC60;
  *(this + 24) = &unk_659FECF0;
  *(this + 25) = &unk_659FED80;
  *(this + 26) = &unk_659FEE10;
  *(this + 27) = &unk_659FEEA0;
  *(this + 28) = &unk_659FEF30;
  *(this + 29) = &unk_659FEFC0;
  *(this + 30) = &unk_659FF050;
  *(this + 31) = &unk_659FF0E0;
  *(this + 32) = &unk_659FF170;
  *(this + 33) = &unk_659FF200;
  *(this + 34) = &unk_659FF290;
  *(this + 35) = &unk_659FF320;
  *(this + 36) = &unk_659FF3B0;
  *(this + 37) = &unk_659FF440;
  *(this + 50) = &unk_659FF4D0;
  *(this + 51) = &unk_659FF560;
  *(this + 52) = &unk_659FF5F0;
  *(this + 53) = &unk_659FF680;
  *(this + 54) = &unk_659FF710;
  *(this + 55) = &unk_659FF7A0;
  *(this + 56) = &unk_659FF830;
  *(this + 57) = &unk_659FF8C0;
  *(this + 58) = &unk_659FF950;
  *(this + 59) = &unk_659FF9E0;
  *(this + 80) = &unk_65A0BC80;
  *(this + 81) = &unk_65A0BD10;
  *(this + 82) = &unk_65A0BDA0;
  *(this + 83) = &unk_65A0BE30;
  *(this + 84) = &unk_65A0BEC0;
  *(this + 85) = &unk_65A0BF50;
  *(this + 86) = &unk_65A0BFE0;
  *(this + 87) = &unk_65A0C070;
  *(this + 88) = &unk_65A0C100;
  *(this + 100) = &unk_65A0DC90;
  *(this + 101) = &unk_65A0DD20;
  *(this + 102) = &unk_65A0DDB0;
  *(this + 103) = &unk_65A0DE40;
  *(this + 104) = &unk_65A0DED0;
  *(this + 105) = &unk_65A0DF60;
  *(this + 106) = &unk_65A0DFF0;
  *(this + 107) = &unk_65A0E080;
  *(this + 108) = &unk_65A0E110;
  *(this + 110) = &unk_659FFA70;
  *(this + 111) = &unk_659FFB00;
  *(this + 112) = &unk_659FFB90;
  *(this + 113) = &unk_659FFC20;
  *(this + 114) = &unk_659FFCB0;
  *(this + 115) = &unk_659FFD40;
  *(this + 116) = &unk_659FFDD0;
  *(this + 117) = &unk_659FFE60;
  *(this + 118) = &unk_659FFEF0;
  *(this + 119) = &unk_659FFF80;
  *(this + 120) = &unk_65A00010;
  *(this + 121) = &unk_65A000A0;
  *(this + 122) = &unk_65A00130;
  *(this + 123) = &unk_65A001C0;
  *(this + 124) = &unk_65A00250;
  *(this + 125) = &unk_65A002E0;
  *(this + 126) = &unk_65A00370;
  *(this + 127) = &unk_65A00400;
  *(this + 128) = &unk_65A00490;
  *(this + 129) = &unk_65A00520;
  *(this + 130) = &unk_65A005B0;
  *(this + 131) = &unk_65A00640;
  *(this + 132) = &unk_65A006D0;
  *(this + 133) = &unk_65A00760;
  *(this + 134) = &unk_65A007F0;
  *(this + 135) = &unk_65A00880;
  *(this + 136) = &unk_65A00910;
  *(this + 137) = &unk_65A009A0;
  *(this + 138) = &unk_65A00A30;
  *(this + 139) = &unk_65A00AC0;
  *(this + 140) = &unk_65A00B50;
  *(this + 141) = &unk_65A00BE0;
  *(this + 142) = &unk_65A00C70;
  *(this + 143) = &unk_65A00D00;
  *(this + 144) = &unk_65A00D90;
  *(this + 145) = &unk_65A00E20;
  *(this + 146) = &unk_65A00EB0;
  *(this + 147) = &unk_65A00F40;
  *(this + 148) = &unk_65A00FD0;
  *(this + 149) = &unk_65A01060;
  *(this + 150) = &unk_65A010F0;
  *(this + 151) = &unk_65A01180;
  *(this + 152) = &unk_65A01210;
  *(this + 153) = &unk_65A012A0;
  *(this + 154) = &unk_65A01330;
  *(this + 155) = &unk_65A013C0;
  *(this + 156) = &unk_65A01450;
  *(this + 157) = &unk_65A014E0;
  *(this + 158) = &unk_65A01570;
  *(this + 159) = &unk_65A01600;
  *(this + 160) = &unk_65A0E1A0;
  *(this + 161) = &unk_65A0E230;
  *(this + 162) = &unk_65A0E2C0;
  *(this + 163) = &unk_65A0E350;
  *(this + 164) = &unk_65A0E3E0;
  *(this + 165) = &unk_65A0E470;
  *(this + 166) = &unk_65A0E500;
  *(this + 167) = &unk_65A0E590;
  *(this + 168) = &unk_65A0E620;
  *(this + 169) = &unk_65A0E6B0;
  *(this + 170) = &unk_65A0E740;
  *(this + 171) = &unk_65A0E7D0;
  *(this + 172) = &unk_65A0E860;
  *(this + 173) = &unk_65A0E8F0;
  *(this + 174) = &unk_65A0E980;
  *(this + 175) = &unk_65A0EA10;
  *(this + 176) = &unk_65A0EAA0;
  *(this + 177) = &unk_65A0EB30;
  *(this + 178) = &unk_65A0EBC0;
  *(this + 179) = &unk_65A0EC50;
  *(this + 180) = &unk_65A0ECE0;
  *(this + 181) = &unk_65A0ED70;
  *(this + 182) = &unk_65A0EE00;
  *(this + 183) = &unk_65A0EE90;
  *(this + 184) = &unk_65A0EF20;
  *(this + 185) = &unk_65A0EFB0;
  *(this + 186) = &unk_65A0F040;
  *(this + 187) = &unk_65A0F0D0;
  *(this + 188) = &unk_65A0F160;
  *(this + 189) = &unk_65A0F1F0;
  *(this + 190) = &unk_65A0F280;
  *(this + 191) = &unk_65A0F310;
  *(this + 192) = &unk_65A0F3A0;
  *(this + 193) = &unk_65A0F430;
  *(this + 194) = &unk_65A0F4C0;
  *(this + 195) = &unk_65A0F550;
  *(this + 196) = &unk_65A0F5E0;
  *(this + 197) = &unk_65A0F670;
  *(this + 200) = &unk_65A01690;
  *(this + 201) = &unk_65A01720;
  *(this + 202) = &unk_65A017B0;
  *(this + 203) = &unk_65A01840;
  *(this + 204) = &unk_65A018D0;
  *(this + 205) = &unk_65A01960;
  *(this + 206) = &unk_65A019F0;
  *(this + 207) = &unk_65A01A80;
  *(this + 210) = &unk_65A01B10;
  *(this + 211) = &unk_65A01BA0;
  *(this + 212) = &unk_65A01C30;
  *(this + 213) = &unk_65A01CC0;
  *(this + 214) = &unk_65A01D50;
  *(this + 215) = &unk_65A01DE0;
  *(this + 216) = &unk_65A01E70;
  *(this + 217) = &unk_65A01F00;
  *(this + 218) = &unk_65A01F90;
  *(this + 219) = &unk_65A02020;
  *(this + 220) = &unk_65A020B0;
  *(this + 221) = &unk_65A02140;
  *(this + 222) = &unk_65A021D0;
  *(this + 223) = &unk_65A02260;
  *(this + 224) = &unk_65A022F0;
  *(this + 225) = &unk_65A02380;
  *(this + 226) = &unk_65A02410;
  *(this + 227) = &unk_65A024A0;
  *(this + 228) = &unk_65A02530;
  *(this + 229) = &unk_65A025C0;
  *(this + 230) = &unk_65A02650;
  *(this + 231) = &unk_65A026E0;
  *(this + 232) = &unk_65A02770;
  *(this + 233) = &unk_65A02800;
  *(this + 234) = &unk_65A02890;
  *(this + 235) = &unk_65A02920;
  *(this + 236) = &unk_65A029B0;
  *(this + 237) = &unk_65A02A40;
  *(this + 238) = &unk_65A02AD0;
  *(this + 239) = &unk_65A02B60;
  *(this + 240) = &unk_65A02BF0;
  *(this + 241) = &unk_65A02C80;
  *(this + 242) = &unk_65A02D10;
  *(this + 243) = &unk_65A02DA0;
  *(this + 244) = &unk_65A02E30;
  *(this + 245) = &unk_65A02EC0;
  *(this + 246) = &unk_65A02F50;
  *(this + 247) = &unk_65A02FE0;
  *(this + 248) = &unk_65A03070;
  *(this + 249) = &unk_65A03100;
  *(this + 250) = &unk_65A03190;
  *(this + 251) = &unk_65A03220;
  *(this + 252) = &unk_65A032B0;
  *(this + 253) = &unk_65A03340;
  *(this + 254) = &unk_65A033D0;
  *(this + 255) = &unk_65A03460;
  *(this + 256) = &unk_65A034F0;
  *(this + 257) = &unk_65A03580;
  *(this + 260) = &unk_65A03610;
  *(this + 261) = &unk_65A036A0;
  *(this + 262) = &unk_65A03730;
  *(this + 263) = &unk_65A037C0;
  *(this + 264) = &unk_65A03850;
  *(this + 265) = &unk_65A038E0;
  *(this + 266) = &unk_65A03970;
  *(this + 267) = &unk_65A03A00;
  *(this + 268) = &unk_65A03A90;
  *(this + 269) = &unk_65A03B20;
  *(this + 270) = &unk_65A03BB0;
  *(this + 271) = &unk_65A03C40;
  *(this + 272) = &unk_65A03CD0;
  *(this + 273) = &unk_65A03D60;
  *(this + 274) = &unk_65A03DF0;
  *(this + 275) = &unk_65A03E80;
  *(this + 276) = &unk_65A03F10;
  *(this + 277) = &unk_65A03FA0;
  *(this + 278) = &unk_65A04030;
  *(this + 279) = &unk_65A040C0;
  *(this + 280) = &unk_65A04150;
  *(this + 281) = &unk_65A041E0;
  *(this + 282) = &unk_65A04270;
  *(this + 283) = &unk_65A04300;
  *(this + 284) = &unk_65A04390;
  *(this + 285) = &unk_65A04420;
  *(this + 286) = &unk_65A044B0;
  *(this + 287) = &unk_65A04540;
  *(this + 288) = &unk_65A045D0;
  *(this + 289) = &unk_65A04660;
  *(this + 290) = &unk_65A046F0;
  *(this + 291) = &unk_65A04780;
  *(this + 292) = &unk_65A04810;
  *(this + 293) = &unk_65A048A0;
  *(this + 294) = &unk_65A04930;
  *(this + 295) = &unk_65A049C0;
  *(this + 296) = &unk_65A04A50;
  *(this + 297) = &unk_65A04AE0;
  *(this + 298) = &unk_65A04B70;
  *(this + 299) = &unk_65A04C00;
  *(this + 300) = &unk_65A04C90;
  *(this + 301) = &unk_65A04D20;
  *(this + 302) = &unk_65A04DB0;
  *(this + 303) = &unk_65A04E40;
  *(this + 304) = &unk_65A04ED0;
  *(this + 305) = &unk_65A04F60;
  *(this + 306) = &unk_65A04FF0;
  *(this + 307) = &unk_65A05080;
  *(this + 310) = &unk_65A05110;
  *(this + 311) = &unk_65A051A0;
  *(this + 312) = &unk_65A05230;
  *(this + 313) = &unk_65A052C0;
  *(this + 314) = &unk_65A05350;
  *(this + 315) = &unk_65A053E0;
  *(this + 316) = &unk_65A05470;
  *(this + 317) = &unk_65A05500;
  *(this + 318) = &unk_65A05590;
  *(this + 319) = &unk_65A05620;
  *(this + 320) = &unk_65A056B0;
  *(this + 321) = &unk_65A05740;
  *(this + 322) = &unk_65A057D0;
  *(this + 323) = &unk_65A05860;
  *(this + 324) = &unk_65A058F0;
  *(this + 325) = &unk_65A05980;
  *(this + 326) = &unk_65A05A10;
  *(this + 327) = &unk_65A05AA0;
  *(this + 328) = &unk_65A05B30;
  *(this + 329) = &unk_65A05BC0;
  *(this + 330) = &unk_65A05C50;
  *(this + 331) = &unk_65A05CE0;
  *(this + 332) = &unk_65A05D70;
  *(this + 333) = &unk_65A05E00;
  *(this + 334) = &unk_65A05E90;
  *(this + 335) = &unk_65A05F20;
  *(this + 336) = &unk_65A05FB0;
  *(this + 337) = &unk_65A06040;
  *(this + 338) = &unk_65A060D0;
  *(this + 339) = &unk_65A06160;
  *(this + 340) = &unk_65A061F0;
  *(this + 341) = &unk_65A06280;
  *(this + 342) = &unk_65A06310;
  *(this + 343) = &unk_65A063A0;
  *(this + 344) = &unk_65A06430;
  *(this + 345) = &unk_65A064C0;
  *(this + 346) = &unk_65A06550;
  *(this + 347) = &unk_65A065E0;
  *(this + 348) = &unk_65A06670;
  *(this + 349) = &unk_65A06700;
  *(this + 350) = &unk_65A06790;
  *(this + 351) = &unk_65A06820;
  *(this + 352) = &unk_65A068B0;
  *(this + 353) = &unk_65A06940;
  *(this + 354) = &unk_65A069D0;
  *(this + 355) = &unk_65A06A60;
  *(this + 356) = &unk_65A06AF0;
  *(this + 357) = &unk_65A06B80;
  *(this + 360) = &unk_65A06C10;
  *(this + 361) = &unk_65A06CA0;
  *(this + 362) = &unk_65A06D30;
  *(this + 363) = &unk_65A06DC0;
  *(this + 364) = &unk_65A06E50;
  *(this + 365) = &unk_65A06EE0;
  *(this + 366) = &unk_65A06F70;
  *(this + 367) = &unk_65A07000;
  *(this + 368) = &unk_65A07090;
  *(this + 369) = &unk_65A07120;
  *(this + 370) = &unk_65A071B0;
  *(this + 371) = &unk_65A07240;
  *(this + 372) = &unk_65A072D0;
  *(this + 373) = &unk_65A07360;
  *(this + 374) = &unk_65A073F0;
  *(this + 375) = &unk_65A07480;
  *(this + 376) = &unk_65A07510;
  *(this + 377) = &unk_65A075A0;
  *(this + 378) = &unk_65A07630;
  *(this + 379) = &unk_65A076C0;
  *(this + 380) = &unk_65A07750;
  *(this + 381) = &unk_65A077E0;
  *(this + 382) = &unk_65A07870;
  *(this + 383) = &unk_65A07900;
  *(this + 384) = &unk_65A07990;
  *(this + 385) = &unk_65A07A20;
  *(this + 386) = &unk_65A07AB0;
  *(this + 387) = &unk_65A07B40;
  *(this + 388) = &unk_65A07BD0;
  *(this + 389) = &unk_65A07C60;
  *(this + 390) = &unk_65A07CF0;
  *(this + 391) = &unk_65A07D80;
  *(this + 392) = &unk_65A07E10;
  *(this + 393) = &unk_65A07EA0;
  *(this + 394) = &unk_65A07F30;
  *(this + 395) = &unk_65A07FC0;
  *(this + 396) = &unk_65A08050;
  *(this + 397) = &unk_65A080E0;
  *(this + 398) = &unk_65A08170;
  *(this + 399) = &unk_65A08200;
  *(this + 400) = &unk_65A08290;
  *(this + 401) = &unk_65A08320;
  *(this + 402) = &unk_65A083B0;
  *(this + 403) = &unk_65A08440;
  *(this + 404) = &unk_65A084D0;
  *(this + 405) = &unk_65A08560;
  *(this + 406) = &unk_65A085F0;
  *(this + 407) = &unk_65A08680;
  *(this + 410) = &unk_65A08710;
  *(this + 411) = &unk_65A087A0;
  *(this + 412) = &unk_65A08830;
  *(this + 413) = &unk_65A088C0;
  *(this + 414) = &unk_65A08950;
  *(this + 415) = &unk_65A089E0;
  *(this + 416) = &unk_65A08A70;
  *(this + 417) = &unk_65A08B00;
  *(this + 418) = &unk_65A08B90;
  *(this + 419) = &unk_65A08C20;
  *(this + 420) = &unk_65A08CB0;
  *(this + 421) = &unk_65A08D40;
  *(this + 422) = &unk_65A08DD0;
  *(this + 423) = &unk_65A08E60;
  *(this + 424) = &unk_65A08EF0;
  *(this + 425) = &unk_65A08F80;
  *(this + 426) = &unk_65A09010;
  *(this + 427) = &unk_65A090A0;
  *(this + 428) = &unk_65A09130;
  *(this + 429) = &unk_65A091C0;
  *(this + 430) = &unk_65A09250;
  *(this + 431) = &unk_65A092E0;
  *(this + 432) = &unk_65A09370;
  *(this + 433) = &unk_65A09400;
  *(this + 434) = &unk_65A09490;
  *(this + 435) = &unk_65A09520;
  *(this + 436) = &unk_65A095B0;
  *(this + 437) = &unk_65A09640;
  *(this + 438) = &unk_65A096D0;
  *(this + 439) = &unk_65A09760;
  *(this + 440) = &unk_65A097F0;
  *(this + 441) = &unk_65A09880;
  *(this + 442) = &unk_65A09910;
  *(this + 443) = &unk_65A099A0;
  *(this + 444) = &unk_65A09A30;
  *(this + 445) = &unk_65A09AC0;
  *(this + 446) = &unk_65A09B50;
  *(this + 447) = &unk_65A09BE0;
  *(this + 448) = &unk_65A09C70;
  *(this + 449) = &unk_65A09D00;
  *(this + 450) = &unk_65A09D90;
  *(this + 451) = &unk_65A09E20;
  *(this + 452) = &unk_65A09EB0;
  *(this + 453) = &unk_65A09F40;
  *(this + 454) = &unk_65A09FD0;
  *(this + 455) = &unk_65A0A060;
  *(this + 456) = &unk_65A0A0F0;
  *(this + 457) = &unk_65A0A180;
  *(this + 458) = &unk_65A0A210;
  *(this + 459) = &unk_65A0A2A0;
  *(this + 460) = &unk_65A0A330;
  *(this + 461) = &unk_65A0A3C0;
  *(this + 462) = &unk_65A0A450;
  *(this + 463) = &unk_65A0A4E0;
  *(this + 464) = &unk_65A0A570;
  *(this + 465) = &unk_65A0A600;
  *(this + 466) = &unk_65A0A690;
  *(this + 467) = &unk_65A0A720;
  *(this + 468) = &unk_65A0A7B0;
  *(this + 469) = &unk_65A0A840;
  *(this + 470) = &unk_65A0A8D0;
  *(this + 471) = &unk_65A0A960;
  *(this + 472) = &unk_65A0A9F0;
  *(this + 473) = &unk_65A0AA80;
  *(this + 474) = &unk_65A0AB10;
  *(this + 475) = &unk_65A0ABA0;
  *(this + 476) = &unk_65A0AC30;
  *(this + 477) = &unk_65A0ACC0;
  *(this + 478) = &unk_65A0AD50;
  *(this + 479) = &unk_65A0ADE0;
  *(this + 480) = &unk_65A0AE70;
  *(this + 481) = &unk_65A0AF00;
  *(this + 482) = &unk_65A0AF90;
  *(this + 483) = &unk_65A0B020;
  *(this + 484) = &unk_65A0B0B0;
  *(this + 485) = &unk_65A0B140;
  *(this + 486) = &unk_65A0B1D0;
  *(this + 487) = &unk_65A0B260;
  *(this + 488) = &unk_65A0B2F0;
  *(this + 489) = &unk_65A0B380;
  *(this + 490) = &unk_65A0B410;
  *(this + 491) = &unk_65A0B4A0;
  *(this + 492) = &unk_65A0B530;
  *(this + 493) = &unk_65A0B5C0;
  *(this + 494) = &unk_65A0B650;
  *(this + 495) = &unk_65A0B6E0;
  *(this + 496) = &unk_65A0B770;
  *(this + 497) = &unk_65A0B800;
  *(this + 498) = &unk_65A0B890;
  *(this + 499) = &unk_65A0B920;
  *(this + 500) = &unk_65A0F700;
  *(this + 501) = &unk_65A0F790;
  *(this + 502) = &unk_65A0F820;
  *(this + 503) = &unk_65A0F8B0;
  *(this + 504) = &unk_65A0F940;
  *(this + 505) = &unk_65A0F9D0;
  *(this + 506) = &unk_65A0FA60;
  *(this + 507) = &unk_65A0FAF0;
  *(this + 508) = &unk_65A0FB80;
  *(this + 509) = &unk_65A0FC10;
  *(this + 510) = &unk_65A0FCA0;
  *(this + 511) = &unk_65A0FD30;
  *(this + 512) = &unk_65A0FDC0;
  *(this + 513) = &unk_65A0FE50;
  *(this + 514) = &unk_65A0FEE0;
  *(this + 515) = &unk_65A0FF70;
  *(this + 516) = &unk_65A10000;
  *(this + 517) = &unk_65A10090;
  *(this + 518) = &unk_65A10120;
  *(this + 519) = &unk_65A101B0;
  *(this + 520) = &unk_65A10240;
  *(this + 521) = &unk_65A102D0;
  *(this + 522) = &unk_65A10360;
  *(this + 523) = &unk_65A103F0;
  *(this + 524) = &unk_65A10480;
  *(this + 525) = &unk_65A10510;
  *(this + 526) = &unk_65A105A0;
  *(this + 527) = &unk_65A10630;
  *(this + 528) = &unk_65A106C0;
  *(this + 529) = &unk_65A10750;
  *(this + 530) = &unk_65A0C190;
  *(this + 531) = &unk_65A0C220;
  *(this + 532) = &unk_65A0C2B0;
  *(this + 533) = &unk_65A0C340;
  *(this + 534) = &unk_65A0C3D0;
  *(this + 535) = &unk_65A0C460;
  *(this + 536) = &unk_65A0C4F0;
  *(this + 537) = &unk_65A0C580;
  *(this + 538) = &unk_65A0C610;
  *(this + 539) = &unk_65A0C6A0;
  *(this + 540) = &unk_65A0C730;
  *(this + 541) = &unk_65A0C7C0;
  *(this + 542) = &unk_65A0C850;
  *(this + 543) = &unk_65A0C8E0;
  *(this + 544) = &unk_65A0C970;
  *(this + 545) = &unk_65A0CA00;
  *(this + 546) = &unk_65A0CA90;
  *(this + 547) = &unk_65A0CB20;
  *(this + 548) = &unk_65A0CBB0;
  *(this + 549) = &unk_65A0CC40;
  *(this + 550) = &unk_65A0CCD0;
  *(this + 551) = &unk_65A0CD60;
  *(this + 552) = &unk_65A0CDF0;
  *(this + 553) = &unk_65A0CE80;
  *(this + 554) = &unk_65A0CF10;
  *(this + 555) = &unk_65A0CFA0;
  *(this + 556) = &unk_65A0D030;
  *(this + 557) = &unk_65A0D0C0;
  *(this + 580) = &unk_65A0D150;
  *(this + 581) = &unk_65A0D1E0;
  *(this + 582) = &unk_65A0D270;
  *(this + 583) = &unk_65A0D300;
  *(this + 584) = &unk_65A0D390;
  *(this + 585) = &unk_65A0D420;
  *(this + 586) = &unk_65A0D4B0;
  *(this + 587) = &unk_65A0D540;
  *(this + 588) = &unk_65A0D5D0;
  *(this + 589) = &unk_65A0D660;
  *(this + 590) = &unk_65A0D6F0;
  *(this + 591) = &unk_65A0D780;
  *(this + 592) = &unk_65A0D810;
  *(this + 593) = &unk_65A0D8A0;
  *(this + 594) = &unk_65A0D930;
  *(this + 595) = &unk_65A0D9C0;
  *(this + 596) = &unk_65A0DA50;
  *(this + 597) = &unk_65A0DAE0;
  *(this + 598) = &unk_65A0DB70;
  *(this + 599) = &unk_65A0DC00;
  *(this + 610) = &unk_65A107E0;
  *(this + 611) = &unk_65A10870;
  *(this + 612) = &unk_65A10900;
  *(this + 613) = &unk_65A10990;
  *(this + 614) = &unk_65A10A20;
  *(this + 615) = &unk_65A10AB0;
  *(this + 616) = &unk_65A10B40;
  *(this + 617) = &unk_65A10BD0;
  *(this + 618) = &unk_65A10C60;
  *(this + 619) = &unk_65A10CF0;
  *(this + 620) = &unk_65A10D80;
  *(this + 621) = &unk_65A10E10;
  *(this + 622) = &unk_65A10EA0;
  *(this + 623) = &unk_65A10F30;
  *(this + 624) = &unk_65A10FC0;
  *(this + 625) = &unk_65A11050;
  *(this + 626) = &unk_65A110E0;
  *(this + 630) = &unk_65A11170;
  *(this + 631) = &unk_65A11200;
  *(this + 632) = &unk_65A11290;
  *(this + 633) = &unk_65A11320;
  *(this + 634) = &unk_65A113B0;
  *(this + 635) = &unk_65A11440;
  *(this + 636) = &unk_65A114D0;
  *(this + 637) = &unk_65A11560;
  *(this + 638) = &unk_65A115F0;
  *(this + 639) = &unk_65A11680;
  *(this + 640) = &unk_65A11710;
  *(this + 641) = &unk_65A117A0;
  *(this + 642) = &unk_65A11830;
  *(this + 643) = &unk_65A118C0;
  *(this + 644) = &unk_65A11950;
  *(this + 645) = &unk_65A119E0;
  *(this + 646) = &unk_65A11A70;
  *(this + 647) = &unk_65A11B00;
  *(this + 648) = &unk_65A11B90;
  *(this + 649) = &unk_65A11C20;
  *(this + 650) = &unk_65A11CB0;
  *(this + 651) = &unk_65A11D40;
  *(this + 652) = &unk_65A11DD0;
  *(this + 653) = &unk_65A11E60;
  *(this + 654) = &unk_65A11EF0;
  *(this + 670) = &unk_65A11F80;
  *(this + 671) = &unk_65A12010;
  *(this + 672) = &unk_65A120A0;
  *(this + 673) = &unk_65A12130;
  *(this + 674) = &unk_65A121C0;
  *(this + 675) = &unk_65A12250;
  *(this + 676) = &unk_65A122E0;
  *(this + 677) = &unk_65A12370;
  *(this + 678) = &unk_65A12400;
  *(this + 679) = &unk_65A12490;
  *(this + 680) = &unk_65A12520;
  *(this + 681) = &unk_65A125B0;
  *(this + 682) = &unk_65A12640;
  *(this + 683) = &unk_65A126D0;
  *(this + 684) = &unk_65A12760;
  *(this + 685) = &unk_65A127F0;
  *(this + 690) = &unk_65A12880;
  *(this + 691) = &unk_65A12910;
  *(this + 692) = &unk_65A129A0;
  *(this + 693) = &unk_65A12A30;
  *(this + 694) = &unk_65A12AC0;
  *(this + 695) = &unk_65A12B50;
  *(this + 700) = &unk_65A12BE0;
  *(this + 701) = &unk_65A12C70;
  *(this + 702) = &unk_65A12D00;
  *(this + 703) = &unk_65A12D90;
  *(this + 704) = &unk_65A12E20;
  *(this + 705) = &unk_65A12EB0;
  *(this + 706) = &unk_65A12F40;
  *(this + 707) = &unk_65A12FD0;
  *(this + 708) = &unk_65A13060;
  *(this + 709) = &unk_65A130F0;
  *(this + 710) = &unk_65A13180;
  *(this + 711) = &unk_65A13210;
  *(this + 712) = &unk_65A132A0;
  *(this + 713) = &unk_65A13330;
  *(this + 714) = &unk_65A133C0;
  *(this + 715) = &unk_65A13450;
  *(this + 716) = &unk_65A134E0;
  *(this + 717) = &unk_65A13570;
  *(this + 720) = &unk_65A13600;
  *(this + 721) = &unk_65A13690;
  *(this + 722) = &unk_65A13720;
  *(this + 723) = &unk_65A137B0;
  *(this + 724) = &unk_65A13840;
  *(this + 725) = &unk_65A138D0;
  *(this + 726) = &unk_65A13960;
  *(this + 727) = &unk_65A139F0;
  *(this + 728) = &unk_65A13A80;
  *(this + 729) = &unk_65A13B10;
  *(this + 730) = &unk_65A13BA0;
  *(this + 731) = &unk_65A13C30;
  *(this + 732) = &unk_65A13CC0;
  *(this + 733) = &unk_65A13D50;
  *(this + 734) = &unk_65A13DE0;
  *(this + 735) = &unk_65A13E70;
  *(this + 736) = &unk_65A13F00;
  *(this + 737) = &unk_65A13F90;
  *(this + 738) = &unk_65A14020;
  *(this + 739) = &unk_65A140B0;
  *(this + 740) = &unk_65A14140;
  *(this + 741) = &unk_65A141D0;
  *(this + 742) = &unk_65A14260;
  *(this + 743) = &unk_65A142F0;
  *(this + 744) = &unk_65A14380;
  *(this + 745) = &unk_65A14410;
  *(this + 760) = &unk_65A144A0;
  *(this + 761) = &unk_65A14530;
  *(this + 762) = &unk_65A145C0;
  *(this + 763) = &unk_65A14650;
  *(this + 764) = &unk_65A146E0;
  *(this + 765) = &unk_65A14770;
  *(this + 766) = &unk_65A14800;
  *(this + 767) = &unk_65A14890;
  *(this + 768) = &unk_65A14920;
  *(this + 780) = &unk_65A149B0;
  *(this + 781) = &unk_65A14A40;
  *(this + 782) = &unk_65A14AD0;
  *(this + 790) = &unk_65A14B60;
  *(this + 791) = &unk_65A14BF0;
  *(this + 792) = &unk_65A14C80;
  *(this + 793) = &unk_65A14D10;
  *(this + 794) = &unk_65A14DA0;
  *(this + 795) = &unk_65A14E30;
  *(this + 796) = &unk_65A14EC0;
  *(this + 797) = &unk_65A14F50;
  *(this + 798) = &unk_65A14FE0;
  *(this + 799) = &unk_65A15070;
  *(this + 800) = &unk_65A15100;
  *(this + 801) = &unk_65A15190;
  *(this + 802) = &unk_65A15220;
  *(this + 803) = &unk_65A152B0;
  *(this + 804) = &unk_65A15340;
  *(this + 805) = &unk_65A153D0;
  *(this + 806) = &unk_65A15460;
  *(this + 807) = &unk_65A154F0;
  *(this + 808) = &unk_65A15580;
  *(this + 810) = &unk_65A15610;
  *(this + 811) = &unk_65A156A0;
  *(this + 812) = &unk_65A15730;
  *(this + 813) = &unk_65A157C0;
  *(this + 814) = &unk_65A15850;
  *(this + 815) = &unk_65A158E0;
  *(this + 816) = &unk_65A15970;
  *(this + 817) = &unk_65A15A00;
  *(this + 818) = &unk_65A15A90;
  *(this + 819) = &unk_65A15B20;
  *(this + 820) = &unk_65A15BB0;
  *(this + 821) = &unk_65A15C40;
  *(this + 822) = &unk_65A15CD0;
  *(this + 823) = &unk_65A15D60;
  *(this + 824) = &unk_65A15DF0;
  *(this + 825) = &unk_65A15E80;
  *(this + 826) = &unk_65A15F10;
  *(this + 827) = &unk_65A15FA0;
  *(this + 828) = &unk_65A16030;
  *(this + 829) = &unk_65A160C0;
  *(this + 830) = &unk_65A16150;
  *(this + 831) = &unk_65A161E0;
  *(this + 832) = &unk_65A16270;
  *(this + 850) = &unk_65A16300;
  *(this + 851) = &unk_65A16390;
  *(this + 852) = &unk_65A16420;
  *(this + 853) = &unk_65A164B0;
  *(this + 854) = &unk_65A16540;
  *(this + 855) = &unk_65A165D0;
  *(this + 856) = &unk_65A16660;
  *(this + 857) = &unk_65A166F0;
  *(this + 858) = &unk_65A16780;
  *(this + 859) = &unk_65A16810;
  *(this + 860) = &unk_65A168A0;
  *(this + 861) = &unk_65A16930;
  *(this + 862) = &unk_65A169C0;
  *(this + 863) = &unk_65A16A50;
  *(this + 864) = &unk_65A16AE0;
  *(this + 865) = &unk_65A16B70;
  *(this + 870) = &unk_65A16C00;
  *(this + 871) = &unk_65A16C90;
  *(this + 872) = &unk_65A16D20;
  *(this + 873) = &unk_65A16DB0;
  *(this + 874) = &unk_65A16E40;
  *(this + 875) = &unk_65A16ED0;
  *(this + 880) = &unk_65A16F60;
  *(this + 881) = &unk_65A16FF0;
  *(this + 882) = &unk_65A17080;
  *(this + 883) = &unk_65A17110;
  *(this + 884) = &unk_65A171A0;
  *(this + 885) = &unk_65A17230;
  *(this + 886) = &unk_65A172C0;
  *(this + 887) = &unk_65A17350;
  *(this + 888) = &unk_65A173E0;
  *(this + 889) = &unk_65A17470;
  *(this + 890) = &unk_65A17500;
  *(this + 891) = &unk_65A17590;
  *(this + 900) = &unk_65A17620;
  *(this + 901) = &unk_65A176B0;
  *(this + 902) = &unk_65A17740;
  *(this + 903) = &unk_65A177D0;
  *(this + 904) = &unk_65A17860;
  *(this + 905) = &unk_65A178F0;
  *(this + 906) = &unk_65A17980;
  *(this + 907) = &unk_65A17A10;
  *(this + 908) = &unk_65A17AA0;
  *(this + 909) = &unk_65A17B30;
  *(this + 910) = &unk_65A17BC0;
  *(this + 911) = &unk_65A17C50;
  *(this + 912) = &unk_65A17CE0;
  *(this + 913) = &unk_65A17D70;
  *(this + 914) = &unk_65A17E00;
  *(this + 915) = &unk_65A17E90;
  *(this + 916) = &unk_65A17F20;
  *(this + 917) = &unk_65A17FB0;
  *(this + 918) = &unk_65A18040;
  *(this + 919) = &unk_65A180D0;
  *(this + 920) = &unk_65A18160;
  *(this + 921) = &unk_65A181F0;
  *(this + 922) = &unk_65A18280;
  *(this + 923) = &unk_65A18310;
  *(this + 940) = &unk_65A183A0;
  *(this + 941) = &unk_65A18430;
  *(this + 942) = &unk_65A184C0;
  *(this + 943) = &unk_65A18550;
  *(this + 944) = &unk_65A185E0;
  *(this + 945) = &unk_65A18670;
  *(this + 946) = &unk_65A18700;
  *(this + 947) = &unk_65A18790;
  *(this + 948) = &unk_65A18820;
  *(this + 949) = &unk_65A188B0;
  *(this + 950) = &unk_65A18940;
  *(this + 951) = &unk_65A189D0;
  *(this + 952) = &unk_65A18A60;
  *(this + 953) = &unk_65A18AF0;
  *(this + 954) = &unk_65A18B80;
  *(this + 955) = &unk_65A18C10;
  *(this + 956) = &unk_65A18CA0;
  *(this + 960) = &unk_65A18D30;
  *(this + 961) = &unk_65A18DC0;
  *(this + 962) = &unk_65A18E50;
  *(this + 973) = &unk_65A18EE0;
  *(this + 974) = &unk_65A18F70;
  *(this + 975) = &unk_65A19000;
  *(this + 976) = &unk_65A19090;
  *(this + 977) = &unk_65A19120;
  *(this + 978) = &unk_65A191B0;
  *(this + 979) = &unk_65A19240;
  *(this + 980) = &unk_65A192D0;
  *(this + 981) = &unk_65A19360;
  *(this + 982) = &unk_65A193F0;
  *(this + 983) = &unk_65A19480;
  *(this + 984) = &unk_65A19510;
  *(this + 985) = &unk_65A195A0;
  *(this + 986) = &unk_65A19630;
  *(this + 987) = &unk_65A196C0;
  *(this + 988) = &unk_65A19750;
  *(this + 989) = &unk_65A197E0;
  *(this + 990) = &unk_65A19870;
  *(this + 991) = &unk_65A19900;
  *(this + 992) = &unk_65A19990;
  *(this + 993) = &unk_65A19A20;
  *(this + 994) = &unk_65A19AB0;
  *(this + 995) = &unk_65A19B40;
  *(this + 996) = &unk_65A19BD0;
  *(this + 997) = &unk_65A19C60;
  *(this + 998) = &unk_65A19CF0;
  *(this + 999) = &unk_65A19D80;
  *(this + 1000) = &unk_65A1A9E0;
  *(this + 1001) = &unk_65A1AA70;
  *(this + 1002) = &unk_65A1AB00;
  *(this + 1003) = &unk_65A1AB90;
  *(this + 1004) = &unk_65A1AC20;
  *(this + 1005) = &unk_65A1ACB0;
  *(this + 1006) = &unk_65A1AD40;
  *(this + 1007) = &unk_65A1ADD0;
  *(this + 1008) = &unk_65A1AE60;
  *(this + 1009) = &unk_65A1AEF0;
  *(this + 1010) = &unk_65A1AF80;
  *(this + 1011) = &unk_65A1B010;
  *(this + 1012) = &unk_65A1B0A0;
  *(this + 1013) = &unk_65A1B130;
  *(this + 1014) = &unk_65A1B1C0;
  *(this + 1015) = &unk_65A1B250;
  *(this + 1016) = &unk_65A1B2E0;
  *(this + 1017) = &unk_65A1B370;
  *(this + 1018) = &unk_65A1B400;
  *(this + 1019) = &unk_65A1B490;
  *(this + 1020) = &unk_65A1B520;
  *(this + 1021) = &unk_65A1B5B0;
  *(this + 1022) = &unk_65A1B640;
  *(this + 1023) = &unk_65A1B6D0;
  *(this + 1024) = &unk_65A1B760;
  *(this + 1025) = &unk_65A1B7F0;
  *(this + 1026) = &unk_65A1B880;
  *(this + 1027) = &unk_65A1B910;
  *(this + 1028) = &unk_65A1B9A0;
  *(this + 1029) = &unk_65A1BA30;
  *(this + 1030) = &unk_65A1BAC0;
  *(this + 1031) = &unk_65A1BB50;
  *(this + 1032) = &unk_65A1BBE0;
  *(this + 1033) = &unk_65A1BC70;
  *(this + 1034) = &unk_65A1BD00;
  *(this + 1035) = &unk_65A1BD90;
  *(this + 1036) = &unk_65A1BE20;
  *(this + 1037) = &unk_65A1BEB0;
  *(this + 1038) = &unk_65A1BF40;
  *(this + 1039) = &unk_65A1BFD0;
  *(this + 1040) = &unk_65A1C060;
  *(this + 1041) = &unk_65A1C0F0;
  *(this + 1042) = &unk_65A1C180;
  *(this + 1043) = &unk_65A1C210;
  *(this + 1044) = &unk_65A1C2A0;
  *(this + 1045) = &unk_65A1C330;
  *(this + 1046) = &unk_65A1C3C0;
  *(this + 1047) = &unk_65A1C450;
  *(this + 1048) = &unk_65A1C4E0;
  *(this + 1049) = &unk_65A1C570;
  *(this + 1050) = &unk_65A1C600;
  *(this + 1051) = &unk_65A1C690;
  *(this + 1052) = &unk_65A1C720;
  *(this + 1053) = &unk_65A1C7B0;
  *(this + 1054) = &unk_65A1C840;
  *(this + 1055) = &unk_65A1C8D0;
  *(this + 1056) = &unk_65A1C960;
  *(this + 1057) = &unk_65A1C9F0;
  *(this + 1058) = &unk_65A1CA80;
  *(this + 1059) = &unk_65A1CB10;
  *(this + 1060) = &unk_65A1CBA0;
  *(this + 1061) = &unk_65A1CC30;
  *(this + 1062) = &unk_65A1CCC0;
  *(this + 1063) = &unk_65A1CD50;
  *(this + 1064) = &unk_65A1CDE0;
  *(this + 1065) = &unk_65A1CE70;
  *(this + 1066) = &unk_65A1CF00;
  *(this + 1067) = &unk_65A1CF90;
  *(this + 1068) = &unk_65A1D020;
  *(this + 1069) = &unk_65A1D0B0;
  *(this + 1070) = &unk_65A1D140;
  *(this + 1071) = &unk_65A1D1D0;
  *(this + 1072) = &unk_65A1D260;
  *(this + 1073) = &unk_65A1D2F0;
  *(this + 1074) = &unk_65A1D380;
  *(this + 1075) = &unk_65A1D410;
  *(this + 1076) = &unk_65A1D4A0;
  *(this + 1077) = &unk_65A1D530;
  *(this + 1078) = &unk_65A1D5C0;
  *(this + 1079) = &unk_65A1D650;
  *(this + 1080) = &unk_65A1D6E0;
  *(this + 1081) = &unk_65A1D770;
  *(this + 1082) = &unk_65A1D800;
  *(this + 1083) = &unk_65A1D890;
  *(this + 1084) = &unk_65A1D920;
  *(this + 1085) = &unk_65A1D9B0;
  *(this + 1086) = &unk_65A1DA40;
  *(this + 1087) = &unk_65A1DAD0;
  *(this + 1088) = &unk_65A1DB60;
  *(this + 1089) = &unk_65A1DBF0;
  *(this + 1090) = &unk_65A1DC80;
  *(this + 1091) = &unk_65A1DD10;
  *(this + 1092) = &unk_65A1DDA0;
  *(this + 1093) = &unk_65A1DE30;
  *(this + 1094) = &unk_65A1DEC0;
  *(this + 1095) = &unk_65A1DF50;
  *(this + 1096) = &unk_65A1DFE0;
  *(this + 1097) = &unk_65A1E070;
  *(this + 1098) = &unk_65A1E100;
  *(this + 1099) = &unk_65A1E190;
  *(this + 1100) = &unk_65A1E220;
  *(this + 1101) = &unk_65A1E2B0;
  *(this + 1102) = &unk_65A1E340;
  *(this + 1103) = &unk_65A1E3D0;
  *(this + 1104) = &unk_65A1E460;
  *(this + 1105) = &unk_65A1E4F0;
  *(this + 1106) = &unk_65A1E580;
  *(this + 1107) = &unk_65A1E610;
  *(this + 1108) = &unk_65A1E6A0;
  *(this + 1109) = &unk_65A1E730;
  *(this + 1110) = &unk_65A1E7C0;
  *(this + 1120) = &unk_65A1E850;
  *(this + 1121) = &unk_65A1E8E0;
  *(this + 1122) = &unk_65A1E970;
  *(this + 1123) = &unk_65A1EA00;
  *(this + 1124) = &unk_65A1EA90;
  *(this + 1125) = &unk_65A1EB20;
  *(this + 1126) = &unk_65A1EBB0;
  *(this + 1127) = &unk_65A1EC40;
  *(this + 1128) = &unk_65A1ECD0;
  *(this + 1129) = &unk_65A1ED60;
  *(this + 1130) = &unk_65A1EDF0;
  *(this + 1131) = &unk_65A1EE80;
  *(this + 1132) = &unk_65A1EF10;
  *(this + 1133) = &unk_65A1EFA0;
  *(this + 1134) = &unk_65A1F030;
  *(this + 1135) = &unk_65A1F0C0;
  *(this + 1136) = &unk_65A1F150;
  *(this + 1137) = &unk_65A1F1E0;
  *(this + 1138) = &unk_65A1F270;
  *(this + 1139) = &unk_65A1F300;
  *(this + 1140) = &unk_65A1F390;
  *(this + 1141) = &unk_65A1F420;
  *(this + 1142) = &unk_65A1F4B0;
  *(this + 1143) = &unk_65A1F540;
  *(this + 1144) = &unk_65A1F5D0;
  *(this + 1145) = &unk_65A1F660;
  *(this + 1146) = &unk_65A1F6F0;
  *(this + 1147) = &unk_65A1F780;
  *(this + 1148) = &unk_65A1F810;
  *(this + 1149) = &unk_65A1F8A0;
  *(this + 1151) = &unk_65A20FB0;
  *(this + 1152) = &unk_65A21040;
  *(this + 1153) = &unk_65A210D0;
  *(this + 1154) = &unk_65A21160;
  *(this + 1155) = &unk_65A211F0;
  *(this + 1156) = &unk_65A21280;
  *(this + 1157) = &unk_65A21310;
  *(this + 1158) = &unk_65A213A0;
  *(this + 1159) = &unk_65A21430;
  *(this + 1160) = &unk_65A214C0;
  *(this + 1161) = &unk_65A21550;
  *(this + 1162) = &unk_65A215E0;
  *(this + 1163) = &unk_65A21670;
  *(this + 1164) = &unk_65A21700;
  *(this + 1165) = &unk_65A21790;
  *(this + 1166) = &unk_65A21820;
  *(this + 1167) = &unk_65A218B0;
  *(this + 1168) = &unk_65A21940;
  *(this + 1169) = &unk_65A219D0;
  *(this + 1170) = &unk_65A21A60;
  *(this + 1171) = &unk_65A21AF0;
  *(this + 1172) = &unk_65A21B80;
  *(this + 1173) = &unk_65A21C10;
  *(this + 1174) = &unk_65A21CA0;
  *(this + 1175) = &unk_65A21D30;
  *(this + 1176) = &unk_65A21DC0;
  *(this + 1177) = &unk_65A21E50;
  *(this + 1194) = &unk_65A21EE0;
  *(this + 1195) = &unk_65A21F70;
  *(this + 1196) = &unk_65A22000;
  *(this + 1197) = &unk_65A22090;
  *(this + 1198) = &unk_65A22120;
  *(this + 1199) = &unk_65A221B0;
  *(this + 1200) = &unk_65A22240;
  *(this + 1201) = &unk_65A222D0;
  *(this + 1202) = &unk_65A22360;
  *(this + 1203) = &unk_65A223F0;
  *(this + 1204) = &unk_65A22480;
  *(this + 1205) = &unk_65A22510;
  *(this + 1206) = &unk_65A225A0;
  *(this + 1207) = &unk_65A22630;
  *(this + 1208) = &unk_65A226C0;
  *(this + 1209) = &unk_65A22750;
  *(this + 1210) = &unk_65A227E0;
  *(this + 1211) = &unk_65A22870;
  *(this + 1212) = &unk_65A22900;
  *(this + 1213) = &unk_65A22990;
  *(this + 1214) = &unk_65A22A20;
  *(this + 1215) = &unk_65A22AB0;
  *(this + 1216) = &unk_65A22B40;
  *(this + 1217) = &unk_65A22BD0;
  *(this + 1218) = &unk_65A22C60;
  *(this + 1219) = &unk_65A22CF0;
  *(this + 1220) = &unk_65A22D80;
  *(this + 1221) = &unk_65A22E10;
  *(this + 1222) = &unk_65A22EA0;
  *(this + 1223) = &unk_65A22F30;
  *(this + 1224) = &unk_65A22FC0;
  *(this + 1225) = &unk_65A23050;
  *(this + 1226) = &unk_65A230E0;
  *(this + 1227) = &unk_65A23170;
  *(this + 1228) = &unk_65A23200;
  *(this + 1229) = &unk_65A23290;
  *(this + 1230) = &unk_65A23320;
  *(this + 1231) = &unk_65A233B0;
  *(this + 1232) = &unk_65A23440;
  *(this + 1233) = &unk_65A234D0;
  *(this + 1234) = &unk_65A23560;
  *(this + 1235) = &unk_65A235F0;
  *(this + 1236) = &unk_65A23680;
  *(this + 1237) = &unk_65A23710;
  *(this + 1238) = &unk_65A237A0;
  *(this + 1280) = &unk_65A23830;
  *(this + 1281) = &unk_65A238C0;
  *(this + 1300) = &unk_65A19E10;
  *(this + 1301) = &unk_65A19EA0;
  *(this + 1600) = &unk_65A19F30;
  *(this + 1601) = &unk_65A19FC0;
  *(this + 1602) = &unk_65A1A050;
  *(this + 1603) = &unk_65A1A0E0;
  *(this + 1604) = &unk_65A1A170;
  *(this + 1605) = &unk_65A1A200;
  *(this + 1606) = &unk_65A1A290;
  *(this + 1607) = &unk_65A1A320;
  *(this + 1608) = &unk_65A1A3B0;
  *(this + 1609) = &unk_65A1A440;
  *(this + 1800) = &unk_65A1A4D0;
  *(this + 1801) = &unk_65A1A560;
  *(this + 1802) = &unk_65A1A5F0;
  *(this + 1803) = &unk_65A1A680;
  *(this + 1804) = &unk_65A1A710;
  *(this + 1805) = &unk_65A1A7A0;
  *(this + 1806) = &unk_65A1A830;
  *(this + 1807) = &unk_65A1A8C0;
  *(this + 1808) = &unk_65A1A950;
  *(this + 1820) = &unk_65A20590;
  *(this + 1821) = &unk_65A20620;
  *(this + 1822) = &unk_65A206B0;
  *(this + 1823) = &unk_65A20740;
  *(this + 1824) = &unk_65A207D0;
  *(this + 1825) = &unk_65A20860;
  *(this + 1826) = &unk_65A208F0;
  *(this + 1827) = &unk_65A20980;
  *(this + 1828) = &unk_65A20A10;
  *(this + 1829) = &unk_65A20AA0;
  *(this + 1830) = &unk_65A20B30;
  *(this + 1831) = &unk_65A20BC0;
  *(this + 1832) = &unk_65A20C50;
  *(this + 1960) = &unk_65A1F930;
  *(this + 1961) = &unk_65A1F9C0;
  *(this + 1962) = &unk_65A1FA50;
  *(this + 1963) = &unk_65A1FAE0;
  *(this + 1964) = &unk_65A1FB70;
  *(this + 1965) = &unk_65A1FC00;
  *(this + 1966) = &unk_65A1FC90;
  *(this + 1967) = &unk_65A1FD20;
  *(this + 1968) = &unk_65A1FDB0;
  *(this + 2060) = &unk_65A20CE0;
  *(this + 2061) = &unk_65A20D70;
  *(this + 2062) = &unk_65A20E00;
  *(this + 2063) = &unk_65A20E90;
  *(this + 2064) = &unk_65A20F20;
  *(this + 2160) = &unk_65A1FE40;
  *(this + 2161) = &unk_65A1FED0;
  *(this + 2162) = &unk_65A1FF60;
  *(this + 2163) = &unk_65A1FFF0;
  *(this + 2164) = &unk_65A20080;
  *(this + 2165) = &unk_65A20110;
  *(this + 2166) = &unk_65A201A0;
  *(this + 2167) = &unk_65A20230;
  *(this + 2168) = &unk_65A202C0;
  *(this + 2169) = &unk_65A20350;
  *(this + 2170) = &unk_65A203E0;
  *(this + 2171) = &unk_65A20470;
  *(this + 2172) = &unk_65A20500;
  *(this + 2980) = &unk_65A0B9B0;
  *(this + 2981) = &unk_65A0BA40;
  *(this + 2982) = &unk_65A0BAD0;
  *(this + 2983) = &unk_65A0BB60;
  *(this + 2984) = &unk_65A0BBF0;
  *(this + 3003) = &unk_65A23950;
  *(this + 3004) = &unk_65A239E0;
  *(this + 3005) = &unk_65A23A70;
  *(this + 3006) = &unk_65A23B00;
  *(this + 3007) = &unk_65A23B90;
  *(this + 3008) = &unk_65A23C20;
}

//----- (65975480) --------------------------------------------------------
bool __thiscall Packet_ID_STORAGE_structA_read_blockB_3(char *this, unsigned int *a2)
{
  int v3; // edi
  bool result; // al

  v3 = 3;
  do
  {
    result = RakNet::BitStream::ReadBit(a2);
    if ( result )
      result = ItemEntryWithId_Read(this, a2);
    this += 48;
    --v3;
  }
  while ( v3 );
  return result;
}

//----- (659755C0) --------------------------------------------------------
char *__thiscall sub_659755C0(unsigned __int16 *this, char *a2)
{
  int v3; // ebx
  char *result; // eax

  v3 = 3;
  do
  {
    if ( *(_DWORD *)this )
    {
      BitStream_WriteBit1(a2);
      result = ItemStructAPlus_u32_write(this, a2);
    }
    else
    {
      result = BitStream_WriteBit0(a2);
    }
    this += 24;
    --v3;
  }
  while ( v3 );
  return result;
}

//----- (65975600) --------------------------------------------------------
void __thiscall sub_65975600(char *this, _DWORD *a2)
{
  char *v2; // esi
  int v3; // edi
  _DWORD *v4; // [esp+Ch] [ebp-Ch]
  int v5; // [esp+10h] [ebp-8h]
  int v6; // [esp+14h] [ebp-4h]

  v2 = this + 8;
  v6 = 3;
  do
  {
    if ( *((_DWORD *)v2 - 2) )
    {
      LOBYTE(v5) = sub_65933EC0(g_ItemTemplateById, *((_WORD *)v2 - 2));
      if ( !sub_65933270(g_ItemTemplateById, *((_WORD *)v2 - 2), v5) )
      {
        v3 = a2[1];
        v4 = ItemChangeEntry_Create(v3, *(_DWORD *)(v3 + 4), v2 - 8);
        ItemChangeList_IncrementSize(a2, 1u);
        *(_DWORD *)(v3 + 4) = v4;
        *(_DWORD *)v4[1] = v4;
        *((_DWORD *)v2 - 2) = 0;
        *((_WORD *)v2 - 2) = 0;
        *((_WORD *)v2 - 1) = 0;
        *((_WORD *)v2 + 1) = 0;
        v2[4] = 100;
        v2[5] = 0;
        *((_DWORD *)v2 + 2) = 0;
        *((_DWORD *)v2 + 3) = 0;
        *((_DWORD *)v2 + 4) = 0;
        v2[21] = 0;
        v2[22] = 0;
        v2[20] = 0;
        *(_WORD *)v2 = 0;
        *(_DWORD *)(v2 + 23) = 0;
        *((_DWORD *)v2 + 7) = 0;
        *((_DWORD *)v2 + 8) = 0;
        v2[36] = 0;
      }
    }
    v2 += 48;
    --v6;
  }
  while ( v6 );
}
// 6597563E: variable 'v5' is possibly undefined
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (659756D0) --------------------------------------------------------
unsigned __int8 __thiscall sub_659756D0(_BYTE *this, _DWORD *a2)
{
  unsigned __int8 result; // al
  int v4; // esi
  _DWORD *v5; // edi
  unsigned __int8 v6; // [esp+Fh] [ebp-1h]

  result = 0;
  v6 = 0;
  do
  {
    if ( *(_DWORD *)this )
    {
      *(this + 44) = result + 1;
      v4 = a2[1];
      v5 = ItemChangeEntry_Create(v4, *(_DWORD *)(v4 + 4), this);
      ItemChangeList_IncrementSize(a2, 1u);
      result = v6;
      *(_DWORD *)(v4 + 4) = v5;
      *(_DWORD *)v5[1] = v5;
    }
    ++result;
    this += 48;
    v6 = result;
  }
  while ( result < 3u );
  return result;
}

//----- (65975730) --------------------------------------------------------
bool __thiscall Packet_ID_STORAGE_structA_read_blockA_12(char *this, unsigned int *a2)
{
  int v3; // edi
  bool result; // al

  v3 = 12;
  do
  {
    result = RakNet::BitStream::ReadBit(a2);
    if ( result )
      result = ItemEntryWithId_Read(this, a2);
    this += 48;
    --v3;
  }
  while ( v3 );
  return result;
}

//----- (659757F0) --------------------------------------------------------
char *__thiscall sub_659757F0(unsigned __int16 *this, char *a2)
{
  int v3; // ebx
  char *result; // eax

  v3 = 12;
  do
  {
    if ( *(_DWORD *)this )
    {
      BitStream_WriteBit1(a2);
      result = ItemStructAPlus_u32_write(this, a2);
    }
    else
    {
      result = BitStream_WriteBit0(a2);
    }
    this += 24;
    --v3;
  }
  while ( v3 );
  return result;
}

//----- (65975830) --------------------------------------------------------
void __thiscall sub_65975830(char *this, _DWORD *a2)
{
  char *v2; // esi
  int v3; // edi
  _DWORD *v4; // [esp+Ch] [ebp-Ch]
  int v5; // [esp+10h] [ebp-8h]
  int v6; // [esp+14h] [ebp-4h]

  v2 = this + 8;
  v6 = 12;
  do
  {
    if ( *((_DWORD *)v2 - 2) )
    {
      LOBYTE(v5) = sub_65933EC0(g_ItemTemplateById, *((_WORD *)v2 - 2));
      if ( !sub_65933270(g_ItemTemplateById, *((_WORD *)v2 - 2), v5) )
      {
        v3 = a2[1];
        v4 = ItemChangeEntry_Create(v3, *(_DWORD *)(v3 + 4), v2 - 8);
        ItemChangeList_IncrementSize(a2, 1u);
        *(_DWORD *)(v3 + 4) = v4;
        *(_DWORD *)v4[1] = v4;
        *((_DWORD *)v2 - 2) = 0;
        *((_WORD *)v2 - 2) = 0;
        *((_WORD *)v2 - 1) = 0;
        *((_WORD *)v2 + 1) = 0;
        v2[4] = 100;
        v2[5] = 0;
        *((_DWORD *)v2 + 2) = 0;
        *((_DWORD *)v2 + 3) = 0;
        *((_DWORD *)v2 + 4) = 0;
        v2[21] = 0;
        v2[22] = 0;
        v2[20] = 0;
        *(_WORD *)v2 = 0;
        *(_DWORD *)(v2 + 23) = 0;
        *((_DWORD *)v2 + 7) = 0;
        *((_DWORD *)v2 + 8) = 0;
        v2[36] = 0;
      }
    }
    v2 += 48;
    --v6;
  }
  while ( v6 );
}
// 6597586E: variable 'v5' is possibly undefined
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65975900) --------------------------------------------------------
unsigned __int8 __thiscall sub_65975900(_BYTE *this, _DWORD *a2)
{
  unsigned __int8 result; // al
  int v4; // esi
  _DWORD *v5; // edi
  unsigned __int8 v6; // [esp+Fh] [ebp-1h]

  result = 0;
  v6 = 0;
  do
  {
    if ( *(_DWORD *)this )
    {
      *(this + 44) = result + 5;
      v4 = a2[1];
      v5 = ItemChangeEntry_Create(v4, *(_DWORD *)(v4 + 4), this);
      ItemChangeList_IncrementSize(a2, 1u);
      result = v6;
      *(_DWORD *)(v4 + 4) = v5;
      *(_DWORD *)v5[1] = v5;
    }
    ++result;
    this += 48;
    v6 = result;
  }
  while ( result < 0xCu );
  return result;
}

//----- (65975960) --------------------------------------------------------
bool __thiscall Packet_ID_STORAGE_structA_read_blockC_6(char *this, unsigned int *a2)
{
  int v3; // edi
  bool result; // al

  v3 = 6;
  do
  {
    result = RakNet::BitStream::ReadBit(a2);
    if ( result )
      result = ItemEntryWithId_Read(this, a2);
    this += 48;
    --v3;
  }
  while ( v3 );
  return result;
}

//----- (65975A20) --------------------------------------------------------
char *__thiscall sub_65975A20(unsigned __int16 *this, char *a2)
{
  int v3; // ebx
  char *result; // eax

  v3 = 6;
  do
  {
    if ( *(_DWORD *)this )
    {
      BitStream_WriteBit1(a2);
      result = ItemStructAPlus_u32_write(this, a2);
    }
    else
    {
      result = BitStream_WriteBit0(a2);
    }
    this += 24;
    --v3;
  }
  while ( v3 );
  return result;
}

//----- (65975A60) --------------------------------------------------------
void __thiscall sub_65975A60(char *this, _DWORD *a2)
{
  char *v2; // esi
  int v3; // edi
  _DWORD *v4; // [esp+Ch] [ebp-Ch]
  int v5; // [esp+10h] [ebp-8h]
  int v6; // [esp+14h] [ebp-4h]

  v2 = this + 8;
  v6 = 6;
  do
  {
    if ( *((_DWORD *)v2 - 2) )
    {
      LOBYTE(v5) = sub_65933EC0(g_ItemTemplateById, *((_WORD *)v2 - 2));
      if ( !sub_65933270(g_ItemTemplateById, *((_WORD *)v2 - 2), v5) )
      {
        v3 = a2[1];
        v4 = ItemChangeEntry_Create(v3, *(_DWORD *)(v3 + 4), v2 - 8);
        ItemChangeList_IncrementSize(a2, 1u);
        *(_DWORD *)(v3 + 4) = v4;
        *(_DWORD *)v4[1] = v4;
        *((_DWORD *)v2 - 2) = 0;
        *((_WORD *)v2 - 2) = 0;
        *((_WORD *)v2 - 1) = 0;
        *((_WORD *)v2 + 1) = 0;
        v2[4] = 100;
        v2[5] = 0;
        *((_DWORD *)v2 + 2) = 0;
        *((_DWORD *)v2 + 3) = 0;
        *((_DWORD *)v2 + 4) = 0;
        v2[21] = 0;
        v2[22] = 0;
        v2[20] = 0;
        *(_WORD *)v2 = 0;
        *(_DWORD *)(v2 + 23) = 0;
        *((_DWORD *)v2 + 7) = 0;
        *((_DWORD *)v2 + 8) = 0;
        v2[36] = 0;
      }
    }
    v2 += 48;
    --v6;
  }
  while ( v6 );
}
// 65975A9E: variable 'v5' is possibly undefined
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (65975B30) --------------------------------------------------------
unsigned __int8 __thiscall sub_65975B30(_BYTE *this, _DWORD *a2)
{
  unsigned __int8 result; // al
  int v4; // esi
  _DWORD *v5; // edi
  unsigned __int8 v6; // [esp+Fh] [ebp-1h]

  result = 0;
  v6 = 0;
  do
  {
    if ( *(_DWORD *)this )
    {
      *(this + 44) = result + 23;
      v4 = a2[1];
      v5 = ItemChangeEntry_Create(v4, *(_DWORD *)(v4 + 4), this);
      ItemChangeList_IncrementSize(a2, 1u);
      result = v6;
      *(_DWORD *)(v4 + 4) = v5;
      *(_DWORD *)v5[1] = v5;
    }
    ++result;
    this += 48;
    v6 = result;
  }
  while ( result < 6u );
  return result;
}

//----- (65975DB0) --------------------------------------------------------
char *__thiscall BitStream_WriteU32_Compressed(int *this, char *a2)
{
  char v3[4]; // [esp+0h] [ebp-8h] BYREF
  int v4; // [esp+4h] [ebp-4h] BYREF

  v4 = *this;
  if ( !Net_IsBigEndian() )
    return BitStream_WriteBitsCompressed(a2, (char *)&v4, 0x20u, 1);
  ByteSwapCopy((int)&v4, (int)v3, 4u);
  return BitStream_WriteBitsCompressed(a2, v3, 0x20u, 1);
}

//----- (659A5290) --------------------------------------------------------
int Init_ILTClient_APIHolder()
{
  CAPIHolder_ILTClient_Ctor(dword_65A5C16C, (int)"ILTClient.Default", &g_pILTClient, 404);
  return atexit(sub_659A6D40);
}
// 65A5C16C: using guessed type _DWORD dword_65A5C16C[4];

//----- (659A64A0) --------------------------------------------------------
int Ensure_BitstreamTables_Init()
{
  memset(g_ItemTemplateById, 0, 0x2F04u);
  Init_BitstreamTables(g_ItemTemplateById);
  return atexit(nullsub_828);
}
// 65AC3FA8: using guessed type int g_ItemTemplateById[];

//----- (659A6C40) --------------------------------------------------------
void sub_659A6C40()
{
  int *v0; // esi

  v0 = (int *)dword_65A5A5D0;
  if ( dword_65A5A5D0 )
  {
    if ( dword_65A5A5D4 < 1 )
    {
      LinkedList_Remove_Thunk((int *)dword_65A5A5D0 + 6);
      LinkedList_Remove_Thunk(v0 + 3);
      LinkedList_Remove_Thunk(v0);
      operator delete(v0);
      dword_65A5A5D0 = 0;
    }
  }
}
// 65A5A5D4: using guessed type int dword_65A5A5D4;

//----- (659A6C90) --------------------------------------------------------
void __cdecl sub_659A6C90()
{
  JUMPOUT(0x65720860);
}
// 659A6C95: control flows out of bounds to 65720860

//----- (659A6D40) --------------------------------------------------------
void __cdecl sub_659A6D40()
{
  JUMPOUT(0x65736680);
}
// 659A6D45: control flows out of bounds to 65736680

// nfuncs=3941 queued=3275 decompiled=3275 lumina nreq=0 worse=0 better=0
#error "There were 1 decompilation failure(s) on 3275 function(s)"
